{% load static %}
{% load get_menu_json %}
{% get_user_menu as USER_MENU %}

{% block extra_style %}
{% endblock %}
<nav id="{{ id|default:'' }}" class="gn-menu gn-menu-symmetric">
    <div class="gn-menu-container">
        <div class="gn-menu-content">
            <div class="gn-menu-content-left">
                {% block left_menu %}
                <ul class="gn-menu-list">
                    <li>
                        <a href="{% block logo_href %}/{% endblock %}">
                            {% if custom_theme.logo and custom_theme.logo.url %}
                                <img src="{{ custom_theme.logo.url }}">
                            {% else %}
                                <img src="/static/mapstore/img/geonode-logo.svg">
                            {% endif %}
                        </a>
                    </li>
                </ul>
                {% endblock %}
            </div>
            <div class="gn-menu-content-center">
                {% block center_menu %}
                    {% include './search_bar.html' %}
                {% endblock %}
            </div>
            <div class="gn-menu-content-right">
                {% block right_menu %}
                <ul class="gn-menu-list">
                    {% for menu_item in USER_MENU %}
                        {% include './menu_item.html' with menu_item=menu_item align_right=True %}
                    {% endfor %}
                </ul>
                {% endblock %}
            </div>
        </div>
    </div>
</nav>

{% block extra_script%}
    <script src="{% static "lib/js/jquery.min.js" %}"></script>
    <script src="{% static "lib/js/bootstrap.min.js" %}"></script>
    <script type="text/javascript">
        $(function () {
            var signIn = document.getElementById("sign-in")
            if(signIn){
                var href = signIn.getAttribute("href");
                var url_parts = window.location.href.split(window.location.pathname)
                var path_name = encodeURIComponent(window.location.pathname + url_parts[url_parts.length-1])
                signIn.setAttribute("href", href.slice(0, -1).concat(path_name))
            }
        });
    </script>
{% endblock extra_script %}
