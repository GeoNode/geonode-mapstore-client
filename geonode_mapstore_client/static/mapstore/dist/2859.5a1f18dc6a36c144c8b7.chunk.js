(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2859],{33528:(e,t,r)=>{"use strict";r.d(t,{gJ:()=>n,Oj:()=>i,jp:()=>o,CM:()=>a,DU:()=>u,aO:()=>c,v6:()=>l,K8:()=>s,IN:()=>f,zh:()=>p,AH:()=>d,Ub:()=>y,_9:()=>v,JB:()=>m,oh:()=>b,AY:()=>E,yi:()=>g,SW:()=>O,Hk:()=>h,iQ:()=>R,dY:()=>S,$:()=>T,_u:()=>A,gG:()=>w,DI:()=>I,dZ:()=>x,qw:()=>_,f$:()=>D,bZ:()=>F,$O:()=>P,sF:()=>G,Gk:()=>U,vO:()=>C,ut:()=>M,MK:()=>j,VV:()=>L,B8:()=>N,VM:()=>W,a3:()=>B,Xp:()=>Y,DA:()=>k,sK:()=>q,yA:()=>V,r:()=>H,iB:()=>Z,EH:()=>$,Yd:()=>K,Hg:()=>z,Lz:()=>X,ye:()=>J,Jb:()=>Q,d:()=>ee,fT:()=>te,Ib:()=>re,Pl:()=>ne,UB:()=>ie,Uh:()=>oe,QT:()=>ae,oL:()=>ue,Ap:()=>ce,KD:()=>le,Z_:()=>se,Vw:()=>fe,sY:()=>pe,kA:()=>de,gr:()=>ye,pX:()=>ve,F5:()=>me,MO:()=>be,dq:()=>Ee,DY:()=>ge,oO:()=>Oe,uF:()=>he,a8:()=>Re,Pv:()=>Se,an:()=>Te,lg:()=>Ae,nY:()=>we,nG:()=>Ie,lx:()=>xe,$S:()=>_e,gc:()=>De,Uz:()=>Fe,fO:()=>Pe,$E:()=>Ge,cE:()=>Ue,JK:()=>Ce,YV:()=>Me,t9:()=>je,YG:()=>Le,HT:()=>Ne,MY:()=>We,ve:()=>Be,hB:()=>Ye,Ox:()=>ke,zd:()=>qe,aT:()=>Ve,VH:()=>He,Yb:()=>Ze,Jr:()=>$e,pP:()=>Ke});var n="FEATUREGRID:SET_UP",i="FEATUREGRID:SELECT_FEATURES",o="FEATUREGRID:DESELECT_FEATURES",a="FEATUREGRID:CLEAR_SELECTION",u="FEATUREGRID:SET_SELECTION_OPTIONS",c="FEATUREGRID:TOGGLE_MODE",l="FEATUREGRID:TOGGLE_FEATURES_SELECTION",s="FEATUREGRID:FEATURES_MODIFIED",f="FEATUREGRID:NEW_FEATURE",p="FEATUREGRID:SAVE_CHANGES",d="FEATUREGRID:SAVING",y="FEATUREGRID:START_EDITING_FEATURE",v="FEATUREGRID:START_DRAWING_FEATURE",m="FEATUREGRID:DELETE_GEOMETRY",b="FEATUREGRID:DELETE_GEOMETRY_FEATURE",E="FEATUREGRID:SAVE_SUCCESS",g="FEATUREGRID:CLEAR_CHANGES",O="FEATUREGRID:SAVE_ERROR",h="FEATUREGRID:DELETE_SELECTED_FEATURES",R="SET_FEATURES",S="FEATUREGRID:SORT_BY",T="FEATUREGRID:SET_LAYER",A="QUERY:UPDATE_FILTER",w="FEATUREGRID:CHANGE_PAGE",I="FEATUREGRID:GEOMETRY_CHANGED",x="DOCK_SIZE_FEATURES",_="FEATUREGRID:TOGGLE_TOOL",D="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",F="ASK_CLOSE_FEATURE_GRID_CONFIRM",P="FEATUREGRID:OPEN_GRID",G="FEATUREGRID:CLOSE_GRID",U="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",C="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",M="FEATUREGRID:SET_PERMISSION",j="FEATUREGRID:DISABLE_TOOLBAR",L="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",N="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",W="FEATUREGRID:ADVANCED_SEARCH",B="FEATUREGRID:ZOOM_ALL",Y="FEATUREGRID:INIT_PLUGIN",k="FEATUREGRID:SIZE_CHANGE",q="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",V="FEATUREGRID:HIDE_SYNC_POPOVER",H="FEATUREGRID:UPDATE_EDITORS_OPTIONS",Z="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",$={EDIT:"EDIT",VIEW:"VIEW"},K="FEATUREGRID:START_SYNC_WMS",z="FEATUREGRID:STOP_SYNC_WMS",X="STORE_ADVANCED_SEARCH_FILTER",J="LOAD_MORE_FEATURES",Q="FEATUREGRID:QUERY_RESULT",ee="FEATUREGRID:SET_TIME_SYNC",te="FEATUREGRID:SET_PAGINATION";function re(){return{type:q}}function ne(){return{type:V}}function ie(e,t){return{type:Q,features:e,pages:t}}function oe(e){return{type:X,filterObj:e}}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Y,options:e}}function ue(){return{type:U}}function ce(){return{type:C}}function le(e,t){return{type:i,features:e,append:t}}function se(e){return{type:n,options:e}}function fe(e){return{type:I,features:e}}function pe(){return{type:y}}function de(){return{type:v}}function ye(e){return{type:o,features:e}}function ve(){return{type:m}}function me(e){return{type:b,features:e}}function be(){return{type:a}}function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,r=void 0!==t&&t;return{type:u,multiselect:r}}function ge(e,t){return{type:S,sortBy:e,sortOrder:t}}function Oe(e,t){return{type:w,page:e,size:t}}function he(e){return{type:T,id:e}}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:A,update:e,append:t}}function Se(e,t){return{type:_,tool:e,value:t}}function Te(e,t,r){return{type:D,name:e,key:t,value:r}}function Ae(){return{type:c,mode:$.EDIT}}function we(){return{type:c,mode:$.VIEW}}function Ie(e,t){return{type:s,features:e,updated:t}}function xe(e){return{type:f,features:e}}function _e(){return{type:p}}function De(){return{type:E}}function Fe(){return{type:h}}function Pe(){return{type:d}}function Ge(){return{type:g}}function Ue(){return{type:O}}function Ce(){return{type:F}}function Me(){return{type:G}}function je(){return{type:P}}function Le(e){return{type:j,disabled:e}}function Ne(e){return{type:M,permission:e}}function We(){return{type:W}}function Be(){return{type:B}}function Ye(){return{type:K}}function ke(e,t){return{type:k,size:e,dockProps:t}}var qe=function(e){return{type:J,pages:e}},Ve=function(e){return{type:L,activated:e}},He=function(e){return{type:N,deactivated:e}},Ze=function(e){return{type:ee,value:e}},$e=function(e){return{type:te,size:e}},Ke=function(e){return{type:Z,updateFilterAction:e}}},21914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>i,km:()=>o,Ih:()=>a,Xw:()=>u,Pn:()=>c,DZ:()=>l,e8:()=>s,E0:()=>f,F9:()=>p,X_:()=>d,pb:()=>y,qb:()=>v,Re:()=>m,ih:()=>b,xy:()=>E,jL:()=>g,oz:()=>O,ph:()=>h,lF:()=>R,gG:()=>S,cb:()=>T,GI:()=>A,B1:()=>w,fv:()=>I,gc:()=>x,zX:()=>_,ZF:()=>D,Zb:()=>F,Fm:()=>P,sV:()=>G,Mn:()=>U,LU:()=>C,XP:()=>M,WU:()=>j,JB:()=>L,g:()=>N,ws:()=>W,HP:()=>B,aN:()=>Y,Pg:()=>q,u0:()=>V,TM:()=>H,PM:()=>Z,lK:()=>$,sv:()=>K,MO:()=>z,oO:()=>X,Mc:()=>J,Zw:()=>Q,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>ne,Y$:()=>ie});var n=r(47310),i="LOAD_FEATURE_INFO",o="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",u="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",l="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",f="SHOW_MAPINFO_MARKER",p="HIDE_MAPINFO_MARKER",d="SHOW_REVERSE_GEOCODE",y="HIDE_REVERSE_GEOCODE",v="GET_VECTOR_INFO",m="NO_QUERYABLE_LAYERS",b="CLEAR_WARNING",E="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",O="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",h="TOGGLE_MAPINFO_STATE",R="UPDATE_CENTER_TO_MARKER",S="IDENTIFY:CHANGE_PAGE",T="IDENTIFY:CLOSE_IDENTIFY",A="IDENTIFY:CHANGE_FORMAT",w="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",I="IDENTIFY:EDIT_LAYER_FEATURES",x="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",_="IDENTIFY:SET_MAP_TRIGGER",D="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",F="IDENTIFY:SET_SHOW_IN_MAP_POPUP";function P(e,t,r,n,o){return{type:i,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:o}}function G(e,t,r,n){return{type:o,error:t,reqId:e,requestParams:r,layerMetadata:n}}function U(e,t,r,n){return{type:a,reqId:e,exceptions:t,requestParams:r,layerMetadata:n}}function C(){return{type:m}}function M(){return{type:b}}function j(e,t){return{type:c,reqId:e,request:t}}function L(e,t,r,n){return{type:v,layer:e,request:t,metadata:r,queryableLayers:n}}function N(){return{type:l}}function W(e){return{type:s,infoFormat:e}}function B(){return{type:f}}function Y(){return{type:p}}function k(e){return{type:d,reverseGeocodeData:e.data}}function q(e){return function(t){n.Z.reverseGeocode(e).then((function(e){t(k(e))})).catch((function(e){t(k(e))}))}}function V(){return{type:y}}function H(){return{type:h}}function Z(e){return{type:R,status:e}}function $(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:E,point:e,layer:t,filterNameList:r,overrideParams:n,itemId:i}}function K(e){return{type:g,point:e}}function z(e){return{type:O,enabled:e}}function X(e){return{type:S,index:e}}var J=function(){return{type:T}},Q=function(e){return{type:A,format:e}},ee=function(e){return{type:w,showCoordinateEditor:e}},te=function(e){return{type:I,layer:e}},re=function(e){return{type:x,query:e}},ne=function(e){return{type:_,trigger:e}},ie=function(e){return{type:F,value:e}}},47310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(75875),i=r.n(n),o=r(72500),a=r.n(o),u=r(27418),c=r.n(u),l={format:"json",bounded:0,polygon_geojson:1,priority:5};const s={geocode:function(e,t){var r=c()({q:e},l,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return i().get(n)},reverseGeocode:function(e,t){var r=c()({lat:e.lat,lon:e.lng},t||{},l),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return i().get(n)}}},64152:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ce});var n={};r.r(n),r.d(n,{getRecords:()=>k,testService:()=>H,textSearch:()=>q,validate:()=>V});var i={};r.r(i),r.d(i,{getRecords:()=>re,parseUrl:()=>te,textSearch:()=>ne});var o=r(59551),a=r(67007),u=r(3475),c=r(37275),l=r(5055),s=r.n(l),f=r(75875),p=r.n(f),d=r(86494),y=r(33044),v=r(93201);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={},O=function(e,t){return e===t||"EPSG:3857"===e&&"EPSG:900913"===t||"EPSG:900913"===e&&"EPSG:3857"===t},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=(0,d.castArray)((0,d.get)(e,"TileMapService.TileMaps.TileMap",[])),a=i.projection,u=(0,d.get)(i,"options.service.allSRS"),c=o.map((function(t){var r=t.$,n=void 0===r?{}:r;return b(b({},n),{},{href:(0,y.cleanAuthParamsFromURL)(n.href),identifier:(0,y.cleanAuthParamsFromURL)(n.href),format:(0,v.A)(n.href),tmsUrl:(0,y.cleanAuthParamsFromURL)(e.url)})})).filter((function(e){var t=e.srs;return!(a&&!u)||O(t,a)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,i=e.srs,o=void 0===i?"":i;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==o.toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:c.length,numberOfRecordsReturned:Math.min(r,c.length),nextRecord:t+Math.min(r,c.length)+1,records:c.filter((function(e,n){return n>=t-1&&n<t-1+r}))}},R=function(e){return e},S=function(e,t,r,n,i){var o=g[e];return o&&(new Date).getTime()<o.timestamp+1e3*(c.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(h(o.data,t,r,n,i))})):p().get(e).then((function(o){var a;return s().parseString(o.data,{explicitArray:!1},(function(t,r){a=b(b({},r),{},{url:e})})),g[e]={timestamp:(new Date).getTime(),data:a},h(a,t,r,n,i)}))},T=r(36882),A=r(49977),w=r.n(A),I=r(11847);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F="custom",P=function(e,t,r,n,i){var o,a,u,c=(0,d.get)(i,"options.service"),l=[];if(c.provider&&c.provider!==F){var s=(o=c.provider,Object.keys(null!==(a=null===T.Z||void 0===T.Z||null===(u=T.Z[o])||void 0===u?void 0:u.variants)&&void 0!==a?a:{}));0===s.length?l.push({provider:"".concat(c.provider),title:"".concat(c.provider)}):l=s.map((function(e){return{provider:"".concat(c.provider,".").concat(e)}}))}else c.url&&(l=[_(_({},c),{},{title:c.title,type:"tileprovider",url:c.url,attribution:c.attribution,options:c.options||{},provider:F})]);return new Promise((function(e){e(function(e,t,r,n){var i=e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===e?"":e).toLowerCase().indexOf(n.toLowerCase())})),o=i.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:i.length,numberOfRecordsReturned:o.length,nextRecord:t+Math.min(r,i.length)+1,records:o}}(l,t,r,n))}))};function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){var t="function"==typeof Map?new Map:void 0;return(C=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return M(e,arguments,N(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),L(n,e)})(e)}function M(e,t,r){return(M=j()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&L(i,r.prototype),i}).apply(null,arguments)}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(i,e);var t,r,n=(t=i,r=j(),function(){var e,n=N(t);if(r){var i=N(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return U(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=n.call(this,e)).name="ServiceValidationError",r.notification=t,r}return i}(C(Error)),B=function(e){return""===e.title||""===e.url?w().Observable.throw(new W("Validation Error","catalog.notification.warningAddCatalogService")):w().Observable.of(e)},Y=function(e){var t=e.parseUrl;return function(e){var r="catalog.notification.errorServiceUrl";return w().Observable.defer((function(){return p().get(t(e.url))})).catch((function(){throw new W("Service Test error",r)})).switchMap((function(t){if(t.error||""===t.data)throw new W("Service Test error",r);return w().Observable.of(e)}))}},k=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.options,a=o||{},u=a.service,c=void 0===u?{}:u;return"tms"===c.provider&&S(e,t,r,n,i),P(0,t,r,n,i)},q=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.options,a=o||{},u=a.service,c=void 0===u?{}:u;return"tms"===c.provider?S(e,t,r,n,i):P(0,t,r,n,i)},V=function(e){return"tms"===e.provider?B(e):function(e){var t,r=e.provider&&"custom"!==e.provider?!!e.provider:(t=e.url,(0,I.Nw)(t));if(e.title&&r)return A.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")}(e)},H=function(e){return"tms"===e.provider?Y({parseUrl:R})(e):function(e){return A.Observable.of(e)}(e)},Z=r(32420);function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q={},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=(0,d.castArray)((0,d.get)(e,'["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType',[])),o=i.map((function(t){var r=t.Name,n=t.Title,i=t.Abstract,o=t.DefaultSRS,a=t.OtherSRS,u=void 0===a?[]:a,c=t["ows:WGS84BoundingBox"],l=c["ows:LowerCorner"].split(" "),s=c["ows:UpperCorner"].split(" "),f={minx:parseFloat(l[0]),miny:parseFloat(l[1]),maxx:parseFloat(s[0]),maxy:parseFloat(s[1])};return{featureType:t,type:"wfs",url:(0,y.cleanAuthParamsFromURL)(e.url),name:r,title:n,description:i,SRS:[o].concat(X(u)),defaultSRS:o,boundingBox:{bounds:f,crs:"EPSG:4326"}}})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,i=e.name,o=void 0===i?"":i,a=e.description;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==o.toLowerCase().indexOf(n.toLowerCase())||-1!==a.toLowerCase().indexOf(n.toLowerCase())})),a=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:Math.min(r,a.length),nextRecord:t+Math.min(r,o.length)+1,records:a}},te=Z.getCapabilitiesURL,re=function(e,t,r,n,i){var o=Q[e];return o&&(new Date).getTime()<o.timestamp+1e3*(c.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(ee(o.data,t,r,n,i))})):(0,Z.getCapabilities)(e).then((function(o){var a;return s().parseString(o.data,{explicitArray:!1,stripPrefix:!0},(function(t,r){a=K(K({},r),{},{url:e})})),Q[e]={timestamp:(new Date).getTime(),data:a},ee(a,t,r,n,i)}))},ne=function(e,t,r,n,i){return re(e,t,r,n,i)},ie=r(32354);function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ce={csw:ae({validate:B,testService:Y(o.Z)},o.Z),wfs:ae({validate:B,testService:Y(i)},i),wms:ae({validate:B,testService:Y(a.ZP)},a.ZP),tms:n,wmts:ae({validate:B,testService:Y(u.Z)},u.Z),backgrounds:ae({validate:B,testService:Y(ie.Z)},ie.Z)}},56175:(e,t,r)=>{"use strict";r.d(t,{Z:()=>F});var n=r(49977),i=r(9669),o=r.n(i),a=r(37691),u=r.n(a),c=r(30647),l=r(86494),s=r(31273),f=r(80416),p=r(97395),d=r(82904),y=r(33528),v=r(21914),m=r(53001),b=r(88113),E=r(31935),g=r(8316),O=r(75110),h=r(76712),R=r(90183),S=r(24262);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const F=function(e){return{recordSearchEpic:function(t,r){return t.ofType(s.V3).switchMap((function(t){var i=t.format,o=t.url,a=t.startPosition,u=t.maxRecords,c=t.text,l=t.options;return n.Observable.defer((function(){return e[i].textSearch(o,a,u,c,_({options:l},(0,b.HN)(r.getState())))})).switchMap((function(e){return e.error?n.Observable.of((0,s.m)(e)):n.Observable.of((0,s.nX)({url:o,startPosition:a,maxRecords:u,text:c},e))})).startWith((0,s.K4)(!0)).catch((function(e){return n.Observable.of((0,s.m)(e))}))}))},addLayersFromCatalogsEpic:function(t,r){return t.ofType(s.WX).filter((function(e){var t=e.layers,r=e.sources;return(0,l.isArray)(t)&&(0,l.isArray)(r)&&t.length&&t.length===r.length})).switchMap((function(t){var i=t.layers,o=t.sources,a=t.options,u=t.startPosition,c=void 0===u?1:u,s=t.maxRecords,f=void 0===s?4:s,p=r.getState(),d=a||(0,b.bA)(p),y=(0,b.b6)(p),v=i.filter((function(e,t){return!!y[o[t]]})).map((function(t,r){var a=y[o[r]],u=a.type,l=a.url,s=i[r];return n.Observable.defer((function(){return e[u].textSearch(l,c,f,s,d).catch((function(){return{results:[]}}))})).map((function(e){return _(_({},e),{},{format:u,url:l,text:s})}))}));return n.Observable.forkJoin(v).switchMap((function(e){return(0,l.isArray)(e)&&e.length?n.Observable.of(e.map((function(e){var t=e.format,r=e.url,i=e.text,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["format","url","text"]),a=(0,g.Ps)(p),u=(0,h.eL)(t,o,d,a)||[],c=(0,l.head)(u.filter((function(e){return e.identifier===i}))),s=(0,h.tW)(c),f=s.wms,y=s.wmts,v={},m={},E=(0,b.kS)(p);if(f){var O=(0,h.n0)(f.SRS);if(f.SRS.length>0&&!R.default.isAllowedSRS("EPSG:3857",O))return n.Observable.empty();v=(0,h.ll)(c,"wms",{removeParams:E,catalogURL:"csw"===t&&r?r+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+c.identifier:r},m)}else if(y){v={};var S=(0,h.n0)(y.SRS);if(y.SRS.length>0&&!R.default.isAllowedSRS("EPSG:3857",S))return n.Observable.empty();v=(0,h.ll)(c,"wmts",{removeParams:E},m)}else(0,h.FJ)(c).esri&&(v=(0,h.AD)(c,m));return c?v:i}))):n.Observable.empty()}))})).mergeMap((function(e){if(e){var t=e.filter((function(e){return(0,l.isString)(e)})).join(" "),r=[];return t&&(r=[(0,s.E9)(t)]),r=[].concat(A(r),A(e.filter((function(e){return(0,l.isObject)(e)})).map((function(e){return(0,f.A4)(e)})))),n.Observable.from(r)}return n.Observable.empty()})).catch((function(){return n.Observable.empty()}))},newCatalogServiceAdded:function(t,r){return t.ofType(s.mh).switchMap((function(){var t=r.getState(),i=(0,b._S)(t);return n.Observable.of(i).switchMap((function(t){var r,i,o;return null!==(r=null===(i=e[t.type])||void 0===i||null===(o=i.validate)||void 0===o?void 0:o.call(i,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(t){var r,i,o;return null!==(r=null===(i=e[t.type])||void 0===i||null===(o=i.testService)||void 0===o?void 0:o.call(i,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(){return n.Observable.of((0,s.N3)(i),(0,p.Vp)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}))})).startWith((0,s.Rc)(!0)).catch((function(e){return n.Observable.of((0,p.vU)({exception:e,title:"notification.warning",message:e.notification||"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))})).concat(n.Observable.of((0,s.Rc)(!1)))}))},deleteCatalogServiceEpic:function(e,t){return e.ofType(s.$Y).switchMap((function(){var e=t.getState(),r=(0,b.Cb)(e),i=(0,b.b6)(e),o=i[r]?(0,p.Vp)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):(0,p.vU)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),a=(0,s.SU)(r);return i[r]?n.Observable.of(o,a):n.Observable.of(o)}))},openCatalogEpic:function(e){return e.ofType(d.At).filter((function(e){return"metadataexplorer"===e.control&&e.value})).switchMap((function(){return n.Observable.of((0,y.YV)(),(0,v.g)(),(0,v.aN)())}))},getMetadataRecordById:function(t,r){return t.ofType(s.UT).switchMap((function(t){var i=t.metadataOptions,a=void 0===i?{}:i,s=r.getState(),d=(0,O.Iz)(s);return n.Observable.defer((function(){return e.wms.getCapabilities((0,S.getCapabilitiesUrl)(d))})).switchMap((function(t){var r=(0,l.get)(t,"capability.layer.layer",[]),i=1===r.length?r[0].metadataURL:(0,l.find)(r,(function(e){return e.name===d.name.split(":")[1]})),s=(0,l.get)((0,l.find)(i,(function(e){return(0,l.isString)(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&("application/xml"===e.format||"text/xml"===e.format)})),"onlineResource.href"),y=(0,l.get)((0,l.find)(i,(function(e){return(0,l.isString)(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&"text/html"===e.format})),"onlineResource.href"),v=(0,l.find)((0,l.get)(a,"extractors",[]),(function(e){var t=e.properties,r=e.layersRegex,n=r?new RegExp(r):null;return(0,l.isObject)(t)&&(!r||n.test(d.name))})),m=y?{metadataUrl:y}:{},b=n.Observable.defer((function(){return e.csw.getRecordById(d.catalogURL)})).switchMap((function(e){return e&&e.error?n.Observable.of((0,p.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,f.c9)(m,!1)):e&&e.dc?n.Observable.of((0,f.c9)(_(_({},m),e.dc),!1)):n.Observable.empty()})),E=n.Observable.defer((function(){return o().get(s)})).pluck("data").map((function(e){return(new c.a).parseFromString(e)})).map((function(e){var t=u().useNamespaces(a.xmlNamespaces||{});return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return(0,l.toPairs)(r).reduce((function(r,i){var o,a=T(i,2),u=a[0],c=a[1];if((0,l.isObject)(c)&&(0,l.isString)(c.xpath)&&(0,l.isObject)(c.properties)&&(0,l.keys)(c.properties).length>0)0===(o=t(c.xpath,n).map((function(t){return e(c.properties,t)}))).length&&(o=null);else{var s,f=t(c,n);1===f.length?o=null!==(s=(0,l.get)(f[0],"nodeValue"))&&void 0!==s?s:(0,l.get)(f[0],"childNodes[0].nodeValue"):f.length>1&&(o=f.map((function(e){return(0,l.get)(e,"childNodes[0].nodeValue")})).filter((function(e){return!!e})))}return _(_({},r),o?D({},u,o):{})}),{})}(v.properties,e)})).switchMap((function(e){return n.Observable.of((0,f.c9)(_(_({},m),e),!1))}));return s&&v?E:d.catalogURL?b:n.Observable.of((0,f.c9)(m,!1))})).startWith((0,f.c9)({},!0)).catch((function(){return n.Observable.of((0,p.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,f.c9)({},!1))}))}))},autoSearchEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,i=void 0===r?function(){}:r;return e.ofType(s.CO).debounce((function(){var e=i(),t=(0,b.l2)(e);return n.Observable.timer(t)})).switchMap((function(e){var t=e.text,r=i(),o=(0,b.y)(r),a=(0,b.R7)(r),u=a.type,c=a.url;return n.Observable.of((0,s.tt)({format:u,url:c,startPosition:1,maxRecords:o,text:t}))}))},catalogCloseEpic:function(e,t){return e.ofType(s.ur).switchMap((function(){var e,r=t.getState(),i=(0,E.YL)(r),o=(0,b.b6)(r);return(e=n.Observable).of.apply(e,A([(0,d.pu)("metadataexplorer","enabled",!1,"group",null),(0,s.In)("view"),(0,s.ye)()].concat("backgroundSelector"===i?[(0,s.Dw)((0,l.head)((0,l.keys)(o))),(0,m.vw)(!0)]:[])))}))}}}},38842:(e,t,r)=>{"use strict";r.d(t,{wk:()=>a,Yf:()=>u,c3:()=>c,fY:()=>l});var n=r(86494),i=r(22222),o=r(8316),a=function(e){return(0,n.has)(e,"localConfig.localizedLayerStyles")},u=function(e){var t=(0,n.get)(e,"localConfig.plugins.dashboard",[]),r=(0,n.find)(t,(function(e){return"DashboardEditor"===e.name}))||{};return(0,n.get)(r,"cfg.catalog.localizedLayerStyles",!1)},c=function(e){return(0,n.get)(e,"localConfig.localizedLayerStyles.name","mapstore_language")},l=(0,i.P1)(a,c,o.KV,(function(e,t,r){var n=[];return e&&n.push({name:t,value:r}),n}))},76712:(e,t,r)=>{"use strict";r.d(t,{n0:()=>S,tW:()=>A,FJ:()=>w,F8:()=>I,ll:()=>_,eL:()=>D,AD:()=>F,oR:()=>P,LZ:()=>G,eX:()=>U});var n=r(27418),i=r.n(n),o=r(86494),a=r(72500),u=r.n(a),c=r(90183),l=r(37275),s=r(24262),f=r(86638),p=r(7294),d=r(33044),y=r(67007);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e){return e&&e.replace(/\/csw$/,"/")},g=function(e){return(0,o.isObject)(e)&&e._||e},O=function(e,t){return e.filter((function(r){return p.getTileMatrixSet(t,r,e,t,null)}))},h=function(e){var t=Array.isArray(e.references)?e.references:[e.references];return(0,o.head)([].filter.call(t,(function(t){return"WWW:LINK-1.0-http--image-thumbnail"===t.scheme||"thumbnail"===t.scheme||"WWW:DOWNLOAD-1.0-http--download"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))||"WWW:DOWNLOAD-REST_MAP"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))})))},R={csw:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e;return n&&n.records?n.records.map((function(e){var n,a,c,l=e.dc;if(l&&l.URI){var s=(0,o.isArray)(l.URI)?l.URI:l.URI&&[l.URI]||[],p=(0,o.head)([].filter.call(s,(function(e){return"thumbnail"===e.name})))||(0,o.head)([].filter.call(s,(function(e){var t;return!e.name&&(null===(t=e.protocol)||void 0===t?void 0:t.indexOf("image/"))>-1})));n=p?p.value:null,a=(0,o.head)([].filter.call(s,(function(e){return e.protocol&&(e.protocol.match(/^OGC:WMS-(.*)-http-get-map/g)||e.protocol.match(/^OGC:WMS/g))})))}if(!a&&l&&l.references&&l.references.length){var d=Array.isArray(l.references)?l.references:[l.references];if(a=(0,o.head)([].filter.call(d,(function(e){return e.scheme&&(e.scheme.match(/^OGC:WMS-(.*)-http-get-map/g)||"OGC:WMS"===e.scheme)})))){var y=u().parse(a.value,!0),v=y.query&&y.query.layers||l.alternative;a=i()({},a,{name:v})}}if(!a&&l&&l.references&&l.references.length){var g=Array.isArray(l.references)?l.references:[l.references];if(c=(0,o.head)([].filter.call(g,(function(e){return e.scheme&&"WWW:DOWNLOAD-REST_MAP"===e.scheme})))){var O=l.alternative;c=i()({},c,{name:O})}}if(!n&&l&&l.references){var R=h(l);R&&(n=R.value)}var S=[];if(l&&l.references&&(Array.isArray(l.references)?l.references:[l.references]).filter((function(e){return e.scheme.indexOf("http-get-capabilities")>-1})).forEach((function(e){var r=0===e.value.indexOf("http")?e.value:(t&&t.catalogURL||"")+"/"+e.value;S.push({type:e.scheme,url:r})})),a&&a.name){0===a.value.indexOf("http")||i()({},a,{value:(t&&t.catalogURL||"")+"/"+a.value});var T={type:a.protocol||a.scheme,url:a.value,SRS:[],params:{name:a.name}};S.push(T)}if(c&&c.name){var A={type:"arcgis",url:c.value,SRS:[],params:{name:c.name}};S.push(A)}n&&(0===n.indexOf("http")||(n=(E(t&&t.url)||"")+n));var w={boundingBox:e.boundingBox&&e.boundingBox.extent&&(0,o.castArray)(e.boundingBox.extent.join(","))};if(l&&(w=m(m({},w),(0,o.sortBy)(Object.keys(l)).reduce((function(e,t){return m(m({},e),{},b({},t,(0,o.uniq)((0,o.castArray)(l[t]))))}),{}))),l&&l.URI&&(0,o.castArray)(l.URI)&&(0,o.castArray)(l.URI).length&&(w=m(m({},w),{},{uri:["<ul>"+(0,o.castArray)(l.URI).map((function(e){return'<li><a target="_blank" href="'.concat(e.value,'">').concat(e.name,"</a></li>")})).join("")+"</ul>"]})),l&&l.subject&&(0,o.castArray)(l.subject)&&(0,o.castArray)(l.subject).length&&(w=m(m({},w),{},{subject:["<ul>"+(0,o.castArray)(l.subject).map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})),S&&(0,o.castArray)(S).length?w=m(m({},w),{},{references:["<ul>"+(0,o.castArray)(S).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.params&&e.params.name||e.url,"</a></li>")})).join("")+"</ul>"]}):delete w.references,l&&l.temporal){var I=l.temporal.split("; ");if(I.length){var x=I.filter((function(e){return-1!==e.indexOf("scheme=")})).map((function(e){var t=e.indexOf("=");return e.substr(t+1,e.length-1)}));x=x.length?x[0]:"W3C-DTF";var _=I.filter((function(e){return-1!==e.indexOf("start=")||-1!==e.indexOf("end=")})).map((function(e){var t=e.indexOf("="),n=e.substr(0,t),i=e.substr(t+1,e.length-1),a=e.length-t-1<=10;return(0,o.includes)(["start","end"],n)&&"W3C-DTF"===x&&!a?(0,f.S$)(r,"catalog.".concat(n))+new Date(i).toLocaleString():(0,o.includes)(["start","end"],n)?(0,f.S$)(r,"catalog.".concat(n))+i:""}));w=m(m({},w),{},{temporal:["<ul>"+_.map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})}}return{boundingBox:e.boundingBox,description:l&&(0,o.isString)(l.abstract)&&l.abstract||"",layerOptions:t&&t.layerOptions||{},identifier:l&&(0,o.isString)(l.identifier)&&l.identifier||"",references:S,thumbnail:n,title:l&&(0,o.isString)(l.title)&&l.title||"",tags:l&&l.tags||"",metadata:w}})):null},wms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&e.records?e.records.map((function(r){return{capabilities:r,credits:r.credits,boundingBox:y.ZP.getBBox(r),description:r.Abstract||r.Title||r.Name,identifier:r.Name,service:e.service,tags:"",layerOptions:m(m({},(null==t?void 0:t.layerOptions)||{}),(null==e?void 0:e.layerOptions)||{}),title:(0,s.getLayerTitleTranslations)(r)||r.Name,formats:(0,o.castArray)(r.formats||[]),dimensions:(r.Dimension&&(0,o.castArray)(r.Dimension)||[]).map((function(e){return i()({},{values:e._&&e._.split(",")||[]},e.$||{})})).filter((function(e){return e&&"time"!==e.name})),references:[{type:"OGC:WMS",url:t&&t.url,SRS:r.SRS&&((0,o.isArray)(r.SRS)?r.SRS:[r.SRS])||[],params:{name:r.Name}}]}})):null},wmts:function(e,t){return e&&e.records?e.records.map((function(e){var r=(0,o.castArray)(p.getGetTileURL(e)||t&&t.url);1===r.length&&(r=r[0]);var n=p.getCapabilitiesURL(e),a=(0,o.castArray)(e.TileMatrixSetLink||[]).reduce((function(t,r){var n,a=(0,o.head)((e.TileMatrixSet&&(0,o.castArray)(e.TileMatrixSet)||[]).filter((function(e){return e["ows:Identifier"]===r.TileMatrixSet}))),u=a&&c.default.getEPSGCode(a["ows:SupportedCRS"]),l=r.TileMatrixSetLimits&&(r.TileMatrixSetLimits.TileMatrixLimits||[]).map((function(e){return{identifier:e.TileMatrix,ranges:{cols:{min:e.MinTileCol,max:e.MaxTileCol},rows:{min:e.MinTileRow,max:e.MaxTileRow}}}}))||a.TileMatrix.map((function(e){return{identifier:e["ows:Identifier"]}}));return i()(t,(b(n={},a["ows:Identifier"],l),b(n,u,l),n))}),{}),u=function(e){var t=e["ows:WGS84BoundingBox"];return t||(t={"ows:LowerCorner":"-180.0 -90.0","ows:UpperCorner":"180.0 90.0"}),t}(e);return{title:g(e["ows:Title"]||e["ows:Identifier"]),description:g(e["ows:Abstract"]||e["ows:Title"]||e["ows:Identifier"]),identifier:g(e["ows:Identifier"]),tags:"",layerOptions:t&&t.layerOptions||{},style:e.style,capabilitiesURL:n,queryable:e.queryable,requestEncoding:e.requestEncoding,tileMatrixSet:e.TileMatrixSet,matrixIds:a,format:e.format,TileMatrixSetLink:(0,o.castArray)(e.TileMatrixSetLink),boundingBox:{extent:[u["ows:LowerCorner"].split(" ")[0],u["ows:LowerCorner"].split(" ")[1],u["ows:UpperCorner"].split(" ")[0],u["ows:UpperCorner"].split(" ")[1]],crs:"EPSG:4326"},references:[{type:"OGC:WMTS",url:r,SRS:O(e.SRS||[],a),params:{name:e["ows:Identifier"]}}]}})):null},tms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.records){var r=t.service&&"tms"===t.service.provider;return r?e.records.map((function(e){return{title:e.title,tileMapUrl:e.href,description:"".concat(e.srs).concat(e.format?", "+e.format:""),tmsUrl:t.tmsUrl,references:[{type:"OGC:TMS",version:"1.0.0",url:t.url}]}})):e.records.map((function(e){return{title:e.title||e.provider,url:e.url,attribution:e.attribution,options:e.options,provider:e.provider,type:"tileprovider",references:[]}}))}return null},wfs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.records;return t?t.map((function(e){return m(m({},e),{},{references:[{type:"OGC:WFS-1.1.0-http-get-capabilities",url:e.url},{type:"OGC:WFS-1.1.0-http-get-feature",url:e.url}]})})):null},backgrounds:function(e){return e&&e.records?e.records.map((function(e){return{description:e.title,title:e.title,identifier:e.name,thumbnail:e.thumbURL,references:[],background:e}})):null}},S=function(e){return e.filter((function(e){return c.default.isSRSAllowed(e)})).reduce((function(e,t){return i()(e,b({},t,!0))}),{})},T=function(e,t){var r=e.split("?"),n={};return r.length>=2&&r[1]&&r[1].split(/[&;]/g).forEach((function(e){var r=e.split("=");-1===t.indexOf(r[0].toLowerCase())&&(n[r[0]]=r[1])})),{url:r[0],params:n}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,r=void 0===t?[]:t;return{wfs:(0,o.head)(r.filter((function(e){return e.type&&("OGC:WFS"===e.type||e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-feature")>-1)}))),wms:(0,o.head)(r.filter((function(e){return e.type&&("OGC:WMS"===e.type||e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-map")>-1)}))),wmts:(0,o.head)(r.filter((function(e){return e.type&&("OGC:WMTS"===e.type||e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-map")>-1)}))),tms:(0,o.head)(r.filter((function(e){return e.type&&("OGC:TMS"===e.type||e.type.indexOf("OGC:TMS")>-1)})))}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{references:[]};return{esri:(0,o.head)(e.references.filter((function(e){return e.type&&("ESRI:SERVER"===e.type||"arcgis"===e.type)})))}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,r=void 0===t?[]:t,n=(0,o.head)(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),i=(0,o.head)(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),a=(0,o.head)(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),u=[];return n&&u.push({type:"WMS_GET_CAPABILITIES",url:n.url,labelId:"catalog.wmsGetCapLink"}),a&&u.push({type:"WMTS_GET_CAPABILITIES",url:a.url,labelId:"catalog.wmtsGetCapLink"}),i&&u.push({type:"WFS_GET_CAPABILITIES",url:i.url,labelId:"catalog.wfsGetCapLink"}),u},x=function(e){return e&&!(0,o.isArray)(e)&&-1!==e.indexOf(",")?e.split(",").map((function(e){return e.trim()})):e},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wms",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.removeParams,i=void 0===n?[]:n,a=r.format,u=r.catalogURL,c=r.url,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=arguments.length>4?arguments[4]:void 0;if(!e||!e.references)return null;var p,d,y=A(e),v=y.wms,b=y.wmts,E=v||b,g=function(e){return T(l.ZP.cleanDuplicatedQuestionMarks(e),["request","layer","layers","service","version"].concat(i))},O=x(E.url);if(O&&(0,o.isArray)(O))p=O.map((function(e){return g(e)})).map((function(e){return e.url})),d=O.map((function(e){return g(e)})).map((function(e){return e.params})).reduce((function(e,t){return m(m({},e),t)}),{});else{var h=g(O||u),R=h.url,w=h.params;p=R,d=w}var _=function(e){return(0,o.isArray)(e)&&1===e.length?e[0]:e},D=_(c||p),F=S(E.SRS);return m(m(m({type:t,requestEncoding:e.requestEncoding,style:e.style,format:a,url:D,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:E.params&&E.params.name,title:e.title||E.params&&E.params.name,matrixIds:"wmts"===t?e.matrixIds||[]:void 0,description:e.description||"",tileMatrixSet:"wmts"===t?e.tileMatrixSet||[]:void 0,credits:!l.ZP.getConfigProp("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:I(e),params:d,allowedSRS:F,catalogURL:u},s),e.layerOptions),{},{localizedLayerStyles:(0,o.isNil)(f)?void 0:f})},D=function(e,t,r,n){return R[e]&&R[e](t,r,n)||null},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.references)return null;var r=w(e),n=r.esri;return m({type:n.type,url:n.url,visibility:!0,dimensions:e.dimensions||[],name:n.params&&n.params.name,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}}},t)},P=function(e,t,r){var n=e.tileMapUrl,i=t.TileMap,a=void 0===i?{}:i,u=r.forceDefaultTileGrid,c=a.Title,l=a.Abstract,s=a.SRS,f=a.BoundingBox,p=void 0===f?{}:f,y=a.Origin,v=a.TileFormat,m=void 0===v?{}:v,E=a.TileSets,g=a.$,O=g.version,h=g.tilemapservice,R=(0,o.get)(p,"$",{}),S=R.minx,T=R.miny,A=R.maxx,w=R.maxy,I=(0,o.get)(y,"$"),x=I.x,_=I.y,D=(0,o.get)(m,"$",{}),F=D.width,P=D.height,G=D["mime-type"],U=D.extension,C=[parseFloat(F),parseFloat(P,10)],M=(0,o.castArray)((0,o.get)(E,"TileSet",[]).map((function(e){return e.$}))).map((function(e){var t=e.href,r=e.order,n=e["units-per-pixel"];return{href:(0,d.cleanAuthParamsFromURL)(t),order:parseFloat(r),resolution:parseFloat(n)}})),j=(0,o.get)(E,"profile");return{title:c,visibility:!0,hideErrors:!0,name:c,allowedSRS:b({},s,!0),description:l,srs:s,version:O,tileMapService:h?(0,d.cleanAuthParamsFromURL)(h):void 0,type:"tms",profile:j,tileMapUrl:n,forceDefaultTileGrid:u,bbox:p&&{crs:s,bounds:{minx:parseFloat(S),miny:parseFloat(T),maxx:parseFloat(A),maxy:parseFloat(w)}},tileSets:M,origin:{x:parseFloat(x),y:parseFloat(_)},format:G,tileSize:C,extension:U}},G=function(e){return m({type:e.type||"wfs",search:{url:e.url,type:"wfs"},url:e.url,queryable:e.queryable,visibility:!0,name:e.name,title:e.title||e.name,description:e.description||"",bbox:e.boundingBox,links:I(e),style:{weight:1,color:"rgba(0, 0, 255, 1)",opacity:1,fillColor:"rgba(0, 0, 255, 0.1)",fillOpacity:.1,radius:10}},e.layerOptions)},U=function(e){return{type:"tileprovider",visibility:!0,url:e.url,title:e.title,attribution:e.attribution,options:e.options,provider:e.provider,name:e.provider}}},93201:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(86494),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("?")[0].split("@");if(t.length>1){var r=t[t.length-1];if((0,n.includes)(["png","png8","jpeg","vnd.jpeg-png","gif"],r))return r}return null}},11847:(e,t,r)=>{"use strict";r.d(t,{ij:()=>c,w0:()=>l,vl:()=>s,K2:()=>f,Nw:()=>p});var n=r(72500),i=r.n(n),o=r(86494),a=r(64210);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var i,o,a=(o=6,function(e){if(Array.isArray(e))return e}(i=r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}}(i,o)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(i,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[1],l=a[3],s=a[4],f=a[5],p=0===f.indexOf("/")?f.split("/")[1]:"";return{protocol:c,domain:l,port:s,rootPath:f,applicationRootPath:p}},l=function(e,t){var r=(0,o.isArray)(e)?e[0]:e,n=(0,o.isArray)(t)?t[0]:t;if(r===n)return!0;if(!r||!n)return!1;if(!(0,o.isString)(r)||!(0,o.isString)(n))return!1;var a=i().parse(r),u=i().parse(n),l=c(r),s=c(n),f=l.protocol===s.protocol,p=l.domain===s.domain,d=l.port===s.port,y=a.pathname===u.pathname,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return(0,o.isEqual)((0,o.sortBy)(r),(0,o.sortBy)(n))}(a.query,u.query);return f&&d&&p&&y&&v},s=function(e){return a.parse(e)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,r=new RegExp(t);return r.test(e)},p=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/,n=new RegExp(r),i=n.test(e);if(!i)return!1;if(i&&!t)return!0;if(i&&t){var a=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return(0,o.find)(a,e)})).length}return!1}}}]);