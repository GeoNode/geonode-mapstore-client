(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[313],{30072:(e,t,o)=>{"use strict";o.d(t,{Z:()=>k});var r=o(24852),n=o.n(r),i=o(45697),a=o.n(i),s=o(9669),l=o.n(s),u=o(18446),p=o.n(u),c=o(52353),m=o.n(c),f=o(13311),g=o.n(f),y=o(84596),d=o.n(y),h=o(93546),v=o(64250),b=o(66287),w=o(69141);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?P(Object(o),!0).forEach((function(t){A(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):P(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(a,e);var t,o,r,n,i=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(n){var o=C(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return T(this,e)});function a(){var e;S(this,a);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return A(j(e=i.call.apply(i,[this].concat(o))),"addFeatures",(function(t){var o=new w.Z,r=null,n=!1;"FeatureCollection"===t.type?(r={features:m()(t.properties.visibility)||t.properties.visibility?t.features:[]},n=!!t.features):(r={geometry:t.geometry},n=!(!t.geometry||!t.geometry.geometries&&!t.geometry.coordinates)),t.container&&n&&(e._feature=o.readFeatures(x({type:t.type,properties:t.properties,id:t.msId},r),{dataProjection:t.featuresCrs}),e._feature.map((function(e){var o=e;return e.getProperties().isCircle&&(o=(0,v.a)(e,t.crs||"EPSG:3857",t.featuresCrs)).setGeometry(o.getGeometry().transform(t.crs||"EPSG:3857",t.featuresCrs)),o})).forEach((function(e){return e.getGeometry().transform(t.featuresCrs,t.crs||"EPSG:3857")})),t.style&&t.style!==t.layerStyle&&e._feature.forEach((function(e){var o=[],r={};"FeatureCollection"===t.type?(r=g()(t.features,(function(t){return t.properties.id===e.getProperties().id})),o=(0,b.createStylesAsync)(d()(r.style))):(o=(0,b.createStylesAsync)(d()(t.style)),r={type:t.type,geometry:t.geometry,properties:t.properties,style:t.style}),l().all(o).then((function(t){e.setStyle((function(){return(0,h.Cw)(x(x({},r),{},{style:t}))}))}))})),t.container.getSource().addFeatures(e._feature))})),A(j(e),"removeFromContainer",(function(){if(e._feature)if(Array.isArray(e._feature)){var t=e.props.container.getSource();e._feature.map((function(e){var o=e.getId();void 0!==o&&t.getFeatureById(o)?t.removeFeature(t.getFeatureById(o)):t.removeFeature(e)}))}else e.props.container.getSource().removeFeature(e._feature)})),e}return t=a,(o=[{key:"componentDidMount",value:function(){this.addFeatures(this.props)}},{key:"shouldComponentUpdate",value:function(e){return!(p()(e.properties,this.props.properties)&&p()(e.geometry,this.props.geometry)&&p()(e.features,this.props.features)&&p()(e.crs,this.props.crs)&&p()(e.style,this.props.style))}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.removeFromContainer(),this.addFeatures(e)}},{key:"componentWillUnmount",value:function(){this.removeFromContainer()}},{key:"render",value:function(){return null}}])&&E(t.prototype,o),a}(n().Component);A(k,"propTypes",{type:a().string,layerStyle:a().object,style:a().object,properties:a().object,crs:a().string,container:a().object,features:a().array,geometry:a().object,msId:a().oneOfType([a().string,a().number]),featuresCrs:a().string}),A(k,"defaultProps",{featuresCrs:"EPSG:4326"})},44054:(e,t,o)=>{"use strict";o.d(t,{Z:()=>R});var r=o(45697),n=o.n(r),i=o(24852),a=o.n(i),s=o(8010),l=o(86267),u=o(27418),p=o.n(u),c=o(49977),m=o.n(c),f=o(81763),g=o.n(f),y=o(1469),d=o.n(y),h=o(57557),v=o.n(h),b=o(18446),w=o.n(b),O=o(14293),P=o.n(O),x=o(52259);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=["minResolution","maxResolution","disableResolutionLimits"];function L(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function T(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?L(Object(o),!0).forEach((function(t){I(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):L(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function j(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(u,e);var t,o,r,n,i=(r=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=G(r);if(n){var o=G(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return M(this,e)});function u(){var e;C(this,u);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return I(F(e=i.call.apply(i,[this].concat(o))),"setLayerVisibility",(function(t){var o=e.props.options&&!1!==e.props.options.visibility,r=t.options&&!1!==t.options.visibility;r!==o&&e.layer&&e.isValid()&&e.layer.setVisible(r)})),I(F(e),"setLayerOpacity",(function(t){t!==(e.props.options&&void 0!==e.props.options.opacity?e.props.options.opacity:1)&&e.layer&&e.layer.setOpacity(t)})),I(F(e),"generateOpts",(function(t,o,r,n,i,a){var s=t.minResolution,l=t.maxResolution,u=t.disableResolutionLimits,c=T(T({},j(t,E)),!u&&{minResolution:s,maxResolution:l,minZoom:P()(l)?void 0:(0,x.getZoomFromResolution)(l,a),maxZoom:P()(s)?void 0:(0,x.getZoomFromResolution)(s,a)});return p()({},c,g()(o)?{zIndex:o}:null,{srs:r,onError:function(){e.props.onCreationError(c)},securityToken:n,env:i})})),I(F(e),"createLayer",(function(t,o,r,n,i,a){if(t){var u=e.generateOpts(o,r,(0,l.normalizeSRS)(e.props.srs),n,i,a);e.layer=s.default.createLayer(t,u,e.props.map,e.props.mapId);var p=s.default.isCompatible(t,u);if(e.layer&&!e.layer.detached){var c=e.props.map,m=c&&c.getView().getProjection().getExtent(),f=o&&o.bbox&&o.bbox.bounds,g=m&&(0,l.reprojectBbox)(m,e.props.srs,"EPSG:4326"),y=f&&(0,l.reprojectBbox)((0,l.getExtentFromNormalized)(f,e.props.srs).extent,"EPSG:4326");y&&2===y.length&&d()(y[1])&&(y=y[1]),(g&&y&&!(0,l.isBboxCompatible)((0,l.getPolygonFromExtent)(g),(0,l.getPolygonFromExtent)(y))||!p)&&e.props.onWarning({title:"warning",message:"notification.incompatibleDataAndProjection",action:{label:"close"},position:"tc",uid:"1"}),e.addLayer(o)}e.layer&&e.layer.get&&e.layer.get("getElevation")&&e.props.map.set("elevationLayer",e.layer),e.forceUpdate()}})),I(F(e),"updateLayer",(function(t,o){if(t.position===o.position&&t.srs===o.srs&&t.securityToken===o.securityToken){if(t.options===o.options)return;if(w()(v()(t.options,["loading"]),v()(o.options,["loading"])))return}var r=s.default.updateLayer(e.props.type,e.layer,e.generateOpts(t.options,t.position,t.projection,t.securityToken,t.env,t.resolutions),e.generateOpts(o.options,o.position,o.projection,o.securityToken,o.env,o.resolutions),e.props.map,e.props.mapId);r&&(e.props.map.removeLayer(e.layer),e.layer=r,e.addLayer(t.options))})),I(F(e),"addLayer",(function(t){if(e.isValid()){e.props.map.addLayer(e.layer);var o=new(m().Subject),r=new(m().Subject);t.handleClickOnLayer&&e.layer.set("handleClickOnLayer",!0),e.layer.getSource().on("tileloadstart",(function(){0===e.tilestoload?(e.props.onLayerLoading(t.id),e.tilestoload++):e.tilestoload++})),e.layer.getSource().on("tileloadend",(function(){o.next({type:"tileloadend"}),e.tilestoload--,0===e.tilestoload&&r.next()})),e.layer.getSource().on("tileloaderror",(function(t){o.next({type:"tileloaderror",event:t}),e.tilestoload--,0===e.tilestoload&&r.next()})),o.bufferWhen((function(){return r})).subscribe({next:function(o){var r=o.filter((function(e){return"tileloaderror"===e.type}));r.length>0&&(t&&!t.hideErrors||!t)?(e.props.onLayerLoad(t.id,{error:!0}),e.props.onLayerError(t.id,o.length,r.length)):e.props.onLayerLoad(t.id)}}),e.tileLoadEndStream$=o,e.tileStopStream$=r;var n=new(m().Subject),i=new(m().Subject);if(e.layer.getSource().on("imageloadstart",(function(){0===e.imagestoload?(e.props.onLayerLoading(t.id),e.imagestoload++):e.imagestoload++})),e.layer.getSource().on("imageloadend",(function(){e.imagestoload--,n.next({type:"imageloadend"}),0===e.imagestoload&&i.next()})),e.layer.getSource().on("imageloaderror",(function(t){e.imagestoload--,n.next({type:"imageloaderror",event:t}),0===e.imagestoload&&i.next()})),n.bufferWhen((function(){return i})).subscribe({next:function(o){var r=o.filter((function(e){return"imageloaderror"===e.type}));r.length>0?(e.props.onLayerLoad(t.id,{error:!0}),(t&&!t.hideErrors||!t)&&e.props.onLayerError(t.id,o.length,r.length)):e.props.onLayerLoad(t.id)}}),e.imageLoadEndStream$=n,e.imageStopStream$=i,e.layer.getSource().on("vectorerror",(function(){e.props.onLayerLoad(t.id,{error:!0})})),t.refresh){var a=0;e.refreshTimer=setInterval((function(){e.layer.getSource().updateParams(p()({},t.params,{_refreshCounter:a++}))}),t.refresh)}}})),I(F(e),"isValid",(function(){var t=s.default.isValid(e.props.type,e.layer);return e.valid=t,t})),e}return t=u,(o=[{key:"componentDidMount",value:function(){this.valid=!0,this.tilestoload=0,this.imagestoload=0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken,this.props.env,this.props.resolutions)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setLayerVisibility(e);var t=e.options&&void 0!==e.options.opacity?e.options.opacity:1;this.setLayerOpacity(t),e.position!==this.props.position&&this.layer&&this.layer.setZIndex&&this.layer.setZIndex(e.position),this.props.options&&this.updateLayer(e,this.props)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&(this.tileLoadEndStream$&&(this.tileLoadEndStream$.complete(),this.tileStopStream$.complete(),this.imageLoadEndStream$.complete(),this.imageStopStream$.complete()),this.layer.detached?this.layer.remove():this.props.map.removeLayer(this.layer)),this.refreshTimer&&clearInterval(this.refreshTimer),s.default.removeLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,o=t?a().Children.map(this.props.children,(function(o){return o?a().cloneElement(o,{container:t,styleName:e.props.options&&e.props.options.styleName}):null})):null;return a().createElement(a().Fragment,null,o)}return s.default.renderLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}}])&&A(t.prototype,o),u}(a().Component);I(R,"propTypes",{onWarning:n().func,maxExtent:n().array,map:n().object,mapId:n().string,srs:n().string,type:n().string,options:n().object,onLayerLoading:n().func,onLayerError:n().func,onCreationError:n().func,onLayerLoad:n().func,position:n().number,observables:n().array,securityToken:n().string,env:n().array,resolutions:n().array}),I(R,"defaultProps",{observables:[],onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},onCreationError:function(){},onWarning:function(){},srs:"EPSG:3857"})},90596:(e,t,o)=>{"use strict";o.d(t,{Z:()=>Y});var r=o(37566),n=o(73800),i=o(86306),a=o(70878),s=o(78471),l=o(76773),u=o(18672),p=o(99937),c=o(40868),m=o(21915),f=o(90173),g=o(1908),y=o(45697),d=o.n(y),h=o(24852),v=o.n(h),b=o(27418),w=o.n(b),O=o(86267),P=o(63202),x=o(52259),S=o(44183);var E=o(38946),L=o(18446),T=o.n(L),j=o(13311),C=o.n(j),A=o(23493),k=o.n(A),M=o(1469),F=o.n(M),G=o(14293),I=o.n(G),R=(o(45902),o(93379)),Z=o.n(R),D=o(64006);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Z()(D.Z,{insert:"head",singleton:!1}),D.Z.locals;var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(b,e);var t,o,y,d,h=(y=b,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(y);if(d){var o=q(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return N(this,e)});function b(){var e;B(this,b);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return H(U(e=h.call.apply(h,[this].concat(o))),"getDocument",(function(){return e.props.document||document})),H(U(e),"getResolutions",(function(){if(e.props.mapOptions&&e.props.mapOptions.view&&e.props.mapOptions.view.resolutions)return e.props.mapOptions.view.resolutions;var t=void 0!==e.props.mapOptions.minZoom?e.props.mapOptions.minZoom:0,o=void 0!==e.props.mapOptions.maxZoom?e.props.mapOptions.maxZoom:28,r=void 0!==e.props.mapOptions.zoomFactor?e.props.mapOptions.zoomFactor:2,n=e.map.getView().getProjection(),i=n.getExtent(),a=(i?(0,m.dz)(i):360*c.default.METERS_PER_UNIT[c.default.DEGREES]/c.default.METERS_PER_UNIT[n.getUnits()])/256,s=(i?(0,m.Cr)(i):360*c.default.METERS_PER_UNIT[c.default.DEGREES]/c.default.METERS_PER_UNIT[n.getUnits()])/256;a<=s?s/=Math.round(s/a):a/=Math.round(a/s);var l=Math.max(a,s),u=l/Math.pow(2,28),p=e.props.mapOptions.maxResolution;void 0!==p?t=0:p=l/Math.pow(r,t);var f=e.props.mapOptions.minResolution;return void 0===f&&(f=void 0!==e.props.mapOptions.maxZoom?void 0!==e.props.mapOptions.maxResolution?p/Math.pow(r,o):l/Math.pow(r,o):u),o=t+Math.floor(Math.log(p/f)/Math.log(r)),Array.apply(0,Array(o-t+1)).map((function(e,t){return p/Math.pow(r,t)}))})),H(U(e),"mouseMoveEvent",(function(t){if(!t.dragging&&t.coordinate){var o=e.map.get("elevationLayer")&&e.map.get("elevationLayer").get("getElevation"),r=t.coordinate.slice(),n=(0,u.bU)(r,e.props.projection),i=n[0]/360%1*360;i<-180?i+=360:i>180&&(i-=360),e.props.onMouseMove({y:n[1]||0,x:i||0,z:e.map.get("elevationLayer")&&e.map.get("elevationLayer").get("getElevation")(r,t.pixel)||void 0,crs:"EPSG:4326",pixel:{x:t.pixel[0],y:t.pixel[1]},latlng:{lat:n[1],lng:i,z:o&&o(r,t.pixel)||void 0},lat:n[1],lng:i,rawPos:t.coordinate.slice()})}})),H(U(e),"updateMapInfoState",(function(){var t=e.map.getView(),o=t.getCenter(),r=t.getProjection().getExtent(),n=t.getProjection().getCode();if(-1!==["EPSG:3857","EPSG:900913","EPSG:4326"].indexOf(n)||o&&o[0]>=r[0]&&o[0]<=r[2]&&o[1]>=r[1]&&o[1]<=r[3]){var i=e.normalizeCenter(t.getCenter()),a=t.calculateExtent(e.map.getSize()),s={width:e.map.getSize()[0],height:e.map.getSize()[1]};e.props.onMapViewChanges({x:i[0]||0,y:i[1]||0,crs:"EPSG:4326"},t.getZoom(),{bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]},crs:n,rotation:t.getRotation()},s,e.props.id,e.props.projection,void 0,t.getResolution())}})),H(U(e),"haveResolutionsChanged",(function(t){var o=e.props.mapOptions&&e.props.mapOptions.view?e.props.mapOptions.view.resolutions:void 0,r=t.mapOptions&&t.mapOptions.view?t.mapOptions.view.resolutions:void 0;return!T()(o,r)})),H(U(e),"createView",(function(e,t,o,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=n.restrictedExtent&&n.crs&&(0,O.reprojectBbox)(n.restrictedExtent,n.crs,(0,O.normalizeSRS)(o)),a=!r||r&&!r.view?w()({},r,{extent:i}):w()({},r),s=w()({},{projection:(0,O.normalizeSRS)(o),center:[e.x,e.y],zoom:t,minZoom:n.minZoom},a||{});return new l.ZP(s)})),H(U(e),"_updateMapPositionFromNewProps",(function(t){var o=e.map.getView(),r=e.props.center;if(t.center.y!==r.y||t.center.x!==r.x){var n=(0,O.reproject)({x:t.center.x,y:t.center.y},"EPSG:4326",t.projection,!0);o.setCenter([n.x,n.y])}Math.round(t.zoom)!==e.props.zoom&&o.setZoom(Math.round(t.zoom)),(t.bbox&&void 0!==t.bbox.rotation||e.bbox&&void 0!==e.bbox.rotation&&t.bbox.rotation!==e.props.bbox.rotation)&&o.setRotation(t.bbox.rotation)})),H(U(e),"normalizeCenter",(function(t){var o=(0,O.reproject)({x:t[0],y:t[1]},e.props.projection,"EPSG:4326",!0);return[o.x,o.y]})),H(U(e),"setMousePointer",(function(t){e.map&&(e.map.getViewport().style.cursor=t||"auto")})),H(U(e),"registerHooks",(function(){e.props.hookRegister.registerHook(x.default.RESOLUTIONS_HOOK,(function(){return e.getResolutions()})),e.props.hookRegister.registerHook(x.default.RESOLUTION_HOOK,(function(){return e.map.getView().getResolution()})),e.props.hookRegister.registerHook(x.default.COMPUTE_BBOX_HOOK,(function(t,o){var r=(0,O.reproject)([t.x,t.y],"EPSG:4326",e.props.projection),n=e.createView(r,o,e.props.projection,e.props.mapOptions&&e.props.mapOptions.view,e.props.limits),i=e.map.getSize(),a=n.calculateExtent(i);return{bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]},crs:e.props.projection,rotation:e.map.getView().getRotation()}})),e.props.hookRegister.registerHook(x.default.GET_PIXEL_FROM_COORDINATES_HOOK,(function(t){return e.map.getPixelFromCoordinate(t)})),e.props.hookRegister.registerHook(x.default.GET_COORDINATES_FROM_PIXEL_HOOK,(function(t){return e.map.getCoordinateFromPixel(t)})),e.props.hookRegister.registerHook(x.default.ZOOM_TO_EXTENT_HOOK,(function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.padding,n=o.crs,i=o.maxZoom,a=o.duration,s=o.nearest,l=(0,O.reprojectBbox)(t,n,e.props.projection);l&&l[0]===l[2]&&l[1]===l[3]&&"EPSG:4326"===n&&F()(t)&&-180===t[0]&&-90===t[1]&&(l=e.map.getView().getProjection().getExtent());var u=i;l&&l[0]===l[2]&&l[1]===l[3]&&I()(u)&&(u=21),e.map.getView().fit(l,{size:e.map.getSize(),padding:r&&[r.top||0,r.right||0,r.bottom||0,r.left||0],maxZoom:u,duration:a,nearest:s})}))})),e}return t=b,(o=[{key:"componentDidMount",value:function(){var e=this;this.props.projectionDefs.forEach((function(e){var t,o,r,n,i,a=f.default.defs(e.code);t=e.code,o=e.extent,r=e.worldExtent,n=e.axisOrientation||a.axis||"enu",i=a.units||"m",(0,u.Sx)(new S.Z({code:t,extent:o,worldExtent:r,axisOrientation:n,units:i}))}));var t=(0,O.reproject)([this.props.center.x,this.props.center.y],"EPSG:4326",this.props.projection);(0,g.z)(f.default);var o=w()(this.props.interactive?{}:{doubleClickZoom:!1,dragPan:!1,altShiftDragRotate:!1,keyboard:!1,mouseWheelZoom:!1,shiftDragZoom:!1,pinchRotate:!1,pinchZoom:!1},this.props.mapOptions.interactions),l=(0,r.ce)(w()({dragPan:!1,mouseWheelZoom:!1},o,{}));void 0!==o&&void 0!==o.dragPan||(this.dragPanInteraction=new n.Z({kinetic:!1}),l.extend([this.dragPanInteraction])),void 0!==o&&void 0!==o.mouseWheelZoom||(this.mouseWheelInteraction=new i.Z({duration:0}),l.extend([this.mouseWheelInteraction]));var p=(0,a.c)(w()({zoom:this.props.zoomControl,attributionOptions:w()({collapsible:!1},this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container?{target:this.getDocument().querySelector(this.props.mapOptions.attribution.container)}:{})},this.props.mapOptions.controls)),c=new s.default({layers:[],controls:p,interactions:l,maxTilesLoading:1/0,target:this.getDocument().getElementById(this.props.id)||"".concat(this.props.id),view:this.createView(t,Math.round(this.props.zoom),this.props.projection,this.props.mapOptions&&this.props.mapOptions.view,this.props.limits)});this.map=c,this.props.registerHooks&&this.registerHooks(),this.map.disabledListeners={},this.map.disableEventListener=function(t){e.map.disabledListeners[t]=!0},this.map.enableEventListener=function(t){delete e.map.disabledListeners[t]},this.map.getViewport().addEventListener("mouseout",(function(){setTimeout((function(){return e.props.onMouseOut()}),150)})),c.on("moveend",this.updateMapInfoState),c.on("singleclick",(function(t){if(e.props.onClick&&!e.map.disabledListeners.singleclick){var o=e.map.getView(),r=t.coordinate.slice(),n=o.getProjection().getExtent();if("EPSG:4326"===e.props.projection&&(r[0]=(0,O.normalizeLng)(r[0])),"EPSG:900913"!==e.props.projection&&"EPSG:3857"!==e.props.projection||(r=(0,u.bU)(r,e.props.projection),n=(0,O.reprojectBbox)(n,e.props.projection,"EPSG:4326")),r[0]>=n[0]&&r[0]<=n[2]&&r[1]>=n[1]&&r[1]<=n[3]){var i,a;i="EPSG:900913"!==e.props.projection&&"EPSG:3857"!==e.props.projection?(0,O.reproject)(r,e.props.projection,"EPSG:4326"):{x:r[0],y:r[1]},e.markerPresent=!1,c.forEachFeatureAtPixel(t.pixel,(function(t,o){if(o&&o.get("handleClickOnLayer")){var r=t.getGeometry();if(!e.markerPresent&&"Point"===r.getType()){e.markerPresent=!0,a=o.get("msId");var n=(0,u.bU)(r.getFirstCoordinate(),e.props.projection);i={x:n[0],y:n[1]}}}}));var s=(0,O.normalizeLng)(i.x),l=e.map.get("elevationLayer")&&e.map.get("elevationLayer").get("getElevation");e.props.onClick({pixel:{x:t.pixel[0],y:t.pixel[1]},latlng:{lat:i.y,lng:s,z:l&&l(r,t.pixel)||void 0},rawPos:t.coordinate.slice(),modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,metaKey:t.originalEvent.metaKey,shift:t.originalEvent.shiftKey}},a)}}}));var m=k()(this.mouseMoveEvent,100);c.on("pointermove",m),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.props.onResolutionsChange(this.getResolutions())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),e.zoomControl!==this.props.zoomControl&&(e.zoomControl?this.map.addControl(new p.Z):this.map.removeControl(this.map.getControls().getArray().filter((function(e){return e instanceof p.Z}))[0])),this.map&&(this.props.mapOptions&&this.props.mapOptions.interactions)!==(e.mapOptions&&e.mapOptions.interactions)){var o=e.mapOptions.interactions||{},r=this.map.getInteractions().getArray();Object.keys(o).forEach((function(e){var n=E.hH[e]||{},i=n.Instance,a=n.options,s=C()(r,(function(t){return E.hH[e]&&t instanceof i}));s?s.setActive(o[e]):o[e]&&i&&t.map.addInteraction(new i(a))}))}if(this.map&&this.props.id!==e.mapStateSource&&this._updateMapPositionFromNewProps(e),this.map&&e.resize!==this.props.resize&&setTimeout((function(){t.map.updateSize()}),0),this.map&&(this.props.projection!==e.projection||this.haveResolutionsChanged(e))||this.props.limits!==e.limits){if(this.props.projection!==e.projection||this.props.limits!==e.limits){var n=e.projection,i=(0,O.reproject)([e.center.x,e.center.y],"EPSG:4326",n);this.map.setView(this.createView(i,e.zoom,e.projection,e.mapOptions&&e.mapOptions.view,e.limits)),this.props.onResolutionsChange(this.getResolutions())}this.map.getLayers().forEach((function(e){var t=e.getSource();t.getTileLoadFunction&&t.setTileLoadFunction(t.getTileLoadFunction())})),this.map.render()}}},{key:"componentWillUnmount",value:function(){var e=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&this.getDocument().querySelector(this.props.mapOptions.attribution.container);if(e&&e.querySelector(".ol-attribution"))try{e.removeChild(e.querySelector(".ol-attribution"))}catch(e){}this.map&&this.map.setTarget(null)}},{key:"render",value:function(){var e=this,t=this.map,o=t?v().Children.map(this.props.children,(function(o){return o?v().cloneElement(o,{map:t,mapId:e.props.id,onLayerLoading:e.props.onLayerLoading,onLayerError:e.props.onLayerError,onLayerLoad:e.props.onLayerLoad,projection:e.props.projection,onCreationError:e.props.onCreationError,resolutions:e.getResolutions()}):null})):null;return v().createElement("div",{id:this.props.id,style:this.props.style},o)}}])&&V(t.prototype,o),b}(v().Component);H(W,"propTypes",{id:d().string,document:d().object,style:d().object,center:P.ZP.PropTypes.center,zoom:d().number.isRequired,mapStateSource:P.ZP.PropTypes.mapStateSource,projection:d().string,projectionDefs:d().array,onMapViewChanges:d().func,onResolutionsChange:d().func,onClick:d().func,mapOptions:d().object,zoomControl:d().bool,mousePointer:d().string,onMouseMove:d().func,onLayerLoading:d().func,onLayerLoad:d().func,onLayerError:d().func,resize:d().number,measurement:d().object,changeMeasurementState:d().func,registerHooks:d().bool,hookRegister:d().object,interactive:d().bool,onCreationError:d().func,bbox:d().object,wpsBounds:d().object,onWarning:d().func,maxExtent:d().array,limits:d().object,onMouseOut:d().func}),H(W,"defaultProps",{id:"map",onMapViewChanges:function(){},onResolutionsChange:function(){},onCreationError:function(){},onClick:null,onMouseMove:function(){},mapOptions:{},projection:"EPSG:3857",projectionDefs:[],onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},resize:0,registerHooks:!0,hookRegister:x.default,interactive:!0,onMouseOut:function(){},center:{x:13,y:45,crs:"EPSG:4326"},zoom:5});const Y=W},5904:(e,t,o)=>{"use strict";o.d(t,{Z:()=>ee});var r=o(24852),n=o.n(r),i=o(45697),a=o.n(i),s=o(59854),l=o.n(s),u=o(27361),p=o.n(u),c=o(18446),m=o.n(c),f=o(43624),g=o.n(f),y=o(10928),d=o.n(y),h=o(86267),v=o(8797),b=o(61868),w=o(93546),O=o(86638),P=o(38946),x=o(44538),S=o(40353),E=o(93409),L=o(97016),T=o(29902),j=o(23068),C=o(31219),A=o(98185),k=o(20767),M=o(9371),F=o(72445),G=o(69141),I=o(56834),R=o(70295);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=["textId","type"];function z(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function B(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function V(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?B(Object(o),!0).forEach((function(t){K(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,i=[],a=!0,s=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}return i}}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return q(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var $=function(e){return e.getView().getProjection().getCode()},ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(a,e);var t,o,r,n,i=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(r);if(n){var o=X(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return Q(this,e)});function a(){var e;H(this,a);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return K(J(e=i.call.apply(i,[this].concat(o))),"getLength",(function(t,o){if("Bearing"===o.measurement.geomType&&t.length>1)return(0,h.calculateAzimuth)(t[0],t[1],$(o.map));var r=e.reprojectedCoordinatesIn4326(t);return(0,h.calculateDistance)(r,o.measurement.lengthFormula)})),K(J(e),"getArea",(function(t){return e.calculateGeodesicArea(t.getLinearRing(0).getCoordinates())})),K(J(e),"updateInteraction",(function(t,o){o.some((function(e){return p()(e,"properties.disabled")}))?e.removeDrawInteraction():null===e.drawInteraction&&(e.restoreDrawState(),e.addDrawInteraction(t))})),K(J(e),"convertPolyToLineFeature",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=[],r=(0,v.wd)(t[0]);return r&&(0,v.wd)(t[1])?o=e.reprojectedCoordinatesFrom4326([t[0],t[1]]):r&&(o=e.reprojectedCoordinatesFrom4326([t[0]])),o.length?new x.Z(o):null})),K(J(e),"modifyFeatures",(function(t){var o,r,n,i,a,s=t.measurement||{},l=s.currentFeature,u=s.features,p=(null===(o=u[l])||void 0===o||null===(r=o.geometry)||void 0===r?void 0:r.coordinates)||[],c=(null===(n=u[l])||void 0===n||null===(i=n.geometry)||void 0===i?void 0:i.type)||"";"Polygon"===c&&(p=(null===(a=p)||void 0===a?void 0:a[0])||[]);var f,g,y,d,h,w,O=p.length,P=p.some((function(e){return!(0,v.wd)(e)}));if(!P&&"LineString"===c&&O<2){var S=e.reprojectedCoordinatesFrom4326(p);f=new x.Z(S),u[l]=(0,b.t8)("properties.disabled",!0,(0,b.t8)("geometry.coordinates",[].concat(N(p),[["",""]]),u[l]))}else!P&&"Polygon"===c&&O<=4&&m()(p[O-1],p[O-2])&&(p.splice(2,0,["",""]),p.pop(),u[l]=(0,b.t8)("properties.disabled",!0,(0,b.t8)("geometry.coordinates",[p],u[l])));return"Polygon"===c&&O<=4&&(f=e.convertPolyToLineFeature(p)),!P&&m()(p[O-1],p[O-2])&&(null===(g=u[l])||void 0===g||null===(y=g.geometry)||void 0===y||null===(d=y.coordinates)||void 0===d||null===(h=d[0])||void 0===h||h.pop()),f&&(e.source.clear(),w=new j.Z({geometry:f})),[u,w]})),K(J(e),"updateFeatures",(function(t){var o=_(e.modifyFeatures(t)||[],2),r=o[0],n=o[1],i=e.source.getFeatures();e.removeMeasureTooltips(),e.removeSegmentLengthOverlays(),e.source.clear(),e.textLabels=[],e.segmentLengths=[];var a=null;e.updateInteraction(t,r);var s=r.map((function(o,r){if(p()(o,"properties.disabled"))return a=r,[o,i&&i[r]&&i[r].getGeometry()||(null==n?void 0:n.getGeometry())];var s=o.geometry.type,l=p()(o,"properties.values",[]),u="bearing"===(l[0]||{}).type||!(l[0]||{}).type&&t.measurement.bearingMeasureEnabled,c="Polygon"===s?o.geometry.coordinates[0]:o.geometry.coordinates,m=c;"LineString"===s&&c.length>=2&&!u&&(m=(0,h.transformLineToArcs)(c));var f=e.reprojectedCoordinatesFrom4326(m),g="Polygon"===s?new S.ZP([f]):new x.Z(f),y={Point:function(){return c},LineString:function(){return u?(0,h.calculateAzimuth)(c[0],c[1],"EPSG:4326"):(0,h.calculateDistance)(c,t.measurement.lengthFormula)},Polygon:function(){return e.getArea(g)}},b={LineString:function(){return e.formatLengthValue(u?(0,h.calculateAzimuth)(c[0],c[1],"EPSG:4326"):(0,h.calculateDistance)(c,t.measurement.lengthFormula),t.uom,u,t.measurement.trueBearing)},Polygon:function(){return e.formatAreaValue(e.getArea(g),t.uom)}},w=e.reprojectedCoordinatesFrom4326(c);if(!u)for(var O=0;O<c.length-1;++O){e.createSegmentLengthOverlay();var P=(0,h.calculateAzimuth)(c[O],c[O+1],"EPSG:4326"),E=(0,h.calculateDistance)([c[O],c[O+1]],t.measurement.lengthFormula),L=e.props.measurement&&e.props.measurement.showLengthAndBearingLabel&&" | "+(0,v.rp)(P,e.props.measurement.trueBearing)||"",T=e.formatLengthValue(E,t.uom,u)+L;d()(e.segmentOverlayElements).innerHTML=T;var j=(0,h.midpoint)(c[O],c[O+1],!0),C=(0,h.midpoint)(w[O],w[O+1],!0);if("LineString"===s){var A=m[100*O+50];A&&(j=A,C=(0,h.pointObjectToArray)((0,h.reproject)(A,"EPSG:4326",$(e.props.map))))}d()(e.segmentOverlays).setPosition(C),e.textLabels[e.segmentOverlays.length-1]={text:T,position:j},e.segmentLengths[e.segmentOverlays.length-1]={value:E,type:u?"bearing":"length"}}if(e.createMeasureTooltip(),"Polygon"===s&&e.createMeasureTooltip(),e.tooltipCoord="LineString"===s?d()(w):e.tooltipCoord=g.getInteriorPoint().getCoordinates(),d()(e.measureTooltipElements).innerHTML=b[s](),d()(e.measureTooltips).setPosition(e.tooltipCoord),e.outputValues[e.measureTooltipElements.length-1]={value:y[s](),type:"Polygon"===s?"area":u?"bearing":"length"},"Polygon"===s){var k=(0,h.calculateDistance)(c,t.measurement.lengthFormula);e.measureTooltipElements[e.measureTooltipElements.length-2].innerHTML=e.formatLengthValue(k,t.uom,!1),e.outputValues[e.measureTooltipElements.length-2]={value:k,type:"length"},e.perimeterTooltipCoord=d()(w),e.measureTooltips[e.measureTooltipElements.length-2].setPosition(e.perimeterTooltipCoord),e.measureTooltips[e.measureTooltipElements.length-2].setOffset([0,-7])}var M=V({},o);return M.properties=o.properties?V({},o.properties):{},M.properties.values=[{value:(y[s]||function(){return null})(),formattedValue:(b[s]||function(){return null})(),position:"Polygon"===s?(0,h.pointObjectToArray)((0,h.reproject)(g.getInteriorPoint().getCoordinates(),$(t.map),"EPSG:4326")):d()(c),type:(l[0]||{}).type||(t.measurement.pointMeasureEnabled?"point":t.measurement.lineMeasureEnabled?"length":t.measurement.areaMeasureEnabled?"area":t.measurement.bearingMeasureEnabled?"bearing":void 0)}].concat(N("Polygon"===s?[{value:(0,h.calculateDistance)(c,t.measurement.lengthFormula),formattedValue:e.formatLengthValue((0,h.calculateDistance)(c,t.measurement.lengthFormula),t.uom,!1),position:d()(c),uom:t.uom,type:"length"}]:[])),[M,g]})),l=s.map((function(e){return e[0]})),u=s.map((function(e){return e[1]}));e.source.addFeatures(u.filter((function(e){return!!e})).map((function(e){return new j.Z({geometry:e})})));var c=N(e.textLabels);l.map((function(e,t){var o,r,n=!(null===(o=e.properties)||void 0===o||null===(r=o.values)||void 0===r||!r.find((function(e){return"bearing"===e.type}))),i="Polygon"===e.geometry.type,s=i||n?0:1,l=i?e.geometry.coordinates[0]:e.geometry.coordinates,u=l.some((function(e){return!(0,v.wd)(e)})),p=i?l.length-1:n?0:l.length;return e.geometry.textLabels=null!==a&&a===t&&u?e.geometry.textLabels.concat([{text:"0"}]):c.splice(0,p-s)||[],e})),e.props.changeGeometry(l),e.props.setTextLabels(N(e.textLabels));for(var m=0;m<e.measureTooltipElements.length;++m)e.measureTooltipElements[m]&&(e.measureTooltipElements[m].className="tooltip tooltip-static");for(var f=0;f<e.segmentOverlayElements.length;++f)e.segmentOverlayElements[f]&&(e.segmentOverlayElements[f].className="segment-overlay segment-overlay-static")})),K(J(e),"updateMeasures",(function(t){var o=function(o){var r=o.type,n=o.value;return"length"===r?e.formatLengthValue(n,t.uom,!1):"area"===r?e.formatAreaValue(n,t.uom):e.formatLengthValue(n,t.uom,!0,t.measurement.trueBearing)};e.outputValues=e.outputValues||[],e.segmentOverlayElements=e.segmentOverlayElements||[],e.textLabels=e.textLabels||[];for(var r=0;r<e.outputValues.length;++r)e.outputValues[r]&&(e.measureTooltipElements[r].innerHTML=o(e.outputValues[r]));for(var n=0;n<e.segmentOverlayElements.length;++n)if(e.segmentOverlayElements[n]){var i=o(e.segmentLengths[n]),a=e.textLabels[n].text,s=a.indexOf(" | ");a=a.replace(a.substring(0,-1!==s?s:a.length),i),e.segmentOverlayElements[n].innerHTML=a,e.textLabels[n].text=a}e.drawing||e.props.setTextLabels(N(e.textLabels));var l=(t.measurement.features||[]).map((function(e){return V(V({},e),e.properties?{properties:V(V({},e.properties),{},{values:(e.properties.values||[]).map((function(e){return V(V({},e),{},{formattedValue:o({type:e.type,value:e.value})})}))})}:{})}));e.props.changeGeometry(l)})),K(J(e),"addFeature",(function(t){var o=!1;e.source||(e.source=new L.Z,o=!0);var r=(0,h.reprojectGeoJson)(t,"EPSG:4326",$(e.props.map)).geometry,n=new j.Z({geometry:(0,P.y7)(r)});e.source.addFeature(n),o&&e.measureLayer.setSource(e.source)})),K(J(e),"resetGeometry",(function(){e.source.clear(),e.props.resetGeometry()})),K(J(e),"saveDrawState",(function(){var t,o,r,n;e.savedDrawState={textLabels:e.textLabels.slice(),segmentLengths:e.segmentLengths.slice(),measureTooltipsLength:null!==(t=null===(o=e.measureTooltips)||void 0===o?void 0:o.length)&&void 0!==t?t:0,segmentOverlaysLength:null!==(r=null===(n=e.segmentOverlays)||void 0===n?void 0:n.length)&&void 0!==r?r:0}})),K(J(e),"discardDrawState",(function(){e.savedDrawState=null})),K(J(e),"restoreDrawState",(function(){if(e.savedDrawState){e.textLabels=e.savedDrawState.textLabels,e.segmentLengths=e.savedDrawState.segmentLengths;for(var t=e.savedDrawState.measureTooltipsLength;t<e.measureTooltips.length;++t)e.props.map.removeOverlay(e.measureTooltips[t]),e.measureTooltipElements[t].parentNode.removeChild(e.measureTooltipElements[t]);for(var o=e.savedDrawState.segmentOverlaysLength;o<e.segmentOverlays.length;++o)e.props.map.removeOverlay(e.segmentOverlays[o]),e.segmentOverlayElements[o].parentNode.removeChild(e.segmentOverlayElements[o]);e.measureTooltips.splice(e.savedDrawState.measureTooltipsLength),e.measureTooltipElements.splice(e.savedDrawState.measureTooltipsLength),e.outputValues.splice(e.savedDrawState.measureTooltipsLength),e.segmentOverlays.splice(e.savedDrawState.segmentOverlaysLength),e.segmentOverlayElements.splice(e.savedDrawState.segmentOverlaysLength),e.curPolygonLength=void 0,e.curLineStringLength=void 0,e.savedDrawState=null}})),K(J(e),"addDrawInteraction",(function(t){var o,r,n=t.measurement.startEndPoint;if(e.continueLineMsg=(0,O.S$)(e.context.messages,"measureSupport.continueLine"),e.continuePolygonMsg=(0,O.S$)(e.context.messages,"measureSupport.continuePolygon"),e.drawInteraction&&e.removeDrawInteraction(),!e.vector){e.source=new L.Z;var i=[new C.default({fill:new A.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new k.default({color:"#ffcc33",width:2}),image:new M.default({radius:7,fill:new A.default({color:"#ffcc33"})})})],a=[],s=n||!0===n;if(s||void 0===n){var l=s?void 0===n?{}:n:t.startEndPoint;a=(0,w.rm)(l.startPointOptions,l.endPointOptions)}var u=[].concat(i,N(a));e.vector=new T.Z({source:e.source,zIndex:1e6,style:u}),e.props.map.addLayer(e.vector)}r="Bearing"===t.measurement.geomType?"LineString":t.measurement.geomType,o=new F.ZP({source:new L.Z,type:r,style:new C.default({fill:new A.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new k.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new M.default({radius:5,stroke:new k.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new A.default({color:"rgba(255, 255, 255, 0.2)"})})})}),e.clickListener=e.props.map.on("click",(function(){return e.updateMeasurementResults(e.props)})),e.props.updateOnMouseMove&&e.props.map.on("pointermove",(function(){return e.updateMeasurementResults(e.props)})),e.props.map.on("pointermove",(function(t){return e.pointerMoveHandler(t)})),o.on("drawstart",(function(t){var o,r;e.sketchFeature=t.feature,e.drawing=!0,e.textId=(null===(o=e.props.measurement)||void 0===o||null===(r=o.features)||void 0===r?void 0:r.length)||0,e.textLabels||(e.textLabels=[]),e.segmentLengths||(e.segmentLengths=[]),e.props.measurement.disableLabels||(e.saveDrawState(),e.createMeasureTooltip("Polygon"===e.props.measurement.geomType?[0,0]:void 0),"Polygon"===e.props.measurement.geomType&&e.createMeasureTooltip(),"Polygon"===e.props.measurement.geomType&&e.createSegmentLengthOverlay()),e.listener=e.sketchFeature.getGeometry().on("change",(function(t){var o,r,n=t.target;if(n instanceof S.ZP){r={value:e.getArea(n),type:"area"},o=e.formatAreaValue(r.value,e.props.uom),e.tooltipCoord=n.getInteriorPoint().getCoordinates();var i=n.getCoordinates()[0],a=[];if(!e.props.measurement.disableLabels&&((void 0===e.curPolygonLength||e.curPolygonLength<i.length)&&(e.createSegmentLengthOverlay(),e.curPolygonLength=i.length),i.length>2)){a.push((0,h.midpoint)(i[i.length-1],i[i.length-2],!0)),a.push((0,h.midpoint)(i[i.length-2],i[i.length-3],!0));for(var s=0;s<a.length;++s){var l=i.slice(i.length-2-s,i.length-s),u=e.getLength(l,e.props),p=e.props.measurement&&e.props.measurement.showLengthAndBearingLabel&&" | "+(0,v.rp)((0,h.calculateAzimuth)(l[0],l[1],$(e.props.map)),e.props.measurement.trueBearing)||"",c=e.formatLengthValue(u,e.props.uom,!1)+p;e.segmentOverlayElements[e.segmentOverlays.length-s-1].innerHTML=c,e.segmentOverlays[e.segmentOverlays.length-s-1].setPosition(a[s]),e.segmentLengths[e.segmentOverlays.length-s-1]={value:u,type:"length"},e.textLabels[e.segmentOverlays.length-s-1]={text:c,position:(0,h.pointObjectToArray)((0,h.reproject)(a[s],$(e.props.map),"EPSG:4326")),type:e.props.measurement.geomType,textId:e.textId}}}}else if(n instanceof x.Z){var m=n.getCoordinates(),f=[m[m.length-2],m[m.length-1]];e.props.measurement.disableLabels||e.props.measurement.bearingMeasureEnabled||!(void 0===e.curLineStringLength||e.curLineStringLength<m.length)||(e.createSegmentLengthOverlay(),e.curLineStringLength=m.length);var y=e.getLength(m,e.props),b=e.getLength(f,e.props);if(o=e.formatLengthValue(y,e.props.uom,"Bearing"===e.props.measurement.geomType,e.props.measurement.trueBearing),e.tooltipCoord=n.getLastCoordinate(),!e.props.measurement.disableLabels&&!e.props.measurement.bearingMeasureEnabled){var w=e.props.measurement&&e.props.measurement.showLengthAndBearingLabel&&" | "+(0,v.rp)((0,h.calculateAzimuth)(f[0],f[1],$(e.props.map)),e.props.measurement.trueBearing)||"",O=e.formatLengthValue(b,e.props.uom,"Bearing"===e.props.measurement.geomType,e.props.measurement.trueBearing)+w;d()(e.segmentOverlayElements).innerHTML=O,d()(e.segmentOverlays).setPosition((0,h.midpoint)(f[0],f[1],!0)),e.textLabels[e.segmentOverlays.length-1]={text:O,position:(0,h.pointObjectToArray)((0,h.reproject)((0,h.midpoint)(f[0],f[1],!0),$(e.props.map),"EPSG:4326")),type:e.props.measurement.geomType,textId:e.textId},e.segmentLengths[e.segmentOverlays.length-1]={value:b,type:"Bearing"===e.props.measurement.geomType?"bearing":"length"}}r={value:y,type:"Bearing"===e.props.measurement.geomType?"bearing":"length"}}if(!e.props.measurement.disableLabels&&(d()(e.measureTooltipElements).innerHTML=o,d()(e.measureTooltips).setPosition(e.tooltipCoord),e.outputValues[e.outputValues.length-1]=r,n instanceof S.ZP)){var P=n.getCoordinates()[0],E=e.getLength(3===P.length?g()(P):P,e.props);e.measureTooltipElements[e.measureTooltipElements.length-2].innerHTML=e.formatLengthValue(E,e.props.uom,!1),e.outputValues[e.measureTooltipElements.length-2]={value:E,type:"length"},e.perimeterTooltipCoord=n.getLastCoordinate(),e.measureTooltips[e.measureTooltipElements.length-2].setPosition(e.perimeterTooltipCoord)}}))})),o.on("drawend",(function(t){var o;e.drawing=!1;var r=p()(e.props.measurement,"features",[]),n=t.feature.getGeometry(),i=n.getCoordinates(),a=new G.Z,s={Point:function(){return(0,h.reproject)(i,$(e.props.map),"EPSG:4326")},LineString:function(){return e.getLength(i,e.props)},Polygon:function(){return e.getArea(n)},Bearing:function(){return(0,h.calculateAzimuth)(i[0],i[1],$(e.props.map))}},l={LineString:function(){return e.formatLengthValue(e.getLength(i,e.props),e.props.uom,!1)},Polygon:function(){return e.formatAreaValue(e.getArea(n),e.props.uom)},Bearing:function(){return e.formatLengthValue((0,h.calculateAzimuth)(i[0],i[1],$(e.props.map)),e.props.uom,!0,e.props.measurement.trueBearing)}},u=(0,h.reprojectGeoJson)(a.writeFeatureObject(t.feature.clone()),$(e.props.map),"EPSG:4326");u.properties=u.properties||{},u.properties.values=[{value:(s[e.props.measurement.geomType]||function(){return null})(),formattedValue:(l[e.props.measurement.geomType]||function(){return null})(),position:(0,h.pointObjectToArray)((0,h.reproject)("Polygon"===e.props.measurement.geomType?n.getInteriorPoint().getCoordinates():d()(i),$(e.props.map),"EPSG:4326")),type:e.props.measurement.pointMeasureEnabled?"point":e.props.measurement.lineMeasureEnabled?"length":e.props.measurement.areaMeasureEnabled?"area":e.props.measurement.bearingMeasureEnabled?"bearing":void 0}].concat(N("Polygon"===e.props.measurement.geomType?[{value:(e.outputValues[e.measureTooltipElements.length-2]||{}).value||0,formattedValue:e.formatLengthValue((e.outputValues[e.measureTooltipElements.length-2]||{}).value||0,e.props.uom,!1),position:(0,h.pointObjectToArray)((0,h.reproject)(d()(i[0]),$(e.props.map),"EPSG:4326")),uom:e.props.uom,type:"length"}]:[]));var c=V({},u);if(e.props.measurement.lineMeasureEnabled){var m=c.geometry.coordinates,f=(0,h.transformLineToArcs)(m);if(!e.props.measurement.disableLabels){e.removeLastSegment();for(var g=0;g<m.length-1;++g){var y=f[100*g+50];y&&(e.textLabels[e.segmentOverlays.length-m.length+1+g].position=y,e.segmentOverlays[e.segmentOverlays.length-m.length+1+g].setPosition((0,h.pointObjectToArray)((0,h.reproject)(y,"EPSG:4326",$(e.props.map)))))}}c=(0,b.t8)("geometry.coordinates",f,c)}else!e.props.measurement.disableLabels&&e.props.measurement.areaMeasureEnabled&&(e.textLabels.splice(e.segmentOverlays.length-2,1),e.props.map.removeOverlay(e.segmentOverlays[e.segmentOverlays.length-2]),e.segmentOverlayElements[e.segmentOverlays.length-2].parentNode.removeChild(e.segmentOverlayElements[e.segmentOverlays.length-2]),e.segmentOverlayElements.splice(e.segmentOverlays.length-2,1),e.segmentOverlays.splice(e.segmentOverlays.length-2,1));var v="bearing"===(null===(o=u.properties.values[0])||void 0===o?void 0:o.type)?"Bearing":u.geometry.type;if(u.geometry.textLabels=e.textLabels.filter((function(t){return t.type===v&&t.textId===e.textId})).map((function(e){return e.textId,e.type,z(e,D)})),e.props.changeGeometry([].concat(N(r),[u])),e.props.setTextLabels(N(e.textLabels)),e.addFeature(c),!e.props.measurement.disableLabels&&(d()(e.measureTooltipElements).className="tooltip tooltip-static",d()(e.measureTooltips).setOffset([0,-7]),"Polygon"===e.props.measurement.geomType&&(e.measureTooltipElements[e.measureTooltipElements.length-2].className="tooltip tooltip-static",e.measureTooltips[e.measureTooltipElements.length-2].setOffset([0,-7])),e.segmentOverlayElements))for(var w=0;w<e.segmentOverlayElements.length;++w)e.segmentOverlayElements[w]&&(e.segmentOverlayElements[w].className="segment-overlay segment-overlay-static");(0,I.B)(e.listener),e.curPolygonLength=void 0,e.curLineStringLength=void 0,e.discardDrawState()})),e.props.map.addInteraction(o),e.createHelpTooltip(),e.drawInteraction=o,e.measureLayer=e.vector})),K(J(e),"removeLastSegment",(function(){e.textLabels.pop(),e.segmentLengths.pop(),e.props.map.removeOverlay(d()(e.segmentOverlays)),d()(e.segmentOverlayElements).parentNode.removeChild(d()(e.segmentOverlayElements)),e.segmentOverlays.pop(),e.segmentOverlayElements.pop()})),K(J(e),"removeDrawInteraction",(function(){null!==e.drawInteraction&&(e.removeHelpTooltip(),e.props.map.removeInteraction(e.drawInteraction),e.drawInteraction=null,e.sketchFeature=null,e.props.map.un("click",(function(){return e.updateMeasurementResults(e.props)}),J(e)),(0,I.B)(e.clickListener),e.props.updateOnMouseMove&&e.props.map.un("pointermove",(function(){return e.updateMeasurementResults(e.props)}),J(e)))})),K(J(e),"pointerMoveHandler",(function(e){if(!e.dragging){var t=(0,O.S$)(this.context.messages,"measureSupport.startDrawing");if(this.sketchFeature&&this.drawing){var o=this.sketchFeature.getGeometry();o instanceof S.ZP?t=this.continuePolygonMsg:o instanceof x.Z&&(t=this.continueLineMsg)}this.helpTooltipElement.innerHTML=t,this.helpTooltip.setPosition(e.coordinate),this.helpTooltipElement.classList.remove("hidden")}})),K(J(e),"updateMeasurementResults",(function(t){if(e.sketchFeature){var o=e.sketchFeature.getGeometry().getCoordinates();if("Bearing"===t.measurement.geomType&&o.length>1&&o.length>2){for(e.drawInteraction.sketchCoords_=[o[0],o[1],o[0]];e.sketchFeature.getGeometry().getCoordinates().length>3;)e.drawInteraction.removeLastPoint();e.sketchFeature.getGeometry().setCoordinates([o[0],o[1]]),e.drawInteraction.sketchFeature_=e.sketchFeature,e.drawInteraction.finishDrawing()}}})),K(J(e),"reprojectedCoordinatesFrom4326",(function(t){return t.map((function(t){var o=(0,h.reproject)(t,"EPSG:4326",$(e.props.map));return[o.x,o.y]}))})),K(J(e),"reprojectedCoordinatesIn4326",(function(t){return t.map((function(t){var o=(0,h.reproject)(t,$(e.props.map),"EPSG:4326");return[o.x,o.y]}))})),K(J(e),"calculateGeodesicArea",(function(t){if(t.length>=4){var o=e.reprojectedCoordinatesIn4326(t);return Math.abs((0,R.bg)(new S.ZP([o]),{projection:"EPSG:4326"}))}return 0})),K(J(e),"createHelpTooltip",(function(){e.removeHelpTooltip(),e.helpTooltipElement=document.createElement("div"),e.helpTooltipElement.className="tooltip hidden",e.helpTooltip=new E.Z({element:e.helpTooltipElement,offset:[15,0],positioning:"center-left"}),e.props.map.addOverlay(e.helpTooltip)})),K(J(e),"createMeasureTooltip",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,-15];e.measureTooltipElements||(e.measureTooltipElements=[]),e.measureTooltips||(e.measureTooltips=[]),e.outputValues||(e.outputValues=[]);var o=document.createElement("div");o.className="tooltip tooltip-measure",o.style.display=e.props.measurement.showLabel?"":"none",e.measureTooltipElements.push(o);var r=new E.Z({element:o,offset:t,positioning:"bottom-center"});e.props.map.addOverlay(r),e.measureTooltips.push(r),e.outputValues.push(null)})),K(J(e),"createSegmentLengthOverlay",(function(t){e.segmentOverlayElements||(e.segmentOverlayElements=[]),e.segmentOverlays||(e.segmentOverlays=[]);var o=document.createElement("div");o.className="segment-overlay",o.style.display=e.props.measurement.showSegmentLengths&&!t?"":"none",e.segmentOverlayElements.push(o);var r=new E.Z({element:o,offset:[0,0],positioning:"center-center"});e.props.map.addOverlay(r),e.segmentOverlays.push(r)})),K(J(e),"formatLengthValue",(function(t,o,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r)return(0,v.rp)(t,n);var i=o&&o.length,a=i.label,s=i.unit,u=l()((0,v.Ov)(t,"m",s),2);return e.props.formatNumber(u)+" "+a})),K(J(e),"formatAreaValue",(function(t,o){var r=o&&o.area,n=r.label,i=r.unit,a=l()((0,v.Ov)(t,"sqm",i),2);return e.props.formatNumber(a)+" "+n})),K(J(e),"removeHelpTooltip",(function(){e.helpTooltipElement&&e.helpTooltipElement.parentNode&&e.helpTooltipElement.parentNode.removeChild(e.helpTooltipElement),e.helpTooltip&&e.props.map.removeOverlay(e.helpTooltip)})),K(J(e),"removeMeasureTooltips",(function(){(e.measureTooltips||[]).forEach((function(t){e.props.map.removeOverlay(t)}));for(var t=document.getElementsByClassName("tooltip-static")||[],o=0;o<t.length;o++)t[o].parentNode.removeChild(t[o]);t=document.getElementsByClassName("tooltip-measure")||[];for(var r=0;r<t.length;r++)t[r].parentNode.removeChild(t[r]);e.measureTooltips=[],e.measureTooltipElements=[],e.outputValues=[]})),K(J(e),"removeSegmentLengthOverlays",(function(){(e.segmentOverlays||[]).forEach((function(t){e.props.map.removeOverlay(t)})),(e.segmentOverlayElements||[]).forEach((function(e){e.parentNode.removeChild(e)})),e.segmentOverlays=[],e.segmentOverlayElements=[]})),e}return t=a,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.measureTooltipElements&&e.measurement.showLabel!==this.props.measurement.showLabel)for(var t=0;t<this.measureTooltipElements.length;++t)this.measureTooltipElements[t]&&(this.measureTooltipElements[t].style.display=e.measurement.showLabel?"":"none");if(this.segmentOverlayElements&&e.measurement.showSegmentLengths)for(var o=0;o<this.segmentOverlayElements.length;++o)this.segmentOverlayElements[o]&&(this.segmentOverlayElements[o].style.display=e.measurement.showSegmentLengths?"":"none");(e.measurement.geomType&&e.measurement.geomType!==this.props.measurement.geomType||e.measurement.geomType&&(e.measurement.lineMeasureEnabled||e.measurement.areaMeasureEnabled||e.measurement.bearingMeasureEnabled)&&!this.props.enabled&&e.enabled)&&(this.restoreDrawState(),this.addDrawInteraction(e)),e.measurement.geomType||(this.removeDrawInteraction(),this.removeMeasureTooltips(),this.removeSegmentLengthOverlays(),this.textLabels=[],this.segmentLengths=[],this.props.map.removeLayer(this.measureLayer),this.vector=null,this.measureLayer=null,e.measurement.features&&e.measurement.features.length>0&&this.props.changeGeometry([]),e.measurement.textLabels&&e.measurement.textLabels.length>0&&this.props.setTextLabels([]),this.source&&(this.source.clear(),this.source=null));var r=this.props.measurement.features,n=e.measurement.features;e.measurement.updatedByUI&&!m()(r,n)?this.updateFeatures(e):e.measurement.updatedByUI&&!m()(this.props.uom,e.uom)&&this.updateMeasures(e)}},{key:"render",value:function(){return null}}])&&W(t.prototype,o),a}(n().Component);K(ee,"propTypes",{startEndPoint:a().object,map:a().object,measurement:a().object,enabled:a().bool,uom:a().object,formatNumber:a().func,changeMeasurementState:a().func,updateMeasures:a().func,resetGeometry:a().func,changeGeometry:a().func,updateOnMouseMove:a().bool,setTextLabels:a().func}),K(ee,"contextTypes",{messages:a().object}),K(ee,"defaultProps",{changeMeasurementState:function(){},resetGeometry:function(){},updateMeasures:function(){},changeGeometry:function(){},formatNumber:function(e){return e},setTextLabels:function(){},startEndPoint:{startPointOptions:{radius:3,fillColor:"green",applyToPolygon:!0},endPointOptions:{radius:3,fillColor:"red",applyToPolygon:!0}},updateOnMouseMove:!1})},22404:(e,t,o)=>{"use strict";o.d(t,{Z:()=>P});var r=o(45697),n=o.n(r),i=o(24852),a=o.n(i),s=o(8010),l=o(27418),u=o.n(l),p=o(97398),c=o.n(p),m=o(3728);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o(35309);var O={className:"ol-overviewmap ol-custom-overviewmap",collapseLabel:"»",label:"«",collapsed:!0,collapsible:!0},P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,o,r,n,i=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(n){var o=b(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return h(this,e)});function a(){var e;g(this,a);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return w(v(e=i.call.apply(i,[this].concat(o))),"dragstart",(function(t){e.dragging||(e.dragBox=e.box.cloneNode(),e.dragBox.setAttribute("class","ol-overview-dargbox"),e.dragBox.style.position="relative",e.box.appendChild(e.dragBox),""===e.box.style.top?e.offsetStartTop=0:e.offsetStartTop=parseInt(e.box.style.top.slice(0,-2),10),""===e.box.style.left?e.offsetStartLeft=0:e.offsetStartLeft=parseInt(e.box.style.left.slice(0,-2),10),e.mouseStartTop=t.pageY,e.mouseStartLeft=t.pageX,e.dragging=!0)})),w(v(e),"draggingel",(function(t){!0===e.dragging&&(e.dragBox.style.top=e.offsetStartTop+t.pageY-e.mouseStartTop+"px",e.dragBox.style.left=e.offsetStartLeft+t.pageX-e.mouseStartLeft+"px",t.stopPropagation(),t.preventDefault())})),w(v(e),"dragend",(function(){if(!0===e.dragging){var t={};t.top=""===e.dragBox.style.top?0:parseInt(e.dragBox.style.top.slice(0,-2),10),t.left=""===e.dragBox.style.left?0:parseInt(e.dragBox.style.left.slice(0,-2),10),e.box.removeChild(e.dragBox),delete e.dragBox,e.dragging=!1,e.setNewExtent(t)}})),w(v(e),"setNewExtent",(function(t){var o=e.box.offsetWidth,r=e.box.offsetHeight,n=e.props.map.getSize(),i=t.left*Math.abs(n[0]/o),a=t.top*Math.abs(n[1]/r);i=c()(i)?i:0,a=c()(a)?a:0;var s=[0+i,n[1]+a],l=[n[0]+i,0+a],u=e.props.map.getCoordinateFromPixel(s)||[0,0],p=e.props.map.getCoordinateFromPixel(l)||[0,0],m=[u[0],u[1],p[0],p[1]];e.props.map.getView().fit(m,n,{nearest:!0})})),e}return t=a,(o=[{key:"componentDidMount",value:function(){var e=this,t=[];this.props.layers.forEach((function(e){t.push(s.default.createLayer(e.type,e.options||{}))}));var o=u()({},O,this.props.overviewOpt,{layers:t});this.overview=new m.Z(o),this.props.map&&this.overview.setMap(this.props.map),this.box=this.overview.element.getElementsByClassName("ol-overviewmap-box").item(0),this.box.onmousedown=function(t){e.dragstart(t),e.box.onmousemove=function(t){e.draggingel(t)},e.overview.element.onmousemove=function(t){e.draggingel(t)},e.box.onmouseup=function(){e.dragend(),e.overview.element.onmousemove=null,e.box.onmousemove=null,e.box.onmouseup=null}}}},{key:"render",value:function(){return null}}])&&y(t.prototype,o),a}(a().Component);w(P,"displayName","Overview"),w(P,"propTypes",{id:n().string,map:n().object,overviewOpt:n().object,layers:n().array}),w(P,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]})},9056:(e,t,o)=>{"use strict";o.d(t,{Z:()=>h});var r=o(45697),n=o.n(r),i=o(24852),a=o.n(i),s=o(27418),l=o.n(s),u=o(25303);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,o,r,n,i=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(n){var o=y(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return g(this,e)});function a(){return c(this,a),i.apply(this,arguments)}return t=a,(o=[{key:"componentDidMount",value:function(){this.scalebar=new u.ZP(l()({},this.props,this.props.container?{target:document.querySelector(this.props.container)}:{})),this.props.map&&this.props.map.addControl(this.scalebar)}},{key:"componentWillUnmount",value:function(){if(this.props.container&&document.querySelector(".ol-scale-line"))try{document.querySelector(this.props.container).removeChild(document.querySelector(".ol-scale-line"))}catch(e){}}},{key:"render",value:function(){return null}}])&&m(t.prototype,o),a}(a().Component);d(h,"propTypes",{map:n().object,className:n().string,minWidth:n().number,units:n().oneOf(["degrees","imperial","nautical","metric","us"]),container:n().string}),d(h,"defaultProps",{map:null,className:"ol-scale-line",minWidth:64,units:"metric"})},93546:(e,t,o)=>{"use strict";o.d(t,{jF:()=>He,Fc:()=>Me,EC:()=>Ue,C2:()=>Ne,Cw:()=>_e,rm:()=>qe});var r=o(14293),n=o.n(r),i=o(92742),a=o.n(i),s=o(47037),l=o.n(s),u=o(1469),p=o.n(u),c=o(84596),m=o.n(c),f=o(91175),g=o.n(f),y=o(10928),d=o.n(y),h=o(13311),v=o.n(h),b=o(13218),w=o.n(b),O=o(21915),P=o(43143),x=o(86267),S=o(33506),E=o(81763),L=o.n(E),T=o(31219),j=o(62875),C=o(15565),A=o(98185),k=o(38097),M=o.n(k),F=S.Z.markers.extra,G=F.icons[0],I=F.icons[1],R=F.size[1],Z=S.Z.getGlyphs("fontawesome"),D=function(e,t){var o=e.highlight,r=e.rotation,n=void 0===r?0:r;return o?[new T.default({image:new j.default({anchor:[.5,t],rotation:n,anchorXUnits:"fraction",anchorYUnits:"pixels",src:M(),scale:.5})})]:[]},z=function(e,t){var o,r,n=null==Z?void 0:Z[null==e||null===(o=e.style)||void 0===o?void 0:o.iconGlyph],i="FontAwesome",a=2;return null!=e&&null!==(r=e.style)&&void 0!==r&&r.iconText&&(n=e.style.iconText,i="sans-serif",a=1.6),new C.default({rotation:t,text:n,font:"14px ".concat(i),offsetY:-R*a/3,fill:new A.default({color:"#FFFFFF"})})};const B={extra:{getIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n()(e.style&&e.style.rotation)?0:e.style.rotation;return[new T.default({image:new j.default({rotation:t,anchor:[12,12],anchorXUnits:"pixels",anchorYUnits:"pixels",src:I})}),new T.default({image:new j.default({rotation:t,src:G,anchor:[F.size[0]/2,F.size[1]],anchorXUnits:"pixels",anchorYUnits:"pixels",size:F.size,offset:[F.colors.indexOf(e.style.iconColor||"blue")*F.size[0],F.shapes.indexOf(e.style.iconShape||"circle")*F.size[1]]}),text:z(e,t)})].concat(D(e.style,2*(R+15)))}},standard:{getIcon:function(e){var t=e.style,o=e.iconAnchor,r=n()(t&&t.rotation)?0:t.rotation,i=t.iconAnchor||o,a=[new T.default({image:new j.default({anchor:i||[.5,1],anchorXUnits:t.anchorXUnits||(i||0===i?"pixels":"fraction"),anchorYUnits:t.anchorYUnits||(i||0===i?"pixels":"fraction"),size:p()(t.size)?t.size:L()(t.size)?[t.size,t.size]:void 0,rotation:r,anchorOrigin:t.anchorOrigin||"top-left",src:t.iconUrl||t.symbolUrlCustomized||t.symbolUrl})})];t.shadowUrl&&(a=[new T.default({image:new j.default({anchor:[12,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:t.shadowUrl})}),a[0]]);var s=p()(t.size)?t.size[1]:L()(t.size)?t.size:0;return s=s>32?s+.75*s:R+10,a.concat(D(t,s))}},html:{getIcon:function(){return null}}};var V=o(66287),_=o(9371),N=o(20767),U=o(52043),q=o(44538),H=o(82702),W=o(75875),Y=o.n(W),Q=o(53772),J=o.n(Q),X=o(3918),K=o.n(X),$=o(51205),ee=o.n($),te=o(27418),oe=o.n(te),re=o(61868);function ne(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ie(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function ae(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function se(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(o),!0).forEach((function(t){le(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ae(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function le(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var ue=[0,153,255,1],pe=new _.default({radius:5,fill:null,stroke:new N.default({color:"red",width:1})}),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,o=void 0===t?5:t,r=e.fillColor,n=void 0===r?"green":r,i=e.applyToPolygon,a=void 0!==i&&i;return new T.default({image:new _.default({radius:o,fill:new A.default({color:n})}),geometry:function(e){var t=e.getGeometry(),o=t.getType();if(!a&&"Polygon"===o)return null;var r="Polygon"===o?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new U.Z(g()(r)):null}})},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,o=void 0===t?5:t,r=e.fillColor,n=void 0===r?"red":r,i=e.applyToPolygon,a=void 0!==i&&i;return new T.default({image:new _.default({radius:o,fill:new A.default({color:n})}),geometry:function(e){var t=e.getGeometry(),o=t.getType();if(!a&&"Polygon"===o)return null;var r="Polygon"===o?t.getCoordinates()[0]:t.getCoordinates();return new U.Z(r.length>3?r[r.length-("Polygon"===o?2:1)]:d()(r))}})},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[ce(e),me(t)]},ge=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new T.default({text:new C.default({offsetY:-4*Math.sqrt(e.fontSize),textAlign:e.textAlign||"center",text:t||"",font:e.font,fill:new A.default({color:(0,P.qq)(e.stroke||e.color||"#000000",e.opacity||1)}),stroke:o?new N.default({color:[255,255,255,1],width:2}):null}),image:o?new _.default({radius:5,fill:null,stroke:new N.default({color:(0,P.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null})},ye={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,radius:10},de={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},he={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},ve={Marker:{iconColor:"orange",iconShape:"circle",iconGlyph:"comment"},Text:{fontStyle:"normal",fontSize:"14",fontSizeUom:"px",fontFamily:"Arial",fontWeight:"normal",font:"14px Arial",textAlign:"center",color:"#000000",opacity:1},Circle:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2},Point:ye,MultiPoint:ye,LineString:de,MultiLineString:de,Polygon:he,MultiPolygon:he},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"blue",width:3,lineDash:[6]};return{stroke:new N.default(e.style?e.style.stroke||{color:e.style.color||t.color,lineDash:l()(e.style.dashArray)&&a()(e.style.dashArray).split(" ")||t.lineDash,width:e.style.weight||t.width,lineCap:e.style.lineCap||"round",lineJoin:e.style.lineJoin||"round",lineDashOffset:e.style.dashOffset||0}:se({},t))}},we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"rgba(0, 0, 255, 0.1)"};return{fill:new A.default(e.style?e.style.fill||{color:(0,P.qq)(e.style.fillColor,e.style.fillOpacity)||t.color}:se({},t))}},Oe={Point:function(){return[new T.default({image:pe})]},LineString:function(e){return[new T.default(oe()({},be(e,{color:"blue",width:3})))]},MultiLineString:function(e){return[new T.default(oe()({},be(e,{color:"blue",width:3})))]},MultiPoint:function(){return[new T.default({image:pe})]},MultiPolygon:function(e){return[new T.default(oe()({},be(e),we(e)))]},Polygon:function(e){return[new T.default(oe()({},be(e),we(e)))]},GeometryCollection:function(e){return[new T.default(oe()({},be(e),we(e),{image:new _.default({radius:10,fill:null,stroke:new N.default({color:"magenta"})})}))]},Circle:function(){return[new T.default({stroke:new N.default({color:"red",width:2}),fill:new A.default({color:"rgba(255,0,0,0.2)"})})]},marker:function(e){return[new T.default({image:new j.default({anchor:[14,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:ee()})}),new T.default({image:new j.default({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:K()}),text:new C.default({text:e.label,scale:1.25,offsetY:8,fill:new A.default({color:"#000000"}),stroke:new N.default({color:"#FFFFFF",width:2})})})]}},Pe=function(e,t){var o=e.getGeometry().getType();return Oe[o](t&&t.style&&t.style[o]&&{style:se({},t.style[o])}||t||{})};function xe(e){if(e.style.iconUrl)return B.standard.getIcon(e);var t=e.style.iconLibrary||"extra";return B[t]?B[t].getIcon(e):null}var Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{style:ve},o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=t.style[e]||t.style;if("MultiLineString"===e||"LineString"===e){var l=[new T.default({stroke:t.style.useSelectedStyle?new N.default({color:[255,255,255,1],width:s.weight+2}):null}),new T.default(s?{stroke:new N.default(s&&s.stroke?s.stroke:{color:(0,P.qq)(t.style&&s.color||"#0000FF",s.opacity||1),lineDash:t.style.highlight?[10]:[0],width:s.weight||1}),image:o?pe:null}:{stroke:new N.default(ve[e]&&ve[e].stroke?ve[e].stroke:{color:(0,P.qq)(t.style&&ve[e].color||"#0000FF",ve[e].opacity||1),lineDash:t.style.highlight?[10]:[0],width:ve[e].weight||1})})],u=t.style.useSelectedStyle?fe({radius:s.weight,applyToPolygon:!0},{radius:s.weight,applyToPolygon:!0}):[];return[].concat(ne(u),l)}if(("MultiPoint"===e||"Point"===e)&&(s.iconUrl||s.iconGlyph))return o?new T.default({image:pe}):xe({style:se(se({},s),{},{highlight:t.style.highlight||t.style.useSelectedStyle})});if("Circle"===e&&a){var p=[new T.default({stroke:t.style.useSelectedStyle?new N.default({color:[255,255,255,1],width:s.weight+4}):null}),new T.default({stroke:new N.default(s&&s.stroke?s.stroke:{color:t.style.useSelectedStyle?ue:(0,P.qq)(t.style&&s.color||"#0000FF",s.opacity||1),lineDash:t.style.highlight?[10]:[0],width:s.weight||1}),fill:new A.default(s.fill?s.fill:{color:(0,P.qq)(t.style&&s.fillColor||"#0000FF",s.fillOpacity||.2)})}),new T.default({image:t.style.useSelectedStyle?new _.default({radius:3,fill:new A.default(s.fill?s.fill:{color:ue})}):null,geometry:function(e){var t=e.getGeometry();if("Circle"===t.getType()){var o=t.getCenter();return new U.Z(o)}return null}})];return p}if("Text"===e&&s.font)return[ge(s,r[0],t.style.useSelectedStyle||t.style.highlight)];if("MultiPolygon"===e||"Polygon"===e){var c=[new T.default({stroke:t.style.useSelectedStyle?new N.default({color:[255,255,255,1],width:s.weight+2}):null}),new T.default({stroke:new N.default(s.stroke?s.stroke:{color:t.style.useSelectedStyle?ue:(0,P.qq)(t.style&&s.color||"#0000FF",n()(s.opacity)?1:s.opacity),lineDash:t.style.highlight?[10]:[0],width:s.weight||1}),image:o?pe:null,fill:new A.default(s.fill?s.fill:{color:(0,P.qq)(t.style&&s.fillColor||"#0000FF",n()(s.fillOpacity)?1:s.fillOpacity)})})],m=t.style.useSelectedStyle?fe({radius:s.weight,applyToPolygon:!0},{radius:s.weight,applyToPolygon:!0}):[];return[].concat(c,ne(m))}return i};function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.styleName&&!e.overrideOLStyle)return function(t){if("marker"===e.styleName)switch(t.getGeometry().getType()){case"Point":case"MultiPoint":return Oe.marker(e)}return Oe[e.styleName](e)};var r,i=e.nativeStyle,a=o,s=0,l=e.style&&e.style.type||(e.features&&e.features[0]&&e.features[0].geometry?e.features[0].geometry.type:void 0);if("FeatureCollection"===l||e.features&&e.features[0]&&"FeatureCollection"===e.features[0].type)return function(o){var n=this||o;r=n.getGeometry()&&n.getGeometry().getType();var i=n&&n.getProperties();i&&i.isCircle&&(r="Circle",s=i.radius),i&&i.isText&&(r="Text",a=[i.valueText]);var l=(0,re.t8)("style.useSelectedStyle",i.canEdit,e);return Se(r,l,t,a,null,s)};if(e&&e.properties&&e.properties.isText)return r="Text",a=[e.properties.valueText],Se(r,e,t,a,null,s);if(e&&e.properties&&e.properties.isCircle)return r="Circle",s=e.properties.radius,Se(r,e,t,a,null,s);if(!i&&e.style){if(i={stroke:new N.default(e.style.stroke?e.style.stroke:{color:(0,P.qq)(e.style&&e.style.color||"#0000FF",n()(e.style.opacity)?1:e.style.opacity),lineDash:e.style.highlight?[10]:[0],width:e.style.weight||1}),fill:new A.default(e.style.fill?e.style.fill:{color:(0,P.qq)(e.style&&e.style.fillColor||"#0000FF",n()(e.style.fillOpacity)?1:e.style.fillOpacity)})},"Point"!==l&&"MultiPoint"!==l||(i={image:new _.default(oe()({},i,{radius:e.style.radius||5}))}),e.style.iconUrl||e.style.iconGlyph){var u=xe(e);return function(t){var o=this||t;switch(r=o.getGeometry().getType()){case"Point":case"MultiPoint":return u;default:return Pe(o,e)}}}return i=new T.default(i),"GeometryCollection"===l?i=function(n){var i,a=this||n;r=a.getGeometry().getType();var s=a.get("textGeometriesIndexes")||[],l=a.get("circles")||[],u=a.get("textValues");return"GeometryCollection"===a.getGeometry().getType()?a.getGeometry().getGeometries().reduce((function(n,a,c){if(("Point"===(r=a.getType())||"MultiPoint"===r)&&s.length&&-1!==s.indexOf(c)){var m=Se("Text",e,t,[u[s.indexOf(c)]]);return m.setGeometry(a),n.concat([m])}if("Polygon"===r&&l.length&&-1!==l.indexOf(c)){var f=Se("Circle",e,t,[]);return f.setGeometry(a),n.concat([f])}if("Point"===r||"MultiPoint"===r)return i=xe({style:se(se({},e.style[r]),{},{highlight:e.style.highlight})}),n.concat(i.map((function(e){return e.setGeometry(a),e})));var g=Se(r,e,t,o);return p()(g)?g.forEach((function(e){return e.setGeometry(a)})):g.setGeometry(a),n.concat([g])}),[]):"Point"===r||"MultiPoint"===r?(i=xe({style:se(se({},e.style[r]),{},{highlight:e.style.highlight})}),t?new T.default({image:pe,geometry:a.getGeometry()}):i.map((function(e){return e.setGeometry(a.getGeometry()),e}))):Se(r,e,t,o)}:("Circle"===l&&(s=e.features&&e.features.length&&e.features[0].properties&&e.features[0].properties.radius||10),Se(l,e,t,o,i,s))}return i||Pe}function Le(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Te(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(o),!0).forEach((function(t){je(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Le(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function je(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Ce=new(J()),Ae={white:[255,255,255,1],blue:[0,153,255,1],width:3},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,V.isCircleStyle)(e)?new _.default({stroke:t,fill:o,radius:e.radius||5}):null},Me=function(e){if((0,V.isMarkerStyle)(e)){if(e.iconUrl)return B.standard.getIcon({style:e});var t=e.iconLibrary||"extra";if(B[t])return B[t].getIcon({style:e})}return null},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,V.isStrokeStyle)(e)?new N.default(e.stroke&&w()(e.stroke)?e.stroke:{color:e.highlight?Ae.blue:(0,P.qq)(e.color||e.stroke||"#0000FF",n()(e.opacity)?1:e.opacity),width:n()(e.weight)?1:e.weight,lineDash:l()(e.dashArray)&&a()(e.dashArray).split(" ")||p()(e.dashArray)&&e.dashArray||[0],lineCap:e.lineCap||"round",lineJoin:e.lineJoin||"round",lineDashOffset:e.dashOffset||0}):null},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,V.isFillStyle)(e)?new A.default(e.fill&&w()(e.fill)?e.fill:{color:(0,P.qq)(e.fillColor||"#0000FF",n()(e.fillOpacity)?1:e.fillOpacity)}):null},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,V.isTextStyle)(e)?new C.default({fill:o,offsetY:e.offsetY||-4*Math.sqrt(e.fontSize),rotation:e.textRotationDeg?e.textRotationDeg/180*Math.PI:0,textAlign:e.textAlign||"center",text:e.label||r&&r.properties&&r.properties.valueText||"New",font:e.font||"Arial",stroke:e.highlight?new N.default({color:[255,255,255,1],width:2}):t,image:e.highlight?new _.default({radius:5,fill:null,stroke:new N.default({color:(0,P.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null}):null},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,o=void 0===t?5:t,r=e.fillColor,n=void 0===r?"green":r,i=e.applyToPolygon,a=void 0!==i&&i;return new T.default({image:new _.default({radius:o,fill:new A.default({color:n})}),geometry:function(e){var t=e.getGeometry(),o=t.getType();if(!a&&"Polygon"===o)return null;var r="Polygon"===o?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new U.Z(g()(r)):null}})},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,o=void 0===t?5:t,r=e.fillColor,n=void 0===r?"red":r,i=e.applyToPolygon,a=void 0!==i&&i;return new T.default({image:new _.default({radius:o,fill:new A.default({color:n})}),geometry:function(e){var t=e.getGeometry(),o=t.getType();if(!a&&"Polygon"===o)return null;var r="Polygon"===o?t.getCoordinates()[0]:t.getCoordinates();return new U.Z(r.length>3?r[r.length-("Polygon"===o?2:1)]:d()(r))}})},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{radius:3,fillColor:"green",applyToPolygon:!0},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{radius:3,fillColor:"red",applyToPolygon:!0},r=[];return v()(e,(function(e){return"startPoint"===e.geometry&&e.filtering}))||r.push(Re(Te({},t))),v()(e,(function(e){return"endPoint"===e.geometry&&e.filtering}))||r.push(Ze(Te({},o))),r};(0,V.registerGeometryFunctions)("centerPoint",(function(e){var t=e.getGeometry(),o=e.getProperties().isGeodesic,r=void 0!==o&&o,n=t.getExtent(),i=r?(0,O.qg)(n):t.getCenter&&t.getCenter()||[n[2]-n[0],n[3]-n[1]];return new U.Z(i)}),"Point"),(0,V.registerGeometryFunctions)("lineToArc",(function(e){var t=e.getGeometry().getType();if("LineString"===t||"MultiPoint"===t){var o=e.getGeometry().getCoordinates();return o=(0,x.transformLineToArcs)(o.map((function(e){var t=(0,x.reproject)(e,"EPSG:3857","EPSG:4326");return[t.x,t.y]}))),new q.Z(o.map((function(e){var t=(0,x.reproject)(e,"EPSG:4326","EPSG:3857");return[t.x,t.y]})))}return e.getGeometry()}),"LineString"),(0,V.registerGeometryFunctions)("startPoint",(function(e){var t=e.getGeometry(),o="Polygon"===t.getType()?t.getCoordinates()[0]:t.getCoordinates();return o.length>1?new U.Z(g()(o)):null}),"Point"),(0,V.registerGeometryFunctions)("endPoint",(function(e){var t=e.getGeometry(),o=t.getType(),r="Polygon"===o?t.getCoordinates()[0]:t.getCoordinates();return new U.Z(r.length>3?r[r.length-("Polygon"===o?2:1)]:d()(r))}),"Point");var ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.geometry?function(t){var o=e.geometry||"centerPoint";return V.geometryFunctions[o].func(t)}:function(e){return e.getGeometry()}},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!n()(e.filtering)||e.filtering},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Be(t,e);if(r){var n=Fe(t),i=Ge(t),a=ke(t,n,i);if((0,V.isMarkerStyle)(t))return Me(t).map((function(e){return e.setGeometry(ze(t)),e}));if((0,V.isSymbolStyle)(t))return B.standard.getIcon({style:t}).map((function(e){return e.setGeometry(ze(t)),e}));var s=Ie(t,n,i,e),l=t.zIndex,u=new T.default({geometry:ze(t),image:a,text:s,stroke:!s&&!a&&n||null,fill:!s&&!a&&i||null,zIndex:l});return[u].concat(e&&e.properties&&e.properties.canEdit&&!e.properties.isCircle?De(o):[])}return new T.default({})},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=e.style;if(t){var o=p()(t)?t:m()(t);return o.reduce((function(t,r){return t.concat(Ve(e,r,o))}),[])}return[]},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.style&&e.style.url)return Y().get(e.style.url).then((function(t){return(0,V.getStyleParser)(e.style.format).readStyle(t.data).then((function(e){return Ce.writeStyle(e)}))}));if(e.style&&"geostyler"===e.style.format)return Ce.writeStyle(e.style.styleObj);var r=Ee(e,t,o);return e.asPromise?new H.Promise((function(e){e(r)})):r},Ue=xe,qe=fe,He=ve},21751:(e,t,o)=>{"use strict";o.r(t),o.d(t,{IDENTIFY_POPUP:()=>P,default:()=>x});var r=o(24852),n=o.n(r),i=o(73014),a=o(11196),s=o(67076),l=o(71703),u=o(22222),p=o(7877),c=o(21914),m=o(42872),f=o(1469),g=o.n(f),y=o(52353),d=o.n(y),h=o(79870),v=o(827),b=(0,s.compose)((0,l.connect)((0,u.P1)(p.Qf,(function(e){return{index:e}})),{setIndex:c.oO}),(0,s.defaultProps)({index:0,responses:[]})),w=(0,u.P1)([p.q7,p.o9,p.OK,p.us,p.x0,v.hp,p.vR],(function(e,t,o,r,n,i,a){return{responses:e,validResponses:t,requests:o,format:r,showEmptyMessageGFI:n,missingResponses:(o||[]).length-(e||[]).length,renderEmpty:i,loaded:a}}));const O=(0,s.compose)((0,l.connect)(w),(0,s.defaultProps)({responses:[],container:function(e){var t=e.index,o=e.children;return n().createElement(n().Fragment,null,g()(o)&&o[t]||o)},header:h.Z}),b,a.Yy,a.mI,(0,i.Z)((function(e){var t=e.loaded;return d()(t)})))(m.Z);var P="identify";const x={identify:O}},64250:(e,t,o)=>{"use strict";o.d(t,{a:()=>u});var r=o(1469),n=o.n(r),i=o(86267),a=o(21915),s=o(69669),l=function(e,t,o,r){if(n()(t)&&n()(t[0])&&n()(t[0][0])){var a=(0,i.reproject)(t[0][0],r,o);return Math.sqrt(Math.pow(e[0]-a.x,2)+Math.pow(e[1]-a.y,2))}return 100},u=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;if(!e.getGeometry()||"Polygon"!==e.getGeometry().getType()||e.getProperties().center&&0===e.getProperties().center.length)return e;if(e.getProperties()&&e.getProperties().isCircle&&e.getProperties().center&&e.getProperties().center[0]&&e.getProperties().center[1]){var r,n=e.getGeometry().getExtent();r=e.getProperties().center?[(r=(0,i.reproject)(e.getProperties().center,"EPSG:4326",t)).x,r.y]:(0,a.qg)(n);var u=e.getProperties().crs===t?e.getProperties().radius:l(r,e.getGeometry().getCoordinates(),t,o);return e.setGeometry(new s.Z(r,u)),e}return e}},38946:(e,t,o)=>{"use strict";o.d(t,{y7:()=>b,oU:()=>w,hH:()=>O});var r=o(73800),n=o(45801),i=o(86306),a=o(18369),s=o(78516),l=o(52),u=o(48041),p=o(78653),c=o(97950),m=o(52043),f=o(44538),g=o(52329),y=o(25642),d=o(13987),h=o(69669),v=o(40353),b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.type,r=t.coordinates,n=t.radius,i=t.center;switch(o){case"Point":e=new m.Z(r||[]);break;case"LineString":e=new f.Z(r||[]);break;case"MultiPoint":e=new g.Z(r||[]);break;case"MultiLineString":e=new y.Z(r||[]);break;case"MultiPolygon":e=new d.Z(r||[]);break;default:e=n&&i?(0,v.Bb)(new h.Z([i.x,i.y],n),100):new v.ZP(r||[])}return e},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.geometry&&"Polygon"===e.geometry.type},O={dragPan:{options:{kinetic:!1},Instance:r.Z},keyboardPan:{options:{kinetic:!1},Instance:n.Z},mouseWheelZoom:{options:{duration:0},Instance:i.Z},doubleClickZoom:{options:{duration:0},Instance:a.Z},shiftDragZoom:{options:{duration:0},Instance:s.Z},keyboardZoom:{options:{},Instance:l.Z},pinchZoom:{options:{duration:0},Instance:u.Z},pinchRotate:{options:{},Instance:p.Z},altShiftDragRotate:{options:{},Instance:c.Z}}},64006:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var r=o(23645),n=o.n(r)()((function(e){return e[1]}));n.push([e.id,".msgapi .ol-control button:hover, .msgapi .ol-control button:focus {\n    background-color: #f4f4f4;\n}\n.msgapi .ol-zoom .ol-zoom-out, .msgapi .ol-zoom .ol-zoom-in{\n    width: 26px;\n    height: 26px;\n    line-height: 26px;\n    display: block;\n\n    color: black;\n    background-color: #fff;\n    border-width: 0;\n    margin:0;\n}\n.msgapi .ol-zoom.ol-unselectable.ol-control .ol-zoom-in, .msgapi .ol-zoom.ol-unselectable.ol-control .ol-zoom-out {\n    font-family: 'Lucida Console', Monaco, monospace;\n    text-align: center;\n    text-decoration: none;\n    font-weight: bold;\n}\n\n.msgapi .ol-zoom .ol-zoom-out{\n    font-size: 18px;\n    border-radius: 0 0 4px 4px;\n}\n.msgapi .ol-zoom .ol-zoom-in{\n    border-bottom: 1px solid #ccc;\n    border-radius: 4px 4px 0 0;\n    font-size: 20px;\n}\n.msgapi .ol-zoom.ol-unselectable.ol-control{\n    top:10px;\n    left:10px;\n    padding:0;\n    box-shadow: rgba(0, 0, 0, 0.65098) 0px 1px 5px 0px;\n    border-radius: 4px;\n}\n\n.msgapi .ol-scale-line.ol-unselectable{\n    background-color: rgba(255, 255, 255, 0.8);\n}\n",""]);const i=n},30062:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var r=o(23645),n=o.n(r)()((function(e){return e[1]}));n.push([e.id,".msgapi .ol-custom-overviewmap,\n       .msgapi .ol-custom-overviewmap.ol-uncollapsible {\n          bottom: 20px;\n          left: auto;\n          right: 10px;\n          top: auto;\n\n      }\n      .msgapi .ol-custom-overviewmap:not(.ol-collapsed)  {\n\n           box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n           border-radius: 1px;\n           transition: all .2s;\n      }\n      .msgapi .ol-custom-overviewmap .ol-overviewmap-map {\n          border: none;\n          width: 300px;\n          height: 150px;\n\n      }\n\n      .msgapi .ol-custom-overviewmap .ol-overviewmap-box {\n          border: 1px solid black;\n          cursor: pointer;\n          border-radius: 5px;\n      }\n\n      .msgapi .ol-custom-overviewmap:not(.ol-collapsed) button{\n          bottom: auto;\n          left: auto;\n          right: 2px;\n          bottom: 2px;\n      }\n\n      .msgapi .ol-rotate {\n          top: 170px;\n          right: 0;\n      }\n      .msgapi .ol-overview-dargbox{\n           border: 1px solid black;\n           background-color: rgba(125,125,0,.5);\n           border-radius: 5px;\n      }\n",""]);const i=n},35309:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a});var r=o(93379),n=o.n(r),i=o(30062);n()(i.Z,{insert:"head",singleton:!1});const a=i.Z.locals||{}},51205:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII="},38097:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAYAAABqBU3hAAABIUlEQVRIS+3UsYoCMRDG8f8q+EBid5WNnc019la2Vr6Ala1g4SvY+RTXiVdcJQgHV9jJIdhKZCNx2GwyibCNW4bd+X47k6Sg4adoOJ83wNcBsz4CvoGfF4zpEzgCO1mrCmDWpsAC+Af6wD4DMQGWwBUYAF9uLQlww1vli+cMhA1vl7UuEuECqsItNgUhw22tJ4QLGANrwP657LoG4Qt3EV3g4ALMfLZAp2beMYhQuCn/B/SAk9wDQ2CTgYgN/wB+jaTqFKQi1OE+gFnXIpLC6wAaxAqYAfaoVW0hM/NH2+vuAflxTCdCd5Q3PNQBWzgHURseC4gdh+xEMFwD0CKiwrWAWER0eAoghFCFpwJ8CHV4DkAiksJzARYxL2/O+92ufW42SVMYbhcsEwAAAABJRU5ErkJgggAA"}}]);