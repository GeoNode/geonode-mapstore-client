(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[5179],{5615:(e,t,r)=>{var n={"./CRSSelector":18790,"./CRSSelector.jsx":18790,"./MousePosition":42454,"./MousePosition.jsx":42454,"./MousePositionLabelDD":59560,"./MousePositionLabelDD.jsx":59560,"./MousePositionLabelDM":84848,"./MousePositionLabelDM.jsx":84848,"./MousePositionLabelDMS":47461,"./MousePositionLabelDMS.jsx":47461,"./MousePositionLabelDMSNW":95762,"./MousePositionLabelDMSNW.jsx":95762,"./MousePositionLabelYX":54717,"./MousePositionLabelYX.jsx":54717,"./__tests__/CRSSelector-test":71188,"./__tests__/CRSSelector-test.js":71188,"./__tests__/MousePosition-test":93528,"./__tests__/MousePosition-test.js":93528,"./__tests__/MousePositionLabelDM-test":22922,"./__tests__/MousePositionLabelDM-test.js":22922,"./__tests__/MousePositionLabelDMS-test":53389,"./__tests__/MousePositionLabelDMS-test.js":53389,"./__tests__/MousePositionLabelDMSNW-test":53884,"./__tests__/MousePositionLabelDMSNW-test.js":53884,"./mousePosition.css":94889};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=5615},55927:(e,t,r)=>{"use strict";r.d(t,{R4:()=>n,E9:()=>o});var n="DASHBOARD:DASHBOARD_RESET",o="DASHBOARD:DASHBOARD_LOADED"},90825:(e,t,r)=>{"use strict";r.d(t,{H:()=>b,k:()=>g});var n=r(80416),o=r(67007),i=r(32420),a=r(75875),l=r.n(a),c=r(8575),s=r(27418),u=r.n(s),p=r(5055),f=r.n(p);const d=function(e,t){var r=c.parse(e,!0),n=c.format(u()({},r,{query:u()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return l().get(n).then((function(e){var t;return f().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))};var y=r(24262),m=r(61545);function b(e,t,r){return function(a){return o.ZP.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?i.describeFeatureTypeOGCSchemas(e,r.name).then((function(e){var o=(0,m.get)(e,"complexType[0].complexContent.extension.sequence.element"),i=(0,m.head)(o&&o.filter((function(e){return"the_geom"===e.name||0===e.type.prefix.indexOf("gml")})));return i=i&&i.type.localPart,r.geometryType=i&&i.split("PropertyType")[0],a((0,n.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return a((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&d(e,r.name).then((function(e){var o=(0,m.get)(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map((function(e,t){return t+1+""})),a((0,n.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return a((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),a((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return a((0,n.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function g(e,t){var r=(0,y.getCapabilitiesUrl)(e);return function(i){return i((0,n.tV)(e.id,"id",{capabilitiesLoading:!0})),o.ZP.getCapabilities(r,t).then((function(t){var r=o.ZP.parseLayerCapabilities(t,e);i(r?(0,n.tV)(e.id,"id",(0,y.formatCapabitiliesOptions)(r)):(0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){i((0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},7878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>a,vo:()=>l,l1:()=>c,J9:()=>s,U:()=>u,z8:()=>p,ql:()=>f,O_:()=>d,M$:()=>y,Ug:()=>m,p5:()=>b,Fz:()=>g,WZ:()=>v,bP:()=>h,On:()=>O,d_:()=>w,xM:()=>E,bl:()=>S,Wi:()=>P,PN:()=>j,_M:()=>C,Wm:()=>x,Eg:()=>T,V1:()=>k,cY:()=>I,RD:()=>A,Hl:()=>F,co:()=>D,uY:()=>R,H8:()=>N,je:()=>_,go:()=>L,_8:()=>M,xd:()=>Z,o7:()=>G,Nr:()=>B,Gf:()=>z,nh:()=>U,Rf:()=>W,D6:()=>V,Sm:()=>q,Ef:()=>H,jW:()=>$,kQ:()=>Y,JG:()=>K,js:()=>X,q$:()=>Q,OZ:()=>J,Nc:()=>ee,NV:()=>te,I5:()=>re,QL:()=>ne,I:()=>oe,ku:()=>ie,EU:()=>ae,IV:()=>le,HT:()=>ce,lg:()=>se,ds:()=>ue,VF:()=>pe,DD:()=>fe,uo:()=>de,Ry:()=>ye,ZH:()=>me,AQ:()=>be,yC:()=>ge,F:()=>ve,mc:()=>he,uM:()=>we,eJ:()=>Ee,uP:()=>Se,N5:()=>Pe,bn:()=>je,Bm:()=>Ce,F2:()=>xe,jR:()=>Te,$J:()=>ke});var n=r(75875),o=r.n(n);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a="ADD_FILTER_FIELD",l="REMOVE_FILTER_FIELD",c="UPDATE_FILTER_FIELD",s="UPDATE_EXCEPTION_FIELD",u="ADD_GROUP_FIELD",p="UPDATE_LOGIC_COMBO",f="REMOVE_GROUP_FIELD",d="CHANGE_CASCADING_VALUE",y="EXPAND_ATTRIBUTE_PANEL",m="EXPAND_SPATIAL_PANEL",b="QUERYFORM:EXPAND_CROSS_LAYER",g="QUERYFORM:SET_CROSS_LAYER_PARAMETER",v="QUERYFORM:RESET_CROSS_LAYER_FILTER",h="SELECT_SPATIAL_METHOD",O="SELECT_VIEWPORT_SPATIAL_METHOD",w="UPDATE_GEOMETRY",E="SELECT_SPATIAL_OPERATION",S="CHANGE_SPATIAL_ATTRIBUTE",P="CHANGE_SPATIAL_FILTER_VALUE",j="REMOVE_SPATIAL_SELECT",C="SHOW_SPATIAL_DETAILS",x="QUERY_FORM_SEARCH",T="QUERY_FORM_RESET",k="SHOW_GENERATED_FILTER",I="CHANGE_DWITHIN_VALUE",A="ZONE_SEARCH",F="ZONE_SEARCH_ERROR",D="ZONE_FILTER",R="ZONE_CHANGE",N="ZONES_RESET",_="SIMPLE_FILTER_FIELD_UPDATE",L="ADD_SIMPLE_FILTER_FIELD",M="REMOVE_SIMPLE_FILTER_FIELD",Z="REMOVE_ALL_SIMPLE_FILTER_FIELDS",G="UPDATE_FILTER_FIELD_OPTIONS",B="LOADING_FILTER_FIELD_OPTIONS",z="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",U="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",W="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",V="SET_AUTOCOMPLETE_MODE",q="TOGGLE_AUTOCOMPLETE_MENU",H="QUERYFORM:LOAD_FILTER";function $(e){return{type:a,groupId:e}}function Y(e,t){return{type:u,groupId:e,index:t}}function K(e){return{type:l,rowId:e}}function X(e,t){return{type:q,rowId:e,status:t}}function Q(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:c,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function J(e,t){return{type:s,rowId:e,exceptionMessage:t}}function ee(e,t){return{type:p,groupId:e,logic:t}}function te(e){return{type:V,status:e}}function re(e){return{type:f,groupId:e}}function ne(e){return{type:d,attributes:e}}function oe(e){return{type:y,expand:e}}function ie(e){return{type:m,expand:e}}function ae(e){return{type:b,expand:e}}function le(e,t){return{type:g,key:e,value:t}}function ce(e,t){return{type:h,fieldName:t,method:e}}function se(){return{type:O}}function ue(e){return{type:w,geometry:e}}function pe(e,t){return{type:E,fieldName:t,operation:e}}function fe(e){return{type:S,attribute:e}}function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:P,value:a,collectGeometries:n,options:i,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function ye(){return{type:j}}function me(e){return{type:C,show:e}}function be(e){return{type:I,distance:e}}function ge(e,t){return{type:x,searchUrl:e,filterObj:t}}function ve(e){return{type:H,filter:e}}function he(e){return{type:T,skip:e}}function Oe(e,t){return{type:F,error:e,id:t}}function we(e,t){return{type:A,active:e,id:t}}function Ee(e,t,r){return function(n){return o().post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(o){var a=o.data;if("object"!==i(a))try{a=JSON.parse(a)}catch(o){n(Oe("Search result broken ("+e+":   "+t+"): "+o.message,r))}n(function(e,t){return{type:D,data:e,id:t}}(a,r)),n(we(!1,r))})).catch((function(e){n(Oe(e,r))}))}}function Se(e,t){return{type:R,id:e,value:t}}function Pe(e){return{type:z,rowId:(new Date).getTime(),groupId:e}}function je(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:U,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function Ce(e){return{type:W,rowId:e}}function xe(){return{type:v}}function Te(e,t){return{type:B,status:e,filterField:t}}function ke(e,t,r){return{type:G,filterField:e,options:t,valuesCount:r}}},40626:(e,t,r)=>{"use strict";r.d(t,{bL:()=>n,f6:()=>o,E_:()=>i,ai:()=>a,U8:()=>l,Pg:()=>c});var n="SET_SEARCH_CONFIG_PROP",o="RESET_SEARCH_CONFIG",i="UPDATE_SERVICE";function a(e,t){return{type:n,property:e,value:t}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:o,page:e}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return{type:i,service:e,idx:t}}},57579:(e,t,r)=>{"use strict";r.d(t,{Jm:()=>l,AE:()=>c,dm:()=>s,n8:()=>u,BV:()=>p,Cz:()=>f,$A:()=>d,eb:()=>y,v8:()=>m,yY:()=>b,ff:()=>g,S0:()=>v,Q6:()=>h,kb:()=>O,GV:()=>w,LH:()=>E,lG:()=>S,Km:()=>P,pV:()=>j,V5:()=>C,IT:()=>x,VR:()=>T,jv:()=>k,oU:()=>I,Ym:()=>A,uU:()=>F,ke:()=>D,nw:()=>R,A4:()=>N,C2:()=>_,Qe:()=>L,Ij:()=>M,Ko:()=>Z,E9:()=>G,K4:()=>B,c_:()=>z,uT:()=>U,bS:()=>W,Rz:()=>V,t4:()=>q,_k:()=>H,w2:()=>$,YA:()=>Y,sD:()=>K,Rb:()=>X,fy:()=>Q,kr:()=>J,f:()=>ee,Ff:()=>te,Pt:()=>re,ep:()=>ne});var n=r(23570),o=r.n(n);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l="WIDGETS:INSERT",c="WIDGETS:NEW",s="WIDGETS:EDIT",u="WIDGETS:EDIT_NEW",p="WIDGETS:EDITOR_CHANGE",f="WIDGETS:EDITOR_SETTING_CHANGE",d="WIDGETS:UPDATE_PROPERTY",y="WIDGETS:UPDATE_LAYER",m="WIDGETS:CHANGE_LAYOUT",b="WIDGETS:DELETE",g="WIDGETS:CLEAR_WIDGETS",v="WIDGETS:ADD_DEPENDENCY",h="WIDGETS:REMOVE_DEPENDENCY",O="WIDGETS:LOAD_DEPENDENCIES",w="WIDGETS:RESET_DEPENDENCIES",E="WIDGETS:TOGGLE_CONNECTION",S="WIDGETS:OPEN_FILTER_EDITOR",P="WIDGETS:EXPORT_CSV",j="WIDGETS:EXPORT_IMAGE",C="WIDGETS:WIDGET_SELECTED",x="WIDGETS:NEW_CHART",T="floating",k="dependencySelector",I=/^widgets\["?([^"\]]*)"?\]\.?(.*)$/,A="WIDGET:TOGGLE_COLLAPSE",F="WIDGET:TOGGLE_COLLAPSE_ALL",D="WIDGET:TOGGLE_MAXIMIZE",R="WIDGET:TOGGLE_TRAY",N=function(e){return{type:c,widget:e}},_=function(){return{type:x}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:l,target:t,id:o()(),widget:e}},M=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T;return{type:d,id:e,target:o,key:t,value:r,mode:n}},Z=function(e){return{type:y,layer:e}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:b,target:t,widget:e}},B=function(){return{type:g}},z=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;return{type:m,allLayouts:t,layout:e,target:r}},U=function(e){return{type:s,widget:e}},W=function(e,t){return{type:u,widget:e,settings:t}},V=function(e,t){return{type:p,key:e,value:t}},q=function(e,t){return{type:f,key:e,value:t}},H=function(e){return{type:O,dependencies:e}},$=function(e,t,r,n){return{type:E,active:e,availableDependencies:t,options:r,target:n}},Y=function(e){return q("step",e)},K=function(e){var t=e.data,r=void 0===t?[]:t,n=e.title;return{type:P,data:r,title:void 0===n?"export":n}},X=function(e){var t=e.widgetDivId;return{type:j,widgetDivId:t}},Q=function(){return{type:S}},J=function(e,t){return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({active:e},t),q("".concat(k),r);var r},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:A,widget:e,target:t}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return{type:F,target:e}},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:D,widget:e,target:t}},ne=function(e){return{type:R,value:e}}},78795:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(11847),o=r(8575),i=r(61545),a=r(27418),l=r.n(a),c=r(65792),s=r.n(c),u=r(24262);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=(0,i.uniq)(Object.keys(s().brewer).map((function(e){return e.toLocaleLowerCase()}))).map((function(e){return{name:e,colors:e}})),m=[{name:"red",colors:["#000","#f00"]},{name:"green",colors:["#000","#008000","#0f0"]},{name:"blue",colors:["#000","#00f"]},{name:"gray",colors:["#333","#eee"]},{name:"jet",colors:["#00f","#ff0","#f00"]}].concat(f(y)),b=function(e,t,r,n){var o=e?(0,i.head)((e.thematic.colors||e.thematic.additionalColors||[]).filter((function(e){return e.name===t})))||(0,i.head)(m.filter((function(e){return e.name===t}))):n?(0,i.head)([n].concat(f(m)).filter((function(e){return e.name===t}))):(0,i.head)(m.filter((function(e){return e.name===t})));return o&&((0,i.isString)(o.colors)||o.colors.length>=2)?{ramp:"custom",colors:s().scale(o.colors).colors(r).join(",")}:{ramp:t}},g=function(e,t){var r=e.thematic&&e.thematic.params||[],n=e.thematic&&e.thematic.fieldAsParam&&["field"]||[];return Object.keys(t).reduce((function(o,i){return function(e,t){return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter((function(t){return t.field===e})).length>0}(e,t)}(i,[].concat(f(r),f(n)))?l()(o,function(e,t,r){return{viewparams:(e?e+";":"")+t+":"+r}}(o.viewparams,i,t[i])):"ramp"===i?l()(o,b(e,t[i],t.intervals||5)):"classification"===i?l()(o,(a=t[i])?{customClasses:a.reduce((function(e,t){return[].concat(f(e),[t.min+","+t.max+","+t.color])}),[]).join(";")}:{}):"attribute"===i?l()(o,{attribute:e.thematic&&e.thematic.fieldAsParam?t[i]:t.field}):"field"===i&&e.thematic&&!e.thematic.fieldAsParam?o:"strokeWeight"!==i||t.strokeOn?"strokeOn"===i?o:l()(o,p({},i,t[i])):l()(o,p({},i,-1));var a}),{})},v=function(e){return l()({protocol:e.protocol,hostname:e.domain},e.port?{port:e.port}:{})},h=function(e){return e.reduce((function(e,t){return(0,i.isNumber)(t)?t:e}),null)},O=function(e){return e.PolygonSymbolizer?"Polygon":e.LineSymbolizer?"LineString":e.PointSymbolizer?"Point":null},w=function(e){return e.PolygonSymbolizer?e.PolygonSymbolizer.Fill&&e.PolygonSymbolizer.Fill.CssParameter&&e.PolygonSymbolizer.Fill.CssParameter.$||"#808080":e.LineSymbolizer?e.LineSymbolizer.Stroke&&e.LineSymbolizer.Stroke.CssParameter&&e.LineSymbolizer.Stroke.CssParameter.$||"#808080":e.PointSymbolizer&&e.PointSymbolizer.Graphic&&e.PointSymbolizer.Graphic.Mark&&e.PointSymbolizer.Graphic.Mark.Fill&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter.$||"#808080"},E={getStyleService:function(e,t){var r=(0,n.ij)((0,u.getLayerUrl)(e));return o.format(l()(v(r),{pathname:r.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.xml",query:l()({},g(e,t),{fullSLD:!0})}))},getCapabilitiesUrl:function(e){var t=(0,n.ij)((0,u.getLayerUrl)(e));return o.format(l()(v(t),{pathname:t.applicationRootPath+"/rest/sldservice/capabilities.json"}))},getStyleMetadataService:function(e,t){var r=(0,n.ij)((0,u.getLayerUrl)(e));return o.format(l()(v(r),{pathname:r.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.json",query:t}))},getStyleParameters:function(e,t){return{SLD:E.getStyleService(e,t),viewparams:g(e,t).viewparams}},getMetadataParameters:function(e,t){return g(e,t)},getFieldsService:function(e){var t=(0,n.ij)((0,u.getLayerUrl)(e)),r=e.thematic&&e.thematic.datatable||e.name;return o.format(l()(v(t),{pathname:t.applicationRootPath+"/rest/sldservice/"+r+"/attributes.json"}))},readFields:function(e){return(0,i.sortBy)((0,i.castArray)(e.Attributes.Attribute||[]).filter((function(e){return t=e.type,-1!==["Integer","Long","Double","Float","BigDecimal"].indexOf(t);var t})).map((function(e){return{name:e.name,type:(e.type,"number")}})),(function(e){return e.name}))},readClassification:function(e){!function(e){if(!e||!e.Rules||!e.Rules.Rule)throw new Error("toc.thematic.invalid_object");(0,i.castArray)(e.Rules.Rule).forEach((function(e){if(!e.PolygonSymbolizer&&!e.LineSymbolizer&&!e.PointSymbolizer)throw new Error("toc.thematic.invalid_geometry")}))}(e);var t=(0,i.castArray)(e.Rules.Rule||[]);return t.map((function(e,r){var n,o,i,a;return{title:e.Title,color:w(e),type:O(e),min:h([e.Filter.And&&(e.Filter.And.PropertyIsGreaterThanOrEqualTo||e.Filter.And.PropertyIsGreaterThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,r===t.length-1&&(null==e||null===(n=e.Filter)||void 0===n||null===(o=n.PropertyIsGreaterThanOrEqualTo)||void 0===o?void 0:o.Literal)]),max:h([e.Filter.And&&(e.Filter.And.PropertyIsLessThanOrEqualTo||e.Filter.And.PropertyIsLessThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,0===r&&(null==e||null===(i=e.Filter)||void 0===i||null===(a=i.PropertyIsLessThan)||void 0===a?void 0:a.Literal)])}}))||[]},readRasterClassification:function(e){var t,r,n,o;return((null===(r=(0,i.castArray)(null==e||null===(t=e.Rules)||void 0===t?void 0:t.Rule)[0])||void 0===r||null===(n=r.RasterSymbolizer)||void 0===n||null===(o=n.ColorMap)||void 0===o?void 0:o.ColorMapEntry)||[]).map((function(e){return{color:e["@color"],opacity:void 0===e["@opacity"]?1:e["@opacity"],label:e["@label"],quantity:parseFloat(e["@quantity"])}}))},methods:["equalInterval","quantile","jenks"],getThematicParameters:function(e){return e.map((function(e){return e.type&&E.standardParams[e.type]&&l()({},E.standardParams[e.type],e)||e}))},standardParams:{aggregate:{title:"toc.thematic.classification_aggregate",defaultValue:"sum",values:[{name:"toc.thematic.values.sum",value:"sum"},{name:"toc.thematic.values.avg",value:"avg"},{name:"toc.thematic.values.count",value:"count"},{name:"toc.thematic.values.min",value:"min"},{name:"toc.thematic.values.max",value:"max"}]}},getColor:b,getColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=t?t.thematic.colors||[].concat(f(e),f(t.thematic.additionalColors||[])):n?[n].concat(f(e)):f(e);return o.map((function(e){return!(0,i.isString)(e.colors)&&e.colors.length>=r?e:l()({},e,{colors:s().scale(e.colors).colors(r)})}))},hasThematicStyle:function(e){return!!(e&&e.params&&e.params.SLD)},removeThematicStyle:function(e){e.SLD,e.viewparams;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["SLD","viewparams"]);return l()({},t,{SLD:null,viewparams:null})},defaultParams:{attribute:"",intervals:5,method:"equalInterval",ramp:"red",field:"",open:!1,strokeWeight:.2,strokeColor:"#ff0000",strokeOn:!1}};const S=E},8954:(e,t,r)=>{"use strict";r.d(t,{eb:()=>v,IW:()=>h,DG:()=>O});var n=r(31476),o=r.n(n),i=r(75875),a=r.n(i),l=r(9082),c=r(78795);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=["equalInterval","quantile","jenks","standardDeviation"],y=["equalInterval","quantile","jenks"],m={};function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return t.map((function(t){return t.ruleId===e?r(t):t}))}var g=function(e){var t=e.baseUrl,r=e.styleService,n=null!=r&&r.isStatic?r.baseUrl:t;if(m[n])return new Promise((function(e){return e(m[n])}));var o=c.Z.getCapabilitiesUrl({url:n});return(null!=r&&r.isStatic?new Promise((function(e){return e(r)})):l.ZP.getStyleService({baseUrl:n})).then((function(e){return a().get(o).then((function(t){var r=t.data;return[e,r]})).catch((function(){return[e,null]}))})).then((function(e){var t,r,o,i,a,l,c,s,p,b,g,v=(g=2,function(e){if(Array.isArray(e))return e}(b=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(b,g)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(b,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=v[0],O=v[1],w=u(u({},h),{},{classificationMethods:O?(t=O,r=(t||{}).capabilities,o=void 0===r?{}:r,i=o.vector,a=void 0===i?{}:i,l=o.raster,c=void 0===l?{}:l,s=a.classifications||[],p=c.classifications||[],{vector:s.filter((function(e){return-1!==d.indexOf(e)})),raster:p.filter((function(e){return-1!==d.indexOf(e)}))}):{vector:y,raster:y}});return m[n]=w,w}))};function v(e){var t=e.baseUrl,r=e.styleService;return g({baseUrl:t,styleService:r})}function h(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,l=["intervals","method","reverse","attribute","ramp"],s=u(u({},r),t),f=r.ruleId;if(void 0!==t.ramp&&t.ramp!==r.ramp&&"customInterval"===(null==s?void 0:s.method)&&!t.classification){var d=c.Z.getColor(void 0,t.ramp,s.intervals).colors.split(",");return new Promise((function(e){return e(b(f,n,(function(e){return u(u(u({},e),s),{},{classification:s.classification.map((function(e,t){return u(u({},e),{},{color:d[t]})})),errorId:void 0})})))}))}var y=l.reduce((function(e,t){return u(u({},e),{},p({},t,r[t]))}),{}),m=l.reduce((function(e,t){return u(u({},e),{},p({},t,s[t]))}),{});if(!l.find((function(e){return void 0===s[e]}))&&!o()(y,m)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==s?void 0:s.method)){var g="custom"===s.ramp&&s.classification.length>0&&{name:"custom",colors:s.classification.map((function(e){return e.color}))},v=c.Z.getColor(void 0,s.ramp,s.intervals,g);return a().get(c.Z.getStyleMetadataService(i,u({intervals:s.intervals,method:s.method,attribute:s.attribute,reverse:s.reverse},v))).then((function(e){var r=e.data;return b(f,n,(function(e){return u(u(u({},e),t),{},{classification:c.Z.readClassification(r),errorId:void 0})}))})).catch((function(){return b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:"styleeditor.classificationError"})}))}))}return new Promise((function(e){return e(b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:void 0})})))}))}function O(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,l=["intervals","continuous","method","reverse","ramp"],s=u(u({},r),t),f=r.ruleId,d=l.reduce((function(e,t){return u(u({},e),{},p({},t,r[t]))}),{}),y=l.reduce((function(e,t){return u(u({},e),{},p({},t,s[t]))}),{});if(!l.find((function(e){return void 0===s[e]}))&&!o()(d,y)){var m="custom"===s.ramp&&s.classification.length>0&&{name:"custom",colors:s.classification.map((function(e){return e.color}))},g=c.Z.getColor(void 0,s.ramp,s.intervals,m);return a().get(c.Z.getStyleMetadataService(i,u({intervals:s.intervals,continuous:s.continuous,method:s.method,reverse:s.reverse},g))).then((function(e){var r=e.data;return b(f,n,(function(e){return u(u(u({},e),t),{},{classification:c.Z.readRasterClassification(r),errorId:void 0})}))})).catch((function(){return b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:"styleeditor.classificationRasterError"})}))}))}return new Promise((function(e){return e(b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:void 0})})))}))}},9082:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>x});var n=r(75875),o=r.n(n),i=r(27418),a=r.n(i),l=r(61545);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s={},u=function(e){return e.map((function(e){return(0,l.mapKeys)(e,(function(e,t){return(0,l.camelCase)(t)}))}))},p=r(20721),f=r.n(p),d=r(9626),y=r.n(d),m=r(99009);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=[{regex:/gt-css/,format:"css"}],w={css:"application/vnd.geoserver.geocss+css",sld:"application/vnd.ogc.sld+xml",sldse:"application/vnd.ogc.se+xml",zip:"application/zip"},E=function(e,t){return"sld"===e?t&&t.version&&"1.1.0"===t.version?w.sldse:w.sld:w[e]||w.sld},S=function(e,t){var r=e.options,n=void 0===r?{}:r,o=e.format,i=e.baseUrl,a=e.name,l=e.workspace,c=e.languageVersion,s=t?{name:encodeURIComponent(a)}:{};return{options:v(v({},n),{},{params:v(v({},n.params),s),headers:v(v({},n.headers||{}),{},{"Content-Type":E(o,c)})}),url:"".concat(i,"rest/").concat(l&&"workspaces/".concat(l,"/")||"","styles").concat(t?".json":"/".concat(encodeURIComponent(a)))}},P=function(e){var t=e.geoserverBaseUrl,r=e.workspace,n=e.name,o=e.format,i=void 0===o?"json":o;return"".concat(t,"rest/").concat(r&&"workspaces/".concat(r,"/")||"","styles/","".concat(encodeURIComponent(n),".").concat(i))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=y()((null==e?void 0:e.entry)||[]);return t.reduce((function(e,t){return v(v({},e),{},h({},t["@key"],t.$))}),{})},C=function(e){var t=e.baseUrl,r=e.styleName,n=e.metadata,i=P(v(v({},(0,m.$N)(r)),{},{geoserverBaseUrl:t}));return o().get(i).then((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data,a=void 0===r?{}:r;return o().put(i,{style:v(v({},a.style),{},{metadata:v(v({},j(null===(e=a.style)||void 0===e?void 0:e.metadata)),n)})})}))};const x={saveStyle:function(e,t,r,n){var i=e+"styles/"+encodeURI(t),l=a()({},n);return l.headers=a()({},l.headers,{"Content-Type":"application/vnd.ogc.sld+xml"}),o().put(i,r,l)},getStyleService:function(e){var t=e.baseUrl;return function(e){var t=e.baseUrl;return s[t]?new Promise((function(e){return e(s[t])})):o().all([o().get("".concat(t,"rest/about/version"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return(0,l.get)(t,"about.resource")})).catch((function(){return null})),o().get("".concat(t,"rest/about/manifest"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return(0,l.get)(t,"about.resource")})).catch((function(){return null})),o().get("".concat(t,"rest/fonts"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return(0,l.get)(t,"fonts")})).catch((function(){return null}))]).then((function(e){var r,n,o=(n=3,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(r,n)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],l=o[2],p={version:i&&u(i),manifest:a&&u(a),fonts:l};return i&&a?(s[t]=p,s[t]):p}))}({baseUrl:t}).then((function(e){var r=e.version,n=e.manifest,o=e.fonts,i=void 0===o?[]:o;if(!r)return null;var a,l=(n||[]).map((function(e){var t=e.name;return f()(O.filter((function(e){var r=e.regex;return t.match(r)})).map((function(e){return e.format})))})).filter((function(e){return e})),c=f()(r.filter((function(e){var t=e.name;return"geoserver"===(void 0===t?"":t).toLowerCase()})))||{};return{baseUrl:t,version:c.version,formats:[].concat((a=l,function(e){if(Array.isArray(e))return b(e)}(a)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["sld"]),availableUrls:[],fonts:i}}))},getStyle:function(e){var t=e.options,r=e.format,n=e.baseUrl,i=e.styleName,a=(0,m.$N)(i),l=a.name,c=a.workspace,s=S({options:t,format:r,baseUrl:n,name:l,workspace:c});return o().get(s.url,s.options)},createStyle:function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,s=e.metadata,u=(0,m.$N)(l),p=u.name,f=u.workspace,d=S({options:n,format:a,baseUrl:t,name:p,workspace:f,languageVersion:c},!0);return o().post(d.url,r,d.options).then((function(){return s?C({baseUrl:t,styleName:l,metadata:s}).then((function(){return null})).catch((function(){return null})):null}))},updateStyle:function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,s=e.metadata,u=(0,m.$N)(l),p=u.name,f=u.workspace,d=S({options:n,format:a,baseUrl:t,name:p,workspace:f,languageVersion:c});return o().put(d.url,r,d.options).then((function(){return s?C({baseUrl:t,styleName:l,metadata:s}).then((function(){return null})).catch((function(){return null})):null}))},deleteStyle:function(e){var t=e.baseUrl,r=e.options,n=e.format,i=void 0===n?"sld":n,a=e.styleName,l=(0,m.$N)(a),c=l.name,s=l.workspace,u=S({options:r,format:i,baseUrl:t,name:c,workspace:s});return o().delete(u.url,u.options)},getStylesInfo:function(e){var t=e.baseUrl,r=e.styles,n=void 0===r?[]:r,i=[],l=n.length;return new Promise((function(e){n&&0!==n.length?n.forEach((function(r,c){var s=r.name;return o().get(P(v(v({},(0,m.$N)(s)),{},{geoserverBaseUrl:t}))).then((function(t){var r=t.data;i[c]=a()({},n[c],r&&r.style&&v(v(v({},r.style),r.style.metadata&&{metadata:j(r.style.metadata)}),{},{name:(0,m.U_)(r.style)})||{}),0==--l&&e(i.filter((function(e){return e})))})).catch((function(){i[c]=a()({},n[c]),0==--l&&e(i.filter((function(e){return e})))}))})):e([])}))},getStyleCodeByName:function(e){var t=e.baseUrl,r=e.styleName,n=e.options,i=(0,m.$N)(r),a=i.name,l=i.workspace,c=P({name:a,workspace:l,geoserverBaseUrl:t});return o().get(c,n).then((function(e){return e.data&&e.data.style&&e.data.style.name?o().get(P({workspace:l,geoserverBaseUrl:t,name:e.data.style.name,format:(r=e.data.style.filename,r.split(".").pop())})).then((function(t){var r=t.data;return v(v({},e.data.style),{},{code:r})})):null;var r}))},updateStyleMetadata:C}},15047:(e,t,r)=>{"use strict";r.d(t,{b:()=>y});var n=r(27418),o=r.n(n);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e){return null===e?[]:e.map((function(e){return{properties:a({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}}(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}))},s=r(59286),u=r(32420);var p=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,i=e.item,a=e.queriableAttributes,l=e.predicate,c=(0,s.generateTemplateString)(n||"")(i),u=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===u.length&&(u=r?[r]:[]),u.length>0&&(t="(".concat(u.map((function(e){return a.map((function(t){return"".concat(t," ").concat(l," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t?t.concat(c):c||null},f={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(47310).Z.geocode(e,t).then((function(e){return t.returnFullData?e:c(e.data)}))},wfs:function(e,t){var r=t.url,n=t.typeName,i=t.queriableAttributes,a=void 0===i?[]:i,l=t.outputFormat,c=void 0===l?"application/json":l,s=t.predicate,f=void 0===s?"ILIKE":s,d=t.staticFilter,y=void 0===d?"":d,m=t.blacklist,b=void 0===m?[]:m,g=t.item,v=t.fromTextToFilter,h=void 0===v?p:v,O=t.returnFullData,w=void 0!==O&&O,E=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"]),S=h({searchText:e,staticFilter:y,blacklist:b,item:g,queriableAttributes:a,predicate:f});return u.getFeatureSimple(r,o()({maxFeatures:10,typeName:n,outputFormat:c,cql_filter:S},E)).then((function(e){return w?e:e.features}))}},d={setService:function(e,t){f[e]=t},getService:function(e){return f[e]?f[e]:null}},y={Services:f,Utils:d}},87427:(e,t,r)=>{"use strict";r.d(t,{kZ:()=>s,bR:()=>u});var n=r(61545),o=r(18093);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=(0,o.compose)((0,o.withState)("alertModal","onShowAlertModal",!1),(0,o.withState)("showEditor","onShowEditor",!1)),s=(0,o.compose)((0,o.withHandlers)({onClose:function(e){var t=e.onUpdateInitialSettings,r=void 0===t?function(){}:t,o=e.onUpdateOriginalSettings,i=void 0===o?function(){}:o,c=e.onUpdateNode,s=void 0===c?function(){}:c,u=e.originalSettings,p=e.settings,f=e.onHideSettings,d=void 0===f?function(){}:f,y=e.onShowAlertModal,m=void 0===y?function(){}:y;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=Object.keys(p.options).reduce((function(e,t){return a(a({},e),{},l({},t,"opacity"!==t||u[t]?u[t]:1))}),{});(0,n.isEqual)(o,p.options)||e?((0,n.isArray)(t)&&t.forEach((function(e){(0,n.isFunction)(e)&&e()})),s(p.node,p.nodeType,a(a({},p.options),u)),d(),m(!1),i({}),r({})):m(!0)}},onSave:function(e){var t=e.onUpdateInitialSettings,r=void 0===t?function(){}:t,o=e.onUpdateOriginalSettings,i=void 0===o?function(){}:o,a=e.onHideSettings,l=void 0===a?function(){}:a,c=e.onShowAlertModal,s=void 0===c?function(){}:c;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,n.isArray)(e)&&e.forEach((function(e){(0,n.isFunction)(e)&&e()})),l(),s(!1),i({}),r({})}}}),(0,o.lifecycle)({UNSAFE_componentWillMount:function(){var e=this.props,t=e.element,r=void 0===t?{}:t,n=e.onUpdateOriginalSettings,o=void 0===n?function(){}:n,i=e.onUpdateInitialSettings,l=void 0===i?function(){}:i;o({}),l(a({},r))},componentWillReceiveProps:function(e){var t=this.props,r=t.settings,o=void 0===r?{}:r,i=t.onRetrieveLayerData,a=void 0===i?function(){}:i;!o.expanded&&e.settings&&e.settings.expanded&&(0,n.isNil)(e.element.description)&&"wms"===e.element.type&&a(e.element)},componentWillUpdate:function(e){var t=this.props,r=t.initialActiveTab,n=void 0===r?"general":r,o=t.settings,i=void 0===o?{}:o,l=t.onUpdateOriginalSettings,c=void 0===l?function(){}:l,s=t.onUpdateInitialSettings,u=void 0===s?function(){}:s,p=t.onSetTab,f=void 0===p?function(){}:p;!i.expanded&&e.settings&&e.settings.expanded&&(c({}),u(a({},e.element)),f(n))}})),u=(0,o.compose)(c,s)},80876:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var Bootstrap=__webpack_require__(30294),Message=__webpack_require__(5346).Z,React=__webpack_require__(67294),RenderTemplate=function RenderTemplate(comp,props){var model=props.model;return eval(comp)};const __WEBPACK_DEFAULT_EXPORT__=RenderTemplate},6869:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),o=r.n(n),i=r(84922),a=r(79958),l=r.n(a),c=(0,i.Z)(l()),s=r(43143),u=r(12226);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var m={base:190,range:0,s:.95,v:.63},b=function(e,t){var r=t.base,n=t.range,o=y(t,["base","range"]);return((0,s.qH)(r,n,e+1,o)||[0]).slice(1)};function g(e){var t=e.type,r=e.isModeBarVisible;switch(t){case"pie":return{t:r?20:5,b:5,l:2,r:2,pad:4};default:return{l:5,r:5,b:30,t:r?20:5,pad:4}}}function v(e){var t=e.series,r=void 0===t?[]:t,n=e.cartesian,o=e.type,i=e.yAxis,a=e.xAxisAngle,l=e.xAxisOpts,c=void 0===l?{}:l,s=e.yAxisOpts,u=void 0===s?{}:s,p=e.data,f=void 0===p?[]:p,d=e.autoColorOptions,y=void 0===d?m:d;switch(o){case"pie":return{colorway:b(f.length,y)};default:return{colorway:b(r.length,y),yaxis:{type:null==u?void 0:u.type,automargin:!0,tickformat:null==u?void 0:u.format,tickprefix:null==u?void 0:u.tickPrefix,ticksuffix:null==u?void 0:u.tickSuffix,showticklabels:!0===i,showgrid:n},xaxis:{showgrid:n,type:null==c?void 0:c.type,showticklabels:!(null!=c&&c.hide),nticks:c.nTicks,automargin:!0,tickangle:null!=a?a:"auto"}}}}const h=function(e){var t=e.onInitialized,r=function(e){var t=e.xAxis,r=e.series,n=void 0===r?[]:r,o=e.yAxisLabel,i=e.type,a=void 0===i?"line":i,l=e.height,c=e.width,s=e.legend,p=null==t?void 0:t.dataKey,d=c>350;return{layout:f(f({showlegend:s},v(f({},e))),{},{margin:g(f(f({},e),{},{isModeBarVisible:d})),autosize:!1,automargin:!1,height:l,width:c}),data:n.map((function(t){var r=t.dataKey;return f({type:a,name:o||r},function(e){var t=e.type,r=e.xDataKey,n=e.yDataKey,o=e.data,i=e.formula,a=o.map((function(e){return e[r]})),l=o.map((function(e){return e[n]}));switch(t){case"pie":return{textposition:"inside",values:l,labels:a};default:return i&&(l=l.map((function(e){var t=e;try{return(0,u.B)(i,{value:t})}catch(t){return e}}))),{x:a,y:l}}}(f(f({},e),{},{xDataKey:p,yDataKey:r})))})),config:{displayModeBar:d,modeBarButtonsToRemove:["lasso2d","select2d","hoverCompareCartesian","hoverClosestCartesian","hoverClosestPie"],displaylogo:!1}}}(y(e,["onInitialized"])),n=r.data,i=r.layout,a=r.config;return o().createElement(c,{onInitialized:t,data:n,layout:i,config:a})}},30029:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i),l=r(5346);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y,m,b,g={width:"100%",height:"100%",textAlign:"center",verticalAlign:"center"},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(i){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function c(){return s(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){return this.props.loading?o().createElement("div",{style:g},o().createElement(l.Z,{msgId:"loading"})):o().createElement("div",{style:g},o().createElement(l.Z,{msgId:"featuregrid.noFeaturesAvailable"}))}}])&&u(t.prototype,r),c}(o().PureComponent);y=v,m="propTypes",b={loading:a().bool},m in y?Object.defineProperty(y,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[m]=b;const h=v},93358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ze});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(96958),c=r(96259),s=r(53370),u=r.n(s),p=r(73935),f=r.n(p);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(o){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),h(g(t=i.call(this,e)),"scrollListener",(function(){t.props.isFocused||(t.scroll=t.canvas.scrollTop);var e=Math.ceil(t.canvas.clientHeight/t.props.rowHeight),r=Math.floor(t.canvas.scrollTop/t.props.rowHeight),n=r+e;t.props.onGridScroll&&t.props.onGridScroll({firstRowIdx:r,lastRowIdx:n})})),h(g(t),"setCanvasListener",(function(){t.canvas=f().findDOMNode(g(t)).querySelector(".react-grid-Canvas"),t.canvas&&t.canvas.addEventListener("scroll",t.scrollListener)})),t}return t=a,(r=[{key:"componentDidMount",value:function(){this.setCanvasListener(),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentWillUnmount",value:function(){this.canvas&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.canvas=null),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.virtualScroll,n=t.displayFilters,o=t.scrollToTopCounter;e.displayFilters!==n&&this.onToggleFilter(),r&&(this.canvas&&this.canvas!==f().findDOMNode(this).querySelector(".react-grid-Canvas")&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.setCanvasListener()),this.canvas||this.setCanvasListener(),this.canvas&&e.isFocused&&!this.props.isFocused?this.canvas.scrollTop=this.scroll:this.canvas&&this.props.minHeight!==e.minHeight&&this.scrollListener(),!this.props.isFocused&&this.canvas&&(this.scroll=this.canvas.scrollTop),o!==e.scrollToTopCounter&&this.canvas&&(this.canvas.scrollTop=0))}}])&&y(t.prototype,r),a}(u());h(O,"propTypes",{displayFilters:o().bool});const w=O;var E=r(18093),S=r(89255);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var T=(0,E.branch)((function(e){return e.virtualScroll}),(0,E.compose)((0,E.mapPropsStream)((function(e){var t=(0,E.createEventHandler)(),r=t.handler,n=t.stream;return e.combineLatest(n.throttle((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return S.Observable.timer(e)})).scan((function(e){return e+1}),0).map((function(e){return{scrollToTopCounter:e}})).startWith({}),(function(e,t){return j(j(j({},e),t),{},{scrollToTop:r})}))})),(0,E.withHandlers)({onGridSort:function(e){var t=e.onGridSort,r=void 0===t?function(){}:t,n=e.scrollToTop,o=void 0===n?function(){}:n;return function(){return o(0),r.apply(void 0,arguments)}},onAddFilter:function(e){var t=e.onAddFilter,r=void 0===t?function(){}:t,n=e.scrollToTop,o=void 0===n?function(){}:n;return function(){o(1e3),r.apply(void 0,arguments)}}})))(w),k=r(61545),I=r(54705),A=r.n(I),F=r(73849),D=r(78819),R=r(43148),N=r(76364),_=r(37275),L=r(28878),M=r(49902);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,E.setObservableConfig)(L.Z);var z=(0,E.mapPropsStreamWithConfig)(L.Z)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return{data:(0,k.isArray)(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values.map((function(e){return{label:e,value:e}})):[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,currentPage:t&&t.currentPage,maxFeatures:t&&t.maxFeatures,select:t&&t.select,focus:t&&t.focus,loadNextPage:t&&t.loadNextPage,loadPrevPage:t&&t.loadPrevPage,toggle:t&&t.toggle,change:t.change,open:t.open,selected:t&&t.selected,value:t.value,busy:e.busy}}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,i=e.change,l=e.value,c=e.valuesCount,s=e.loadNextPage,u=e.loadPrevPage,p=e.maxFeatures,f=e.currentPage,d=e.busy,y=e.data,m=e.loading,b=void 0!==m&&m,g=Math.ceil(c/p);return a().createElement(M.Z,{pagination:{firstPage:1===f,lastPage:f===g,paginated:!0,loadPrevPage:u,loadNextPage:s},busy:d,dropUp:!1,data:y,open:t,onFocus:o,onToggle:r,onChange:i,onSelect:n,selectedValue:l,loading:b})})),U=(0,E.compose)((0,E.withStateHandlers)((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,url:e.url,typeName:e.typeName,value:e.value,attribute:e.column&&e.column.key,autocompleteStreamFactory:e.autocompleteStreamFactory}}),{select:function(e){return function(){return G(G({},e),{},{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return G(G({},e),{},{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:e.value,currentPage:e.changingPage?e.currentPage:1});var r="string"==typeof t?t:t.value;return G(G({},e),{},{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:r,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?G(G({},e),{},{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return G(G({},e),{},{open:!!e.changingPage||!e.open})}},loadNextPage:function(e){return function(){return G(G({},e),{},{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}},loadPrevPage:function(e){return function(){return G(G({},e),{},{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}}}))(z);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t,r){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(n);if(o){var r=X(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $(this,e)});function l(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=i.call(this,e)).validate=function(e){try{return r.props.isValid(e[r.props.column&&r.props.column.key])}catch(e){return!1}},r.getValue=function(){return K((t=Y(r),X(l.prototype)),"getValue",t).call(t)},r}return t=l,(r=[{key:"render",value:function(){return a().createElement(U,V({},this.props,{url:_.ZP.getParsedUrl(this.props.url,{outputFormat:"json"}),filter:"contains",autocompleteStreamFactory:N.Vd}))}}])&&q(t.prototype,r),l}(D.Z);Q(J,"propTypes",{column:o().object,dataType:o().string,inputProps:o().object,isValid:o().func,onBlur:o().func,autocompleteStreamFactory:o().func,url:o().string,typeName:o().string,value:o().string}),Q(J,"defaultProps",{isValid:function(){return!0},dataType:"string"});const ee=J;var te=r(82994);function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ne={defaultEditor:function(e){return a().createElement(D.Z,e)},int:function(e){return a().createElement(R.Z,re({dataType:"int",inputProps:{step:1,type:"number"}},e))},number:function(e){return a().createElement(R.Z,re({dataType:"number",inputProps:{step:1,type:"number"}},e))},string:function(e){return e.autocompleteEnabled?a().createElement(ee,re({dataType:"string"},e)):a().createElement(D.Z,re({dataType:"string"},e))},boolean:function(e){return a().createElement(te.Z,re({dataType:"string"},e,{value:e.value&&e.value.toString(),filter:!1,values:["true","false"]}))}},oe=(0,E.withState)("value","onValueChange",(function(e){return e.value})),ie=r(18027),ae=r(47361);function le(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const fe=(0,E.compose)((0,E.defaultProps)({sortable:!0,autocompleteEnabled:!1,initPlugin:function(){},url:"",typeName:"",enableColumnFilters:!1,columns:[],features:[],newFeatures:[],select:[],changes:{},focusOnEdit:!1,editors:function(e,t){return ne[e]?ne[e](t):ne.defaultEditor(t)},dataStreamFactory:function(e){var t=(0,E.createEventHandler)(),r=t.handler,n=t.stream;return function(e){return e.distinctUntilChanged((function(e,t){var r=e.features,n=e.pages,o=e.isFocused,i=t.features,a=t.pages,l=t.isFocused;return r===i&&o===l&&n===a})).switchMap((function(e){var t=e.size,r=e.pageEvents,n=e.isFocused,o=e.pages,i=e.pagination,a=e.vsOverScan,c=void 0===a?20:a,s=e.scrollDebounce,u=void 0===s?50:s;return e.onGridScroll$.debounceTime(u).filter((function(){return!n})).map((function(e){for(var r=e.firstRowIdx,n=e.lastRowIdx,a=r-c<0?0:r-c,s=n+c>i.totalFeatures-1?i.totalFeatures-1:n+c,u=Math.floor(a/t),p=Math.floor(s/t),f=!1,d=u;d<=p&&!f;d++)-1===(0,l.t3)(d*t,o,t)&&(f=!0);return f&&{startPage:u,endPage:p}})).filter((function(e){return e})).do((function(e){return r.moreFeatures(e)}))}))}(e.filter((function(e){return e.virtualScroll})).map((function(e){return ue(ue({},e),{},{onGridScroll$:n})}))).startWith({}).map((function(e){return ue(ue({},e),{},{onGridScroll:r})}))},virtualScroll:!0}),(0,E.withPropsOnChange)("showDragHandle",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showDragHandle,r=void 0===t||t;return{className:r?"feature-grid-drag-handle-show":"feature-grid-drag-handle-hide"}})),(0,E.withPropsOnChange)(["enableColumnFilters"],(function(e){return{displayFilters:e.enableColumnFilters}})),(0,E.withPropsOnChange)(["editingAllowedRoles","virtualScroll"],(function(e){return{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin}})),(0,E.withPropsOnChange)(["autocompleteEnabled"],(function(e){return{autocompleteEnabled:e.autocompleteEnabled}})),(0,E.withPropsOnChange)(["url"],(function(e){return{url:e.url}})),(0,E.withPropsOnChange)(["typeName"],(function(e){return{typeName:e.typeName}})),(0,E.withPropsOnChange)(["features","newFeatures","changes"],(function(e){return{rows:(e.newFeatures?[].concat(le(e.newFeatures),le(e.features)):e.features).filter(e.focusOnEdit?(0,l.ek)(e.changes&&Object.keys(e.changes).length>0,e.newFeatures,e.changes):function(){return!0}).map((function(t){return(0,l.Qc)(t,e.changes)})).map((function(e){return ue(ue({},e),{},{get:function(t){return"id"===t||"geometry"===t||"_new"===t?e[t]:e.properties&&e.properties[t]}})}))}})),(0,E.withPropsOnChange)(["newFeatures","changes","focusOnEdit"],(function(e){return{isFocused:e.focusOnEdit&&(e.changes&&Object.keys(e.changes).length>0||e.newFeatures&&e.newFeatures.length>0)}})),(0,E.withPropsOnChange)(["features","newFeatures","isFocused","virtualScroll","pagination"],(function(e){return{rowsCount:(e.isFocused||!e.virtualScroll)&&e.rows&&e.rows.length||e.pagination&&e.pagination.totalFeatures||0}})),(0,E.withHandlers)({rowGetter:function(e){return e.virtualScroll&&function(t){return(0,l.WQ)(t,e.rows,e.pages,e.size)}||function(t){return(0,l.dM)(t,e.rows)}}}),(0,E.withPropsOnChange)(["describeFeatureType","columnSettings","tools","actionOpts","mode","isFocused","sortable"],(function(e){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.localType,n=void 0===r?"":r,o=arguments.length>1?arguments[1]:void 0;return e.filterRenderers&&e.filterRenderers[o]?e.filterRenderers[o]:oe((0,ie.Q)(n))};return{columns:(0,l.Sc)(e.tools,e.rowGetter,e.describeFeatureType,e.actionOpts,t).concat((0,l.AV)(e.describeFeatureType,e.columnSettings,{editable:"EDIT"===e.mode,sortable:e.sortable&&!e.isFocused,defaultSize:e.defaultSize},{getEditor:function(t){var r={onTemporaryChanges:e.gridEvents&&e.gridEvents.onTemporaryChanges,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName},n={attribute:t.name,url:e.url,typeName:e.typeName},o=e.customEditorsOptions&&e.customEditorsOptions.rules||[],i={type:t.localType,generalProps:r,props:e},a=A().getCustomEditor(n,o,i);return(0,k.isNil)(a)?e.editors(t.localType,r):a},getFilterRenderer:t,getFormatter:function(e){return function(e){return"boolean"===e.localType?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return(0,k.isNil)(e)?null:a().createElement("span",null,e.toString())}:["int","number"].includes(e.localType)?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return(0,k.isNil)(e)?null:a().createElement(ae.Z,{value:e,numberParams:{maximumFractionDigits:17}})}:null}(e)}}))}})),(0,E.withPropsOnChange)(["gridOpts","describeFeatureType","actionOpts","mode","select","columns"],(function(e){var t=(0,l.a3)(e.gridEvents,e.rowGetter,e.describeFeatureType,e.actionOpts,e.columns),r=t.onRowsSelected,n=void 0===r?function(){}:r,o=t.onRowsDeselected,i=void 0===o?function(){}:o,a=t.onRowsToggled,c=void 0===a?function(){}:a,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["onRowsSelected","onRowsDeselected","onRowsToggled"]),u=e.gridOpts;return u=ue(ue({},u),{},{enableCellSelect:"EDIT"===e.mode,rowSelection:{showCheckbox:"EDIT"===e.mode,selectBy:{keys:{rowKey:"id",values:e.select.map((function(e){return e.id}))}},onRowsSelected:n,onRowsDeselected:i}}),s.onRowClick=function(e,t){e>=0&&c([{rowIdx:e,row:t}])},ue(ue({},s),u)})),F.Z);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ve(n);if(o){var r=ve(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ge(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).setScrollLeft=function(e){return t.refs.cell.setScrollLeft(e)},t}return t=l,(r=[{key:"render",value:function(){var e=this.context.isProperty(this.props.column.key),t=this.props.rowData._new&&e||this.context.isModified(this.props.rowData.id,this.props.column.key),r=!e||this.context.isValid(this.props.rowData.get(this.props.column.key),this.props.column.key),n=(t?["modified"]:[]).concat(r?[]:["invalid"]).join(" ");return a().createElement(s.Cell,ye({},this.props,{ref:"cell",className:n}))}}])&&me(t.prototype,r),l}(a().Component);he(Oe,"propTypes",{value:o().any,rowData:o().object,column:o().object}),he(Oe,"contextTypes",{isModified:o().func,isProperty:o().func,isValid:o().func}),he(Oe,"defaultProps",{value:null,rowData:{},column:{}});const we=Oe;function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xe(n);if(o){var r=xe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ce(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).setScrollLeft=function(e){return t.refs.row.setScrollLeft(e)},t}return t=a,(r=[{key:"render",value:function(){return this.props.renderBaseRow(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({extraClasses:"empty_row"===this.props.row.id?"empty-row":"",cellRenderer:we},this.props))}}])&&Pe(t.prototype,r),a}(a().Component);Te(ke,"propTypes",{columns:o().array,row:o().object,renderBaseRow:o().func.isRequired});const Ie=ke;function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(){return(Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_e(n);if(o){var r=_e(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ne(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e)}return t=c,(r=[{key:"componentDidMount",value:function(){this.props.initPlugin({virtualScroll:this.props.virtualScroll,editingAllowedRoles:this.props.editingAllowedRoles,maxStoredPages:this.props.maxStoredPages})}},{key:"getChildContext",value:function(){var e=this;return{isModified:function(t,r){return e.props.changes.hasOwnProperty(t)&&e.props.changes[t].hasOwnProperty(r)},isProperty:function(t){return"geometry"===t||(0,l.IC)(t,e.props.describeFeatureType)},isValid:function(t,r){return!e.props.describeFeatureType||(0,l.wT)(t,r,e.props.describeFeatureType)}}}},{key:"render",value:function(){var e=this.props.gridComponent;return a().createElement(e,Fe({rowRenderer:Ie},this.props))}}])&&De(t.prototype,r),c}(a().PureComponent);Le(Me,"propTypes",{autocompleteEnabled:o().bool,editingAllowedRoles:o().array,gridOpts:o().object,changes:o().object,selectBy:o().object,customEditorsOptions:o().object,features:o().array,showDragHandle:o().bool,gridComponent:o().func,describeFeatureType:o().object,columnSettings:o().object,gridOptions:o().object,actionOpts:o().object,initPlugin:o().func,tools:o().array,gridEvents:o().object,virtualScroll:o().bool,maxStoredPages:o().number}),Le(Me,"childContextTypes",{isModified:o().func,isValid:o().func,isProperty:o().func}),Le(Me,"defaultProps",{editingAllowedRoles:["ADMIN"],initPlugin:function(){},autocompleteEnabled:!1,gridComponent:function(e){return a().createElement(c.Z,null,(function(t){var r=t.width,n=t.height;return a().createElement("div",{className:e.className},a().createElement(T,x({},e,{minHeight:n,minWidth:r,enableCellAutoFocus:!1})))}))},changes:{},gridEvents:{},gridOpts:{},describeFeatureType:{},columnSettings:{},features:[],tools:[],showDragHandle:!1,virtualScroll:!1,maxStoredPages:5});const Ze=fe(Me)},78819:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(45697),o=r.n(n);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,r,n,o,i=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(n);if(o){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function p(){return a(this,p),i.apply(this,arguments)}return t=p,(r=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}}])&&l(t.prototype,r),p}(r(53370).editors.SimpleTextEditor);p(f,"propTypes",{onTemporaryChanges:o().func}),p(f,"defaultProps",{onTemporaryChanges:function(){}});const d=f},82994:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i),l=r(78819),c=r(49902),s=r(18093);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=(0,s.compose)((0,s.withStateHandlers)((function(e){return{open:!1,currentPage:1,value:e.value,data:e.data,textValue:e.textValue,textLabel:e.textLabel}}),{select:function(e){return function(){return p(p({},e),{},{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return p(p({},e),{},{selected:!1,changingPage:!1,value:e.value,currentPage:e.changingPage?e.currentPage:1});var r="string"==typeof t?t:t.value;return p(p({},e),{},{selected:!1,changingPage:!1,value:r,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?p(p({},e),{},{currentPage:1,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return p(p({},e),{},{open:!!e.changingPage||!e.open})}}}))((function(e){var t=e.toggle,r=e.select,n=e.focus,i=e.change,a=e.value,l=e.busy,s=e.data,u=e.loading,p=void 0!==u&&u,f=e.filter,d=e.open;return o().createElement(c.Z,{pagination:{paginated:!1},onFocus:n,onToggle:t,onChange:i,onSelect:r,selectedValue:a,dropUp:!1,busy:l,data:s,open:d,loading:p,filter:f})}));var y=function(e){var t=e.oldValue,r=e.changedValue,n=e.data;return e.allowEmpty&&""===r?"":-1!==n.indexOf(r)?r:t},m=r(61545),b=r(27418),g=r.n(b);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,r){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(n);if(i){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function l(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=a.call(this,e)).validate=function(e){try{return r.props.isValid(e[r.props.column&&r.props.column.key])}catch(e){return!1}},r.getValueByLabel=function(e){try{return r.props.values[r.props.labels.indexOf(e)]}catch(t){return e}},r.getValue=function(){var e=j((t=P(r),C(l.prototype)),"getValue",t).call(t);return r.props.forceSelection?x({},r.props.column.key,y({oldValue:r.props.defaultOption,changedValue:r.getValueByLabel(e[r.props.column&&r.props.column.key]),data:r.props.values,allowEmpty:r.props.allowEmpty})):r.props.allowEmpty?e:x({},r.props.column.key,y({oldValue:r.props.defaultOption,changedValue:r.getValueByLabel(e[r.props.column&&r.props.column.key]),data:r.props.values,allowEmpty:r.props.allowEmpty}))},r}return t=l,(r=[{key:"render",value:function(){var e=this,t=[];this.props.values&&this.props.labels&&this.props.values.lenght===this.props.labels.lenght?this.props.values.forEach((function(r,n){t.push({label:e.props.labels[n],value:r})})):t=this.props.values.map((function(e){return{label:e,value:e}}));var r=g()({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props),{data:t,defaultOption:this.props.defaultOption||(0,m.head)(this.props.values)});return o().createElement(d,h({},r,{filter:this.props.filter}))}}])&&w(t.prototype,r),l}(l.Z);x(T,"propTypes",{column:a().object,dataType:a().string,defaultOption:a().string,forceSelection:a().bool,allowEmpty:a().bool,inputProps:a().object,isValid:a().func,onBlur:a().func,typeName:a().string,url:a().string,value:a().string,filter:a().string,values:a().array,labels:a().array}),x(T,"defaultProps",{isValid:function(){return!0},dataType:"string",filter:"contains",values:[],forceSelection:!0,allowEmpty:!0});const k=T},43148:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i),l=r(61545),c=r(73378);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={int:function(e){return parseInt(e,10)},number:function(e){return parseFloat(e,10)}},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,i,a=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(i){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(e){var t,r,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),b(y(i=a.call(this,e)),"state",{inputText:""}),b(y(i),"validateTextValue",(function(e){if(!g[i.props.dataType])return!1;try{var t=g[i.props.dataType](e);return i.validateNumberValue(t)}catch(e){return!1}})),b(y(i),"validateNumberValue",(function(e){return(0,l.isNumber)(e)&&!isNaN(e)&&(!(0,l.isNumber)(i.props.minValue)||i.props.minValue<=e)&&(!(0,l.isNumber)(i.props.maxValue)||i.props.maxValue>=e)})),i.state={inputText:null!==(t=null===(r=e.value)||void 0===r||null===(n=r.toString)||void 0===n?void 0:n.call(r))&&void 0!==t?t:""},i.inputRef=o().createRef(),i}return t=s,(r=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}},{key:"getValue",value:function(){try{var e=g[this.props.dataType](this.state.inputText);return b({},this.props.column.key,this.validateNumberValue(e)?e:this.props.value)}catch(e){return b({},this.props.column.key,this.props.value)}}},{key:"getInputNode",value:function(){return this.inputRef.current}},{key:"render",value:function(){var e=this;return o().createElement(c.Z,u({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:function(t){e.inputRef=t},type:"number",min:this.props.minValue,max:this.props.maxValue,className:"form-control",defaultValue:this.props.value,onChange:function(t){e.setState({inputText:t,isValid:e.validateTextValue(t),validated:!0})}}))}}])&&p(t.prototype,r),s}(o().Component);b(v,"propTypes",{value:a().oneOfType([a().string,a().number]),inputProps:a().object,dataType:a().string,minValue:a().number,maxValue:a().number,column:a().object,onTemporaryChanges:a().func}),b(v,"defaultProps",{dataType:"number",column:{}})},89808:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(67294),o=r.n(n),i=r(82994),a=r(43148),l=r(45697),c=r.n(l);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(i){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),b(y(t=a.call(this,e)),"state",{inputText:""}),b(y(t),"validateValue",(function(e){return!t.props.formatRegex||new RegExp(t.props.formatRegex).test(e)})),t.state={inputText:e.value},t.inputRef=o().createRef(),t}return t=l,(r=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}},{key:"getValue",value:function(){return b({},this.props.column.key,this.validateValue(this.state.inputText)?this.state.inputText:this.props.value)}},{key:"getInputNode",value:function(){return this.inputRef.current}},{key:"render",value:function(){var e=this;return o().createElement("input",u({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,className:"form-control",defaultValue:this.props.value,onChange:function(t){e.setState({inputText:t.target.value,isValid:e.validateValue(t.target.value),validated:!0})}}))}}])&&p(t.prototype,r),l}(o().Component);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}b(g,"propTypes",{value:c().string,inputProps:c().object,dataType:c().string,column:c().object,formatRegex:c().string,onTemporaryChanges:c().func}),b(g,"defaultProps",{dataType:"string",column:{}});const h={DropDownEditor:{string:function(e){return o().createElement(i.Z,v({dataType:"string"},e))}},NumberEditor:{int:function(e){return o().createElement(a.Z,v({dataType:"int"},e))},number:function(e){return o().createElement(a.Z,v({dataType:"number"},e))}},FormatEditor:{string:function(e){return o().createElement(g,v({dataType:"string"},e))}}}},18027:(e,t,r)=>{"use strict";r.d(t,{Q:()=>Oe});var n=r(18093),o=r(67294),i=r.n(o),a=r(45697),l=r.n(a),c=r(37101),s=r(30381),u=r.n(s),p=r(20),f=r(93054),d=r.n(f),y=r(30294),m=r(61545),b=r(50966);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){for(var t=u()().startOf("day"),r=u()().startOf("day").add(1,"d"),n=[],o=t.date();t.date()===o&&t.isBefore(r);)n.push({date:t.toDate(),label:t.format("LT")}),t=t.add(e||30,"m");return n},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(n);if(o){var r=S(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return w(this,e)});function l(){var e;v(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return P(E(e=a.call.apply(a,[this].concat(r))),"state",{focusedItemIndex:0,times:[]}),P(E(e),"handleKeyDown",(function(t){var r=t.key,n=e.state,o=n.focusedItemIndex,i=n.times;if("Enter"===r){var a=i[o];e.props.onSelect(a),t.preventDefault()}else if("ArrowDown"===r){t.preventDefault();var l=o+1;e.scrollDown(l),l<i.length&&e.setState({focusedItemIndex:l})}else if("ArrowUp"===r){t.preventDefault();var c=o-1;e.scrollUp(c),c>-1&&e.setState({focusedItemIndex:c})}})),P(E(e),"scrollDown",(function(t){var r=e.itemsRef[t];r&&r.offsetTop>e.listRef.offsetHeight&&(e.listRef.scrollTop=r.offsetTop-e.listRef.offsetTop)})),P(E(e),"scrollUp",(function(t){var r=e.itemsRef[t];if(r){var n=e.listRef.scrollTop,o=r.offsetTop;n&&o<n&&(e.listRef.scrollTop=r.offsetTop-e.listRef.offsetTop)}})),P(E(e),"attachListRef",(function(t){return e.listRef=t})),P(E(e),"itemsRef",{}),e}return t=l,(r=[{key:"componentDidMount",value:function(){this.setState({times:j()})}},{key:"render",value:function(){var e=this,t=this.state,r=t.focusedItemIndex,n=t.times;return i().createElement("ul",{id:"rw_1_time_listbox",style:{position:"relative"},ref:this.attachListRef,tabIndex:"0",className:"rw-list",role:"listbox","aria-labelledby":"rw_1_input","aria-live":"false","aria-hidden":"true","aria-activedescendant":"rw_1_time_listbox__option__11"},n.map((function(t,n){return i().createElement("li",{key:t.label,onMouseDown:e.props.onMouseDown,onClick:function(){return e.props.onSelect(t)},ref:function(t){e.itemsRef[n]=t},role:"option",tabIndex:"0","aria-selected":"false",className:"rw-list-option ".concat(r===n?"rw-state-focus":""),id:"rw_1_time_listbox__option__0"},t.label)})))}}])&&h(t.prototype,r),l}(o.Component);P(C,"propTypes",{onSelect:l().func,onMouseDown:l().func}),P(C,"defaultProps",{onSelect:function(){},onMouseDown:function(){}});const x=C;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}d()(u());var L="function"==typeof u()().locale?"locale":"lang";function M(e,t,r){return e?u()(t,r)[L](e):u()(t,r)}var Z=function(e,t){var r=u()(e);return r.hours(t.getHours()).minute(t.getMinutes()).seconds(t.getSeconds()).milliseconds(t.getMilliseconds()),r.toDate()},G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(n);if(o){var r=N(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return D(this,e)});function l(){var e;I(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(R(e=a.call.apply(a,[this].concat(r))),"state",{open:"",focused:!1,inputValue:"",operator:"",date:null}),_(R(e),"getFormat",(function(){var t=e.props,r=t.format,n=t.time,o=t.calendar;return r||(!n&&o?"L":n&&!o?"LT":"lll")})),_(R(e),"renderInput",(function(t,r,n,o,a,l,c){return n?i().createElement(b.Z,{placement:"top",overlay:i().createElement(y.Tooltip,{id:"tooltip"},n)},i().createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:e.handleInputBlur,placeholder:o,"aria-expanded":l||c,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(r).concat(t),className:"rw-input",onChange:e.handleValueChange})):i().createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:e.handleInputBlur,placeholder:o,"aria-expanded":l||c,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(r).concat(t),className:"rw-input",onChange:e.handleValueChange})})),_(R(e),"inputFlush",!1),_(R(e),"ignoreBlur",!1),_(R(e),"handleWidgetFocus",(function(){e.setState({focused:!0}),e.ignoreBlur=!1})),_(R(e),"handleWidgetBlur",(function(){e.ignoreBlur||e.setState({open:"",focused:!1})})),_(R(e),"handleMouseDown",(function(){e.ignoreBlur=!0})),_(R(e),"toggleCalendar",(function(){e.setState((function(e){return{open:"date"!==e.open?"date":""}}))})),_(R(e),"toggleTime",(function(){e.setState((function(e){return{open:"time"!==e.open?"time":""}}))})),_(R(e),"handleInputBlur",(function(){if(e.inputFlush){var t=e.parse(e.state.inputValue),r=e.format(t);e.setState({inputValue:r,date:t}),e.inputFlush=!1,e.props.onChange(t,"".concat(e.state.operator).concat(r))}})),_(R(e),"setDateFromValueProp",(function(t,r){if((0,m.isDate)(t)){var n=e.format(t);e.setState((function(e){return{date:t,inputValue:n,operator:r||e.operator}}))}})),_(R(e),"parse",(function(t){var r=e.props.culture,n=e.getFormat();if(t){var o=M(r,t,n);if(o.isValid())return o.toDate()}return null})),_(R(e),"format",(function(t){if(!t)return"";var r=e.props.culture,n=e.getFormat(),o=M(r,t);return o.isValid()?o.format(n):""})),_(R(e),"close",(function(){e.setState({open:""})})),_(R(e),"open",(function(){var t=e.props,r=t.calendar,n=t.time;return!r&&n?e.setState({open:"time"}):r&&!n?e.setState({open:"date"}):""})),_(R(e),"handleKeyDown",(function(t){var r=e.state.open,n="time"===r,o="date"===r;if(!t.defaultPrevented)if("Escape"!==t.key){if(t.altKey&&"ArrowDown"===t.key)return t.preventDefault(),void e.open();if(t.altKey&&"ArrowUp"===t.key)return t.preventDefault(),void e.close();if(n&&e.timeRef.handleKeyDown(t),o&&e.calRef.refs.inner.handleKeyDown(t),!n&&!o&&"Enter"===t.key){var i=e.parse(e.state.inputValue),a=e.format(i);e.setState({inputValue:a,date:i}),e.inputFlush=!1,e.props.onChange(i,"".concat(e.state.operator).concat(a))}}else e.close()})),_(R(e),"handleValueChange",(function(t){var r=t.target.value,n=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(r);e.setState({inputValue:n[2],operator:n[1]||""}),e.inputFlush=!0})),_(R(e),"handleCalendarChange",(function(t){var r=Z(t,new Date),n=e.format(r);e.setState({date:r,inputValue:n,open:""}),e.props.onChange(r,"".concat(e.state.operator).concat(n))})),_(R(e),"handleTimeSelect",(function(t){var r=e.state.date||new Date,n=Z(r,t.date),o=e.format(n);e.setState({date:n,inputValue:o,open:""}),e.props.onChange(n,"".concat(e.state.operator).concat(o))})),_(R(e),"attachTimeRef",(function(t){return e.timeRef=t})),_(R(e),"attachCalRef",(function(t){return e.calRef=t})),e}return t=l,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,r=e.operator;this.setDateFromValueProp(t,r)}},{key:"componentDidUpdate",value:function(e){if(e.value!==this.props.value||e.operator!==this.props.operator){var t=this.props,r=t.value,n=t.operator;this.setDateFromValueProp(r,n)}}},{key:"render",value:function(){var e=this,t=this.state,r=t.open,n=t.inputValue,o=t.operator,a=t.focused,l=this.props,c=l.calendar,s=l.time,u=l.toolTip,f=l.placeholder,d=l.tabIndex,y=Object.keys(this.props).reduce((function(t,r){return["placeholder","calendar","time","onChange","value"].includes(r)||(t[r]=e.props[r]),t}),{}),m="date"===r,b="time"===r;return i().createElement("div",{tabIndex:"-1",onKeyDown:this.handleKeyDown,onBlur:this.handleWidgetBlur,onFocus:this.handleWidgetFocus,className:"rw-datetimepicker rw-widget ".concat(c&&s?"rw-has-both":""," ").concat(c||s?"":"rw-has-neither"," ").concat(a?"rw-state-focus":"")},this.renderInput(n,o,u,f,d,m,b),c||s?i().createElement("span",{className:"rw-select"},c?i().createElement("button",{tabIndex:"-1",title:"Select Date",type:"button","aria-disabled":"false","aria-label":"Select Date",className:"rw-btn-calendar rw-btn",onClick:this.toggleCalendar},i().createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-calendar"})):"",s?i().createElement("button",{tabIndex:"-1",title:"Select Time",type:"button","aria-disabled":"false","aria-label":"Select Time",className:"rw-btn-time rw-btn",onClick:this.toggleTime},i().createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-clock-o"})):""):"",i().createElement("div",{className:"rw-popup-container rw-popup-animating",style:{display:b?"block":"none",overflow:b?"visible":"hidden",height:"216px"}},i().createElement("div",{className:"rw-popup rw-widget",style:{transform:b?"translateY(0)":"translateY(-100%)",position:b?"":"absolute"}},i().createElement(x,k({ref:this.attachTimeRef,onMouseDown:this.handleMouseDown},y,{onClose:this.close,onSelect:this.handleTimeSelect})))),i().createElement("div",{className:"rw-calendar-popup rw-popup-container ".concat(m?"":"rw-popup-animating"),style:{display:m?"block":"none",overflow:m?"visible":"hidden",height:"375px"}},i().createElement("div",{className:"rw-popup",style:{transform:m?"translateY(0)":"translateY(-100%)",padding:"0",borderRadius:"4px",position:m?"":"absolute"}},i().createElement(p.Calendar,k({tabIndex:"-1",ref:this.attachCalRef,onMouseDown:this.handleMouseDown,onChange:this.handleCalendarChange},y)))))}}])&&A(t.prototype,r),l}(o.Component);_(G,"propTypes",{format:l().string,type:l().string,placeholder:l().string,onChange:l().func,calendar:l().bool,time:l().bool,value:l().any,operator:l().string,culture:l().string,toolTip:l().string,tabIndex:l().string}),_(G,"defaultProps",{placeholder:"Type date...",calendar:!0,time:!0,onChange:function(){},value:null});const B=G;var z=r(86638),U=r(55237);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(n);if(o){var r=K(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $(this,e)});function l(){var e;V(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return X(Y(e=a.call.apply(a,[this].concat(r))),"renderInput",(function(){if(!1===e.props.column.filterable)return i().createElement("span",null);var t=(0,z.S$)(e.context.messages,e.props.placeholderMsgId)||"Search",r="header-filter-"+e.props.column.key;return i().createElement("input",{disabled:e.props.disabled,key:r,type:"text",className:"form-control input-sm",placeholder:t,value:e.props.value,onChange:e.handleChange})})),X(Y(e),"renderTooltip",(function(t){return e.props.tooltipMsgId&&(0,z.S$)(e.context.messages,e.props.tooltipMsgId)?i().createElement(b.Z,{placement:"top",overlay:i().createElement(y.Tooltip,{id:"tooltip"},(0,z.S$)(e.context.messages,e.props.tooltipMsgId))},t):t})),X(Y(e),"handleChange",(function(t){var r=t.target.value;e.props.onChange({value:r,attribute:e.props.column&&e.props.column.key})})),e}return t=l,(r=[{key:"render",value:function(){var e="header-filter--"+this.props.column.key;return i().createElement("div",{key:e,className:"form-group".concat(this.props.valid?"":" has-error")},this.renderTooltip(this.renderInput()))}}])&&q(t.prototype,r),l}(i().PureComponent);X(Q,"propTypes",{valid:l().bool,disabled:l().bool,onChange:l().func.isRequired,value:l().any,column:l().object,placeholderMsgId:l().string,tooltipMsgId:l().string}),X(Q,"contextTypes",{messages:l().object}),X(Q,"defaultProps",{value:"",valid:!0,onChange:function(){},column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"});const J=Q;var ee=r(43146);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?ie(e):t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(72717);var ce=(0,ee.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(B),se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=ae(t);if(r){var o=ae(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return oe(this,e)});function o(){var e;re(this,o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return le(ie(e=n.call.apply(n,[this].concat(r))),"renderInput",(function(){if(!1===e.props.column.filterable)return i().createElement("span",null);var t,r=(0,U.V$)(e.context.locale,e.props.type),n=(0,z.S$)(e.context.messages,e.props.placeholderMsgId)||"Insert date",o=e.props.intl&&e.props.intl.formatMessage({id:"".concat(e.props.tooltipMsgId)},{format:r})||"Insert date in ".concat(r," format"),a="header-filter-"+e.props.column.key;t=e.props.value&&null===e.props.value.startDate||!e.props.value?null:e.props.value&&e.props.value.startDate||e.props.value;var l=e.props.value?t:null,c=e.props.value&&e.props.value.operator;return i().createElement(ce,{key:a,disabled:e.props.disabled,format:r,placeholder:n,value:l,toolTip:o,operator:c,type:e.props.type,time:"date-time"===e.props.type||"time"===e.props.type,calendar:"date-time"===e.props.type||"date"===e.props.type,onChange:function(t,r){return e.handleChange(t,r)}})})),le(ie(e),"handleChange",(function(t,r){e.props.onChange({value:t,stringValue:r,attribute:e.props.column&&e.props.column.name})})),e}return o}(J);le(se,"propTypes",{type:l().string,disabled:l().boolean,onChange:l().func,intl:c.intlShape}),le(se,"contextTypes",{messages:l().object,locale:l().string}),le(se,"defaultProps",{value:null,type:"date-time",column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"});const ue=(0,n.getContext)({intl:c.intlShape})(se),pe=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){},value:null}),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute,o=t.stringValue,i=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(o),a=i[1],l=i[1]||"=";"!=="===a|"!="===a?l="<>":"==="===a|"=="===a&&(l="="),e.onValueChange(r),e.onChange({value:{startDate:r,operator:a},operator:l,type:e.type,attribute:n})}}}),(0,n.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.date",tooltipMsgId:"featuregrid.filter.tooltips.date"}))(ue),fe=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){}}),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;e.onValueChange(r),e.onChange({value:r,operator:"=",type:e.type,attribute:n})}}}))(J);var de=r(5346);const ye=function(e){var t=e.value,r=e.filterEnabled,n=void 0!==r&&r,o=e.filterDeactivated,a=void 0!==o&&o,l=e.column,c=void 0===l?{}:l,s=e.tooltipPlace,u=void 0===s?"top":s,p=e.tooltipDisabled,f=void 0===p?"featuregrid.filter.tooltips.geometry.disabled":p,d=e.tooltipEnabled,m=void 0===d?"featuregrid.filter.tooltips.geometry.enabled":d,g=e.tooltipApplied,v=void 0===g?"featuregrid.filter.tooltips.geometry.applied":g,h=e.onChange,O=void 0===h?function(){}:h,w=a?void 0:n&&t?v:n&&!t?m:f,E=i().createElement("div",{className:"featuregrid-geometry-filter".concat(n?" filter-enabled":"").concat(a?" filter-deactivated":""),onClick:a?function(){}:function(){O({enabled:!n,type:"geometry",attribute:c.geometryPropName})}},i().createElement(y.Glyphicon,{glyph:t?"remove-sign":"map-marker"}));return w?i().createElement(b.Z,{placement:u,overlay:i().createElement(y.Tooltip,{id:"gofull-tooltip"},i().createElement(de.Z,{msgId:w}))},E):E};var me=r(96958),be=/\,/;const ge=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){}}),(0,n.withState)("valid","setValid",!0),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;if(e.onValueChange(r),be.exec(r)){var o=(null==r?void 0:r.split(",").filter(m.identity))||[],i=o.reduce((function(e,t){var r=(0,me.Cf)(t).newVal;return e&&!(isNaN(r)&&""!==(0,m.trim)(t))}),!0);e.setValid(i),e.onChange({value:r,rawValue:r,operator:"=",type:"number",attribute:n})}else{var a=(0,me.Cf)(r,"number"),l=a.operator,c=a.newVal;isNaN(c)&&""!==(0,m.trim)(r)?e.setValid(!1):e.setValid(!0),e.onChange({value:isNaN(c)?void 0:c,rawValue:r,operator:l,type:"number",attribute:n})}}}}),(0,n.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.number",tooltipMsgId:"featuregrid.filter.tooltips.number"}))(J),ve=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){},placeholderMsgId:"featuregrid.filter.placeholders.string"}),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;e.onValueChange(r),e.onChange({rawValue:r,value:(0,m.trim)(r)?(0,m.trim)(r):void 0,operator:"ilike",type:"string",attribute:n})}}}))(J);var he={defaultFilter:function(e){return(0,n.withProps)((function(){return{type:e}}))(fe)},string:function(){return ve},number:function(){return ge},int:function(){return ge},date:function(){return(0,n.withProps)((function(){return{type:"date"}}))(pe)},time:function(){return(0,n.withProps)((function(){return{type:"time"}}))(pe)},"date-time":function(){return(0,n.withProps)((function(){return{type:"date-time"}}))(pe)},geometry:function(){return ye}},Oe=function(e,t){return he[e]?he[e](e,t):he.defaultFilter(e,t)}},48384:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,y,m,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(i){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function l(){return c(this,l),a.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e=this.props.item;return e.pagination?o().createElement("span",null,e[this.props.textField]," ",e.pagination," "):o().createElement("span",null,e[this.props.textField])}}])&&s(t.prototype,r),l}(o().Component);d=b,y="propTypes",m={item:a().object,textField:a().string,valueField:a().string},y in d?Object.defineProperty(d,y,{value:m,enumerable:!0,configurable:!0,writable:!0}):d[y]=m;const g=b},82571:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var React=__webpack_require__(67294),PropTypes=__webpack_require__(45697),_require=__webpack_require__(61545),isEqual=_require.isEqual,_require2=__webpack_require__(59286),parseTemplate=_require2.parseTemplate,Template=function(_React$Component){_inherits(Template,_React$Component);var _super=_createSuper(Template);function Template(){var _this;_classCallCheck(this,Template);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty(_assertThisInitialized(_this),"renderContent",(function(){var model=_this.props.model,props=_this.props;return eval(_this.comp)})),_defineProperty(_assertThisInitialized(_this),"parseTemplate",(function(e){parseTemplate(e,(function(e,t){t?_this.props.onError(t.message):(_this.comp=e,_this.forceUpdate())}))})),_this}return _createClass(Template,[{key:"UNSAFE_componentWillMount",value:function(){this.parseTemplate(this.props.template)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.template!==this.props.template&&(this.comp=null,this.parseTemplate(e.template))}},{key:"shouldComponentUpdate",value:function(e){return!isEqual(e,this.props)}},{key:"render",value:function(){if(this.comp){var e=this.props.renderContent?this.props.renderContent(this.comp,this.props):this.renderContent();return React.isValidElement(e)?e:null}return null}}]),Template}(React.Component);_defineProperty(Template,"propTypes",{template:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),model:PropTypes.object,renderContent:PropTypes.func,onError:PropTypes.func}),_defineProperty(Template,"defaultProps",{template:"",model:{},onError:function(){}});const __WEBPACK_DEFAULT_EXPORT__=Template},18790:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(73935),s=r.n(c),u=r(90183);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(o){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function c(){var e;f(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(b(e=i.call.apply(i,[this].concat(r))),"launchNewCRSAction",(function(t){if(e.props.useRawInput)e.props.onCRSChange(t.target.value);else{var r=s().findDOMNode(b(e)).getElementsByTagName("select").item(0);e.props.onCRSChange(r.value)}})),e}return t=c,(r=[{key:"render",value:function(){var e,t,r=[],n={};for(var o in Object.keys(this.props.availableCRS).length&&(n=(0,u.filterCRSList)(this.props.availableCRS,this.props.filterAllowedCRS,this.props.additionalCRS,this.props.projectionDefs)),n)n.hasOwnProperty(o)&&(e=o,t=n[o].label,r.push(a().createElement("option",{value:e,key:e},t)));return this.props.enabled&&this.props.useRawInput?a().createElement("select",{id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},r):this.props.enabled&&!this.props.useRawInput?a().createElement(l.FormGroup,null,a().createElement(l.ControlLabel,null,this.props.label),a().createElement(l.FormControl,{componentClass:"select",id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},r)):null}}])&&d(t.prototype,r),c}(a().Component);v(h,"propTypes",{id:o().string,label:o().oneOfType([o().func,o().string,o().object]),availableCRS:o().object,filterAllowedCRS:o().array,projectionDefs:o().array,additionalCRS:o().object,crs:o().string,enabled:o().bool,onCRSChange:o().func,useRawInput:o().bool}),v(h,"defaultProps",{id:"mapstore-crsselector",availableCRS:(0,u.getAvailableCRS)(),crs:null,onCRSChange:function(){},enabled:!1,useRawInput:!1});const O=h},42454:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(90173),c=r(30294),s=r(74855),u=r.n(s),p=r(90183),f=r(47461),d=r(54717),y=r(18790),m=r(5346),b=r(61545),g=r(38560);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(94889);var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(n);if(o){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return E(this,e)});function s(){var e;h(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return j(S(e=i.call.apply(i,[this].concat(r))),"getPosition",(function(){var t=e.props.mousePosition?e.props.mousePosition:[null,null],r=t.x,n=t.y,o=t.z;if(r||n){if(l.default.defs(e.props.mousePosition.crs)!==l.default.defs(e.props.crs)){var i=(0,p.reproject)([r,n],e.props.mousePosition.crs,e.props.crs);r=i.x,n=i.y}}else{var a={x:0,y:0,z:o};r=a.x,n=a.y}return"degrees"===(0,p.getUnits)(e.props.crs)?{lat:n,lng:r,z:o}:{x:r,y:n,z:o}})),j(S(e),"getTemplateComponent",(function(){return"degrees"===(0,p.getUnits)(e.props.crs)?e.props.degreesTemplate:e.props.projectedTemplate})),e}return t=s,(r=[{key:"render",value:function(){var e=this.props.mousePosition?this.getTemplateComponent():null;if(this.props.enabled){var t=this.getPosition();return a().createElement("div",{id:this.props.id,style:this.props.style},a().createElement("span",{className:"mapstore-mouse-coordinates"},this.props.showLabels?a().createElement("label",null,a().createElement(m.Z,{msgId:"mouseCoordinates"})):null,e?a().createElement(e,{position:t}):a().createElement("h5",null,a().createElement(c.Label,{bsSize:"lg",bsStyle:"info"},"...",a().createElement("span",null)))),this.props.copyToClipboardEnabled&&a().createElement(u(),{text:JSON.stringify(t),onCopy:this.props.onCopy},a().createElement(g.Z,{bsSize:this.props.btnSize},a().createElement(c.Glyphicon,{glyph:this.props.glyphicon}))),this.props.showElevation?a().createElement("span",{className:"mapstore-mouse-elevation"},this.props.showLabels?a().createElement("label",null,a().createElement(m.Z,{msgId:"mousePositionElevation"})):null,a().createElement("h5",null,this.props.elevationTemplate(t.z))):null,this.props.showCRS?this.props.crsTemplate(this.props.crs):null,this.props.editCRS?a().createElement(y.default,{projectionDefs:this.props.projectionDefs,filterAllowedCRS:this.props.filterAllowedCRS,additionalCRS:this.props.additionalCRS,label:this.props.showLabels?a().createElement("label",null,a().createElement(m.Z,{msgId:"mousePositionCRS"})):null,crs:this.props.crs,enabled:!0,onCRSChange:this.props.onCRSChange}):null,this.props.showToggle?this.props.toggle:null)}return this.props.showToggle?a().createElement("div",{id:this.props.id,style:this.props.style},this.props.toggle):null}}])&&O(t.prototype,r),s}(a().Component);j(C,"propTypes",{id:o().string,mousePosition:o().object,crs:o().string,enabled:o().bool,showCRS:o().bool,editCRS:o().bool,filterAllowedCRS:o().array,projectionDefs:o().array,additionalCRS:o().object,degreesTemplate:o().oneOfType([o().object,o().func]),projectedTemplate:o().oneOfType([o().object,o().func]),crsTemplate:o().oneOfType([o().object,o().func]),elevationTemplate:o().oneOfType([o().object,o().func]),style:o().object,copyToClipboardEnabled:o().bool,glyphicon:o().string,btnSize:o().oneOf(["large","medium","small","xsmall"]),onCopy:o().func,onCRSChange:o().func,toggle:o().object,showLabels:o().bool,showToggle:o().bool,showElevation:o().bool}),j(C,"defaultProps",{id:"mapstore-mouseposition",mousePosition:null,crs:"EPSG:4326",enabled:!0,showCRS:!1,editCRS:!1,degreesTemplate:f.default,projectedTemplate:d.default,crsTemplate:function(e){return a().createElement("span",{className:"mouseposition-crs"},e)},elevationTemplate:function(e){return(0,b.isNumber)(e)?a().createElement("span",{className:"mouseposition-elevation"},e," m"):a().createElement(m.Z,{msgId:"mousePositionNoElevation"})},style:{},copyToClipboardEnabled:!1,glyphicon:"paste",btnSize:"xsmall",onCopy:function(){},onCRSChange:function(){},toggle:a().createElement("div",null),showLabels:!1,showToggle:!1,showElevation:!1});const x=C},59560:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(47361);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m,b,g,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(o){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){return u(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement("span",null,"Lat: "),a().createElement(c.Z,{key:"latD",numberParams:{style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lat}),a().createElement("span",null,"° Lng: "),a().createElement(c.Z,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lng}),a().createElement("span",null,"° ")))}}])&&p(t.prototype,r),s}(a().Component);m=v,b="propTypes",g={position:o().shape({lng:o().number,lat:o().number})},b in m?Object.defineProperty(m,b,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[b]=g;const h=v},84848:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var n=r(61545),o=r(45697),i=r.n(o),a=r(67294),l=r.n(a),c=r(30294),s=r(90183),u=r(47361);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(p,e);var t,r,o,i,a=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(o);if(i){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function p(){var e;f(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(b(e=a.call.apply(a,[this].concat(r))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60;return{lat:n,latM:Math.abs(o),lng:r,lngM:Math.abs(i)}})),e}return t=p,(r=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},r={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:3,minimumFractionDigits:3},o={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return l().createElement("h5",null,l().createElement(c.Label,{bsSize:"lg",bsStyle:"info"},l().createElement("span",null,"Lat: "),l().createElement(u.Z,{key:"latD",numberParams:t,value:(0,n.isNil)(e.lat)?e.lat:(0,s.roundCoord)({roundingBehaviour:"floor",value:e.lat,maximumFractionDigits:t.maximumFractionDigits})}),l().createElement("span",null,"° "),l().createElement(u.Z,{key:"latM",numberParams:r,value:e.latM}),l().createElement("span",null,"' "),l().createElement("span",null,"Lng: "),l().createElement(u.Z,{key:"lngD",numberParams:o,value:(0,n.isNil)(e.lng)?e.lng:(0,s.roundCoord)({roundingBehaviour:"floor",value:e.lng,maximumFractionDigits:o.maximumFractionDigits})}),l().createElement("span",null,"° "),l().createElement(u.Z,{key:"lngM",numberParams:r,value:e.lngM}),l().createElement("span",null,"' ")))}}])&&d(t.prototype,r),p}(l().Component);v(h,"propTypes",{position:i().shape({lng:i().number,lat:i().number})});const O=h},47461:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(90183),s=r(47361);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(o){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function u(){var e;p(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(m(e=i.call.apply(i,[this].concat(r))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60,a=o%1*60,l=i%1*60;return{lat:Math.trunc(n),latM:Math.abs(o),latS:Math.abs(a),lng:Math.trunc(r),lngM:Math.abs(i),lngS:Math.abs(l)}})),e}return t=u,(r=[{key:"render",value:function(){var e=this.props.position||{},t=e.lng,r=e.lat,n=this.getPositionValues(this.props.position),o=t<0?"-":"",i=r<0?"-":"",u={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},p={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement("span",null,"Lat: ",i),a().createElement(s.Z,{key:"latD",numberParams:u,value:Math.abs(n.lat)}),a().createElement("span",null,"° "),a().createElement(s.Z,{key:"latM",numberParams:u,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:n.latM,maximumFractionDigits:u.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"latS",numberParams:p,value:n.latS}),a().createElement("span",null,"''"),a().createElement("span",{className:"mouseposition-separator"}),a().createElement("span",null," Lng: ",o),a().createElement(s.Z,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0},value:Math.abs(n.lng)}),a().createElement("span",null,"° "),a().createElement(s.Z,{key:"lngM",numberParams:u,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:n.lngM,maximumFractionDigits:u.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"lngS",numberParams:p,value:n.lngS}),a().createElement("span",null,"''")))}}])&&f(t.prototype,r),u}(a().Component);g(v,"propTypes",{position:o().shape({lng:o().number,lat:o().number})});const h=v},95762:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(90183),s=r(47361);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(o){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function u(){var e;p(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(m(e=i.call.apply(i,[this].concat(r))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60,a=o%1*60,l=i%1*60;return{lat:n,latM:Math.abs(o),latS:Math.abs(a),lng:r,lngM:Math.abs(i),lngS:Math.abs(l)}})),e}return t=u,(r=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},r={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2},n={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement(s.Z,{key:"latD",numberParams:t,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:Math.abs(e.lat),maximumFractionDigits:t.maximumFractionDigits})}),a().createElement("span",null,"° "),a().createElement(s.Z,{key:"latM",numberParams:t,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:e.latM,maximumFractionDigits:t.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"latS",numberParams:r,value:e.latS}),a().createElement("span",null,"'' ",e.lat>0?"N":"S"," "),a().createElement(s.Z,{key:"lngD",numberParams:n,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:Math.abs(e.lng),maximumFractionDigits:n.maximumFractionDigits})}),a().createElement("span",null,"° "),a().createElement(s.Z,{key:"lngM",numberParams:t,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:e.lngM,maximumFractionDigits:t.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"lngS",numberParams:r,value:e.lngS}),a().createElement("span",null,"'' ",e.lng>0?"E":"W")))}}])&&f(t.prototype,r),u}(a().Component);g(v,"propTypes",{position:o().shape({lng:o().number,lat:o().number})});const h=v},54717:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(47361);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m,b,g,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(o){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){return u(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){var e={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement("span",null,"X: "),a().createElement(c.Z,{key:"x",numberParams:e,value:this.props.position.x}),a().createElement("span",{className:"mouseposition-separator"}),a().createElement("span",null," Y: "),a().createElement(c.Z,{key:"y",numberParams:e,value:this.props.position.y})))}}])&&p(t.prototype,r),s}(a().Component);m=v,b="propTypes",g={position:o().shape({x:o().number,y:o().number})},b in m?Object.defineProperty(m,b,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[b]=g;const h=v},71188:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(67294),a=r.n(i),l=r(73935),c=r.n(l),s=r(18790),u=r(8267),p=r.n(u);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d={availableCRS:{"EPSG:4326":{label:"EPSG:4326"}},filterAllowedCRS:["EPSG:4326"],additionalCRS:{},projectionDefs:[]};describe("CRSSelector",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,f({enabled:!0},d)),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist();var r=t.getElementsByTagName("select").item(0).childNodes;o()(r.length).toBe(1)})),it("checks if a change of the combo fires the proper action",(function(){var e,t=c().render(a().createElement(s.default,f({enabled:!0},d,{onCRSChange:function(t){e=t}})),document.getElementById("container")),r=c().findDOMNode(t).getElementsByTagName("select").item(0);r.value="EPSG:4326",p().Simulate.change(r,{target:{value:"EPSG:4326"}}),o()(e).toBe("EPSG:4326")}))}))},93528:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(45697),a=r.n(i),l=r(67294),c=r.n(l),s=r(73935),u=r.n(s),p=r(42454);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}describe("MousePosition",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){u().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks enabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.id).toExist();var r=t.getElementsByTagName("button");o()(r).toExist(),o()(r.length).toBe(0)})),it("checks disabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!1,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toNotExist()})),it("checks no position",(function(){var e=u().render(c().createElement(p.default,{enabled:!0}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(-1!==t.innerText.indexOf("...")).toBe(!0)})),it("checks no elevation",(function(){var e=u().render(c().createElement(p.default,{enabled:!0}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(0)})),it("checks elevation enabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,showElevation:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(1),o()(t.innerHTML).toContain("13")})),it("checks default templates degrees",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.innerHTML).toContain("Lat:"),o()(t.innerHTML).toContain("Lng:")})),it("checks default templates meters",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,crs:"EPSG:3857",mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.innerHTML).toContain("Y:"),o()(t.innerHTML).toContain("X:")})),it("checks custom template",(function(){var e,t,r,n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(o){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function a(){return d(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return c().createElement("div",null,this.props.position.lng,",",this.props.position.lat)}}])&&y(t.prototype,r),a}(c().Component);e=n,t="propTypes",r={position:a().object},t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;var i=u().render(c().createElement(p.default,{degreesTemplate:n,enabled:!0,mousePosition:{x:11,y:12,crs:"EPSG:4326"}}),document.getElementById("container"));o()(i).toExist();var l=u().findDOMNode(i);o()(l).toExist(),o()(l.innerHTML).toContain("11"),o()(l.innerHTML).toContain("12")})),it("checks custom elevation template",(function(){var e=u().render(c().createElement(p.default,{elevationTemplate:function(e){return c().createElement("div",null,"Z: ",e)},showElevation:!0,enabled:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.innerHTML).toContain("Z:"),o()(t.innerHTML).toContain("13")})),it("checks copy to clipboard enabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.id).toExist();var r=t.getElementsByTagName("button");o()(r).toExist(),o()(r.length).toBe(1)})),it("checks copy to clipboard action",(function(){var e={onCopy:function(){}},t=o().spyOn(e,"onCopy"),r=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),n=u().findDOMNode(r).getElementsByTagName("button")[0];o().spyOn(window,"prompt").andReturn(!0),n.click(),o()(t.calls.length).toBe(1)})),it("checks lat ang lag value",(function(){var e={onCopy:function(){}},t=o().spyOn(e,"onCopy"),r=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:Math.floor(1.1),y:Math.floor(1.2),crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),n=u().findDOMNode(r).getElementsByTagName("button")[0];o().spyOn(window,"prompt").andReturn(!0),n.click(),o()(t.calls.length).toBe(1)}))}))},22922:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(67294),a=r.n(i),l=r(73935),c=r.n(l),s=r(84848),u=r(8267),p=r.n(u),f=r(37101);describe("MousePositionLabelDM",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,null),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: ° ' Lng: ° ' ");var r=p().scryRenderedDOMComponentsWithTag(e,"span");o()(r.length).toBe(11),o()(r[1].textContent).toBe("Lat: "),o()(r[2].textContent).toBe(""),o()(r[3].textContent).toBe("° "),o()(r[4].textContent).toBe(""),o()(r[5].textContent).toBe("' "),o()(r[6].textContent).toBe("Lng: "),o()(r[7].textContent).toBe(""),o()(r[8].textContent).toBe("° "),o()(r[9].textContent).toBe(""),o()(r[10].textContent).toBe("' ")})),it("a position with defaults",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 13° 32.000' Lng: 028° 18.000' ")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 43° 42.436' Lng: 010° 28.501' ")}))}))},53389:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(67294),a=r.n(i),l=r(73935),c=r.n(l),s=r(47461),u=r(8267),p=r.n(u),f=r(37101);describe("MousePositionLabelDMS",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,null),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: ° ' '' Lng: ° ' ''");var r=p().scryRenderedDOMComponentsWithTag(e,"span");o()(r.length).toBe(16),o()(r[1].textContent).toBe("Lat: "),o()(r[2].textContent).toBe(""),o()(r[3].textContent).toBe("° "),o()(r[4].textContent).toBe(""),o()(r[5].textContent).toBe("' "),o()(r[6].textContent).toBe(""),o()(r[7].textContent).toBe("''"),o()(r[8].className).toBe("mouseposition-separator"),o()(r[9].textContent).toBe(" Lng: "),o()(r[10].textContent).toBe(""),o()(r[11].textContent).toBe("° "),o()(r[12].textContent).toBe(""),o()(r[13].textContent).toBe("' "),o()(r[14].textContent).toBe(""),o()(r[15].textContent).toBe("''")})),it("a position with defaults",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 13° 31' 60.00'' Lng: 028° 18' 00.00''")})),it("position with no rounding but trunc of latD and lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 43° 42' 26.16'' Lng: 010° 28' 30.05''")})),it("position with negative lat and lng correctly truncated ladD e lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: -00° 00' 21.60'' Lng: -000° 00' 21.60''")})),it("test sign changes when crossing greenwich meridian and equator parallel and latD lngD are 0",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: -00° 00' 21.60'' Lng: -000° 00' 21.60''");var r=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:.006,lat:.006}})),document.getElementById("container"));o()(r).toExist();var n=c().findDOMNode(r);o()(n).toExist(),o()(n.textContent).toBe("Lat: 00° 00' 21.60'' Lng: 000° 00' 21.60''")}))}))},53884:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(67294),a=r.n(i),l=r(73935),c=r.n(l),s=r(95762),u=r(8267),p=r.n(u),f=r(37101);describe("MousePositionLabelDMSNW",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,null),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("° ' '' S ° ' '' W");var r=p().scryRenderedDOMComponentsWithTag(e,"span");o()(r.length).toBe(13),o()(r[1].innerText).toBe(""),o()(r[2].innerText).toBe("° "),o()(r[3].innerText).toBe(""),o()(r[4].innerText).toBe("' "),o()(r[5].innerText).toBe(""),o()(r[6].innerText).toBe("'' S "),o()(r[7].innerText).toBe(""),o()(r[8].innerText).toBe("° "),o()(r[9].innerText).toBe(""),o()(r[10].innerText).toBe("' "),o()(r[11].innerText).toBe(""),o()(r[12].innerText).toBe("'' W")})),it("a position with defaults",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("13° 31' 60.00'' N 028° 18' 00.00'' E")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("43° 42' 26.16'' N 010° 28' 30.05'' E")}))}))},72688:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i),l=r(38560),c=r(43614),s=r(72986),u=r.n(s);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,r,n,i,a=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(i){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function s(){var e;d(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(g(e=a.call.apply(a,[this].concat(r))),"onConfirm",(function(){e.props.onConfirm()})),e}return t=s,(r=[{key:"render",value:function(){var e=this,t=o().createElement("span",{role:"footer"},o().createElement("div",{style:{float:"left"}}),o().createElement(l.Z,{ref:"confirmButton",disabled:this.props.running,className:this.props.className,key:"confirmButton",bsStyle:"primary",bsSize:this.props.buttonSize,onClick:function(){e.onConfirm()}},this.props.running?o().createElement(u(),{spinnerName:"circle",overrideSpinnerClassName:"spinner",noFadeIn:!0}):null,this.props.confirmText),this.props.includeCloseButton?o().createElement(l.Z,{key:"cancelButton",ref:"cancelButton",bsSize:this.props.buttonSize,onClick:this.props.onClose},this.props.cancelText):o().createElement("span",null)),r=this.props.body;return o().createElement(c.Z,f({},this.props.options,{show:this.props.show,onHide:this.props.onClose}),o().createElement(c.Z.Header,{key:"dialogHeader",closeButton:!0},o().createElement(c.Z.Title,null,this.props.titleText)),o().createElement(c.Z.Body,null,r),o().createElement(c.Z.Footer,null,t))}}])&&y(t.prototype,r),s}(o().Component);h(O,"propTypes",{className:a().string,show:a().bool,options:a().object,onConfirm:a().func,onClose:a().func,closeGlyph:a().string,style:a().object,buttonSize:a().string,includeCloseButton:a().bool,body:a().oneOfType([a().string,a().element]),titleText:a().oneOfType([a().string,a().element]),confirmText:a().oneOfType([a().string,a().element]),cancelText:a().oneOfType([a().string,a().element]),running:a().bool}),h(O,"defaultProps",{onConfirm:function(){},onClose:function(){},options:{animation:!1},className:"",closeGlyph:"",style:{},includeCloseButton:!0,body:"",titleText:"Confirm Delete",confirmText:"Delete",cancelText:"Cancel"});const w=O},43614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(27418),o=r.n(n),i=r(30294),a=r(61365);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(o){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function a(){return c(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&s(t.prototype,r),a}(i.Modal);const y=o()((0,a.Z)(d),{Body:i.Modal.Body,Dialog:i.Modal.Dialog,Footer:i.Modal.Footer,Header:i.Modal.Header,Title:i.Modal.Title})},76424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),o=r.n(n),i=r(61545),a=r(32425);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,r=e.caption,n=e.infoExtra,l=e.className,s=void 0===l?"":l,p=e.description,f=e.fullText,d=e.onClick,y=void 0===d?function(){}:d,m=e.onMouseEnter,b=void 0===m?function(){}:m,g=e.onMouseLeave,v=void 0===g?function(){}:g,h=e.preview,O=e.selected,w=e.size,E=e.style,S=void 0===E?{}:E,P=e.stylePreview,j=void 0===P?{}:P,C=e.styleTools,x=void 0===C?{}:C,T=e.title,k=e.loading,I=e.dragSymbol,A=void 0===I?"+":I,F=e.tools,D=u(e,["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"]);return o().createElement("div",{className:"mapstore-side-card".concat(O?" selected":"").concat(w?" ms-"+w:"").concat(s?" ".concat(s):"").concat(f?" full-text":""),onClick:function(e){return y(c({title:T,preview:h,description:p,caption:r,tools:F},D),e)},onMouseEnter:b,onMouseLeave:v,style:S},o().createElement("div",{className:"ms-head"},D.isDraggable&&D.connectDragSource&&D.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},A))),h&&o().createElement("div",{className:"mapstore-side-preview",style:j},h),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},T&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,T)),p&&o().createElement("div",{className:"mapstore-side-card-desc"},(0,i.isObject)(p)?p:o().createElement("span",null,p)),r&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,r))),n),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:x},F),"sm"!==w&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(a.Z,{className:"mapstore-side-card-loader",size:12,hidden:!k})))))),t&&o().createElement("div",{className:"ms-body"},t))}},38064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(76424);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function s(){return p(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,r=e.items,n=e.colProps,o=e.onItemClick,i=e.size,s=t||c.Z;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(l.Row,{className:"items-list"},r.map((function(e,t){return a().createElement(l.Col,u({key:e.id||t},n),a().createElement(s,u({onClick:function(){return o(e)},size:i},e)))}))))}}])&&f(t.prototype,r),s}(a().Component);b(g,"propTypes",{size:o().string,onItemClick:o().func,colProps:o().object,items:o().array,cardComponent:o().oneOfType([o().string,o().func]),className:o().string}),b(g,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]});const v=g},49902:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(20),c=r(30294),s=r(86638),u=r(50966),p=r(48384);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(p,e);var t,r,n,o,i=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return g(this,e)});function p(){var e;y(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return O(v(e=i.call.apply(i,[this].concat(r))),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return a().createElement(r,null,t)}var n=a().createElement(c.Tooltip,{id:e.props.tooltip.id},e.props.tooltip.message);return a().createElement(u.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),O(v(e),"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return a().createElement("div",{className:"autocomplete-toolbar"},!t&&a().createElement(c.Glyphicon,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadPrevPage()}}),!r&&a().createElement(c.Glyphicon,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadNextPage()}}))})),O(v(e),"renderField",(function(){var t,r={emptyList:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},n=[];e.props.data&&e.props.data.length>0&&(n=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&n.length>0&&n.push((O(t={},e.props.textField,""),O(t,e.props.valueField,""),O(t,"disabled",!0),O(t,"pagination",e.renderPagination()),t));var o=e.props.loading?[]:n,i=e.props.itemComponent,c=a().createElement(l.Combobox,{placeholder:e.props.placeholder,dropUp:e.props.dropUp,busy:e.props.busy,data:o,disabled:e.props.disabled,itemComponent:function(t){return a().createElement(i,d({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||r,open:e.props.open,filter:e.props.filter,onChange:function(t){return e.props.onChange(t)},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){return e.props.onSelect(t)},onToggle:function(t){return e.props.onToggle(t)},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(c):c})),e}return t=p,(r=[{key:"render",value:function(){var e=this.props,t=e.selectedValue,r=e.disabled,n=e.onReset,o=e.label,i=e.clearable,l=o?a().createElement("label",null,o):a().createElement("span",null);return a().createElement("div",{className:"autocompleteField"},l,i?a().createElement("div",{className:"rw-combo-clearable ".concat(r?"disabled":"")},this.renderField(),a().createElement("span",{className:"rw-combo-clear ".concat(t?"":"hidden"),onClick:n},"x")):this.renderField())}}])&&m(t.prototype,r),p}(a().Component);O(w,"propTypes",{busy:o().bool,data:o().array,disabled:o().bool,dropUp:o().bool,itemComponent:o().oneOfType([o().object,o().func]),label:o().string,loading:o().bool,filter:o().oneOfType([o().string,o().bool]),messages:o().object,onChange:o().func,onFocus:o().func,onSelect:o().func,onToggle:o().func,open:o().bool,pagination:o().object,nextPageIcon:o().string,prevPageIcon:o().string,selectedValue:o().string,textField:o().string,tooltip:o().object,valueField:o().string,placeholder:o().string,stopPropagation:o().bool,clearable:o().bool,onReset:o().func}),O(w,"contextTypes",{messages:o().object}),O(w,"defaultProps",{stopPropagation:!1,dropUp:!1,itemComponent:p.Z,loading:!1,label:null,filter:"",pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onSelect:function(){},onReset:function(){},textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value",clearable:!1});const E=w},73849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(18093),o=r(28878),i=r(89255);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=(0,n.mapPropsStreamWithConfig)(o.Z);const u=(0,n.compose)((0,n.defaultProps)({dataStreamFactory:function(){return i.Observable.of({})}}),s((function(e){return e.take(1).switchMap((function(t){return t.dataStreamFactory(e.startWith(t),t)})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(l({},t),e)}))})))},43146:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(18093),o=r(61545),i=r(30381),a=r.n(i),l=r(55237);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dateTypeProp,r=void 0===t?"type":t,i=e.dateProp,s=void 0===i?"date":i,u=e.setDateProp,p=void 0===u?"onSetDate":u;return(0,n.compose)((0,n.withPropsOnChange)([s],(function(e){var t,n=e[s],i=e[r],u=e.useUTCOffset,p=void 0===u||u,f=n,d="1970-01-01",y="00:00:00";!(0,o.isDate)(n)&&(0,o.isString)(n)&&("time"===i&&(f=new Date("".concat(d,"T").concat(n))),"date"===i&&(-1!==n.indexOf("Z")&&(f=n.substr(0,n.length-1)),f=new Date("".concat(f,"T").concat(y,"Z"))),"date-time"===i&&(f=new Date(n)));var m=f;if(f){switch(i){case"time":y=(0,l.kN)(f);break;case"date":d=(0,l.oD)(f);break;default:y=(0,l.kN)(f),d=(0,l.oD)(f)}(m=new Date("".concat(d,"T").concat(y,"Z"))).setUTCMilliseconds(f.getUTCMilliseconds());var b=p?(0,l.$4)(m):0;m=new Date(m.getTime()+b)}return c(t={},s,m),c(t,"defaultCurrentDate","date-time"===i?a()().startOf("day").toDate():void 0),t})),(0,n.withHandlers)(c({},p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e[p],n=e[r],o=e.useUTCOffset,i=void 0===o||o;return function(e,r){if(e){var o=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())),a=i?(0,l.$4)(e):0,c=new Date(o.getTime()-a);switch(n){case"time":c="".concat((0,l.kN)(c),"Z");break;case"date":c="".concat((0,l.oD)(c),"Z")}t(c,r)}else t(null)}}))))}},95246:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(61545);function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={short:"number",float:"number",double:"number",long:"number",decimal:"number",int:"number"};function u(e){var t=e.Pos;e.registerHelper("hint","geocss",(function(r){var i=r.getCursor(),a=r.getTokenAt(i),c=r.getLineTokens(i.line),u=c&&(0,n.head)(c.filter((function(e){var t=e.type,r=e.start;return"property"===t&&r<a.start})).map((function(e){return e.string}))),p=e.innerMode(r.getMode(),a.state);if("geocss"!==p.mode.name)return null;var f=a.start,d=i.ch,y=a.string.slice(0,d-f);/[^\w$_-]/.test(y)&&(y="",f=d=i.ch);var m=e.resolveMode("text/geocss")||{},b=m.propertyKeywords,g=m.pseudoProperties,v=m.envKeywords,h=(e.getMode({},"text/geocss")||{}).hintProperties,O={},w=!1,E=p.state.state;"pseudo"===E||"variable-3"===a.type?O=l({},g):"prop"===E?(w=!0,O=b&&b[u]&&b[u].values&&l({},b[u].values)||{}):"variable-2"===a.type?O=l({},v):"filter"===a.type?(w=!0,O=l({},h)):"block"!==E&&"maybeprop"!==E||(O=l({},b));var S=Object.keys(O).reduce((function(e,t){var r=!y||0===t.lastIndexOf(y,0);return[].concat(o(e),o(r&&[t]||[]))}),[]);return(S=0===S.length&&w?Object.keys(O).reduce((function(e,t){return[].concat(o(e),[t])}),[]):o(S)).length>0?{list:S.map((function(e){return{text:e,displayText:e,render:function(e,t,r){var n,o,i=document.createElement("span"),a=(o=(n=O[r.displayText]||{}).localPart,("gml"===n.prefix?"geometry":s[o])||o||"");i.innerHTML=a&&'{<span class="cm-desc">'.concat(a,"</span>} ")||"";var l=document.createElement("span");l.innerText=r.displayText,e.appendChild(i),e.appendChild(l)}}})),from:t(i.line,f),to:t(i.line,d)}:null}))}},30084:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(61545);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const c=function(e){e.defineMode("geocss",(function(t){var r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.indentUnit,c=i.propertyKeywords&&i||e.resolveMode("text/geocss"),s=c.propertyKeywords,u=void 0===s?{}:s,p=c.colorKeywords,f=void 0===p?{}:p,d=c.valueKeywords,y=void 0===d?{}:d,m=c.logicKeywords,b=void 0===m?{}:m,g=c.allowNested,v={},h=function(e,t){return r=t,e},O=function(e){return function(t,r){for(var n=!1,o=t.next();o;){if(o===e&&!n){")"===e&&t.backUp(1);break}n=!n&&"\\"===o,o=t.next()}return(o===e||!n&&")"!==e)&&(r.tokenize=null),h("string","string")}},w=function(e,t){for(var r=!1,n=e.next();n;){if(r&&"/"===n){t.tokenize=null;break}r="*"===n,n=e.next()}return["comment","comment"]},E=function(e,t){var r=e.next();if("@"===r)return e.eat("{")?[null,"interpolation"]:e.match(/^(sd|scale)\b/)?["filter",null]:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]);if("/"===r)return e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"];if('"'===r||"'"===r)return t.tokenize=O(r),t.tokenize(e,t);if("#"===r)return e.eatWhile(/[\w\\\-]/),h("atom","hash");if(/\d/.test(r)||"."===r&&e.eat(/\d/))return e.eatWhile(/[\w.%]/),h("number","unit");if("-"===r){if(/[\d.]/.test(e.peek()))return e.eatWhile(/[\w.%]/),h("number","unit");if(e.match(/^-[\w\\\-]+/))return e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?h("variable-2","variable-definition"):h("variable-2","variable");if(e.match(/^\w+-/))return h("meta","meta")}else{if(/[,+>*\/]/.test(r))return h(null,"select-op");if("."===r&&e.match(/^-?[_a-z][_a-z0-9-]*/i))return h("qualifier","qualifier");if(/[:;{}\[\]\(\)]/.test(r))return h(null,r);if(/[\w\\\-]/.test(r))return e.eatWhile(/[\w\\\-]/),h("property","word")}return h(null,null)};function S(e,t,r){this.type=e,this.indent=t,this.prev=r}var P=function(e,t,r,n){return e.context=new S(r,t.indentation()+(!1===n?0:a),e.context),r},j=function(e){return e.context.prev&&(e.context=e.context.prev),e.context.type},C=function(e,t,r){return v[r.context.type](e,t,r)},x=function(e,t,r,n){for(var o=n||1;o>0;o--)r.context=r.context.prev;return C(e,t,r)},T=function(e){var t=e.current().toLowerCase();o=y.hasOwnProperty(t)?"atom":f.hasOwnProperty(t)?"keyword":"variable"};return v.top=function(e,t,r){if("{"===e)return P(r,t,"block");if("}"===e&&r.context.prev)return j(r);if("hash"===e)o="builtin";else if("word"===e)o="tag";else{if("variable-definition"===e)return"maybeprop";if("interpolation"===e)return P(r,t,"interpolation");if(":"===e)return"pseudo";if(g&&"("===e)return P(r,t,"parens")}return r.context.type},v.block=function(e,t,r){if("word"===e){var i=t.current().toLowerCase();return u.hasOwnProperty(i)?(o="property","maybeprop"):b.hasOwnProperty((0,n.trim)(i))?(o="logic","maybeprop"):(0,n.startsWith)((0,n.trim)(t.string),"[")?(o="filter","maybeprop"):(o+=" error","maybeprop")}return"meta"===e?"block":g||"hash"!==e&&"qualifier"!==e?v.top(e,t,r):(o="error","block")},v.maybeprop=function(e,t,r){return":"===e?P(r,t,"prop"):C(e,t,r)},v.prop=function(e,t,r){if(";"===e)return j(r);if("{"===e&&g)return P(r,t,"propBlock");if("}"===e||"{"===e)return x(e,t,r);if("("===e)return P(r,t,"parens");if("hash"!==e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"===e)T(t);else if("interpolation"===e)return P(r,t,"interpolation")}else o+=" error";return"prop"},v.propBlock=function(e,t,r){return"}"===e?j(r):"word"===e?(o="property","maybeprop"):r.context.type},v.parens=function(e,t,r){return"{"===e||"}"===e?x(e,t,r):")"===e?j(r):"("===e?P(r,t,"parens"):"interpolation"===e?P(r,t,"interpolation"):("word"===e&&T(t),"parens")},v.pseudo=function(e,t,n){return"word"===e?(o="variable-3",n.context.type):C(r,t,n)},v.at=function(e,t,r){return";"===e?j(r):"{"===e||"}"===e?x(e,t,r):("word"===e?o="tag":"hash"===e&&(o="builtin"),"at")},v.interpolation=function(e,t,r){return"}"===e?j(r):"{"===e||";"===e?x(e,t,r):("word"===e?o="variable":"variable"!==e&&"("!==e&&")"!==e&&(o="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",stateArg:null,context:new S("block",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||E)(e,t);return n&&"object"===l(n)&&(r=n[1],n=n[0]),o=n,t.state=v[t.state](r,e,t),o},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),o=r.indent;return"prop"!==r.type||"}"!==n&&")"!==n||(r=r.prev),r.prev&&("}"!==n||"block"!==r.type&&"top"!==r.type&&"interpolation"!==r.type?(")"===n&&"parens"===r.type||"{"===n&&("at"===r.type||"atBlock"===r.type))&&(o=Math.max(0,r.indent-a),r=r.prev):o=(r=r.prev).indent),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}}));var t={colorKeywords:["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],valueKeywords:["round"],pseudoProperties:["mark","shield","stroke","fill","symbol","nth-mark","nth-shield","nth-stroke","nth-fill","nth-symbol"],logicKeywords:["and","or"]};e.defineMIME("text/geocss",i(i({},Object.keys(t).reduce((function(e,r){return i(i({},e),{},a({},r,t[r].reduce((function(e,t){return i(i({},e),{},a({},t,!0))}),{})))}),{})),{},{propertyKeywords:{mark:{values:{"symbol(circle)":!0}},"mark-composite":!0,"mark-mime":!0,"mark-geometry":!0,"mark-size":!0,"mark-rotation":!0,"mark-label-obstacle":!0,"mark-anchor":!0,"mark-offset":!0,"z-index":!0,stroke:!0,"stroke-composite":!0,"stroke-geometry":!0,"stroke-offset":!0,"stroke-mime":!0,"stroke-opacity":!0,"stroke-width":!0,"stroke-size":!0,"stroke-rotation":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-repeat":!0,"stroke-label-obstacle":!0,fill:!0,"fill-composite":!0,"fill-geometry":!0,"fill-mime":!0,"fill-opacity":!0,"fill-size":!0,"fill-rotation":!0,"fill-label-obstacle":!0,"graphic-margin":!0,random:!0,"random-seed":!0,"random-rotation":!0,"random-symbol-count":!0,"random-tile-size":!0,"fill-random":!0,"fill-random-seed":!0,"fill-random-rotation":!0,"fill-random-symbol-count":!0,"fill-random-tile-size":!0,label:!0,"label-geometry":!0,"label-anchor":!0,"label-offset":!0,"label-rotation":!0,"label-z-index":!0,shield:!0,"shield-mime":!0,"font-family":!0,"font-fill":!0,"font-style":!0,"font-weight":!0,"font-size":!0,"halo-radius":!0,"halo-color":!0,"halo-opacity":!0,"label-padding":!0,"label-group":!0,"label-max-displacement":!0,"label-min-group-distance":!0,"label-repeat":!0,"label-all-group":!0,"label-remove-overlaps":!0,"label-allow-overruns":!0,"label-follow-line":!0,"label-max-angle-delta":!0,"label-auto-wrap":!0,"label-force-ltr":!0,"label-conflict-resolution":!0,"label-fit-goodness":!0,"label-priority":!0,"shield-resize":!0,"shield-margin":!0,"label-underline-text":!0,"label-strikethrough-text":!0,"label-char-spacing":!0,"label-word-spacing":!0,"raster-channels":!0,"raster-composite":!0,"raster-geometry":!0,"raster-opacity":!0,"raster-contrast-enhancement":!0,"raster-contrast-enhancement-algorithm":!0,"raster-contrast-enhancement-min":!0,"raster-contrast-enhancement-max":!0,"raster-gamma":!0,"raster-z-index":!0,"raster-color-map":!0,"raster-color-map-type":!0,composite:!0,"composite-base":!0,geometry:!0,"sort-by":!0,"sort-by-group":!0,transform:!0,size:!0,rotation:!0},envKeywords:{sd:{localPart:"env"},scale:{localPart:"env"}},allowNested:!0,name:"geocss"}))}},12425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(18093).withState)("confirmDelete","toggleDeleteConfirm",!1)},30881:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(61545),o=r(18093),i=r(90183),a=r(47805),l=r(89291),c=r(2245),s=r.n(c),u=r(89737),p=r.n(u),f=r(70956);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e,t){var r=(0,f.Z5)(e,t),o=(0,n.find)(Object.keys(r||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()}));return r&&o&&r[o]},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerFilter;return t};const O=(0,o.compose)((0,o.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,n=e.dependencies,o=void 0===n?{}:n,i=e.layer,a=e.quickFilters,l=e.options,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return t!==c.mapSync||o.viewport!==(c.dependencies&&c.dependencies.viewport)||o.quickFilters!==(c.dependencies&&c.dependencies.quickFilters)||o.options!==(c.dependencies&&c.dependencies.options)||r!==c.geomProp||s!==c.filter||l!==c.options||a!==c.quickFilters||v(i,o)!==v(c.layer,c.dependencies)||h(i)!==h(c.layer)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,o=void 0===r?"the_geom":r,c=e.dependencies,u=void 0===c?{}:c,d=e.filter,g=e.layer,h=e.quickFilters,O=e.options,w=u.viewport,E=s()({gmlVersion:"3.1.1"}),S=p()(E),P=E.filter,j=E.property,C=E.and,x=g||{},T=x.layerFilter,k={},I={},A=(0,f.r$)(d,h,O);if(!t)return{filter:!(0,n.isEmpty)(A)||T?P(C.apply(void 0,b(T?(0,a.toOGCFilterParts)(T,"1.1.0","ogc"):[]).concat(b(A?(0,a.toOGCFilterParts)(A,"1.1.0","ogc"):[])))):void 0};if(g&&u&&u.quickFilters&&u.layer&&g.name===u.layer.name&&(A=y(y({},A),(0,f.r$)(A,u.quickFilters,u.options))),g&&u&&u.filter&&u.layer&&g.name===u.layer.name&&(A=y(y({},A),(0,a.composeAttributeFilters)([A,u.filter]))),u.viewport){var F=Object.keys(w.bounds).reduce((function(e,t){return y(y({},e),{},m({},t,parseFloat(w.bounds[t])))}),{});k=(0,i.getViewportGeometry)(F,w.crs);var D=v(g,u);return I=D?[S((0,l.read)(D))]:[],{filter:P(C.apply(void 0,b(I).concat(b(T?(0,a.toOGCFilterParts)(T,"1.1.0","ogc"):[]),b(A?(0,a.toOGCFilterParts)(A,"1.1.0","ogc"):[]),[j(o).intersects(k)])))}}return{filter:P(C.apply(void 0,b(T?(0,a.toOGCFilterParts)(T,"1.1.0","ogc"):[]).concat(b(A?(0,a.toOGCFilterParts)(A,"1.1.0","ogc"):[]))))}})))},8488:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(18093),o=r(70956),i=r(61545);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=(0,n.compose)((0,n.withPropsOnChange)(["dependencies","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=void 0===t?{}:t,n=e.options,a=e.layer,c=void 0===a?{}:a,s=(0,o.Z5)(c,r),u=(0,i.find)(Object.keys(s||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"viewparams"===e.toLowerCase()})),p=s&&u&&s[u];return{options:p?l(l({},n),{},{viewParams:p}):n}})))},73339:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(18093),o=r(61545);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function e(t,r,n){return t?Object.keys(t).reduce((function(i,c){return"dependenciesMap"===c&&r[t[c]]&&r[t.mapSync]&&r[t[c]][c]&&-1===r[t[c]][c].indexOf(n)?a(a({},i),(0,o.pick)(e(r[t[c]],r,n),["options","layer","quickFilters","filter","dependenciesMap"])):a(a({},i),{},l({},c,r[t[c]]))}),{}):r};const s=(0,n.withProps)((function(e){var t=e.dependenciesMap,r=e.dependencies,n=e.id;return{dependencies:t?c(t,r,n):r,dependenciesMap:t}}))},39837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),o=r.n(n),i=r(5346);const a=(0,r(82030).Z)((function(e){var t=e.data,r=void 0===t?[]:t;return!r||0===r.length}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.iconFit;return{iconFit:r,tooltip:t?o().createElement(i.Z,{msgId:"widgets.errors.nodatainviewport"}):o().createElement(i.Z,{msgId:"widgets.errors.nodata"})}}))},46173:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),o=r.n(n),i=r(82030),a=r(5346);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.Z)((function(e){var t=e.layers;return 0===(void 0===t?[]:t).length}),(l(e={},t?"tooltip":"title",o().createElement(a.Z,{msgId:"widgets.errors.noLegend"})),l(e,"description",!t&&o().createElement(a.Z,{msgId:"widgets.errors.noLegendDescription"})),e))}},42415:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),o=r.n(n),i=r(5346),a=r(82030),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"ECONNABORTED"===e.code?o().createElement(i.Z,{msgId:"widgets.errors.timeoutExpired"}):e.message?o().createElement(i.Z,{msgId:"widgets.errors.genericErrorWithMessage",msgParams:{message:e.message}}):o().createElement(i.Z,{msgId:"widgets.errors.genericError"})};const c=(0,a.Z)((function(e){return e.error}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,r=e.iconFit;return{glyph:"warning-sign",iconFit:r,tooltip:l(t)}}))},13314:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(18093),o=r(61545),i=r(12425),a=r(39860),l=r(52259);const c=(0,n.compose)((0,n.withProps)((function(e){var t=e.dependencies,r=void 0===t?{}:t,n=e.dependenciesMap;return{layers:r[(void 0===n?{}:n).layers]||r.layers||[],scales:(0,l.getScales)(r.projection||r.viewport&&r.viewport.crs||"EPSG:3857",(0,o.get)(r,"mapOptions.view.DPI")),currentZoomLvl:r.zoom}})),(0,n.withProps)((function(e){var t=e.layers;return{layers:(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==e.group&&!1!==e.visibility&&"vector"!==e.type}))}})),i.Z,(0,a.tR)(),(0,a.E6)(),(0,a.um)())},87017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(61545),o=r(18093),i=r(89255),a=r(65633),l=r(24262),c=r(73849);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,o=e.GroupByAttributes,i=void 0===o?[]:o,a=e.AggregationAttribute,l=e.AggregationFunctions;return r.map((function(e){return u(u({},i.reduce((function(t,r,o){var i=e[o];if((0,n.isObject)(i)){if((0,n.isNil)(i.time))throw new Error("Unknown response format from server");i=new Date(i.time).toISOString()}return u(u({},t),{},p({},r,i))}),{})),{},p({},"".concat(l[0],"(").concat(a,")"),e[e.length-1]))})).sort((function(e,t){var r=parseFloat(e[i]),n=parseFloat(t[i]);return isNaN(r)||isNaN(n)?e<t?-1:e>t?1:0:r-n}))},d=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,l.getWpsUrl)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute&&n.groupByAttributes})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=e.filter,c=e.onLoad,s=void 0===c?function(){}:c,p=e.onLoadError,d=void 0===p?function(){}:p;return(0,a.Z)((0,l.getWpsUrl)(r),u(u({featureType:r.name},n),{},{filter:o}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:f(e),series:[{dataKey:"".concat(e.AggregationFunctions[0],"(").concat(e.AggregationAttribute,")")}],xAxis:{dataKey:e.GroupByAttributes[0]}}})).do(s).catch((function(e){return i.Observable.of({loading:!1,error:e,data:[]}).do(d)})).startWith({loading:!0})}))};const y=(0,o.compose)((0,o.withProps)((function(){return{dataStreamFactory:d}})),c.Z);var m=r(86850);function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.features,r=arguments.length>1?arguments[1]:void 0,o=r.groupByAttributes;return(0,n.sortBy)(t.map((function(e){return e.properties})),o)},h=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,l.getSearchUrl)(r)&&n&&n.aggregationAttribute&&n.groupByAttributes})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,o=e.options,a=e.filter,l=e.onLoad,c=void 0===l?function(){}:l,s=e.onLoadError,u=void 0===s?function(){}:s;return(0,m.Mc)(r,a,{propertyName:[].concat(b((0,n.castArray)(o.aggregationAttribute)),b((0,n.castArray)(o.groupByAttributes)))}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:v(e,o),series:[{dataKey:o.aggregationAttribute}],xAxis:{dataKey:o.groupByAttributes}}})).do(c).catch((function(e){return i.Observable.of({loading:!1,error:e,data:[]}).do(u)})).startWith({loading:!0})}))};const O=(0,o.compose)((0,o.withProps)((function(){return{dataStreamFactory:h}})),c.Z),w=(0,o.branch)((function(e){var t=e.options,r=void 0===t?{}:t;return!r.aggregateFunction||"None"===r.aggregateFunction}),O,y)},39860:(e,t,r)=>{"use strict";r.d(t,{E6:()=>A,tR:()=>k,AV:()=>I,G5:()=>T,um:()=>F});var n=r(18093);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,a=void 0===o?[]:o,l=e.toggleMaximize,c=void 0===l?function(){}:l,s=e.dataGrid,u=void 0===s?{}:s,p=e.toolsOptions;return{widgetTools:(void 0===p?{}:p).showMaximize?[].concat((t=a,function(e){if(Array.isArray(e))return i(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:n.widget?"resize-small":"resize-full",target:"icons",tooltipId:"widgets.widget.menu.".concat(n.widget?"minimize":"maximize"),tooltipPosition:"right",visible:!u.static,onClick:function(){return c()}}]):a}})));function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=r(67294),f=r.n(p),d=r(80717),y=function(e){return"icons"===e.target},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(y).length>0};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=r(30294),v=r(5346),h=r(15135);function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.target,r=e.visible;return(void 0===r||r)&&"menu"===t},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(E).length>0},P=(0,h.Z)(g.MenuItem);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){return"tools"===e.target},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(C).length>0},T=function(){return(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,l=void 0===a?{}:a,c=e.canEdit,u=e.updateProperty,p=void 0===u?function(){}:u,f=e.hide,d=void 0!==f&&f;return{widgetTools:l.showHide?[].concat((t=i,function(e){if(Array.isArray(e))return s(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"lock",target:"menu",active:d,textId:d?"widgets.widget.menu.unhide":"widgets.widget.menu.hide",tooltipId:d?"widgets.widget.menu.unhideDescription":"widgets.widget.menu.hideDescription",visible:!n.widget&&c,onClick:function(){return p("hide",!d)}}]):i}})))},k=function(){return(0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.dataGrid,i=void 0===o?{}:o,a=e.canEdit,c=e.onEdit,s=void 0===c?function(){}:c,u=e.toggleDeleteConfirm,p=void 0===u?function(){}:u;return{widgetTools:a?[].concat((t=n,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pencil",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.edit",onClick:function(){return s()}},{glyph:"trash",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.delete",onClick:function(){return p(!0)}}]):n}}))},I=function(){return(0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.data,i=e.title,a=e.exportCSV,l=void 0===a?function(){}:a;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"download",glyphClassName:"exportCSV",target:"menu",textId:"widgets.widget.menu.downloadData",disabled:!o||!o.length,onClick:function(){return l({data:o,title:i})}}])}}))},A=function(){return(0,n.compose)((0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,l=void 0===a?{}:a,c=e.updateProperty,s=void 0===c?function(){}:c,p=e.dataGrid,f=void 0===p?{}:p;return{widgetTools:l.showPin?[].concat((t=i,function(e){if(Array.isArray(e))return u(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pushpin",bsStyle:f.static&&"primary",glyphClassName:f.static?"active":void 0,tooltipId:f.static?"widgets.widget.menu.unpin":"widgets.widget.menu.pin",target:"icons",visible:!n.widget,onClick:function(){return s("dataGrid.static",!f.static)}}]):i}}))),(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,i=e.widgetTools,a=void 0===i?[]:i,l=e.dataGrid,c=void 0===l?{}:l,s=e.toggleCollapse,u=void 0===s?function(){}:s,p=e.toolsOptions;return{widgetTools:(void 0===p?{}:p).showCollapse?[].concat((t=a,function(e){if(Array.isArray(e))return o(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"minus",target:"icons",tooltipId:"widgets.widget.menu.collapse",visible:!n.widget&&!c.static,onClick:function(){return u()}}]):a}}))),a,(0,n.compose)((0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.title,i=e.description,a=e.widgetType;return{widgetTools:i&&"text"!==a?[].concat((t=n,function(e){if(Array.isArray(e))return b(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"question-sign",popover:{title:o,trigger:!0,text:i},target:"icons"}]):n}}))))},F=function(){return(0,n.compose)((0,n.compose)((0,n.withPropsOnChange)(["topLeftItems","widgetTools"],(function(e){var t,r=e.topLeftItems,n=void 0===r?[]:r,o=e.widgetTools;return{topLeftItems:x(o)?[].concat((t=n,function(e){if(Array.isArray(e))return j(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[f().createElement(d.Z,{btnGroupProps:{style:{position:"absolute",left:14}},btnDefaultProps:{className:"no-border",bsSize:"small",bsStyle:"link",style:{paddingLeft:4,paddingRight:4}},buttons:o.filter(C)})]):n}}))),(0,n.compose)((0,n.withPropsOnChange)(["icons","widgetTools"],(function(e){var t=e.icons,r=void 0===t?[]:t,n=e.widgetTools;return{icons:m(n)?f().createElement(d.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs",bsStyle:"link"},buttons:n.filter(y)}):r}}))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,r=void 0===t?"widget-menu":t,o=e.menuIcon,i=void 0===o?"option-vertical":o;return(0,n.withProps)((function(e){var t=e.widgetTools,n=e.topRightItems,o=void 0===n?[]:n;return{topRightItems:S(t)?[].concat(O(o),[f().createElement(g.ButtonToolbar,null,f().createElement(g.DropdownButton,{pullRight:!0,bsStyle:"default",className:r,title:f().createElement(g.Glyphicon,{glyph:i}),noCaret:!0,id:"dropdown-no-caret"},t.filter(E).map((function(e,t){var r=e.onClick,n=void 0===r?function(){}:r,o=e.disabled,i=void 0!==o&&o,a=e.glyph,l=e.glyphClassName,c=e.text,s=e.textId,u=e.tooltipId,p=e.active;return f().createElement(P,{active:p,tooltipId:u,onSelect:n,disabled:i,eventKey:t},f().createElement(g.Glyphicon,{className:l,glyph:a}),s?f().createElement(v.Z,{msgId:s}):c)}))))]):o}}))}())}},70956:(e,t,r)=>{"use strict";r.d(t,{Z5:()=>s,r$:()=>u});var n=r(61545),o=r(96958),i=r(47805);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e,t){return e&&e.id&&(0,n.get)((0,n.find)(t.layers||[],{id:e.id}),"params",{})},u=function(e,t,r){var a=t&&r&&Object.keys(t).filter((function(e){return(0,n.find)(r.propertyName,(function(t){return t===e}))})).reduce((function(e,r){return l(l({},e),{},c({},r,t[r]))}),{}),s=(0,n.reduce)(a,(function(e,t,r){return(0,o.dJ)(l({attribute:r},t),e)}),{});if(!(0,n.isEmpty)(e)||!(0,n.isEmpty)(s)){var u=(0,i.composeAttributeFilters)([e,s],void 0,null==e?void 0:e.spatialFieldOperator);return l(l({},e),u)}return{}}},25382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(89255),o=r(86850),i=r(24262);const a=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.layer;return(0,i.getSearchUrl)(t)===(0,i.getSearchUrl)(n)&&t.loadingError===n.loadingError})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return(0,o.v$)({layer:t}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return n.Observable.of({loading:!1,error:e})}))}))}},39589:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(18093),o=r(65633),i=r(73849),a=r(89255),l=r(24262);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,n=e.GroupByAttributes,o=void 0===n?[]:n,i=e.AggregationAttribute,a=e.AggregationFunctions;return r.map((function(e){return s(s({},o.reduce((function(t,r,n){return s(s({},t),{},u({},r,e[n]))}),{})),{},u({},"".concat(a[0],"(").concat(i,")"),e[e.length-1]))}))},f=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,l.getWpsUrl)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,i=e.filter,c=e.onLoad,u=void 0===c?function(){}:c,f=e.onLoadError,d=void 0===f?function(){}:f;return(0,o.Z)((0,l.getWpsUrl)(r),s(s({featureType:r.name},n),{},{filter:i}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:p(e),series:[{dataKey:"".concat(e.AggregationFunctions[0],"(").concat(e.AggregationAttribute,")")}]}})).do(u).catch((function(e){return a.Observable.of({loading:!1,error:e,data:[]}).do(d)})).startWith({loading:!0})}))};const d=(0,n.compose)((0,n.withProps)((function(){return{dataStreamFactory:f}})),i.Z)},80844:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(73014),o=r(42415),i=r(39837),a=r(47361),l=r(18093),c=r(61545),s=r(90253),u=r(67294),p=r.n(u);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var g=(0,n.Z)(),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,r=void 0===t?"":t,n=e.uom,o=void 0===n?"":n,i=b(e,["value","uom"]);return p().createElement(s.iF,m({mode:"single",forceSingleModeWidth:!1,max:500,throttle:20},i),p().createElement(a.Z,{value:r}),p().createElement("span",{style:{fontSize:"75%"}},o))};const h=(0,l.compose)(g,o.Z,i.Z)((function(e){var t=e.series,r=void 0===t?[]:t,n=e.data,o=void 0===n?[]:n,i=e.options,a=void 0===i?{}:i,l=e.style,s=void 0===l?{width:"100%",height:"100%",transform:"translate(-50%, -50%)",position:"absolute",display:"inline",padding:"1%",top:"50%",left:"50%"}:l;return p().createElement("div",{className:"counter-widget-view"},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataKey,r=arguments.length>1?arguments[1]:void 0;return p().createElement(v,{key:t,uom:(0,c.get)(a,"seriesOptions[".concat(r,"].uom")),value:o[0][t],style:d({textAlign:"center"},s)})})))}))},43716:(e,t,r)=>{"use strict";r.d(t,{Z:()=>st});var n=r(67294),o=r.n(n),i=r(18093),a=r(12425),l=r(39860);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const s=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,r=e.showTable;return function(){return t(!r)}}}),(0,i.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),(0,l.tR)(),(0,l.AV)(),(0,l.E6)(),(0,i.branch)((function(e){return!e.showTable}),(0,l.um)())),u=(0,i.compose)(a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)());var p=r(61545);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:d(d({},r),{},{onAddFilter:function(e){return o("quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,r,n,i,a){return o('options.columnSettings["'.concat((0,p.get)(a.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:d(d({},r),{},{onGridSort:function(e,t){return o("sortOptions",{sortBy:e,sortOrder:t})}})}})));var b=r(13314);const g=(0,i.compose)(a.Z,(0,l.tR)(),(0,l.G5)(),(0,l.E6)(),(0,l.um)()),v=(0,i.compose)(a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)());var h=r(87017),O=r(39589),w=r(78889),E=r(73849),S=r(25382),P=r(89255),j=r(86850);const C=function(e){return e.switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=void 0===n?{}:n,i=e.filter,a=e.onLoad,l=void 0===a?function(){}:a,c=e.onLoadError,s=void 0===c?function(){}:c;return(0,j.Mc)(r,i,{timeout:15e3,params:{propertyName:o.propertyName,viewParams:o.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return l({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return P.Observable.of({loading:!1,error:e,data:[]}).do(s)}))}))};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(89255);const I=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter,l=e.sortOptions;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(l,t.sortOptions)})).map((function(e){return T(T({},e),{},{features:[],pages:[],pagination:{}})}))};var A=r(96958);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const N=function(e){return function(t){return t.switchMap((function(t){var r=t.layer,n=void 0===r?{}:r,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,l=void 0===a?5:a,c=t.filter,s=t.options,u=void 0===s?{}:s,p=t.sortOptions,f=t.pages,d=t.features,y=void 0===d?[]:d,m=t.onLoad,b=void 0===m?function(){}:m,g=t.onLoadError,v=void 0===g?function(){}:g;return e.switchMap((function(e,t){var r=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),(0,j.Mc)(n,c,D(D({},(0,A.S9)(r,f,i)),{},{sortOptions:p,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:u.propertyName,viewParams:u.viewParams})).do((function(e){return b(D(D({},(0,A.f1)(e,r,{pages:f,features:y},D(D({},(0,A.S9)(r,f,i)),{},{size:i,maxStoredPages:l}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return P.Observable.of({loading:!1,error:e}).do(v)})).startWith({loading:!0})}))}))}};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Z=function(e){var t=(0,i.createEventHandler)(),r=t.handler,n=t.stream;return(0,S.Z)(e).combineLatest(function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return I(e).let(r?N(t.withLatestFrom(e.map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}})),(function(e,t){return L({pagesRange:e},t)}))):C).startWith({})}(e,n.startWith({startPage:0,endPage:1})),(function(e,t){return L(L(L({},e),t),{},{pageEvents:{moreFeatures:r,onPageChange:function(){}}})})).startWith({loading:!0})};const G=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,r=e.features,n=e.pagination;return{pages:t,features:r,pagination:n,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,r=void 0===t?function(){}:t,n=e.onLoad,o=void 0===n?function(){}:n;return function(){r.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)((function(){return{dataStreamFactory:Z}})),E.Z,(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:(0,p.merge)(n?(0,w.getFeatureTypeProperties)(n).filter((function(e){return!(0,p.includes)(r.propertyName||[],e.name)})).reduce((function(e,t){return L(L({},e),{},M({},t.name,{hide:!0}))}),{}):{},r.columnSettings||{},i)}})));var B=r(30881),z=r(8488),U=r(73339),W=r(5055),V=r.n(W),q=r(70956),H=r(99767),$=r(27835),Y=function(e){var t=e.wfsGetFeature;return(0,$.Uh)("gs:Bounds",[(0,H.qP)("features",(0,H.fA)("text/xml","http://geoserver/wfs","POST",t))],(0,H.DK)((0,H.En)("bounds","application/json")))};var K=r(47805),X=r(24262),Q=r(61868),J=r(52259);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ne=(0,i.compose)((0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies;return t&&(!(0,p.isEmpty)(r.quickFilters)||!(0,p.isEmpty)(r.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,J.createRegisterHooks)()}})),(0,i.mapPropsStream)((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,p.isEqual)(e.dependencies.quickFilters,t.dependencies.quickFilters)&&(0,p.isEqual)(e.dependencies.filter,t.dependencies.filter)&&(0,p.isEqual)(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=e.hookRegister;if(!t||(0,p.isEmpty)(n.layer))return P.Observable.of({loading:!1});var a={};n.quickFilters&&(a=te(te({},a),(0,q.r$)(o,n.quickFilters,n.options))),n.filter&&(a=te(te({},a),(0,K.composeAttributeFilters)([a,n.filter])));var l=n&&n.layer&&n.layer.name;if(!(0,p.isEmpty)(a)){a=te(te({},a),{},{options:te(te({},a.options||{}),{},{noSchemaLocation:!0})});var c=(0,K.toOGCFilter)(l,a,"1.1.0");return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,$.mG)(e,Y(t),{},r)}((0,X.getWpsUrl)(n.layer),{wfsGetFeature:c}).switchMap((function(e){var t,r,n;if(V().parseString(e,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],r=t["ows:LowerCorner"].split(" "),n=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return P.Observable.of({loading:!1});var o={minx:parseFloat(r[0]),miny:parseFloat(r[1]),maxx:parseFloat(n[0]),maxy:parseFloat(n[1])},a=i.getHook(J.ZOOM_TO_EXTENT_HOOK);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),P.Observable.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return P.Observable.of({error:"error getting bounds from filter",details:e})}))}return P.Observable.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,r=void 0!==t&&t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Q.t8)("loading",r,n)}))})))));var oe=r(43378);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ce=(0,i.compose)((0,i.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.map,i=void 0===o?{}:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return t!==a.mapSync||!(0,p.isEqual)(n,a.dependencies)||!(0,p.isEqual)(i,a.map)||l!==a.filter}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=void 0===o?{}:o,a=e.map,l=void 0===a?{layers:[]}:a,c=n&&n.layer&&n.layer.name,s=(0,p.find)(l.layers,{name:c})||{},u={},f={},d=void 0;return t&&!(0,p.isEmpty)(s)&&(n.quickFilters&&(u=ae(ae({},u),(0,q.r$)(i,n.quickFilters,n.options))),n.filter&&(u=ae(ae({},u),(0,K.composeAttributeFilters)([u,n.filter]))),!(0,p.isEmpty)(u)&&(0,K.toCQLFilter)(u))?(d=(0,K.toCQLFilter)(u),f=(0,Q.cc)(!1,ae(ae({},s),{},{params:(0,oe.optionsToVendorParams)({params:{CQL_FILTER:d}},s&&s.params&&s.params.CQL_FILTER)}),{name:c},l.layers),{map:ae(ae({},l),{},{layers:f})}):(f=l.layers.map((function(e){return ae(ae({},e),{},{params:ae(ae({},e.params),{},{CQL_FILTER:void 0})})})),{map:ae(ae({},l),{},{layers:f})})}))),se=function(e){return(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync;return t}),(0,i.withPropsOnChange)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mapSync,n=t.dependencies,o=void 0===n?{}:n,a=arguments.length>1?arguments[1]:void 0,l=a.mapSync,c=a.dependencies;return c&&(0,i.shallowEqual)(o[e],c[e])||r===l}),(function(t){var r=t.map,n=t.mapSync,o=t.dependencies,i=void 0===o?{}:o;return{mapStateSource:"__dependency_system__",map:i[e]&&n?(0,Q.t8)(e,i[e],r):r}})))};var ue=r(30294);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?[]:t,n=ye(e,["data"]),i=Object.keys(r.reduce((function(e,t){return fe(fe({},e),t)}),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(ue.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,i.map((function(e,t){return o().createElement("th",null,t+1===i.length&&n.yAxisLabel?n.yAxisLabel:t>0?"".concat(e):e)})))),o().createElement("tbody",null,r.map((function(e){return o().createElement("tr",null,i.map((function(t){return o().createElement("td",null,e[t])})))})))))};var be=r(96259),ge=r(73014),ve=r(42415),he=r(39837),Oe=r(6869),we=(0,ge.Z)()((0,ve.Z)((0,he.Z)(Oe.Z)));const Ee=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(be.Z,null,o().createElement(we,e)))};var Se=r(5346),Pe=r(65539),je=r(72688);const Ce=function(e){var t=e.id,r=e.title,n=e.confirmDelete,i=void 0!==n&&n,a=e.className,l=e.isDraggable,c=void 0===l||l,s=e.toggleDeleteConfirm,u=void 0===s?function(){}:s,p=e.onDelete,f=void 0===p?function(){}:p,d=e.icons,y=e.topLeftItems,m=e.topRightItems,b=e.headerStyle,g=void 0===b?{}:b,v=e.children;return o().createElement("div",{className:"mapstore-widget-card",id:t},o().createElement(Pe.Z,{className:a,header:o().createElement("div",{style:g,className:"mapstore-widget-info ".concat(c?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},d),y,o().createElement("span",{className:"widget-title"},r),o().createElement("span",{className:"mapstore-widget-options"},m)))},v),i?o().createElement(je.Z,{confirmText:o().createElement(Se.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(Se.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(Se.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:i,onClose:function(){return u(!1)},onConfirm:function(){return f(t)}}):null)};function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(ue.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null};var ke=(0,r(82030).Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.iconFit;return{iconFit:t,tooltip:o().createElement(Se.Z,{msgId:"widgets.errors.notext"})}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})})),Ie=r(75480),Ae=r(92936);function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ne=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,r=void 0===t?function(){}:t;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["layers"]);return r("map",t,"merge")}}})(Ae.Z),_e=r(18027);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ge=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var r=t&&e.options&&(0,p.find)(e.options.propertyName,(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},n=r&&(r.rawValue||r.value);return Me(Me({},e),{},{value:n})}))}))),Be=function(e){var t=e.options,r=e.localType,n=e.attributeName,o=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:n,options:t}),Ge)((0,_e.Q)(r,{name:n}))},ze=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.map((function(t){return Me(Me({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),Ue=(0,i.compose)(ze,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,r=e.options,n=e.quickFilterStream$;return t?{filterRenderers:(0,A.Lo)(t).reduce((function(e,t){var o=t.localType,i=t.name,a=Be({options:r,localType:o,attributeName:i,quickFilterStream$:n});return Me(Me({},e),{},Ze({},i,a))}),{})}:{}}))),We=r(30029),Ve=r(93358),qe=(0,ve.Z)((0,ge.Z)((function(e){return!e.describeFeatureType}))(Ve.Z));const He=Ue((function(e){var t=e.id,r=e.title,n=e.loading,i=e.confirmDelete,a=void 0!==i&&i,l=e.enableColumnFilters,c=void 0!==l&&l,s=e.headerStyle,u=e.icons,p=e.topRightItems,f=e.toggleDeleteConfirm,d=void 0===f?function(){}:f,y=e.onDelete,m=void 0===y?function(){}:y,b=e.gridEvents,g=void 0===b?function(){}:b,v=e.pageEvents,h=void 0===v?{moreFeatures:function(){}}:v,O=e.describeFeatureType,w=e.filterRenderers,E=e.columnSettings,S=e.features,P=e.size,j=e.pages,C=e.error,x=e.pagination,T=void 0===x?{}:x,k=e.dataGrid,I=void 0===k?{}:k,A=e.virtualScroll,F=void 0===A||A;return o().createElement(Ce,{id:"widget-chart-".concat(t),title:r,headerStyle:s,icons:u,isDraggable:I.isDraggable,confirmDelete:a,onDelete:m,toggleDeleteConfirm:d,topRightItems:p},o().createElement(Pe.Z,{footer:T.totalFeatures?o().createElement("div",{style:{height:"30px",overflow:"hidden"}},n?o().createElement("span",{style:{float:"right"}},o().createElement(Ie.Z,null)):null,void 0===C&&o().createElement("span",{style:{float:"left",margin:"5px"}},o().createElement(Se.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:T.totalFeatures}}))):null},o().createElement(qe,{emptyRowsView:function(){return o().createElement(We.Z,{loading:n})},gridEvents:g,sortable:!0,defaultSize:!1,columnSettings:E,pageEvents:h,virtualScroll:F,enableColumnFilters:c,filterRenderers:w,features:S,pages:j,error:C,size:P,rowKey:"id",describeFeatureType:O,pagination:T})))}));var $e=r(80844);function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(ue.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null},Xe=r(46173),Qe=r(70919);function Je(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var et=(0,Xe.Z)()(Qe.Z),tt=(0,i.compose)(U.Z,B.Z,z.Z,h.Z,s)((function(e){var t=e.id,r=e.title,n=e.description,i=e.headerStyle,a=e.data,l=void 0===a?[]:a,c=e.series,s=void 0===c?[]:c,u=e.loading,p=e.icons,f=e.showTable,d=e.topRightItems,y=e.confirmDelete,m=void 0!==y&&y,b=e.dataGrid,g=void 0===b?{}:b,v=e.onDelete,h=void 0===v?function(){}:v,O=e.toggleTableView,w=void 0===O?function(){}:O,E=e.toggleDeleteConfirm,S=void 0===E?function(){}:E,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm"]);return o().createElement(Ce,{id:"widget-chart-".concat(t),headerStyle:i,isDraggable:g.isDraggable,title:r,icons:p,topLeftItems:Te({loading:u,title:r,description:n,showTable:f,toggleTableView:w}),confirmDelete:m,onDelete:h,toggleDeleteConfirm:S,topRightItems:d},f?o().createElement(me,xe({data:l},P)):o().createElement(Ee,xe({id:t,isAnimationActive:!u,loading:u,data:l,series:s,iconFit:!0},P)))})),rt=(0,i.compose)(g)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.icons,i=e.topLeftItems,a=e.id,l=e.title,c=e.text,s=e.headerStyle,u=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.confirmDelete,y=void 0!==d&&d,m=e.onDelete,b=void 0===m?function(){}:m;return o().createElement(Ce,{id:"widget-text-".concat(a),title:l,confirmDelete:y,onDelete:b,toggleDeleteConfirm:r,headerStyle:s,isDraggable:f.isDraggable,icons:n,topLeftItems:i,topRightItems:u},o().createElement(ke,{text:c}))})),nt=(0,i.compose)(U.Z,ce,se("center"),se("zoom"),ne,v)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,r=void 0===t?function(){}:t,n=e.toggleDeleteConfirm,i=void 0===n?function(){}:n,a=e.id,l=e.title,c=e.map,s=e.icons,u=e.hookRegister,f=e.mapStateSource,d=e.topRightItems,y=e.confirmDelete,m=void 0!==y&&y,b=e.loading,g=void 0!==b&&b,v=e.dataGrid,h=void 0===v?{}:v,O=e.onDelete,w=void 0===O?function(){}:O,E=e.headerStyle,S=e.env,P=c.size,j=P.height,C=P.width,x=c.mapInfoControl,T=j>400&&C>400&&x;return o().createElement(Ce,{id:"widget-text-".concat(a),title:l,confirmDelete:m,onDelete:w,toggleDeleteConfirm:i,headerStyle:E,icons:s,topRightItems:d,isDraggable:h.isDraggable},o().createElement(Pe.Z,{footer:o().createElement("div",{style:{height:"30px",overflow:"hidden"}},g?o().createElement("span",{style:{float:"right"}},o().createElement(Ie.Z,null)):null)},o().createElement(Ne,{tools:T?["popup"]:[],updateProperty:r,id:a,map:De({},(0,p.omit)(c,"mapStateSource")),mapStateSource:f,hookRegister:u,layers:c&&c.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}},env:S})))})),ot=(0,i.compose)(U.Z,z.Z,B.Z,G,m)(He),it=(0,i.compose)(U.Z,B.Z,z.Z,O.Z,u)((function(e){var t=e.id,r=e.title,n=e.description,i=e.data,a=void 0===i?[]:i,l=e.series,c=void 0===l?[]:l,s=e.loading,u=e.showTable,p=e.confirmDelete,f=void 0!==p&&p,d=e.headerStyle,y=e.icons,m=e.topRightItems,b=e.dataGrid,g=void 0===b?{}:b,v=e.toggleTableView,h=void 0===v?function(){}:v,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,E=e.onDelete,S=void 0===E?function(){}:E,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"]);return o().createElement(Ce,{className:"counter-widget",id:"widget-chart-".concat(t),title:r,isDraggable:g.isDraggable,icons:y,topLeftItems:Ke({loading:s,title:r,description:n,showTable:u,toggleTableView:h}),confirmDelete:f,onDelete:S,toggleDeleteConfirm:w,headerStyle:d,topRightItems:m},o().createElement($e.Z,Ye({id:t,isAnimationActive:!s,loading:s,data:a,series:c,iconFit:!0},P)))})),at=(0,i.compose)(U.Z,b.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.id,i=e.title,a=e.icons,l=e.headerStyle,c=e.confirmDelete,s=void 0!==c&&c,u=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.onDelete,y=void 0===d?function(){}:d,m=Je(e,["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"]);return o().createElement(Ce,{id:"widget-text-".concat(n),title:i,confirmDelete:s,onDelete:y,toggleDeleteConfirm:r,headerStyle:l,icons:a,topRightItems:u,isDraggable:f.isDraggable},o().createElement(et,m))}));function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ct(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=e.toggleCollapse,n=void 0===r?function(){}:r,i=e.exportCSV,a=void 0===i?function(){}:i,l=e.exportImage,c=void 0===l?function(){}:l,s=e.onDelete,u=void 0===s?function(){}:s,p=e.onEdit,f=void 0===p?function(){}:p,d=ct(e,["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"]);return"text"===d.widgetType?o().createElement(rt,lt({},d,{toggleCollapse:n,onDelete:u,onEdit:f})):"table"===d.widgetType?o().createElement(ot,lt({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,onDelete:u,onEdit:f})):"counter"===d.widgetType?o().createElement(it,lt({},d,{toggleCollapse:n,dependencies:t,onDelete:u,onEdit:f})):"map"===d.widgetType?o().createElement(nt,lt({},d,{toggleCollapse:n,dependencies:t,onDelete:u,onEdit:f})):"legend"===d.widgetType?o().createElement(at,lt({},d,{toggleCollapse:n,dependencies:t,onDelete:u,onEdit:f})):o().createElement(tt,lt({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,exportImage:c,onDelete:u,onEdit:f}))}},70919:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(67294),o=r.n(n),i=r(61545),a=r(38064),l=r(30294),c=r(1036),s=r(62770);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=function(e){var t=e.layers,r=void 0===t?[]:t,n=e.onChange,p=void 0===n?function(){}:n,d=e.legendProps,y=void 0===d?{}:d,m=e.currentZoomLvl,b=e.disableOpacitySlider,g=void 0===b||b,v=e.disableVisibility,h=void 0===v||v,O=e.scales,w=e.language,E=e.currentLocale;return o().createElement(a.Z,{className:"compact-legend-grid",size:"sm",items:r.map((function(e){return{title:e.title&&(0,i.isObject)(e.title)&&(e.title[E]||e.title.default)||e.title,preview:h?null:o().createElement(l.Glyphicon,{className:"text-primary",glyph:e.visibility?"eye-open":"eye-close"}),style:{opacity:e.visibility?1:.4},body:e.visibility?o().createElement("div",null,o().createElement(l.Grid,{fluid:!0},o().createElement(l.Row,null,o().createElement(l.Col,{xs:12,className:"ms-legend-container"},o().createElement(s.Z,u({node:f({},e),currentZoomLvl:m,scales:O,language:w},y))))),!g&&o().createElement("div",{className:"mapstore-slider",onClick:function(e){e.stopPropagation()}},o().createElement(c.Z,{disabled:!e.visibility,start:[(0,i.isNil)(e.opacity)?100:Math.round(100*e.opacity)],range:{min:0,max:100},onChange:function(t){return p(e.id,"layers",{opacity:parseFloat((t[0]/100).toFixed(2))})}}))):null}}))})}},92936:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(18093),o=r(7848),i=r(91812),a=r(37981),l=r(57068),c=r(19180),s=r(69705),u=r(63721),p=r(61928);const f=(0,n.compose)(s.Z,(0,i.Z)(0),o.Z,c.Z,u.dY,u.yM,a.Z,l.e)(p.Z)},56175:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(89255),o=r(9669),i=r.n(o),a=r(37691),l=r.n(a),c=r(30647),s=r(61545),u=r(31273),p=r(80416),f=r(97395),d=r(82904),y=r(33528),m=r(21914),b=r(53001),g=r(88113),v=r(31935),h=r(8316),O=r(75110),w=r(76712),E=r(90183),S=r(24262);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const A=function(e){return{recordSearchEpic:function(t,r){return t.ofType(u.V3).switchMap((function(t){var o=t.format,i=t.url,a=t.startPosition,l=t.maxRecords,c=t.text,s=t.options;return n.Observable.defer((function(){return e[o].textSearch(i,a,l,c,k({options:s},(0,g.HN)(r.getState())))})).switchMap((function(e){return e.error?n.Observable.of((0,u.m)(e)):n.Observable.of((0,u.nX)({url:i,startPosition:a,maxRecords:l,text:c},e))})).startWith((0,u.K4)(!0)).catch((function(e){return n.Observable.of((0,u.m)(e))}))}))},addLayersFromCatalogsEpic:function(t,r){return t.ofType(u.WX).filter((function(e){var t=e.layers,r=e.sources;return(0,s.isArray)(t)&&(0,s.isArray)(r)&&t.length&&t.length===r.length})).switchMap((function(t){var o=t.layers,i=t.sources,a=t.options,l=t.startPosition,c=void 0===l?1:l,u=t.maxRecords,p=void 0===u?4:u,f=r.getState(),d=a||(0,g.bA)(f),y=(0,g.b6)(f),m=o.filter((function(e,t){return!!y[i[t]]})).map((function(t,r){var a=y[i[r]],l=a.type,s=a.url,u=o[r];return n.Observable.defer((function(){return e[l].textSearch(s,c,p,u,d).catch((function(){return{results:[]}}))})).map((function(e){return k(k({},e),{},{format:l,url:s,text:u})}))}));return n.Observable.forkJoin(m).switchMap((function(e){return(0,s.isArray)(e)&&e.length?n.Observable.of(e.map((function(e){var t=e.format,r=e.url,o=e.text,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["format","url","text"]),a=(0,h.Ps)(f),l=(0,w.eL)(t,i,d,a)||[],c=(0,s.head)(l.filter((function(e){return e.identifier===o}))),u=(0,w.tW)(c),p=u.wms,y=u.wmts,m={},b={},v=(0,g.kS)(f);if(p){var O=(0,w.n0)(p.SRS);if(p.SRS.length>0&&!E.default.isAllowedSRS("EPSG:3857",O))return n.Observable.empty();m=(0,w.ll)(c,"wms",{removeParams:v,catalogURL:"csw"===t&&r?r+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+c.identifier:r},b)}else if(y){m={};var S=(0,w.n0)(y.SRS);if(y.SRS.length>0&&!E.default.isAllowedSRS("EPSG:3857",S))return n.Observable.empty();m=(0,w.ll)(c,"wmts",{removeParams:v},b)}else(0,w.FJ)(c).esri&&(m=(0,w.AD)(c,b));return c?m:o}))):n.Observable.empty()}))})).mergeMap((function(e){if(e){var t=e.filter((function(e){return(0,s.isString)(e)})).join(" "),r=[];return t&&(r=[(0,u.E9)(t)]),r=[].concat(j(r),j(e.filter((function(e){return(0,s.isObject)(e)})).map((function(e){return(0,p.A4)(e)})))),n.Observable.from(r)}return n.Observable.empty()})).catch((function(){return n.Observable.empty()}))},newCatalogServiceAdded:function(t,r){return t.ofType(u.mh).switchMap((function(){var t=r.getState(),o=(0,g._S)(t);return n.Observable.of(o).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.validate)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.testService)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(){return n.Observable.of((0,u.N3)(o),(0,f.Vp)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}))})).startWith((0,u.Rc)(!0)).catch((function(e){return n.Observable.of((0,f.vU)({exception:e,title:"notification.warning",message:e.notification||"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))})).concat(n.Observable.of((0,u.Rc)(!1)))}))},deleteCatalogServiceEpic:function(e,t){return e.ofType(u.$Y).switchMap((function(){var e=t.getState(),r=(0,g.Cb)(e),o=(0,g.b6)(e),i=o[r]?(0,f.Vp)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):(0,f.vU)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),a=(0,u.SU)(r);return o[r]?n.Observable.of(i,a):n.Observable.of(i)}))},openCatalogEpic:function(e){return e.ofType(d.At).filter((function(e){return"metadataexplorer"===e.control&&e.value})).switchMap((function(){return n.Observable.of((0,y.YV)(),(0,m.g)(),(0,m.aN)())}))},getMetadataRecordById:function(t,r){return t.ofType(u.UT).switchMap((function(t){var o=t.metadataOptions,a=void 0===o?{}:o,u=r.getState(),d=(0,O.Iz)(u);return n.Observable.defer((function(){return e.wms.getCapabilities((0,S.getCapabilitiesUrl)(d))})).switchMap((function(t){var r=(0,s.get)(t,"capability.layer.layer",[]),o=1===r.length?r[0].metadataURL:(0,s.find)(r,(function(e){return e.name===d.name.split(":")[1]})),u=(0,s.get)((0,s.find)(o,(function(e){return(0,s.isString)(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&("application/xml"===e.format||"text/xml"===e.format)})),"onlineResource.href"),y=(0,s.get)((0,s.find)(o,(function(e){return(0,s.isString)(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&"text/html"===e.format})),"onlineResource.href"),m=(0,s.find)((0,s.get)(a,"extractors",[]),(function(e){var t=e.properties,r=e.layersRegex,n=r?new RegExp(r):null;return(0,s.isObject)(t)&&(!r||n.test(d.name))})),b=y?{metadataUrl:y}:{},g=n.Observable.defer((function(){return e.csw.getRecordById(d.catalogURL)})).switchMap((function(e){return e&&e.error?n.Observable.of((0,f.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,p.c9)(b,!1)):e&&e.dc?n.Observable.of((0,p.c9)(k(k({},b),e.dc),!1)):n.Observable.empty()})),v=n.Observable.defer((function(){return i().get(u)})).pluck("data").map((function(e){return(new c.a).parseFromString(e)})).map((function(e){var t=l().useNamespaces(a.xmlNamespaces||{});return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return(0,s.toPairs)(r).reduce((function(r,o){var i,a=P(o,2),l=a[0],c=a[1];if((0,s.isObject)(c)&&(0,s.isString)(c.xpath)&&(0,s.isObject)(c.properties)&&(0,s.keys)(c.properties).length>0)0===(i=t(c.xpath,n).map((function(t){return e(c.properties,t)}))).length&&(i=null);else{var u,p=t(c,n);1===p.length?i=null!==(u=(0,s.get)(p[0],"nodeValue"))&&void 0!==u?u:(0,s.get)(p[0],"childNodes[0].nodeValue"):p.length>1&&(i=p.map((function(e){return(0,s.get)(e,"childNodes[0].nodeValue")})).filter((function(e){return!!e})))}return k(k({},r),i?I({},l,i):{})}),{})}(m.properties,e)})).switchMap((function(e){return n.Observable.of((0,p.c9)(k(k({},b),e),!1))}));return u&&m?v:d.catalogURL?g:n.Observable.of((0,p.c9)(b,!1))})).startWith((0,p.c9)({},!0)).catch((function(){return n.Observable.of((0,f.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,p.c9)({},!1))}))}))},autoSearchEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(u.CO).debounce((function(){var e=o(),t=(0,g.l2)(e);return n.Observable.timer(t)})).switchMap((function(e){var t=e.text,r=o(),i=(0,g.y)(r),a=(0,g.R7)(r),l=a.type,c=a.url;return n.Observable.of((0,u.tt)({format:l,url:c,startPosition:1,maxRecords:i,text:t}))}))},catalogCloseEpic:function(e,t){return e.ofType(u.ur).switchMap((function(){var e,r=t.getState(),o=(0,v.YL)(r),i=(0,g.b6)(r);return(e=n.Observable).of.apply(e,j([(0,d.pu)("metadataexplorer","enabled",!1,"group",null),(0,u.In)("view"),(0,u.ye)()].concat("backgroundSelector"===o?[(0,u.Dw)((0,s.head)((0,s.keys)(i))),(0,b.vw)(!0)]:[])))}))}}}},74226:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>h});var n=r(89255),o=r(23570),i=r.n(o),a=r(62192),l=r(89602),c=r(80416),s=r(58767),u=r(82904),p=r(33528),f=r(21914),d=r(7147),y=r(97266),m=r(42780);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={addAnnotationFromMeasureEpic:function(e){return e.ofType(l.XX).switchMap((function(e){var t=e.features,r=e.textLabels,o=e.uom,c=e.save,p=e.properties||{},f=p.id,d=void 0===f?i()():f,y=p.visibility,b=void 0===y||y,v=g(g({},(0,a.tL)(t,r,o,d,"Annotations created from measurements",s.Eo)),{},{newFeature:c,visibility:b});return n.Observable.of((0,u.Xi)("annotations",null),(0,m.A9)(),(0,l.el)("exportToAnnotation",!1),(0,m.yg)(v))}))},addAsLayerEpic:function(e){return e.ofType(l.Wt).switchMap((function(e){var t=e.features,r=e.textLabels,o=e.uom,l=(0,a.tL)(t,r,o,i()());return n.Observable.of((0,c.A4)({type:"vector",id:i()(),name:"Measurements",hideLoading:!0,features:[l],visibility:!0}))}))},openMeasureEpic:function(e,t){return e.ofType(u.At).filter((function(e){return"measure"===e.control&&e.value&&(0,d.Iz)(t.getState())})).switchMap((function(){return n.Observable.of((0,p.YV)(),(0,f.g)(),(0,f.aN)())}))},closeMeasureEpics:function(e,t){return e.ofType(u.kM).filter((function(e){return"measure"===e.control&&!(0,d.QF)(t.getState())})).switchMap((function(){return n.Observable.of((0,m.Rx)())}))},setMeasureStateFromAnnotationEpic:function(e,t){return e.ofType(l.ES).switchMap((function(e){var r,o,i=e.features,c=(0,y.on)(t.getState())===(null===(r=(0,a.k2)(i))||void 0===r?void 0:r[0]);return n.Observable.of(!c&&(0,l.Bd)({geomType:null===(o=(0,a.k2)(i))||void 0===o?void 0:o[0]}),(0,u.Xg)("measure","enabled",!0),(0,u.Xg)("annotations","enabled",!1))}))}}},94943:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>L});var n=r(89255),o=r(61545),i=r(97395),a=r(80416),l=r(60604),c=r(90825),s=r(80833),u=r(82904),p=r(24262),f=r(96909),d=r(9082),y=r(75875),m=r.n(y),b=r(99009);function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,i=void 0===n?[]:n,a=e.options,l=void 0===a?{}:a,c=(0,b.$N)(r),s=c.name,u=c.workspace,p="".concat(t,"rest/").concat(u&&"workspaces/".concat(u,"/")||"","layers/").concat(s,".json");return m().get(p,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&(0,o.castArray)(t.styles.style)||[],n=i.map((function(e){return e.name})),a=r.filter((function(e){var t=e.name;return-1===n.indexOf(t)}));return{layer:O(O({},t),{},{styles:{"@class":"linked-hash-set",style:a}})}})).then((function(e){return m().put(p,e).then((function(){return e}))}))},S=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,i=void 0===n?[]:n,a=e.options,l=void 0===a?{}:a,c=(0,b.$N)(r),s=c.name,u=c.workspace,p="".concat(t,"rest/").concat(u&&"workspaces/".concat(u,"/")||"","layers/").concat(s,".json");return m().get(p,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&(0,o.castArray)(t.styles.style)||[];return{layer:O(O({},t),{},{styles:{"@class":"linked-hash-set",style:[].concat(g(r),g(i))}})}})).then((function(e){return m().put(p,e).then((function(){return e}))}))},P=function(e){var t=e.baseUrl,r=e.layerName,n=e.styleName,i=e.options,a=void 0===i?{}:i,l=(0,b.$N)(r),c=l.name,s=l.workspace,u="".concat(t,"rest/").concat(s&&"workspaces/".concat(s,"/")||"","layers/").concat(c,".json");return m().get(u,a).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&(0,o.castArray)(t.styles.style)||[],i=t.defaultStyle||{},a=(0,o.uniqBy)([i].concat(g(r)),"name");return{layer:O(O({},t),{},{defaultStyle:{name:n},styles:{"@class":"linked-hash-set",style:a}})}})).then((function(e){return m().put(u,e).then((function(){return e}))}))};var j=r(93222),C=r(75110),x=r(7147),T=r(8954);function k(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){var t=e.status,r=e.styleName,o=e.baseUrl;return"edit"===t?n.Observable.defer((function(){return d.ZP.getStyleCodeByName({baseUrl:o,styleName:r})})).switchMap((function(e){return n.Observable.of((0,f.FU)({languageVersion:e.languageVersion,code:e.code,templateId:"",format:e.format,init:!0}))})).catch((function(e){return n.Observable.of((0,f.Fe)("edit",e))})):n.Observable.empty()},N=function(e){var t=e.styleName,r=e.baseUrl,o=e.onSuccess$,i=e.onError$;return n.Observable.defer((function(){return d.ZP.deleteStyle({baseUrl:r,styleName:t})})).switchMap((function(){return o||n.Observable.empty()})).catch((function(){return i||n.Observable.empty()}))},_=function(e){var t=e.baseUrl,r=e.update,i=e.code,a=e.format,l=e.styleName,c=e.status,s=e.languageVersion,u=e.options,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.Observable.defer((function(){return d.ZP[r?"updateStyle":"createStyle"]({baseUrl:t,code:i,format:a,styleName:l,languageVersion:s,options:u})})).switchMap((function(){var e;return(0,o.isArray)(p)&&(e=n.Observable).of.apply(e,[(0,f.Wm)()].concat(k(p)))||p})).catch((function(e){var t;return(t=n.Observable).of.apply(t,[(0,f.Fe)(c,e),(0,f.Wm)()].concat(k(y)))})).startWith((0,f.pt)(c))};const L={toggleStyleEditorEpic:function(e,t){return e.ofType(f.vZ).filter((function(){return!(0,j.aN)(t.getState())})).switchMap((function(e){var r=t.getState(),i=(0,C.jN)(r),c=!!(0,o.get)(i,"options.availableStyles");if(!e.enabled)return function(e){var t=(0,j.gc)(e),r=(0,j.Z0)(e).baseUrl,o=void 0===r?"":r;return n.Observable.of((0,f.l1)(),(0,l.fU)({owner:b.s1})).merge(t?N({styleName:t,baseUrl:o}):n.Observable.empty())}(r);if((0,j.ji)(r)&&c)return n.Observable.empty();var u=e.layer||(0,C.Iz)(r);if(!u||u&&!u.url)return n.Observable.empty();var y=(0,p.findGeoServerName)(u);if(!y)return u.availableStyles?n.Observable.of((0,a.Xy)({availableStyles:u.availableStyles}),(0,f.Wm)()):(0,s.kB)(u).switchMap((function(e){var t=(0,p.formatCapabitiliesOptions)(e);return t.availableStyles?n.Observable.of((0,a.Xy)({availableStyles:t.availableStyles}),(0,a.tV)(u.id,"layer",F({},t)),(0,f.Wm)()):n.Observable.of((0,f.Fe)("availableStyles",{status:401}),(0,f.Wm)())})).startWith((0,f.pt)("global"));var m=u.url.split(y),g="".concat(m[0]).concat(y),v=(0,j.Z0)(r);return n.Observable.defer((function(){return(0,T.eb)({baseUrl:g,styleService:v})})).switchMap((function(e){var t,r=[(0,f.E0)(e)];return(t=(0,s.kB)(u).switchMap((function(e){var t=(0,p.formatCapabitiliesOptions)(e);return t.availableStyles?n.Observable.defer((function(){return d.ZP.getStylesInfo({baseUrl:g,styles:t&&t.availableStyles||[]})})).switchMap((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.Observable.of((0,l.W)(u.id,b.s1,"override",{}),(0,a.Xy)({availableStyles:e}),(0,a.tV)(u.id,"layer",F(F({},t),{},{availableStyles:e})),(0,f.Wm)())}(e)})):n.Observable.of((0,f.Fe)("availableStyles",{status:401}),(0,f.Wm)())}))).startWith.apply(t,r).catch((function(e){var t=-1!==e.message.indexOf("could not be unmarshalled")?"parsingCapabilities":"global";return n.Observable.of((0,f.Fe)(t,e),(0,f.Wm)())}))})).startWith((0,f.pt)("global"),(0,f.l1)())}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(f.g$).filter((function(e){return!!e.status})).switchMap((function(r){var o=t.getState(),i=(0,j.Vf)(o),l=i&&i.params||{},s=i&&!i.describeFeatureType&&(0,c.H)(i.url,i,{query:l}),u=(0,j.i7)(o)||i.availableStyles&&i.availableStyles[0]&&i.availableStyles[0].name,p=(0,j.Ri)(o),d=(0,j.Z0)(o).baseUrl,y=void 0===d?"":d;return s&&function(e,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=n.Observable).of.apply(r,[(0,f.pt)("global")].concat(k(i))).merge(e.ofType(a.K$).filter((function(){var e=(0,C.Iz)(t.getState());return o(e)})).switchMap((function(){var e=(0,C.Iz)(t.getState());return l(e)})).catch((function(e){return n.Observable.of((0,f.Fe)("global",e),(0,f.Wm)())})).takeUntil(e.ofType(f.E2)))}(e,t,(function(e){return e&&e.describeLayer}),[s],(function(e){return n.Observable.concat(R({status:r.status,styleName:u,baseUrl:y}),n.Observable.of((0,f.xR)(!(e&&e.describeLayer&&401===e.describeLayer.error)),(0,f.bB)({editorType:p.msEditorType||"textarea",styleJSON:p.msStyleJSON}),(0,f.Wm)()))}))||n.Observable.concat(R({status:r.status,styleName:u,baseUrl:y}),n.Observable.of((0,f.bB)({editorType:p.msEditorType||"textarea",styleJSON:p.msStyleJSON})))}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(f.TB,f.DX).switchMap((function(e){var r=t.getState(),n=(0,j.gc)(r),o=(0,j.Vf)(r),a=(0,b.$N)(o.name).workspace,c=e.format&&e.format!==(0,j.iB)(r),s=n||"".concat(a?"".concat(a,":"):"").concat((0,b.Vi)()),u=e.format||(0,j.iB)(r),p=(0,j.ex)(r),d=(0,j.Z0)(r).baseUrl,y=void 0===d?"":d,m=(0,j.j5)(r),g="sld"===u&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},v=m.version!==g.version?{params:{raw:!0}}:{},h=g,O=function(t){return _({update:!0,code:e.code,format:u,styleName:t,status:p,baseUrl:y,languageVersion:h,options:v},[(0,l.B1)(b.s1,[{style:t,_v_:Date.now(),singleTile:!0}]),(0,f.k5)({temporaryId:t,templateId:e.templateId||"",code:e.code,format:u,init:e.init,languageVersion:h})],"edit"===p?[]:[(0,i.vU)({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},w=("css"===u?"* { stroke: #888888; }":"sld"===u&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",E=function(e){return _({code:w,format:u,styleName:e,status:p,baseUrl:y},O(e),[(0,i.vU)({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),(0,f.k5)({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return c&&n&&N({styleName:n,baseUrl:y,onSuccess$:E("".concat(a?"".concat(a,":"):"").concat((0,b.Vi)())),onError$:O(s)})||n&&O(s)||E(s)}))},createStyleEpic:function(e,t){return e.ofType(f.vA).switchMap((function(e){var r=t.getState(),c=(0,j.gB)(r),s=(0,j.Vf)(r),u=(0,b.$N)(s.name).workspace,p="".concat(u?"".concat(u,":"):"").concat((0,b.nK)(e.settings)),y=(0,j.iB)(r),m=e.settings||{},g=m.title,v=void 0===g?"":g,h=m._abstract,O=void 0===h?"":h,w=(0,j.Z0)(r).baseUrl,E=void 0===w?"":w,P=F({title:v,description:O},{msStyleJSON:null,msEditorType:"visual"});return n.Observable.defer((function(){return d.ZP.createStyle({baseUrl:E,code:(0,o.template)(c)({styleTitle:v,styleAbstract:O}),format:y,styleName:p,metadata:P})})).switchMap((function(){return n.Observable.of((0,l.B1)(b.s1,[{}]),(0,a.Xy)({style:p||""},!0),(0,f.Nf)(""),(0,f.Wm)()).merge(function(e){var t=e.baseUrl,r=e.layer,i=e.styleName,l=e.format,c=e.title,s=e._abstract,u=e.metadata;return n.Observable.defer((function(){return S({baseUrl:t,layerName:r.name,styles:[{name:i}]})})).switchMap((function(){var e=F({filename:"".concat(i,".").concat(l),format:l,name:i,title:c,_abstract:s},u&&{metadata:u}),t=(0,o.head)(r.availableStyles),p=r.availableStyles&&[t,e].concat(k(r.availableStyles.filter((function(e,t){return t>0}))))||[e];return n.Observable.of((0,a.Xy)({availableStyles:p},!0),(0,f.Wm)())})).catch((function(){return n.Observable.of((0,f.Wm)())})).startWith((0,f.pt)("global"))}({layer:s,styleName:p,format:y,title:v,_abstract:O,baseUrl:E,metadata:P}))})).catch((function(e){return n.Observable.of((0,f.Fe)("",e),(0,f.Wm)(),(0,i.vU)({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))})).startWith((0,f.pt)(""))}))},updateStyleCodeEpic:function(e,t){return e.ofType(f.ch).switchMap((function(){var e=t.getState(),r=(0,j.iB)(e),o=(0,j.j5)(e),l=(0,j.gB)(e),c=(0,j.i7)(e),s=(0,j.gc)(e),u=(0,j.Vf)(e),p=(0,j.Z0)(e).baseUrl,y=void 0===p?"":p,m=(0,j.WW)(e)||{},b={msStyleJSON:m.styleJSON||null,msEditorType:m.editorType},g=(u.availableStyles||[]).map((function(e){return e.name===c?F(F({},e),{},{metadata:F(F({},e.metadata),b)}):e}));return n.Observable.defer((function(){return d.ZP.updateStyle({baseUrl:y,code:l,format:r,styleName:c,languageVersion:o,options:{params:{raw:!0}},metadata:b})})).switchMap((function(){return n.Observable.of((0,f.Wm)(),(0,a.tV)(u.id,"layer",{_v_:Date.now(),availableStyles:g}),(0,a.Xy)({availableStyles:g}),(0,f.k5)({temporaryId:s,templateId:"",code:l,format:r,init:!0,languageVersion:o}),(0,i.Vp)({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))})).catch((function(e){return n.Observable.of((0,f.Fe)("global",e),(0,f.Wm)(),(0,i.vU)({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))})).startWith((0,f.pt)("global"))}))},deleteStyleEpic:function(e,t){return e.ofType(f.j1).filter((function(e){return!!e.styleName})).switchMap((function(e){var r=e.styleName,o=t.getState(),l=(0,j.Vf)(o),c=(0,j.Z0)(o).baseUrl,s=void 0===c?"":c,p=(0,x.tL)(o),d=(0,x.Gd)(o);return n.Observable.defer((function(){return E({baseUrl:s,layerName:l.name,styles:[{name:r}]})})).switchMap((function(){var e=l.availableStyles&&l.availableStyles.filter((function(e){return e.name!==r}))||[];return n.Observable.concat(n.Observable.of((0,a.Xy)({style:"",availableStyles:e},!0),(0,f.Wm)(),(0,u.Xg)("layersettings","originalSettings",F(F({},p),{},{style:""})),(0,u.Xg)("layersettings","initialSettings",F(F({},d),{},{style:""}))),N({styleName:r,baseUrl:s,onSuccess$:n.Observable.of((0,i.Vp)({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:n.Observable.of((0,i.vU)({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return n.Observable.of((0,f.Wm)())})).startWith((function(){return n.Observable.of((0,f.pt)("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(f.rb).switchMap((function(){var e=t.getState(),r=(0,j.Z0)(e).baseUrl,o=void 0===r?"":r,l=(0,j.Vf)(e),c=(0,j.i7)(e);return n.Observable.defer((function(){return P({baseUrl:o,layerName:l.name,styleName:c})})).switchMap((function(){var e=l.availableStyles.filter((function(e){var t=e.name;return c===t})),t=l.availableStyles.filter((function(e){var t=e.name;return c!==t})),r=[].concat(k(e),k(t));return n.Observable.of((0,a.Xy)({availableStyles:r},!0),(0,i.Vp)({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),(0,f.Wm)())})).startWith((0,f.pt)("global")).catch((function(){return n.Observable.of((0,i.vU)({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),(0,f.Wm)())}))}))}}},88395:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>x});var n=r(89255),o=r(61545),i=r(57579),a=r(81808),l=r(1757),c=r(80416),s=r(75110),u=r(24684),p=r(69293),f=r(55927),d=r(75982),y=r(78598),m=r(89077),b=r(17542),g=r.n(b),v=r(59425),h=r.n(v);function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){return e.ofType(p.WC,p.a3,p.W5).startWith({type:a.ok}).switchMap((function(t){return t.type===p.WC?n.Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===d.nk}))},C=function(e,t,r,a){return n.Observable.of((0,i.Rz)("mapSync",e),(0,i.Rz)("dependenciesMap",function(e,t,r){var n,a=r.dependenciesMap,l=r.mappings,c=["layer","filter","quickFilters","options"],s=["layers","viewport","zoom","center"],u=(i.oU.exec(t)||[])[1],p=(0,o.omitBy)(a,(function(e){return-1===e.indexOf(u)})),f=Object.keys(l).filter((function(e){return void 0!==l[e]})).reduce((function(e,r){return!(0,o.endsWith)(t,"map")&&(0,o.includes)(c,r)?S(S({},e),{},P({},r,"".concat(t,".").concat(l[r]))):(0,o.endsWith)(t,"map")?(0,o.includes)(s,r)?S(S({},e),{},P({},r,"map"===t?l[r]:"".concat(t,".").concat(l[r]))):S(S({},e),{},P({},r,"".concat(t.replace(".map",""),".").concat(l[r]))):e}),{});return e?S(S(S({},p),f),{},(P(n={},"dependenciesMap","".concat(t.replace(".map",""),".dependenciesMap")),P(n,"mapSync","".concat(t.replace(".map",""),".mapSync")),n)):(0,o.omit)(p,[Object.keys(l)])}(e,t,r)))};const x={exportWidgetData:function(e){return e.ofType(i.Km).do((function(e){var t=e.data,r=void 0===t?[]:t,n=e.title,o=void 0===n?"data":n;return g().json2csv(r,(function(e,t){return e?null:(0,y.saveAs)(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(a.ok,f.E9,i.Jm).map((function(){return(0,l.jx)(n())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,o.isEqual)(O(e),O(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,i._k)(e.reduce((function(e,t){var r,n,i=t.replace(".map","");return(0,o.endsWith)(t,"map")?S(S({},e),{},(P(r={},"".concat(i,".dependenciesMap"),"".concat(i,".dependenciesMap")),P(r,"".concat(i,".mapSync"),"".concat(i,".mapSync")),P(r,"map"===t?"viewport":"".concat(t,".viewport"),"".concat(t,".bbox")),P(r,"map"===t?"center":"".concat(t,".center"),"".concat(t,".center")),P(r,"map"===t?"zoom":"".concat(t,".zoom"),"".concat(t,".zoom")),P(r,"map"===t?"layers":"".concat(t,".layers"),"map"===t?"layers.flat":"".concat(t,".layers")),r)):S(S({},e),{},(P(n={},"".concat(t,".filter"),"".concat(t,".filter")),P(n,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),P(n,"".concat(i,".dependenciesMap"),"".concat(i,".dependenciesMap")),P(n,"".concat(i,".mapSync"),"".concat(i,".mapSync")),P(n,"".concat(t,".layer"),"".concat(t,".layer")),P(n,"".concat(t,".options"),"".concat(t,".options")),n))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,a=void 0===r?function(){}:r;return e.ofType(i.LH).switchMap((function(t){var r=t.active,c=t.availableDependencies,s=void 0===c?[]:c,u=t.options;return r&&s.length>0?1===s.length?C(r,s[0],u):n.Observable.of((0,i.kr)(r,{availableDependencies:s})).merge(e.ofType(i.V5).filter((function(){return(0,l.xI)(a())})).switchMap((function(e){var t=e.widget,c=(0,o.get)((0,l.r0)(a()),"availableDependencies").filter((function(e){return(i.oU.exec(e)||[])[1]===t.id}));return C(r,c[0],u,t.dependeciesMap).concat(n.Observable.of((0,i.kr)(!1,{})))})).takeUntil(e.ofType(d.nk).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.key;return t===i.Cz&&r===i.jv}))))):C(r,s[0],u)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(a.ok).switchMap((function(){var t=(0,u.F)(o()).split("/"),r=t[t.length-1];return e.let(j).filter((function(){var e=(0,u.F)(o()).split("/");return e[e.length-1]!==r})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,r=void 0===t?{}:t;return r&&r.location&&r.location.pathname?n.Observable.of((0,i.K4)()):n.Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(i.pV).do((function(e){var t,r,n=e.widgetDivId,o=e.title,i=void 0===o?"data":o,a=document.createElement("canvas"),l=document.querySelector("#".concat(n," .recharts-wrapper svg")),c=l.outerHTML?l.outerHTML:(t=l,(r=document.createElement("div")).appendChild(t.cloneNode(!0)),r.innerHTML);h()(a,c,{renderCallback:function(){var e=a.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,a.width,a.height),(0,m.RP)(a.toDataURL("image/jpeg",1),"".concat(i,".jpg"),"image/jpeg")}})})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(c.yS).switchMap((function(e){var r,a=e.layer,l=e.newProperties,c=t.getState(),u=(0,s.CA)(c,a);return(r=n.Observable).of.apply(r,O((0,o.has)(l,"layerFilter")&&u?[(0,i.Ko)(u)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(c.x9,c.vs).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var r,o=e.layerId,a=t.getState(),l=(0,s.CA)(a,o);return(r=n.Observable).of.apply(r,O(l&&l.previousLoadingError!==l.loadingError?[(0,i.Ko)(l)]:[]))}))})).mergeAll()}}},76364:(e,t,r)=>{"use strict";r.d(t,{Vd:()=>m,Vj:()=>b});var n=r(8575),o=r(61545),i=r(27418),a=r.n(i),l=r(89255),c=r(15047),s=r(75875),u=r.n(s),p=r(84069);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){var t=e.searchText,r=void 0===t?"":t,n=e.queriableAttributes,i=void 0===n?[]:n,a=e.predicate,l=void 0===a?"ILIKE":a,c=(0,o.head)(i),s=r.toLowerCase(),u="strToLowerCase(".concat(c,") ").concat(l," '%").concat(s,"%'");return(0,o.isNil)(c)?"":"("+u+")"},m=function(e){return e.distinctUntilChanged((function(e){var t=e.value,r=e.currentPage,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(n.value!==t||n.currentPage!==r)})).throttle((function(e){return l.Observable.timer(e.delayDebounce||0)})).merge(e.debounce((function(e){return l.Observable.timer(e.delayDebounce||0)}))).distinctUntilChanged().switchMap((function(e){if(e.performFetch){var t=(0,p.getWpsPayload)({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return l.Observable.fromPromise(u().post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return{fetchedData:e.data,busy:!1}}))).catch((function(){return l.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({busy:!0})}return l.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({})},b=function(e){return l.Observable.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.value;return t===n})).debounce((function(e){return l.Observable.timer(e.delayDebounce||0)})),e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterProps,r=e.currentPage,n=arguments.length>1?arguments[1]:void 0,o=n.filterProps,i=n.currentPage;return t===o&&r===i}))).switchMap((function(e){if(e.performFetch){var t=n.parse(e.url,!0),r="";((0,o.endsWith)(t.pathname,"wfs")||(0,o.endsWith)(t.pathname,"wms")||(0,o.endsWith)(t.pathname,"ows")||(0,o.endsWith)(t.pathname,"wps"))&&(r=t.pathname.replace(/(wms|ows|wps|wfs)$/,"wfs")),t.query&&t.query.service&&delete t.query.service;var i=n.format(a()({},t,{search:null,pathname:r})),s=a()({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({url:i,typeName:e.filterProps&&e.filterProps.typeName||"",predicate:e.filterProps&&e.filterProps.predicate||"ILIKE",blacklist:e.filterProps&&e.filterProps.blacklist||[],maxFeatures:e.filterProps&&e.filterProps.maxFeatures||3,queriableAttributes:e.filterProps&&e.filterProps.queriableAttributes||[],returnFullData:!0,startIndex:((e.currentPage||1)-1)*(e.filterProps&&e.filterProps.maxFeatures||3),outputFormat:"application/json",staticFilter:"",fromTextToFilter:y,item:{},timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"},srsName:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},t.query));return l.Observable.fromPromise(c.b.Utils.getService("wfs")(e.value,s).then((function(t){return{fetchedData:{values:t.features.map((function(e){return e.properties})),size:t.totalFeatures,features:t.features,crs:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},busy:!1}}))).catch((function(){return l.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({busy:!0})}return l.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({})}},86850:(e,t,r)=>{"use strict";r.d(t,{Mc:()=>k,v$:()=>I,ED:()=>A});var n=r(8575),o=r(61545),i=r(89255),a=r(5055),l=r(7526),c=r(75875),s=r.n(c),u=r(47805),p=r(24262),f=r(10284),d=r(39156);function y(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=r.n(d)()({wfsVersion:"1.1.0"}),E=w.getFeature,S=w.query,P=w.sortBy,j=w.propertyName,C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=g(e,["totalFeatures","features"]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.startIndex,a=arguments.length>2?arguments[2]:void 0;return a>t&&a===i+r.length&&t===r.length?h(h({},n),{},{features:r,totalFeatures:a}):h(h({},n),{},{features:r,totalFeatures:t})},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.pagination||!(0,o.isNil)(t.startIndex)&&!(0,o.isNil)(t.maxFeatures)&&{startIndex:t.startIndex,maxFeatures:t.maxFeatures}},T=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,u.getWFSFilterData)(t,r),l=n.parse(e,!0),c=(0,o.isObject)(l.query)?l.query:{};c.service="WFS",c.outputFormat="json";var p=n.format({protocol:l.protocol,host:l.host,pathname:l.pathname,query:c});return i.Observable.defer((function(){return s().post(p,a,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/json"}})})).let(f.oB).map((function(e){return C(e.data,x(t,r),r.totalFeatures)}))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,i=e.name,a=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=l.sortOptions,s=l.propertyName,u=g(l,["sortOptions","propertyName"]);return T(r.url||n,a&&"object"===b(a)?h(h({},a),{},{typeName:i||a.typeName}):E(S(i,[].concat(y(c?[P(c.sortBy,c.sortOrder)]:[]),y(s?[j(s)]:[]),y(a?(0,o.castArray)(a):[]))),u),u).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!c&&s&&s[0])return T(r.url||n,a&&"object"===b(a)?h(h({},a),{},{typeName:i||a.typeName}):E(S(i,[P(s[0])].concat(y(s?[j(s)]:[]),y(a?(0,o.castArray)(a):[]))),u),u);throw e}))},I=function(e){var t=e.layer;return i.Observable.defer((function(){return s().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,o=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,l=n.parse(a||o.url||i,!0);return n.format(h(h({},l),{},{search:void 0,query:h(h({},l.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(f.oB)},A=function(e){var t=e.layer;return i.Observable.defer((function(){return s().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,o=void 0===r?{}:r,i=e.url,a=(0,p.getCapabilitiesUrl)({name:t,url:o&&o.url||i}),l=n.parse(a,!0);return n.format(h(h({},l),{},{search:void 0,query:h(h({},l.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(f.oB).switchMap((function(e){return i.Observable.bindNodeCallback((function(e,t){return(0,a.parseString)(e,{tagNameProcessors:[l.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}},65633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(61545),o=r(99767),i=r(27835);function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t=e.featureType,r=e.aggregationAttribute,l=e.groupByAttributes,c=void 0===l?[]:l,s=e.aggregateFunction,u=e.viewParams,p=e.filter,f=void 0===p?"":p,d="<wfs:GetFeature ".concat(u?'viewParams="'.concat(u,'"'):"",' outputFormat="GML2" service="WFS" version="1.0.0">')+'<wfs:Query typeName="'.concat(t,'">').concat(f,"</wfs:Query></wfs:GetFeature>");return(0,i.Uh)("gs:Aggregate",[(0,o.qP)("features",(0,o.fA)("text/xml","http://geoserver/wfs","POST",d)),(0,o.qP)("aggregationAttribute",(0,o.XA)((0,o.gN)(r)))].concat(a((0,n.castArray)(s).map((function(e){return(0,o.qP)("function",(0,o.XA)((0,o.gN)(e)))}))),[(0,o.qP)("singlePass",(0,o.XA)((0,o.gN)("false")))],a((0,n.castArray)(c).map((function(e){return(0,o.qP)("groupByAttributes",(0,o.XA)((0,o.gN)(e)))})))),(0,o.DK)((0,o.En)("result","application/json")))};const s=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.mG)(e,c(t),{},r)}},99767:(e,t,r)=>{"use strict";r.d(t,{qP:()=>c,XA:()=>s,fA:()=>u,gN:()=>p,p5:()=>f,Rr:()=>d,DK:()=>y,En:()=>m,Tr:()=>b,t$:()=>g,XJ:()=>v,Dx:()=>h,Jy:()=>O});var n=r(8575),o=r(61545);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e,t){return"<wps:Input>"+"<ows:Identifier>".concat(e,"</ows:Identifier>")+t+"</wps:Input>"},s=function(e){return"<wps:Data>".concat(e,"</wps:Data>")},u=function(e,t,r,n){return'<wps:Reference mimeType="'.concat(e,'" xlink:href="').concat(t,'" method="').concat(r,'"').concat("POST"===r?"":"/",">")+("POST"===r?"<wps:Body>".concat(n,"</wps:Body></wps:Reference>"):"")},p=function(e){return"<wps:LiteralData>".concat(e,"</wps:LiteralData>")},f=function(e,t,r){return"<wps:ComplexData".concat(t?' mimeType="'.concat(t,'"'):"").concat(r?' encoding="'.concat(r,'"'):"",">").concat(e,"</wps:ComplexData>")},d=function(e){return"<![CDATA[".concat(e,"]]>")},y=function(e){return"<wps:ResponseForm>".concat(e,"</wps:ResponseForm>")},m=function(e,t){return"<wps:RawDataOutput".concat(t?' mimeType="'.concat(t,'"'):"",">")+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"</wps:RawDataOutput>"},b=function(e,t,r){return"<wps:ResponseDocument".concat(e?' storeExecuteResponse="true"':"").concat(t?' status="true"':"",">")+r+"</wps:ResponseDocument>"},g=function(e,t,r,n,o){return"<wps:Output".concat(e?' mimeType="'.concat(e,'"'):"").concat(t?' asReference="true"':"",">")+"<ows:Identifier>".concat(r,"</ows:Identifier>")+(n?"<ows:Title>".concat(n,"</ows:Title>"):"")+(o?"<ows:Abstract>".concat(o,"</ows:Abstract>"):"")+"</wps:Output>"},v=function(e){return c("writeParameters",s(f("<dwn:Parameters>".concat(e,"</dwn:Parameters>"))))},h=function(e,t){return'<dwn:Parameter key="'.concat(e,'">').concat(t,"</dwn:Parameter>")},O=function(e,t){if(e){var r=n.parse(e,!0),i=r.pathname;return((0,o.endsWith)(r.pathname,"wfs")||(0,o.endsWith)(r.pathname,"wms"))&&(i=r.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),n.format(a(a({},r),{},{search:null,pathname:i,query:a(a({service:"WPS"},t),r.query)}))}return e}},27835:(e,t,r)=>{"use strict";r.d(t,{Uh:()=>S,W5:()=>P,ai:()=>x,RW:()=>T,dr:()=>k,mG:()=>A});var n=r(61545),o=r(89255),i=r(5055),a=r(7526),l=r(75875),c=r.n(l),s=r(99767);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return v(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),O(n,e)})(e)}function v(e,t,r){return(v=h()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&O(o,r.prototype),o}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(o,e);var t,r,n=(t=o,r=h(),function(){var e,n=w(t);if(r){var o=w(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return b(this,e)});function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(r=n.call(this,e)).name="WPSExecuteError",r.code=t||e,r}return o}(g(Error)),S=function(e,t,r){return'<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:dwn="http://geoserver.org/wps/download" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"<wps:DataInputs>"+(t||[]).join("")+"</wps:DataInputs>"+(r||"")+"</wps:Execute>"},P=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.Observable.defer((function(){return c().get((0,s.Jy)(e,{version:"1.0.0",REQUEST:"GetExecutionStatus",executionId:t}),y({headers:{Accept:"application/xml"}},r))}))},j=function(e,t){var r,o,i=function(e){var t,r,o,i,a,l,c,s,u,p,f,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.identity,y=null==e||null===(t=e.ExecuteResponse)||void 0===t||null===(r=t.Status)||void 0===r?void 0:r[0];return null!=y&&y.ProcessAccepted?{status:"ProcessAccepted"}:null!=y&&y.ProcessStarted?{status:"ProcessStarted"}:null!=y&&y.ProcessSucceeded?{status:"ProcessSucceeded",data:d(null===(o=e.ExecuteResponse.ProcessOutputs)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.Output)}:null!=y&&y.ProcessFailed?{status:"ProcessFailed",exceptionReport:null==y||null===(a=y.ProcessFailed)||void 0===a||null===(l=a[0])||void 0===l||null===(c=l.ExceptionReport)||void 0===c||null===(s=c[0])||void 0===s||null===(u=s.Exception)||void 0===u||null===(p=u[0])||void 0===p||null===(f=p.ExceptionText)||void 0===f?void 0:f[0]}:null!=y&&y.ProcessPaused?{status:"ProcessPaused"}:{status:"UnexpectedStatus"}}(e,t);if("ProcessFailed"===i.status)throw new E(i.exceptionReport,"ProcessFailed");if("UnexpectedStatus"===i.status)throw new E("UnexpectedProcessStatus");if("ProcessSucceeded"===i.status)return{succeeded:!0,data:i.data};var a=null==e||null===(r=e.ExecuteResponse)||void 0===r||null===(o=r.$)||void 0===o?void 0:o.statusLocation;if(!a)throw new E("NoStatusLocation");var l=a.indexOf("executionId=");if(-1===l)throw new E("NoExecutionId");var c=a.slice(l+12),s=c.indexOf("&");return{succeeded:!1,executionId:-1===s?c:c.slice(0,s)}},C=function(e){var t,r;return null!=e&&null!==(t=e.Identifier)&&void 0!==t&&t[0]?{identifier:null==e||null===(r=e.Identifier)||void 0===r?void 0:r[0]}:null},x=function(e){var t,r,n,o,i;return null!=e&&null!==(t=e.Data)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.LiteralData?{data:null==e||null===(n=e.Data)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.LiteralData)||void 0===i?void 0:i[0]}:null},T=function(e){var t,r,n,o,i,a;return null!=e&&e.Reference?{href:null==e||null===(t=e.Reference)||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.$)||void 0===n?void 0:n.href,mimeType:null==e||null===(o=e.Reference)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.$)||void 0===a?void 0:a.mimeType}:null},k=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return[C].concat(p(t||[])).map((function(t){return t(e)})).reduce((function(e,t){return t?y(y({},e),t):e}),{})}))}},I=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.Observable.defer((function(){return c().post((0,s.Jy)(e,{version:"1.0.0",REQUEST:"Execute"}),t,y({headers:{"Content-Type":"application/xml"}},r))}))},A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=r.executeStatusUpdateInterval,c=void 0===l?2e3:l,s=r.outputsExtractor,u=function(e){return o.Observable.defer((function(){return new Promise((function(t,r){return(0,i.parseString)(e,{tagNameProcessors:[a.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))};return I(e,t,n).catch((function(){throw new E("ExecuteProcessXHRFailed")})).switchMap((function(e){return"application/xml"===e.headers["content-type"]||"text/xml"===e.headers["content-type"]?u(e.data).map((function(t){return{data:t,type:"application/xml",originalData:e.data}})):o.Observable.of({data:e.data,type:e.headers["content-type"]})})).flatMap((function(t){var r=t.data,n=t.type,i=t.originalData;if("application/xml"!==n)return o.Observable.of(r);if(null==r||!r.ExecuteResponse)return o.Observable.of(i);var a=j(r,s),l=a.succeeded,p=a.data,f=a.executionId;if(l)return o.Observable.of(p);var d=o.Observable.interval(c).take(1).flatMap((function(){return P(e,f).catch((function(){throw new E("GetExecutionStatusXHRFailed")})).flatMap((function(e){return u(e.data).flatMap((function(e){var t=j(e,s);return t.succeeded?o.Observable.of(t.data):d}))}))}));return d}))}},53818:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(31273),o=r(81808),i=r(61868),a=r(61545),l=r(27418),c=r.n(l),s=r(55877),u=r.n(s);function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={url:"",type:"wms",title:"",isNew:!0,autoload:!1,showAdvancedSettings:!1,showTemplate:!1,hideThumbnail:!1,metadataTemplate:"<p>${description}</p>"};const b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:{services:{},selectedService:"",newService:{}},delayAutoSearch:1e3,loading:!1,pageSize:4,services:{},selectedService:"",newService:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.eA:return d(d({},e),{},{saving:t.status});case n.HR:return c()({},e,{result:t.result,searchOptions:t.searchOptions,loadingError:null,layerError:null,loading:!1});case n.xi:return c()({},e,{result:null,loadingError:null,searchOptions:null});case n.vK:return c()({},e,{result:null,searchOptions:null,loadingError:t.error,loading:!1,layerError:null});case n.nm:return c()({},e,{result:null,loadingError:null,format:t.format,layerError:null});case n.QF:return c()({},e,{layerError:t.error});case n.uN:return c()({},e,{newService:t.isNew?m:c()({},e.services&&e.services[e.selectedService||""]||{},{oldService:e.selectedService||""}),mode:t.mode,result:null,loadingError:null,layerError:null});case o.ok:return e&&!(0,a.isNil)(e.default)?t.config&&!(0,a.isNil)(t.config.catalogServices)?c()({},e,{services:t.config.catalogServices.services,selectedService:t.config.catalogServices.selectedService}):c()({},e,{services:e.default.services,selectedService:e.default.selectedService}):e;case n.YO:return(0,i.t8)("openCatalogServiceList",t.status,e);case n.CO:return(0,i.t8)("searchOptions.text",t.text,e);case n.Mt:return(0,i.t8)('newService["'.concat(t.property,'"]'),t.value,e);case n.im:return(0,i.t8)("newService.title",t.title,e);case n.PR:return(0,i.t8)("newService.url",t.url,e);case n.Oq:return(0,i.t8)("newService.format",t.format,e);case n.$X:var r=t.newType.toLowerCase(),l={};return"csw"!==r&&(l={showTemplate:!1,metadataTemplate:""}),c()({},e,{newService:c()({},e.newService,d({type:r},l))});case n.wI:var s=t.service,f=s.isNew,b=p(s,["isNew"]),g=f?b.title+u()():e.selectedService,v=c()({},e.services,y({},g,b));return c()({},e,{services:v,selectedService:g,mode:"view",result:null,loadingError:null,searchOptions:c()({},e.searchOptions,{text:""}),layerError:null});case n.zZ:return t.service!==e.selectedService?c()({},e,{selectedService:t.service,result:null,loadingError:null,layerError:null}):e;case n.bv:var h,O="";return delete(h=c()({},e.services))[t.service],Object.keys(h).length&&(O=h[Object.keys(h)[0]].title),c()({},e,{services:h,selectedService:O,mode:"view",result:null,loadingError:null,layerError:null});case n.Kz:return(0,i.t8)("newService.hideThumbnail",!e.newService.hideThumbnail,e);case n.cS:return(0,i.t8)("loading",t.loading,e);case n.Bz:return(0,i.t8)("newService.metadataTemplate",t.metadataTemplate,e);case n.l3:var w=(0,i.t8)("newService.showTemplate",!e.newService.showTemplate,e);return w.newService.showTemplate&&(w=(0,i.t8)("newService.metadataTemplate",w.newService.metadataTemplate||"<p>${description}</p>",w)),w;case n.vg:return(0,i.t8)("newService.showAdvancedSettings",!e.newService.showAdvancedSettings,e);default:return e}}},78113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(89602),o=r(82904),i=r(61868),a=r(62192),l=r(38946),c=r(61545),s=r(27418),u=r.n(s);function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={lineMeasureEnabled:!0,geomType:"LineString",areaMeasureEnabled:!1,bearingMeasureEnabled:!1,customStartEndPoint:{startPointOptions:{radius:3,fillColor:"green"},endPointOptions:{radius:3,fillColor:"red"}},uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},lengthFormula:"haversine",showLabel:!0,showSegmentLengths:!0,currentFeature:0,features:[]};const v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.lD:var r,s=(0,c.findIndex)(e.features,(function(e){return("bearing"===(e.properties.values[0]||{}).type?"Bearing":e.geometry.type)===t.geomType}));return u()({},e,{lineMeasureEnabled:t.geomType!==e.geomType&&"LineString"===t.geomType,areaMeasureEnabled:t.geomType!==e.geomType&&"Polygon"===t.geomType,bearingMeasureEnabled:t.geomType!==e.geomType&&"Bearing"===t.geomType,geomType:t.geomType===e.geomType?null:t.geomType,features:null===t.geomType?[]:e.features,textLabels:null===t.geomType?[]:e.textLabels,feature:{properties:{disabled:!0}},currentFeature:-1!==s?s:(null===(r=e.features)||void 0===r?void 0:r.length)||0,len:0,area:0,bearing:0});case n.yK:var f=t.feature;return(0,l.oU)(f)&&(f=(0,i.t8)("geometry.coordinates[0]",(0,c.dropRight)(f.geometry.coordinates[0]),f)),u()({},e,{lineMeasureEnabled:t.lineMeasureEnabled,areaMeasureEnabled:t.areaMeasureEnabled,bearingMeasureEnabled:t.bearingMeasureEnabled,geomType:t.geomType,values:t.values,feature:(0,i.t8)("properties.disabled",e.feature.properties.disabled,f),point:t.point,len:t.len,area:t.area,bearing:t.bearing,lenUnit:t.lenUnit,areaUnit:t.areaUnit});case n.sc:var y=t.measures,v=y.point,h=y.len,O=y.area,w=y.bearing;return m(m({},e),{},{point:v,len:h,area:O,bearing:w});case n.Qw:var E=(0,i.t8)("feature.properties.disabled",!0,e);return m(m({},E),{},{isDrawing:!0,updatedByUI:!1});case n.gf:var S,P="length"===t.uom?"lenUnit":"lenArea",j=t.value,C=j.value,x=j.label;return u()({},e,(b(S={},P,C),b(S,"uom",u()({},t.previousUom,b({},t.uom,{unit:C,label:x}))),b(S,"updatedByUI",!0),S));case n.Qr:var T=t.features,k=(0,a.k2)(T);return m(m({},e),{},{features:T,geomTypeSelected:k,currentFeature:T.length-1,updatedByUI:!1,isDrawing:!1},(0,c.isEmpty)(T)&&{exportToAnnotation:!1});case n.Kf:var I=t.property,A=t.value;return m(m({},e),{},b({},I,A));case n.ES:var F=t.features,D=t.properties,R=(0,a.k2)(F);return m(m({},e),{},{features:F,geomTypeSelected:R,updatedByUI:!0,isDrawing:!1,exportToAnnotation:!0,id:D.id,visibility:D.visibility});case n.Kx:return m(m({},e),{},{textLabels:t.textLabels});case n.V:return m(m({},e),{},{currentFeature:(0,c.isNumber)(t.featureIndex)?t.featureIndex:e.features.length});case o.kM:e.id;var N=d(e,["id"]);return"info"===t.control?m(m({},N),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""}):"measure"===t.control?m(m({},N),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case o.At:return"measure"===t.control&&!1===t.value?m(m({},e),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case o.l:return m(m({},e),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""});case n.GI:return m(m({},e),{},{format:t.format});case n.qg:return m(m({},e),t.defaultOptions);case n.MT:var _=t.coordinates.map((function(e){return[e.lon,e.lat]})),L=e.features||[],M=L[e.currentFeature]||{},Z=_.filter((function(e){return!isNaN(parseFloat(e[0]))&&!isNaN(parseFloat(e[1]))})).length!==_.length;return m(m({},e),{},{feature:{type:"Feature",properties:{disabled:_.filter((function(e){return!isNaN(parseFloat(e[0]))&&!isNaN(parseFloat(e[1]))})).length!==_.length},geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[(0,c.dropRight)(_)]:_}},features:[].concat(p(L.slice(0,e.currentFeature)),[m(m({},M),{},{type:"Feature",properties:m(m({},M.properties||{}),{},{disabled:Z||e.bearingMeasureEnabled&&_.length<2}),geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[[].concat(p(_),[_[0]])]:_}})],p(L.slice(e.currentFeature+1,L.length))),updatedByUI:!0});default:return e}}},97080:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(97395);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case n.e2:t.type;var r=s(t,["type"]);return[].concat(l(e),[i({},r)]);case n.Zz:return e.filter((function(e){return e.uid!==t.uid}));case n.wt:return[];default:return e}}},97301:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(95797),o=r(7878),i=r(82904),a=r(27418),l=r.n(a);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){return["STATE_NAME","STATE_ABBR","SUB_REGION","STATE_FIPS"].map((function(t){return{attribute:t,values:e.features.reduce((function(e,r){return-1===e.indexOf(r.properties[t])?[].concat((n=e,function(e){if(Array.isArray(e))return s(e)}(n)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r.properties[t]]).sort():e;var n}),[])}})).reduce((function(e,t){return l()(e,c({},t.attribute,t.values.map((function(e){return{id:e,name:e}}))))}),{})},p={featureTypes:{},data:{},result:null,resultError:null,syncWmsFilter:!1,isLayerFilter:!1};const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.S0:return l()({},e,{typeName:t.typeName,url:t.url});case n.u7:return l()({},e,{featureTypes:l()({},e.featureTypes,c({},t.typeName,t.featureType))});case n.lN:return l()({},e,{featureTypes:l()({},e.featureTypes,c({},t.typeName,{error:t.error}))});case n.yz:return l()({},e,{featureLoading:t.isLoading});case n.lj:return l()({},e,{featureLoading:!1,data:l()({},e.data,c({},t.typeName,u(t.feature)))});case n.zW:return l()({},e,{featureLoading:!1,featureTypes:l()({},e.data,c({},t.typeName,{error:t.error}))});case n.Yx:return l()({},e,{isNew:!0,searchUrl:t.searchUrl,filterObj:t.filterObj});case n.VN:return l()({},e,{filterObj:l()({},e.filterObj,t.updates)});case n.Hu:return l()({},e,{isNew:!1,result:t.result,searchUrl:t.searchUrl,filterObj:t.filterObj,resultError:null});case n.VT:return l()({},e,{isNew:!1,result:null,resultError:t.error});case i.l:case o.Eg:return t.skip&&t.skip.indexOf("query")>=0?e:l()({},e,{isNew:!1,result:null,filterObj:null,searchUrl:null});case n.RD:return l()({},e,{result:null,resultError:null});case n._T:return l()({},e,{syncWmsFilter:!e.syncWmsFilter});case n.vO:return l()({},e,{isLayerFilter:!e.isLayerFilter});default:return e}}},46905:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(7878),o=r(4206),i=r(27418),a=r.n(i),l=r(19412),c=r.n(l),s=r(94707),u=r.n(s),p=r(61545),f=r(61868);function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={searchUrl:null,featureTypeConfigUrl:null,showGeneratedFilter:!1,attributePanelExpanded:!0,spatialPanelExpanded:!0,crossLayerExpanded:!0,showDetailsPanel:!1,groupLevels:5,useMapProjection:!1,toolbarEnabled:!0,groupFields:[{id:1,logic:"OR",index:0}],maxFeaturesWPS:5,filterFields:[],spatialField:{method:null,attribute:"the_geom",operation:"INTERSECTS",geometry:null},simpleFilterFields:[]},w=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a()({},t,(h(e={},r.fieldName,r.fieldValue),h(e,"type",r.fieldType),e),{fieldOptions:a()({},v({},t.fieldOptions),{currentPage:void 0===r.fieldOptions.currentPage?1:r.fieldOptions.currentPage})});return"attribute"===r.fieldName&&(n.value="string"===r.fieldType?"":null,n.operator="="),"operator"===r.fieldName&&(n.value=null),n};const E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.E6:var r={rowId:(new Date).getTime(),groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};return a()({},e,{filterFields:e.filterFields?[].concat(m(e.filterFields),[r]):[r]});case n.vo:return a()({},e,{filterFields:e.filterFields.filter((function(e){return e.rowId!==t.rowId}))});case n.l1:return a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?w(e,t):e}))});case n.o7:return a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?a()({},e,{options:a()({},v({},e.options),h({},e.attribute,t.options))},{fieldOptions:a()({},v({},e.fieldOptions),{valuesCount:t.valuesCount})}):e}))});case n.Sm:return a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?a()({},e,{openAutocompleteMenu:t.status}):e}))});case n.D6:return a()({},e,{autocompleteEnabled:t.status});case n.Nr:return a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?a()({},e,{loading:t.status}):e}))});case n.J9:return a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?a()({},e,{exception:t.exceptionMessage}):e}))});case n.U:var i={id:(new Date).getTime(),logic:"OR",groupId:t.groupId,index:t.index+1};return a()({},e,{groupFields:e.groupFields?[].concat(m(e.groupFields),[i]):[i]});case n.z8:return a()({},e,{groupFields:e.groupFields.map((function(e){return e.id===t.groupId?a()({},e,{logic:t.logic}):e}))});case n.ql:return a()({},e,{filterFields:e.filterFields.filter((function(e){return e.groupId!==t.groupId})),groupFields:e.groupFields.filter((function(e){return e.id!==t.groupId}))});case n.O_:return a()({},e,{filterFields:e.filterFields.map((function(e){for(var r=0;r<t.attributes.length;r++)if(e.attribute===t.attributes[r].id)return a()({},e,{value:null});return e}))});case n.M$:return a()({},e,{attributePanelExpanded:t.expand});case n.Ug:return a()({},e,{spatialPanelExpanded:t.expand});case n.p5:return a()({},e,{crossLayerExpanded:t.expand});case n.Fz:return a()({},e,{crossLayerFilter:(0,f.t8)(t.key,t.value,e.crossLayerFilter)});case n.Gf:return(0,f.vy)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId,groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null},{rowId:t.rowId},e);case n.nh:return(0,f.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",((0,p.get)(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===t.rowId?w(e,t):e})),e);case n.Rf:return(0,f.z6)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId},e);case n.WZ:return a()({},e,{crossLayerFilter:{attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute}});case n.bP:var l;return a()({},e,{spatialField:a()({},e.spatialField,(l={},h(l,t.fieldName,t.method),h(l,"geometry",null),l))});case n.d_:return a()({},e,{spatialField:a()({},e.spatialField,{geometry:t.geometry})},{toolbarEnabled:!0});case n.xM:return a()({},e,{spatialField:a()({},e.spatialField,h({},t.fieldName,t.operation))});case n.bl:return a()({},e,{spatialField:a()({},e.spatialField,{attribute:t.attribute}),crossLayerFilter:a()({},e.crossLayerFilter,{attribute:t.attribute})});case o.hZ:return"queryform"===t.owner&&"start"===t.status?a()({},e,{toolbarEnabled:!1}):e;case n.Wi:return a()({},e,{toolbarEnabled:!0,spatialField:a()({},e.spatialField,{value:t.value,collectGeometries:t.collectGeometries,geometry:t.srsName?v(v({},t.geometry),{},{projection:t.srsName}):t.geometry})});case o.pb:return"queryform"===t.owner?a()({},e,{toolbarEnabled:!0,spatialField:a()({},e.spatialField,{collectGeometries:t.collectGeometries,geometry:t.geometry})}):e;case n.PN:var s=a()({},O.spatialField,{attribute:e.spatialField.attribute,value:void 0});return a()({},e,{spatialField:a()({},e.spatialField,s)});case n._M:return a()({},e,{showDetailsPanel:t.show});case n.Eg:var b=a()({},O.spatialField,{attribute:e.spatialField.attribute,value:void 0}),g={attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute};return a()({},e,O,{spatialField:b,crossLayerFilter:g});case n.V1:return a()({},e,{showGeneratedFilter:t.data});case n.cY:return a()({},e,{spatialField:a()({},e.spatialField,{geometry:a()({},e.spatialField.geometry,{distance:t.distance})})});case n.co:return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id&&t.data.features&&t.data.features.length>0?a()({},e,{values:t.data.features,open:!0,error:null}):e}))})});case n.RD:return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?a()({},e,{busy:t.active}):e}))})});case n.uY:var E,S,P=e.spatialField.zoneFields.map((function(e){if(e.id===t.id){if(E=e.multivalue?t.value.value:t.value.value[0],t.value.feature[0]){var r=t.value.feature[0],n=r.geometry_name;if(e.multivalue&&t.value.feature.length>1){for(var o=1;o<t.value.feature.length;o++){var i=t.value.feature[o];i&&(r=c()(r,i))}S={coordinates:r.geometry.coordinates,geometryName:n,geometryType:r.geometry.type}}else S={coordinates:r.geometry.coordinates,geometryName:n,geometryType:r.geometry.type}}return a()({},e,{value:E,open:!1,geometryName:S?S.geometryName:null})}return e.dependson&&t.id===e.dependson.id?a()({},e,{disabled:!1,values:null,value:null,open:!1,dependson:a()({},e.dependson,{value:E})}):e})),j=u()({type:"FeatureCollection",features:t.value.feature});return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:P,geometry:j&&S?{extent:j,type:S.geometryType,coordinates:S.coordinates}:null})});case n.H8:return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){var t=a()({},e,{values:null,value:null,open:!1,error:null});return e.dependson?a()({},t,{disabled:!0,open:!1,value:null,dependson:a()({},e.dependson,{value:null})}):t})),geometry:null})});case n.Hl:var C;return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?(C="object"!==y(t.error)?t.error.status&&t.error.statusText&&t.error.data?{status:t.error.status,statusText:t.error.statusText,data:t.error.data}:{message:t.error.message||"unknown error"}:t.error,a()({},e,{error:C,busy:!1})):e}))})});case n.je:var x=e.simpleFilterFields.reduce((function(e,r){return r.fieldId===t.id?e.push(v(v({},r),t.properties)):e.push(r),e}),[]);return v(v({},e),{},{simpleFilterFields:x});case n.go:var T=t.properties.fieldId?t.properties:v(v({},t.properties),{},{fieldId:(new Date).getTime()}),k=e.simpleFilterFields?[].concat(m(e.simpleFilterFields),[T]):[T];return v(v({},e),{},{simpleFilterFields:k});case n._8:return v(v({},e),{},{simpleFilterFields:e.simpleFilterFields.filter((function(e){return e.fieldId!==t.id}))});case n.xd:return v(v({},e),{},{simpleFilterFields:[]});case n.Ef:var I=O.spatialField,A=(I.attribute,d(I,["attribute"])),F=a()({},O,{spatialField:v({},A)}),D=t.filter||F,R=D.spatialField,N=D.filterFields,_=D.groupFields,L=D.crossLayerFilter,M=D.attributePanelExpanded,Z=D.spatialPanelExpanded,G=D.crossLayerExpanded;return v(v({},e),{attributePanelExpanded:M,spatialPanelExpanded:Z,crossLayerExpanded:G,spatialField:v(v({},R),{},{attribute:R&&R.attribute||e.spatialField&&e.spatialField.attribute}),filterFields:N,groupFields:_,crossLayerFilter:v(v({},L),{},{attribute:L&&L.attribute||e.crossLayerFilter&&e.crossLayerFilter.attribute})});default:return e}}},60951:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(40626),o=r(82904),i=r(81808),a=r(27418),l=r.n(a);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.bL:return l()({},e,c({},t.property,t.value));case i.ok:var r=t.config.map.text_search_config||t.config.map.text_serch_config;return l()({},e,{textSearchConfig:r});case o.l:case n.f6:return l()({},e,{service:void 0,page:t.page,init_service_values:void 0,editIdx:void 0});case n.E_:var a=(e.textSearchConfig&&e.textSearchConfig.services||[]).slice(),s=l()({},t.service,{priority:parseInt(t.service.priority,10)});return-1!==t.idx?a[t.idx]=s:a.push(s),l()({},e,{service:void 0,page:0,init_service_values:void 0,editIdx:void 0,textSearchConfig:{services:a,override:e.textSearchConfig&&e.textSearchConfig.override||!1}});default:return e}}},32244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(96909),o=r(37153),i=r.n(o);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.wL:return l(l({},e),{},{service:t.service,canEdit:t.canEdit});case n.Nm:return l(l({},e),{},{canEdit:t.canEdit});case n.gF:return l(l({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case n.g$:return""===t.status?l(l({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):l(l({},e),{},{status:t.status});case n.dJ:return{service:e.service&&l({},e.service)||{},canEdit:e.canEdit,loading:e.loading};case n.uz:return l(l({},e),{},{addStyle:t.add});case n.lX:return l(l({},e),{},{loading:!t.status||t.status});case n.E2:return l(l({},e),{},{loading:!1,enabled:!0});case n.mF:var r,o,a,s=(null==t||null===(r=t.error)||void 0===r?void 0:r.statusText)||(null==t||null===(o=t.error)||void 0===o?void 0:o.message)||"",u=i()(null==t||null===(a=t.error)||void 0===a?void 0:a.messageId)&&{messageId:t.error.messageId},p=s.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),f=p&&2===p.length&&p.reduce((function(e,t){var r=t.split(" "),n=r[0].replace(/Number:/g,""),o=parseFloat(r[1]);return n&&!isNaN(o)&&l(l({},e),{},c({},n,o))||l({},e)}),l({message:s},u))||l({message:s},u);return l(l({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status||t.error.message&&-1!==t.error.message.indexOf("could not be unmarshalled"))),error:l(l({},e.error),{},c({},t.status||"global",l({status:t.error&&t.error.status||404},f)))});case n.dk:return l(l({},e),{},{metadata:l(l({},e.metadata),t.metadata)});default:return e}}},75859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(57579),o=r(81808),i=r(55927),a=r(27418),l=r.n(a),c=r(3569),s=r.n(c),u=r(61545),p=r(61868);function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};const v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.Cz:return s()("builder.settings.".concat(r.key),r.value,t);case n.n8:return s()("builder.editor",r.widget,s()("builder.settings",r.settings||g.settings,t));case n.dm:return s()("builder.editor",m(m({},r.widget),{},{widgetType:r.widget&&r.widget.widgetType||"chart"}),s()("builder.settings.step","chart"===(r.widget&&r.widget.widgetType||"chart")?1:0,t));case n.BV:return s()("builder.editor.".concat(r.key),r.value,t);case n.Jm:var a=(0,p.vy)("containers[".concat(r.target,"].widgets"),m(m({id:r.id},r.widget),{},{dataGrid:r.id&&{y:0,x:0,w:1,h:1}}),{id:r.widget.id||r.id},t);return a;case n.$A:var c=(0,u.find)((0,u.get)(t,"containers[".concat(r.target,"].widgets")),{id:r.id});return(0,p.vy)("containers[".concat(r.target,"].widgets"),s()(r.key,"merge"===r.mode?l()({},c[r.key],r.value):r.value,c),{id:r.id},t);case n.eb:if(r.layer){var d=(0,u.get)(t,"containers[".concat(n.VR,"].widgets"));if(d)return s()("containers[".concat(n.VR,"].widgets"),d.map((function(e){return(0,u.get)(e,"layer.id")===r.layer.id?s()("layer",r.layer,e):e})),t)}return t;case n.yY:return(0,p.z6)("containers[".concat(r.target,"].widgets"),{id:r.widget.id},t);case i.E9:var y=r.data;return s()("containers[".concat(n.VR,"]"),m({},y),t);case o.ok:var b=r.config||{},v=b.widgetsConfig;return s()("containers[".concat(n.VR,"]"),m({},v),t);case n.v8:return s()("containers[".concat(r.target,"].layout"),r.layout)(s()("containers[".concat(r.target,"].layouts"),r.allLayouts,t));case n.ff:case i.R4:return s()("containers[".concat(n.VR,"]"),g.containers[n.VR],t);case n.S0:var h=r.key,O=r.value;return s()("dependencies[".concat(h,"]"),O,t);case n.Q6:var w=r.key;return s()("dependencies[".concat(w,"]"),null,t);case n.kb:var E=r.dependencies;return s()("dependencies",E,t);case n.GV:return s()("dependencies",g.dependencies,t);case n.Ym:var S=r.widget,P=void 0===S?{}:S;if(P.dataGrid&&P.dataGrid.static)return t;var j=(0,u.get)(t,"containers[".concat(r.target,"].collapsed[").concat(P.id));if(j){var C=[].concat(f((0,u.get)(t,"containers[".concat(r.target,"].layout"),[])),f((0,u.castArray)((0,u.get)(j,"layout",[])))),x=(0,u.mapValues)((0,u.get)(t,"containers[".concat(r.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(f(e),f((0,u.castArray)((0,u.get)(j,"layouts[".concat(t,"]"),[]))))}));return(0,u.omit)((0,p.qC)(s()("containers[".concat(r.target,"].layout"),C),s()("containers[".concat(r.target,"].layouts"),x))(t),"containers[".concat(r.target,"].collapsed[").concat(P.id,"]"))}return s()("containers[".concat(r.target,"].collapsed[").concat(P.id,"]"),{layout:(0,u.find)((0,u.get)(t,"containers[".concat(r.target,"].layout"),[]),{i:P.id}),layouts:(0,u.mapValues)((0,u.get)(t,"containers[".concat(r.target,"].layouts"),{}),(function(e){return(0,u.find)(e,{i:P.id})}))},t);case n.ke:var T,k,I,A,F,D,R,N,_,L,M,Z,G,B,z,U,W,V,q=r.widget,H=null==t||null===(T=t.containers)||void 0===T||null===(k=T[r.target])||void 0===k?void 0:k.maximized;if(!q||null!==(I=q.dataGrid)&&void 0!==I&&I.static)return t;if(null!=H&&H.widget)return(0,p.qC)(s()("containers[".concat(r.target,"].layout"),H.layout),s()("containers[".concat(r.target,"].layouts"),H.layouts),s()("containers[".concat(r.target,"].maximized"),{}),s()("containers[".concat(r.target,"].widgets"),null==t||null===(U=t.containers)||void 0===U||null===(W=U[r.target])||void 0===W||null===(V=W.widgets)||void 0===V?void 0:V.map((function(e){return e.id===H.widget.id?m(m({},e),{},{dataGrid:m(m({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e}))))(t);if(null!=t&&null!==(A=t.containers)&&void 0!==A&&null!==(F=A[r.target])&&void 0!==F&&null!==(D=F.collapsed)&&void 0!==D&&D[q.id])return t;var $={x:0,y:0,w:1,h:1},Y=(0,u.find)(null==t||null===(R=t.containers)||void 0===R||null===(N=R[r.target])||void 0===N?void 0:N.layout,{i:q.id}),K=m(m({},Y),$);return(0,p.qC)(s()("containers[".concat(r.target,"].maximized"),{widget:q,layout:null==t||null===(_=t.containers)||void 0===_||null===(L=_[r.target])||void 0===L?void 0:L.layout,layouts:null==t||null===(M=t.containers)||void 0===M||null===(Z=M[r.target])||void 0===Z?void 0:Z.layouts}),s()("containers[".concat(r.target,"].layout"),[K]),s()("containers[".concat(r.target,"].layouts"),{xxs:[K]}),s()("containers[".concat(r.target,"].widgets"),null==t||null===(G=t.containers)||void 0===G||null===(B=G[r.target])||void 0===B||null===(z=B.widgets)||void 0===z?void 0:z.map((function(e){return e.id===q.id?m(m({},e),{},{dataGrid:m(m({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e}))))(t);case n.uU:var X=(0,u.get)(t,"containers[".concat(r.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),Q=X.filter((function(e){return(0,u.get)(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),J=X.filter((function(e){return!(0,u.get)(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),ee=0===J.length;return ee?Q.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):J.length>0?J.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):t;case n.nw:return s()("tray",r.value,t);default:return t}}},67306:(e,t,r)=>{"use strict";r.d(t,{Wy:()=>i,i$:()=>a,P0:()=>l});var n=r(22222),o=r(24684),i=function(e){return e&&e.dashboard&&e.dashboard.editor&&e.dashboard.editor.available},a=function(e){return e&&e.dashboard&&e.dashboard.editing},l=function(e){return e&&e.dashboard&&e.dashboard.showConnections};(0,n.P1)(o.F,(function(e){return e&&e.dashboard&&e.dashboard.resource}),(function(e){return e&&e.browser&&e.browser.mobile}),(function(e,t,r){return r?!r:t&&t.canEdit||isNaN(e.substr(-4))}))},66113:(e,t,r)=>{"use strict";r.d(t,{Kg:()=>o});var n=r(61545);r(92579),r(74621),r(24684);var o=function(e){return(0,n.get)(e,"geostory.currentStory")}},24684:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var n=r(61545),o=function(e){return(0,n.get)(e,"router.location.pathname")||"/"}},93222:(e,t,r)=>{"use strict";r.d(t,{gc:()=>s,Mc:()=>u,ex:()=>p,p:()=>f,aN:()=>d,iB:()=>y,j5:()=>m,gB:()=>b,QW:()=>g,w_:()=>v,ji:()=>h,Z0:()=>O,z_:()=>w,Vf:()=>E,lC:()=>S,m2:()=>P,i7:()=>j,Ed:()=>C,ov:()=>x,WW:()=>T,Ri:()=>k});var n=r(61545),o=r(75110),i=r(99009);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return(0,n.get)(e,"styleeditor.temporaryId")},u=function(e){return(0,n.get)(e,"styleeditor.templateId")},p=function(e){return(0,n.get)(e,"styleeditor.status")},f=function(e){return(0,n.get)(e,"styleeditor.error")||{}},d=function(e){return(0,n.get)(e,"styleeditor.loading")},y=function(e){return(0,n.get)(e,"styleeditor.format")||"css"},m=function(e){return(0,n.get)(e,"styleeditor.languageVersion")||{}},b=function(e){return(0,n.get)(e,"styleeditor.code")},g=function(e){return(0,n.get)(e,"styleeditor.initialCode")||""},v=function(e){return(0,n.get)(e,"styleeditor.addStyle")||""},h=function(e){return(0,n.get)(e,"styleeditor.enabled")},O=function(e){return(0,n.get)(e,"styleeditor.service")||{}},w=function(e){return(0,n.get)(e,"styleeditor.canEdit")},E=function(e){var t=(0,o.jN)(e);return l(l({},(0,o.Iz)(e)||{}),t&&t.options||{})},S=function(e){var t=E(e),r=(0,i.Py)(t).geometryType;return void 0===r?"vector":r},P=function(e){var t=E(e),r=(0,i.Py)(t).properties;return void 0===r?{}:r},j=function(e){var t=E(e);return t.style||t.availableStyles&&t.availableStyles[0]&&t.availableStyles[0].name},C=function(e){var t=(E(e)||{}).availableStyles,r=void 0===t?[]:t,o=j(e);return(0,n.head)(r.filter((function(e){return e.name===o})).map((function(e){return e.format})))},x=function(e){var t=E(e),r=t.availableStyles||[],o=((0,n.head)(r)||{}).name,a=t.style||t&&!t.style&&o;return{availableStyles:(0,n.uniqBy)(r.map((function(e){var t=e&&e.title&&(0,n.isString)(e.title)&&e.title.split(i.I$),r=t&&t[0]||e.name;return l(l({},e),{},{label:r})})),"name"),defaultStyle:o,enabledStyle:a}},T=function(e){var t;return null==e||null===(t=e.styleeditor)||void 0===t?void 0:t.metadata},k=function(e){var t=(E(e)||{}).availableStyles,r=void 0===t?[]:t,o=j(e);return((0,n.find)(r,(function(e){var t=e.name;return o===t}))||{}).metadata||{}}},1757:(e,t,r)=>{"use strict";r.d(t,{E2:()=>m,YI:()=>v,GW:()=>h,zm:()=>O,lF:()=>w,Jb:()=>E,E5:()=>S,YR:()=>P,jx:()=>x,zA:()=>T,r0:()=>k,xI:()=>I,p:()=>A,yZ:()=>F,Xu:()=>D,Wo:()=>R,um:()=>N,h9:()=>_});var n=r(61545),o=r(827),i=r(75110),a=r(24684),l=r(57579),c=r(46781),s=r(67306),u=r(22222),p=r(84715);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){return(0,n.get)(e,"widgets.builder.settings")},b=function(e){return(0,n.get)(e,"widgets.dependencies")||{}},g=function(e){return Object.keys(b(e)).map((function(t){return b(e)[t]}))},v=function(e){return(0,n.get)(e,"widgets.builder.editor")},h=(0,u.P1)(v,i.Iz,(function(e){return(0,s.Wy)(e)&&(0,s.i$)(e)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t||!n&&r})),O=function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].widgets"))},w=function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].collapsed"))},E=function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].maximized"))},S=(0,u.P1)(O,w,E,(function(e,t,r){if(e){if(null!=r&&r.widget)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t===r.widget.id}));if(t)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id;return!t[r]}))}return e})),P=(0,u.P1)(w,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),j=function(e){return(O(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"map"===t}))},C=function(e){return(O(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"table"===t}))},x=(0,u.P1)(j,C,o.Od,a.F,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0;return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat((0,n.castArray)(r).map((function(){return"map"}))).concat((0,n.castArray)(t).filter((function(){return-1===o.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),T=(0,u.P1)(j,C,o.Od,a.F,v,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=i&&"map"!==i.widgetType?i&&i.layer||{}:i&&i.map&&i.map.layers||[];return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat((0,n.castArray)(r).map((function(){return r?"map":null}))).filter((function(e){return e})).concat((0,n.castArray)(t).filter((function(){return-1===o.indexOf("viewer")})).filter((function(e){return(0,n.isArray)(a)||a.name===e.layer.name})).filter((function(e){return i&&i.id!==e.id})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),k=function(e){return(0,n.get)(m(e),"".concat(l.jv))},I=function(e){return(0,n.get)(k(e),"active")},A=((0,u.P1)(O,(function(e){return(0,c.Ug)(e)})),function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].layouts"))}),F=function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].layout"))},D=function(e){return(0,n.get)(e,"widgets.tray")},R=function(e){return(0,n.get)(e,"widgets.builder.editor.returnToFeatureGrid",!1)},N=function(e){return(0,n.get)(v(e),"filter")},_=(0,p.y)(b,g,(function(e){return g(e).map((function(t){return 0===t.indexOf("map.")?(0,n.get)((0,o.Od)(e),t.slice(4)):t.match(l.oU)?(0,c.D6)(t,O(e)):(0,n.get)(e,t)}))}),(function(e,t,r){return t.reduce((function(t,n,o){return d(d({},t),{},y({},Object.keys(e)[o],r[o]))}),{})}));(0,u.zB)({widgets:O,layouts:A})},76712:(e,t,r)=>{"use strict";r.d(t,{n0:()=>E,tW:()=>P,FJ:()=>j,F8:()=>C,ll:()=>T,eL:()=>k,AD:()=>I,oR:()=>A,LZ:()=>F,eX:()=>D});var n=r(27418),o=r.n(n),i=r(61545),a=r(8575),l=r(90183),c=r(37275),s=r(24262),u=r(86638),p=r(7294),f=r(33044),d=r(67007);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){return e&&e.replace(/\/csw$/,"/")},v=function(e){return(0,i.isObject)(e)&&e._||e},h=function(e,t){return e.filter((function(r){return p.getTileMatrixSet(t,r,e,t,null)}))},O=function(e){var t=Array.isArray(e.references)?e.references:[e.references];return(0,i.head)([].filter.call(t,(function(t){return"WWW:LINK-1.0-http--image-thumbnail"===t.scheme||"thumbnail"===t.scheme||"WWW:DOWNLOAD-1.0-http--download"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))||"WWW:DOWNLOAD-REST_MAP"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))})))},w={csw:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e;return n&&n.records?n.records.map((function(e){var n,l,c,s=e.dc;if(s&&s.URI){var p=(0,i.isArray)(s.URI)?s.URI:s.URI&&[s.URI]||[],f=(0,i.head)([].filter.call(p,(function(e){return"thumbnail"===e.name})))||(0,i.head)([].filter.call(p,(function(e){var t;return!e.name&&(null===(t=e.protocol)||void 0===t?void 0:t.indexOf("image/"))>-1})));n=f?f.value:null,l=(0,i.head)([].filter.call(p,(function(e){return e.protocol&&(e.protocol.match(/^OGC:WMS-(.*)-http-get-map/g)||e.protocol.match(/^OGC:WMS/g))})))}if(!l&&s&&s.references&&s.references.length){var d=Array.isArray(s.references)?s.references:[s.references];if(l=(0,i.head)([].filter.call(d,(function(e){return e.scheme&&(e.scheme.match(/^OGC:WMS-(.*)-http-get-map/g)||"OGC:WMS"===e.scheme)})))){var y=a.parse(l.value,!0),v=y.query&&y.query.layers||s.alternative;l=o()({},l,{name:v})}}if(!l&&s&&s.references&&s.references.length){var h=Array.isArray(s.references)?s.references:[s.references];if(c=(0,i.head)([].filter.call(h,(function(e){return e.scheme&&"WWW:DOWNLOAD-REST_MAP"===e.scheme})))){var w=s.alternative;c=o()({},c,{name:w})}}if(!n&&s&&s.references){var E=O(s);E&&(n=E.value)}var S=[];if(s&&s.references&&(Array.isArray(s.references)?s.references:[s.references]).filter((function(e){return e.scheme.indexOf("http-get-capabilities")>-1})).forEach((function(e){var r=0===e.value.indexOf("http")?e.value:(t&&t.catalogURL||"")+"/"+e.value;S.push({type:e.scheme,url:r})})),l&&l.name){0===l.value.indexOf("http")||o()({},l,{value:(t&&t.catalogURL||"")+"/"+l.value});var P={type:l.protocol||l.scheme,url:l.value,SRS:[],params:{name:l.name}};S.push(P)}if(c&&c.name){var j={type:"arcgis",url:c.value,SRS:[],params:{name:c.name}};S.push(j)}n&&(0===n.indexOf("http")||(n=(g(t&&t.url)||"")+n));var C={boundingBox:e.boundingBox&&e.boundingBox.extent&&(0,i.castArray)(e.boundingBox.extent.join(","))};if(s&&(C=m(m({},C),(0,i.sortBy)(Object.keys(s)).reduce((function(e,t){return m(m({},e),{},b({},t,(0,i.uniq)((0,i.castArray)(s[t]))))}),{}))),s&&s.URI&&(0,i.castArray)(s.URI)&&(0,i.castArray)(s.URI).length&&(C=m(m({},C),{},{uri:["<ul>"+(0,i.castArray)(s.URI).map((function(e){return'<li><a target="_blank" href="'.concat(e.value,'">').concat(e.name,"</a></li>")})).join("")+"</ul>"]})),s&&s.subject&&(0,i.castArray)(s.subject)&&(0,i.castArray)(s.subject).length&&(C=m(m({},C),{},{subject:["<ul>"+(0,i.castArray)(s.subject).map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})),S&&(0,i.castArray)(S).length?C=m(m({},C),{},{references:["<ul>"+(0,i.castArray)(S).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.params&&e.params.name||e.url,"</a></li>")})).join("")+"</ul>"]}):delete C.references,s&&s.temporal){var x=s.temporal.split("; ");if(x.length){var T=x.filter((function(e){return-1!==e.indexOf("scheme=")})).map((function(e){var t=e.indexOf("=");return e.substr(t+1,e.length-1)}));T=T.length?T[0]:"W3C-DTF";var k=x.filter((function(e){return-1!==e.indexOf("start=")||-1!==e.indexOf("end=")})).map((function(e){var t=e.indexOf("="),n=e.substr(0,t),o=e.substr(t+1,e.length-1),a=e.length-t-1<=10;return(0,i.includes)(["start","end"],n)&&"W3C-DTF"===T&&!a?(0,u.S$)(r,"catalog.".concat(n))+new Date(o).toLocaleString():(0,i.includes)(["start","end"],n)?(0,u.S$)(r,"catalog.".concat(n))+o:""}));C=m(m({},C),{},{temporal:["<ul>"+k.map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})}}return{boundingBox:e.boundingBox,description:s&&(0,i.isString)(s.abstract)&&s.abstract||"",layerOptions:t&&t.layerOptions||{},identifier:s&&(0,i.isString)(s.identifier)&&s.identifier||"",references:S,thumbnail:n,title:s&&(0,i.isString)(s.title)&&s.title||"",tags:s&&s.tags||"",metadata:C}})):null},wms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&e.records?e.records.map((function(r){return{capabilities:r,credits:r.credits,boundingBox:d.ZP.getBBox(r),description:r.Abstract||r.Title||r.Name,identifier:r.Name,service:e.service,tags:"",layerOptions:m(m({},(null==t?void 0:t.layerOptions)||{}),(null==e?void 0:e.layerOptions)||{}),title:(0,s.getLayerTitleTranslations)(r)||r.Name,formats:(0,i.castArray)(r.formats||[]),dimensions:(r.Dimension&&(0,i.castArray)(r.Dimension)||[]).map((function(e){return o()({},{values:e._&&e._.split(",")||[]},e.$||{})})).filter((function(e){return e&&"time"!==e.name})),references:[{type:"OGC:WMS",url:t&&t.url,SRS:r.SRS&&((0,i.isArray)(r.SRS)?r.SRS:[r.SRS])||[],params:{name:r.Name}}]}})):null},wmts:function(e,t){return e&&e.records?e.records.map((function(e){var r=(0,i.castArray)(p.getGetTileURL(e)||t&&t.url);1===r.length&&(r=r[0]);var n=p.getCapabilitiesURL(e),a=(0,i.castArray)(e.TileMatrixSetLink||[]).reduce((function(t,r){var n,a=(0,i.head)((e.TileMatrixSet&&(0,i.castArray)(e.TileMatrixSet)||[]).filter((function(e){return e["ows:Identifier"]===r.TileMatrixSet}))),c=a&&l.default.getEPSGCode(a["ows:SupportedCRS"]),s=r.TileMatrixSetLimits&&(r.TileMatrixSetLimits.TileMatrixLimits||[]).map((function(e){return{identifier:e.TileMatrix,ranges:{cols:{min:e.MinTileCol,max:e.MaxTileCol},rows:{min:e.MinTileRow,max:e.MaxTileRow}}}}))||a.TileMatrix.map((function(e){return{identifier:e["ows:Identifier"]}}));return o()(t,(b(n={},a["ows:Identifier"],s),b(n,c,s),n))}),{}),c=function(e){var t=e["ows:WGS84BoundingBox"];return t||(t={"ows:LowerCorner":"-180.0 -90.0","ows:UpperCorner":"180.0 90.0"}),t}(e);return{title:v(e["ows:Title"]||e["ows:Identifier"]),description:v(e["ows:Abstract"]||e["ows:Title"]||e["ows:Identifier"]),identifier:v(e["ows:Identifier"]),tags:"",layerOptions:t&&t.layerOptions||{},style:e.style,capabilitiesURL:n,queryable:e.queryable,requestEncoding:e.requestEncoding,tileMatrixSet:e.TileMatrixSet,matrixIds:a,format:e.format,TileMatrixSetLink:(0,i.castArray)(e.TileMatrixSetLink),boundingBox:{extent:[c["ows:LowerCorner"].split(" ")[0],c["ows:LowerCorner"].split(" ")[1],c["ows:UpperCorner"].split(" ")[0],c["ows:UpperCorner"].split(" ")[1]],crs:"EPSG:4326"},references:[{type:"OGC:WMTS",url:r,SRS:h(e.SRS||[],a),params:{name:e["ows:Identifier"]}}]}})):null},tms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.records){var r=t.service&&"tms"===t.service.provider;return r?e.records.map((function(e){return{title:e.title,tileMapUrl:e.href,description:"".concat(e.srs).concat(e.format?", "+e.format:""),tmsUrl:t.tmsUrl,references:[{type:"OGC:TMS",version:"1.0.0",url:t.url}]}})):e.records.map((function(e){return{title:e.title||e.provider,url:e.url,attribution:e.attribution,options:e.options,provider:e.provider,type:"tileprovider",references:[]}}))}return null},wfs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.records;return t?t.map((function(e){return m(m({},e),{},{references:[{type:"OGC:WFS-1.1.0-http-get-capabilities",url:e.url},{type:"OGC:WFS-1.1.0-http-get-feature",url:e.url}]})})):null},backgrounds:function(e){return e&&e.records?e.records.map((function(e){return{description:e.title,title:e.title,identifier:e.name,thumbnail:e.thumbURL,references:[],background:e}})):null}},E=function(e){return e.filter((function(e){return l.default.isSRSAllowed(e)})).reduce((function(e,t){return o()(e,b({},t,!0))}),{})},S=function(e,t){var r=e.split("?"),n={};return r.length>=2&&r[1]&&r[1].split(/[&;]/g).forEach((function(e){var r=e.split("=");-1===t.indexOf(r[0].toLowerCase())&&(n[r[0]]=r[1])})),{url:r[0],params:n}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,r=void 0===t?[]:t;return{wfs:(0,i.head)(r.filter((function(e){return e.type&&("OGC:WFS"===e.type||e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-feature")>-1)}))),wms:(0,i.head)(r.filter((function(e){return e.type&&("OGC:WMS"===e.type||e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-map")>-1)}))),wmts:(0,i.head)(r.filter((function(e){return e.type&&("OGC:WMTS"===e.type||e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-map")>-1)}))),tms:(0,i.head)(r.filter((function(e){return e.type&&("OGC:TMS"===e.type||e.type.indexOf("OGC:TMS")>-1)})))}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{references:[]};return{esri:(0,i.head)(e.references.filter((function(e){return e.type&&("ESRI:SERVER"===e.type||"arcgis"===e.type)})))}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,r=void 0===t?[]:t,n=(0,i.head)(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),o=(0,i.head)(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),a=(0,i.head)(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),l=[];return n&&l.push({type:"WMS_GET_CAPABILITIES",url:n.url,labelId:"catalog.wmsGetCapLink"}),a&&l.push({type:"WMTS_GET_CAPABILITIES",url:a.url,labelId:"catalog.wmtsGetCapLink"}),o&&l.push({type:"WFS_GET_CAPABILITIES",url:o.url,labelId:"catalog.wfsGetCapLink"}),l},x=function(e){return e&&!(0,i.isArray)(e)&&-1!==e.indexOf(",")?e.split(",").map((function(e){return e.trim()})):e},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wms",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.removeParams,o=void 0===n?[]:n,a=r.format,l=r.catalogURL,s=r.url,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},p=arguments.length>4?arguments[4]:void 0;if(!e||!e.references)return null;var f,d,y=P(e),b=y.wms,g=y.wmts,v=b||g,h=function(e){return S(c.ZP.cleanDuplicatedQuestionMarks(e),["request","layer","layers","service","version"].concat(o))},O=x(v.url);if(O&&(0,i.isArray)(O))f=O.map((function(e){return h(e)})).map((function(e){return e.url})),d=O.map((function(e){return h(e)})).map((function(e){return e.params})).reduce((function(e,t){return m(m({},e),t)}),{});else{var w=h(O||l),j=w.url,T=w.params;f=j,d=T}var k=function(e){return(0,i.isArray)(e)&&1===e.length?e[0]:e},I=k(s||f),A=E(v.SRS);return m(m(m({type:t,requestEncoding:e.requestEncoding,style:e.style,format:a,url:I,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:v.params&&v.params.name,title:e.title||v.params&&v.params.name,matrixIds:"wmts"===t?e.matrixIds||[]:void 0,description:e.description||"",tileMatrixSet:"wmts"===t?e.tileMatrixSet||[]:void 0,credits:!c.ZP.getConfigProp("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:C(e),params:d,allowedSRS:A,catalogURL:l},u),e.layerOptions),{},{localizedLayerStyles:(0,i.isNil)(p)?void 0:p})},k=function(e,t,r,n){return w[e]&&w[e](t,r,n)||null},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.references)return null;var r=j(e),n=r.esri;return m({type:n.type,url:n.url,visibility:!0,dimensions:e.dimensions||[],name:n.params&&n.params.name,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}}},t)},A=function(e,t,r){var n=e.tileMapUrl,o=t.TileMap,a=void 0===o?{}:o,l=r.forceDefaultTileGrid,c=a.Title,s=a.Abstract,u=a.SRS,p=a.BoundingBox,d=void 0===p?{}:p,y=a.Origin,m=a.TileFormat,g=void 0===m?{}:m,v=a.TileSets,h=a.$,O=h.version,w=h.tilemapservice,E=(0,i.get)(d,"$",{}),S=E.minx,P=E.miny,j=E.maxx,C=E.maxy,x=(0,i.get)(y,"$"),T=x.x,k=x.y,I=(0,i.get)(g,"$",{}),A=I.width,F=I.height,D=I["mime-type"],R=I.extension,N=[parseFloat(A),parseFloat(F,10)],_=(0,i.castArray)((0,i.get)(v,"TileSet",[]).map((function(e){return e.$}))).map((function(e){var t=e.href,r=e.order,n=e["units-per-pixel"];return{href:(0,f.cleanAuthParamsFromURL)(t),order:parseFloat(r),resolution:parseFloat(n)}})),L=(0,i.get)(v,"profile");return{title:c,visibility:!0,hideErrors:!0,name:c,allowedSRS:b({},u,!0),description:s,srs:u,version:O,tileMapService:w?(0,f.cleanAuthParamsFromURL)(w):void 0,type:"tms",profile:L,tileMapUrl:n,forceDefaultTileGrid:l,bbox:d&&{crs:u,bounds:{minx:parseFloat(S),miny:parseFloat(P),maxx:parseFloat(j),maxy:parseFloat(C)}},tileSets:_,origin:{x:parseFloat(T),y:parseFloat(k)},format:D,tileSize:N,extension:R}},F=function(e){return m({type:e.type||"wfs",search:{url:e.url,type:"wfs"},url:e.url,queryable:e.queryable,visibility:!0,name:e.name,title:e.title||e.name,description:e.description||"",bbox:e.boundingBox,links:C(e),style:{weight:1,color:"rgba(0, 0, 255, 1)",opacity:1,fillColor:"rgba(0, 0, 255, 0.1)",fillOpacity:.1,radius:10}},e.layerOptions)},D=function(e){return{type:"tileprovider",visibility:!0,url:e.url,title:e.title,attribution:e.attribution,options:e.options,provider:e.provider,name:e.provider}}},12226:(e,t,r)=>{"use strict";r.d(t,{B:()=>o});var n=r(62651);function o(e,t){return(0,n.U)(e)(t)}},89077:(e,t,r)=>{"use strict";r.d(t,{LR:()=>p,RP:()=>f});var n=r(78598),o=r.n(n),i=r(97995),a=r.n(i),l=(r(39902),r(89597),r(66085),r(82702),r(27418),r(72163),r(5055),r(61545));function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(23570);var u=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,l.flatten)([[[/\&/g,"&amp;"]],e?[]:[[/\"/g,"&quot;"]],t?[]:[[/\'/g,"&apos;"]],r?[]:[[/\>/g,"&gt;"]],n?[]:[[/\</g,"&lt;"]]]).reduce((function(e,t){var r=c(t,2),n=r[0],o=r[1];return e.replace(n,o)}),o)};u.bind(null,!0,!0,!0,!1),u.bind(null,!1,!1,!0,!1),r(24262),r(90183),new DOMParser;var p=function(e,t,r){var n=new Blob([e],{type:r});o().saveAs(n,t)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",r=arguments.length>2?arguments[2]:void 0;p(a()(e),t,r)}},92579:(e,t,r)=>{"use strict";r(57546),r(46713),r(4657),r(80643);var n=r(55651),o=r.n(n);r(95671),r(2936),r(37153),r(33716),r(54432),r(23574),r(55877);o()({CASCADE:"cascade"}),o()({TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner"}),o()({IMAGE:"image",MAP:"map",VIDEO:"video"}),o()({EDIT:"edit",VIEW:"view"})},62192:(e,t,r)=>{"use strict";r.d(t,{k2:()=>m,tL:()=>v});var n=r(61545),o=r(23570),i=r.n(o),a=r(58767),l=r(8797),c=r(90183);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e,t){return{length:(0,n.round)((0,l.convertUom)(t,"m",e.length.label)||0,2)+" "+e.length.label,area:(0,n.round)((0,l.convertUom)(t,"sqm",e.area.label)||0,2)+" "+e.area.label,bearing:(0,l.getFormattedBearingValue)((0,n.round)(t||0,6)).toString()}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,n.uniq)(e.map((function(e){return"LineString"===e.geometry.type&&"bearing"===(0,n.get)(e,"properties.values[0].type","")?"Bearing":e.geometry.type})))},b={offsetY:1,fontSize:"10",fontSizeUom:"px",fontFamily:"Courier New",font:"10px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},g={offsetY:-15,fontSize:"13",fontSizeUom:"px",fontFamily:"Courier New",font:"13px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},v=function(e,t,r,o,s,p){var d,m,v=(d=e,(m=(0,n.uniq)(d.map((function(e){return(0,n.get)(e,"properties.values[0].type","")})))).length>1?{title:"Multiple Measurement",iconGlyph:"geometry-collection"}:{title:"Measure "+(0,n.startCase)(m[0]),iconGlyph:"1-measure-"+m[0]});return{type:"FeatureCollection",features:[].concat(f((0,n.flatten)(e.map((function(e){return function(e,t,r){var n,o=r||g;return[{type:"Feature",geometry:{type:e.geometry.type,coordinates:(0,l.validateFeatureCoordinates)(e.geometry),textLabels:e.geometry.textLabels},properties:{id:i()(),isValidFeature:!0,geometryGeodesic:"LineString"===e.geometry.type?{type:"LineString",coordinates:(0,c.transformLineToArcs)(e.geometry.coordinates)}:null,useGeodesicLines:"LineString"===e.geometry.type,values:(null===(n=e.properties)||void 0===n?void 0:n.values)||[]},style:[u(u({},a.z4[e.geometry.type]),{},{type:e.geometry.type,id:i()(),geometry:"LineString"===e.geometry.type?"lineToArc":null,title:"".concat(e.geometry.type," Style"),filtering:!0})].concat("LineString"===e.geometry.type?(0,a.N_)():[])}].concat(f(e.properties.values.map((function(e){var r=e.value,n=e.formattedValue,a=e.type;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:n||y(t,r)[a],isText:!0,isValidFeature:!0,id:i()()},style:u(u({},o),{},{id:i()(),filtering:!0,title:"Text Style",type:"Text"})}}))))}(e,r,p)})))),f(t.filter((function(e){return!!e})).map((function(e){var t=e.text;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:t,isValidFeature:!0,isText:!0,id:i()()},style:u(u({},b),{},{id:i()(),filtering:!0,title:"Text Style",type:"Text"})}})))),properties:{id:o,description:s,type:"Measure",title:v.title,iconGlyph:v.iconGlyph},style:{}}}},99009:(e,t,r)=>{"use strict";r.d(t,{I$:()=>D,s1:()=>R,Vi:()=>M,nK:()=>Z,Py:()=>G,H$:()=>B,uW:()=>z,YD:()=>U,$N:()=>W,U_:()=>V,Gg:()=>X,VM:()=>Q,ZF:()=>J});var n=r(20721),o=r.n(n),i=r(57546),a=r.n(i),l=r(80643),c=r.n(l),s=r(37153),u=r.n(s),p=r(90346),f=r.n(p),d=r(82920),y=r.n(d),m=r(43678),b=r.n(m),g=r(59088),v=r.n(g),h=r(74836),O=r.n(h),w=r(23570),E=r.n(w),S=r(8575),P=r(11531);function j(e){return function(e){if(Array.isArray(e))return e}(e)||T(e)||x(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return k(e)}(e)||T(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function T(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D="___",R="styleeditor",N={},_={css:"geocss",sld:"xml"},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type&&e.type.localPart&&e.type.localPart.toLowerCase()||"";return-1!==t.indexOf("polygon")||-1!==t.indexOf("surface")?"polygon":-1!==t.indexOf("linestring")?"linestring":-1!==t.indexOf("point")?"point":"vector"},M=function(){return"".concat(E()(),"_ms_").concat(Date.now().toString())},Z=function(e){var t=e.title;return"".concat((void 0===t?"":t).toLowerCase().replace(/\s/g,"_")).concat(D).concat(E()())},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeLayer,r=void 0===t?{}:t,n=e.describeFeatureType,i=void 0===n?{}:n,l=r&&r.owsType||null,c=a()(i,"complexType[0].complexContent.extension.sequence.element")||null,s=c&&o()(c.filter((function(e){var t=e.type;return t&&"gml"===t.prefix}))),u=("WCS"===l?"raster":s&&"WFS"===l&&L(s))||null,p="raster"===u?r.bands:c&&c.reduce((function(e,t){var r=t.name,n=t.type,o=void 0===n?{}:n;return A(A({},e),{},F({},r,{localPart:o.localPart,prefix:o.prefix}))}),{});return{geometryType:u,properties:p,owsType:l}},B=function(e){return _[e]||e},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(N.isSameOrigin)return N.isSameOrigin(e,t);if(!t.baseUrl||!e.url)return!1;var r=[t.baseUrl].concat(C(t.availableUrls||[])),n=r.map((function(e){var t=S.parse(e);return"".concat(t.protocol,"//").concat(t.host)})),o=S.parse(e.url),i="".concat(o.protocol,"//").concat(o.host);return-1!==n.indexOf(i)},U=function(){if(N.getStyleTemplates){var e=N.getStyleTemplates();return[].concat(C(c()(e)?e:[]),C(P.baseTemplates))}return[].concat(C(P.customTemplates),C(P.baseTemplates))},W=function(e){var t=u()(e)&&e.split(":")||[];return{workspace:t[1]&&t[0],name:t[1]||t[0]}},V=function(e){var t=e.name,r=e.workspace;return"".concat(r&&r.name&&"".concat(r.name,":")||"").concat(t)},q=function e(t,r){if(!(t&&t.filterFields&&t.groupFields&&r))return null;var n=t.filterFields.filter((function(e){return e.groupId===r.id})),o=t.groupFields.filter((function(e){return e.groupId===r.id})),i=[].concat(C(n),C(o)),a={OR:"||",AND:"&&",like:"*=","=":"==","<>":"!=",isNull:"=="},l=i.map((function(r){if(void 0!==r.rowId){var n=r.operator,o=r.attribute,i=r.value;return n&&o&&!y()(i)?[a[n]||n,o,"isNull"===n?null:i]:null}return e(t,r)})).filter((function(e){return e})),c=r.logic;return 0===l.length?null:[a[c]].concat(C(l))},H=function(e){var t,r=null==e||null===(t=e.groupFields)||void 0===t?void 0:t.find((function(e){return!e.groupId}));return r&&q(e,r)},$=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.index,o=void 0===n?0:n,i=r.groupId,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)return null;var l={"||":"OR","&&":"AND","*=":"like","==":"=","!=":"<>"},s=j(t),u=s[0],p=s.slice(1),f=c()(u),d=f?u[0]:u,y=f?u.filter((function(e,t){return 0!==t})):p;if("||"===d||"&&"===d){var m=E()();return a("groupField",{id:m,index:o,logic:l[d]}),e(p,{index:o+1,groupId:m},a)}return d?(a("filterField",{attribute:y[0],groupId:i,operator:l[d]||d,rowId:E()(),type:isNaN(parseFloat(y[1]))?"string":"number",value:y[1]}),e(p,{index:o,groupId:i},a)):null},Y=function(e){var t=[],r=[];return $(e,void 0,(function(e,n){"groupField"===e&&t.push(n),"filterField"===e&&r.push(n)})),{groupFields:t,filterFields:r}};function K(e){var t=v()(e,O());return Object.keys(t).reduce((function(e,r){switch(r){case"haloColor":case"haloWidth":return"Text"===t.kind&&0===t.haloWidth?e:A(A({},e),{},F({},r,t[r]));case"outlineWidth":case"outlineColor":case"outlineOpacity":return"Fill"===t.kind&&0===t.outlineWidth?e:A(A({},e),{},F({},r,t[r]));case"strokeWidth":case"strokeColor":case"strokeOpacity":return"Mark"===t.kind&&0===t.strokeWidth?e:A(A({},e),{},F({},r,t[r]));case"graphicFill":case"graphicStroke":return A(A({},e),{},F({},r,K(t[r])));default:return A(A({},e),{},F({},r,t[r]))}}),{})}function X(e){return e&&e.rules?A(A({},e),{},{rules:f()(e.rules.map((function(e){if("Classification"===e.kind)return(e.classification||[]).map((function(t,r){var n=r===e.classification.length-1?"<=":"<",o=null!==t.min?[[">=",e.attribute,t.min]]:[],i=null!==t.max?[[n,e.attribute,t.max]]:[],a=null!==t.min&&">= "+t.min,l=null!==t.max&&n+" "+t.max;return A(A({name:a&&l?a+" and "+l:a||l,filter:o[0]||i[0]?["&&"].concat(o,i):void 0},e.scaleDenominator&&{scaleDenominator:e.scaleDenominator}),{},{symbolizers:[K(A(A({},b()(e,["ruleId","classification","intervals","method","ramp","reverse","attribute","symbolizerKind"])),{},{kind:e.symbolizerKind||"Fill",color:t.color}))]})}));if("Raster"===e.kind){var t=e.classification&&e.classification.length>0&&{colorMapEntries:(e.classification||[]).map((function(e){return{label:e.label,quantity:e.quantity,color:e.color,opacity:e.opacity}}))};return A(A({name:e.name||""},e.scaleDenominator&&{scaleDenominator:e.scaleDenominator}),{},{symbolizers:[K(A(A({},b()(e,["ruleId","classification","intervals","method","ramp","reverse","continuous","symbolizerKind","name"])),{},{kind:"Raster"},t&&{colorMap:t}))]})}var r=H(e.filter);return A(A({},e),{},{filter:r,symbolizers:((null==e?void 0:e.symbolizers)||[]).map((function(e){return K(e)}))})})))}):e}function Q(e){return A(A({},e),{},{rules:e.rules.map((function(e){return A(A({},e),{},{ruleId:E()(),filter:e.filter&&Y(e.filter),symbolizers:e.symbolizers&&e.symbolizers.map((function(e){return A(A({},e),{},{symbolizerId:E()()})}))||[]})}))})}function J(e){return new Promise((function(t,r){e||r({messageId:"imageSrcEmpty",isBase64:!1});var n=!1;if(0===e.indexOf("data:image")){var o=e.split("base64,");(n=function(e){try{return window.atob(e),!0}catch(e){return!1}}(o[o.length-1]))||r({messageId:"imageSrcInvalidBase64",isBase64:n})}var i=new Image;i.onload=function(){t({src:e,isBase64:n})},i.onerror=function(){r({messageId:n?"imageSrcInvalidBase64":"imageSrcLoadError",isBase64:n})},i.src=e}))}},11847:(e,t,r)=>{"use strict";r.d(t,{ij:()=>a,w0:()=>l,K2:()=>c,Nw:()=>s});var n=r(8575),o=r(61545);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(64210);var a=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var o,a,l=(a=6,function(e){if(Array.isArray(e))return e}(o=r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(o,a)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[1],s=l[3],u=l[4],p=l[5],f=0===p.indexOf("/")?p.split("/")[1]:"";return{protocol:c,domain:s,port:u,rootPath:p,applicationRootPath:f}},l=function(e,t){var r=(0,o.isArray)(e)?e[0]:e,i=(0,o.isArray)(t)?t[0]:t;if(r===i)return!0;if(!r||!i)return!1;if(!(0,o.isString)(r)||!(0,o.isString)(i))return!1;var l=n.parse(r),c=n.parse(i),s=a(r),u=a(i),p=s.protocol===u.protocol,f=s.domain===u.domain,d=s.port===u.port,y=l.pathname===c.pathname,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return(0,o.isEqual)((0,o.sortBy)(r),(0,o.sortBy)(n))}(l.query,c.query);return p&&d&&f&&y&&m},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,r=new RegExp(t);return r.test(e)},s=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/,n=new RegExp(r),i=n.test(e);if(!i)return!1;if(i&&!t)return!0;if(i&&t){var a=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return(0,o.find)(a,e)})).length}return!1}},54705:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(61545).find,l=r(27418)({},r(89808)),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).length>0&&Object.keys(e).reduce((function(r,n){var o=new RegExp(e[n]);return r&&o.test(t[n])}),!0)},s=function(e,t,r){if(l[t]){if(l[t][e])return l[t][e](r);if(l[t].defaultEditor)return l[t].defaultEditor(r)}return null};e.exports={get:function(){return l},register:function(e){var t=e.name,r=e.editors;r&&(l[t]=r)},remove:function(e){if(t=e,-1!==Object.keys(l).indexOf(t))try{return delete l[e],!0}catch(e){return!1}var t;return!1},clean:function(){l={}},getCustomEditor:function(e){var t=e.attribute,r=e.url,n=e.typeName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,u=l.type,p=l.generalProps,f=void 0===p?{}:p,d=l.props,y=a(i,(function(e){return c(e.regex,{attribute:t,url:r,typeName:n})}));if(y){var m=s(u,y.editor,o(o(o({},d),f),y.editorProps||{}));return m}return null}}},55597:(e,t,r)=>{var n=r(34387),o=n.filter,i=n.fidFilter;e.exports={fidFilter:i,filter:o}},50937:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=r(61545).get,s=r(75775),u=s.insert,p=s.feature,f=s.attribute,d=r(99381).transaction,y=r(50525),m=y.deleteFeaturesByFilter,b=y.deleteFeature,g=r(16685),v=g.update,h=g.propertyChange,O=r(78889),w=O.getPropertyDesciptor,E=O.getValue,S=O.findGeometryProperty,P=O.featureTypeSchema,j=r(39156),C=function(e,t){return t&&t.length>0?[e].concat(function(e){if(Array.isArray(e))return l(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e;var r},x=function(e){this.version=e},T=function(e){return c(e,"featureTypes[0].typeName")},k=function(e){return e.targetPrefix?"".concat(e.targetPrefix,":").concat(T(e)):T(e)},I=function(e,t){return e.geometry_name||S(t).name},A=function(e,t){return"geometry"===e||e===I({},t)?I({},t):e};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wfsVersion,n=void 0===r?"1.1.0":r,i=t.wfsNS,l=void 0===i?"wfs":i,c=a(t,["wfsVersion","wfsNS"]);if("1.1.0"!==n)throw new x(n);var s=function(t){return p(e.targetPrefix,T(e),Object.keys(t.properties||[]).filter((function(t){return w(t,e)})).map((function(r){return f(e.targetPrefix,r,E(t.properties[r],r,e))})).concat(t.geometry?f(e.targetPrefix,I(t,e),E(t.geometry,I(t,e),e)):[]))},y=function(e){return e.features?e.features.map(s):s(e)};return o(o({},j(o(o({},c),{},{wfsVersion:n,wfsNS:l}))),{},{insert:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return u(l,Array.isArray(C(e,r))?C(e,r).map(y):y(e))},getPropertyName:function(t){return A(t,e)},deleteByFilter:function(t){return m(l,t,k(e))},deleteFeature:function(t){return b(l,t,k(e))},update:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return v(l,k(e),C(t,n))},propertyChange:function(t,r){return h(l,t,E(r,t,e))},transaction:function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return d(C(t,o),P(e),n,l)}})}},50525:(e,t,r)=>{var n=r(55597).fidFilter,o=function(e,t,r){return"<".concat(e,':Delete typeName="').concat(r,'">').concat(t,"</").concat(e,":Delete>")},i=function(e,t,r){return o(e,n("ogc",t),r)};e.exports={deleteFeaturesByFilter:o,deleteById:i,deleteFeature:function(e,t,r){return i(e,t.features&&1===t.features.length?t.features[0].id:t.id,r)}}},75775:e=>{var t=function(e,t,r){return"<".concat(e?e+":"+t:t,">").concat(Array.isArray(r)?r.join(""):r,"</").concat(e?e+":"+t:t,">")},r=t,n=t;e.exports={insert:function(e,t){return"<".concat(e,":Insert>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Insert>")},feature:n,attribute:r}},99381:e=>{e.exports={transaction:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.wfsNS,o=void 0===n?"wfs":n,i=r.wfsVersion,a=void 0===i?"1.1.0":i;return"<".concat(o,":Transaction ")+'service="WFS" '+'version="'.concat(a,'" ')+"xmlns:".concat(o,'="http://www.opengis.net/wfs" ')+'xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs" '+"".concat(t,">")+"".concat(Array.isArray(e)?e.join(""):e)+"</".concat(o,":Transaction>")}}},16685:e=>{e.exports={update:function(e,t,r){return"<".concat(e,':Update typeName="').concat(t,'">').concat(Array.isArray(r)?r.join(""):r,"</wfs:Update>")},propertyChange:function(e,t,r){return"<".concat(e,":Property>")+"<".concat(e,":Name>").concat(t,"</").concat(e,":Name>")+"<".concat(e,":Value>").concat(r,"</").concat(e,":Value>")+"</".concat(e,":Property>")}}},39156:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(2245),l=r(61545).castArray,c=r(78889).wfsToGmlVersion,s=function(e){return'service="WFS" version="'+e+'" '+("1.0.0"===e?'outputFormat="GML2" ':"")+'xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs '+"http://schemas.opengis.net/wfs/".concat(e,"1.0.0"===e?'/WFS-basic.xsd"':'/wfs.xsd"')},u=function(e){return'service="WFS" version="'+e+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"'};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wfsVersion,r=void 0===t?"1.1.0":t,n=e.gmlVersion,i=e.filterNS,p=e.wfsNS,f=void 0===p?"wfs":p,d=n;!d&&r?d=c(r):d||(d="3.1.1");var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewParams,n=e.resultType,o=e.outputFormat,i=e.startIndex,a=e.maxFeatures,l=function(e){return 0===r.indexOf("2.")?'count="'.concat(e,'"'):'maxFeatures="'.concat(e,'"')};return(0===r.indexOf("1.")?s(r):u(r))+(n?' resultType="'.concat(n,'"'):"")+(o?' outputFormat="'.concat(o,'"'):"")+(i||0===i?' startIndex="'.concat(i,'"'):"")+(a||0===a?" ".concat(l(a)):"")+(t?' viewParams="'.concat(t,'"'):"")},m=function(e){return l(e).map((function(e){return"<".concat("2.0"===r?"fes":"ogc",":PropertyName>").concat(e,"</").concat("2.0"===r?"fes":"ogc",":PropertyName>")})).join("")};return o(o({propertyName:m},a({gmlVersion:d,wfsVersion:r,filterNS:i||"2.0"===r?"fes":"ogc"})),{},{getFeature:function(e,t){return"<".concat(f,":GetFeature ").concat(y(t),">").concat(Array.isArray(e)?e.join(""):e,"</").concat(f,":GetFeature>")},sortBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC";return"<".concat(f,":SortBy><").concat(f,":SortProperty>").concat(m(e),"<").concat(f,":SortOrder>").concat(t,"</").concat(f,":SortOrder></").concat(f,":SortProperty></").concat(f,":SortBy>")},query:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.srsName,i=void 0===o?"EPSG:4326":o;return"<".concat(f,":Query ").concat("2.0"===r?"typeNames":"typeName",'="').concat(e,'" srsName="').concat(i,'">')+"".concat(Array.isArray(t)?t.join(""):t)+"</".concat(f,":Query>")}})}},84069:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(47805),i=o.isFilterValid,a=o.toOGCFilterParts,l=r(2245)({}).and;e.exports={getWpsPayload:function(e){var t,r=e.layerName,o=e.layerFilter,c=e.attribute,s=e.maxFeatures,u=e.startIndex,p=e.value,f=p?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+c+"</ogc:PropertyName>   <ogc:Literal>*"+p+"*</ogc:Literal></ogc:PropertyIsLike>":"",d=o&&!o.disabled&&i(o)?a(o,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+r+'">'+(f.length>0||d.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+l.apply(void 0,(t=d,function(e){if(Array.isArray(e))return n(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([f]))+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+c+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+c+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+s+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+u+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},11531:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(23570),l=[{types:["point","linestring","polygon","vector"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(square);\n\t:mark { fill: #ff0000; };\n}\n\n* {\n\tstroke: #999999;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["point","linestring","polygon","vector"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\traster-channels: auto;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<RasterSymbolizer>\n\t\t\t\t\t\t<Opacity>1.0</Opacity>\n\t\t\t\t\t\t</RasterSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}}].map((function(e){return o(o({},e),{},{styleId:a()})})),c=[{types:["linestring","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #999999;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#999999"}]}}},{types:["linestring","vector"],title:"Dashed line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #333333;\n\tstroke-width: 0.75;\n\tstroke-dasharray: 6 2;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:4,strokeDasharray:"20 4"}]}}},{types:["linestring","vector"],title:"Section line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #330033;\n\tstroke-width: 1;\n\tstroke-dasharray: 10 4 1 4;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#330033",strokeWidth:4,strokeDasharray:"20 10 4 10"}]}}},{types:["linestring","vector"],title:"Simple railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('shape://vertline'), #000000;\n    :stroke {\n        stroke: #000000;\n        size: 8;\n    };\n}\n",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:2,strokeLinejoin:"round"},{stroke:"#333333",strokeWidth:16,strokeDasharray:"2 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #777777, #ffffff;\n\tstroke-width: 4, 2;\n\tstroke-dasharray: 1 0, 10 10;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#777777",strokeWidth:8,strokeLinejoin:"round"},{stroke:"#ffffff",strokeWidth:6,strokeDasharray:"20 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Waterway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #8bbceb, #bbddff;\n\tstroke-width: 10, 8;\n\tstroke-linejoin: round;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#8bbceb",strokeWidth:14,strokeLinejoin:"round"},{stroke:"#bbddff",strokeWidth:12,strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Red road",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #ff5539, #ffffff;\n\tstroke-width: 8, 5;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#ff5539",strokeWidth:14},{stroke:"#ffffff",strokeWidth:7}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('circle');\n    stroke-dasharray: 8 20;\n    :stroke {\n        size: 8;\n        fill: #ddd;\n        stroke: #777;\n        stroke-width: 0.5;\n    };\n}\n",types:["linestring","vector"],title:"Stroke Pattern",format:"css",preview:{config:{type:"linestring",paths:[{type:"point",transform:"translate(-0, -55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n}\n",types:["linestring","vector"],title:"Label",format:"css",preview:{config:{type:"linestring",paths:[{stroke:"#333",strokeWidth:4}],texts:[{text:"Label",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n}\n",types:["polygon","vector"],title:"Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-dasharray: 10 5;\n    stroke-width: 2;\n    stroke-opacity: 0.5;\n}\n",types:["polygon","vector"],title:"Dashed Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4,strokeDasharray:"20 10",strokeOpacity:.5}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Simple",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Line Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#line)"}],patterns:[{id:"line",icon:{d:"M0.0 1.0 L1.0 0.0",stroke:"#000",strokeWidth:.05}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://dot');\n    :fill {\n        size: 8;\n        stroke: #000000;\n        stroke-width: 4;\n    };\n}\n",types:["polygon","vector"],title:"Dot Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#poly_dot)"}],patterns:[{id:"poly_dot",icon:{d:"M0.5 0.5 L0.5 0.52Z",stroke:"#000",strokeLinecap:"round",strokeWidth:.2}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    mark: symbol('circle');\n    :mark {\n        size: 16;\n        stroke: #333;\n        stroke-width: 2;\n        fill: #ddd;\n    };\n}\n\n* {\n    stroke: #333333;\n    stroke-width: 0.5;\n}\n",types:["polygon","vector"],title:"Marker",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333"},{type:"point",d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#333",fill:"#ddd",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd, symbol('cross');\n    :fill {\n        size: 20;\n        stroke: #333;\n        stroke-width: 1;\n        fill: #f2f2f2;\n    };\n}\n",types:["polygon","vector"],title:"Fill Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"},{fill:"url(#poly_square)"}],patterns:[{id:"poly_square",icon:{d:"M0.1 0.1 L0.9 0.1 L0.9 0.9 L0.1 0.9Z",stroke:"#333",strokeLinecap:"round",strokeWidth:.05,fill:"#f2f2f2"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    stroke: #474747;\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Label and Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#000",strokeWidth:2},{fill:"url(#line)"}],texts:[{text:"Label",style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{types:["point","vector"],title:"Square",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('square');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Circle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('circle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Triangle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('triangle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Star",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('star');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Cross",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('cross');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"X",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('x');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://vertline');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Plus",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://plus');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Times",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://times');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Open arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://oarrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Closed arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://carrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 2;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    mark: symbol('circle');\n    :mark {\n        size: 7;\n        stroke: #0d0d0d;\n        stroke-width: 0.7;\n    };\n}\n",types:["polygon","point","vector"],title:"Label and Marker",format:"css",preview:{config:{type:"polygon",paths:[{type:"point",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#0d0d0d",fill:"transparent",strokeWidth:2}],texts:[{text:"Label",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}}].map((function(e){return o(o({},e),{},{styleId:a()})}));e.exports={baseTemplates:l,customTemplates:c}},43892:(e,t,r)=>{"use strict";r.d(t,{W:()=>n,Zf:()=>o,Eu:()=>i,Vy:()=>a,YB:()=>l,xm:()=>c,_f:()=>s,ek:()=>u,Q$:()=>p,DF:()=>f,mN:()=>d,QN:()=>y});var n="GEONODE:RESOURCE_LOADING",o="GEONODE:SET_RESOURCE",i="GEONODE:RESOURCE_ERROR",a="GEONODE:UPDATE_RESOURCE_PROPERTIES",l="GEONODE:SET_RESOURCE_TYPE",c="GEONODE:SET_NEW_RESOURCE",s="GEONODE:SET_RESOURCE_ID",u="GEONODE:SET_RESOURCE_PERMISSIONS";function p(){return{type:n}}function f(e){return{type:o,data:e}}function d(e){return{type:i,error:e}}function y(e){return{type:a,properties:e}}},14689:(e,t,r)=>{"use strict";r.d(t,{fk:()=>l,Gg:()=>c});var n=r(75875),o=r.n(n),i=r(37275),a=r(55035),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.u8)("genode_rest_api")||"/mapstore/rest/";return o().post((0,a.zL)("".concat(t,"resources/")),e,{timeout:1e4,params:{full:!0}}).then((function(e){return e.data}))},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,i.u8)("genode_rest_api")||"/mapstore/rest/";return o().patch((0,a.zL)("".concat(r,"resources/").concat(e,"/")),t,{params:{full:!0}}).then((function(e){return e.data}))}},81708:(e,t,r)=>{"use strict";r.d(t,{bG:()=>a});var n=r(75875),o=r.n(n),i=r(37275);r(36808),r(29896);var a=function(){var e=((0,i.u8)("geoNodeApi")||{}).endpointV1,t=void 0===e?"/api":e;return o().get("".concat(t,"/o/v4/userinfo")).then((function(e){return e.data}))}},99380:(e,t,r)=>{"use strict";r.d(t,{iv:()=>c,NJ:()=>s,Tw:()=>u});var n=r(75875),o=r.n(n),i=r(55035);r(59733),r(80643),r(37153),r(9626),r(81708),r(37275),r(29896);var a="/api/v2/resources",l="/api/v2/geostories",c=function(e){return o().get((0,i.zL)("".concat(a,"/").concat(e))).then((function(e){return e.data.resource}))},s=function(e){return o().post((0,i.zL)("".concat(l)),e,{params:{include:["data"]}}).then((function(e){return e.data.geostory}))},u=function(e,t){return o().patch((0,i.zL)("".concat(l,"/").concat(e)),t,{params:{include:["data"]}}).then((function(e){return e.data.geostory}))}},43494:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>PZ});var n={};r.r(n),r.d(n,{getRecords:()=>pr,testService:()=>yr,textSearch:()=>fr,validate:()=>dr});var o={};r.r(o),r.d(o,{getRecords:()=>Pr,parseUrl:()=>Sr,textSearch:()=>jr});var i={};r.r(i),r.d(i,{activateBoxSelectionTool:()=>aj,activateGeometryFilter:()=>fj,activateTemporaryChangesEpic:()=>sj,askChangesConfirmOnFeatureGridClose:()=>Ij,autoCloseFeatureGridEpicOnDrowerOpen:()=>kj,autoReopenFeatureGridOnFeatureInfoClose:()=>Rj,closeIdentifyWhenOpenFeatureGrid:()=>Mj,closeRightPanelOnFeatureGridOpen:()=>wj,deactivateBoxSelectionTool:()=>lj,deactivateGeometryFilter:()=>pj,deactivateSyncWmsFilterOnFeatureGridClose:()=>Bj,deleteGeometryFeature:()=>Sj,deleteSelectedFeatureGridFeatures:()=>gj,disableMultiSelect:()=>nj,enableGeometryFilterOnEditMode:()=>rj,featureGridBrowseData:()=>YP,featureGridChangePage:()=>dj,featureGridLayerSelectionInitialization:()=>KP,featureGridReloadPageOnSaveSuccess:()=>yj,featureGridSort:()=>QP,featureGridStartupQuery:()=>XP,featureGridUpdateGeometryFilter:()=>JP,featureGridUpdateTextFilters:()=>tj,handleBoxSelectionDrawEnd:()=>ij,handleClickOnMap:()=>oj,handleDrawFeature:()=>hj,handleEditFeature:()=>vj,handleGeometryFilterActivation:()=>uj,hideDrawerOnFeatureGridOpenMobile:()=>qj,hideFeatureGridOnDrawerOpenMobile:()=>Vj,launchUpdateFilterEpic:()=>ej,onClearChangeConfirmedFeatureGrid:()=>Aj,onCloseFeatureGridConfirmed:()=>Fj,onFeatureGridCreateNewFeature:()=>jj,onFeatureGridGeometryEditing:()=>Ej,onFeatureGridZoomAll:()=>_j,onOpenAdvancedSearch:()=>Nj,removeWmsFilterOnGridClose:()=>Dj,replayOnTimeDimensionChange:()=>Wj,resetControlsOnEnterInEditMode:()=>Lj,resetEditingOnFeatureGridClose:()=>Oj,resetGridOnLocationChange:()=>xj,resetQueryPanel:()=>Tj,savePendingFeatureGridChanges:()=>bj,selectFeaturesOnMapClickResult:()=>cj,setHighlightFeaturesPath:()=>Cj,startSyncWmsFilter:()=>Zj,stopSyncWmsFilter:()=>Gj,syncMapWmsFilter:()=>zj,triggerDrawSupportOnSelectionChange:()=>Pj,updateSelectedOnSaveOrCloseFeatureGrid:()=>mj,virtualScrollLoadFeatures:()=>Uj});var a={};r.r(a),r.d(a,{checkExportDataEntriesEpic:()=>gM,checkWPSAvailabilityEpic:()=>pM,closeExportDownload:()=>mM,fetchFormatsWFSDownload:()=>dM,openDownloadTool:()=>fM,resetExportDataResultsOnLogout:()=>hM,serializeCookieOnExportDataChange:()=>vM,setExportDataResultsOnLoginSuccessAndMapConfigLoaded:()=>OM,showInfoBubbleMessageEpic:()=>bM,startFeatureExportDownload:()=>yM});var l=r(91983),c=r(79047),s=r(67294),u=r.n(s),p=r(45697),f=r.n(p),d=r(33664),y=r(57546),m=r.n(y),b=r(99534),g=r(94745),v=r(5346),h=r(30294),O=r(82904),w=r(80416),E=r(22843);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(n);if(o){var r=k(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return x(this,e)});function a(){var e;P(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return I(T(e=i.call.apply(i,[this].concat(r))),"state",{groupName:""}),I(T(e),"changeName",(function(t){e.setState({groupName:t.target.value})})),I(T(e),"isValid",(function(e){return""!==e})),e}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.enabled&&!this.props.enabled&&this.setState({groupName:""})}},{key:"render",value:function(){var e=this;return u().createElement(b.Z,null,u().createElement(g.Z,{size:"xs",clickOutEnabled:!1,showClose:!1,title:u().createElement(v.Z,{msgId:"toc.addGroup"}),show:this.props.enabled,buttons:[{text:u().createElement(v.Z,{msgId:"cancel"}),onClick:function(){e.props.onClose()}},{bsStyle:"primary",disabled:!this.isValid(this.state.groupName),text:u().createElement(v.Z,{msgId:"addgroup.addbtn"}),onClick:function(){e.props.onAdd(e.state.groupName,e.props.parent),e.props.onClose()}}]},u().createElement("div",{id:"mapstore-add-toc-group"},u().createElement(h.FormGroup,null,u().createElement("label",{htmlFor:"groupName"},u().createElement(v.Z,{msgId:"addgroup.groupName"})),u().createElement(h.FormControl,{name:"groupName",onChange:this.changeName,value:this.state.groupName})))))}}])&&j(t.prototype,r),a}(s.Component);I(A,"propTypes",{enabled:f().bool,parent:f().string,onClose:f().func,onAdd:f().func}),I(A,"defaultProps",{enabled:!1,parent:null,onClose:function(){},onAdd:function(){}});var F=(0,d.connect)((function(e){return{enabled:m()(e,"controls.addgroup.enabled",!1),parent:m()(e,"controls.addgroup.parent",null)}}),{onClose:O.pu.bind(null,"addgroup","enabled",!1,"parent",null),onAdd:w.Rp})(A);const D=(0,E.rx)("AddGroup",{component:F,containers:{TOC:{doNotHide:!0,name:"AddGroup"}}});var R=r(84611),N=r(22222),_=r(18093),L="LAYER_FILTER:INIT_LAYER_FILTER",M="LAYER_FILTER:APPLIED_FILTER",Z="LAYER_FILTER:STORE_CURRENT_APPLIED_FILTER",G="LAYER_FILTER:DISCARD_CURRENT_FILTER",B="LAYER_FILTER:APPLY_FILTER",z="LAYER_FILTER:OPEN_QUERY_BUILDER";function U(){return{type:Z}}function W(){return{type:G}}function V(){return{type:B}}var q=r(90825),H=r(1550),$=r(97395),Y=r(75110),K=function(e){return e.swipe&&e.swipe||{active:!1}},X=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.spy)||{radius:80}},Q=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.swipe)||{direction:"cut-vertical"}},J=r(827),ee=r(8316),te=r(7147),re=r(7877),ne=r(74621),oe=r(38842),ie=r(24262),ae=r(52259),le=r(86638),ce=r(27418),se=r.n(ce),ue=r(24273),pe=r.n(ue),fe=r(61545),de=r(57579),ye=r(31273),me=r(88113),be=r(93152),ge=r(59309);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?Se(e):t}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(61057);var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pe(n);if(o){var r=Pe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ee(this,e)});function a(){var e;he(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return je(Se(e=i.call.apply(i,[this].concat(r))),"onFilter",(function(t){e.props.onFilter(t.target.value)})),je(Se(e),"onClear",(function(){e.props.onFilter("")})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.filterText?u().createElement(h.OverlayTrigger,{placement:"bottom",overlay:u().createElement(h.Tooltip,{id:"mapstore-toc-filter"},this.props.tooltipClear)},u().createElement(h.Glyphicon,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):u().createElement(h.Glyphicon,{className:"text-primary",glyph:"filter"});return u().createElement(h.FormGroup,{className:"mapstore-filter"},u().createElement(h.InputGroup,null,u().createElement(h.FormControl,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),u().createElement(h.InputGroup.Addon,{className:"square-button-md"},this.props.loading?u().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&Oe(t.prototype,r),a}(u().Component);je(Ce,"propTypes",{loading:f().bool,filterText:f().string,filterPlaceholder:f().oneOfType([f().object,f().string]),onFilter:f().func,onFocus:f().func,tooltipClear:f().oneOfType([f().object,f().string])}),je(Ce,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const xe=Ce;function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?De(e):t}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Re(n);if(o){var r=Re(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Fe(this,e)});function a(){var e;ke(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ne(De(e=i.call.apply(i,[this].concat(r))),"renderTitle",(function(){return u().createElement(h.Row,null,u().createElement(h.Col,{xs:12,className:"mapstore-toc-head-title-container text-center no-border"},u().createElement("div",{className:"mapstore-toc-head-title",title:e.props.title},u().createElement(h.Glyphicon,{glyph:"1-map"}),"  ",e.props.title)))})),Ne(De(e),"renderFilter",(function(){return u().createElement(h.Row,null,u().createElement(h.Col,{xs:12,className:"text-center"},u().createElement(xe,{onFocus:e.props.onClear,filterPlaceholder:e.props.filterPlaceholder,tooltipClear:e.props.filterTooltipClear,filterText:e.props.filterText,onFilter:e.props.onFilter})))})),Ne(De(e),"renderTools",(function(){return u().createElement(h.Row,null,u().createElement(h.Col,{xs:12,className:"text-center"},e.props.toolbar))})),e}return t=a,(r=[{key:"render",value:function(){var e=[this.props.showTools,this.props.showFilter,this.props.showTitle].filter((function(e){return e})),t=e.length>0?" toc-head-sections-"+e.length:" toc-head-sections";return u().createElement("div",{className:"mapstore-toc-head"+t},u().createElement(h.Grid,{fluid:!0},this.props.showTitle?this.renderTitle():null,this.props.showFilter?this.renderFilter():null,this.props.showTools?this.renderTools():null))}}])&&Ie(t.prototype,r),a}(u().Component);Ne(_e,"propTypes",{title:f().string,filterText:f().string,filterPlaceholder:f().oneOfType([f().object,f().string]),showTitle:f().bool,showFilter:f().oneOfType([f().bool,f().number]),showTools:f().bool,toolbar:f().object,onFilter:f().func,onClear:f().func,filterTooltipClear:f().oneOfType([f().object,f().string])}),Ne(_e,"defaultProps",{title:"",filterText:"",filterPlaceholder:"Filter",showTitle:!0,showFilter:!0,showTools:!0,toolbar:null,onFilter:function(){},onClear:function(){},filterTooltipClear:"Clear"});const Le=_e;var Me=r(90173),Ze=r(50966),Ge=r(72688),Be=(r(8380),r(82571)),ze=r(7472),Ue=r(80876),We=r(61239),Ve=r(11847),qe=r(38560);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){tt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?Je(e):t}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=et(n);if(o){var r=et(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Qe(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),tt(Je(t=i.call(this,e)),"renderMetadata",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=function(e,r){t.setState({collapsed:Ye(Ye({},t.state.collapsed),{},tt({},e,r))})},i=function(e,r){return u().createElement("div",{style:{display:"flex",flexDirection:"row"}},e,u().createElement(qe.Z,{style:{margin:"4px 0 0 4px"},className:"square-button-md no-border",onClick:function(){return o(r,!t.state.collapsed[r])}},u().createElement(h.Glyphicon,{glyph:t.state.collapsed[r]?"plus":"minus"})))},a=function(e,t){return"".concat(e,"@item_").concat(t)},l=(0,fe.keys)(e).filter((function(e){return"references"!==e})).map((function(r){var o,l,c=e[r],s="".concat(n,".").concat(r),p="toc.layerMetadata.".concat(r),f=(0,le.S$)(t.context.messages,p)===p?u().createElement(v.Z,{msgId:"toc.layerMetadata.defaultPropName",msgParams:{propName:r}}):u().createElement(v.Z,{msgId:p}),d=function(e){return u().createElement("tr",null,u().createElement("td",null,f),u().createElement("td",null,e))};if((0,fe.isArray)(c))if(c.length){var y="toc.layerMetadata.itemTitles.".concat(r),m=(0,le.S$)(t.context.messages,y),b=m===y?(0,le.S$)(t.context.messages,"toc.layerMetadata.itemTitles.default"):m,g=c.map((function(e,r){var n=a(s,r);return(0,fe.isObject)(e)?t.renderMetadata(e,c.length>1?i(u().createElement("h4",null,"".concat(b," #").concat(r+1)),n):null,n):u().createElement("li",{key:r},e)}));o=(0,fe.isObject)(c[0])?(l=u().createElement("div",null,i(u().createElement("h4",null,f),s),t.state.collapsed[s]?null:u().createElement("div",null,g)),u().createElement("tr",null,u().createElement("td",{colSpan:"2"},l))):d(u().createElement("ul",null,g))}else o=null;else if((0,fe.isString)(c)){var h=(0,We.v)(c),O=(0,Ve.K2)(c);o=d(h||O?u().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:O?c:"mailto:".concat(c)},c):c)}return o})).filter((function(e){return!!e}));return u().createElement("div",{style:n?{padding:"8px"}:{}},r,t.state.collapsed[n]?null:u().createElement(h.Table,null,u().createElement("tbody",null,l)))})),t.state={collapsed:{}},t}return t=a,(r=[{key:"renderEmpty",value:function(){return u().createElement("div",null,u().createElement(v.Z,{msgId:"toc.layerMetadata.emptyMetadata"}))}},{key:"render",value:function(){var e=this.props.model;return(0,fe.keys)(e).length?u().createElement("div",{style:{maxHeight:"400px",overflow:"auto"},id:e.identifier},this.renderMetadata(e)):this.renderEmpty()}}])&&Ke(t.prototype,r),a}(u().Component);tt(rt,"propTypes",{model:f().object}),tt(rt,"contextTypes",{messages:f().object}),tt(rt,"defaultProps",{model:{}});const nt=rt;function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ut(n);if(o){var r=ut(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ct(this,e)});function a(){var e;it(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pt(st(e=i.call.apply(i,[this].concat(r))),"onDelete",(function(){e.props.hideLayerMetadata()})),pt(st(e),"onClose",(function(){e.props.hideLayerMetadata()})),pt(st(e),"getTemplate",(function(){var t=e.props.metadataTemplate||nt;if((0,fe.isArray)(t)||(0,fe.isString)(t)){var r=(0,fe.isArray)(t)?t.join("\n"):t;return u().createElement(Be.Z,{model:e.props.layerMetadata.metadataRecord,template:r,renderContent:Ue.Z})}var n=t;return u().createElement(n,{model:e.props.layerMetadata.metadataRecord})})),pt(st(e),"renderBodyTemplate",(function(){return e.props.layerMetadata.maskLoading?null:e.getTemplate()})),e}return t=a,(r=[{key:"render",value:function(){var e=u().createElement("span",{role:"footer"});return this.props.layerMetadata.expanded?u().createElement(b.Z,null,u().createElement(ze.Z,{maskLoading:this.props.layerMetadata.maskLoading,id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},u().createElement("span",{role:"header"},u().createElement("span",{className:"layer-settings-metadata-panel-title"},this.props.layerMetadataPanelTitle),u().createElement("button",{onClick:this.onClose,className:"layer-settings-metadata-panel-close close"},this.props.closeGlyph?u().createElement(h.Glyphicon,{glyph:this.props.closeGlyph}):u().createElement("span",null,"×"))),u().createElement("div",{role:"body",style:{minWidth:"500px"}},this.renderBodyTemplate()),e)):null}}])&&at(t.prototype,r),a}(u().Component);pt(ft,"propTypes",{id:f().string,layerMetadata:f().object,metadataTemplate:f().oneOfType([f().string,f().array,f().object,f().func]),hideLayerMetadata:f().func,closeGlyph:f().string,panelStyle:f().object,panelClassName:f().string,maskLoading:f().bool,layerMetadataPanelTitle:f().oneOfType([f().string,f().object])}),pt(ft,"defaultProps",{id:"mapstore-layer-settings-metadata",layerMetadata:{expanded:!1},metadataTemplate:null,closeGlyph:"1-close",panelStyle:{},panelClassName:"toolbar-panel portal-dialog",maskLoading:!0,layerMetadataPanelTitle:""});const dt=ft;function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){Pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?Et(e):t}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=St(n);if(o){var r=St(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return wt(this,e)});function a(){var e;vt(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Pt(Et(e=i.call.apply(i,[this].concat(r))),"state",{showDeleteDialog:!1}),Pt(Et(e),"isNestedGroup",(function(){var t=e.props.selectedGroups.map((function(e){return e.id.split(".")}));return(0,fe.head)(t.reduce((function(e,t){return e[0]===t[0]?t:[!1]}),t[0]))})),Pt(Et(e),"isLoading",(function(){return(0,fe.head)(e.props.selectedLayers.filter((function(e){return e.loading})))})),Pt(Et(e),"getStatus",(function(){var t=e.props,r=t.selectedLayers,n=t.selectedGroups,o=e.isNestedGroup(),i=0===r.length&0===n.length?"DESELECT":"";return i=1===r.length&0===n.length?"LAYER":i,i=o?"GROUP":i,i=r.length>1&0===n.length?"LAYERS":i,i=n.length>1&&!o?"GROUPS":i,e.props.selectedLayers.length>0&&e.props.selectedLayers.filter((function(e){return"Error"===e.loadingError})).length===e.props.selectedLayers.length?"".concat(i,"_LOAD_ERROR"):i})),Pt(Et(e),"getSelectedGroup",(function(){return e.props.selectedGroups.length>0&&e.props.selectedGroups[e.props.selectedGroups.length-1]})),Pt(Et(e),"getSelectedNodeDepth",(function(){return"DESELECT"===e.getStatus()?0:e.getSelectedGroup().id.split(".").length+1})),Pt(Et(e),"addLayer",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddLayer(t&&t.id)})),Pt(Et(e),"addGroup",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddGroup(t&&t.id)})),Pt(Et(e),"browseData",(function(){e.props.onToolsActions.onBrowseData({url:e.props.selectedLayers[0].search.url||e.props.selectedLayers[0].url,name:e.props.selectedLayers[0].name,id:e.props.selectedLayers[0].id})})),Pt(Et(e),"download",(function(){var t;e.props.onToolsActions.onDownload({url:(null===(t=e.props.selectedLayers[0].search)||void 0===t?void 0:t.url)||e.props.selectedLayers[0].url,name:e.props.selectedLayers[0].name,id:e.props.selectedLayers[0].id})})),Pt(Et(e),"checkBbox",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),r=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"};return!!(0,fe.head)(t)&&"differentCRS"!==r.crs&&r.crs})),Pt(Et(e),"zoomTo",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),r=t.length>1?t.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),t[0]):t[0];e.props.onToolsActions.onZoom(r.bounds,r.crs)})),Pt(Et(e),"showSettings",(function(t){e.props.settings.expanded?e.props.onToolsActions.onHideSettings():"LAYER"===t||"LAYER_LOAD_ERROR"===t?e.props.onToolsActions.onSettings(e.props.selectedLayers[0].id,"layers",{opacity:parseFloat(void 0!==e.props.selectedLayers[0].opacity?e.props.selectedLayers[0].opacity:1)}):"GROUP"===t&&e.props.onToolsActions.onSettings(e.props.selectedGroups[e.props.selectedGroups.length-1].id,"groups",{})})),Pt(Et(e),"showMetadata",(function(){e.props.layerMetadata.expanded?e.props.onToolsActions.onHideLayerMetadata():e.props.onToolsActions.onGetMetadataRecord(e.props.options.metadataOptions)})),Pt(Et(e),"removeNodes",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"layers")})),e.props.selectedGroups.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"groups")})),e.props.onToolsActions.onClear(),e.closeDeleteDialog()})),Pt(Et(e),"reload",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onShow(t.id,{visibility:!0}),e.props.onToolsActions.onReload(t.id)}))})),Pt(Et(e),"closeDeleteDialog",(function(){e.setState({showDeleteDialog:!1})})),Pt(Et(e),"displayDeleteDialog",(function(){e.setState({showDeleteDialog:!0})})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.getStatus(),r=this.checkBbox(),n=r&&Me.default.defs(r),o=u().createElement(dt,{key:"toollayermetadatamodal",layerMetadata:this.props.layerMetadata,metadataTemplate:this.props.metadataTemplate,hideLayerMetadata:this.props.onToolsActions.onHideLayerMetadata,layerMetadataPanelTitle:this.props.text.layerMetadataPanelTitle});return this.props.activateTool.activateToolsContainer?u().createElement(h.ButtonGroup,null,this.props.activateTool.activateLayerInfoTool&&"DESELECT"===t?u().createElement(Ze.Z,{key:"layerInfo",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-layerInfo"},this.props.text.layerInfoTooltip)},u().createElement(qe.Z,{key:"layerInfo",bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onLayerInfo},u().createElement(h.Glyphicon,{glyph:"layer-info"}))):null,!this.props.activateTool.activateAddLayer||"DESELECT"!==t&&"GROUP"!==t?null:u().createElement(Ze.Z,{key:"addLayer",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-addLayer"},"GROUP"===t?this.props.text.addLayerToGroupTooltip:this.props.text.addLayerTooltip)},u().createElement(qe.Z,{key:"addLayer",bsStyle:"primary",className:"square-button-md",onClick:this.addLayer},u().createElement(h.Glyphicon,{glyph:"add-layer"}))),this.props.activateTool.activateAddGroup&&("DESELECT"===t||"GROUP"===t)&&this.getSelectedNodeDepth()<=this.props.maxDepth?u().createElement(Ze.Z,{key:"addGroup",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-addGroup"},"GROUP"===t?this.props.text.addSubGroupTooltip:this.props.text.addGroupTooltip)},u().createElement(qe.Z,{key:"addGroup",bsStyle:"primary",className:"square-button-md",onClick:this.addGroup},u().createElement(h.Glyphicon,{glyph:"add-folder"}))):null,this.props.activateTool.activateZoomTool&&("LAYER"===t||"GROUP"===t||"LAYERS"===t||"GROUPS"===t)&&r?u().createElement(Ze.Z,{key:"zoomTo",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-zoomTo"},n?this.props.text.zoomToTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"]:u().createElement(v.Z,{msgId:"toc.epsgNotSupported",msgParams:{epsg:r||" "}}))},u().createElement(qe.Z,{bsStyle:"primary",className:"square-button-md",style:n?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"default"},onClick:n?this.zoomTo:function(){}},u().createElement(h.Glyphicon,{glyph:"zoom-to"}))):null,!this.props.activateTool.activateSettingsTool||"LAYER"!==t&&"GROUP"!==t&&"LAYER_LOAD_ERROR"!==t||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:u().createElement(Ze.Z,{key:"settings",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-settings"},this.props.text.settingsTooltip["LAYER_LOAD_ERROR"===t?"LAYER":t])},u().createElement(qe.Z,{active:this.props.settings.expanded,bsStyle:this.props.settings.expanded?"success":"primary",className:"square-button-md",onClick:function(){e.showSettings(t)}},u().createElement(h.Glyphicon,{glyph:"wrench"}))),!this.props.activateTool.activateLayerFilterTool||"LAYER"!==t&&"LAYER_LOAD_ERROR"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:u().createElement(Ze.Z,{key:"queryPanel",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-layerFilter"},this.props.text.layerFilterTooltip)},u().createElement(qe.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onQueryBuilder},u().createElement(h.Glyphicon,{glyph:"filter-layer"}))),!this.props.activateTool.activateQueryTool||"LAYER"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:u().createElement(Ze.Z,{key:"featuresGrid",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-featuresGrid"},this.props.text.featuresGridTooltip)},u().createElement(qe.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.browseData},u().createElement(h.Glyphicon,{glyph:"features-grid"}))),(!this.props.activateTool.activateRemoveLayer||"LAYER"!==t&&"LAYERS"!==t&&"LAYER_LOAD_ERROR"!==t&&"LAYERS_LOAD_ERROR"!==t)&&(!this.props.activateTool.activateRemoveGroup||"GROUP"!==t&&"GROUPS"!==t&&"GROUP_LOAD_ERROR"!==t&&"GROUPS_LOAD_ERROR"!==t)||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:u().createElement(Ze.Z,{key:"removeNode",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-trash"},this.props.selectedGroups.length?this.props.text.trashTooltip.GROUP:this.props.text.trashTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},u().createElement(qe.Z,{active:this.state.showDeleteDialog,bsStyle:this.props.settings.showDeleteDialog?"success":"primary",className:"square-button-md",onClick:this.displayDeleteDialog},u().createElement(h.Glyphicon,{glyph:"trash"}))),!this.isLoading()&&"LAYER_LOAD_ERROR"===t||"LAYERS_LOAD_ERROR"===t?u().createElement(Ze.Z,{key:"reload",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-reload"},this.props.text.reloadTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},u().createElement(qe.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.reload},u().createElement(h.Glyphicon,{glyph:"refresh"}))):null,!this.props.activateTool.activateWidgetTool||"LAYER"!==t||1!==this.props.selectedLayers.length||"vector"===this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:u().createElement(Ze.Z,{key:"widgets",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-widgets"},this.props.text.createWidgetTooltip)},u().createElement(qe.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onNewWidget},u().createElement(h.Glyphicon,{glyph:"stats"}))),!this.props.activateTool.activateDownloadTool||"LAYER"!==t||"wms"!==this.props.selectedLayers[0].type&&!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded?null:u().createElement(Ze.Z,{key:"downloadTool",placement:"top",overlay:u().createElement(h.Tooltip,{id:"toc-tooltip-downloadTool"},this.props.text.downloadToolTooltip)},u().createElement(qe.Z,{bsStyle:this.props.layerdownload.expanded?"success":"primary",className:"square-button-md",onClick:this.download},u().createElement(h.Glyphicon,{glyph:"download"}))),!this.props.activateTool.activateMetedataTool||"LAYER"!==t||this.props.settings.expanded||this.props.layerdownload.expanded?null:u().createElement(Ze.Z,{key:"layerMetadata",placement:"top",overlay:u().createElement(h.Tooltip,{id:"legend-tooltip-metadata"},this.props.text.layerMetadataTooltip)},u().createElement(qe.Z,{key:"layer-metadata",bsStyle:this.props.layerMetadata.expanded?"success":"primary",className:"square-button-md",onClick:function(){return e.showMetadata()}},u().createElement(h.Glyphicon,{glyph:"info-sign"}))),this.props.items.filter((function(r){var n=r.selector;return(void 0===n?function(){return!0}:n)(gt(gt({},e.props),{},{status:t}))})).map((function(r){var n=r.Component;return u().createElement(n,mt({},e.props,{status:t}))})),u().createElement(Ge.Z,{ref:"removelayer",options:{animation:!1,className:"modal-fixed"},show:this.state.showDeleteDialog,onHide:this.closeDeleteDialog,onClose:this.closeDeleteDialog,onConfirm:this.removeNodes,titleText:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupText:this.props.text.confirmDeleteText,confirmText:this.props.text.confirmDeleteConfirmText,cancelText:this.props.text.confirmDeleteCancelText,body:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupMessage:this.props.text.confirmDeleteMessage}),o):null}}])&&ht(t.prototype,r),a}(u().Component);Pt(jt,"propTypes",{groups:f().array,items:f().array,selectedLayers:f().array,generalInfoFormat:f().string,selectedGroups:f().array,onToolsActions:f().object,text:f().object,activateTool:f().object,options:f().object,style:f().object,settings:f().object,layerMetadata:f().object,layerdownload:f().object,maxDepth:f().number,metadataTemplate:f().oneOfType([f().string,f().array,f().object,f().func])}),Pt(jt,"defaultProps",{groups:[],items:[],selectedLayers:[],selectedGroups:[],onToolsActions:{onZoom:function(){},onNewWidget:function(){},onBrowseData:function(){},onQueryBuilder:function(){},onUpdate:function(){},onRemove:function(){},onClear:function(){},onSettings:function(){},onUpdateSettings:function(){},onRetrieveLayerData:function(){},onHideSettings:function(){},onReload:function(){},onAddLayer:function(){},onAddGroup:function(){},onDownload:function(){},onGetMetadataRecord:function(){},onHideLayerMetadata:function(){},onShow:function(){},onLayerInfo:function(){}},maxDepth:3,text:{settingsText:"",opacityText:"",elevationText:"",saveText:"",closeText:"",confirmDeleteText:"",confirmDeleteMessage:"",confirmDeleteConfirmText:"",confirmDeleteCancelText:"",createWidgetTooltip:"",addLayerTooltip:"",addLayerToGroupTooltip:"",addGroupTooltip:"",addSubGroupTooltip:"",zoomToTooltip:{LAYER:"",LAYERS:""},settingsTooltip:{LAYER:"",GROUP:""},featuresGridTooltip:"",downloadToolTooltip:"",trashTooltip:{LAYER:"",LAYERS:"",GROUP:""},reloadTooltip:{LAYER:"",LAYERS:""},layerMetadataTooltip:"",layerMetadataPanelTitle:"",layerFilter:"",layerInfoTooltip:""},activateTool:{activateToolsContainer:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateZoomTool:!0,activateQueryTool:!0,activateDownloadTool:!0,activateSettingsTool:!0,activateAddLayer:!0,activateAddGroup:!0,includeDeleteButtonInSettings:!1,activateMetedataTool:!0,activateLayerFilterTool:!0,activateLayerInfoTool:!0},options:{modalOptions:{},metadataOptions:{},settingsOptions:{}},style:{chartStyle:{}},settings:{},layerMetadata:{},layerdownload:{},metadataTemplate:null});const Ct=jt;var xt=r(29180),Tt=r(11347),kt=r(29423),It=r(59551),At=r(67007),Ft=r(3475),Dt=r(37275),Rt=r(5055),Nt=r.n(Rt),_t=r(75875),Lt=r.n(_t),Mt=r(33044),Zt=r(93201);function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ut={},Wt=function(e,t){return e===t||"EPSG:3857"===e&&"EPSG:900913"===t||"EPSG:900913"===e&&"EPSG:3857"===t},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=(0,fe.castArray)((0,fe.get)(e,"TileMapService.TileMaps.TileMap",[])),a=o.projection,l=(0,fe.get)(o,"options.service.allSRS"),c=i.map((function(t){var r=t.$,n=void 0===r?{}:r;return Bt(Bt({},n),{},{href:(0,Mt.cleanAuthParamsFromURL)(n.href),identifier:(0,Mt.cleanAuthParamsFromURL)(n.href),format:(0,Zt.A)(n.href),tmsUrl:(0,Mt.cleanAuthParamsFromURL)(e.url)})})).filter((function(e){var t=e.srs;return!(a&&!l)||Wt(t,a)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.srs,i=void 0===o?"":o;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:c.length,numberOfRecordsReturned:Math.min(r,c.length),nextRecord:t+Math.min(r,c.length)+1,records:c.filter((function(e,n){return n>=t-1&&n<t-1+r}))}},qt=function(e){return e},Ht=function(e,t,r,n,o){var i=Ut[e];return i&&(new Date).getTime()<i.timestamp+1e3*(Dt.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(Vt(i.data,t,r,n,o))})):Lt().get(e).then((function(i){var a;return Nt().parseString(i.data,{explicitArray:!1},(function(t,r){a=Bt(Bt({},r),{},{url:e})})),Ut[e]={timestamp:(new Date).getTime(),data:a},Vt(a,t,r,n,o)}))},$t=r(36882),Yt=r(89255);function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){Qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jt="custom",er=function(e,t,r,n,o){var i,a,l,c=(0,fe.get)(o,"options.service"),s=[];if(c.provider&&c.provider!==Jt){var u=(i=c.provider,Object.keys(null!==(a=null===$t.Z||void 0===$t.Z||null===(l=$t.Z[i])||void 0===l?void 0:l.variants)&&void 0!==a?a:{}));0===u.length?s.push({provider:"".concat(c.provider),title:"".concat(c.provider)}):s=u.map((function(e){return{provider:"".concat(c.provider,".").concat(e)}}))}else c.url&&(s=[Xt(Xt({},c),{},{title:c.title,type:"tileprovider",url:c.url,attribution:c.attribution,options:c.options||{},provider:Jt})]);return new Promise((function(e){e(function(e,t,r,n){var o=e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===e?"":e).toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:t+Math.min(r,o.length)+1,records:i}}(s,t,r,n))}))};function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){return!t||"object"!==tr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nr(e){var t="function"==typeof Map?new Map:void 0;return(nr=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return or(e,arguments,lr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ar(n,e)})(e)}function or(e,t,r){return(or=ir()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&ar(o,r.prototype),o}).apply(null,arguments)}function ir(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ar(e,t){return(ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ar(e,t)}(o,e);var t,r,n=(t=o,r=ir(),function(){var e,n=lr(t);if(r){var o=lr(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return rr(this,e)});function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(r=n.call(this,e)).name="ServiceValidationError",r.notification=t,r}return o}(nr(Error)),sr=function(e){return""===e.title||""===e.url?Yt.Observable.throw(new cr("Validation Error","catalog.notification.warningAddCatalogService")):Yt.Observable.of(e)},ur=function(e){var t=e.parseUrl;return function(e){var r="catalog.notification.errorServiceUrl";return Yt.Observable.defer((function(){return Lt().get(t(e.url))})).catch((function(){throw new cr("Service Test error",r)})).switchMap((function(t){if(t.error||""===t.data)throw new cr("Service Test error",r);return Yt.Observable.of(e)}))}},pr=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},l=a.service,c=void 0===l?{}:l;return"tms"===c.provider&&Ht(e,t,r,n,o),er(0,t,r,n,o)},fr=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},l=a.service,c=void 0===l?{}:l;return"tms"===c.provider?Ht(e,t,r,n,o):er(0,t,r,n,o)},dr=function(e){return"tms"===e.provider?sr(e):function(e){var t,r=e.provider&&"custom"!==e.provider?!!e.provider:(t=e.url,(0,Ve.Nw)(t));if(e.title&&r)return Yt.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")}(e)},yr=function(e){return"tms"===e.provider?ur({parseUrl:qt})(e):function(e){return Yt.Observable.of(e)}(e)},mr=r(32420);function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach((function(t){vr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hr(e){return function(e){if(Array.isArray(e))return Or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Or(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wr={},Er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=(0,fe.castArray)((0,fe.get)(e,'["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType',[])),i=o.map((function(t){var r=t.Name,n=t.Title,o=t.Abstract,i=t.DefaultSRS,a=t.OtherSRS,l=void 0===a?[]:a,c=t["ows:WGS84BoundingBox"],s=c["ows:LowerCorner"].split(" "),u=c["ows:UpperCorner"].split(" "),p={minx:parseFloat(s[0]),miny:parseFloat(s[1]),maxx:parseFloat(u[0]),maxy:parseFloat(u[1])};return{featureType:t,type:"wfs",url:(0,Mt.cleanAuthParamsFromURL)(e.url),name:r,title:n,description:o,SRS:[i].concat(hr(l)),defaultSRS:i,boundingBox:{bounds:p,crs:"EPSG:4326"}}})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.name,i=void 0===o?"":o,a=e.description;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())||-1!==a.toLowerCase().indexOf(n.toLowerCase())})),a=i.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:i.length,numberOfRecordsReturned:Math.min(r,a.length),nextRecord:t+Math.min(r,i.length)+1,records:a}},Sr=mr.getCapabilitiesURL,Pr=function(e,t,r,n,o){var i=wr[e];return i&&(new Date).getTime()<i.timestamp+1e3*(Dt.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(Er(i.data,t,r,n,o))})):(0,mr.getCapabilities)(e).then((function(i){var a;return Nt().parseString(i.data,{explicitArray:!1,stripPrefix:!0},(function(t,r){a=gr(gr({},r),{},{url:e})})),wr[e]={timestamp:(new Date).getTime(),data:a},Er(a,t,r,n,o)}))},jr=function(e,t,r,n,o){return Pr(e,t,r,n,o)},Cr=r(32354);function xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(r),!0).forEach((function(t){kr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ir={csw:Tr({validate:sr,testService:ur(It.Z)},It.Z),wfs:Tr({validate:sr,testService:ur(o)},o),wms:Tr({validate:sr,testService:ur(At.ZP)},At.ZP),tms:n,wmts:Tr({validate:sr,testService:ur(Ft.Z)},Ft.Z),backgrounds:Tr({validate:sr,testService:ur(Cr.Z)},Cr.Z)};function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fr(){return(Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nr(e,t){return(Nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _r(e,t){return!t||"object"!==Ar(t)&&"function"!=typeof t?Lr(e):t}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gr=function e(t,r){return t.reduce((function(t,n){var o=se()({},n);return o.nodes&&(o=se()({},o,{nodes:e(o.nodes,r)})),r.forEach((function(e){o=e.func(o)?se()({},o,e.options):se()({},o)})),t.push(o),t}),[])},Br=function(e,t,r){return-1!==(((0,fe.isObject)(e.title)?e.title[r]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase())},zr=(0,N.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},Y.Bt,Y.jN,K,Y.yj,Y.lI,J.Od,ee.Pz,ee.KV,Y.NP,Y.wA,Y.l2,J.Zs,me.$t,te.PJ,re.us,be.c0,ne.np,oe.wk],(function(e,t,r,n,o,i,a,l,c,s,u,p,f,d,y,m,b,g,v){return{enabled:e,groups:t,settings:r,swipeSettings:n,layerMetadata:o,layerdownload:i,currentZoomLvl:a&&a.zoom,scales:(0,ae.getScales)(a&&a.projection||"EPSG:3857",a&&a.mapOptions&&a.mapOptions.view&&a.mapOptions.view.DPI||null),currentLocale:l,currentLocaleLanguage:c,selectedNodes:s,filterText:u,generalInfoFormat:m,selectedLayers:p.filter((function(e){return(0,fe.head)(s.filter((function(t){return t===e.id})))})),noFilterResults:0===p.filter((function(e){return Br(e,u,l)})).length,updatableLayersCount:p.filter((function(e){return"background"!==e.group&&("wms"===e.type||"wmts"===e.type)})).length,selectedGroups:s.map((function(e){return(0,ie.getNode)(t,e)})).filter((function(e){return e&&e.nodes})),mapName:f,filteredGroups:Gr(t,[{options:{showComponent:!0},func:function(){return!u}},{options:{loadingError:!0},func:function(e){return(0,fe.head)((e.nodes||[]).filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return u&&(0,fe.head)((e.nodes||[]).filter((function(t){return Br(t,u,l)||t.nodes&&(0,fe.head)(e.nodes.filter((function(e){return e.showComponent})))})))}},{options:{showComponent:!1},func:function(e){return(0,fe.head)((e.nodes||[]).filter((function(e){return e.hidden||"annotations"===e.id&&b})))&&1===e.nodes.length}},{options:{showComponent:!1},func:function(e){return"annotations"===e.id&&b}}]),catalogActive:d,activateWidgetTool:y,user:g,isLocalizedLayerStylesEnabled:v}})),Ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mr(n);if(o){var r=Mr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _r(this,e)});function a(){var e;Dr(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Zr(Lr(e=i.call.apply(i,[this].concat(r))),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),Zr(Lr(e),"getDefaultGroup",(function(){var t=e.props.groupNodeComponent||xt.Z;return u().createElement(t,Fr({onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null},e.props.groupOptions,{titleTooltip:e.props.activateTitleTooltip,propertiesChangeHandler:e.props.groupPropertiesChangeHandler,onToggle:e.props.onToggleGroup,style:e.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:e.props.visibilityCheckType,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null}))})),Zr(Lr(e),"getDefaultLayer",(function(){var t=e.props.layerNodeComponent||Tt.Z;return u().createElement(t,Fr({},e.props.layerOptions,{titleTooltip:e.props.activateTitleTooltip,showFullTitleOnExpand:e.props.showFullTitleOnExpand,onToggle:e.props.onToggleLayer,activateOpacityTool:e.props.activateOpacityTool,onContextMenu:e.props.onContextMenu,propertiesChangeHandler:e.props.layerPropertiesChangeHandler,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null,visibilityCheckType:e.props.visibilityCheckType,activateLegendTool:e.props.activateLegendTool,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,filterText:e.props.filterText,onUpdateNode:e.props.updateNode,hideOpacityTooltip:e.props.hideOpacityTooltip,language:e.props.isLocalizedLayerStylesEnabled?e.props.currentLocaleLanguage:null}))})),Zr(Lr(e),"renderTOC",(function(){var t=e.getDefaultGroup(),r=e.getDefaultLayer(),n=[e.props.activateToolsContainer,e.props.activateFilterLayer,e.props.activateMapTitle].filter((function(e){return e})),o=n.length>0?" toc-body-sections-"+n.length:" toc-body-sections";return u().createElement("div",null,u().createElement(Le,{title:e.props.mapName,showTitle:e.props.activateMapTitle,showFilter:e.props.activateFilterLayer&&(e.props.groups.filter((function(e){return(e.nodes||[]).length}))||[]).length,showTools:e.props.activateToolsContainer,onClear:function(){e.props.onSelectNode()},onFilter:e.props.onFilter,filterTooltipClear:u().createElement(v.Z,{msgId:"toc.clearFilter"}),filterPlaceholder:(0,le.S$)(e.context.messages,"toc.filterPlaceholder"),filterText:e.props.filterText,toolbar:u().createElement(Ct,{items:e.props.items.filter((function(e){return"toolbar"===e.target})),groups:e.props.groups,selectedLayers:e.props.selectedLayers,selectedGroups:e.props.selectedGroups,generalInfoFormat:e.props.generalInfoFormat,settings:e.props.settings,swipeSettings:e.props.swipeSettings,layerMetadata:e.props.layerMetadata,layerdownload:e.props.layerdownload,metadataTemplate:e.props.metadataTemplate,maxDepth:e.props.maxDepth,activateTool:{activateToolsContainer:e.props.activateToolsContainer,activateRemoveLayer:e.props.activateRemoveLayer,activateRemoveGroup:e.props.activateRemoveGroup,activateZoomTool:e.props.activateZoomTool,activateQueryTool:e.props.activateQueryTool,activateDownloadTool:e.props.activateDownloadTool,activateSettingsTool:e.props.activateSettingsTool,activateAddLayer:e.props.activateAddLayerButton&&!e.props.catalogActive,activateAddGroup:e.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:e.props.activateMetedataTool,activateWidgetTool:e.props.activateWidgetTool,activateLayerFilterTool:e.props.activateLayerFilterTool,activateLayerInfoTool:e.props.updatableLayersCount>0&&e.props.activateLayerInfoTool},options:{modalOptions:{},metadataOptions:e.props.metadataOptions,settingsOptions:e.props.settingsOptions},style:{chartStyle:e.props.chartStyle},text:{settingsText:u().createElement(v.Z,{msgId:"layerProperties.windowTitle"}),opacityText:u().createElement(v.Z,{msgId:"opacity"}),elevationText:u().createElement(v.Z,{msgId:"elevation"}),saveText:u().createElement(v.Z,{msgId:"save"}),closeText:u().createElement(v.Z,{msgId:"close"}),confirmDeleteText:u().createElement(v.Z,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:u().createElement(v.Z,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:u().createElement(v.Z,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:u().createElement(v.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:u().createElement(v.Z,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:u().createElement(v.Z,{msgId:"cancel"}),addLayer:u().createElement(v.Z,{msgId:"toc.addLayer"}),addLayerTooltip:u().createElement(v.Z,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:u().createElement(v.Z,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:u().createElement(v.Z,{msgId:"toc.addGroup"}),addSubGroupTooltip:u().createElement(v.Z,{msgId:"toc.addSubGroup"}),createWidgetTooltip:u().createElement(v.Z,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:u().createElement(v.Z,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:u().createElement(v.Z,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:u().createElement(v.Z,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:u().createElement(v.Z,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:u().createElement(v.Z,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:u().createElement(v.Z,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:u().createElement(v.Z,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:u().createElement(v.Z,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:u().createElement(v.Z,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:u().createElement(v.Z,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:u().createElement(v.Z,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:u().createElement(v.Z,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:u().createElement(v.Z,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:u().createElement(v.Z,{msgId:"toc.layerFilterTooltip"}),layerInfoTooltip:u().createElement(v.Z,{msgId:"toc.layerInfoTooltip"})},onToolsActions:{onZoom:e.props.onZoomToExtent,onNewWidget:e.props.onNewWidget,onBrowseData:e.props.onBrowseData,onQueryBuilder:e.props.onQueryBuilder,onDownload:e.props.onDownload,onUpdate:e.props.updateNode,onRemove:e.props.removeNode,onClear:e.props.onSelectNode,onSettings:e.props.onSettings,onUpdateSettings:e.props.updateSettings,onRetrieveLayerData:e.props.retrieveLayerData,onHideSettings:e.props.hideSettings,onReload:e.props.refreshLayerVersion,onAddLayer:e.props.onAddLayer,onAddGroup:e.props.onAddGroup,onGetMetadataRecord:e.props.onGetMetadataRecord,onHideLayerMetadata:e.props.hideLayerMetadata,onShow:e.props.layerPropertiesChangeHandler,onLayerInfo:e.props.onLayerInfo}})}),u().createElement("div",{className:"mapstore-toc"+o},e.props.noFilterResults&&e.props.filterText?u().createElement("div",null,u().createElement("div",{className:"toc-filter-no-results"},u().createElement(v.Z,{msgId:"toc.noFilteredResults"}))):u().createElement(ge.Z,{onError:e.props.onError,onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null,filter:e.getNoBackgroundLayers,nodes:e.props.filteredGroups},u().createElement(kt.Z,{groupElement:t,layerElement:r}))))})),e}return t=a,(r=[{key:"render",value:function(){return this.props.groups?this.renderTOC():u().createElement("div",null)}}])&&Rr(t.prototype,r),a}(u().Component);Zr(Ur,"propTypes",{id:f().number,items:f().array,buttonContent:f().node,groups:f().array,settings:f().object,swipeSettings:f().object,layerMetadata:f().object,layerdownload:f().object,metadataTemplate:f().oneOfType([f().string,f().array,f().object,f().func]),refreshMapEnabled:f().bool,groupStyle:f().object,groupPropertiesChangeHandler:f().func,layerPropertiesChangeHandler:f().func,onToggleGroup:f().func,onToggleLayer:f().func,onContextMenu:f().func,onBrowseData:f().func,onQueryBuilder:f().func,onDownload:f().func,onSelectNode:f().func,selectedNodes:f().array,onZoomToExtent:f().func,retrieveLayerData:f().func,onSort:f().func,onSettings:f().func,onRefreshLayer:f().func,onNewWidget:f().func,hideSettings:f().func,updateSettings:f().func,updateNode:f().func,removeNode:f().func,activateTitleTooltip:f().bool,showFullTitleOnExpand:f().bool,activateOpacityTool:f().bool,activateSortLayer:f().bool,activateFilterLayer:f().bool,activateMapTitle:f().bool,activateToolsContainer:f().bool,activateRemoveLayer:f().bool,activateRemoveGroup:f().bool,activateLegendTool:f().bool,activateZoomTool:f().bool,activateQueryTool:f().bool,activateDownloadTool:f().bool,activateSettingsTool:f().bool,activateMetedataTool:f().bool,activateWidgetTool:f().bool,activateLayerInfoTool:f().bool,maxDepth:f().number,visibilityCheckType:f().string,settingsOptions:f().object,chartStyle:f().object,currentZoomLvl:f().number,scales:f().array,layerOptions:f().object,metadataOptions:f().object,spatialOperations:f().array,spatialMethodOptions:f().array,groupOptions:f().object,currentLocale:f().string,currentLocaleLanguage:f().string,onFilter:f().func,filterText:f().string,generalInfoFormat:f().string,selectedLayers:f().array,selectedGroups:f().array,mapName:f().string,filteredGroups:f().array,noFilterResults:f().bool,onAddLayer:f().func,onAddGroup:f().func,onError:f().func,onGetMetadataRecord:f().func,hideLayerMetadata:f().func,activateAddLayerButton:f().bool,activateAddGroupButton:f().bool,activateLayerFilterTool:f().bool,catalogActive:f().bool,refreshLayerVersion:f().func,hideOpacityTooltip:f().bool,layerNodeComponent:f().func,groupNodeComponent:f().func,isLocalizedLayerStylesEnabled:f().bool,onLayerInfo:f().func,onSetSwipeActive:f().func,updatableLayersCount:f().number,onSetSwipeMode:f().func}),Zr(Ur,"contextTypes",{messages:f().object}),Zr(Ur,"defaultProps",{items:[],groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onContextMenu:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onRefreshLayer:function(){},onNewWidget:function(){},updateNode:function(){},removeNode:function(){},onSelectNode:function(){},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!0,activateWidgetTool:!1,activateLayerFilterTool:!1,activateLayerInfoTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:function(){},onAddGroup:function(){},onError:function(){},onGetMetadataRecord:function(){},hideLayerMetadata:function(){},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:function(){},metadataTemplate:null,onLayerInfo:function(){},onSetSwipeMode:function(){}});var Wr=(0,_.withPropsOnChange)(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup","layerInfoToolPermissions","activateLayerInfoTool"],(function(e){var t=e.addLayersPermissions,r=void 0===t||t,n=e.removeLayersPermissions,o=void 0===n||n,i=e.sortingPermissions,a=void 0===i||i,l=e.addGroupsPermissions,c=void 0===l||l,s=e.removeGroupsPermissions,u=void 0===s||s,p=e.layerInfoToolPermissions,f=void 0!==p&&p,d=e.activateAddLayerButton,y=e.activateRemoveLayer,m=e.activateSortLayer,b=e.activateAddGroupButton,g=e.activateRemoveGroup,v=e.activateLayerInfoTool,h=e.user,O=function(e,t){var r=h&&"ADMIN"===h.role||!1;return!(!e&&!r)&&t};return{activateAddLayerButton:O(r,d),activateRemoveLayer:O(o,y),activateSortLayer:O(a,m),activateAddGroupButton:O(c,b),activateRemoveGroup:O(u,g),activateLayerInfoTool:O(f,v)}})),Vr=(0,_.branch)((function(e){var t=e.checkPlugins;return void 0===t||t}),(0,_.withPropsOnChange)(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor","activateLayerInfoTool"],(function(e){var t=e.items,r=void 0===t?[]:t,n=e.activateAddLayerButton,o=void 0===n||n,i=e.activateAddGroupButton,a=void 0===i||i,l=e.activateQueryTool,c=void 0===l||l,s=e.activateSettingsTool,u=void 0===s||s,p=e.activateLayerFilterTool,f=void 0===p||p,d=e.activateWidgetTool,y=void 0===d||d,m=e.activateLayerInfoTool,b=void 0===m||m,g=e.activateDownloadTool,v=void 0===g||g;return{activateAddLayerButton:o&&!!(0,fe.find)(r,{name:"MetadataExplorer"})||!1,activateAddGroupButton:a&&!!(0,fe.find)(r,{name:"AddGroup"})||!1,activateSettingsTool:u&&!!(0,fe.find)(r,{name:"TOCItemsSettings"})||!1,activateQueryTool:c&&!!(0,fe.find)(r,{name:"FeatureEditor"})||!1,activateLayerFilterTool:f&&!!(0,fe.find)(r,{name:"FilterLayer"})||!1,activateWidgetTool:y&&!!(0,fe.find)(r,{name:"WidgetBuilder"})&&!!(0,fe.find)(r,{name:"Widgets"}),activateLayerInfoTool:b&&!!(0,fe.find)(r,{name:"LayerInfo"})||!1,activateDownloadTool:v&&!!(0,fe.find)(r,{name:"LayerDownload"})||!1}}))),qr=(0,d.connect)(zr,{groupPropertiesChangeHandler:w.WO,layerPropertiesChangeHandler:w.He,retrieveLayerData:q.k,onToggleGroup:(0,ie.toggleByType)("groups",w.bh),onToggleLayer:(0,ie.toggleByType)("layers",w.bh),onContextMenu:w.pV,onBrowseData:w.Qr,onQueryBuilder:function(){return{type:z}},onDownload:w.LR,onSort:w.Dv,onSettings:w.RP,onZoomToExtent:H.Px,hideSettings:w.sF,updateSettings:w.VP,updateNode:w.tV,removeNode:w.ZF,onSelectNode:w.UG,onFilter:w.F5,onAddLayer:O.pu.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:O.pu.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:ye.ky,onError:$.vU,hideLayerMetadata:w.Jh,onNewWidget:function(){return(0,de.A4)()},refreshLayerVersion:w.ct,onLayerInfo:O.Xg.bind(null,"layerinfo","enabled",!0,!1)})((0,_.compose)(Wr,Vr)(Ur));const Hr={TOCPlugin:se()(qr,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:u().createElement(v.Z,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:u().createElement(h.Glyphicon,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:u().createElement("img",{src:pe()}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:r(46905).Z,query:r(97301).Z},epics:r(56175).Z(Ir)};var $r=r(21460),Yr=r(83520),Kr=(r(16385),r(15135)),Xr=r(55105),Qr=r(6806),Jr=r(1706);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(r),!0).forEach((function(t){fn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function on(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function an(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sn(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?un(e):t}function un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pn(n);if(o){var r=pn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sn(this,e)});function a(){var e;an(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fn(un(e=i.call.apply(i,[this].concat(r))),"getWidth",(function(){return e.props.dynamicWidth||e.props.width})),fn(un(e),"renderChildren",(function(t,r){var n={key:t.key?t.key:r,ref:t.ref,open:e.props.activeKey&&e.props.activeKey===t.props.eventKey},o=t.props,i=(o.glyph,o.icon,o.buttonConfig,on(o,["glyph","icon","buttonConfig"]));return u().createElement(t.type,nn({},n,i))})),fn(un(e),"renderButtons",(function(){return e.props.children.map((function(t){var r=u().createElement(qe.Z,{key:t.props.eventKey,bsSize:"large",className:t.props.buttonConfig&&t.props.buttonConfig.buttonClassName?t.props.buttonConfig.buttonClassName:"square-button",onClick:e.props.onChoose.bind(null,t.props.eventKey,e.props.activeKey===t.props.eventKey),bsStyle:e.props.activeKey===t.props.eventKey?"default":"primary"},t.props.glyph?u().createElement(h.Glyphicon,{glyph:t.props.glyph}):t.props.icon);if(t.props.buttonConfig&&t.props.buttonConfig.tooltip){var n=u().createElement(h.Tooltip,{key:"tooltip."+t.props.eventKey,id:"tooltip."+t.props.eventKey},u().createElement(v.Z,{msgId:t.props.buttonConfig.tooltip}));return u().createElement(Ze.Z,{placement:"bottom",key:"overlay-trigger."+t.props.eventKey,overlay:n},r)}return r}))})),fn(un(e),"renderContent",(function(){var t=e.props.single?u().createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},u().createElement(h.Glyphicon,{glyph:"1-close",className:"no-border btn-default",onClick:e.props.onToggle,style:{cursor:"pointer"}}),u().createElement("div",{className:"navButtons"},e.renderButtons())):u().createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},u().createElement("span",{className:"title"},e.props.title),u().createElement(h.Glyphicon,{glyph:"1-close",className:"no-border btn-default",onClick:e.props.onToggle,style:{cursor:"pointer"}})),r=u().createElement("div",{className:"nav-content"},t,u().createElement("div",{className:"nav-body"},e.props.children.filter((function(t){return!e.props.single||e.props.activeKey===t.props.eventKey})).map(e.renderChildren)));return e.props.resizable?u().createElement(Jr.Resizable,{axis:"x",resizeHandles:["e"],width:e.getWidth(),onResize:e.resize},r):r})),fn(un(e),"resize",(function(t,r){var n=r.size;e.props.onResize(n.width)})),e}return t=a,(r=[{key:"componentDidMount",value:function(){if(!this.props.overlapMap&&this.props.show){var e={left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")};this.props.changeMapStyle(e,"drawerMenu")}}},{key:"componentDidUpdate",value:function(e){if(!this.props.overlapMap&&e.show!==this.props.show){var t=this.props.show?{left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")}:{};this.props.changeMapStyle(t,"drawerMenu")}}},{key:"render",value:function(){var e=this;return u().createElement(Qr.Z,{styles:{sidebar:rn(rn({},this.props.layout),{},{zIndex:1022,width:this.getWidth()}),overlay:{zIndex:1021},root:{right:this.props.show?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}},sidebarClassName:"nav-menu",onSetOpen:function(){e.props.onToggle()},open:this.props.show,docked:this.props.docked,sidebar:this.renderContent()},u().createElement("div",null))}}])&&ln(t.prototype,r),a}(u().Component);fn(dn,"propTypes",{title:f().node,alignment:f().string,activeKey:f().string,docked:f().bool,show:f().bool,onToggle:f().func,onChoose:f().func,single:f().bool,width:f().number,dynamicWidth:f().number,overlapMap:f().bool,changeMapStyle:f().func,layout:f().object,resizable:f().bool,onResize:f().func}),fn(dn,"defaultProps",{docked:!1,single:!1,width:300,overlapMap:!0,layout:{},resizable:!1,onResize:function(){}});const yn=dn;var mn=r(43614);function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(e,t){return!t||"object"!==bn(t)&&"function"!=typeof t?wn(e):t}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=En(n);if(o){var r=En(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return On(this,e)});function a(){var e;gn(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Sn(wn(e=i.call.apply(i,[this].concat(r))),"onHeaderClick",(function(){e.props.onHeaderClick(e.props.eventKey)})),Sn(wn(e),"getHeight",(function(){return e.props.open&&e.refs.sectionContent?e.refs.sectionContent.scrollHeight+10:"0"})),e}return t=a,(r=[{key:"render",value:function(){var e={maxHeight:this.getHeight(),overflow:this.props.open?"auto":"hidden",padding:this.props.open?null:"0"};return u().createElement("div",{className:"section"},u().createElement("div",{className:"sectionHeader",style:{width:"100%"},onClick:this.onHeaderClick},this.props.renderInModal?null:u().createElement(h.Glyphicon,{glyph:"triangle-right",style:this.props.open?{transform:"rotate(90deg)"}:{}}),u().createElement("span",{className:this.headerClassName+" sectionTitle",ref:"sectionTitle"},this.props.header)),this.props.renderInModal?u().createElement(mn.Z,{ref:"modal",show:this.props.open,onHide:this.onHeaderClick},u().createElement(mn.Z.Header,{closeButton:!0},u().createElement(mn.Z.Title,null,this.props.header)),u().createElement(mn.Z.Body,null,this.props.children)):u().createElement("div",{ref:"sectionContent",className:"sectionContent",style:e},this.props.children))}}])&&vn(t.prototype,r),a}(u().Component);Sn(Pn,"displayName","Section"),Sn(Pn,"propTypes",{key:f().string,eventKey:f().string,headerClassName:f().string,open:f().bool,onHeaderClick:f().func,renderInModal:f().bool,header:f().node}),Sn(Pn,"defaultProps",{headerClassName:"panel-heading"});const jn=Pn;var Cn=r(81756);function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(){return(Tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fn(e,t){return!t||"object"!==xn(t)&&"function"!=typeof t?Dn(e):t}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _n=(0,Kr.Z)(qe.Z),Ln=(0,N.P1)([function(e){return e.controls.drawer&&e.controls.drawer.enabled},function(e){return e.controls.drawer&&e.controls.drawer.menu||"1"},function(e){return e.controls.queryPanel&&e.controls.queryPanel.enabled&&e.controls.drawer&&e.controls.drawer.width||e.controls.drawer&&e.controls.drawer.resizedWidth||void 0},function(e){return(0,Xr.ic)(e,{height:!0})}],(function(e,t,r,n){return{show:e,activeKey:t,dynamicWidth:r,layout:n}})),Mn=(0,d.connect)(Ln,{onToggle:O.Xi.bind(null,"drawer",null),onResize:O.Xg.bind(null,"drawer","resizedWidth"),onChoose:(0,fe.partialRight)(O.Xg.bind(null,"drawer","menu"),!0),changeMapStyle:H.hd})(yn),Zn=(0,d.connect)((function(e){return{disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:O.Xi.bind(null,"drawer",null)})((function(e){var t=e.id,r=void 0===t?"":t,n=e.menuButtonStyle,o=void 0===n?{}:n,i=e.buttonStyle,a=void 0===i?"primary":i,l=e.buttonClassName,c=void 0===l?"square-button ms-drawer-menu-button":l,s=e.toggleMenu,p=void 0===s?function(){}:s,f=e.disabled,d=void 0!==f&&f,y=e.glyph,m=void 0===y?"1-layer":y,b=e.tooltipId,g=void 0===b?"toc.drawerButton":b,v=e.tooltipPosition,O=void 0===v?"bottom":v;return u().createElement(_n,{id:r,style:o,bsStyle:a,key:"menu-button",className:c,onClick:p,disabled:d,tooltipId:g,tooltipPosition:O},u().createElement(h.Glyphicon,{glyph:m}))})),Gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Rn(n);if(o){var r=Rn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Fn(this,e)});function a(){var e;kn(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Nn(Dn(e=i.call.apply(i,[this].concat(r))),"getTools",(function(){return e.props.items.map((function(e,t){return se()({},e,{position:e.position||t})})).sort((function(e,t){return e.position-t.position}))})),Nn(Dn(e),"renderItems",(function(){return e.getTools().map((function(t,r){var n=t.panel||t.plugin,o=u().createElement(n,Tn({isPanel:!0},t.cfg,{items:t.items||[],groupStyle:{style:{marginBottom:"0px",cursor:"pointer"}}})),i=t.title?u().createElement("div",{className:"drawer-menu-head drawer-menu-head-"+t.name},u().createElement(Cn.Z,{msgId:t.title})):null;return e.props.singleSection?u().createElement(h.Panel,{icon:t.icon,glyph:t.glyph,buttonConfig:t.buttonConfig,key:t.name,eventKey:r+1+"",header:i},o):u().createElement(jn,{key:t.name,renderInModal:t.renderInModal||!1,eventKey:r+1+"",header:i},o)}))})),e}return t=a,(r=[{key:"render",value:function(){return this.getTools().length>0?u().createElement("div",{id:this.props.id},u().createElement(Zn,Tn({},this.props,{id:"drawer-menu-button"})),u().createElement(Mn,Tn({single:this.props.singleSection},this.props.menuOptions,{title:u().createElement(Cn.Z,{msgId:"menu"}),alignment:"left"}),this.renderItems())):null}}])&&In(t.prototype,r),a}(u().Component);Nn(Gn,"propTypes",{items:f().array,active:f().string,toggleMenu:f().func,id:f().string,glyph:f().string,buttonStyle:f().string,menuOptions:f().object,singleSection:f().bool,buttonClassName:f().string,menuButtonStyle:f().object,disabled:f().bool}),Nn(Gn,"contextTypes",{messages:f().object,router:f().object}),Nn(Gn,"defaultProps",{id:"mapstore-drawermenu",items:[],toggleMenu:function(){},glyph:"1-layer",buttonStyle:"primary",menuOptions:{},singleSection:!0,buttonClassName:"square-button ms-drawer-menu-button",disabled:!1});var Bn=(0,d.connect)((function(e){return{active:e.controls&&e.controls.drawer&&e.controls.drawer.active,disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:O.Xi.bind(null,"drawer",null)})(Gn);const zn={DrawerMenuPlugin:se()(Bn,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}",FloatingLegend:{priority:1,name:"drawer-menu",button:Zn}}),reducers:{}};var Un=r(19461),Wn=r(95605),Vn=r(9860),qn=r(74565),Hn=r(9842),$n=r(68783),Yn=r(13573),Kn=r(63277),Xn=r(57668),Qn=r(21090);function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(){return(eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function to(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function no(e,t){return(no=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oo(e,t){return!t||"object"!==Jn(t)&&"function"!=typeof t?io(e):t}function io(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&no(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ao(n);if(o){var r=ao(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return oo(this,e)});function a(){var e;to(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return lo(io(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){e.props.onClick()})),lo(io(e),"renderButton",(function(){return u().createElement(qe.Z,eo({id:e.props.id,disabled:e.props.disabled},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.props.buttonStyle,style:e.props.style}),u().createElement(h.Glyphicon,{glyph:e.props.glyph}),e.props.text,e.props.help)})),lo(io(e),"addTooltip",(function(t){var r=u().createElement(h.Tooltip,{id:"redo-btn-tooltip"},e.props.tooltip);return u().createElement(Ze.Z,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:r},t)})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&ro(t.prototype,r),a}(u().Component);lo(co,"propTypes",{id:f().string,btnConfig:f().object,text:f().oneOfType([f().string,f().element]),help:f().oneOfType([f().string,f().element]),onClick:f().func,tooltip:f().element,tooltipPlace:f().string,style:f().object,glyph:f().string,buttonStyle:f().string,disabled:f().bool}),lo(co,"defaultProps",{id:"redo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-forward",buttonStyle:"primary",btnConfig:{className:"square-button"}});const so=co;function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function po(){return(po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mo(e,t){return(mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bo(e,t){return!t||"object"!==uo(t)&&"function"!=typeof t?go(e):t}function go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vo(e){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ho(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mo(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vo(n);if(o){var r=vo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return bo(this,e)});function a(){var e;fo(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ho(go(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){e.props.onClick()})),ho(go(e),"renderButton",(function(){return u().createElement(qe.Z,po({id:e.props.id,disabled:e.props.disabled},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.props.buttonStyle,style:e.props.style}),u().createElement(h.Glyphicon,{glyph:e.props.glyph}),e.props.text,e.props.help)})),ho(go(e),"addTooltip",(function(t){var r=u().createElement(h.Tooltip,{id:"undo-btn-tooltip"},e.props.tooltip);return u().createElement(Ze.Z,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:r},t)})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&yo(t.prototype,r),a}(u().Component);ho(Oo,"propTypes",{id:f().string,btnConfig:f().object,text:f().oneOfType([f().string,f().element]),help:f().oneOfType([f().string,f().element]),onClick:f().func,tooltip:f().element,tooltipPlace:f().string,style:f().object,glyph:f().string,buttonStyle:f().string,disabled:f().bool}),ho(Oo,"defaultProps",{id:"undo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-backward",buttonStyle:"primary",btnConfig:{className:"square-button"}});const wo=Oo;var Eo=Qn.zF.undo,So=Qn.zF.redo,Po=(0,d.connect)((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).past.length>0)}}),{onClick:Eo})(wo),jo=(0,d.connect)((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).future.length>0)}}),{onClick:So})(so);const Co={UndoPlugin:se()(Po,{Toolbar:{name:"undo",position:5,tool:!0,tooltip:"history.undoBtnTooltip",icon:u().createElement(h.Glyphicon,{glyph:"step-backward"}),help:u().createElement(Cn.Z,{msgId:"helptexts.historyundo"}),priority:1}}),RedoPlugin:se()(jo,{Toolbar:{name:"redo",position:6,tool:!0,tooltip:"history.redoBtnTooltip",icon:u().createElement(h.Glyphicon,{glyph:"step-forward"}),help:u().createElement(Cn.Z,{msgId:"helptexts.historyredo"}),priority:1}}),reducers:{}};var xo=r(58888),To=r(43526),ko=r(6602),Io=r(42780),Ao=r(89602),Fo=r(97266),Do=r(20),Ro=r(23570),No=r.n(Ro),_o=r(89077),Lo=r(62192),Mo=r(8797),Zo=r(47361),Go=r(65539),Bo=r(80717),zo=r(43129);function Uo(){return(Uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(r),!0).forEach((function(t){qo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ho=(0,_.compose)((0,_.branch)((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var r=t.onSort,n=t.isDraggable,o=t.items,i=void 0===o?[]:o,a=t.containerId,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["onSort","isDraggable","items","containerId"]),c=i.map((function(e,t){return Vo(Vo({},e),{},{onSort:r,isDraggable:n,sortId:t,key:e.id||t,containerId:a})}));return u().createElement(e,Uo({},Vo(Vo({},l),{},{isDraggable:n}),{items:c}))}})));var $o=r(58767),Yo=r(91772),Ko=r(90183),Xo=r(73378),Qo=function(e,t,r){return(0,fe.isNumber)(parseFloat(e))&&!isNaN(parseFloat(e))?(0,Mo.convertUom)(parseFloat(e),t,r):e},Jo=function(e,t,r){return(0,fe.isNumber)(parseFloat(e))&&!isNaN(parseFloat(e))?parseFloat((0,Mo.convertUom)(e,r,t).toFixed(4)):e};const ei=(0,_.compose)((0,_.defaultProps)({valueUom:"m",displayUom:"m",units:[{value:"degrees",label:"deg",originUom:"degrees"},{value:"ft",label:"ft",originUom:"m"},{value:"m",label:"m",originUom:"m"},{value:"km",label:"km",originUom:"m"},{value:"mi",label:"mi",originUom:"m"},{value:"nm",label:"nm",originUom:"m"}]}),(0,_.withStateHandlers)((function(e){var t=e.displayUom;return{uom:void 0===t?"nm":t}}),{setUom:function(){return function(e){return{uom:e}}}}),(0,_.withState)("localValue","setLocalValue"),(0,_.withPropsOnChange)(["value","localValue","uom","valueUom"],(function(e){var t=e.value,r=e.localValue,n=e.uom,o=e.valueUom;return{value:t===Qo(r,n,o)?r:Jo(t,n,o)}})),(0,_.withHandlers)({onChange:function(e){var t=e.uom,r=e.projection,n=e.valueUom,o=e.onChange,i=void 0===o?function(){}:o,a=e.setLocalValue,l=void 0===a?function(){}:a;return function(e){l(e),i(Qo(e,t,n),r)}}}))((function(e){var t=e.value,r=e.units,n=void 0===r?[]:r,o=e.uom,i=e.projection,a=void 0===i?"EPSG:3857":i,l=e.style,c=void 0===l?{display:"inline-flex",width:"100%"}:l,s=e.setUom,p=void 0===s?function(){}:s,f=e.onChange,d=void 0===f?function(){}:f,y=(0,Ko.getUnits)(a);return u().createElement(h.FormGroup,{style:c},u().createElement(Xo.Z,{value:t,placeholder:"radius",name:"radius",onChange:function(e){return d(e,o)},step:1,type:"number"}),u().createElement(h.FormControl,{componentClass:"select",placeholder:"select",value:o,onChange:function(e){return p(e.target.value)},style:{width:85}},n.filter((function(e){var t=e.originUom;return y===t})).map((function(e){return u().createElement("option",{key:e.value,value:e.value},e.label)}))))}));function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(r),!0).forEach((function(t){di(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ri(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oi(e){return function(e){if(Array.isArray(e))return ii(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ii(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ii(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ai(){return(ai=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function si(e,t){return(si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ui(e,t){return!t||"object"!==ti(t)&&"function"!=typeof t?pi(e):t}function pi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fi(e){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function di(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yi=(0,Kr.Z)(h.Glyphicon),mi=(0,Kr.Z)(h.DropdownButton),bi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&si(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fi(n);if(o){var r=fi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ui(this,e)});function a(){var e;li(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return di(pi(e=i.call.apply(i,[this].concat(r))),"getValidationStateRadius",(function(e){var t=parseFloat(e);return(0,fe.isNaN)(t)?"error":null})),di(pi(e),"renderLabelTexts",(function(t,r){var n=r.textLabels,o=r.featurePropValue;return"Polygon"===e.props.type?!(0,fe.isEmpty)(n)&&n[t].text:0!==t?(0,fe.isEmpty)(n)?!(0,fe.isEmpty)(o)&&o[0].formattedValue:n[t-1].text:null})),di(pi(e),"validateCoordinates",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(t&&t.length){var o=t.filter($o.Tl);return r?o.length>e.props.componentsValidation[e.props.type].min||o.length>=e.props.componentsValidation[e.props.type].min&&!(0,$o.Tl)(t[n]):o.length>=e.props.componentsValidation[e.props.type].min}return!1})),di(pi(e),"validateCircle",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.radius;if(t&&t.length){var n=(0,fe.head)(t);return!(0,fe.isNaN)(parseFloat(r))&&(0,$o.Tl)(n)}return!1})),di(pi(e),"validateText",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.valueText;if(t&&t.length){var n=(0,fe.head)(t);return!!r&&(0,$o.Tl)(n)}return!1})),di(pi(e),"isValid",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>1?arguments[1]:void 0;return e[e.props.componentsValidation[e.props.type].validation](t,!1,r)})),di(pi(e),"addCoordPolygon",(function(t){if("Polygon"===e.props.type){var r=t.filter($o.Tl);return t.concat([r.length?r[0]:{lat:"",lon:""}])}return t})),di(pi(e),"change",(function(t,r){var n=e.props.components,o=(0,fe.isNaN)(parseFloat(r.lat))?"":parseFloat(r.lat),i=(0,fe.isNaN)(parseFloat(r.lon))?"":parseFloat(r.lon);n[t]={lat:o,lon:i};var a=e.addCoordPolygon(n);e.props.onChange(a,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection),e.isValid(n)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(n[t]):((e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(null),e.props.onSetInvalidSelected("coords",n.map($o.bh)))})),e}return t=a,(r=[{key:"renderCircle",value:function(){var e=this;return u().createElement("div",{style:{flex:1,overflowY:"auto",padding:"0 10px"}},u().createElement("div",null,u().createElement(h.FormGroup,{validationState:this.getValidationStateRadius(this.props.properties.radius)},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"annotations.editor.radius"})),u().createElement(ei,ai({placeholder:"radius"},this.props.measureOptions,{value:this.props.properties.radius,projection:this.props.mapProjection,name:"radius",onChange:function(t,r){e.isValid(e.props.components,t)?e.props.onChangeRadius(parseFloat(t),e.props.components.map($o.bh),r):""!==t?e.props.onChangeRadius(parseFloat(t),[],r):(e.props.onChangeRadius(null,e.props.components.map($o.bh),r),e.props.onSetInvalidSelected("radius",e.props.components.map($o.bh)))},step:1,type:"number"})))))}},{key:"render",value:function(){var e=this,t=this.props.features[this.props.currentFeature||0],r=(0,fe.get)(t,"geometry.textLabels",[]),n=(0,fe.get)(t,"properties.values",[]),o=this.props,i=o.componentsValidation,a=o.type,l=oi(this.props.components),c=l.filter($o.Tl).length===l.length,s=this[i[a].validation]()&&c,p=[{value:"decimal",text:u().createElement(v.Z,{msgId:"annotations.editor.decimal"})},{value:"aeronautical",text:u().createElement(v.Z,{msgId:"annotations.editor.aeronautical"})}],f=[{glyph:s?"ok-sign text-success":"exclamation-mark text-danger",tooltipId:s?"annotations.editor.valid":i[a].notValid,visible:!0},{Element:function(){return u().createElement(mi,{noCaret:!0,title:u().createElement(yi,{glyph:"cog"}),pullRight:!0,className:"square-button-md no-border",tooltip:"Format"},p.map((function(t){var r=t.text,n=t.value;return u().createElement(h.MenuItem,{active:e.props.format===n,key:n,onClick:function(){return e.props.onChangeFormat(n)}},r)})))}},{glyph:"plus",tooltipId:"annotations.editor.add",visible:!i[a].add||!i[a].max||this.props.components.length!==i[a].max,onClick:function(){var t=oi(e.props.components);t=t.concat([{lat:"",lon:""}]),e.props.onChange(t,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection)}}];return u().createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},u().createElement("div",{className:"measure-feature-selector"},u().createElement("div",null,this.props.showFeatureSelector?u().createElement(zo.ZP,{value:this.props.currentFeature,options:[].concat(oi(this.props.features.map((function(t,r){var n=(0,fe.get)(t,"properties.values",[]),o="bearing"===(n[0]||{}).type?"Bearing":t.geometry.type;if(o!==e.props.type)return null;var i="LineString"===o?"Length":"Bearing"===o?"Bearing":"Area",a=n.length>0?"".concat(i," ").concat(n[0].formattedValue):"",l=n.length>1&&"Polygon"===o?", Perimeter: ".concat(n[1].formattedValue):"";return{label:"".concat(o," (").concat(a).concat(l,")"),value:r}}))),[{label:(0,le.S$)(this.context.messages,"annotations.editor.newFeature"),value:this.props.features.length}]).filter((function(e){return!!e})),onChange:function(t){return e.props.onChangeCurrentFeature(null==t?void 0:t.value)}}):null),u().createElement("div",null,u().createElement(Bo.Z,{btnGroupProps:{className:"pull-right"},btnDefaultProps:{className:"square-button-md no-border"},buttons:f}))),"Circle"===this.props.type&&this.renderCircle(),"Circle"===this.props.type&&u().createElement("div",{style:{flex:1,overflowY:"auto",paddingLeft:10,marginTop:10}},u().createElement("div",null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"annotations.editor.center"})))),u().createElement("div",{className:"coordinates-row-container"},this.props.components.map((function(t,o){return u().createElement(u().Fragment,null,e.props.showLengthAndBearingLabel&&u().createElement("div",{className:"label-texts"},u().createElement("span",null,e.renderLabelTexts(o,{textLabels:r,featurePropValue:n}))),u().createElement(Yo.Z,{format:e.props.format,aeronauticalOptions:e.props.aeronauticalOptions,sortId:o,key:o+" key",renderer:e.props.renderer,isDraggable:e.props.isDraggable,isDraggableEnabled:e.props.isDraggable&&e[i[a].validation](),showDraggable:e.props.isDraggable&&!("Point"===e.props.type||"Text"===e.props.type||"Circle"===e.props.type),formatVisible:!1,removeVisible:i[a].remove,removeEnabled:e[i[a].validation](e.props.components,i[a].remove,o),onSubmit:e.change,onMouseEnter:function(t){(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(t)},onMouseLeave:function(){(e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(null)},onSort:function(t,r){var n=e.props.components.reduce((function(n,o,i){return t===i?[].concat(oi(n),t>r?[ni({},o),(0,fe.head)(e.props.components.filter((function(e,t){return t===r})))]:[(0,fe.head)(e.props.components.filter((function(e,t){return t===r}))),ni({},o)]):r===i?oi(n):[].concat(oi(n),[ni({},o)])}),[]).filter((function(e){return e}));e.isValid(n)?e.props.onChange(n):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map($o.bh))},idx:o,component:t,onRemove:function(){var t=e.props.components.filter((function(e,t){return t!==o}));e.isValid(t)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type&&o!==t.length||"Polygon"===e.props.type?e.props.onHighlightPoint(t[o]):e.props.onHighlightPoint(null),e.props.onChange(t)):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map($o.bh))}}))}))),(!this.props.components||0===this.props.components.length)&&u().createElement("div",{className:"text-center",style:{padding:15,paddingBottom:30}},u().createElement("i",null,u().createElement(v.Z,{msgId:"annotations.editor.addByClick"}))))}}])&&ci(t.prototype,r),a}(u().Component);di(bi,"propTypes",{components:f().array,measureOptions:f().object,onSetInvalidSelected:f().func,onChange:f().func,onChangeRadius:f().func,onHighlightPoint:f().func,onChangeText:f().func,onChangeFormat:f().func,onChangeCurrentFeature:f().func,format:f().string,aeronauticalOptions:f().object,componentsValidation:f().object,transitionProps:f().object,properties:f().object,mapProjection:f().string,features:f().array,currentFeature:f().number,showFeatureSelector:f().bool,type:f().string,isDraggable:f().bool,isMouseEnterEnabled:f().bool,isMouseLeaveEnabled:f().bool,showLengthAndBearingLabel:f().bool,renderer:f().string}),di(bi,"contextTypes",{messages:f().object}),di(bi,"defaultProps",{components:[],measureOptions:{},onChange:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeCurrentFeature:function(){},onSetInvalidSelected:function(){},componentsValidation:{Bearing:{min:2,max:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Polygon:{min:3,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},LineString:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},MultiPoint:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Point:{min:1,max:1,add:!0,remove:!1,validation:"validateCoordinates",notValid:"annotations.editor.notValidMarker"},Circle:{min:1,max:1,add:!0,remove:!1,validation:"validateCircle",notValid:"annotations.editor.notValidCircle"},Text:{min:1,max:1,add:!0,remove:!1,validation:"validateText",notValid:"annotations.editor.notValidText"}},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},features:[],isDraggable:!0,isMouseEnterEnabled:!1,isMouseLeaveEnabled:!1,properties:{},type:"Point"});const gi=Ho(bi);function vi(e){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wi(e,t){return(wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ei(e,t){return!t||"object"!==vi(t)&&"function"!=typeof t?Si(e):t}function Si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ji(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.e(388).then(r.t.bind(r,40388,23));var Ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wi(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pi(n);if(o){var r=Pi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ei(this,e)});function a(){var e;hi(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ji(Si(e=i.call.apply(i,[this].concat(r))),"onGeomClick",(function(t){e.props.geomType!==t&&e.props.toggleMeasure({geomType:t})})),ji(Si(e),"onResetClick",(function(){e.props.toggleMeasure({geomType:null})})),ji(Si(e),"getToolTips",(function(){return{lineToolTip:u().createElement(h.Tooltip,{id:"tooltip-button.line"},e.props.lengthLabel),areaToolTip:u().createElement(h.Tooltip,{id:"tooltip-button.area"},e.props.areaLabel),bearingToolTip:u().createElement(h.Tooltip,{id:"tooltip-button.bearing"},e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel)}})),ji(Si(e),"renderMeasurements",(function(){var t={style:"decimal",minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2};return u().createElement(h.Grid,{fluid:!0,style:{maxHeight:400}},e.props.lineMeasureEnabled&&u().createElement(h.Row,null,u().createElement(h.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.lineMeasureValueEnabled&&u().createElement(h.Col,{xs:6},u().createElement("span",null,e.props.lengthLabel,": "),u().createElement("span",{id:"measure-len-res",className:"measure-value"},u().createElement("h3",null,u().createElement("strong",null,u().createElement(Zo.Z,{key:"len",numberParams:t,value:e.props.formatLength(e.props.uom.length.unit,e.props.measurement.len)})," ",e.props.uom.length.label)))),u().createElement(h.Col,{xs:6},u().createElement(Do.DropdownList,{value:e.props.uom.length.label,onChange:function(t){e.props.onChangeUom("length",t,e.props.uom)},data:e.props.uomLengthValues,textField:"label",valueField:"value"})))),e.props.areaMeasureEnabled&&u().createElement(h.Row,null,u().createElement(h.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.areaMeasureValueEnabled&&u().createElement(h.Col,{xs:6},u().createElement("span",null,e.props.areaLabel,": "),u().createElement("span",{id:"measure-area-res",className:"measure-value"},u().createElement("h3",null,u().createElement("strong",null,u().createElement(Zo.Z,{key:"area",numberParams:t,value:e.props.formatArea(e.props.uom.area.unit,e.props.measurement.area)})," ",e.props.uom.area.label)))),u().createElement(h.Col,{xs:6},u().createElement(Do.DropdownList,{value:e.props.uom.area.label,onChange:function(t){e.props.onChangeUom("area",t,e.props.uom)},data:e.props.uomAreaValues,textField:"label",valueField:"value"})))),e.props.bearingMeasureEnabled&&e.props.bearingMeasureValueEnabled&&u().createElement(h.Row,null,u().createElement(h.FormGroup,{style:{display:"flex",alignItems:"center",minHeight:34}},u().createElement(h.Col,{xs:6},u().createElement("span",null,e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel,": "),u().createElement("span",{id:"measure-bearing-res",className:"measure-value"},u().createElement("h3",null,u().createElement("strong",null,e.props.formatBearing(e.props.measurement.bearing||0,e.isTrueBearing()&&e.props.measurement.trueBearing))))))))})),ji(Si(e),"renderPanel",(function(){return e.props.showResults?e.renderMeasurements():null})),ji(Si(e),"renderLabel",(function(t){return e.props.showButtonsLabels?u().createElement("span",{className:"option-text"},(0,le.S$)(e.context.messages,t)):null})),ji(Si(e),"renderText",(function(t,r){return t?u().createElement("span",null,u().createElement("span",{className:"option-icon"},u().createElement(h.Glyphicon,{glyph:t})),e.renderLabel(r)):e.renderLabel(r)})),ji(Si(e),"isTrueBearing",(function(){return e.props.measurement&&e.props.measurement.trueBearing&&e.props.measurement.trueBearing.measureTrueBearing})),e}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.geomType||this.props.toggleMeasure({geomType:"LineString"})}},{key:"shouldComponentUpdate",value:function(e){return!(0,fe.isEqual)(e,this.props)}},{key:"render",value:function(){var e,t,r=this,n=(0,fe.get)(this.props.measurement,"features",[])[this.props.measurement.currentFeature||0];this.props.useSingleFeature?(e=((0,fe.get)(this.props.measurement,"feature.geometry.type")||"").toLowerCase(),t=((0,fe.get)(this.props.measurement,-1!==e.indexOf("polygon")?"feature.geometry.coordinates[0]":"feature.geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}}))):(e=(0,fe.get)(n,"geometry.type","").toLowerCase(),t=((0,fe.get)(n,-1!==e.indexOf("polygon")?"geometry.coordinates[0]":"geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}})));var o=(this.props.measurement||{}).exportToAnnotation,i=void 0!==o&&o;return u().createElement(Go.Z,{id:this.props.id,style:{overflow:"visible"},header:u().createElement("div",null,u().createElement(h.ButtonToolbar,{style:{width:"100%",marginBottom:15,marginTop:8,display:"flex",justifyContent:"center"}},u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:this.props.lineGlyph,active:!!this.props.lineMeasureEnabled,bsStyle:this.props.lineMeasureEnabled?"success":"primary",tooltip:this.renderText(this.props.inlineGlyph&&this.props.lineGlyph,"measureComponent.MeasureLength"),onClick:function(){return r.onGeomClick("LineString")}},{active:!!this.props.areaMeasureEnabled,bsStyle:this.props.areaMeasureEnabled?"success":"primary",glyph:this.props.areaGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.areaGlyph,"measureComponent.MeasureArea"),onClick:function(){return r.onGeomClick("Polygon")}},{visible:!this.props.disableBearing,active:!!this.props.bearingMeasureEnabled,bsStyle:this.props.bearingMeasureEnabled?"success":"primary",glyph:this.props.bearingGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.bearingGlyph,this.isTrueBearing()?"measureComponent.MeasureTrueBearing":"measureComponent.MeasureBearing"),onClick:function(){return r.onGeomClick("Bearing")}}]}),u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"remove",visible:!!this.props.withReset,tooltip:u().createElement(v.Z,{msgId:"measureComponent.resetTooltip"}),onClick:function(){return r.onResetClick()}}]}),u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"ext-json",disabled:0===(this.props.measurement.features||[]).length,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showExportToGeoJSON,tooltip:u().createElement(v.Z,{msgId:"measureComponent.exportToGeoJSON"}),onClick:function(){(0,_o.LR)(JSON.stringify((0,Lo.tL)(r.props.measurement.features,r.props.measurement.textLabels,r.props.uom,No()(),"MapStore Measurements")),"measurements.json","application/geo+json")}},{glyph:"1-layer",visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsLayer,disabled:0===(this.props.measurement.features||[]).length||i,tooltip:u().createElement(v.Z,{msgId:"measureComponent.addAsLayer"}),onClick:function(){return r.props.onAddAsLayer(r.props.measurement.features,r.props.measurement.textLabels,r.props.uom)}},{glyph:i?"floppy-disk":"comment",tooltip:u().createElement(v.Z,{msgId:i?"measureComponent.saveMeasure":"measureComponent.addAsAnnotation"}),onClick:function(){r.props.onAddAnnotation(r.props.measurement.features,r.props.measurement.textLabels,r.props.uom,!i,{id:r.props.measurement.id,visibility:r.props.measurement.visibility})},disabled:0===(this.props.measurement.features||[]).length,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsAnnotation}]})),this.renderPanel())},this.props.showCoordinateEditor&&u().createElement(h.Grid,{fluid:!0,style:{maxHeight:400,borderTop:"1px solid #ddd"}},this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled?u().createElement(h.Row,{style:this.props.isCoordinateEditorEnabled?{}:{pointerEvents:"none",opacity:.5}},u().createElement(gi,{key:"measureEditor",isMouseEnterEnabled:!0,isMouseLeaveEnabled:!0,format:this.props.format,currentFeature:this.props.measurement.currentFeature,features:this.props.measurement.features,mapProjection:this.props.mapProjection,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onChange:this.props.onChangeCoordinates,onChangeCurrentFeature:this.props.onChangeCurrentFeature,showFeatureSelector:this.props.showFeatureSelector,items:[],isDraggable:!0,type:this.props.geomType,showLengthAndBearingLabel:this.props.showLengthAndBearingLabel,components:this.props.useSingleFeature||-1===e.indexOf("polygon")?t:(0,fe.dropRight)(t)})):u().createElement(h.Row,null,u().createElement(h.Col,{xs:12,className:"text-center",style:{padding:15}},u().createElement("i",null,u().createElement(v.Z,{msgId:"measureComponent.selectTool"}))))))}}])&&Oi(t.prototype,r),a}(u().Component);ji(Ci,"propTypes",{id:f().string,name:f().string,columnProperties:f().object,propertiesChangeHandler:f().func,lengthButtonText:f().oneOfType([f().string,f().element]),areaButtonText:f().oneOfType([f().string,f().element]),resetButtonText:f().oneOfType([f().string,f().element]),lengthLabel:f().oneOfType([f().string,f().element]),areaLabel:f().oneOfType([f().string,f().element]),bearingLabel:f().oneOfType([f().string,f().element]),trueBearingLabel:f().oneOfType([f().string,f().element]),uom:f().shape({length:f().shape({unit:f().string.isRequired,label:f().string.isRequired}),area:f().shape({unit:f().string.isRequired,label:f().string.isRequired})}),toggleMeasure:f().func,measurement:f().object,lineMeasureEnabled:f().bool,lineMeasureValueEnabled:f().bool,areaMeasureEnabled:f().bool,areaMeasureValueEnabled:f().bool,bearingMeasureEnabled:f().bool,bearingMeasureValueEnabled:f().bool,showButtons:f().bool,showResults:f().bool,mapProjection:f().string,lineGlyph:f().string,areaGlyph:f().string,bearingGlyph:f().string,withReset:f().bool,showButtonsLabels:f().bool,inlineGlyph:f().bool,formatLength:f().func,formatArea:f().func,formatBearing:f().func,onChangeUom:f().func,uomLengthValues:f().array,uomAreaValues:f().array,format:f().string,onChangeFormat:f().func,onChangeCoordinates:f().func,onChangeCurrentFeature:f().func,onAddAsLayer:f().func,onHighlightPoint:f().func,geomType:f().string,defaultOptions:f().object,onAddAnnotation:f().func,showAddAsAnnotation:f().bool,showLengthAndBearingLabel:f().bool,showAddAsLayer:f().bool,showFeatureSelector:f().bool,useSingleFeature:f().bool,showExportToGeoJSON:f().bool,disableBearing:f().bool,trueBearing:f().object,onMount:f().func,onUpdateOptions:f().func,showCoordinateEditor:f().bool,isCoordinateEditorEnabled:f().bool}),ji(Ci,"contextTypes",{messages:f().object}),ji(Ci,"defaultProps",{mapProjection:"EPSG:3857",columnProperties:{xs:4,sm:4,md:4},uomLengthValues:[{value:"ft",label:"ft"},{value:"m",label:"m"},{value:"km",label:"km"},{value:"mi",label:"mi"},{value:"nm",label:"nm"}],uomAreaValues:[{value:"sqft",label:"ft²"},{value:"sqm",label:"m²"},{value:"sqkm",label:"km²"},{value:"sqmi",label:"mi²"},{value:"sqnm",label:"nm²"}],id:"measure-result-panel",uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},geomType:"LineString",defaultOptions:{geomType:"LineString"},showResults:!0,showAddAsAnnotation:!1,showAddAsLayer:!0,showExportToGeoJSON:!0,showCoordinateEditor:!1,isCoordinateEditorEnabled:!0,showLengthAndBearingLabel:!1,withReset:!0,lineGlyph:"1-measure-length",areaGlyph:"1-measure-area",bearingGlyph:"1-measure-bearing",showButtonsLabels:!0,lengthLabel:u().createElement(v.Z,{msgId:"measureComponent.lengthLabel"}),areaLabel:u().createElement(v.Z,{msgId:"measureComponent.areaLabel"}),bearingLabel:u().createElement(v.Z,{msgId:"measureComponent.bearingLabel"}),trueBearingLabel:u().createElement(v.Z,{msgId:"measureComponent.trueBearingLabel"}),formatLength:function(e,t){return(0,Mo.convertUom)(t,"m",e)},formatArea:function(e,t){return(0,Mo.convertUom)(t,"sqm",e)},formatBearing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Mo.getFormattedBearingValue)((0,fe.round)(e||0,6),t)},onChangeUom:function(){},onChangeFormat:function(){},onMount:function(){},onUpdateOptions:function(){},onAddAsLayer:function(){}});const xi=Ci;var Ti=r(32107);function ki(e){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ii(){return(Ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ai(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Fi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ri(e,t){return(Ri=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ni(e,t){return!t||"object"!==ki(t)&&"function"!=typeof t?_i(e):t}function _i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ri(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Li(n);if(o){var r=Li(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ni(this,e)});function a(){var e;Fi(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Mi(_i(e=i.call.apply(i,[this].concat(r))),"onClose",(function(){e.props.onClose(!1)})),Mi(_i(e),"initDefaultOptions",(function(t){var r=t.showCoordinateEditor,n=Ai(t,["showCoordinateEditor"]);e.props.onMount(r||e.props.showCoordinateEditor),e.props.toggleMeasure({geomType:n.geomType||"LineString"}),e.props.onInit(n)})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.initDefaultOptions(this.props.defaultOptions)}},{key:"componentDidUpdate",value:function(e){(0,fe.isEqual)(e.defaultOptions,this.props.defaultOptions)||this.initDefaultOptions(this.props.defaultOptions)}},{key:"render",value:function(){return this.props.show?this.props.showCoordinateEditor?u().createElement(Ti.Z,{dock:!0,bsStyle:"primary",position:"right",title:u().createElement(v.Z,{key:"title",msgId:"measureComponent.Measure"}),glyph:"1-ruler",size:660,open:this.props.show,onClose:this.onClose,style:this.props.style},u().createElement(xi,Ii({id:"measure-panel"},this.props))):u().createElement(ze.Z,{id:"measure-dialog"},u().createElement("div",{key:"header",role:"header"},u().createElement(h.Glyphicon,{glyph:"1-ruler"})," ",u().createElement(v.Z,{key:"title",msgId:"measureComponent.Measure"}),u().createElement("button",{key:"close",onClick:this.onClose,className:"close"},this.props.closeGlyph?u().createElement(h.Glyphicon,{glyph:this.props.closeGlyph}):u().createElement("span",null,"×"))),u().createElement("div",{key:"body",role:"body"},u().createElement(xi,Ii({id:"measure-panel",style:{minWidth:"500px"}},this.props)))):null}}])&&Di(t.prototype,r),a}(u().Component);Mi(Zi,"propTypes",{show:f().bool,closeGlyph:f().string,onClose:f().func,onMount:f().func,onInit:f().func,showCoordinateEditor:f().bool,defaultOptions:f().object,style:f().object}),Mi(Zi,"contextTypes",{messages:f().object}),Mi(Zi,"defaultProps",{show:!1,defaultOptions:{},onMount:function(){},onInit:function(){},toggleMeasure:function(){},showCoordinateEditor:!1,showAddAsAnnotation:!1,closeGlyph:"1-close",style:{height:"calc(100% - 30px)"}});var Gi=Zi;function Bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(r),!0).forEach((function(t){Ui(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ui(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wi=O.Xi.bind(null,"measure",null),Vi=(0,d.connect)((0,N.P1)([function(e){return{measurement:e.measurement||{},uom:e.measurement&&e.measurement.uom||{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},lineMeasureEnabled:e.measurement&&e.measurement.lineMeasureEnabled,lineMeasureValueEnabled:!(0,be.m6)(e),areaMeasureEnabled:e.measurement&&e.measurement.areaMeasureEnabled,areaMeasureValueEnabled:!(0,be.m6)(e),bearingMeasureEnabled:e.measurement&&e.measurement.bearingMeasureEnabled,showLengthAndBearingLabel:e.measurement&&e.measurement.showLengthAndBearingLabel,bearingMeasureValueEnabled:!(0,be.m6)(e),isCoordinateEditorEnabled:(0,Fo.iL)(e),showCoordinateEditor:(0,te.Iz)(e),showFeatureSelector:(0,be.m6)(e),useSingleFeature:!(0,be.m6)(e),withReset:(0,be.m6)(e),showExportToGeoJSON:(0,be.m6)(e),showAddAsAnnotation:(0,Fo.cD)(e)&&(0,be.m6)(e),trueBearing:(0,Fo.jM)(e),showAddAsLayer:(0,be.m6)(e),isCoordEditorEnabled:e.measurement&&!e.measurement.isDrawing,geomType:e.measurement&&e.measurement.geomType,format:e.measurement&&e.measurement.format}},function(e){return(0,te.QF)(e)}],(function(e,t){return zi(zi({},e),{},{show:t,format:e.format||Dt.ZP.getConfigProp("defaultCoordinateFormat")||"decimal"})})),{toggleMeasure:Ao.Bd,onAddAnnotation:Ao.ud,onChangeUom:Ao.Gd,onHighlightPoint:Io.aS,onChangeFormat:Ao.RM,onInit:Ao.S1,onChangeCoordinates:Ao.dD,onChangeCurrentFeature:Ao.h2,onClose:Wi,onMount:function(e){return(0,O.Xg)("measure","showCoordinateEditor",e)},onAddAsLayer:Ao.NR},null,{pure:!1})(Gi);const qi={MeasurePlugin:se()(Vi,{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"measurement",position:9,panel:!1,help:u().createElement(Cn.Z,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:u().createElement(Cn.Z,{msgId:"measureComponent.Measure"}),icon:u().createElement(h.Glyphicon,{glyph:"1-ruler"}),action:function(){return(0,O.Xg)("measure","enabled",!0)}}}),reducers:{measurement:r(78113).Z},epics:r(74226).ZP},Hi=(0,E.rx)("FilterLayer",{component:function(){return null},containers:{TOC:{name:"FilterLayer"}}});var $i=r(96909),Yi=r(87427);function Ki(){return(Ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xi(e){return function(e){if(Array.isArray(e))return Qi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Qi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qi(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ji=(0,Kr.Z)(h.NavItem),ea=function(e){var t=e.className,r=void 0===t?"":t,n=e.activeTab,o=void 0===n?"general":n,i=e.currentLocale,a=void 0===i?"en-US":i,l=e.currentLocaleLanguage,c=void 0===l?"en":l,s=e.width,p=void 0===s?500:s,f=e.groups,d=void 0===f?[]:f,y=e.element,m=void 0===y?{}:y,O=e.settings,w=void 0===O?{}:O,E=e.onSave,S=void 0===E?function(){}:E,P=e.onClose,j=void 0===P?function(){}:P,C=e.onHideSettings,x=void 0===C?function(){}:C,T=e.onSetTab,k=void 0===T?function(){}:T,I=e.onUpdateParams,A=void 0===I?function(){}:I,F=e.onRetrieveLayerData,D=void 0===F?function(){}:F,R=e.onShowAlertModal,N=void 0===R?function(){}:R,_=e.realtimeUpdate,L=void 0===_||_,M=e.alertModal,Z=void 0!==M&&M,G=e.dockStyle,B=void 0===G?{}:G,z=e.dock,U=void 0===z||z,W=e.showFullscreen,V=e.draggable,q=e.position,H=void 0===q?"left":q,$=e.tabs,Y=void 0===$?[]:$,K=e.tabsConfig,X=void 0===K?{}:K,Q=e.isLocalizedLayerStylesEnabled,J=void 0!==Q&&Q,ee=(0,fe.head)(Y.filter((function(e){return e.id===o&&e.toolbarComponent})).map((function(e){return e.toolbarComponent}))),te=Y&&Y.map((function(e){return e&&e.onClose})).filter((function(e){return e}))||[],re=[{glyph:"floppy-disk",tooltipId:"save",visible:!!S,onClick:function(){return S(te)}}].concat(Xi((0,fe.head)(Y.filter((function(e){return e.id===o&&e.toolbar})).map((function(e){return e.toolbar})))||[]));return u().createElement("div",null,u().createElement(Ti.Z,{open:w.expanded,glyph:"wrench",title:m.title&&(0,fe.isObject)(m.title)&&(m.title[a]||m.title.default)||(0,fe.isString)(m.title)&&m.title||"",className:r,onClose:function(){j?j(!1,te):(te.forEach((function(e){e()})),x())},size:p,style:B,showFullscreen:W,dock:U,draggable:V,position:H,header:[u().createElement(h.Row,{key:"ms-toc-settings-toolbar",className:"text-center"},u().createElement(h.Col,{xs:12},ee?u().createElement(ee,{buttons:re}):u().createElement(Bo.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:re})))].concat(Xi(Y.length>1?[u().createElement(h.Row,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},u().createElement(h.Col,{xs:12},u().createElement(h.Nav,{bsStyle:"tabs",activeKey:o,justified:!0},Y.map((function(e){return u().createElement(Ji,{key:"ms-tab-settings-"+e.id,tooltip:u().createElement(v.Z,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){k(e.id),e.onClick&&e.onClick()}},u().createElement(h.Glyphicon,{glyph:e.glyph}))})))))]:[]))},Y.filter((function(e){return e.id&&e.id===o})).filter((function(e){return e.Component})).map((function(t){return u().createElement(t.Component,Ki({},e,X[t.id],{key:"ms-tab-settings-body-"+t.id,containerWidth:p,element:m,groups:d,nodeType:w.nodeType,settings:w,retrieveLayerData:D,onChange:function(e,t){return(0,fe.isObject)(e)?A(e,L):A(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t),L)},isLocalizedLayerStylesEnabled:J,currentLocaleLanguage:c}))}))),u().createElement(b.Z,null,u().createElement(g.Z,{fade:!0,show:Z,title:u().createElement(v.Z,{msgId:"layerProperties.changedSettings"}),size:"xs",onClose:function(){return N(!1)},buttons:[{bsStyle:"primary",text:u().createElement(v.Z,{msgId:"close"}),onClick:function(){return j(!0,te)}},{bsStyle:"primary",text:u().createElement(v.Z,{msgId:"save"}),onClick:function(){return S(te)}}]},u().createElement("div",{className:"ms-alert"},u().createElement("div",{className:"ms-alert-center"},u().createElement(v.Z,{msgId:"layerProperties.changedSettingsAlert"}))))))};ea.contextTypes={plugins:f().object,pluginsConfig:f().array,loadedPlugins:f().object};const ta=ea;var ra=r(39980),na=r(529),oa=r(40562),ia=r(21222),aa=r(7412),la=r(63209),ca=r(18842),sa=r(85552),ua=r.n(sa),pa=r(80798);function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ya(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ma(e,t){return(ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ba(e,t){return!t||"object"!==fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ga(e){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var va,ha,Oa,wa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ma(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ga(n);if(o){var r=ga(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ba(this,e)});function a(){return da(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){if(this.props.active){var e=this.props.payload;return u().createElement("div",{className:"custom-tooltip"},u().createElement("p",{className:"label"},Math.abs(e[0].value)))}return null}}])&&ya(t.prototype,r),a}(u().Component);va=wa,ha="propTypes",Oa={type:f().string,payload:f().array,label:f().string,active:f().bool},ha in va?Object.defineProperty(va,ha,{value:Oa,enumerable:!0,configurable:!0,writable:!0}):va[ha]=Oa;const Ea=wa;function Sa(e){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ja(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ca(e,t){return(Ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xa(e,t){return!t||"object"!==Sa(t)&&"function"!=typeof t?Ta(e):t}function Ta(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ia(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Aa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ca(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ka(n);if(o){var r=ka(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xa(this,e)});function a(){var e;Pa(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ia(Ta(e=i.call.apply(i,[this].concat(r))),"renderLineChart",(function(){return u().createElement(pa.wW,{margin:e.props.chartStyle.margin,width:e.props.chartStyle.width,height:e.props.chartStyle.height,data:e.formatData(e.props.elevations.values)},u().createElement(pa.Kc,{hide:!0,dataKey:"name"}),u().createElement(pa.B2,{hide:!0}),u().createElement(pa.u,{content:u().createElement(Ea,null)}),u().createElement(pa.q3,{strokeDasharray:"3 3",horizontal:!1}),u().createElement(pa.x1,{isAnimationActive:e.props.animated,type:"monotone",dataKey:"value",stroke:"#82ca9d",activeDot:{r:8}}))})),Ia(Ta(e),"formatData",(function(t){var r=[];return t.map((function(e){r.push({name:this.props.elevations.name,value:parseFloat(this.props.elevations.positive?e:-e)})}),Ta(e)),r})),e}return t=a,(r=[{key:"render",value:function(){return u().createElement("div",null,this.renderLineChart())}}])&&ja(t.prototype,r),a}(u().Component);function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(r),!0).forEach((function(t){Ba(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function La(e,t){return(La=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(e,t){return!t||"object"!==Fa(t)&&"function"!=typeof t?Za(e):t}function Za(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ga(e){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ba(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ia(Aa,"propTypes",{elevations:f().object,chartStyle:f().object,animated:f().bool}),Ia(Aa,"defaultProps",{elevations:{},chartStyle:{margin:{top:5,right:5,left:5,bottom:45},width:600,height:200},animated:!1}),r(72717),r(57845);var za=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&La(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ga(n);if(o){var r=Ga(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ma(this,e)});function a(){var e;Na(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ba(Za(e=i.call.apply(i,[this].concat(r))),"renderElevationsChart",(function(t){return e.props.showElevationChart?u().createElement(Aa,{elevations:t,chartStyle:Ra({height:200,width:e.props.containerWidth-30},e.props.chartStyle)}):null})),Ba(Za(e),"renderElevationsSlider",(function(t){var r=t.values,n=r.length-1,o=n-0,i=parseFloat(r[0]),a=parseFloat(r[r.length-1]),l=e.props.element&&e.props.element.params&&e.props.element.params[t.name]||r[0];return u().createElement("div",{id:"mapstore-elevation"},u().createElement(ua(),{snap:!0,start:[parseFloat(l)]||0,range:e.calculateRange(r,0,n,o,i,a),behaviour:"tap",pips:{mode:"range",stepped:!0,density:10,format:{to:function(e){return parseFloat(e).toFixed(1)}}},tooltips:!e.props.showElevationChart,onChange:function(r){e.props.onChange("params",Object.assign({},Ba({},t.name,r[0])))}}))})),Ba(Za(e),"calculateRange",(function(e,t,r,n,o,i){var a=[],l="",c={min:o,max:i};return e.forEach((function(e,r){a[r]=(r-t)/n*100,l=a[r]+"%",c[l]=parseFloat(e)})),c})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.element.id!==e.element.id}},{key:"render",value:function(){var e=this.props.getDimension(this.props.element.dimensions,"elevation");return u().createElement(h.Grid,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},u().createElement("label",{id:"mapstore-elevation-label",key:"elevation-label",className:"control-label",style:this.props.showElevationChart?{marginBottom:"10px"}:{marginBottom:"90px"}},this.props.elevationText,": (",e.units,")"),this.renderElevationsChart(e),u().createElement("div",null,u().createElement("div",{key:"elevation"},this.renderElevationsSlider(e))))}}])&&_a(t.prototype,r),a}(u().Component);Ba(za,"propTypes",{elevationText:f().node,element:f().object,getDimension:f().func,onChange:f().func,chartStyle:f().object,showElevationChart:f().bool,containerWidth:f().number}),Ba(za,"defaultProps",{onChange:function(){},showElevationChart:!0,containerWidth:500,elevationText:u().createElement(v.Z,{msgId:"elevation"}),getDimension:ie.getDimension});var Ua=r(71167),Wa=r.n(Ua);function Va(e){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(r),!0).forEach((function(t){nl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ya(e,t,r){return(Ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ka(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xa(e,t)}function Xa(e,t){return(Xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=tl(e);if(t){var o=tl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ja(this,r)}}function Ja(e,t){return!t||"object"!==Va(t)&&"function"!=typeof t?el(e):t}function el(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tl(e){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(89531);var ol='<span class="glyphicon glyphicon-align-left" style="display: inline-block; margin-top: 4px;"></span>',il='<span class="glyphicon glyphicon-align-center" style="display: inline-block; margin-top: 4px;"></span>',al='<span class="glyphicon glyphicon-align-right" style="display: inline-block; margin-top: 4px;"></span>',ll='<span class="glyphicon glyphicon-remove" style="display: inline-block; margin-top: 4px;"></span>';function cl(e){return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ul(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(r),!0).forEach((function(t){gl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dl(e,t){return(dl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yl(e,t){return!t||"object"!==cl(t)&&"function"!=typeof t?ml(e):t}function ml(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bl(e){return(bl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vl=Wa().Quill,hl=function(e){var t=e.import("blots/embed"),r=e.import("formats/link"),n=e.imports.parchment,o=new n.Attributor.Style("float","float"),i=new n.Attributor.Style("margin","margin"),a=new n.Attributor.Style("display","display"),l=new n.Attributor.Style("width","width"),c={iframeIcon:!0,modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}},s=function e(t){rl(this,e),nl(this,"onCreate",(function(){})),nl(this,"onDestroy",(function(){})),nl(this,"onUpdate",(function(){})),this.overlay=t.overlay,this.domNode=t.domNode,this.options=t.options,this.requestUpdate=t.onUpdate},u=function(e){Ka(r,e);var t=Qa(r);function r(){var e;rl(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return nl(el(e=t.call.apply(t,[this].concat(o))),"onCreate",(function(){e.display=document.createElement("div"),Object.assign(e.display.style,e.options.displayStyles),e.overlay.appendChild(e.display)})),nl(el(e),"onDestroy",(function(){})),nl(el(e),"onUpdate",(function(){if(e.display&&e.domNode){var t=e.getCurrentSize();if(e.display.innerHTML=t.join(" &times; "),t[0]>120&&t[1]>30)Object.assign(e.display.style,{right:"4px",bottom:"4px",left:"auto"});else if("right"===e.domNode.style.float){var r=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"auto",bottom:"-".concat(r.height+4,"px"),left:"-".concat(r.width+4,"px")})}else{var n=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"-".concat(n.width+4,"px"),bottom:"-".concat(n.height+4,"px"),left:"auto"})}}})),nl(el(e),"getCurrentSize",(function(){return"IMG"===e.domNode.tagName.toUpperCase()?[e.domNode.width,Math.round(e.domNode.width/e.domNode.naturalWidth*e.domNode.naturalHeight)]:[e.domNode.clientWidth,e.domNode.clientHeight]})),e}return r}(s),p=function(e){Ka(r,e);var t=Qa(r);function r(){var e;rl(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return nl(el(e=t.call.apply(t,[this].concat(o))),"onCreate",(function(){e.boxes=[],e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.positionBoxes()})),nl(el(e),"onDestroy",(function(){e.setCursor("")})),nl(el(e),"positionBoxes",(function(){var t="".concat(-parseFloat(e.options.handleStyles.width)/2,"px"),r="".concat(-parseFloat(e.options.handleStyles.height)/2,"px");[{left:t,top:r},{right:t,top:r},{right:t,bottom:r},{left:t,bottom:r}].forEach((function(t,r){Object.assign(e.boxes[r].style,t)}))})),nl(el(e),"addBox",(function(t){var r=document.createElement("div");Object.assign(r.style,e.options.handleStyles),r.style.cursor=t,r.style.width="".concat(e.options.handleStyles.width,"px"),r.style.height="".concat(e.options.handleStyles.height,"px"),r.addEventListener("mousedown",e.handleMousedown,!1),e.overlay.appendChild(r),e.boxes.push(r)})),nl(el(e),"handleMousedown",(function(t){e.dragBox=t.target,e.dragStartX=t.clientX,e.dragStartY=t.clientY,e.preDragWidth=e.domNode.width||e.domNode.naturalWidth||e.domNode.clientWidth,e.preDragHeight=e.domNode.height||e.domNode.naturalHeight||e.domNode.clientHeight,e.setCursor(e.dragBox.style.cursor),document.addEventListener("mousemove",e.handleDrag,!1),document.addEventListener("mouseup",e.handleMouseup,!1)})),nl(el(e),"handleMouseup",(function(){e.setCursor(""),document.removeEventListener("mousemove",e.handleDrag),document.removeEventListener("mouseup",e.handleMouseup)})),nl(el(e),"handleDrag",(function(t){if(e.domNode){var r=t.clientX-e.dragStartX,n=t.clientY-e.dragStartY;if(e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]){if("IMG"===e.domNode.tagName.toUpperCase())e.domNode.width=Math.round(e.preDragWidth-r);else if("ms-quill-iframe"===e.domNode.getAttribute("class")){var o=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;o&&(e.domNode.parentNode.parentNode.style.width=Math.round(e.preDragWidth-r)+"px",o.setAttribute("width",e.domNode.parentNode.parentNode.clientWidth),e.domNode.style.width=e.domNode.parentNode.parentNode.clientWidth+"px")}}else if("IMG"===e.domNode.tagName.toUpperCase())e.domNode.width=Math.round(e.preDragWidth+r);else if("ms-quill-iframe"===e.domNode.getAttribute("class")){var i=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;i&&(e.domNode.parentNode.parentNode.style.width=Math.round(e.preDragWidth+r)+"px",i.setAttribute("width",e.domNode.parentNode.parentNode.clientWidth),e.domNode.style.width=e.domNode.parentNode.parentNode.clientWidth+"px")}if("ms-quill-iframe"===e.domNode.getAttribute("class")){var a=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;a&&(e.domNode.parentNode.parentNode.style.height=Math.round(e.preDragHeight+n)+"px",a.setAttribute("height",e.domNode.parentNode.parentNode.clientHeight),e.domNode.style.height=e.domNode.parentNode.parentNode.clientHeight+"px")}e.requestUpdate()}})),nl(el(e),"setCursor",(function(t){[document.body,"IMG"===e.domNode.tagName.toUpperCase()?e.domNode:e.domNode.parentNode.parentNode].forEach((function(e){e.style.cursor=t}))})),e}return r}(s),f=function(e){Ka(r,e);var t=Qa(r);function r(){var e;rl(this,r);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return nl(el(e=t.call.apply(t,[this].concat(c))),"onCreate",(function(){e.toolbar=document.createElement("div"),Object.assign(e.toolbar.style,e.options.toolbarStyles),e.overlay.appendChild(e.toolbar),e._defineAlignments(),e._addToolbarButtons()})),nl(el(e),"onDestroy",(function(){})),nl(el(e),"onUpdate",(function(){})),nl(el(e),"_defineAlignments",(function(){var t="IMG"===e.domNode.tagName.toUpperCase()?e.domNode:e.domNode.parentNode.parentNode;e.alignments=[{icon:ol,apply:function(){a.add(t,"inline"),o.add(t,"left"),i.add(t,"0 1em 1em 0")},isApplied:function(){return"left"===o.value(t)}},{icon:il,apply:function(){a.add(t,"block"),o.remove(t),i.add(t,"auto")},isApplied:function(){return"auto"===i.value(t)}},{icon:al,apply:function(){a.add(t,"inline"),o.add(t,"right"),i.add(t,"0 0 1em 1em")},isApplied:function(){return"right"===o.value(t)}},{icon:ll,apply:function(){if(a.add(t,"block"),o.add(t,"none"),i.add(t,"0"),l.add(t,"100%"),"ql-video"===t.getAttribute("class")){var e=t.querySelector("IFRAME")||null,r=t.querySelector(".ms-quill-iframe")||null;e&&r&&(t.style.width="100%",e.setAttribute("width","100%"),r.style.width="100%",t.style.height="200px",e.setAttribute("height",200),r.style.height="200px")}},isApplied:function(){return!1}}]})),nl(el(e),"_addToolbarButtons",(function(){var t=[];e.alignments.forEach((function(r,n){var l=document.createElement("span");t.push(l),l.innerHTML=r.icon,l.addEventListener("click",(function(){t.forEach((function(e){e.style.filter=""})),r.isApplied()?(o.remove(e.domNode),i.remove(e.domNode),a.remove(e.domNode)):(e._selectButton(l),r.apply()),e.requestUpdate()})),Object.assign(l.style,e.options.toolbarButtonStyles),n>0&&(l.style.borderLeftWidth="0"),Object.assign(l.style,e.options.toolbarButtonSvgStyles),r.isApplied()&&e._selectButton(l),e.toolbar.appendChild(l)}))})),nl(el(e),"_selectButton",(function(e){e.style.filter="invert(20%)"})),e}return r}(s),d={DisplaySize:u,Toolbar:f,Resize:p},y=["height","width"],m=function(e){Ka(a,e);var t,n,o,i=Qa(a);function a(){return rl(this,a),i.apply(this,arguments)}return t=a,o=[{key:"create",value:function(e){var t="",r="100%",n=200;(0,fe.isObject)(e)?(t=e.src||t,r=e.width||r,n=e.height||n):t=e||t;var o=Ya(tl(a),"create",this).call(this,e);o.style.position="relative",e.domNodeStyle&&Object.assign(o.style,e.domNodeStyle),o.style.width=(0,fe.isString)(r)&&-1!==r.indexOf("%")?r:r+"px",o.style.height=(0,fe.isString)(n)&&-1!==n.indexOf("%")?n:n+"px";var i=document.createElement("IFRAME");i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen",!0),i.setAttribute("src",this.sanitize(t)),i.setAttribute("width",r),i.setAttribute("height",n);var l=document.createElement("DIV");return l.setAttribute("class","ms-quill-iframe"),l.style.overflow="hidden",l.style.position="absolute",l.style.left="0",l.style.top="0",l.style.width=(0,fe.isString)(r)&&-1!==r.indexOf("%")?r:r+"px",l.style.height=(0,fe.isString)(n)&&-1!==n.indexOf("%")?n:n+"px",l.style.border="1px solid #ddd",o.appendChild(i),o.appendChild(l),o}},{key:"formats",value:function(e){return y.reduce((function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t}),{})}},{key:"sanitize",value:function(e){return r.sanitize(e)}},{key:"value",value:function(e){var t=e.children&&e.children[0]&&e.children[0].children&&e.children[0].children[0];return t?{src:t.getAttribute("src"),width:t.getAttribute("width"),height:t.getAttribute("height"),domNodeStyle:Ha({},e.style)}:""}}],(n=[{key:"format",value:function(e,t){y.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):Ya(tl(a.prototype),"format",this).call(this,e,t)}}])&&$a(t.prototype,n),o&&$a(t,o),a}(t);return m.blotName="video",m.className="ql-video",m.tagName="DIV",{ResizeModule:function t(r){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rl(this,t),nl(this,"initializeModules",(function(){n.removeModules(),n.modules=n.moduleClasses.map((function(e){return new(d[e]||e)(n)})),n.modules.forEach((function(e){e.onCreate()})),n.onUpdate()})),nl(this,"onUpdate",(function(){n.repositionElements(),n.modules.forEach((function(e){e.onUpdate()}))})),nl(this,"removeModules",(function(){n.modules.forEach((function(e){e.onDestroy()})),n.modules=[]})),nl(this,"handleClick",(function(e){if(e.target&&e.target.tagName&&"IMG"===e.target.tagName.toUpperCase()||e.target&&e.target.tagName&&"DIV"===e.target.tagName.toUpperCase()&&"ms-quill-iframe"===e.target.getAttribute("class")){if(n.domNode===e.target)return;n.domNode&&n.hide(),n.show(e.target)}else n.domNode&&n.hide()})),nl(this,"show",(function(e){n.domNode=e,n.showOverlay(),n.initializeModules()})),nl(this,"showOverlay",(function(){n.overlay&&n.hideOverlay(),n.quill.setSelection(null),n.setUserSelect("none"),document.addEventListener("keyup",n.checkImage,!0),n.quill.root.addEventListener("input",n.checkImage,!0);var e=n.quill.root.parentNode.querySelector(".ql-editor");if(e&&(e.style.overflow="hidden"),n.overlay=document.createElement("div"),Object.assign(n.overlay.style,n.options.overlayStyles),n.domNode&&"ms-quill-iframe"===n.domNode.getAttribute("class")){n.input=document.createElement("input"),n.input.style.position="absolute",n.input.style.left="8px",n.input.style.top="16px",n.input.style.width="calc(100% - 16px)";var t=n.domNode.parentNode&&n.domNode.parentNode.children&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0].getAttribute("src")||"";n.input.setAttribute("value",t),n.overlay.appendChild(n.input),n.overlay.style.backgroundColor="rgba(0, 0, 0, 0.2)"}n.quill.root.parentNode.appendChild(n.overlay),n.repositionElements()})),nl(this,"hideOverlay",(function(){if(n.overlay){n.input&&(n.domNode.parentNode&&n.domNode.parentNode.children&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0].setAttribute("src",n.input.value),n.overlay.removeChild(n.input),n.input=void 0);var e=n.quill.root.parentNode.querySelector(".ql-editor");e&&(e.style.overflow="auto"),n.quill.root.parentNode.removeChild(n.overlay),n.overlay=void 0,document.removeEventListener("keyup",n.checkImage),n.quill.root.removeEventListener("input",n.checkImage),n.setUserSelect("")}})),nl(this,"repositionElements",(function(){if(n.overlay&&n.domNode){var e=n.quill.root.parentNode,t="IMG"===n.domNode.tagName.toUpperCase()?n.domNode.getBoundingClientRect():n.domNode.parentNode.parentNode.getBoundingClientRect(),r=e.getBoundingClientRect();Object.assign(n.overlay.style,{left:"".concat(t.left-r.left-1+e.scrollLeft,"px"),top:"".concat(t.top-r.top+e.scrollTop,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")})}})),nl(this,"hide",(function(){n.hideOverlay(),n.removeModules(),n.domNode=void 0})),nl(this,"setUserSelect",(function(e){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach((function(t){n.quill.root.style[t]=e,document.documentElement.style[t]=e}))})),nl(this,"checkImage",(function(t){n.domNode&&n.input!==t.target&&(46!==t.keyCode&&8!==t.keyCode||"IMG"!==n.domNode.tagName.toUpperCase()||e.find(n.domNode).deleteAt(0),n.hide())})),this.quill=r;var i=!1;if(o.modules&&(i=o.modules.slice()),this.options=(0,fe.defaultsDeep)({},o,c),!1!==i&&(this.options.modules=i),this.quill.theme&&this.quill.theme.modules&&this.quill.theme.modules.toolbar&&this.quill.theme.modules.toolbar.container&&this.options.iframeIcon){var a=this.quill.theme.modules.toolbar.container.querySelector(".ql-video");a&&(a.innerHTML='<svg viewbox="0 1022 18 18"><g transform="translate(0,0) scale(3.5)"><path d="m 0.20913578,292.52935 -0.0448461,0.0228 c -0.0522035,0.0266 -0.10514577,0.0764 -0.12730166,0.11985 -0.03898753,0.0764 -0.03689917898,-0.0334 -0.036985428654,1.94049 -5.91591201e-5,1.35972 0.00218847865,1.849 0.00864824865,1.87539 0.02503373,0.10227 0.09520806,0.17792 0.19668092,0.21203 0.0202072,0.007 0.54764317,0.009 2.18732434,0.008 l 2.1606966,-0.001 0.044846,-0.0228 c 0.079823,-0.0406 0.1345603,-0.10935 0.1556385,-0.19546 0.00646,-0.0264 0.00872,-0.51567 0.00866,-1.87539 -7.44e-5,-1.97386 0.002,-1.86407 -0.036985,-1.94049 -0.022155,-0.0434 -0.075113,-0.0933 -0.1273161,-0.11985 l -0.044846,-0.0228 H 2.381244 Z m 0.0798849,0.757 H 2.381244 4.4734673 v 1.57107 1.57107 H 2.381244 0.28902068 v -1.57107 z m 2.34957572,0.33607 c -0.028878,0 -0.055626,0.007 -0.080256,0.0204 -0.024631,0.0136 -0.045009,0.0323 -0.061147,0.056 -0.016138,0.0238 -0.025064,0.0501 -0.026762,0.079 -0.032275,0.14948 -0.1758133,0.82556 -0.4306147,2.02822 -0.00679,0.017 -0.010194,0.0348 -0.010194,0.0535 0,0.0306 0.00764,0.0586 0.022928,0.0841 0.015288,0.0255 0.035682,0.0459 0.061162,0.0612 0.025481,0.0153 0.053499,0.0229 0.084076,0.0229 0.022083,0 0.043319,-0.004 0.063703,-0.0127 0.020385,-0.008 0.038221,-0.0204 0.053509,-0.0357 0.015288,-0.0153 0.027184,-0.0331 0.035678,-0.0535 0.00849,-0.0204 0.013592,-0.0416 0.01529,-0.0637 l 0.4255178,-2.00274 c 0.00849,-0.0221 0.013592,-0.045 0.015291,-0.0688 0,-0.0459 -0.016566,-0.0854 -0.04969,-0.11847 -0.033125,-0.0331 -0.072626,-0.0497 -0.1184901,-0.0497 z m -0.1025608,0.30066 c 0.00234,0.002 0.00489,0.003 0.00701,0.005 0.00425,0.003 0.00892,0.006 0.014013,0.008 -0.0051,-0.002 -0.010194,-0.004 -0.01529,-0.008 -0.0017,-0.002 -0.00361,-0.003 -0.00574,-0.005 z m -0.7892346,0.20894 c -0.022083,0 -0.048417,0.008 -0.078993,0.0255 l -0.050968,0.0382 c -0.3295431,0.2599 -0.5461142,0.43063 -0.64973332,0.51217 -0.0441656,0.0187 -0.0764407,0.0514 -0.0968248,0.0981 -0.0203841,0.0467 -0.0246402,0.0947 -0.0127495,0.14398 0.0118908,0.0493 0.038225,0.0858 0.0789933,0.10956 0.057755,0.0408 0.13887122,0.10235 0.24333972,0.18473 0.1044687,0.0824 0.1643489,0.13037 0.179637,0.14396 0.022083,0.017 0.053501,0.0412 0.094269,0.0726 0.040768,0.0314 0.077299,0.0603 0.1095742,0.0866 0.032275,0.0263 0.06285,0.0514 0.091728,0.0752 0.047563,0.034 0.1006454,0.0412 0.1592497,0.0217 0.058604,-0.0195 0.097249,-0.0565 0.1159341,-0.11084 0.016987,-0.0442 0.015701,-0.0896 -0.00383,-0.13632 -0.018887,-0.0452 -0.049313,-0.0772 -0.091223,-0.0962 l -0.03489,-0.0274 c -0.018685,-0.0136 -0.029739,-0.0221 -0.033137,-0.0255 -0.056056,-0.0408 -0.1375864,-0.10108 -0.2446029,-0.18091 -0.1070166,-0.0798 -0.1843053,-0.13759 -0.2318683,-0.17327 0.030576,-0.0221 0.1108352,-0.082 0.240784,-0.17963 0.1299487,-0.0977 0.2297443,-0.17284 0.29939,-0.2255 0.057755,-0.0238 0.093001,-0.0697 0.1057405,-0.1376 0.01274,-0.0679 -0.00467,-0.12314 -0.052231,-0.16561 -0.035672,-0.0357 -0.078129,-0.0527 -0.1273908,-0.051 -0.0034,-0.002 -0.0068,-0.003 -0.010194,-0.003 z m 1.2689006,0 c -0.0034,0 -0.0068,8.5e-4 -0.010194,0.003 -0.049262,-0.002 -0.091718,0.0153 -0.1273909,0.051 -0.047563,0.0425 -0.064971,0.0977 -0.052231,0.16561 0.01274,0.0679 0.047986,0.11382 0.1057406,0.1376 0.069646,0.0527 0.1694416,0.12782 0.29939,0.2255 0.1299488,0.0977 0.210208,0.15755 0.2407841,0.17963 -0.047563,0.0357 -0.1248516,0.0934 -0.2318683,0.17327 -0.1070167,0.0798 -0.1885466,0.14014 -0.2446028,0.18091 l -0.033137,0.0255 c -0.015288,0.0102 -0.024628,0.017 -0.028025,0.0204 -0.00522,0.004 -0.00795,0.007 -0.00826,0.008 -0.041191,0.019 -0.071164,0.0509 -0.089841,0.0955 -0.019535,0.0467 -0.020806,0.0922 -0.00382,0.13632 0.018685,0.0544 0.05733,0.0913 0.1159342,0.11084 0.058604,0.0195 0.1116868,0.0123 0.1592499,-0.0217 0.028877,-0.0238 0.059453,-0.0488 0.091728,-0.0752 0.032275,-0.0263 0.068806,-0.0552 0.1095742,-0.0866 0.040768,-0.0314 0.072186,-0.0556 0.094269,-0.0726 0.032275,-0.0272 0.076018,-0.0629 0.1312245,-0.10702 0.055207,-0.0442 0.10659,-0.0845 0.1541529,-0.12103 0.047563,-0.0365 0.093434,-0.0701 0.1375999,-0.10064 0.040768,-0.0238 0.067102,-0.0603 0.078993,-0.10956 0.011891,-0.0493 0.00763,-0.0973 -0.012749,-0.14398 -0.020384,-0.0467 -0.052659,-0.0794 -0.096824,-0.0981 -0.07814,-0.0612 -0.2947259,-0.23189 -0.6497489,-0.51217 -0.045864,-0.0408 -0.089179,-0.062 -0.1299468,-0.0637 z m -1.4396219,0.15034 c -0.0017,0.008 -0.00256,0.0178 -0.00256,0.028 v -0.0102 -0.0102 z m 1.6103431,0 0.00254,0.008 v 0.0102 0.0102 c 0,-0.0102 -8.416e-4,-0.0195 -0.00254,-0.028 z m -1.6128989,0.051 0.00256,0.0178 0.00254,0.0179 0.00765,0.0178 0.00764,0.0153 h -0.00254 c -0.0017,-0.003 -0.0034,-0.008 -0.0051,-0.0153 l -0.00256,-0.003 -0.0051,-0.0153 c -0.0017,-0.008 -0.00254,-0.0145 -0.00254,-0.0179 -0.0017,-0.007 -0.00256,-0.0127 -0.00256,-0.0178 z m 1.6154252,2.3e-4 c -2.25e-5,0.005 -8.494e-4,0.0109 -0.00252,0.0176 0,0.003 -8.416e-4,0.009 -0.00254,0.0179 l -0.0051,0.0153 -0.00256,0.003 c -0.0017,0.007 -0.0034,0.0119 -0.0051,0.0153 h -0.00254 l 0.00764,-0.0153 0.00765,-0.0178 0.00254,-0.0179 z m -1.50331,0.1552 c 0.00849,0.003 0.01869,0.007 0.030581,0.0102 -0.00679,-0.002 -0.011036,-0.003 -0.012735,-0.003 -0.0051,-0.002 -0.011052,-0.004 -0.017846,-0.008 z m 1.3912246,0 c -0.00679,0.003 -0.01275,0.006 -0.017846,0.008 -0.0017,0 -0.00594,8.6e-4 -0.012735,0.003 0.011891,-0.003 0.022087,-0.007 0.030581,-0.0102 z m -0.7975265,1.2256 c 0.0051,0.002 0.00934,0.004 0.012734,0.008 -0.0051,-0.003 -0.00934,-0.006 -0.012734,-0.008 z"/></g></svg>')}this.quill.theme&&this.quill.theme.tooltip&&this.quill.theme.tooltip.root&&this.quill.theme.tooltip.root.classList&&this.quill.theme.tooltip.root.classList.add&&this.options.iframeIcon&&this.quill.theme.tooltip.root.classList.add("ms-ql-iframe-tooltip"),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]},IFrame:m,toolbarConfig:{container:[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"],["video"]]},BaseModule:s,Toolbar:f,DisplaySize:u,Resize:p}}(vl),Ol=hl.ResizeModule,wl=hl.IFrame,El=hl.toolbarConfig;vl.register({"formats/video":wl,"modules/resizeModule":Ol});var Sl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dl(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bl(n);if(o){var r=bl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return yl(this,e)});function a(){var e;pl(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return gl(ml(e=i.call.apply(i,[this].concat(r))),"state",{template:" "}),gl(ml(e),"close",(function(){e.props.onShowEditor(!e.props.showEditor),e.props.onChange("featureInfo",ul(ul({},e.props.element&&e.props.element.featureInfo||{}),{},{template:e.state.template}))})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({template:this.props.element&&this.props.element.featureInfo&&this.props.element.featureInfo.template||" "})}},{key:"render",value:function(){var e=this,t=this.props,r=t.showEditor,n=t.enableIFrameModule,o=void 0===n||n;return u().createElement(b.Z,null,u().createElement(g.Z,{fade:!0,show:r,title:u().createElement(v.Z,{msgId:"layerProperties.editCustomFormat"}),size:"lg",showFullscreen:!0,clickOutEnabled:!1,onClose:function(){return e.close()},buttons:[{bsStyle:"primary",text:u().createElement(v.Z,{msgId:"close"}),onClick:function(){return e.close()}}]},u().createElement("div",{id:"ms-template-editor",className:"ms-editor"},u().createElement(Wa(),{bounds:"#ms-template-editor",ref:function(t){t&&(e.quill=t)},modules:o?{resizeModule:{},toolbar:El}:{},defaultValue:this.state.template,onChange:function(t){return e.setState({template:t})}}))))}}])&&fl(t.prototype,r),a}(u().Component);gl(Sl,"propTypes",{showEditor:f().bool,element:f().object,onChange:f().func,onShowEditor:f().func,enableIFrameModule:f().bool}),gl(Sl,"defaultProps",{showEditor:!1,element:{},enableIFrameModule:!1,onChange:function(){},onShowEditor:function(){}});const Pl=Sl;var jl=r(82110),Cl=r(12485),xl=r.n(Cl),Tl=r(20135),kl=r.n(Tl),Il=r(71062),Al=r.n(Il),Fl=r(73014),Dl=r(82030),Rl=r(25382),Nl=r(28878);(0,_.setObservableConfig)(Nl.Z);var _l=r(43143),Ll=r(57037),Ml=r(3918),Zl=r.n(Ml),Gl=r(66287);function Bl(e){return(Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ul(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wl(e,t){return(Wl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vl(e,t){return!t||"object"!==Bl(t)&&"function"!=typeof t?ql(e):t}function ql(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hl(e){return(Hl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wl(e,t)}(l,e);var t,n,o,i,a=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hl(o);if(i){var r=Hl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Vl(this,e)});function l(){var e;zl(this,l);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return $l(ql(e=a.call.apply(a,[this].concat(n))),"paint",(function(t){t.save(),t.beginPath();var r=e.props.shapeStyle,n=r.color,o=r.fill;switch(t.fillStyle=o?(0,fe.isString)(o)?o:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(o.a,")"):null,t.strokeStyle=n?(0,fe.isString)(n)?n:"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(n.a,")"):null,t.lineWidth=e.props.shapeStyle.width||e.props.shapeStyle.weight,e.props.shapeStyle.dashArray&&e.props.shapeStyle.dashArray.length&&t.setLineDash(e.props.shapeStyle.dashArray),e.props.geomType){case"Polygon":e.paintPolygon(t);break;case"Polyline":e.paintPolyline(t);break;case"Point":e.paintPoint(t,e.props.shapeStyle.markName);break;case"Circle":e.paintPoint(t,"circle");break;case"Marker":e.paintMarker(t);break;case"Text":e.paintText(t);break;case"Symbol":e.paintSymbol(t);break;default:return}t.restore()})),$l(ql(e),"drawSymbol",(function(t,n){n.clearRect(0,0,600,600);var o=new Image,i=new Image;i.src=r(18845),o.src=t||e.props.shapeStyle.symbolUrl,o.onload=function(){try{n.drawImage(o,e.props.width/2-o.width/2,e.props.height/2-o.height/2)}catch(e){return}},o.onerror=function(){i.onload=function(){try{n.drawImage(i,e.props.width/2-i.width/2,e.props.height/2-i.height/2)}catch(e){return}}}})),$l(ql(e),"paintSymbol",(function(t){(0,Gl.isSymbolStyle)(e.props.originalStyle)?e.props.originalStyle.symbolUrlCustomized&&e.props.originalStyle.symbolUrl?e.drawSymbol(e.props.originalStyle.symbolUrlCustomized,t):(0,Gl.createSvgUrl)(e.props.originalStyle,e.props.originalStyle.symbolUrlCustomized||e.props.originalStyle.symbolUrl).then((function(r){return e.drawSymbol(r,t)})):e.drawSymbol(null,t)})),$l(ql(e),"paintText",(function(t){var r=e.props,n=r.width,o=r.height,i=e.props.shapeStyle,a=i.textAlign,l=void 0===a?"center":a,c=i.label,s=i.font,u=void 0===s?"14px Arial":s;return t.textAlign=l,t.font=u,"start"===l?(t.strokeText(c||"New",n/2.5,o/2),void t.fillText(c||"New",n/2.5,o/2)):"end"===l?(t.strokeText(c||"New",n/1.5,o/2),void t.fillText(c||"New",n/1.5,o/2)):(t.strokeText(c||"New",n/2,o/2),void t.fillText(c||"New",n/2,o/2))})),$l(ql(e),"paintPolygon",(function(e){e.transform(1,0,0,1,-27.5,0),e.moveTo(55,8),e.lineTo(100,8),e.lineTo(117.5,40),e.lineTo(100,72),e.lineTo(55,72),e.lineTo(37.5,40),e.closePath(),e.fill(),e.stroke()})),$l(ql(e),"paintPolyline",(function(e){e.transform(1,0,0,1,0,0),e.moveTo(10,20),e.bezierCurveTo(40,40,70,0,90,20),e.stroke()})),$l(ql(e),"paintPoint",(function(t,r){var n=e.props.shapeStyle.radius,o=n/2;switch(r){case"square":t.rect(50-o,48.5-o,n,n);break;case"circle":t.arc(50,48.5,o,0,2*Math.PI);break;case"triangle":var i=Math.sqrt(3)*n/2/3;t.moveTo(50,48.5-2*i),t.lineTo(50+o,48.5+i),t.lineTo(50-o,48.5+i),t.closePath();break;case"star":e.paintStar(t,50,48.5,5,o,o/2);break;case"cross":e.paintCross(t,50,48.5,n,.23);break;case"x":t.translate(50,48.5),t.rotate(45*Math.PI/180),t.translate(-50,-48.5),e.paintCross(t,50,48.5,n,.23);break;default:t.arc(50,48.5,n,0,2*Math.PI)}t.fill(),t.stroke()})),$l(ql(e),"paintMarker",(function(e){var t=new Image;t.src=Zl();try{e.drawImage(t,42.5,24)}catch(e){return}})),$l(ql(e),"paintStar",(function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,l=t,c=r,s=Math.PI/n;e.moveTo(t,r-o);for(var u=0;u<n;u++)l=t+Math.cos(a)*o,c=r+Math.sin(a)*o,e.lineTo(l,c),a+=s,l=t+Math.cos(a)*i,c=r+Math.sin(a)*i,e.lineTo(l,c),a+=s;e.lineTo(t,r-o),e.closePath()})),$l(ql(e),"paintCross",(function(e,t,r,n,o){var i=n*o/2,a=n/2;e.moveTo(t-i,r-a),e.lineTo(t+i,r-a),e.lineTo(t+i,r-i),e.lineTo(t+a,r-i),e.lineTo(t+a,r+i),e.lineTo(t+i,r+i),e.lineTo(t+i,r+a),e.lineTo(t-i,r+a),e.lineTo(t-i,r+i),e.lineTo(t-a,r+i),e.lineTo(t-a,r-i),e.lineTo(t-i,r-i),e.closePath()})),e}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"render",value:function(){return u().createElement("canvas",{ref:"styleCanvas",style:this.props.style,width:this.props.width,height:this.props.height})}}])&&Ul(t.prototype,n),l}(u().Component);$l(Yl,"propTypes",{originalStyle:f().object,style:f().object,shapeStyle:f().object,geomType:f().oneOf(["Polygon","Polyline","Point","Marker","Text","Symbol","Circle",void 0]),width:f().number,height:f().number}),$l(Yl,"defaultProps",{originalStyle:{},style:{},shapeStyle:{},geomType:"Polygon",width:100,height:80});const Kl=Yl;function Xl(e){return(Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ql(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ec(e,t){return(ec=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tc(e,t){return!t||"object"!==Xl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rc(e){return(rc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ec(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rc(n);if(o){var r=rc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return tc(this,e)});function a(){return Ql(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return u().createElement(Do.DropdownList,{data:[{value:"circle",name:(0,le.S$)(this.context.messages,"markNameSelector.circle")||"Circle"},{value:"square",name:(0,le.S$)(this.context.messages,"markNameSelector.square")||"Square"},{value:"triangle",name:(0,le.S$)(this.context.messages,"markNameSelector.triangle")||"Triangle"},{value:"star",name:(0,le.S$)(this.context.messages,"markNameSelector.star")||"Star"},{value:"cross",name:(0,le.S$)(this.context.messages,"markNameSelector.cross")||"Cross"},{value:"x",name:(0,le.S$)(this.context.messages,"markNameSelector.x")||"X"}],valueField:"value",textField:"name",value:this.props.markName,onChange:function(t){return e.props.onChange("markName",t.value)}})}}])&&Jl(t.prototype,r),a}(u().Component);nc(oc,"propTypes",{markName:f().string,onChange:f().func}),nc(oc,"contextTypes",{messages:f().object}),nc(oc,"defaultProps",{markName:"circle",onChange:function(){}});const ic=oc;var ac=r(9886),lc=r.n(ac);function cc(e){return(cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pc(e,t){return(pc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fc(e,t){return!t||"object"!==cc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dc(e){return(dc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}lc()();var mc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pc(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dc(n);if(o){var r=dc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return fc(this,e)});function a(){return sc(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return u().createElement(h.Grid,{fluid:!0},u().createElement(h.Row,null,u().createElement(h.Col,{xs:4,style:{padding:0}},u().createElement(Kl,{style:{padding:0,margin:"auto",display:"block"},height:97,shapeStyle:this.props.shapeStyle,geomType:this.props.shapeStyle.marker?"Marker":"Point"})),u().createElement(h.Col,{xs:7},this.props.showMarker?u().createElement(h.Row,null,u().createElement(h.Col,{xs:1},u().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.props.shapeStyle.marker,onChange:function(t){e.props.setStyleParameter("marker",t.target.checked)}})),u().createElement(h.Col,{style:{paddingLeft:0,paddingTop:1},xs:4},u().createElement("label",null,"Marker"))):null,this.props.showMarkSelector?u().createElement(h.Row,{style:{marginBottom:4}},u().createElement(h.Col,{style:{paddingTop:7},xs:4},u().createElement("label",null,"Mark")),u().createElement(h.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},u().createElement(ic,{onChange:this.props.setStyleParameter,markName:this.props.shapeStyle.markName}))):null,u().createElement(h.Row,null,u().createElement(h.Col,{xs:4},u().createElement(Ll.Z,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),u().createElement(h.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},u().createElement(Do.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){e.props.shapeStyle.width!==t&&e.props.setStyleParameter("width",t)}}))),u().createElement(h.Row,{style:{marginTop:4}},u().createElement(h.Col,{xs:4},u().createElement(Ll.Z,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}})),u().createElement(h.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},u().createElement(Do.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:50,step:1,value:this.props.shapeStyle.radius,onChange:function(t){e.props.shapeStyle.radius!==t&&e.props.setStyleParameter("radius",t)}}))))))}}])&&uc(t.prototype,r),a}(u().Component);yc(mc,"propTypes",{shapeStyle:f().object,setStyleParameter:f().func,showMarker:f().bool,showMarkSelector:f().bool}),yc(mc,"defaultProps",{shapeStyle:{},showMarker:!0,showMarkSelector:!1,setStyleParameter:function(){}});const bc=mc;function gc(e){return(gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oc(e,t){return(Oc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wc(e,t){return!t||"object"!==gc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ec(e){return(Ec=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}lc()();var Pc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oc(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ec(n);if(o){var r=Ec(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return wc(this,e)});function a(){return vc(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return u().createElement(h.Grid,{fluid:!0},u().createElement(h.Row,null,u().createElement(h.Col,{xs:4,style:{padding:0}},u().createElement(Kl,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polygon"})),u().createElement(h.Col,{xs:7},u().createElement(h.Row,{style:{marginTop:7}},u().createElement(h.Col,{xs:4},u().createElement(Ll.Z,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),u().createElement(h.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},u().createElement(Do.NumberPicker,{min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){t!==e.props.shapeStyle.width&&e.props.setStyleParameter("width",t)}}))),u().createElement(h.Row,{style:{marginTop:4}},u().createElement(h.Col,{xs:6},u().createElement(Ll.Z,{value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}}))))))}}])&&hc(t.prototype,r),a}(u().Component);Sc(Pc,"propTypes",{shapeStyle:f().object,setStyleParameter:f().func}),Sc(Pc,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const jc=Pc;function Cc(e){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kc(e,t){return(kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ic(e,t){return!t||"object"!==Cc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ac(e){return(Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}lc()();var Dc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kc(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ac(n);if(o){var r=Ac(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ic(this,e)});function a(){return xc(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return u().createElement(h.Grid,{fluid:!0},u().createElement(h.Row,null,u().createElement(h.Col,{xs:4,style:{padding:0}},u().createElement(Kl,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polyline",height:40})),u().createElement(h.Col,{xs:7},u().createElement(h.Row,{style:{marginTop:7}},u().createElement(h.Col,{xs:4},u().createElement(Ll.Z,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),u().createElement(h.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},u().createElement(Do.NumberPicker,{onChange:function(t){e.props.setStyleParameter("width",t)},min:1,max:15,step:1,value:this.props.shapeStyle.width}))))))}}])&&Tc(t.prototype,r),a}(u().Component);Fc(Dc,"propTypes",{shapeStyle:f().object,setStyleParameter:f().func}),Fc(Dc,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const Rc=Dc;var Nc=r(38848);function _c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_c(Object(r),!0).forEach((function(t){Mc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zc=(0,_.compose)((0,_.withProps)((function(e){var t=e.style,r=void 0===t?{}:t,n=e.styleName,o=r.fillColor,i=r.fillOpacity,a=r.color,l=r.opacity,c=r.shapeStyle,s=r.weight,u=r.radius;return{shapeStyle:Lc(Lc({},c),{},{marker:"marker"===n,radius:u,width:s,fill:(0,_l.qq)(o,i),color:(0,_l.qq)(a,l)})}})),(0,_.withHandlers)({setStyleParameter:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.style,o=void 0===n?{}:n;return function(e,t){switch(e){case"fill":var n=t.r,i=t.g,a=t.b,l=t.a;r("style",Lc(Lc({},o),{},{fillColor:"rgb(".concat(n,", ").concat(i,", ").concat(a,")"),fillOpacity:l}));break;case"color":var c=t.r,s=t.g,u=t.b,p=t.a;r("style",Lc(Lc({},o),{},{color:"rgb(".concat(c,", ").concat(s,", ").concat(u,")"),opacity:p}));break;case"width":r("style",Lc(Lc({},o),{},{weight:t}));break;case"marker":r("styleName",t?"marker":void 0);break;default:r("style",Lc(Lc({},o),{},Mc({},e,t)))}}}})),Gc={Polygon:Zc(jc),MultiPolygon:Zc(jc),GeometryCollection:Zc(jc),LineString:Zc(Rc),MultiLineString:Zc(Rc),MultiPoint:Zc(bc),Point:Zc(bc)},Bc=(0,_.branch)((function(e){var t=e.element;return"wfs"===(void 0===t?{}:t).type}),(0,_.mapPropsStream)((function(e){return e.combineLatest(e.map((function(e){return{layer:e.element}})).let(Rl.Z).map((function(e){var t=e.error,r=e.loading,n=e.describeFeatureType;return{error:t,loading:r,geometryType:!t&&!r&&n&&(0,Nc.extractGeometryType)(n)}})),(function(e,t){var r=t.geometryType,n=t.error,o=t.loading;return Lc(Lc({},e),{},{geometryType:r,error:n,loading:o})}))})),(0,_.withProps)((function(e){var t=e.element;return{geometryType:t&&t.features&&t.features[0].geometry&&t.features[0].geometry.type}})));const zc=(0,_.compose)(Bc,(0,Fl.Z)(),(0,Dl.Z)((function(e){return!e.geometryType})))((function(e){var t=e.geometryType,r=e.element,n=void 0===r?{}:r,o=e.onChange,i=void 0===o?function(){}:o,a=Gc[t];return u().createElement(u().Fragment,null,u().createElement("h4",null,"    ",u().createElement(v.Z,{msgId:"layerProperties.style"})),u().createElement(a,{styleName:n.styleName,style:n.style,onChange:i}))}));var Uc=r(60604),Wc=r(6724),Vc=r(32425),qc=r(38064),Hc=r(93451);function $c(){return($c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Yc(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Kc=function(e){var t=e.type,r=e.patterns,n=e.paths,o=e.texts,i=e.backgroundColor,a=void 0===i?"#ffffff":i;return u().createElement("svg",{viewBox:"0 0 200 200"},u().createElement("defs",null,r&&r.filter((function(e){return e.icon})).map((function(e){return u().createElement("pattern",{id:e.id,viewBox:"0 0 1 1",width:"15%",height:"15%"},e.icon&&u().createElement("path",e.icon))})),r&&r.filter((function(e){return e.image})).map((function(e){return u().createElement("pattern",{id:e.id,width:"100%",height:"100%"},e.image&&u().createElement("image",e.image))}))),u().createElement("path",{fill:a,d:"M0 0 L200 0 L200 200 L0 200Z"}),n&&n.map((function(e){var r=e.type,n=Yc(e,["type"]);return"polygon"===(r||t)&&u().createElement("path",$c({},n,{d:"M20 20 L180 20 L180 180 L20 180Z"}))||"linestring"===(r||t)&&u().createElement("path",$c({},n,{fill:"none",d:"M30 160 L100 40 L170 160"}))||"point"===(r||t)&&u().createElement("path",n)})),o&&o.map((function(e){var t=e.text,r=Yc(e,["text"]);return u().createElement("text",$c({x:"100",y:"100",textAnchor:"middle",alignmentBaseline:"middle"},r),t)})))};function Xc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(r),!0).forEach((function(t){Jc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var es=(0,Hc.Z)("filterPlaceholder")(xe),ts=(0,Kr.Z)(h.Glyphicon),rs=(0,Dl.Z)((function(e){return 0===e.items.length}),{title:u().createElement(v.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(qc.Z);var ns=r(15402);const os=function(e){var t=e.disabled,r=e.selected,n=e.title,o=e.preview,i=e.previewSrc,a=e.onClick,l=void 0===a?function(){}:a;return u().createElement("div",{className:"ms-square-card".concat(r?" ms-selected":"").concat(t?" ms-disabled":""),onClick:t?null:function(){return l()}},(o||i)&&u().createElement("div",{className:"ms-preview"},o||i&&u().createElement("img",{src:i})),u().createElement("small",null,n))};function is(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function as(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?is(Object(r),!0).forEach((function(t){ls(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):is(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ls(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cs=(0,Hc.Z)("filterPlaceholder")(xe),ss=(0,Hc.Z)("placeholder")(h.FormControl),us=(0,Dl.Z)((function(e){return 0===e.items.length}),{title:u().createElement(v.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(qc.Z),ps=function(e){var t=e.title,r=e._abstract,n=/^[a-zA-Z0-9\s]*$/,o=t&&null!==t.match(n);return o&&!r||o&&r&&null!==r.match(n)};function fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ds=r(93222),ys=r(99009),ms=r(80643),bs=r.n(ms),gs=r(33716),vs=r.n(gs),hs=r(78795),Os=r(8954),ws=(r(76752),r(32095),r(64020),r(43657),r(71707),r(29589),r(4631)),Es=r.n(ws),Ss=r(29656),Ps=r(2576);function js(e){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(r),!0).forEach((function(t){_s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ts(e){return function(e){if(Array.isArray(e))return ks(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ks(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ks(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Is(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function As(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fs(e,t){return(Fs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ds(e,t){return!t||"object"!==js(t)&&"function"!=typeof t?Rs(e):t}function Rs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ns(e){return(Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(30084).Z(Es()),r(95246).Z(Es());var Ls=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fs(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ns(n);if(o){var r=Ns(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ds(this,e)});function a(){var e;Is(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _s(Rs(e=i.call.apply(i,[this].concat(r))),"state",{}),_s(Rs(e),"onRenderToken",(function(t){var r=t.lineCount();e.inlineWidgets&&e.inlineWidgets.forEach((function(e){e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)})),e.inlineWidgets=[],t.doc.iter(0,r,(function(r){var n=r.lineNo();t.getLineTokens(n).forEach((function(r){e.inlineWidgets=e.props.inlineWidgets.reduce((function(o,i){var a=i.type,l=i.style,c=void 0===l?{}:l,s=i.active,u=void 0===s?function(){return!1}:s,p=i.className,f=void 0===p?"":p;if(u(r)){var d=e.getInlineWidget({className:f,token:r,onClick:function(){return e.setState({inlineWidgetType:a,token:r,lineNo:n})},style:(0,fe.isFunction)(c)&&c(r)||c});return t.addWidget({line:n,ch:r.start-1},d,!1),[].concat(Ts(o),[d])}return Ts(o)}),Ts(e.inlineWidgets))}))}))})),_s(Rs(e),"onAutocomplete",(function(t){if(!(t&&t.state&&t.state.completionActive)){var r=t.getCursor(),n=t.getTokenAt(r);if(n.string&&((0,fe.endsWith)(n.string,"-")||n.string.match(/^[.`\w@]\w*$/))&&n.string.length>0){var o=e.editor&&e.editor.getWrapperElement&&e.editor.getWrapperElement()||null;Es().commands.autocomplete(t,null,{completeSingle:!1,container:o})}}})),_s(Rs(e),"onUpdate",(function(){e.update.cancel(),e.update()})),_s(Rs(e),"getInlineWidget",(function(e){var t=e.onClick,r=void 0===t?function(){}:t,n=e.token,o=void 0===n?{}:n,i=e.className,a=void 0===i?"":i,l=e.style,c=void 0===l?{}:l,s=document.createElement("div");return s.setAttribute("class","".concat(a," ms-style-editor-inline-widget")),se()(s.style,c),s.onclick=function(){return r(xs({},o))},s})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({code:this.props.code})}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!(0,fe.isEqual)(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){var t=this.editor.lineCount(),r={line:e.error.line-1||0,ch:0},n=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(r,n,{className:"ms-style-editor-error"})}}},{key:"render",value:function(){var e=this;return u().createElement(Go.Z,{className:"ms-style-editor",style:this.props.style,header:u().createElement("div",{className:"ms-style-editor-head"},this.props.loading&&u().createElement(Vc.Z,{className:"ms-style-editor-loader",size:20}),this.props.error&&u().createElement(Ps.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:u().createElement(v.Z,{msgId:"styleeditor.validationErrorTitle"}),text:this.props.error.line?this.props.error.message:u().createElement(v.Z,{msgId:"styleeditor.genericValidationError"})}))},u().createElement(Ss.Controlled,{key:"style-editor",value:this.state.code,editorDidMount:function(t){e.onRenderToken(t),e.editor=t,t.on("inputRead",e.onAutocomplete),e.update=(0,fe.debounce)((function(){e.props.onChange(e.state.code)}),e.props.waitTime),Es().extendMode(e.props.mode,{hintProperties:e.props.hintProperties})},editorWillUnmount:function(t){return t.off("inputRead",e.onAutocomplete)},onBeforeChange:function(t,r,n){return e.setState({code:n})},onChange:function(t){e.onRenderToken(t),e.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&u().createElement("div",{className:"ms-inline-widget-container"},u().createElement("div",null,u().createElement("button",{className:"btn close square-button",onClick:function(){e.state.value&&e.editor.replaceRange(e.state.value,{line:e.state.lineNo,ch:e.state.token.start},{line:e.state.lineNo,ch:e.state.token.end}),e.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),u().createElement("div",null,this.props.inlineWidgets.filter((function(t){return t.type===e.state.inlineWidgetType})).map((function(t){var r=t.Widget;return u().createElement(r,{value:e.state.value,token:e.state.token,onChange:function(t){return e.setState({value:t})}})})))))}}])&&As(t.prototype,r),a}(u().Component);_s(Ls,"propTypes",{mode:f().string,theme:f().string,style:f().object,code:f().string,onChange:f().func,waitTime:f().number,hintProperties:f().object,error:f().object,inlineWidgets:f().array,loading:f().bool}),_s(Ls,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:function(){},waitTime:1e3,hintProperties:{},inlineWidgets:[]});const Ms=Ls;var Zs=r(67460),Gs=r.n(Zs),Bs=r(50542),zs=r.n(Bs),Us=r(70475),Ws=r.n(Us),Vs=r(43678),qs=r.n(Vs),Hs=r(82920),$s=r.n(Hs),Ys=r(33941),Ks=r.n(Ys),Xs=r(12961),Qs=r(1036);function Js(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function eu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Js(Object(r),!0).forEach((function(t){tu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Js(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ru=function(e){var t=e.ramp,r=e.name,n=e.label,o=1/t.length,i=(t||[]).reduce((function(e,r,n){return"".concat(e,", ").concat(r," ").concat(n/t.length*100,"%, ").concat(r," ").concat(100*(n/t.length+o),"%")}),"linear-gradient(to right");return u().createElement("div",{style:{backgroundImage:"".concat(i,")"),width:"100%",display:"inline-block",verticalAlign:"middle",padding:"0 2px"}},u().createElement("span",{style:{color:"#000000",backgroundColor:"rgba(255, 255, 255, 0.75)",padding:"0 4px"}},u().createElement(v.Z,{msgId:n||r,msgParams:{number:t.length}})))};function nu(e){var t=e.value,r=e.samples,n=e.onChange,o=e.items,i=e.rampFunction,a=e.disabled,l=o.map((function(e){var t=e.options,n=void 0===t?{}:t,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["options"]);return eu(eu({},o),{},{options:n,ramp:i?i(o,n):((0,_l.qH)(n.base,n.range,r+1,n.options)||["#AAA"]).splice(1)})})),c=zs()(l,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===t||e.name===(t&&t.name)}));return u().createElement(zo.ZP,{valueKey:"name",className:"color-ramp-selector",clearable:!1,value:c,options:l,disabled:a,valueRenderer:ru,optionRenderer:ru,onChange:function(e){e&&n(e)}})}nu.propTypes={value:f().oneOfType([f().string,f().object]),samples:f().number,onChange:f().func,items:f().array,rampFunction:f().func,disabled:f().bool},nu.defaultProps={samples:5,onChange:function(){},items:[{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4,s:1,v:.5}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}},{name:"global.colors.random",schema:"qualitative",options:{base:190,range:340,options:{base:10,range:360,s:.67,v:.67}}}],disabled:!1};const ou=nu;function iu(e){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function au(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function su(e,t){return(su=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uu(e,t){return!t||"object"!==iu(t)&&"function"!=typeof t?pu(e):t}function pu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fu(e){return(fu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function du(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&su(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fu(n);if(o){var r=fu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return uu(this,e)});function a(){var e;lu(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return du(pu(e=i.call.apply(i,[this].concat(r))),"styleRenderer",(function(t,r,n){var o=e.props.styleRendererPattern||u().createElement("svg",{style:{height:33,width:"100%"},viewBox:"0 0 300 25"},u().createElement("path",{stroke:"#333333",strokeWidth:e.props.defaultStrokeWidth,strokeDasharray:n||t.value,d:"M0 12.5, 300 12.5"}));return u().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingRight:25}},o)})),e}return t=a,(r=[{key:"render",value:function(){var e,t=this,r=(0,fe.join)(this.props.dashArray||"1 0"," "),n=this.props.options.find((function(e){return e.value===r}))?this.props.options:[{value:r}].concat(function(e){if(Array.isArray(e))return au(e)}(e=this.props.options)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return au(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?au(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=this.props.creatable?zo.ZP.Creatable:zo.ZP;return u().createElement(o,{options:n,disabled:this.props.disabled,menuPlacement:this.props.menuPlacement,clearable:this.props.clearable,optionRenderer:this.props.optionRenderer||this.styleRenderer,valueRenderer:this.props.valueRenderer||this.styleRenderer,value:r,isValidNewOption:this.props.isValidNewOption,onChange:function(e){if(e){var r=e.value.split(" ");t.props.onChange(r)}}})}}])&&cu(t.prototype,r),a}(u().Component);du(yu,"propTypes",{dashArray:f().array,menuPlacement:f().string,clearable:f().bool,value:f().string,optionRenderer:f().func,styleRendererPattern:f().node,valueRenderer:f().func,disabled:f().bool,onChange:f().func,options:f().array,creatable:f().bool,isValidNewOption:f().func,defaultStrokeWidth:f().number}),du(yu,"defaultProps",{dashArray:["1","0"],menuPlacement:"top",clearable:!1,onChange:function(){},options:[{value:"1 0"},{value:"10 50 30"},{value:"6 6"},{value:"20 20"},{value:"30 30"}],defaultStrokeWidth:4});const mu=yu;function bu(e){return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hu(e,t){return(hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ou(e,t){return!t||"object"!==bu(t)&&"function"!=typeof t?wu(e):t}function wu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eu(e){return(Eu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Su(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}lc()();var Pu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Eu(n);if(o){var r=Eu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ou(this,e)});function a(){var e;gu(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Su(wu(e=i.call.apply(i,[this].concat(r))),"renderClasses",(function(){return e.props.classification.map((function(t,r){return u().createElement(h.FormGroup,{key:r},u().createElement(Xs.Z,{key:t.color,color:t.color,disableAlpha:!0,format:"hex",onChangeColor:function(t){return e.updateColor(r,t)}}),u().createElement(Do.NumberPicker,{format:"- ###.###",value:t.min,onChange:function(t){return e.updateMin(r,t)}}),u().createElement(Do.NumberPicker,{format:"- ###.###",value:t.max,precision:3,onChange:function(t){return e.updateMax(r,t)}}))}))})),Su(wu(e),"updateColor",(function(t,r){if(r){var n=e.props.classification.map((function(e,n){return n===t?se()({},e,{color:r}):e}));e.props.onUpdateClasses(n,"color")}})),Su(wu(e),"updateMin",(function(t,r){if(!isNaN(r)){var n=e.props.classification.map((function(e,n){return n===t?se()({},e,{min:r}):n===t-1?se()({},e,{max:r}):e}));e.props.onUpdateClasses(n,"interval")}})),Su(wu(e),"updateMax",(function(t,r){if(!isNaN(r)){var n=e.props.classification.map((function(e,n){return n===t?se()({},e,{max:r}):n===t+1?se()({},e,{min:r}):e}));e.props.onUpdateClasses(n,"interval")}})),e}return t=a,(r=[{key:"render",value:function(){return u().createElement("div",{className:"thema-classes-editor "+this.props.className},this.renderClasses())}}])&&vu(t.prototype,r),a}(u().Component);Su(Pu,"propTypes",{classification:f().array,onUpdateClasses:f().func,className:f().string}),Su(Pu,"defaultProps",{classification:[],onUpdateClasses:function(){},className:""});const ju=Pu,Cu=function(e){var t=e.children,r=e.label,n=e.tools,o=e.divider,i=e.invalid,a=e.warning,l=e.disabled;if(o)return u().createElement("div",{className:"ms-symbolizer-field-divider"});var c=a?" ms-symbolizer-value-warning":"",s=i?" ms-symbolizer-value-invalid":"",p=l?" ms-symbolizer-value-disabled":"";return u().createElement("div",{className:"ms-symbolizer-field"},u().createElement("div",{className:"ms-symbolizer-label"},u().createElement(v.Z,{msgId:r})),u().createElement("div",{className:"ms-symbolizer-value"+s+p+c,onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},t,u().createElement("div",{className:"ms-symbolizer-tools"},n)))};var xu=r(73935),Tu=r.n(xu),ku=r(72300),Iu=r.n(ku);function Au(){return(Au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Du(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fu(Object(r),!0).forEach((function(t){Ru(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ru(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lu(e){var t=e.containerNode,r=void 0===t?function(){return document.querySelector("."+((0,Dt.u8)("themePrefix")||"ms2")+" > div")||document.body}:t,n=e.placement,o=e.content,i=e.children,a=e.open,l=e.onOpen,c=void 0===l?function(){}:l,p=10,f=Iu()(r)?r():r,d=(0,s.useRef)({picker:{opacity:0},arrow:{opacity:0},overlay:{}}),y=Nu((0,s.useState)(d.current),2),m=y[0],b=y[1],g=(0,s.useRef)(),v=(0,s.useRef)(),h=(0,s.useRef)(),O=(0,s.useCallback)((function(){var e,t,r,o,i,l;if(!a)return d.current;var c={picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};if("center"===n)return c;var s=null==g||null===(e=g.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),u=null==v||null===(r=v.current)||void 0===r||null===(o=r.getBoundingClientRect)||void 0===o?void 0:o.call(r),f=null==h||null===(i=h.current)||void 0===i||null===(l=i.getBoundingClientRect)||void 0===l?void 0:l.call(i);if(s&&u&&f){var y,m,b,O,w=f.width,E=f.height,S=u.top,P=u.left,j=u.width,C=u.height,x=s.top,T=s.left,k=s.width,I=s.height,A=[T+k/2,x+I/2],F=A[0]-P>w/2+p&&P+j-A[0]>w/2+p,D=A[1]-S>E/2+p&&S+C-A[1]>E/2+p,R={top:{filter:function(){return F&&x-S>E+p},styles:function(){return{picker:{position:"absolute",top:x-E-p-S,left:T+k/2-w/2-P},overlay:{},arrow:{top:x+2,left:T+k/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return D&&P+j-(T+k)>w+p},styles:function(){return{picker:{position:"absolute",top:x-E/2-S,left:T+k+p-P},overlay:{},arrow:{top:x+I/2,left:T+k-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return F&&S+C-(x+I)>E+p},styles:function(){return{picker:{position:"absolute",top:x+I+p-S,left:T+k/2-w/2-P},overlay:{},arrow:{top:x+I-2,left:T+k/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return D&&T-P>w+p},styles:function(){return{picker:{position:"absolute",top:x-E/2-S,left:T-w-p-P},overlay:{},arrow:{top:x+I/2,left:T+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null!=R&&null!==(y=R[n])&&void 0!==y&&null!==(m=y.filter)&&void 0!==m&&m.call(y))return null==R||null===(b=R[n])||void 0===b||null===(O=b.styles)||void 0===O?void 0:O.call(b);if("top"!==n&&R.top.filter())return R.top.styles();if("right"!==n&&R.right.filter())return R.right.styles();if("bottom"!==n&&R.bottom.filter())return R.bottom.styles();if("left"!==n&&R.left.filter())return R.left.styles()}return c}),[n,a]);(0,s.useEffect)((function(){b(O());var e=function(){return b(O())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[O]);var w=(0,s.useRef)();return w.current={open:a},(0,s.useEffect)((function(){function e(e){var t=h.current,r=t&&e.target&&t.contains(e.target);if(w.current.open&&!r){var n,o,i=e.clientX,a=e.clientY,l=(null==h||null===(n=h.current)||void 0===n||null===(o=n.getBoundingClientRect)||void 0===o?void 0:o.call(n))||{},s=l.left,u=l.top,p=l.width,f=l.height;void 0!==i&&void 0!==a&&!(i>=s&&i<=s+p&&a>=u&&a<=u+f)&&c(!1)}}return window.addEventListener("click",e,!0),window.addEventListener("wheel",e,!0),window.addEventListener("scroll",e,!0),function(){window.removeEventListener("click",e,!0),window.removeEventListener("wheel",e,!0),window.removeEventListener("scroll",e,!0)}}),[]),u().createElement(u().Fragment,null,u().createElement("div",{className:"ms-popover",ref:g},(0,s.cloneElement)(i,{onClick:function(e){e.stopPropagation(),c(!a)}})),f&&a?(0,xu.createPortal)(u().createElement("div",{className:"ms-popover-overlay",ref:v,style:Du({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none"},null==m?void 0:m.overlay)},u().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),u().createElement("div",{ref:h,style:Du({pointerEvents:"auto"},null==m?void 0:m.picker)},o),u().createElement("div",{className:"ms-popover-arrow",style:Du({position:"absolute",borderTop:"".concat(9,"px solid transparent"),borderBottom:"".concat(9,"px solid transparent"),borderRight:"".concat(9,"px solid #ffffff"),filter:"drop-shadow(-4px 2px 4px rgba(0, 0, 0, 0.2))"},null==m?void 0:m.arrow)})),f):null)}const Mu=function(e){var t=e.open,r=e.onOpen,n=void 0===r?function(){}:r,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["open","onOpen"]),i=Nu((0,s.useState)(t),2),a=i[0],l=i[1];return u().createElement(Lu,Au({},o,{open:a,onOpen:function(e){l(e),n(e)}}))},Zu=[{value:"Circle",label:"styleeditor.circle",preview:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Square",label:"styleeditor.square",preview:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Triangle",label:"styleeditor.triangle",preview:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Star",label:"styleeditor.star",preview:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Cross",label:"styleeditor.cross",preview:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"X",label:"styleeditor.x",preview:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"shape://vertline",label:"styleeditor.verticalLine",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://horline",label:"styleeditor.horizontalLine",preview:{type:"point",paths:[{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://slash",label:"styleeditor.slash",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://backslash",label:"styleeditor.backslash",preview:{type:"point",paths:[{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://dot",label:"styleeditor.dot",preview:{type:"point",paths:[{d:"M 95,100 105,100 Z",stroke:"#333333",strokeWidth:10,fill:"none"}]}},{value:"shape://plus",label:"styleeditor.plus",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://times",label:"styleeditor.times",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://oarrow",label:"styleeditor.openArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://carrow",label:"styleeditor.closedArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}}];var Gu=(0,Kr.Z)(qe.Z);const Bu=function(e){var t=e.value,r=e.config,n=void 0===r?{}:r,o=e.onChange,i=void 0===o?function(){}:o,a=n.options,l=void 0===a?Zu:a,c=l.find((function(e){return e.value===t}));return u().createElement(Mu,{content:u().createElement("div",{className:"ms-mark-list"},u().createElement("ul",null,l.map((function(e){return u().createElement("li",{key:e.value},u().createElement(Gu,{className:"ms-mark-preview",active:e.value===t,onClick:function(){return i(e.value)}},u().createElement(Kc,e.preview)))}))))},u().createElement(Gu,{className:"ms-mark-preview"},c&&u().createElement(Kc,c.preview)))},zu=function(e){var t=e.label,r=void 0===t?"styleeditor.band":t,n=e.value,o=e.bands,i=e.onChange,a=e.enhancementType;return u().createElement(u().Fragment,null,u().createElement(Cu,{label:r},u().createElement(zo.ZP,{clearable:!1,options:o,value:n,onChange:function(e){return i("band",e.value)}})),u().createElement(Cu,{label:"styleeditor.contrastEnhancement"},u().createElement(zo.ZP,{clearable:!1,options:[{label:u().createElement(v.Z,{msgId:"styleeditor.none"}),value:"none"},{label:u().createElement(v.Z,{msgId:"styleeditor.normalize"}),value:"normalize"},{label:u().createElement(v.Z,{msgId:"styleeditor.histogram"}),value:"histogram"}],value:a||"none",onChange:function(e){var t="none"===e.value?void 0:e.value;i("enhancementType",t)}})))};function Uu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(r),!0).forEach((function(t){Vu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yu(){return(Yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ku,Xu,Qu=(Ku="onChange",Xu="value",function(e){function t(t){var r,n,o,i=(0,s.useRef)(),a=(n=(0,s.useState)(t.value),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(n,o)||function(e,t){if(e){if("string"==typeof e)return qu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qu(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],c=a[1],p=(0,s.useRef)();p.current=l,(0,s.useEffect)((function(){p.current!==t.value&&c(t.value)}),[t.value]),(0,s.useEffect)((function(){return i.current=Gs()((function(e){var t=e.newProps,r=e.newValue;t.onChange(r)}),t.debounceTime),function(){i.current.cancel()}}),[t.debounceTime]);var f=Wu(Wu({},t),{},(Vu(r={},Xu,l),Vu(r,Ku,(function(e){c(e),i.current&&(i.current.cancel(),i.current({newProps:t,newValue:e}))})),r));return u().createElement(e,f)}return t.propTypes={debounceTime:f().number},t.defaultProps={debounceTime:300},t.displayName=e.displayName+"WithDebounceOnCallback",t})((0,Hc.Z)("placeholder")((function(e){return u().createElement(h.FormControl,Yu({},e,{onChange:function(t){return e.onChange(t.target.value)}}))}))),Ju=(0,Kr.Z)(h.Glyphicon);function ep(e){var t=e.value,r=e.onChange,n=e.onLoad,o=(0,s.useRef)(!0);(0,s.useEffect)((function(){return o.current=!0,function(){o.current=!1}}),[]);var i=Hu((0,s.useState)(!1),2),a=i[0],l=i[1],c=Hu((0,s.useState)(!0),2),p=c[0],f=c[1],d=Hu((0,s.useState)(t),2),y=d[0],m=d[1],b=function(e,t){m(e),l(!0),f(!1),(0,ys.ZF)(e).then((function(t){if(o.current){var r=!1;t.isBase64&&(r={type:"warning",messageId:"imageSrcNotSupportedBase64Image"}),f(r),l(!1),n(r,e)}})).catch((function(t){if(o.current){var r=t.isBase64||"imageSrcLoadError"!==t.messageId?{type:"error",messageId:t.messageId}:{type:"warning",messageId:t.messageId};f(r),l(!1),n(r,e)}})),t&&r(e)},g=(0,s.useRef)(t);return(0,s.useEffect)((function(){b(g.current)}),[]),u().createElement("div",{className:"ms-style-editor-icon-input",style:{position:"relative",display:"flex",alignItems:"center"}},u().createElement(h.FormGroup,{style:{flex:1}},u().createElement(Qu,{style:{paddingRight:26},placeholder:"styleeditor.placeholderEnterImageUrl",value:t,debounceTime:300,onChange:function(e){return b(e,!0)}})),u().createElement("div",{style:{position:"absolute",minWidth:26,minHeight:26,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},y&&!p&&!a&&u().createElement("div",{className:"ms-style-editor-icon-input-image",style:{position:"absolute",margin:2,width:"calc(100% - 2px)",height:"calc(100% - 2px)",backgroundImage:"url(".concat(y,")"),backgroundPosition:"center",backgroundSize:"contain"}}),p&&u().createElement(Ju,{glyph:"exclamation-sign",tooltipId:"styleeditor.".concat(p.messageId)}),a&&u().createElement(Vc.Z,{size:20})))}ep.propTypes={value:f().bool,onChange:f().node,onLoad:f().object,onError:f().object},ep.defaultProps={value:"",onChange:function(){},onLoad:function(){},onError:function(){}};const tp=ep;function rp(){return(rp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function np(e){return function(e){if(Array.isArray(e))return ap(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ip(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function op(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||ip(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ip(e,t){if(e){if("string"==typeof e)return ap(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ap(e,t):void 0}}function ap(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lp(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function cp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cp(Object(r),!0).forEach((function(t){up(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function up(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pp=(0,Hc.Z)("placeholder")(h.FormControl),fp=(0,Hc.Z)(["placeholder","noResultsText"])(zo.ZP),dp=(0,Hc.Z)(["placeholder","noResultsText"])(zo.ZP.Creatable),yp={color:function(e){var t=e.label,r=e.config,n=void 0===r?{}:r,o=e.value,i=e.onChange,a=void 0===i?function(){}:i,l=e.disableAlpha,c=(0,s.useRef)({value:o});if(c.current={value:o},"pattern"==(vs()(o)&&o.kind?"pattern":"solid")){var p=((null==n?void 0:n.getGroupParams(o.kind))||{}).params,f=void 0===p?{}:p,d=(null==n?void 0:n.getGroupConfig(o.kind))||{},y=o;return u().createElement(u().Fragment,null,u().createElement(mp,{properties:y,params:d.omittedKeys?qs()(f,d.omittedKeys):f,config:{disableAlpha:d.disableAlpha},onChange:function(e){return a(sp(sp({},c.current.value),e))}}),u().createElement(Cu,{divider:!0}))}return u().createElement(Cu,{label:t},u().createElement(Xs.Z,{color:o,line:n.stroke,disableAlpha:n.disableAlpha||l,onChangeColor:function(e){return e&&a(e)}}))},slider:function(e){var t=e.label,r=e.value,n=e.disabled,o=e.config,i=void 0===o?{}:o,a=e.onChange,l=void 0===a?function(){}:a;return u().createElement(Cu,{label:t,disabled:n},u().createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},u().createElement(Qs.Z,{start:[r],disabled:n,tooltips:[!0],format:i.format,range:i.range||{min:0,max:10},onChange:function(e){return l(e)}})))},input:function(e){var t=e.label,r=e.value,n=e.config,o=void 0===n?{}:n,i=e.onChange,a=void 0===i?function(){}:i;return u().createElement(Cu,{label:t},u().createElement(h.FormGroup,null,u().createElement(pp,{type:o.type||"text",value:r,placeholder:"styleeditor.placeholderInput",onChange:function(e){return a(e.target.value)}})))},toolbar:function(e){var t=e.label,r=e.value,n=e.onChange,o=void 0===n?function(){}:n,i=e.config,a=void 0===i?{}:i,l=e.disabled;return u().createElement(Cu,{label:t,disabled:l},u().createElement(Bo.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs"},buttons:(a.options||[]).map((function(e){var t=e.glyph,n=e.label,i=e.labelId,a=e.tooltipId,c=e.value;return{glyph:t,tooltipId:a,disabled:l,text:i?u().createElement(v.Z,{msgId:i}):n,active:c===r,onClick:function(){return o(r===c?void 0:c)}}}))}))},mark:function(e){var t=e.label,r=lp(e,["label"]);return u().createElement(Cu,{label:t},u().createElement(Bu,r))},image:function(e){var t=e.label,r=e.value;!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e.config);var n=e.onChange,o=op((0,s.useState)(!1),2),i=o[0],a=o[1],l=vs()(r)?r.src:r;return u().createElement(Cu,{label:t,invalid:!("error"!==(null==i?void 0:i.type)),warning:!("warning"!==(null==i?void 0:i.type))},u().createElement(tp,{label:t,value:l,onChange:function(e){n(e),a(!1)},onLoad:function(e,t){a(e),"error"===e.type&&n({src:t,errorId:e.messageId})}}))},select:function(e){var t=e.label,r=e.value,n=e.config,o=n.getOptions,i=void 0===o?function(){return[]}:o,a=n.selectProps,l=void 0===a?{}:a,c=n.isValid,p=e.onChange,f=lp(e,["label","value","config","onChange"]),d=l.creatable,y=l.clearable,m=void 0!==y&&y,b=l.multi;function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.map((function(e){return e.value})),n=(null==t?void 0:t.value)&&-1===r.indexOf(t.value);return n?[t].concat(np(e)):e}function h(e){return r?[{value:r,label:r}].reduce(g,e):e}var O=i(f),w=op((0,s.useState)(h(O)),2),E=w[0],S=w[1];(0,s.useEffect)((function(){S(h(O))}),[null==O?void 0:O.length]);var P=d?dp:fp,j=!c||c({value:r});return u().createElement(Cu,{label:t,invalid:!j},u().createElement(P,rp({clearable:m,placeholder:"styleeditor.selectPlaceholder",noResultsText:"styleeditor.noResultsSelectInput"},l,{options:E.map((function(e){return sp(sp({},e),{},{label:e.labelId?u().createElement(v.Z,{msgId:e.labelId}):e.label})})),value:r,onChange:function(e){return b?p(e.length>0?e.map((function(e){return e.value})):void 0):(S(g(E,e)),p(e.value))}})))},colorRamp:function(e){var t=e.label,r=e.value,n=e.config,o=n.samples,i=void 0===o?5:o,a=n.getOptions,l=void 0===a?function(){return[]}:a,c=n.rampFunction,s=void 0===c?function(e){return e.colors}:c,p=e.onChange,f=l(lp(e,["label","value","config","onChange"]));return u().createElement(Cu,{label:t},u().createElement(ou,{items:f,rampFunction:s,samples:i,value:{name:r},onChange:function(e){return p(e.name)}}))},colorMap:function(e){var t=e.value,r=e.onChange;return u().createElement("div",{onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},u().createElement(ju,{classification:t,onUpdateClasses:function(e,t){return r({classification:e,type:t})}}))},channel:function(e){var t,r,n,o=e.value,i=e.onChange,a=e.bands,l=o.channelSelection,c=l?l.grayChannel?"gray":"rgb":"auto",s=(a||[]).map((function(e){return{label:e,value:e}}));if("rgb"===c)return Object.keys(l).map((function(e){var t,r,n=null===(t=l[e])||void 0===t?void 0:t.sourceChannelName,a=null===(r=l[e])||void 0===r?void 0:r.contrastEnhancement;return u().createElement(u().Fragment,null,u().createElement(zu,{key:e,value:n,bands:s,label:"styleeditor."+e,enhancementType:(null==a?void 0:a.enhancementType)||"none",onChange:function(t,r){return"band"===t?i({contrastEnhancement:{},channelSelection:sp(sp({},o.channelSelection),{},up({},e,sp(sp({},o.channelSelection[e]),{},{sourceChannelName:r})))}):"enhancementType"===t?i({contrastEnhancement:{},channelSelection:sp(sp({},o.channelSelection),{},up({},e,sp(sp({},o.channelSelection[e]),{},{contrastEnhancement:sp(sp({},l[e].contrastEnhancement),{},{enhancementType:r})})))}):null}}),u().createElement(Cu,{key:e+"-divider",divider:!0}))}));var p=void 0===(null==l||null===(t=l.grayChannel)||void 0===t?void 0:t.sourceChannelName)?"auto":null==l||null===(r=l.grayChannel)||void 0===r?void 0:r.sourceChannelName,f="auto"===c?o.contrastEnhancement:null==l||null===(n=l.grayChannel)||void 0===n?void 0:n.contrastEnhancement;return u().createElement(zu,{label:"styleeditor.grayChannel",value:p,bands:[{label:u().createElement(v.Z,{msgId:"styleeditor.channelAuto"}),value:"auto"}].concat(np(s)),enhancementType:(null==f?void 0:f.enhancementType)||"none",onChange:function(e,t){return"band"===e?i("auto"===t?sp(sp({},o),{},{channelSelection:void 0}):{contrastEnhancement:{},channelSelection:{grayChannel:sp(sp({contrastEnhancement:{}},null==l?void 0:l.grayChannel),{},{sourceChannelName:t})}}):"enhancementType"===e?i("auto"===c?{channelSelection:void 0,contrastEnhancement:sp(sp({},o.contrastEnhancement),{},{enhancementType:t})}:{contrastEnhancement:{},channelSelection:Object.keys(l).reduce((function(e,r){return sp(sp({},e),{},up({},r,sp(sp({},l[r]),{},{contrastEnhancement:sp(sp({},l[r].contrastEnhancement),{},{enhancementType:t})})))}),{})}):null}})},dash:function(e){var t=e.label,r=e.value,n=e.onChange,o=e.config.options;return u().createElement(Cu,{label:t},u().createElement(mu,{dashArray:r,onChange:n,options:o,defaultStrokeWidth:2,isValidNewOption:function(e){return!!e.label&&!e.label.split(" ").find((function(e){return Ks()(parseFloat(e))}))},creatable:!0}))}};function mp(e){var t=e.properties,r=e.params,n=e.config,o=e.onChange,i=(0,s.useRef)({properties:t});return i.current={properties:t},u().createElement(u().Fragment,null,Object.keys(r).map((function(e){var a=r[e]||{},l=a.type,c=a.setValue,s=a.getValue,p=a.isDisabled,f=a.config,d=a.label,y=a.key||e,m=yp[l],b=c&&c(t[y],i.current.properties);return m&&u().createElement(m,rp({},n,{key:y,label:d||y,config:f,disabled:p&&p(t[y],i.current.properties),value:$s()(b)?t[y]:b,onChange:function(e){return o(s&&s(e,i.current.properties)||e)}}))})))}const bp=mp;function gp(e){return(gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vp(){return(vp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function hp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Op(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wp(e,t){return(wp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ep(e,t){return!t||"object"!==gp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sp(e){return(Sp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wp(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sp(n);if(o){var r=Sp(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ep(this,e)});function a(){return hp(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this,t=se()({},{borderColor:"#dedede"},this.props.style);this.props.fieldException&&(t=se()({},t,{borderColor:"#FF0000"}));var r=this.props.multivalue?Do.Multiselect:Do.DropdownList,n=null!==this.props.valueField&&null!==this.props.textField?u().createElement(r,vp({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,valueField:this.props.valueField,textField:this.props.textField,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,le.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,e.props.multivalue?t:t[e.props.valueField],e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch})):u().createElement(r,vp({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,le.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch}));return this.props.fieldException?u().createElement(Ze.Z,{placement:"bottom",overlay:u().createElement(h.Tooltip,{id:this.props.fieldRowId+"_tooltip"},u().createElement("strong",null,this.props.fieldException))},n):n}}])&&Op(t.prototype,r),a}(u().Component);Pp(jp,"propTypes",{busy:f().bool,style:f().object,valueField:f().string,textField:f().string,placeholder:f().object,itemComponent:f().oneOfType([f().object,f().func]),fieldOptions:f().array,fieldName:f().string,fieldRowId:f().number,attType:f().string,fieldValue:f().oneOfType([f().number,f().string,f().array]),fieldException:f().oneOfType([f().object,f().string]),comboFilter:f().oneOfType([f().bool,f().string,f().func]),groupBy:f().oneOfType([f().string,f().func]),multivalue:f().bool,disabled:f().bool,options:f().object,onSelect:f().func,onToggle:f().func,onSearch:f().func,onUpdateField:f().func,onClick:f().func,onUpdateExceptionField:f().func}),Pp(jp,"contextTypes",{messages:f().object}),Pp(jp,"defaultProps",{options:{},busy:!1,style:{width:"100%"},placeholder:u().createElement(v.Z,{msgId:"queryform.comboField.default_placeholder"}),multivalue:!1,disabled:!1,valueField:null,textField:null,fieldOptions:[],fieldName:null,itemComponent:null,fieldRowId:null,fieldValue:null,fieldException:null,comboFilter:!1,groupBy:function(){},onSelect:function(){},onToggle:function(){},onSearch:function(){},onUpdateField:function(){},onUpdateExceptionField:function(){}});const Cp=jp;function xp(e){return(xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ip(e,t){return(Ip=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ap(e,t){return!t||"object"!==xp(t)&&"function"!=typeof t?Fp(e):t}function Fp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dp(e){return(Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Np=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ip(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dp(n);if(o){var r=Dp(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ap(this,e)});function a(){var e;Tp(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Rp(Fp(e=i.call.apply(i,[this].concat(r))),"renderOperatorField",(function(){return u().createElement(Cp,{fieldOptions:e.props.operatorOptions,fieldName:"operator",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.operator,onUpdateField:e.updateFieldElement})})),Rp(Fp(e),"renderValueField",(function(t){return u().cloneElement(u().Children.toArray(e.props.children).filter((function(e){return e.props.attType===t.type}))[0],se()({fieldName:"value",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.value,fieldException:e.props.filterField.exception,onUpdateField:e.updateFieldElement,toggleMenu:e.props.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.updateExceptionFieldElement},t.fieldOptions||{}))})),Rp(Fp(e),"updateExceptionFieldElement",(function(t,r){e.props.onUpdateExceptionField(t,r)})),Rp(Fp(e),"updateFieldElement",(function(t,r,n,o,i){var a;if("attribute"===r?(a=e.props.attributes.filter((function(e){return e.attribute===n}))[0],e.props.onUpdateField(t,r,n,a&&a.type||o,i)):e.props.onUpdateField(t,r,n,"boolean"===o?"string":o,i),"value"===r){var l=e.props.attributes.filter((function(t){return t.dependson&&t.dependson.field===e.props.filterField.attribute}));l.length>0&&e.props.onChangeCascadingValue(l)}})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return u().createElement("div",{className:"filter-field-row"},u().createElement("div",{className:"filter-field-attribute"},u().createElement(Cp,{valueField:"id",textField:"name",fieldOptions:this.props.attributes.map((function(e){return{id:e.attribute,name:e.label}})),placeholder:(0,le.S$)(this.context.messages,"queryform.attributefilter.combo_placeholder"),fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),u().createElement("div",{className:"filter-field-operator"},t?this.renderOperatorField():null),u().createElement("div",{className:"filter-field-value"},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?u().createElement("div",{className:"filter-field-tools"},this.props.deleteButton):null)}}])&&kp(t.prototype,r),a}(u().Component);Rp(Np,"propTypes",{attributes:f().array,filterField:f().object,operatorOptions:f().array,onUpdateField:f().func,maxFeaturesWPS:f().number,toggleMenu:f().func,deleteButton:f().node,onUpdateExceptionField:f().func,onChangeCascadingValue:f().func}),Rp(Np,"contextTypes",{messages:f().object}),Rp(Np,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}});const _p=Np;var Lp=r(30381),Mp=r.n(Lp),Zp=r(93054),Gp=r.n(Zp),Bp=r(43146),zp=r(55237);function Up(e){return(Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qp(e,t){return(qp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hp(e,t){return!t||"object"!==Up(t)&&"function"!=typeof t?$p(e):t}function $p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yp(e){return(Yp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Gp()(Mp());var Xp=(0,Bp.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(Do.DateTimePicker),Qp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qp(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yp(n);if(o){var r=Yp(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Hp(this,e)});function a(){var e;Wp(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Kp($p(e=i.call.apply(i,[this].concat(r))),"updateValueState",(function(t){t.startDate&&t.endDate&&t.startDate>t.endDate?e.props.onUpdateExceptionField(e.props.fieldRowId,"queryform.attributefilter.datefield.wrong_date_range"):e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.fieldValue&&this.props.fieldValue.startDate||null,r=this.props.fieldValue&&this.props.fieldValue.endDate||null;return"><"===this.props.operator?u().createElement("div",{className:"query-field"},u().createElement("div",{className:"query-field-value"},this.props.showLabels&&u().createElement(v.Z,{msgId:"queryform.from"}),u().createElement(Xp,{type:this.props.attType,defaultValue:t,value:t,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,zp.V$)(this.context.locale,this.props.attType),onChange:function(t){return e.updateValueState({startDate:t,endDate:r})}})),u().createElement("div",{className:"query-field-value"},this.props.showLabels&&u().createElement(v.Z,{msgId:"queryform.to"}),u().createElement(Xp,{type:this.props.attType,defaultValue:r,value:r,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,zp.V$)(this.context.locale,this.props.attType),onChange:function(r){return e.updateValueState({startDate:t,endDate:r})}}))):u().createElement("div",null,this.props.showLabels&&u().createElement(v.Z,{msgId:"queryform.date"}),u().createElement(Xp,{type:this.props.attType,defaultValue:t,value:t,time:this.props.timeEnabled,calendar:this.props.dateEnabled,format:(0,zp.V$)(this.context.locale,this.props.attType),onChange:function(t){e.updateValueState({startDate:t,endDate:null})}}))}}])&&Vp(t.prototype,r),a}(u().Component);Kp(Qp,"propTypes",{attType:f().string,dateEnabled:f().bool,fieldName:f().string,fieldRowId:f().number,fieldValue:f().object,fieldException:f().string,operator:f().string,onUpdateField:f().func,onUpdateExceptionField:f().func,showLabels:f().bool,timeEnabled:f().bool}),Kp(Qp,"contextTypes",{locale:f().string}),Kp(Qp,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1});const Jp=Qp;function ef(e){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(r),!0).forEach((function(t){pf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nf(){return(nf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function of(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function af(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lf(e,t){return(lf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cf(e,t){return!t||"object"!==ef(t)&&"function"!=typeof t?sf(e):t}function sf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uf(e){return(uf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}lc()();var ff=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lf(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uf(n);if(o){var r=uf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return cf(this,e)});function a(){var e;of(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pf(sf(e=i.call.apply(i,[this].concat(r))),"renderPicker",(function(t){var r=e.props.label?u().createElement("label",null,e.props.label):null,n=e.props.lowLabel?u().createElement("label",null,e.props.lowLabel):null,o=e.props.upLabel?u().createElement("label",null,e.props.upLabel):null;return"><"===e.props.operator?u().createElement("div",{className:"query-field"},u().createElement("div",{className:"query-field-value"},n,u().createElement(Do.NumberPicker,nf({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({lowBound:t,upBound:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null})}},e.props.options))),u().createElement("div",{className:"query-field-value"},o,u().createElement(Do.NumberPicker,nf({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({upBound:t,lowBound:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null})}},e.props.options)))):u().createElement("div",null,r,u().createElement(Do.NumberPicker,nf({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:e.props.fieldValue,onChange:function(t){return!isNaN(t)&&e.changeNumber(t)}},e.props.options)))})),pf(sf(e),"changeNumber",(function(t){"><"===e.props.operator?null!==t.lowBound&&void 0!==t.lowBound&&null!==t.upBound&&void 0!==t.upBound&&t.lowBound>=t.upBound?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,le.S$)(e.context.messages,"queryform.attributefilter.numberfield.wrong_range")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null):e.props.isRequired&&null==t?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,le.S$)(e.context.messages,"queryform.attributefilter.numberfield.isRequired")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=rf(rf({},this.props.style),{},{borderColor:"#FF0000"})),u().createElement(Ze.Z,{placement:"bottom",overlay:this.props.fieldException?u().createElement(h.Tooltip,{id:this.props.fieldRowId+"_tooltip"},u().createElement("strong",null,this.props.fieldException)):u().createElement("noscript",null)},this.renderPicker(e))}}])&&af(t.prototype,r),a}(u().Component);pf(ff,"propTypes",{operator:f().string,fieldName:f().string,fieldRowId:f().number,attType:f().string,fieldValue:f().oneOfType([f().number,f().object]),fieldException:f().oneOfType([f().object,f().bool,f().string]),onUpdateField:f().func,onUpdateExceptionField:f().func,isRequired:f().bool,label:f().string,lowLabel:f().string,upLabel:f().string,options:f().shape({format:f().string,min:f().number,max:f().number,step:f().number,precision:f().number}),style:f().object}),pf(ff,"contextTypes",{messages:f().object}),pf(ff,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}});const df=ff;var yf=r(47805);function mf(e){return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vf(e,t){return(vf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hf(e,t){return!t||"object"!==mf(t)&&"function"!=typeof t?Of(e):t}function Of(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wf(e){return(wf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ef(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Sf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vf(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wf(n);if(o){var r=wf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return hf(this,e)});function a(){var e;bf(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ef(Of(e=i.call.apply(i,[this].concat(r))),"renderField",(function(){var t=(0,le.S$)(e.context.messages,"queryform.attributefilter.text_placeholder"),r=u().createElement(h.Tooltip,{id:"textField-tooltip"+e.props.fieldRowId},u().createElement(ns.Z,{msgId:"queryform.attributefilter.tooltipTextField"})),n=u().createElement(h.FormControl,{disabled:"isNull"===e.props.operator,placeholder:t,onChange:e.changeText,type:"text",value:e.props.fieldValue||""});return(0,yf.isLikeOrIlike)(e.props.operator)?u().createElement(Ze.Z,{key:"textField-overlay"+e.props.fieldRowId,placement:"top",overlay:r},n):n})),Ef(Of(e),"changeText",(function(t){e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t.target.value,e.props.attType)})),e}return t=a,(r=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?u().createElement("label",null,this.props.label):u().createElement("span",null);return u().createElement("div",{className:"textField"},e,this.renderField())}}])&&gf(t.prototype,r),a}(u().Component);Ef(Sf,"propTypes",{operator:f().string,fieldName:f().string,fieldRowId:f().number,attType:f().string,fieldValue:f().string,label:f().string,fieldException:f().oneOfType([f().object,f().string]),onUpdateField:f().func,onUpdateExceptionField:f().func,style:f().object}),Ef(Sf,"contextTypes",{messages:f().object}),Ef(Sf,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}});const Pf=Sf;var jf=r(48384),Cf=r(49902);function xf(e){return(xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function If(e,t){return(If=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Af(e,t){return!t||"object"!==xf(t)&&"function"!=typeof t?Ff(e):t}function Ff(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Df(e){return(Df=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&If(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Df(n);if(o){var r=Df(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Af(this,e)});function a(){var e;Tf(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Rf(Ff(e=i.call.apply(i,[this].concat(r))),"getOptions",(function(){return e.props.filterField&&e.props.filterField.options&&e.props.filterField.options[e.props.filterField.attribute]&&e.props.filterField.options[e.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),Rf(Ff(e),"getPagination",(function(t){if(!e.props.filterField.options)return{};var r=Math.ceil(e.props.filterField.fieldOptions.valuesCount/e.props.maxFeaturesWPS),n=1===e.props.filterField.fieldOptions.currentPage||!e.props.filterField.fieldOptions.currentPage,o=e.props.filterField.fieldOptions.currentPage===r||!e.props.filterField.fieldOptions.currentPage;return se()({},e.props.pagination,{paginated:0!==t.length&&!(n&&1===t.length),firstPage:n,lastPage:o,loadPrevPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),Rf(Ff(e),"getTooltip",(function(){return se()({},e.props.tooltip,{enabled:(0,yf.isLikeOrIlike)(e.props.filterField.operator),id:"autocompleteField-tooltip"+e.props.filterField&&e.props.filterField.rowId,message:u().createElement(ns.Z,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:"autocompleteField-overlay"+e.props.filterField&&e.props.filterField.rowId,placement:"top"})})),Rf(Ff(e),"renderField",(function(){var t;e.props.filterField&&e.props.filterField.value&&"*"!==e.props.filterField.value&&(t={value:e.props.filterField.value,label:e.props.filterField.value});var r=e.getOptions()?e.getOptions().slice(0):[];return u().createElement(Cf.Z,{busy:e.props.filterField.loading,data:e.props.filterField.loading?[]:r,disabled:"isNull"===e.props.filterField.operator,itemComponent:e.props.itemComponent,open:e.props.filterField.openAutocompleteMenu,onChange:function(t){return e.handleChange(t)},onFocus:function(){return e.handleFocus(r)},onSelect:function(){return e.handleSelect()},onToggle:function(){return e.handleToggle(r)},pagination:e.getPagination(r),selectedValue:t&&t.value,tooltip:e.getTooltip()})})),Rf(Ff(e),"handleSelect",(function(){e.selected=!0})),Rf(Ff(e),"handleChange",(function(t){e.selected?(e.selected=!1,t&&""!==t.value&&e.props.onUpdateField(e.props.filterField.rowId,"value",t.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):e.props.onUpdateField(e.props.filterField.rowId,"value","string"==typeof t?t:t.value,"string",{currentPage:1,delayDebounce:1e3})})),Rf(Ff(e),"handleFocus",(function(t){e.loadWithoutfilter(t)})),Rf(Ff(e),"handleToggle",(function(){e.props.toggleMenu(e.props.filterField.rowId,!e.props.filterField.openAutocompleteMenu)})),Rf(Ff(e),"loadWithoutfilter",(function(t){0!==t.length||e.props.filterField.value||e.props.onUpdateField(e.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.label?u().createElement("label",null,this.props.label):u().createElement("span",null);return u().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&kf(t.prototype,r),a}(u().Component);Rf(Nf,"propTypes",{disabled:f().bool,filterField:f().object,label:f().string,itemComponent:f().oneOfType([f().object,f().func]),maxFeaturesWPS:f().number,onUpdateField:f().func,pagination:f().object,textField:f().string,tooltip:f().object,toggleMenu:f().func,valueField:f().string}),Rf(Nf,"contextTypes",{messages:f().object}),Rf(Nf,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:jf.Z,toggleMenu:function(){},filterField:{fieldOptions:{}}});const _f=Nf;var Lf=r(12346);function Mf(e){return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bf(e,t){return(Bf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zf(e,t){return!t||"object"!==Mf(t)&&"function"!=typeof t?Uf(e):t}function Uf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wf(e){return(Wf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bf(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wf(n);if(o){var r=Wf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return zf(this,e)});function a(){var e;Zf(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Vf(Uf(e=i.call.apply(i,[this].concat(r))),"state",{open:!1}),Vf(Uf(e),"getSelected",(function(){return(0,fe.find)(e.props.options,e.getFindFunciton())})),Vf(Uf(e),"getValue",(function(t){return e.props.valueField&&t&&t[e.props.valueField]?t[e.props.valueField]:t})),Vf(Uf(e),"getLabel",(function(t){return e.props.labelField&&t&&t[e.props.labelField]?t[e.props.labelField]:e.getValue(t)})),Vf(Uf(e),"getFindFunciton",(function(){return e.props.valueField?Vf({},e.props.valueField,e.props.value):e.props.value})),Vf(Uf(e),"renderLabel",(function(t){return e.props.labelRenderer?e.props.labelRenderer(t):e.getLabel(t)})),Vf(Uf(e),"handleOutsideClick",(function(t){e.node&&e.node.contains&&!e.node.contains(t.target)&&e.state.open?e.handleClick():document&&!e.node&&e.handleOutsideClick&&document.removeEventListener("click",e.handleOutsideClick,!1)})),Vf(Uf(e),"handleClick",(function(){document&&!e.state.open?document.addEventListener("click",e.handleOutsideClick,!1):document.removeEventListener("click",e.handleOutsideClick,!1);var t=!e.state.open;e.setState({open:t})})),e}return t=a,(r=[{key:"render",value:function(){var e=this;return u().createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},u().createElement("span",{onClick:this.handleClick},u().createElement("strong",null,this.renderLabel(this.getSelected())),u().createElement(h.Glyphicon,{glyph:"chevron-down"})),this.state.open&&u().createElement("div",{className:"m-options"},u().createElement("ul",null,this.props.options.map((function(t,r){return u().createElement("li",{key:r,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&Gf(t.prototype,r),a}(u().Component);Vf(qf,"propTypes",{options:f().array,value:f().any,onSelect:f().func,valueField:f().string,labelField:f().string,labelRenderer:f().any}),Vf(qf,"defaultProps",{onSelect:function(){},options:[]});const Hf=qf;var $f=r(37101);function Yf(e){return(Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kf(){return(Kf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jf(e,t){return(Jf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ed(e,t){return!t||"object"!==Yf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function td(e){return(td=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jf(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=td(n);if(o){var r=td(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ed(this,e)});function a(){return Xf(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return this.context.intl?u().createElement($f.FormattedDate,Kf({value:this.props.value},this.props.dateParams)):u().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&Qf(t.prototype,r),a}(u().Component);rd(nd,"propTypes",{value:f().object,dateParams:f().object}),rd(nd,"contextTypes",{intl:f().object}),rd(nd,"defaultProps",{value:new Date});const od=nd;var id=v.Z,ad=ns.Z,ld=od;const cd={Message:v.Z,HTML:ad,DateFormat:ld};function sd(e){return(sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ud(e){return function(e){if(Array.isArray(e))return pd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pd(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yd(e,t){return(yd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function md(e,t){return!t||"object"!==sd(t)&&"function"!=typeof t?bd(e):t}function bd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gd(e){return(gd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yd(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gd(n);if(o){var r=gd(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return md(this,e)});function a(){var e;fd(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vd(bd(e=i.call.apply(i,[this].concat(r))),"getComboValues",(function(t,r){if(t&&t.dependson){var n=e.props.filterFields.filter((function(e){return e.attribute===t.dependson.field}))[0];if(n&&n.value){var o=r.filter((function(e){return e.attribute===n.attribute}))[0],i=o.values.filter((function(e){return e[o.valueId]===n.value}))[0][t.dependson.from],a=t.values.filter((function(e){return e[t.dependson.to]===i}));return t&&"list"===t.type?a.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null}}return t&&"list"===t.type?t.values.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null})),vd(bd(e),"getOperator",(function(t){switch(t&&t.type?t.type:""){case"list":return e.props.listOperators;case"string":return e.props.stringOperators;case"boolean":return e.props.booleanOperators;default:return e.props.defaultOperators}})),vd(bd(e),"renderFilterField",(function(t){var r=e.props.attributes.filter((function(e){return e.attribute===t.attribute}))[0],n=e.getComboValues(r,e.props.attributes),o=t.exception?u().createElement(Ze.Z,{placement:"bottom",overlay:u().createElement(h.Tooltip,{id:t.rowId+"tooltip"},u().createElement("strong",null,u().createElement(cd.Message,{msgId:t.exception||""})))},u().createElement(qe.Z,{id:"remove-filter-field",className:"filter-buttons no-border",style:{backgroundColor:"red"},onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},u().createElement(h.Glyphicon,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):u().createElement(Ze.Z,{placement:"top",overlay:u().createElement(h.Tooltip,{id:t.rowId+"tooltip"},u().createElement("strong",null,u().createElement(cd.Message,{msgId:"queryform.attributefilter.delete"})))},u().createElement(qe.Z,{id:"remove-filter-field",className:"filter-buttons no-border",onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},u().createElement(h.Glyphicon,{glyph:e.props.removeButtonIcon})));return u().createElement(_p,{key:t.rowId,deleteButton:o,attributes:e.props.attributes,filterField:t,operatorOptions:e.getOperator(r),onUpdateField:e.props.actions.onUpdateFilterField,toggleMenu:e.props.actions.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.props.actions.onUpdateExceptionField,onChangeCascadingValue:e.props.actions.onChangeCascadingValue},u().createElement(Cp,{attType:"list",valueField:"id",textField:"name",fieldOptions:n||[],comboFilter:"contains"}),u().createElement(Jp,{attType:"date",dateEnabled:!0,operator:t.operator}),u().createElement(Jp,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:t.operator}),u().createElement(Jp,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:t.operator}),u().createElement(df,{operator:t.operator,attType:"number"}),e.props.autocompleteEnabled?u().createElement(_f,{filterField:t,attType:"string"}):u().createElement(Pf,{operator:t.operator,attType:"string"}),u().createElement(Cp,{fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"}))})),vd(bd(e),"renderGroupButtons",(function(t){var r=[];return t.index<=e.props.groupLevels&&r.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",tooltipId:"queryform.attributefilter.add_group",onClick:function(){return e.props.actions.onAddGroupField(t.id,t.index)}}),r.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:e.props.addButtonIcon,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return e.props.actions.onAddFilterField(t.id)}}),t.groupId&&r.push({key:"remove-group",className:"filter-buttons no-border",tooltipId:"queryform.attributefilter.delete",glyph:e.props.removeButtonIcon,onClick:function(){return e.props.actions.onRemoveGroupField(t.id)}}),u().createElement(Bo.Z,{buttons:r,btnDefaultProps:{}})})),vd(bd(e),"renderGroupHeader",(function(t){return u().createElement("div",{className:"logicHeader filter-logic-header"},u().createElement("div",{key:"filter-logic-header",className:"filter-logic-header-text m-label"},u().createElement("span",{className:"group_label_a"},u().createElement(cd.Message,{msgId:"queryform.attributefilter.group_label_a"}))," ",u().createElement(Hf,{options:e.props.logicComboOptions,valueField:"logic",value:t.logic,onSelect:function(r){return e.props.actions.onUpdateLogicCombo(t.id,r)},labelRenderer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return u().createElement(cd.Message,{msgId:t})}})," ",u().createElement("span",{className:"group_label_b"},u().createElement(cd.Message,{msgId:"queryform.attributefilter.group_label_b"}))),e.renderGroupButtons(t))})),vd(bd(e),"renderGroupField",(function(t){var r=e.props.filterFields.filter((function(e){return e.groupId===t.id})),n=e.props.groupFields.filter((function(e){return e.groupId===t.id})),o=[].concat(ud(r),ud(n)).map((function(t){return void 0!==t.rowId?e.renderFilterField(t):e.renderGroupField(t)}));return u().createElement("div",{className:"mapstore-conditions-group",key:t.id},e.renderGroupHeader(t),u().createElement("div",{className:"query-content"},o))})),vd(bd(e),"renderHeader",(function(){return(0,le.S$)(e.context.messages,"queryform.attributefilter.attribute_filter_header")})),vd(bd(e),"updateLogicCombo",(function(t,r,n){var o=e.props.logicComboOptions.filter((function(t){return n===(0,le.S$)(e.context.messages,t.name)}))[0].logic;e.props.actions.onUpdateLogicCombo(t,o)})),e}return t=a,(r=[{key:"render",value:function(){var e=this;return this.props.withContainer?u().createElement(Lf.Z,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):u().createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&dd(t.prototype,r),a}(u().Component);vd(hd,"propTypes",{groupLevels:f().number,withContainer:f().bool,autocompleteEnabled:f().bool,maxFeaturesWPS:f().number,groupFields:f().array,filterFields:f().array,attributes:f().array,fieldWidth:f().string,removeButtonIcon:f().string,addButtonIcon:f().string,logicComboOptions:f().array,attributePanelExpanded:f().bool,actions:f().object,listOperators:f().array,stringOperators:f().array,booleanOperators:f().array,defaultOperators:f().array}),vd(hd,"contextTypes",{messages:f().object}),vd(hd,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}},listOperators:["="],stringOperators:["=","like","ilike","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>","><"]});const Od=hd;function wd(e){return function(e){if(Array.isArray(e))return Ed(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ed(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ed(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sd(Object(r),!0).forEach((function(t){jd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Cd=(0,Kr.Z)(qe.Z),xd=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Pd(Pd({},t),{},(jd(e={},r.fieldName,r.fieldValue),jd(e,"type",r.fieldType),jd(e,"fieldOptions",Pd(Pd({},t.fieldOptions),{},{currentPage:void 0===r.fieldOptions.currentPage?1:r.fieldOptions.currentPage})),e));return"attribute"===r.fieldName?Pd(Pd({},n),{},{value:"string"===r.fieldType?"":null,operator:""}):"operator"===r.fieldName?Pd(Pd({},n),{},{value:null}):n},Td=function(e){var t=e.filterObj,r=void 0===t?{groupFields:[{id:1,logic:"OR",index:0}]}:t,n=e.attributes,o=void 0===n?[]:n,i=e.groupLevels,a=void 0===i?0:i,l=e.onChange,c=void 0===l?function(){}:l,s=r.groupFields,p=r.filterFields;return u().createElement("div",{className:"ms-style-rule-filter"},u().createElement(Od,{attributes:o,filterFields:p,groupFields:s,autocompleteEnabled:!1,groupLevels:a,withContainer:!1,listOperators:["="],stringOperators:["=","<>","like","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>"],logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"}],actions:{onAddGroupField:function(e,t){var r={id:(new Date).getTime(),logic:"OR",groupId:e,index:t+1};c({filterFields:p,groupFields:s?[].concat(wd(s),[r]):[r]})},onAddFilterField:function(e){var t={rowId:(new Date).getTime(),groupId:e,attribute:null,operator:"",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};c({filterFields:p?[].concat(wd(p),[t]):[t],groupFields:s})},onRemoveFilterField:function(e){c({filterFields:p.filter((function(t){return t.rowId!==e})),groupFields:s})},onUpdateFilterField:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};c({filterFields:p.map((function(i){return i.rowId===e?xd(i,{rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}):i})),groupFields:s})},onUpdateExceptionField:function(e,t){c({filterFields:p.map((function(r){return r.rowId===e?Pd(Pd({},r),{},{exception:t}):r})),groupFields:s})},onUpdateLogicCombo:function(e,t){c({filterFields:p,groupFields:s.map((function(r){return r.id===e?Pd(Pd({},r),{},{logic:t}):r}))})},onRemoveGroupField:function(e){c({filterFields:p.filter((function(t){return t.groupId!==e})),groupFields:s.filter((function(t){return t.id!==e}))})},onChangeCascadingValue:function(){}}}))};function kd(e){var t=e.value,r=e.hide,n=e.attributes,o=e.onChange,i=e.placement,a=void 0===i?"right":i;return r||!n||0===n.length?null:u().createElement(Mu,{placement:a,content:u().createElement(Td,{filterObj:t,attributes:n,onChange:function(e){return o({filter:e})}})},u().createElement(Cd,{className:"square-button-md no-border",active:!!t,tooltipId:"styleeditor.openFilterBuilder"},u().createElement(h.Glyphicon,{glyph:"filter"})))}function Id(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ad(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Id(Object(r),!0).forEach((function(t){Fd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Id(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dd(e,t){if(e){if("string"==typeof e)return Rd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rd(e,t):void 0}}function Rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nd=(0,Hc.Z)(["placeholder","noResultsText"])(zo.ZP.Creatable),_d=(0,Kr.Z)(qe.Z);function Ld(e){var t=e.label,r=e.currentZoom;return u().createElement("span",null,t,r&&u().createElement(u().Fragment,null," ",u().createElement(h.Glyphicon,{glyph:"arrow-left"})))}function Md(e){var t=e.label,r=e.value,n=e.options,o=e.isValidNewOption,i=e.onChange;return u().createElement(Cu,{label:t},u().createElement(Nd,{placeholder:"styleeditor.selectScale",noResultsText:"styleeditor.noResultScales",value:r,options:n,optionRenderer:Ld,valueRenderer:Ld,isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!Ks()(t)&&o(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);i(Ks()(t)?void 0:t)}}))}function Zd(e){var t=e.value,r=e.zoom,n=e.scales,o=void 0===n?[]:n,i=e.onChange;function a(e,t){var r,n=e.map((function(e){return e.value}));return t&&-1===n.indexOf(t)?[{value:t}].concat((r=e,function(e){if(Array.isArray(e))return Rd(e)}(r)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||Dd(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e.value>t.value?-1:1})):e}var l,c,p=(l=(0,s.useState)(function(e){var r=e.map((function(e,t){return{value:e,zoom:t}})),n=[t.min,t.max].filter((function(e){return void 0!==e}));return 0===n.length?r:n.reduce(a,r)}(o)),c=2,function(e){if(Array.isArray(e))return e}(l)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(l,c)||Dd(l,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=p[0],d=p[1];return u().createElement("div",{className:"ms-style-rule-scale"},u().createElement(Md,{label:"styleeditor.maxScaleDenominator",value:t.max,options:f.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==r&&r===e.zoom,disabled:t.min&&e.value<=t.min}})),isValidNewOption:function(e){return e>=t.min},onChange:function(e){i(Ad(Ad({},t),{},{max:e})),d(a(f,e))}}),u().createElement(Md,{label:"styleeditor.minScaleDenominator",value:t.min,options:f.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==r&&r===e.zoom,disabled:t.max&&e.value>=t.max}})),isValidNewOption:function(e){return e<=t.max},onChange:function(e){i(Ad(Ad({},t),{},{min:e})),d(a(f,e))}}))}function Gd(e){var t=e.value,r=void 0===t?{}:t,n=e.scales,o=void 0===n?[]:n,i=e.zoom,a=e.hide,l=e.onChange,c=e.placement,s=void 0===c?"right":c;return a?null:u().createElement(Mu,{placement:s,content:u().createElement(Zd,{value:r,zoom:i,scales:o,onChange:function(e){return l({scaleDenominator:e})}})},u().createElement(_d,{className:"square-button-md no-border",tooltipId:"styleeditor.openScaleDenominator",active:void 0!==r.min||void 0!==r.max},u().createElement(h.Glyphicon,{glyph:"1-ruler"})))}function Bd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bd(Object(r),!0).forEach((function(t){Ud(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ud(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wd=function(e){var t=e.ruleBlock,r=e.symbolizerBlock;return"Raster"!==e.kind?[{value:"Simple",labelId:"styleeditor.simpleStyle",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[zd(zd({},e.deaultProperties),{},{symbolizerId:No()()})]}}},{value:"Classification",labelId:"styleeditor.classificationStyle",onSelect:function(e){var r=e.ruleId,n=e.symbolizerKind;return zd(zd(zd({},e.deaultProperties),t.Classification.deaultProperties),{},{ruleId:r,symbolizerKind:n})}},{value:"Mark",labelId:"styleeditor.patternMarkStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,n=e.deaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[zd(zd({},n),{},Ud({symbolizerId:No()(),fill:void 0},o,zd({},r.Mark.deaultProperties)))]}}},{value:"Icon",labelId:"styleeditor.patternIconStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,n=e.deaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[zd(zd({},n),{},Ud({symbolizerId:No()(),fill:void 0},o,zd({},r.Icon.deaultProperties)))]}}}]:[{value:"Gray",labelId:"styleeditor.singleBand",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[zd(zd({},r.Raster.deaultProperties),{},{symbolizerId:No()()})]}}},{value:"RGB",labelId:"styleeditor.rgbaBands",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[zd(zd({},r.Raster.deaultProperties),{},{channelSelection:{redChannel:{sourceChannelName:void 0,contrastEnhancement:{}},greenChannel:{sourceChannelName:void 0,contrastEnhancement:{}},blueChannel:{sourceChannelName:void 0,contrastEnhancement:{}}},symbolizerId:No()()})]}}},{value:"PseudoColor",labelId:"styleeditor.pseudoColor",onSelect:function(e){var r=e.ruleId;return zd(zd({},t.Raster.deaultProperties),{},{ruleId:r})}}]},Vd=function(e){var t=e.ruleKind,r=e.graphic,n=e.symbolizerKind,o=e.channelSelection;return"Raster"===t?"PseudoColor":"Raster"===n?null!=o&&o.redChannel?"RGB":"Gray":void 0!==t?t:null!=r&&r.kind?null==r?void 0:r.kind:"Simple"};function qd(e){var t,r,n=e.ruleKind,o=e.symbolizerKind,i=e.ruleId,a=e.graphic,l=e.channelSelection,c=e.hide,s=e.ruleBlock,p=e.symbolizerBlock,f=e.getSelected,d=void 0===f?Vd:f,y=e.getOptions,m=void 0===y?Wd:y,b=e.onSelect,g=m({ruleBlock:s,symbolizerBlock:p,kind:o}),O=o?p[o]:{},w=O.deaultProperties,E=O.params,S=void 0===E?{}:E,P=null==S||null===(t=S.color)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.graphicKey,j=d({ruleKind:n,symbolizerKind:o,graphic:a,channelSelection:l});return c?null:u().createElement(h.DropdownButton,{className:"square-button-md no-border",noCaret:!0,pullRight:!0,title:u().createElement(h.Glyphicon,{glyph:"option-vertical"})},g.map((function(e){return!e.isVisible||e.isVisible({graphicKey:P})?u().createElement(h.MenuItem,{key:e.value,active:j===e.value,onClick:function(){return function(e,t){return e===j?null:b(t)}(e.value,e.onSelect({ruleId:i,ruleKind:n,symbolizerKind:o,deaultProperties:w,graphicKey:P}))}},u().createElement(v.Z,{msgId:e.labelId})):null})))}const Hd=function(e){var t=e.className,r=e.glyph,n=e.tools,o=e.children,i=t?" "+t:"";return u().createElement("li",{className:"ms-symbolizer".concat(i)},u().createElement("div",{className:"ms-symbolizer-info"},r&&u().createElement(h.Glyphicon,{glyph:r}),u().createElement("div",{className:"ms-symbolizer-tools"},n)),o)};function $d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$d(Object(r),!0).forEach((function(t){Kd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xd(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Qd=function(e){var t=e.ruleId,r=e.glyph,n=e.params,o=e.kind,i=e.symbolizerKind,a=e.classificationType,l=void 0===a?"classificationVector":a,c=e.attributes,p=void 0===c?[]:c,f=e.onUpdate,d=e.onReplace,y=e.methods,m=e.getColors,b=void 0===m?function(){}:m,g=e.ruleBlock,v=void 0===g?{}:g,h=e.symbolizerBlock,O=void 0===h?{}:h,w=e.bands,E=Xd(e,["ruleId","glyph","params","kind","symbolizerKind","classificationType","attributes","onUpdate","onReplace","methods","getColors","ruleBlock","symbolizerBlock","bands"]),S=E.ramp,P=E.method,j=E.classification,C=E.attribute,x=E.intervals,T=E.reverse,k=E.continuous,I=(0,s.useRef)();I.current={ruleId:t,intervals:x,method:P,attribute:C,reverse:T,ramp:S,continuous:k,classification:j};var A=n.reduce((function(e,t){return Iu()(t)?Yd(Yd({},e),t(i)):Yd(Yd({},e),t)}),{}),F=(O[i]||{}).glyph;return u().createElement(Hd,{key:"Classification",glyph:F||r,tools:u().createElement(qd,{ruleKind:o,symbolizerKind:i,ruleId:t,onSelect:d,ruleBlock:v,symbolizerBlock:O})},u().createElement(bp,{properties:E,config:{attributes:p,methods:y,getColors:function(){var e="custom"===S&&j.length>0&&{name:"custom",colors:j.map((function(e){return e.color}))},t=b(void 0,void 0,5,e);return t?t.map((function(e){var t=e.name,r=Xd(e,["name"]);return Yd({label:t?"global.colors.".concat(t):void 0,name:t},r)})):[]},bands:w,method:P},params:A,onChange:function(e){return f(Yd(Yd({},I.current),{},{type:l,values:e}))}}))};var Jd=r(31476),ey=r.n(Jd),ty=r(17621),ry=r.n(ty);function ny(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ny(Object(r),!0).forEach((function(t){iy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ny(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function iy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ay=function(e){var t=e.key,r=void 0===t?"color":t,n=e.opacityKey,o=void 0===n?"opacity":n,i=e.graphicKey,a=e.label,l=void 0===a?"Fill":a,c=e.stroke,s=e.pattern,u=e.disableAlpha,p=e.getGroupParams,f=e.getGroupConfig;return{type:"color",label:l,config:{stroke:c,pattern:s,disableAlpha:u,getGroupParams:p,getGroupConfig:f,graphicKey:i},setValue:function(e,t){var r;if(s&&null!==(r=t[i])&&void 0!==r&&r.kind)return t[i];var n=$s()(t[o])?1:t[o];return ry()(e).setAlpha(n).toRgb()},getValue:function(e){var t,n;if(s&&vs()(e)&&e.kind)return iy(n={},i,e),iy(n,r,void 0),iy(n,o,void 0),n;var a=e||{},l=a.a,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(a,["a"]);return oy((iy(t={},r,ry()(oy(oy({},c),{},{a:1})).toHexString()),iy(t,o,l),t),s&&iy({},i,void 0))}}},ly=function(e){var t=e.key,r=void 0===t?"width":t,n=e.label,o=void 0===n?"Width":n,i=e.dasharrayKey,a=void 0===i?"dasharray":i;return{type:"slider",label:o,config:{range:{min:0,max:20},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e[0]&&e[0].split(" px")[0],o=parseFloat(n),i=t[a],l=t[r];return oy(iy({},r,o),i&&iy({},a,o?i.map((function(e){return Math.round(e/l*o)})):void 0))}}},cy=function(e){var t=e.key,r=void 0===t?"dasharray":t,n=e.label;return{type:"dash",label:void 0===n?"Dash array":n,config:{options:[{value:"0"},{value:"1 4"},{value:"1 12"},{value:"8 8"},{value:"8 16"},{value:"8 8 1 8"},{value:"8 8 1 4 1 8"}]},setValue:function(e,t){var r=void 0===t.width?1:t.width;return void 0!==e?e.map((function(e){return Math.round(e/r)})):[0]},getValue:function(e,t){if(ey()(e,["0"]))return iy({},r,void 0);var n=void 0===t.width?1:t.width,o=!(e||[]).find((function(e){return Ks()(parseFloat(e))}));return iy({},r,void 0!==e&&o?e.map((function(e){return parseFloat(e)*n})):void 0)}}},sy=function(e){var t=e.key,r=void 0===t?"cap":t,n=e.label;return{type:"toolbar",label:void 0===n?"Line cap":n,config:{options:[{labelId:"styleeditor.lineCapButt",value:"butt"},{labelId:"styleeditor.lineCapRound",value:"round"},{labelId:"styleeditor.lineCapSquare",value:"square"}]},getValue:function(e){return iy({},r,e)}}},uy=function(e){var t=e.key,r=void 0===t?"join":t,n=e.label;return{type:"toolbar",label:void 0===n?"Line join":n,config:{options:[{labelId:"styleeditor.lineJoinBevel",value:"bevel"},{labelId:"styleeditor.lineJoinRound",value:"round"},{labelId:"styleeditor.lineJoinMiter",value:"miter"}]},getValue:function(e){return iy({},r,e)}}},py=function(e){var t=e.key,r=void 0===t?"radius":t,n=e.label;return{type:"slider",label:void 0===n?"Radius":n,config:{range:{min:1,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return iy({},r,parseFloat(t))}}},fy=function(e){var t=e.key,r=void 0===t?"opacity":t,n=e.label;return{type:"slider",label:void 0===n?"Opacity":n,config:{range:{min:0,max:1}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return iy({},r,parseFloat(t))}}},dy=function(e){var t=e.key,r=void 0===t?"offset":t,n=e.label,o=void 0===n?"":n,i=e.axis,a=void 0===i?"":i;return{key:r,type:"slider",label:o,config:{range:{min:-100,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="y"===a?parseFloat(e[1]):parseFloat(e[0]);return Ks()(t)?0:t},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e[0]&&e[0].split(" px")[0],o=t[r]||[0,0];return iy({},r,"y"===a?[o[0],parseFloat(n)]:[parseFloat(n),o[1]])}}},yy=function(e){var t=e.key,r=void 0===t?"rotate":t,n=e.label;return{type:"slider",label:void 0===n?"Rotation (deg)":n,config:{range:{min:0,max:360},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+"°"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split("°")[0];return iy({},r,parseFloat(t))}}},my=function(e){var t=e.label,r=e.key,n=void 0===r?"wellKnownName":r;return{type:"mark",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return iy({},n,e)}}},by=function(e){var t=e.label,r=e.key,n=void 0===r?"image":r;return{type:"image",label:t,config:{},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return iy({},n,e)}}},gy=function(e){var t=e.label,r=e.key,n=void 0===r?"fontStyle":r;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontStyleNormal",value:"normal"},{labelId:"styleeditor.fontStyleItalic",value:"italic"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return iy({},n,e)}}},vy=function(e){var t=e.label,r=e.key,n=void 0===r?"fontWeight":r;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontWeightNormal",value:"normal"},{labelId:"styleeditor.fontWeightBold",value:"bold"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return iy({},n,e)}}},hy=function(e){var t=e.key,r=void 0===t?"label":t;return{type:"toolbar",label:e.label,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},isDisabled:e.isDisabled,getValue:function(e){return iy({},r,e)}}},Oy=function(e){var t=e.key,r=void 0===t?"intervals":t,n=e.label,o=e.isDisabled;return{type:"slider",label:n,config:{range:{min:2,max:25},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)}}},isDisabled:void 0===o?function(e,t){return"customInterval"===(null==t?void 0:t.method)}:o,setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return iy({},r,parseFloat(e[0]))}}},wy=function(e){var t=e.label,r=e.key,n=void 0===r?"":r,o=e.getOptions;return{type:"select",label:t,config:{getOptions:void 0===o?function(){return[]}:o,selectProps:e.selectProps,isValid:e.isValid},getValue:function(e){return iy({},n,e)}}},Ey=function(e){var t=e.label,r=e.key,n=void 0===r?"":r,o=e.getOptions;return{type:"colorRamp",label:t,config:{getOptions:void 0===o?function(){return[]}:o},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return iy({},n,e)}}},Sy=function(e){var t=e.label,r=e.key,n=void 0===r?"":r;return{type:"colorMap",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.classification,o=e.type,i="interval"===o||"customInterval"===t.method,a="color"===o||"custom"===t.ramp;return oy(oy(iy({},n,r),i&&{method:"customInterval"}),a&&{ramp:"custom"})}}},Py=function(e){return{type:"channel",label:e.label,setValue:function(e,t){return{channelSelection:t.channelSelection,contrastEnhancement:t.contrastEnhancement}},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{channelSelection:e.channelSelection,contrastEnhancement:e.contrastEnhancement}}}};function jy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jy(Object(r),!0).forEach((function(t){xy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ty(e){return function(e){if(Array.isArray(e))return ky(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ky(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ky(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ky(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Iy=function(){var e={Mark:{kind:"Mark",glyph:"1-point",glyphAdd:"1-point-add",tooltipAddId:"styleeditor.addMarkRule",supportedTypes:["point","linestring","polygon","vector"],params:{wellKnownName:my({label:"styleeditor.shape"}),color:ay({key:"color",opacityKey:"fillOpacity",label:"styleeditor.fill"}),strokeColor:ay({key:"strokeColor",opacityKey:"strokeOpacity",label:"styleeditor.strokeColor",stroke:!0}),strokeWidth:ly({key:"strokeWidth",label:"styleeditor.strokeWidth"}),radius:py({key:"radius",label:"styleeditor.radius"}),rotate:yy({label:"styleeditor.rotation"})},deaultProperties:{kind:"Mark",wellKnownName:"Circle",color:"#dddddd",fillOpacity:1,strokeColor:"#777777",strokeOpacity:1,strokeWidth:1,radius:16,rotate:0}},Icon:{kind:"Icon",glyph:"point",glyphAdd:"point-plus",tooltipAddId:"styleeditor.addIconRule",supportedTypes:["point","linestring","polygon","vector"],params:{image:by({label:"styleeditor.image",key:"image"}),opacity:fy({label:"styleeditor.opacity"}),size:py({key:"size",label:"styleeditor.size"}),rotate:yy({label:"styleeditor.rotation"})},deaultProperties:{kind:"Icon",image:"",opacity:1,size:32,rotate:0}},Line:{kind:"Line",glyph:"line",glyphAdd:"line-plus",tooltipAddId:"styleeditor.addLineRule",supportedTypes:["linestring","polygon","vector"],params:{color:ay({label:"styleeditor.strokeColor",stroke:!0,pattern:!0,getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{disableAlpha:!0}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}},graphicKey:"graphicStroke"}),width:ly({label:"styleeditor.strokeWidth",key:"width"}),dasharray:cy({label:"styleeditor.lineStyle",key:"dasharray"}),cap:sy({label:"styleeditor.lineCap",key:"cap"}),join:uy({label:"styleeditor.lineJoin",key:"join"})},deaultProperties:{kind:"Line",color:"#777777",width:1,opacity:1,cap:"round",join:"round"}},Fill:{kind:"Fill",glyph:"polygon",glyphAdd:"polygon-plus",tooltipAddId:"styleeditor.addFillRule",supportedTypes:["polygon","vector"],params:{color:ay({label:"styleeditor.fill",key:"color",opacityKey:"fillOpacity",pattern:!0,graphicKey:"graphicFill",getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}}}),outlineColor:ay({key:"outlineColor",opacityKey:"outlineOpacity",label:"styleeditor.outlineColor",stroke:!0}),outlineWidth:ly({key:"outlineWidth",label:"styleeditor.outlineWidth"})},deaultProperties:{kind:"Fill",color:"#dddddd",fillOpacity:1,outlineColor:"#777777",outlineWidth:1}},Text:{kind:"Text",glyph:"font",tooltipAddId:"styleeditor.addTextRule",supportedTypes:["point","linestring","polygon","vector"],params:{label:wy({key:"label",label:"styleeditor.label",selectProps:{creatable:!0},getOptions:function(e){var t=e.attributes;return(null==t?void 0:t.map((function(e){return{value:"{{"+e.attribute+"}}",label:e.attribute}})))||[]}}),font:wy({key:"font",label:"styleeditor.fontFamily",selectProps:{multi:!0},getOptions:function(e){var t=e.fonts;return(null==t?void 0:t.map((function(e){return{value:e,label:e}})))||[]}}),color:ay({label:"styleeditor.fontColor",key:"color",disableAlpha:!0}),size:py({label:"styleeditor.fontSize",key:"size"}),fontStyle:gy({label:"styleeditor.fontStyle",key:"fontStyle"}),fontWeight:vy({label:"styleeditor.fontWeight",key:"fontWeight"}),haloColor:ay({label:"styleeditor.haloColor",key:"haloColor",stroke:!0,disableAlpha:!0}),haloWidth:ly({label:"styleeditor.haloWidth",key:"haloWidth"}),rotate:yy({label:"styleeditor.rotation"}),offsetX:dy({label:"styleeditor.offsetX",axis:"x"}),offsetY:dy({label:"styleeditor.offsetY",axis:"y"})},deaultProperties:{kind:"Text",label:"Label",color:"#333333",size:14,fontStyle:"normal",fontWeight:"normal",haloColor:"#ffffff",haloWidth:1,allowOverlap:!0,offset:[0,0]}},Raster:{kind:"Raster",glyph:"1-raster",tooltipAddId:"styleeditor.addRasterRule",supportedTypes:["raster"],params:{channel:Py({}),opacity:fy({label:"styleeditor.opacity"})},deaultProperties:{kind:"Raster",opacity:1,contrastEnhancement:{}}}},t={Classification:{kind:"Classification",glyph:"list",classificationType:"classificationVector",hideInputLabel:!0,hideFilter:!0,params:[{ramp:Ey({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:hy({key:"reverse",label:"styleeditor.reverse",isDisabled:function(e,t){return"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}}),attribute:wy({key:"attribute",label:"styleeditor.attribute",isValid:function(e){return void 0!==e.value},getOptions:function(e){var t=e.attributes;return null==t?void 0:t.map((function(e){return{value:e.attribute,label:e.attribute,disabled:e.disabled}}))}}),method:wy({key:"method",label:"styleeditor.method",getOptions:function(e){var t=e.methods,r=e.method,n=(null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}})))||[];return[].concat(Ty("customInterval"===r?[{labelId:"styleeditor."+r,value:r}]:[]),Ty(n))}}),intervals:Oy({label:"styleeditor.intervals"})},function(t){var r,n,o,i;if(!t)return{};switch(t){case"Mark":return Cy({fillOpacity:fy({key:"fillOpacity",label:"styleeditor.opacity"})},qs()(null===(r=e[t])||void 0===r?void 0:r.params,["color"]));case"Line":return Cy({opacity:fy({key:"opacity",label:"styleeditor.opacity"})},qs()(null===(n=e[t])||void 0===n?void 0:n.params,["color"]));case"Fill":return Cy({fillOpacity:fy({key:"fillOpacity",label:"styleeditor.opacity"})},qs()(null===(o=e[t])||void 0===o?void 0:o.params,["color"]));default:return null===(i=e[t])||void 0===i?void 0:i.params}},{classification:Sy({key:"classification",rampKey:"ramp"})}],deaultProperties:{kind:"Classification",classification:[],intervals:5,method:"equalInterval",ramp:"orrd",reverse:!1}},Raster:{kind:"Raster",glyph:"1-raster",classificationType:"classificationRaster",hideInputLabel:!1,hideFilter:!0,params:[{channel:Py({}),opacity:fy({label:"styleeditor.opacity"}),ramp:Ey({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:hy({key:"reverse",label:"styleeditor.reverse"}),continuous:hy({key:"continuous",label:"styleeditor.continuous"}),method:wy({key:"method",label:"styleeditor.method",getOptions:function(e){var t=e.methods;return null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}}))}}),intervals:Oy({label:"styleeditor.intervals"})}],deaultProperties:{kind:"Raster",opacity:1,classification:[],intervals:5,method:"equalInterval",reverse:!1,continuous:!0,symbolizerKind:"Raster"}}};return{symbolizerBlock:e,ruleBlock:t}};var Ay=r(90937);function Fy(e){var t=e.title,r=e.tools,n=e.errorId,o=e.draggable,i=e.connectDragSource,a=e.connectDropTarget,l=e.isDragging,c=e.children,p=(0,s.useRef)(null);o&&(i(p.current),a(p.current));var f=l?" ms-drop-target":"";return u().createElement("li",{ref:p,className:"ms-style-rule".concat(f)},u().createElement("div",{className:"ms-style-rule-head"},o&&u().createElement("div",{className:"ms-style-rule-grab-handle"},u().createElement(h.Glyphicon,{glyph:"grab-handle"})),u().createElement("div",{className:"ms-style-rule-head-info"},t),u().createElement("div",{className:"ms-style-rule-head-tools"},r)),n&&u().createElement(h.Alert,{bsStyle:"danger"},u().createElement(v.Z,{msgId:n})),u().createElement("ul",{className:"ms-style-rule-body"},c))}Fy.propTypes={title:f().oneOfType([f().node,f().string]),tools:f().node,errorId:f().string,draggable:f().bool,connectDragSource:f().func,connectDropTarget:f().func,isDragging:f().bool},Fy.defaultProps={connectDragSource:function(e){return e},connectDropTarget:function(e){return e}};var Dy="RULE";const Ry=(0,Ay.GR)(Dy,{hover:function(e,t,r){!function(e,t,r){if(!r)return null;var n=(0,xu.findDOMNode)(r);if(!n)return null;var o=t.getItem().index,i=e.index;if(o===i)return null;var a=n.getBoundingClientRect(),l=a.bottom,c=a.top,s=(l-c)/2,u=t.getClientOffset().y-c;o<i&&u<s||o>i&&u>s||(e.onSort(o,i),t.getItem().index=i)}(e,t,r)}},(function(e){return{connectDropTarget:e.dropTarget()}}))((0,Ay.Ej)(Dy,{beginDrag:function(e){return{id:e.id,index:e.index}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Fy));function Ny(){return(Ny=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Ly(e){return function(e){if(Array.isArray(e))return My(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return My(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?My(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function My(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zy(Object(r),!0).forEach((function(t){By(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function By(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zy=(0,Kr.Z)(qe.Z),Uy=(0,Hc.Z)("placeholder")(h.FormControl);function Wy(){return u().createElement("div",{style:{position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}},u().createElement("div",null,u().createElement(h.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),u().createElement("h1",null,u().createElement(v.Z,{msgId:"styleeditor.emptyRuleEditorTitle"})),u().createElement("p",null,u().createElement(v.Z,{msgId:"styleeditor.emptyRuleEditor"}))))}var Vy=(0,s.forwardRef)((function(e,t){var r=e.rules,n=void 0===r?[]:r,o=e.loading,i=e.toolbar,a=e.config,l=void 0===a?{}:a,c=e.ruleBlock,p=void 0===c?{}:c,f=e.symbolizerBlock,d=void 0===f?{}:f,y=e.onUpdate,m=void 0===y?function(){}:y,b=e.onChange,g=void 0===b?function(){}:b,O=l.geometryType,w=l.attributes,E=l.bands,S=l.scales,P=l.zoom,j=l.fonts,C=l.methods,x=l.getColors,T=(0,s.useRef)();function k(e,t){var r=e.values,n=e.ruleId,o=e.symbolizerId;if(t){var i=T.current.rules.map((function(e){return e.ruleId===n?Gy(Gy({},e),r):e}));return g(i)}var a=T.current.rules.map((function(e){return e.symbolizers?Gy(Gy({},e),{},{symbolizers:e.symbolizers.map((function(t){return t.symbolizerId===o&&e.ruleId===n?Gy(Gy({},t),r):t}))}):e}));return g(a)}function I(e){var t=[e].concat(Ly(T.current.rules));g(t)}function A(e){var t=e.ruleId,r=_y(e,["ruleId"]),n=T.current.rules.map((function(e){return e.ruleId===t?Gy({ruleId:t},r):e}));return g(n)}function F(e,t){var r=zs()(T.current.rules,(function(t,r){return r===e})),n=T.current.rules.reduce((function(n,o,i){return i===e?n:[].concat(Ly(n),i===t?e>t?[r,o]:[o,r]:[o])}),[]);return g(n)}function D(e,t){var r=e.symbolizers,n=void 0===r?[]:r;return!!zs()(n,(function(e){return"Text"===e.kind}))&&t>0}return T.current={rules:n},u().createElement("div",{ref:t,className:"ms-style-rules-editor"},u().createElement("div",{className:"ms-style-rules-editor-head"},u().createElement("div",{className:"ms-style-rules-editor-left"},i),u().createElement("div",{className:"ms-style-rules-editor-right"},u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[].concat(Ly(Object.keys(d).map((function(e){var t=d[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(O),tooltipId:t.tooltipAddId,onClick:function(){return I({name:"",ruleId:No()(),symbolizers:[Gy(Gy({},d[e].deaultProperties),{},{symbolizerId:No()()})]})}}}))),Ly(Object.keys(p).filter((function(e){return p[e].add})).map((function(e){var t=p[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(O),tooltipId:t.tooltipAddId,onClick:function(){return I(Gy({name:"",ruleId:No()()},p[e].deaultProperties))}}}))))}))),u().createElement("ul",{className:"ms-style-rules-editor-body"},0===n.length&&u().createElement(Wy,null),n.map((function(e,t){var r=e.name,o=e.symbolizers,i=void 0===o?[]:o,a=e.filter,l=e.scaleDenominator,c=void 0===l?{}:l,s=e.ruleId,f=e.kind,y=e.errorId,b=p[f]||{},O=b.params,I=b.glyph,R=b.hideInputLabel,N=b.hideFilter,_=b.hideScaleDenominator,L=b.classificationType;return u().createElement(Ry,{key:s+(n.length>1?"_draggable":""),draggable:n.length>1,id:s,index:t,errorId:y,onSort:F,title:R?u().createElement(v.Z,{msgId:"styleeditor.rule".concat(f)}):u().createElement(h.FormGroup,{onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},u().createElement(Uy,{value:r,placeholder:"styleeditor.enterLegendLabelPlaceholder",onChange:function(e){return k({values:{name:e.target.value},ruleId:s},!0)}})),tools:u().createElement(u().Fragment,null,D(e,t)&&u().createElement(Ps.Z,{glyph:"exclamation-mark",bsStyle:"warning",placement:"right",title:u().createElement(v.Z,{msgId:"styleeditor.warningTextOrderTitle"}),text:u().createElement(v.Z,{msgId:"styleeditor.warningTextOrder"})}),u().createElement(kd,{hide:N,value:a,attributes:w,onChange:function(e){return k({values:e,ruleId:s},!0)}}),u().createElement(Gd,{hide:_,value:c,scales:S,zoom:P,onChange:function(e){return k({values:e,ruleId:s},!0)}}),u().createElement(zy,{className:"square-button-md no-border",tooltipId:"styleeditor.removeRule",onClick:function(){return function(e){var t=T.current.rules.filter((function(t){return t.ruleId!==e}));g(t)}(s)}},u().createElement(h.Glyphicon,{glyph:"trash"})))},"Classification"===f||"Raster"===f?u().createElement(Qd,Ny({},e,{ruleBlock:p,symbolizerBlock:d,glyph:I,classificationType:L,params:O,methods:C,getColors:x,bands:E,attributes:w&&w.map((function(e){return Gy(Gy({},e),{},{disabled:"number"!==e.type})})),onUpdate:m,onChange:function(e){return k({values:e,ruleId:s},!0)},onReplace:A})):i.map((function(e){var t=e.kind,r=void 0===t?"":t,n=e.symbolizerId,o=_y(e,["kind","symbolizerId"]),i=d[r]||{},a=i.params,l=i.glyph;return a&&u().createElement(Hd,{key:n,defaultExpanded:!0,draggable:!0,glyph:l,tools:u().createElement(qd,{hide:"Icon"===r,symbolizerKind:r,ruleBlock:p,symbolizerBlock:d,ruleId:s,onSelect:A,graphic:o.graphicFill||o.graphicStroke,channelSelection:o.channelSelection})},u().createElement(bp,{properties:o,params:a,config:{bands:E,attributes:w,fonts:j},onChange:function(e){return k({values:e,ruleId:s,symbolizerId:n})}}))})))})),o&&u().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.4)",zIndex:10,transition:"0.3s all"}})))})),qy=Iy(),Hy=qy.symbolizerBlock,$y=qy.ruleBlock;Vy.propTypes={rules:f().array,loading:f().bool,toolbar:f().node,config:f().object,ruleBlock:f().object,symbolizerBlock:f().object,onUpdate:f().func,onChange:f().func},Vy.defaultProps={rules:[],config:{},ruleBlock:$y,symbolizerBlock:Hy,onUpdate:function(){},onChange:function(){}};const Yy=Vy;function Ky(e){return function(e){if(Array.isArray(e))return Jy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Qy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||Qy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qy(e,t){if(e){if("string"==typeof e)return Jy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jy(e,t):void 0}}function Jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function em(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?em(Object(r),!0).forEach((function(t){rm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):em(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nm="UPDATE_STYLE",om="UNDO_STYLE",im="REDO_STYLE",am=rm({},nm,(function(e,t){return tm({},t)})),lm=(0,Qn.ZP)((function(e,t){return(am[t.type]||Ws())(e,t.payload)}),{limit:20,undoType:om,redoType:im,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),cm={};function sm(e){var t,r,n=e.code,o=e.format,i=e.layer,a=e.zoom,l=e.scales,c=e.geometryType,p=e.fonts,f=e.bands,d=e.attributes,y=e.onChange,m=e.onError,b=e.defaultStyleJSON,g=(e.config,e.loading),h=e.error,O=e.methods,w=e.getColors,E=e.styleUpdateTypes,S=e.debounceTime,P=Iy(),j=P.symbolizerBlock,C=P.ruleBlock,x=Xy((0,s.useState)(!1),2),T=x[0],k=x[1],I=Xy((0,s.useReducer)(lm,{}),2),A=I[0],F=I[1],D=(null==A?void 0:A.present)||cm,R=(0,s.useRef)();R.current={style:D};var N=(0,s.useRef)(!1);(0,s.useEffect)((function(){var e;N.current||((e=(0,Gl.getStyleParser)(o))&&n&&null===b?e.readStyle(n).then((function(e){F({type:nm,payload:(0,ys.VM)(e)}),N.current=!0})).catch((function(e){return m(tm(tm({},e),{},{status:400}))})):e&&n&&b?(N.current=!0,F({type:nm,payload:b})):n&&!e&&m({messageId:"styleeditor.formatNotSupported",status:400}))}),[n,o,b]);var _=function(e){if(k(!1),!e)return null;var t=tm(tm({},R.current.style),{},{rules:e});return F({type:nm,payload:t})},L=(0,s.useRef)();(0,s.useEffect)((function(){return L.current=Gs()((function(e){var t,r=function(e){if(!e||0===e.length)return{messageId:"styleeditor.styleEmpty",status:400};var t=zs()(e.map((function(e){return e.errorId})),(function(e){return e}));if(t)return{messageId:t,status:400};if(zs()(e,(function(e){var t=e.kind,r=e.classification;return!("Classification"!==t&&"Raster"!==t||r&&0!==r.length)})))return{messageId:"styleeditor.incompleteClassification",status:400};var r,n,o,i=zs()(e,(function(e){var t=e.symbolizers,r=void 0===t?[]:t;return zs()(r,(function(e){var t=e.kind,r=e.image;return"Icon"===t&&(null==r?void 0:r.errorId)}))}));return i?{messageId:"styleeditor.".concat(null==i||null===(r=i.symbolizers)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.image)||void 0===o?void 0:o.errorId),status:400}:null}(null==e||null===(t=e.style)||void 0===t?void 0:t.rules);if(r)return m(r);var n=(0,Gl.getStyleParser)(e.format);return n?n.writeStyle((0,ys.Gg)(e.style)).then((function(t){y(t,e.style)})).catch((function(e){m(tm(tm({},e),{},{status:400}))})):null}),S),function(){L.current.cancel()}}),[]),(0,s.useEffect)((function(){L.current.cancel(),L.current({format:o,style:D})}),[JSON.stringify(D)]);var M=h&&(h.message||h.messageId&&u().createElement(v.Z,{msgId:h.messageId}));return u().createElement(Yy,{loading:T,toolbar:u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"undo",tooltipId:"styleeditor.undoStyle",disabled:0===(null==A||null===(t=A.past)||void 0===t?void 0:t.length),onClick:function(){return F({type:om})}},{disabled:0===(null==A||null===(r=A.future)||void 0===r?void 0:r.length),tooltipId:"styleeditor.redoStyle",glyph:"redo",onClick:function(){return F({type:im})}},{visible:!!h,Element:function(){return u().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},u().createElement(Ps.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:u().createElement(v.Z,{msgId:"styleeditor.validationErrorTitle"}),text:u().createElement(u().Fragment,null,u().createElement("p",null,u().createElement(v.Z,{msgId:"styleeditor.genericValidationError"})),M?u().createElement("p",null,u().createElement(v.Z,{msgId:"styleeditor.validationError"}),": ",M):u().createElement("p",null,u().createElement(v.Z,{msgId:"styleeditor.incorrectPropertyInputError"})))}))}},{visible:!(!g&&!T),Element:function(){return u().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},u().createElement(Vc.Z,{size:18}))}}]}),ruleBlock:C,symbolizerBlock:j,config:{geometryType:c,zoom:a,fonts:p,scales:l,bands:f,attributes:d,methods:O,getColors:w},rules:(null==D?void 0:D.rules)&&Ky(D.rules).reverse(),onChange:function(e){return _(Ky(e).reverse())},onUpdate:function(e){var t=e.values,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["values"]);k(!0),function(e){var t=e.values,r=e.properties,n=e.rules,o=e.layer,i=e.styleUpdateTypes,a=void 0===i?{}:i;return new Promise((function(e){var i=r.type&&a[r.type];return e(i?i({values:t,properties:r,rules:n,layer:o}):n.map((function(e){return e.ruleId===r.ruleId?tm(tm(tm({},e),t),{},{errorId:void 0}):e})))}))}({values:t,properties:r,layer:i,rules:R.current.style.rules,styleUpdateTypes:E}).then((function(e){return _(e)})).catch((function(){return _()}))}})}sm.propTypes={code:f().string,format:f().string,layer:f().object,zoom:f().number,scales:f().array,geometryType:f().string,fonts:f().array,bands:f().array,attributes:f().array,onChange:f().func,onError:f().func,defaultStyleJSON:f().object,config:f().object,loading:f().bool,error:f().object,methods:f().array,getColors:f().func,styleUpdateTypes:f().object,debounceTime:f().number},sm.defaultProps={onChange:function(){},onError:function(){},config:{},getColors:function(){},styleUpdateTypes:{},debounceTime:300,defaultStyleJSON:null};const um=sm;var pm=r(84715),fm=r(24198);const dm=[{type:"color",active:function(e){return"atom"===e.type&&ry()(e.string).isValid()},style:function(e){return{backgroundColor:e.string}},Widget:function(e){var t=e.token,r=e.value,n=e.onChange,o=void 0===n?function(){}:n;return u().createElement(fm.xS,{color:{hex:r||t.string},onChange:function(e){return o(e.hex)}})}}];function ym(){return(ym=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bm={classificationVector:Os.IW,classificationRaster:Os.DG,classification:Os.IW,"classification-raster":Os.DG};function gm(e,t){return e&&"raster"!==t&&Object.keys(e).filter((function(t){return-1!==["integer","long","double","float","bigdecimal","string","decimal"].indexOf(e[t].localPart.toLowerCase())})).map((function(t){var r=e[t].localPart;return{attribute:t,label:t,type:-1!==["integer","long","double","float","bigdecimal","decimal"].indexOf(r.toLowerCase())?"number":"string"}}))}var vm=(0,d.connect)((0,N.P1)([ds.gB,ds.iB,ds.m2,ds.p,ds.aN,ds.Vf,ds.lC,J.up,J.Od,ds.Z0],(function(e,t,r,n,o,i,a,l,c,s){var u,p;return{code:e,mode:(0,ys.H$)(t),bands:bs()(r)&&"raster"===a&&r||[],attributes:gm(r,a),error:n.edit||null,loading:o,format:t,layer:i,geometryType:a,scales:l.map((function(e){return Math.round(e)})),zoom:c.zoom,fonts:s.fonts||[],methods:("raster"===a?null==s||null===(u=s.classificationMethods)||void 0===u?void 0:u.raster:null==s||null===(p=s.classificationMethods)||void 0===p?void 0:p.vector)||hs.Z.methods}})),{onError:$i.Fe.bind(null,"edit")})(um);vm.defaultProps={getColors:hs.Z.getColors,styleUpdateTypes:bm};var hm={visual:vm,textarea:(0,d.connect)((0,N.P1)([ds.gB,ds.iB,ds.m2,ds.p,ds.aN],(function(e,t,r,n,o){return{code:e,mode:(0,ys.H$)(t),hintProperties:r,error:n.edit||null,loading:o}})))(Ms)};function Om(e){var t,r,n=e.code,o=e.error,i=e.canEdit,a=e.editorType,l=e.onUpdateMetadata,c=e.onChange,p=e.loading,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["code","error","canEdit","editorType","onUpdateMetadata","onChange","loading"]),d=(t=(0,s.useState)(),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return mm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mm(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=d[0],m=d[1],b={position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"};if(!n&&!o)return u().createElement("div",{style:b},u().createElement(Vc.Z,{size:150}));if(!i)return u().createElement("div",{style:b},u().createElement("div",null,u().createElement(h.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),u().createElement("h1",null,u().createElement(v.Z,{msgId:"styleeditor.noPermission"}))));if(404===(null==o?void 0:o.status))return u().createElement("div",{style:b},u().createElement("div",null,u().createElement(h.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),u().createElement("h1",null,u().createElement(v.Z,{msgId:"styleeditor.styleNotFound"}))));var g=hm[a]||hm.textarea;return u().createElement(Go.Z,{style:{position:"relative"},header:u().createElement("div",{className:"ms-style-editor-switch"},u().createElement(Bo.Z,{buttons:[{className:"square-button-md no-border",glyph:"code",active:"textarea"===a,disabled:p,tooltipId:"visual"===a?"styleeditor.switchToTextareaEditor":"styleeditor.switchToVisualEditor",onClick:function(){return p?null:"visual"===a?l({editorType:"textarea"}):m(!0)}}]}))},g&&u().createElement(g,ym({},f,{onChange:function(e,t){c(e),vs()(t)&&l({styleJSON:JSON.stringify(t)})}})),y&&u().createElement("div",{className:"ms-style-editor-alert",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",padding:16,backgroundColor:"rgba(0, 0, 0, 0.6)"}},u().createElement(h.Alert,{bsStyle:"warning",style:{textAlign:"center"}},u().createElement("p",{style:{padding:8}},u().createElement(v.Z,{msgId:"styleeditor.alertForceTranslate"})),u().createElement("p",null,u().createElement(Bo.Z,{buttons:[{text:u().createElement(v.Z,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:function(){return m(!1)},style:{marginRight:4}},{bsStyle:"primary",text:u().createElement(v.Z,{msgId:"styleeditor.useLatestValidStyle"}),onClick:function(){l({editorType:"visual"}),m(!1)}}]})))))}Om.defaultProps={inlineWidgets:dm};var wm=(0,d.connect)((0,pm.y)(ds.gB,ds.p,ds.z_,(function(e){var t=(0,ds.WW)(e);return null==t?void 0:t.editorType}),(function(e){try{var t=(0,ds.WW)(e);return JSON.parse(null==t?void 0:t.styleJSON)}catch(e){return null}}),ds.aN,(function(e,t,r,n,o,i){return{code:e,error:t.edit||null,canEdit:r,editorType:n,defaultStyleJSON:o,loading:i}})),{onUpdateMetadata:$i.bB,onChange:$i.p2})(Om),Em=(0,ys.YD)(),Sm=(0,Dl.Z)((function(e){return!e.canEdit}),{glyph:"exclamation-mark",title:u().createElement(v.Z,{msgId:"styleeditor.noPermission"})}),Pm=function(e){return(0,Fl.Z)(e,{size:150,style:{margin:"auto"}},(function(e){return u().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},u().createElement(Vc.Z,e))}))},jm=(0,_.compose)((0,_.defaultProps)({templates:Em}),(0,d.connect)((0,N.P1)([ds.Mc,ds.w_,ds.lC,ds.z_,ds.Z0,ds.aN],(function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.formats,a=void 0===i?[]:i,l=arguments.length>5?arguments[5]:void 0;return{selectedStyle:e,add:t&&e,geometryType:r,canEdit:n,availableFormats:a,loading:l}})),{onSelect:$i.FU,onClose:$i.cu.bind(null,!1),onSave:$i.wj}),Sm,Pm((function(e){return!e.geometryType})),(0,_.withState)("filterText","onFilter",""),(0,_.withState)("styleSettings","onUpdate",{}))((function(e){var t=e.selectedStyle,r=e.add,n=e.styleSettings,o=void 0===n?{}:n,i=e.geometryType,a=void 0===i?"":i,l=e.templates,c=void 0===l?[]:l,s=e.filterText,p=e.availableFormats,f=void 0===p?["sld","css"]:p,d=e.formFields,y=void 0===d?[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:u().createElement(v.Z,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:u().createElement(v.Z,{msgId:"styleeditor.abstractSettings"})}]:d,m=e.onFilter,O=void 0===m?function(){}:m,w=e.onSelect,E=void 0===w?function(){}:w,S=e.onClose,P=void 0===S?function(){}:S,j=e.onSave,C=void 0===j?function(){}:j,x=e.onUpdate,T=void 0===x?function(){}:x,k=e.loading;return u().createElement(Go.Z,{header:u().createElement("div",null,u().createElement(cs,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:s,onFilter:O}),u().createElement("div",{className:"text-center"},u().createElement("small",null,k?u().createElement(Vc.Z,{size:15,style:{display:"inline-block"}}):u().createElement(v.Z,{msgId:"styleeditor.createStyleFromTemplate"}))))},u().createElement(us,{colProps:{},cardComponent:os,onItemClick:function(e){var t=e.code,r=e.styleId,n=e.format;E({code:t,templateId:r,format:n||"css"}),T(as(as({},o),{},{title:(0,fe.head)(c.filter((function(e){return e.styleId===r})).map((function(e){return e.title})))}))},items:c.filter((function(e){var t=e.title;return!s||s&&-1!==t.indexOf(s)})).filter((function(e){var t=e.types,r=e.format;return!t||(0,fe.head)(t.filter((function(e){return e===a})))&&-1!==f.indexOf(r)})).map((function(e){var r;return as(as({},e),{},{preview:null!=e&&null!==(r=e.preview)&&void 0!==r&&r.config?u().createElement(Kc,e.preview.config):null==e?void 0:e.preview,selected:e.styleId===t,disabled:k})}))}),u().createElement(b.Z,null,u().createElement(g.Z,{show:!!r,fitContent:!0,title:u().createElement(v.Z,{msgId:"styleeditor.createStyleModalTitle"}),onClose:function(){return P()},buttons:[{text:u().createElement(v.Z,{msgId:"save"}),bsStyle:"primary",disabled:!ps(o),onClick:function(){return C(o)}}]},u().createElement(h.Form,null,u().createElement(h.FormGroup,{controlId:"styleTitle",validationState:!ps(o)&&"error"},y.map((function(e){var t=e.title,r=e.placeholder,n=e.key;return u().createElement("span",{key:n},u().createElement(h.ControlLabel,null,t),u().createElement(ss,{type:"text",defaultValue:o[n],placeholder:r,onChange:function(e){return T(as(as({},o),{},ls({},n,e.target.value)))}}))}))),!ps(o)&&u().createElement(h.Alert,{style:{margin:0},bsStyle:"danger"},u().createElement(ns.Z,{msgId:"styleeditor.titleRequired"}))))))})),Cm=(0,_.compose)((0,d.connect)((0,N.P1)([ds.ex,ds.ov],(function(e,t){return{status:e,defaultStyle:t.defaultStyle,enabledStyle:t.enabledStyle,availableStyles:t.availableStyles}})),{onSelect:w.Xy}),(0,_.withState)("filterText","onFilter",""),(0,Wc.Z)((function(e){var t=e.status,r=e.readOnly;return"template"===t&&!r}),(function(){return u().createElement(jm,null)}),{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))((function(e){var t=e.showDefaultStyleIcon,r=e.enabledStyle,n=e.defaultStyle,o=e.availableStyles,i=void 0===o?[]:o,a=e.onSelect,l=e.formatColors,c=void 0===l?{sld:"#33ffaa",css:"#ffaa33"}:l,s=e.filterText,p=e.onFilter,f=void 0===p?function(){}:p;return u().createElement(Go.Z,{className:"ms-style-editor-list",header:u().createElement(es,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:s,onFilter:f})},u().createElement(rs,{size:"sm",onItemClick:function(e){var t=e.name;return a({style:n===t?"":t},!0)},items:i.filter((function(e){var t,r,n=e.name,o=void 0===n?"":n,i=e.title,a=void 0===i?"":i,l=e._abstract,c=void 0===l?"":l,u=e.metadata,p=void 0===u?{}:u;return!s||s&&(-1!==o.indexOf(s)||-1!==(null==p||null===(t=p.title)||void 0===t?void 0:t.indexOf(s))||-1!==(null==p||null===(r=p.description)||void 0===r?void 0:r.indexOf(s))||-1!==a.indexOf(s)||-1!==c.indexOf(s))})).map((function(e){var o,i,a;return Qc(Qc({},e),{},{title:(null==e||null===(o=e.metadata)||void 0===o?void 0:o.title)||e.label||e.title||e.name,description:(null==e||null===(i=e.metadata)||void 0===i?void 0:i.description)||e._abstract,selected:r===e.name,preview:e.format&&u().createElement(Kc,{backgroundColor:"#333333",texts:[{text:(a=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[a]||a||"").toUpperCase(),fill:c[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||u().createElement(ts,{glyph:"geoserver"}),tools:t&&n===e.name?u().createElement(ts,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null})}))}))})),xm=(0,_.compose)((0,_.withState)("showModal","onShowModal"),(0,d.connect)((0,N.P1)([ds.ex,ds.Mc,ds.p,ds.QW,ds.gB,ds.aN,ds.i7,ds.z_,ds.ov,ds.Z0,ds.Ed],(function(e,t,r,n,o,i,a,l,c){var s=c.defaultStyle,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},p=u.formats,f=void 0===p?["sld"]:p,d=arguments.length>10?arguments[10]:void 0;return{status:e,templateId:t,error:r,isCodeChanged:n!==o,loading:i,layerDefaultStyleName:s,selectedStyle:s===a?"":a,editEnabled:l,disableCodeEditing:-1===f.indexOf(d)}})),{onSelectStyle:$i.Nf.bind(null,"template"),onEditStyle:$i.Nf.bind(null,"edit"),onBack:$i.Nf.bind(null,""),onReset:Uc.B1.bind(null,ys.s1,[{}]),onAdd:$i.cu.bind(null,!0),onUpdate:$i.Lc,onDelete:$i.WQ,onSetDefault:$i.WB}))((function(e){var t,r=e.status,n=e.buttons,o=void 0===n?[]:n,i=e.templateId,a=e.error,l=e.isCodeChanged,c=e.showModal,s=e.onShowModal,p=e.loading,f=e.selectedStyle,d=e.layerDefaultStyleName,y=e.editEnabled,m=e.enableSetDefaultStyle,O=e.defaultStyles,w=void 0===O?["generic","point","line","polygon","raster"]:O,E=e.onBack,S=void 0===E?function(){}:E,P=e.onAdd,j=void 0===P?function(){}:P,C=e.onReset,x=void 0===C?function(){}:C,T=e.onDelete,k=void 0===T?function(){}:T,I=e.onSelectStyle,A=void 0===I?function(){}:I,F=e.onEditStyle,D=void 0===F?function(){}:F,R=e.onUpdate,N=void 0===R?function(){}:R,_=e.onSetDefault,L=void 0===_?function(){}:_,M=e.disableCodeEditing;return u().createElement("div",null,u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!r,tooltipId:"styleeditor.backToList",disabled:!!p,onClick:function(){"edit"===r&&l?s({title:u().createElement(v.Z,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:u().createElement(h.Alert,{bsStyle:"warning",style:{margin:0}},u().createElement(v.Z,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:u().createElement(v.Z,{msgId:"close"}),bsStyle:"primary",onClick:function(){s(null),S(),x()}}]}):(S(),x())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(r||!y),disabled:!!p,onClick:function(){return A()}},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(r||!y),disabled:!!p||-1!==w.indexOf(f)||!f&&-1!==w.indexOf(d)||M,onClick:function(){return D()}},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(a&&a.edit&&a.edit.status)||!!p||-1!==w.indexOf(f),visible:!("edit"!==r||!y),onClick:function(){return N()}},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==r||!i||!y),disabled:!!p,onClick:function(){return j()}},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!p||-1!==w.indexOf(f)||!f,visible:!(r||!y),onClick:function(){s({title:u().createElement(v.Z,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:u().createElement(h.Alert,{bsStyle:"warning",style:{margin:0}},u().createElement(v.Z,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:u().createElement(v.Z,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:function(){s(null),k(f)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!p||-1!==w.indexOf(f)||!f,visible:!(!m||r||!y),onClick:function(){return L()}}].concat((t=r?[]:o,function(e){if(Array.isArray(e))return fs(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return fs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fs(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),u().createElement(b.Z,null,u().createElement(g.Z,{show:c,fitContent:!0,title:c&&c.title,onClose:function(){return s(null)},buttons:c&&c.buttons},c&&c.message)))})),Tm=(0,_.compose)((0,d.connect)((0,N.P1)([ds.Vf],(function(e){return{layer:e}})),{onInit:q.k}),(0,_.lifecycle)({UNSAFE_componentWillMount:function(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}),Pm((function(e){var t=e.layer,r=void 0===t?{}:t;return r&&r.capabilitiesLoading})))((function(){return u().createElement(Go.Z,{className:"ms-style-editor-container",footer:u().createElement("div",{style:{height:25}})},u().createElement(Cm,{readOnly:!0}))})),km=(0,_.branch)((function(e){return e.readOnly}),(function(){return Tm}))(Cm),Im=r(76424);function Am(){return(Am=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const Fm=function(e){var t=e.activePanel,r=e.fillContainer,n=e.className,o=e.onSelect,i=e.panels,a=void 0===i?[]:i,l=r?"ms-fill-container ":"";return u().createElement(h.Accordion,{activeKey:t,className:"ms-accordion "+l+n},a.map((function(e,r){return u().createElement(h.Panel,{key:r,eventKey:e.id,className:t===e.id&&"HIDDEN"!==e.id?"ms-selected":"",header:e.head&&u().createElement("a",{role:"tab"},u().createElement(Im.Z,Am({},e.head,{selected:t===e.id,onClick:function(){o(e.id)}})))||null,collapsible:!0},e.body)})))};function Dm(e){return(Dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(r),!0).forEach((function(t){Um(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _m(){return(_m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Lm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zm(e,t){return(Zm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gm(e,t){return!t||"object"!==Dm(t)&&"function"!=typeof t?Bm(e):t}function Bm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zm(e){return(zm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Um(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zm(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zm(n);if(o){var r=zm(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Gm(this,e)});function a(){var e;Lm(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Um(Bm(e=i.call.apply(i,[this].concat(r))),"getInfoFormat",(function(t){return Object.keys(t).map((function(t){var r=e.props.formatCards[t]&&e.props.formatCards[t].body;return{id:t,head:{preview:u().createElement(h.Glyphicon,{glyph:e.props.formatCards[t]&&e.props.formatCards[t].glyph||"ext-empty"}),title:e.props.formatCards[t]&&e.props.formatCards[t].titleId&&u().createElement(v.Z,{msgId:e.props.formatCards[t].titleId})||"",description:e.props.formatCards[t]&&e.props.formatCards[t].descId&&u().createElement(v.Z,{msgId:e.props.formatCards[t].descId})||"",size:"sm"},body:r&&u().createElement(r,_m({template:e.props.element.featureInfo&&e.props.element.featureInfo.template||""},e.props))||null}}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.getInfoFormat(this.props.defaultInfoFormat);return u().createElement("span",null,u().createElement(Fm,{fillContainer:!0,activePanel:this.props.element.featureInfo&&this.props.element.featureInfo.format,panels:t,onSelect:function(t){var r=e.props.element.featureInfo&&e.props.element.featureInfo.format&&t===e.props.element.featureInfo.format;e.props.onChange("featureInfo",Nm(Nm({},e.props.element&&e.props.element.featureInfo||{}),{},{format:r?"":t,viewer:e.props.element.featureInfo?e.props.element.featureInfo.viewer:void 0}))}}))}}])&&Mm(t.prototype,r),a}(u().Component);function Vm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(r),!0).forEach((function(t){Hm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ym(){return(Ym=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Km(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}Um(Wm,"propTypes",{element:f().object,defaultInfoFormat:f().object,onChange:f().func,formatCards:f().object}),Um(Wm,"defaultProps",{element:{},defaultInfoFormat:[],onChange:function(){},formatCards:{}});var Xm={html:xl(),json:JSON.parse(kl()),text:Al()},Qm=(0,_.defaultProps)({readOnly:!0})(km),Jm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,r=void 0===t?{}:t;return"layers"===r.nodeType},eb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,r=void 0===t?{}:t;return"wfs"===r.type||"vector"===r.type&&"annotations"!==r.id},tb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,r=void 0===t?{}:t;return"wms"===r.type},rb=function(e){return Jm(e)&&(tb(e)||eb(e))},nb={HIDDEN:{titleId:"layerProperties.hideFormatTitle",descId:"layerProperties.hideFormatDescription",glyph:"hide-marker"},TEXT:{titleId:"layerProperties.textFormatTitle",descId:"layerProperties.textFormatDescription",glyph:"ext-txt",body:function(){return u().createElement("div",null,u().createElement("div",null,u().createElement(v.Z,{msgId:"layerProperties.exampleOfResponse"})),u().createElement("br",null),u().createElement(na.Z,{response:Xm.text}))}},HTML:{titleId:"layerProperties.htmlFormatTitle",descId:"layerProperties.htmlFormatDescription",glyph:"ext-html",body:function(){return u().createElement("div",null,u().createElement("div",null,u().createElement(v.Z,{msgId:"layerProperties.exampleOfResponse"})),u().createElement("br",null),u().createElement(ra.Z,{response:Xm.html}))}},PROPERTIES:{titleId:"layerProperties.propertiesFormatTitle",descId:"layerProperties.propertiesFormatDescription",glyph:"ext-json",body:function(){return u().createElement("div",null,u().createElement("div",null,u().createElement(v.Z,{msgId:"layerProperties.exampleOfResponse"})),u().createElement("br",null),u().createElement(oa.Z,{response:Xm.json}))}},TEMPLATE:{titleId:"layerProperties.templateFormatTitle",descId:"layerProperties.templateFormatDescription",glyph:"ext-empty",body:function(e){var t=e.template,r=void 0===t?"":t,n=Km(e,["template"]);return u().createElement("div",null,u().createElement("div",null,r&&"<p><br></p>"!==r?u().createElement(v.Z,{msgId:"layerProperties.templatePreview"}):null),u().createElement("br",null),u().createElement("div",null,r&&"<p><br></p>"!==r?u().createElement(ia.Z,{html:r}):u().createElement("span",null,u().createElement("p",null,u().createElement(v.Z,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}})),u().createElement("pre",null,u().createElement(v.Z,{msgId:"layerProperties.templateFormatInfoAlertExample",msgParams:{properties:"{ properties.id }"}})),u().createElement("p",null,u().createElement("small",null,u().createElement(v.Z,{msgId:"layerProperties.templateFormatInfoAlert1"}))," ( ",u().createElement(h.Glyphicon,{glyph:"pencil"})," )")),u().createElement(Pl,Ym({template:r},n))))}}},ob=(0,_.defaultProps)({formatCards:nb,defaultInfoFormat:Object.assign({HIDDEN:"text/html"},(0,aa.eq)())})(Wm),ib={},ab=function(e,t,r){if(e){var n=ib[e.name];return n||(n=(0,E.KB)(e,t,r))&&n.loaded&&(ib[e.name]=n),n}return e},lb=function(e){var t=e.settings,r=e.items,n=void 0===r?[]:r,o=e.loadedPlugins,i=e.onToggleStyleEditor,a=void 0===i?function(){}:i,l=e.onUpdateParams,c=void 0===l?function(){}:l,s=e.element,p=Km(e,["settings","items","loadedPlugins","onToggleStyleEditor","onUpdateParams","element"]);if(eb({element:s}))return{Component:zc};var f,d=(0,fe.sortBy)((0,fe.filter)((f=n,function(e){if(Array.isArray(e))return $m(e)}(f)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(f)||function(e,t){if(e){if("string"==typeof e)return $m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$m(e,t):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),{target:"style"}),["priority"]).filter((function(e){var t=e.selector;return!t||t(qm(qm({},p),{},{element:s}))})),y=(0,fe.head)((0,fe.filter)(d,{name:"ThematicLayer"}));if(y){var m=t&&t.options&&t.options.thematic,b=[{glyph:"list",tooltipId:"toc.thematic.classify",visible:p.isAdmin&&!m||!1,onClick:function(){return c({thematic:{unconfigured:!0}})}},{glyph:"trash",tooltipId:"toc.thematic.remove_thematic",visible:p.isAdmin&&m||!1,onClick:function(){return c({thematic:null})}}];return m?{Component:"style"===p.activeTab&&y.plugin&&ab(y,o,u().createElement(jl.Z,{width:100,height:100})),toolbar:b}:{toolbar:b}}var g=(0,fe.head)(d);if(g&&g.plugin){var v=g.cfg||g.plugin.cfg;return{onClose:function(){return a(null,!1)},Component:ab(qm(qm({},g),{},{cfg:qm(qm({},v||{}),{},{active:!0})}),o,u().createElement(jl.Z,{width:100,height:100})),toolbarComponent:g.ToolbarComponent&&(v&&(0,_.defaultProps)(v)(g.ToolbarComponent)||g.ToolbarComponent)}}return{}};const cb=function(e){var t=e.showFeatureInfoTab,r=void 0===t||t,n=e.loadedPlugins,o=e.items,i=e.onToggleStyleEditor,a=Km(e,["showFeatureInfoTab","loadedPlugins","items","onToggleStyleEditor"]);return[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:la.Z},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:Jm(a),Component:ca.Z},qm({id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:rb(a),Component:Qm},lb(qm({items:o,loadedPlugins:n,onToggleStyleEditor:i},a))),{id:"feature",titleId:"layerProperties.featureInfo",tooltipId:"layerProperties.featureInfo",glyph:"map-marker",visible:r&&Jm(a)&&tb(a)&&!(a.element.featureInfo&&a.element.featureInfo.viewer),Component:ob,toolbar:[{glyph:"pencil",tooltipId:"layerProperties.editCustomFormat",visible:!a.showEditor&&a.element&&a.element.featureInfo&&"TEMPLATE"===a.element.featureInfo.format||!1,onClick:function(){return a.onShowEditor&&a.onShowEditor(!a.showEditor)}}]},{id:"elevation",titleId:"layerProperties.elevation",tooltipId:"layerProperties.elevation",glyph:"1-vector",visible:Jm(a)&&tb(a)&&a.element.dimensions&&a.getDimension&&a.getDimension(a.element.dimensions,"elevation"),Component:za}].filter((function(e){return e.visible}))};var sb=(0,N.P1)([Y.jN,Y.l2,Y.Bt,ee.Pz,ee.KV,function(e){return(0,Xr.ic)(e,{height:!0})},ne.qg,te.Gd,te.tL,te.R4,Y.Ci,oe.wk],(function(e,t,r,n,o,i,a,l,c,s,u,p){return{settings:e,element:u,groups:r,currentLocale:n,currentLocaleLanguage:o,dockStyle:i,isAdmin:a,initialSettings:l,originalSettings:c,activeTab:s,isLocalizedLayerStylesEnabled:p}})),ub=(0,_.compose)((0,d.connect)(sb,{onHideSettings:w.sF,onUpdateSettings:w.VP,onUpdateNode:w.tV,onRetrieveLayerData:q.k,onUpdateOriginalSettings:O.Xg.bind(null,"layersettings","originalSettings"),onUpdateInitialSettings:O.Xg.bind(null,"layersettings","initialSettings"),onSetTab:O.Xg.bind(null,"layersettings","activeTab"),onUpdateParams:w.Xy,onToggleStyleEditor:$i.Wv}),Yi.bR,(0,_.defaultProps)({getDimension:ie.getDimension,enableLayerNameEditFeedback:!0}),(0,_.getContext)({loadedPlugins:f().object}),(0,_.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,r=void 0===t?[]:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.items;return r!==o}),(function(e){return{tabs:cb(e)}})))(ta);const pb=(0,E.rx)("TOCItemsSettings",{component:ub,containers:{TOC:{doNotHide:!0,name:"TOCItemsSettings"}}});var fb=r(1757);function db(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yb=function e(t){var r=t.accessInfo,n=t.postProcessValue,o=t.reduceFun;return function(t){var i=(0,fe.castArray)(t),a=o;return i.length>1&&"__OR__"===i[0]&&(a=function(e,t){return e||t},i=i.slice(1)),i.map((function(t){var i=t;if((0,fe.isArray)(i))return e({accessInfo:r,postProcessValue:n,reduceFun:o})(i);var a=!1;i&&(0,fe.isString)(i)&&i.startsWith("!")&&(a=!0,i=i.substr(1));var l=function(e){return a?!e:e},c=(0,fe.isString)(i)&&i.split(":");if(c&&c[0]){var s=c[0].split(/\!\=\=?/),u=c[0].split(/\=\=?\=?/);return s.length>1?l(n((0,fe.get)(r,s[0]),i)!==s[1]):u.length>1?l(n((0,fe.get)(r,u[0]),i)===u[1]):l(n((0,fe.get)(r,c[0]),i))}return i})).reduce(a||function(e,t){return e&&t})}};const mb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.asObject,n=void 0!==r&&r,o=t.postProcessValue,i=void 0===o?function(e){return e}:o,a=t.reduceFun,l=t.accessInfo,c=void 0===l?"accessInfo":l;return(0,_.withPropsOnChange)([e,c],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return db({},e,n?(0,fe.mapValues)(t[e],yb({accessInfo:t[c],postProcessValue:i,reduceFun:a})):yb({accessInfo:t[c],postProcessValue:i,reduceFun:a})(t[e]))}))},bb=function(){return(0,_.compose)((0,d.connect)((0,N.P1)(J.J9,J._H,ne.np,(function(e,t,r){return{accessInfo:{mapId:e,mapInfo:t,user:r}}}))),mb.apply(void 0,arguments))},gb=(0,d.connect)((0,N.P1)(Xr.Jz,Xr.VM,be.c0,(function(e,t,r){return{enabled:!e&&!t&&!r}})));var vb=r(75382),hb=r(38482);function Ob(){return(Ob=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var wb=r(69968);function Eb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Eb(Object(r),!0).forEach((function(t){Pb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jb=function(e){return(0,fe.get)((0,fe.head)(e,(function(e){return e.color})),"color")};const Cb=(0,_.withProps)((function(e){var t=e.groups,r=e.showGroupColor,n=e.headerStyle,o=void 0===n?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:n;return{headerStyle:r&&t&&jb(t)?Sb(Sb({},o),{},{borderTop:"3px solid ".concat(jb(t))}):o}}));function xb(){return(xb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Tb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tb(Object(r),!0).forEach((function(t){Ib(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ib(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ab(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r(2903);var Fb=(0,_.branch)((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),wb.WidthProvider)(wb.Responsive),Db=Cb(r(43716).Z),Rb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return(0,fe.find)(e.widgets,(function(e){return e===t.id}))}))};const Nb=(0,_.pure)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.style,n=e.className,o=void 0===n?"":n,i=e.toolsOptions,a=void 0===i?{}:i,l=e.rowHeight,c=void 0===l?208:l,s=e.breakpoints,p=void 0===s?{lg:1200,md:996,sm:768,xs:480,xxs:0}:s,f=e.cols,d=void 0===f?{lg:6,md:6,sm:4,xs:2,xxs:1}:f,y=e.widgets,m=void 0===y?[]:y,b=e.layouts,g=e.dependencies,v=e.verticalCompact,h=void 0!==v&&v,O=e.compactMode,w=e.useDefaultWidthProvider,E=void 0===w||w,S=e.measureBeforeMount,P=e.width,j=e.showGroupColor,C=e.groups,x=void 0===C?[]:C,T=e.canEdit,k=void 0===T||T,I=e.getWidgetClass,A=void 0===I?function(){}:I,F=e.onWidgetClick,D=void 0===F?function(){}:F,R=e.updateWidgetProperty,N=void 0===R?function(){}:R,_=e.deleteWidget,L=void 0===_?function(){}:_,M=e.toggleCollapse,Z=void 0===M?function(){}:M,G=e.toggleMaximize,B=void 0===G?function(){}:G,z=e.editWidget,U=void 0===z?function(){}:z,W=e.onLayoutChange,V=void 0===W?function(){}:W,q=e.language,H=e.env,$=Ab(e,["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","env"]),Y=m.filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap})),K=function(e){return"table"===e.widgetType&&Y.filter((function(t){return Object.keys(t).filter((function(r){return t[r]&&-1!==t[r].indexOf(e.id)})).length>0})).length>0};return u().createElement(Fb,{key:t||"widgets-view",useDefaultWidthProvider:E,measureBeforeMount:S,width:E?void 0:P,isResizable:k,isDraggable:k,draggableHandle:".draggableHandle",onLayoutChange:V,preventCollision:!0,style:r,className:"widget-container ".concat(o," ").concat(k?"":"no-drag"),rowHeight:c,autoSize:!0,verticalCompact:h,compactMode:O,breakpoints:p,cols:d,layouts:b?JSON.parse(JSON.stringify((0,fe.mapValues)(b,(function(e){return e.map((function(e){var t=(0,fe.find)(m,{id:e.i});return t?kb(kb({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},m.map((function(e){return u().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return D(e)},className:A(e)},u().createElement(Db,xb({"data-grid":e.dataGrid},$,e,{quickFilters:K(e)?e.quickFilters:void 0,toolsOptions:a,groups:Rb(x,e),showGroupColor:j,dependencies:g,enableColumnFilters:K(e),canEdit:k,updateProperty:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return N.apply(void 0,[e.id].concat(r))},toggleCollapse:function(){return Z(e)},toggleMaximize:function(){return B(e)},onDelete:function(){return L(e)},onEdit:function(){return U(e)},language:q,env:H})))})))}));function _b(e){return(_b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zb(e,t){return(Zb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gb(e,t){return!t||"object"!==_b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bb(e){return(Bb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ub(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zb(Object(r),!0).forEach((function(t){Wb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vb,qb=(0,_.compose)((0,d.connect)((0,N.P1)(J.J9,fb.E5,fb.p,fb.Jb,fb.h9,(function(e,t,r,n,o){return{id:e,widgets:t,layouts:r,maximized:n,dependencies:o}})),{editWidget:de.uT,updateWidgetProperty:de.Ij,exportCSV:de.sD,toggleCollapse:de.f,toggleMaximize:de.Pt,exportImage:de.Rb,deleteWidget:de.E9,onLayoutChange:de.c_}),(0,_.compose)((Vb={debounceTime:20,closest:!0,querySelector:".fill"},(0,_.compose)((0,_.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),(0,hb.Z)(Vb))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return(0,_.compose)((0,_.defaultProps)({useDefaultWidthProvider:!t}),(function(e){return function(t){return u().createElement(vb.Z,{handleWidth:!0},(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.width;return u().createElement(e,Ob({width:n},t))}))}}))}({overrideWidthProvider:!1}),(0,_.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height,n=e.maximized,o=r-120,i=4,a=Math.floor(o/i-20),l=null!=n&&n.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:1330}:{},c=null!=n&&n.widget?{width:t,useDefaultWidthProvider:!1,rowHeight:r-50,breakpoints:{xxs:0},cols:{xxs:1}}:{};return Ub({rowHeight:a,className:"on-map",breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1},style:Ub({left:t&&t>800?"500px":"0",marginTop:52,bottom:65,height:Math.floor((r-100)/(a+10))*(a+10),width:"calc(100% - ".concat(t&&t>800?570:70,"px)"),position:"absolute",zIndex:50},l)},c)}))),(0,_.compose)((0,_.defaultProps)({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0,showMaximize:!0}}),bb("toolsOptions",{asObject:!0}),(0,_.compose)((0,d.connect)((0,N.P1)(fb.Xu,(function(e){return{tray:e}}))),(0,_.withPropsOnChange)(["toolsOptions","tray"],(function(e){var t=e.toolsOptions,r=e.tray;return{toolsOptions:t?Ub(Ub({},t),{},{showCollapse:t.showCollapse&&r}):t}}))),(0,_.withPropsOnChange)(["widgets","toolsOptions"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.toolsOptions,o=void 0===n?{}:n;return{widgets:r.filter((function(e){return!e.hide||o.seeHidden}))}}))))(Nb),Hb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zb(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bb(n);if(o){var r=Bb(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Gb(this,e)});function a(){return Lb(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return this.props.enabled?u().createElement(qb,this.props):null}}])&&Mb(t.prototype,r),a}(u().Component);Wb(Hb,"propTypes",{enabled:f().bool}),Wb(Hb,"defaultProps",{enabled:!0});var $b=gb(Hb);const Yb=(0,E.rx)("WidgetsPlugin",{component:$b,containers:{TOC:{doNotHide:!0,name:"Widgets"}},reducers:{widgets:r(75859).Z},epics:r(88395).ZP});var Kb=r(33528),Xb=r(4206),Qb=r(7878),Jb=r(75982),eg=r(95797),tg=r(24260);function rg(e){return function(e){if(Array.isArray(e))return ng(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ng(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ng(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ng(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function og(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ig(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?og(Object(r),!0).forEach((function(t){ag(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):og(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ag(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lg=function(e){var t=(0,fb.GW)(e);return[t.search&&t.search.url,t.name]};const cg={openWidgetEditor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(de.AE,de.dm,de.IT).filter((function(){return(0,te.PJ)(n())})).switchMap((function(){return Yt.Observable.of((0,O.Xg)("widgetBuilder","enabled",!0),(0,O.Xg)("metadataexplorer","enabled",!1))}))},closeWidgetEditorOnFinish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(de.Jm,w.oE).filter((function(){return(0,te.PJ)(n())})).switchMap((function(){return Yt.Observable.of((0,O.Xg)("widgetBuilder","enabled",!1))}))},initEditorOnNew:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(de.AE).filter((function(){return(0,te.PJ)(n())})).switchMap((function(e){return Yt.Observable.of((0,de.bS)(ig(ig({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))}))},initEditorOnNewChart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(de.IT).filter((function(){return(0,te.PJ)(n())})).switchMap((function(e){return Yt.Observable.of((0,Kb.YV)(),(0,de.bS)(ig(ig({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0,widgetType:"chart",filter:(0,tg.X1)(n())},e),{},{type:void 0}),{step:0}),(0,de.Rz)("returnToFeatureGrid",!0))}))},handleWidgetsFilterPanel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(de.lG).filter((function(){return(0,te.PJ)(n())})).switchMap((function(){return Yt.Observable.of(eg.gT.apply(void 0,rg(lg(n()))),(0,Qb.F)((0,fb.um)(n())),(0,O.Xg)("widgetBuilder","enabled",!1),(0,O.Xg)("queryPanel","enabled",!0)).concat(Yt.Observable.race(e.ofType(Qb.Wm).take(1),e.ofType(O.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).take(1)).switchMap((function(e){return(e.filterObj?Yt.Observable.of((0,de.Rz)("filter",e.filterObj)):Yt.Observable.empty()).merge(Yt.Observable.of((0,O.Xg)("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(Jb.nk,de.dm).merge(e.ofType(O.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"widgetBuilder"===t&&0==!r})))).concat(Yt.Observable.of((0,Xb.bp)(),(0,O.Xg)("queryPanel","enabled",!1)))}))}};var sg=r(16919);const ug=(0,_.compose)((0,d.connect)((function(e){return{returnToFeatureGrid:(0,fb.Wo)(e)}}),{backToWidgetList:function(){return(0,de.Rz)("widgetType",void 0)},closeWidgetBuilder:function(){return(0,O.Xg)("widgetBuilder","enabled",!1,!1)},openFeatureGridTable:function(){return(0,Kb.t9)()}}),(0,_.withHandlers)({backFromWizard:function(e){var t=e.backToWidgetList,r=void 0===t?function(){}:t,n=e.closeWidgetBuilder,o=void 0===n?function(){}:n,i=e.openFeatureGridTable,a=void 0===i?function(){}:i,l=e.returnToFeatureGrid;return function(){l?(o(),a()):r()}}}),(0,_.withProps)((function(e){var t=e.returnToFeatureGrid,r=e.backFromWizard;return{exitButton:{onClick:void 0===r?function(){}:r,glyph:"arrow-left",tooltipId:t?"widgets.builder.wizard.backToFeatureGrid":"widgets.builder.wizard.backToWidgetTypeSelection"}}})));var pg=r(73849),fg=r(86850),dg=r(10284),yg=r(99767),mg=function(e,t){return Yt.Observable.defer((function(){return Lt().get((0,yg.Jy)(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})})).let(dg.oB)};function bg(e){return mg(e.url,"gs:Aggregate")}var gg=r(78889);function vg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||Og(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hg(e){return function(e){if(Array.isArray(e))return wg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Og(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Og(e,t){if(e){if("string"==typeof e)return wg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wg(e,t):void 0}}function wg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Eg="ALL";const Sg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsWPS;return(0,_.compose)((0,_.defaultProps)({dataStreamFactory:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.onEditorChange,o=void 0===n?function(){}:n,i=r.onConfigurationError,a=void 0===i?function(){}:i;return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.layer;return r.name===o.name})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.layer;return Yt.Observable.forkJoin.apply(Yt.Observable,[(0,fg.v$)({layer:r})].concat(hg(t?[bg(r)]:[bg(r).catch((function(){return Yt.Observable.of(!1)}))]))).do((function(e){var t=vg(e,1)[0],r=(0,fe.get)((0,gg.findGeometryProperty)(t.data||{}),"name");r&&o("geomProp",r)})).map((function(e){var t=vg(e,2),r=t[0];return{hasAggregateProcess:!!t[1],loading:!1,types:Eg,featureTypeProperties:(0,fe.get)(r,"data.featureTypes[0].properties")||[]}}))})).catch((function(e){return a(e),Yt.Observable.of({errorObj:e,loading:!1,featureTypeProperties:[]})})).startWith({loading:!0})}}),pg.Z,(0,Fl.Z)(),(0,Dl.Z)((function(e){var t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.types,o=void 0===n?[]:n;return 0===r.length||0===o.length}),(function(){return{title:u().createElement(id,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),description:u().createElement(ad,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}})))},Pg=(0,_.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){r("options",void 0),r("widgetType",void 0)}}]}}));var jg=r(80833),Cg=r(76712);function xg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xg(Object(r),!0).forEach((function(t){kg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ig=(0,_.compose)((0,_.withState)("selected","setSelected",null),(0,_.withState)("layer","setLayer",null),(0,_.mapPropsStream)((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected,r=e.layerValidationStream,n=void 0===r?function(e){return e}:r,o=e.setLayer,i=void 0===o?function(){}:o;return Yt.Observable.of((0,Cg.ll)(t)).let(n).switchMap((function(){return(0,jg.HI)((0,Cg.ll)(t))})).do((function(e){return i(e)})).mapTo({canProceed:!0}).catch((function(e){return Yt.Observable.of({error:e,canProceed:!1})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=e.error,n=arguments.length>1?arguments[1]:void 0;return Tg({error:r,canProceed:t},n)}))}))),Ag=(0,d.connect)((function(){return{}}),{onLayerChoice:function(e){return(0,de.Rz)("layer",e)},onResetChange:de.Rz}),Fg=(0,_.compose)((0,_.setDisplayName)("ChartLayerSelector"),Ag,(0,_.defaultProps)({layerValidationStream:function(e){return e.switchMap((function(e){return function(e){return Yt.Observable.forkJoin((0,fg.v$)({layer:e}))}(e)}))}}),Pg,Ig),Dg=function(e){return(0,_.withHandlers)({toggleConnection:function(t){var r=t.toggleConnection,n=void 0===r?function(){}:r,o=t.editorData,i=void 0===o?{}:o;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(!i.mapSync,t,{dependenciesMap:i.dependenciesMap,mappings:e,sourceWidgetType:i.widgetType})}}})};var Rg=function(e,t,r){return"table"===t&&0===e.filter((function(e){return Object.keys(e).filter((function(t){return e[t]&&-1!==e[t].indexOf(r.id)})).length>0})).length};const Ng=(0,_.compose)((0,_.withProps)((function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.widgets,o=(void 0===n?[]:n).filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap}));return{canConnect:r.geomProp&&"table"!==r.widgetType||Rg(o,r.widgetType,r),connected:r.mapSync}})),Dg({viewport:"viewport",layers:"layers",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"})),_g=(0,_.compose)((0,d.connect)((0,N.P1)(fb.xI,(function(e){return{widgetSelectionActive:e}}))),(0,Wc.Z)((function(e){return e.widgetSelectionActive}),(function(){return u().createElement("div",{style:{margin:"auto"}},u().createElement(v.Z,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0}));function Lg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lg(Object(r),!0).forEach((function(t){Zg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gg(e){return function(e){if(Array.isArray(e))return Bg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Bg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bg(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zg(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Ug=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return 0===e.step},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.withProps)((function(r){var n=r.stepButtons,o=void 0===n?[]:n,i=r.exitButton,a=zg(r,["stepButtons","exitButton"]);return{stepButtons:[Mg(Mg({},i),{},{visible:e(Mg({stepButtons:o,exitButton:i},a))},t)].concat(Gg(o))}}))};function Wg(e){return function(e){if(Array.isArray(e))return Vg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Vg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vg(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qg(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Hg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return(0,_.compose)((0,_.withProps)((function(t){var r=t.disableMultiDependencySupport,n=t.stepButtons,o=void 0===n?[]:n,i=t.toggleConnection,a=void 0===i?function(){}:i,l=t.availableDependencies,c=void 0===l?[]:l,s=t.canConnect,u=t.connected,p=qg(t,["disableMultiDependencySupport","stepButtons","toggleConnection","availableDependencies","canConnect","connected"]);return{stepButtons:[].concat(Wg(o),[{onClick:function(){return a(c)},disabled:r,visible:!!e(p)&&!!s&&c.length>0,bsStyle:u?"success":"primary",glyph:u?"plug":"unplug",tooltipId:u?"widgets.builder.wizard.clearConnection":1===c.length?"widgets.builder.wizard.connectToTheMap":"widgets.builder.wizard.connectToAMap"}])}})))};var $g=r(67306);function Yg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yg(Object(r),!0).forEach((function(t){Xg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Kg(Kg(Kg(Kg({},r),e),t),{},{step:e&&e.settings&&e.settings.step,valid:e&&e.settings&&e.settings.valid,onFinish:function(){return t.insertWidget&&t.insertWidget(Kg({layer:e.layer,url:e.layer&&e.layer.url},e.editorData||{}),r.target)}})},Jg=(0,N.P1)(fb.GW,fb.YI,fb.E2,fb.zm,$g.i$,(function(e,t,r,n,o){return{layer:t&&t.layer||e,editorData:t,settings:r,widgets:n,dashBoardEditing:o}}));function ev(e){return(ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nv(e,t){return(nv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ov(e,t){return!t||"object"!==ev(t)&&"function"!=typeof t?iv(e):t}function iv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function av(e){return(av=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,N.P1)(fb.YI,$g.P0,fb.h9,fb.zA,(function(e,t,r,n){return Kg({layer:e.layer,showConnections:t,dependencies:r},n)})),(0,N.P1)(oe.Yf,ee.KV,oe.fY,(function(e,t,r){return{isLocalizedLayerStylesEnabled:!(0,fe.isNil)(e),language:t,env:r}})),fb.GW,fb.zA;var cv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nv(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=av(n);if(o){var r=av(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ov(this,e)});function a(){var e;tv(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return lv(iv(e=i.call.apply(i,[this].concat(r))),"renderButtons",(function(){var t=[],r=e.props,n=r.isStepValid,o=r.children,i=void 0===o?[]:o,a=i.length>=0?i.length:1;return e.props.hideButtons?null:(e.props.step>0&&t.push(u().createElement(qe.Z,{key:"prev",className:"ms-wizard-prev",onClick:function(){return e.props.onPrevPage()}},u().createElement(v.Z,{msgId:"wizard.prev"}))),e.props.step>=a-1?t.push(u().createElement(qe.Z,{key:"finish",className:"ms-wizard-finish",onClick:function(){return e.props.onFinish()}},u().createElement(v.Z,{msgId:"wizard.finish"}))):e.props.step<a-1&&a>1&&t.push(u().createElement(qe.Z,{key:"next",className:"ms-wizard-next",disabled:!n(e.props.step),onClick:function(){return e.props.onNextPage()}},u().createElement(v.Z,{msgId:"wizard.next"}))),t)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.children||[],r=t.length>=0?t.length:1;return u().createElement("div",{key:"wizard-pages",className:"ms-wizard"},u().Children.map(t,(function(t,n){return n===e.props.step?u().cloneElement(t,{key:"wizard-component-".concat(n),onNextPage:e.props.step===r-1?e.props.onFinish:e.props.onNextPage,onPrevPage:e.props.onPrevPage}):null})),u().createElement(h.Row,{key:"wizard-buttons",className:"ms-wizard-buttons"},this.renderButtons()))}}])&&rv(t.prototype,r),a}(u().Component);lv(cv,"propTypes",{step:f().number,hideButtons:f().bool,onNextPage:f().func,onPrevPage:f().func,buttonType:f().node,onFinish:f().func,isStepValid:f().func}),lv(cv,"defaultProps",{step:0,isStepValid:function(){return!0},hideButtons:!1,onNextPage:function(){},onPrevPage:function(){},onFinish:function(){}});const sv=cv;var uv=(0,_.compose)((0,_.withPropsOnChange)(["step"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skipButtonsOnSteps,r=void 0===t?[]:t,n=e.step,o=e.hideButtons;return r&&r.indexOf(n)>=0?{hideButtons:!0}:{hideButtons:o}})),(0,_.withHandlers)({onNextPage:function(e){var t=e.step,r=e.setPage,n=void 0===r?function(){}:r;return function(){n(t+1)}},onPrevPage:function(e){var t=e.step,r=e.setPage,n=void 0===r?function(){}:r;return function(){n(Math.max(t-1,0))}}}));(0,_.compose)((0,_.withState)("step","setPage",0),uv);const pv=function(e){return(0,Dl.Z)(e,{title:u().createElement(v.Z,{msgId:"widgets.builder.errors.noAttributesTitle"}),description:u().createElement(v.Z,{msgId:"widgets.builder.errors.noAttributesDescription"}),glyph:"warning-sign"})},fv=(0,_.defaultProps)({data:[{name:"A",variable:2,pv:2,amt:2},{name:"B",variable:.5,pv:.5,amt:.5},{name:"C",variable:3,pv:3,amt:3},{name:"D",variable:1,pv:1,amt:2}],series:[{dataKey:"variable",color:"#078aa3"}],xAxis:{dataKey:"name",show:!1}});var dv=r(6869);const yv=function(e){var t=e.title,r=e.description;return u().createElement(h.Row,null,u().createElement(h.Col,{xs:12,className:"text-center"},u().createElement("div",{className:"mapstore-step-title"},t),u().createElement("div",{className:"mapstore-step-description"},r)))};function mv(){return(mv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bv(Object(r),!0).forEach((function(t){vv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hv=fv(dv.Z),Ov={xAxisAngle:0,legend:!1,tooltip:!1,cartesian:!1,width:100,height:100,popup:!1},wv=[{type:"bar"},{type:"pie"},{type:"line"}].map((function(e){var t=e.type;return{type:t,title:u().createElement(v.Z,{msgId:"widgets.chartType.".concat(t,".title")}),description:u().createElement(v.Z,{msgId:"widgets.chartType.".concat(t,".description")}),caption:u().createElement(v.Z,{msgId:"widgets.chartType.".concat(t,".caption")})}}));const Ev=(0,_.shouldUpdate)((function(e,t){var r=e.types,n=e.type,o=t.types;return n!==t.type&&r!==o}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSelect,r=void 0===t?function(){}:t,n=e.onNextPage,o=void 0===n?function(){}:n,i=e.types,a=void 0===i?wv:i,l=e.type;return u().createElement(h.Row,null,u().createElement(yv,{key:"title",title:u().createElement(v.Z,{msgId:"widgets.selectChartType.title"})}),u().createElement(qc.Z,{key:"content",onItemClick:function(e){r(e.type),o()},items:a&&wv.map((function(e){return gv(gv({},e),{},{selected:e.type===l,preview:u().createElement(hv,mv({},Ov,{type:e.type,autoColorOptions:e.type===l?{base:0,s:0,v:0}:void 0}))})}))}))}));var Sv=function(e){return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return 0!==t.indexOf("gml:")})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return{label:t,value:t}}))},Pv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,fe.find)(t,{name:e});return!r||"number"!==r.localType&&"int"!==r.localType?[{value:"Count",label:"widgets.operations.COUNT"}]:[{value:"Count",label:"widgets.operations.COUNT"},{value:"Sum",label:"widgets.operations.SUM"},{value:"Average",label:"widgets.operations.AVG"},{value:"StdDev",label:"widgets.operations.STDDEV"},{value:"Min",label:"widgets.operations.MIN"},{value:"Max",label:"widgets.operations.MAX"}]};const jv=(0,_.compose)((0,_.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.data,o=void 0===n?{}:n;return{options:Sv(r),aggregationOptions:("counter"!==(null==o?void 0:o.widgetType)?[{value:"None",label:"widgets.operations.NONE"}]:[]).concat(Pv(o.options&&o.options.aggregationAttribute,r))}})),(0,Hc.Z)("aggregationOptions"));var Cv=r(45869),xv=r(52595);function Tv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kv(e){var t,r,n=e.showOnRender,o=e.placement,i=e.id,a=e.left,l=e.top,c=e.title,p=e.text,f=e.bsStyle,d=void 0===f?"info":f,y=e.glyph,m=void 0===y?"question-sign":y,b=(t=(0,s.useState)(n),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Tv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tv(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=b[0],v=b[1],O=(0,s.useRef)(null);return u().createElement(u().Fragment,null,u().createElement(h.Glyphicon,{onClick:function(){return v(!g)},ref:function(e){return O.current=e},style:{cursor:"pointer"},className:"text-".concat(d),glyph:m}),u().createElement(xv.Z,{target:O.current,show:g,placement:o},u().createElement(h.Popover,{id:i,placement:o,positionLeft:a,positionTop:l,title:c},u().createElement(h.Glyphicon,{glyph:"1-close",style:{position:"absolute",right:0,top:0,margin:8},onClick:function(){return v(!1)}}),p)))}var Iv=r(12226);function Av(){return(Av=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Fv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dv(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rv={value:1};function Nv(e){try{if(!e)return[!0];var t=(0,Iv.B)(e,Rv);return[!(0,fe.isNil)(t)&&!(0,fe.isNaN)(t)&&!(0,fe.isError)(t),t]}catch(e){return[!1,e]}}function _v(e,t){return e?null:(0,fe.isNil)(t)?"the expression returns no value":(0,fe.isNaN)(t)?"the expression returned NaN":(0,fe.isError)(t)?t.message:null}function Lv(e,t){return t?e?"success":"error":null}function Mv(e){var t=e.onChange,r=e.value,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["onChange","value"]),o=Fv(Nv(r),2),i=o[0],a=o[1],l=Fv((0,s.useState)(i),2),c=l[0],p=l[1],f=Fv((0,s.useState)(a),2),d=f[0],y=f[1],m=Fv((0,s.useState)(r),2),b=m[0],g=m[1];return u().createElement(h.FormGroup,{validationState:Lv(c,b)},u().createElement(h.Col,{xs:12},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"widgets.advanced.formula"})),u().createElement(kv,{placement:"top",title:u().createElement(v.Z,{msgId:"widgets.advanced.formula"}),text:u().createElement(ns.Z,{msgId:"widgets.advanced.formulaExamples"})}),u().createElement(h.FormControl,Av({placeholder:"e.g. value / 100",feedback:_v(c,d)},n,{type:"text",value:b,onChange:function(e){var r=Fv(Nv(e.target.value),2),n=r[0],o=r[1];n?(p(!0),y(void 0),t(e)):(p(!1),y(o)),g(e.target.value)}}))))}var Zv=(0,Hc.Z)("options")(zo.ZP),Gv=[{value:"-",label:"widgets.advanced.axisTypes.auto"},{value:"linear",label:"widgets.advanced.axisTypes.linear"},{value:"category",label:"widgets.advanced.axisTypes.category"},{value:"log",label:"widgets.advanced.axisTypes.log"},{value:"date",label:"widgets.advanced.axisTypes.date"}];function Bv(e){var t=e.data;return u().createElement("span",null,u().createElement("span",{style:{cursor:"pointer"}},u().createElement(v.Z,{msgId:"widgets.advanced.title"})),u().createElement("button",{className:"close"},t.panel?u().createElement(h.Glyphicon,{glyph:"glyphicon glyphicon-collapse-down"}):u().createElement(h.Glyphicon,{glyph:"glyphicon glyphicon-expand"})))}function zv(e){var t,r,n,o,i,a,l,c,s,p,f,d,y,m=e.data,b=e.onChange,g=void 0===b?function(){}:b;return u().createElement(Lf.Z,{id:"displayCartesian",header:u().createElement(Bv,{data:m}),collapsible:!0,expanded:m.panel,onSwitch:function(e){g("panel",e)}},u().createElement(h.FormGroup,{controlId:"AdvancedOptions"},u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.advanced.displayCartesian"})),u().createElement(h.Col,{sm:6},u().createElement(Cv.Z,{checked:!(!m.cartesian&&!1!==m.cartesian||m.cartesian),onChange:function(e){g("cartesian",!e)}})),u().createElement(h.Col,{componentClass:"label",sm:12},u().createElement(v.Z,{msgId:"widgets.advanced.yAxis"})),u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.advanced.xAxisType"})),u().createElement(h.Col,{sm:6},u().createElement(Zv,{value:m.yAxisOpts&&m.yAxisOpts.type||"-",options:Gv,onChange:function(e){g("yAxisOpts.type",e&&e.value)}})),u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.advanced.hideLabels"})),u().createElement(h.Col,{sm:6},u().createElement(Cv.Z,{checked:!m.yAxis&&!1!==m.yAxis||!m.yAxis,onChange:function(e){g("yAxis",!e)}})),u().createElement(h.Col,{componentClass:h.ControlLabel,sm:12},u().createElement(v.Z,{msgId:"widgets.advanced.format"})),u().createElement(h.Col,{sm:4},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"widgets.advanced.prefix"}),u().createElement(h.FormControl,{placeholder:"e.g.: ~",disabled:!1===m.yAxis,value:null==m||null===(t=m.yAxisOpts)||void 0===t?void 0:t.tickPrefix,type:"text",onChange:function(e){return g("yAxisOpts.tickPrefix",e.target.value)}}))),u().createElement(h.Col,{sm:4},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"widgets.advanced.format"})),u().createElement(kv,{placement:"top",title:u().createElement(v.Z,{msgId:"widgets.advanced.examples"}),text:u().createElement(ns.Z,{msgId:"widgets.advanced.formatExamples"})}),u().createElement(h.FormControl,{placeholder:"e.g.: .2s",disabled:!1===m.yAxis,value:null==m||null===(r=m.yAxisOpts)||void 0===r?void 0:r.format,type:"text",onChange:function(e){return g("yAxisOpts.format",e.target.value)}})),u().createElement(h.Col,{sm:4},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"widgets.advanced.suffix"})),u().createElement(h.FormControl,{placeholder:"e.g.: W",disabled:!1===m.yAxis,value:null==m||null===(n=m.yAxisOpts)||void 0===n?void 0:n.tickSuffix,type:"text",onChange:function(e){return g("yAxisOpts.tickSuffix",e.target.value)}})),u().createElement(h.Col,{sm:12},u().createElement(Mv,{disabled:!1===m.yAxis,value:m.formula,type:"text",onChange:function(e){return g("formula",e.target.value)}})),u().createElement(h.Col,{componentClass:"label",sm:12},u().createElement(v.Z,{msgId:"widgets.advanced.xAxis"})),u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.advanced.xAxisType"})),u().createElement(h.Col,{sm:6},u().createElement(Zv,{value:null!==(o=null==m||null===(i=m.xAxisOpts)||void 0===i?void 0:i.type)&&void 0!==o?o:"-",options:Gv,onChange:function(e){g("xAxisOpts.type",e&&e.value)}})),u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.advanced.hideLabels"})),u().createElement(h.Col,{sm:6},u().createElement(Cv.Z,{checked:null!==(a=null==m||null===(l=m.xAxisOpts)||void 0===l?void 0:l.hide)&&void 0!==a&&a,onChange:function(e){g("xAxisOpts.hide",e)}})),u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.advanced.forceTicks"})),u().createElement(h.Col,{sm:6},u().createElement(Cv.Z,{disabled:null!==(c=null==m||null===(s=m.xAxisOpts)||void 0===s?void 0:s.hide)&&void 0!==c&&c,checked:!(null==m||null===(p=m.xAxisOpts)||void 0===p||!p.nTicks),onChange:function(e){g("xAxisOpts.nTicks",e?200:void 0)}}),u().createElement("span",{style:{position:"relative",top:-5,margin:10}},u().createElement(Ps.Z,{bsStyle:"info",text:u().createElement(v.Z,{msgId:"widgets.advanced.maxXAxisLabels",msgParams:{max:200}})}))),u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.advanced.xAxisAngle"})),u().createElement(h.Col,{sm:6,style:{display:"flex"}},u().createElement(Cv.Z,{disabled:null!==(f=null==m||null===(d=m.xAxisOpts)||void 0===d?void 0:d.hide)&&void 0!==f&&f,checked:void 0!==m.xAxisAngle,onChange:function(e){g("xAxisAngle",e?0:void 0)}}),u().createElement("div",{style:{flexGrow:1,padding:5}},void 0!==m.xAxisAngle?u().createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},u().createElement(Qs.Z,{disabled:!(null==m||null===(y=m.xAxisOpts)||void 0===y||!y.hide),key:"priority",format:{to:function(e){return"".concat(parseInt(e,10),"°")},from:function(e){return Number(e)}},onSlide:function(e){g("xAxisAngle",parseInt(e[0],10))},range:{min:-90,max:90},start:[(0,fe.isNil)(m.xAxisAngle)?0:m.xAxisAngle],step:15,tooltips:[!0]})):u().createElement("div",{style:{textAlign:"center"}},"Auto")))),u().createElement(h.FormGroup,{controlId:"yAxisLabel"},u().createElement(h.Col,{componentClass:"label",sm:12},u().createElement(v.Z,{msgId:"widgets.advanced.legend"})),u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.advanced.yAxisLabel"})),u().createElement(h.Col,{sm:6},u().createElement(h.FormControl,{value:m.yAxisLabel,type:"text",onChange:function(e){return g("yAxisLabel",e.target.value)}}))))}function Uv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uv(Object(r),!0).forEach((function(t){Vv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qv=[{name:"global.colors.random",schema:"qualitative",options:{base:190,range:360,options:{}}},{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}}],Hv=function(e){return"pie"!==e?qv.filter((function(e){return"qualitative"!==e.schema})):qv},$v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"widgets.".concat(e,".").concat(t.type||t.widgetType||"default")},Yv=u().createElement(v.Z,{msgId:$v("placeHolder")});const Kv=function(e){var t=e.hasAggregateProcess,r=e.data,n=void 0===r?{options:{}}:r,o=e.onChange,i=void 0===o?function(){}:o,a=e.options,l=void 0===a?[]:a,c=e.formOptions,s=void 0===c?{showGroupBy:!0,showUom:!1,showColorRampSelector:!0,showLegend:!0,advancedOptions:!0}:c,p=e.aggregationOptions,f=void 0===p?[]:p,d=e.sampleChart;return u().createElement(h.Row,null,u().createElement(yv,{title:u().createElement(v.Z,{msgId:"widgets.chartOptionsTitle"})}),u().createElement(h.Col,{xs:12,style:{position:"sticky",top:0,zIndex:1,background:"linear-gradient(to top, rgba(255,255,255,0), rgba(255,255,255, 1) 30px)"}},u().createElement("div",{style:{marginBottom:"30px"}},d)),u().createElement(h.Col,{xs:12},u().createElement(h.Form,{className:"chart-options-form",horizontal:!0},s.showGroupBy?u().createElement(h.FormGroup,{controlId:"groupByAttributes",className:"mapstore-block-width"},u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:$v("groupByAttributes",n)})),u().createElement(h.Col,{sm:6},u().createElement(zo.ZP,{value:n.options&&n.options.groupByAttributes,options:l,placeholder:Yv,onChange:function(e){i("options.groupByAttributes",e&&e.value)}}))):null,u().createElement(h.FormGroup,{controlId:"aggregationAttribute",className:"mapstore-block-width"},u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:$v("aggregationAttribute",n)})),u().createElement(h.Col,{sm:6},u().createElement(zo.ZP,{value:n.options&&n.options.aggregationAttribute,options:l,placeholder:Yv,onChange:function(e){i("options.aggregationAttribute",e&&e.value)}}))),t?u().createElement(h.FormGroup,{controlId:"aggregateFunction",className:"mapstore-block-width"},u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:$v("aggregateFunction",n)})),u().createElement(h.Col,{sm:6},u().createElement(zo.ZP,{value:n.options&&n.options.aggregateFunction,options:f,placeholder:Yv,onChange:function(e){i("options.aggregateFunction",e&&e.value)}}))):null,s.showUom?u().createElement(h.FormGroup,{controlId:"uom"},u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:$v("uom",n)})),u().createElement(h.Col,{sm:6},u().createElement(h.FormControl,{value:(0,fe.get)(n,"options.seriesOptions[0].uom"),type:"text",onChange:function(e){return i("options.seriesOptions.[0].uom",e.target.value)}}))):null,s.showColorRampSelector?u().createElement(h.FormGroup,{controlId:"colorRamp",className:"mapstore-block-width"},u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:$v("colorRamp",n)})),u().createElement(h.Col,{sm:6},u().createElement(ou,{items:Hv(n.type),value:(0,fe.head)(Hv(n.type).filter((function(e){return n.autoColorOptions&&e.name===n.autoColorOptions.name}))),samples:"pie"===n.type?5:1,onChange:function(e){i("autoColorOptions",Wv(Wv({},e.options),{},{name:e.name}))}}))):null,s.showLegend?u().createElement(h.FormGroup,{controlId:"displayLegend"},u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:$v("displayLegend",n)})),u().createElement(h.Col,{sm:6},u().createElement(Cv.Z,{checked:n.legend,onChange:function(e){i("legend",e)}}))):null,!s.advancedOptions||"chart"!==n.widgetType||"bar"!==n.type&&"line"!==n.type?null:u().createElement(zv,{data:n,onChange:i}))))},Xv=function(e){var t=e.data,r=void 0===t?{}:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.sampleChart;return u().createElement(h.Row,null,u().createElement(yv,{title:u().createElement(v.Z,{msgId:"widgets.widgetOptionsTitle"})}),u().createElement(h.Col,{key:"sample",xs:12},u().createElement("div",{style:{marginBottom:"30px"}},i)),u().createElement(h.Col,{key:"form",xs:12},u().createElement(h.Form,{className:"widget-options-form",horizontal:!0},u().createElement(h.FormGroup,{controlId:"groupByAttributes"},u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.title"})),u().createElement(h.Col,{sm:6},u().createElement(h.FormControl,{value:r.title,type:"text",onChange:function(e){return o("title",e.target.value)}}))),u().createElement(h.FormGroup,{controlId:"aggregationAttribute"},u().createElement(h.Col,{componentClass:h.ControlLabel,sm:6},u().createElement(v.Z,{msgId:"widgets.description"})),u().createElement(h.Col,{sm:6},u().createElement(h.FormControl,{value:r.description,type:"text",onChange:function(e){return o("description",e.target.value)}}))))))};var Qv=r(87017),Jv=r(73339),eh=r(30881),th=r(8488),rh=r(39837),nh=r(42415);function oh(){return(oh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ih=(0,Fl.Z)((function(e){var t=e.loading,r=e.data;return t||!r}),{width:500,height:200}),ah=pv((function(e){var t=e.featureTypeProperties;return 0===(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"":t;return 0!==r.indexOf("gml:")})).length}))(Ev),lh=jv(Kv),ch=(0,_.compose)(Jv.Z,eh.Z,th.Z,Qv.Z,ih,nh.Z,rh.Z)(dv.Z),sh=fv(dv.Z),uh={width:430,height:200},ph=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.hasAggregateProcess;return e.aggregationAttribute&&e.groupByAttributes&&(!r||r&&e.aggregateFunction)},fh=uv(sv),dh=function(e){var t=e.data,r=void 0===t?{}:t,n=e.layer,o=e.dependencies,i=void 0===o?{}:o,a=e.setValid,l=void 0===a?function(){}:a,c=e.hasAggregateProcess;return ph(r.options,{hasAggregateProcess:c})?u().createElement(ch,oh({key:"preview-chart",onLoad:function(){return l(!0)},onLoadError:function(){return l(!1)},isAnimationActive:!1,dependencies:i,dependenciesMap:r.dependenciesMap},uh,{type:r.type,xAxisOpts:r.xAxisOpts,yAxisOpts:r.yAxisOpts,formula:r.formula,legend:r.legend,cartesian:r.cartesian,layer:r.layer||n,filter:r.filter,geomProp:r.geomProp,mapSync:r.mapSync,autoColorOptions:r.autoColorOptions,options:r.options,yAxis:r.yAxis,xAxisAngle:r.xAxisAngle,yAxisLabel:r.yAxisLabel})):u().createElement(sh,oh({hasAggregateProcess:c,key:"sample-chart",isAnimationActive:!1},uh,{type:r.type,autoColorOptions:r.autoColorOptions,legend:r.legend,cartesian:r.cartesian,yAxis:r.yAxis}))};const yh=(0,_.compose)((0,_.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o,a=e.hasAggregateProcess;n&&!ph(r.options,{hasAggregateProcess:a})&&i(!1)}}),(0,_.setDisplayName)("ChartWizard"))((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.setValid,c=void 0===l?function(){}:l,s=e.data,p=void 0===s?{}:s,f=e.layer,d=void 0===f?{}:f,y=e.step,m=void 0===y?0:y,b=e.types,g=e.featureTypeProperties,v=e.dependencies,h=e.hasAggregateProcess;return u().createElement(fh,{step:m,setPage:a,onFinish:o,isStepValid:function(e){return 0===e?p.chartType:1!==e||ph(p.options,{hasAggregateProcess:h})},hideButtons:!0},u().createElement(ah,{key:"type",featureTypeProperties:g,type:p.type,onSelect:function(e){r("type",e)}}),u().createElement(lh,{hasAggregateProcess:h,dependencies:v,key:"chart-options",featureTypeProperties:g,types:b,data:p,onChange:r,layer:p.layer||d,sampleChart:dh({hasAggregateProcess:h,data:p,layer:p.layer||d,dependencies:v,setValid:function(e){return c(e&&ph(p.options,{hasAggregateProcess:h}))}})}),u().createElement(Xv,{key:"widget-options",data:p,onChange:r,layer:p.layer||d,sampleChart:dh({hasAggregateProcess:h,data:p,layer:p.layer||d,dependencies:v,setValid:function(e){return c(e&&ph(p.options,{hasAggregateProcess:h}))}})}))}));function mh(e){return function(e){if(Array.isArray(e))return bh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return bh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const gh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=e.selected,n=e.stepButtons,o=void 0===n?[]:n,i=e.onProceed,a=void 0===i?function(){}:i;return u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[].concat(mh(o),[{onClick:a,disabled:!t,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",visible:r,glyph:"arrow-right"}])})},vh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.children;return u().createElement("div",{className:"mapstore-flex-container"},u().createElement("div",{className:"m-header bg-body widgets-builder-header"},u().createElement(h.Row,null,u().createElement(h.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},u().createElement(qe.Z,{onClick:function(){return r()},className:"pull-left on-close-btn square-button no-border "},u().createElement(h.Glyphicon,{glyph:"1-close"})),u().createElement("span",{style:{padding:"50px 0 0 0",fontSize:16}},u().createElement(v.Z,{msgId:"widgets.builder.header.title"})),u().createElement("div",{style:{display:"flex"},className:"square-button pull-right no-border"},u().createElement(h.Glyphicon,{glyph:"stats",className:"text-primary"})))),u().createElement(h.Row,{className:"text-center"},u().createElement("div",{className:"m-padding-md"},n))))},hh=vh;function Oh(e){return(Oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wh(e){return function(e){if(Array.isArray(e))return Eh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Eh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Eh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ph(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sh(Object(r),!0).forEach((function(t){jh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ch(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function xh(e){var t=function(e,t){if("object"!==Oh(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==Oh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===Oh(t)?t:String(t)}var Th=r(89255),kh=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.dataProp,i=void 0===o?"items":o,a=n.initialStreamDebounce,l=void 0===a?0:a,c=n.throttleTime,s=void 0===c?500:c;return e.take(1).concat(e.debounceTime(l)).switchMap((function(e){return r(e,0).startWith({loading:!0}).concat(Th.Observable.of({loading:!1})).concat(t.throttleTime(s).distinct().exhaustMap((function(t){return r(e,t).startWith({loading:!0}).concat(Th.Observable.of({loading:!1}))}))).scan((function(e,t){var r=e[i],n=Ch(e,[i].map(xh)),o=t[i],a=Ch(t,[i].map(xh));return Ph(Ph(jh({},i,o?[].concat(wh(r||[]),wh(o)):r||[]),n),a)})).map((function(e){return Ph({},e)}))})).catch((function(e){return Th.Observable.of({loading:!1,error:e})}))};function Ih(e){return(Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ah(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ah(Object(r),!0).forEach((function(t){zh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ah(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nh(e,t,r){return t&&Rh(e.prototype,t),r&&Rh(e,r),e}function _h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lh(e,t)}function Lh(e,t){return(Lh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Bh(e);if(t){var o=Bh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Zh(this,r)}}function Zh(e,t){return!t||"object"!==Ih(t)&&"function"!=typeof t?Gh(e):t}function Gh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bh(e){return(Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Uh=function(e){var t=e.loadPage,r=e.scrollSpyOptions,n=e.loadStreamOptions,o=e.loadMoreStreamOptions,i=e.hasMore,a=e.isScrolled;return(0,_.compose)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return Th.Observable.empty()},t=arguments.length>1?arguments[1]:void 0;return(0,_.mapPropsStream)((function(r){var n=(0,_.createEventHandler)(),o=n.handler,i=n.stream,a=(0,_.createEventHandler)(),l=a.handler,c=a.stream;return r.combineLatest(kh(c,i,e,t).startWith({}),(function(e,t){return Ph(Ph(Ph({},e),t),{},{onLoadMore:o,loadFirst:l})}))}))}(t,o),(0,_.defaultProps)({hasMore:i,isScrolled:a}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataProp,r=void 0===t?"items":t,n=e.querySelector,o=e.closest,i=void 0!==o&&o,a=e.loadingProp,l=void 0===a?"loading":a,c=e.skip,s=void 0===c?0:c,p=e.pageSize,d=void 0===p?10:p,y=e.offsetSize,m=void 0===y?200:y;return function(e){var t,o;return o=t=function(t){_h(a,t);var o=Mh(a);function a(){var e;Dh(this,a);for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return zh(Gh(e=o.call.apply(o,[this].concat(c))),"findScrollDomNode",(function(){if(!e.isMounded)return null;var t=Tu().findDOMNode(Gh(e));return t&&i&&n?t.closest(n||"*"):t&&(n?t.querySelector(n):t)})),zh(Gh(e),"onScroll",(function(){var t=Fh({skip:s,pageSize:d,offsetSize:m},e.props.scrollOptions),n=e.findScrollDomNode();n&&e.props.isScrolled({div:n,offset:t.offsetSize})&&(!r||e.props[r]&&e.props[r].length)&&(!l||!e.props[l])&&e.props.hasMore(e.props)&&e.props.onLoadMore(r?Math.ceil((e.props[r].length-t.skip)/t.pageSize):null)})),e}return Nh(a,[{key:"componentDidMount",value:function(){this.isMounded=!0;var e=this.findScrollDomNode();e&&(this.listenerAdded=!0,e.addEventListener("scroll",this.onScroll,!1),this.onScroll())}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.findScrollDomNode();n&&!this.listenerAdded&&(n.addEventListener("scroll",this.onScroll,!1),this.listenerAdded=!0),!n||r&&this.props[r]&&this.props[r]===e[r]||setTimeout((function(){return t.onScroll()}),300)}},{key:"componentWillUnmount",value:function(){this.isMounded=!1,this.listenerAdded=!1;var e=this.findScrollDomNode();e&&e.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){return u().createElement(e,this.props)}}]),a}(u().Component),zh(t,"propTypes",{hasMore:f().func,onLoadMore:f().func,isScrolled:f().func,scrollOptions:f().object}),zh(t,"defaultProps",{onLoadMore:function(){},hasMore:function(){return!0},isScrolled:function(e){var t=e.div,r=e.offset;return t.scrollTop+t.clientHeight>=t.scrollHeight-r}}),o}}(r,n))};var Wh=r(79105),Vh=r(14471),qh=r(75480),Hh=(0,Hc.Z)(["placeholder","clearValueText","noResultsText"])(r(43129).ZP);const $h=function(e){var t=e.isValidServiceSelected,r=e.services,n=e.selectedService,o=e.onChangeCatalogMode,i=void 0===o?function(){}:o,a=e.onChangeSelectedService,l=void 0===a?function(){}:a;return u().createElement(h.InputGroup,null,u().createElement(Hh,{clearValueText:"catalog.clearValueText",noResultsText:"catalog.noResultsText",clearable:!0,options:r,value:n,onChange:function(e){return l(e&&e.value?e.value:"")},placeholder:"catalog.servicePlaceholder"}),t?u().createElement(h.InputGroup.Addon,{className:"btn",onClick:function(){return i("edit",!1)}},u().createElement(h.Glyphicon,{glyph:"pencil"})):null,u().createElement(h.InputGroup.Addon,{className:"btn",onClick:function(){return i("edit",!0)}},u().createElement(h.Glyphicon,{glyph:"plus"})))};var Yh=(0,Hc.Z)("placeholder")(h.FormControl);const Kh=function(e){var t=e.onSearchTextChange,r=void 0===t?function(){}:t,n=e.searchText,o=e.title,i=void 0===o?u().createElement(v.Z,{msgId:"catalog.title"}):o,a=e.catalog,l=e.services,c=e.isValidServiceSelected,s=e.showCatalogSelector;return u().createElement(h.Grid,{className:"catalog-form",fluid:!0},u().createElement(h.Row,null,u().createElement(h.Col,{xs:12},u().createElement("h4",{className:"text-center"},i),s?u().createElement(h.FormGroup,null,u().createElement($h,{servieces:l,catalog:a,isValidServiceSelected:c})):null,u().createElement(h.FormGroup,{controlId:"catalog-form"},u().createElement(Yh,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:n,onChange:function(e){return r(e.currentTarget.value)}})))))};function Xh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xh(Object(r),!0).forEach((function(t){Jh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eO={csw:It.Z,wms:At.ZP,wmts:Ft.Z,backgrounds:Cr.Z},tO=u().createElement(Vh.Z,{glyph:"geoserver",padding:20}),rO=(0,_.compose)((0,Fl.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&t})),(0,Dl.Z)((function(e){var t=e.loading,r=e.error;return!t&&r}),{title:u().createElement(v.Z,{msgId:"catalog.error"}),style:{transform:"translateY(50%)"}}),(0,Dl.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&!t}),{title:u().createElement(v.Z,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(qc.Z),nO=function(e){var t=e.records,r=e.result,n=void 0===r?{}:r;return{items:(t||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title&&(0,fe.isObject)(e.title)&&e.title.default||e.title,caption:e.identifier,description:e.description,preview:e.thumbnail?u().createElement("img",{src:"thumbnail"}):tO,record:e}})),total:n&&n.numberOfRecordsMatched}};const oO=(0,_.compose)((0,Wh.Z)("searchText","setSearchText",""),Uh({loadPage:function(e){var t=e.text,r=e.catalog,n=void 0===r?{}:r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Yt.Observable.fromPromise(eO[n.type].textSearch(n.url,10*o+("csw"===n.type?1:0),10,t)).map((function(e){return{result:e,records:(0,Cg.eL)(n.type,e||[],{url:n&&n.url,service:n})}})).map(nO)},scrollSpyOptions:{querySelector:".ms2-border-layout-body",pageSize:10}}),(0,_.mapPropsStream)((function(e){return e.merge(e.take(1).switchMap((function(t){var r=t.catalog,n=t.loadFirst,o=void 0===n?function(){}:n;return e.debounceTime(500).startWith({searchText:"",catalog:r}).distinctUntilKeyChanged("searchText").do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,r=e.catalog;return o({text:t,catalog:r})})).ignoreElements()})))})))((function(e){var t=e.setSearchText,r=void 0===t?function(){}:t,n=e.selected,o=e.onRecordSelected,i=e.loading,a=e.searchText,l=e.items,c=void 0===l?[]:l,s=e.total,p=e.catalog,f=e.services,d=e.title,y=e.showCatalogSelector,m=e.error;return u().createElement(Go.Z,{className:"compat-catalog",header:u().createElement(Kh,{services:f||[p],showCatalogSelector:y,title:d,searchText:a,onSearchTextChange:r}),footer:u().createElement("div",{className:"catalog-footer"},u().createElement("span",null,i?u().createElement(qh.Z,null):null),(0,fe.isNil)(s)?null:u().createElement("span",{className:"res-info"},u().createElement(v.Z,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:c.length,total:s}})))},u().createElement(rO,{items:c.map((function(e){return e===n||n&&e&&e.record&&n.identifier===e.record.identifier?Qh(Qh({},e),{},{selected:!0}):e})),loading:i,error:m,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.record;return o(t,p)}}))})),iO=(0,_.defaultProps)({title:u().createElement(v.Z,{msgId:"widgets.builder.wizard.selectALayer"})})(oO);var aO=(0,_.compose)((0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),(0,d.connect)((0,N.P1)(me.R7,(function(e){return{catalog:e}})))))(iO);const lO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,o=void 0===n?function(){}:n,i=e.onLayerChoice,a=void 0===i?function(){}:i,l=e.stepButtons,c=e.selected,s=e.error,p=e.canProceed,f=e.layer,d=e.catalog,y=e.catalogServices;return u().createElement(Go.Z,{className:"bg-body layer-selector",header:u().createElement(hh,{onClose:r},u().createElement(gh,{stepButtons:l,canProceed:p,onProceed:function(){return a(f)}}),c&&!p&&s?u().createElement(Ps.Z,{trigger:!1,glyph:"warning-sign",bsStyle:"warning",title:u().createElement(id,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:u().createElement(ad,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},u().createElement(aO,{services:y,selected:c,catalog:d,onRecordSelected:function(e){return o(e)}}))};function cO(e){return function(e){if(Array.isArray(e))return sO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var uO=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTypeSelection";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},pO=function(e){switch(e){case 0:return"widgets.builder.wizard.configureChartOptions";case 1:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},fO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function dO(){return(dO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yO(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var mO=(0,d.connect)(Jg,{setPage:de.YA,setValid:function(e){return(0,de.t4)("valid",e)},onEditorChange:de.Rz,insertWidget:de.Qe},Qg)((0,_.compose)(Sg({needWPS:!1}),(0,_.renameProps)({editorData:"data",onEditorChange:"onChange"}))(yh)),bO=(0,_.compose)((0,d.connect)(Jg,{openFilterEditor:de.fy,setPage:de.YA,onChange:de.Rz,insertWidget:de.Qe},Qg),Ng,Ug(),Hg((function(e){return 1===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,n=e.editorData,o=void 0===n?{}:n,i=e.valid,a=e.setPage,l=void 0===a?function(){}:a,c=e.onFinish,s=void 0===c?function(){}:c,p=e.stepButtons,f=void 0===p?[]:p,d=e.openFilterEditor,y=void 0===d?function(){}:d;return u().createElement(Bo.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return l(Math.max(0,r-1))},visible:r>0,glyph:"arrow-left",tooltipId:uO(r)}].concat(cO(f),[{visible:r>0,onClick:y,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return l(Math.min(r+1,2))},visible:!(1!==r),disabled:1===r&&!i,glyph:"arrow-right",tooltipId:pO(r)},{onClick:function(){return s(Math.min(r+1,1))},visible:2===r,glyph:"floppy-disk",tooltipId:fO(r,o)}])})}));const gO=(0,_.compose)((0,d.connect)(Jg),_g,(0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),(0,_.renderComponent)(Fg(lO))))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.exitButton,i=e.editorData,a=e.toggleConnection,l=e.availableDependencies,c=void 0===l?[]:l,s=e.dependencies,p=yO(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return u().createElement("div",{className:"mapstore-chart-advance-options"},u().createElement(Go.Z,{header:u().createElement(hh,{onClose:n},u().createElement(bO,{exitButton:o,editorData:i,toggleConnection:a,availableDependencies:c,onClose:n}))},t?u().createElement(mO,dO({dependencies:s},p)):null))}));function vO(e){return function(e){if(Array.isArray(e))return hO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return hO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var OO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"},wO=(0,Hc.Z)("placeholder")(h.FormControl),EO=(0,Hc.Z)("placeholder")(Wa());const SO=function(e){var t=e.data,r=void 0===t?{}:t,n=e.onChange,o=void 0===n?function(){}:n;return u().createElement("div",null,u().createElement(h.Col,{key:"form",xs:12},u().createElement(h.Form,null,u().createElement(h.FormGroup,{controlId:"title"},u().createElement(h.Col,{sm:12},u().createElement(wO,{style:{marginBottom:10},placeholder:"widgets.builder.wizard.titlePlaceholder",value:r.title,type:"text",onChange:function(e){return o("title",e.target.value)}}))))),u().createElement(EO,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["image","link"]]},placeholder:"widgets.builder.wizard.textPlaceholder",value:r&&r.text||"",onChange:function(e){return o("text",e)}}))};var PO=uv(sv),jO=(0,_.compose)((0,d.connect)(Jg,{setPage:de.YA,insertWidget:de.Qe,onResetChange:de.Rz},Qg),(0,_.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return r("widgetType",void 0)}}}})),Ug())((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,n=e.editorData,o=void 0===n?{}:n,i=e.stepButtons,a=void 0===i?[]:i,l=e.onFinish,c=void 0===l?function(){}:l;return u().createElement(Bo.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(vO(a),[{onClick:function(){return c(Math.min(r+1,1))},visible:0===r,glyph:"floppy-disk",tooltipId:OO(r,o)}])})})),CO=(0,d.connect)(Jg,{onChange:de.Rz},Qg)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.step,c=void 0===l?0:l,s=e.editorData,p=void 0===s?{}:s;return u().createElement(PO,{step:c,setPage:a,onFinish:o,hideButtons:!0},u().createElement(SO,{key:"widget-options",data:p,onChange:r}))})),xO=r(53370),TO=r.n(xO);function kO(e){return function(e){if(Array.isArray(e))return IO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return IO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?IO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AO(Object(r),!0).forEach((function(t){DO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function DO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RO(e){return function(e){if(Array.isArray(e))return NO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return NO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _O=(0,_.compose)((0,_.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,r=void 0===t?[]:t,n=e.options,o=void 0===n?{}:n;return{attributes:r.filter((function(e){return!(0,gg.isGeometryType)(e)})).map((function(e){return FO(FO({},e),{},{label:e.name,attribute:e.name,hide:o.propertyName&&o.propertyName.indexOf(e.name)<0})}))}})),pv((function(e){var t=e.attributes;return 0===(void 0===t?[]:t).length})),(0,_.withHandlers)({onChange:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.options,o=void 0===n?{}:n;return function(e,t){return r("options.propertyName",function(e,t,r){var n=(0,fe.castArray)(t);return r?e.filter((function(e){return!(0,fe.includes)(n,e)})):(0,fe.uniq)([].concat(RO(e),RO(n)))}(o&&o.propertyName||[],e,t))}}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.titleMsg,o=void 0===n?"featuregrid.columns":n,i=e.onChange,a=void 0===i?function(){}:i,l=e.attributes,c=void 0===l?[]:l;return u().createElement("div",{className:"bg-body data-attribute-selector",style:r},u().createElement("h4",{className:"text-center"},u().createElement("strong",null,u().createElement(v.Z,{msgId:o}))),u().createElement(TO(),{rowKey:"id",columns:[{name:"",key:"attribute"}],rowGetter:function(e){return c[e]},rowsCount:c.length,rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:function(e){return a(e.map((function(e){return c[e.rowIdx].name})),!1)},onRowsDeselected:function(e){return a(e.map((function(e){return c[e.rowIdx].name})),!0)},selectBy:{indexes:c.reduce((function(e,t,r){return[].concat(kO(e),kO(t.hide?[]:[r]))}),[])}}}))}));const LO=function(e){var t=e.data,r=void 0===t?{options:{}}:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.featureTypeProperties,a=e.sampleChart;return u().createElement(h.Row,null,u().createElement(yv,{title:u().createElement(v.Z,{msgId:"widgets.builder.wizard.configureTableOptions"})}),u().createElement(h.Col,{xs:12},u().createElement("div",null,a)),u().createElement(h.Col,{xs:12},u().createElement(h.Form,{className:"chart-options-form",horizontal:!0},u().createElement(_O,{options:r.options,onChange:o,attributes:i}),r.options&&r.options.columnSettings?u().createElement(qe.Z,{style:{float:"right"},onClick:function(){return o("options.columnSettings",void 0)}},u().createElement(v.Z,{msgId:"widgets.builder.wizard.resetColumnsSizes"})):null)))};var MO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute&&e.groupByAttributes},ZO=uv(sv);const GO=(0,_.compose)((0,_.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o;n&&!MO(r.options)&&i(!1)}}))((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.data,c=void 0===l?{}:l,s=e.layer,p=void 0===s?{}:s,f=e.step,d=void 0===f?0:f,y=e.types,m=e.featureTypeProperties,b=e.dependencies;return u().createElement(ZO,{step:d,setPage:a,onFinish:o,isStepValid:function(e){return 1!==e||MO(c.options)},hideButtons:!0},u().createElement(LO,{dependencies:b,key:"chart-options",featureTypeProperties:m,types:y,data:c,onChange:r,layer:c.layer||p}),u().createElement(Xv,{key:"widget-options",data:c,onChange:r,layer:c.layer||p}))}));function BO(e){return function(e){if(Array.isArray(e))return zO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return zO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var UO=function(e){return e&&e.options&&e.options.propertyName&&0!==e.options.propertyName.length},WO=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTableOptions";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},VO=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":"widgets.builder.errors.checkAtLeastOneAttribute"},qO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function HO(){return(HO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function $O(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var YO=(0,d.connect)(Jg,{setPage:de.YA,setValid:function(e){return(0,de.t4)("valid",e)},onEditorChange:de.Rz,insertWidget:de.Qe},Qg)((0,_.compose)(Sg(),(0,_.renameProps)({editorData:"data",onEditorChange:"onChange"}),(0,_.mapPropsStream)((function(e){return e.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.featureTypeProperties;return t===n})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.data,a=void 0===i?{}:i;o&&r.length>0&&!(0,fe.get)(a,"options.propertyName")&&o("options.propertyName",r.filter((function(e){return!(0,gg.isGeometryType)(e)})).map((function(e){return e.name})))})).ignoreElements())})))(GO)),KO=(0,_.compose)((0,d.connect)(Jg,{openFilterEditor:de.fy,setPage:de.YA,onChange:de.Rz,insertWidget:de.Qe},Qg),Ng,Ug(),Hg((function(e){return 0===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,r=void 0===t?function(){}:t,n=e.step,o=void 0===n?0:n,i=e.stepButtons,a=void 0===i?[]:i,l=e.editorData,c=void 0===l?{}:l,s=e.setPage,p=void 0===s?function(){}:s,f=e.onFinish,d=void 0===f?function(){}:f;return u().createElement(Bo.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return p(Math.max(0,o-1))},visible:o>0,glyph:"arrow-left",tooltipId:WO(o)}].concat(BO(a),[{visible:o>=0,onClick:r,disabled:!UO(c),glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return p(Math.min(o+1,2))},visible:0===o,disabled:0===o&&!UO(c),glyph:"arrow-right",tooltipId:VO(0,UO(c))},{onClick:function(){return d(Math.min(o+1,1))},visible:1===o,glyph:"floppy-disk",tooltipId:qO(o,c)}])})}));const XO=(0,_.compose)((0,d.connect)(Jg),_g,(0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),(0,_.renderComponent)(Fg(lO))))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.editorData,i=void 0===o?{}:o,a=e.exitButton,l=e.toggleConnection,c=e.availableDependencies,s=void 0===c?[]:c,p=e.dependencies,f=$O(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return u().createElement(Go.Z,{header:u().createElement(hh,{onClose:n},u().createElement(KO,{editorData:i,exitButton:a,toggleConnection:l,availableDependencies:s,onClose:n}),0===(0,fe.get)(i,"options.propertyName.length")?u().createElement(Ps.Z,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:u().createElement(v.Z,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?u().createElement(YO,HO({editorData:i,dependencies:p},f)):null)}));var QO=r(48860);function JO(e){return function(e){if(Array.isArray(e))return ew(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ew(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ew(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"},rw=r(5993),nw=r(51768),ow=r(75927),iw=r(16701),aw=(0,Dl.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,r=void 0===t?{}:t;return!r.layers||0===(r.layers||[]).filter((function(e){return"background"!==e.group})).length}),(function(){return{glyph:"1-layer",title:u().createElement(v.Z,{msgId:"widgets.selectMap.TOC.noLayerTitle"}),description:u().createElement(v.Z,{msgId:"widgets.selectMap.TOC.noLayerDescription"})}}))(iw.Z),lw=(0,nw.Z)(ow.Z),cw=(0,_.compose)(nw.Z,(0,_.withProps)((function(e){var t=e.selectedNode;return{title:t&&t.title}})),(0,rw.Z)("title"))(yv);const sw=function(e){var t=e.preview,r=e.map,n=void 0===r?{}:r,o=e.onChange,i=void 0===o?function(){}:o,a=e.selectedNodes,l=void 0===a?[]:a,c=e.onNodeSelect,s=void 0===c?function(){}:c,p=e.editNode,f=e.closeNodeEditor,d=void 0===f?function(){}:f,y=e.isLocalizedLayerStylesEnabled;return u().createElement("div",null,u().createElement(yv,{title:u().createElement(v.Z,{msgId:"widgets.builder.wizard.configureMapOptions"})}),u().createElement("div",{key:"sample",style:{marginTop:10}},u().createElement(yv,{title:u().createElement(v.Z,{msgId:"widgets.builder.wizard.preview"})}),u().createElement("div",{style:{width:"100%",height:"200px"}},t)),p?[u().createElement(cw,{map:n,editNode:p}),u().createElement(lw,{closeNodeEditor:d,editNode:p,map:n,onChange:i,isLocalizedLayerStylesEnabled:y})]:[u().createElement(yv,{title:u().createElement(v.Z,{msgId:"layers"})}),u().createElement(aw,{selectedNodes:l,onSelect:s,onChange:i,map:n})])};var uw=r(92936);const pw=(0,_.compose)((0,_.withHandlers)({onMapViewChanges:function(e){var t=e.onChange,r=void 0===t?function(){}:t;return function(e){r("map",e),r("mapStateSource",e.mapStateSource)}}}))(uw.Z);var fw=uv(sv);const dw=(0,_.compose)((0,d.connect)((0,N.P1)(fb.xI,(function(e){return{widgetSelectionActive:e}}))),(0,Wc.Z)((function(e){return e.widgetSelectionActive}),(function(){return u().createElement("div",{style:{margin:"auto"}},u().createElement(v.Z,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0})),yw=(0,d.connect)((0,N.P1)(fb.E2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editNode;return{editNode:t}})),{setEditNode:function(e){return(0,de.t4)("editNode",e)},closeNodeEditor:function(){return(0,de.t4)("editNode",void 0)}});function mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mw(Object(r),!0).forEach((function(t){gw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vw(e){return function(e){if(Array.isArray(e))return hw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return hw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Ow=(0,_.compose)((0,_.withProps)((function(e){var t=e.editorData,r=void 0===t?{}:t;return{layers:r.map&&r.map.layers}})),(0,d.connect)((function(){return{}}),{setLayers:function(e){return(0,de.Rz)("map.layers",e)}}),(0,_.withHandlers)({addLayer:function(e){var t=e.layers,r=void 0===t?[]:t,n=e.setLayers,o=void 0===n?function(){}:n,i=e.catalog;return function(e){return i.localizedLayerStyles?o([].concat(vw(r),[(0,ie.normalizeLayer)(bw(bw({},e),{},{localizedLayerStyles:i.localizedLayerStyles}))])):o([].concat(vw(r),[(0,ie.normalizeLayer)(e)]))}},removeLayersById:function(e){var t=e.layers,r=void 0===t?[]:t,n=e.setLayers,o=void 0===n?function(){}:n;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o(r.filter((function(t){return!(0,fe.find)((0,fe.castArray)(e),(function(e){return e===t.id}))})))}}})),ww=(0,_.withHandlers)({onRemoveSelected:function(e){var t=e.selectedLayers,r=void 0===t?[]:t,n=e.removeLayersById,o=void 0===n?function(){}:n,i=e.onNodeSelect,a=void 0===i?function(){}:i;return function(){o(r),r.forEach((function(e){return a(e,"layer",!1)}))}}});function Ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ew(Object(r),!0).forEach((function(t){Pw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ew(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const jw=(0,_.compose)((0,d.connect)((function(){return{}}),{setMap:function(e){return(0,de.Rz)("map",e)}}),(0,_.withHandlers)({isEpsgSupported:function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.selectedNodes,o=void 0===n?[]:n;return function(){var e=r.map.layers,t=o.map((function(t){return e.find((function(e){return e.id===t}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),n=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"},i=!!(0,fe.head)(t)&&"differentCRS"!==n.crs&&n.crs;return i&&Me.default.defs(i)}},zoomTo:function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.setMap,o=void 0===n?function(){}:n;return function(e){var t=r.map,n=r.map.layers,i=e.map((function(e){return n.find((function(t){return t.id===e}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),a=i.length>1?i.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),i[0]):i[0],l=0,c=function(e){if((0,fe.isArray)(e))return e.map((function(e){return"string"==typeof e||e instanceof String?Number(e):e}));if((0,fe.isObject)(e)){var t=(0,fe.mapValues)(e,(function(e){return"string"==typeof e||e instanceof String?Number(e):e}));return[t.minx,t.miny,t.maxx,t.maxy]}return null}(a.bounds),s=Ko.default.reprojectBbox(c,a.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(s){var u=Ko.default.reproject(ae.default.getCenterForExtent(c,a.crs),a.crs,"EPSG:4326");if("EPSG:4326"===a.crs&&c&&c[0]<=-180&&c[1]<=-90&&c[2]>=180&&c[3]>=90)l=1;else{var p=Ko.default.reprojectBbox(c,a.crs,t.projection||"EPSG:4326");l=ae.default.getZoomForExtent(p,t.size,0,21,null)}var f={minx:s[0],miny:s[1],maxx:s[2],maxy:s[3]},d=Sw(Sw({},t.bbox),{},{bounds:f});o(Sw(Sw({},r.map),{},{center:u,zoom:l,bbox:d,mapStateSource:"tool"}))}}}}),(0,_.withProps)((function(e){var t=e.isEpsgSupported;return{epsgSupported:(void 0===t?function(){}:t)()}}))),Cw=(0,_.compose)((0,_.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData,o=void 0===n?{}:n;return{availableDependencies:r.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),(0,_.withProps)((function(e){var t=e.editorData;return{canConnect:!0,connected:!!(void 0===t?{}:t).mapSync}})),Dg({center:"center",zoom:"zoom",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"})),xw=(0,_.compose)((0,d.connect)(Jg,{setPage:de.YA,onChange:de.Rz,insertWidget:de.Qe},Qg),Ow,yw,ww,jw,(0,_.branch)((function(e){return!!e.editNode}),(0,_.withProps)((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.setEditNode,o=void 0===n?function(){}:n;return{buttons:[{visible:1===r.length,tooltipId:"close",glyph:"1-close",onClick:function(){return o(!1)}}]}})),(0,_.withProps)((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.epsgSupported,o=void 0!==n&&n,i=e.onRemoveSelected,a=void 0===i?function(){}:i,l=e.setEditNode,c=void 0===l?function(){}:l,s=e.zoomTo,u=void 0===s?function(){}:s;return{tocButtons:[{visible:r.length>0,glyph:"zoom-to",tooltipId:1===r.length?"toc.toolZoomToLayerTooltip":"toc.toolZoomToLayersTooltip",disabled:!o,onClick:o?function(){return u(r)}:function(){}},{visible:1===r.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){return c(r[0])}},{onClick:function(){return a()},visible:r.length>0,glyph:"trash",tooltipId:"toc.toolTrashLayerTooltip"}]}}))),Cw,Ug(void 0,{tooltipId:"widgets.builder.wizard.backToMapSelection"}),Hg((function(e){return 0===e.step})));var Tw=(0,_.compose)((0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),(0,d.connect)((0,N.P1)(me.R7,(function(e){return{catalog:e}})))))(iO),kw=r(91312);function Iw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Aw(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Fw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fw(Object(r),!0).forEach((function(t){Rw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nw,_w,Lw,Mw,Zw=u().createElement(Vh.Z,{glyph:"geoserver",padding:20}),Gw=function(e){var t=e.results,r=e.totalCount;return{items:(""!==t&&(0,fe.castArray)(t)||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id,title:e.name,description:e.description,preview:e.thumbnail?u().createElement("img",{src:decodeURIComponent(e.thumbnail)}):Zw,map:e}})),total:r}},Bw=function(e){var t=e.text,r=void 0===t?"*":t,n=e.options,o=void 0===n?{}:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,kw.jh)({category:"MAP",query:r,options:Dw({params:{start:10*i,limit:10}},o)}).map(Gw).catch((function(e){return Yt.Observable.of({error:e,items:[],total:0})}))},zw={querySelector:".ms2-border-layout-body",pageSize:10},Uw=(0,_.compose)(Uh((Lw=(Nw={loadPage:Bw,scrollSpyOptions:zw,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,r=e.items,n=void 0===r?[]:r;return t>n.length}}).loadPage,Mw=Nw.scrollSpyOptions,Dw(Dw({},Aw(Nw,["loadPage","scrollSpyOptions"])),{},{scrollSpyOptions:Dw({skip:1},Mw),loadPage:(_w=Lw,function(e,t){return 0===t&&e&&!e.text?_w(e,t).map((function(e){var t,r=e.items,n=e.total;return Dw(Dw({},Aw(e,["items","total"])),{},{total:n,items:[{id:"EMPTY_MAP",title:u().createElement(v.Z,{msgId:"widgets.selectMap.emptyMap.title"}),description:u().createElement(v.Z,{msgId:"widgets.selectMap.emptyMap.description"}),preview:Zw,map:{id:"new.json"}}].concat((t=r,function(e){if(Array.isArray(e))return Iw(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Iw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Iw(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))})})):_w(e,t)}),hasMore:function(e){var t=e.total,r=e.items;return r&&r.length>=1&&"EMPTY_MAP"===r[0].id?t>r.length+1:t>r.length}}))),(0,_.withProps)((function(e){var t=e.items;return{skip:t&&t[0]&&"EMPTY_MAP"===t[0].id?1:0}}))),Ww=(0,Wh.Z)("searchText","setSearchText",""),Vw=(Uh({loadPage:Bw,scrollSpyOptions:zw,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,r=e.items,n=void 0===r?[]:r;return t>n.length}}),(0,_.mapPropsStream)((function(e){return e.merge(e.take(1).switchMap((function(t){var r=t.loadFirst,n=void 0===r?function(){}:r;return e.debounceTime(500).startWith({searchText:""}).distinctUntilKeyChanged("searchText",(function(e,t){return e===t})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,r=e.options;return n({text:t,options:r})})).ignoreElements()})))})));const qw=(0,_.compose)(Ww,Uw,Vw);var Hw=(0,Hc.Z)("placeholder")(h.FormControl);const $w=function(e){var t=e.onSearchTextChange,r=void 0===t?function(){}:t,n=e.searchText,o=e.title;return u().createElement(h.Grid,{className:"catalog-form",fluid:!0},u().createElement(h.Row,null,u().createElement(h.Col,{xs:12},o&&u().createElement("h4",{className:"text-center"},o),u().createElement(h.FormGroup,{controlId:"catalog-form"},u().createElement(Hw,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:n,onChange:function(e){return r(e.currentTarget.value)}})))))};function Yw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yw(Object(r),!0).forEach((function(t){Xw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qw=(0,_.compose)((0,Fl.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&t})),(0,Dl.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&!t}),{title:u().createElement(v.Z,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(r(38064).Z),Jw=r(24384);function eE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(r),!0).forEach((function(t){rE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const nE=(0,_.compose)((0,_.withState)("selected","setSelected",null),(0,_.withHandlers)({onMapChoice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapSelected,r=void 0===t?function(){}:t,n=e.onSetIdentifyTrue,o=void 0===n?function(){}:n,i=e.selectedSource,a=void 0===i?{}:i,l=e.includeMapId,c=void 0!==l&&l;return function(e){return("string"==typeof e.id?Lt().get(e.id).then((function(e){return e.data})):Jw.Z.getData(e.id,{baseURL:a.baseURL})).then((function(t){var r=t.version||"string"==typeof e.id?Dt.ZP.normalizeConfig(t.map):Dt.ZP.convertFromLegacy(t);return tE(tE(tE({},r&&r.map||{}),c?{id:e.id}:{}),{},{groups:r&&r.groups||[],layers:(0,ie.excludeGoogleBackground)(r.layers.map((function(e){return"background"!==e.group||"ol"!==e.type&&"OpenLayers.Layer"!==e.type||(e.type="empty"),e})))})})).then((function(e){return e.layers=e.sources?e.layers.map((function(t){var r=(0,ie.extractTileMatrixFromSources)(e.sources,t);return tE(tE({},t),r)})):e.layers,r({map:e})})).then((function(){return o()}))}}}),(0,_.mapPropsStream)((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=arguments.length>1?arguments[1]:void 0;return tE({canProceed:t},r)}))})));function oE(e){return function(e){if(Array.isArray(e))return iE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return iE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?iE(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var aE=qw((function(e){var t=e.setSearchText,r=void 0===t?function(){}:t,n=e.selected,o=e.skip,i=void 0===o?0:o,a=e.onSelected,l=e.loading,c=e.searchText,s=e.items,p=void 0===s?[]:s,f=e.loaderProps,d=void 0===f?{}:f,y=e.total,m=e.header,b=e.title,g=void 0===b?u().createElement(v.Z,{msgId:"maps.title"}):b;return u().createElement(Go.Z,{className:"map-catalog",header:m||u().createElement($w,{title:g,searchText:c,onSearchTextChange:r}),footer:u().createElement("div",{className:"catalog-footer"},u().createElement("span",null,l&&p.length>0?u().createElement(qh.Z,null):null),(0,fe.isNil)(y)?null:u().createElement("span",{className:"res-info"},u().createElement(v.Z,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:p.length-i,total:y}})))},u().createElement(Qw,{loaderProps:d,items:p.map((function(e){return e===n||n&&e&&e.map&&n.id===e.map.id?Kw(Kw({},e),{},{selected:!0}):e})),loading:l,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map;return a(t)}}))}));const lE=nE((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,o=void 0===n?function(){}:n,i=e.onMapChoice,a=void 0===i?function(){}:i,l=e.stepButtons,c=void 0===l?[]:l,s=e.selected;return u().createElement(Go.Z,{className:"bg-body layer-selector",header:u().createElement(vh,{onClose:r},u().createElement(Bo.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(oE(c),[{tooltipId:"widgets.builder.wizard.useThisMap",onClick:function(){return a(s)},visible:!0,disabled:!s,glyph:"arrow-right"}])}))},u().createElement(aE,{title:u().createElement(v.Z,{msgId:"widgets.builder.wizard.selectAMap"}),selected:s,onSelected:function(e){return o(e)}}))})),cE=(0,_.compose)((0,d.connect)((function(){return{}}),{onMapSelected:function(e){var t=e.map;return(0,de.Rz)("map",(0,ie.normalizeMap)(t))},onSetIdentifyTrue:function(){return(0,de.Rz)("map.mapInfoControl",!0)},onResetChange:de.Rz}),(0,_.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){r("map",void 0),r("widgetType",void 0)}}]}})))(lE);var sE=xw((function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.step,o=void 0===n?0:n,i=r.buttons,a=r.tocButtons,l=void 0===a?[]:a,c=r.stepButtons,s=void 0===c?[]:c,p=r.dashBoardEditing,f=void 0!==p&&p,d=r.editorData,y=void 0===d?{}:d,m=r.setPage,b=void 0===m?function(){}:m,g=r.onFinish,v=void 0===g?function(){}:g,h=r.toggleLayerSelector,O=void 0===h?function(){}:h,w=r.onChange,E=void 0===w?function(){}:w;return u().createElement(Bo.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:i||[].concat(JO(0===o?l:[]),[{onClick:function(){return b(Math.max(o-1,0))},visible:1===o,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.configureMapOptions"}],JO(s),[{onClick:function(){var e;return E("map.mapInfoControl",!(null!=y&&null!==(e=y.map)&&void 0!==e&&e.mapInfoControl))},visible:f&&"map"===(null==y?void 0:y.widgetType),glyph:"info-sign",bsStyle:null!=y&&null!==(e=y.map)&&void 0!==e&&e.mapInfoControl?"success":"primary",tooltipId:null!=y&&null!==(t=y.map)&&void 0!==t&&t.mapInfoControl?"widgets.builder.wizard.disableIdentifyTool":"widgets.builder.wizard.enableIdentifyTool"},{onClick:function(){return O(!0)},visible:0===o,glyph:"plus",tooltipId:"widgets.builder.wizard.addLayer"},{onClick:function(){return b(Math.min(o+1,2))},visible:0===o,glyph:"arrow-right",tooltipId:"widgets.builder.wizard.configureWidgetOptions"},{onClick:function(){return v(Math.min(o+1,1))},visible:1===o,glyph:"floppy-disk",tooltipId:tw(o,y)}])})})),uE=(0,_.compose)((0,d.connect)(Jg,{onResetChange:de.Rz}),(0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editorData,r=void 0===t?{}:t;return!r.map}),(0,_.renderComponent)(cE)),(0,_.withState)("layerSelectorOpen","toggleLayerSelector",!1),(0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerSelectorOpen,r=void 0!==t&&t;return r}),(0,_.renderComponent)((0,_.compose)(Ow,(0,_.withHandlers)({onLayerChoice:function(e){var t=e.toggleLayerSelector,r=void 0===t?function(){}:t,n=e.addLayer,o=void 0===n?function(){}:n;return function(e){o(e),r(!1)}}}),Ig)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,o=void 0===n?function(){}:n,i=e.onLayerChoice,a=void 0===i?function(){}:i,l=e.toggleLayerSelector,c=void 0===l?function(){}:l,s=e.selected,p=e.canProceed,f=e.layer,d=e.catalog,y=e.catalogServices;return u().createElement(Go.Z,{className:"bg-body layer-selector",header:u().createElement(hh,{onClose:r},u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return c(!1)},tooltipId:"close",glyph:"1-close"},{onClick:function(){return a(f)},disabled:!s||!p,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",glyph:"plus"}]}),s&&!p?u().createElement(Ps.Z,{glyph:"exclamation-mark",bsStyle:"warning",title:u().createElement(id,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:u().createElement(ad,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},u().createElement(Tw,{services:y,selected:s,catalog:d,onRecordSelected:function(e){return o(e)}}))})))),(0,_.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",onClick:function(){r("map",void 0)}}}}))),pE=(0,d.connect)(Jg,{onChange:de.Rz},Qg)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.step,c=void 0===l?0:l,s=e.selectedNodes,p=void 0===s?[]:s,f=e.onNodeSelect,d=void 0===f?function(){}:f,y=e.editorData,m=void 0===y?{}:y,b=e.editNode,g=e.setEditNode,v=void 0===g?function(){}:g,h=e.closeNodeEditor,O=void 0===h?function(){}:h,w=e.isLocalizedLayerStylesEnabled,E=e.env;return u().createElement(fw,{step:c,setPage:a,onFinish:o,hideButtons:!0},u().createElement(sw,{editNode:b,setEditNode:v,closeNodeEditor:O,onNodeSelect:d,selectedNodes:p,onChange:r,isLocalizedLayerStylesEnabled:w,preview:u().createElement(pw,{onChange:r,layers:m.map&&m.map.layers,map:m.map,env:E,options:{style:{margin:10,height:"calc(100% - 20px)"}}}),map:m.map}),u().createElement(Xv,{key:"widget-options",data:m,onChange:r}))}));const fE=(0,_.compose)(uE,(0,_.withProps)((function(e){var t=e.editorData;return{map:(void 0===t?{}:t).map}})),dw,QO.Z,yw)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.toggleLayerSelector,i=void 0===o?function(){}:o,a=e.editorData,l=void 0===a?{}:a,c=e.editNode,s=e.setEditNode,p=e.closeNodeEditor,f=e.isLocalizedLayerStylesEnabled,d=e.env,y=e.selectedGroups,m=void 0===y?[]:y,b=e.exitButton,g=e.selectedLayers,v=void 0===g?[]:g,h=e.selectedNodes,O=e.onNodeSelect,w=void 0===O?function(){}:O,E=e.availableDependencies,S=void 0===E?[]:E,P=e.toggleConnection,j=void 0===P?function(){}:P;return u().createElement(Go.Z,{className:"map-selector",header:u().createElement(hh,{onClose:n},u().createElement(sE,{exitButton:b,editorData:l,availableDependencies:S,toggleConnection:j,selectedNodes:h,selectedLayers:v,selectedGroups:m,onNodeSelect:w,toggleLayerSelector:i}))},t?u().createElement(pE,{setEditNode:s,editNode:c,closeNodeEditor:p,onNodeSelect:w,isLocalizedLayerStylesEnabled:f,env:d,selectedNodes:h}):null)})),dE=(0,_.compose)((0,_.setDisplayName)("CounterLayerSelector"),Ag,(0,_.defaultProps)({layerValidationStream:function(e){return e.switchMap((function(e){return function(e){return Yt.Observable.forkJoin((0,fg.v$)({layer:e}),bg(e))}(e)}))}}),Pg,Ig);var yE=r(39589),mE=r(80844);function bE(){return(bE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var gE=(0,Fl.Z)((function(e){var t=e.loading,r=e.data;return t||!r}),{width:500,height:200}),vE=(0,_.compose)((0,_.lifecycle)({componentDidMount:function(){this.props.onChange&&this.props.onChange("options.groupByAttributes",void 0)}}),jv,pv((function(e){var t=e.options;return 0===(void 0===t?[]:t).length})))(Kv),hE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.hasAggregateProcess;return e.aggregateFunction&&e.aggregationAttribute&&r},OE=(0,_.compose)((0,_.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.valid,r=e.data,n=void 0===r?[]:r,o=e.options,i=void 0===o?{}:o,a=e.setValid,l=void 0===a?function(){}:a,c=e.error,s=e.hasAggregateProcess,u=!(0,fe.isNil)(n[0])&&!c;!!t!=!!u&&hE(i,{hasAggregateProcess:s})&&l(u)}})),wE=(0,_.compose)(Jv.Z,eh.Z,th.Z,yE.Z,OE,gE,nh.Z,rh.Z),EE={style:{width:450,height:100}},SE=uv(sv),PE=wE(mE.Z),jE=function(e){var t=e.data,r=void 0===t?{}:t,n=e.layer,o=e.dependencies,i=void 0===o?{}:o,a=e.valid,l=e.setValid,c=void 0===l?function(){}:l,s=e.hasAggregateProcess;return hE(r.options,{hasAggregateProcess:s})?u().createElement(PE,bE({hasAggregateProcess:s},EE,{valid:a,dependenciesMap:r.dependenciesMap,dependencies:i,setValid:c,type:r.type,legend:r.legend,layer:r.layer||n,filter:r.filter,geomProp:r.geomProp,mapSync:r.mapSync,options:r.options})):u().createElement(mE.Z,bE({},EE,{data:[{data:42}],options:r.options,series:[{dataKey:"data"}]}))};const CE=(0,_.compose)((0,_.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o,a=e.hasAggregateProcess;n&&!hE(r.options,{hasAggregateProcess:a})&&i(!1)}}))((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.setValid,c=void 0===l?function(){}:l,s=e.valid,p=e.formOptions,f=e.data,d=void 0===f?{}:f,y=e.layer,m=void 0===y?{}:y,b=e.step,g=void 0===b?0:b,v=e.types,h=e.featureTypeProperties,O=e.dependencies,w=e.hasAggregateProcess;return u().createElement(SE,{step:g,setPage:a,onFinish:o,isStepValid:function(e){return 1!==e||hE(d.options,{hasAggregateProcess:w})},hideButtons:!0},u().createElement(vE,{hasAggregateProcess:w,dependencies:O,key:"chart-options",formOptions:p,featureTypeProperties:h,types:v,data:d,onChange:r,layer:d.layer||m,sampleChart:u().createElement(jE,{hasAggregateProcess:w,data:d,valid:s,layer:d.layer||m,dependencies:O,setValid:function(e){return c(e&&hE(d.options,{hasAggregateProcess:w}))}})}),u().createElement(Xv,{key:"widget-options",data:d,onChange:r,layer:d.layer||m,sampleChart:u().createElement(jE,{hasAggregateProcess:w,data:d,valid:s,layer:d.layer||m,dependencies:O,setValid:function(e){return c(e&&hE(d.options,{hasAggregateProcess:w}))}})}))}));function xE(e){return function(e){if(Array.isArray(e))return TE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return TE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?TE(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var kE=function(e){switch(e){case 0:return"widgets.builder.wizard.backToTypeSelection";case 1:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},IE=function(e){switch(e){case 0:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},AE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function FE(){return(FE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function DE(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var RE=(0,d.connect)(Jg,{setPage:de.YA,setValid:function(e){return(0,de.t4)("valid",e)},onEditorChange:de.Rz,insertWidget:de.Qe},Qg)((0,_.compose)(Sg({needsWPS:!0}),(0,_.renameProps)({editorData:"data",onEditorChange:"onChange"}))(CE)),NE=(0,_.compose)((0,d.connect)(Jg,{openFilterEditor:de.fy,setPage:de.YA,onChange:de.Rz,insertWidget:de.Qe},Qg),Ng,Ug(),Hg((function(e){return 0===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,r=void 0===t?function(){}:t,n=e.step,o=void 0===n?0:n,i=e.stepButtons,a=void 0===i?[]:i,l=e.editorData,c=void 0===l?{}:l,s=e.valid,p=e.setPage,f=void 0===p?function(){}:p,d=e.onFinish,y=void 0===d?function(){}:d;return u().createElement(Bo.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return f(Math.max(0,o-1))},visible:o>0,glyph:"arrow-left",tooltipId:kE(o)}].concat(xE(a),[{visible:0===o,onClick:r,disabled:!s,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return f(Math.min(o+1,2))},visible:0===o,disabled:0===o&&!s,glyph:"arrow-right",tooltipId:IE(o)},{onClick:function(){return y(Math.min(o+1,1))},visible:1===o,glyph:"floppy-disk",tooltipId:AE(o,c)}])})}));const _E=(0,_.compose)((0,d.connect)(Jg),_g,(0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),(0,_.renderComponent)(dE(lO))))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.exitButton,i=e.editorData,a=e.toggleConnection,l=e.availableDependencies,c=void 0===l?[]:l,s=e.dependencies,p=DE(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return u().createElement(Go.Z,{header:u().createElement(hh,{onClose:n},u().createElement(NE,{exitButton:o,editorData:i,toggleConnection:a,availableDependencies:c,onClose:n}))},t?u().createElement(RE,FE({formOptions:{showColorRamp:!1,showUom:!0,showGroupBy:!1,showLegend:!1},dependencies:s},p)):null)}));function LE(e){return function(e){if(Array.isArray(e))return ME(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ME(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ME(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ME(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ZE=function(e){switch(e){case 1:return"widgets.builder.wizard.backToPreview";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},GE=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":void 0},BE=function(e){return e.mapSync},zE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"},UE=r(46173),WE=r(13314),VE=r(70919),qE=uv(sv),HE=(0,_.compose)(WE.Z,(0,Dl.Z)((function(e){return!e.valid}),{title:u().createElement(v.Z,{msgId:"widgets.builder.errors.noMapAvailableForLegend"}),description:u().createElement(v.Z,{msgId:"widgets.builder.errors.noMapAvailableForLegendDescription"})}),(0,UE.Z)(!1))(VE.Z);const $E=(0,_.compose)((0,_.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData,o=void 0===n?{}:n;return{availableDependencies:r.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),(0,_.withProps)((function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.availableDependencies;return{canConnect:(void 0===n?[]:n).length>0,connected:!!r.mapSync}})));function YE(){return(YE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function KE(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var XE=(0,_.withProps)((function(e){var t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData;return{valid:r.length>0&&n.mapSync}})),QE=(0,N.P1)(ee.Pz,(function(e){return{currentLocale:e}})),JE=(0,_.compose)((0,d.connect)(Jg,{setPage:de.YA,onEditorChange:de.Rz,insertWidget:de.Qe},Qg),(0,d.connect)(QE),XE,(0,_.renameProps)({editorData:"data",onEditorChange:"onChange"}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.step,c=void 0===l?0:l,s=e.dependencies,p=e.valid,f=e.data,d=void 0===f?{}:f,y=e.currentLocale,m=e.language;return u().createElement(qE,{step:c,setPage:a,onFinish:o,hideButtons:!0},u().createElement(h.Row,null,u().createElement(yv,{title:u().createElement(v.Z,{msgId:"widgets.builder.wizard.preview"})}),u().createElement(h.Col,{xs:12},u().createElement("div",{style:{marginBottom:"30px"}},u().createElement(HE,{valid:p,dependencies:s,dependenciesMap:d.dependenciesMap,key:"widget-options",onChange:r,currentLocale:y,language:m})))),u().createElement(Xv,{key:"widget-options",onChange:r}))})),eS=(0,_.compose)((0,d.connect)(Jg,{openFilterEditor:de.fy,setPage:de.YA,onChange:de.Rz,insertWidget:de.Qe},Qg),$E,XE,(0,d.connect)((function(){return{}}),{onLayerChoice:function(e){return(0,de.Rz)("layer",e)},onResetChange:de.Rz}),(0,_.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return r("widgetType",void 0)}}}})),Ug((function(e){return 0===e.step})),Hg((function(e){return 0===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,n=e.editorData,o=void 0===n?{}:n,i=e.valid,a=e.stepButtons,l=void 0===a?[]:a,c=e.onFinish,s=void 0===c?function(){}:c,p=e.setPage,f=void 0===p?function(){}:p;return u().createElement(Bo.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return f(Math.max(0,r-1))},visible:r>0,glyph:"arrow-left",tooltipId:ZE(r)}].concat(LE(l),[{onClick:function(){return f(Math.min(r+1,1))},visible:0===r,disabled:0===r&&!BE(o)||!i,glyph:"arrow-right",tooltipId:GE(0,i)},{onClick:function(){return s(Math.min(r+1,1))},visible:1===r,glyph:"floppy-disk",tooltipId:zE(r,o)}])})}));const tS=(0,_.compose)((0,d.connect)(Jg),_g,$E,Dg({layers:"layers",zoom:"zoom",viewport:"viewport"}),(0,_.mapPropsStream)((function(e){return e.merge(e.filter((function(e){var t=e.editorData;return!(void 0===t?{}:t).mapSync})).take(1).distinctUntilChanged().do((function(e){var t=e.toggleConnection;return(void 0===t?function(){}:t)(e.availableDependencies)})).ignoreElements())})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.editorData,i=void 0===o?{}:o,a=e.exitButton,l=e.toggleConnection,c=e.availableDependencies,s=void 0===c?[]:c,p=e.dependencies,f=KE(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return u().createElement(Go.Z,{header:u().createElement(hh,{onClose:n},u().createElement(eS,{editorData:i,exitButton:a,toggleConnection:l,availableDependencies:s,onClose:n}),0===(0,fe.get)(i,"options.propertyName.length")?u().createElement(Ps.Z,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:u().createElement(v.Z,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?u().createElement(JE,YE({availableDependencies:s,editorData:i,dependencies:p},f)):null)}));function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rS(Object(r),!0).forEach((function(t){oS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iS=[{title:u().createElement(v.Z,{msgId:"widgets.types.chart.title"}),type:"chart",caption:u().createElement(v.Z,{msgId:"widgets.types.chart.caption"}),glyph:"stats",className:"ms-widget-selector-chart"},{title:u().createElement(v.Z,{msgId:"widgets.types.text.title"}),type:"text",glyph:"sheet",caption:u().createElement(v.Z,{msgId:"widgets.types.text.caption"}),className:"ms-widget-selector-text"},{title:u().createElement(v.Z,{msgId:"widgets.types.table.title"}),type:"table",glyph:"features-grid",caption:u().createElement(v.Z,{msgId:"widgets.types.table.caption"}),className:"ms-widget-selector-table"},{title:u().createElement(v.Z,{msgId:"widgets.types.counter.title"}),type:"counter",glyph:"counter",caption:u().createElement(v.Z,{msgId:"widgets.types.counter.caption"}),className:"ms-widget-selector-counter"},{title:u().createElement(v.Z,{msgId:"widgets.types.map.title"}),type:"map",glyph:"1-map",caption:u().createElement(v.Z,{msgId:"widgets.types.map.caption"}),className:"ms-widget-selector-map"},{title:u().createElement(v.Z,{msgId:"widgets.types.legend.title"}),type:"legend",glyph:"list",caption:u().createElement(v.Z,{msgId:"widgets.types.legend.caption"}),className:"ms-widget-selector-legend"}],aS=(0,d.connect)((function(){return{}}),{onSelect:function(e){return(0,de.Rz)("widgetType",e)}})((function(e){var t=e.widgetTypes,r=void 0===t?iS:t,n=e.typeFilter,o=void 0===n?function(){return!0}:n,i=e.onSelect,a=void 0===i?function(){}:i;return u().createElement(qc.Z,{key:"content",onItemClick:function(e){a(e.type)},items:r&&r.filter(o).map((function(e){return nS(nS({},e),{},{preview:u().createElement(Vh.Z,{glyph:e.glyph,padding:20})})}))})}));function lS(){return(lS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function cS(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var sS=(0,N.P1)(fb.YI,(function(e){return{widgetType:e&&e.widgetType}})),uS={chart:gO,text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r;return u().createElement(Go.Z,{header:u().createElement(hh,{onClose:n},u().createElement(jO,null))},t?u().createElement(CO,null):null)},table:XO,map:fE,counter:_E,legend:tS};const pS=(0,_.compose)((0,d.connect)(sS),(0,_.withProps)((function(e){var t=e.typeFilter,r=void 0===t?function(){return!0}:t,n=e.availableDependencies,o=void 0===n?[]:n;return{typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(e)&&!("legend"===e.type&&0===o.length)}}})),(0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return!t}),(0,_.renderComponent)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.typeFilter;return u().createElement(Go.Z,{className:"bg-body",header:u().createElement(hh,{onClose:n},u().createElement(v.Z,{msgId:"widgets.selectWidgetType"}))},t?u().createElement(aS,{typeFilter:o}):null)})),(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,r=e.onClose,n=void 0===r?function(){}:r,o=cS(e,["widgetType","onClose"]),i=uS[t];return u().createElement(i,lS({},o,{onClose:n,widgetType:t}))}})))();function fS(e){return(fS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mS(e,t){return(mS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bS(e,t){return!t||"object"!==fS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gS(e){return(gS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vS(Object(r),!0).forEach((function(t){OS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function OS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wS=(0,_.compose)((0,d.connect)((0,N.P1)(fb.h9,fb.zA,(function(e,t){return hS({dependencies:e},t)})),{toggleConnection:de.w2}),ug)(pS),ES=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mS(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gS(n);if(o){var r=gS(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return bS(this,e)});function a(){return dS(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){return u().createElement(sg.Z,{open:this.props.enabled,size:this.props.dockSize,zIndex:this.props.zIndex,position:this.props.position,bsStyle:"primary",hideHeader:!0,style:hS(hS({},this.props.layout),{},{background:"white"})},u().createElement(wS,{enabled:this.props.enabled,onClose:this.props.onClose,typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return"map"!==t&&"legend"!==t}}))}}])&&yS(t.prototype,r),a}(u().Component);OS(ES,"propTypes",{id:f().string,enabled:f().bool,limitDockHeight:f().bool,fluid:f().bool,zIndex:f().number,dockSize:f().number,position:f().string,onMount:f().func,onUnmount:f().func,onClose:f().func,dimMode:f().string,src:f().string,style:f().object,layout:f().object}),OS(ES,"defaultProps",{id:"widgets-builder-plugin",enabled:!1,dockSize:500,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",onMount:function(){},onUnmount:function(){},onClose:function(){},layout:{}});var SS=(0,d.connect)((0,N.P1)(te.dH,(function(e){return(0,Xr.ic)(e,{height:!0})}),(function(e,t){return{enabled:e,layout:t}})),{onMount:function(){return(0,O.Xg)("widgetBuilder","available",!0)},onUnmount:function(){return(0,O.Xg)("widgetBuilder","available",!1)},onClose:O.Xg.bind(null,"widgetBuilder","enabled",!1,!1)})(ES);const PS=(0,E.rx)("WidgetsBuilder",{component:SS,epics:cg,containers:{TOC:{doNotHide:!0,name:"WidgetBuilder"}}});function jS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function CS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jS(Object(r),!0).forEach((function(t){xS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var TS=function(e){return!e.dataGrid||!e.dataGrid.static},kS=(0,N.P1)(fb.zm,fb.YR,fb.yZ,fb.lF,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,fe.sortBy)(e.filter(TS).map((function(e){return(0,fe.findIndex)(t,(function(t){return t===e.id}))>=0?CS(CS({},e),{},{collapsed:!0}):e})),(function(e){var t=n[e.id]&&n[e.id].layout,o=(0,fe.find)(r,{i:e.id})||t||{},i=o.x,a=void 0===i?0:i,l=o.y;return 100*(void 0===l?0:l)+a}))})),IS=(0,_.compose)((0,_.defaultProps)({toolsOptions:{seeHidden:"user.role===ADMIN"}}),bb("toolsOptions",{asObject:!0}),(0,_.withProps)((function(e){var t=e.widgets,r=e.toolsOptions;return{widgets:(void 0===r?{seeHidden:!1}:r).seeHidden?t:t.filter((function(e){return!e.hide}))}})));function AS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AS(Object(r),!0).forEach((function(t){DS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function DS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var RS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,r=e.type,n=t&&"chart"!==t?t:r;switch(n){case"text":return"sheet";case"table":return"features-grid";case"pie":return"pie-chart";case"line":return"1-line";case"map":return"1-map";case"counter":return"counter";default:return"stats"}};const NS=(0,_.compose)((0,_.withPropsOnChange)(["btnGroupProps"],(function(e){var t=e.btnGroupProps;return{btnGroupProps:FS(FS({},t),{},{className:"widgets-bar"+(t&&t.className?" ".concat(t.className):"")})}})),(0,_.withPropsOnChange)(["widgets","onClick"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.onClick,o=void 0===n?function(){}:n;return{buttons:r.map((function(e){return{glyph:RS(e),tooltip:e.title,className:e.collapsed?"btn-tray":"btn-tray active",onClick:function(){return o(e)}}}))}})))(Bo.Z);function _S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function LS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_S(Object(r),!0).forEach((function(t){MS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function MS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ZS=(0,_.compose)((0,d.connect)((0,N.P1)(kS,(function(e){return{widgets:e}})),{onClick:de.f}),(0,_.defaultProps)({btnGroupProps:{className:"widgets-toolbar",style:{marginLeft:2,marginRight:2}}}),IS,(0,_.withProps)((function(e){var t=e.btnGroupProps,r=void 0===t?{}:t,n=e.btnDefaultProps,o=void 0===n?{}:n;return{btnGroupProps:LS({bsSize:"xsmall"},r),btnDefaultProps:LS({bsSize:"xsmall"},o||{})}})))(NS);function GS(e){return(GS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function US(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function WS(e,t){return(WS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VS(e,t){return!t||"object"!==GS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qS(e){return(qS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $S=(0,Kr.Z)(qe.Z),YS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expanded,r=e.onClick,n=void 0===r?function(){}:r;return u().createElement($S,{tooltipId:t?"widgets.tray.collapseTray":"widgets.tray.expandTray",bsSize:"xsmall",bsStyle:"default",style:{borderColor:"transparent"},onClick:n},u().createElement(h.Glyphicon,{glyph:t?"chevron-right":"chevron-left"}))},KS=(0,_.compose)((0,d.connect)((0,N.P1)(fb.E5,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{onClick:function(){return(0,de.Ff)()}}),IS,(0,_.withProps)((function(e){var t=e.widgets;return{shouldExpand:0===(void 0===t?[]:t).length}})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,r=void 0===t?function(){}:t,n=e.shouldExpand,o=void 0!==n&&n;return u().createElement($S,{tooltipId:o?"widgets.tray.expandAll":"widgets.tray.collapseAll",bsStyle:o?"primary":"success active",bsSize:"xsmall",onClick:r},u().createElement(h.Glyphicon,{glyph:"list"}))})),XS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WS(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qS(n);if(o){var r=qS(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return VS(this,e)});function a(){return zS(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e,t=this;return this.props.enabled?u().createElement("div",{className:"widgets-tray",style:{marginBottom:32,marginRight:80,bottom:0,right:0,position:"absolute"}},u().createElement(Go.Z,{columns:[u().createElement(YS,{key:"collapse-tray",toolsOptions:this.props.toolsOptions,expanded:this.props.expanded,onClick:function(){return t.props.setExpanded(!t.props.expanded)}}),u().createElement(KS,{key:"collapse-all",toolsOptions:this.props.toolsOptions})].concat((e=this.props.items.map((function(e){return e.tool}))||[],function(e){if(Array.isArray(e))return BS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return BS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?BS(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},this.props.expanded?u().createElement(ZS,{toolsOptions:this.props.toolsOptions}):null)):null}}])&&US(t.prototype,r),a}(u().Component);HS(XS,"propTypes",{enabled:f().bool,toolsOptions:f().object,items:f().array,expanded:f().bool,setExpanded:f().func}),HS(XS,"defaultProps",{enabled:!0,items:[],expanded:!1,setExpanded:function(){}});const QS=(0,_.compose)((0,_.withState)("expanded","setExpanded",!1),(0,d.connect)((0,N.P1)(kS,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{toggleTray:de.ep}),IS,(0,_.withProps)((function(e){var t=e.widgets,r=void 0===t?[]:t;return{hasCollapsedWidgets:r.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.collapsed;return t})).length>0,hasTrayWidgets:r.length>0}})),(0,_.lifecycle)({componentDidMount:function(){this.props.toggleTray&&this.props.toggleTray(!0)},componentWillUnmount:function(){this.props.toggleTray&&this.props.toggleTray(!1)}}),(0,_.mapPropsStream)((function(e){return e.merge(e.distinctUntilKeyChanged("hasCollapsedWidgets").do((function(e){var t=e.setExpanded;return(void 0===t?function(){}:t)(e.hasCollapsedWidgets)})).ignoreElements())})),(0,_.withProps)((function(e){var t=e.enabled,r=e.hasTrayWidgets;return{enabled:t&&r}})))(XS);var JS=r(57676),eP=r(81808),tP=r(97291);function rP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rP(Object(r),!0).forEach((function(t){oP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iP=function(e){return((0,fb.E5)(e)||[]).filter((function(e){return!(0,fe.get)(e,"dataGrid.static")})).length>0},aP=function(e){return function(t){return t.take(1).switchMap((function(){return Yt.Observable.of((0,$.um)(nP(nP({},e),{},{autoDismiss:8,position:"tr",uid:"timeline-collapsed"})))})).merge(t)}};const lP={collapseTimelineOnWidgetsEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return Yt.Observable.merge(e.ofType(de.Ym,de.uU,eP.ok,de.$A,de.Jm).filter((function(){return iP(n())&&(0,tP.pn)(n())}))).switchMap((function(){return Yt.Observable.of((0,JS.w2)(!0))})).let(aP({title:"widgets.tray.notifications.collapsed.timelineTitle",message:"widgets.tray.notifications.collapsed.message"}))},collapseWidgetsOnTimelineEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return Yt.Observable.merge(e.ofType(JS.M5).filter((function(e){return!e.collapsed})),e.ofType(w.yS).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProperties,r=void 0===t?{}:t;return r.dimensions}))).filter((function(){return iP(n())&&(0,tP.qJ)(n())&&(0,tP.pn)(n())})).switchMap((function(){return Yt.Observable.of((0,de.Ff)())})).let(aP({title:"widgets.tray.notifications.collapsed.widgetsTitle",message:"widgets.tray.notifications.collapsed.message"}))},expandTimelineIfCollapsedOnTrayUnmount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(de.yY,de.$A,eP.ok).filter((function(){return!(0,tP.pn)(n())&&(0,tP.qJ)(n())})).filter((function(){return!iP(n())})).switchMap((function(){return Yt.Observable.of((0,JS.w2)(!1))}))}},cP={WidgetsTrayPlugin:gb(QS),epics:lP};var sP=r(26656),uP=r.n(sP);function pP(e){return(pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fP(){return(fP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function dP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dP(Object(r),!0).forEach((function(t){wP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gP(e,t){return(gP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vP(e,t){return!t||"object"!==pP(t)&&"function"!=typeof t?hP(e):t}function hP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OP(e){return(OP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var EP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gP(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=OP(n);if(o){var r=OP(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return vP(this,e)});function a(){var e;mP(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return wP(hP(e=i.call.apply(i,[this].concat(r))),"system",(function(){return e.refs.notify})),wP(hP(e),"updateNotifications",(function(t){var r=t.map((function(e){return e.uid})),n=e.system().state.notifications||[];n.forEach((function(t){r.indexOf(t.uid)<0&&e.system().removeNotification(t.uid)})),t.forEach((function(t){if(n.indexOf(t.uid)<0){var r,o=t.message,i=(0,le.S$)(e.context.messages,o);r=t.values?(0,e.props.intl.formatMessage)(r=(0,$f.defineMessages)({id:o,defaultMessage:i}),t.values):i||o,e.system().addNotification(yP(yP({},t),{},{title:(0,le.S$)(e.context.messages,t.title)||t.title,message:r,action:t.action&&{label:(0,le.S$)(e.context.messages,t.action.label)||t.action.label,callback:t.action.dispatch?function(){e.props.onDispatch(t.action.dispatch)}:t.action.callback},onRemove:function(){e.props.onRemove(t.uid),t.onRemove&&t.onRemove()}}))}}))})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.updateNotifications(this.props.notifications)}},{key:"componentDidUpdate",value:function(){var e=(this.props||[]).notifications;this.updateNotifications(e)}},{key:"render",value:function(){var e=this.props,t=(e.notifications,e.onRemove,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["notifications","onRemove"]));return u().createElement(b.Z,null,u().createElement(uP(),fP({ref:"notify"},t)))}}])&&bP(t.prototype,r),a}(u().Component);wP(EP,"propTypes",{notifications:f().array,intl:$f.intlShape.isRequired,onRemove:f().func,onDispatch:f().func}),wP(EP,"contextTypes",{messages:f().object}),wP(EP,"defaultProps",{notifications:[],onRemove:function(){},onDispatch:function(){}});const SP=(0,$f.injectIntl)(EP);const PP={NotificationsPlugin:(0,d.connect)((function(e){return{notifications:e&&e.notifications}}),{onRemove:$.Cp,onDispatch:$.Ce})(SP),reducers:{notifications:r(97080).Z},epics:{clearNotificationOnLocationChange:function(e){return e.ofType(Jb.nk).switchMap((function(){return Yt.Observable.of((0,$.ZH)())}))}}};var jP=r(3523),CP=r(32833),xP=r(13292),TP=r.n(xP),kP=r(34387),IP=r(96958),AP=r(50937),FP=r.n(AP),DP=r(21914),RP=r(41156),NP=r(29386),_P=r(31255),LP=r(69842);function MP(e){return function(e){if(Array.isArray(e))return ZP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ZP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZP(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function BP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?GP(Object(r),!0).forEach((function(t){zP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.page,n=t.size,o=(0,_P.Vf)(e),i=void 0!==n?n:o.size;return{startIndex:void 0!==r?r*i:o.page*i,maxFeatures:i}},WP=function(e,t){return BP(BP({},e),{},{pagination:t})},VP=function(e,t,r){var n=r.insert,o=r.update,i=r.propertyChange,a=r.getPropertyName;return(0,r.transaction)(t.map((function(e){return n(e)})),Object.keys(e).map((function(t){return Object.keys(e[t]).map((function(r){return o([i(a(r),e[t][r]),(0,kP.fidFilter)("ogc",t)])}))})))},qP=function(e,t){return Yt.Observable.defer((function(){return Lt().post(e,t,{headers:{"Content-Type":"application/xml"}})})).let(dg.oB)},HP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featuregrid;return(0,w.He)(t.selectedLayer,{filterObj:void 0})},$P=function(e){return function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.update,o=void 0===n?{}:n,i=r.append,a=(0,_P.Li)(e.getState()),l=a.id,c=BP({},(0,fe.get)(e.getState(),'featuregrid.advancedFilters["'.concat(l,'"]')));if(c){var s=(0,_P.M0)(e.getState())||{},u=(0,fe.reduce)(s,(function(e,t,r){return(0,IP.dJ)(BP({attribute:r},t),e)}),{}),p="AND";u.spatialField&&(c.spatialField=void 0,p=u.spatialFieldOperator);var f=(0,yf.composeAttributeFilters)([c,u],"AND",p),d=BP(BP({},c),f);return(0,eg.rh)(d,o.type)}var y=o;return i&&null!=o&&o.attribute&&(y=(0,_P.M0)(e.getState())[null==o?void 0:o.attribute]),(0,eg.rh)((0,IP.dJ)(y,(0,tg.X1)(e.getState())),null===(t=y)||void 0===t?void 0:t.type)}},YP=function(e,t){return e.ofType(w.R8).switchMap((function(r){var n,o=r.layer,i=(0,fe.get)(t.getState(),"query.typeName");return(n=Yt.Observable).of.apply(n,MP(i!==o.name?[(0,Qb.mc)()]:[]).concat([(0,O.Xg)("drawer","enabled",!1),(0,Kb.uF)(o.id),(0,Kb.t9)()])).merge(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.url,o=r.name,i=r.id,a=(0,fe.get)(t.getState(),'featuregrid.advancedFilters["'.concat(i,'"]')),l=function(){return(0,eg.rP)(n,a||{featureTypeName:o,filterType:"OGC",ogcVersion:"1.1.0"})};return(0,tg.hk)(t.getState(),o)?Yt.Observable.of(l(),(0,eg.gT)(n,o)):Yt.Observable.of((0,eg.gT)(n,o)).merge(e.ofType(eg.u7).filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).typeName===o})).map(l))}(e,t,o))}))},KP=function(e){return e.ofType(eg.DR).switchMap((function(e){return Yt.Observable.of((0,Kb.uF)(e.id))}))},XP=function(e,t){return e.ofType(eg.Yx).switchMap((function(){return Yt.Observable.of((0,Kb.oO)(0)).concat((0,_P.eK)(t.getState())===Kb.EH.VIEW?Yt.Observable.of((0,Kb.nY)()):Yt.Observable.empty())}))},QP=function(e,t){return e.ofType(Kb.dY).switchMap((function(r){var n=r.sortBy,o=r.sortOrder;return Yt.Observable.of((0,eg.IO)((0,tg.Bu)(t.getState()),WP(BP(BP({},(0,tg.X1)(t.getState())),{},{sortOptions:{sortBy:n,sortOrder:o}}),UP(t.getState())),(0,_P.TC)(t.getState()))).merge(e.ofType(eg.Hu).map((function(e){return(0,Kb.UB)((0,fe.get)(e,"result.features",[]),[(0,fe.get)(e,"filterObj.pagination.startIndex")])})).takeUntil(e.ofType(eg.VT)).take(1))}))},JP=function(e,t){return e.ofType(Kb.$O).switchMap((function(){var r,n=null===(r=(0,_P.Vf)(t.getState()))||void 0===r?void 0:r.size;return e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.value})).switchMap((function(){var r=!1;return e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.deactivated})).switchMap((function(e,n){return 0===n?(r=!0,Yt.Observable.from([(0,Kb.Jr)(1e5),(0,Kb.KD)([]),$P(t)(e)])):Yt.Observable.of($P(t)(e))})).takeUntil(Yt.Observable.merge(e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(Kb.sF,Jb.nk))).merge(e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})).take(1).switchMap((function(e){return r?Yt.Observable.of((0,Kb.Jr)(n),$P(t)(e)):Yt.Observable.of($P(t)(e))})).takeUntil(e.ofType(Kb.sF,Jb.nk))).merge(e.ofType(Kb.sF,Jb.nk).take(1).switchMap((function(){var e,o=(0,Kb.a8)({attribute:null===(e=(0,gg.findGeometryProperty)((0,tg.Qs)(t.getState())))||void 0===e?void 0:e.name,enabled:!1,type:"geometry"});return r?Yt.Observable.of((0,Kb.Jr)(n),o,(0,Kb.pP)(o)):Yt.Observable.of(o,(0,Kb.pP)(o))})))}))}))},ej=function(e,t){return e.ofType(Kb.iB).switchMap((function(e){return Yt.Observable.of($P(t)(e.updateFilterAction))}))},tj=function(e,t){return e.ofType(eg.Yx).switchMap((function(){return e.ofType(Kb._u).filter((function(e){var t=e.update;return"geometry"!==(void 0===t?{}:t).type})).map($P(t))}))},rj=function(e,t){return e.ofType(Kb.aO).filter((function(){return(0,_P.eK)(t.getState())===Kb.EH.EDIT})).switchMap((function(){return((0,fe.find)((0,_P.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{}).value?Yt.Observable.empty():Yt.Observable.of((0,Kb.a8)({attribute:(0,gg.findGeometryProperty)((0,tg.Qs)(t.getState())).name,enabled:!0,type:"geometry"}))}))},nj=function(e){return e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})).switchMap((function(){return Yt.Observable.of((0,Kb.dq)())}))},oj=function(e,t){return e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return e.ofType(H.TR).switchMap((function(e){var r=e.point,n=r.latlng,o=r.pixel,i=r.modifiers,a=i.ctrl,l=i.metaKey,c=(0,fe.find)((0,_P.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},s=(0,J.uy)(t.getState()),u=Ko.default.reproject([n.lng,n.lat],"EPSG:4326",s),p=ae.default.getHook(ae.default.GET_COORDINATES_FROM_PIXEL_HOOK),f=Ko.default.calculateCircleRadiusFromPixel(p,o,u,4);return c.deactivated?Yt.Observable.empty():Yt.Observable.of((0,Kb.dq)({multiselect:a||l}),(0,Kb.a8)(BP(BP({},c),{},{value:{attribute:c.attribute||(0,fe.get)((0,LP.vE)(t.getState()),"attribute"),geometry:{center:[u.x,u.y],coordinates:Ko.default.calculateCircleCoordinates(u,f,12),extent:[u.x-f,u.y-f,u.x+f,u.y+f],projection:s,radius:f,type:"Polygon"},method:"Circle",operation:"INTERSECTS"}}),a||l))})).takeUntil(Yt.Observable.merge(e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(Jb.nk)))}))},ij=function(e,t){return e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return e.ofType(RP.fy).switchMap((function(e){var r=e.boxEndInfo,n=r.boxExtent,o=r.modifiers,i=o.ctrl,a=o.metaKey,l=Ko.default.getPolygonFromExtent(n),c=(0,J.uy)(t.getState()),s=(0,fe.find)((0,_P.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{};return s.deactivated?Yt.Observable.empty():Yt.Observable.of((0,Kb.dq)({multiselect:i||a}),(0,Kb.a8)(BP(BP({},s),{},{value:{geometry:BP(BP({},l.geometry),{},{projection:c}),attribute:s.attribute||(0,fe.get)((0,LP.vE)(t.getState()),"attribute"),method:"Rectangle",operation:"INTERSECTS"}}),i||a))})).takeUntil(Yt.Observable.merge(e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}))))}))},aj=function(e){return e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return Yt.Observable.of((0,RP.ZR)("start"))}))},lj=function(e){return Yt.Observable.merge(e.ofType(Kb._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(Kb.sF)).switchMap((function(){return Yt.Observable.of((0,RP.ZR)("end"))}))},cj=function(e,t){return e.ofType(eg.Hu).filter((function(e){return"geometry"===e.reason})).switchMap((function(e){var r=e.result,n=(0,fe.get)(r,"features"),o=(0,_P.gz)(t.getState()),i=(0,fe.find)((0,_P.M0)(t.getState()),(function(e){return"geometry"===e.type}));return Yt.Observable.of((0,Kb.KD)(n.length>0&&i&&i.value?MP(n):[],o))}))},sj=function(e){return e.ofType(Kb.VV).flatMap((function(e){var t=e.activated;return Yt.Observable.of((0,Kb.YG)(t),(0,Kb.VH)(t))}))},uj=function(e,t){return e.ofType(Kb._9).flatMap((function(){var e=(0,fe.find)((0,_P.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},r=(0,_P.LB)(t.getState()),n=(0,_P.b4)(t.getState());return Yt.Observable.of((0,Kb.a8)(BP(BP({},e),{},{type:"geometry",attribute:e.attribute||(0,fe.get)((0,LP.vE)(t.getState()),"attribute"),deactivated:!(!r&&!n&&e.deactivated)})))}))},pj=function(e,t){return Yt.Observable.merge(e.ofType(Kb.IN,Xb.DI,Kb.JB,Kb.K8),e.ofType(Kb.B8).filter((function(e){return!!e.deactivated}))).flatMap((function(){var e=(0,fe.find)((0,_P.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{};return e.deactivated?Yt.Observable.empty():Yt.Observable.of((0,Kb.a8)(BP(BP({},e),{},{type:"geometry",attribute:e.attribute||(0,fe.get)((0,LP.vE)(t.getState()),"attribute"),deactivated:!0})))}))},fj=function(e,t){return Yt.Observable.merge(e.ofType(Kb.AY,Kb.yi),e.ofType(Kb.B8).filter((function(e){return!e.deactivated}))).flatMap((function(){var e=(0,fe.find)((0,_P.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},r=(0,_P.LB)(t.getState()),n=(0,_P.b4)(t.getState());return!e.deactivated||r||n?Yt.Observable.empty():Yt.Observable.of((0,Kb.a8)(BP(BP({},e),{},{type:"geometry",attribute:e.attribute||(0,fe.get)((0,LP.vE)(t.getState()),"attribute"),deactivated:!1})))}))},dj=function(e,t){return e.ofType(Kb.gG).merge(e.ofType(eg.VN).debounceTime(500).map((function(e){return BP(BP({},e),{},{page:0})}))).switchMap((function(r){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=t.size,o=t.reason,i=e.getState();return Yt.Observable.of((0,eg.IO)((0,tg.Bu)(i),WP(BP({},(0,tg.X1)(i)),UP(i,{page:r,size:n})),(0,_P.TC)(i),o))}}(t)(r).merge(e.ofType(eg.Hu).map((function(e){var r=(0,fe.get)(e,"result.features",[]),n=(0,_P.gz)(t.getState()),o=(0,fe.find)((0,_P.M0)(t.getState()),(function(e){return"geometry"===e.type}));return n&&o.enabled&&(r=(0,_P._w)(t.getState())),(0,Kb.UB)(r,[(0,fe.get)(e,"filterObj.pagination.startIndex")])})).take(1).takeUntil(e.ofType(eg.VT)))}))},yj=function(e,t){return e.ofType(Kb.AY).switchMap((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.page,o=r.size;return Yt.Observable.of((0,eg.IO)((0,tg.Bu)(t.getState()),WP(BP({},(0,tg.X1)(t.getState())),UP(t.getState(),{page:n,size:o})),(0,_P.TC)(t.getState())),(0,w.ct)((0,_P.u$)(t.getState()))).merge(e.ofType(eg.Hu).map((function(e){return Yt.Observable.of((0,Kb.$E)(),(0,Kb.UB)((0,fe.get)(e,"result.features",[]),[(0,fe.get)(e,"filterObj.pagination.startIndex")]))})).mergeAll().takeUntil(e.ofType(eg.VT)).take(2))}))},mj=function(e){return e.ofType(Kb.AY,Kb.sF).switchMap((function(){return Yt.Observable.of((0,Kb.KD)([]))}))},bj=function(e,t){return e.ofType(Kb.zh).switchMap((function(){return Yt.Observable.of((0,Kb.fO)()).concat(function(){var e=arguments.length>2?arguments[2]:void 0;return qP(arguments.length>3?arguments[3]:void 0,VP(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],FP()(e)))}((0,_P.ND)(t.getState()),(0,_P.kG)(t.getState()),(0,tg.Qs)(t.getState()),(0,tg.Bu)(t.getState())).map((function(){return(0,Kb.gc)()})).catch((function(e){return Yt.Observable.of((0,Kb.cE)(),(0,$.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError",autoDismiss:5}))})))}))},gj=function(e,t){return e.ofType(Kb.Hk).switchMap((function(){return Yt.Observable.of((0,Kb.fO)()).concat((e=(0,_P._w)(t.getState()),r=(0,tg.Qs)(t.getState()),n=(0,tg.Bu)(t.getState()),qP(n,function(e,t){var r=t.transaction,n=t.deleteFeature;return r(e.map(n))}(e,FP()(r)))).map((function(){return(0,Kb.gc)()})).catch((function(e){return Yt.Observable.of((0,Kb.cE)(),(0,$.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError"}))})).concat(Yt.Observable.of((0,Kb.Pv)("deleteConfirm"),(0,Kb.MO)())));var e,r,n}))},vj=function(e,t){return e.ofType(Kb.Ub).switchMap((function(){var e=t.getState(),r=(0,tg.Qs)(e),n=(0,IP.cZ)(),o=(0,gg.findGeometryProperty)(r).localType,i={featureProjection:n,stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},a=se()({},(0,_P.P3)(e),{type:"Feature"}),l=(0,_P.ND)(e);return l[a.id]&&l[a.id]&&l[a.id].geometry&&(a.geometry=l[a.id].geometry),Yt.Observable.of((0,Xb.Yf)("drawOrEdit",o,"featureGrid",[a],i))}))},hj=function(e,t){return e.ofType(Kb._9).switchMap((function(){var e=t.getState(),r=(0,tg.Qs)(e),n=(0,IP.cZ)(),o=(0,gg.findGeometryProperty)(r).localType,i=se()({},(0,_P.P3)(e),{type:"Feature"}),a=(0,_P.ND)(e);a[i.id]&&(a[i.id].geometry||null===a[i.id].geometry)&&(i.geometry=a[i.id].geometry),i._new&&(i.geometry=(0,fe.head)((0,_P.kG)(e)).geometry);var l={featureProjection:n,stopAfterDrawing:!0,editEnabled:!(0,_P.Ae)(e),drawEnabled:(0,_P.Ae)(e)};return Yt.Observable.of((0,Xb.Yf)("drawOrEdit",o,"featureGrid",[i],l))}))},Oj=function(e,t){return e.ofType(Kb.$O).switchMap((function(){return e.ofType(Kb.aO).filter((function(){return(0,_P.eK)(t.getState())===Kb.EH.EDIT})).take(1).switchMap((function(){return e.ofType(Jb.nk,Kb.sF).take(1).switchMap((function(){return Yt.Observable.of((0,Xb.bp)())}))}))}))},wj=function(e,t){return e.ofType(Kb.$O).switchMap((function(){var e=[(0,O.Xg)("metadataexplorer","enabled",!1),(0,O.Xg)("annotations","enabled",!1),(0,O.Xg)("details","enabled",!1)];return(0,te.Iz)(t.getState())&&e.push((0,O.Xg)("measure","enabled",!1)),Yt.Observable.from(e)}))},Ej=function(e,t){return e.ofType(Xb.DI).filter((function(e){return"featureGrid"===e.owner})).switchMap((function(e){var r=t.getState(),n={featureProjection:(0,IP.cZ)(),stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},o=e.features.map((function(e,t){return se()({},e,{id:(0,_P._w)(r)[t].id,_new:(0,_P._w)(r)[t]._new,type:"Feature"})})),i=se()({},(0,fe.head)(e.features),{id:(0,_P.P3)(r).id,_new:(0,_P.P3)(r)._new,type:"Feature"}),a="enterEditMode"===e.enableEdit?Yt.Observable.of((0,Xb.Yf)("drawOrEdit",i.geometry.type,"featureGrid",o,n)):Yt.Observable.empty();return Yt.Observable.of((0,Kb.Vw)(o)).concat(a)}))},Sj=function(e,t){return e.ofType(Kb.JB).switchMap((function(){var e=t.getState();return Yt.Observable.from([(0,Kb.F5)((0,_P._w)(e)),(0,Xb.bp)()])}))},Pj=function(e,t){return e.ofType(Kb.Oj,Kb.jp,Kb.yi,Kb.aO).filter((function(){return(0,_P.eK)(t.getState())===Kb.EH.EDIT&&(0,_P.bq)(t.getState())})).switchMap((function(e){return r=t.getState(),n=e.type===Kb.yi,o=(0,IP.cZ)(),i=(0,gg.findGeometryProperty)((0,tg.Qs)(r)).localType,a={featureProjection:o,stopAfterDrawing:ae.default.isSimpleGeomType(i),editEnabled:!0,drawEnabled:!1},(l=(0,_P._w)(r).map((function(e){var t=se()({},e,{type:"Feature"});if(!(0,fe.isEmpty)(t)){var o=(0,_P.ND)(r);if(o[t.id]&&(o[t.id].geometry||null===o[t.id].geometry)&&(t.geometry=o[t.id].geometry),t._new&&!t.geometry){var i=(0,fe.find)((0,_P.kG)(r),{id:t.id});i&&i.geometry&&(t.geometry=i.geometry)}n&&(t.geometry=(0,tg.dc)(r,t.id)?(0,tg.dc)(r,t.id).geometry:null)}return t})).filter((function(e){return null!==e.geometry||"empty_row"!==e.id}))).length>0?Yt.Observable.from([(0,Xb.Yf)("drawOrEdit",i,"featureGrid",l,a)]):Yt.Observable.from([(0,Xb.Yf)("clean","","featureGrid",[],{})]);var r,n,o,i,a,l}))},jj=function(e){return e.ofType(Kb.IN).switchMap((function(){return Yt.Observable.of((0,Xb.bp)())}))},Cj=function(e,t){return e.ofType(Kb.aO).switchMap((function(e){return e.mode===Kb.EH.VIEW?Yt.Observable.of((0,Xb.bp)(),(0,NP.WP)("featuregrid.select")):e.mode!==Kb.EH.EDIT||(0,_P.bq)(t.getState())?Yt.Observable.of((0,NP.WP)()):Yt.Observable.of((0,Xb.bp)(),(0,NP.WP)("featuregrid.select"),(0,$.Kp)({title:"featuregrid.notSupportedGeometryTitle",message:"featuregrid.notSupportedGeometry",uid:"notSupportedGeometryWarning",autoDismiss:5}))}))},xj=function(e){return e.ofType(Kb.$O).switchMap((function(){return e.ofType(Jb.nk).take(1).switchMap((function(){return Yt.Observable.of((0,Kb.nY)(),(0,Kb.YV)())})).takeUntil(e.ofType(Kb.sF))}))},Tj=function(e,t){return e.ofType(Jb.nk).switchMap((function(){return(0,te._d)(t.getState())?Yt.Observable.of((0,O.Xg)("queryPanel","enabled",!1)):Yt.Observable.empty()}))},kj=function(e,t){return e.ofType(Kb.$O).switchMap((function(){return e.ofType(O.kM).filter((function(e){return e.control&&"drawer"===e.control&&(0,_P.Rd)(t.getState())})).switchMap((function(){return Yt.Observable.of((0,Kb.YV)(),(0,Kb.KD)([]))})).takeUntil(e.ofType(Jb.nk))}))},Ij=function(e,t){return e.ofType(Kb.bZ).switchMap((function(){var e=t.getState();return(0,_P.LB)(e)||(0,_P.b4)(e)?Yt.Observable.of((0,Kb.Pv)("featureCloseConfirm",!0)):Yt.Observable.of((0,Kb.YV)())}))},Aj=function(e){return e.ofType(Kb.Gk).switchMap((function(){return Yt.Observable.of((0,Kb.$E)(),(0,Kb.Pv)("clearConfirm",!1))}))},Fj=function(e){return e.ofType(Kb.vO).switchMap((function(){return Yt.Observable.of((0,O.Xg)("drawer","enabled",!1),(0,Kb.Pv)("featureCloseConfirm",!1))}))},Dj=function(e,t){return e.ofType(Kb.$O).exhaustMap((function(){return e.ofType(Kb.sF).delay(50).filter((function(){return(0,tg.M7)(t.getState())})).switchMap((function(){return Yt.Observable.of(HP(t.getState()))})).takeUntil(e.ofType(Jb.nk,DP.xy,Kb.VM))}))},Rj=function(e){return e.ofType(Kb.$O).switchMap((function(){return Yt.Observable.race(e.ofType(DP.xy).take(1),e.ofType(Kb.sF).take(1)).exhaustMap((function(t){return t.type===Kb.sF?Yt.Observable.empty():e.ofType(DP.F9).switchMap((function(){return Yt.Observable.of((0,Kb.t9)())}))})).takeUntil(e.ofType(Jb.nk,O.kM).filter((function(e){return e.type===Jb.nk||e.control&&"drawer"===e.control})).merge(e.ofType(Kb.sF).withLatestFrom(e.ofType(DP.xy,DP.F9).scan((function(e,t){switch(t.type){case DP.xy:return!1;case DP.F9:return!0;default:return!1}}),!0).startWith(!0),(function(e,t){return t})).filter((function(e){return e}))))}))},Nj=function(e,t){return e.ofType(Kb.VM).switchMap((function(){return Yt.Observable.of((0,Kb.KD)([]),(0,Qb.F)((0,fe.get)(t.getState(),'featuregrid.advancedFilters["'.concat((0,_P.u$)(t.getState()),'"]'))),(0,Kb.YV)(),(0,O.Xg)("queryPanel","enabled",!0)).merge(Yt.Observable.race(e.ofType(Qb.Wm).mergeMap((function(e){return Yt.Observable.of((0,eg.rP)(e.searchUrl,e.filterObj),(0,Kb.Uh)(se()({},(0,LP.gC)(t.getState()),e.filterObj)),(0,O.Xg)("queryPanel","enabled",!1),(0,Kb.t9)())})),e.ofType(O.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).mergeMap((function(){var e="clean"!==(t.getState().draw||{}).drawStatus?[(0,Xb.Yf)("clean","","featureGrid",[],{})]:[];return Yt.Observable.from(e.concat((0,Kb.t9)()))}))).takeUntil(e.ofType(Kb.$O,Jb.nk)))}))},_j=function(e,t){return e.ofType(Kb.a3).filter((function(){return!(0,fe.get)(t.getState(),"featuregird.virtualScroll",!1)})).switchMap((function(){return Yt.Observable.of((0,H.Px)(TP()((0,tg.F0)(t.getState())),"EPSG:4326"))}))},Lj=function(e){return e.ofType(Kb.aO).filter((function(e){return e.mode===Kb.EH.EDIT})).map((function(){return(0,O.fV)(["query"])}))},Mj=function(e){return e.ofType(Kb.$O).switchMap((function(){return Yt.Observable.of((0,DP.Mc)())}))},Zj=function(e,t){return e.ofType(eg._T).filter((function(){return(0,tg.M7)(t.getState())})).mapTo((0,Kb.hB)())},Gj=function(e,t){return e.ofType(eg._T).filter((function(){return!(0,tg.M7)(t.getState())})).switchMap((function(){return Yt.Observable.from([HP(t.getState()),{type:Kb.Hg}])}))},Bj=function(e,t){return e.ofType(Kb.sF).filter((function(){return(0,tg.M7)(t.getState())})).switchMap((function(){return Yt.Observable.of((0,eg.XO)())}))},zj=function(e,t){return e.ofType(eg.Yx,eg.VN).filter((function(e){var r=t.getState().featuregrid.disableQuickFilterSync;return e.type===eg.Yx||!r})).switchMap((function(){var r=t.getState(),n=r.query,o=(r.featuregrid||{}).selectedLayer,i=(n||{}).filterObj;return Yt.Observable.merge(Yt.Observable.of((0,tg.M7)(t.getState())).filter((function(e){return e})),e.ofType(Kb.Yd)).mergeMap((function(){return Yt.Observable.of(function(e,t){return(0,w.He)(e,{filterObj:t})}(o,i))}))}))},Uj=function(e,t){var r=t.getState;return e.ofType(Kb.ye).filter((function(){return!(0,tg.gy)(r())})).switchMap((function(t){var n=r(),o=t.pages,i=o.startPage,a=o.endPage,l=n.featuregrid,c=l.pages,s=l.pagination,u=(0,fe.get)(s,"size"),p=(0,IP.gP)(i,a,c,u),f=p[1]-p[0]+1;return Yt.Observable.of((0,eg.IO)((0,tg.Bu)(n),WP(BP({},(0,tg.X1)(n)),{startIndex:p[0]*u,maxFeatures:f*u}),(0,_P.TC)(n))).filter((function(){return p.length>0})).merge(e.ofType(eg.Hu).filter((function(){return p.length>0})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result,n=void 0===t?{}:t,o=e.filterObj,l=r().featuregrid,s=l.features,p=l.maxStoredPages,f=(0,fe.get)(o,"pagination.startIndex"),d=(0,IP.f1)(n,{endPage:a,startPage:i},{pages:c,features:s||[]},{size:u,startIndex:f,maxStoredPages:p}),y=d.pages,m=d.features;return(0,Kb.UB)(m,y)})).take(1).takeUntil(e.ofType(eg.VT))).merge(e.ofType(eg.yz).filter((function(){return p.length>0})).filter((function(e){return!e.isLoading})).withLatestFrom(e.ofType(Kb.ye)).map((function(e){return e[1]})).take(1).takeUntil(e.ofType(eg.VT)))}))},Wj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(w.Zz).filter((function(e){var t=e.layer,r=void 0===t?[]:t,o=e.params,i=void 0===o?{}:o;return(0,fe.includes)((0,fe.castArray)(r),(0,_P.u$)(n()))&&(0,fe.includes)(Object.keys(i),"time")&&(0,_P.DK)(n())})).merge(e.ofType(Kb.d)).filter((function(){return(0,_P.Rd)(n())})).withLatestFrom(e.ofType(eg.Qq),(function(e,t){return t})).switchMap((function(e){return Yt.Observable.of((0,eg.rP)(e.searchUrl,e.filterObj))}))},Vj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(O.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control;return"drawer"===t&&r().browser&&r().browser.mobile&&(0,te.BP)(r())})).switchMap((function(){return Yt.Observable.of((0,DP.aN)(),(0,Kb.t9)())}))},qj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(DP.xy).filter((function(){return r().browser&&r().browser.mobile&&(0,te.BP)(r())})).mapTo((0,O.Xi)("drawer","enabled"))},Hj=r(55877),$j=r.n(Hj);function Yj(e){return function(e){if(Array.isArray(e))return Kj(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Kj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kj(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xj(Object(r),!0).forEach((function(t){Jj(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eC={advancedFilters:{},filters:{},editingAllowedRoles:["ADMIN"],enableColumnFilters:!0,showFilteredObject:!1,timeSync:!1,showTimeSync:!1,open:!1,canEdit:!1,focusOnEdit:!1,showAgain:!1,showPopoverSync:!localStorage||null===localStorage.getItem("showPopoverSync")||"true"===localStorage.getItem("showPopoverSync"),mode:Kb.EH.VIEW,changes:[],pagination:{page:0,size:20},select:[],multiselect:!1,drawing:!1,newFeatures:[],features:[],dockSize:.35,customEditorsOptions:{rules:[]}},tC=function(e,t){return t===e||void 0!==e.id&&null!==e.id&&e.id===t.id},rC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return tC(e,t)})).length>0},nC=function(e,t,r,n){return e.map((function(e){return rC(e,t)?function(e,t,r){return Qj(Qj({},e),{},r?{properties:Qj(Qj({},e.properties),t),geometry:r.geometry}:{properties:Qj(Qj({},e.properties),t)})}(e,r,n):e}))};var oC=r(93358),iC=r(1262),aC=r(30029),lC=r(18027),cC=r(72986),sC=r.n(cC);r(49548);var uC=r(59979);function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const dC=(0,_.compose)((0,_.withProps)((function(e){var t=e.renderPopover,r=e.popoverOptions;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pC(Object(r),!0).forEach((function(t){fC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(t?{renderPopover:t,popoverOptions:r}:{},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["renderPopover","popoverOptions"]))})),(0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderPopover,r=e.popoverOptions;return t&&!!r}),uC.Z,Kr.Z));function yC(){return(yC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var mC={width:0,padding:0,borderWidth:0},bC={},gC=function(e){return e?bC:mC},vC=dC((0,s.forwardRef)((function(e,t){var r=e.disabled,n=e.id,o=e.visible,i=e.onClick,a=e.glyph,l=e.active,c=e.className,s=void 0===c?"square-button":c,p=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["disabled","id","visible","onClick","glyph","active","className"]);return u().createElement(qe.Z,yC({ref:t},p,{bsStyle:l?"success":"primary",disabled:r,id:"fg-".concat(n),style:gC(o),className:s,onClick:function(){return!r&&i()}}),u().createElement(h.Glyphicon,{glyph:a}))}))),hC=function(e,t){return e?"featuregrid.toolbar.stopDrawGeom":t?"featuregrid.toolbar.drawGeom":"featuregrid.toolbar.addGeom"},OC=function(e){var t=e.saving,r=e.saved;return t||r?"featuregrid.toolbar.saving":"featuregrid.toolbar.saveChanges"};const wC={onGridSort:function(e,t){return(0,Kb.DY)(e,t)},onAddFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Kb.a8)(e)},onTemporaryChanges:function(e){return(0,Kb.aT)(e)},onGridRowsUpdated:function(e,t){var r,n,o=e.fromRow,i=e.toRow,a=e.updated,l=(r=o,n=i,Array.from({length:n+1-r},(function(e,t){return t+r}))).map((function(e){return t(e)})).filter((function(e){return Object.keys(a||{}).filter((function(t){return e.properties[t]!==a[t]})).length>0}));return(0,Kb.nG)(l,a)},onRowsToggled:function(e,t){return(0,Kb.KD)(e.map((function(e){return t(e.rowIdx)})),!1)},onRowsSelected:function(e,t){return(0,Kb.KD)(e.map((function(e){return t(e.rowIdx)})),!0)},onRowsDeselected:function(e,t){return(0,Kb.gr)(e.map((function(e){return t(e.rowIdx)})))}},EC=[{name:"",key:"geometry",width:35,frozen:!0,events:{onClick:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.crs,i=n.maxZoom;return e.geometry?(0,H.Px)(TP()(e),o||"EPSG:4326",i):{type:"NONE"}}},formatter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return t?u().createElement(h.Glyphicon,{glyph:"zoom-to"}):u().createElement(Ze.Z,{placement:"top",overlay:u().createElement(h.Tooltip,{id:"fe-save-features"},u().createElement(v.Z,{msgId:"featuregrid.missingGeometry"}))},u().createElement(h.Glyphicon,{glyph:"exclamation-mark"}))}}],SC={onPageChange:function(e,t){return(0,Kb.oO)(e,t)},moreFeatures:Kb.zd},PC={createFeature:function(){return(0,Kb.lx)([{}])},saveChanges:function(){return(0,Kb.$S)()},clearFeatureEditing:function(){return(0,Kb.Pv)("clearConfirm",!0)},deleteGeometry:function(){return(0,Kb.pX)()},deleteFeatures:function(){return(0,Kb.Pv)("deleteConfirm",!0)},download:function(){return(0,O.Xi)("layerdownload")},settings:function(){return(0,Kb.Pv)("settings")},switchEditMode:function(){return(0,Kb.lg)()},startEditingFeature:function(){return(0,Kb.sY)()},startDrawingFeature:function(){return(0,Kb.kA)()},switchViewMode:function(){return(0,Kb.nY)()},onClose:function(){return(0,Kb.JK)()},showQueryPanel:function(){return(0,Kb.MY)()},zoomAll:function(){return(0,Kb.ve)()},sync:function(){return(0,eg.XO)()},setTimeSync:Kb.Yb,hideSyncPopover:function(){return(0,Kb.Pl)()},toggleShowAgain:function(){return(0,Kb.Ib)()},chart:function(){return(0,de.C2)()}};var jC=wC,CC=EC,xC=SC,TC=PC;const kC=(0,d.connect)((function(e){return{attributes:(0,_P.o)(e)}}),{onChange:function(e,t){return(0,Kb.an)(e,"hide",t)}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.titleMsg,o=void 0===n?"featuregrid.columns":n,i=e.onChange,a=void 0===i?function(){}:i,l=e.attributes,c=void 0===l?[]:l;return u().createElement("div",{className:"bg-body data-attribute-selector",style:r},u().createElement("h4",{className:"text-center"},u().createElement("strong",null,u().createElement(v.Z,{msgId:o}))),u().createElement("div",null,c.map((function(e){return u().createElement(h.Checkbox,{key:e.attribute||e.name,checked:!e.hide,onChange:function(){return a(e.attribute,!e.hide)}},e.label||e.attribute)}))))}));function IC(){return(IC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AC(Object(r),!0).forEach((function(t){DC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function DC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var RC=(0,d.connect)((0,N.zB)({loading:tg.gy}))(aC.Z),NC=(0,d.connect)((0,N.zB)({saving:_P.uz,saved:_P.Ci,mode:_P.eK,hasChanges:_P.LB,hasNewFeatures:_P.b4,hasGeometry:_P.OK,syncPopover:function(e){return{showAgain:(0,_P.tU)(e),showPopoverSync:(0,_P.Gl)(e),dockSize:(0,Xr.ic)(e,{dockSize:!0}).dockSize+3.2+"%"}},isDrawing:_P.Ae,showChartButton:function(e){return!(0,_P.PI)(e)&&(0,te.PJ)(e)},isSimpleGeom:_P.He,selectedCount:_P.jY,disableToolbar:function(e){return e&&e.featuregrid&&e.featuregrid.disableToolbar||!(0,tg.hk)(e,(0,_P.kd)(e))},displayDownload:te.pn,disableDownload:function(e){return 0===((0,tg.Mz)(e)||[]).length},isDownloadOpen:function(e){return e&&e.controls&&e.controls.layerdownload&&e.controls.layerdownload.enabled},isSyncActive:tg.M7,isColumnsOpen:function(e){return e&&e.featuregrid&&e.featuregrid.tools&&e.featuregrid.tools.settings},disableZoomAll:function(e){return e&&e.featuregrid.virtualScroll||0===(0,tg.F0)(e).features.length},isSearchAllowed:function(e){return!(0,be.c0)(e)},isEditingAllowed:_P.nq,hasSupportedGeometry:_P.bq,isFilterActive:tg.VD,showTimeSyncButton:_P.ou,timeSync:_P.DK}),(function(e){return{events:(0,jP.DE)(TC,e)}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableToolbar,r=e.disableDownload,n=e.disableZoomAll,o=void 0!==n&&n,i=e.displayDownload,a=e.events,l=void 0===a?{}:a,c=e.hasChanges,s=e.hasGeometry,p=e.hasNewFeatures,f=e.hasSupportedGeometry,d=void 0===f||f,y=e.isColumnsOpen,m=e.isDrawing,b=void 0!==m&&m,g=e.isEditingAllowed,O=e.isFilterActive,w=void 0!==O&&O,E=e.isDownloadOpen,S=e.isSearchAllowed,P=e.isSimpleGeom,j=e.isSyncActive,C=void 0!==j&&j,x=e.saved,T=void 0!==x&&x,k=e.saving,I=void 0!==k&&k,A=e.selectedCount,F=e.showAdvancedFilterButton,D=void 0===F||F,R=e.showChartButton,N=void 0===R||R,_=e.showSyncOnMapButton,L=void 0===_||_,M=e.showTimeSyncButton,Z=void 0!==M&&M,G=e.syncPopover,B=void 0===G?{showPopoverSync:!0,dockSize:"32.2%"}:G,z=e.mode,U=void 0===z?"VIEW":z,W=e.timeSync,V=void 0!==W&&W;return u().createElement(h.ButtonGroup,{id:"featuregrid-toolbar",className:"featuregrid-toolbar featuregrid-toolbar-margin"},u().createElement(vC,{id:"edit-mode",keyProp:"edit-mode",tooltipId:"featuregrid.toolbar.editMode",disabled:t,visible:"VIEW"===U&&g,onClick:l.switchEditMode,glyph:"pencil"}),u().createElement(vC,{id:"search",keyProp:"search",tooltipId:"featuregrid.toolbar.advancedFilter",active:w,disabled:t||!S,visible:"VIEW"===U&&D,onClick:l.showQueryPanel,glyph:"filter"}),u().createElement(vC,{id:"zoom-all",keyProp:"zoom-all",tooltipId:"featuregrid.toolbar.zoomAll",disabled:t||o,visible:"VIEW"===U,onClick:l.zoomAll,glyph:"zoom-to"}),u().createElement(vC,{id:"back-view",keyProp:"back-view",tooltipId:"featuregrid.toolbar.quitEditMode",disabled:t,visible:"EDIT"===U&&!c&&!p,onClick:l.switchViewMode,glyph:"arrow-left"}),u().createElement(vC,{id:"add-feature",keyProp:"add-feature",tooltipId:"featuregrid.toolbar.addNewFeatures",disabled:t,visible:"EDIT"===U&&!p&&!c&&d,onClick:l.createFeature,glyph:"row-add"}),u().createElement(vC,{id:"draw-feature",keyProp:"draw-feature",tooltipId:hC(b,P),disabled:t,visible:"EDIT"===U&&1===A&&(!s||s&&!P)&&d,onClick:l.startDrawingFeature,active:b,glyph:"pencil-add"}),u().createElement(vC,{id:"remove-features",keyProp:"remove-features",tooltipId:"featuregrid.toolbar.deleteSelectedFeatures",disabled:t,visible:"EDIT"===U&&A>0&&!c&&!p,onClick:l.deleteFeatures,glyph:"trash-square"}),u().createElement(vC,{id:"save-feature",keyProp:"save-feature",tooltipId:OC({saving:I,saved:T}),disabled:I||T||t,visible:"EDIT"===U&&c||p,active:T,onClick:l.saveChanges,glyph:"floppy-disk"}),u().createElement(vC,{id:"cancel-editing",keyProp:"cancel-editing",tooltipId:"featuregrid.toolbar.cancelChanges",disabled:t,visible:"EDIT"===U&&c||p,onClick:l.clearFeatureEditing,glyph:"remove-square"}),u().createElement(vC,{id:"delete-geometry",keyProp:"delete-geometry",tooltipId:"featuregrid.toolbar.deleteGeometry",disabled:t,visible:"EDIT"===U&&s&&1===A&&d,onClick:l.deleteGeometry,glyph:"polygon-trash"}),u().createElement(vC,{id:"download-grid",keyProp:"download-grid",tooltipId:"featuregrid.toolbar.downloadGridData",disabled:t||r,active:E,visible:i&&"VIEW"===U,onClick:l.download,glyph:"download"}),u().createElement(vC,{id:"grid-settings",keyProp:"grid-settings",tooltipId:"featuregrid.toolbar.hideShowColumns",disabled:t,active:y,visible:A<=1&&"VIEW"===U,onClick:l.settings,glyph:"features-grid-set"}),u().createElement(vC,{id:"grid-map-chart",keyProp:"grid-map-chart",tooltipId:"featuregrid.toolbar.createNewChart",disabled:t,visible:"VIEW"===U&&N,onClick:l.chart,glyph:"stats"}),u().createElement(vC,{id:"grid-map-filter",keyProp:"grid-map-filter",tooltipId:"featuregrid.toolbar.syncOnMap",disabled:t,active:C,visible:L,onClick:l.sync,glyph:"map-filter",renderPopover:B.showPopoverSync,popoverOptions:!t&&{placement:"top",content:u().createElement("span",null,u().createElement("p",null,u().createElement(v.Z,{msgId:"featuregrid.toolbar.synchPopoverText"})),u().createElement("p",null,u().createElement(h.Checkbox,{checked:B.showAgain,onClick:l.toggleShowAgain},u().createElement(v.Z,{msgId:"featuregrid.toolbar.notShowAgain"})))),props:{id:"sync-popover",title:u().createElement("div",null,u().createElement(v.Z,{msgId:"featuregrid.toolbar.synchPopoverTitle"}),u().createElement("button",{onClick:function(){B.showAgain&&localStorage.setItem("showPopoverSync",!1),l.hideSyncPopover()},className:"close"},u().createElement(h.Glyphicon,{className:"pull-right",glyph:"1-close"}))),style:{bottom:B.dockSize}}}}),u().createElement(vC,{id:"timeSync-button",keyProp:"fg-timeSync-button",tooltipId:V?"featuregrid.toolbar.disableTimeSync":"featuregrid.toolbar.enableTimeSync",visible:Z,active:V,onClick:function(){return l.setTimeSync&&l.setTimeSync(!V)},glyph:"time"}))})),_C=(0,d.connect)((0,N.P1)(_P.Sj,(function(e){return{title:e}})),{onClose:TC.onClose})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onDownloadToggle:function(){}};return u().createElement(h.Grid,{className:"bg-body data-grid-top-toolbar",fluid:!0,style:{width:"100%"}},u().createElement(h.Row,{className:"flex-center"},u().createElement(h.Col,{xs:4},e.children),u().createElement(h.Col,{xs:4},u().createElement("div",{className:"text-center text-primary"},u().createElement("strong",null,e.title))),u().createElement(h.Col,{xs:4},u().createElement(qe.Z,{onClick:e.onClose,style:{float:"right"},className:"square-button no-border featuregrid-top-toolbar-margin"},u().createElement(h.Glyphicon,{glyph:"1-close"})))))})),LC=(0,d.connect)((0,N.P1)((0,N.zB)(tg.b0),tg.gy,(function(e){return e&&e.featuregrid&&!!e.featuregrid.virtualScroll}),_P.jY,(function(e,t,r,n){return FC(FC({},e),{},{selected:n,loading:t,virtualScroll:r})})),xC)((function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,onPageChange:function(){}},n=(0,IP.DR)(r),o=n.page,i=void 0===o?0:o,a=n.size,l=void 0===a?0:a,c=n.resultSize,s=void 0===c?0:c,p=n.maxPages,f=void 0===p?0:p,d=n.total,y=void 0===d?0:d;return u().createElement(h.Grid,{className:"bg-body data-grid-bottom-toolbar",fluid:!0,style:{width:"100%"}},u().createElement(h.Row,{className:"featuregrid-toolbar-margin"},u().createElement(h.Col,{md:3},u().createElement("span",null,u().createElement(v.Z,{msgId:r.virtualScroll?"featuregrid.resultInfoVirtual":"featuregrid.resultInfo",msgParams:{start:i*l+1,end:i*l+s,total:y,selected:null!==(e=r.selected)&&void 0!==e?e:0}}))," ",r.selected>0?u().createElement("span",null,u().createElement(v.Z,{msgId:"featuregrid.selectedInfo",msgParams:{selected:null!==(t=r.selected)&&void 0!==t?t:0}})):null),r.virtualScroll?null:u().createElement(h.Col,{className:"text-center",md:6},u().createElement(qe.Z,{key:"first-page",onClick:function(){return r.onPageChange(0)},disabled:0===i,className:"no-border first-page"},u().createElement(h.Glyphicon,{glyph:"step-backward"})),u().createElement(qe.Z,{key:"prev-page",onClick:function(){return r.onPageChange(i-1)},disabled:0===i,className:"no-border prev-page"},u().createElement(h.Glyphicon,{glyph:"chevron-left"})),u().createElement("span",{key:"page-info"},u().createElement(v.Z,{msgId:"featuregrid.pageInfo",msgParams:{page:i+1,totalPages:f+1}})),u().createElement(qe.Z,{key:"next-page",onClick:function(){return r.onPageChange(i+1)},className:"no-border next-page",disabled:i>=f},u().createElement(h.Glyphicon,{glyph:"chevron-right"})),u().createElement(qe.Z,{key:"last-page",onClick:function(){return r.onPageChange(f)},className:"no-border last-page",disabled:i>=f},u().createElement(h.Glyphicon,{glyph:"step-forward"})))," ",u().createElement(h.Col,{md:3},r.loading?u().createElement("span",{style:{float:"right"}},u().createElement(v.Z,{msgId:"loading"}),u().createElement(sC(),{spinnerName:"circle",style:{float:"right"},noFadeIn:!0})):null)))})),MC=(0,d.connect)((0,N.P1)(_P.jY,(function(e){return{count:e}})),{onClose:function(){return(0,Kb.Pv)("deleteConfirm",!1)},onConfirm:function(){return(0,Kb.Uz)()}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,o=void 0!==n&&n,i=e.count,a=e.onConfirm,l=void 0===a?function(){}:a;return u().createElement(b.Z,null,u().createElement(iC.Z,{show:!0,onClose:r,onConfirm:l,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:u().createElement(v.Z,{msgId:"featuregrid.deleteButton"}),confirmButtonDisabled:o},u().createElement(v.Z,{msgId:"featuregrid.delete",msgParams:{count:i}})))})),ZC=(0,d.connect)((0,N.P1)(_P.jY,(function(e){return{count:e}})),{onClose:function(){return(0,Kb.Pv)("clearConfirm",!1)},onConfirm:function(){return(0,Kb.oL)()}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,o=void 0!==n&&n,i=e.onConfirm,a=void 0===i?function(){}:i;return u().createElement(b.Z,null,u().createElement(iC.Z,{draggable:!1,show:!0,onClose:r,onConfirm:a,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:u().createElement(v.Z,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:o,closeText:u().createElement(v.Z,{msgId:"featuregrid.noButton"})},u().createElement(v.Z,{msgId:"featuregrid.clear"})))})),GC=(0,d.connect)((function(){}),{onClose:function(){return(0,Kb.Ap)()},onConfirm:function(){return(0,Kb.YV)()}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,o=void 0!==n&&n,i=e.onConfirm,a=void 0===i?function(){}:i;return u().createElement(b.Z,null,u().createElement(iC.Z,{show:!0,onClose:r,onConfirm:a,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:u().createElement(v.Z,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:o,closeText:u().createElement(v.Z,{msgId:"featuregrid.noButton"})},u().createElement(v.Z,{msgId:"featuregrid.featureClose"})))})),BC={settings:kC},zC={deleteConfirm:MC,featureCloseConfirm:GC,clearConfirm:ZC},UC={settings:{style:{padding:"0 12px",overflow:"auto",flex:"0 0 14em",boxShadow:"inset 0px 0px 10px rgba(0, 0, 0, 0.4)",height:"100%",minWidth:195}}},WC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&BC[t]})).map((function(e){var t=BC[e];return u().createElement(t,IC({key:e},UC[e]||{}))}))},VC=function(){return u().createElement(_C,null,u().createElement(NC,null))},qC=function(e){return e.focusOnEdit&&e.hasChanges||e.newFeatures.length>0?null:u().createElement(LC,null)},HC=function(){return RC},$C=(0,N.P1)((function(e){return e}),(function(e){return e?((0,gg.getFeatureTypeProperties)(e)||[]).reduce((function(e,t){return FC(FC({},e),{},DC({},t.name,(0,d.connect)((0,N.P1)((function(e){return(0,_P.g5)(e,t.name)}),_P.eK,(function(e,r){var n=FC({value:e&&(e.rawValue||e.value)},(0,gg.isGeometryType)(t)?{filterEnabled:null==e?void 0:e.enabled,filterDeactivated:null==e?void 0:e.deactivated}:{}),o=(0,gg.isGeometryType)(t)?{}:{disabled:!0,tooltipMsgId:"featuregrid.filter.tooltips.editMode"};return"EDIT"===r?FC(FC({},n),o):n})))((0,lC.Q)((0,gg.isGeometryType)(t)?"geometry":t.localType,{name:t.name}))))}),{}):{}})),YC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&zC[t]})).map((function(e){var t=zC[e];return u().createElement(t,{key:e})}))},KC=r(96259);function XC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function QC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XC(Object(r),!0).forEach((function(t){JC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function JC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ex(){return(ex=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var tx=[],rx={},nx=(0,d.connect)((0,N.P1)(_P.P4,(function(e){return(0,Xr.ic)(e,{transform:!0})}),(function(e,t){return{size:e,dockStyle:t}})))(CP.default),ox=(0,N.P1)((function(e){return(0,fe.get)(e,"featuregrid.open")}),(function(e){return(0,fe.get)(e,"featuregrid.customEditorsOptions")}),(function(e){return(0,fe.get)(e,"queryform.autocompleteEnabled")}),(function(e){return(0,tg.UM)(e)}),(function(e){return(0,tg.HY)(e)}),(function(e){return(0,fe.get)(e,"featuregrid.features")||tx}),tg.Qs,(function(e){return(0,fe.get)(e,"featuregrid.attributes")}),(function(e){return(0,fe.get)(e,"featuregrid.tools")}),_P._w,_P.eK,_P.eO,_P.kG,_P.LB,(function(e){return(0,fe.get)(e,"featuregrid.focusOnEdit",!1)}),(function(e){return(0,fe.get)(e,"featuregrid.enableColumnFilters")}),(0,N.zB)(tg.b0),(function(e){return(0,fe.get)(e,"featuregrid.pages")}),(function(e){return(0,fe.get)(e,"featuregrid.pagination.size")}),(function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:tx,a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,s=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:tx,d=arguments.length>13?arguments[13]:void 0,y=arguments.length>14?arguments[14]:void 0,m=arguments.length>15?arguments[15]:void 0,b=arguments.length>16?arguments[16]:void 0,g=arguments.length>17?arguments[17]:void 0,v=arguments.length>18?arguments[18]:void 0;return{open:e,customEditorsOptions:t,autocompleteEnabled:r,url:n,typeName:o,hasChanges:d,newFeatures:f,features:i,describe:a,attributes:l,tools:c,select:s,mode:u,focusOnEdit:y,enableColumnFilters:m,changes:(0,IP.rK)(p),pagination:b,pages:g,size:v}})),ix=(0,_.compose)((0,d.connect)(ox,(function(e){return{onMount:(0,jP.DE)(Kb.Z_,e),gridEvents:(0,jP.DE)(jC,e),pageEvents:(0,jP.DE)(xC,e),initPlugin:(0,jP.DE)((function(e){return(0,Kb.QT)(e)}),e),toolbarEvents:(0,jP.DE)(TC,e),gridTools:CC.map((function(t){return QC(QC({},t),{},{events:(0,jP.DE)(t.events,e)})})),onSizeChange:function(){return e(Kb.Ox.apply(void 0,arguments))}}})),(0,_.lifecycle)({componentDidMount:function(){this.props.onMount((0,fe.pick)(this.props,["showFilteredObject","showTimeSync","timeSync"]))}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tools:rx,dialogs:rx,select:tx},t=e.pluginCfg.maxZoom,r={dimMode:"none",defaultSize:.35,fluid:!0,isVisible:e.open,maxDockSize:.7,minDockSize:.1,position:"bottom",setDockSize:function(){},zIndex:1030};return u().createElement(nx,ex({},r,{onSizeChange:function(t){e.onSizeChange(t,r)}}),e.open&&u().createElement(KC.Z,null,(function(r){var n=r.height;return u().createElement(Go.Z,{className:"feature-grid-container",key:"feature-grid-container",height:n-94,header:VC(),columns:WC(e.tools),footer:qC(e)},YC(e.tools),u().createElement(oC.Z,{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin,customEditorsOptions:e.customEditorsOptions,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName,filterRenderers:$C(e.describe),enableColumnFilters:e.enableColumnFilters,emptyRowsView:HC(),focusOnEdit:e.focusOnEdit,newFeatures:e.newFeatures,changes:e.changes,mode:e.mode,select:e.select,key:"feature-grid-container",columnSettings:e.attributes,gridEvents:e.gridEvents,pageEvents:e.pageEvents,describeFeatureType:e.describe,features:e.features,minHeight:600,tools:e.gridTools,pagination:e.pagination,pages:e.pages,virtualScroll:e.virtualScroll,maxStoredPages:e.maxStoredPages,vsOverScan:e.vsOverScan,scrollDebounce:e.scrollDebounce,size:e.size,actionOpts:{maxZoom:t}}))})))}));const ax=(0,E.rx)("FeatureEditor",{component:ix,epics:i,reducers:{featuregrid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kb.Xp:return se()({},e,{showPopoverSync:!localStorage||null===localStorage.getItem("showPopoverSync")||"true"===localStorage.getItem("showPopoverSync"),editingAllowedRoles:t.options.editingAllowedRoles||e.editingAllowedRoles||["ADMIN"],virtualScroll:!!t.options.virtualScroll,maxStoredPages:t.options.maxStoredPages||5});case Kb.ye:case Kb.gG:return se()({},e,{pagination:{page:void 0!==t.page?t.page:e.pagination.page,size:void 0!==t.size?t.size:e.pagination.size}});case Kb.fT:var r;return Qj(Qj({},e),{},{pagination:Qj(Qj({},null!==(r=e.pagination)&&void 0!==r?r:{}),{},{size:t.size})});case Kb.Oj:var n=t.features.filter((function(e){return"empty_row"!==e.id}));return e.multiselect&&t.append?se()({},e,{select:t.append?(0,fe.uniqBy)([].concat(Yj(e.select),Yj(n)),"id"):n}):n&&e.select&&e.select[0]&&n[0]&&1===e.select.length&&tC(n[0],e.select[0])?e:se()({},e,{select:n||[]});case Kb.v6:var o=e.select.filter((function(e){return!rC(e,t.features)})),i=t.features.filter((function(t){return!rC(t,e.select)})),a=o.concat(i||[]);return se()({},e,{select:a});case Kb.jp:return se()({},e,{select:e.select.filter((function(e){return!rC(e,t.features)}))});case Kb.DU:return se()({},e,{multiselect:t.multiselect});case Kb.r:return se()({},e,{customEditorsOptions:t.payload});case Kb.gJ:return se()({},e,t.options||{});case Kb.CM:return se()({},e,{select:[],changes:[]});case Kb.iQ:return se()({},e,{features:t.features});case Kb.dZ:return se()({},e,{dockSize:t.dockSize});case Kb.$:return se()({},e,{selectedLayer:t.id});case Kb.qw:return se()({},e,{tools:Qj(Qj({},e.tools),{},Jj({},t.tool,void 0===t.value?!(e.tools&&e.tools[t.tool]):t.value))});case Kb.f$:return se()({},e,{attributes:Qj(Qj({},e.attributes),{},Jj({},t.name,Qj(Qj({},e.attributes&&e.attributes[t.name]||{}),{},Jj({},t.key,t.value||e.attributes&&e.attributes[t.name]&&!e.attributes[t.name][t.key]))))});case Kb.aO:return se()({},e,{showPopoverSync:localStorage&&null!==localStorage.getItem("showPopoverSync")?"true"===localStorage.getItem("showPopoverSync"):t.mode!==Kb.EH.EDIT,tools:t.mode===Kb.EH.EDIT?{}:e.tools,mode:t.mode,multiselect:t.mode===Kb.EH.EDIT,drawing:!1});case Kb.K8:var l=t.features.filter((function(e){return e._new}))||[];return se()({},e,{newFeatures:l.length>0?nC(e.newFeatures,l,t.updated,null):e.newFeatures,changes:[].concat(Yj(e&&e.changes||[]),Yj(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:t.updated}}))))});case Kb.AH:return se()({},e,{saving:!0,loading:!0});case Kb.AY:return se()({},e,{deleteConfirm:!1,saved:!0,saving:!1,drawing:!1,loading:!1});case Kb.yi:return se()({},e,{saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case Kb.IN:var c=$j().v1();return se()({},e,{newFeatures:t.features.map((function(e){return Qj(Qj({},e),{},{_new:!0,id:c,type:"Feature",geometry:null})})),select:t.features.map((function(e){return Qj(Qj({},e),{},{_new:!0,id:c,type:"Feature",geometry:null})}))});case Kb.SW:return se()({},e,{deleteConfirm:!1,saving:!1,loading:!1,drawing:!1});case Kb.DI:var s=t.features.filter((function(e){return e._new}))||[];return se()({},e,{newFeatures:s.length>0?nC(e.newFeatures,s,null,{geometry:Qj({},(0,fe.head)(s).geometry)}):e.newFeatures,changes:t.features.filter((function(e){return!e._new})).map((function(e,r){return{id:e.id,updated:{geometry:t.features[r].geometry}}})),drawing:!1});case Kb.oh:var u=t.features.filter((function(e){return e._new}))||[];return se()({},e,{newFeatures:u.length>0?nC(e.newFeatures,u,null,{geometry:null}):e.newFeatures,changes:[].concat(Yj(e&&e.changes||[]),Yj(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:{geometry:null}}}))))});case eg.u7:return se()({},e,{localType:(0,fe.get)(t,"featureType.original.featureTypes[0].properties[1].localType")});case Kb._9:return se()({},e,{drawing:!e.drawing});case Kb.$O:return se()({},e,{open:!0});case Kb.sF:return se()({},e,{open:!1,pagination:{page:0,size:e.pagination.size},mode:Kb.EH.VIEW,tools:{},saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case Kb.MK:return se()({},e,{disableToolbar:t.disabled});case Kb.ut:return se()({},e,{canEdit:t.permission.canEdit});case Xb.hZ:return"clean"===t.status?se()({},e,{drawing:!1}):e;case Kb._u:var p=t.update||{},f=p.attribute;if(f&&t.append){var d=e.filters[f].value,y=[];null!=d&&d.attribute&&(y=[d]),(0,fe.isArray)(d)&&(y=d);var m=[].concat(Yj(y),[t.update.value]);return se()({},e,{filters:Jj({},f,{attribute:f,enabled:!0,type:"geometry",operator:"OR",value:m})})}return f?se()({},e,{filters:Qj(Qj({},e.filters),{},Jj({},f,t.update))}):e;case eg.Yx:return se()({},e,{filters:{}});case Kb.DA:var b=t.dockProps&&t.dockProps.maxDockSize,g=t.dockProps&&t.dockProps.minDockSize,v=b&&g&&g<=t.size&&b>=t.size&&t.size||b&&b<t.size&&b||g&&g>t.size&&g||t.size;return se()({},e,{dockSize:v});case Kb.Lz:return se()({},e,{advancedFilters:se()({},e.advancedFilters,Jj({},e.selectedLayer,t.filterObj))});case Kb.Jb:return se()({},e,{features:t.features||[],pages:t.pages||[]});case Kb.yA:return se()({},e,{showPopoverSync:!1});case Kb.sK:return se()({},e,{showAgain:!e.showAgain});case Kb.d:return se()({},e,{timeSync:t.value});default:return e}}},containers:{TOC:{doNotHide:!0,name:"FeatureEditor"}}});r(65207);var lx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item;return u().createElement("span",null,t&&t.name?u().createElement(v.Z,{msgId:t.name}):null)};const cx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.spatialOperations,r=void 0===t?[]:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.value;return u().createElement(Do.DropdownList,{valueField:"id",className:"geometry-operation-selector",onChange:o,data:r,valueComponent:lx,value:i,itemComponent:lx})};function sx(e){return function(e){if(Array.isArray(e))return ux(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ux(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ux(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ux(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var px=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.search,n=t.url;return(0,Ve.w0)(e,n)||(0,Ve.w0)(e,r&&r.url)},fx=function(e){return(e||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return"BBOX"!==t}))},dx={"xsd:normalizedString":"string","xsd:string":"string","xsd:date":"date","xsd:dateTime":"date","xsd:date-time":"date-time","xsd:time":"time","xsd:decimal":"number","xsd:int":"number","xsd:integer":"number","xsd:long":"number","xsd:negativeInteger":"number","xsd:nonNegativeInteger":"number","xsd:nonPositiveInteger":"number","xsd:positiveInteger":"number","xsd:short":"number","xsd:unsignedLong":"number","xsd:unsignedInt":"number","xsd:unsignedShort":"number","xsd:number":"number","xsd:boolean":"boolean","xsd:double":"number","xsd:float":"number"},yx=function(e){return(0,fe.get)(e,"featureTypes[0].properties").filter((function(e){return 0!==e.type.indexOf("gml:")&&dx[e.type]})).map((function(e){return{label:e.name,attribute:e.name,type:dx[e.type],valueId:"id",valueLabel:"name",values:[]}}))};function mx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mx(Object(r),!0).forEach((function(t){gx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vx=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.searchUrl;return t===n})).switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.crossLayerExpanded?Yt.Observable.of(t):e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded;return t})).take(1)})).switchMap((function(e){var t=e.featureTypeName,r=e.searchUrl;return(0,fg.ED)({layer:{name:t,url:r,search:{type:"wfs",url:r}}}).do((function(e){if(t=e,r=(0,fe.get)(t,"WFS_Capabilities.Filter_Capabilities.Scalar_Capabilities.ArithmeticOperators.Functions.FunctionNames.FunctionName"),!(0,fe.find)(r,(function(){return"queryCollection"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})._})))throw new Error("nocrosslayerfunctionalities");var t,r})).map((function(){return{loadingCapabilities:!1}})).catch((function(e){return Yt.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({loadingCapabilities:!0})})).startWith({})},hx=function(e,t){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.layer;return o&&r.name===(o&&o.name)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!!t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.layer;return Yt.Observable.defer((function(){return(0,fg.v$)({layer:r})})).do((function(e){var r=(0,fe.get)((0,gg.findGeometryProperty)(e.data||{}),"name");r&&t("geometryName",r)})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t;return yx(r)})).map((function(e){return{attributes:e,loadingAttributes:!1}})).startWith({loadingAttributes:!0}).catch((function(e){return Yt.Observable.of({errorObj:e,loadingAttributes:!1,featureTypeProperties:[]})}))})).catch((function(e){return Yt.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({})};const Ox=(0,_.compose)((0,_.withPropsOnChange)(["crossLayerFilter"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=void 0===t?{}:t;return{queryCollection:(0,fe.get)(r,"collectGeometries.queryCollection"),operation:(0,fe.get)(r,"operation"),distance:(0,fe.get)(r,"distance")}})),(0,_.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,r=void 0===t?[]:t,n=e.queryCollection,o=void 0===n?{}:n;return{layer:(0,fe.find)(r,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return t===o.typeName}))}})),(0,_.withHandlers)({setQueryCollectionParameter:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){r("collectGeometries.queryCollection[".concat(e,"]"),t),"typeName"===e&&r("collectGeometries.queryCollection.filterFields",[])}},updateLogicCombo:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){return r("collectGeometries.queryCollection.groupFields",[{id:e,logic:t,index:0}])}},setOperation:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e){return r("operation",e)}}}),(0,_.defaultProps)({dataStreamFactory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.setQueryCollectionParameter,n=void 0===r?function(){}:r;return vx(e).combineLatest(hx(e,n),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bx(bx({},t),e)})).startWith({})}}),pg.Z);function wx(e){return(wx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ex(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sx(e,t){return(Sx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Px(e,t){return!t||"object"!==wx(t)&&"function"!=typeof t?jx(e):t}function jx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cx(e){return(Cx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sx(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cx(n);if(o){var r=Cx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Px(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),xx(jx(t=i.call(this,e)),"getCurrentFilter",(function(){return{featureTypeName:t.props.featureTypeName,groupFields:t.props.groupFields,filterFields:t.props.sendFilters&&t.props.sendFilters.attributeFilter&&t.props.filterFields.filter((function(e){return(0,yf.checkOperatorValidity)(e.value,e.operator)}))||[],spatialField:t.props.sendFilters&&t.props.sendFilters.spatialFilter&&t.props.spatialField||{attribute:t.props.spatialField&&t.props.spatialField.attribute},pagination:t.props.pagination,filterType:t.props.filterType,ogcVersion:t.props.ogcVersion,sortOptions:t.props.sortOptions,crossLayerFilter:t.props.sendFilters&&t.props.sendFilters.crossLayerFilter&&(0,yf.setupCrossLayerFilterDefaults)(t.props.crossLayerFilter)||null,hits:t.props.hits}})),xx(jx(t),"isCurrentFilterChanged",(function(){var e=t.getCurrentFilter(),r={groupFields:e.groupFields,filterFields:e.filterFields,spatialField:e.spatialField,crossLayerFilter:e.crossLayerFilter},n=t.props.appliedFilter||{},o={groupFields:n.groupFields,filterFields:n.attributePanelExpanded&&n.filterFields||[],spatialField:n.spatialPanelExpanded&&n.spatialField||{attribute:t.props.spatialField&&t.props.spatialField.attribute},crossLayerFilter:n.crossLayerExpanded&&n.crossLayerFilter&&n.crossLayerFilter.operation?(0,yf.setupCrossLayerFilterDefaults)(n.crossLayerFilter):null};return!(0,fe.isEqual)(r,o)})),xx(jx(t),"search",(function(){var e=t.getCurrentFilter();t.props.actions.onQuery(t.props.searchUrl,e,t.props.params),t.props.advancedToolbar&&t.props.actions.storeAppliedFilter()})),xx(jx(t),"reset",(function(){if(t.props.actions.onChangeDrawingStatus("clean","","queryform",[]),t.props.actions.onReset(),t.props.advancedToolbar){var e={featureTypeName:t.props.featureTypeName,groupFields:[],filterFields:[],spatialField:{attribute:t.props.spatialField&&t.props.spatialField.attribute},pagination:t.props.pagination,filterType:t.props.filterType,ogcVersion:t.props.ogcVersion,sortOptions:t.props.sortOptions,crossLayerFilter:null,hits:t.props.hits};t.props.actions.onQuery(t.props.searchUrl,e,t.props.params),t.props.advancedToolbar&&t.props.actions.storeAppliedFilter()}})),xx(jx(t),"restorePersistedFilter",(function(){t.props.actions.onRestoreFilter()})),t}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.filterFields.filter((function(e){return e.exception})).length>0,r=this.props.allowEmptyFilter&&!this.props.advancedToolbar,n=this.props.filterFields.filter((function(e){return e.value||0===e.value})).length>0,o=(0,yf.isFilterEmpty)(this.props),i=(0,yf.isFilterEmpty)(this.props.appliedFilter),a=this.isCurrentFilterChanged(),l=n||this.props.spatialField.geometry||(0,yf.isCrossLayerFilterValid)(this.props.crossLayerFilter),c=!(0,fe.isEqual)(this.props.appliedFilter,this.props.storedFilter),s=r||o&&this.props.appliedFilter&&!i,p=t||!this.props.toolbarEnabled||o&&!s||!o&&(!l||!a),f=this.props.emptyFilterWarning&&o&&a,d=this.props.advancedToolbar?"queryform.apply":this.props.queryBtnMsgId,y=[{tooltipId:f?"queryform.emptyfilter":d,disabled:p,noTooltipWhenDisabled:!0,glyph:this.props.advancedToolbar?"ok":this.props.queryBtnGlyph,className:f?"square-button-md showWarning":"square-button-md",id:"query-toolbar-query",onClick:this.search}];if(this.props.advancedToolbar){var m=!c||this.props.loadingError||a,b=!c||!this.props.storedFilter||!this.props.toolbarEnabled,g=!this.props.appliedFilter||this.props.appliedFilter&&i||!this.props.toolbarEnabled;y=y.concat([{tooltipId:"queryform.save",disabled:m,noTooltipWhenDisabled:!0,glyph:"floppy-disk",id:"query-toolbar-save",onClick:this.props.actions.onSaveFilter},{tooltipId:"queryform.discard",disabled:b,noTooltipWhenDisabled:!0,glyph:"undo",id:"query-toolbar-discard",onClick:this.restorePersistedFilter},{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:g,onClick:this.reset}])}else y=[{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:!this.props.toolbarEnabled,onClick:this.reset}].concat(y);return u().createElement("div",{className:"container-fluid query-toolbar"},u().createElement(Bo.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md",tooltipPosition:"bottom"},className:"queryFormToolbar row-fluid pull-right",buttons:y}),u().createElement(mn.Z,{show:!!this.props.showGeneratedFilter,bsSize:"large"},u().createElement(mn.Z.Header,null,u().createElement(mn.Z.Title,null,this.props.resultTitle)),u().createElement(mn.Z.Body,null,u().createElement("textarea",{style:{width:"862px",maxWidth:"862px",height:"236px",maxHeight:"236px"}},this.props.showGeneratedFilter)),u().createElement(mn.Z.Footer,null,u().createElement(qe.Z,{style:{float:"right"},onClick:function(){return e.props.actions.onQuery(null,null)}},"Close"))))}}])&&Ex(t.prototype,r),a}(u().Component);xx(Tx,"propTypes",{filterType:f().string,params:f().object,filterFields:f().array,groupFields:f().array,spatialField:f().object,sendFilters:f().object,crossLayerFilter:f().object,toolbarEnabled:f().bool,searchUrl:f().string,showGeneratedFilter:f().oneOfType([f().bool,f().string]),featureTypeName:f().string,actions:f().object,ogcVersion:f().string,titleMsgId:f().string,queryBtnMsgId:f().string,resultTitle:f().string,queryBtnGlyph:f().string,pagination:f().object,sortOptions:f().object,hits:f().bool,allowEmptyFilter:f().bool,emptyFilterWarning:f().bool,appliedFilter:f().object,storedFilter:f().object,advancedToolbar:f().bool,loadingError:f().bool}),xx(Tx,"defaultProps",{sendFilters:{attributeFilter:!0,spatialFilter:!0,crossLayerFilter:!0},filterType:"OGC",params:{},groupFields:[],filterFields:[],spatialField:{},toolbarEnabled:!0,searchUrl:null,showGeneratedFilter:!1,featureTypeName:null,titleMsgId:"queryform.title",queryBtnMsgId:"queryform.query",resultTitle:"Generated Filter",queryBtnGlyph:"search",pagination:null,sortOptions:null,hits:!1,allowEmptyFilter:!1,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,actions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){},storeAppliedFilter:function(){}}});const kx=Tx;var Ix=r(76364),Ax=r(59286);function Fx(e){return(Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dx(){return(Dx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Rx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _x(e,t){return(_x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lx(e,t){return!t||"object"!==Fx(t)&&"function"!=typeof t?Mx(e):t}function Mx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zx(e){return(Zx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_x(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zx(n);if(o){var r=Zx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Lx(this,e)});function a(){var e;Rx(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Gx(Mx(e=i.call.apply(i,[this].concat(r))),"state",{}),Gx(Mx(e),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return u().createElement(r,null,t)}var n=u().createElement(h.Tooltip,{id:e.props.tooltip.id},"this.props.tooltip.message");return u().createElement(Ze.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),Gx(Mx(e),"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return u().createElement("div",{className:"autocomplete-toolbar"},!t&&u().createElement(h.Glyphicon,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(){return e.props.pagination.loadPrevPage()}}),!r&&u().createElement(h.Glyphicon,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(){return e.props.pagination.loadNextPage()}}))})),Gx(Mx(e),"renderField",(function(){var t,r={emptyList:function(){return e.props.busy?"Loading...":(0,le.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList")},open:(0,le.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,le.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},n=[];e.props.data&&e.props.data.length>0&&(n=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&n.length>0&&n.push((Gx(t={},e.props.textField,""),Gx(t,e.props.valueField,""),Gx(t,"disabled",!0),Gx(t,"pagination",e.renderPagination()),t));var o=!1,i=e.props.loading?[]:n,a=e.props.itemComponent,l=u().createElement(Do.Combobox,{dropUp:e.props.dropUp,busy:e.props.busy,data:i,disabled:e.props.disabled,itemComponent:function(t){return u().createElement(a,Dx({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||r,open:e.props.open,filter:!1,onChange:function(t){e.props.onChange(t,e.props.valueField),o=!0},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){var r=(0,fe.head)(e.props.features.filter((function(r){return r.properties[e.props.valueField].toLowerCase()===t[e.props.valueField].toLowerCase()})));e.props.onSelect(t,r,e.props.srsName,e.props.style)},onToggle:function(t){var r=(0,fe.head)(e.props.features.filter((function(t){return t.properties[e.props.valueField].toLowerCase()===e.props.selectedValue.toLowerCase()})));!t||e.props.selectedValue||e.props.selectedValue||o||e.props.onChange("",e.props.valueField),e.props.onToggle(t,r,e.props.pagination.currentPage),r&&!t&&e.props.onSelect(e.props.selectedValue,r,e.props.srsName,e.props.style),o=!1},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(l):l})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.label?u().createElement("label",null,this.props.label):u().createElement("span",null);return u().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&Nx(t.prototype,r),a}(u().Component);Gx(Bx,"propTypes",{busy:f().bool,data:f().array,disabled:f().bool,dropUp:f().bool,features:f().array,filter:f().string,itemComponent:f().oneOfType([f().object,f().func]),label:f().string,loading:f().bool,messages:f().object,onChange:f().func,onFocus:f().func,onSelect:f().func,onToggle:f().func,onChangeDrawingStatus:f().func,style:f().style,open:f().bool,pagination:f().object,nextPageIcon:f().string,prevPageIcon:f().string,selectedValue:f().string,srsName:f().string,textField:f().string,tooltip:f().object,valueField:f().string}),Gx(Bx,"contextTypes",{messages:f().object}),Gx(Bx,"defaultProps",{dropUp:!1,features:[],filter:"",itemComponent:jf.Z,loading:!1,label:null,pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onChangeDrawingStatus:function(){},onSelect:function(){},srsName:"EPSG:4326",textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value"});const zx=Bx;function Ux(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ux(Object(r),!0).forEach((function(t){Vx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ux(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,_.setObservableConfig)(Nl.Z);var qx=(0,_.mapPropsStreamWithConfig)(Nl.Z)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return Wx(Wx({},t),{},{data:(0,fe.isArray)(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values:[],features:(0,fe.isArray)(e&&e.fetchedData&&e.fetchedData.features)?e.fetchedData.features:[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,srsName:e&&e.fetchedData&&e.fetchedData.crs,busy:e.busy})}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,i=e.change,a=e.changed,l=e.originalValue,c=e.value,s=e.valuesCount,p=e.onChangeDrawingStatus,f=e.loadNextPage,d=e.loadPrevPage,y=e.maxFeatures,m=e.currentPage,b=e.itemComponent,g=e.features,v=e.busy,h=e.data,O=e.loading,w=void 0!==O&&O,E=e.valueField,S=e.textField,P=e.filter,j=e.srsName,C=e.style,x=Math.ceil(s/y);return u().createElement(zx,{pagination:{firstPage:1===m,lastPage:x<=m,paginated:!0,loadPrevPage:d,loadNextPage:f,currentPage:m},srsName:j,busy:v,dropUp:!1,data:h,open:t,onChangeDrawingStatus:p,valueField:E,textField:S,itemComponent:b,filter:P,onFocus:o,onToggle:r,onChange:i,onSelect:n,features:g,style:C,selectedValue:a?c:l||c,loading:w})})),Hx=(0,_.compose)((0,_.withPropsOnChange)(["valueField"],(function(){return{value:void 0}})),(0,_.withStateHandlers)((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,changed:e.value,value:e.value,onChangeDrawingStatus:e.onChangeDrawingStatus,itemComponent:e.itemComponent}}),{select:function(){return function(e){return{selected:e}}},change:function(e){return function(t,r){return e.selected||e.open||e.onChangeDrawingStatus("clean","","queryform",[],{}),{delayDebounce:500,selected:!1,changingPage:!1,changed:!0,performFetch:!(e.selected&&!e.changingPage),value:e.selected&&e.changingPage&&e.value||("string"==typeof t?t:t[r]),currentPage:e.changingPage?e.currentPage:1}}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}:e}},toggle:function(e){return function(){return{open:!!e.changingPage||!e.open}}},loadNextPage:function(e){return function(){return{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0}}},loadPrevPage:function(e){return function(){return{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0}}}}),(0,_.withHandlers)({select:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=e.onChangeSpatialFilterValue,n=void 0===r?function(){}:r,o=e.select,i=void 0===o?function(){}:o;return function(e,r,o,a){r&&n({geometry:r.geometry,value:e,feature:r,srsName:o,style:a,options:t,collectGeometries:t&&t.crossLayer?{queryCollection:{typeName:t.crossLayer.typeName,geometryName:t.crossLayer.geometryName,cqlFilter:(0,Ax.generateTemplateString)(t.crossLayer.cqlTemplate||"",yf.escapeCQLStrings)(r)}}:void 0}),i(!0)}}}))(qx);function $x(e){return($x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xx(e,t){return(Xx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qx(e,t){return!t||"object"!==$x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jx(e){return(Jx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xx(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jx(n);if(o){var r=Jx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Qx(this,e)});function a(){return Yx(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return u().createElement("span",{className:this.props.customItemClassName?this.props.customItemClassName:""},this.props.item)}}])&&Kx(t.prototype,r),a}(u().Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(eT,"propTypes",{item:f().string,textField:f().string,customItemClassName:f().string,valueField:f().string});const tT=eT;function rT(e){return(rT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iT(e,t){return(iT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aT(e,t){return!t||"object"!==rT(t)&&"function"!=typeof t?lT(e):t}function lT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cT(e){return(cT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iT(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cT(n);if(o){var r=cT(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return aT(this,e)});function a(){var e;nT(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return sT(lT(e=i.call.apply(i,[this].concat(r))),"onUpdateBBOX",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempExtent[r]=!isNaN(parseFloat(t))&&parseFloat(t)||0);var o=[];for(var i in e.tempExtent)i&&o.push(e.tempExtent[i]);var a=(0,Ko.reprojectBbox)(o,"EPSG:4326",e.props.projection),l={type:e.props.geometry.type,coordinates:[[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]]],projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[l])})),sT(lT(e),"onUpdateCircle",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempCircle[r]=parseFloat(t));var o=isNaN(parseFloat(e.tempCircle.x))||isNaN(parseFloat(e.tempCircle.y))?[e.tempCircle.x,e.tempCircle.y]:(0,Ko.reproject)([e.tempCircle.x,e.tempCircle.y],"EPSG:4326",e.props.projection);o=void 0===o.x?{x:o[0],y:o[1]}:o;var i={x:isNaN(o.x)?0:o.x,y:isNaN(o.y)?0:o.y},a={type:e.props.geometry.type,center:i,coordinates:[i.x,i.y],radius:isNaN(e.tempCircle.radius)?0:e.tempCircle.radius,projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[a],{geodesic:e.props.enableGeodesic})})),sT(lT(e),"onModifyGeometry",(function(){"BBOX"===e.props.type?e.onUpdateBBOX(null,null,"endDrawing"):"Circle"===e.props.type&&e.onUpdateCircle(null,null,"endDrawing"),e.props.onShowPanel(!1)})),sT(lT(e),"onClosePanel",(function(){e.resetGeom(),e.props.onShowPanel(!1)})),sT(lT(e),"getStep",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.min(1/Math.pow(10,Math.ceil(Math.min(e,21)/3)-2),1)})),sT(lT(e),"getStepCircle",(function(t,r){var n=e.getStep(t);return"radius"===r&&!e.isWGS84()&&1e4*n||n})),sT(lT(e),"getBBOXDimensions",(function(e){var t=(0,Ko.reprojectBbox)(e.extent,e.projection,"EPSG:4326");return{west:t[0],sud:t[1],est:t[2],north:t[3]}})),sT(lT(e),"getCircleDimensions",(function(t){var r=(0,Ko.reproject)(t.center,t.projection,"EPSG:4326"),n=(0,Ko.reproject)(t.center,t.projection,e.props.projection),o=(0,Ko.reproject)([t.center[0]+t.radius,t.center[1]],t.projection,e.props.projection),i=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y));return{x:r.x,y:r.y,radius:i}})),sT(lT(e),"renderCoordinateField",(function(t,r){return u().createElement("div",null,u().createElement("div",{className:"detail-field-title"},r),u().createElement(Xo.Z,{style:{minWidth:"105px",margin:"auto"},type:"number",id:"queryform_bbox_"+r,step:e.getStep(e.props.zoom),defaultValue:e.roundValue(t,1e6),onChange:function(t){return e.onUpdateBBOX(t,r)}}))})),sT(lT(e),"renderCircleField",(function(t,r){return u().createElement(Xo.Z,{type:"number",id:"queryform_circle_"+r,defaultValue:e.roundValue(t,"radius"!==r||e.isWGS84()?1e6:100),step:e.getStepCircle(e.props.zoom,r),onChange:function(t){return e.onUpdateCircle(t,r)}})})),sT(lT(e),"renderDetailsContent",(function(){var t,r=e.props.geometry;if("BBOX"===e.props.type){var n=e.getBBOXDimensions(r);t=u().createElement("div",null,u().createElement("div",{className:"container-fluid"},u().createElement(h.Row,null,u().createElement(h.Col,{xs:4},u().createElement("span",null)),u().createElement(h.Col,{xs:4},e.renderCoordinateField(n.north,"north")),u().createElement(h.Col,{xs:4},u().createElement("span",null))),u().createElement(h.Row,null,u().createElement(h.Col,{xs:4},e.renderCoordinateField(n.west,"west")),u().createElement(h.Col,{xs:4},u().createElement("span",null)),u().createElement(h.Col,{xs:4},e.renderCoordinateField(n.est,"est"))),u().createElement(h.Row,null,u().createElement(h.Col,{xs:4},u().createElement("span",null)),u().createElement(h.Col,{xs:4},e.renderCoordinateField(n.sud,"sud")),u().createElement(h.Col,{xs:4},u().createElement("span",null)))),u().createElement("span",null,u().createElement("hr",{width:"90%"}),u().createElement("div",null,u().createElement("h5",null,u().createElement(cd.Message,{msgId:"queryform.spatialfilter.details.details_bbox_label"})))))}else if("Circle"===e.props.type){var o=e.getCircleDimensions(r),i=(0,Ko.getUnits)(e.props.projection);t=u().createElement("div",null,u().createElement("div",{className:"container-fluid"},u().createElement(h.Row,null,u().createElement(h.Col,{xs:2},u().createElement("span",null)),u().createElement(h.Col,{xs:2},u().createElement("span",{className:"details-circle-attribute-name"},"x:")),u().createElement(h.Col,{xs:4},e.renderCircleField(o.x,"x")),u().createElement(h.Col,{xs:4},u().createElement("span",null))),u().createElement(h.Row,null,u().createElement(h.Col,{xs:2},u().createElement("span",null)),u().createElement(h.Col,{xs:2},u().createElement("span",{className:"details-circle-attribute-name"},"y:")),u().createElement(h.Col,{xs:4},e.renderCircleField(o.y,"y")),u().createElement(h.Col,{xs:4},u().createElement("span",null))),u().createElement(h.Row,null,u().createElement(h.Col,{xs:2},u().createElement("span",null)),u().createElement(h.Col,{xs:2},u().createElement("span",{className:"details-circle-attribute-name"},u().createElement(cd.Message,{msgId:"queryform.spatialfilter.details.radius",msgParams:{unit:"degrees"===i?"°":i}}),":")),u().createElement(h.Col,{xs:4},e.renderCircleField(o.radius,"radius")),u().createElement(h.Col,{xs:4},u().createElement("span",null)))),u().createElement("span",null,u().createElement("hr",{width:"90%"}),u().createElement("div",null,u().createElement("h5",null,u().createElement(cd.Message,{msgId:"queryform.spatialfilter.details.details_circle_label"})))))}return t})),sT(lT(e),"isWGS84",(function(){return"EPSG:4326"===e.props.projection})),sT(lT(e),"roundValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6;return Math.round(e*t)/t})),sT(lT(e),"resetGeom",(function(){"BBOX"===e.props.type?e.resetBBOX():"Circle"===e.props.type&&e.resetCircle()})),sT(lT(e),"resetBBOX",(function(){for(var t in e.extent)t&&(document.getElementById("queryform_bbox_"+t).value=e.roundValue(e.extent[t],1e6),e.onUpdateBBOX(e.extent[t],t))})),sT(lT(e),"resetCircle",(function(){document.getElementById("queryform_circle_radius").value=e.roundValue(e.circle.radius,100),e.onUpdateCircle(e.circle.radius,"radius"),document.getElementById("queryform_circle_x").value=e.roundValue(e.circle.x,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.x,"x"),document.getElementById("queryform_circle_y").value=e.roundValue(e.circle.y,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.y,"y")})),e}return t=a,(r=[{key:"componentDidMount",value:function(){var e=this.props.geometry;"BBOX"===this.props.type?(this.extent=this.getBBOXDimensions(e),this.tempExtent=se()({},this.extent)):"Circle"===this.props.type&&(this.circle=this.getCircleDimensions(e),this.tempCircle=se()({},this.circle))}},{key:"render",value:function(){var e=this;return u().createElement(Lf.Z,{buttons:[{key:"confirm",glyph:"ok",tooltipId:"confirm",onClick:function(){return e.onModifyGeometry()}},{key:"reset",tooltipId:"queryform.reset",glyph:"clear-filter",onClick:function(){return e.resetGeom()}},{key:"close",glyph:"1-close",onClick:function(){return e.onClosePanel(!1)}}],title:u().createElement(cd.Message,{msgId:"queryform.spatialfilter.details.details_header"}),locked:!0,expanded:!0,className:"details-panel",bsStyle:"primary"},this.renderDetailsContent())}}])&&oT(t.prototype,r),a}(u().Component);sT(uT,"propTypes",{useMapProjection:f().bool,geometry:f().object,type:f().string,onShowPanel:f().func,onChangeDrawingStatus:f().func,zoom:f().number,projection:f().string,enableGeodesic:f().bool}),sT(uT,"defaultProps",{useMapProjection:!0,geometry:null,type:null,onShowPanel:function(){},onChangeDrawingStatus:function(){}});const pT=uT;function fT(e){return(fT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mT(e,t){return(mT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bT(e,t){return!t||"object"!==fT(t)&&"function"!=typeof t?gT(e):t}function gT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vT(e){return(vT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var OT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mT(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vT(n);if(o){var r=vT(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return bT(this,e)});function a(){var e;dT(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return hT(gT(e=i.call.apply(i,[this].concat(r))),"state",{open:!1}),hT(gT(e),"getFilter",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n={filterFields:[{attribute:e.props.searchAttribute,operator:r,value:t,type:"list"}]};e.props.dependsOn&&(n.groupFields=[{id:1,logic:"AND",index:0}],n.filterFields[0].groupId=1,e.props.multivalue?(n.groupFields.push({id:2,logic:"OR",groupId:1,index:1}),e.props.dependsOn.value instanceof Array?e.props.dependsOn.value.forEach((function(t){n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:t,groupId:2,type:"list"})})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:2,type:"list"})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:1,type:"list"}));var o=(0,yf.toOGCFilter)(e.props.typeName,n,e.props.wfs,e.props.sort||{sortBy:e.props.searchAttribute,sortOrder:"ASC"});return o})),hT(gT(e),"changeZoneValue",(function(t,r,n){var o;e.setState({open:!1}),o=e.props.multivalue?{value:n.map((function(e){return e.id})),feature:n.map((function(e){return e.feature}))}:{value:[n],feature:[e.values.filter((function(e){return e.id===n}))[0].feature]},e.props.onChange(e.props.zoneId,o)})),e}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.values&&!(0,fe.isEqual)(this.props.values,e.values)&&e.values.length>0&&this.setState({open:!0})}},{key:"render",value:function(){var e=this;this.values=[],this.props.values&&this.props.values.length>0&&(this.values=this.props.values.map((function(t){var r=t;e.props.valueField.split(".").forEach((function(e){r=r?r[e]:null}));var n=t;return e.props.textField.split(".").forEach((function(e){n=n?n[e]:null})),{id:r,name:n,feature:t}})));var t=this.props.label?u().createElement("label",null,this.props.label):u().createElement("span",null),r=this.props.error;return r&&(r="object"!==fT(r)?r:r.status+" "+r.statusText+": "+r.data),u().createElement("div",{className:"zone-combo"},t,u().createElement(Cp,{key:(new Date).getTime(),busy:this.props.busy,disabled:this.props.disabled,fieldRowId:this.props.zoneId,valueField:"id",textField:"name",fieldOptions:this.values,fieldValue:this.props.value,fieldName:"zone",fieldException:r,options:{defaultOpen:this.state.open},groupBy:this.props.groupBy?function(t){return t.feature.properties[e.props.groupBy]}:function(){},multivalue:this.props.multivalue,comboFilter:this.props.comboFilter,onSelect:this.props.onSelect,onUpdateField:this.changeZoneValue,onToggle:function(t){if(t&&(!e.props.values||e.props.values.length<1)){var r=e.getFilter(e.props.searchText,e.props.searchMethod);e.props.onSearch(!0,e.props.zoneId),e.props.onFilter(e.props.url,r,e.props.zoneId)}}}))}}])&&yT(t.prototype,r),a}(u().Component);hT(OT,"propTypes",{zoneId:f().number,url:f().string,typeName:f().string,wfs:f().string,busy:f().bool,values:f().array,value:f().oneOfType([f().object,f().number,f().string,f().array]),label:f().string,searchText:f().string,searchMethod:f().string,searchAttribute:f().string,sort:f().object,error:f().oneOfType([f().object,f().string]),comboFilter:f().oneOfType([f().bool,f().string,f().func]),groupBy:f().oneOfType([f().string,f().func]),multivalue:f().bool,open:f().bool,disabled:f().bool,dependsOn:f().object,valueField:f().string,textField:f().string,onSearch:f().func,onFilter:f().func,onChange:f().func,onSelect:f().func}),hT(OT,"contextTypes",{messages:f().object}),hT(OT,"defaultProps",{open:!1,zoneId:null,url:null,typeName:null,wfs:"1.1.0",busy:!1,values:[],value:null,valueField:null,textField:null,label:null,disabled:!1,error:null,searchText:"*",searchMethod:"ilike",searchAttribute:null,comboFilter:"contains",multivalue:!0,groupBy:null,onSearch:function(){},onFilter:function(){},onChange:function(){},onSelect:function(){}});const wT=OT;function ET(e){return(ET="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ST(){return(ST=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function PT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CT(e,t){return(CT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xT(e,t){return!t||"object"!==ET(t)&&"function"!=typeof t?TT(e):t}function TT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kT(e){return(kT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var AT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CT(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kT(n);if(o){var r=kT(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xT(this,e)});function a(){var e;PT(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return IT(TT(e=i.call.apply(i,[this].concat(r))),"getMethodFromId",(function(t){return(0,fe.find)(e.props.spatialMethodOptions,(function(e){return e&&e.id===t}))||null})),IT(TT(e),"renderHeader",(function(){var t=(0,le.S$)(e.context.messages,"queryform.spatialfilter.spatial_filter_header");return u().createElement("span",null,u().createElement("span",{style:{cursor:"pointer"},onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded)},t),u().createElement("button",{onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded),className:"close"},e.props.spatialPanelExpanded?u().createElement(h.Glyphicon,{glyph:"glyphicon glyphicon-collapse-down"}):u().createElement(h.Glyphicon,{glyph:"glyphicon glyphicon-expand"})))})),IT(TT(e),"renderSpatialHeader",(function(){var t=e.getMethodFromId(e.props.spatialField.method);return u().createElement("div",null,u().createElement(h.Row,{className:"logicHeader inline-form filter-field-row filter-field-fixed-row"},u().createElement(h.Col,{xs:6},u().createElement("div",null,u().createElement(cd.Message,{msgId:"queryform.spatialfilter.filterType"}))),u().createElement(h.Col,{xs:6},u().createElement(Cp,{itemComponent:function(t){return u().createElement(tT,ST({customItemClassName:e.getMethodFromId(t.item)&&e.getMethodFromId(t.item).customItemClassName||""},t))},fieldOptions:e.props.spatialMethodOptions.map((function(t){return(0,le.S$)(e.context.messages,t.name)||t.name})),placeholder:(0,le.S$)(e.context.messages,"queryform.spatialfilter.combo_placeholder"),fieldName:"method",fieldRowId:(new Date).getTime(),fieldValue:(0,le.S$)(e.context.messages,t?t.name:"")||t&&t.name||"",onUpdateField:e.updateSpatialMethod}))))})),IT(TT(e),"renderDwithin",(function(){return u().createElement(h.Row,{className:"container-fluid filter-field-fixed-row"},u().createElement(h.Col,{xs:6,className:"filter-text-desc"},u().createElement(cd.Message,{msgId:"queryform.spatialfilter.dwithin_label"})),u().createElement(h.Col,{xs:6},u().createElement(Xo.Z,{type:"number",min:"0",defaultValue:"0",disabled:!e.props.spatialField.geometry,id:"queryform_dwithin_field",onChange:function(t){return e.props.actions.onChangeDwithinValue(t,name)}})))})),IT(TT(e),"renderZoneFields",(function(){return e.props.spatialField.method&&"ZONE"===e.props.spatialField.method&&e.props.spatialField.zoneFields&&e.props.spatialField.zoneFields.length>0?e.props.spatialField.zoneFields.map((function(t){return u().createElement(wT,{key:t.id,open:t.open,zoneId:t.id,url:t.url,typeName:t.typeName,wfs:t.wfs,busy:t.busy,label:t.label,values:t.values,value:t.value,valueField:t.valueField,textField:t.textField,searchText:t.searchText,searchMethod:t.searchMethod,searchAttribute:t.searchAttribute,sort:t.sort,error:t.error,disabled:t.disabled,dependsOn:t.dependson,groupBy:t.groupBy,multivalue:t.multivalue,onSearch:e.props.actions.zoneSearch,onFilter:e.props.actions.zoneFilter,onChange:e.props.actions.zoneChange})})):null})),IT(TT(e),"renderRoiPanel",(function(){var t=e.getMethodFromId(e.props.spatialField.method),r=t&&t.filterProps&&t.filterProps.valueField&&e.props.spatialField&&e.props.spatialField.value&&e.props.spatialField.value[t.filterProps.valueField];return u().createElement(h.Panel,null,u().createElement("div",{className:"container-fluid"},u().createElement(h.Row,{className:"filter-field-row filter-field-fixed-row"},u().createElement(h.Col,{xs:6},u().createElement("span",null,t&&t.name||t.id)),u().createElement(h.Col,{xs:6},u().createElement(Hx,{originalValue:r,key:e.props.spatialField.method,options:t,autocompleteStreamFactory:Ix.Vj,valueField:t&&t.filterProps&&t.filterProps.valueField,textField:t&&t.filterProps&&t.filterProps.valueField,url:t&&t.url,filter:"contains",onChangeSpatialFilterValue:e.props.actions.onChangeSpatialFilterValue,onChangeDrawingStatus:function(){var t;(t=e.props.actions).onChangeDrawingStatus.apply(t,arguments)},filterProps:t&&t.filterProps})))))})),IT(TT(e),"renderSpatialPanel",(function(t,r,n){return u().createElement(h.Panel,{className:"spatial-panel"},e.props.spatialMethodOptions.length>1?e.renderSpatialHeader():u().createElement("span",null),e.renderZoneFields(),e.props.spatialField.method&&e.getMethodFromId(e.props.spatialField.method)&&"wfsGeocoder"===e.getMethodFromId(e.props.spatialField.method).type?e.renderRoiPanel():null,e.props.spatialOperations.length>1?u().createElement(h.Panel,null,u().createElement("div",null,t),n&&"DWITHIN"===n.id?e.renderDwithin():null,u().createElement(h.Row,null,u().createElement(h.Col,{xs:12},r))):u().createElement("span",null))})),IT(TT(e),"renderButtons",(function(){var t=[],r=e.props.showDetailsButton&&e.props.spatialField.geometry&&(e.props.spatialField.method&&"BBOX"===e.props.spatialField.method||"Circle"===e.props.spatialField.method),n=e.props.spatialField.geometry&&e.props.spatialField.geometry.coordinates;return r&&t.push({glyph:"pencil",onClick:function(){return e.props.actions.onShowSpatialSelectionDetails(!0)},tooltipId:"queryform.spatialfilter.details.detail_button_label"}),n&&t.push({glyph:"clear-filter",tooltipId:"queryform.spatialfilter.remove",onClick:function(){return e.resetSpatialFilter()}}),t})),IT(TT(e),"updateSpatialMethod",(function(t,r,n){e.props.actions.onShowSpatialSelectionDetails(!1);var o=e.props.spatialMethodOptions.filter((function(t){return n===((0,le.S$)(e.context.messages,t.name)||t.name)}))[0].id,i=e.getMethodFromId(o);if(e.props.actions.onSelectSpatialMethod(o,r),"wfsGeocoder"!==e.getMethodFromId(o).type)switch(o){case"ZONE":e.changeDrawingStatus("clean","","queryform",[]);break;case"Viewport":e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onSelectViewportSpatialMethod();break;default:e.changeDrawingStatus("start",o,"queryform",[],{geodesic:!!(0,fe.isNil)(i.geodesic)||i.geodesic,stopAfterDrawing:!0})}else e.changeDrawingStatus("clean","","queryform",[])})),IT(TT(e),"updateSpatialOperation",(function(t,r,n){var o=e.props.spatialOperations.filter((function(t){return n===(0,le.S$)(e.context.messages,t.name)}))[0].id;e.props.actions.onSelectSpatialOperation(o,r)})),IT(TT(e),"resetSpatialFilter",(function(){e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onRemoveSpatialSelection(),e.props.actions.onShowSpatialSelectionDetails(!1)})),IT(TT(e),"changeDrawingStatus",(function(t,r,n,o,i){e.props.actions.onChangeDrawingStatus(t,void 0!==r?r:e.props.spatialField.method,n,o,i)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.spatialOperations.filter((function(t){return e.props.spatialField.operation===t.id}))[0],r=u().createElement("span",null);"ZONE"!==this.props.spatialField.method&&"Viewport"!==this.props.spatialField.method&&this.getMethodFromId(this.props.spatialField.method)&&"wfsGeocoder"!==this.getMethodFromId(this.props.spatialField.method).type&&(r=this.props.spatialField.geometry?null:u().createElement("span",null,u().createElement("div",{className:"m-label m-caption text-center"},u().createElement(cd.Message,{msgId:"queryform.spatialfilter.draw_start_label"}))));var n=this.getMethodFromId(this.props.spatialField.method),o=this.props.showDetailsPanel?u().createElement(pT,{useMapProjection:this.props.useMapProjection,enableGeodesic:!!(0,fe.isNil)(n.geodesic)||n.geodesic,geometry:this.props.spatialField.geometry,type:this.props.spatialField.method,onShowPanel:this.props.actions.onShowSpatialSelectionDetails,onChangeDrawingStatus:this.changeDrawingStatus,zoom:this.props.zoom,projection:this.props.projection}):u().createElement("span",null),i=u().createElement(h.Row,{className:"filter-field-row inline-form filter-field-fixed-row"},u().createElement(h.Col,{xs:6},u().createElement(cd.Message,{msgId:"queryform.spatialfilter.geometric_operation"})),u().createElement(h.Col,{xs:6},u().createElement(Cp,{fieldOptions:this.props.spatialOperations.map((function(t){return(0,le.S$)(e.context.messages,t.name)})),fieldName:"operation",fieldRowId:(new Date).getTime(),fieldValue:(0,le.S$)(this.context.messages,t?t.name:""),onUpdateField:this.updateSpatialOperation})));return u().createElement("div",{className:"query-filter-container"},this.props.withContainer?u().createElement(Lf.Z,{id:"spatialFilterPanel",header:this.renderHeader(),buttons:this.renderButtons(),collapsible:!0,expanded:this.props.spatialPanelExpanded,onSwitch:function(t){return e.props.actions.onExpandSpatialFilterPanel(t)}},this.renderSpatialPanel(i,r,t)):this.renderSpatialPanel(i,r,t),o)}}])&&jT(t.prototype,r),a}(u().Component);IT(AT,"propTypes",{useMapProjection:f().bool,spatialField:f().object,spatialOperations:f().array,spatialMethodOptions:f().array,spatialPanelExpanded:f().bool,showDetailsButton:f().bool,showDetailsPanel:f().bool,withContainer:f().bool,actions:f().object,zoom:f().number,projection:f().string}),IT(AT,"contextTypes",{messages:f().object}),IT(AT,"defaultProps",{useMapProjection:!0,spatialField:{},spatialPanelExpanded:!0,showDetailsButton:!0,showDetailsPanel:!1,withContainer:!0,spatialMethodOptions:[],spatialOperations:[],actions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeSpatialFilterValue:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeRegion:function(){},onChangeDwithinValue:function(){},zoneFilter:function(){},zoneSearch:function(){},zoneChange:function(){}}});const FT=AT;function DT(e){return(DT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RT(){return(RT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function NT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function LT(e,t){return(LT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MT(e,t){return!t||"object"!==DT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZT(e){return(ZT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var BT=Ox((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded,r=void 0===t||t,n=e.spatialOperations,o=e.expandCrossLayerFilterPanel,i=void 0===o?function(){}:o,a=e.layers,l=void 0===a?[]:a,c=e.errorObj,s=e.loadingAttributes,p=e.loadingCapabilities,f=e.searchUrl,d=e.queryCollection,y=void 0===d?{}:d,m=e.attributes,b=void 0===m?[]:m,g=e.operation,O=e.updateLogicCombo,w=void 0===O?function(){}:O,E=e.resetCrossLayerFilter,S=void 0===E?function(){}:E,P=e.setOperation,j=void 0===P?function(){}:P,C=e.setQueryCollectionParameter,x=void 0===C?function(){}:C,T=e.addCrossLayerFilterField,k=void 0===T?function(){}:T,I=e.updateCrossLayerFilterField,A=void 0===I?function(){}:I,F=e.removeCrossLayerFilterField,D=void 0===F?function(){}:F,R=y.typeName,N=y.geometryName,_=y.filterFields,L=y.groupFields,M=void 0===L?[{id:1,logic:"OR",index:0}]:L;return u().createElement(Lf.Z,{loading:p,expanded:r&&!p&&!c,error:c,errorMsgId:"queryPanel",buttons:sx(R?[{glyph:"clear-filter",tooltipId:"queryform.crossLayerFilter.clear",onClick:function(){return S()}}]:[]),onSwitch:i,title:u().createElement(v.Z,{msgId:"queryform.crossLayerFilter.title"})},u().createElement(h.Row,{className:"inline-form filter-field-fixed-row"},u().createElement(h.Col,{xs:6},u().createElement("div",null,u().createElement(v.Z,{msgId:"queryform.crossLayerFilter.targetLayer"}))),u().createElement(h.Col,{xs:6},u().createElement(zo.ZP,{clearable:!1,disabled:p||!!c,isLoading:s,options:l.filter((function(e){return px(f,e)})).map((function(e){return{label:e.title||e.name,value:e.name}})),placeholder:u().createElement(v.Z,{msgId:"queryform.crossLayerFilter.placeholder"}),filter:"contains",value:R,onChange:function(e){x("typeName",e&&e.value)}}))),R&&N?u().createElement(h.Row,{className:"inline-form filter-field-fixed-row"},u().createElement(h.Col,{xs:6},u().createElement("div",null,u().createElement(v.Z,{msgId:"queryform.crossLayerFilter.operation"}))),u().createElement(h.Col,{xs:6},u().createElement(cx,{value:g,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return j(t)},spatialOperations:fx(n)}))):null,R&&N&&g?u().createElement(h.Row,{className:"filter-field-fixed-row"},u().createElement(h.Col,{xs:12},u().createElement(Od,{autocompleteEnabled:!1,withContainer:!1,attributes:b,groupLevels:-1,filterFields:_,actions:{onUpdateLogicCombo:w,onAddFilterField:k,onUpdateFilterField:A,onRemoveFilterField:D},groupFields:M,filterField:!0}))):null)})),zT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LT(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ZT(n);if(o){var r=ZT(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return MT(this,e)});function a(){return NT(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){if(""!==this.props.featureTypeError)return u().createElement("div",{style:{margin:"0 auto","text-align":"center"}},this.props.featureTypeErrorText);var e=u().createElement("div",{className:"m-header"},this.props.header,u().createElement(kx,{sendFilters:{attributeFilter:this.props.attributePanelExpanded,spatialFilter:this.props.spatialPanelExpanded,crossLayerFilter:this.props.crossLayerExpanded},params:this.props.params,filterFields:this.props.filterFields,groupFields:this.props.groupFields,spatialField:this.props.spatialField,toolbarEnabled:this.props.toolbarEnabled,searchUrl:this.props.searchUrl,showGeneratedFilter:this.props.showGeneratedFilter,featureTypeName:this.props.featureTypeName,ogcVersion:this.props.ogcVersion,filterType:this.props.filterType,actions:this.props.queryToolbarActions,resultTitle:this.props.resultTitle,pagination:this.props.pagination,sortOptions:this.props.sortOptions,crossLayerFilter:this.props.crossLayerFilterOptions.crossLayerFilter,hits:this.props.hits,allowEmptyFilter:this.props.allowEmptyFilter,emptyFilterWarning:this.props.emptyFilterWarning,appliedFilter:this.props.appliedFilter,storedFilter:this.props.storedFilter,advancedToolbar:this.props.advancedToolbar,loadingError:this.props.loadingError}));return this.props.attributes.length>0?u().createElement(Go.Z,{header:e,className:"mapstore-query-builder",id:"query-form-panel"},u().createElement(Od,{autocompleteEnabled:this.props.autocompleteEnabled,maxFeaturesWPS:this.props.maxFeaturesWPS,attributes:this.props.attributes,groupLevels:this.props.groupLevels,filterFields:this.props.filterFields,groupFields:this.props.groupFields,removeButtonIcon:this.props.removeButtonIcon,addButtonIcon:this.props.addButtonIcon,attributePanelExpanded:this.props.attributePanelExpanded,actions:this.props.attributeFilterActions}),this.props.toolsOptions.hideSpatialFilter?null:u().createElement(FT,{useMapProjection:this.props.useMapProjection,spatialField:this.props.spatialField,spatialOperations:this.props.spatialOperations,spatialMethodOptions:this.props.spatialMethodOptions,showDetailsButton:this.props.showDetailsButton,spatialPanelExpanded:this.props.spatialPanelExpanded,showDetailsPanel:this.props.showDetailsPanel,actions:this.props.spatialFilterActions,zoom:this.props.zoom,projection:this.props.projection}),this.props.toolsOptions.hideCrossLayer?null:u().createElement(BT,RT({spatialOperations:this.props.spatialOperations,crossLayerExpanded:this.props.crossLayerExpanded,searchUrl:this.props.searchUrl,featureTypeName:this.props.featureTypeName},this.props.crossLayerFilterOptions,this.props.crossLayerFilterActions))):u().createElement("div",{style:{margin:"0 auto",width:"60px"}},u().createElement(sC(),{spinnerName:"three-bounce",overrideSpinnerClassName:"spinner"}))}}])&&_T(t.prototype,r),a}(u().Component);GT(zT,"propTypes",{params:f().object,featureTypeConfigUrl:f().string,useMapProjection:f().bool,attributes:f().array,featureTypeError:f().string,featureTypeErrorText:f().node,groupLevels:f().number,maxFeaturesWPS:f().number,filterFields:f().array,groupFields:f().array,spatialField:f().object,removeButtonIcon:f().string,addButtonIcon:f().string,attributePanelExpanded:f().bool,showDetailsButton:f().bool,spatialPanelExpanded:f().bool,crossLayerExpanded:f().bool,showDetailsPanel:f().bool,toolbarEnabled:f().bool,searchUrl:f().string,showGeneratedFilter:f().oneOfType([f().bool,f().string]),filterType:f().string,featureTypeName:f().string,ogcVersion:f().string,attributeFilterActions:f().object,spatialFilterActions:f().object,queryToolbarActions:f().object,resultTitle:f().string,pagination:f().object,sortOptions:f().object,spatialOperations:f().array,spatialMethodOptions:f().array,crossLayerFilterOptions:f().object,crossLayerFilterActions:f().object,hits:f().bool,maxHeight:f().number,allowEmptyFilter:f().bool,autocompleteEnabled:f().bool,emptyFilterWarning:f().bool,header:f().node,zoom:f().number,projection:f().string,toolsOptions:f().object,appliedFilter:f().object,storedFilter:f().object,advancedToolbar:f().bool,loadingError:f().bool}),GT(zT,"defaultProps",{params:{},featureTypeConfigUrl:null,useMapProjection:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],spatialMethodOptions:[],spatialOperations:[],featureTypeError:"",spatialField:{},crossLayerFilter:null,removeButtonIcon:"trash",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,spatialPanelExpanded:!0,showDetailsPanel:!1,toolbarEnabled:!0,searchUrl:"",showGeneratedFilter:!1,featureTypeName:null,pagination:null,sortOptions:null,hits:!1,maxHeight:830,allowEmptyFilter:!1,autocompleteEnabled:!0,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,attributeFilterActions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){}},spatialFilterActions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeDwithinValue:function(){}},crossLayerFilterOptions:{},crossLayerFilterActions:{},queryToolbarActions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){}},toolsOptions:{}});const UT=zT;function WT(){return(WT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var VT=(0,r(17252).Z)((function(e){return u().createElement("div",WT({className:"square-button pull-right no-border",style:{display:"flex"}},e),u().createElement(h.Glyphicon,{glyph:"exclamation-mark",className:"text-danger"}))}));const qT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.loadingError,r=e.onToggleQuery,n=void 0===r?function(){}:r;return u().createElement("div",{className:"mapstore-block-width"},u().createElement(qe.Z,{id:"toc-query-close-button",key:"menu-button",className:"square-button no-border",onClick:function(){return n()}},u().createElement(h.Glyphicon,{glyph:"arrow-left"})),t&&u().createElement(VT,{popover:{text:u().createElement(v.Z,{msgId:"queryform.loadingError"})}})||u().createElement("div",{className:"square-button pull-right no-border",style:{display:"flex"}},u().createElement(h.Glyphicon,{glyph:"filter",className:"text-primary"})))};var HT=r(84069);const $T={isAutoCompleteEnabled:function(e,t){return e.ofType(eg.S0).switchMap((function(e){var r=(0,Dt.y9)(e.url,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:"gs:PagedUnique"},(0,me.kS)(t.getState()));return null===r?Yt.Observable.of((0,Qb.NV)(!1)):Yt.Observable.fromPromise(Lt().post(r,null,{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(e){return(0,fe.startsWith)(e,"<ows:ExceptionReport")?Yt.Observable.of((0,Qb.NV)(!1)):Yt.Observable.of((0,Qb.NV)(!0))})).catch((function(){return Yt.Observable.of((0,Qb.NV)(!1))}))}))},fetchAutocompleteOptionsEpic:function(e,t){return e.ofType(Qb.l1).debounce((function(e){return Yt.Observable.timer(e.fieldOptions.delayDebounce||0)})).filter((function(e){return"value"===e.fieldName&&"string"===e.fieldType&&t.getState().queryform.autocompleteEnabled})).switchMap((function(e){var r=t.getState(),n=(0,LP.Vx)(r),o=r.queryform&&r.queryform.filterFields&&r.queryform.filterFields.filter((function(t){return t.rowId===e.rowId}))[0];if("selected"===e.fieldOptions.selected)return Yt.Observable.from([(0,Qb.$J)(o,[],0)]);var i=(0,HT.getWpsPayload)({attribute:o.attribute,layerName:(0,tg.HY)(r),layerFilter:(0,LP.Vc)(r)||(0,LP.hI)(r),maxFeatures:n,startIndex:(e.fieldOptions.currentPage-1)*n,value:e.fieldValue}),a=(0,Dt.y9)(r.query.url,{outputFormat:"json"},(0,me.kS)(t.getState()));return null===a?Yt.Observable.of((0,Qb.NV)(!1)):Yt.Observable.fromPromise(Lt().post(a,i,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(t){var r=(0,fe.isArray)(t.values)?t.values:[t.values],n=t.size;return Yt.Observable.from([(0,Qb.$J)(o,r,n),(0,Qb.js)(e.rowId,!0)])})).startWith((0,Qb.jR)(!0,o)).catch((function(){return Yt.Observable.from([(0,Qb.$J)(o,[],0),(0,$.vU)({title:"warning",message:"warning",action:{label:"warning"},autoDismiss:3,position:"tr"}),(0,Qb.js)(e.rowId,!0)])})).concat([(0,Qb.jR)(!1,o)])}))}};function YT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YT(Object(r),!0).forEach((function(t){XT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function XT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const QT={handleLayerFilterPanel:function(e,t){var r=t.getState;return e.ofType(z).switchMap((function(){var t,n=(0,Y.Iz)(r()),o=n||{},i=o.url,a=o.name,l=o.layerFilter,c=n&&n.search&&n.search.url;return Yt.Observable.of((0,eg.gT)(c||i,a),(0,Qb.F)(l),(t=l,{type:L,filter:t}),(0,O.Xg)("queryPanel","enabled",!0)).merge(Yt.Observable.of((0,eg.jG)()).filter((function(){return!(0,fe.get)(r(),"query.isLayerFilter")})),e.ofType(Qb.Wm).switchMap((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=e.spatialField,n=e.filterFields;return!!(n&&(0,fe.head)(n)||r&&r.method&&r.operation&&r.geometry||t&&t.collectGeometries&&t.operation)}(e.filterObj)?KT({},(0,fe.get)(r(),"queryform",{})):void 0;return t&&(t.filterFields=t.attributePanelExpanded&&t.filterFields||[],t.spatialField=t.spatialPanelExpanded&&t.spatialField||null,t.crossLayerFilter=t.crossLayerExpanded&&(0,yf.setupCrossLayerFilterDefaults)(t.crossLayerFilter)||null),Yt.Observable.of(function(e,t){return(0,w.He)(e,{layerFilter:t})}(n.id,t))}))).let(function(e){return function(t){return t.takeUntil(e.ofType(O.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).merge(e.ofType(Jb.nk)))}}(e)).concat(Yt.Observable.from([(0,eg.jG)(),(0,Qb.mc)(),(0,Xb.Yf)("clean","","queryform",[],{})]))}))},restoreSavedFilter:function(e,t){var r=t.getState;return e.ofType(G).switchMap((function(){var e={typeName:(0,fe.get)(r(),"state.query.typeName")},t=(0,fe.get)(r(),"state.query.url"),n=(0,fe.get)(r(),"layerFilter.persisted");return Yt.Observable.of((0,Xb.Yf)("clean","","queryform",[]),(0,Qb.F)(n),(0,Qb.yC)(t,n,e),(0,eg.Xc)())}))},onApplyFilter:function(e,t){var r=t.getState;return e.ofType(B).map((function(){return e=KT({},(0,fe.get)(r(),"queryform",{})),{type:M,filter:e};var e}))}},JT={updateSpatialFilterValue:function(e){return e.ofType(Qb.Wi).switchMap((function(e){var t=e.feature,r=e.srsName,n=e.style,o=e.options;return Yt.Observable.of((0,Xb.Yf)("drawOrEdit",t.geometry.type,"queryform",[t],{editEnabled:!1,stopAfterDrawing:!0,featureProjection:r},n)).concat(t&&o&&o.autoZoom?[(0,H.Px)(TP()(t),r)]:[])}))}};var ek=r(8575),tk=r(85148);function rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rk(Object(r),!0).forEach((function(t){ok(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ok(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ak(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ik(Object(r),!0).forEach((function(t){lk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ck(e){return(ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var sk=function(e){return{geometry:e.featureTypes[0].properties.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return{label:e.name,attribute:e.name,type:"geometry",valueId:"id",valueLabel:"name",values:[]}})),original:e,attributes:yx(e)}};function uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uk(Object(r),!0).forEach((function(t){fk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dk={};var yk=r(97301),mk=r(46905);function bk(e){return(bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vk(e,t){return(vk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hk(e,t){return!t||"object"!==bk(t)&&"function"!=typeof t?Ok(e):t}function Ok(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wk(e){return(wk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ek(Object(r),!0).forEach((function(t){Pk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ek(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jk=Qb.mc.bind(null,"query"),Ck=(0,d.connect)((function(e){return{useMapProjection:e.queryform.useMapProjection,groupLevels:e.queryform.groupLevels,groupFields:e.queryform.groupFields,filterFields:e.queryform.filterFields,attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,featureTypeError:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].error,spatialField:e.queryform.spatialField,showDetailsPanel:e.queryform.showDetailsPanel,toolbarEnabled:e.queryform.toolbarEnabled,attributePanelExpanded:e.queryform.attributePanelExpanded,autocompleteEnabled:e.queryform.autocompleteEnabled,crossLayerExpanded:e.queryform.crossLayerExpanded,crossLayerFilterOptions:Sk({layers:(0,LP.GK)(e),crossLayerFilter:(0,LP.qh)(e)},e.queryform.crossLayerFilterOptions||{}),maxFeaturesWPS:e.queryform.maxFeaturesWPS,spatialPanelExpanded:e.queryform.spatialPanelExpanded,featureTypeConfigUrl:e.query&&e.query.url,searchUrl:e.query&&e.query.url,featureTypeName:e.query&&e.query.typeName,ogcVersion:"1.1.0",params:{typeName:e.query&&e.query.typeName},resultTitle:"Query Result",showGeneratedFilter:!1,allowEmptyFilter:!0,emptyFilterWarning:!0,maxHeight:e.map&&e.map.present&&e.map.present.size&&e.map.present.size.height,zoom:((0,J.Od)(e)||{}).zoom,projection:((0,J.Od)(e)||{}).projection}}),(function(e){return{attributeFilterActions:(0,jP.DE)({onAddGroupField:Qb.kQ,onAddFilterField:Qb.jW,onRemoveFilterField:Qb.JG,onUpdateFilterField:Qb.q$,onUpdateExceptionField:Qb.OZ,onUpdateLogicCombo:Qb.Nc,onRemoveGroupField:Qb.I5,onChangeCascadingValue:Qb.QL,toggleMenu:Qb.js,onExpandAttributeFilterPanel:Qb.I},e),spatialFilterActions:(0,jP.DE)({onChangeSpatialFilterValue:Qb.uo,onExpandSpatialFilterPanel:Qb.ku,onSelectSpatialMethod:Qb.HT,onSelectViewportSpatialMethod:Qb.lg,onSelectSpatialOperation:Qb.VF,onChangeDrawingStatus:Xb.Yf,onRemoveSpatialSelection:Qb.Ry,onShowSpatialSelectionDetails:Qb.ZH,onChangeDwithinValue:Qb.AQ,zoneFilter:Qb.eJ,zoneSearch:Qb.uM,zoneChange:Qb.uP},e),queryToolbarActions:(0,jP.DE)({onQuery:Qb.yC,onReset:jk,onSaveFilter:U,onRestoreFilter:W,storeAppliedFilter:V,onChangeDrawingStatus:Xb.Yf},e),crossLayerFilterActions:(0,jP.DE)({expandCrossLayerFilterPanel:Qb.EU,setCrossLayerFilterParameter:Qb.IV,addCrossLayerFilterField:Qb.N5,updateCrossLayerFilterField:Qb.bn,removeCrossLayerFilterField:Qb.Bm,resetCrossLayerFilter:Qb.F2},e)}}))(UT),xk=(0,N.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},Y.Bt,function(e){return e.layers&&e.layers.settings||{expanded:!1,options:{opacity:1}}},function(e){return e.controls&&e.controls.queryPanel&&e.controls.queryPanel.enabled||!1},function(e){return(0,Xr.ic)(e,{height:!0})},$g.Wy,LP.Vc,LP.hI,function(e){return e&&e.query&&e.query.isLayerFilter},Y.P_],(function(e,t,r,n,o,i,a,l,c,s){return{enabled:e,groups:t,settings:r,querypanelEnabled:n,layout:i?{}:o,appliedFilter:a,storedFilter:l,advancedToolbar:c,loadingError:s}})),Tk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vk(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wk(n);if(o){var r=wk(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return hk(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Pk(Ok(t=i.call(this,e)),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),Pk(Ok(t),"renderSidebar",(function(){return u().createElement(Qr.Z,{open:t.props.querypanelEnabled,sidebar:t.renderQueryPanel(),sidebarClassName:"query-form-panel-container",touch:!1,styles:{sidebar:Sk(Sk({},t.props.layout),{},{zIndex:1024,width:600}),overlay:{zIndex:1023,width:0},root:{right:t.props.querypanelEnabled?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}}},u().createElement("div",null))})),Pk(Ok(t),"onToggle",(function(){t.props.advancedToolbar&&!(0,fe.isEqual)(t.props.appliedFilter,t.props.storedFilter)?t.setState((function(){return{showModal:!0}})):t.props.onToggleQuery()})),Pk(Ok(t),"restoreAndClose",(function(){t.setState((function(){return{showModal:!1}})),t.props.onRestoreFilter(),t.props.onToggleQuery()})),Pk(Ok(t),"storeAndClose",(function(){t.setState((function(){return{showModal:!1}})),t.props.onSaveFilter(),t.props.onToggleQuery()})),Pk(Ok(t),"renderQueryPanel",(function(){return u().createElement("div",{className:"mapstore-query-builder"},u().createElement(Ck,{header:u().createElement(qT,{loadingError:t.props.loadingError,onToggleQuery:t.onToggle}),spatialOperations:t.props.spatialOperations,spatialMethodOptions:t.props.spatialMethodOptions,toolsOptions:t.props.toolsOptions,featureTypeErrorText:u().createElement(Cn.Z,{msgId:"layerProperties.featureTypeError"}),appliedFilter:t.props.appliedFilter,storedFilter:t.props.storedFilter,advancedToolbar:t.props.advancedToolbar,loadingError:t.props.loadingError}),u().createElement(b.Z,null,u().createElement(g.Z,{fade:!0,show:t.state.showModal,title:u().createElement(Cn.Z,{msgId:"queryform.changedFilter"}),size:"xs",onClose:function(){return t.setState((function(){return{showModal:!1}}))},buttons:[{bsStyle:"primary",text:u().createElement(Cn.Z,{msgId:"yes"}),onClick:t.storeAndClose},{bsStyle:"primary",text:u().createElement(Cn.Z,{msgId:"no"}),onClick:t.restoreAndClose}]},u().createElement("div",{className:"ms-alert"},u().createElement("div",{className:"ms-alert-center"},u().createElement(Cn.Z,{msgId:t.props.loadingError?"queryform.changedFilterWithErrorAlert":"queryform.changedFilterAlert"}))))))})),t.state={showModal:!1},t}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===e.querypanelEnabled&&!1===this.props.querypanelEnabled&&this.props.onInit()}},{key:"render",value:function(){return this.renderSidebar()}}])&&gk(t.prototype,r),a}(u().Component);Pk(Tk,"propTypes",{id:f().number,buttonContent:f().node,groups:f().array,settings:f().object,querypanelEnabled:f().bool,groupStyle:f().object,groupPropertiesChangeHandler:f().func,layerPropertiesChangeHandler:f().func,onToggleGroup:f().func,onToggleLayer:f().func,onToggleQuery:f().func,onZoomToExtent:f().func,retrieveLayerData:f().func,onSort:f().func,onInit:f().func,onSettings:f().func,hideSettings:f().func,updateSettings:f().func,updateNode:f().func,removeNode:f().func,activateRemoveLayer:f().bool,activateLegendTool:f().bool,activateZoomTool:f().bool,activateSettingsTool:f().bool,visibilityCheckType:f().string,settingsOptions:f().object,layout:f().object,toolsOptions:f().object,appliedFilter:f().object,storedFilter:f().object,advancedToolbar:f().bool,onSaveFilter:f().func,onRestoreFilter:f().func}),Pk(Tk,"defaultProps",{groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onInit:function(){},updateNode:function(){},removeNode:function(){},activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateRemoveLayer:!0,visibilityCheckType:"checkbox",settingsOptions:{},querypanelEnabled:!1,layout:{},toolsOptions:{},onSaveFilter:function(){},onRestoreFilter:function(){}});const kk={QueryPanelPlugin:(0,d.connect)(xk,{groupPropertiesChangeHandler:w.WO,layerPropertiesChangeHandler:w.He,retrieveLayerData:q.k,onToggleGroup:(0,ie.toggleByType)("groups",w.bh),onToggleLayer:(0,ie.toggleByType)("layers",w.bh),onToggleQuery:O.Xi.bind(null,"queryPanel",null),onSort:(0,ie.sortUsing)(ie.sortLayers,w.MK),onSettings:w.RP,onInit:eg.Xc,onZoomToExtent:H.Px,hideSettings:w.sF,updateSettings:w.VP,updateNode:w.tV,removeNode:w.ZF,onSaveFilter:U,onRestoreFilter:W})(Tk),reducers:{queryform:mk.Z,query:yk.Z,layerFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dk,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return pk(pk({},dk),{},{persisted:t.filter,applied:t.filter});case G:return pk(pk({},e),{},{applied:e.persisted});case M:return pk(pk({},e),{},{applied:t.filter});case Z:return pk(pk({},e),{},{persisted:e.applied});case Qb.Eg:return pk(pk({},e),{},{applied:void 0});default:return e}}},epics:Sk(Sk(Sk({featureTypeSelectedEpic:function(e,t){return e.ofType(eg.S0).filter((function(e){return e.url&&e.typeName})).switchMap((function(e){var r=t.getState();if((0,tg.hk)(r,e.typeName)){var n=sk((0,tg.qj)(r,e.typeName)),o=n.geometry[0]&&n.geometry[0].attribute?n.geometry[0].attribute:"the_geom";return Yt.Observable.of((0,Qb.DD)(o))}return Yt.Observable.defer((function(){return Lt().get(Dt.ZP.filterUrlParams(e.url,(0,me.kS)(t.getState()))+"?service=WFS&version=1.1.0&request=DescribeFeatureType&typeName="+e.typeName+"&outputFormat=application/json")})).map((function(t){if("object"===ck(t.data)&&t.data.featureTypes&&t.data.featureTypes[0]){var r=sk(t.data),n=r.geometry[0]&&r.geometry[0].attribute?r.geometry[0].attribute:"the_geom";return Yt.Observable.from([(0,Qb.DD)(n),(0,eg.rG)(e.typeName,r)])}try{JSON.parse(t.data)}catch(t){return Yt.Observable.from([(0,eg.t3)(e.typeName,"Error from WFS: "+t.message),$.vU({title:"warning",message:"layerProperties.featureTypeErrorInvalidJSON",autoDismiss:3,position:"tc"})])}return Yt.Observable.from([(0,eg.t3)(e.typeName,"Error: feature types are empty")])})).mergeAll().catch((function(t){return Yt.Observable.of((0,eg.t3)(e.typeName,t.message||t.statusText))}))}))},wfsQueryEpic:function(e,t){return e.ofType(eg.Qq).switchMap((function(r){var n,o,i,a=(o=(i=t.getState()).query&&i.query.featureTypes&&i.query.featureTypes[i.query.typeName]&&i.query.featureTypes[i.query.typeName].attributes&&i.query.featureTypes[i.query.typeName].attributes[0]&&i.query.featureTypes[i.query.typeName].attributes[0].attribute||null)?{sortBy:o,sortOrder:"A"}:{},l=(null==r||null===(n=r.filterObj)||void 0===n?void 0:n.sortOptions)||a,c=tg.b0.totalFeatures(t.getState()),s=Dt.ZP.filterUrlParams(r.searchUrl,(0,me.kS)(t.getState())),u=(0,Y.Iz)(t.getState())||{},p=u.layerFilter,f=u.params,d=(0,fe.find)(Object.keys(f||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()})),y=(0,yf.mergeFiltersToOGC)({ogcVersion:"1.1.0"},d,p,r.filterObj),m=function(e,t,r){var n=(0,_P.u$)(r),o=(0,tk.jo)({id:n},"time")(r),i=(0,Y.CA)(r,n)||{},a=(0,fe.get)(i,'params["time"]');if((0,_P.DK)(r)&&o&&a){var l=(0,ek.parse)(e)||{};return{url:(0,ek.format)(nk(nk({},l),{},{query:nk(nk({},l.query),{},{time:a})})),options:t}}return{url:e,options:t}}(s,r.queryOptions||{},t.getState()),b=m.url,g=m.options,v=ak(ak({},r.filterObj.pagination),{},{totalFeatures:c,sortOptions:l},g);return Yt.Observable.merge((0,fg.Mc)(ak(ak({},u),{},{name:r.filterObj.featureTypeName||u.name,search:ak(ak({},u.search),{},{url:b})}),y,v).map((function(e){return(0,eg.w_)(e,r.searchUrl,r.filterObj,r.queryOptions,r.reason)})).catch((function(e){return Yt.Observable.of((0,eg.Lm)(e))})).startWith((0,eg.Fs)(!0)).concat(Yt.Observable.of((0,eg.Fs)(!1)))).takeUntil(e.ofType(eg.VN))}))},viewportSelectedEpic:function(e,t){return e.ofType(Qb.On,H.pP).switchMap((function(e){var r=e.type===H.pP?e:(0,J.Od)(t.getState());if((e.type===Qb.On||e.type===H.pP&&"Viewport"===(0,LP.BU)(t.getState()))&&r.bbox&&r.bbox.bounds&&r.bbox.crs){var n=Object.keys(r.bbox.bounds).reduce((function(e,t){return se()({},e,lk({},t,parseFloat(r.bbox.bounds[t])))}),{});return Yt.Observable.of((0,Qb.ds)(Ko.default.getViewportGeometry(n,r.bbox.crs)))}return Yt.Observable.empty()}))},redrawSpatialFilterEpic:function(e,t){return e.ofType(eg.R1).switchMap((function(){var e=t.getState(),r=(0,LP.vE)(e),n={type:"Feature",geometry:{type:(0,LP.a8)(e),coordinates:(0,LP.G$)(e)}},o=(0,LP.Nl)(e)?(0,Xb.Yf)("drawOrEdit",r.method||"","queryform",[n],{featureProjection:(0,LP.IM)(e),drawEnabled:!1,editEnabled:!1}):(0,Xb.Yf)("clean",r.method||"","queryform",[],{drawEnabled:!1,editEnabled:!1});return Yt.Observable.of(o)}))}},$T),JT),QT)};r(65288);var Ik=r(53001),Ak=r(74855),Fk=r.n(Ak);function Dk(e){return(Dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _k(e,t){return(_k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lk(e,t){return!t||"object"!==Dk(t)&&"function"!=typeof t?Mk(e):t}function Mk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zk(e){return(Zk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_k(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zk(n);if(o){var r=Zk(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Lk(this,e)});function a(){var e;Rk(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Gk(Mk(e=i.call.apply(i,[this].concat(r))),"state",{showCopiedToolTip:!1}),e}return t=a,(r=[{key:"render",value:function(){var e=this;if(!this.props.url)return null;var t=this.props.addAuthentication?(0,Mt.addAuthenticationToUrl)(this.props.url):this.props.url,r=this.state.showCopiedToolTip?"catalog.copied":"catalog.copyToClipboard",n=u().createElement(h.Tooltip,{id:"tooltip"},u().createElement(v.Z,{msgId:r})),o=u().createElement(Fk(),{text:t,onCopy:this.props.onCopy},u().createElement(Ze.Z,{placement:"right",overlay:n,onExited:function(){return e.setState({showCopiedToolTip:!1})}},u().createElement(qe.Z,{bsSize:this.props.bsSize,bsStyle:"primary",className:"link-button",onClick:function(){return e.setState({showCopiedToolTip:!0})}},u().createElement(h.Glyphicon,{glyph:"paperclip"})," ",this.props.labelId&&u().createElement(v.Z,{msgId:this.props.labelId}))));return u().createElement("div",{className:"link-sharing"},u().createElement(h.FormGroup,{bsSize:this.props.bsSize},u().createElement(h.FormControl,{className:"link-input",type:"text",value:t,onChange:function(){}}),o))}}])&&Nk(t.prototype,r),a}(u().Component);Gk(Bk,"propTypes",{url:f().string.isRequired,labelId:f().string,onCopy:f().func,bsSize:f().string,addAuthentication:f().bool}),Gk(Bk,"defaultProps",{onCopy:function(){},bsSize:"small",addAuthentication:!1});const zk=Bk;function Uk(e){return(Uk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wk(){return(Wk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hk(e,t){return(Hk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $k(e,t){return!t||"object"!==Uk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yk(e){return(Yk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hk(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yk(n);if(o){var r=Yk(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $k(this,e)});function a(){return Vk(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){if(!this.props.links||0===this.props.links.length)return null;var e=this.props,t=e.links,r=e.buttonSize,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["links","buttonSize"]),o=t.map((function(e,t){return u().createElement(zk,Wk({key:t,url:e.url,labelId:e.labelId},n))})),i=u().createElement(h.Popover,{className:"links-popover",id:"links-popover"},u().createElement("h5",null,u().createElement(v.Z,{msgId:"catalog.share"})),o);return u().createElement(Ze.Z,{container:this.props.popoverContainer,positionLeft:150,placement:"top",trigger:"click",overlay:i},u().createElement(qe.Z,{bsSize:r,className:"square-button-md",bsStyle:"primary"},u().createElement(h.Glyphicon,{glyph:"link"})))}}])&&qk(t.prototype,r),a}(u().Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Kk,"propTypes",{links:f().array,onCopy:f().func,messages:f().object,locale:f().string,buttonSize:f().string,popoverContainer:f().object,addAuthentication:f().bool});const Xk=Kk;function Qk(){return(Qk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var eI=(0,Kr.Z)(qe.Z);const tI=function(e){var t,r,n=e.record,o=e.service,i=e.children,a=e.addLayer,l=void 0===a?function(){}:a,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["record","service","children","addLayer"]),p=(t=(0,s.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Jk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jk(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=p[0],d=p[1];return u().createElement(eI,Qk({disabled:f},c,{onClick:function(){var e;d(!0),(e=n.tileMapUrl,Lt().get(e).then((function(e){return new Promise((function(t){Nt().parseString(e.data,{explicitArray:!1},(function(e,r){return t(r)}))}))}))).then((function(e){d(!1),l((0,Cg.oR)(n,e,o))}))}}),f?u().createElement(qh.Z,null):i)};function rI(){return(rI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var nI=(0,Kr.Z)(qe.Z);const oI=function(e){var t=e.record,r=e.service,n=e.children,o=e.addLayer,i=void 0===o?function(){}:o,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["record","service","children","addLayer"]);return u().createElement(nI,rI({},a,{onClick:function(){i((0,Cg.eX)(t,r))}}),n)};var iI=r(3932),aI=r.n(iI),lI=r(7872);function cI(e){return(cI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uI(Object(r),!0).forEach((function(t){vI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yI(e,t){return(yI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mI(e,t){return!t||"object"!==cI(t)&&"function"!=typeof t?bI(e):t}function bI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gI(e){return(gI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hI=(0,Kr.Z)(qe.Z),OI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yI(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gI(n);if(o){var r=gI(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return mI(this,e)});function a(){var e;fI(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vI(bI(e=i.call.apply(i,[this].concat(r))),"state",{visibleExpand:!1}),vI(bI(e),"getTitle",(function(t){return(0,fe.isObject)(t)?t[e.props.currentLocale]||t.default:t||""})),vI(bI(e),"renderThumb",(function(t,r){var n=t||aI();return u().createElement(h.Image,{className:"preview",src:n,alt:r&&e.getTitle(r.title)})})),vI(bI(e),"renderButtons",(function(t,r){if(!t||!t.references)return null;var n=(0,Cg.tW)(t),o=n.wms,i=n.wmts,a=n.tms,l=n.wfs,c=(0,Cg.FJ)(t).esri,s=t&&t.background,p=t&&"tileprovider"===t.type&&t.provider,f=[];if(s&&f.push(r?u().createElement(v.Z,{msgId:"catalog.backgroundAlreadyAdded"}):u().createElement(hI,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var t=pI(pI({},s),{},{id:s.name,visibility:!1});e.props.onLayerAdd(t,{background:s})},key:"addlayer"},u().createElement(h.Glyphicon,{glyph:"plus"}))),o||i){var d=o?"wms":"wmts";f.push(u().createElement(hI,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var r=e.makeLayer(d,o||i,t.format&&[t.format]||t.formats);r&&e.addLayer(r,{record:t})},key:"add".concat(d,"layer")},u().createElement(h.Glyphicon,{glyph:"plus"})))}if(c&&f.push(u().createElement(hI,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer((0,Cg.AD)(e.props.record,e.props.layerBaseConfig))},key:"addesrilayer"},u().createElement(h.Glyphicon,{glyph:"plus"}))),a&&f.push(u().createElement(tI,{service:e.props.service,key:"addTmsLayer",tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},u().createElement(h.Glyphicon,{glyph:"plus"}))),l&&f.push(u().createElement(hI,{tooltipId:"catalog.addToMap",key:"addWFSLayer",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer((0,Cg.LZ)(e.props.record,e.props.layerBaseConfig))}},u().createElement(h.Glyphicon,{glyph:"plus"}))),p&&f.push(u().createElement(oI,{key:"addTileProviderLayer",service:e.props.service,tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},u().createElement(h.Glyphicon,{glyph:"plus"}))),e.props.showGetCapLinks){var y=(0,Cg.F8)(t);y.length>0&&f.push(u().createElement(Xk,{key:"sharing-links",popoverContainer:bI(e),links:y,onCopy:e.props.onCopy,buttonSize:e.props.buttonSize,addAuthentication:e.props.addAuthentication}))}return f})),vI(bI(e),"renderDescription",(function(t){if(!t)return null;var r=(0,le.S$)(e.context.messages,"catalog.notAvailable");return e.state.fullText&&t.metadataTemplate?u().createElement("div",{className:"catalog-metadata ql-editor"},u().createElement(ia.Z,{html:(0,Ax.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(e){return"".concat((0,fe.trim)(e.substring(2,e.length-1))," ").concat(r)}))})):t.metadataTemplate?"":(0,fe.isArray)(t.description)?t.description.join(", "):t.description})),vI(bI(e),"isLinkCopied",(function(t){return e.state[t]})),vI(bI(e),"setLinkCopiedStatus",(function(t,r){e.setState(vI({},t,r))})),vI(bI(e),"getLayerFormat",(function(t){return 0===t.length||t.filter((function(t){return t===e.props.defaultFormat})).length>0?e.props.defaultFormat:t[0]})),vI(bI(e),"makeLayer",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[e.props.defaultFormat],o=(0,Cg.n0)(r.SRS);if(r.SRS.length>0&&!(0,Ko.isAllowedSRS)(e.props.crs,o))return e.props.onError("catalog.srs_not_allowed"),null;var i=e.props.service&&e.props.service.localizedLayerStyles;return(0,Cg.ll)(e.props.record,t,pI({removeParams:e.props.authkeyParamNames},"wms"===t?{catalogURL:"csw"===e.props.catalogType&&e.props.catalogURL?e.props.catalogURL+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+e.props.record.identifier:null,format:e.getLayerFormat(n.filter((function(e){return 0===e.indexOf("image/")})))}:{format:e.getLayerFormat(n.filter((function(e){return 0===e.indexOf("image/")})))}),e.props.layerBaseConfig,i)})),vI(bI(e),"addLayer",(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.background;if("backgroundSelector"===e.props.source)n?(e.props.onLayerAdd(pI(pI({},t),{},{group:"background"}),{source:e.props.source}),e.props.onAddBackground(t.id)):e.props.onAddBackgroundProperties({editing:!1,layer:t},!0);else{var o=e.props.zoomToLayer;e.props.onLayerAdd(t,{zoomToLayer:o})}})),vI(bI(e),"displayExpand",(function(){return(e.descriptionRuler?e.descriptionRuler.clientWidth:0)>(e.sideCardDesc?e.sideCardDesc.clientWidth:0)})),e}return t=a,(r=[{key:"componentDidMount",value:function(){var e=(0,le.S$)(this.context.messages,"catalog.notAvailable"),t=this.props.record;this.setState({visibleExpand:!this.props.hideExpand&&(this.displayExpand()||!!(this.props.showTemplate&&t&&t.metadataTemplate&&(0,Ax.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(t){return"".concat((0,fe.trim)(t.substring(2,t.length-1))," ").concat(e)}))))})}},{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var e,t=this,r=this.props.record,n=(0,Cg.tW)(r),o=n.wms,i=n.wmts,a=n.tms,l=n.wfs,c=(0,Cg.FJ)(r).esri,s=r&&"tileprovider"===r.type&&r.provider,p=r&&r.background,f=p&&(0,fe.head)((this.props.layers||[]).filter((function(e){return e.id===p.name||e.type===p.type&&e.source===p.source&&e.name===p.name})));return r?u().createElement("div",null,u().createElement(Im.Z,{style:{transform:"none",opacity:f?.4:1},fullText:this.state.fullText,preview:!this.props.hideThumbnail&&this.renderThumb(r&&r.thumbnail||p&&lI.Z[p.source][p.name],r),title:r&&this.getTitle(r.title),description:u().createElement("span",null,u().createElement("div",{className:!0,ref:function(e){t.sideCardDesc=e}},this.renderDescription(r))),caption:u().createElement("div",null,!this.props.hideIdentifier&&u().createElement("div",{className:"identifier"},r&&r.identifier),u().createElement("div",null,!o&&!i&&!c&&!p&&!a&&!s&&!l&&u().createElement("small",{className:"text-danger"},u().createElement(v.Z,{msgId:"catalog.missingReference"}))),!this.props.hideExpand&&u().createElement("div",{className:"ms-ruler",style:{visibility:"hidden",height:0,whiteSpace:"nowrap",position:"absolute"},ref:function(e){t.descriptionRuler=e}},this.renderDescription(r))),tools:u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[].concat((e=(r&&this.renderButtons(r,f)||[]).map((function(e){return{Element:function(){return e}}})),function(e){if(Array.isArray(e))return sI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sI(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:this.state.fullText?"chevron-down":"chevron-left",visible:this.state.visibleExpand,tooltipId:this.state.fullText?"collapse":"expand",onClick:function(){return t.setState({fullText:!t.state.fullText})}}])})})):null}}])&&dI(t.prototype,r),a}(u().Component);vI(OI,"propTypes",{addAuthentication:f().bool,authkeyParamNames:f().array,buttonSize:f().string,catalogURL:f().string,catalogType:f().string,crs:f().string,currentLocale:f().string,hideThumbnail:f().bool,hideExpand:f().bool,hideIdentifier:f().bool,layerBaseConfig:f().object,onCopy:f().func,onError:f().func,onLayerAdd:f().func,record:f().object,showGetCapLinks:f().bool,zoomToLayer:f().bool,onPropertiesChange:f().func,onLayerChange:f().func,layers:f().array,onAdd:f().func,source:f().string,onAddBackgroundProperties:f().func,deletedId:f().string,clearModal:f().func,service:f().service,showTemplate:f().bool,defaultFormat:f().string,formatOptions:f().array}),vI(OI,"defaultProps",{buttonSize:"small",crs:"EPSG:3857",currentLocale:"en-US",onAddBackgroundProperties:function(){},hideThumbnail:!1,hideIdentifier:!1,hideExpand:!1,layerBaseConfig:{},onCopy:function(){},onError:function(){},onLayerAdd:function(){},onPropertiesChange:function(){},onLayerChange:function(){},clearModal:function(){},style:{},showGetCapLinks:!1,zoomToLayer:!0,layers:[],onAdd:function(){},source:"metadataExplorer",showTemplate:!1,changeLayerProperties:function(){},defaultFormat:"image/png"}),vI(OI,"contextTypes",{messages:f().object});const wI=OI;function EI(e){return(EI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SI(){return(SI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function PI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CI(e,t){return(CI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xI(e,t){return!t||"object"!==EI(t)&&"function"!=typeof t?TI(e):t}function TI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kI(e){return(kI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function II(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var AI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CI(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kI(n);if(o){var r=kI(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xI(this,e)});function a(){var e;PI(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return II(TI(e=i.call.apply(i,[this].concat(r))),"renderRecordItem",(function(t){var r=e.props.recordItem||wI;return u().createElement(h.Col,SI({},e.props.column,{key:t.identifier}),u().createElement(r,{crs:e.props.crs,clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,onAddBackground:e.props.onAddBackground,source:e.props.source,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,hideThumbnail:e.props.hideThumbnail,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onError:e.props.onError,catalogURL:e.props.catalogURL,catalogType:e.props.catalogType,service:e.props.service,showTemplate:e.props.showTemplate,record:t,authkeyParamNames:e.props.authkeyParamNames,style:{height:"215px",maxHeight:"215px"},showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,defaultFormat:e.props.defaultFormat,formatOptions:e.props.formatOptions,layerBaseConfig:e.props.layerBaseConfig}))})),e}return t=a,(r=[{key:"render",value:function(){if(this.props.records){var e=this.props.records instanceof Array?this.props.records:[this.props.records];return u().createElement(h.Grid,{className:"record-grid",fluid:!0,style:this.props.style},u().createElement(h.Row,null,e.map(this.renderRecordItem)))}return null}}])&&jI(t.prototype,r),a}(u().Component);II(AI,"propTypes",{crs:f().string,recordItem:f().element,catalogURL:f().string,catalogType:f().string,zoomToLayer:f().bool,onLayerAdd:f().func,onPropertiesChange:f().func,onError:f().func,records:f().array,authkeyParamNames:f().array,style:f().object,showGetCapLinks:f().bool,addAuthentication:f().bool,column:f().object,currentLocale:f().string,hideThumbnail:f().bool,hideIdentifier:f().bool,hideExpand:f().bool,source:f().string,onAddBackgroundProperties:f().func,modalParams:f().object,layers:f().object,clearModal:f().func,onAddBackground:f().func,showTemplate:f().bool,service:f().object,defaultFormat:f().string,formatOptions:f().array,layerBaseConfig:f().object}),II(AI,"defaultProps",{column:{xs:12},currentLocale:"en-US",onLayerAdd:function(){},onPropertiesChange:function(){},onError:function(){},records:[],zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857"});const FI=AI;function DI(e){return(DI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RI(){return(RI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function NI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?NI(Object(r),!0).forEach((function(t){UI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function LI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ZI(e,t){return(ZI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GI(e,t){return!t||"object"!==DI(t)&&"function"!=typeof t?BI(e):t}function BI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zI(e){return(zI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var WI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZI(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zI(n);if(o){var r=zI(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return GI(this,e)});function a(){var e;LI(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return UI(BI(e=i.call.apply(i,[this].concat(r))),"state",{catalogURL:null}),UI(BI(e),"onSearchTextChange",(function(t){e.props.onChangeText(t.target.value)})),UI(BI(e),"onKeyDown",(function(t){13===t.keyCode&&e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})})),UI(BI(e),"getServices",(function(){return((0,fe.has)(e.props.services,"default_map_backgrounds")?["default_map_backgrounds"]:[]).concat(Object.keys((0,fe.omit)(e.props.services,"default_map_backgrounds"))).map((function(t){return se()({},e.props.services[t],{label:(0,le.S$)(e.context.messages,e.props.services[t].title),value:t})}))})),UI(BI(e),"renderResult",(function(){return e.props.result?0===e.props.result.numberOfRecordsMatched?u().createElement("div",null,u().createElement(v.Z,{msgId:"catalog.noRecordsMatched"})):e.renderRecords():e.props.loadingError?e.renderError():null})),UI(BI(e),"renderError",(function(e){return u().createElement(h.Alert,{bsStyle:"danger"},u().createElement(v.Z,{msgId:e||"catalog.error"}))})),UI(BI(e),"renderLoading",(function(){return u().createElement("div",{className:"catalog-results loading"},u().createElement(Vc.Z,{size:176}))})),UI(BI(e),"renderPagination",(function(){if(e.props.result){var t=e.props.result.numberOfRecordsMatched,r=e.props.result.numberOfRecordsReturned,n=e.props.searchOptions.startPosition,o=e.props.pageSize,i=Math.floor(n/o),a=Math.ceil(t/o);return u().createElement("div",{className:"catalog-pagination"},u().createElement(h.Pagination,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:a,maxButtons:5,activePage:i+1,onSelect:e.handlePage}),u().createElement("div",{className:"push-right"},u().createElement(v.Z,{msgId:"catalog.pageInfo",msgParams:{start:n,end:n+r-1,total:t}})))}return null})),UI(BI(e),"renderRecords",(function(){var t="",r=!1,n=!1;if(e.props.services&&e.props.services[e.props.selectedService]){var o=e.props.services[e.props.selectedService];(0,fe.isNil)(o.metadataTemplate)||(0,fe.isNil)(o.showTemplate)||(r=o.showTemplate,t=o.metadataTemplate),(0,fe.isNil)(o.hideThumbnail)||(n=o.hideThumbnail)}return u().createElement("div",{className:"catalog-results"},u().createElement(FI,RI({},e.props.gridOptions,{crs:e.props.crs,key:"records",hideThumbnail:n,records:e.props.records.map((function(e){return r&&t?_I(_I({},e),{},{metadataTemplate:t}):e})),clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,source:e.props.source,authkeyParamNames:e.props.authkeyParamNames,catalogURL:e.isValidServiceSelected()&&e.props.services[e.props.selectedService].url||"",service:e.props.services[e.props.selectedService],catalogType:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].type,showTemplate:e.props.services[e.props.selectedService].showTemplate,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,onError:e.props.onError,showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,recordItem:e.props.recordItem,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onAddBackground:e.props.onAddBackground,defaultFormat:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].format,formatOptions:e.props.formatOptions,layerBaseConfig:e.props.layerBaseConfig,onAdd:function(){e.search({services:e.props.services,selectedService:e.props.selectedService})}})))})),UI(BI(e),"renderButtons",(function(){var t=[];return e.props.includeSearchButton&&t.push(u().createElement(qe.Z,{bsStyle:"primary",style:e.props.buttonStyle,onClick:function(){return e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})},className:e.props.buttonClassName,key:"catalog_search_button",disabled:e.props.loading||!e.isValidServiceSelected()},u().createElement(v.Z,{msgId:"catalog.search"}))),e.props.includeResetButton&&t.push(u().createElement(qe.Z,{style:e.props.buttonStyle,onClick:e.reset,key:"catalog_reset_button"},u().createElement(v.Z,{msgId:"catalog.reset"}))),t})),UI(BI(e),"renderTextSearch",(function(){var t=u().createElement(h.FormControl,{ref:"searchText",type:"text",style:{textOverflow:"ellipsis"},value:e.props.searchText,placeholder:(0,le.S$)(e.context.messages,"catalog.textSearchPlaceholder"),onChange:e.onSearchTextChange,onKeyDown:e.onKeyDown});return e.props.wrapOptions?u().createElement(h.Panel,{collapsible:!0,defaultExpanded:!1,header:(0,le.S$)(e.context.messages,"catalog.options")},t):t})),UI(BI(e),"isValidServiceSelected",(function(){return void 0!==e.props.services[e.props.selectedService]})),UI(BI(e),"search",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.services,n=t.selectedService,o=t.start,i=void 0===o?1:o,a=t.searchText,l=void 0===a?"":a,c=r[n].url,s=r[n].type;e.props.onSearch({format:s,url:c,startPosition:i,maxRecords:e.props.pageSize,text:l||"",options:{service:e.props.services[n]}})})),UI(BI(e),"reset",(function(){e.props.onReset()})),UI(BI(e),"handlePage",(function(t){if(t){var r=(t-1)*e.props.pageSize+1;e.search({services:e.props.services,selectedService:e.props.selectedService,start:r,searchText:e.props.searchText})}})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.selectedService&&this.isValidServiceSelected()&&this.props.services[this.props.selectedService].autoload&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(("view"===e.mode&&"edit"===this.props.mode||e.services!==this.props.services||e.selectedService!==this.props.selectedService)&&e.active&&this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}),e.active&&!1===this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}))}},{key:"render",value:function(){var e=this;return u().createElement(Go.Z,{key:"catalog-BorderLayout",bodyClassName:"ms2-border-layout-body catalog",header:u().createElement(h.Form,null,u().createElement(h.FormGroup,{controlId:"labelService",key:"labelService"},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"catalog.service"}))),u().createElement(h.FormGroup,{controlId:"service",key:"service"},u().createElement(h.InputGroup,null,u().createElement(zo.ZP,{clearValueText:(0,le.S$)(this.context.messages,"catalog.clearValueText"),noResultsText:(0,le.S$)(this.context.messages,"catalog.noResultsText"),clearable:!0,options:this.getServices(),value:this.props.selectedService,onChange:function(t){return e.props.onChangeSelectedService(t&&t.value?t.value:"")},placeholder:(0,le.S$)(this.context.messages,"catalog.servicePlaceholder")}),this.isValidServiceSelected()&&"default_map_backgrounds"!==this.props.selectedService?u().createElement(h.InputGroup.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!1)}},u().createElement(h.Glyphicon,{glyph:"pencil"})):null,u().createElement(h.InputGroup.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!0)}},u().createElement(h.Glyphicon,{glyph:"plus"})))),u().createElement(h.FormGroup,{controlId:"searchText",key:"searchText"},this.renderTextSearch()),u().createElement(h.FormGroup,{controlId:"buttons",key:"buttons"},this.renderButtons(),this.props.layerError?this.renderError(this.props.layerError):null)),footer:this.renderPagination()},this.props.loading?this.renderLoading():this.renderResult())}}])&&MI(t.prototype,r),a}(u().Component);UI(WI,"propTypes",{active:f().bool,searchText:f().string,addAuthentication:f().bool,buttonClassName:f().string,buttonStyle:f().object,currentLocale:f().string,loading:f().bool,format:f().string,crs:f().string,gridOptions:f().object,includeSearchButton:f().bool,includeResetButton:f().bool,loadingError:f().object,layerError:f().string,mode:f().string,onChangeCatalogMode:f().func,onChangeText:f().func,onChangeFormat:f().func,onChangeSelectedService:f().func,onPropertiesChange:f().func,onError:f().func,onLayerAdd:f().func,onReset:f().func,onSearch:f().func,onAddBackground:f().func,pageSize:f().number,records:f().array,authkeyParamNames:f().array,recordItem:f().element,result:f().object,searchOptions:f().object,selectedService:f().string,services:f().object,showGetCapLinks:f().bool,wrapOptions:f().bool,zoomToLayer:f().bool,hideThumbnail:f().bool,hideIdentifier:f().bool,hideExpand:f().bool,source:f().string,onAddBackgroundProperties:f().func,modalParams:f().object,layers:f().array,clearModal:f().func,formatOptions:f().array,layerBaseConfig:f().object}),UI(WI,"contextTypes",{messages:f().object}),UI(WI,"defaultProps",{buttonClassName:"search-button",buttonStyle:{marginBottom:"10px",marginRight:"5px"},currentLocale:"en-US",format:"csw",includeSearchButton:!0,includeResetButton:!1,mode:"view",onChangeCatalogMode:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeSelectedService:function(){},onPropertiesChange:function(){},onError:function(){},onLayerAdd:function(){},onReset:function(){},onSearch:function(){},changeLayerProperties:function(){},pageSize:4,records:[],loading:!1,services:{},wrapOptions:!1,zoomToLayer:!0,formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}],layerBaseConfig:{},crs:"EPSG:3857"});const VI=WI,qI=function(e){var t=e.children,r=e.service,n=e.isLocalizedLayerStylesEnabled,o=e.onChangeMetadataTemplate,i=void 0===o?function(){}:o,a=e.onChangeServiceProperty,l=void 0===a?function(){}:a,c=e.onToggleTemplate,s=void 0===c?function(){}:c,p=e.onToggleThumbnail,f=void 0===p?function(){}:p;return u().createElement("div",null,u().createElement(h.FormGroup,{controlId:"autoload",key:"autoload"},u().createElement(h.Col,{xs:12},u().createElement(h.Checkbox,{value:"autoload",onChange:function(e){return l("autoload",e.target.checked)},checked:!(0,fe.isNil)(r.autoload)&&r.autoload},u().createElement(v.Z,{msgId:"catalog.autoload"})))),u().createElement(h.FormGroup,{controlId:"thumbnail",key:"thumbnail"},u().createElement(h.Col,{xs:12},u().createElement(h.Checkbox,{onChange:function(){return f()},checked:!!(0,fe.isNil)(r.hideThumbnail)||!r.hideThumbnail},u().createElement(v.Z,{msgId:"catalog.showPreview"})))),!(!n||(0,fe.isNil)(r.type))&&"wms"===r.type&&u().createElement(h.FormGroup,{controlId:"localized-styles",key:"localized-styles"},u().createElement(h.Col,{xs:12},u().createElement(h.Checkbox,{"data-qa":"service-lacalized-layer-styles-option",onChange:function(e){return l("localizedLayerStyles",e.target.checked)},checked:!(0,fe.isNil)(r.localizedLayerStyles)&&r.localizedLayerStyles},u().createElement(v.Z,{msgId:"catalog.enableLocalizedLayerStyles.label"})," ",u().createElement(Ps.Z,{text:u().createElement(v.Z,{msgId:"catalog.enableLocalizedLayerStyles.tooltip"})})))),!(0,fe.isNil)(r.type)&&"csw"===r.type&&u().createElement(h.FormGroup,{controlId:"metadata-template",key:"metadata-template",className:"metadata-template-editor"},u().createElement(h.Col,{xs:12},u().createElement(h.Checkbox,{onChange:function(){return s()},checked:r&&r.showTemplate},u().createElement(v.Z,{msgId:"catalog.showTemplate"})),u().createElement("br",null)),r&&r.showTemplate&&u().createElement(h.Col,{xs:12},u().createElement("span",null,u().createElement("p",null,u().createElement(v.Z,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}}),"  "),u().createElement("pre",null,u().createElement(v.Z,{msgId:"catalog.templateFormatDescriptionExample"})," ${ description }"))),u().createElement(h.Col,{xs:12},r&&r.showTemplate&&u().createElement(Wa(),{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["link"]]},value:r.metadataTemplate||"",onChange:function(e){i(e&&"<p><br></p>"!==e?e:"")}}))),t)};function HI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(3256),r(62193),r(96876);const YI=function(e){var t=e.onValid,r=e.onError,n=e.json,o=void 0===n?{}:n,i=HI((0,s.useState)(JSON.stringify(o,!0,2)),2),a=i[0],l=i[1],c=HI((0,s.useState)(),2),p=c[0],f=c[1];return(0,s.useEffect)((function(){try{var e=JSON.parse(a);f(),t(e)}catch(e){f(e),r(e)}}),[a]),u().createElement("div",{className:"code-editor"},u().createElement(Ss.Controlled,{value:a,onBeforeChange:function(e,t,r){l(r)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),p&&u().createElement("div",{className:"error-area"},u().createElement("div",{className:"error-area-header"},u().createElement(v.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),u().createElement("div",{className:"error-area-body"},u().createElement(v.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:p.message}},(function(e){return u().createElement("pre",{className:"error-msg"},e)})))))};var KI={options:{}};const XI=function(e){var t=e.service,r=void 0===t?{}:t,n=e.setValid,o=void 0===n?function(){}:n,i=e.onToggleThumbnail,a=void 0===i?function(){}:i,l=e.onChangeServiceProperty,c=void 0===l?function(){}:l,s=r.options||r.variants?{options:r.options||{},variants:r.variants}:void 0;return u().createElement("div",null,u().createElement(h.FormGroup,{controlId:"autoload",key:"autoload"},u().createElement(h.Col,{xs:12},u().createElement(h.Checkbox,{key:"autoload",value:"autoload",onChange:function(e){return c("autoload",e.target.checked)},checked:!(0,fe.isNil)(r.autoload)&&r.autoload},u().createElement(v.Z,{msgId:"catalog.autoload"})),u().createElement(h.Checkbox,{key:"thumbnail",value:"thumbnail",onChange:function(){return a()},checked:!!(0,fe.isNil)(r.hideThumbnail)||!r.hideThumbnail},u().createElement(v.Z,{msgId:"catalog.showPreview"})),"tms"===r.provider?u().createElement(h.Checkbox,{key:"forceDefaultTileGrid",value:"forceDefaultTileGrid",onChange:function(e){return c("forceDefaultTileGrid",e.target.checked)},checked:!(0,fe.isNil)(r.forceDefaultTileGrid)&&r.forceDefaultTileGrid},u().createElement(v.Z,{msgId:"catalog.tms.forceDefaultTileGrid"})," ",u().createElement(Ps.Z,{text:u().createElement(v.Z,{msgId:"catalog.tms.forceDefaultTileGridDescription"})})):null),r.provider&&"custom"!==r.provider?null:u().createElement(h.Col,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"catalog.tms.customTMSConfiguration"}),"  ",u().createElement(Ps.Z,{text:u().createElement(ns.Z,{msgId:"catalog.tms.customTMSConfigurationHint"})})),u().createElement(YI,{json:s||KI,onValid:function(e){var t=e.options,n=e.variants;(0,fe.isEqual)(t,r.options)||c("options",t),(0,fe.isEqual)(n,r.variants)||c("variants",n),o(!0)},onError:function(){r.options&&c("options",void 0),r.variants&&c("variants",void 0),o(!1)}}))))};function QI(){return(QI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var JI=function(e){return e.map((function(e){return{label:"".concat(e,"x").concat(e),value:e}}))};const eA=function(e){var t,r=e.service,n=e.formatOptions,o=e.onChangeServiceFormat,i=void 0===o?function(){}:o,a=e.onChangeServiceProperty,l=void 0===a?function(){}:a,c=e.tileSizeOptions,s=(e.currentWMSCatalogLayerSize,e.selectedService,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["service","formatOptions","onChangeServiceFormat","onChangeServiceProperty","tileSizeOptions","currentWMSCatalogLayerSize","selectedService"])),p=JI(c);return u().createElement(qI,QI({onChangeServiceProperty:l,service:r},s),u().createElement(h.FormGroup,{style:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}},u().createElement(h.Col,{xs:6},u().createElement(h.ControlLabel,null,"Format")),u().createElement(h.Col,{xs:6},u().createElement(zo.ZP,{value:r&&r.format,clearable:!0,options:n,onChange:function(e){return i(e&&e.value)}}))),u().createElement(h.FormGroup,{style:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}},u().createElement(h.Col,{xs:6},u().createElement(h.ControlLabel,null,"WMS Layer tile size")),u().createElement(h.Col,{xs:6},u().createElement(zo.ZP,{value:JI([(null===(t=r.layerOptions)||void 0===t?void 0:t.tileSize)||256])[0],options:p,onChange:function(e){return l("layerOptions",{tileSize:e&&e.value})}}))))};const tA=function(e){var t=e.onToggleAdvancedSettings,r=void 0===t?function(){}:t,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["onToggleAdvancedSettings"]),o=n.service,i=void 0===o?{}:o,a=function(e){switch(e){case"tms":return XI;case"wmts":case"wfs":return qI;case"wms":case"csw":return eA;default:return qI}}(i.type);return u().createElement(Lf.Z,{useToolbar:!0,title:u().createElement(v.Z,{msgId:"catalog.advancedSettings"}),expanded:!(0,fe.isNil)(i.showAdvancedSettings)&&i.showAdvancedSettings,onSwitch:r},u().createElement(a,n))};function rA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var nA=function(e){for(var t=0,r=Object.entries({wfs:"e.g. https://mydomain.com/geoserver/wfs",wmts:"e.g. https://mydomain.com/geoserver/gwc/service/wmts",wms:"e.g. https://mydomain.com/geoserver/wms",csw:"e.g. https://mydomain.com/geoserver/csw",tms:"e.g. https://mydomain.com/geoserver/gwc/service/tms/1.0.0"});t<r.length;t++){var n=(a=r[t],l=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(a,l)||function(e,t){if(e){if("string"==typeof e)return rA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rA(e,t):void 0}}(a,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];if(o===e.type)return i}var a,l;return!0};function oA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var iA=(0,Hc.Z)("placeholder")(h.FormControl),aA="custom",lA="tms",cA=function(e){var t=e.service,r=void 0===t?{}:t,n=e.onChangeUrl,o=void 0===n?function(){}:n;return u().createElement(h.FormGroup,{controlId:"URL"},u().createElement(h.Col,{xs:12},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"catalog.url"})),u().createElement(iA,{type:"text",style:{textOverflow:"ellipsis"},placeholder:nA(r),value:r&&r.url,onChange:function(e){return o(e.target.value)}})))},sA=function(e){return e===lA?"TMS 1.0.0":e},uA=function(e){var t,r,n,o,i=e.serviceTypes,a=void 0===i?[]:i,l=e.onChangeServiceProperty,c=e.service,s=void 0===c?{}:c,p=e.onChangeUrl,f=void 0===p?function(){}:p,d=e.onChangeTitle,y=void 0===d?function(){}:d,m=(0,Dt.u8)("allowedProviders")||(0,fe.get)((0,fe.find)(a||[],{name:"tms"}),"allowedProviders")||[],b=Object.keys($t.Z).filter((function(e){return"ALL"===m||m.indexOf(e)>=0})),g=s===lA?s:null==s||null===(t=s.provider)||void 0===t||null===(r=t.split)||void 0===r||null===(n=r.call(t,"."))||void 0===n?void 0:n[0],O=!g||g===aA,w=g===lA,E=w||O;return u().createElement(h.FormGroup,null,u().createElement(h.Col,{xs:12,sm:O?3:12,md:E?3:12},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"catalog.tms.provider"})),u().createElement(iA,{onChange:function(e){var t=e.target.value;l("provider","".concat(t)),t!==aA&&t!==lA?y(t):O||w||y("")},value:g,componentClass:"select"},[aA,lA].concat((o=b,function(e){if(Array.isArray(e))return oA(e)}(o)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return oA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oA(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e){return{name:e,label:sA(e)}})).map((function(e){return u().createElement("option",{value:e.name,key:e.name},e.label)})))),u().createElement(h.Col,{xs:12,sm:9,md:9},O?u().createElement(u().Fragment,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"catalog.tms.urlTemplate"}),"  ",u().createElement(Ps.Z,{text:u().createElement(ns.Z,{msgId:"catalog.tms.urlTemplateHint"})})),u().createElement(iA,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"e.g. https://{s}.myUrl.com/{variant}/{z}/{x}/{y}",value:s&&s.url,onChange:function(e){return f(e.target.value)}})):w?u().createElement(u().Fragment,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"catalog.url"})),u().createElement(iA,{type:"text",style:{textOverflow:"ellipsis"},placeholder:nA(s),value:s&&s.url,onChange:function(e){return f(e.target.value)}})):null))};const pA=function(e){var t=e.service,r=void 0===t?{}:t,n=e.serviceTypes,o=e.onChangeTitle,i=e.onChangeUrl,a=e.onChangeServiceProperty,l=e.onChangeType,c="tms"===r.type?uA:cA;return u().createElement(h.Form,{horizontal:!0},u().createElement(h.FormGroup,{controlId:"title",key:"type-title-row"},u().createElement(h.Col,{key:"type",xs:12,sm:3,md:3},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"catalog.type"})),u().createElement(iA,{onChange:function(e){return l(e.target.value)},value:r&&r.type,componentClass:"select"},n.map((function(e){return u().createElement("option",{value:e.name,key:e.name},e.label)})))),u().createElement(h.Col,{key:"title",xs:12,sm:9,md:9},u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"catalog.serviceTitle"})),u().createElement(iA,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.serviceTitlePlaceholder",value:r&&r.title,onChange:function(e){return o(e.target.value)}}))),u().createElement(c,{key:"url-row",serviceTypes:n,service:r,onChangeUrl:i,onChangeTitle:o,onChangeServiceProperty:a}))};function fA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(85209),r(78908);var dA=r(31935);function yA(e){return(yA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mA(){return(mA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vA(e,t){return(vA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hA(e,t){return!t||"object"!==yA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OA(e){return(OA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function EA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wA(Object(r),!0).forEach((function(t){SA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function SA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PA=(0,N.zB)({searchOptions:me.bA,result:me.SX,loadingError:me.hm,selectedService:me.Cb,mode:me.eK,services:me.b6,servicesWithBackgrounds:me.PG,layerError:me.Im,active:me.$t,dockStyle:function(e){return(0,Xr.ic)(e,{height:!0})},searchText:me.e8,group:me.Mm,source:dA.YL,layers:Y.l2,modalParams:dA.B0,authkeyParamNames:me.kS,saving:me.dP,openCatalogServiceList:me.ZL,service:me._S,format:me.iH,selectedFormat:me.Q7,options:me.bA,layerOptions:me.n7,tileSizeOptions:me._x,currentLocale:ee.Pz,locales:ee.Ps,pageSize:me.y,loading:me.E2,crs:J.uy,isLocalizedLayerStylesEnabled:oe.wk}),jA=(0,_.compose)((0,_.withProps)((function(e){var t=e.result,r=e.selectedFormat,n=e.options,o=e.layerOptions,i=e.services,a=e.selectedService,l=e.locales;return{records:t&&(0,Cg.eL)(r,t,EA(EA({},n),{},{layerOptions:o,service:i[a]}),l)||[]}})),(0,_.defaultProps)({buttonStyle:{marginBottom:"10px",marginRight:"5px"},formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}]}),(0,_.branch)((function(e){return"edit"===e.mode}),(0,_.renderComponent)((function(e){var t,r,n=e.service,o=void 0===n?{title:"",type:"wms",url:"",format:"image/png"}:n,i=e.serviceTypes,a=void 0===i?[{name:"csw",label:"CSW"}]:i,l=e.onChangeTitle,c=void 0===l?function(){}:l,p=e.onChangeUrl,f=void 0===p?function(){}:p,d=e.onChangeType,y=void 0===d?function(){}:d,m=e.id,b=e.urlTooltip,g=e.formatOptions,O=e.buttonStyle,w=e.saving,E=e.onChangeServiceFormat,S=void 0===E?function(){}:E,P=e.onChangeMetadataTemplate,j=void 0===P?function(){}:P,C=e.onToggleAdvancedSettings,x=void 0===C?function(){}:C,T=e.onChangeServiceProperty,k=void 0===T?function(){}:T,I=e.onToggleTemplate,A=void 0===I?function(){}:I,F=e.onToggleThumbnail,D=void 0===F?function(){}:F,R=e.onAddService,N=void 0===R?function(){}:R,_=e.onDeleteService,L=void 0===_?function(){}:_,M=e.onChangeCatalogMode,Z=void 0===M?function(){}:M,G=e.selectedService,B=e.isLocalizedLayerStylesEnabled,z=e.tileSizeOptions,U=void 0===z?[256]:z,W=e.layerOptions,V=(t=(0,s.useState)(!0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return fA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fA(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),q=V[0],H=V[1];return u().createElement(Go.Z,{bodyClassName:"ms2-border-layout-body catalog",header:u().createElement(pA,{setValid:H,service:o,serviceTypes:a,onChangeTitle:c,onChangeUrl:f,onChangeType:y,onChangeServiceProperty:k,urlTooltip:b})},u().createElement(h.Form,null,u().createElement(tA,{setValid:H,id:m,service:o,formatOptions:g,buttonStyle:O,saving:w,onChangeServiceFormat:S,onChangeMetadataTemplate:j,onToggleAdvancedSettings:x,onChangeServiceProperty:k,onToggleTemplate:A,onToggleThumbnail:D,isLocalizedLayerStylesEnabled:B,tileSizeOptions:U,currentWMSCatalogLayerSize:W.tileSize?W.tileSize:256,selectedService:G}),u().createElement(h.FormGroup,{controlId:"buttons",key:"buttons"},u().createElement(h.Col,{xs:12},u().createElement(qe.Z,{style:O,disabled:w||!q,onClick:function(){return N()},key:"catalog_add_service_button"},w?u().createElement(sC(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,u().createElement(v.Z,{msgId:"save"})),o&&!o.isNew?u().createElement(qe.Z,{style:O,onClick:function(){return L()},key:"catalog_delete_service_button"},u().createElement(v.Z,{msgId:"catalog.delete"})):null,u().createElement(qe.Z,{style:O,disabled:w,onClick:function(){return Z("view")},key:"catalog_back_view_button"},u().createElement(v.Z,{msgId:"cancel"}))))))}))))(VI),CA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vA(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=OA(n);if(o){var r=OA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return hA(this,e)});function a(){return bA(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this,t={group:this.props.group||void 0},r=u().createElement(jA,mA({layerBaseConfig:t},this.props,{services:"backgroundSelector"===this.props.source?this.props.servicesWithBackgrounds:this.props.services}));return u().createElement("div",{id:"catalog-root",className:this.props.active?"catalog-active":"",style:{width:"100%",height:"100%",pointerEvents:"none"}},u().createElement(KC.Z,null,(function(t){var n=t.width;return u().createElement(sg.Z,{open:e.props.active,size:e.props.width/n>1?n:e.props.width,position:"right",bsStyle:"primary",title:u().createElement(v.Z,{msgId:"catalog.title"}),onClose:function(){return e.props.closeCatalog()},glyph:"folder-open",zIndex:1031,style:e.props.dockStyle},u().createElement(h.Panel,{id:e.props.id,style:e.props.panelStyle,className:e.props.panelClassName},r))})))}}])&&gA(t.prototype,r),a}(u().Component);SA(CA,"propTypes",{id:f().string,source:f().string,active:f().bool,searchOnStartup:f().bool,serviceTypes:f().array,wrap:f().bool,wrapWithPanel:f().bool,panelStyle:f().object,panelClassName:f().string,closeCatalog:f().func,closeGlyph:f().string,buttonStyle:f().object,services:f().object,servicesWithBackgrounds:f().object,selectedService:f().string,style:f().object,dockProps:f().object,zoomToLayer:f().bool,isLocalizedLayerStylesEnabled:f().bool,width:f().number,dockStyle:f().object,group:f().string}),SA(CA,"defaultProps",{id:"mapstore-metadata-explorer",serviceTypes:[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"},{name:"tms",label:"TMS",allowedProviders:["OpenStreetMap","OpenSeaMap","Stamen"]},{name:"wfs",label:"WFS"}],active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"catalog-panel",closeCatalog:function(){},closeGlyph:"1-close",zoomToLayer:!0,width:660,dockProps:{dimMode:"none",fluid:!1,position:"right",zIndex:1030},dockStyle:{},group:null,services:{},servicesWithBackgrounds:{}});var xA=(0,d.connect)(PA,{clearModal:Ik.V3,onSearch:ye.tt,onLayerAdd:ye.A4,closeCatalog:ye.wl,onChangeFormat:ye.BG,onChangeServiceFormat:ye.i3,onChangeUrl:ye.X7,onChangeType:ye.XM,onChangeTitle:ye.r1,onChangeMetadataTemplate:ye.Wf,onChangeText:ye.XW,onChangeServiceProperty:ye.L8,onChangeSelectedService:ye.Dw,onChangeCatalogMode:ye.In,onAddService:ye.M3,onToggleAdvancedSettings:ye.Ts,onToggleThumbnail:ye.XS,onToggleTemplate:ye.IT,onDeleteService:ye.wo,onError:ye.vG,onAddBackgroundProperties:Ik.US,onFocusServicesList:ye.dL,onPropertiesChange:w.He,onAddBackground:Ik.pW,onToggle:O.Xi.bind(null,"backgroundSelector",null),onLayerChange:O.Xg.bind(null,"backgroundSelector"),onStartChange:O.Xg.bind(null,"backgroundSelector","start")})(CA);const TA={MetadataExplorerPlugin:se()(xA,{BurgerMenu:{name:"metadataexplorer",position:5,text:u().createElement(v.Z,{msgId:"catalog.title"}),icon:u().createElement(h.Glyphicon,{glyph:"folder-open"}),action:O.Xg.bind(null,"metadataexplorer","enabled",!0,!0),doNotHide:!0},BackgroundSelector:{name:"MetadataExplorer",doNotHide:!0},TOC:{name:"MetadataExplorer",doNotHide:!0}}),reducers:{catalog:r(53818).Z},epics:r(56175).Z(Ir)};var kA=r(58252);function IA(e){return(IA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function DA(e,t){return(DA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RA(e,t){return!t||"object"!==IA(t)&&"function"!=typeof t?NA(e):t}function NA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _A(e){return(_A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DA(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_A(n);if(o){var r=_A(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return RA(this,e)});function a(){var e;AA(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return LA(NA(e=i.call.apply(i,[this].concat(r))),"getPanels",(function(){return e.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,r){return{name:t.name+r,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[r]:{}}})))}),[])})),LA(NA(e),"getTools",(function(){return e.props.items.sort((function(e,t){return e.position-t.position}))})),e}return t=a,(r=[{key:"render",value:function(){return u().createElement(kA.Z,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return u().createElement(h.Grid,{fluid:!0},u().createElement(h.Row,null,e.children.map((function(e,t){return u().createElement(h.Col,{key:t,xs:12,xsOffset:0,sm:6,smOffset:3},e)}))))},toolStyle:"primary",activeStyle:"default",stateSelector:"omnibar",tool:function(e){return u().createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&FA(t.prototype,r),a}(u().Component);LA(MA,"propTypes",{className:f().string,style:f().object,items:f().array,id:f().string,mapType:f().string}),LA(MA,"defaultProps",{items:[],className:"grid-home-container",style:{},id:"mapstore-grid-home",mapType:"leaflet"});const ZA={GridContainerPlugin:MA,reducers:{}};function GA(e){return(GA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BA(Object(r),!0).forEach((function(t){$A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function UA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function VA(e,t){return(VA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qA(e,t){return!t||"object"!==GA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HA(e){return(HA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var YA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VA(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=HA(n);if(o){var r=HA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return qA(this,e)});function a(){return UA(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=!this.props.editingAllowedRoles||(0,fe.isArray)(this.props.editingAllowedRoles)&&(0,fe.isString)(this.props.userRole)&&-1!==this.props.editingAllowedRoles.indexOf(this.props.userRole);this.props.onInit(this.props.styleService,e&&(0,ys.uW)(this.props.layer,this.props.styleService))}},{key:"render",value:function(){return u().createElement(Go.Z,{className:"ms-style-editor-container",header:this.props.showToolbar?u().createElement("div",{className:"ms-style-editor-container-header"},this.props.header,u().createElement("div",{className:"text-center"},u().createElement(xm,{enableSetDefaultStyle:this.props.enableSetDefaultStyle}))):null,footer:u().createElement("div",{style:{height:25}})},this.props.isEditing?u().createElement(wm,{config:this.props.editorConfig}):u().createElement(km,{showDefaultStyleIcon:this.props.canEdit&&this.props.enableSetDefaultStyle}))}}])&&WA(t.prototype,r),a}(u().Component);$A(YA,"propTypes",{layer:f().object,header:f().node,isEditing:f().bool,showToolbar:f().node.bool,onInit:f().func,styleService:f().object,userRole:f().string,editingAllowedRoles:f().array,enableSetDefaultStyle:f().bool,canEdit:f().bool,editorConfig:f().object}),$A(YA,"defaultProps",{layer:{},onInit:function(){},editingAllowedRoles:["ADMIN"],editorConfig:{}});var KA=(0,_.compose)(_.toClass,(0,_.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.active;return!t}),(function(){return function(){return null}})),(0,d.connect)((0,N.P1)([ds.ex,ds.aN,ds.Vf,ds.p,ne.L3,ds.z_,ds.Z0],(function(e,t,r,n,o,i,a){return{isEditing:"edit"===e,loading:t,layer:r,error:n,userRole:o,canEdit:i,styleService:a}})),{onInit:$i.E0,onUpdateParams:w.Xy},(function(e,t,r){var n,o,i,a=(null===(n=r.styleService)||void 0===n?void 0:n.baseUrl)===(null===(o=e.styleService)||void 0===o?void 0:o.baseUrl)&&(null===(i=e.styleService)||void 0===i?void 0:i.isStatic),l=r.styleService&&!a?zA(zA({},r.styleService),{},{isStatic:!0}):zA({},e.styleService);return zA(zA(zA(zA({},r),e),t),{},{styleService:l})})),(0,Dl.Z)((function(e){var t=e.error;return!!(null!=t&&t.availableStyles||null!=t&&t.global||null!=t&&t.parsingCapabilities)}),(function(e){var t=e.error;return{glyph:"exclamation-mark",title:u().createElement(ns.Z,{msgId:"styleeditor.errorTitle"}),description:u().createElement(ns.Z,{msgId:((null==t?void 0:t.availableStyles)?"styleeditor.missingAvailableStylesMessage":(null==t?void 0:t.parsingCapabilities)&&"styleeditor.parsingCapabilitiesError")||(null==t?void 0:t.global)&&"styleeditor.globalError"}),style:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},mainViewStyle:{margin:"auto",width:300}}})),(0,Fl.Z)((function(e){return"global"===e.loading}),{size:150,style:{margin:"auto"}},(function(e){return u().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},u().createElement(Vc.Z,e))})),(0,_.compose)((0,d.connect)((function(){return{}}),{toggleStyleEditor:$i.Wv}),(0,_.lifecycle)({componentDidMount:function(){this.props.toggleStyleEditor(null,!0)}})))(YA);const XA={StyleEditorPlugin:se()(KA,{TOC:{priority:1,container:"TOCItemSettings"},TOCItemsSettings:{name:"StyleEditor",target:"style",priority:1,ToolbarComponent:xm}}),reducers:{styleeditor:r(32244).Z},epics:r(94943).ZP};var QA=r(40439),JA=r(11878),eF="CHANGE_MOUSE_POSITION",tF="CHANGE_MOUSE_POSITION_CRS",rF="CHANGE_MOUSE_POSITION_STATE",nF=r(75140),oF=r(42454);function iF(e){return(iF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aF(){return(aF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function lF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sF(e,t){return(sF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uF(e,t){return!t||"object"!==iF(t)&&"function"!=typeof t?pF(e):t}function pF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fF(e){return(fF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dF(Object(r),!0).forEach((function(t){mF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bF=function(e,t,r){return t.showCenter&&e?e.center:t.showOnClick?r.clickPoint&&r.clickPoint.latlng?{x:r.clickPoint.latlng.lng,y:r.clickPoint.latlng.lat,crs:"EPSG:4326"}:{crs:"EPSG:4326"}:t},gF=(0,N.P1)([function(e){return e},J.Od,function(e){return(0,J.zT)(e)},function(e){return(0,fe.get)(e,"mousePosition.position")||{}},function(e){return(0,fe.get)(e,"mousePosition.crs","EPSG:4326")},function(e){return e.mapInfo||{}}],(function(e,t,r,n,o,i){return{enabled:r,mousePosition:bF(t,n,i),projectionDefs:(0,J.pb)(e),crs:o}})),vF=(0,d.connect)((function(e){return{pressed:(0,J.zT)(e),active:(0,J.zT)(e),tooltip:u().createElement(h.Tooltip,{id:"showMousePositionCoordinates"},u().createElement(v.Z,{msgId:"showMousePositionCoordinates"})),tooltipPlace:"left",pressedStyle:"success active",defaultStyle:"primary",glyphicon:"mouse",btnConfig:{bsSize:"small"}}}),{registerEventListener:H.H0,unRegisterEventListener:H.$X},(function(e,t){return yF(yF({},e),{},{onClick:function(){return e.active?t.unRegisterEventListener("mousemove","mouseposition"):t.registerEventListener("mousemove","mouseposition")}})}))(nF.Z),hF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sF(e,t)}(l,e);var t,n,o,i,a=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fF(o);if(i){var r=fF(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return uF(this,e)});function l(){var e;lF(this,l);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return mF(pF(e=a.call.apply(a,[this].concat(n))),"getTemplate",(function(e){return r(5615)("./"+e).default})),e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.degreesTemplate,r=e.projectedTemplate,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["degreesTemplate","projectedTemplate"]);return u().createElement(oF.default,aF({degreesTemplate:this.getTemplate(t),projectedTemplate:this.getTemplate(r),toggle:u().createElement(vF,null)},n))}}])&&cF(t.prototype,n),l}(u().Component);mF(hF,"propTypes",{degreesTemplate:f().string,projectedTemplate:f().string}),mF(hF,"defaultProps",{degreesTemplate:"MousePositionLabelDMS",projectedTemplate:"MousePositionLabelYX"});var OF=(0,d.connect)(gF,{onCRSChange:function(e){return{type:tF,crs:e}}})(hF);const wF={MousePositionPlugin:se()(OF,{MapFooter:{name:"mousePosition",position:2,tool:!0,priority:1}}),reducers:{mousePosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!0,position:null,crs:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rF:return se()({},e,{enabled:t.enabled});case eF:return se()({},e,{position:t.position});case tF:return se()({},e,{crs:t.crs});case H.Jb:return se()({},e,{position:t.position,mouseOut:!1});case H.Uh:return se()({},e,{mouseOut:!0});default:return e}}}};var EF=r(1852),SF=r.n(EF),PF=r(97222);function jF(e,t){return{type:"SET_SEARCH_BOOKMARK_CONFIG",property:e,value:t}}function CF(){return(CF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var xF=(0,Kr.Z)(h.DropdownButton),TF={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:No()()},kF={title:u().createElement(h.Glyphicon,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0};const IF=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuItems,r=void 0===t?[]:t,n=e.disabled,o=void 0!==n&&n;return u().createElement(xF,CF({disabled:o},TF,kF),r.length?r.map((function(e){return e})):null)},AF=function(e){var t=e.className,r=e.style,n=e.children;return u().createElement("div",{id:"map-search-bar",style:r,className:"MapSearchBar"+(t?" "+t:"")},n)};function FF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return DF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DF(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var RF=function(e,t){var r=e.show,n=e.autoFocusOnSelect,o=void 0===n||n,i=e.selectedItems,a=void 0===i?[]:i,l=e.className,c=e.style,s=void 0===c?{textOverflow:"ellipsis"}:c,p=e.placeholder,f=e.placeholderMsgId,d=e.hideOnBlur,y=void 0===d||d,m=e.searchText,b=void 0===m?"":m,g=e.typeAhead,v=void 0===g||g,O=e.delay,w=void 0===O?1e3:O,E=e.blurResetDelay,S=void 0===E?300:E,P=e.onSearch,j=void 0===P?function(){}:P,C=e.onSearchTextChange,x=void 0===C?function(){}:C,T=e.onCancelSelectedItem,k=void 0===T?function(){}:T,I=e.onPurgeResults,A=void 0===I?function(){}:I,F=u().useRef(),D=u().useRef(),R=FF(u().useState(),2),N=R[0],_=R[1],L=FF(u().useState(),2),M=L[0],Z=L[1],G=FF(u().useState(!1),2),B=G[0],z=G[1];u().useEffect((function(){var e=D.current;if(o&&a&&(e<a.length||!e&&1===a.length)){var t=F.current;t&&t.focus instanceof Function&&setTimeout((function(){return t.focus()}),200)}D.current=a&&a.length})),u().useEffect((function(){B&&(j(),z(!1))}),[B,j]);var U="search.addressSearch";if(!p&&t.messages){var W=(0,le.S$)(t.messages,f||U);W&&(U=W)}else U=p;return r&&u().createElement(h.FormControl,{className:"searchInput".concat(l?" ".concat(l):""),key:"search-input",placeholder:U,type:"text",inputRef:function(e){F.current=e},style:s,value:b,onKeyDown:function(e){switch(e.keyCode){case 13:j();break;case 8:!b&&a&&a.length>0&&k(a[a.length-1])}},onBlur:function(){y&&(N&&clearTimeout(N),_(setTimeout((function(){A()}),S)))},onFocus:function(){v&&b&&j()},onChange:function(e){var t=e.target.value;x(t),v&&(M&&clearTimeout(M),Z(setTimeout((function(){z(!0)}),w)))}})};RF.contextTypes={messages:f().object};const NF=RF;function _F(){return(_F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function LF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LF(Object(r),!0).forEach((function(t){ZF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ZF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const GF=function(e){var t=e.loading,r=(e.splitTools,e.toolbarProps),n=void 0===r?{}:r,o=e.toolbarButtons,i=void 0===o?[]:o,a=e.children;return u().createElement("span",{className:"search-toolbar-options"},t&&u().createElement(sC(),{style:se()({},{position:"absolute"},MF({},{right:"69px",zIndex:1,top:"13px"})),spinnerName:"pulse",noFadeIn:!0}),u().createElement(Bo.Z,_F({btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"}},n,{buttons:i})),a)};function BF(){return(BF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function zF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return UF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?UF(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function VF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?WF(Object(r),!0).forEach((function(t){qF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var HF=(0,Hc.Z)(["placeholder","clearValueText","noResultsText"])(zo.ZP),$F={searchByBookmark:function(e,t,r,n,o){var i,a,l=e.options,c=void 0===l?{}:l,s=e.layerVisibilityReload;void 0!==s&&s?t(VF(VF({},r),{},{map:VF(VF({},r.map),{},{bookmark_search_config:n})}),null,{bounds:[c.west,c.south,c.east,c.north],crs:(null==r||null===(i=r.map)||void 0===i||null===(a=i.center)||void 0===a?void 0:a.crs)||"EPSG:4326"}):c&&!(0,fe.isEmpty)(c)&&o([c.west,c.south,c.east,c.north],"EPSG:4326")},searchIcon:function(e,t){var r=t.onLayerVisibilityLoad,n=t.mapInitial,o=t.bookmarkConfig,i=t.onZoomToExtent;return{tooltipId:"bookmarkSearch"===e?"search.zoomToBookmark":"",tooltipPosition:"bottom",visible:"bookmarkSearch"===e&&!(null!=o&&o.zoomOnSelect),disabled:"bookmarkSearch"===e&&!o.selected,onClick:function(){"bookmarkSearch"===e&&$F.searchByBookmark(o.selected,r,n,o.bookmarkSearchConfig||{},i)}}}},YF=function(e){var t=e.bookmarkConfig,r=e.onPropertyChange,n=e.onLayerVisibilityLoad,o=e.mapInitial,i=e.onZoomToExtent,a=zF((0,s.useState)([]),2),l=a[0],c=a[1],p=t||{},f=p.selected,d=void 0===f?{}:f,y=p.bookmarkSearchConfig,m=void 0===y?{}:y,b=p.zoomOnSelect,g=void 0===b||b,v=m.bookmarks,h=void 0===v?[]:v,O=$F.searchByBookmark;return(0,s.useEffect)((function(){(0,fe.isEmpty)(h)||c(h.map((function(e){return e.title})))}),[h]),u().createElement("div",{className:"search-select"},u().createElement("div",{style:{flex:"1 1 0%",padding:"0px 4px"}},u().createElement(HF,BF({},{clearable:!0,isSearchable:!0,isClearable:!0},{onChange:function(e){var t=e&&e.value||"",a=zF(h.filter((function(r,n){return r.title===t&&n===e.idx})),1)[0];r("selected",a),g&&O(a,n,o,m,i)},value:(null==d?void 0:d.title)||"",options:l.map((function(e,t){return{label:e,value:e,idx:t}})),placeholder:"search.b_placeholder",clearValueText:"search.b_clearvalue",noResultsText:"search.b_noresult"}))))};YF.propTypes={bookmarkConfig:f().object.isRequired,onPropertyChange:f().func.isRequired};const KF=(0,d.connect)((function(e){return{bookmarkConfig:e.searchbookmarkconfig||{}}}),{onPropertyChange:jF,onZoomToExtent:H.Px,onLayerVisibilityLoad:eP.H0})(YF);var XF=r(99509),QF=r(77900),JF={clearCoordinates:function(e,t){e({owner:"search"}),t("lat",""),t("lon","")},areValidCoordinates:function(e){return(0,fe.isNumber)(null==e?void 0:e.lon)&&(0,fe.isNumber)(null==e?void 0:e.lat)},zoomToPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;e({x:parseFloat(t.lon),y:parseFloat(t.lat)},r,"EPSG:4326")},coordinateFormatChange:function(e,t,r,n){return{buttonConfig:{title:u().createElement(h.Glyphicon,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===e,onClick:function(){return t("decimal")},text:u().createElement(v.Z,{msgId:"search.decimal"})},{active:"aeronautical"===e,onClick:function(){return t("aeronautical")},text:u().createElement(v.Z,{msgId:"search.aeronautical"})}],visible:r&&"coordinatesSearch"===n,Element:QF.Z}},removeIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e&&((0,fe.isNumber)(t.lon)||(0,fe.isNumber)(t.lat)),onClick:function(){return JF.clearCoordinates(r,n)}}},searchIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e,onClick:function(){"coordinatesSearch"===e&&JF.areValidCoordinates(t)&&JF.zoomToPoint(r,t,n)}}},coordinatesMenuItem:function(e){var t=e.activeTool,r=e.searchText,n=e.clearSearch,o=e.onChangeActiveSearchTool,i=e.onClearBookmarkSearch;return u().createElement(h.MenuItem,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},u().createElement(h.Glyphicon,{glyph:"search-coords"})," ",u().createElement(v.Z,{msgId:"search.coordinatesSearch"}))}},eD=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,o=e.onClearCoordinatesSearch,i=e.onZoomToPoint,a=e.onChangeCoord,l=e.defaultZoomLevel,c=e.aeronauticalOptions,s=void 0===c?{seconds:{decimals:4,step:1e-4}}:c,p=e.constraintsCoordEditor,f=void 0===p?{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}:p,d=JF.zoomToPoint,y=JF.areValidCoordinates,m=function(e,t){var r=isNaN(parseFloat(t))?"":parseFloat(t);a(e,r),y()||o({owner:"search"})},b=function(){d(i,r,l)};return u().createElement("div",{className:"coordinateEditor",style:{flexWrap:"decimal"===n?"nowrap":"wrap"}},u().createElement(h.Row,{className:"entryRow ".concat(n)},u().createElement(h.FormGroup,null,u().createElement(h.InputGroup,null,u().createElement(h.InputGroup.Addon,{style:{minWidth:45}},u().createElement(v.Z,{msgId:"search.latitude"})),u().createElement(XF.Z,{format:n,aeronauticalOptions:s,coordinate:"lat",idx:1,value:r.lat,constraints:f,onChange:function(e){return m("lat",e)},onKeyDown:function(){y(r)&&b()}})))),u().createElement(h.Row,{className:"entryRow ".concat(n)},u().createElement(h.FormGroup,null,u().createElement(h.InputGroup,null,u().createElement(h.InputGroup.Addon,{style:{minWidth:45}},u().createElement(v.Z,{msgId:"search.longitude"})),u().createElement(XF.Z,{format:n,aeronauticalOptions:s,coordinate:"lon",idx:2,value:r.lon,constraints:f,onChange:function(e){return m("lon",e)},onKeyDown:function(){y(r)&&b()}})))))};eD.propTypes={coordinate:f().object,format:f().string,onClearCoordinatesSearch:f().func,onZoomToPoint:f().func,onChangeCoord:f().func,defaultZoomLevel:f().number};const tD=(0,d.connect)((function(e){return{coordinate:e.search.coordinate||{}}}),{onZoomToPoint:PF.Z,onChangeCoord:PF.TS})(eD);function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rD(Object(r),!0).forEach((function(t){oD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aD(e){return(aD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sD(e,t){return(sD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uD(e,t){return!t||"object"!==aD(t)&&"function"!=typeof t?pD(e):t}function pD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fD(e){return(fD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sD(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fD(n);if(o){var r=fD(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return uD(this,e)});function a(){var e;lD(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return dD(pD(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){var t=e.props.item;e.props.onItemClick(t)})),e}return t=a,(r=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return u().createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},u().createElement("div",{className:"search-result-left-container"},u().createElement("div",{className:"icon"}," ",u().createElement("img",{src:e.icon})),u().createElement("div",{className:"text-result-title"},(0,fe.get)(e,this.props.displayName)||(0,Ax.generateTemplateString)(this.props.displayName||"")(e)),u().createElement("small",{className:"text-info"},this.props.subTitle&&(0,fe.get)(e,this.props.subTitle)||(0,Ax.generateTemplateString)(this.props.subTitle||"")(e))),u().createElement("div",{className:"search-result-right-container"},u().createElement("div",{className:"search-result-tools"},u().createElement(Bo.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:this.props.tools}))))}}])&&cD(t.prototype,r),a}(u().Component);dD(yD,"propTypes",{subTitle:f().string,item:f().object,displayName:f().string,idField:f().string,icon:f().string,onItemClick:f().func,tools:f().array}),dD(yD,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon",tools:[]});const mD=yD;var bD=r(18412);function gD(e){return(gD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function OD(e,t){return(OD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wD(e,t){return!t||"object"!==gD(t)&&"function"!=typeof t?ED(e):t}function ED(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SD(e){return(SD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OD(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=SD(n);if(o){var r=SD(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return wD(this,e)});function a(){var e;vD(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return PD(ED(e=i.call.apply(i,[this].concat(r))),"onItemClick",(function(t){e.props.onItemClick(t,e.props.mapConfig)})),PD(ED(e),"renderResults",(function(){return e.props.results.map((function(t,r){var n,o=e.findService(t)||{},i=(0,fe.find)(e.props.layers,{name:null===(n=o.options)||void 0===n?void 0:n.typeName}),a=(0,bD.zA)(o),l=!(0,bD.Tv)(i,o);return u().createElement(mD,{subTitle:o.subTitle,idField:o.idField,displayName:o.displayName,key:t.osm_id||t.id||"res_"+r,item:t,onItemClick:e.onItemClick,tools:[{id:"open-gfi",keyProp:"open-gfi",visible:a,disabled:l,glyph:"info-sign",tooltipId:a&&l?"search.layerMustBeVisible":"search.showGFI",onClick:function(r){r.stopPropagation(),e.props.showGFI(t)}}]})}))})),PD(ED(e),"findService",(function(t){var r=e.props.searchOptions&&e.props.searchOptions.services;if(null!==t.__SERVICE__)if(r&&"string"==typeof t.__SERVICE__){for(var n=0;n<r.length;n++)if(r[n]&&r[n].id===t.__SERVICE__)return r[n];for(var o=0;o<r.length;o++)if(r[o]&&r[o].type===t.__SERVICE__)return r[o]}else if("object"===gD(t.__SERVICE__))return t.__SERVICE__;return null})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=u().createElement(cd.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,r=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&r){var n=r.width-this.props.sizeAdjustment.width,o=r.height-this.props.sizeAdjustment.height;t=se()({},this.props.containerStyle,{maxWidth:n,maxHeight:o})}return this.props.results?0===this.props.results.length?u().createElement("div",{className:"search-result-list",style:se()({padding:"10px",textAlign:"center"},t)},e):u().createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&hD(t.prototype,r),a}(u().Component);PD(jD,"propTypes",{results:f().array,layers:f().array,searchOptions:f().object,mapConfig:f().object,fitToMapSize:f().bool,containerStyle:f().object,sizeAdjustment:f().object,onItemClick:f().func,addMarker:f().func,afterItemClick:f().func,showGFI:f().func,notFoundMessage:f().oneOfType([f().object,f().string])}),PD(jD,"defaultProps",{layers:[],sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){},showGFI:function(){}});var CD=r(94707),xD=r.n(CD),TD=r(35385),kD=r.n(TD),ID=r(15047);function AD(e){return function(e){if(Array.isArray(e))return FD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return FD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FD(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DD(Object(r),!0).forEach((function(t){ND(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ND(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _D=r(26125);function LD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LD(Object(r),!0).forEach((function(t){ZD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ZD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GD(e){return function(e){if(Array.isArray(e))return BD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return BD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?BD(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zD(e){return(zD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function VD(e,t){return(VD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qD(e,t){return!t||"object"!==zD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HD(e){return(HD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var YD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VD(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=HD(n);if(o){var r=HD(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return qD(this,e)});function a(){return UD(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return u().createElement(qe.Z,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button search-toggle"},u().createElement(h.Glyphicon,{glyph:"search"}))}}])&&WD(t.prototype,r),a}(u().Component);$D(YD,"propTypes",{pressed:f().bool,onToggle:f().func}),$D(YD,"defaultProps",{pressed:!1,onToggle:function(){}});const KD=(0,d.connect)((function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}}),{onToggle:O.Xi.bind(null,"search",null)})(YD);function XD(e){return(XD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var QD,JD;function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(r),!0).forEach((function(t){sR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rR(){return(rR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function nR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iR(e,t){return(iR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aR(e,t){return!t||"object"!==XD(t)&&"function"!=typeof t?lR(e):t}function lR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cR(e){return(cR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uR=(0,N.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchservicesconfig||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""}],(function(e,t,r,n,o){return{enabledSearchServicesConfig:t&&t.enabled||!1,enabledSearchBookmarkConfig:r&&r.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:(0,fe.get)(e,"activeSearchTool","addressSearch"),format:(0,fe.get)(e,"format")||Dt.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:n,bookmarkConfig:o||{}}})),pR=(0,d.connect)(uR,{onSearch:PF.tt,onChangeCoord:PF.TS,onChangeActiveSearchTool:PF.a,onClearCoordinatesSearch:Uc.fU,onClearBookmarkSearch:jF,onChangeFormat:PF.Zw,onToggleControl:O.Xi,onZoomToPoint:PF.Z,onPurgeResults:PF.kV,onSearchReset:PF.v2,onSearchTextChange:PF.k9,onCancelSelectedItem:PF.KG,onZoomToExtent:H.Px,onLayerVisibilityLoad:eP.H0})((function(e){var t,r,n,o,i=e.activeSearchTool,a=void 0===i?"addressSearch":i,l=e.removeIcon,c=void 0===l?"1-close":l,s=e.searchIcon,p=void 0===s?"search":s,f=e.isSearchClickable,d=void 0===f||f,y=e.splitTools,m=e.searchText,b=void 0===m?"":m,g=e.maxResults,O=void 0===g?15:g,w=e.searchOptions,E=e.loading,S=e.delay,P=e.blurResetDelay,j=e.typeAhead,C=e.coordinate,x=void 0===C?{}:C,T=e.selectedItems,k=void 0===T?[]:T,I=e.defaultZoomLevel,A=void 0===I?12:I,F=e.enabledSearchServicesConfig,D=void 0!==F&&F,R=e.enabledSearchBookmarkConfig,N=void 0!==R&&R,_=e.error,L=e.format,M=void 0===L?"decimal":L,Z=e.placeholder,G=e.placeholderMsgId,B=void 0===G?"search.addressSearch":G,z=e.showOptions,U=void 0===z||z,W=e.showAddressSearchOption,V=void 0===W||W,q=e.showCoordinatesSearchOption,H=void 0===q||q,$=e.showBookMarkSearchOption,Y=void 0===$||$,K=e.onSearch,X=e.onSearchReset,Q=e.onSearchTextChange,J=e.onCancelSelectedItem,ee=e.onChangeCoord,te=void 0===ee?function(){}:ee,re=e.onChangeActiveSearchTool,ne=void 0===re?function(){}:re,oe=e.onClearCoordinatesSearch,ie=void 0===oe?function(){}:oe,ae=e.onChangeFormat,le=void 0===ae?function(){}:ae,ce=e.onToggleControl,se=void 0===ce?function(){}:ce,ue=e.onZoomToPoint,pe=void 0===ue?function(){}:ue,de=e.onClearBookmarkSearch,ye=void 0===de?function(){}:de,me=e.onPurgeResults,be=e.items,ge=void 0===be?[]:be,ve=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["activeSearchTool","removeIcon","searchIcon","isSearchClickable","splitTools","searchText","maxResults","searchOptions","loading","delay","blurResetDelay","typeAhead","coordinate","selectedItems","defaultZoomLevel","enabledSearchServicesConfig","enabledSearchBookmarkConfig","error","format","placeholder","placeholderMsgId","showOptions","showAddressSearchOption","showCoordinatesSearchOption","showBookMarkSearchOption","onSearch","onSearchReset","onSearchTextChange","onCancelSelectedItem","onChangeCoord","onChangeActiveSearchTool","onClearCoordinatesSearch","onChangeFormat","onToggleControl","onZoomToPoint","onClearBookmarkSearch","onPurgeResults","items"]),he=function(e){var t=e.searchText,r=e.selectedItems,n=e.searchOptions,o=e.maxResults,i=e.onSearch,a=void 0===i?function(){}:i,l=e.onSearchReset,c=void 0===l?function(){}:l;return function(){var e=t,i=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,r){var n;return t+((null==r||null===(n=r.options)||void 0===n?void 0:n.maxFeatures)||e)}),0)||e}(null==n?void 0:n.services,o);void 0!==e&&""!==e||r&&0!==r.length?void 0!==e&&""!==e&&a(e,n,i):c()}}({searchText:b,selectedItems:k,searchOptions:w,maxResults:O,onSearch:K,onSearchReset:X}),Oe=function(){X()},we=[];if(V&&we.push(u().createElement(h.MenuItem,{active:"addressSearch"===a,onClick:function(){ie({owner:"search"}),ye("selected"),ne("addressSearch")}},u().createElement(h.Glyphicon,{glyph:p})," ",u().createElement(v.Z,{msgId:"search.addressSearch"}))),H&&we.push(u().createElement(JF.coordinatesMenuItem,{activeTool:a,searchText:b,clearSearch:Oe,onChangeActiveSearchTool:ne,onClearBookmarkSearch:ye})),Y&&!(0,fe.isEmpty)(ge)){var Ee,Se=ve.bookmarkConfig||{},Pe=Se.allowUser,je=Se.bookmarkSearchConfig,Ce=(r=ge,n=1,function(e){if(Array.isArray(e))return e}(r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(r,n)||function(e,t){if(e){if("string"==typeof e)return iD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?iD(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];if((0,fe.some)(ge,"menuItem")){var xe=Ce.menuItem;we.push(u().createElement(xe,null))}(0,fe.some)(ge,"bookmarkConfig")&&(t=nD(nD({},Ce.bookmarkConfig(se,N,a)),!Pe&&{visible:!1})),Pe||0!==(null==je||null===(Ee=je.bookmarks)||void 0===Ee?void 0:Ee.length)||"bookmarkSearch"!==a||ne("addressSearch")}return u().createElement(AF,null,u().createElement(h.FormGroup,null,u().createElement("div",{className:"input-group",style:{display:"flex"}},k&&k.map((function(e,t){return u().createElement("span",{key:"selected-item"+t,className:"input-group-addon"},u().createElement("div",{className:"selectedItem-text"},e.text))})),u().createElement(NF,{show:"addressSearch"===a,delay:S,typeAhead:j,blurResetDelay:P,placeholder:Z,placeholderMsgId:B,searchText:b,selectedItems:k,onSearch:he,onSearchTextChange:Q,onCancelSelectedItem:J,onPurgeResults:me}),"coordinatesSearch"===a&&H&&u().createElement(tD,{format:M,defaultZoomLevel:A,onClearCoordinatesSearch:ie}),"bookmarkSearch"===a&&Y&&u().createElement(KF,{mapInitial:ve.mapInitial}),u().createElement(GF,{splitTools:!1,toolbarButtons:[nD({},function(){if("addressSearch"===a)return{onClick:function(){D||se("searchservicesconfig")},glyph:"cog",className:"square-button-md no-border ",tooltip:u().createElement(v.Z,{msgId:"search.searchservicesbutton"}),tooltipPosition:"bottom",bsStyle:"default",pullRight:!0,visible:U&&"addressSearch"===a};if(U){if("coordinatesSearch"===a)return JF.coordinateFormatChange(M,le,U,a);if("bookmarkSearch"===a)return t}return{}}()),nD({glyph:c,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,loading:!(0,fe.isUndefined)(E)&&E,visible:"addressSearch"===a&&(""!==b||k&&k.length>0),onClick:function(){"addressSearch"===a&&Oe()}},"coordinatesSearch"===a&&JF.removeIcon(a,x,ie,te)),nD(nD({glyph:p,className:"square-button-md no-border "+(d||"addressSearch"!==a?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,tooltipPosition:"bottom",visible:!("addressSearch"!==a||(""!==b||k&&k.length>0)&&y),onClick:function(){return d&&he()}},"coordinatesSearch"===a&&JF.searchIcon(a,x,pe,A)),"bookmarkSearch"===a&&$F.searchIcon(a,ve)),{tooltip:(o=_,o?u().createElement(v.Z,{msgId:o.msgId||"search.generic_error",msgParams:{message:o.message,serviceType:o.serviceType}}):null),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!_,onClick:Oe},{visible:U,renderButton:u().createElement(IF,{disabled:U,menuItems:we})}]}))))})),fR=(0,N.P1)([J.Od,Y.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),dR=(0,d.connect)(fR,{onItemClick:PF.Jc,addMarker:PF._q,showGFI:PF.w4})(jD),yR=(0,d.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:PF.o$})((JD=QD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iR(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cR(n);if(o){var r=cR(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return aR(this,e)});function a(){var e;nR(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return sR(lR(e=i.call.apply(i,[this].concat(r))),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&(0,fe.get)(e.props.selectedItems[e.props.selectedItems.length-1],t)})),sR(lR(e),"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,n=t.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?se()({},r,{services:n.services}):se()({},r,{services:r.services.concat(n.services)}):r})),sR(lR(e),"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?se()({},r,{services:t}):r})),sR(lR(e),"getSearchAndToggleButton",(function(){var t=u().createElement(pR,rR({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return!0===e.props.withToggle?[u().createElement(KD,null)].concat(e.props.enabled?[t]:null):(0,fe.isArray)(e.props.withToggle)?u().createElement("span",null,u().createElement(SF(),{query:"("+e.props.withToggle[0]+")"},u().createElement(KD,null),e.props.enabled?t:null),u().createElement(SF(),{query:"("+e.props.withToggle[1]+")"},t)):t})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(tR(tR({},bD.be),this.props.resultsStyle))}},{key:"render",value:function(){return u().createElement("span",null,this.getSearchAndToggleButton(),u().createElement(dR,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&oR(t.prototype,r),a}(u().Component),sR(QD,"propTypes",{splitTools:f().bool,showOptions:f().bool,isSearchClickable:f().bool,fitResultsToMapSize:f().bool,searchOptions:f().object,resultsStyle:f().object,selectedItems:f().array,selectedServices:f().array,userServices:f().array,withToggle:f().oneOfType([f().bool,f().array]),enabled:f().bool,textSearchConfig:f().object}),sR(QD,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0}),JD));const mR={SearchPlugin:se()(yR,{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:function(e){return e.ofType(PF.bj).debounceTime(250).switchMap((function(t){return Yt.Observable.from((t.services||[{type:"nominatim",priority:5}]).map((function(e){var r=ID.b.Utils.getService(e.type);if(!r){var n=new Error("Service Missing");return n.msgId="search.service_missing",n.serviceType=e.type,Yt.Observable.of(n).do((function(e){throw e}))}return Yt.Observable.defer((function(){return r(t.searchText,e.options).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return RD(RD({},t),{},{__SERVICE__:e,__PRIORITY__:e.priority||0})}))}))})).retryWhen((function(e){return e.delay(200).scan((function(e,t){if(e>=2)throw t;return e+1}),0)}))}))).mergeAll().scan((function(e,t){return(0,fe.sortBy)([].concat(AD(e),AD(t)),["__PRIORITY__"])})).map((function(e){return(0,PF.WN)(e.slice(0,t.maxResults||15),!1)})).startWith((0,PF.yo)(!0)).takeUntil(e.ofType(PF.Av,PF.M8,PF.dX)).concat([(0,PF.yo)(!1)]).catch((function(e){var t=RD(RD({msgId:"search.generic_error"},e),{},{message:e.message,stack:e.stack});return Yt.Observable.from([(0,PF.kE)(t),(0,PF.yo)(!1)])}))}))},searchOnStartEpic:function(e,t){return e.ofType(PF.Vc).switchMap((function(e){var r=e.layer,n=e.cql_filter,o=t.getState();if(0===(0,Y.OX)(o).filter((function(e){return e.name===r})).length)return Yt.Observable.of((0,PF.Tw)());var i=(0,Y.dT)(o,r);return i&&n?Yt.Observable.defer((function(){return(0,mr.getFeatureSimple)(i.url,{maxFeatures:1,typeName:r,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:n}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&RD(RD({},e.features[0]),{},{typeName:r})}))})).switchMap((function(e){var t=e.type,r=e.geometry,o=e.typeName,i=kD()({type:t,geometry:r}).geometry.coordinates,a={lng:i[0],lat:i[1]};return i?Yt.Observable.of((0,DP.lK)({latlng:a},o,[o],ND({},o,{cql_filter:n})),(0,DP.HP)()):Yt.Observable.empty()})).catch((function(){return Yt.Observable.of((0,PF.I3)())})):Yt.Observable.empty()}))},searchItemSelected:function(e,t){return e.ofType(PF.dX).switchMap((function(e){var r=Yt.Observable.of(e.item).concatMap((function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var r=(0,Ax.generateTemplateString)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return Yt.Observable.fromPromise(ID.b.Utils.getService(t.__SERVICE__.geomService.type)("",se()({},t.__SERVICE__.geomService.options,{staticFilter:r})).then((function(e){return se()({},t,{geometry:Ko.default.mergeToPolyGeom(e)})})))}return Yt.Observable.of(e.item)})).concatMap((function(e){var r=e.bbox||e.properties.bbox||xD()(e),n=[(0,H.Px)([r[0],r[1],r[2],r[3]],"EPSG:4326",e.__SERVICE__&&e.__SERVICE__.options&&e.__SERVICE__.options.maxZoomLevel||21),(0,PF._q)(e)];if(e.__SERVICE__&&!(0,fe.isNil)(e.__SERVICE__.launchInfoPanel)&&e.__SERVICE__.options&&e.__SERVICE__.options.typeName){var o=kD()(e).geometry.coordinates,i={lng:o[0],lat:o[1]},a=e.__SERVICE__.options.typeName;if(o){var l=a&&(0,Y.dT)(t.getState(),a),c=null,s=[],u={},p=!1;return"single_layer"===e.__SERVICE__.launchInfoPanel&&(p=e.__SERVICE__.forceSearchLayerVisibility,s=[a],c=e.id,u=ND({},e.__SERVICE__.options.typeName,{info_format:"application/json"})),[].concat(AD(p&&l?[(0,w.He)(l.id,{visibility:!0})]:[]),AD(e.__SERVICE__.openFeatureInfoButtonEnabled?[]:[(0,DP.lK)({latlng:i},a,s,u,c)]),[(0,DP.HP)()],n)}}return n})),n=e.item,o=n&&n.__SERVICE__&&n.__SERVICE__.then,i=o?Yt.Observable.of((0,PF.QJ)(o.map((function(e){return RD(RD({},e),{},{options:RD({item:n},e.options)})})),{text:(0,Ax.generateTemplateString)(n.__SERVICE__.displayName||"")(n),placeholder:n.__SERVICE__.nestedPlaceholder&&(0,Ax.generateTemplateString)(n.__SERVICE__.nestedPlaceholder||"")(n),placeholderMsgId:n.__SERVICE__.nestedPlaceholderMsgId&&(0,Ax.generateTemplateString)(n.__SERVICE__.nestedPlaceholderMsgId||"")(n)},(0,Ax.generateTemplateString)(n.__SERVICE__.searchTextTemplate||"")(n))):Yt.Observable.empty(),a=n.__SERVICE__&&n.__SERVICE__.searchTextTemplate,l=a?Yt.Observable.of((0,PF.k9)((0,Ax.generateTemplateString)(a)(n))):Yt.Observable.empty();return Yt.Observable.of((0,PF.kV)()).concat(r,i,l)}))},zoomAndAddPointEpic:function(e,t){return e.ofType(PF.b4).switchMap((function(e){var r={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},n=t.getState();return Yt.Observable.from([(0,Uc.W)("search","search","overlay",{features:[r],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:n.search&&n.search.style||bD.be}),(0,H.xy)(e.pos,e.zoom,e.crs)])}))},textSearchShowGFIEpic:function(e,t){return e.ofType(PF.al).switchMap((function(e){var r,n,o,i,a,l,c=e.item,s=t.getState(),u=null==c||null===(r=c.__SERVICE__)||void 0===r||null===(n=r.options)||void 0===n?void 0:n.typeName,p=u&&(0,Y.dT)(s,u),f=c.bbox||c.properties.bbox||xD()(c),d=kD()(c).geometry.coordinates,y={lng:d[0],lat:d[1]};return d&&(0,bD.zA)(null==c?void 0:c.__SERVICE__)&&(0,bD.Tv)(p,null==c?void 0:c.__SERVICE__)?(o=Yt.Observable).of.apply(o,AD(null!=c&&null!==(i=c.__SERVICE__)&&void 0!==i&&i.forceSearchLayerVisibility&&p?[(0,w.He)(p.id,{visibility:!0})]:[]).concat([(0,DP.lK)({latlng:y},u,[u],ND({},u,{info_format:"application/json"}),c.id),(0,DP.HP)(),(0,H.Px)([f[0],f[1],f[2],f[3]],"EPSG:4326",(null==c||null===(a=c.__SERVICE__)||void 0===a||null===(l=a.options)||void 0===l?void 0:l.maxZoomLevel)||21),(0,PF._q)(c)])):Yt.Observable.empty()}))}},reducers:{search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case PF.NN:return se()({},e,{loading:t.loading});case PF.O7:return se()({},e,{error:t.error});case PF.gs:return se()({},e,{searchText:t.searchText,error:null});case PF.p7:var r=t.results;return!0===t.append&&e&&e.results&&(r=[].concat(GD(e.results),GD(t.results))),se()({},e,{results:r,error:null});case PF.Av:return se()({},e,{results:null,error:null});case PF.wn:return se()({},e,{markerPosition:t.markerPosition,markerLabel:t.markerLabel});case PF.Gh:return se()({},e,{highlightedFeature:t.highlightedFeature});case PF.M8:return{style:e.style||{}};case O.l:return null;case PF.C2:return se()({},e,{selectedServices:t.services,searchText:t.searchText,selectedItems:(e.selectedItems||[]).concat(t.items)});case PF.oQ:return se()({},{selectedItems:e.selectedItems&&e.selectedItems.filter((function(e){return e!==t.item})),searchText:""===e.searchText&&t.item&&t.item.text?t.item.text.substring(0,t.item.text.length):e.searchText});case PF.x2:return se()({},e,{style:t.style});case PF.Y7:return MD(MD({},e),{},{activeSearchTool:t.activeSearchTool});case PF.GI:return MD(MD({},e),{},{format:t.format});case PF.KP:return MD(MD({},e),{},{coordinate:MD(MD({},e.coordinate),{},ZD({},t.coord,t.val))});default:return e}},mapInfo:_D.Z}};var bR=r(94184),gR=r.n(bR);function vR(e){return(vR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hR(){return(hR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function OR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ER(e,t){return(ER=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SR(e,t){return!t||"object"!==vR(t)&&"function"!=typeof t?PR(e):t}function PR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jR(e){return(jR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ER(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jR(n);if(o){var r=jR(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return SR(this,e)});function a(){var e;OR(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return CR(PR(e=i.call.apply(i,[this].concat(r))),"state",{is:"active"}),CR(PR(e),"onClick",(function(){return e.props.onClick?e.props.onClick.bind(PR(e)):function(){}})),CR(PR(e),"onDisable",(function(){return e.props.onDisable?e.props.onDisable.bind(PR(e)):function(){}})),CR(PR(e),"onConfirm",(function(){return e.props.onConfirm?e.props.onConfirm():e.props.confirming&&e.props.confirming.onClick?e.props.confirming.onClick():function(){}})),CR(PR(e),"isDisabled",(function(){return"disabled"===e.state.is})),CR(PR(e),"isConfirming",(function(){return"confirming"===e.state.is})),CR(PR(e),"isActive",(function(){return!e.isConfirming()&&!e.isDisabled()})),CR(PR(e),"handleClick",(function(){return e.isConfirming()&&e.props.disableAfterConfirmed?(e.onConfirm(),e.onDisable(),void e.setState({is:"disabled"})):e.isConfirming()?(e.onConfirm(),void e.setState({is:"active"})):(e.onClick(),void e.setState({is:"confirming"}))})),CR(PR(e),"handleBlur",(function(){e.setState({is:"active"})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.children,r=e.buttonProps,n=e.confirming,o=e.disabled,i=this.props,a=i.text,l=i.style,c=i.className,s=void 0===c?"btn btn-sm btn-danger":c,p=this.isDisabled(),f=this.isConfirming();return p&&(a=o&&o.text||"Loading...",s=o&&o.className||"btn btn-sm btn-secondary",l=o&&o.style||{}),f&&(a=n&&n.text||"Confirm?",s=n&&n.className||"btn btn-sm btn-warning",l=n&&n.style||{}),u().createElement("button",hR({className:gR()("confirm-button",s),style:l,onClick:this.handleClick,onBlur:this.handleBlur,disabled:p},r),t,t?" ":"",a)}}])&&wR(t.prototype,r),a}(u().Component);CR(xR,"propTypes",{disableAfterConfirmed:f().bool,resetOnBlur:f().bool,onConfirm:f().func,onDisable:f().func,onClick:f().func,text:f().oneOfType([f().string,f().node]),className:f().string,style:f().object,confirming:f().shape({text:f().oneOfType([f().string,f().node]),className:f().string,style:f().object,onClick:f().func}),disabled:f().shape({text:f().oneOfType([f().string,f().node]),className:f().string,style:f().object}),children:f().node,buttonProps:f().object}),CR(xR,"defaultProps",{resetOnBlur:!0});const TR=xR;var kR=r(40626);function IR(e){return(IR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function DR(e,t){return(DR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RR(e,t){return!t||"object"!==IR(t)&&"function"!=typeof t?NR(e):t}function NR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _R(e){return(_R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DR(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_R(n);if(o){var r=_R(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return RR(this,e)});function a(){var e;AR(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return LR(NR(e=i.call.apply(i,[this].concat(r))),"getOptions",(function(){return 0===e.props.services.length?u().createElement("div",{className:"search-service-name"},u().createElement(v.Z,{msgId:"search.serviceslistempty"})):e.props.services.map((function(t,r){return u().createElement("div",{className:"search-service-item",key:r},u().createElement("span",{className:"search-service-name"},t.name),u().createElement(TR,{className:"list-remove-btn",onConfirm:function(){return e.remove(r)},text:u().createElement(h.Glyphicon,{glyph:"remove-circle"}),confirming:{className:"text-warning list-remove-btn",text:u().createElement(v.Z,{msgId:"search.confirmremove"})}}),u().createElement(h.Glyphicon,{onClick:function(){return e.edit(t,r)},glyph:"pencil"}))}))})),LR(NR(e),"edit",(function(t,r){e.props.onPropertyChange("init_service_values",t),e.props.onPropertyChange("service",t),e.props.onPropertyChange("editIdx",r),e.props.onPropertyChange("page",1)})),LR(NR(e),"toggleOverride",(function(){var t=e.props,r=t.services,n=t.override;e.props.onPropertyChange("textSearchConfig",{services:r,override:!n})})),LR(NR(e),"remove",(function(t){var r=e.props,n=r.services,o=r.override,i=n.filter((function(e,r){return r!==t}));e.props.onPropertyChange("textSearchConfig",{services:i,override:o})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.override;return u().createElement("form",null,u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.serviceslistlabel"})),u().createElement("div",{className:"services-list"},this.getOptions())),u().createElement(h.Checkbox,{checked:e,onChange:this.toggleOverride},u().createElement(v.Z,{msgId:"search.overriedservice"})))}}])&&FR(t.prototype,r),a}(u().Component);LR(MR,"propTypes",{services:f().array,override:f().bool,service:f().object,onPropertyChange:f().func}),LR(MR,"contextTypes",{messages:f().object}),LR(MR,"defaultProps",{services:[],override:!1,onPropertyChange:function(){}});const ZR={Element:MR,validate:function(){return!0}};function GR(e){return(GR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function UR(e,t){return(UR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WR(e,t){return!t||"object"!==GR(t)&&"function"!=typeof t?VR(e):t}function VR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qR(e){return(qR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UR(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qR(n);if(o){var r=qR(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return WR(this,e)});function a(){var e;BR(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return HR(VR(e=i.call.apply(i,[this].concat(r))),"updateProp",(function(t,r){var n=r.target.value;"queriableAttributes"===t&&(n=n.split(","));var o=se()({},e.props.service.options,HR({},t,n));e.props.onPropertyChange("service",se()({},e.props.service,{options:o}))})),HR(VR(e),"updateName",(function(t){var r=t.target.value;e.props.onPropertyChange("service",se()({},e.props.service,{name:r}))})),HR(VR(e),"updateMaxFeatures",(function(t){var r=se()({},e.props.service.options,{maxFeatures:parseFloat(t[0],10)});e.props.onPropertyChange("service",se()({},e.props.service,{options:r}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.service,t=e.options,r=void 0===t?{}:t;return u().createElement("form",null,u().createElement("span",{className:"wfs-required-props-title"},u().createElement(v.Z,{msgId:"search.s_wfs_props_label"})),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_name"})),u().createElement(h.FormControl,{value:e.name,key:"name",type:"text",onChange:this.updateName})),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_url"})),u().createElement(h.FormControl,{value:r.url,key:"url",type:"text",onChange:this.updateProp.bind(null,"url")})),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_layer"})),u().createElement(h.FormControl,{value:r.typeName,key:"typeName",type:"text",onChange:this.updateProp.bind(null,"typeName")})),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_attributes"})),u().createElement(h.FormControl,{value:([r.queriableAttributes]||0).join(","),key:"queriableAttributes",type:"text",onChange:this.updateProp.bind(null,"queriableAttributes")})))}}])&&zR(t.prototype,r),a}(u().Component);HR($R,"propTypes",{service:f().object,onPropertyChange:f().func}),HR($R,"defaultProps",{service:{},onPropertyChange:function(){}});const YR={Element:$R,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.name,o=void 0===n?"":n,i=r.url,a=void 0===i?"":i,l=r.typeName,c=void 0===l?"":l,s=r.queriableAttributes,u=void 0===s?"":s;return o.length>0&&a.length>0&&c.length>0&&u.length>0}};function KR(e){return(KR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XR(){return(XR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function QR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function JR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QR(Object(r),!0).forEach((function(t){aN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function eN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rN(e,t){return(rN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nN(e,t){return!t||"object"!==KR(t)&&"function"!=typeof t?oN(e):t}function oN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iN(e){return(iN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rN(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=iN(n);if(o){var r=iN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return nN(this,e)});function a(){var e;eN(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return aN(oN(e=i.call.apply(i,[this].concat(r))),"updateProp",(function(t,r,n){var o=(0,fe.get)(n,r||"target.value");e.props.onPropertyChange("service",se()({},e.props.service,aN({},t,o)))})),aN(oN(e),"updatePriority",(function(t){e.props.onPropertyChange("service",se()({},e.props.service,{priority:parseFloat(t[0],10)}))})),aN(oN(e),"updateLaunchInfoPanel",(function(t){var r=t&&t.value?t.value:"";"no_info"===r&&(r=void 0),e.props.onPropertyChange("service",JR(JR({},e.props.service),{},{launchInfoPanel:r,openFeatureInfoButtonEnabled:!1,forceSearchLayerVisibility:!1}))})),e}return t=a,(r=[{key:"render",value:function(){var e,t,r=this.props.service,n=this.props.launchInfoPanelOptions||[{label:(0,le.S$)(this.context.messages,"search.s_launch_info_panel.no_info"),value:"no_info"},{label:(0,le.S$)(this.context.messages,"search.s_launch_info_panel.all_layers"),value:"all_layers"},{label:(0,le.S$)(this.context.messages,"search.s_launch_info_panel.single_layer"),value:"single_layer"}],o=(null==r?void 0:r.launchInfoPanel)||this.props.launchInfoPanelDefault;return u().createElement("form",null,u().createElement("span",{className:"wfs-required-props-title"},u().createElement(v.Z,{msgId:"search.s_result_props_label"})),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_title"})),u().createElement(h.FormControl,{value:r.displayName,key:"displayName",type:"text",placeholder:'e.g. "${properties.name}"',onChange:this.updateProp.bind(null,"displayName",null)})),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_description"})),u().createElement(h.FormControl,{value:r.subTitle,key:"subTitle",type:"text",onChange:this.updateProp.bind(null,"subTitle",null)})),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_priority"}),u().createElement(h.Label,{key:"priority-label",className:"slider-label"},parseInt(r.priority||1,10))),u().createElement(ua(),{key:"priority",start:[r.priority||1],step:1,range:{min:1,max:10},onSlide:this.updatePriority}),u().createElement("span",{className:"priority-info"},u().createElement(v.Z,{msgId:"search.s_priority_info"}))),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_launch_info_panel.label"})),u().createElement(zo.ZP,XR({options:n,clearable:!1,value:o,onChange:this.updateLaunchInfoPanel},this.props.launchInfoPanelSelectOptions)),"single_layer"===o?u().createElement(h.FormGroup,null,u().createElement(h.Checkbox,{checked:null!==(e=null==r?void 0:r.openFeatureInfoButtonEnabled)&&void 0!==e&&e,onChange:this.updateProp.bind(null,"openFeatureInfoButtonEnabled","target.checked")},u().createElement(v.Z,{msgId:"search.s_launch_info_panel.openFeatureInfoButtonCheckbox"})),u().createElement(h.Checkbox,{checked:null!==(t=null==r?void 0:r.forceSearchLayerVisibility)&&void 0!==t&&t,onChange:this.updateProp.bind(null,"forceSearchLayerVisibility","target.checked")},u().createElement(v.Z,{msgId:"search.s_launch_info_panel.forceSearchLayerVisibility"}))):null,u().createElement("span",{className:"priority-info with-top-margin"},u().createElement(v.Z,{msgId:"search.s_launch_info_panel.".concat(o,"_description")}))))}}])&&tN(t.prototype,r),a}(u().Component);aN(lN,"propTypes",{service:f().object,launchInfoPanelOptions:f().array,launchInfoPanelDefault:f().string,launchInfoPanelSelectOptions:f().object,onPropertyChange:f().func}),aN(lN,"contextTypes",{messages:f().object}),aN(lN,"defaultProps",{service:{},launchInfoPanelDefault:"no_info",launchInfoPanelSelectOptions:{},onPropertyChange:function(){}});const cN={Element:lN,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.displayName&&e.displayName.length>0}};function sN(e){return(sN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uN(Object(r),!0).forEach((function(t){vN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yN(e,t){return(yN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mN(e,t){return!t||"object"!==sN(t)&&"function"!=typeof t?bN(e):t}function bN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gN(e){return(gN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yN(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gN(n);if(o){var r=gN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return mN(this,e)});function a(){var e;fN(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vN(bN(e=i.call.apply(i,[this].concat(r))),"updateProp",(function(t,r){var n=r.target.value,o=se()({},e.props.service.options,vN({},t,n));e.props.onPropertyChange("service",se()({},e.props.service,{options:o}))})),vN(bN(e),"updateSliderProps",(function(t,r){var n=pN(pN({},e.props.service.options),{},vN({},t,parseInt(r[0],10)));e.props.onPropertyChange("service",pN(pN({},e.props.service),{},{options:n}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.service.options,t=void 0===e?{}:e;return u().createElement("form",null,u().createElement("span",{className:"wfs-required-props-title"},u().createElement(v.Z,{msgId:"search.s_wfs_opt_props_label"})),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_sort"})),u().createElement(h.FormControl,{value:t.sortBy,key:"sortBy",type:"text",onChange:this.updateProp.bind(null,"sortBy")})),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_max_features"})),u().createElement(ua(),{key:"maxFeatures",start:[t.maxFeatures||1],range:{min:1,max:50},onSlide:this.updateSliderProps.bind(null,"maxFeatures")}),u().createElement(h.Label,{key:"maxFeatures-label",className:"slider-label"},t.maxFeatures||1)),u().createElement(h.FormGroup,null,u().createElement(h.ControlLabel,null,u().createElement(v.Z,{msgId:"search.s_max_zoom"})),u().createElement(ua(),{key:"maxZoomLevel",start:[t.maxZoomLevel||21],range:{min:1,max:35},onSlide:this.updateSliderProps.bind(null,"maxZoomLevel")}),u().createElement(h.Label,{key:"maxZoomLevel-label",className:"slider-label"},t.maxZoomLevel||21)))}}])&&dN(t.prototype,r),a}(u().Component);vN(hN,"propTypes",{service:f().object,onPropertyChange:f().func}),vN(hN,"defaultProps",{service:{},onPropertyChange:function(){}});const ON={Element:hN,validate:function(){return!0}};function wN(e){return(wN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function SN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?EN(Object(r),!0).forEach((function(t){IN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function PN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CN(e,t){return(CN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xN(e,t){return!t||"object"!==wN(t)&&"function"!=typeof t?TN(e):t}function TN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kN(e){return(kN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var AN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CN(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kN(n);if(o){var r=kN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xN(this,e)});function a(){var e;PN(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return IN(TN(e=i.call.apply(i,[this].concat(r))),"canProceed",(function(){var t=e.props,r=t.page,n=t.pages,o=t.service;return n[r].validate(o)})),IN(TN(e),"isDirty",(function(){var t=e.props,r=t.service,n=t.initServiceValues;return!(0,fe.isEqual)(r,n)})),IN(TN(e),"renderFooter",(function(){var t=e.props,r=t.page,n=t.pages;return 0===r?u().createElement("span",{role:"footer"},u().createElement(qe.Z,{onClick:e.addService,bsStyle:"primary"},u().createElement(Cn.Z,{msgId:"search.addbtn"}))):r===n.length-1?u().createElement("span",{role:"footer"},u().createElement(qe.Z,{onClick:e.prev,bsStyle:"primary"},u().createElement(Cn.Z,{msgId:"search.prevbtn"})),u().createElement(qe.Z,{disabled:!e.canProceed(),onClick:e.update,bsStyle:"success"},u().createElement(Cn.Z,{msgId:"search.savebtn"}))):u().createElement("span",{role:"footer"},1===r&&e.isDirty()?u().createElement(TR,{onConfirm:e.prev,bsStyle:"primary",confirming:{text:u().createElement(Cn.Z,{msgId:"search.cancelconfirm"})},text:u().createElement(Cn.Z,{msgId:"search.cancelbtn"})}):u().createElement(qe.Z,{onClick:e.prev,bsStyle:"primary"},u().createElement(Cn.Z,{msgId:1===r?"search.cancelbtn":"search.prevbtn"})),u().createElement(qe.Z,{disabled:!e.canProceed(),onClick:e.next,bsStyle:"primary"},u().createElement(Cn.Z,{msgId:"search.nextbtn"})))})),IN(TN(e),"onClose",(function(){e.props.toggleControl("searchservicesconfig"),e.props.restServiceConfig(0)})),IN(TN(e),"addService",(function(){var t=e.props.newService;e.props.onPropertyChange("init_service_values",t),e.props.onPropertyChange("service",t),e.props.onPropertyChange("page",1)})),IN(TN(e),"prev",(function(){var t=e.props.page;t>1?e.props.onPropertyChange("page",t-1):1===t&&e.props.restServiceConfig(0)})),IN(TN(e),"next",(function(){var t=e.props,r=t.page;r<t.pages.length-1&&e.props.onPropertyChange("page",r+1)})),IN(TN(e),"update",(function(){var t=e.props,r=t.service,n=t.editIdx;e.props.updateService(r,n)})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.enabled,r=e.pages,n=e.page,o=e.id,i=e.panelStyle,a=e.panelClassName,l=e.titleText,c=e.closeGlyph,s=e.onPropertyChange,p=e.service,f=e.textSearchConfig,d=void 0===f?{}:f,y=e.containerClassName,m=r&&r[n]||null;return t?u().createElement(b.Z,null,u().createElement(ze.Z,{id:o,style:SN(SN({},i),{},{display:t?"block":"none"}),containerClassName:y,className:a,draggable:!1,modal:!0},u().createElement("span",{role:"header"},u().createElement("span",null,l),this.isDirty()?u().createElement(TR,{className:"close",confirming:{text:u().createElement(Cn.Z,{msgId:"search.cancelconfirm"}),className:"btn btn-sm btn-warning services-config-editor-confirm-close"},onConfirm:this.onClose,bsStyle:"primary",text:u().createElement(h.Glyphicon,{glyph:c})}):u().createElement("button",{onClick:this.onClose,className:"close"},c?u().createElement(h.Glyphicon,{glyph:c}):u().createElement("span",null,"×"))),u().createElement("div",{role:"body",className:"services-config-editor"},u().createElement(m.Element,{services:d.services,override:d.override,onPropertyChange:s,service:p})),this.renderFooter())):null}}])&&jN(t.prototype,r),a}(u().Component);IN(AN,"propTypes",{id:f().string,enabled:f().bool,panelStyle:f().object,panelClassName:f().string,containerClassName:f().string,closeGlyph:f().string,titleText:f().oneOfType([f().string,f().element]),toggleControl:f().func,pages:f().arrayOf(f().shape({Element:f().func.isRequired,validate:f().func.isRequired})),page:f().number,service:f().object,initServiceValues:f().object,onPropertyChange:f().func,newService:f().object.isRequired,updateService:f().func,restServiceConfig:f().func,textSearchConfig:f().object,editIdx:f().number}),IN(AN,"defaultProps",{id:"search-services-config-editor",enabled:!1,panelStyle:{minWidth:"400px",zIndex:2e3,position:"absolute",top:"100px",minHeight:"300px",left:"calc(50% - 150px)",backgroundColor:"white"},panelClassName:"toolbar-panel",containerClassName:"",closeGlyph:"1-close",titleText:u().createElement(Cn.Z,{msgId:"search.configpaneltitle"}),closePanel:function(){},onPropertyChange:function(){},page:0,newService:{type:"wfs",name:"",displayName:"",subTitle:"",priority:1,options:{url:"",typeName:"",queriableAttributes:"",sortBy:"",maxFeatures:5,srsName:"EPSG:4326"}}});const FN={SearchServicesConfigPlugin:(0,d.connect)((function(e){var t=e.controls,r=void 0===t?{}:t,n=e.searchconfig,o=void 0===n?{}:n;return{enabled:r.searchservicesconfig&&r.searchservicesconfig.enabled||!1,pages:[ZR,YR,cN,ON],page:o&&o.page||0,service:o&&o.service,initServiceValues:o&&o.init_service_values,textSearchConfig:o&&o.textSearchConfig,editIdx:o&&o.editIdx}}),{toggleControl:O.Xi,onPropertyChange:kR.ai,restServiceConfig:kR.U8,updateService:kR.Pg})(AN),reducers:{searchconfig:r(60951).Z}};var DN="SWIPE:SET_ACTIVE",RN="SWIPE:SET_MODE",NN="SWIPE:SET_SWIPE_TOOL_DIRECTION",_N="SWIPE:SET_SPY_TOOL_RADIUS";function LN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active";return{type:DN,active:e,prop:t}}function MN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ZN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MN(Object(r),!0).forEach((function(t){GN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function GN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const BN={resetLayerSwipeSettingsEpic:function(e,t){return e.ofType(w.c7).switchMap((function(e){var r=e.nodeType,n=t.getState();return K(n).active&&"group"===r?Yt.Observable.of(LN(!1)):Yt.Observable.empty()}))},deactivateSwipeToolOnSwitchMaps:function(e,t){return e.ofType(Jb.nk).switchMap((function(){return K(t.getState()).active?Yt.Observable.of(LN(!1)):Yt.Observable.empty()}))}};function zN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function UN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zN(Object(r),!0).forEach((function(t){WN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function WN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var VN=[{label:"Horizontal",value:"cut-horizontal"},{label:"Vertical",value:"cut-vertical"}],qN=function(e){var t=e.spyModeSettings,r=e.onSetSpyToolRadius;return u().createElement("div",{className:"mapstore-swipe-settings-spy"},u().createElement("h4",null,u().createElement(v.Z,{msgId:"toc.radius"})),u().createElement("div",{className:"mapstore-slider with-tooltip"},u().createElement(ua(),{tooltips:!0,step:10,start:[t.radius],range:{min:[20],max:[100]},onChange:function(e){return r(e[0])}})))},HN=function(e){var t=e.swipeModeSettings,r=e.onSetSwipeToolDirection;return u().createElement("div",{className:"mapstore-swipe-settings-slider"},u().createElement("h4",null,u().createElement(v.Z,{msgId:"toc.direction"})),u().createElement(zo.ZP,{styles:{menuPortal:function(e){return UN(UN({},e),{},{zIndex:3100})}},onChange:function(e){var t=e.value;return r(t)},clearable:!1,value:(0,fe.find)(VN,["value",t.direction]),options:VN}))},$N=(0,N.P1)([K,Q,X],(function(e,t,r){return{configuring:(null==e?void 0:e.configuring)||!1,toolMode:(null==e?void 0:e.mode)||"swipe",swipeModeSettings:t,spyModeSettings:r}}));const YN=(0,d.connect)($N,{onSetConfigurationActive:LN,onSetSwipeToolDirection:function(e){return{type:NN,direction:e}},onSetSpyToolRadius:function(e){return{type:_N,radius:e}}})((function(e){var t=e.configuring,r=e.toolMode,n=e.swipeModeSettings,o=e.spyModeSettings,i=e.onSetConfigurationActive,a=void 0===i?function(){}:i,l=e.onSetSpyToolRadius,c=void 0===l?function(){}:l,s=e.onSetSwipeToolDirection,p=void 0===s?function(){}:s;return u().createElement("div",{className:"mapstore-swipe-settings"},u().createElement(Ti.Z,{title:"spy"===r?u().createElement(v.Z,{msgId:"toc.spyconfiguration"}):u().createElement(v.Z,{msgId:"toc.swipeconfiguration"}),open:t,onClose:function(){return a(!1,"configuring")},enableFooter:!1,draggable:!0,size:"xs",bodyClassName:"mapstore-swipe-setiings-modal-body",dialogClassName:" mapstore-swipe-settings-modal",glyph:"transfer"},"spy"===r?u().createElement(qN,{spyModeSettings:o,onSetSpyToolRadius:c}):u().createElement(HN,{swipeModeSettings:n,onSetSwipeToolDirection:p})))}));var KN=r(85294),XN=r.n(KN);const QN=function(e){var t=e.map,r=e.layer,n=e.type,o=e.getWidth,i=e.getHeight,a=e.circleCutProp,l=(0,s.useCallback)((function(e){var t=e.context,r=o();t.save(),t.beginPath(),t.rect(r,0,t.canvas.width-r,t.canvas.height),t.strokeStyle="rgba(0,0,0,0.5)",t.clip()}),[r,n]),c=(0,s.useCallback)((function(e){e.context.restore()}),[r,n]),u=(0,s.useCallback)((function(e){var t=e.context,r=i();t.save(),t.beginPath(),t.rect(0,r,t.canvas.width,t.canvas.height-r),t.clip()}),[r,n]),p=(0,s.useCallback)((function(e){var t=e.context,r=e.frameState.pixelRatio;t.save(),t.beginPath();var n=a.getMousePosition();n&&(t.arc(n[0]*r,n[1]*r,a.radius*r,0,2*Math.PI),t.lineWidth=5*r,t.strokeStyle="rgba(0,0,0,0.5)",t.stroke()),t.clip()}),[r,n,a]);return(0,s.useEffect)((function(){var e=t.getLayers().getArray().filter((function(e){return e.get("msId")===r}))[0];if(e){switch(n){case"cut-vertical":!function(e,t,r){e.on("precompose",t),e.on("postcompose",r)}(e,l,c);break;case"cut-horizontal":!function(e,t,r){e.on("precompose",t),e.on("postcompose",r)}(e,u,c);break;case"circle":!function(e,t,r){e.on("precompose",t),e.on("postcompose",r)}(e,p,c)}return t.render(),function(){e.un("precompose",l),e.un("precompose",u),e.un("precompose",p),e.un("postcompose",c),t.render()}}return function(){return t.render()}}),[r,n,a]),null};function JN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var t_=function(e){var t=e.type,r=e.map,n=e.widthRef,o=JN((0,s.useState)(),2),i=o[0],a=o[1],l=JN((0,s.useState)(!0),2),c=l[0],p=l[1],f=function(){a({x:0,y:0}),n.current=r.getProperties().size[0]/2};return(0,s.useEffect)((function(){return window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}),[t]),(0,s.useEffect)((function(){n.current=r.getProperties().size[0]/2}),[t]),u().createElement(XN(),{position:i,bounds:"parent",onStart:function(){return p(!1)},onDrag:function(e,t){return function(e,t){n.current+=t.deltaX,a({x:t.x,y:t.y}),r.render()}(0,t)},onStop:function(){return p(!0)}},u().createElement("div",{className:"mapstore-swipe-slider",style:{height:"100%",top:"0px",left:"".concat(r.getProperties().size[0]/2,"px"),width:"8px",cursor:"col-resize"}},c&&u().createElement("div",{className:"ms-vertical-swipe-slider-arrows",style:{top:"".concat(r.getProperties().size[1]/2-26,"px")}},u().createElement("div",{className:"ms-slider-arrows"},u().createElement(h.Glyphicon,{glyph:"chevron-left"})),u().createElement("div",{className:"ms-slider-arrows"},u().createElement(h.Glyphicon,{glyph:"chevron-right"})))))},r_=function(e){var t=e.type,r=e.map,n=e.heightRef,o=JN((0,s.useState)(),2),i=o[0],a=o[1],l=JN((0,s.useState)(!0),2),c=l[0],p=l[1],f=function(){a({x:0,y:0}),n.current=r.getProperties().size[1]/2};return(0,s.useEffect)((function(){return window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}),[t]),(0,s.useEffect)((function(){n.current=r.getProperties().size[1]/2}),[t]),u().createElement(XN(),{position:i,bounds:"parent",onStart:function(){return p(!1)},onDrag:function(e,t){return function(e,t){n.current+=t.deltaY,a({x:t.x,y:t.y}),r.render()}(0,t)},onStop:function(){return p(!0)}},u().createElement("div",{className:"mapstore-swipe-slider",style:{height:"8px",top:"".concat(r.getProperties().size[1]/2,"px"),left:"0px",width:"100%",cursor:"row-resize"}},c&&u().createElement("div",{className:"ms-horizontal-swipe-slider-arrows",style:{left:"".concat(r.getProperties().size[0]/2-26,"px")}},u().createElement("div",{className:"ms-slider-arrows"},u().createElement(h.Glyphicon,{glyph:"chevron-up"})),u().createElement("div",{className:"ms-slider-arrows"},u().createElement(h.Glyphicon,{glyph:"chevron-down"})))))};const n_=function(e){var t=e.map,r=e.layer,n=e.type,o=void 0===n?"cut-vertical":n,i=e.active,a=(0,s.useRef)(),l=(0,s.useRef)();return r&&i?u().createElement(u().Fragment,null,"cut-vertical"===o&&u().createElement(t_,{widthRef:l,map:t,type:o}),"cut-horizontal"===o&&u().createElement(r_,{heightRef:a,map:t,type:o}),u().createElement(QN,{map:t,layer:r,type:o,getWidth:function(){return l.current},getHeight:function(){return a.current}})):null},o_=function(e){var t=e.layer,r=e.map,n=e.active,o=e.radius,i=(0,s.useRef)(),a=(0,s.useCallback)((function(e){i.current=r.getEventPixel(e),r.render()}),[t,o]),l=(0,s.useCallback)((function(){i.current=null,r.render()}),[t,o]);(0,s.useEffect)((function(){var e=r.getTargetElement();return e.addEventListener("mousemove",a),e.addEventListener("mouseout",l),function(){e.removeEventListener("mousemove",a),e.removeEventListener("mouseout",l)}}),[]);var c={radius:o,getMousePosition:function(){return i.current}};return t&&n?u().createElement(QN,{map:r,layer:t,type:"circle",circleCutProp:c}):null};function i_(){return(i_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var a_=(0,Kr.Z)(h.SplitButton),l_={title:u().createElement(h.Glyphicon,{glyph:"transfer"}),tooltipId:"toc.compareTool",tooltipPosition:"top",className:"square-button-md no-border",pullRight:!0},c_=function(e){var t=e.swipeSettings,r=e.onSetActive,n=e.onSetSwipeMode,o=e.status;return u().createElement(a_,i_({onClick:function(){t.active||"LAYER"!==o?r(!1):r(!0)},bsStyle:null!=t&&t.active?"success":"primary"},l_),u().createElement(h.MenuItem,{active:"swipe"===(null==t?void 0:t.mode),onClick:function(){n("swipe"),r(!0)}},u().createElement(h.Glyphicon,{glyph:"vert-dashed"}),u().createElement(v.Z,{msgId:"toc.swipe"})),u().createElement(h.MenuItem,{active:"spy"===(null==t?void 0:t.mode),onClick:function(){n("spy"),r(!0)}},u().createElement(h.Glyphicon,{glyph:"search"}),u().createElement(v.Z,{msgId:"toc.spyGlass"})),u().createElement(h.MenuItem,{onClick:function(){t.configuring||"LAYER"!==o?r(!1,"configuring"):r(!0,"configuring")}},u().createElement(h.Glyphicon,{glyph:"cog"}),u().createElement(v.Z,{msgId:"toc.configureTool"})))};c_.propTypes={swipeSettings:f().object,status:f().string,onSetActive:f().func,onSetSwipeMode:f().func},c_.defaultProps={status:"LAYER",onSetSwipeMode:function(){},onSetActive:function(){}};const s_=c_;var u_=(0,N.P1)([Y.Iz,K,Q,X],(function(e,t,r,n){return{layer:null==e?void 0:e.id,active:t.active||!1,swipeModeSettings:r,spyModeSettings:n,mode:(null==t?void 0:t.mode)||"swipe"}})),p_=(0,d.connect)(u_,null)((function(e){var t=e.mode,r=e.map,n=e.layer,o=e.active,i=e.swipeModeSettings,a=e.spyModeSettings;return"spy"===t?u().createElement(o_,{map:r,layer:n,active:o,radius:a.radius}):u().createElement(n_,{map:r,layer:n,active:o,type:i.direction})}));const f_=(0,E.rx)("Swipe",{options:{disablePluginIf:"{state('mapType') === 'leaflet' || state('mapType') === 'cesium'}"},component:YN,containers:{TOC:{name:"Swipe",target:"toolbar",selector:function(e){return"LAYER"===e.status},Component:(0,d.connect)((0,N.P1)(K,(function(e){return{swipeSettings:e}})),{onSetActive:LN,onSetSwipeMode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"swipe";return{type:RN,mode:e}}})(s_)},Map:{name:"Swipe",Tool:p_}},reducers:{swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case DN:return se()({},e,GN({},t.prop,t.active));case RN:return se()({},e,{mode:t.mode});case NN:var r=ZN(ZN({},e.swipe),{},{direction:t.direction});return se()({},e,{swipe:r});case _N:var n=ZN(ZN({},e.spy),{},{radius:t.radius});return se()({},e,{spy:n});default:return e}}},epics:BN});var d_=r(56298),y_=r(97671),m_=r.n(y_);function b_(e){return(b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g_(){return(g_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O_(e,t){return(O_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w_(e,t){return!t||"object"!==b_(t)&&"function"!=typeof t?E_(e):t}function E_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S_(e){return(S_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.e(844).then(r.t.bind(r,10844,23));var j_=!1,C_=!1,x_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O_(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S_(n);if(o){var r=S_(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return w_(this,e)});function a(){var e;v_(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return P_(E_(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){var t;switch(e.props.locate){case"FOLLOWING":t="DISABLED";break;case"ENABLED":t="FOLLOWING";break;case"DISABLED":t="ENABLED";break;case"LOCATING":case"PERMISSION_DENIED":t="DISABLED"}e.props.onClick(t)})),P_(E_(e),"renderButton",(function(){var t="PERMISSION_DENIED"===e.props.locate;return u().createElement(qe.Z,g_({id:e.props.id,disabled:t},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.getBtnStyle(),style:e.props.style}),u().createElement(h.Glyphicon,{glyph:e.props.glyph}),e.props.text,e.props.help)})),P_(E_(e),"renderLoadingButton",(function(){var t=u().createElement("img",{src:m_(),style:{display:"inline-block",margin:"0px",padding:0,background:"transparent",border:0},alt:"..."});return u().createElement(qe.Z,g_({id:e.props.id,onClick:e.onClick},e.props.btnConfig,{bsStyle:e.getBtnStyle(),style:e.props.style}),t)})),P_(E_(e),"addTooltip",(function(t){var r=u().createElement(h.Tooltip,{id:"locate-tooltip"},u().createElement(v.Z,{msgId:e.props.tooltip}));return u().createElement(Ze.Z,{placement:e.props.tooltipPlace,key:"{overlay-trigger.".concat(e.props.id,"-").concat(e.props.tooltip,"}"),overlay:r},t)})),P_(E_(e),"getBtnStyle",(function(){var t=e.props,r=t.locate,n=t.bsStyle;return"FOLLOWING"!==r&&"ENABLED"!==r||(n="success active"),n})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;"PERMISSION_DENIED"===this.props.locate||j_||C_||(j_=!0,navigator.geolocation.getCurrentPosition((function(){j_=!1,C_=!0}),(function(t){j_=!1,1===t.code&&e.props.onClick("PERMISSION_DENIED")})))}},{key:"render",value:function(){var e="LOCATING"===this.props.locate?this.renderLoadingButton():this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&h_(t.prototype,r),a}(u().Component);P_(x_,"propTypes",{id:f().string,hide:f().bool,btnConfig:f().object,text:f().oneOfType([f().string,f().element]),help:f().oneOfType([f().string,f().element]),locate:f().string,onClick:f().func,tooltip:f().element,tooltipPlace:f().string,style:f().object,bsStyle:f().string,glyph:f().string}),P_(x_,"defaultProps",{id:"locate-btn",onClick:function(){},locate:"DISABLED",tooltipPlace:"left",bsStyle:"default",glyph:"1-position-1",btnConfig:{className:"square-button"}});const T_=x_;r(52780);var k_=(0,d.connect)((function(e){return{locate:e.locate&&e.locate.state||"DISABLED",tooltip:e.locate&&"FOLLOWING"===e.locate.state?"locate.tooltipDeactivate":"locate.tooltip"}}),{onClick:d_.jL})(T_);const I_=(0,E.rx)("Locate",{component:k_,options:{disablePluginIf:"{state('mapType') === 'cesium'}"},containers:{Toolbar:{name:"locate",position:2,tool:!0,icon:u().createElement(h.Glyphicon,{glyph:"screenshot"}),help:u().createElement(Cn.Z,{msgId:"helptexts.locateBtn"}),priority:1}},reducers:{locate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:"DISABLED"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d_.un:return se()({},e,{state:t.state});case d_.bj:return se()({},e,{error:t.error});default:return e}}}});var A_="LAYERDOWNLOAD:CHECK_WPS_AVAILABILITY",F_="LAYERDOWNLOAD:CHECKING_WPS_AVAILABILITY",D_="LAYERDOWNLOAD:DOWNLOAD_FEATURES",R_="LAYERDOWNLOAD:DOWNLOAD_FINISHED",N_="LAYERDOWNLOAD:FORMAT_SELECTED",__="LAYERDOWNLOAD:CLEAR_DOWNLOAD_OPTIONS",L_="LAYERDOWNLOAD:FORMAT_FETCH",M_="LAYERDOWNLOAD:FORMAT_UPDATE",Z_="LAYERDOWNLOAD:SET_SERVICE",G_="LAYERDOWNLOAD:SET_EXPORT_DATA_RESULTS",B_="LAYERDOWNLOAD:ADD_EXPORT_DATA_RESULT",z_="LAYERDOWNLOAD:UPDATE_EXPORT_DATA_RESULT",U_="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULT",W_="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULTS",V_="LAYERDOWNLOAD:CHECK_EXPORT_DATA_ENTRIES",q_="LAYERDOWNLOAD:CHECKING_EXPORT_DATA_ENTRIES",H_="LAYERDOWNLOAD:SERIALIZE_COOKIE",$_="LAYERDOWNLOAD:SHOW_INFO_BUBBLE_MESSAGE",Y_="LAYERDOWNLOAD:SHOW_INFO_BUBBLE",K_="LAYERDOWNLOAD:SET_INFO_BUBBLE_MESSAGE",X_=function(e){return{type:F_,checking:e}},Q_=function(e,t){return{type:N_,key:e,value:t}},J_=function(){return{type:R_}},eL=function(e){return{type:Z_,service:e}},tL=function(e){return{type:G_,results:e}},rL=function(e,t){return{type:z_,id:e,newProps:t}},nL=function(e){return{type:q_,checking:e}},oL=function(e,t,r,n){return{type:$_,msgId:e,msgParams:t,level:r,duration:n}},iL=function(e){return{type:Y_,show:e}},aL=function(e,t,r){return{type:K_,msgId:e,msgParams:t,level:r}},lL=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.service},cL=(0,N.P1)(_P.Rd,tg.X1,Y.Iz,(function(e,t,r){return e?t:null!=r&&r.name?{featureTypeName:r.name,filterType:"OGC",ogcVersion:"1.1.0"}:null})),sL=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.results},uL=r(35400);function pL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const fL=function(e){var t,r,n=e.cropDataSetVisible,o=void 0!==n&&n,i=e.cropDataSetEnabled,a=void 0!==i&&i,l=e.donwloadFilteredVisible,c=void 0!==l&&l,s=e.downloadFilteredEnabled,p=void 0!==s&&s,f=e.advancedOptionsVisible,d=void 0!==f&&f,y=e.compressionOptions,m=void 0===y?["CCITT RLE","LZW","JPEG","ZLib","PackBits","Deflate"]:y,b=e.selectedCompression,g=e.tileWidth,O=e.tileHeight,w=e.quality,E=e.onChange,S=void 0===E?function(){}:E,P=(t=u().useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return pL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pL(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=P[0],C=P[1];return u().createElement(u().Fragment,null,o&&u().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},u().createElement(Cv.Z,{checked:a,onClick:function(e){return S("cropDataSet",e)}}),u().createElement(v.Z,{msgId:"layerdownload.cropDataSet"})),c&&u().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},u().createElement(Cv.Z,{checked:p,onClick:function(e){return S("downloadFilteredDataSet",e)}}),u().createElement(v.Z,{msgId:"layerdownload.downloadFilteredDataSet"})),d&&u().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-options"},u().createElement(h.Button,{className:"no-border",onClick:function(){return C(!j)}},u().createElement(h.Glyphicon,{glyph:"chevron-".concat(j?"down":"right")})),u().createElement(v.Z,{msgId:"layerdownload.advancedOptions"})),j&&d&&u().createElement("div",{className:"mapstore-downloadwpsoptions-advanced"},u().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},u().createElement(v.Z,{msgId:"layerdownload.compression"}),u().createElement(zo.ZP,{clearable:!0,value:b,options:m.map((function(e){return(0,fe.isString)(e)?{value:e,label:e}:e})),onChange:function(e){return S("compression",null==e?void 0:e.value)}})),u().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},u().createElement(v.Z,{msgId:"layerdownload.quality"}),u().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},u().createElement(h.FormControl,{placeholder:"0.75",type:"number",min:"0",max:"1",value:w||"",onChange:function(e){return S("quality",e.target.value)}}))),u().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},u().createElement(v.Z,{msgId:"layerdownload.tileWidth"}),u().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},u().createElement(h.FormControl,{placeholder:"256",type:"number",min:"0",value:g||"",onChange:function(e){return S("tileWidth",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),u().createElement("span",null,"px"))),u().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},u().createElement(v.Z,{msgId:"layerdownload.tileHeight"}),u().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},u().createElement(h.FormControl,{placeholder:"256",type:"number",min:"0",value:O||"",onChange:function(e){return S("tileHeight",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),u().createElement("span",null,"px")))))};function dL(e){return(dL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bL(e,t){return(bL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gL(e,t){return!t||"object"!==dL(t)&&"function"!=typeof t?vL(e):t}function vL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hL(e){return(hL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bL(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hL(n);if(o){var r=hL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return gL(this,e)});function a(){var e;yL(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return OL(vL(e=i.call.apply(i,[this].concat(r))),"getSelectedFormat",(function(){return(0,fe.get)(e.props,"downloadOptions.selectedFormat")})),OL(vL(e),"getSelectedSRS",(function(){return(0,fe.get)(e.props,"downloadOptions.selectedSrs")||e.props.defaultSrs||(0,fe.get)((0,fe.head)(e.props.srsList),"name")})),e}return t=a,(r=[{key:"render",value:function(){var e,t=this;return u().createElement("form",null,u().createElement("label",null,u().createElement(v.Z,{msgId:"layerdownload.format"})),u().createElement(zo.ZP,{clearable:!1,isLoading:this.props.formatsLoading,onOpen:function(){return t.props.formatOptionsFetch(t.props.layer)},value:null===(e=this.props.downloadOptions)||void 0===e?void 0:e.selectedFormat,noResultsText:u().createElement(v.Z,{msgId:"layerdownload.format"}),onChange:function(e){return t.props.onChange("selectedFormat",e.value)},options:this.props.formats.map((function(e){return{value:e.name,label:e.label||e.name}}))}),u().createElement("label",null,u().createElement(v.Z,{msgId:"layerdownload.srs"})),u().createElement(zo.ZP,{clearable:!1,value:this.getSelectedSRS(),onChange:function(e){return t.props.onChange("selectedSrs",e.value)},options:this.props.srsList.map((function(e){return{value:e.name,label:e.label||e.name}}))}),this.props.wpsOptionsVisible&&u().createElement(fL,{cropDataSetVisible:!0,donwloadFilteredVisible:this.props.downloadFilteredVisible,advancedOptionsVisible:this.props.wpsAdvancedOptionsVisible,cropDataSetEnabled:this.props.downloadOptions.cropDataSet,downloadFilteredEnabled:this.props.downloadOptions.downloadFilteredDataSet,selectedCompression:this.props.downloadOptions.compression,quality:this.props.downloadOptions.quality,tileWidth:this.props.downloadOptions.tileWidth,tileHeight:this.props.downloadOptions.tileHeight,onChange:this.props.onChange}),this.props.virtualScroll?null:u().createElement(h.Checkbox,{checked:this.props.downloadOptions.singlePage,onChange:function(){return t.props.onChange("singlePage",!t.props.downloadOptions.singlePage)}},u().createElement(v.Z,{msgId:"layerdownload.downloadonlycurrentpage"})))}}])&&mL(t.prototype,r),a}(u().Component);OL(wL,"propTypes",{downloadOptions:f().object,formatOptionsFetch:f().func,formats:f().array,srsList:f().array,onChange:f().func,defaultSrs:f().string,wpsOptionsVisible:f().bool,wpsAdvancedOptionsVisible:f().bool,downloadFilteredVisible:f().bool,layer:f().object,formatsLoading:f().bool,virtualScroll:f().bool}),OL(wL,"defaultProps",{downloadOptions:{},formatsLoading:!1,formats:[],srsList:[],wpsOptionsVisible:!1,wpsAdvancedOptionsVisible:!1,downloadFilteredVisible:!1,virtualScroll:!0});const EL=wL;function SL(e){return(SL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CL(e,t){return(CL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xL(e,t){return!t||"object"!==SL(t)&&"function"!=typeof t?TL(e):t}function TL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kL(e){return(kL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var AL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CL(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kL(n);if(o){var r=kL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xL(this,e)});function a(){var e;PL(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return IL(TL(e=i.call.apply(i,[this].concat(r))),"onClose",(function(){e.props.onClose()})),IL(TL(e),"renderIcon",(function(){return e.props.loading?u().createElement("div",{style:{float:"left"}},u().createElement(sC(),{spinnerName:"circle",noFadeIn:!0})):u().createElement(h.Glyphicon,{glyph:"download"})})),IL(TL(e),"handleExport",(function(){var t=e.props,r=t.url,n=t.filterObj,o=t.downloadOptions,i=t.defaultSrs,a=t.srsList,l=t.onExport,c=t.layer,s=o&&o.selectedSrs||i||(a[0]||{}).name;l(r||c.url,n,se()({},o,{selectedSrs:s}))})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"componentDidUpdate",value:function(e){this.props.enabled!==e.enabled&&this.props.enabled&&(this.props.onClearDownloadOptions(),"wms"===this.props.layer.type&&this.props.onCheckWPSAvailability(this.props.url||this.props.layer.url))}},{key:"render",value:function(){var e,t,r,n=this,o=function(e){return n.props.formats.filter((function(t){var r,o,i=t.validServices,a=t.type,l=void 0===a?"vector":a;return(!i||(0,fe.findIndex)(i,(function(t){return t===e}))>-1)&&("vector"===l&&(null===(r=n.props.layer.search)||void 0===r?void 0:r.url)||"raster"===l&&!(null!==(o=n.props.layer.search)&&void 0!==o&&o.url))}))},i=o("wfs"),a=o("wps"),l=i.length>0?i.filter((function(e){return n.props.wfsFormats.find((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))})):this.props.wfsFormats;return this.props.enabled?u().createElement(ze.Z,{id:"mapstore-export",draggable:!1,modal:!0},u().createElement("span",{role:"header"},u().createElement("span",{className:"about-panel-title"},u().createElement(v.Z,{msgId:"layerdownload.title"})),u().createElement("button",{onClick:this.onClose,className:"settings-panel-close close"},this.props.closeGlyph?u().createElement(h.Glyphicon,{glyph:this.props.closeGlyph}):u().createElement("span",null,"×"))),u().createElement("div",{role:"body"},this.props.checkingWPSAvailability?u().createElement(Vc.Z,{size:100,style:{margin:"0 auto"}}):"wfs"!==this.props.service||null!==(e=this.props.layer.search)&&void 0!==e&&e.url?u().createElement(EL,{downloadOptions:this.props.downloadOptions,onChange:this.props.onDownloadOptionChange,formatOptionsFetch:"wfs"===this.props.service?this.props.onFormatOptionsFetch:function(){},formatsLoading:this.props.formatsLoading,formats:"wfs"===this.props.service?l:a,srsList:this.props.srsList,defaultSrs:this.props.defaultSrs,wpsOptionsVisible:"wps"===this.props.service,wpsAdvancedOptionsVisible:!(null!==(t=this.props.layer.search)&&void 0!==t&&t.url),downloadFilteredVisible:!(null===(r=this.props.layer.search)||void 0===r||!r.url),layer:this.props.layer,virtualScroll:this.props.virtualScroll}):u().createElement(uL.Z,{title:u().createElement(v.Z,{msgId:"layerdownload.noSupportedServiceFound"})})),!this.props.checkingWPSAvailability&&u().createElement("div",{role:"footer"},u().createElement(qe.Z,{bsStyle:"primary",className:"download-button",disabled:!this.props.downloadOptions.selectedFormat||this.props.loading,onClick:this.handleExport},this.renderIcon()," ",u().createElement(v.Z,{msgId:"layerdownload.export"})))):null}}])&&jL(t.prototype,r),a}(u().Component);IL(AL,"propTypes",{filterObj:f().object,closeGlyph:f().string,url:f().string,service:f().string,onMount:f().func,onUnmount:f().func,enabled:f().bool,loading:f().bool,checkingWPSAvailability:f().bool,onClose:f().func,onExport:f().func,onCheckWPSAvailability:f().func,onDownloadOptionChange:f().func,onClearDownloadOptions:f().func,onFormatOptionsFetch:f().func,downloadOptions:f().object,wfsFormats:f().array,formats:f().array,srsList:f().array,defaultSrs:f().string,layer:f().object,formatsLoading:f().bool,virtualScroll:f().bool}),IL(AL,"defaultProps",{onMount:function(){},onUnmount:function(){},onExport:function(){},onClose:function(){},onCheckWPSAvailability:function(){},onDownloadOptionChange:function(){},onClearDownloadOptions:function(){},onFormatOptionsFetch:function(){},checkingWPSAvailability:!1,layer:{},closeGlyph:"1-close",service:"wfs",wfsFormats:[],formats:[{name:"application/json",label:"GeoJSON",type:"vector",validServices:["wps"]},{name:"application/arcgrid",label:"ArcGrid",type:"raster",validServices:["wps"]},{name:"image/tiff",label:"TIFF",type:"raster",validServices:["wps"]},{name:"image/png",label:"PNG",type:"raster",validServices:["wps"]},{name:"image/jpeg",label:"JPEG",type:"raster",validServices:["wps"]},{name:"application/wfs-collection-1.0",label:"wfs-collection-1.0",type:"vector",validServices:["wps"]},{name:"application/wfs-collection-1.1",label:"wfs-collection-1.1",type:"vector",validServices:["wps"]},{name:"application/zip",label:"Shapefile",type:"vector",validServices:["wps"]},{name:"text/csv",label:"CSV",type:"vector",validServices:["wps"]}],formatsLoading:!1,srsList:[{name:"native",label:"Native"},{name:"EPSG:4326",label:"WGS84"}],virtualScroll:!0,downloadOptions:{}});const FL=AL;var DL=u().createElement(h.Button,{bsStyle:"primary",bsSize:"small",className:"mapstore-exportdataresults-item-failed"},u().createElement(h.Glyphicon,{glyph:"exclamation-sign"}));const RL=(0,Dl.Z)((function(e){var t=e.results;return!(void 0===t?[]:t).length}),{title:u().createElement(v.Z,{msgId:"exportDataResults.emptyStateMessage"})})((function(e){var t=e.loading,r=void 0!==t&&t,n=e.results,o=void 0===n?[]:n,i=e.currentLocale,a=e.onRemoveResult,l=void 0===a?function(){}:a;return r?u().createElement(Vc.Z,{size:100,style:{margin:"0 auto",padding:"10px"}}):u().createElement("div",{className:"mapstore-exportdataresults-container"},o.map((function(e){var t=e.id,r=e.layerName,n=e.layerTitle,o=e.startTime,a=e.status,c=e.result,s=(0,ie.getLayerTitle)({name:r,title:n},i),p=new Date(o),f=function(e){return e<10?"0".concat(e):"".concat(e)},d="".concat(f(p.getDate()),"/").concat(f(p.getMonth()+1),"/").concat(p.getFullYear()," ").concat(f(p.getHours()),":").concat(f(p.getMinutes()));return u().createElement("div",{key:t,className:"mapstore-exportdataresults-item"},u().createElement("div",{className:"mapstore-exportdataresults-item-name"},s),u().createElement("div",{className:"mapstore-exportdataresults-item-date"},d),u().createElement("div",{className:"mapstore-exportdataresults-item-buttons"},"pending"===a&&u().createElement(Vc.Z,{size:22,style:{marginLeft:"2px"}}),"failed"===a&&c&&c.msgId?u().createElement(Ze.Z,{placement:"top",overlay:u().createElement(h.Tooltip,{id:"exportresults-failure-tooltip"},u().createElement(v.Z,{msgId:c.msgId,msgParams:c.msgParams}))},DL):null,"failed"!==a||c&&c.msgId?null:DL,"completed"===a&&u().createElement("a",{href:c},u().createElement(h.Button,{bsStyle:"primary",bsSize:"small"},u().createElement(h.Glyphicon,{glyph:"floppy-disk"}))),u().createElement(h.Button,{bsStyle:"primary",bsSize:"small",onClick:function(){return l(t)}},u().createElement(h.Glyphicon,{glyph:"trash"}))))})))}));function NL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const _L=function(e){var t,r=e.show,n=e.arrowDirection,o=void 0===n?"bottom":n,i=e.className,a=e.containerClassName,l=e.children;return u().createElement("div",{className:gR().apply(void 0,["mapstore-info-bubble"].concat((t=r?["mapstore-info-bubble-visible"]:[],function(e){if(Array.isArray(e))return NL(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return NL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NL(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[i]))},u().createElement("div",{className:gR()("mapstore-info-bubble-container",a)},u().createElement("div",{className:gR()("mapstore-info-bubble-arrow-container","arrow-".concat(o))},u().createElement("div",{className:"mapstore-info-bubble-arrow"})),u().createElement("div",{className:"mapstore-info-bubble-inner"},l)))},LL=function(e){var t=e.msgId,r=e.msgParams,n=e.level,o=void 0===n?"normal":n,i=e.className;return u().createElement("div",{className:gR()("mapstore-info-bubble-default-inner","mapstore-info-bubble-default-inner-level-".concat(o),i)},t?u().createElement(v.Z,{msgId:t,msgParams:r}):null)};var ML=r(9669),ZL=r.n(ML),GL=r(78598),BL=r(7526),zL=r(63516),UL=r(27835);function WL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function VL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?WL(Object(r),!0).forEach((function(t){qL(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WL(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HL(e){return function(e){if(Array.isArray(e))return YL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||$L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $L(e,t){if(e){if("string"==typeof e)return YL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?YL(e,t):void 0}}function YL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var KL=function(e){var t=e.type,r=e.data;return"TEXT"===t?(0,yg.XA)((0,yg.p5)((0,yg.Rr)(r.data),r.mimeType)):(0,yg.fA)(r.mimeType,r.href,r.method,(0,yg.Rr)(r.requestBodyData))},XL=function(e,t,r){if(e&&t){var n=(0,UL.mG)(e,(a=(i={layerName:t.layerName,ROI:t.ROI,roiCRS:t.roiCRS,dataFilter:t.dataFilter,targetCRS:t.targetCRS}).layerName,l=i.ROI,c=i.roiCRS,s=i.dataFilter,u=i.targetCRS,(0,UL.Uh)("gs:DownloadEstimator",[(0,yg.qP)("layerName",(0,yg.XA)((0,yg.gN)(a)))].concat(HL(l?[(0,yg.qP)("ROI",KL(l))]:[]),HL(c?[(0,yg.qP)("RoiCRS",(0,yg.XA)((0,yg.gN)(c)))]:[]),HL(s?[(0,yg.qP)("filter",KL(s))]:[]),HL(u?[(0,yg.qP)("targetCRS",(0,yg.XA)((0,yg.gN)(u)))]:[])))),{outputsExtractor:(0,UL.dr)(UL.ai)}),o=(0,UL.mG)(e,function(e){var t=e.layerName,r=e.dataFilter,n=e.outputFormat,o=e.targetCRS,i=e.roiCRS,a=e.ROI,l=e.cropToROI,c=e.asynchronous,s=e.outputAsReference,u=e.resultOutput,p=e.writeParameters;return(0,UL.Uh)("gs:Download",[(0,yg.qP)("layerName",(0,yg.XA)((0,yg.gN)(t))),(0,yg.qP)("outputFormat",(0,yg.XA)((0,yg.gN)(n)))].concat(HL(a?[(0,yg.qP)("ROI",KL(a))]:[]),HL(r?[(0,yg.qP)("filter",KL(r))]:[]),HL(o?[(0,yg.qP)("targetCRS",(0,yg.XA)((0,yg.gN)(o)))]:[]),HL(i?[(0,yg.qP)("RoiCRS",(0,yg.XA)((0,yg.gN)(i)))]:[]),[(0,yg.qP)("cropToROI",(0,yg.XA)((0,yg.gN)(l?"true":"false")))],HL(p&&(0,fe.keys)(p).length>0?[(0,yg.XJ)((0,fe.toPairs)(p).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||$L(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return(0,yg.Dx)(o,i)})).join(""))]:[])),(0,yg.DK)(c?(0,yg.Tr)(!0,!0,s?(0,yg.t$)(u,!0,"result"):(0,yg.En)("result",u)):(0,yg.En)("result",u)))}(VL(VL({},(0,fe.omit)(t,"notifyDownloadEstimatorSuccess")),{},{outputAsReference:!!t.asynchronous&&t.outputAsReference})),r,{headers:{"Content-Type":"application/xml",Accept:"application/xml, ".concat(t.resultOutput||"application/zip")}});return n.catch((function(){throw new Error("DownloadEstimatorException")})).mergeMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0&&"result"===e[0].identifier&&"true"===e[0].data)return t.notifyDownloadEstimatorSuccess?Yt.Observable.of("DownloadEstimatorSuccess").concat(o):o;throw new Error("DownloadEstimatorFailed")}))}var i,a,l,c,s,u;return Yt.Observable.empty()},QL=[{outputFormat:"shape-zip",extension:"zip"},{outputFormat:"csv",extension:"csv"},{outputFormat:"excel",extension:"xls"},{outputFormat:"excel2007",extension:"xlsx"},{outputFormat:"dxf",extension:"dxf"},{outputFormat:"dxf-zip",extension:"zip"},{outputFormat:"application/vnd.google-earth.kml+xml",extension:"kml"},{outputFormat:"application/json",extension:"json"},{outputFormat:"gml3",extension:"gml"},{outputFormat:"GML2",extension:"gml"},{outputFormat:"application/vnd.googlxml",extension:"kml"},{outputFormat:"OGR-CSV",extension:"csv"},{outputFormat:"OGR-FileGDB",extension:"gdb"},{outputFormat:"OGR-GPKG",extension:"gpkg"},{outputFormat:"OGR-KML",extension:"kml"},{outputFormat:"OGR-MIF",extension:"mif"},{outputFormat:"OGR-TAB",extension:"tab"},{outputFormat:"SHAPE-ZIP",extension:"zip"},{outputFormat:"gml32",extension:"gml"},{outputFormat:"application/x-gpk",extension:"gpk"}];function JL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function eM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JL(Object(r),!0).forEach((function(t){tM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JL(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rM(e){return function(e){if(Array.isArray(e))return oM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||nM(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nM(e,t){if(e){if("string"==typeof e)return oM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oM(e,t):void 0}}function oM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var iM={gml3:"GML3.1",GML2:"GML2","DXF-ZIP":"DXF-ZIP","application/vnd.google-earth.kml+xml":"KML","OGR-CSV":"OGR-CSV","OGR-FileGDB":"OGR-GeoDatabase","OGR-GPKG":"OGR-GeoPackage","OGR-KML":"OGR-KML","OGR-MIF":"OGR-MIF","OGR-TAB":"OGR-TAB","SHAPE-ZIP":"Shapefile",gml32:"GML3.2","application/json":"GeoJSON",csv:"CSV","application/x-gpkg":"GeoPackage",excel:"excel",excel2007:"excel2007"},aM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,r=e.filterObj,n=void 0===r?{}:r,o=e.downloadOptions,i=void 0===o?{}:o,a=(0,yf.toOGCFilter)(n.featureTypeName,n,n.ogcVersion,n.sortOptions,!1,null,null,i.selectedSrs);return Yt.Observable.defer((function(){return ZL().post((0,Dt.$F)(t+"?service=WFS&outputFormat=".concat(i.selectedFormat)),a,{timeout:6e4,responseType:"arraybuffer",headers:{"Content-Type":"application/xml"}})}))},lM=function(e){var t,r=(0,fe.get)(e,"filterObj.featureTypeName"),n=(t=(0,fe.get)(e,"downloadOptions.selectedFormat"),(0,fe.head)(QL.filter((function(e){return e.outputFormat===t})))||function(e){var t=e.split(/[^\w]/)[1];return t?{outputFormat:e,extension:t.toLowerCase()}:void 0}(t));return n&&n.extension?r+"."+n.extension:r},cM=function(e){return e.query&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes&&e.query.featureTypes[e.query.typeName].attributes[0]&&e.query.featureTypes[e.query.typeName].attributes[0].attribute||null},sM=function(e){switch(e.code){case"ProcessFailed":return{msgId:"layerdownload.wpsExecuteError.processFailed",msgParams:{exceptionReport:e.message}};case"NoStatusLocation":case"NoExecutionId":case"UnexpectedProcessStatus":return{msgId:"layerdownload.wpsExecuteError.badResponse",msgParams:{eCode:e.code}};case"ExecuteProcessXHRFailed":return{msgId:"layerdownload.wpsExecuteError.executeProcessXhrFailed"};case"GetExecutionStatusXHRFailed":return{msgId:"layerdonwload.wpsExecuteError.getExecutionStatusXhrFailed"};default:return{msgId:"layerdownload.wpsExecuteError.unexpectedError"}}},uM=function(e){var t=(0,ne.np)(e);if(null!=t&&t.id){var r=document.cookie.split(";").filter((function(e){return e.indexOf("exportDataResults_".concat(t.id,"="))>-1}))[0];if(r){var n=JSON.parse(decodeURIComponent(r.split("=")[1])).results;return Yt.Observable.of(tL(n.filter((function(e){return"pending"!==e.status}))))}}return Yt.Observable.empty()},pM=function(e){return e.ofType(A_).switchMap((function(e){var t=e.url;return mg(t,"gs:DownloadEstimator,gs:Download").switchMap((function(e){return Yt.Observable.defer((function(){return new Promise((function(t,r){return(0,Rt.parseString)(e.data,{tagNameProcessors:[BL.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))})).flatMap((function(e){var t,r,n,o,i,a,l,c,s=[null==e||null===(t=e.ProcessDescriptions)||void 0===t||null===(r=t.ProcessDescription)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.Identifier)||void 0===o?void 0:o[0],null==e||null===(i=e.ProcessDescriptions)||void 0===i||null===(a=i.ProcessDescription)||void 0===a||null===(l=a[1])||void 0===l||null===(c=l.Identifier)||void 0===c?void 0:c[0]];return Yt.Observable.of(eL((0,fe.findIndex)(s,(function(e){return"gs:DownloadEstimator"===e}))>-1&&(0,fe.findIndex)(s,(function(e){return"gs:Download"===e}))>-1?"wps":"wfs"),X_(!1))})).catch((function(){return Yt.Observable.of(eL("wfs"),X_(!1))})).startWith(X_(!0))}))},fM=function(e){return e.ofType(w.HN).switchMap((function(e){var t;return Yt.Observable.from([(0,O.Xi)("layerdownload"),Q_("singlePage",!1)].concat(rM(null!==(t=e.layer.search)&&void 0!==t&&t.url?[(0,eg.rP)(e.layer.url,{featureTypeName:e.layer.name})]:[])))}))},dM=function(e){return e.ofType(L_).switchMap((function(e){return(0,fg.ED)(e).map((function(e){return t=function(e){var t=(0,fe.get)(e,"WFS_Capabilities.OperationsMetadata.Operation"),r=(0,fe.find)(t,(function(e){return"GetFeature"===e.name})),n=(0,fe.get)(r,"Parameter"),o=(0,fe.find)(n,(function(e){return"outputFormat"===e.name})).Value,i=(0,fe.pick)(iM,o);return(0,fe.toPairs)(i).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||nM(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{name:n[0],label:n[1]}}))}(e),{type:M_,wfsFormats:t};var t}))}))},yM=function(e,t){return e.ofType(D_).switchMap((function(r){var n,o,i,a,l=t.getState(),c=l.featuregrid.virtualScroll,s=void 0!==c&&c,u=lL(l),p=(0,Y.Iz)(l),f=(0,J.pQ)(l),d=(0,ee.Pz)(l);return"wps"===u?(n=r.downloadOptions.cropDataSet&&!!f&&!!f.bounds,o={layerName:p.name,outputFormat:r.downloadOptions.selectedFormat,asynchronous:!0,outputAsReference:!0,targetCRS:r.downloadOptions.selectedSrs&&"native"!==r.downloadOptions.selectedSrs?r.downloadOptions.selectedSrs:void 0,cropToROI:n,dataFilter:r.downloadOptions.downloadFilteredDataSet?{type:"TEXT",data:{mimeType:"text/plain; subtype=filter/1.0",data:(0,yf.mergeFiltersToOGC)({ogcVersion:"1.0.0",addXmlnsToRoot:!0,xmlnsToAdd:['xmlns:ogc="http://www.opengis.net/ogc"','xmlns:gml="http://www.opengis.net/gml"']},p.layerFilter,r.filterObj)}}:void 0,ROI:n?{type:"TEXT",data:{mimeType:"application/json",data:JSON.stringify((0,Ko.bboxToFeatureGeometry)(f.bounds))}}:void 0,roiCRS:n?f.crs||"EPSG:4326":void 0,writeParameters:eM(eM(eM({},r.downloadOptions.tileWidth?{tilewidth:r.downloadOptions.tileWidth}:{}),r.downloadOptions.tileHeight?{tileheight:r.downloadOptions.tileHeight}:{}),r.downloadOptions.compression?eM({compression:r.downloadOptions.compression},r.downloadOptions.quality?{quality:r.downloadOptions.quality}:{}):{}),notifyDownloadEstimatorSuccess:!0},i={id:No()(),layerName:p.name,layerTitle:p.title,status:"pending"},a={outputsExtractor:(0,UL.dr)(UL.RW)},XL(r.url,o,a).takeUntil(e.ofType(U_).filter((function(e){return e.id===i.id})).take(1)).flatMap((function(e){var t,r;return"DownloadEstimatorSuccess"===e?Yt.Observable.of((r=eM(eM({},i),{},{startTime:(new Date).getTime()}),{type:B_,result:r}),oL("layerdownload.exportResultsMessages.newExport"),J_(),(0,O.Xi)("layerdownload","enabled")):(t=Yt.Observable).of.apply(t,rM(e&&e.length>0&&e[0].href?[rL(i.id,{status:"completed",result:e[0].href}),oL("layerdownload.exportResultsMessages.exportSuccess",{layerTitle:(0,ie.getLayerTitle)(p,d)},"success")]:[rL(i.id,{status:"failed",result:{msgId:"layerdonwload.exportResultsMessages.invalidHref"}}),oL("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,ie.getLayerTitle)(p,d)},"danger")]))})).catch((function(e){var t;return(t=Yt.Observable).of.apply(t,rM(e.message&&e.message.indexOf("DownloadEstimator")>-1?[(0,$.vU)({error:e,title:"layerdownload.error.downloadEstimatorTitle",message:"layerdownload.error.downloadEstimatorFailed"}),J_()]:[rL(i.id,{status:"failed",result:sM(e)}),oL("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,ie.getLayerTitle)(p,d)},"danger")]))}))):aM({url:r.url,downloadOptions:r.downloadOptions,filterObj:eM(eM({},r.filterObj),{},{pagination:!s&&(0,fe.get)(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null})}).do((function(e){var t=e.data;if("application/xml"===e.headers["content-type"]){var r=String.fromCharCode.apply(null,new Uint8Array(t));if(0===r.indexOf("<ows:ExceptionReport"))throw r}})).catch((function(){return aM({url:r.url,downloadOptions:r.downloadOptions,filterObj:eM(eM({},r.filterObj),{},{pagination:!s&&(0,fe.get)(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null,sortOptions:(e=cM(t.getState()),e?{sortBy:e,sortOrder:"A"}:{})})}).do((function(e){var t=e.data,n=e.headers;if("application/xml"===n["content-type"]){var o=String.fromCharCode.apply(null,new Uint8Array(t));if(0===o.indexOf("<ows:ExceptionReport"))throw o}(0,GL.saveAs)(new Blob([t],{type:n&&n["content-type"]}),lM(r))}));var e})).do((function(e){var t=e.data,n=e.headers;(0,GL.saveAs)(new Blob([t],{type:n&&n["content-type"]}),lM(r))})).map((function(){return J_()})).catch((function(e){return Yt.Observable.of((0,$.vU)({error:e,title:"layerdownload.error.title",message:"layerdownload.error.invalidOutputFormat",autoDismiss:5,position:"tr"}),J_())}))}))},mM=function(e,t){return e.ofType(O.kM).filter((function(e){return"queryPanel"===e.control&&!(0,te._d)(t.getState())&&(0,te.lI)(t.getState())})).switchMap((function(){return Yt.Observable.of((0,O.Xi)("layerdownload"))}))},bM=function(e){return e.ofType($_).concatMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Yt.Observable.of(aL(e.msgId,e.msgParams,e.level),iL(!0)).delay(10).concat(Yt.Observable.of(iL(!1)).delay(e.duration||3e3)).concat(Yt.Observable.empty().delay(1e3))}))},gM=function(e,t){return e.ofType(V_).exhaustMap((function(){var e=t.getState(),r=(sL(e)||[]).filter((function(e){return"completed"===e.status}));return r.length>0?Yt.Observable.forkJoin(r.map((function(e){var t=e.result,r=t.indexOf("executionId="),n=t.slice(r),o=n.indexOf("&"),i=(o>-1?n.slice(0,o):n).slice(12),a=t.indexOf("?"),l=t.slice(0,a);return(0,UL.W5)(l,i).let(dg.oB).catch((function(){return Yt.Observable.of(null)})).map((function(t){return t?null:e.id}))}))).flatMap((function(e){return Yt.Observable.of((t=e.filter((function(e){return!!e})),{type:W_,ids:t}),{type:H_},nL(!1));var t})).startWith(nL(!0)):Yt.Observable.empty()}))},vM=function(e,t){return e.ofType(B_,U_,z_,H_).filter((function(){return(0,ne.jl)(t.getState())})).do((function(){var e=t.getState(),r=sL(e),n=(0,ne.np)(e).id,o=JSON.stringify({results:r});document.cookie="exportDataResults_".concat(n,"=").concat(encodeURIComponent(o))})).flatMap((function(){return Yt.Observable.empty()}))},hM=function(e){return e.ofType(eP.ok).switchMap((function(){return e.ofType(zL.Nv).switchMap((function(){return Yt.Observable.of(tL([]))})).takeUntil(e.ofType(Jb.nk))}))},OM=function(e,t){return e.ofType(eP.ok).switchMap((function(){return uM(t.getState()).concat(e.ofType(zL.XP).switchMap((function(){return uM(t.getState())})).takeUntil(e.ofType(Jb.nk)))}))};function wM(e){return function(e){if(Array.isArray(e))return EM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return EM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?EM(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SM(Object(r),!0).forEach((function(t){jM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const CM=(0,E.rx)("LayerDownload",{component:(0,d.connect)((0,N.zB)({url:tg.Bu,filterObj:cL,enabled:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.layerdownload)||void 0===r?void 0:r.enabled},downloadOptions:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.downloadOptions},loading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.loading},wfsFormats:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.wfsFormats},formatsLoading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.formatsLoading},layer:Y.Iz,service:lL,checkingWPSAvailability:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingWPSAvailability},virtualScroll:function(e){return e&&e.featuregrid&&e.featuregrid.virtualScroll}}),{onExport:function(e,t,r){return{type:D_,url:e,filterObj:t,downloadOptions:r}},onDownloadOptionChange:Q_,onClearDownloadOptions:function(){return{type:__}},onFormatOptionsFetch:function(e){return{type:L_,layer:e}},onCheckWPSAvailability:function(e){return{type:A_,url:e}},onMount:function(){return(0,O.Xg)("layerdownload","available",!0)},onUnmount:function(){return(0,O.Xg)("layerdownload","available",!1)},onClose:function(){return(0,O.Xi)("layerdownload")}})(FL),containers:{TOC:{doNotHide:!0,name:"LayerDownload"},MapFooter:{name:"LayerDownload",position:1,tool:(0,d.connect)((0,N.zB)({active:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.exportDataResults)||void 0===r?void 0:r.enabled},showInfoBubble:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.showInfoBubble},infoBubbleMessage:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.infoBubbleMessage},checkingExportDataEntries:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingExportDataEntries},results:sL,currentLocale:ee.Pz}),{onToggle:O.Xi.bind(null,"exportDataResults","enabled"),onActive:function(){return{type:V_}},onRemoveResult:function(e){return{type:U_,id:e}}})((function(e){var t=e.active,r=void 0!==t&&t,n=e.showInfoBubble,o=void 0!==n&&n,i=e.infoBubbleMessage,a=void 0===i?{}:i,l=e.checkingExportDataEntries,c=e.results,s=void 0===c?[]:c,p=e.currentLocale,f=e.onToggle,d=void 0===f?function(){}:f,y=e.onActive,m=void 0===y?function(){}:y,b=e.onRemoveResult;return u().useEffect((function(){r&&m()}),[r]),u().createElement(u().Fragment,null,s.length>0?u().createElement("div",{id:"mapstore-export-data-results-button-container"},u().createElement(Ze.Z,{placement:"left",overlay:u().createElement(h.Tooltip,{id:"mapstore-export-data-results-tooltip"},u().createElement(v.Z,{msgId:"exportDataResults.title"}))},u().createElement(h.Button,{bsStyle:"primary",bsSize:"small",onClick:function(){return d()}},u().createElement(h.Glyphicon,{glyph:"download"}))),u().createElement(_L,{show:o,className:"mapstore-export"},u().createElement(LL,a))):null,u().createElement(ze.Z,{id:"mapstore-export-data-results",style:{display:r?"block":"none"},draggable:!1,modal:!0},u().createElement("span",{role:"header"},u().createElement("span",{className:"about-panel-title"},u().createElement(v.Z,{msgId:"exportDataResults.title"})),u().createElement("button",{onClick:function(){return d()},className:"settings-panel-close close"},u().createElement(h.Glyphicon,{glyph:"1-close"}))),u().createElement("div",{role:"body"},u().createElement(RL,{loading:l,results:s,currentLocale:p,onRemoveResult:b}))))}))}},epics:a,reducers:{layerdownload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{downloadOptions:{singlePage:!0}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D_:return PM(PM({},e),{},{loading:!0});case N_:return PM(PM({},e),{},{downloadOptions:PM(PM({},e.downloadOptions),{},jM({},t.key,t.value))});case __:return PM(PM({},e),{},{downloadOptions:{singlePage:!0}});case L_:return PM(PM({},e),{},{layer:t.layer,wfsFormats:[],formatsLoading:!0});case R_:return PM(PM({},e),{},{loading:!1});case M_:return PM(PM({},e),{},{wfsFormats:t.wfsFormats,formatsLoading:!1});case Z_:return PM(PM({},e),{},{service:t.service});case F_:return PM(PM({},e),{},{checkingWPSAvailability:t.checking});case G_:return PM(PM({},e),{},{results:t.results});case B_:return PM(PM({},e),{},{results:[].concat(wM(e.results||[]),[t.result])});case z_:var r=(0,fe.findIndex)(e.results||[],{id:t.id});return PM(PM({},e),{},{results:r>-1?[].concat(wM(e.results.slice(0,r)),[PM(PM({},e.results[r]),t.newProps||{})],wM(e.results.slice(r+1))):e.results});case U_:return PM(PM({},e),{},{results:(e.results||[]).filter((function(e){return e.id!==t.id}))});case W_:return PM(PM({},e),{},{results:(e.results||[]).filter((function(e){return-1===(0,fe.findIndex)(t.ids,(function(t){return t===e.id}))}))});case Y_:return PM(PM({},e),{},{showInfoBubble:t.show});case K_:return PM(PM({},e),{},{infoBubbleMessage:{msgId:t.msgId,msgParams:t.msgParams,level:t.level}});case q_:return PM(PM({},e),{},{checkingExportDataEntries:t.checking});default:return e}}}});var xM=r(73443),TM=r(25108),kM=r(43892);function IM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function AM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?IM(Object(r),!0).forEach((function(t){FM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function FM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const DM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case kM.W:return AM(AM({},e),{},{loading:!0});case kM.Zf:return AM(AM({},e),{},{error:null,data:t.data,loading:!1});case kM.Eu:return AM(AM({},e),{},{data:null,error:t.error,loading:!1});case kM.Vy:return AM(AM({},e),{},{data:AM(AM({},e.data),t.properties)});case kM.YB:return AM(AM({},e),{},{type:t.resourceType});case kM.xm:return AM(AM({},e),{},{isNew:!0});case kM._f:return AM(AM({},e),{},{id:t.id});case kM.ek:return AM(AM({},e),{},{permissions:t.permissions});default:return e}};var RM=r(62170),NM=r(12547),_M=r(36368);function LM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZM(){return(ZM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var GM=(0,d.connect)((0,N.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.save)||void 0===r?void 0:r.enabled},J._H,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,r,n,o,i,a,l){return{enabled:e,contentId:l||(null==t?void 0:t.id),resource:r,loading:n,saving:o,error:i,success:a}})),{onClose:O.Xi.bind(null,"save",null),onInit:xM.Pg,onSave:xM.Vj,onClear:xM.rG})((function(e){return u().createElement(_M.Z,ZM({},e,{update:!0,labelId:"save"}))}));const BM=(0,E.rx)("Save",{component:GM,containers:{BurgerMenu:{name:"save",position:30,text:u().createElement(v.Z,{msgId:"save"}),icon:u().createElement(h.Glyphicon,{glyph:"floppy-open"}),action:O.Xi.bind(null,"save",null),selector:(0,N.P1)(ne.jl,(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t,r;return null==e||null===(t=e.gnresource)||void 0===t||null===(r=t.permissions)||void 0===r?void 0:r.canEdit}),(function(e){var t,r;return null==e||null===(t=e.gnresource)||void 0===t||null===(r=t.permissions)||void 0===r?void 0:r.type}),(function(e,t,r,n){return{style:!e||t||!r&&n?{display:"none"}:{}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LM(Object(r),!0).forEach((function(t){MM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},NM.ZP),reducers:{gnresource:DM,gnsave:RM.Z,controls:TM.Z}});function zM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function UM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WM(){return(WM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var VM=(0,d.connect)((0,N.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.saveAs)||void 0===r?void 0:r.enabled},J._H,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,r,n,o,i,a,l){return{enabled:e,contentId:l||(null==t?void 0:t.id),resource:r,loading:n,saving:o,error:i,success:a}})),{onClose:O.Xi.bind(null,"saveAs",null),onInit:xM.Pg,onSave:xM.Vj,onClear:xM.rG})((function(e){return u().createElement(_M.Z,WM({},e,{labelId:"saveAs"}))}));const qM=(0,E.rx)("SaveAs",{component:VM,containers:{BurgerMenu:{name:"saveAs",position:30,text:u().createElement(v.Z,{msgId:"saveAs"}),icon:u().createElement(h.Glyphicon,{glyph:"floppy-open"}),action:O.Xi.bind(null,"saveAs",null),selector:(0,N.P1)(ne.jl,(function(e){return{style:e?{}:{display:"none"}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zM(Object(r),!0).forEach((function(t){UM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},NM.ZP),reducers:{gnresource:DM,gnsave:RM.Z,controls:TM.Z}});var HM=(0,Kr.Z)(Fk());const $M=function(e){var t=e.shareUrl,r=void 0===t?"":t,n=e.copied,o=void 0!==n&&n,i=e.onCopy,a=void 0===i?function(){}:i,l=e.onMouseLeave,c=void 0===l?function(){}:l;return u().createElement(HM,{text:r,tooltipId:o?"share.msgCopiedUrl":"share.msgToCopyUrl",tooltipPosition:"bottom",key:o.toString(),onCopy:function(){return a(r)}},u().createElement(qe.Z,{bsStyle:"primary",onMouseLeave:function(){return c()}},u().createElement(h.Glyphicon,{glyph:"copy"})))};function YM(e){return(YM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QM(e,t){return(QM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JM(e,t){return!t||"object"!==YM(t)&&"function"!=typeof t?eZ(e):t}function eZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tZ(e){return(tZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nZ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QM(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tZ(n);if(o){var r=tZ(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return JM(this,e)});function a(){var e;KM(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return rZ(eZ(e=i.call.apply(i,[this].concat(r))),"state",{copied:!1,forceDrawer:!1,connections:!1}),rZ(eZ(e),"renderTools",(function(){return u().createElement(u().Fragment,null,e.props.showTOCToggle&&u().createElement(h.Checkbox,{checked:e.state.forceDrawer,onChange:function(){return e.setState({forceDrawer:!e.state.forceDrawer})}},u().createElement(v.Z,{msgId:"share.forceDrawer"})),e.props.showConnectionsParamToggle&&u().createElement(h.Checkbox,{checked:e.state.connections,onChange:function(){return e.setState({connections:!e.state.connections})}},u().createElement(v.Z,{msgId:"share.showConnections"})))})),rZ(eZ(e),"generateUrl",(function(){var t=ek.parse(e.props.shareUrl,!0);return e.state.forceDrawer&&(t.query.forceDrawer=!0),e.state.connections&&(t.query.connections=!0),ek.format(t)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t='<iframe style="border: none;" height="400" width="600" src="'+this.generateUrl(this.props.shareUrl)+'"></iframe>';return u().createElement("div",{className:"input-link"},u().createElement("div",{className:"input-link-head"},u().createElement("h4",null,u().createElement(v.Z,{msgId:"share.embeddedLinkTitle"})),u().createElement($M,{copied:this.state.copied,shareUrl:t,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),u().createElement("div",{className:"input-link-tools"},this.renderTools()),u().createElement("pre",null,u().createElement("code",null,t)))}}])&&XM(t.prototype,r),a}(u().Component);rZ(nZ,"propTypes",{shareUrl:f().string,showTOCToggle:f().bool,showConnectionsParamToggle:f().bool}),rZ(nZ,"defaultProps",{showTOCToggle:!0,shareUrl:""});const oZ=nZ;function iZ(e){return(iZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cZ(e,t){return(cZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sZ(e,t){return!t||"object"!==iZ(t)&&"function"!=typeof t?uZ(e):t}function uZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pZ(e){return(pZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dZ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cZ(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pZ(n);if(o){var r=pZ(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sZ(this,e)});function a(){var e;aZ(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fZ(uZ(e=i.call.apply(i,[this].concat(r))),"state",{copied:!1}),e}return t=a,(r=[{key:"render",value:function(){var e=this;return u().createElement("div",{className:"input-link"},u().createElement("div",{className:"input-link-head"},u().createElement("h4",null,u().createElement(v.Z,{msgId:"share.directLinkTitle"})),u().createElement($M,{copied:this.state.copied,shareUrl:this.props.shareUrl,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),u().createElement("pre",{style:{padding:0}},u().createElement(h.FormControl,{readOnly:!0,type:"text",value:this.props.shareUrl,onFocus:function(e){return e.target.select()}})))}}])&&lZ(t.prototype,r),a}(u().Component);fZ(dZ,"propTypes",{shareUrl:f().string});const yZ=dZ;function mZ(e){var t=e.resourceId,r=e.pathTemplate,n=e.enabled,o=e.onClose,i=function(e){var t=e.resourceId,r=e.pathTemplate,n=ek.parse(location.href),o=n.host,i=n.protocol,a=r.replace(/\{id\}/g,t);return ek.format({host:o,protocol:i,pathname:a})}({resourceId:t,pathTemplate:r});return u().createElement(g.Z,{modalClassName:"gn-share-modal",title:u().createElement(v.Z,{msgId:"share.title"}),show:n,fitContent:!0,clickOutEnabled:!1,onClose:function(){return o()}},u().createElement(yZ,{shareUrl:i}),u().createElement(oZ,{showTOCToggle:!1,shareUrl:i}))}mZ.propTypes={resourceId:f().oneOfType([f().number,f().string]),pathTemplate:f().string,enabled:f().bool,onClose:f().func},mZ.defaultProps={resourceId:null,pathTemplate:"/apps/{id}/embed",enabled:!1,onClose:function(){}};var bZ=(0,d.connect)((0,N.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.share)||void 0===r?void 0:r.enabled},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id},J._H],(function(e,t,r){return{enabled:e,resourceId:t||(null==r?void 0:r.id)}})),{onClose:O.Xi.bind(null,"share",null)})(mZ);const gZ=(0,E.rx)("Share",{component:bZ,containers:{BurgerMenu:{name:"share",position:1e3,text:u().createElement(v.Z,{msgId:"share.title"}),icon:u().createElement(h.Glyphicon,{glyph:"share-alt"}),action:O.Xi.bind(null,"share",null),selector:(0,N.P1)((function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}),J._H,(function(e,t,r){return{style:!e&&(t||null!=r&&r.id)?{}:{display:"none"}}}))}},epics:{},reducers:{controls:TM.Z}});var vZ=r(65986),hZ=r(75751),OZ=r(46618),wZ=r(77314),EZ=r(79870),SZ={plugins:{AddGroupPlugin:D,IdentifyPlugin:R.Z,TOCPlugin:Hr,MapPlugin:$r.Z,ToolbarPlugin:Yr.Z,DrawerMenuPlugin:zn,ZoomAllPlugin:Un.Z,MapLoadingPlugin:Wn.Z,OmniBarPlugin:Vn.default,BackgroundSelectorPlugin:qn.Z,FullScreenPlugin:Hn.Z,ZoomInPlugin:$n.Z,ZoomOutPlugin:Yn.Z,ExpanderPlugin:Kn.Z,BurgerMenuPlugin:Xn.default,UndoPlugin:Co,RedoPlugin:Co,ScaleBoxPlugin:xo.Z,MapFooterPlugin:To.Z,PrintPlugin:ko.Z,MeasurePlugin:qi,FilterLayerPlugin:Hi,TOCItemsSettingsPlugin:pb,WidgetsPlugin:Yb,WidgetsBuilderPlugin:PS,WidgetsTrayPlugin:cP,NotificationsPlugin:PP,FeatureEditorPlugin:ax,QueryPanelPlugin:kk,SavePlugin:BM,SaveAsPlugin:qM,MetadataExplorerPlugin:TA,GridContainerPlugin:ZA,StyleEditorPlugin:XA,TimelinePlugin:QA.Z,PlaybackPlugin:JA.Z,MousePositionPlugin:wF,SearchPlugin:mR,SearchServicesConfigPlugin:FN,SwipePlugin:f_,LocatePlugin:I_,SharePlugin:gZ,LayerDownloadPlugin:CM,AddReducersAndEpics:{reducers:{security:vZ.Z,maps:hZ.Z,maplayout:OZ.Z},epics:l.ZP}},requires:{ReactSwipe:wZ.Z,SwipeHeader:EZ.Z}};const PZ=c.A?(0,c.A)(SZ):SZ},55035:(e,t,r)=>{"use strict";r.d(t,{zL:()=>o,mk:()=>i,GG:()=>a}),r(8575);var n={},o=function(e){return e},i=function(e,t){n[e]=t},a=function(e){return n[e]}},29896:(e,t,r)=>{"use strict";r.d(t,{aK:()=>o}),r(8575),r(9626);var n={},o=function(e,t){n[e]=t}},64240:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"\r\n.msgapi #mapstore-layer-settings {\r\n    min-width: 400px;\r\n}\r\n\r\n.msgapi .portal-dialog {\r\n    position: absolute;\r\n}\r\n\r\n@media all and (min-width: 635px) {\r\n    .msgapi .portal-dialog {\r\n        left: calc(50% - 315px);\r\n        top: 100px;\r\n        max-width: 630px;\r\n        background-color: #fff;\r\n    }\r\n}\r\n\r\n@media all and (max-width: 634px) {\r\n    .msgapi .portal-dialog {\r\n        width: 100%;\r\n    }\r\n}\r\n",""])},83775:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi #mapstore-elevation {\r\n    width: 100%;\r\n    /*margin-top: -46px;*/\r\n    height: 80px;\r\n    padding: 0 5px;\r\n}\r\n\r\n.msgapi label#mapstore-elevation-label {\r\n    margin-top: 10px;\r\n}\r\n\r\n.msgapi .custom-tooltip {\r\n    width: auto;\r\n    margin: 0;\r\n    line-height: 24px;\r\n    border: 1px solid #C1C1C1;\r\n    background-color: rgba(255, 255, 255, 0.8);\r\n    padding: 5px;\r\n}\r\n.msgapi .custom-tooltip  .label {\r\n  margin: 0;\r\n  color: #82CA9D;\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n}\r\n",""])},59297:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"\r\n.msgapi .featuregrid-toolbar {\r\n    margin-top: 5px;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.msgapi #featuregrid-toolbar .btn {\r\n    overflow: hidden;\r\n}\r\n",""])},28492:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"",""])},74704:(e,t,r)=>{(e.exports=r(9252)()).push([e.id," .msgapi #mapstore-mouseposition {\r\n    z-index: 10;\r\n    top: -10px;\r\n    right: 45%;\r\n    position: absolute;\r\n    margin: 8px;\r\n    text-shadow: -1px -1px 1px #000,\r\n                  1px -1px 1px #000,\r\n                 -1px  1px 1px #000,\r\n                  1px  1px 1px #000;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .label {\r\n    max-width: 350px;\r\n    min-width: 200px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    vertical-align: middle;\r\n\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .label-info {\r\n    background-color:rgba(91,192,222,0);\r\n    color: white;\r\n    font-size: 110%;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition h5 {\r\n    display: inline-block;\r\n}\r\n\r\n\r\n.msgapi #mapstore-mousepositionsettings .form-group {\r\n    margin-bottom: 0 !important;\r\n}\r\n\r\n.msgapi #mapstore-mousepositionsettings select, .msgapi #mapstore-mousepositionsettings button {\r\n    width: 60% !important;\r\n    float: right;\r\n    height: 35px;\r\n}\r\n\r\n.msgapi #mapstore-mousepositionsettings label {\r\n    width: 100% !important;\r\n}\r\n\r\n\r\n.msgapi #mapstore-mouseposition .label-info {\r\n    white-space: normal;\r\n    color: black;\r\n    font-size: 110%;\r\n    padding: 0;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition {\r\n    bottom: 5px;\r\n    right: 264px;\r\n    top: auto;\r\n    margin: 0;\r\n    text-shadow: none;\r\n    background-color: white;\r\n    width: 160px;\r\n    height: 46px;\r\n    padding-left: 5px;\r\n    padding-top: 2px;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition h5 {\r\n    margin-top: 5px;\r\n}\r\n\r\n.msgapi .mouseposition-separator {\r\n    display: block;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition-mobile {\r\n        bottom: 25px;\r\n        right: 30px;\r\n        z-index: 10;\r\n        position: absolute;\r\n        text-shadow: -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000, 1px 1px 1px #000;\r\n    }\r\n\r\n.msgapi #mapstore-mouseposition-mobile .label {\r\n        display: inline-block;\r\n        max-width: 280px;\r\n        min-width: 200px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        vertical-align: middle;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition-mobile .label-info {\r\n        background-color:rgba(91,192,222,0);\r\n        color: white;\r\n        font-size: 90%;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .form-group {\r\n    float: right;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .form-group .control-label {\r\n    display: none;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .form-group select {\r\n    width: 90px;\r\n    font-size: 11px;\r\n    padding: 2px;\r\n}\r\n",""])},85323:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,'\r\n\r\n.msgapi .ql-snow .ms-ql-iframe-tooltip[data-mode=video]::before {\r\n    content: "Enter iframe url:";\r\n}\r\n\r\n\r\n',""])},31667:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi .mapstore-filter input::-ms-clear,\r\n.msgapi .mapstore-filter input::-ms-reveal {\r\n  display: none;\r\n}\r\n",""])},15198:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"/* Menu Button */\r\n.msgapi .drawer-menu-button {\r\n    position: absolute;\r\n    z-index:1000;\r\n    left: 30px;\r\n    top: 8px;\r\n    width:30px;\r\n    background: transparent;\r\n    outline: none;\r\n    border: transparent;\r\n    font-size: 14px;\r\n}\r\n\r\n.msgapi .drawer-menu-button:hover {\r\n    background: transparent;\r\n}\r\n\r\n.msgapi #drawer-menu-button:active{\r\n    box-shadow: none;\r\n}\r\n\r\n.msgapi #mapstore-drawermenu > div > div:nth-child(2) {\r\n    display: none;\r\n}\r\n\r\n.msgapi .nav-content #background-switcher .thumbnail {\r\n    border-radius: 0 !important;\r\n    margin-bottom: 40px;\r\n    width: 220px !important;\r\n}\r\n.msgapi .nav-content #background-switcher .thumbnail img {\r\n    border-radius: 0 !important;\r\n    height: 90px;\r\n    width: 220px !important;\r\n}\r\n\r\n.msgapi .nav-content #background-switcher .thumbnail .caption {\r\n    font-size: 14px !important;\r\n    text-align: left !important;\r\n    top: -20px !important;\r\n    position: absolute !important;\r\n}\r\n\r\n.msgapi .nav-content #background-switcher {\r\n    margin-top: 10px;\r\n}\r\n\r\n.msgapi #mapstore-drawermenu .panel {\r\n    border: none;\r\n    box-shadow: none;\r\n}\r\n\r\n.msgapi div.nav-menu {\r\n    -webkit-transform:   translate3d(300px, 0, 0);\r\n    -moz-transform: \t translate3d(300px, 0, 0);\r\n    -ms-transform: \t\t translate3d(300px, 0, 0);\r\n    -o-transform: \t\t translate3d(300px, 0, 0);\r\n    box-shadow: 2px 0px 15px #A7A7A7;\r\n}\r\n\r\n.msgapi .nav-menu  .navHeader {\r\n    height: 50px;\r\n}\r\n.msgapi .nav-menu > .nav-content .navHeader .title{\r\n    font-size: 16px;\r\n    position: absolute;\r\n    margin: 13px;\r\n    font-weight: bold;\r\n}\r\n.msgapi .nav-content  .section {\r\n    margin-bottom: 2px;\r\n}\r\n.msgapi .nav-content  .section .sectionHeader{\r\n    padding: 5px;\r\n    cursor: pointer;\r\n}\r\n.msgapi .nav-content .section .sectionHeader>.glyphicon{\r\n    /* Firefox */\r\n    -moz-transition: all .3s ease;\r\n    /* WebKit */\r\n    -webkit-transition: all .3s ease;\r\n    /* Opera */\r\n    -o-transition: all .3s ease;\r\n    /* Standard */\r\n    transition: all .3s ease;\r\n}\r\n.msgapi .nav-content  .section .sectionTitle{\r\n    padding-left: 10px;\r\n\r\n}\r\n.msgapi .nav-content  .section .sectionContent{\r\n    -moz-transition: max-height .3s ease;\r\n    -webkit-transition: max-height .3s ease;\r\n    -o-transition: max-height .3s ease;\r\n    transition: max-height .3s ease;\r\n\r\n    box-shadow: inset 0px 0px 10px rgba(0,0,0,.5);\r\n    padding: 5px;\r\n}\r\n\r\n.msgapi .navButtons {\r\n    float: right;\r\n}\r\n\r\n.msgapi #drawer-menu-button {\r\n     position: absolute;\r\n}\r\n",""])},98065:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi #locate-btn {\r\n    position: absolute;\r\n    z-index: 1000;\r\n    right: 10px;\r\n    bottom: 150px;\r\n}\r\n\r\n.msgapi #mapstore-toolbar #locate-btn {\r\n    position: static;\r\n}\r\n",""])},85985:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi div.record-grid {\r\n    padding-left: 0;\r\n    padding-right: 0;\r\n}\r\n\r\n.msgapi div.record-grid .record-item{\r\n    height: auto;\r\n}\r\n.msgapi div.record-grid .record-item .panel-body{\r\n    padding: 0;\r\n}\r\n\r\n.msgapi #mapstore-catalog-panel button.search-button {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.msgapi #mapstore-catalog-panel .record-item {\r\n    min-height: 150px;\r\n}\r\n.msgapi #catalog-root {\r\n    position: static!important;\r\n}\r\n\r\n/*\r\n!important is needed because the library we used\r\nuse inline style which cannot be overridden unless\r\nwe use !important*/\r\n@media (max-width: 500px) {\r\n    .msgapi div .catalog-sidebar.nav-menu {\r\n        width: 100% !important\r\n    }\r\n}\r\n\r\n.msgapi #mapstore-metadata-explorer{\r\n    margin-bottom: 0\r\n}\r\n",""])},12485:e=>{e.exports='<html>\r\n  <head>\r\n    <title>Geoserver GetFeatureInfo output</title>\r\n  </head>\r\n    <style type="text/css">\r\n    \ttable.featureInfo, table.featureInfo td, table.featureInfo th {\r\n    \t\tborder:1px solid #ddd;\r\n    \t\tborder-collapse:collapse;\r\n    \t\tmargin:0;\r\n    \t\tpadding:0;\r\n    \t\tfont-size: 90%;\r\n    \t\tpadding:.2em .1em;\r\n    \t}\r\n    \ttable.featureInfo th {\r\n    \t    padding:.2em .2em;\r\n    \t\tfont-weight:bold;\r\n    \t\tbackground:#eee;\r\n    \t}\r\n    \ttable.featureInfo td{\r\n    \t\tbackground:#fff;\r\n    \t}\r\n    \ttable.featureInfo tr.odd td{\r\n    \t\tbackground:#eee;\r\n    \t}\r\n    \ttable.featureInfo caption{\r\n    \t\ttext-align:left;\r\n    \t\tfont-size:100%;\r\n    \t\tfont-weight:bold;\r\n    \t\tpadding:.2em .2em;\r\n    \t}\r\n    </style>\r\n  <body>\r\n    <table class="featureInfo">\r\n      <caption class="featureInfo">states</caption>\r\n      <tr>\r\n        <th>fid</th>\r\n          <th >STATE_NAME</th>\r\n          <th >STATE_FIPS</th>\r\n          <th >SUB_REGION</th>\r\n          <th >STATE_ABBR</th>\r\n          <th >LAND_KM</th>\r\n      </tr>\r\n      <tr>\r\n        <td>states.29</td>\r\n        <td>Wyoming</td>\r\n        <td>56</td>\r\n        <td>Mtn</td>\r\n        <td>WY</td>\r\n        <td>251500.801</td>\r\n      </tr>\r\n    </table>\r\n    <br/>\r\n  </body>\r\n</html>'},20135:e=>{e.exports='{\r\n  "type": "FeatureCollection",\r\n  "totalFeatures": "unknown",\r\n  "features": [\r\n      {\r\n    "type": "Feature",\r\n    "id": "states.29",\r\n    "geometry": {\r\n      "type": "MultiPolygon",\r\n      "coordinates": [\r\n        [\r\n          [\r\n            [-1.15831389980175E7, 5115884.78673627],\r\n            [-1.158334883525764E7, 5095927.61163692],\r\n            [-1.158318319185534E7, 5069757.00399456],\r\n            [-1.158292671174856E7, 5012817.65726345],\r\n            [-1.168119588467766E7, 5011501.68893432],\r\n            [-1.171952218348237E7, 5011805.51696107],\r\n            [-1.182245230349099E7, 5012358.03633596],\r\n            [-1.183643948618967E7, 5012535.77548496],\r\n            [-1.189613934986567E7, 5012118.79424704],\r\n            [-1.194496385588862E7, 5012366.44384074],\r\n            [-1.201338092624966E7, 5012844.6510808],\r\n            [-1.213912753436923E7, 5012116.58180143],\r\n            [-1.224530617975818E7, 5011994.45558498],\r\n            [-1.225209889508638E7, 5012037.8190659],\r\n            [-1.23620611786479E7, 5011845.33978484],\r\n            [-1.236213086464914E7, 5050542.48847943],\r\n            [-1.236206540878855E7, 5098070.44035716],\r\n            [-1.236180135895639E7, 5160419.97558219],\r\n            [-1.23615872915756E7, 5236675.5279452],\r\n            [-1.236185657342383E7, 5315010.76063796],\r\n            [-1.236166543785814E7, 5355424.25785557],\r\n            [-1.236158395199088E7, 5390784.55533999],\r\n            [-1.236198815306194E7, 5462754.83859328],\r\n            [-1.236211728367126E7, 5538995.97145504],\r\n            [-1.236212318360428E7, 5568867.31982516],\r\n            [-1.236232444924363E7, 5620854.95417318],\r\n            [-1.229288824894438E7, 5620316.91583206],\r\n            [-1.2288781895568E7, 5621314.94100872],\r\n            [-1.224456390139357E7, 5621970.64383454],\r\n            [-1.222273014174734E7, 5621455.36603028],\r\n            [-1.209203215399677E7, 5621150.43241323],\r\n            [-1.205128866376898E7, 5621546.67495262],\r\n            [-1.201067341359458E7, 5621492.04691732],\r\n            [-1.182865814246373E7, 5620919.18090556],\r\n            [-1.180215653392956E7, 5621084.9446589],\r\n            [-1.169794913408358E7, 5621495.03806919],\r\n            [-1.169313957548385E7, 5621693.24344854],\r\n            [-1.158383374295954E7, 5621104.15015297],\r\n            [-1.158379210946998E7, 5554761.48947335],\r\n            [-1.158396710370951E7, 5493626.06569343],\r\n            [-1.158382183177402E7, 5488039.68771347],\r\n            [-1.158379377926234E7, 5442710.58976854],\r\n            [-1.158361967557875E7, 5388962.94229949],\r\n            [-1.158375815702529E7, 5385191.61647555],\r\n            [-1.158342865133254E7, 5312442.79715209],\r\n            [-1.15834303211249E7, 5253508.54391938],\r\n            [-1.158312797738791E7, 5160957.12459852],\r\n            [-1.15831389980175E7, 5115884.78673627]\r\n          ]\r\n        ]\r\n      ]\r\n    },\r\n    "geometry_name": "the_geom",\r\n    "properties": {\r\n      "STATE_NAME": "Wyoming",\r\n      "STATE_FIPS": "56",\r\n      "SUB_REGION": "Mtn",\r\n      "STATE_ABBR": "WY",\r\n      "LAND_KM": 251500.801,\r\n      "WATER_KM": 1848.149,\r\n      "PERSONS": 453588,\r\n      "FAMILIES": 119825,\r\n      "HOUSHOLD": 168839,\r\n      "MALE": 227007,\r\n      "FEMALE": 226581,\r\n      "WORKERS": 164561,\r\n      "DRVALONE": 153679,\r\n      "CARPOOL": 28109,\r\n      "PUBTRANS": 2963,\r\n      "EMPLOYED": 207868,\r\n      "UNEMPLOY": 13112,\r\n      "SERVICE": 71419,\r\n      "MANUAL": 29157,\r\n      "P_MALE": 0.5,\r\n      "P_FEMALE": 0.5,\r\n      "SAMP_POP": 83202,\r\n      "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\r\n    }\r\n  }],\r\n  "crs": {\r\n    "type": "name",\r\n    "properties": {\r\n      "name": "urn:ogc:def:crs:EPSG::3857"\r\n    }\r\n  },\r\n  "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\r\n}'},71062:e=>{e.exports="Results for FeatureType 'http://www.openplans.org/topp:states':\r\n--------------------------------------------\r\nthe_geom = [GEOMETRY (Polygon) with 48 points]\r\nSTATE_NAME = Wyoming\r\nSTATE_FIPS = 56\r\nSUB_REGION = Mtn\r\nSTATE_ABBR = WY\r\nLAND_KM = 251500.801\r\nWATER_KM = 1848.149\r\nPERSONS = 453588.0\r\nFAMILIES = 119825.0\r\nHOUSHOLD = 168839.0\r\nMALE = 227007.0\r\nFEMALE = 226581.0\r\nWORKERS = 164561.0\r\nDRVALONE = 153679.0\r\nCARPOOL = 28109.0\r\nPUBTRANS = 2963.0\r\nEMPLOYED = 207868.0\r\nUNEMPLOY = 13112.0\r\nSERVICE = 71419.0\r\nMANUAL = 29157.0\r\nP_MALE = 0.5\r\nP_FEMALE = 0.5\r\nSAMP_POP = 83202.0\r\n--------------------------------------------"},8380:(e,t,r)=>{var n=r(64240);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},57845:(e,t,r)=>{var n=r(83775);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},49548:(e,t,r)=>{var n=r(59297);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},65207:(e,t,r)=>{var n=r(28492);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},94889:(e,t,r)=>{var n=r(74704);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},89531:(e,t,r)=>{var n=r(85323);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},61057:(e,t,r)=>{var n=r(31667);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},16385:(e,t,r)=>{var n=r(15198);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},52780:(e,t,r)=>{var n=r(98065);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},65288:(e,t,r)=>{var n=r(85985);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},3932:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/catalog/img/default.jpg"},97671:e=>{e.exports="data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Hh4dnZ2e7u7jc3NzMzM1dXV5qamn9/f8fHx05OTm5ubqGhoYKCgsrKylFRUTY2NnFxcerq6t/f3/b29l9fX+Li4vT09MTExLKystTU1PHx8QAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA"},18845:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/style/vector/iconNotFound.png"},24273:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woCDCsUqrUEAAAAAQxJREFUOMvN0iFLw1EUBfCf02Q0LGhQQVZekiU/gTAYImpasMi6VVBhwSCsi0kQbIJFsBoMBjHdpKDJMjBaxM3yhCn7z4HF29695xzuue/wxxofNkwp1crl8kKn03kswowVEEvYx25utdCKiO6vAimlKZxh+cfoCo2IeC0USClVcY7Zgo2fsR4Rd1+NUh95CzdDyDCHm4z9LoAueiMcvpexAy0sZgvzBeQnrEXE/SALM3hHFZcDyJd59pFSmh5koY1b1FDHXl61m7+zjpWMaX+RJvoEGjjAKZawncFwjSM0cYidYTlYxQkCGzmt56hgMyIuRkliJZPKWeAlH+9hpChnkUkc52czIt78y/oEtThIARE8NNwAAAAASUVORK5CYII="},72810:()=>{},36631:()=>{},86799:()=>{}}]);