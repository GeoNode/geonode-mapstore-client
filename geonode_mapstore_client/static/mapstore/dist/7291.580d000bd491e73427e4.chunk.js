(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[7291],{85148:(t,n,e)=>{"use strict";e.d(n,{Qw:()=>l,jo:()=>m,m$:()=>y,AF:()=>g,WT:()=>b,ns:()=>p,RP:()=>v,aK:()=>h,oP:()=>O});var r=e(75110),o=e(22222),i=e(86494);function u(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return a(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function s(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){f(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function f(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var l=function(t,n){return function(e){return(0,i.get)(e,"dimension.data[".concat(n,"][").concat(t,"]"))}},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return(0,i.find)(t.dimensions||[],{name:n})},m=function(t,n){return function(e){return l(t.id,n)(e)||d(t,n)}},y=function(t){return(0,r.l2)(t).reduce((function(n,e){var r=m(e,"time")(t);return r?s(s({},n),{},f({},e.id,r)):n}),{})},g=function(t){return(0,r.l2)(t).filter((function(n){var e=(0,i.get)(t,"timeline.settings.showHiddenLayers"),r=d(n,"time");return(e||n.visibility)&&r}))},b=function(t){var n=(0,i.get)(t,"dimension.currentTime");return n&&n.split("/")[0]},p=function(t){return(0,i.get)(t,"dimension.offsetTime")},v=function(t){return!!p(t)},h=((0,o.P1)(y,(function(t){return Object.keys(t).reduce((function(n,e){return[].concat(u(n),u(t[e]&&t[e].values||[]))}),[]).sort()||[]})),function(t){return function(n){return u((0,i.get)(m(t,"time")(n),"values",[])).sort()}}),O=function(t,n){var e=l(n,"time")(t),r=e&&e.domain&&e.domain.split("--");if(r&&2===r.length)return r&&{start:r[0],end:r[1]};var o=e&&e.domain&&e.domain.split(",");return o&&o.length>0?{start:o[0],end:o[o.length-1]}:null}},97291:(t,n,e)=>{"use strict";e.d(n,{YK:()=>v,zb:()=>h,en:()=>O,cX:()=>j,__:()=>S,E2:()=>D,Li:()=>k,fP:()=>x,uy:()=>E,gB:()=>T,Ry:()=>I,m_:()=>_,dJ:()=>C,rV:()=>W,qJ:()=>N,pn:()=>q,F3:()=>F});var r=e(86494),o=e(22222),i=e(84715),u=e(90183),a=e(55237),c=e(85148),s=e(827),f=e(75110);function l(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?l(Object(e),!0).forEach((function(n){m(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function m(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function y(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return e}}(t,n)||b(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,n){if(t){if("string"==typeof t)return p(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?p(t,n):void 0}}function p(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var v=function(t){return(0,r.get)(t,"timeline.range")},h=function(t){return(0,r.get)(t,"timeline.settings.collapsed")},O=function(t){return(0,r.get)(t,"timeline.settings.autoSelect")},j=function(t){return(0,r.get)(t,"timeline.settings.mapSync")},w=function(t,n){return(t||[]).reduce((function(t,e){return[].concat(y(t),y(function(t,n){var e=g(t.split("/"),3),r=e[0],o=e[1],i=e[2];if(i&&"0"!==i){var u=(0,a.Xu)({start:r,end:o,duration:i},n),c=u.count,s=u.start,f=u.end;return c>50?[{start:r,end:o,duration:i,type:"range",content:"".concat(c," items")}]:(0,a.tr)({start:s,end:f,duration:i}).map((function(t){return{start:new Date(t),end:new Date(t),type:"point"}}))}return isNaN(new Date(r).getTime())?null:[{start:new Date(r),end:new Date(o||r),type:o?"range":"point"}]}(e,n)))}),[]).filter((function(t){return t&&t.start}))},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(t.domain&&t.domain.values)return w(t.domain.values,n);if(t.histogram&&t.histogram.domain&&t.histogram.values){var e=t.histogram.domain.split("/"),r=g(e,3),o=r[0],i=r[1],u=r[2],c=Math.max.apply(Math,y(t.histogram.values)),s=(0,a.jb)({start:o,end:i,duration:u});return t.histogram.values.map((function(t,n){return d(d({},s[n]),{},{type:"range",itemType:"histogram",count:t,className:"histogram-item",content:'<div><div class="histogram-box" style="height: '.concat(100*t/c,'%"></div> <span class="histogram-count">').concat(t,"</span></div>")})}))}return[]},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0;return t&&t.values||t&&t.domain&&!(0,a._q)(t.domain)?w(t.values||t.domain.split(","),n):e&&e.histogram?P(e,n):[]},S=(0,i.y)(c.m$,v,(function(t){return(0,r.get)(t,"timeline.rangeData")}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y(Object.keys(t).map((function(r){return A(t[r],n,e[r]).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(d({content:" "},t),{},{group:r})}))})).reduce((function(t,n){return[].concat(y(t),y(n))}),[]))})),D=function(t){return(0,r.get)(t,"timeline.loading")},k=function(t){return(0,r.get)(t,"timeline.selectedLayer")},x=function(t){return(0,f.CA)(t,k(t))},E=function(t){return x(t)&&x(t).name},T=function(t){return x(t)&&x(t).dimensions&&(0,r.head)(x(t).dimensions.filter((function(t){return"time"===t.name})))},I=function(t){return(0,r.get)(T(t),"source.url")},_=(0,o.P1)(c.WT,c.ns,(function(t,n){return{start:t,end:n}})),C=function(t){return(0,c.oP)(t,k(t))},W=c.AF,N=(0,o.P1)(W,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.length>0})),q=function(t){return!h(t)&&N(t)},F=function(t){return function(n){var e=((0,s.Od)(n)||{}).bbox;if(!e)return{};var o=(0,c.Qw)(t,"time")(n),i=(0,r.get)(o,"source.version"),a=Object.keys(e.bounds).reduce((function(t,n){return d(d({},t),{},m({},n,parseFloat(e.bounds[n])))}),{});if(!a||!j(n))return{};if("1.1"!==i){var f=(0,c.Qw)(t,"space")(n),l=(0,r.get)(f,"domain.CRS");if(!l||!a||!j(n))return{};var y=g((0,u.reprojectBbox)(a,(0,s.uy)(n),l),4),b=y[0],p=y[1],v=y[2],h=y[3];return v<b&&"EPSG:4326"===l&&(v+=360),{bbox:"".concat(b,",").concat(p,",").concat(v,",").concat(h),crs:l}}var O=a.minx,w=a.miny,P=a.maxx,A=a.maxy,S=e.crs;return{bbox:"".concat(O,",").concat(w,",").concat(P,",").concat(A,",").concat(S)}}}},84715:(t,n,e)=>{"use strict";e.d(n,{y:()=>a,o:()=>c});var r=e(86494),o=e(22222),i=function(t,n){return t===n},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return function(n,e){return Array.isArray(n)&&Array.isArray(e)?n===e||n.length===e.length&&n.reduce((function(n,r,o){return n&&t(r,e[o])}),!0):(0,r.isObject)(n)&&(0,r.isObject)(e)?n===e||Object.keys(n).length===Object.keys(e).length&&Object.keys(n).reduce((function(r,o){return r&&t(n[o],e[o])}),!0):n===e}},a=(0,o.wN)(o.PW,(function(t,n){return(0,r.isEqualWith)(t,n,u())})),c=function(t){return(0,o.wN)(o.PW,(function(n,e){return(0,r.isEqualWith)(n,e,u(t))}))}}}]);