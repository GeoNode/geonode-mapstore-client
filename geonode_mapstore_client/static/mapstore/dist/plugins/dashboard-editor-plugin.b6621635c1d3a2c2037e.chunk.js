(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[8225],{55927:(t,e,n)=>{"use strict";n.d(e,{BJ:()=>r,_y:()=>o,vk:()=>i,uI:()=>a,mg:()=>u,aR:()=>c,SW:()=>s,$l:()=>l,zX:()=>f,R4:()=>d,E9:()=>p,CP:()=>b,D_:()=>y,Nl:()=>v,G9:()=>h,gE:()=>g,pB:()=>m,GD:()=>O,sA:()=>A,o2:()=>D,rR:()=>S,vM:()=>w,AN:()=>E});var r="DASHBOARD:SET_AVAILABLE",o="DASHBOARD:SET_EDITING",i="DASHBOARD:SHOW_CONNECTIONS",a="DASHBOARD:TRIGGER_SAVE_MODAL",u="DASHBOARD:TRIGGER_SAVE_AS_MODAL",c="DASHBOARD:SAVE_DASHBOARD",s="DASHBOARD:SAVE_ERROR",l="DASHBOARD:DASHBOARD_SAVED",f="DASHBOARD:LOAD_DASHBOARD",d="DASHBOARD:DASHBOARD_RESET",p="DASHBOARD:DASHBOARD_LOADED",b="DASHBOARD:DASHBOARD_LOADING",y=function(t){return{type:o,editing:t}},v=function(t){return{type:r,available:t}},h=function(t){return{type:i,show:t}},g=function(t){return{type:a,show:t}},m=function(t){return{type:u,show:t}},O=function(t){return{type:s,error:t}},A=function(t){return{type:l,id:t}},D=function(t){return{type:f,id:t}},S=function(t,e){return{type:p,resource:t,data:e}},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";return{type:b,name:e,value:t}},E=function(t){return{type:"DASHBOARD:DASHBOARD_LOAD_ERROR",error:t}}},7691:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>M});var r=n(49977),o=n.n(r),i=n(57579),a=n(55927),u=n(82904),c=n(95797),s=n(97395),l=n(7878),f=n(63516),d=n(67306),p=n(74621),b=n(25958),y=n(24684),v=n(91312),h=n(89919),g=n(75982),m=["data"],O=["status","statusText","data","message"];function A(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function D(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P=function(t){var e=(0,b.JT)(t);return[e.search&&e.search.url,e.name]};const M={openDashboardWidgetEditor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getState,r=void 0===n?function(){}:n;return t.ofType(i.AE,i.dm).filter((function(){return(0,d.Wy)(r())})).switchMap((function(){return o().Observable.of((0,a.D_)(!0))}))},closeDashboardWidgetEditorOnFinish:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getState,r=void 0===n?function(){}:n;return t.ofType(i.Jm).filter((function(){return(0,d.Wy)(r())})).switchMap((function(){return o().Observable.of((0,a.D_)(!1))}))},initDashboardEditorOnNew:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getState,r=void 0===n?function(){}:n;return t.ofType(i.AE).filter((function(){return(0,d.Wy)(r())})).switchMap((function(t){return o().Observable.of((0,i.bS)(E(E({legend:!1,mapSync:!1,cartesian:!0,yAxis:!0},t),{},{type:void 0}),{step:0}))}))},closeDashboardEditorOnExit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getState,r=void 0===n?function(){}:n;return t.ofType(g.nk).filter((function(){return(0,d.Wy)(r())})).filter((function(){return(0,d.i$)(r())})).switchMap((function(){return o().Observable.of((0,a.D_)(!1))}))},handleDashboardWidgetsFilterPanel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getState,r=void 0===n?function(){}:n;return t.ofType(i.lG).filter((function(){return(0,d.Wy)(r())})).switchMap((function(){return o().Observable.of(c.gT.apply(void 0,D(P(r()))),(0,l.F)((0,b.um)(r())),(0,u.Xg)("queryPanel","enabled",!0)).concat(o().Observable.race(t.ofType(l.Wm).take(1),t.ofType(u.kM).filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.control,n=t.property;return"queryPanel"===e&&(!n||"enabled"===n)})).take(1)).switchMap((function(t){return(t.filterObj?o().Observable.of((0,i.Rz)("filter",t.filterObj)):o().Observable.empty()).merge(o().Observable.of((0,u.Xg)("widgetBuilder","enabled",!0)))}))).takeUntil(t.ofType(g.nk,i.dm).merge(t.ofType(u.kM).filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.control,n=t.property;return"widgetBuilder"===e&&0==!n})))).concat(o().Observable.of((0,u.Xg)("queryPanel","enabled",!1)))}))},filterAnonymousUsersForDashboard:function(t,e){return t.ofType(f.c8,f.Nv).filter((function(){return"/dashboard"===(0,y.F)(e.getState())})).switchMap((function(t){return function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(t),(0,p.jl)(e.getState())?o().Observable.empty():o().Observable.of((0,a.AN)({status:403}))}))},loadDashboardStream:function(t,e){var n=e.getState,r=void 0===n?function(){}:n;return t.ofType(a.zX).switchMap((function(t){var e=t.id;return(0,v.RX)(e).map((function(t){var e=t.data,n=A(t,m);return(0,a.rR)(n,e)})).let((0,h.hP)((0,a.vM)(!0,"loading"),(0,a.vM)(!1,"loading"),(function(t){var e=window.location.href.match("dashboard-embedded")?"dashboardEmbedded":"dashboard",n=e+".errors.loading.unknownError";return 403===t.status&&(n=e+".errors.loading.pleaseLogin",(0,p.jl)(r())&&(n=e+".errors.loading.dashboardNotAccessible")),404===t.status&&(n=e+".errors.loading.dashboardDoesNotExist"),o().Observable.of((0,s.vU)({title:e+".errors.loading.title",message:n}),(0,a.AN)(E(E({},t),{},{messageId:n})))})))}))},reloadDashboardOnLoginLogout:function(t){return t.ofType(a.zX).switchMap((function(e){var n=e.id;return t.ofType(f.XP,f.Nv).switchMap((function(){return o().Observable.of((0,a.o2)(n)).delay(1e3)})).takeUntil(t.ofType(g.nk))}))},saveDashboard:function(t){return t.ofType(a.aR).exhaustMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.resource;return(e.id?(0,v.id)(e):(0,v.SN)(e)).switchMap((function(t){return o().Observable.of((0,a.sA)(t),e.id?(0,a.gE)(!1):(0,a.pB)(!1),e.id?(0,a.o2)(t):(0,g.VF)("/dashboard/".concat(t))).merge(o().Observable.of((0,s.$Z)({id:"DASHBOARD_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(e.id?0:1e3))})).let((0,h.hP)((0,a.vM)(!0,"saving"),(0,a.vM)(!1,"saving"))).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.status,n=t.statusText,r=t.data,i=t.message,u=A(t,O);return o().Observable.of((0,a.GD)(e?{status:e,statusText:n,data:r}:i||u),(0,a.vM)(!1,"saving"))}))}))}}},89919:(t,e,n)=>{"use strict";n.d(e,{hP:()=>l});var r=n(84596),o=n.n(r),i=n(49977),a=n.n(i);function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.startWith.apply(t,u(e))},l=function(t,e,n){return function(r){return(n?s(r,o()(t)).catch(n):s(r,o()(t))).concat(a().Observable.from(o()(e)))}}},68143:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>B});var r=n(24852),o=n.n(r),i=n(67076),a=n(22222),u=n(71703),c=n(45697),s=n.n(c),l=n(22843),f=n(25958),d=n(67306),p=n(96311),b=n(57579),y=n(55927);const v=(0,i.compose)((0,u.connect)((function(){return{}}),{backFromWizard:function(){return(0,b.Rz)("layer",void 0)}}),(0,i.withProps)((function(t){var e=t.backFromWizard;return{exitButton:{onClick:void 0===e?function(){}:e,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToLayerSelection"}}})));var h=n(75480),g=n(71406),m=n(7691),O=n(24412),A=n(80717);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,i.compose)((0,u.connect)(p.Nb,{toggleConnection:b.w2,triggerShowConnections:y.G9}),(0,u.connect)(p.Tw),(0,i.withProps)((function(t){var e=t.availableDependencies;return{availableDependencies:(void 0===e?[]:e).filter((function(t){return"map"!==t}))}})),v)(g.Z),_=(0,i.compose)((0,u.connect)((0,a.P1)(d.P0,f.HU,d.DZ,f.ie,(function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{showConnections:t,hasConnections:r.length>0,hasWidgets:e,canEdit:n}})),{onShowConnections:y.G9,onAddWidget:b.A4}),(0,i.withProps)((function(t){var e=t.onAddWidget,n=void 0===e?function(){}:e,r=t.hasWidgets,o=t.canEdit,i=t.hasConnections,a=t.showConnections,u=t.onShowConnections,c=void 0===u?function(){}:u;return{buttons:[{glyph:"plus",tooltipId:"dashboard.editor.addACardToTheDashboard",bsStyle:"primary",visible:o,id:"ms-add-card-dashboard",onClick:function(){return n()}},{glyph:a?"bulb-on":"bulb-off",tooltipId:a?"dashboard.editor.hideConnections":"dashboard.editor.showConnections",bsStyle:a?"success":"primary",visible:!!r&&!!i||!o,onClick:function(){return c(!a)}}]}})))(A.Z),j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(u,t);var e,n,r,i,a=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(i){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return R(this,t)});function u(){return S(this,u),a.apply(this,arguments)}return e=u,(n=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var t=this;return this.props.editing?o().createElement("div",{className:"dashboard-editor de-builder"},o().createElement(T,{disableEmptyMap:this.props.disableEmptyMap,enabled:this.props.editing,onClose:function(){return t.props.setEditing(!1)},catalog:this.props.catalog})):o().createElement("div",{className:"ms-vertical-toolbar dashboard-editor de-toolbar",id:this.props.id},o().createElement(_,{transitionProps:!1,btnGroupProps:{vertical:!0},btnDefaultProps:{tooltipPosition:"right",className:"square-button-md",bsStyle:"primary"}}),this.props.loading?o().createElement(h.Z,{style:{position:"fixed",bottom:0}}):null)}}])&&w(e.prototype,n),u}(o().Component);M(j,"propTypes",{id:s().string,editing:s().bool,loading:s().bool,limitDockHeight:s().bool,fluid:s().bool,zIndex:s().number,dockSize:s().number,position:s().string,onMount:s().func,onUnmount:s().func,setEditing:s().func,dimMode:s().string,src:s().string,style:s().object,catalog:s().object,disableEmptyMap:s().bool}),M(j,"defaultProps",{id:"dashboard-editor",editing:!1,dockSize:500,loading:!0,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",onMount:function(){},onUnmount:function(){},setEditing:function(){}});var k=(0,u.connect)((0,a.P1)(d.i$,d.MZ,(function(t,e){return{editing:t,loading:e}})),{setEditing:y.D_,onMount:function(){return(0,y.Nl)(!0)},onUnmount:function(){return(0,y.Nl)(!1)}})(j);const B=(0,l.rx)("DashboardEditor",{component:k,reducers:{dashboard:O.Z},epics:m.ZP})},24412:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(55927),o=n(57579),i=n(61868),a=n(84596),u=n.n(a);const c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showConnections:!0},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case r.BJ:return(0,i.t8)("editor.available",e.available,t);case r._y:return(0,i.t8)("editing",e.editing,t);case o.wb:case o.Jm:case o.yY:return(0,i.t8)("editing",e.editing,t);case r.vk:return(0,i.t8)("showConnections",e.show,t);case r.uI:return(0,i.t8)("showSaveModal",e.show,(0,i.t8)("saveErrors",void 0,t));case r.mg:return(0,i.t8)("showSaveAsModal",e.show,(0,i.t8)("saveErrors",void 0,t));case r.E9:return(0,i.t8)("originalData",e.data,(0,i.t8)("resource",e.resource,t));case r.R4:return(0,i.t8)("originalData",void 0,(0,i.t8)("resource",void 0,t));case r.SW:return(0,i.t8)("saveErrors",u()(e.error),t);case r.$l:return(0,i.t8)("saveErrors",void 0,t);case r.CP:return(0,i.t8)("loading"===e.name?"loading":"loadFlags.".concat(e.name),e.value,(0,i.t8)("loading",e.value,t));default:return t}}},74621:(t,e,n)=>{"use strict";n.d(e,{np:()=>r,L3:()=>o,jl:()=>i,y8:()=>a,qg:()=>u}),n(27418),n(27361);var r=function(t){return t&&t.security&&t.security.user},o=function(t){return r(t)&&r(t).role},i=function(t){return t&&t.security&&t.security.user},a=function(t){return t.security&&t.security.token},u=function(t){return"ADMIN"===o(t)}}}]);