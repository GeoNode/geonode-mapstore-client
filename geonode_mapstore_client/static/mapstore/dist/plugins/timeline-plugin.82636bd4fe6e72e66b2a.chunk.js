(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4276],{80416:(e,t,n)=>{"use strict";n.d(t,{yS:()=>r,Zz:()=>o,ms:()=>i,ih:()=>a,OX:()=>c,sb:()=>u,K$:()=>s,k7:()=>l,cX:()=>f,x9:()=>p,vs:()=>m,oE:()=>d,Po:()=>y,qv:()=>b,cI:()=>v,g6:()=>g,I4:()=>h,l$:()=>O,Xv:()=>E,k3:()=>S,CQ:()=>P,R8:()=>w,HN:()=>T,sH:()=>R,c7:()=>j,_7:()=>k,eF:()=>A,O6:()=>_,ED:()=>I,RP:()=>D,sF:()=>L,VP:()=>N,He:()=>C,vO:()=>M,WO:()=>Z,bh:()=>Y,pV:()=>H,MK:()=>U,ZF:()=>G,tV:()=>V,Dv:()=>x,Yz:()=>W,kI:()=>$,XG:()=>z,A4:()=>B,Rp:()=>F,ct:()=>K,oh:()=>q,$h:()=>X,ud:()=>J,Qr:()=>Q,LR:()=>ee,nN:()=>te,UG:()=>ne,F5:()=>re,c9:()=>oe,Jh:()=>ie,Xy:()=>ae});var r="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",i="CHANGE_GROUP_PROPERTIES",a="TOGGLE_NODE",c="SORT_NODE",u="REMOVE_NODE",s="UPDATE_NODE",l="MOVE_NODE",f="LAYER_LOADING",p="LAYER_LOAD",m="LAYER_ERROR",d="ADD_LAYER",y="ADD_GROUP",b="REMOVE_LAYER",v="SHOW_SETTINGS",g="HIDE_SETTINGS",h="UPDATE_SETTINGS",O="REFRESH_LAYERS",E="LAYERS:UPDATE_LAYERS_DIMENSION",S="LAYERS_REFRESHED",P="LAYERS_REFRESH_ERROR",w="LAYERS:BROWSE_DATA",T="LAYERS:DOWNLOAD",R="LAYERS:CLEAR_LAYERS",j="LAYERS:SELECT_NODE",k="LAYERS:FILTER_LAYERS",A="LAYERS:SHOW_LAYER_METADATA",_="LAYERS:HIDE_LAYER_METADATA",I="LAYERS:UPDATE_SETTINGS_PARAMS";function D(e,t,n){return{type:v,node:e,nodeType:t,options:n}}function L(){return{type:g}}function N(e){return{type:h,options:e}}function C(e,t){return{type:r,newProperties:t,layer:e}}function M(e,t){return{type:o,layer:e,params:t}}function Z(e,t){return{type:i,newProperties:t,group:e}}function Y(e,t,n){return{type:a,node:e,nodeType:t,status:!n}}function H(e){return{type:"CONTEXT_NODE",node:e}}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:c,node:e,order:t,sortLayers:n}}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:u,node:e,nodeType:t,removeEmpty:n}}function V(e,t,n){return{type:s,node:e,nodeType:t,options:n}}function x(e,t,n){return{type:l,node:e,groupId:t,index:n}}function W(e){return{type:f,layerId:e}}function $(e,t){return{type:p,layerId:e,error:t}}function z(e,t,n){return{type:m,layerId:e,tilesCount:t,tilesErrorCount:n}}function B(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:d,layer:e,foreground:t}}function F(e,t,n){return{type:y,group:e,parent:t,options:n}}function K(e,t){return{type:r,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function q(e){return{type:S,layers:e}}function X(e,t){return{type:P,layers:e,error:t}}function J(e,t,n,r){return{type:E,dimension:e,value:t,options:n,layers:r}}function Q(e){return{type:w,layer:e}}function ee(e){return{type:T,layer:e}}function te(){return{type:R}}function ne(e,t,n){return{type:j,id:e,nodeType:t,ctrlKey:n}}function re(e){return{type:k,text:e}}function oe(e,t){return{type:A,metadataRecord:e,maskLoading:t}}function ie(){return{type:_}}function ae(e,t){return{type:I,newParams:e,update:t}}},1550:(e,t,n)=>{"use strict";n.d(t,{pP:()=>o,TR:()=>i,N7:()=>a,mq:()=>c,uv:()=>u,Qy:()=>s,IL:()=>l,Li:()=>f,OW:()=>p,ZO:()=>m,Um:()=>d,TF:()=>y,Ls:()=>b,Ec:()=>v,Eu:()=>g,JJ:()=>h,nZ:()=>O,YD:()=>E,GI:()=>S,Jb:()=>P,Uh:()=>w,LP:()=>T,xy:()=>R,o6:()=>j,FP:()=>k,Mo:()=>A,sO:()=>_,Px:()=>I,hd:()=>D,BV:()=>L,SO:()=>N,H0:()=>C,$X:()=>M,ou:()=>Z,NE:()=>Y});var r=n(97395),o="CHANGE_MAP_VIEW",i="CLICK_ON_MAP",a="CHANGE_MOUSE_POINTER",c="CHANGE_ZOOM_LVL",u="PAN_TO",s="ZOOM_TO_EXTENT",l="ZOOM_TO_POINT",f="CHANGE_MAP_CRS",p="CHANGE_MAP_SCALES",m="CHANGE_MAP_STYLE",d="CHANGE_ROTATION",y="CREATION_ERROR_LAYER",b="UPDATE_VERSION",v="INIT_MAP",g="RESIZE_MAP",h="CHANGE_MAP_LIMITS",O="SET_MAP_RESOLUTIONS",E="REGISTER_EVENT_LISTENER",S="UNREGISTER_EVENT_LISTENER",P="MOUSE_MOVE",w="MOUSE_OUT";function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{family:""};return(0,r.vU)({title:"warning",message:"map.errorLoadingFont",values:e,position:"tc",autoDismiss:10})}function R(e,t,n){return{type:l,pos:e,zoom:t,crs:n}}function j(e,t,n,r,i,a,c,u){return{type:o,center:e,zoom:t,bbox:n,size:r,mapStateSource:i,projection:a,viewerOptions:c,resolution:u}}function k(e,t){return{type:i,point:e,layer:t}}function A(e){return{type:a,pointer:e}}function _(e,t){return{type:c,zoom:e,mapStateSource:t}}function I(e,t,n){return{type:s,extent:e,crs:t,maxZoom:n}}function D(e,t){return{type:m,style:e,mapStateSource:t}}function L(e){var t=e.restrictedExtent,n=e.crs,r=e.minZoom;return{type:h,restrictedExtent:t,crs:n,minZoom:r}}function N(e){return{type:O,resolutions:e}}var C=function(e,t){return{type:E,eventName:e,toolName:t}},M=function(e,t){return{type:S,eventName:e,toolName:t}},Z=function(e){return{type:P,position:e}},Y=function(){return{type:w}}},59979:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(24852),o=n.n(r),i=n(52595),a=n(30294),c=n(86494),u=n(80307),s=n.n(u);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const v=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(g,t);var n,r,u,l,v=(u=g,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(u);if(l){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function g(){return p(this,g),v.apply(this,arguments)}return n=g,(r=[{key:"render",value:function(){var t=null,n=this.props,r=n.popoverOptions,u=n.keyProp,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,["popoverOptions","keyProp"]);return o().createElement("span",{className:"mapstore-info-popover"},o().createElement(e,f({},(0,c.omit)(l,["renderPopover","tooltipId"]),{key:u,ref:function(e){t=e}})),o().createElement(i.Z,{placement:r.placement,shouldUpdatePosition:!0,show:!0,target:function(){return s().findDOMNode(t)}},o().createElement(a.Popover,r.props,r.content)))}}])&&m(n.prototype,r),g}(o().Component)}},75480:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(24852),o=n.n(r);const i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{display:"inline-block"}:t;return o().createElement("div",{style:n,className:"mapstore-inline-loader"})}},52595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(61365).Z)(n(30294).Overlay)},6724:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(24852),o=n.n(r),i=n(67076),a=function(e,t,n){var r=n.maskContainerStyle,a=n.maskStyle,c=n.className,u=n.white;return function(n){return(0,i.nest)((function(n){return o().createElement("div",{className:"ms2-mask-container ".concat(c||""," ").concat(e(n)?"":"ms2-mask-empty"),style:r},n.children,e(n)?o().createElement("div",{className:"ms2-mask"+(u?" white-mask":""),style:a},t(n)):null)}),n)}};const c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.alwaysWrap,o=void 0===r||r,c=n.white,u=void 0!==c&&c,s=n.maskContainerStyle,l=void 0===s?{}:s,f=n.maskStyle,p=void 0===f?{}:f,m=n.className;return o?a(e,t,{maskContainerStyle:l,maskStyle:p,className:m,white:u}):(0,i.branch)(e,a((function(){return!0}),t,{maskContainerStyle:l,maskStyle:p,white:u}))}},38482:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(24852),o=n.n(r),i=n(86494),a=n(45697),c=n.n(a),u=n(80307),s=n.n(u),l=n(91033);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debounceTime,n=e.querySelector,r=e.closest,a=void 0!==r&&r;return function(e){var r,u;return u=r=function(r){y(u,r);var c=v(u);function u(e){var r;return p(this,u),E(h(r=c.call(this,e)),"findDomNode",(function(){if(!r.isMounded)return null;var e=s().findDOMNode(h(r));return e&&a&&n?e.closest(n||"*"):e&&(n?e.querySelector(n):e)})),r.width=void 0,r.height=void 0,r.skipOnMount=e.skipOnMount,r.div=null,r.onResize=(0,i.debounce)((function(){var e;return(e=r.props).onResize.apply(e,arguments)}),void 0!==t?t:e.debounceTime||1e3),r.ro=new l.Z((function(e){e.forEach((function(e){var t=e.contentRect,n=t.width,o=t.height,i=r.props.handleWidth&&r.width!==n,a=r.props.handleHeight&&r.height!==o;r.skipOnMount||!i&&!a||r.onResize({width:n,height:o}),r.width=n,r.height=o,r.skipOnMount=!1}))})),r}return d(u,[{key:"componentDidMount",value:function(){this.isMounded=!0,this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentDidUpdate",value:function(){this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentWillUnmount",value:function(){var e=this.findDomNode();e&&this.ro&&this.ro.unobserve&&this.ro.unobserve(e)}},{key:"render",value:function(){return o().createElement(e,this.props)}}]),u}(o().Component),E(r,"propTypes",{handleWidth:c().bool,handleHeight:c().bool,onResize:c().func}),E(r,"defaultProps",{onResize:function(){},handleWidth:!0,handleHeight:!0}),u}}},26325:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>I});var r=n(49977),o=n.n(r),i=n(86494),a=n(5582),c=n.n(a),u=n(89919),s=n(1550),l=n(57676),f=n(57604),p=n(80416),m=n(97395),d=n(75110),y=n(97291),b=n(85148),v=n(55237),g=n(96361);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R="time",j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,y.Li)(e),r=(0,y.uy)(e),o=(0,y.Ry)(e),i=(0,y.F3)(n)(e);return[o,r,"time",w({limit:1},t),i]},k=function(e,t,n){if((0,y.uy)(e))return o().Observable.forkJoin(g.Ci.apply(void 0,O(j(e,{sort:"asc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return h(e,1)[0]})).catch((function(e){return e&&o().Observable.of(null)})),g.Ci.apply(void 0,O(j(e,{sort:"desc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return h(e,1)[0]})).catch((function(e){return e&&o().Observable.of(null)}))).map((function(e){return(0,v.Qn)(e.filter((function(e){return!!e})),n)||n}));var r=(0,b.aK)((0,d.CA)(e,t))(e);return o().Observable.of((0,v.Qn)(r,n)||n)},A=function(e){return(0,i.isString)(e)?e:e.toISOString()},_=function(e,t,n){var r=t.domain.split("--"),a=(0,y.YK)(n())||{start:new Date(r[0]),end:new Date(r[1])},c=(0,v.un)(a,20),u=c.range,s=c.resolution,l=(0,d.CA)(n(),e).name,f=T({},R,"".concat(A(u.start),"/").concat(A(u.end)));return(0,g.ot)(t.source.url,l,R,T({},R,"".concat(A(u.start),"/").concat(A(u.end))),s,(0,y.F3)(e)(n())).merge((0,g.i8)(t.source.url,l,f,w(w({},(0,y.F3)(e)(n())),{},{expandLimit:20}))).scan((function(e,t){return w(w({},e),t)}),{}).switchMap((function(e){var t,n=e.Histogram,r=e.Domains,a=(0,i.get)((0,i.head)((0,i.castArray)((0,i.get)(r,"DimensionDomain")||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Identifier;return t===R}))),"Domain");try{t=n&&n.Values&&n.Values.split(",").map((function(e){return parseInt(e,10)}))||[]}catch(e){t=[]}var c=a&&a.indexOf("--")<0&&a.split(",");return o().Observable.of({range:u,histogram:n&&n.Domain?{values:t,domain:n.Domain}:void 0,domain:a?{values:c}:void 0})}))};const I={setTimelineCurrentTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(l.qx).throttleTime(100).switchMap((function(e){var t=e.time,n=e.group,i=r();return n?k(i,n,t).switchMap((function(e){var t=(0,y.YK)(i)||{},n=t.start,r=t.end,a=[];if(n&&r&&(c()(e).isBefore(n)||c()(e).isAfter(r))){var u=c()(r).diff(n);a=[(0,l.y3)({start:c()(e).subtract(u/2),end:c()(e).add(u/2)})]}return o().Observable.from([].concat(O(a),[(0,f.yR)(e)]))})).let((0,u.hP)((0,l.aA)(!1,!0),(0,l.aA)(!1,!1))):o().Observable.of((0,f.yR)(t))}))},settingInitialOffsetValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(l.JU).switchMap((function(e){var t=r(),n=(0,b.WT)(t),i=(0,y.YK)(t);if(e.enabled){var a=i||{},u=a.start,s=void 0===u?0:u,p=a.end,m=void 0===p?432e6:p,d=(0,b.ns)(t),v=c()(m).diff(s),g=i?c()(s).add(v/2).toISOString():c()(new Date).toISOString(),h=c()(n||g).add(v/5),O=e.enabled&&!n?o().Observable.of((0,f.yR)(g)):o().Observable.empty(),E=e.enabled&&!d||e.enabled&&c()(d).diff(n)<0?o().Observable.of((0,f.pF)(h.toISOString())):o().Observable.empty(),S=i?o().Observable.empty():o().Observable.of((0,l.y3)({start:c()(g).add(-1*v/2),end:c()(g).add(v/2)}));return O.concat(E).concat(S)}return o().Observable.of((0,f.pF)())}))},updateRangeDataOnRangeChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(l.Lv).merge(e.ofType(s.pP).filter((function(){return(0,y.cX)(r())})),e.ofType(l.w)).debounceTime(400).merge(e.ofType(f.XV).debounceTime(50)).switchMap((function(){var e,t=(0,b.m$)(r())||{},n=Object.keys(t).filter((function(e){return t[e]&&t[e].domain&&(0,v._q)(t[e].domain)||(0,y.cX)(r())}));return(e=o().Observable).merge.apply(e,O(n.map((function(e){return _(e,t[e],r).map((function(t){var n=t.range,r=t.histogram,o=t.domain;return(0,l.cO)(e,n,r,o)})).startWith((0,l.aA)(e,!0)).catch((function(){return o().Observable.of((0,m.vU)({uid:"error_with_timeline_update",title:"timeline.errors.multidim_error_title",message:"timeline.errors.multidim_error_message"}))})).concat(o().Observable.of((0,l.aA)(e,!1)))}))))}))},syncTimelineGuideLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(l.cb).merge(e.ofType(p.sb,p.yS).withLatestFrom(e.ofType(l._V),(function(e,t){var n=t.layerId;return n&&!(0,y.rV)(r()).some((function(e){return e.id===n}))})).filter((function(e){return!!e}))).switchMap((function(){var e=r(),t=(0,i.get)((0,y.rV)(e),"[0].id");return(0,y.en)(e)&&t?o().Observable.of((0,l.kq)(t)).concat(o().Observable.of(1).switchMap((function(){return k(r(),t,(0,b.WT)(r())||(new Date).toISOString()).filter((function(e){return e})).map((function(e){return(0,f.yR)(e)}))}))):o().Observable.empty()}))}}},40439:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Me});var r=n(86494),o=n(5582),i=n.n(o),a=n(27418),c=n.n(a),u=n(24852),s=n.n(u),l=n(30294),f=n(71703),p=n(67076),m=n(22222),d=n(57604),y=n(62187),b=n(57676),v=n(5346),g=n(15135),h=n(38482),O=n(80717),E=n(65295),S=n(85148),P=n(55105),w=n(76843),T=n(97291),R=n(84715),j=n(6724),k=n(75480),A=n(55237);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e,t){return i()(t).diff(e)>0};const N=(0,p.withHandlers)({clickHandler:function(e){var t=e.selectedLayer,n=e.offsetEnabled,o=e.status,i=e.setCurrentTime,a=void 0===i?function(){}:i,c=e.selectGroup,u=void 0===c?function(){}:c;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.time,c=e.group,s=e.what,l=e.event;if("PLAY"!==o)switch(s){case"group-label":c&&"PLAY"!==o&&u(c);break;default:var f=l&&l.target&&l.target.closest(".vis-custom-time"),p=f&&f.getAttribute("class"),m=p&&(0,r.trim)(p.replace("vis-custom-time",""));i&&!n&&"startPlaybackTime"!==m&&"endPlaybackTime"!==m&&a(i.toISOString(),t)}}},timechangedHandler:function(e){var t=e.currentTime,n=e.setOffset,r=void 0===n?function(){}:n,o=e.setCurrentTime,i=void 0===o?function(){}:o,a=e.currentTimeRange,c=void 0===a?{}:a,u=e.playbackRange,s=e.setPlaybackRange,l=void 0===s?function(){}:s,f=e.selectedLayer;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.time,o=e.id;if("startPlaybackTime"!==o&&"endPlaybackTime"!==o)"currentTime"===o&&(c.end?L(n,c.end)?i(n.toISOString(),null):(i(c.end),r(n.toISOString())):i(n.toISOString(),f)),"offsetTime"===o&&(L(t,n)?r(n.toISOString()):(i(n.toISOString()),r(t)));else{var a=I(I({},u),{},D({},o,n.toISOString())),s=(0,A.og)(a.startPlaybackTime,a.endPlaybackTime),p=s.start,m=s.end;L(p,m)&&l({startPlaybackTime:p,endPlaybackTime:m})}}}});function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const U=(0,p.compose)((0,p.withPropsOnChange)(["rangeItems","playbackRange","playbackEnabled","selectedLayer"],(function(e){var t=e.rangeItems,n=void 0===t?[]:t,r=e.playbackEnabled,o=e.playbackRange;return{rangeItems:r&&o&&void 0!==o.startPlaybackTime&&void 0!==o.endPlaybackTime?[].concat(Y(n),[M(M({id:"playback-range"},(0,A.og)(o.startPlaybackTime,o.endPlaybackTime)),{},{type:"background",className:"ms-playback-range"})]).filter((function(e){return e})):n}})),(0,p.compose)((0,p.withHandlers)({onUpdate:function(e){var t=e.moveCurrentRange,n=void 0===t?function(){}:t;return function(e){var t=e.id,r=e.start;"current-range"===t&&n(r.toISOString())}}}),(0,p.withPropsOnChange)(["options","onUpdate"],(function(e){var t=e.options,n=void 0===t?{}:t,r=e.onUpdate,o=void 0===r?function(){}:r;return{options:M(M({},n),{},{snap:null,editable:{add:!1,updateTime:!1,updateGroup:!1,remove:!1,overrideItems:!1},onMove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;o(e),t(e)}})}})),(0,p.withPropsOnChange)(["rangeItems","currentTime","offsetEnabled","selectedLayer","currentTimeRange","readOnly"],(function(e){var t=e.currentTimeRange,n=e.rangeItems,r=void 0===n?[]:n,o=e.readOnly;return{rangeItems:e.offsetEnabled&&void 0!==t.start&&void 0!==t.end?[].concat(Y(r),[M(M({id:"current-range",editable:{updateTime:!o,updateGroup:!1,remove:!1}},(0,A.og)(t.start,t.end)),{},{type:"background",className:"ms-current-range"})]).filter((function(e){return e})):r}}))),(0,p.withPropsOnChange)(["currentTime","playbackRange","playbackEnabled","offsetEnabled","currentTimeRange"],(function(e){var t=e.currentTime,n=e.playbackRange,r=e.playbackEnabled,o=e.offsetEnabled,i=e.currentTimeRange;return{customTimes:[t?{currentTime:t}:{},r&&n&&n.startPlaybackTime&&n.endPlaybackTime?n:{},o&&i?{offsetTime:i.end}:{}].reduce((function(e,t){return t?M(M({},e),t):M({},e)}),{})}})));var G=n(45697),V=n.n(G),x=n(16307),W=n.n(x);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(61805),W().timeline.components.items.BackgroundItem.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["timeline-item"]=this,this.dirty=!0)};var ee=function(){},te=["currentTimeTick","click","contextmenu","doubleClick","groupDragged","changed","rangechange","rangechanged","select","drop","timechange","timechanged","mouseOver","mouseMove","mouseleave","itemover","itemout","mouseDown","mouseUp"],ne={},re={};(0,r.each)(te,(function(e){return ne[e]=V().func,re["".concat(e,"Handler")]=ee,[ne,re]}));var oe={items:V().array,rangeItems:V().array,groups:V().array,options:V().object,selectionOptions:V().object,selection:V().array,customTimes:V().shape({datetime:V().instanceOf(Date),id:V().string}),animate:V().oneOfType([V().bool,V().object]),currentTime:V().oneOfType([V().string,V().instanceOf(Date),V().number])},ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(u,e);var t,n,o,a,c=(o=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(o);if(a){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return q(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),Q(X(t=c.call(this,e)),"setAllItems",(function(e){t.$el.setItems([].concat(z(e||[]),z(t.props.rangeItems||[])))})),Q(X(t),"setItems",(function(e){(e.length||0)+(t.props.rangeItems&&t.props.rangeItems.length||0)>0?t.$el.initialFitDone?t.setAllItems(e):(t.setAllItems(e),t.$el.emit("changed")):t.$el.initialRangeChangeDone&&t.setAllItems(e)})),t.state={customTimes:[]},t}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.refs.container;this.$el=new(W().Timeline)(t,void 0,this.props.options),te.forEach((function(t){return e.$el.on(t,e.props["".concat(t,"Handler")])})),this.init()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.items,r=t.groups,o=t.options,i=t.selection,a=t.customTimes,c=t.readOnly,u=t.rangeItems,s=n!==e.items,l=r!==e.groups,f=o!==e.options,p=a!==e.customTimes,m=i!==e.selection,d=c!==e.readOnly,y=u!==e.rangeItems;return s||l||f||p||m||d||y}},{key:"componentDidUpdate",value:function(e){this.init(e)}},{key:"componentWillUnmount",value:function(){this.$el.destroy()}},{key:"render",value:function(){return s().createElement("div",{ref:"container",className:this.props.readOnly?"read-only-timeline":"",onMouseOut:this.props.onMouseOutHandler})}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,o=n.items,a=n.rangeItems,c=n.groups,u=n.options,s=n.selection,l=n.selectionOptions,f=void 0===l?{}:l,p=n.customTimes,m=n.animate,d=void 0===m||m,y=n.currentTime,b=u;if(d&&(b=(0,r.omit)(u,"start","end"),u.start&&u.end?this.$el.setWindow(u.start,u.end,{animation:d}):this.$el.setWindow(i()().subtract(1,"month"),i()().add(1,"month"),{animation:d})),this.$el.setOptions(b),c.length>0){var v=new(W().DataSet);v.add(c),this.$el.setGroups(v)}if(o&&o!==t.items)this.setItems(o);else if(a!==t.rangeItems){var g=this.$el&&this.$el.itemsData&&this.$el.itemsData.getDataSet();if(g){var h=(0,r.intersectionBy)(a||[],t.rangeItems||[],"id"),O=(0,r.differenceBy)(a||[],t.rangeItems||[],"id"),E=(0,r.differenceBy)(t.rangeItems||[],a||[],"id");h.map((function(e){return g.update(e)})),O.map((function(e){return g.add(e)})),E.map((function(e){var t=e.id;return g.remove(t)}))}else this.setItems(o)}this.$el.setSelection(s,f),y&&this.$el.setCurrentTime(y);var S=(0,r.keys)(this.state.customTimes),P=(0,r.keys)(p),w=(0,r.difference)(P,S),T=(0,r.difference)(S,P),R=(0,r.intersection)(S,P);(0,r.each)(T,(function(t){return e.$el.removeCustomTime(t)})),(0,r.each)(w,(function(t){var n=p[t];e.$el.addCustomTime(n,t)})),(0,r.each)(R,(function(t){var n=p[t];e.$el.setCustomTime(n,t)})),this.setState({customTimes:p}),(this.props.readOnly!==t.readOnly||this.props.readOnly&&w.length>0)&&(0,r.each)(this.$el.customTimes,(function(n){e.props.readOnly?n.hammer.off("panstart panmove panend"):!0===t.readOnly&&(n.hammer.on("panstart",n._onDragStart.bind(n)),n.hammer.on("panmove",n._onDrag.bind(n)),n.hammer.on("panend",n._onDragEnd.bind(n)))}))}}])&&F(t.prototype,n),u}(s().Component);Q(ie,"propTypes",(0,r.assign)(oe,ne)),Q(ie,"defaultProps",(0,r.assign)({items:[],groups:[],options:{},selection:[],customTimes:{}},re));const ae=ie;function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=(0,R.o)((function(e,t){return e===t||!(0,r.isNil)(e)&&!(0,r.isNil)(t)&&e.id===t.id&&e.title===t.title&&e.name===t.name}))(T.rV,(function(e){return e})),fe=(0,p.compose)((0,f.connect)((0,m.P1)(T.YK,T.__,le,T.E2,(function(e,t,n,r){return{viewRange:e,items:t,layers:n,loading:r}}))),(0,p.withPropsOnChange)((function(e,t){var n=e.layers,o=void 0===n?[]:n,i=e.loading,a=e.selectedLayer,c=t.layers,u=t.loading,s=t.selectedLayer,l=e.hideLayersName!==t.hideLayersName;return i!==u||a!==s||l||o&&c&&o.length!==c.length||(0,r.differenceBy)(o,c||[],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.title,r=e.name;return t+n+r})).length>0}),(function(e){var t=e.layers,n=void 0===t?[]:t,o=e.loading,i=void 0===o?{}:o,a=e.selectedLayer;return{groups:n.map((function(e){return{id:e.id,className:(i[e.id]?"loading":"")+(e.id&&e.id===a?" selected":""),content:'<div class="timeline-layer-label-container">'+(i[e.id]?'<div class="timeline-layer-icon"><div class="timeline-spinner"></div></div>':'<div class="timeline-layer-icon">'.concat(e.id&&e.id===a?'<i class="glyphicon glyphicon-time"></i>':"","</div>"))+'<div class="timeline-layer-title">'.concat((0,r.isString)(e.title)?e.title:e.name,"</div>")+"</div>"}}))}}))),pe=(0,p.compose)((0,f.connect)((0,m.P1)(S.WT,T.m_,(function(e,t){return{currentTime:e,currentTimeRange:t}})),{setCurrentTime:b.HM,moveCurrentRange:d.PZ,setOffset:d.pF})),me=(0,p.compose)((0,f.connect)((0,m.zB)({playbackRange:w.KC,status:w.dS}),{setPlaybackRange:y.VS})),de=(0,p.compose)((0,f.connect)((0,m.P1)(T.Li,(function(e){return{selectedLayer:e}})),{selectGroup:b.kq})),ye=(0,p.compose)((0,f.connect)((function(){return{}}),{rangechangedHandler:b.y3}));const be=(0,p.compose)(pe,me,de,N,ye,fe,(0,p.defaultProps)({key:"timeline",options:{maxHeight:"90%",verticalScroll:!0,stack:!1,showMajorLabels:!0,showCurrentTime:!1,zoomMin:10,zoomable:!0,type:"background",margin:{item:0,axis:0},format:{minorLabels:{minute:"h:mma",hour:"ha"}},itemsAlwaysDraggable:!0,moment:function(e){return i()(e).utc()}}}),(0,p.withPropsOnChange)(["viewRange","options"],(function(e){var t=e.viewRange,n=void 0===t?{}:t;return{options:ue(ue({},e.options),n)}})),(0,p.withPropsOnChange)(["status"],(function(e){return{readOnly:"PLAY"===e.status}})),U,(0,j.Z)((function(e){var t=e.loading;return t&&t.timeline}),(function(){return s().createElement("div",{style:{margin:"auto",fontWeight:"bold"}},s().createElement(k.Z,{style:{display:"inline-block",verticalAlign:"middle"}}),s().createElement(v.Z,{msgId:"loading"}))}),{white:!0}))(ae);var ve=n(49977),ge=n.n(ve),he=n(59979),Oe=n(38560);function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=(0,p.compose)((0,p.withProps)({collapseHintPopoverOptions:{placement:"top",props:{title:s().createElement("span",null,s().createElement(l.Glyphicon,{glyph:"time"})," ",s().createElement("strong",null,s().createElement(v.Z,{msgId:"timeline.collapsed.title"})))},content:s().createElement(v.Z,{msgId:"timeline.collapsed.tooltip"})}}),(0,p.mapPropsStream)((function(e){return e.combineLatest(function(e){return e.distinctUntilKeyChanged("collapsed").filter((function(e){return e.collapsed})).take(1).switchMap((function(e){var t=e.collapseHintPopoverOptions;return ge().Observable.timer(5e3).startWith({popoverOptions:t}).concat(ge().Observable.of({}))})).startWith({})}(e),(function(e,t){return Pe(Pe({},e),t)}))})),(0,p.branch)((function(e){return e.popoverOptions}),he.Z,g.Z))(Oe.Z);const Re=(0,p.compose)((0,f.connect)((0,m.P1)(T.zb,T.qJ,(function(e,t){return{collapsed:e,visible:t}})),{setCollapsed:b.w2}),(0,p.branch)((function(e){return!e.visible}),p.renderNothing),(0,p.withHandlers)({onClick:function(e){var t=e.collapsed,n=e.setCollapsed;return function(){return n(!t)}}}),(0,p.withProps)((function(e){var t=e.collapsed;return{bsStyle:t?"primary":"success",tooltipId:t?"timeline.show":"timeline.hide"}})))((function(e){return s().createElement(Te,Ee({},e,{bsSize:"xsmall"}),s().createElement(l.Glyphicon,{glyph:"time"}))}));function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie=(0,g.Z)(Oe.Z),De=function(e){return(0,r.isString)(e)&&-1!==e.indexOf("%")},Le=function(e){return parseInt(e,10)/100},Ne=function(e,t){return i()(t).diff(e)>0},Ce=(0,p.compose)((0,f.connect)((0,m.P1)(T.pn,T.rV,S.WT,T.m_,S.RP,w.KC,w.dS,T.YK,(function(e,t,n,r,o,i,a,c){return{visible:e,layers:t,currentTime:n,currentTimeRange:r,offsetEnabled:o,playbackRange:i,status:a,viewRange:c}})),{setCurrentTime:b.HM,onOffsetEnabled:b.PQ,setOffset:d.pF,setPlaybackRange:y.VS,moveRangeTo:b.y3,onInit:b._e}),(0,p.branch)((function(e){var t=e.visible,n=void 0===t||t,r=e.layers,o=void 0===r?[]:r;return!n||0===Object.keys(o).length}),p.renderNothing),(0,p.withState)("options","setOptions",{collapsed:!0}),(0,f.connect)((0,m.P1)(T.cX,(function(e){return{mapSync:e}})),{toggleMapSync:b.Z7}),(0,p.compose)((0,p.compose)((0,p.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{containerWidth:e.width}}}}),(0,h.Z)({querySelector:".ms2",closest:!0,debounceTime:100})),(0,p.defaultProps)({showHiddenLayers:!1,style:{marginBottom:35,marginLeft:100,marginRight:80}}),(0,f.connect)((0,m.P1)((function(e){return(0,P.ic)(e,{right:!0,bottom:!0,left:!0})}),(function(e){return{mapLayoutStyle:e}}))),(0,p.withProps)((function(e){var t=e.containerWidth,n=e.style,r=e.mapLayoutStyle,o=n||{},i=o.marginLeft,a=o.marginRight,c=r.left,u=void 0===c?0:c,s=r.right,l=void 0===s?0:s;if(l=De(l)&&Le(l)*t||l,u=De(u)&&Le(u)*t||u,t){var f=t-l-u-i-a;return{hide:f<410,compactToolbar:f<880,style:Ae(Ae(Ae({},n),r),{},{minWidth:410})}}return{style:Ae(Ae(Ae({},n),r),{},{minWidth:410})}})),(0,p.branch)((function(e){return e.hide}),p.renderNothing),(0,p.setDisplayName)("TimelinePlugin")))((function(e){var t=e.items,n=e.options,o=e.setOptions,a=e.mapSync,c=e.toggleMapSync,f=void 0===c?function(){}:c,p=e.currentTime,m=e.setCurrentTime,d=e.offsetEnabled,y=e.onOffsetEnabled,b=e.currentTimeRange,g=e.setOffset,h=e.style,S=e.status,P=e.viewRange,w=e.moveRangeTo,T=e.compactToolbar,R=e.showHiddenLayers,j=e.onInit,k=void 0===j?function(){}:j;(0,u.useEffect)((function(){k(R)}),[k]);var A=n.hideLayersName,_=n.collapsed,I=(0,r.head)(t&&t.filter((function(e){return"playback"===e.name}))),D=I&&I.plugin,L=function(e,t,n,r){var o=i()(n.end).diff(n.start)/2;if("time-current"===t&&n&&n.start.toString()!==i()(e).add(-1*o).toString()&&n.end.toString()!==i()(e).add(o).toString()&&w({start:i()(e).add(-1*o),end:i()(e).add(o)}),"range-start"===t||"range-end"===t){var a=i()(r.end).diff(r.start),c=i()(r.start).add(a/2);w(a/2<=o?{start:i()(c).add(-1*o),end:i()(c).add(o)}:{start:i()(c).add(-1*a*5/2),end:i()(c).add(5*a/2)})}};return s().createElement("div",{style:Ae(Ae({position:"absolute",marginBottom:35,marginLeft:100,background:"transparent"},h),{},{right:_?"auto":h.right||0}),className:"timeline-plugin".concat(A?" hide-layers-name":"").concat(d?" with-time-offset":"")},d&&s().createElement(E.Z,{clickable:!_,glyph:"range-start",onIconClick:function(e,t){return"PLAY"!==S&&L(e,t,P,b)},tooltip:s().createElement(v.Z,{msgId:"timeline.rangeStart"}),showButtons:!0,date:p||b&&b.start,onUpdate:function(e){return(b&&Ne(e,b.end)||!b)&&"PLAY"!==S&&m(e)},className:"shadow-soft",style:{position:"absolute",top:-5,left:2,transform:"translateY(-100%)"}}),s().createElement("div",{className:"timeline-plugin-toolbar".concat(T?" ms-collapsed":"")},d&&b?s().createElement(E.Z,{clickable:!_,glyph:"range-end",onIconClick:function(e,t){return"PLAY"!==S&&L(e,t,P,b)},tooltip:s().createElement(v.Z,{msgId:"timeline.rangeEnd"}),date:b.end,showButtons:!0,onUpdate:function(e){return"PLAY"!==S&&Ne(p,e)&&g(e)}}):s().createElement(E.Z,{clickable:!_,glyph:"time-current",showButtons:!0,onIconClick:function(e,t){return"PLAY"!==S&&L(e,t,P)},tooltip:s().createElement(v.Z,{msgId:"timeline.currentTime"}),date:p||b&&b.start,onUpdate:function(e){return(b&&Ne(e,b.end)||!b)&&"PLAY"!==S&&m(e)}}),s().createElement("div",{className:"timeline-plugin-btn-group"},s().createElement(O.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"list",tooltip:s().createElement(v.Z,{msgId:A?"timeline.showLayerName":"timeline.hideLayerName"}),bsStyle:A?"primary":"success",visible:!_,active:!A,onClick:function(){return o(Ae(Ae({},n),{},{hideLayersName:!A}))}},{glyph:"time-offset",bsStyle:d?"success":"primary",active:d,disabled:"PLAY"===S,tooltip:s().createElement(v.Z,{msgId:d?"timeline.disableRange":"timeline.enableRange"}),onClick:function(){"PLAY"!==S&&y(!d)}},{glyph:"map-synch",tooltip:s().createElement(v.Z,{msgId:a?"timeline.mapSyncOn":"timeline.mapSyncOff"}),bsStyle:a?"success":"primary",active:a,onClick:function(){return f(!a)}}]}),D&&s().createElement(D,je({},I,{settingsStyle:{right:_||T?40:"unset"}}))),s().createElement(Ie,{onClick:function(){return o(Ae(Ae({},n),{},{collapsed:!_}))},className:"square-button-sm ms-timeline-expand",bsStyle:"primary",tooltip:s().createElement(v.Z,{msgId:_?"timeline.expand":"timeline.collapse"})},s().createElement(l.Glyphicon,{glyph:_?"chevron-up":"chevron-down"}))),!_&&s().createElement(be,{offsetEnabled:d,playbackEnabled:!0,hideLayersName:A}))}));const Me={TimelinePlugin:c()(Ce,{disablePluginIf:"{state('mapType') === 'cesium'}",WidgetsTray:{tool:s().createElement(Re,null),position:0}}),reducers:{dimension:n(37307).Z,timeline:n(55545).Z},epics:n(26325).ZP}},55545:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(80416),o=n(82904),i=n(57676),a=n(61868),c=n(86494);const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{autoSelect:!0,collapsed:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.M5:return(0,a.t8)("settings.collapsed",t.collapsed,e);case i.w:return(0,a.t8)("settings.mapSync",t.mapSync,e);case i.Lv:return(0,a.t8)("range",{start:t.start,end:t.end},e);case i.iv:return(0,a.t8)("rangeData[".concat(t.layerId,"]"),{range:t.range,histogram:t.histogram,domain:t.domain},e);case i.br:return t.layerId?(0,a.t8)("loading[".concat(t.layerId,"]"),t.loading,e):(0,a.t8)("loading.timeline",t.loading,e);case i._V:return(0,a.t8)("selectedLayer",t.layerId,e);case r.sb:var n=e;return(0,c.assign)({},e,{rangeData:(0,c.has)(n.rangeData,t.node)?(0,c.pickBy)(n.rangeData,(function(e,n){return n!==t.node})):n.rangeData,loading:(0,c.has)(n.rangeData,t.node)?(0,c.pickBy)(n.loading,(function(e,n){return n!==t.node})):n.loading,selectedLayer:e.selectedLayer===t.node?void 0:e.selectedLayer});case o.l:return(0,c.assign)({},e,{range:void 0,rangeData:void 0,selectedLayer:void 0,loading:void 0,MouseEvent:void 0});case i.p:return(0,a.t8)("settings.showHiddenLayers",t.showHiddenLayers,e);default:return e}}},55105:(e,t,n)=>{"use strict";n.d(t,{Nr:()=>l,ic:()=>f,Jz:()=>m,VM:()=>d,CF:()=>y});var r=n(86494),o=n(827),i=n(52259);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){return e.maplayout&&e.maplayout.layout||{}},l=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){return c(c({},e),{},u({},t,n[t]))}),{})||{}},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=s(e),o=!!(0,r.head)(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})));return o},m=function(e){return p(e,[{key:"right",value:658}])},d=function(e){return p(e,[{key:"bottom",value:30,type:"not"}])},y=function(e){var t=(0,o.Od)(e),n=l(e);return n&&t&&t.size&&{left:(0,i.parseLayoutValue)(n.left,t.size.width),bottom:(0,i.parseLayoutValue)(n.bottom,t.size.height),right:(0,i.parseLayoutValue)(n.right,t.size.width),top:(0,i.parseLayoutValue)(n.top,t.size.height)}}}}]);