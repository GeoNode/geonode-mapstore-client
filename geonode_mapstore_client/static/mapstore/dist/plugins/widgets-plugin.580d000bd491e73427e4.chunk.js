(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[9955],{81808:(e,t,r)=>{"use strict";r.d(t,{eD:()=>n,AM:()=>o,ok:()=>i,Gg:()=>a,nT:()=>c,TL:()=>u,KS:()=>l,EB:()=>s,DZ:()=>f,Aw:()=>p,V_:()=>d,H0:()=>g,jW:()=>y,JZ:()=>v,fQ:()=>b,HK:()=>m,YO:()=>h,I6:()=>O});var n="MAP:LOAD_NEW_MAP",o="MAP_LOAD_MAP_CONFIG",i="MAP_CONFIG_LOADED",a="MAP_CONFIG_LOAD_ERROR",c="MAP_LOAD_INFO",u="MAP_INFO_LOAD_START",l="MAP_INFO_LOADED",s="MAP_INFO_LOAD_ERROR",f="MAP:MAP_SAVE_ERROR",p="MAP:MAP_SAVED",d="MAP:RESET_MAP_SAVE_ERROR";function g(e,t,r){return{type:i,config:e,legacy:!!t,mapId:t,zoomToExtent:r}}function y(e,t){return{type:a,error:e,mapId:t}}function v(e,t,r,n,i){return{type:o,configName:e,mapId:t,config:r,mapInfo:n,overrideConfig:i}}function b(e,t){return{type:l,mapId:t,info:e}}function m(e,t){return{type:s,mapId:e,error:t}}function h(e){return{type:u,mapId:e}}function O(e){return{type:c,mapId:e}}},55927:(e,t,r)=>{"use strict";r.d(t,{R4:()=>n,E9:()=>o});var n="DASHBOARD:DASHBOARD_RESET",o="DASHBOARD:DASHBOARD_LOADED"},62770:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),c=r(86494),u=r(90079);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(i){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),v(g(t=a.call(this,e)),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),v(g(t),"canShow",(function(e){return e.visibility||!t.props.showOnlyIfVisible})),v(g(t),"useLegendOptions",(function(){return!(0,c.isEmpty)(t.props.node.legendOptions)&&(0,c.isNumber)(t.props.node.legendOptions.legendHeight)&&(0,c.isNumber)(t.props.node.legendOptions.legendWidth)})),v(g(t),"setOverflow",(function(){return t.useLegendOptions()&&t.props.node.legendOptions.legendWidth>t.state.containerWidth})),t.containerRef=o().createRef(),t}return t=l,(r=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,r=t&&this.useLegendOptions();return t?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(u.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:r&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:r&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}])&&f(t.prototype,r),l}(o().Component);v(b,"propTypes",{node:a().object,legendContainerStyle:a().object,legendStyle:a().object,showOnlyIfVisible:a().bool,currentZoomLvl:a().number,scales:a().array,WMSLegendOptions:a().string,scaleDependent:a().bool,language:a().string,legendWidth:a().number,legendHeight:a().number}),v(b,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const m=b},90079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(72500),o=r.n(n),i=r(86494),a=r(27418),c=r.n(a),u=r(45697),l=r.n(u),s=r(24852),f=r.n(s),p=r(33044),d=r(5346);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,e);var t,r,n,a,u=(n=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(a){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function l(){var e;y(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(h(e=u.call.apply(u,[this].concat(r))),"state",{error:!1}),w(h(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),w(h(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var r=e.layer,n=t||(0,i.isArray)(r.url)&&Math.floor(Math.random()*r.url.length),a=(0,i.isArray)(r.url)?r.url[n]:r.url.replace(/[?].*$/g,""),u=o().parse(a),l=(0,p.clearNilValuesForParams)(r.params),s=c()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},r.legendParams||{},e.language&&r.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,p.addAuthenticationToSLD)(l||{},e.layer),l&&l.SLD_BODY?{SLD_BODY:l.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,p.addAuthenticationParameter)(a,s),o().format({host:u.host,protocol:u.protocol,pathname:u.pathname,query:s})}return""})),w(h(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=l,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?f().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):f().createElement(d.Z,{msgId:"layerProperties.legenderror"})}}])&&v(t.prototype,r),l}(f().Component);w(j,"propTypes",{layer:l().object,legendHeight:l().number,legendWidth:l().number,legendOptions:l().string,style:l().object,currentZoomLvl:l().number,scales:l().array,scaleDependent:l().bool,language:l().string}),w(j,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const P=j},72688:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),c=r(38560),u=r(43614),l=r(72986),s=r.n(l);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(i){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return v(this,e)});function l(){var e;d(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(b(e=a.call.apply(a,[this].concat(r))),"onConfirm",(function(){e.props.onConfirm()})),e}return t=l,(r=[{key:"render",value:function(){var e=this,t=o().createElement("span",{role:"footer"},o().createElement("div",{style:{float:"left"}}),o().createElement(c.Z,{ref:"confirmButton",disabled:this.props.running,className:this.props.className,key:"confirmButton",bsStyle:"primary",bsSize:this.props.buttonSize,onClick:function(){e.onConfirm()}},this.props.running?o().createElement(s(),{spinnerName:"circle",overrideSpinnerClassName:"spinner",noFadeIn:!0}):null,this.props.confirmText),this.props.includeCloseButton?o().createElement(c.Z,{key:"cancelButton",ref:"cancelButton",bsSize:this.props.buttonSize,onClick:this.props.onClose},this.props.cancelText):o().createElement("span",null)),r=this.props.body;return o().createElement(u.Z,p({},this.props.options,{show:this.props.show,onHide:this.props.onClose}),o().createElement(u.Z.Header,{key:"dialogHeader",closeButton:!0},o().createElement(u.Z.Title,null,this.props.titleText)),o().createElement(u.Z.Body,null,r),o().createElement(u.Z.Footer,null,t))}}])&&g(t.prototype,r),l}(o().Component);h(O,"propTypes",{className:a().string,show:a().bool,options:a().object,onConfirm:a().func,onClose:a().func,closeGlyph:a().string,style:a().object,buttonSize:a().string,includeCloseButton:a().bool,body:a().oneOfType([a().string,a().element]),titleText:a().oneOfType([a().string,a().element]),confirmText:a().oneOfType([a().string,a().element]),cancelText:a().oneOfType([a().string,a().element]),running:a().bool}),h(O,"defaultProps",{onConfirm:function(){},onClose:function(){},options:{animation:!1},className:"",closeGlyph:"",style:{},includeCloseButton:!0,body:"",titleText:"Confirm Delete",confirmText:"Delete",cancelText:"Cancel"});const w=O},43614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(27418),o=r.n(n),i=r(30294),a=r(61365);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(n);if(o){var r=p(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function a(){return u(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&l(t.prototype,r),a}(i.Modal);const g=o()((0,a.Z)(d),{Body:i.Modal.Body,Dialog:i.Modal.Dialog,Footer:i.Modal.Footer,Header:i.Modal.Header,Title:i.Modal.Title})},1036:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(86494);const o=(0,r(67076).shouldUpdate)((function(e,t){return!(0,n.isEqual)(e.start,t.start)||e.disabled!==t.disabled}))(r(85552))},25382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(49977),o=r.n(n),i=r(86850),a=r(24262);const c=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.layer;return(0,a.getSearchUrl)(t)===(0,a.getSearchUrl)(n)&&t.loadingError===n.loadingError})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return(0,i.v$)({layer:t}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return o().Observable.of({loading:!1,error:e})}))}))}},43716:(e,t,r)=>{"use strict";r.d(t,{Z:()=>pt});var n=r(24852),o=r.n(n),i=r(67076),a=r(12425),c=r(39860);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const l=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,r=e.showTable;return function(){return t(!r)}}}),(0,i.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return u(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),(0,c.tR)(),(0,c.AV)(),(0,c.E6)(),(0,i.branch)((function(e){return!e.showTable}),(0,c.um)())),s=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var f=r(86494);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:d(d({},r),{},{onAddFilter:function(e){return o("quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,r,n,i,a){return o('options.columnSettings["'.concat((0,f.get)(a.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:d(d({},r),{},{onGridSort:function(e,t){return o("sortOptions",{sortBy:e,sortOrder:t})}})}})));var v=r(13314);const b=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.G5)(),(0,c.E6)(),(0,c.um)()),m=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var h=r(87017),O=r(39589),w=r(78889),j=r(73849),P=r(25382),S=r(49977),E=r.n(S),D=r(86850);const C=function(e){return e.switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=void 0===n?{}:n,i=e.filter,a=e.onLoad,c=void 0===a?function(){}:a,u=e.onLoadError,l=void 0===u?function(){}:u;return(0,D.Mc)(r,i,{timeout:15e3,params:{propertyName:o.propertyName,viewParams:o.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return c({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return E().Observable.of({loading:!1,error:e,data:[]}).do(l)}))}))};function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(49977);const R=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter,c=e.sortOptions;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(c,t.sortOptions)})).map((function(e){return x(x({},e),{},{features:[],pages:[],pagination:{}})}))};var k=r(96958);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const F=function(e){return function(t){return t.switchMap((function(t){var r=t.layer,n=void 0===r?{}:r,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,c=void 0===a?5:a,u=t.filter,l=t.options,s=void 0===l?{}:l,f=t.sortOptions,p=t.pages,d=t.features,g=void 0===d?[]:d,y=t.onLoad,v=void 0===y?function(){}:y,b=t.onLoadError,m=void 0===b?function(){}:b;return e.switchMap((function(e,t){var r=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),(0,D.Mc)(n,u,_(_({},(0,k.S9)(r,p,i)),{},{sortOptions:f,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:s.propertyName,viewParams:s.viewParams})).do((function(e){return v(_(_({},(0,k.f1)(e,r,{pages:p,features:g},_(_({},(0,k.S9)(r,p,i)),{},{size:i,maxStoredPages:c}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return E().Observable.of({loading:!1,error:e}).do(m)})).startWith({loading:!0})}))}))}};function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=function(e){var t=(0,i.createEventHandler)(),r=t.handler,n=t.stream;return(0,P.Z)(e).combineLatest(function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return R(e).let(r?F(t.withLatestFrom(e.map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}})),(function(e,t){return L({pagesRange:e},t)}))):C).startWith({})}(e,n.startWith({startPage:0,endPage:1})),(function(e,t){return L(L(L({},e),t),{},{pageEvents:{moreFeatures:r,onPageChange:function(){}}})})).startWith({loading:!0})};const N=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,r=e.features,n=e.pagination;return{pages:t,features:r,pagination:n,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,r=void 0===t?function(){}:t,n=e.onLoad,o=void 0===n?function(){}:n;return function(){r.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)((function(){return{dataStreamFactory:H}})),j.Z,(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:(0,f.merge)(n?(0,w.getFeatureTypeProperties)(n).filter((function(e){return!(0,f.includes)(r.propertyName||[],e.name)})).reduce((function(e,t){return L(L({},e),{},W({},t.name,{hide:!0}))}),{}):{},r.columnSettings||{},i)}})));var V=r(30881),G=r(8488),z=r(73339),B=r(5055),q=r.n(B),U=r(70956),$=r(99767),J=r(27835),K=function(e){var t=e.wfsGetFeature;return(0,J.Uh)("gs:Bounds",[(0,$.qP)("features",(0,$.fA)("text/xml","http://geoserver/wfs","POST",t))],(0,$.DK)((0,$.En)("bounds","application/json")))};var Q=r(47805),Y=r(24262),X=r(61868),ee=r(52259);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const oe=(0,i.compose)((0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies;return t&&(!(0,f.isEmpty)(r.quickFilters)||!(0,f.isEmpty)(r.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,ee.createRegisterHooks)()}})),(0,i.mapPropsStream)((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.isEqual)(e.dependencies.quickFilters,t.dependencies.quickFilters)&&(0,f.isEqual)(e.dependencies.filter,t.dependencies.filter)&&(0,f.isEqual)(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=e.hookRegister;if(!t||(0,f.isEmpty)(n.layer))return S.Observable.of({loading:!1});var a={};n.quickFilters&&(a=re(re({},a),(0,U.r$)(o,n.quickFilters,n.options))),n.filter&&(a=re(re({},a),(0,Q.composeAttributeFilters)([a,n.filter])));var c=n&&n.layer&&n.layer.name;if(!(0,f.isEmpty)(a)){a=re(re({},a),{},{options:re(re({},a.options||{}),{},{noSchemaLocation:!0})});var u=(0,Q.toOGCFilter)(c,a,"1.1.0");return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,J.mG)(e,K(t),{},r)}((0,Y.getWpsUrl)(n.layer),{wfsGetFeature:u}).switchMap((function(e){var t,r,n;if(q().parseString(e,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],r=t["ows:LowerCorner"].split(" "),n=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return S.Observable.of({loading:!1});var o={minx:parseFloat(r[0]),miny:parseFloat(r[1]),maxx:parseFloat(n[0]),maxy:parseFloat(n[1])},a=i.getHook(ee.ZOOM_TO_EXTENT_HOOK);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),S.Observable.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return S.Observable.of({error:"error getting bounds from filter",details:e})}))}return S.Observable.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,r=void 0!==t&&t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,X.t8)("loading",r,n)}))})))));var ie=r(43378);function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const le=(0,i.compose)((0,i.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.map,i=void 0===o?{}:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;return t!==a.mapSync||!(0,f.isEqual)(n,a.dependencies)||!(0,f.isEqual)(i,a.map)||c!==a.filter}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=void 0===o?{}:o,a=e.map,c=void 0===a?{layers:[]}:a,u=n&&n.layer&&n.layer.name,l=(0,f.find)(c.layers,{name:u})||{},s={},p={},d=void 0;return t&&!(0,f.isEmpty)(l)&&(n.quickFilters&&(s=ce(ce({},s),(0,U.r$)(i,n.quickFilters,n.options))),n.filter&&(s=ce(ce({},s),(0,Q.composeAttributeFilters)([s,n.filter]))),!(0,f.isEmpty)(s)&&(0,Q.toCQLFilter)(s))?(d=(0,Q.toCQLFilter)(s),p=(0,X.cc)(!1,ce(ce({},l),{},{params:(0,ie.optionsToVendorParams)({params:{CQL_FILTER:d}},l&&l.params&&l.params.CQL_FILTER)}),{name:u},c.layers),{map:ce(ce({},c),{},{layers:p})}):(p=c.layers.map((function(e){return ce(ce({},e),{},{params:ce(ce({},e.params),{},{CQL_FILTER:void 0})})})),{map:ce(ce({},c),{},{layers:p})})}))),se=function(e){return(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync;return t}),(0,i.withPropsOnChange)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mapSync,n=t.dependencies,o=void 0===n?{}:n,a=arguments.length>1?arguments[1]:void 0,c=a.mapSync,u=a.dependencies;return u&&(0,i.shallowEqual)(o[e],u[e])||r===c}),(function(t){var r=t.map,n=t.mapSync,o=t.dependencies,i=void 0===o?{}:o;return{mapStateSource:"__dependency_system__",map:i[e]&&n?(0,X.t8)(e,i[e],r):r}})))};var fe=r(30294);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?[]:t,n=ye(e,["data"]),i=Object.keys(r.reduce((function(e,t){return de(de({},e),t)}),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(fe.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,i.map((function(e,t){return o().createElement("th",null,t+1===i.length&&n.yAxisLabel?n.yAxisLabel:t>0?"".concat(e):e)})))),o().createElement("tbody",null,r.map((function(e){return o().createElement("tr",null,i.map((function(t){return o().createElement("td",null,e[t])})))})))))};var be=r(96259),me=r(73014),he=r(42415),Oe=r(39837),we=r(28315),je=(0,me.Z)()((0,he.Z)((0,Oe.Z)(we.Z)));const Pe=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(be.Z,null,o().createElement(je,e)))};var Se=r(5346),Ee=r(65539),De=r(72688);const Ce=function(e){var t=e.id,r=e.title,n=e.confirmDelete,i=void 0!==n&&n,a=e.className,c=e.isDraggable,u=void 0===c||c,l=e.toggleDeleteConfirm,s=void 0===l?function(){}:l,f=e.onDelete,p=void 0===f?function(){}:f,d=e.icons,g=e.topLeftItems,y=e.topRightItems,v=e.headerStyle,b=void 0===v?{}:v,m=e.children;return o().createElement("div",{className:"mapstore-widget-card",id:t},o().createElement(Ee.Z,{className:a,header:o().createElement("div",{style:b,className:"mapstore-widget-info ".concat(u?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},d),g,o().createElement("span",{className:"widget-title"},r),o().createElement("span",{className:"mapstore-widget-options"},y)))},m),i?o().createElement(De.Z,{confirmText:o().createElement(Se.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(Se.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(Se.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:i,onClose:function(){return s(!1)},onConfirm:function(){return p(t)}}):null)};function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(fe.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null};var Ae=r(82030),Re=r(99707),ke=(0,Ae.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){return{glyph:"sheet",messageId:"widgets.errors.notext"}}),Re.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})})),Ie=r(75480),_e=r(92936);function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){Ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Le=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,r=void 0===t?function(){}:t;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["layers"]);return r("map",t,"merge")}}})(_e.Z),We=r(18027);function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ge=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var r=t&&e.options&&(0,f.find)(e.options.propertyName,(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},n=r&&(r.rawValue||r.value);return Ne(Ne({},e),{},{value:n})}))}))),ze=function(e){var t=e.options,r=e.localType,n=e.attributeName,o=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:n,options:t}),Ge)((0,We.Q)(r,{name:n}))},Be=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.map((function(t){return Ne(Ne({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),qe=(0,i.compose)(Be,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,r=e.options,n=e.quickFilterStream$;return t?{filterRenderers:(0,k.Lo)(t).reduce((function(e,t){var o=t.localType,i=t.name,a=ze({options:r,localType:o,attributeName:i,quickFilterStream$:n});return Ne(Ne({},e),{},Ve({},i,a))}),{})}:{}}))),Ue=r(30029),$e=r(93358),Je=(0,he.Z)((0,me.Z)((function(e){return!e.describeFeatureType}))($e.Z));const Ke=qe((function(e){var t=e.id,r=e.title,n=e.loading,i=e.confirmDelete,a=void 0!==i&&i,c=e.enableColumnFilters,u=void 0!==c&&c,l=e.headerStyle,s=e.icons,f=e.topRightItems,p=e.toggleDeleteConfirm,d=void 0===p?function(){}:p,g=e.onDelete,y=void 0===g?function(){}:g,v=e.gridEvents,b=void 0===v?function(){}:v,m=e.pageEvents,h=void 0===m?{moreFeatures:function(){}}:m,O=e.describeFeatureType,w=e.filterRenderers,j=e.columnSettings,P=e.features,S=e.size,E=e.pages,D=e.error,C=e.pagination,T=void 0===C?{}:C,x=e.dataGrid,A=void 0===x?{}:x,R=e.virtualScroll,k=void 0===R||R;return o().createElement(Ce,{id:"widget-chart-".concat(t),title:r,headerStyle:l,icons:s,isDraggable:A.isDraggable,confirmDelete:a,onDelete:y,toggleDeleteConfirm:d,topRightItems:f},o().createElement(Ee.Z,{footer:T.totalFeatures?o().createElement("div",{style:{height:"30px",overflow:"hidden"}},n?o().createElement("span",{style:{float:"right"}},o().createElement(Ie.Z,null)):null,void 0===D&&o().createElement("span",{style:{float:"left",margin:"5px"}},o().createElement(Se.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:T.totalFeatures}}))):null},o().createElement(Je,{emptyRowsView:function(){return o().createElement(Ue.Z,{loading:n},o().createElement(Re.Z,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"}))},gridEvents:b,sortable:!0,defaultSize:!1,columnSettings:j,pageEvents:h,virtualScroll:k,enableColumnFilters:u,filterRenderers:w,features:P,pages:E,error:D,size:S,rowKey:"id",describeFeatureType:O,pagination:T})))}));var Qe=r(80844);function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(fe.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null},et=r(46173),tt=r(70919);function rt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var nt=(0,et.Z)()(tt.Z),ot=(0,i.compose)(z.Z,V.Z,G.Z,h.Z,l)((function(e){var t=e.id,r=e.title,n=e.description,i=e.headerStyle,a=e.data,c=void 0===a?[]:a,u=e.series,l=void 0===u?[]:u,s=e.loading,f=e.icons,p=e.showTable,d=e.topRightItems,g=e.confirmDelete,y=void 0!==g&&g,v=e.dataGrid,b=void 0===v?{}:v,m=e.onDelete,h=void 0===m?function(){}:m,O=e.toggleTableView,w=void 0===O?function(){}:O,j=e.toggleDeleteConfirm,P=void 0===j?function(){}:j,S=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm"]);return o().createElement(Ce,{id:"widget-chart-".concat(t),headerStyle:i,isDraggable:b.isDraggable,title:r,icons:f,topLeftItems:xe({loading:s,title:r,description:n,showTable:p,toggleTableView:w}),confirmDelete:y,onDelete:h,toggleDeleteConfirm:P,topRightItems:d},p?o().createElement(ve,Te({data:c},S)):o().createElement(Pe,Te({id:t,isAnimationActive:!s,loading:s,data:c,series:l,iconFit:!0},S)))})),it=(0,i.compose)(b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.icons,i=e.topLeftItems,a=e.id,c=e.title,u=e.text,l=e.headerStyle,s=e.topRightItems,f=e.dataGrid,p=void 0===f?{}:f,d=e.confirmDelete,g=void 0!==d&&d,y=e.onDelete,v=void 0===y?function(){}:y;return o().createElement(Ce,{id:"widget-text-".concat(a),title:c,confirmDelete:g,onDelete:v,toggleDeleteConfirm:r,headerStyle:l,isDraggable:p.isDraggable,icons:n,topLeftItems:i,topRightItems:s},o().createElement(ke,{text:u}))})),at=(0,i.compose)(z.Z,le,se("center"),se("zoom"),oe,m)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,r=void 0===t?function(){}:t,n=e.toggleDeleteConfirm,i=void 0===n?function(){}:n,a=e.id,c=e.title,u=e.map,l=e.icons,s=e.hookRegister,p=e.mapStateSource,d=e.topRightItems,g=e.confirmDelete,y=void 0!==g&&g,v=e.loading,b=void 0!==v&&v,m=e.dataGrid,h=void 0===m?{}:m,O=e.onDelete,w=void 0===O?function(){}:O,j=e.headerStyle,P=e.env,S=u.size,E=S.height,D=S.width,C=u.mapInfoControl,T=E>400&&D>400&&C;return o().createElement(Ce,{id:"widget-text-".concat(a),title:c,confirmDelete:y,onDelete:w,toggleDeleteConfirm:i,headerStyle:j,icons:l,topRightItems:d,isDraggable:h.isDraggable},o().createElement(Ee.Z,{footer:o().createElement("div",{style:{height:"30px",overflow:"hidden"}},b?o().createElement("span",{style:{float:"right"}},o().createElement(Ie.Z,null)):null)},o().createElement(Le,{tools:T?["popup"]:[],updateProperty:r,id:a,map:Fe({},(0,f.omit)(u,"mapStateSource")),mapStateSource:p,hookRegister:s,layers:u&&u.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}},env:P})))})),ct=(0,i.compose)(z.Z,G.Z,V.Z,N,y)(Ke),ut=(0,i.compose)(z.Z,V.Z,G.Z,O.Z,s)((function(e){var t=e.id,r=e.title,n=e.description,i=e.data,a=void 0===i?[]:i,c=e.series,u=void 0===c?[]:c,l=e.loading,s=e.showTable,f=e.confirmDelete,p=void 0!==f&&f,d=e.headerStyle,g=e.icons,y=e.topRightItems,v=e.dataGrid,b=void 0===v?{}:v,m=e.toggleTableView,h=void 0===m?function(){}:m,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,j=e.onDelete,P=void 0===j?function(){}:j,S=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"]);return o().createElement(Ce,{className:"counter-widget",id:"widget-chart-".concat(t),title:r,isDraggable:b.isDraggable,icons:g,topLeftItems:Xe({loading:l,title:r,description:n,showTable:s,toggleTableView:h}),confirmDelete:p,onDelete:P,toggleDeleteConfirm:w,headerStyle:d,topRightItems:y},o().createElement(Qe.Z,Ye({id:t,isAnimationActive:!l,loading:l,data:a,series:u,iconFit:!0},S)))})),lt=(0,i.compose)(z.Z,v.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.id,i=e.title,a=e.icons,c=e.headerStyle,u=e.confirmDelete,l=void 0!==u&&u,s=e.topRightItems,f=e.dataGrid,p=void 0===f?{}:f,d=e.onDelete,g=void 0===d?function(){}:d,y=rt(e,["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"]);return o().createElement(Ce,{id:"widget-text-".concat(n),title:i,confirmDelete:l,onDelete:g,toggleDeleteConfirm:r,headerStyle:c,icons:a,topRightItems:s,isDraggable:p.isDraggable},o().createElement(nt,y))}));function st(){return(st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ft(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=e.toggleCollapse,n=void 0===r?function(){}:r,i=e.exportCSV,a=void 0===i?function(){}:i,c=e.exportImage,u=void 0===c?function(){}:c,l=e.onDelete,s=void 0===l?function(){}:l,f=e.onEdit,p=void 0===f?function(){}:f,d=ft(e,["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"]);return"text"===d.widgetType?o().createElement(it,st({},d,{toggleCollapse:n,onDelete:s,onEdit:p})):"table"===d.widgetType?o().createElement(ct,st({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,onDelete:s,onEdit:p})):"counter"===d.widgetType?o().createElement(ut,st({},d,{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:p})):"map"===d.widgetType?o().createElement(at,st({},d,{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:p})):"legend"===d.widgetType?o().createElement(lt,st({},d,{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:p})):o().createElement(ot,st({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,exportImage:u,onDelete:s,onEdit:p}))}},88395:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>T});var n=r(49977),o=r.n(n),i=r(86494),a=r(57579),c=r(81808),u=r(25958),l=r(80416),s=r(75110),f=r(24684),p=r(69293),d=r(55927),g=r(75982),y=r(78598),v=r(89077),b=r(17542),m=r.n(b),h=r(59425),O=r.n(h);function w(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=function(e){return e.ofType(p.WC,p.a3,p.W5).startWith({type:c.ok}).switchMap((function(t){return t.type===p.WC?o().Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===g.nk}))},C=function(e,t,r,n){return o().Observable.of((0,a.Rz)("mapSync",e),(0,a.Rz)("dependenciesMap",function(e,t,r){var n,o=r.dependenciesMap,c=r.mappings,u=["layer","filter","quickFilters","options"],l=["layers","viewport","zoom","center"],s=(a.oU.exec(t)||[])[1],f=(0,i.omitBy)(o,(function(e){return-1===e.indexOf(s)})),p=Object.keys(c).filter((function(e){return void 0!==c[e]})).reduce((function(e,r){return!(0,i.endsWith)(t,"map")&&(0,i.includes)(u,r)?S(S({},e),{},E({},r,"".concat(t,".").concat(c[r]))):(0,i.endsWith)(t,"map")?(0,i.includes)(l,r)?S(S({},e),{},E({},r,"map"===t?c[r]:"".concat(t,".").concat(c[r]))):S(S({},e),{},E({},r,"".concat(t.replace(".map",""),".").concat(c[r]))):e}),{});return e?S(S(S({},f),p),{},(E(n={},"dependenciesMap","".concat(t.replace(".map",""),".dependenciesMap")),E(n,"mapSync","".concat(t.replace(".map",""),".mapSync")),n)):(0,i.omit)(f,[Object.keys(c)])}(e,t,r)))};const T={exportWidgetData:function(e){return e.ofType(a.Km).do((function(e){var t=e.data,r=void 0===t?[]:t,n=e.title,o=void 0===n?"data":n;return m().json2csv(r,(function(e,t){return e?null:(0,y.saveAs)(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(c.ok,d.E9,a.Jm).map((function(){return(0,u.jx)(n())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,i.isEqual)(w(e),w(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,a._k)(e.reduce((function(e,t){var r,n,o=t.replace(".map","");return(0,i.endsWith)(t,"map")?S(S({},e),{},(E(r={},"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),E(r,"".concat(o,".mapSync"),"".concat(o,".mapSync")),E(r,"map"===t?"viewport":"".concat(t,".viewport"),"".concat(t,".bbox")),E(r,"map"===t?"center":"".concat(t,".center"),"".concat(t,".center")),E(r,"map"===t?"zoom":"".concat(t,".zoom"),"".concat(t,".zoom")),E(r,"map"===t?"layers":"".concat(t,".layers"),"map"===t?"layers.flat":"".concat(t,".layers")),r)):S(S({},e),{},(E(n={},"".concat(t,".filter"),"".concat(t,".filter")),E(n,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),E(n,"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),E(n,"".concat(o,".mapSync"),"".concat(o,".mapSync")),E(n,"".concat(t,".layer"),"".concat(t,".layer")),E(n,"".concat(t,".options"),"".concat(t,".options")),n))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(a.LH).switchMap((function(t){var r=t.active,c=t.availableDependencies,l=void 0===c?[]:c,s=t.options;return r&&l.length>0?1===l.length?C(r,l[0],s):o().Observable.of((0,a.kr)(r,{availableDependencies:l})).merge(e.ofType(a.V5).filter((function(){return(0,u.xI)(n())})).switchMap((function(e){var t=e.widget,c=(0,i.get)((0,u.r0)(n()),"availableDependencies").filter((function(e){return(a.oU.exec(e)||[])[1]===t.id}));return C(r,c[0],s,t.dependeciesMap).concat(o().Observable.of((0,a.kr)(!1,{})))})).takeUntil(e.ofType(g.nk).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.key;return t===a.Cz&&r===a.jv}))))):C(r,l[0],s)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(c.ok).switchMap((function(){var t=(0,f.F)(n()).split("/"),r=t[t.length-1];return e.let(D).filter((function(){var e=(0,f.F)(n()).split("/");return e[e.length-1]!==r})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,r=void 0===t?{}:t;return r&&r.location&&r.location.pathname?o().Observable.of((0,a.K4)()):o().Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(a.pV).do((function(e){var t,r,n=e.widgetDivId,o=e.title,i=void 0===o?"data":o,a=document.createElement("canvas"),c=document.querySelector("#".concat(n," .recharts-wrapper svg")),u=c.outerHTML?c.outerHTML:(t=c,(r=document.createElement("div")).appendChild(t.cloneNode(!0)),r.innerHTML);O()(a,u,{renderCallback:function(){var e=a.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,a.width,a.height),(0,v.RP)(a.toDataURL("image/jpeg",1),"".concat(i,".jpg"),"image/jpeg")}})})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(l.yS).switchMap((function(e){var r,n=e.layer,c=e.newProperties,u=t.getState(),l=(0,s.CA)(u,n);return(r=o().Observable).of.apply(r,w((0,i.has)(c,"layerFilter")&&l?[(0,a.Ko)(l)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(l.x9,l.vs).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var r,n=e.layerId,i=t.getState(),c=(0,s.CA)(i,n);return(r=o().Observable).of.apply(r,w(c&&c.previousLoadingError!==c.loadingError?[(0,a.Ko)(c)]:[]))}))})).mergeAll()}}},88495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),c=r(71703),u=r(22222),l=r(67076),s=r(22843),f=r(827),p=r(25958),d=r(57579),g=r(10473),y=r(54414),v=r(75382),b=r(38482);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var h=r(86494),O=r(69968);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(e){return(0,h.get)((0,h.head)(e,(function(e){return e.color})),"color")};const E=(0,l.withProps)((function(e){var t=e.groups,r=e.showGroupColor,n=e.headerStyle,o=void 0===n?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:n;return{headerStyle:r&&t&&S(t)?j(j({},o),{},{borderTop:"3px solid ".concat(S(t))}):o}}));function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r(2903);var R=(0,l.branch)((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),O.WidthProvider)(O.Responsive),k=E(r(43716).Z),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return(0,h.find)(e.widgets,(function(e){return e===t.id}))}))};const _=(0,l.pure)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.style,n=e.className,i=void 0===n?"":n,a=e.toolsOptions,c=void 0===a?{}:a,u=e.rowHeight,l=void 0===u?208:u,s=e.breakpoints,f=void 0===s?{lg:1200,md:996,sm:768,xs:480,xxs:0}:s,p=e.cols,d=void 0===p?{lg:6,md:6,sm:4,xs:2,xxs:1}:p,g=e.widgets,y=void 0===g?[]:g,v=e.layouts,b=e.dependencies,m=e.verticalCompact,O=void 0!==m&&m,w=e.compactMode,j=e.useDefaultWidthProvider,P=void 0===j||j,S=e.measureBeforeMount,E=e.width,C=e.showGroupColor,x=e.groups,_=void 0===x?[]:x,M=e.canEdit,F=void 0===M||M,Z=e.getWidgetClass,L=void 0===Z?function(){}:Z,W=e.onWidgetClick,H=void 0===W?function(){}:W,N=e.updateWidgetProperty,V=void 0===N?function(){}:N,G=e.deleteWidget,z=void 0===G?function(){}:G,B=e.toggleCollapse,q=void 0===B?function(){}:B,U=e.toggleMaximize,$=void 0===U?function(){}:U,J=e.editWidget,K=void 0===J?function(){}:J,Q=e.onLayoutChange,Y=void 0===Q?function(){}:Q,X=e.language,ee=e.env,te=A(e,["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","env"]),re=y.filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap})),ne=function(e){return"table"===e.widgetType&&re.filter((function(t){return Object.keys(t).filter((function(r){return t[r]&&-1!==t[r].indexOf(e.id)})).length>0})).length>0};return o().createElement(R,{key:t||"widgets-view",useDefaultWidthProvider:P,measureBeforeMount:S,width:P?void 0:E,isResizable:F,isDraggable:F,draggableHandle:".draggableHandle",onLayoutChange:Y,preventCollision:!0,style:r,className:"widget-container ".concat(i," ").concat(F?"":"no-drag"),rowHeight:l,autoSize:!0,verticalCompact:O,compactMode:w,breakpoints:f,cols:d,layouts:v?JSON.parse(JSON.stringify((0,h.mapValues)(v,(function(e){return e.map((function(e){var t=(0,h.find)(y,{id:e.i});return t?T(T({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},y.map((function(e){return o().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return H(e)},className:L(e)},o().createElement(k,D({"data-grid":e.dataGrid},te,e,{quickFilters:ne(e)?e.quickFilters:void 0,toolsOptions:c,groups:I(_,e),showGroupColor:C,dependencies:b,enableColumnFilters:ne(e),canEdit:F,updateProperty:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return V.apply(void 0,[e.id].concat(r))},toggleCollapse:function(){return q(e)},toggleMaximize:function(){return $(e)},onDelete:function(){return z(e)},onEdit:function(){return K(e)},language:X,env:ee})))})))}));function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z,B=(0,l.compose)((0,c.connect)((0,u.P1)(f.J9,p.E5,p.p,p.Jb,p.h9,(function(e,t,r,n,o){return{id:e,widgets:t,layouts:r,maximized:n,dependencies:o}})),{editWidget:d.uT,updateWidgetProperty:d.Ij,exportCSV:d.sD,toggleCollapse:d.f,toggleMaximize:d.Pt,exportImage:d.Rb,deleteWidget:d.E9,onLayoutChange:d.c_}),(0,l.compose)((z={debounceTime:20,closest:!0,querySelector:".fill"},(0,l.compose)((0,l.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),(0,b.Z)(z))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return(0,l.compose)((0,l.defaultProps)({useDefaultWidthProvider:!t}),(function(e){return function(t){return o().createElement(v.Z,{handleWidth:!0},(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.width;return o().createElement(e,m({width:n},t))}))}}))}({overrideWidthProvider:!1}),(0,l.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height,n=e.maximized,o=r-120,i=4,a=Math.floor(o/i-20),c=null!=n&&n.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:1330}:{},u=null!=n&&n.widget?{width:t,useDefaultWidthProvider:!1,rowHeight:r-50,breakpoints:{xxs:0},cols:{xxs:1}}:{},l=t&&t>800?t-570:t-70,s=t?{width:l-1}:{};return V(V({rowHeight:a,className:"on-map",breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1}},s),{},{useDefaultWidthProvider:!1,style:V({left:t&&t>800?"500px":"0",marginTop:52,bottom:65,height:Math.floor((r-100)/(a+10))*(a+10),width:l+"px",position:"absolute",zIndex:50},c)},u)}))),(0,l.compose)((0,l.defaultProps)({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0,showMaximize:!0}}),(0,g.Z)("toolsOptions",{asObject:!0}),(0,l.compose)((0,c.connect)((0,u.P1)(p.Xu,(function(e){return{tray:e}}))),(0,l.withPropsOnChange)(["toolsOptions","tray"],(function(e){var t=e.toolsOptions,r=e.tray;return{toolsOptions:t?V(V({},t),{},{showCollapse:t.showCollapse&&r}):t}}))),(0,l.withPropsOnChange)(["widgets","toolsOptions"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.toolsOptions,o=void 0===n?{}:n;return{widgets:r.filter((function(e){return!e.hide||o.seeHidden}))}}))))(_),q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(n);if(i){var r=H(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return W(this,e)});function c(){return F(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){return this.props.enabled?o().createElement(B,this.props):null}}])&&Z(t.prototype,r),c}(o().Component);G(q,"propTypes",{enabled:a().bool}),G(q,"defaultProps",{enabled:!0});var U=(0,y.Z)(q);const $=(0,s.rx)("WidgetsPlugin",{component:U,containers:{TOC:{doNotHide:!0,name:"Widgets"}},reducers:{widgets:r(75859).Z},epics:r(88395).ZP})},54414:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(22222),o=r(71703),i=r(55105),a=r(93152);const c=(0,o.connect)((0,n.P1)(i.Jz,i.VM,a.c0,(function(e,t,r){return{enabled:!e&&!t&&!r}})))},10473:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67076),o=r(71703),i=r(22222),a=r(827),c=r(74621),u=r(86494);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function e(t){var r=t.accessInfo,n=t.postProcessValue,o=t.reduceFun;return function(t){var i=(0,u.castArray)(t),a=o;return i.length>1&&"__OR__"===i[0]&&(a=function(e,t){return e||t},i=i.slice(1)),i.map((function(t){var i=t;if((0,u.isArray)(i))return e({accessInfo:r,postProcessValue:n,reduceFun:o})(i);var a=!1;i&&(0,u.isString)(i)&&i.startsWith("!")&&(a=!0,i=i.substr(1));var c=function(e){return a?!e:e},l=(0,u.isString)(i)&&i.split(":");if(l&&l[0]){var s=l[0].split(/\!\=\=?/),f=l[0].split(/\=\=?\=?/);return s.length>1?c(n((0,u.get)(r,s[0]),i)!==s[1]):f.length>1?c(n((0,u.get)(r,f[0]),i)===f[1]):c(n((0,u.get)(r,l[0]),i))}return i})).reduce(a||function(e,t){return e&&t})}};const f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.asObject,o=void 0!==r&&r,i=t.postProcessValue,a=void 0===i?function(e){return e}:i,c=t.reduceFun,f=t.accessInfo,p=void 0===f?"accessInfo":f;return(0,n.withPropsOnChange)([e,p],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l({},e,o?(0,u.mapValues)(t[e],s({accessInfo:t[p],postProcessValue:a,reduceFun:c})):s({accessInfo:t[p],postProcessValue:a,reduceFun:c})(t[e]))}))},p=function(){return(0,n.compose)((0,o.connect)((0,i.P1)(a.J9,a._H,c.np,(function(e,t,r){return{accessInfo:{mapId:e,mapInfo:t,user:r}}}))),f.apply(void 0,arguments))}},75859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(57579),o=r(81808),i=r(55927),a=r(27418),c=r.n(a),u=r(28252),l=r.n(u),s=r(86494),f=r(61868);function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};const m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.Cz:return l()("builder.settings.".concat(r.key),r.value,t);case n.n8:return l()("builder.editor",r.widget,l()("builder.settings",r.settings||b.settings,t));case n.dm:return l()("builder.editor",y(y({},r.widget),{},{widgetType:r.widget&&r.widget.widgetType||"chart"}),l()("builder.settings.step","chart"===(r.widget&&r.widget.widgetType||"chart")?1:0,t));case n.BV:return l()("builder.editor.".concat(r.key),r.value,t);case n.Jm:var a=(0,f.vy)("containers[".concat(r.target,"].widgets"),y(y({id:r.id},r.widget),{},{dataGrid:r.id&&{y:0,x:0,w:1,h:1}}),{id:r.widget.id||r.id},t);return a;case n.$A:var u=(0,s.find)((0,s.get)(t,"containers[".concat(r.target,"].widgets")),{id:r.id});return(0,f.vy)("containers[".concat(r.target,"].widgets"),l()(r.key,"merge"===r.mode?c()({},u[r.key],r.value):r.value,u),{id:r.id},t);case n.eb:if(r.layer){var d=(0,s.get)(t,"containers[".concat(n.VR,"].widgets"));if(d)return l()("containers[".concat(n.VR,"].widgets"),d.map((function(e){return(0,s.get)(e,"layer.id")===r.layer.id?l()("layer",r.layer,e):e})),t)}return t;case n.yY:return(0,f.z6)("containers[".concat(r.target,"].widgets"),{id:r.widget.id},t);case i.E9:var g=r.data;return l()("containers[".concat(n.VR,"]"),y({},g),t);case o.ok:var v=r.config||{},m=v.widgetsConfig;return l()("containers[".concat(n.VR,"]"),y({},m),t);case n.v8:return l()("containers[".concat(r.target,"].layout"),r.layout)(l()("containers[".concat(r.target,"].layouts"),r.allLayouts,t));case n.ff:case i.R4:return l()("containers[".concat(n.VR,"]"),b.containers[n.VR],t);case n.S0:var h=r.key,O=r.value;return l()("dependencies[".concat(h,"]"),O,t);case n.Q6:var w=r.key;return l()("dependencies[".concat(w,"]"),null,t);case n.kb:var j=r.dependencies;return l()("dependencies",j,t);case n.GV:return l()("dependencies",b.dependencies,t);case n.Ym:var P=r.widget,S=void 0===P?{}:P;if(S.dataGrid&&S.dataGrid.static)return t;var E=(0,s.get)(t,"containers[".concat(r.target,"].collapsed[").concat(S.id));if(E){var D=[].concat(p((0,s.get)(t,"containers[".concat(r.target,"].layout"),[])),p((0,s.castArray)((0,s.get)(E,"layout",[])))),C=(0,s.mapValues)((0,s.get)(t,"containers[".concat(r.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(p(e),p((0,s.castArray)((0,s.get)(E,"layouts[".concat(t,"]"),[]))))}));return(0,s.omit)((0,f.qC)(l()("containers[".concat(r.target,"].layout"),D),l()("containers[".concat(r.target,"].layouts"),C))(t),"containers[".concat(r.target,"].collapsed[").concat(S.id,"]"))}return l()("containers[".concat(r.target,"].collapsed[").concat(S.id,"]"),{layout:(0,s.find)((0,s.get)(t,"containers[".concat(r.target,"].layout"),[]),{i:S.id}),layouts:(0,s.mapValues)((0,s.get)(t,"containers[".concat(r.target,"].layouts"),{}),(function(e){return(0,s.find)(e,{i:S.id})}))},t);case n.ke:var T,x,A,R,k,I,_,M,F,Z,L,W,H,N,V,G,z,B,q=r.widget,U=null==t||null===(T=t.containers)||void 0===T||null===(x=T[r.target])||void 0===x?void 0:x.maximized;if(!q||null!==(A=q.dataGrid)&&void 0!==A&&A.static)return t;if(null!=U&&U.widget)return(0,f.qC)(l()("containers[".concat(r.target,"].layout"),U.layout),l()("containers[".concat(r.target,"].layouts"),U.layouts),l()("containers[".concat(r.target,"].maximized"),{}),l()("containers[".concat(r.target,"].widgets"),null==t||null===(G=t.containers)||void 0===G||null===(z=G[r.target])||void 0===z||null===(B=z.widgets)||void 0===B?void 0:B.map((function(e){return e.id===U.widget.id?y(y({},e),{},{dataGrid:y(y({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e}))))(t);if(null!=t&&null!==(R=t.containers)&&void 0!==R&&null!==(k=R[r.target])&&void 0!==k&&null!==(I=k.collapsed)&&void 0!==I&&I[q.id])return t;var $={x:0,y:0,w:1,h:1},J=(0,s.find)(null==t||null===(_=t.containers)||void 0===_||null===(M=_[r.target])||void 0===M?void 0:M.layout,{i:q.id}),K=y(y({},J),$);return(0,f.qC)(l()("containers[".concat(r.target,"].maximized"),{widget:q,layout:null==t||null===(F=t.containers)||void 0===F||null===(Z=F[r.target])||void 0===Z?void 0:Z.layout,layouts:null==t||null===(L=t.containers)||void 0===L||null===(W=L[r.target])||void 0===W?void 0:W.layouts}),l()("containers[".concat(r.target,"].layout"),[K]),l()("containers[".concat(r.target,"].layouts"),{xxs:[K]}),l()("containers[".concat(r.target,"].widgets"),null==t||null===(H=t.containers)||void 0===H||null===(N=H[r.target])||void 0===N||null===(V=N.widgets)||void 0===V?void 0:V.map((function(e){return e.id===q.id?y(y({},e),{},{dataGrid:y(y({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e}))))(t);case n.uU:var Q=(0,s.get)(t,"containers[".concat(r.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),Y=Q.filter((function(e){return(0,s.get)(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),X=Q.filter((function(e){return!(0,s.get)(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),ee=0===X.length;return ee?Y.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):X.length>0?X.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):t;case n.nw:return l()("tray",r.value,t);default:return t}}},67306:(e,t,r)=>{"use strict";r.d(t,{Wy:()=>i,i$:()=>a,P0:()=>c});var n=r(22222),o=r(24684),i=function(e){return e&&e.dashboard&&e.dashboard.editor&&e.dashboard.editor.available},a=function(e){return e&&e.dashboard&&e.dashboard.editing},c=function(e){return e&&e.dashboard&&e.dashboard.showConnections};(0,n.P1)(o.F,(function(e){return e&&e.dashboard&&e.dashboard.resource}),(function(e){return e&&e.browser&&e.browser.mobile}),(function(e,t,r){return r?!r:t&&t.canEdit||isNaN(e.substr(-4))}))},25958:(e,t,r)=>{"use strict";r.d(t,{zA:()=>M,jx:()=>_,h9:()=>G,YR:()=>R,lF:()=>T,r0:()=>F,YI:()=>E,um:()=>V,E2:()=>j,zm:()=>C,yZ:()=>W,p:()=>L,Jb:()=>x,E5:()=>A,GW:()=>D,Xu:()=>H,xI:()=>Z,Wo:()=>N});var n=r(86494),o=r(827),i=r(75110),a=r(24684),c=r(57579),u=function(e,t,r){var n,o,i=[],a=[],c=e;for(i.push(c);i.length>0;)if(!r[c=i.shift()])for(r[c]=!0,a.push(c),n=0;n<t.length;n+=1)(o=t[n])[0]!==c||r[o[1]]?o[1]!==c||r[o[0]]||i.push(o[0]):i.push(o[1]);return a},l=function(e){for(var t={},r=[],n=0,o=e.length;n<o;n+=1){var i=e[n],a=i[0],c=i[1],l=null;t[a]?t[c]||(l=c):l=a,l&&r.push(u(l,e,t))}return r},s=r(43143);function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(e,t){var r,o,i=(r=c.oU.exec(e),o=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}}(r,o)||p(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],u=i[1];return a?(0,n.find)(t,{id:u}):null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(t,r){var o=(0,n.get)(r,"mapSync")&&(0,n.get)(r,"dependenciesMap")||{},i=Object.keys(o).map((function(t){return g(o[t],e)}))||[];return[].concat(f(t),f(i.filter((function(e){return void 0!==e})).map((function(e){return[r.id,e.id]}))))}),[])},v=r(67306),b=r(22222),m=r(84715);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){return(0,n.get)(e,"widgets.builder.settings")},P=function(e){return(0,n.get)(e,"widgets.dependencies")||{}},S=function(e){return Object.keys(P(e)).map((function(t){return P(e)[t]}))},E=function(e){return(0,n.get)(e,"widgets.builder.editor")},D=(0,b.P1)(E,i.Iz,(function(e){return(0,v.Wy)(e)&&(0,v.i$)(e)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t||!n&&r})),C=function(e){return(0,n.get)(e,"widgets.containers[".concat(c.VR,"].widgets"))},T=function(e){return(0,n.get)(e,"widgets.containers[".concat(c.VR,"].collapsed"))},x=function(e){return(0,n.get)(e,"widgets.containers[".concat(c.VR,"].maximized"))},A=(0,b.P1)(C,T,x,(function(e,t,r){if(e){if(null!=r&&r.widget)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t===r.widget.id}));if(t)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id;return!t[r]}))}return e})),R=(0,b.P1)(T,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),k=function(e){return(C(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"map"===t}))},I=function(e){return(C(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"table"===t}))},_=(0,b.P1)(k,I,o.Od,a.F,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0;return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat((0,n.castArray)(r).map((function(){return"map"}))).concat((0,n.castArray)(t).filter((function(){return-1===o.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),M=(0,b.P1)(k,I,o.Od,a.F,E,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=i&&"map"!==i.widgetType?i&&i.layer||{}:i&&i.map&&i.map.layers||[];return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat((0,n.castArray)(r).map((function(){return r?"map":null}))).filter((function(e){return e})).concat((0,n.castArray)(t).filter((function(){return-1===o.indexOf("viewer")})).filter((function(e){return(0,n.isArray)(a)||a.name===e.layer.name})).filter((function(e){return i&&i.id!==e.id})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),F=function(e){return(0,n.get)(j(e),"".concat(c.jv))},Z=function(e){return(0,n.get)(F(e),"active")},L=((0,b.P1)(C,(function(e){return function(){var e=l(y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])),t={base:190,range:340,options:{base:10,range:360,s:.67,v:.67}},r=(0,s.qH)(t.base,t.range,e.length+1,t.options);return e.map((function(e,t){return{color:r[t],widgets:e}}))}(e)})),function(e){return(0,n.get)(e,"widgets.containers[".concat(c.VR,"].layouts"))}),W=function(e){return(0,n.get)(e,"widgets.containers[".concat(c.VR,"].layout"))},H=function(e){return(0,n.get)(e,"widgets.tray")},N=function(e){return(0,n.get)(e,"widgets.builder.editor.returnToFeatureGrid",!1)},V=function(e){return(0,n.get)(E(e),"filter")},G=(0,m.y)(P,S,(function(e){return S(e).map((function(t){return 0===t.indexOf("map.")?(0,n.get)((0,o.Od)(e),t.slice(4)):t.match(c.oU)?function(e,t){var r=c.oU.exec(e),o=r&&r[2],i=g(e,t);return o?(0,n.get)(i,o):i}(t,C(e)):(0,n.get)(e,t)}))}),(function(e,t,r){return t.reduce((function(t,n,o){return O(O({},t),{},w({},Object.keys(e)[o],r[o]))}),{})}));(0,b.zB)({widgets:C,layouts:L})},43143:(e,t,r)=>{"use strict";r.d(t,{qH:()=>c,qj:()=>u,qq:()=>l});var n,o=r(17621),i=r.n(o),a=r(86494),c=function(e,t,r,o){var i=e;isNaN(parseFloat(e))&&(i=n.hexToHsv(e)[0]);var a=.5/(r-1),c=t/(r-1),u=[];1===r&&(a=.5,c=t/2);for(var l=0;l<r;l++){var s=i+l*c-t/2,f=a*l+.3,p=f;o&&(s=o.h||s,f=o.s||f,p=o.v||p),u.push(n.hsvToHex(s,f,p,l))}return u},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},l=function(e,t,r){var n=i()(e);return e&&n.setAlpha((0,a.toNumber)(void 0!==t?t:n.getAlpha())).toRgbString()||r};n={decToHex:function(e){var t="0123456789ABCDEF",r=parseInt(e,10);return r=isNaN(r)?0:r,t.charAt(((r=r>255||r<0?0:r)-r%16)/16)+t.charAt(r%16)},rgbToHex:function(e,t,r){return e instanceof Array?n.rgbToHex(e[0],e[1],e[2]):"#"+n.decToHex(e)+n.decToHex(t)+n.decToHex(r)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,r){if(e instanceof Array)return n.rgbToHsv(e[0],e[1],e[2]);var o,i,a,c,u,l=e/255,s=t/255,f=r/255;switch(o=Math.min(Math.min(l,s),f),a=(i=Math.max(Math.max(l,s),f))-o,i){case o:c=0;break;case l:c=60*(s-f)/a,s<f&&(c+=360);break;case s:c=60*(f-l)/a+120;break;case f:c=60*(l-s)/a+240}return u=0===i?0:1-o/i,[Math.round(c),u,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),r=[],o=function e(t,r,o){var i=e(t,r,o);return n.rgbToHex(i)},i=0;i<e;i++)r.push(o(t*i,.57,.63));return r},sameToneRangeColors:c,hsvToRgb:function(e,t,r){if(e instanceof Array)return n.hsvToRgb(e[0],e[1],e[2]);var o,i,a,c=Math.floor(e/60%6),u=e/60-c,l=r*(1-t),s=r*(1-u*t),f=r*(1-(1-u)*t);switch(c){case 0:o=r,i=f,a=l;break;case 1:o=s,i=r,a=l;break;case 2:o=l,i=r,a=f;break;case 3:o=l,i=s,a=r;break;case 4:o=f,i=l,a=r;break;case 5:o=r,i=l,a=s}return[n.realToDec(o),n.realToDec(i),n.realToDec(a)]},hsvToHex:function(e,t,r){var o=n.hsvToRgb(e,t,r);return n.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var r=n.hexToRgb(t);return n.rgbToHsv(r)}return null},hexToRgb:function(e){var t,r,n,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),r=o.charAt(2)+o.charAt(3),n=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},colorToHexStr:u,colorToRgbaStr:l}},89077:(e,t,r)=>{"use strict";r.d(t,{LR:()=>f,RP:()=>p});var n=r(78598),o=r.n(n),i=r(97995),a=r.n(i),c=(r(39902),r(89597),r(66085),r(82702),r(27418),r(72163),r(5055),r(86494));function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(23570);var s=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,c.flatten)([[[/\&/g,"&amp;"]],e?[]:[[/\"/g,"&quot;"]],t?[]:[[/\'/g,"&apos;"]],r?[]:[[/\>/g,"&gt;"]],n?[]:[[/\</g,"&lt;"]]]).reduce((function(e,t){var r=u(t,2),n=r[0],o=r[1];return e.replace(n,o)}),o)};s.bind(null,!0,!0,!0,!1),s.bind(null,!1,!1,!0,!1),r(24262),r(90183),new DOMParser;var f=function(e,t,r){var n=new Blob([e],{type:r});o().saveAs(n,t)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",r=arguments.length>2?arguments[2]:void 0;f(a()(e),t,r)}},72810:()=>{},86799:()=>{}}]);