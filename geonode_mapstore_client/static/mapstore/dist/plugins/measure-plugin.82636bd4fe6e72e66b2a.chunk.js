(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[8854],{85447:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(39153);var o=r(29346);const a=function(e,t){if(t=t||{},!(0,o.Kn)(t))throw new Error("options is invalid");var r=t.properties;if(!e)throw new Error("geojson is required");var a=function(e){var t=[1/0,1/0,-1/0,-1/0];return(0,n.pZ)(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}(e),i=(a[0]+a[2])/2,s=(a[1]+a[3])/2;return(0,o.xm)([i,s],r)}},89602:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{lD:()=>a,yK:()=>i,gf:()=>s,Qr:()=>l,Kx:()=>u,V:()=>p,Wt:()=>c,Qw:()=>m,GI:()=>d,MT:()=>f,XX:()=>g,sc:()=>y,qg:()=>b,Kf:()=>h,ES:()=>v,ud:()=>E,Bd:()=>O,Gd:()=>C,$3:()=>w,el:()=>M,CG:()=>T,h2:()=>S,NR:()=>P,RM:()=>j,dD:()=>A,wB:()=>x,Y_:()=>L,nl:()=>F,S1:()=>R});var a="CHANGE_MEASUREMENT_TOOL",i="CHANGE_MEASUREMENT_STATE",s="MEASUREMENT:CHANGE_UOM",l="MEASUREMENT:CHANGED_GEOMETRY",u="MEASUREMENT:SET_TEXT_LABELS",p="MEASUREMENT:SET_CURRENT_FEATURE",c="MEASUREMENT:ADD_AS_LAYER",m="MEASUREMENT:RESET_GEOMETRY",d="MEASUREMENT:CHANGE_FORMAT",f="MEASUREMENT:CHANGE_COORDINATES",g="MEASUREMENT:ADD_MEASURE_AS_ANNOTATION",y="MEASUREMENT:UPDATE_MEASURES",b="MEASUREMENT:INIT",h="MEASUREMENT:SET_MEASUREMENT_CONFIG",v="MEASUREMENT:SET_ANNOTATION_MEASUREMENT";function E(e,t,r,n,o){return{type:g,features:e,textLabels:t,uom:r,save:n,properties:o}}function O(e){return function(t){t(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:a},e)}(e))}}function C(e,t,r){return{type:s,uom:e,value:t,previousUom:r}}function w(e){return{type:l,features:e}}function M(e,t){return{type:h,property:e,value:t}}function T(e){return{type:u,textLabels:e}}function S(e){return{type:p,featureIndex:e}}function P(e,t,r){return{type:c,features:e,textLabels:t,uom:r}}function j(e){return{type:d,format:e}}function A(e){return{type:f,coordinates:e}}function x(){return{type:m}}function L(e){return{type:y,measures:e}}function F(e){return{type:i,pointMeasureEnabled:e.pointMeasureEnabled,lineMeasureEnabled:e.lineMeasureEnabled,areaMeasureEnabled:e.areaMeasureEnabled,bearingMeasureEnabled:e.bearingMeasureEnabled,geomType:e.geomType,values:e.values,feature:e.feature,point:e.point,len:e.len,area:e.area,bearing:e.bearing,lenUnit:e.lenUnit,areaUnit:e.areaUnit}}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:b,defaultOptions:e}}},45567:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(24852),o=r.n(n),a=r(67076);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=(0,a.compose)((0,a.branch)((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var r=t.onSort,n=t.isDraggable,a=t.items,s=void 0===a?[]:a,u=t.containerId,p=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["onSort","isDraggable","items","containerId"]),c=s.map((function(e,t){return l(l({},e),{},{onSort:r,isDraggable:n,sortId:t,key:e.id||t,containerId:u})}));return o().createElement(e,i({},l(l({},p),{},{isDraggable:n}),{items:c}))}})))},74226:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>C});var n=r(49977),o=r.n(n),a=r(23570),i=r.n(a),s=r(62192),l=r(8797),u=r(89602),p=r(80416),c=r(58767),m=r(82904),d=r(33528),f=r(21914),g=r(7147),y=r(97266),b=r(1550),h=r(42780);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const C={addAnnotationFromMeasureEpic:function(e){return e.ofType(u.XX).switchMap((function(e){var t=e.features,r=e.textLabels,n=e.uom,a=e.save,l=e.properties||{},p=l.id,d=void 0===p?i()():p,f=l.visibility,g=void 0===f||f,y=E(E({},(0,s.tL)(t,r,n,d,"Annotations created from measurements",c.Eo)),{},{newFeature:a,visibility:g});return o().Observable.of((0,m.Xi)("annotations",null),(0,h.A9)(),(0,u.el)("exportToAnnotation",!1),(0,h.yg)(y))}))},addAsLayerEpic:function(e){return e.ofType(u.Wt).switchMap((function(e){var t=e.features,r=e.textLabels,n=e.uom,a=(0,s.tL)(t,r,n,i()());return o().Observable.of((0,p.A4)({type:"vector",id:i()(),name:"Measurements",hideLoading:!0,features:[a],visibility:!0}))}))},openMeasureEpic:function(e,t){return e.ofType(m.At).filter((function(e){return"measure"===e.control&&e.value&&(0,g.Iz)(t.getState())})).switchMap((function(){return o().Observable.of((0,d.YV)(),(0,f.g)(),(0,f.aN)())}))},closeMeasureEpics:function(e,t){return e.ofType(m.kM).filter((function(e){return"measure"===e.control&&!(0,g.QF)(t.getState())})).switchMap((function(){return o().Observable.of((0,h.Rx)())}))},setMeasureStateFromAnnotationEpic:function(e,t){return e.ofType(u.ES).switchMap((function(e){var r,n,a=e.features,i=e.properties,l=(0,y.on)(t.getState())===(null===(r=(0,s.k2)(a))||void 0===r?void 0:r[0]);return o().Observable.of(!l&&(0,u.Bd)({geomType:null===(n=(0,s.k2)(a))||void 0===n?void 0:n[0]}),(0,m.Xg)("measure","enabled",!0),(0,m.Xg)("annotations","enabled",!1),(0,h.r1)(i.id,!1))}))},addCoordinatesEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(b.TR).filter((function(){var e=n().controls.measure,t=e.showCoordinateEditor,r=e.enabled;return t&&r})).switchMap((function(e){var t,r,a,i=e.point,s=(null===(t=n())||void 0===t?void 0:t.measurement)||{},p=s.currentFeature,c=s.features,m=void 0===c?[]:c,d=s.geomType,f=(null==i?void 0:i.latlng)||{},g=f.lng,y=f.lat,b=(null===(r=m[p])||void 0===r||null===(a=r.geometry)||void 0===a?void 0:a.coordinates)||[],h=void 0!==(b="Polygon"===d?b[0]:b)?b.findIndex((function(e){return!(0,l.validateCoord)(e)})):-1;return-1!==h?((b=b.map((function(e){return{lon:e[0],lat:e[1]}})))[h]={lon:g,lat:y},o().Observable.of((0,u.dD)(b))):o().Observable.empty()}))}}},50981:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ke});var n=r(27418),o=r.n(n),a=r(24852),i=r.n(a),s=r(30294),l=r(71703),u=r(22222),p=r(42780),c=r(82904),m=r(89602),d=r(7147),f=r(93152),g=r(97266),y=r(37275),b=r(81756),h=r(86494),v=r(45697),E=r.n(v),O=r(20),C=r(23570),w=r.n(C),M=r(89077),T=r(86638),S=r(62192),P=r(8797),j=r(5346),A=r(47361),x=r(65539),L=r(80717),F=r(43129),R=r(15135),N=r(45567),k=r(58767),D=r(38261),I=r(86267),U=r(73378),B=r(67076),q=function(e,t,r){return(0,h.isNumber)(parseFloat(e))&&!isNaN(parseFloat(e))?(0,P.convertUom)(parseFloat(e),t,r):e},V=function(e,t,r){return(0,h.isNumber)(parseFloat(e))&&!isNaN(parseFloat(e))?parseFloat((0,P.convertUom)(e,r,t).toFixed(4)):e};const G=(0,B.compose)((0,B.defaultProps)({valueUom:"m",displayUom:"m",units:[{value:"degrees",label:"deg",originUom:"degrees"},{value:"ft",label:"ft",originUom:"m"},{value:"m",label:"m",originUom:"m"},{value:"km",label:"km",originUom:"m"},{value:"mi",label:"mi",originUom:"m"},{value:"nm",label:"nm",originUom:"m"}]}),(0,B.withStateHandlers)((function(e){var t=e.displayUom;return{uom:void 0===t?"nm":t}}),{setUom:function(){return function(e){return{uom:e}}}}),(0,B.withState)("localValue","setLocalValue"),(0,B.withPropsOnChange)(["value","localValue","uom","valueUom"],(function(e){var t=e.value,r=e.localValue,n=e.uom,o=e.valueUom;return{value:t===q(r,n,o)?r:V(t,n,o)}})),(0,B.withHandlers)({onChange:function(e){var t=e.uom,r=e.projection,n=e.valueUom,o=e.onChange,a=void 0===o?function(){}:o,i=e.setLocalValue,s=void 0===i?function(){}:i;return function(e){s(e),a(q(e,t,n),r)}}}))((function(e){var t=e.value,r=e.units,n=void 0===r?[]:r,o=e.uom,a=e.projection,l=void 0===a?"EPSG:3857":a,u=e.style,p=void 0===u?{display:"inline-flex",width:"100%"}:u,c=e.setUom,m=void 0===c?function(){}:c,d=e.onChange,f=void 0===d?function(){}:d,g=(0,I.getUnits)(l);return i().createElement(s.FormGroup,{style:p},i().createElement(U.Z,{value:t,placeholder:"radius",name:"radius",onChange:function(e){return f(e,o)},step:1,type:"number"}),i().createElement(s.FormControl,{componentClass:"select",placeholder:"select",value:o,onChange:function(e){return m(e.target.value)},style:{width:85}},n.filter((function(e){var t=e.originUom;return g===t})).map((function(e){return i().createElement("option",{key:e.value,value:e.value},e.label)}))))}));function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var re=(0,R.Z)(s.Glyphicon),ne=(0,R.Z)(s.DropdownButton),oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(n);if(o){var r=ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return J(this,e)});function l(){var e;K(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return te(Q(e=a.call.apply(a,[this].concat(r))),"getValidationStateRadius",(function(e){var t=parseFloat(e);return(0,h.isNaN)(t)?"error":null})),te(Q(e),"renderLabelTexts",(function(t,r){var n=r.textLabels,o=r.featurePropValue;return"Polygon"===e.props.type?!(0,h.isEmpty)(n)&&n[t].text:0!==t?(0,h.isEmpty)(n)?!(0,h.isEmpty)(o)&&o[0].formattedValue:n[t-1].text:null})),te(Q(e),"validateCoordinates",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(t&&t.length){var o=t.filter(k.Tl);return r?o.length>e.props.componentsValidation[e.props.type].min||o.length>=e.props.componentsValidation[e.props.type].min&&!(0,k.Tl)(t[n]):o.length>=e.props.componentsValidation[e.props.type].min}return!1})),te(Q(e),"validateCircle",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.radius;if(t&&t.length){var n=(0,h.head)(t);return!(0,h.isNaN)(parseFloat(r))&&(0,k.Tl)(n)}return!1})),te(Q(e),"validateText",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.valueText;if(t&&t.length){var n=(0,h.head)(t);return!!r&&(0,k.Tl)(n)}return!1})),te(Q(e),"isValid",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>1?arguments[1]:void 0;return e[e.props.componentsValidation[e.props.type].validation](t,!1,r)})),te(Q(e),"addCoordPolygon",(function(t){if("Polygon"===e.props.type){var r,n,o,a=t.filter(k.Tl),i=(null===(r=e.props.features[e.props.currentFeature])||void 0===r||null===(n=r.geometry)||void 0===n||null===(o=n.coordinates)||void 0===o?void 0:o[0])||[],s=void 0!==i?i.findIndex((function(e){return!(0,k.Tl)({lon:e[0],lat:e[1]})})):-1;return t.concat([a.length&&0!==s?a[0]:{lat:"",lon:""}])}return t})),te(Q(e),"change",(function(t,r){var n=e.props.components,o=(0,h.isNaN)(parseFloat(r.lat))?"":parseFloat(r.lat),a=(0,h.isNaN)(parseFloat(r.lon))?"":parseFloat(r.lon);n[t]={lat:o,lon:a};var i=e.addCoordPolygon(n);e.props.onChange(i,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection),e.isValid(n)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(n[t]):((e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(null),e.props.onSetInvalidSelected("coords",n.map(k.bh)))})),e}return t=l,(r=[{key:"renderCircle",value:function(){var e=this;return i().createElement("div",{style:{flex:1,overflowY:"auto",padding:"0 10px"}},i().createElement("div",null,i().createElement(s.FormGroup,{validationState:this.getValidationStateRadius(this.props.properties.radius)},i().createElement(s.ControlLabel,null,i().createElement(j.Z,{msgId:"annotations.editor.radius"})),i().createElement(G,z({placeholder:"radius"},this.props.measureOptions,{value:this.props.properties.radius,projection:this.props.mapProjection,name:"radius",onChange:function(t,r){e.isValid(e.props.components,t)?e.props.onChangeRadius(parseFloat(t),e.props.components.map(k.bh),r):""!==t?e.props.onChangeRadius(parseFloat(t),[],r):(e.props.onChangeRadius(null,e.props.components.map(k.bh),r),e.props.onSetInvalidSelected("radius",e.props.components.map(k.bh)))},step:1,type:"number"})))))}},{key:"render",value:function(){var e=this,t=this.props.features[this.props.currentFeature||0],r=(0,h.get)(t,"geometry.textLabels",[]),n=(0,h.get)(t,"properties.values",[]),o=this.props,a=o.componentsValidation,l=o.type,u=X(this.props.components),p=u.filter(k.Tl).length===u.length,c=this[a[l].validation]()&&p,m=[{value:"decimal",text:i().createElement(j.Z,{msgId:"annotations.editor.decimal"})},{value:"aeronautical",text:i().createElement(j.Z,{msgId:"annotations.editor.aeronautical"})}],d=[{glyph:c?"ok-sign text-success":"exclamation-mark text-danger",tooltipId:c?"annotations.editor.valid":a[l].notValid,visible:!0},{Element:function(){return i().createElement(ne,{noCaret:!0,title:i().createElement(re,{glyph:"cog"}),pullRight:!0,className:"square-button-md no-border",tooltip:"Format"},m.map((function(t){var r=t.text,n=t.value;return i().createElement(s.MenuItem,{active:e.props.format===n,key:n,onClick:function(){return e.props.onChangeFormat(n)}},r)})))}},{glyph:"plus",tooltipId:"annotations.editor.add",disabled:"Bearing"!==l&&this.props.properties.disabled,visible:!a[l].add||!a[l].max||this.props.components.length!==a[l].max,onClick:function(){var t=X(e.props.components);t=t.concat([{lat:"",lon:""}]),e.props.onChange(t,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection)}}];return i().createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},i().createElement("div",{className:"measure-feature-selector"},i().createElement("div",null,this.props.showFeatureSelector?i().createElement(F.ZP,{value:this.props.currentFeature,disabled:this.props.properties.disabled,options:[].concat(X(this.props.features.map((function(t,r){var n=(0,h.get)(t,"properties.values",[]),o="bearing"===(n[0]||{}).type?"Bearing":t.geometry.type;if(o!==e.props.type)return null;var a="LineString"===o?"Length":"Bearing"===o?"Bearing":"Area",i=n.length>0?"".concat(a," ").concat(n[0].formattedValue):"",s=n.length>1&&"Polygon"===o?", Perimeter: ".concat(n[1].formattedValue):"";return{label:"".concat(o," (").concat(i).concat(s,")"),value:r}}))),[{label:(0,T.S$)(this.context.messages,"annotations.editor.newFeature"),value:this.props.features.length}]).filter((function(e){return!!e})),onChange:function(t){return e.props.onChangeCurrentFeature(null==t?void 0:t.value)}}):null),i().createElement("div",null,i().createElement(L.Z,{btnGroupProps:{className:"pull-right"},btnDefaultProps:{className:"square-button-md no-border"},buttons:d}))),"Circle"===this.props.type&&this.renderCircle(),"Circle"===this.props.type&&i().createElement("div",{style:{flex:1,overflowY:"auto",paddingLeft:10,marginTop:10}},i().createElement("div",null,i().createElement(s.ControlLabel,null,i().createElement(j.Z,{msgId:"annotations.editor.center"})))),i().createElement("div",{className:"coordinates-row-container"},this.props.components.map((function(t,o){return i().createElement(i().Fragment,null,e.props.showLengthAndBearingLabel&&i().createElement("div",{className:"label-texts"},i().createElement("span",null,e.renderLabelTexts(o,{textLabels:r,featurePropValue:n}))),i().createElement(D.Z,{format:e.props.format,aeronauticalOptions:e.props.aeronauticalOptions,sortId:o,key:o+" key",disabled:e.props.properties.disabled&&(0,k.Tl)(t),renderer:e.props.renderer,isDraggable:e.props.isDraggable,isDraggableEnabled:e.props.isDraggable&&e[a[l].validation]()&&!e.props.properties.disabled,showDraggable:e.props.isDraggable&&!("Point"===e.props.type||"Text"===e.props.type||"Circle"===e.props.type),formatVisible:!1,removeVisible:a[l].remove,removeEnabled:e[a[l].validation](e.props.components,a[l].remove,o),onSubmit:e.change,onMouseEnter:function(t){(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(t)},onMouseLeave:function(){(e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(null)},onSort:function(t,r){var n=e.props.components.reduce((function(n,o,a){return t===a?[].concat(X(n),t>r?[H({},o),(0,h.head)(e.props.components.filter((function(e,t){return t===r})))]:[(0,h.head)(e.props.components.filter((function(e,t){return t===r}))),H({},o)]):r===a?X(n):[].concat(X(n),[H({},o)])}),[]).filter((function(e){return e}));e.isValid(n)?e.props.onChange(n):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(k.bh))},idx:o,component:t,onRemove:function(){var t=e.props.components.filter((function(e,t){return t!==o}));e.isValid(t)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type&&o!==t.length||"Polygon"===e.props.type?e.props.onHighlightPoint(t[o]):e.props.onHighlightPoint(null),e.props.onChange(t)):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(k.bh))}}))}))),(!this.props.components||0===this.props.components.length)&&i().createElement("div",{className:"text-center",style:{padding:15,paddingBottom:30}},i().createElement("i",null,i().createElement(j.Z,{msgId:"annotations.editor.addByClick"}))))}}])&&$(t.prototype,r),l}(i().Component);te(oe,"propTypes",{components:E().array,measureOptions:E().object,onSetInvalidSelected:E().func,onChange:E().func,onChangeRadius:E().func,onHighlightPoint:E().func,onChangeText:E().func,onChangeFormat:E().func,onChangeCurrentFeature:E().func,format:E().string,aeronauticalOptions:E().object,componentsValidation:E().object,transitionProps:E().object,properties:E().object,mapProjection:E().string,features:E().array,currentFeature:E().number,showFeatureSelector:E().bool,type:E().string,isDraggable:E().bool,isMouseEnterEnabled:E().bool,isMouseLeaveEnabled:E().bool,showLengthAndBearingLabel:E().bool,renderer:E().string}),te(oe,"contextTypes",{messages:E().object}),te(oe,"defaultProps",{components:[],measureOptions:{},onChange:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeCurrentFeature:function(){},onSetInvalidSelected:function(){},componentsValidation:{Bearing:{min:2,max:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Polygon:{min:3,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},LineString:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},MultiPoint:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Point:{min:1,max:1,add:!0,remove:!1,validation:"validateCoordinates",notValid:"annotations.editor.notValidMarker"},Circle:{min:1,max:1,add:!0,remove:!1,validation:"validateCircle",notValid:"annotations.editor.notValidCircle"},Text:{min:1,max:1,add:!0,remove:!1,validation:"validateText",notValid:"annotations.editor.notValidText"}},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},features:[],isDraggable:!0,isMouseEnterEnabled:!1,isMouseLeaveEnabled:!1,properties:{},type:"Point"});const ae=(0,N.Z)(oe);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?ce(e):t}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.e(388).then(r.t.bind(r,40388,23));var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=me(n);if(o){var r=me(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return pe(this,e)});function l(){var e;se(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return de(ce(e=a.call.apply(a,[this].concat(r))),"onGeomClick",(function(t){e.props.geomType!==t&&e.props.toggleMeasure({geomType:t})})),de(ce(e),"onResetClick",(function(){e.props.toggleMeasure({geomType:null})})),de(ce(e),"getToolTips",(function(){return{lineToolTip:i().createElement(s.Tooltip,{id:"tooltip-button.line"},e.props.lengthLabel),areaToolTip:i().createElement(s.Tooltip,{id:"tooltip-button.area"},e.props.areaLabel),bearingToolTip:i().createElement(s.Tooltip,{id:"tooltip-button.bearing"},e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel)}})),de(ce(e),"renderMeasurements",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={style:"decimal",minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2};return i().createElement(s.Grid,{fluid:!0,style:{maxHeight:400}},e.props.lineMeasureEnabled&&i().createElement(s.Row,null,i().createElement(s.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.lineMeasureValueEnabled&&i().createElement(s.Col,{xs:6},i().createElement("span",null,e.props.lengthLabel,": "),i().createElement("span",{id:"measure-len-res",className:"measure-value"},i().createElement("h3",null,i().createElement("strong",null,i().createElement(A.Z,{key:"len",numberParams:r,value:e.props.formatLength(e.props.uom.length.unit,e.props.measurement.len)})," ",e.props.uom.length.label)))),i().createElement(s.Col,{xs:6},i().createElement(O.DropdownList,{disabled:t,value:e.props.uom.length.label,onChange:function(t){e.props.onChangeUom("length",t,e.props.uom)},data:e.props.uomLengthValues,textField:"label",valueField:"value"})))),e.props.areaMeasureEnabled&&i().createElement(s.Row,null,i().createElement(s.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.areaMeasureValueEnabled&&i().createElement(s.Col,{xs:6},i().createElement("span",null,e.props.areaLabel,": "),i().createElement("span",{id:"measure-area-res",className:"measure-value"},i().createElement("h3",null,i().createElement("strong",null,i().createElement(A.Z,{key:"area",numberParams:r,value:e.props.formatArea(e.props.uom.area.unit,e.props.measurement.area)})," ",e.props.uom.area.label)))),i().createElement(s.Col,{xs:6},i().createElement(O.DropdownList,{disabled:t,value:e.props.uom.area.label,onChange:function(t){e.props.onChangeUom("area",t,e.props.uom)},data:e.props.uomAreaValues,textField:"label",valueField:"value"})))),e.props.bearingMeasureEnabled&&e.props.bearingMeasureValueEnabled&&i().createElement(s.Row,null,i().createElement(s.FormGroup,{style:{display:"flex",alignItems:"center",minHeight:34}},i().createElement(s.Col,{xs:6},i().createElement("span",null,e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel,": "),i().createElement("span",{id:"measure-bearing-res",className:"measure-value"},i().createElement("h3",null,i().createElement("strong",null,e.props.formatBearing(e.props.measurement.bearing||0,e.isTrueBearing()&&e.props.measurement.trueBearing))))))))})),de(ce(e),"renderPanel",(function(t){return e.props.showResults?e.renderMeasurements(t):null})),de(ce(e),"renderLabel",(function(t){return e.props.showButtonsLabels?i().createElement("span",{className:"option-text"},(0,T.S$)(e.context.messages,t)):null})),de(ce(e),"renderText",(function(t,r){return t?i().createElement("span",null,i().createElement("span",{className:"option-icon"},i().createElement(s.Glyphicon,{glyph:t})),e.renderLabel(r)):e.renderLabel(r)})),de(ce(e),"isTrueBearing",(function(){return e.props.measurement&&e.props.measurement.trueBearing&&e.props.measurement.trueBearing.measureTrueBearing})),e}return t=l,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.geomType||this.props.toggleMeasure({geomType:"LineString"})}},{key:"shouldComponentUpdate",value:function(e){return!(0,h.isEqual)(e,this.props)}},{key:"render",value:function(){var e,t,r,n=this,o=(0,h.get)(this.props.measurement,"features",[])[this.props.measurement.currentFeature||0],a=(null==o||null===(e=o.properties)||void 0===e?void 0:e.disabled)||!1,l=0===(this.props.measurement.features||[]).length||a;this.props.useSingleFeature?(t=((0,h.get)(this.props.measurement,"feature.geometry.type")||"").toLowerCase(),r=((0,h.get)(this.props.measurement,-1!==t.indexOf("polygon")?"feature.geometry.coordinates[0]":"feature.geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}}))):(t=(0,h.get)(o,"geometry.type","").toLowerCase(),r=((0,h.get)(o,-1!==t.indexOf("polygon")?"geometry.coordinates[0]":"geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}})));var u=(this.props.measurement||{}).exportToAnnotation,p=void 0!==u&&u;return i().createElement(x.Z,{id:this.props.id,style:{overflow:"visible"},header:i().createElement("div",null,i().createElement(s.ButtonToolbar,{style:{width:"100%",marginBottom:15,marginTop:8,display:"flex",justifyContent:"center"}},i().createElement(L.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:this.props.lineGlyph,active:!!this.props.lineMeasureEnabled,bsStyle:this.props.lineMeasureEnabled?"success":"primary",tooltip:this.renderText(this.props.inlineGlyph&&this.props.lineGlyph,"measureComponent.MeasureLength"),onClick:function(){return n.onGeomClick("LineString")},disabled:!this.props.lineMeasureEnabled&&a},{active:!!this.props.areaMeasureEnabled,bsStyle:this.props.areaMeasureEnabled?"success":"primary",glyph:this.props.areaGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.areaGlyph,"measureComponent.MeasureArea"),onClick:function(){return n.onGeomClick("Polygon")},disabled:!this.props.areaMeasureEnabled&&a},{visible:!this.props.disableBearing,active:!!this.props.bearingMeasureEnabled,bsStyle:this.props.bearingMeasureEnabled?"success":"primary",glyph:this.props.bearingGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.bearingGlyph,this.isTrueBearing()?"measureComponent.MeasureTrueBearing":"measureComponent.MeasureBearing"),onClick:function(){return n.onGeomClick("Bearing")},disabled:!this.props.bearingMeasureEnabled&&a}]}),i().createElement(L.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"remove",visible:!!this.props.withReset,tooltip:i().createElement(j.Z,{msgId:"measureComponent.resetTooltip"}),onClick:function(){return n.onResetClick()}}]}),i().createElement(L.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"ext-json",disabled:l,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showExportToGeoJSON,tooltip:i().createElement(j.Z,{msgId:"measureComponent.exportToGeoJSON"}),onClick:function(){(0,M.LR)(JSON.stringify((0,S.tL)(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom,w()(),"MapStore Measurements")),"measurements.json","application/geo+json")}},{glyph:"1-layer",visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsLayer,disabled:l||p,tooltip:i().createElement(j.Z,{msgId:"measureComponent.addAsLayer"}),onClick:function(){return n.props.onAddAsLayer(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom)}},{glyph:p?"floppy-disk":"comment",tooltip:i().createElement(j.Z,{msgId:p?"measureComponent.saveMeasure":"measureComponent.addAsAnnotation"}),onClick:function(){n.props.onAddAnnotation(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom,!p,{id:n.props.measurement.id,visibility:n.props.measurement.visibility})},disabled:l,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsAnnotation}]})),this.renderPanel(a))},this.props.showCoordinateEditor&&i().createElement(s.Grid,{fluid:!0,style:{maxHeight:400,borderTop:"1px solid #ddd"}},this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled?i().createElement(s.Row,{style:this.props.isCoordinateEditorEnabled?{}:{pointerEvents:"none",opacity:.5}},i().createElement(ae,{key:"measureEditor",isMouseEnterEnabled:!0,isMouseLeaveEnabled:!0,format:this.props.format,currentFeature:this.props.measurement.currentFeature,features:this.props.measurement.features,mapProjection:this.props.mapProjection,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onChange:this.props.onChangeCoordinates,onChangeCurrentFeature:this.props.onChangeCurrentFeature,showFeatureSelector:this.props.showFeatureSelector,items:[],isDraggable:!0,type:this.props.geomType,showLengthAndBearingLabel:this.props.showLengthAndBearingLabel,components:this.props.useSingleFeature||-1===t.indexOf("polygon")?r:(0,h.dropRight)(r),properties:(null==o?void 0:o.properties)||{}})):i().createElement(s.Row,null,i().createElement(s.Col,{xs:12,className:"text-center",style:{padding:15}},i().createElement("i",null,i().createElement(j.Z,{msgId:"measureComponent.selectTool"}))))))}}])&&le(t.prototype,r),l}(i().Component);de(fe,"propTypes",{id:E().string,name:E().string,columnProperties:E().object,propertiesChangeHandler:E().func,lengthButtonText:E().oneOfType([E().string,E().element]),areaButtonText:E().oneOfType([E().string,E().element]),resetButtonText:E().oneOfType([E().string,E().element]),lengthLabel:E().oneOfType([E().string,E().element]),areaLabel:E().oneOfType([E().string,E().element]),bearingLabel:E().oneOfType([E().string,E().element]),trueBearingLabel:E().oneOfType([E().string,E().element]),uom:E().shape({length:E().shape({unit:E().string.isRequired,label:E().string.isRequired}),area:E().shape({unit:E().string.isRequired,label:E().string.isRequired})}),toggleMeasure:E().func,measurement:E().object,lineMeasureEnabled:E().bool,lineMeasureValueEnabled:E().bool,areaMeasureEnabled:E().bool,areaMeasureValueEnabled:E().bool,bearingMeasureEnabled:E().bool,bearingMeasureValueEnabled:E().bool,showButtons:E().bool,showResults:E().bool,mapProjection:E().string,lineGlyph:E().string,areaGlyph:E().string,bearingGlyph:E().string,withReset:E().bool,showButtonsLabels:E().bool,inlineGlyph:E().bool,formatLength:E().func,formatArea:E().func,formatBearing:E().func,onChangeUom:E().func,uomLengthValues:E().array,uomAreaValues:E().array,format:E().string,onChangeFormat:E().func,onChangeCoordinates:E().func,onChangeCurrentFeature:E().func,onAddAsLayer:E().func,onHighlightPoint:E().func,geomType:E().string,defaultOptions:E().object,onAddAnnotation:E().func,showAddAsAnnotation:E().bool,showLengthAndBearingLabel:E().bool,showAddAsLayer:E().bool,showFeatureSelector:E().bool,useSingleFeature:E().bool,showExportToGeoJSON:E().bool,disableBearing:E().bool,trueBearing:E().object,onMount:E().func,onUpdateOptions:E().func,showCoordinateEditor:E().bool,isCoordinateEditorEnabled:E().bool}),de(fe,"contextTypes",{messages:E().object}),de(fe,"defaultProps",{mapProjection:"EPSG:3857",columnProperties:{xs:4,sm:4,md:4},uomLengthValues:[{value:"ft",label:"ft"},{value:"m",label:"m"},{value:"km",label:"km"},{value:"mi",label:"mi"},{value:"nm",label:"nm"}],uomAreaValues:[{value:"sqft",label:"ft²"},{value:"sqm",label:"m²"},{value:"sqkm",label:"km²"},{value:"sqmi",label:"mi²"},{value:"sqnm",label:"nm²"}],id:"measure-result-panel",uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},geomType:"LineString",defaultOptions:{geomType:"LineString"},showResults:!0,showAddAsAnnotation:!1,showAddAsLayer:!0,showExportToGeoJSON:!0,showCoordinateEditor:!1,isCoordinateEditorEnabled:!0,showLengthAndBearingLabel:!1,withReset:!0,lineGlyph:"1-measure-length",areaGlyph:"1-measure-area",bearingGlyph:"1-measure-bearing",showButtonsLabels:!0,lengthLabel:i().createElement(j.Z,{msgId:"measureComponent.lengthLabel"}),areaLabel:i().createElement(j.Z,{msgId:"measureComponent.areaLabel"}),bearingLabel:i().createElement(j.Z,{msgId:"measureComponent.bearingLabel"}),trueBearingLabel:i().createElement(j.Z,{msgId:"measureComponent.trueBearingLabel"}),formatLength:function(e,t){return(0,P.convertUom)(t,"m",e)},formatArea:function(e,t){return(0,P.convertUom)(t,"sqm",e)},formatBearing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,P.getFormattedBearingValue)((0,h.round)(e||0,6),t)},onChangeUom:function(){},onChangeFormat:function(){},onMount:function(){},onUpdateOptions:function(){},onAddAsLayer:function(){}});const ge=fe;var ye=r(32107),be=r(7472);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ee(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Se(n);if(o){var r=Se(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Me(this,e)});function l(){var e;Oe(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Pe(Te(e=a.call.apply(a,[this].concat(r))),"onClose",(function(){e.props.onClose(!1)})),Pe(Te(e),"initDefaultOptions",(function(t){var r=t.showCoordinateEditor,n=Ee(t,["showCoordinateEditor"]);e.props.onMount(r||e.props.showCoordinateEditor),e.props.toggleMeasure({geomType:n.geomType||"LineString"}),e.props.onInit(n)})),e}return t=l,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.initDefaultOptions(this.props.defaultOptions)}},{key:"componentDidUpdate",value:function(e){(0,h.isEqual)(e.defaultOptions,this.props.defaultOptions)||this.initDefaultOptions(this.props.defaultOptions)}},{key:"render",value:function(){return this.props.show?this.props.showCoordinateEditor?i().createElement(ye.Z,{dock:!0,bsStyle:"primary",position:"right",title:i().createElement(j.Z,{key:"title",msgId:"measureComponent.Measure"}),glyph:"1-ruler",size:660,open:this.props.show,onClose:this.onClose,style:this.props.style},i().createElement(ge,ve({id:"measure-panel"},this.props))):i().createElement(be.Z,{id:"measure-dialog"},i().createElement("div",{key:"header",role:"header"},i().createElement(s.Glyphicon,{glyph:"1-ruler"})," ",i().createElement(j.Z,{key:"title",msgId:"measureComponent.Measure"}),i().createElement("button",{key:"close",onClick:this.onClose,className:"close"},this.props.closeGlyph?i().createElement(s.Glyphicon,{glyph:this.props.closeGlyph}):i().createElement("span",null,"×"))),i().createElement("div",{key:"body",role:"body"},i().createElement(ge,ve({id:"measure-panel",style:{minWidth:"500px"}},this.props)))):null}}])&&Ce(t.prototype,r),l}(i().Component);Pe(je,"propTypes",{show:E().bool,closeGlyph:E().string,onClose:E().func,onMount:E().func,onInit:E().func,showCoordinateEditor:E().bool,defaultOptions:E().object,style:E().object}),Pe(je,"contextTypes",{messages:E().object}),Pe(je,"defaultProps",{show:!1,defaultOptions:{},onMount:function(){},onInit:function(){},toggleMeasure:function(){},showCoordinateEditor:!1,showAddAsAnnotation:!1,closeGlyph:"1-close",style:{height:"calc(100% - 30px)"}});var Ae=je;function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Re=c.Xi.bind(null,"measure",null),Ne=(0,l.connect)((0,u.P1)([function(e){return{measurement:e.measurement||{},uom:e.measurement&&e.measurement.uom||{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},lineMeasureEnabled:e.measurement&&e.measurement.lineMeasureEnabled,lineMeasureValueEnabled:!(0,f.m6)(e),areaMeasureEnabled:e.measurement&&e.measurement.areaMeasureEnabled,areaMeasureValueEnabled:!(0,f.m6)(e),bearingMeasureEnabled:e.measurement&&e.measurement.bearingMeasureEnabled,showLengthAndBearingLabel:e.measurement&&e.measurement.showLengthAndBearingLabel,bearingMeasureValueEnabled:!(0,f.m6)(e),isCoordinateEditorEnabled:(0,g.iL)(e),showCoordinateEditor:(0,d.Iz)(e),showFeatureSelector:(0,f.m6)(e),useSingleFeature:!(0,f.m6)(e),withReset:(0,f.m6)(e),showExportToGeoJSON:(0,f.m6)(e),showAddAsAnnotation:(0,g.cD)(e)&&(0,f.m6)(e),trueBearing:(0,g.jM)(e),showAddAsLayer:(0,f.m6)(e),isCoordEditorEnabled:e.measurement&&!e.measurement.isDrawing,geomType:e.measurement&&e.measurement.geomType,format:e.measurement&&e.measurement.format}},function(e){return(0,d.QF)(e)}],(function(e,t){return Le(Le({},e),{},{show:t,format:e.format||y.ZP.getConfigProp("defaultCoordinateFormat")||"decimal"})})),{toggleMeasure:m.Bd,onAddAnnotation:m.ud,onChangeUom:m.Gd,onHighlightPoint:p.aS,onChangeFormat:m.RM,onInit:m.S1,onChangeCoordinates:m.dD,onChangeCurrentFeature:m.h2,onClose:Re,onMount:function(e){return(0,c.Xg)("measure","showCoordinateEditor",e)},onAddAsLayer:m.NR},null,{pure:!1})(Ae);const ke={MeasurePlugin:o()(Ne,{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"measurement",position:9,panel:!1,help:i().createElement(b.Z,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:i().createElement(b.Z,{msgId:"measureComponent.Measure"}),icon:i().createElement(s.Glyphicon,{glyph:"1-ruler"}),action:function(){return(0,c.Xg)("measure","enabled",!0)}}}),reducers:{measurement:r(78113).Z},epics:r(74226).ZP}},78113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(89602),o=r(82904),a=r(61868),i=r(62192),s=r(8797),l=r(38946),u=r(86494),p=r(27418),c=r.n(p);function m(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={lineMeasureEnabled:!0,geomType:"LineString",areaMeasureEnabled:!1,bearingMeasureEnabled:!1,customStartEndPoint:{startPointOptions:{radius:3,fillColor:"green"},endPointOptions:{radius:3,fillColor:"red"}},uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},lengthFormula:"haversine",showLabel:!0,showSegmentLengths:!0,currentFeature:0,features:[]};const v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.lD:var r,p=null!==t.geomType&&(0,u.findIndex)(e.features,(function(e){var r,n;return("bearing"===((null===(r=e.properties)||void 0===r||null===(n=r.values)||void 0===n?void 0:n[0])||{}).type?"Bearing":e.geometry.type)===t.geomType}));return c()({},e,{lineMeasureEnabled:t.geomType!==e.geomType&&"LineString"===t.geomType,areaMeasureEnabled:t.geomType!==e.geomType&&"Polygon"===t.geomType,bearingMeasureEnabled:t.geomType!==e.geomType&&"Bearing"===t.geomType,geomType:t.geomType===e.geomType?null:t.geomType,features:null===t.geomType?[]:e.features,textLabels:null===t.geomType?[]:e.textLabels,feature:{properties:{disabled:!0}},currentFeature:-1!==p?p:(null===(r=e.features)||void 0===r?void 0:r.length)||0,len:0,area:0,bearing:0});case n.yK:var d=t.feature;return(0,l.oU)(d)&&(d=(0,a.t8)("geometry.coordinates[0]",(0,u.dropRight)(d.geometry.coordinates[0]),d)),c()({},e,{lineMeasureEnabled:t.lineMeasureEnabled,areaMeasureEnabled:t.areaMeasureEnabled,bearingMeasureEnabled:t.bearingMeasureEnabled,geomType:t.geomType,values:t.values,feature:(0,a.t8)("properties.disabled",e.feature.properties.disabled,d),point:t.point,len:t.len,area:t.area,bearing:t.bearing,lenUnit:t.lenUnit,areaUnit:t.areaUnit});case n.sc:var g=t.measures,v=g.point,E=g.len,O=g.area,C=g.bearing;return y(y({},e),{},{point:v,len:E,area:O,bearing:C});case n.Qw:var w=(0,a.t8)("feature.properties.disabled",!0,e);return y(y({},w),{},{isDrawing:!0,updatedByUI:!1});case n.gf:var M,T="length"===t.uom?"lenUnit":"lenArea",S=t.value,P=S.value,j=S.label;return c()({},e,(b(M={},T,P),b(M,"uom",c()({},t.previousUom,b({},t.uom,{unit:P,label:j}))),b(M,"updatedByUI",!0),M));case n.Qr:var A,x=t.features,L=void 0===x?[]:x,F=(0,i.k2)(L),R=(null===(A=e.features)||void 0===A?void 0:A.length)===L.length?e.currentFeature:L.length?L.length-1:0;return y(y({},e),{},{features:L,currentFeature:R,geomTypeSelected:F,updatedByUI:!1,isDrawing:!1},(0,u.isEmpty)(L)&&{exportToAnnotation:!1});case n.Kf:var N=t.property,k=t.value;return y(y({},e),{},b({},N,k));case n.ES:var D=t.features,I=t.properties,U=(0,i.k2)(D);return y(y({},e),{},{features:D,geomTypeSelected:U,updatedByUI:!0,isDrawing:!1,exportToAnnotation:!0,id:I.id,visibility:I.visibility});case n.Kx:return y(y({},e),{},{textLabels:t.textLabels});case n.V:return y(y({},e),{},{currentFeature:(0,u.isNumber)(t.featureIndex)?t.featureIndex:e.features.length});case o.kM:e.id;var B=f(e,["id"]);return"info"===t.control?y(y({},B),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""}):"measure"===t.control?y(y({},B),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case o.At:return"measure"===t.control&&!1===t.value?y(y({},e),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case o.l:return y(y({},e),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:"",features:[]});case n.GI:return y(y({},e),{},{format:t.format});case n.qg:return y(y({},e),t.defaultOptions);case n.MT:var q,V=t.coordinates.map((function(e){return[e.lon,e.lat]})),G=e.features||[],_=G[e.currentFeature]||{},Z=V.filter((function(e){return(0,s.validateCoord)(e)})).length!==V.length;return y(y({},e),{},{feature:{type:"Feature",properties:{disabled:V.filter((function(e){return(0,s.validateCoord)(e)})).length!==V.length},geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[(0,u.dropRight)(V)]:V}},features:[].concat(m(G.slice(0,e.currentFeature)),[y(y({},_),{},{type:"Feature",properties:y(y({},_.properties||{}),{},{disabled:Z||e.bearingMeasureEnabled&&V.length<2}),geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[[].concat(m(V),[V[0]])]:V,textLabels:(null==_||null===(q=_.geometry)||void 0===q?void 0:q.textLabels)||[]}})],m(G.slice(e.currentFeature+1,G.length))),updatedByUI:!0});default:return e}}},93152:(e,t,r)=>{"use strict";r.d(t,{$v:()=>o,c0:()=>a,m6:()=>i,tH:()=>s});var n=r(86494),o=function(e){return e&&e.maptype&&e.maptype.mapType||"leaflet"},a=function(e){return"cesium"===o(e)},i=function(e){return"openlayers"===o(e)},s=function(e){return(0,n.get)(e,"maptype.last2dMapType")||"leaflet"}},97266:(e,t,r)=>{"use strict";r.d(t,{iL:()=>p,cD:()=>c,jM:()=>m,VH:()=>f,on:()=>g});var n=r(93152),o=r(7147),a=r(61868),i=r(8797);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){return(0,o.Iz)(e)&&!e.measurement.isDrawing&&(0,n.m6)(e)},c=function(e){return e&&e.measurement&&e.measurement.showAddAsAnnotation},m=function(e){return e&&e.measurement&&e.measurement.trueBearing&&e.measurement.trueBearing.measureTrueBearing},d=function(e){var t=e.measurement.feature||{};return t.geometry&&(t=(0,a.t8)("geometry.coordinates",(0,i.validateFeatureCoordinates)(t.geometry||{}),t)),t},f=function(e){return e.measurement&&l(l({},e.measurement),{},{feature:d(e)})||{}},g=function(e){var t;return null==e||null===(t=e.measurement)||void 0===t?void 0:t.geomType}},89077:(e,t,r)=>{"use strict";r.d(t,{LR:()=>c,RP:()=>m});var n=r(78598),o=r.n(n),a=r(97995),i=r.n(a),s=(r(39902),r(89597),r(66085),r(82702),r(27418),r(72163),r(5055),r(86494));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(23570);var p=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,s.flatten)([[[/\&/g,"&amp;"]],e?[]:[[/\"/g,"&quot;"]],t?[]:[[/\'/g,"&apos;"]],r?[]:[[/\>/g,"&gt;"]],n?[]:[[/\</g,"&lt;"]]]).reduce((function(e,t){var r=l(t,2),n=r[0],o=r[1];return e.replace(n,o)}),o)};p.bind(null,!0,!0,!0,!1),p.bind(null,!1,!1,!0,!1),r(24262),r(86267),new DOMParser;var c=function(e,t,r){var n=new Blob([e],{type:r});o().saveAs(n,t)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",r=arguments.length>2?arguments[2]:void 0;c(i()(e),t,r)}},8797:(e,t,r)=>{"use strict";r.r(t),r.d(t,{degToDms:()=>o,getFormattedBearingValue:()=>a,CONVERSION_RATE:()=>i,convertUom:()=>s,validateCoord:()=>l,validateFeatureCoordinates:()=>u,isValidGeometry:()=>p});var n=r(86494);function o(e){var t=Math.floor(e),r=60*(e-t),n=Math.floor(r),o=60*(r-n);return t+"° "+n+"' "+Math.floor(o)+"'' "}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.measureTrueBearing,n=void 0!==r&&r,a=t.fractionDigits,i=void 0===a?0:a,s="";if(n){var l="";e>=0&&e<10?l="00":e>10&&e<100&&(l="0");var u=i>0?e.toFixed(i):Math.floor(e);s=l+u+"°"}else e>=0&&e<90?s="N "+o(e)+"E":e>90&&e<=180?s="S "+o(180-e)+"E":e>180&&e<270?s="S "+o(e-180)+"W":e>=270&&e<=360&&(s="N "+o(360-e)+"W");return s}var i={yd:{ft:3,m:.9144,km:9144e-7,yd:1,mi:.00056818181818,nm:.00049373650107},ft:{ft:1,m:.3048,km:3048e-7,yd:.33333333333334,mi:.0001893932,nm:164579e-9},m:{ft:3.28084,m:1,km:.001,yd:1.0936132983377,mi:621371e-9,nm:.000539956803},km:{ft:3280.84,m:1e3,km:1,yd:1093.6132983377,mi:.62137121212121,nm:.5399568207343395},mi:{ft:5280.000168959982,m:1609.3440514990027,km:1.6093440514990027,yd:1760,mi:1,nm:.8689762697078849},nm:{ft:6076.115679999979,m:1852.0000592639938,km:1.8520000592639938,yd:2025.3718285214,mi:1.150779484848481,nm:1},sqft:{sqft:1,sqm:.09290304,sqkm:9.2903043596611e-8,sqmi:3.587e-8,sqnm:2.7051601137505e-8},sqyd:{sqft:8.9999247491639,sqm:.83612040133779,sqkm:8.3612040133779e-7,sqyd:1,sqmi:3.228278917579e-7,sqnm:2.4346237458194e-7},sqm:{sqft:10.76391,sqm:1,sqkm:1e-6,sqyd:1.196,sqmi:3.8610215854245e-7,sqnm:2.91181e-7},sqkm:{sqft:10763910,sqm:1e6,sqkm:1,sqyd:1196e3,sqmi:.38610215854245,sqnm:.291181},sqmi:{sqft:27878398.920726,sqm:2589988.110336,sqkm:2.589988110336,sqyd:27878398.920726,sqmi:1,sqnm:.75415532795574},sqnm:{sqft:36966388.603652,sqm:3434290.0120544,sqkm:3.4342900120544,sqyd:36966388.603652,sqmi:1.325986786715,sqnm:1}};function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return i[t]&&i[t][r]?e*i[t][r]:e}var l=function(e){return!(0,n.isNaN)(parseFloat(e[0]))&&!(0,n.isNaN)(parseFloat(e[1]))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coordinates,r=e.type,o=t;if("LineString"===r){if((o=t.filter(l)).length<2)return[]}else if("Polygon"===r){if((o=(0,n.head)(t).filter(l)).length<3)return[[]];o=[o.concat([(0,n.head)(o)])]}return o},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coordinates,r=e.type;if(!r||!t||t&&(0,n.isArray)(t)&&0===t.length)return!1;var o=u({coordinates:t,type:r});return(o="Polygon"===r?(0,n.head)(o):o).length>0}},62192:(e,t,r)=>{"use strict";r.d(t,{k2:()=>g,tL:()=>h});var n=r(86494),o=r(23570),a=r.n(o),i=r(58767),s=r(8797),l=r(86267);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e,t){return{length:(0,n.round)((0,s.convertUom)(t,"m",e.length.label)||0,2)+" "+e.length.label,area:(0,n.round)((0,s.convertUom)(t,"sqm",e.area.label)||0,2)+" "+e.area.label,bearing:(0,s.getFormattedBearingValue)((0,n.round)(t||0,6)).toString()}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,n.uniq)(e.map((function(e){return"LineString"===e.geometry.type&&"bearing"===(0,n.get)(e,"properties.values[0].type","")?"Bearing":e.geometry.type})))},y={offsetY:1,fontSize:"10",fontSizeUom:"px",fontFamily:"Courier New",font:"10px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},b={offsetY:-15,fontSize:"13",fontSizeUom:"px",fontFamily:"Courier New",font:"13px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},h=function(e,t,r,o,u,c){var d,g,h=(d=e,(g=(0,n.uniq)(d.map((function(e){return(0,n.get)(e,"properties.values[0].type","")})))).length>1?{title:"Multiple Measurement",iconGlyph:"geometry-collection"}:{title:"Measure "+(0,n.startCase)(g[0]),iconGlyph:"1-measure-"+g[0]});return{type:"FeatureCollection",features:[].concat(m((0,n.flatten)(e.map((function(e){return function(e,t,r){var n,o,u,c=r||b,d=!(null===(n=e.properties)||void 0===n||null===(o=n.values)||void 0===o||!o.find((function(e){return"bearing"===e.type})));return[{type:"Feature",geometry:{type:e.geometry.type,coordinates:(0,s.validateFeatureCoordinates)(e.geometry),textLabels:e.geometry.textLabels},properties:{id:a()(),isValidFeature:!0,geometryGeodesic:"LineString"!==e.geometry.type||d?null:{type:"LineString",coordinates:(0,l.transformLineToArcs)(e.geometry.coordinates)},useGeodesicLines:"LineString"===e.geometry.type&&!d,values:(null===(u=e.properties)||void 0===u?void 0:u.values)||[]},style:[p(p({},i.z4[e.geometry.type]),{},{type:e.geometry.type,id:a()(),geometry:"LineString"!==e.geometry.type||d?null:"lineToArc",title:"".concat(e.geometry.type," Style"),filtering:!0})].concat("LineString"===e.geometry.type?(0,i.N_)():[])}].concat(m(e.properties.values.map((function(e){var r=e.value,n=e.formattedValue,o=e.type;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:n||f(t,r)[o],isText:!0,isValidFeature:!0,id:a()()},style:p(p({},c),{},{id:a()(),filtering:!0,title:"Text Style",type:"Text"})}}))))}(e,r,c)})))),m(t.filter((function(e){return!!e})).map((function(e){var t=e.text;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:t,isValidFeature:!0,isText:!0,id:a()()},style:p(p({},y),{},{id:a()(),filtering:!0,title:"Text Style",type:"Text"})}})))),properties:{id:o,description:u,type:"Measure",title:h.title,iconGlyph:h.iconGlyph},style:{}}}},69669:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(21915),o=r(28795),a=r(32538),i=r(38667),s=function(e){function t(t,r,n){if(e.call(this),void 0!==n&&void 0===r)this.setFlatCoordinates(n,t);else{var o=r||0;this.setCenterAndRadius(t,o,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),void 0,this.layout)},t.prototype.closestPointXY=function(e,t,r,n){var o=this.flatCoordinates,a=e-o[0],i=t-o[1],s=a*a+i*i;if(s<n){if(0===s)for(var l=0;l<this.stride;++l)r[l]=o[l];else{var u=this.getRadius()/Math.sqrt(s);r[0]=o[0]+u*a,r[1]=o[1]+u*i;for(var p=2;p<this.stride;++p)r[p]=o[p]}return r.length=this.stride,s}return n},t.prototype.containsXY=function(e,t){var r=this.flatCoordinates,n=e-r[0],o=t-r[1];return n*n+o*o<=this.getRadiusSquared_()},t.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.computeExtent=function(e){var t=this.flatCoordinates,r=t[this.stride]-t[0];return(0,n.T9)(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)},t.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},t.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t},t.prototype.getType=function(){return o.Z.CIRCLE},t.prototype.intersectsExtent=function(e){var t=this.getExtent();if((0,n.kK)(e,t)){var r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]||(0,n.H6)(e,this.intersectsCoordinate,this)}return!1},t.prototype.setCenter=function(e){var t=this.stride,r=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+r;for(var o=1;o<t;++o)n[t+o]=e[o];this.setFlatCoordinates(this.layout,n),this.changed()},t.prototype.setCenterAndRadius=function(e,t,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,o=(0,i.IG)(n,0,e,this.stride);n[o++]=n[0]+t;for(var a=1,s=this.stride;a<s;++a)n[o++]=n[a];n.length=o,this.changed()},t.prototype.getCoordinates=function(){return null},t.prototype.setCoordinates=function(e,t){},t.prototype.setRadius=function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()},t}(a.ZP);s.prototype.transform;const l=s},72810:()=>{},86799:()=>{}}]);