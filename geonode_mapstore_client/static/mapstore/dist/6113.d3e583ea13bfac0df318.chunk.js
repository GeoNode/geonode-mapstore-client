(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6113],{66113:(t,e,n)=>{"use strict";n.d(e,{$F:()=>S,eg:()=>w,Kg:()=>T,PR:()=>R,eK:()=>C,pu:()=>M,Lu:()=>D,W5:()=>N,TQ:()=>L,En:()=>U,sY:()=>G,vv:()=>z,jq:()=>B,Tr:()=>W,w:()=>H,CK:()=>V,u5:()=>x,z7:()=>X,FW:()=>_,GC:()=>q,yL:()=>F,_O:()=>K,JM:()=>Y,bU:()=>Z,mm:()=>$,X6:()=>Q,NR:()=>tt,I0:()=>et,eB:()=>nt,Af:()=>rt,gN:()=>ot,HB:()=>it,Ho:()=>ut,Ps:()=>ct});var r=n(27361),o=n.n(r),i=n(13311),u=n.n(i),c=n(30998),a=n.n(c),l=n(18446),s=n.n(l),d=n(44908),f=n.n(d),g=n(64721),y=n.n(g),p=n(41609),v=n.n(p),m=n(92579),b=n(74621),h=n(24684);function E(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){P(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(t){return function(e){return o()(e,(0,m.Ll)("geostory.currentStory.".concat(t),e),"")}},w=function(t){return o()(t,"geostory.isCollapsed",!1)},T=function(t){return o()(t,"geostory.currentStory")},R=function(t){return o()(t,"geostory.currentPage",{})},C=function(t){return o()(t,"geostory.mode")},M=function(t){return function(t){return o()(function(t){return o()(t,"geostory.resource")}(t),"canEdit",!1)}(t)||(0,b.qg)(t)},j=function(t){return o()(T(t),"sections",[])},D=function(t){return j(t).length>0},N=function(t){return o()(t,"geostory.isSettingsEnabled",!1)},L=function(t){var e=o()(T(t),"settings",{}),n=j(t).filter((function(t){var e=t.type;return y()([m.ID.CAROUSEL,m.ID.IMMERSIVE],e)})),r=e.checked||[],i=f()(r.map((function(t){return(0,m.Un)(n,t)})).filter((function(t){return t})));return O(O({},e),{},{expanded:i})},k=function(t){return o()(L(t),"checked",[]).reduce((function(t,e){return O(O({},t),{},P({},e,!0))}),{})},U=function(t){return!s()(o()(T(t),"settings",{}),function(t){return o()(t,"geostory.oldSettings",{})}(t))},G=function(t){return o()(t,"geostory.selectedCard","")},z=function(t){return function(e){return S("".concat(t,".resourceId"))(e)}},B=function(t){return o()(T(t),"resources",[])},W=function(t){return function(e){return u()(B(e),{id:t})}},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.withImmersiveSection,n=void 0!==e&&e,r=t.includeAlways,o=void 0===r||r;return function(t){var e=j(t),r=k(t);return e.reduce((function(t,e){if(e.type===m.ID.TITLE&&(o||r[e.id]))return[].concat(E(t),[e]);if(e.type===m.ID.PARAGRAPH&&(o||r[e.id]))return[].concat(E(t),[e]);if(e.type===m.ID.BANNER&&(o||r[e.id]))return[].concat(E(t),[e]);if(y()([m.ID.IMMERSIVE,m.ID.CAROUSEL],e.type)){var i=e.contents&&e.contents.reduce((function(t,e){return o||r[e.id]?[].concat(E(t),[O(O({},e),{},{sectionId:t.id})]):t}),[])||[];return n?[].concat(E(t),[e],E(i)):[].concat(E(t),E(i))}return t}),[])}},V=function(t){return H({includeAlways:!0})(t).length},x=function(t){return a()(H({includeAlways:!0})(t),{id:R(t).columns&&R(t).columns[R(t).sectionId]?R(t).columns[R(t).sectionId]:R(t).sectionId||""})},X=function(t){return void 0!==o()(t,"geostory.focusedContent.target")},_=function(t){return o()(t,"geostory.focusedContent")},q=function(t){return S(o()(t,"geostory.focusedContent.path",""))(t)},F=function(t){return j(t).reduce((function(t,e){if(y()([m.ID.IMMERSIVE,m.ID.CAROUSEL],e.type)){var n=e.contents&&e.contents.map((function(t){return{label:t.title||"",value:t.id}}))||[];return[].concat(E(t),[{label:e.title||"",value:e.id,children:n}])}return[].concat(E(t),[{label:e.title||"",value:e.id}])}),[])},J=function t(e,n){var r=n.contents,o=n.background;return n.resourceId===e||!(!o||o.resourceId!==e)||!!r&&!!u()(r,(function(n){return t(e,n)}))},K=function(t,e){return!!u()(j(t),(function(t){return J(e,t)}))},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,h.F)(t).includes("geostory/shared")},Z=function(t){return o()(t,"geostory.updateUrlOnScroll",!1)},$=function(t){return o()(t,"geostory.currentStory.settings.theme.fontFamilies",[])},Q=function(t){return o()(t,"geostory.mediaEditorSettings")},tt=function(t){var e;return((null===(e=T(t))||void 0===e?void 0:e.sections)||[]).filter((function(t){return t.type===m.ID.CAROUSEL}))},et=function(t){return function(e){return!!u()(tt(e),{id:t})}},nt=function(t){return function(e){var n=u()(tt(e)||[],{id:t});return(null==n?void 0:n.contents)||[]}},rt=function(t){var e=t.contentId,n=t.sectionId;return function(t){var r=function(t){return function(e){var n=tt(e)||[];return u()(n,{id:t})}}(n)(t)||{};return u()(r.contents||[],{id:e})}},ot=function(t){var e;return null===(e=T(t))||void 0===e?void 0:e.drawContent},it=function(t){return!v()(ot(t))},ut=function(t){return o()(t,"geostory.sideEffect",!1)},ct=function(t){return o()(t,"geostory.geoCarouselSettings",{})}},92579:(t,e,n)=>{"use strict";n.d(e,{e1:()=>L,gg:()=>k,Ln:()=>U,ID:()=>G,bT:()=>z,tQ:()=>B,Tr:()=>W,nl:()=>H,ZX:()=>V,lg:()=>x,w:()=>X,cy:()=>_,lt:()=>q,M1:()=>F,kn:()=>K,oH:()=>Y,Aq:()=>$,nq:()=>Q,Ll:()=>tt,ln:()=>et,Un:()=>nt,NC:()=>rt,t4:()=>ot,NP:()=>it,bm:()=>ut,_R:()=>ct,Km:()=>at,of:()=>lt,u0:()=>st,eI:()=>ft});var r=n(27361),o=n.n(r),i=n(30998),u=n.n(i),c=n(30084),a=n.n(c),l=n(1469),s=n.n(l),d=n(52628),f=n.n(d),g=n(63105),y=n.n(g),p=n(82492),v=n.n(p),m=n(47037),b=n.n(m),h=n(13218),E=n.n(h),I=n(64721),A=n.n(I),O=n(13880),P=n.n(O),S=n(55877),w=n.n(S),T=n(13311),R=n.n(T);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var L="geostory",k="EMPTY_CONTENT",U={CASCADE:"cascade"},G={TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner",CAROUSEL:"carousel"},z={TEXT:"text",MEDIA:"media",WEBPAGE:"webPage",COLUMN:"column"},B={MEDIA:"template-media",WEBPAGE:"template-web-page"},W={IMAGE:"image",MAP:"map",VIDEO:"video"},H={EDIT:"edit",VIEW:"view"},V={SHOW_SAVE:"save.show",LOADING:"loading"},x={StoryTypes:f()(U),SectionTypes:f()(G),MediaTypes:f()(W),Modes:f()(H)},X=function(t){var e=t.theme,n=void 0===e?{}:e,r=t.align,o=void 0===r?"center":r,i=t.size,u=void 0===i?"full":i,c=(null==n?void 0:n.value)||b()(n)&&n,a=c&&"custom"!==c&&b()(c)&&" ms-".concat(c)||"",l=" ms-align-".concat(o),s=" ms-size-".concat(u);return"".concat(a).concat(l).concat(s)},_=function(t){var e=t.theme,n=void 0===e?{}:e,r=t.storyTheme;if(""===n||""===(null==n?void 0:n.value))return E()(r)?r:{};var o=null==n?void 0:n.value,i=null==n?void 0:n[o];return E()(i)&&i||{}},q=function(t){return t.type===G.PARAGRAPH&&t&&s()(t.contents)&&t.contents.length&&s()(t.contents[0].contents)&&t.contents[0].contents.length&&t.contents[0].contents[0].type===z.MEDIA},F=function(t,e){var n=function(t){var e=t.split("?");return 2===e.length?e[0]:t}(t),r=document.getElementById(n);r&&r.scrollIntoView(e)},J={zoomControl:!0,mapInfoControl:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!0}}},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v()({},J,t)},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v()({},t,e)},Z=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(e,"i");return!e||n.test(t)},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(e,"i");return y()(t,(function(t){return Z(t.data&&(t.data.title||t.data.name),e,n)||Z(t.data&&t.data.description,e,n)}))},Q=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};switch(e){case G.TITLE:return{id:w()(),type:G.TITLE,title:n("geostory.builder.defaults.titleTitle"),cover:!1,contents:[{id:w()(),type:z.TEXT,html:"",size:"large",align:"center",theme:"",background:{fit:"cover",size:"full",align:"center"}}]};case G.BANNER:return{id:w()(),type:G.BANNER,title:n("geostory.builder.defaults.titleBanner"),cover:!1,contents:[{id:w()(),background:{fit:"cover",size:"full",align:"center"}}]};case G.PARAGRAPH:return{id:w()(),type:G.PARAGRAPH,title:n("geostory.builder.defaults.titleParagraph"),contents:[{id:w()(),type:z.COLUMN,size:"full",align:"center",contents:[{id:w()(),type:z.TEXT,html:""}]}]};case G.IMMERSIVE:return{id:w()(),type:G.IMMERSIVE,title:n("geostory.builder.defaults.titleImmersive"),contents:[t(z.COLUMN,n("geostory.builder.defaults.titleImmersiveContent"))]};case G.CAROUSEL:return{id:w()(),type:e,title:n("geostory.builder.defaults.titleGeocarousel"),template:e,contents:[t(z.COLUMN,n("geostory.builder.defaults.titleGeocarouselContent"))]};case B.MEDIA:return{id:w()(),type:G.PARAGRAPH,title:n("geostory.builder.defaults.titleMedia"),contents:[{id:w()(),type:z.COLUMN,contents:[{id:w()(),type:z.MEDIA,size:"large",align:"center"}]}]};case B.WEBPAGE:return{id:w()(),type:G.PARAGRAPH,title:n("geostory.builder.defaults.titleWebPageSection"),contents:[{id:w()(),type:z.COLUMN,contents:[{id:w()(),type:z.WEBPAGE,size:"medium",align:"center"}]}]};case z.COLUMN:return{id:w()(),type:z.COLUMN,align:"left",size:"small",theme:"",title:n,contents:[{id:w()(),type:z.TEXT,html:""}],background:{fit:"cover",size:"full",align:"center"}};case z.TEXT:return{id:w()(),type:z.TEXT,title:n("geostory.builder.defaults.titleText"),html:""};case z.IMAGE:return{id:w()(),type:e,title:n("geostory.builder.defaults.titleMedia"),size:"full",align:"center"};case z.WEBPAGE:return{id:w()(),type:e,title:n("geostory.builder.defaults.titleWebPage"),size:"medium",align:"center"};case z.MEDIA:return{id:w()(),type:e,title:n("geostory.builder.defaults.titleUnknown"),size:"large",align:"center"};default:return{id:w()(),type:e,title:n("geostory.builder.defaults.titleUnknown"),size:"full",align:"center"}}},tt=function(t,e){return a()(t).reduce((function(t,n){if(n&&0===n.indexOf("{")){var r=JSON.parse(n),i=o()(e,t),c=u()(i,r);return c>=0?[].concat(D(t),[c]):t}return[].concat(D(t),[n])}),[])},et=function(t,e){return a()(t).reduce((function(t,n){var r=t.path,i=t.flatPath;if(n&&0===n.indexOf("{")){var c=JSON.parse(n),a=o()(e,r),l=u()(a,c);if(l>=0){var s=a[l],d=s.id,f=s.type;return{path:[].concat(D(r),[l]),flatPath:[].concat(D(i),[{id:d,type:r[r.length-1],contentType:f}])}}return{path:r,flatPath:i}}return{path:[].concat(D(r),[n]),flatPath:i}}),{path:[],flatPath:[]})},nt=function(t,e){return t.reduce((function(t,n){return A()(n.contents.map((function(t){return t.id})),e)?n.id:t}),null)},rt=function(t){return t.type===G.PARAGRAPH&&!1!==t.editURL&&t&&s()(t.contents)&&t.contents.length&&s()(t.contents[0].contents)&&t.contents[0].contents.length&&t.contents[0].contents[0].type===z.WEBPAGE&&!1!==t.contents[0].contents[0].editURL},ot=function(t,e){if(e)switch(t){case"small":return.4*e;case"medium":return.6*e;case"large":return.8*e;default:return e}return 0},it=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i="EMPTY";if(!e.includes(n))return null;var u=e.substring(e.indexOf(n)).split("/");return r&&n?u.length>1&&u[2]&&Number(u[0])===n?5===u.length?P()(t,"".concat(u[2],"/column/").concat(u[4]),"".concat(r)):P()(t,"".concat(u[2]),"".concat(r)):(e.includes("shared"),""!==u[1]?"".concat(t,"/section/").concat(r):"".concat(t,"section/").concat(r)):!r&&o&&b()(o)&&o!==i&&u.length>1?e.includes("shared")&&!u[2]?t:5===u.length?P()(t,"".concat(u[4]),"".concat(o)):"".concat(t,"/column/").concat(o):null},ut=function(t,e,n){var r={active:e,inactive:n,custom:{families:[],urls:[]}};return t.filter((function(t){return!!t.src})).forEach((function(t,e){r.custom.families[e]=t.family,r.custom.urls[e]=t.src})),r},ct=function(t){return t.map((function(t){return t.family}))},at=["inherit","Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],lt=function(){return window.location.href.match("geostory-embedded")?"geostoryEmbedded":"geostory"},st=function(t){var e=function(t){try{var e;return null===(e=JSON.parse(t))||void 0===e?void 0:e.id}catch(t){return null}},n=a()(t)||[];return{sectionId:e(null==n?void 0:n[1]),contentId:e(null==n?void 0:n[3]),innerContentId:e(null==n?void 0:n[5])}},dt=function(t){var e,n,r,o,i,c,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0,d=function(t,e){return u()(t,{id:e})+1},f=function(t){var e,n;return(null===(e=R()(s,{id:t})||{})||void 0===e||null===(n=e.data)||void 0===n?void 0:n.layers)||[]};switch(t.updateType){case"resource":return{resourceId:t.resourceId,type:"map",map:M(M({},null==a||null===(e=a.background)||void 0===e?void 0:e.map),{},{layers:[].concat(D((null===(n=a.background)||void 0===n||null===(r=n.map)||void 0===r?void 0:r.layers)||[]),D(f(t.resourceId))).filter((function(t,e,n){return n.findIndex((function(e){return e.id===t.id}))===e}))})};case"replace":return{map:M(M({},a.background.map),{},{layers:t.layers})};case"merge":return{map:M(M({},a.background.map),{},{layers:null===(o=(null==a||null===(i=a.background)||void 0===i||null===(c=i.map)||void 0===c?void 0:c.layers)||[])||void 0===o?void 0:o.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.id===L&&"vector"===e.type?M(M({},e),{},{features:e.features.filter((function(e){return e.contentRefId!==t.hideContentId})).map((function(t){return M(M({},t),{},{features:t.features.map((function(e){return M(M({},e),{},{style:[M(M({},e.style[0]),{},{iconText:d(l.contents,t.contentRefId)})]})}))})}))}):e}))})};default:return{}}},ft=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"background",o=M(M({},n),{},{updateType:n.resourceId?"resource":n.layers?"replace":"merge"});return e.map((function(e){return o.sectionId===e.id?M(M({},e),{},{contents:(e.contents||[]).map((function(i){return M(M({},i),"background"===r?{background:M(M({},i.background),dt(o,i,e,t))}:{hideContent:i.id!==n.showContentId})}))}):e}))}}}]);