(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[901],{32420:(e,t,r)=>{"use strict";r.r(t),r.d(t,{toDescribeURL:()=>g,getFeatureSimple:()=>d,getCapabilitiesURL:()=>m,getFeatureURL:()=>y,getFeature:()=>O,getCapabilities:()=>v,describeFeatureTypeOGCSchemas:()=>h,describeFeatureType:()=>b});var n=r(75875),o=r.n(n),i=r(8575),a=r(27418),l=r.n(a);function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e,t){var r=i.parse(e,!0);return i.format(p(p({},r),{},{search:void 0,query:p(p({},r.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))},d=function(e,t){return o().get(e+"?service=WFS&version=1.1.0&request=GetFeature",{params:l()({outputFormat:"application/json"},t)}).then((function(e){return"object"!==s(e.data)?JSON.parse(e.data):e.data}))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.version,n=void 0===r?"1.1.0":r,o=i.parse(e,!0);return i.format(l()({},o,{query:l()({service:"WFS",version:n,request:"GetCapabilities"},o.query)}))},y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.version,o=void 0===n?"1.1.0":n,a=u(r,["version"]),s=i.parse(e,!0);return i.format(l()({},s,{query:l()(p({service:"WFS",typeName:t,version:o,request:"GetFeature"},a),s.query)}))},O=function(e,t,r){return o().get(y(e,t,r))},v=function(e){return o().get(m(e))},h=function(e,t){var n=i.parse(e,!0),a=i.format(l()({},n,{query:l()({service:"WFS",version:"1.1.0",typeName:t,request:"DescribeFeatureType"},n.query)}));return new Promise((function(e){Promise.all([r.e(9942),r.e(7674)]).then(function(){var t=r(97674).unmarshaller;e(o().get(a).then((function(e){var r=t.unmarshalString(e.data);return r&&r.value})))}.bind(null,r)).catch(r.oe)}))},b=function(e,t){return o().get(g(e,t)).then((function(e){return e.data}))}},93152:(e,t,r)=>{"use strict";r.d(t,{$v:()=>n,c0:()=>o});var n=function(e){return e&&e.maptype&&e.maptype.mapType||"leaflet"},o=function(e){return"cesium"===n(e)}},47805:(e,t,r)=>{"use strict";r.d(t,{toCQLFilter:()=>G,isFilterValid:()=>P});var n=r(65692),o=r(78889),i=r(99321),a=r(89291),l=r(89737),u=r.n(l),s=r(2245),c=r.n(s),p=r(90183),f=r(61545);function g(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v,h=function(e){return e&&e.replace?e.replace(/\'/g,"''"):e},b=function(e,t){return!(0,f.isNil)(e)&&"isNull"!==t||!(0,f.isUndefined)(e)&&"isNull"===t},w=function(e){return'"'+e+'"'},F=function(e){return e?"1.0"===e?"1.0.0":"1.1"===e?"1.1.0":e:"2.0"},S={ogc:{startTag:"<ogc:PropertyName>",endTag:"</ogc:PropertyName>"},fes:{startTag:"<fes:ValueReference>",endTag:"</fes:ValueReference>"}},T=function(e,t,r,n){var o;if("><"===t){if(r.startDate&&r.endDate){var a=r.startDate.toISOString?r.startDate.toISOString():r.startDate,l=r.endDate.toISOString?r.endDate.toISOString():r.endDate;o=i.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+a+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+l+"</"+n+":Literal></"+n+":UpperBoundary>")}}else if(r.startDate){var u=r.startDate.toISOString?r.startDate.toISOString():r.startDate;o=i.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+u+"</"+n+":Literal>")}return o},C=function(e,t,r,n){var o;return b(r,t)&&(o="isNull"===t?i.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag):"="===t?i.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>"):i.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>*"+r+"*</"+n+":Literal>")),o},L=function(e,t,r,n){var o="";return b(r,t)&&"="===t&&""!==r&&(o=i.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o},x=function(e,t,r,n){var o;if("><"===t)(0,f.isNil)(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?(0,f.isNil)(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?(0,f.isNil)(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(o=i.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+r.lowBound+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+r.upBound+"</"+n+":Literal></"+n+":UpperBoundary>")):o=i.ogcComparisonOperators["<="](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r.upBound+"</"+n+":Literal>"):o=i.ogcComparisonOperators[">="](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r.lowBound+"</"+n+":Literal>");else{var a=(0,f.isNil)(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;(0,f.isNil)(a)||(o=i.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+a+"</"+n+":Literal>"))}return o},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeName,r=e.geometryName,n=e.cqlFilter,o=void 0===n?"INCLUDE":n;return"queryCollection('".concat(t,"', '").concat(r,"','").concat(h(o),"')")},N=function(e){return"collectGeometries(".concat(e,")")},I=function(e,t,r){var n,l,s,p,g,d,m,O=[];if(e.filterFields&&e.filterFields.length>0)""!==(n=e.groupFields&&e.groupFields.length>0?v.processOGCFilterGroup(e.groupFields[0],e,r):v.processOGCFilterFields(null,e,r))&&O.push(n);else if(e.simpleFilterFields&&e.simpleFilterFields.length>0){var h=i.ogcLogicalOperators.AND(r,e.simpleFilterFields.map((function(e){return function(e,t){var r="";switch(e.type){case"date":r=T(e.attribute,e.operator,e.values,t);break;case"number":r=x(e.attribute,e.operator,e.values,t);break;case"string":r=C(e.attribute,e.operator,e.values,t);break;case"boolean":r=L(e.attribute,e.operator,e.values,t);break;case"list":e.values&&e.values.length>0&&(r=e.values.reduce((function(r,n){var o=null===n||"null"===n?"isNull":"=";return r+C(e.attribute,o,n,t)}),""),r=i.ogcLogicalOperators.OR(t,r))}return r}(e,r)})).join(""));O.push(h)}if((0,f.isArray)(e.spatialField)?(p=(0,f.find)(e.spatialField,(function(e){return"BBOX"===e.operation})))||(s=e.spatialField):e.spatialField&&("BBOX"===e.spatialField.operation?p=e.spatialField:s=[e.spatialField]),p){if((0,f.isArray)(p.geometry&&p.geometry.extent[0])){var b=p.geometry.extent.reduce((function(e,n){var o=Object.assign({},p);return p.geometry.extent=n,e+v.processOGCSpatialFilter(t,o,r)}),"");l=i.ogcLogicalOperators.OR(r,b)}O.push(l)}else if(s&&(s=s.filter((function(e){return e&&e.geometry&&e.operation}))).length>0){var w=s.map((function(e){return v.processOGCSpatialFilter(t,e,r)})).join("");l=s.length>1?i.ogcLogicalOperators[e.spatialFieldOperator||"AND"](r,w):w,O.push(l)}if(e.crossLayerFilter&&e.crossLayerFilter.operation){var F=y(y({},e.crossLayerFilter),{},{attribute:e.crossLayerFilter.attribute});Array.isArray()?F.forEach((function(e){return O.push(v.processOGCCrossLayerFilter(e,r))})):O.push(v.processOGCCrossLayerFilter(F,r))}return e.options&&e.options.cqlFilter&&O.push((g=e.options.cqlFilter,d={filterNS:r,wfsVersion:t,gmlVersion:(0,o.wfsToGmlVersion)(t)},m=c()(d),u()(m)((0,a.read)(g)))),O},G=function(e){var t;try{t=e instanceof Object?e:JSON.parse(e)}catch(e){return e}var r,n,o=[];if(t.filterFields&&t.filterFields.length>0)(r=v.processCQLFilterGroup(t.groupFields[0],t))&&o.push(r);else if(t.simpleFilterFields&&t.simpleFilterFields.length>0){var i=t.simpleFilterFields.reduce((function(e,t){var r=e,n=v.processCQLSimpleFilterField(t);return!1!==n&&(r=e.length>0?e+" AND ("+n+")":"("+n+")"),r}),"");i=i.length>0?i:"INCLUDE",o.push(i)}if(t.spatialField&&(n=v.processCQLSpatialFilter(t))&&o.push(n),t.crossLayerFilter){var a=t.crossLayerFilter,l=a.operation,u=a.attribute,s=a.collectGeometries&&a.collectGeometries.queryCollection;if(l&&u&&s){var c=s.typeName,p=s.geometryName,f=v.getCrossLayerCqlFilter(a),g=N(E({typeName:c,geometryName:p,cqlFilter:f}));o.push("".concat(l,"(").concat(u,",").concat(g,")"))}}return o.length?"("+(o.length>1?o.join(") AND ("):o[0])+")":null},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filterFields&&e.filterFields.length>0||e.simpleFilterFields&&e.simpleFilterFields.length>0||e.spatialField&&e.spatialField.geometry&&e.spatialField.operation||(0,f.isArray)(e.spatialField)&&(0,f.findIndex)(e.spatialField,(function(e){return e.operation&&e.geometry}))>-1||e.crossLayerFilter&&e.crossLayerFilter.collectGeometries&&e.crossLayerFilter.collectGeometries.queryCollection&&e.crossLayerFilter.collectGeometries.queryCollection.geometryName&&e.crossLayerFilter.collectGeometries.queryCollection.typeName};v={processOGCFilterGroup:function(e,t,r){var n=v.processOGCFilterFields(e,t,r),o=v.findSubGroups(e,t.groupFields);return o.length>0&&o.forEach((function(e){n+=v.processOGCFilterGroup(e,t,r)})),""!==n?i.ogcLogicalOperators[e.logic](r,n):""},processOGCFilterFields:function(e,t,r){var n=e?t.filterFields.filter((function(t){return t.groupId===e.id&&b(t.value,t.operator)})):t.filterFields.filter((function(e){return b(e.value,e.operator)}));return n.length?n.reduce((function(e,t){var n;switch(t.type){case"date":case"date-time":case"time":n=T(t.attribute,t.operator,t.value,r);break;case"number":n=x(t.attribute,t.operator,t.value,r);break;case"string":n=C(t.attribute,t.operator,t.value,r);break;case"boolean":n=L(t.attribute,t.operator,t.value,r);break;case"list":n=function(e,t,r,n){var o;return(0,f.isNil)(r)||(o=i.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o}(t.attribute,t.operator,t.value,r)}return"isNull"===t.operator&&(n=C(t.attribute,t.operator,t.operator,r)),n&&e.push(n),e}),[]).join(""):""},processOGCCrossLayerFilter:function(e,t){var r=t||"ogc",n=S[r].startTag+e.attribute+S[r].endTag;if(e.collectGeometries){var o=v.getCrossLayerCqlFilter(e);n+='<ogc:Function name="collectGeometries"><ogc:Function name="queryCollection">'+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.typeName,"</ogc:Literal>")+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.geometryName,"</ogc:Literal>")+"<ogc:Literal><![CDATA[".concat(o,"]]></ogc:Literal>")+"</ogc:Function></ogc:Function>"}return"DWITHIN"===e.operation&&(n+="<"+r+':Distance units="m">'+(e.distance||0)+"</"+r+":Distance>"),i.ogcSpatialOperators[e.operation](r,n)},getGetFeatureBase:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=F(e),a="<wfs:GetFeature ";switch(a+=n?'outputFormat="'+n+'" ':"",a+=t&&(t.startIndex||0===t.startIndex)?'startIndex="'+t.startIndex+'" ':"",a+=o.viewParams?' viewParams="'.concat(o.viewParams,'" '):"",i){case"1.0.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" outputFormat="GML2" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd"')+">";break;case"1.1.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"')+">";break;default:a+=t&&t.maxFeatures?'count="'+t.maxFeatures+'" ':"",a=r&&!t?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')+">"}return a},toOGCFilterParts:I,findSubGroups:function(e,t){return t.filter((function(t){return t.groupId===e.id}))},toCQLFilter:G,getCrossLayerCqlFilter:function(e){return(0,f.get)(e,"collectGeometries.queryCollection.cqlFilter")||((0,f.get)(e,"collectGeometries.queryCollection.filterFields")||[]).length>0&&((0,f.get)(e,"collectGeometries.queryCollection.groupFields")||[]).length>0&&v.toCQLFilter(e.collectGeometries.queryCollection)||"INCLUDE"},processCQLFilterGroup:function(e,t){var r="NOR"===e.logic?y(y({},e),{},{logic:"AND",negateAll:!0}):e,n=v.processCQLFilterFields(r,t),o=v.findSubGroups(r,t.groupFields);if(o.length>0){var i=o.map((function(e){return(r.negateAll?"NOT (":"(")+v.processCQLFilterGroup(e,t)+")"})).join(" "+r.logic+" ");return n?[n,i].join(" "+r.logic+" "):i}return n},processCQLSimpleFilterField:function(e){var t=!1;switch(e.type){case"date":t=v.cqlDateField(e.attribute,e.operator,e.values);break;case"number":t=v.cqlNumberField(e.attribute,e.operator,e.values);break;case"string":t=v.cqlStringField(e.attribute,e.operator,e.values);break;case"boolean":t=v.cqlBooleanField(e.attribute,e.operator,e.values);break;case"list":if(e.values.length!==e.optionsValues.length){var r=!1,n=e.values.reduce((function(e,t){return null===t||"null"===t?r=!0:e.push("'"+t+"'"),e}),[]);t=n.length>0?e.attribute+" IN("+n.join(",")+")":t,r&&(t=t?t+" OR isNull("+e.attribute+")=true":"isNull("+e.attribute+")=true")}}return!!(t&&t.length>0)&&t},processCQLSpatialFilter:function(e){var t=((0,f.isArray)(e.spatialField)?e.spatialField:[e.spatialField]).filter((function(e){return e&&e.geometry&&e.operation})),r="";return t.forEach((function(n,o){if(r+=n.operation+'("'+n.attribute+'",',n.collectGeometries&&n.collectGeometries.queryCollection)r+=N(E(n.collectGeometries.queryCollection));else{var i=n.geometry.projection||"";i=2===i.split(":").length?"SRID="+i.split(":")[1]+";":"",r+=i+v.getCQLGeometryElement(n.geometry.coordinates,n.geometry.type)}r+=")",o<t.length-1&&(r+=" ".concat(e.spatialFieldOperator||"AND"," "))})),r},processCQLFilterFields:function(e,t){var r=t.filterFields.filter((function(t){return t.groupId===e.id})),n=[];return r&&(r.forEach((function(t){var r;switch(t.type){case"date":case"time":case"date-time":r=v.cqlDateField(t.attribute,t.operator,t.value);break;case"number":r=v.cqlNumberField(t.attribute,t.operator,t.value);break;case"string":r=v.cqlStringField(t.attribute,t.operator,t.value);break;case"boolean":r=v.cqlBooleanField(t.attribute,t.operator,t.value);break;case"list":r=v.cqlListField(t.attribute,t.operator,t.value)}r&&n.push(e.negateAll?"NOT ("+r+")":r)})),n=n.join(" "+e.logic+" ")),n},getCQLGeometryElement:function(e,t){var r=t+"(";switch(t){case"Point":r+=e.join(" ");break;case"MultiPoint":e.forEach((function(t,n){r+=t.join(" "),r+=n<e.length-1?", ":""}));break;case"Polygon":e.forEach((function(t,o){r+="(";var i=(0,n.closePolygon)(t).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=o<e.length-1?", ":""}));break;case"MultiPolygon":e.forEach((function(t,o){r+="(",t.forEach((function(e,o){r+="(";var i=(0,n.closePolygon)(e).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=o<t.length-1?", ":""})),r+=")",r+=o<e.length-1?", ":""}))}return r+=")"},cqlStringField:function(e,t,r){var n,o=w(e);return(0,f.isNil)(r)||(n="isNull"===t?"isNull("+o+")=true":"="===t?o+t+"'"+h(r)+"'":"ilike"===t?"strToLowerCase("+o+") LIKE '%"+h(r).toLowerCase()+"%'":o+" LIKE '%"+h(r)+"%'"),n},cqlDateField:function(e,t,r){var n;return"><"===t?r.startDate&&r.endDate&&(n="("+e+">='"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"' AND "+e+"<='"+(r.endDate.toISOString?r.endDate.toISOString():r.endDate)+"')"):r.startDate&&(n=e+t+"'"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"'"),n},cqlNumberField:function(e,t,r){var n,o=w(e);if("><"===t)(0,f.isNil)(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?(0,f.isNil)(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?(0,f.isNil)(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(n="("+o+">='"+r.lowBound+"' AND "+o+"<='"+r.upBound+"')"):n="("+o+"<='"+r.upBound+"')":n="("+o+">='"+r.lowBound+"')";else{var i=(0,f.isNil)(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;(0,f.isNil)(i)||(n=o+" "+t+" '"+i+"'")}return n},cqlBooleanField:function(e,t,r){var n="";return(0,f.isNil)(r)||""===r||"="===t&&(n='"'+e+'"'+t+"'"+r+"'"),n},cqlListField:function(e,t,r){return v.cqlStringField(e,t,r)},toOGCFilter:function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"EPSG:4326";try{n=t instanceof Object?t:JSON.parse(t)}catch(e){return e}var s=F(r||"2.0"),c="2.0"===s?"fes":"ogc",p=v.getGetFeatureBase(s,n.pagination,i,a,t&&t.options),f=v.toOGCFilterParts(n,s,c),g="";return f.length>0&&(g="<"+c+":Filter>",1===f.length?g+=f[0]:(g+="<"+c+":And>",f.forEach((function(e){g+=e})),g+="</"+c+":And>"),g+="</"+c+":Filter>"),p+="<wfs:Query ".concat("2.0"===s?"typeNames":"typeName",'="').concat(e,'" ').concat("native"!==u&&'srsName="'.concat(u,'"')||"",">"),p+=g,l&&(p+=l.map((function(e){return S[c].startTag+e+S[c].endTag})).join("")),o&&o.sortBy&&o.sortOrder&&(p+="<"+c+":SortBy><"+c+":SortProperty>"+S[c].startTag+o.sortBy+S[c].endTag+"<"+c+":SortOrder>"+o.sortOrder+"</"+c+":SortOrder></"+c+":SortProperty></"+c+":SortBy>"),p+"</wfs:Query></wfs:GetFeature>"},reprojectFilterInNativeCrs:function(e,t){var r,n=e.spatialField.geometry.projection,o=e.spatialField.geometry.center,i=e.spatialField.geometry.radius,a=(0,p.reprojectGeoJson)(e.spatialField.geometry,e.spatialField.geometry.projection||"EPSG:3857",t).coordinates,l=o&&[(r=(0,p.reproject)(o,n,t)).x,r.y],u=i&&(0,p.reproject)([i,0],n,t).x;return y(y({},e),{},{spatialField:y(y({},e.spatialField),{},{geometry:y(y({},e.spatialField.geometry),{},{center:l,radius:u,coordinates:a,projection:t})})})},processOGCSpatialFilter:function(e,t,r){if(t.collectGeometries)return v.processOGCCrossLayerFilter(t);var a=S[r].startTag+t.attribute+S[r].endTag;switch(t.operation){case"INTERSECTS":case"DWITHIN":case"WITHIN":case"CONTAINS":a+=(0,n.processOGCGeometry)((0,o.wfsToGmlVersion)(e),t.geometry),"DWITHIN"===t.operation&&(a+="<"+r+':Distance units="m">'+(t.geometry.distance||0)+"</"+r+":Distance>");break;case"BBOX":var l=t.geometry.extent[0]+" "+t.geometry.extent[1],u=t.geometry.extent[2]+" "+t.geometry.extent[3];a+='<gml:Envelope srsName="'+t.geometry.projection+'"><gml:lowerCorner>'+l+"</gml:lowerCorner><gml:upperCorner>"+u+"</gml:upperCorner></gml:Envelope>"}return i.ogcSpatialOperators[t.operation](r,a)},mergeFiltersToOGC:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nsPlaceholder,r=void 0===t?"ogc":t,n=e.ogcVersion,i=void 0===n?"2.0":n,l=e.addXmlnsToRoot,s=void 0!==l&&l,p=e.xmlnsToAdd,d=void 0===p?[]:p,m=c()({filterNS:r,wfsVersion:i,gmlVersion:(0,o.wfsToGmlVersion)(i)}),y=u()(m),O=arguments.length,v=new Array(O>1?O-1:0),h=1;h<O;h++)v[h-1]=arguments[h];var b=m.filter(m.and.apply(m,g((0,f.flatten)(v.filter((function(e){return!!e&&((0,f.isString)(e)||P(e)&&!e.disabled)})).map((function(e){return(0,f.isString)(e)?[y((0,a.read)(e))]:I(e,i,r)}))))));if(s){var w=b.indexOf(">");return"".concat(b.slice(0,w)).concat(d.length>0?" ".concat(d.join(" ")):"").concat(b.slice(w))}return b}}},52259:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_SCREEN_DPI:()=>v,METERS_PER_UNIT:()=>h,GOOGLE_MERCATOR:()=>b,EXTENT_TO_ZOOM_HOOK:()=>w,ZOOM_TO_EXTENT_HOOK:()=>F,RESOLUTIONS_HOOK:()=>S,RESOLUTION_HOOK:()=>T,COMPUTE_BBOX_HOOK:()=>C,GET_PIXEL_FROM_COORDINATES_HOOK:()=>L,GET_COORDINATES_FROM_PIXEL_HOOK:()=>x,registerHook:()=>N,getHook:()=>I,executeHook:()=>G,clearHooks:()=>P,dpi2dpm:()=>j,dpi2dpu:()=>D,getSphericalMercatorScale:()=>_,getGoogleMercatorScale:()=>M,getSphericalMercatorScales:()=>R,getGoogleMercatorScales:()=>B,getResolutionsForScales:()=>k,getGoogleMercatorResolutions:()=>A,getResolutions:()=>q,getScales:()=>U,defaultGetZoomForExtent:()=>H,getZoomForExtent:()=>K,getCurrentResolution:()=>V,getCenterForExtent:()=>X,getBbox:()=>W,isNearlyEqual:()=>Q,mapUpdated:()=>Z,transformExtent:()=>z,groupSaveFormatted:()=>$,saveMapConfiguration:()=>J,generateNewUUIDs:()=>Y,mergeMapConfigs:()=>ee,addRootParentGroup:()=>te,isSimpleGeomType:()=>re,getSimpleGeomType:()=>ne,getIdFromUri:()=>oe,parseLayoutValue:()=>ie,prepareMapObjectToCompare:()=>ae,updateObjectFieldKey:()=>le,compareMapChanges:()=>ue,createRegisterHooks:()=>se,default:()=>ce});var n=r(61545),o=r(23570),i=r.n(o),a=r(90183),l=r(61868),u=r(24262),s=r(27418),c=r.n(s);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function g(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=96,h={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},b={RADIUS:6378137,TILE_WIDTH:256,ZOOM_FACTOR:2},w="EXTENT_TO_ZOOM_HOOK",F="ZOOM_TO_EXTENT_HOOK",S="RESOLUTIONS_HOOK",T="RESOLUTION_HOOK",C="COMPUTE_BBOX_HOOK",L="GET_PIXEL_FROM_COORDINATES_HOOK",x="GET_COORDINATES_FROM_PIXEL_HOOK",E={};function N(e,t){E[e]=t}function I(e){return E[e]}function G(e,t,r){var n=I(e);return n?t(n):r?r():null}function P(){E={}}function j(e){return e*(100/2.54)}function D(e,t){var r=(0,a.getUnits)(t||"EPSG:3857");return h[r]*j(e||v)}function _(e,t,r,n,o){return 2*Math.PI*e/(t*Math.pow(r,n)/j(o||v))}function M(e,t){return _(b.RADIUS,b.TILE_WIDTH,b.ZOOM_FACTOR,e,t)}function R(e,t,r,n,o,i){for(var a=[],l=n;l<=o;l++)a.push(_(e,t,r,l,i));return a}function B(e,t,r){return R(b.RADIUS,b.TILE_WIDTH,b.ZOOM_FACTOR,e,t,r)}function k(e,t,r){var n=D(r,t);return e.map((function(e){return e/n}))}function A(e,t,r){return k(B(e,t,r),"EPSG:3857",r)}function q(){return I("RESOLUTIONS_HOOK")?I("RESOLUTIONS_HOOK")():A(0,21,v)}function U(e,t){var r=D(t,e);return q().map((function(e){return e*r}))}function H(e,t,r,n,o,i){var a=e[2]-e[0],l=e[3]-e[1],u=Math.abs(a/t.width),s=Math.abs(l/t.height),c=Math.max(u,s),p=(i||k(B(r,n,o||v),"EPSG:3857",o)).reduce((function(e,t,r){var n=Math.abs(t-c);return n>e.diff?e:{diff:n,zoom:r}}),{diff:Number.POSITIVE_INFINITY,zoom:0}).zoom;return Math.max(0,Math.min(p,n))}function K(e,t,r,n,o){return I("EXTENT_TO_ZOOM_HOOK")?I("EXTENT_TO_ZOOM_HOOK")(e,t,r,n,o):H(e,t,r,n,o,I("RESOLUTIONS_HOOK")?I("RESOLUTIONS_HOOK")(e,t,r,n,o,j(o||v)):null)}function V(e,t,r,n){return I("RESOLUTION_HOOK")?I("RESOLUTION_HOOK")(e,t,r,n):A(t,r,n)[e]}function X(e,t){var r=(e[2]-e[0])/2,n=(e[3]-e[1])/2;return{x:e[0]+r,y:e[1]+n,crs:t}}function W(e,t){return G("COMPUTE_BBOX_HOOK",(function(r){return r(e,t)}))}var Q=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};function Z(e,t){var r,o,i,a;return!(!e||(0,n.isEmpty)(e)||!t||(0,n.isEmpty)(t)||Q(null==t||null===(r=t.center)||void 0===r?void 0:r.x,null==e||null===(o=e.center)||void 0===o?void 0:o.x)&&Q(null==t||null===(i=t.center)||void 0===i?void 0:i.y,null==e||null===(a=e.center)||void 0===a?void 0:a.y)&&(null==t?void 0:t.zoom)===(null==e?void 0:e.zoom))}function z(e,t,r,n){var o=(0,a.getUnits)(e);return"ft"===o?{width:r/h.ft,height:n/h.ft}:"us-ft"===o?{width:r/h["us-ft"],height:n/h["us-ft"]}:"degrees"===o?{width:r/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:n/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:r,height:n}}var $=function(e){return{id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded}};function J(e,t,r,o,i,a,s){var p={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},f=t.map((function(e){return(0,u.saveLayer)(e)})),g=r.reduce((function(e,t){return e.concat((0,u.getGroupNodes)(t))}),[].concat(r.map((function(e){return e.id})))).map((function(e){var t=(0,u.getNode)(r,e);return t&&t.nodes?$(t):null})).filter((function(e){return e})),d=o.filter((function(e){return!!e.thumbnail})),m=(0,u.extractSourcesFromLayers)(f),O=f.map((function(e){return c()({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})})),v=(0,n.findIndex)(O,(function(e){return"annotations"===e.id}));if(-1!==v){var h=O[v].features.map((function(e){return"FeatureCollection"===e.type?y(y({},e),{},{features:e.features.map((function(e){return e.properties.geometryGeodesic?(0,l.t8)("properties.geometryGeodesic",null,e):e}))}):e.properties.geometryGeodesic?(0,l.t8)("properties.geometryGeodesic",null,e):{}}));O[v]=(0,l.t8)("features",h,O[v])}return y({version:2,map:c()({},p,{layers:O,groups:g,backgrounds:d,text_search_config:i,bookmark_search_config:a},!(0,n.isEmpty)(m)&&{sources:m}||{})},s)}var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.cloneDeep)(e),r=y(y({},(0,n.get)(e,"map.layers",[]).reduce((function(e,t){return y(y({},e),{},O({},t.id,"annotations"===t.id?t.id:i()()))}),{})),(0,n.get)(e,"widgetsConfig.widgets",[]).reduce((function(e,t){return y(y({},e),{},O({},t.id,i()()))}),{}));return(0,l.t8)("map.backgrounds",(0,n.get)(e,"map.backgrounds",[]).map((function(e){return y(y({},e),{},{id:r[e.id]})})),(0,l.t8)("widgetsConfig",{collapsed:(0,n.mapValues)((0,n.mapKeys)((0,n.get)(e,"widgetsConfig.collapsed",{}),(function(e,t){return r[t]})),(function(e){return y(y({},e),{},{layouts:(0,n.mapValues)(e.layouts,(function(e){return y(y({},e),{},{i:r[e.i]})}))})})),layouts:(0,n.mapValues)((0,n.get)(e,"widgetsConfig.layouts",{}),(function(e){return e.map((function(e){return y(y({},e),{},{i:r[e.i]})}))})),widgets:(0,n.get)(e,"widgetsConfig.widgets",[]).map((function(e){return y(y({},e),{},{id:r[e.id],layer:y(y({},(0,n.get)(e,"layer",{})),{},{id:r[(0,n.get)(e,"layer.id")]})})}))},(0,l.t8)("map.layers",(0,n.get)(e,"map.layers",[]).map((function(e){return y(y({},e),{},{id:r[e.id]})})),t)))},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return(0,n.pick)(e,(0,n.keys)(e).filter((function(t){return void 0!==e[t]})))}))},o=Y(t),i=[].concat(g((0,n.get)(e,"map.backgrounds",[])),g((0,n.get)(o,"map.backgrounds",[]))),a=r((0,n.get)(e,"map.layers",[])),l=r((0,n.get)(o,"map.layers",[])),u=(0,n.find)(a,(function(e){return"annotations"===e.id})),s=(0,n.find)(l,(function(e){return"annotations"===e.id})),c=[].concat(g(l.filter((function(e){return"annotations"!==e.id}))),g(a.filter((function(e){return"annotations"!==e.id}))),g(u||s?[y(y(y({},u||{}),s||{}),{},{features:[].concat(g((0,n.get)(u,"features",[])),g((0,n.get)(s,"features",[])))})]:[])),p=c.filter((function(e){return"background"===e.group})),f=(0,n.findIndex)(p,(function(e){return e.visibility})),d=(0,n.get)(e,"map.sources",{}),m=(0,n.get)(o,"map.sources",{}),v=y(y({},d),m),h=(0,n.get)(e,"widgetsConfig",{}),b=(0,n.get)(o,"widgetsConfig",{});return y(y(y({},o),e),{},{catalogServices:y(y({},(0,n.get)(e,"catalogServices",{})),{},{services:y(y({},(0,n.get)(e,"catalogServices.services",{})),(0,n.get)(o,"catalogServices.services",{}))}),map:y(y(y({},o.map),e.map),{},{backgrounds:i,groups:(0,n.uniqWith)([].concat(g((0,n.get)(e,"map.groups",[])),g((0,n.get)(o,"map.groups",[]))),(function(e,t){return e.id===t.id})),layers:[].concat(g(p.slice(0,f+1)),g(p.slice(f+1).map((function(e){return y(y({},e),{},{visibility:!1})}))),g(c.filter((function(e){return"background"!==e.group})))),sources:(0,n.isEmpty)(v)?void 0:v}),widgetsConfig:{collapsed:y(y({},h.collapsed),b.collapsed),layouts:(0,n.uniq)([].concat(g((0,n.keys)(h.layouts)),g((0,n.keys)(b.layouts)))).reduce((function(e,t){return y(y({},e),{},O({},t,[].concat(g((0,n.get)(h,"layouts.".concat(t),[])),g((0,n.get)(b,"layouts.".concat(t),[])))))}),{}),widgets:[].concat(g((0,n.get)(h,"widgets",[])),g((0,n.get)(b,"widgets",[])))},timelineData:y(y({},(0,n.get)(e,"timelineData",{})),(0,n.get)(o,"timelineData",{})),dimensionData:y(y({},(0,n.get)(e,"dimensionData",{})),(0,n.get)(o,"dimensionData",{}))})},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup",r=(0,n.get)(e,"map.groups",[]),o=r.filter((function(e){return"Default"!==e.id})),a=(0,n.find)(r,(function(e){return"Default"===e.id})),l=a&&{id:i()(),title:t,expanded:a.expanded},u=a?[].concat(g(o.map((function(e){var t=e.id,r=f(e,["id"]);return y({id:"".concat(l.id,".").concat(t)},r)}))),[l]):o;return y(y({},e),{},{map:y(y({},e.map),{},{groups:u,layers:(0,n.get)(e,"map.layers",[]).map((function(e){var t,r=e.group;return y(y({},f(e,["group"])),{},{group:!a||"background"===r||"Default"!==r&&r?a&&(null===(t=(0,n.find)(u,(function(e){var t=e.id;return t.slice(t.indexOf(".")+1)===r})))||void 0===t?void 0:t.id)||r:l.id})}))})})};function re(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;case"Point":case"Circle":case"LineString":case"Polygon":default:return!0}}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":return e;case"MultiPoint":case"Marker":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection";case"Text":return"Point";default:return e}}var oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/,r=decodeURIComponent(e),n=t.exec(r);return n&&n.length&&n.length>1?n[1]:null},ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,n.isString)(e)&&-1!==e.indexOf("%")?parseFloat((0,n.trim)(e))*t/100:(0,n.isNumber)(e)?e:0},ae=function e(t){var r=["apiKey","time","args","fixed"],n=function(e){return r.reduce((function(t,r){return t||e===r}),!1)};Object.keys(t).forEach((function(r){var o=t[r],i=p(o);"object"!==i||null===o||n(r)?"undefined"!==i&&o&&!n(r)||delete t[r]:(e(o),Object.keys(o).length||delete t[r])}))},le=function(e,t,r){e[t]&&(Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(e,t)),delete e[t])},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],o=(0,n.pick)((0,n.cloneDeep)(e),r),i=(0,n.pick)((0,n.cloneDeep)(t),r);return le(o.map,"text_serch_config","text_search_config"),le(i.map,"text_serch_config","text_search_config"),ae(o),ae(i),(0,n.isEqual)(o,i)},se=function(){var e={};return{registerHook:function(t,r){e[t]=r},getHook:function(t){return e[t]},executeHook:function(t,r,n){var o=e[t];return o?r(o):n?n():null}}};const ce={createRegisterHooks:se,EXTENT_TO_ZOOM_HOOK:w,RESOLUTIONS_HOOK:S,RESOLUTION_HOOK:T,COMPUTE_BBOX_HOOK:C,GET_PIXEL_FROM_COORDINATES_HOOK:L,GET_COORDINATES_FROM_PIXEL_HOOK:x,DEFAULT_SCREEN_DPI:v,ZOOM_TO_EXTENT_HOOK:F,registerHook:N,getHook:I,dpi2dpm:j,getSphericalMercatorScales:R,getSphericalMercatorScale:_,getGoogleMercatorScales:B,getGoogleMercatorResolutions:A,getGoogleMercatorScale:M,getResolutionsForScales:k,getZoomForExtent:K,defaultGetZoomForExtent:H,getCenterForExtent:X,getResolutions:q,getScales:U,getBbox:W,mapUpdated:Z,getCurrentResolution:V,transformExtent:z,saveMapConfiguration:J,generateNewUUIDs:Y,mergeMapConfigs:ee,addRootParentGroup:te,isSimpleGeomType:re,getSimpleGeomType:ne,getIdFromUri:oe,parseLayoutValue:ie,prepareMapObjectToCompare:ae,updateObjectFieldKey:le,compareMapChanges:ue,clearHooks:P}},61239:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n});var n=function(e){return new RegExp("<(.|\\n)*?>","g").test(e)}},59286:(e,t,r)=>{"use strict";r.d(t,{getCleanTemplate:()=>i});var n=r(61545),o=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=(0,n.isString)(t)&&(0,n.trim)(t.substring(r,t.length-o))||"";return(0,n.has)(e,i)},i=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return""},u=(0,n.isString)(e)&&e.match(r),s=u&&u.map((function(e){var r=e.replace(/(<([^>]+)>)/gi,"");return{previous:e,next:o(t,r,i,a)?r:l(e)}}))||null;return s&&s.reduce((function(e,t){return e.replace(t.previous,t.next)}),e)||e||""}},7294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getDefaultMatrixId:()=>s,getMatrixIds:()=>c,limitMatrix:()=>p,getTileMatrixSet:()=>f,getRequestEncoding:()=>g,getOperations:()=>d,getOperation:()=>m,getGetTileURL:()=>y,getCapabilitiesURL:()=>O,getDefaultStyleIdentifier:()=>v,getDefaultFormat:()=>h,sortTileMatrix:()=>b,getTileMatrix:()=>w});var n,o=r(90183),i=r(61545);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){for(var t=new Array(30),r=0;r<30;++r)t[r]=e.tileMatrixPrefix+r;return t},c=function(e,t){return(0,i.isObject)(e)&&(0,i.isArray)(e[t])&&e[t]||(0,i.isArray)(e)&&e||[]},p=function(e,t){return e.length>t?(0,i.slice)(e,0,t):e.length<t?e.concat(new Array(t-e.length)):e},f=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t;return e&&(0,i.isString)(e)?e:e?(0,o.getEquivalentSRS)(t,r).reduce((function(t,r){if((0,i.isArray)(e)){var a=(0,i.head)(e.filter((function(e){return(e["ows:Identifier"]===r||(0,o.getEPSGCode)(e["ows:SupportedCRS"])===r)&&n[e["ows:Identifier"]]})));return a&&a["ows:Identifier"]?a["ows:Identifier"]:t}return(0,i.isObject)(e)&&e[r]||t}),a):a},g=function(e){var t=n.getOperations(e);return n.getOperation(t,"GetTile","KVP")?"KVP":n.getOperation(t,"GetTile","RESTful")&&"RESTful"},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.castArray)(e.Capabilities["ows:OperationsMetadata"]["ows:Operation"])},m=function(e,t,r){return(0,i.head)((0,i.castArray)((0,i.head)(e.filter((function(e){return e.$.name===t})).map((function(e){return(0,i.castArray)(e["ows:DCP"]["ows:HTTP"]["ows:Get"])})))||[]).filter((function(e){return(e["ows:Constraint"]&&e["ows:Constraint"]["ows:AllowedValues"]["ows:Value"])===r})).map((function(e){return e.$["xlink:href"]})))},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ResourceURL,r=e.GetTileURL,n=e.requestEncoding;return"KVP"===n?r:t&&(0,i.castArray)(t).map((function(e){var t=e.$,r=void 0===t?{}:t;return r.template||r.value}))||r},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.head)((0,i.castArray)(e.capabilitiesURL||e.GetTileURL))},v=function(e){return(0,i.head)((0,i.castArray)(e.Style).filter((function(e){var t=e.$;return"true"===(void 0===t?{}:t).isDefault})).map((function(e){return e["ows:Identifier"]})))},h=function(e){return(0,i.head)((0,i.castArray)(e.Format))},b=function(e,t){return e?l(l({},e),{},{TileMatrix:(0,i.sortBy)(null==e?void 0:e.TileMatrix.map((function(e){return l(l({},e),{},{ScaleDenominator:Number(e.ScaleDenominator)})})),"ScaleDenominator").reverse().filter((function(e){return!t||t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.identifier;return t})).indexOf(e["ows:Identifier"])>=0}))}):e},w=function(e,t){var r,n,o=f(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),a=e.matrixIds&&c(e.matrixIds,o||t),l=b((0,i.head)(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===o}))),a),u=null==l||null===(r=(n=l.TileMatrix).map)||void 0===r?void 0:r.call(n,(function(e){return e["ows:Identifier"]}));return{matrixIds:u&&a?a.sort((function(e,t){return u.indexOf(e.identifier)-u.indexOf(t.identifier)})):a,tileMatrixSetName:o,tileMatrixSet:l}};n={getOperations:d,getOperation:m}},78889:(e,t,r)=>{var n=r(61545),o=n.head,i=n.get,a=function(e){return/[<>&'"]/.test(e)?"<![CDATA[".concat(e,"]]>"):e},l=r(65692).processOGCGeometry,u={"1.0.0":"2.0","1.1.0":"3.1.1","2.0":"3.2","2.0.0":"3.2"},s=function(e){return i(e,"featureTypes[0].properties")},c=function(e,t){return o((s(t)||[]).filter((function(t){return t.name===e})))},p=function(e){return e.targetNamespace},f=function(e){return 0===e.type.indexOf("gml:")},g=function(e,t){return null==t||t&&!0===t.nillable||t&&!1===t.nillable&&null!=e},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geom,r=e.properties,n=arguments.length>1?arguments[1]:void 0;return g(f(n)?t:r[n.name],n)};e.exports={schemaLocation:p,isGeometryType:f,featureTypeSchema:function(e){return"xmlns:".concat(e.targetPrefix,'="').concat(p(e),'"')},getValue:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1.1.0",o=f(c(t,r));return o?e?l(n,{type:e.type,coordinates:e.coordinates}):"":null==e?"":"string"==typeof e?a(e):e},getPropertyDesciptor:c,findGeometryProperty:function(e){return o((s(e)||[]).filter((function(e){return 0===e.type.indexOf("gml:")})))},getFeatureTypeProperties:s,getTypeName:function(e){return e.targetPrefix?e.targetPrefix+":"+e.featureTypes[0].typeName:e.featureTypes[0].typeName},wfsToGmlVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1.1.0";return u[e]},processOGCGeometry:l,isValid:function(e,t){return s(t).map((function(t){return d(e,t)}))},isValidProperty:d,isValidValueForPropertyName:function(e,t,r){return g(e,c(t,r))},isValidValue:g}}}]);