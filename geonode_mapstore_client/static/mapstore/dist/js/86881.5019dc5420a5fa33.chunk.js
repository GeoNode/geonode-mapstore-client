"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[86881],{267465:(t,n,o)=>{o.d(n,{A:()=>e});const e=Object.freeze({SHIFT:0,CTRL:1,ALT:2})},86881:(t,n,o)=>{o.d(n,{A:()=>z});var e=o(288787),i=o(434067),s=o(491446),c=o(677354),r=o(605971),u=o(520098),l=o(230259),A=o(267465),p=o(149785);function _(t,n,o){const e=t._element;if(e===document)return o.x=n.clientX,o.y=n.clientY,o;const i=e.getBoundingClientRect();return o.x=n.clientX-i.left,o.y=n.clientY-i.top,o}function a(t,n){let o=t;return(0,s.A)(n)&&(o+=`+${n}`),o}function f(t){return t.shiftKey?A.A.SHIFT:t.ctrlKey?A.A.CTRL:t.altKey?A.A.ALT:void 0}const d=0,h=1,P=2;function m(t,n,o,e){function i(n){e(t,n)}u.A.isInternetExplorer()?o.addEventListener(n,i,!1):o.addEventListener(n,i,{capture:!1,passive:!1}),t._removalFunctions.push(function(){o.removeEventListener(n,i,!1)})}const v={position:new i.A};function w(t){t._lastSeenTouchEvent=(0,l.A)()}function I(t){return(0,l.A)()-t._lastSeenTouchEvent>j.mouseEmulationIgnoreMilliseconds}function E(t,n,o){const e=t.x-n.x,i=t.y-n.y;return Math.sqrt(e*e+i*i)<o}function T(t,n){if(!I(t))return;const o=n.button;let e;if(t._buttonDown[o]=!0,0===o)e=p.A.LEFT_DOWN;else if(1===o)e=p.A.MIDDLE_DOWN;else{if(2!==o)return;e=p.A.RIGHT_DOWN}const c=_(t,n,t._primaryPosition);i.A.clone(c,t._primaryStartPosition),i.A.clone(c,t._primaryPreviousPosition);const r=f(n),u=t.getInputAction(e,r);(0,s.A)(u)&&(i.A.clone(c,v.position),u(v),n.preventDefault())}const g={position:new i.A},D={position:new i.A};function y(t,n,o,e){const c=f(e),r=t.getInputAction(n,c),u=t.getInputAction(o,c);if((0,s.A)(r)||(0,s.A)(u)){const n=_(t,e,t._primaryPosition);(0,s.A)(r)&&(i.A.clone(n,g.position),r(g)),(0,s.A)(u)&&E(t._primaryStartPosition,n,t._clickPixelTolerance)&&(i.A.clone(n,D.position),u(D))}}function L(t,n){if(!I(t))return;const o=n.button;0!==o&&1!==o&&2!==o||(t._buttonDown[0]&&(y(t,p.A.LEFT_UP,p.A.LEFT_CLICK,n),t._buttonDown[0]=!1),t._buttonDown[1]&&(y(t,p.A.MIDDLE_UP,p.A.MIDDLE_CLICK,n),t._buttonDown[1]=!1),t._buttonDown[2]&&(y(t,p.A.RIGHT_UP,p.A.RIGHT_CLICK,n),t._buttonDown[2]=!1))}const C={startPosition:new i.A,endPosition:new i.A};function H(t,n){if(!I(t))return;const o=f(n),e=_(t,n,t._primaryPosition),c=t._primaryPreviousPosition,r=t.getInputAction(p.A.MOUSE_MOVE,o);(0,s.A)(r)&&(i.A.clone(c,C.startPosition),i.A.clone(e,C.endPosition),r(C)),i.A.clone(e,c),(t._buttonDown[0]||t._buttonDown[1]||t._buttonDown[2])&&n.preventDefault()}const M={position:new i.A};function b(t,n){let o;if(0!==n.button)return;o=p.A.LEFT_DOUBLE_CLICK;const e=f(n),i=t.getInputAction(o,e);(0,s.A)(i)&&(_(t,n,M.position),i(M))}function O(t,n){let o;if((0,s.A)(n.deltaY)){const t=n.deltaMode;o=t===n.DOM_DELTA_PIXEL?-n.deltaY:t===n.DOM_DELTA_LINE?40*-n.deltaY:120*-n.deltaY}else o=n.detail>0?-120*n.detail:n.wheelDelta;if(!(0,s.A)(o))return;const e=f(n),i=t.getInputAction(p.A.WHEEL,e);(0,s.A)(i)&&(i(o),n.preventDefault())}function F(t,n){w(t);const o=n.changedTouches;let e;const s=o.length;let c,r;const u=t._positions;for(e=0;e<s;++e)c=o[e],r=c.identifier,u.set(r,_(t,c,new i.A));W(t,n);const l=t._previousPositions;for(e=0;e<s;++e)c=o[e],r=c.identifier,l.set(r,i.A.clone(u.get(r)))}function S(t,n){w(t);const o=n.changedTouches;let e;const i=o.length;let s,c;const r=t._positions;for(e=0;e<i;++e)s=o[e],c=s.identifier,r.remove(c);W(t,n);const u=t._previousPositions;for(e=0;e<i;++e)s=o[e],c=s.identifier,u.remove(c)}const N={position:new i.A},x={position1:new i.A,position2:new i.A},K={position:new i.A},R={position:new i.A},U={position:new i.A};function W(t,n){const o=f(n),e=t._positions,c=e.length;let r,u;const l=t._isPinching;if(1!==c&&t._buttonDown[0]&&(t._buttonDown[0]=!1,(0,s.A)(t._touchHoldTimer)&&(clearTimeout(t._touchHoldTimer),t._touchHoldTimer=void 0),r=t.getInputAction(p.A.LEFT_UP,o),(0,s.A)(r)&&(i.A.clone(t._primaryPosition,K.position),r(K)),0===c&&!t._isTouchHolding&&(u=t.getInputAction(p.A.LEFT_CLICK,o),(0,s.A)(u))&&E(t._primaryStartPosition,t._previousPositions.values[0],t._clickPixelTolerance)&&(i.A.clone(t._primaryPosition,R.position),u(R)),t._isTouchHolding=!1),0===c&&l&&(t._isPinching=!1,r=t.getInputAction(p.A.PINCH_END,o),(0,s.A)(r)&&r()),1===c&&!l){const c=e.values[0];i.A.clone(c,t._primaryPosition),i.A.clone(c,t._primaryStartPosition),i.A.clone(c,t._primaryPreviousPosition),t._buttonDown[0]=!0,r=t.getInputAction(p.A.LEFT_DOWN,o),(0,s.A)(r)&&(i.A.clone(c,N.position),r(N)),t._touchHoldTimer=setTimeout(function(){!t.isDestroyed()&&(t._touchHoldTimer=void 0,t._isTouchHolding=!0,u=t.getInputAction(p.A.RIGHT_CLICK,o),(0,s.A)(u))&&E(t._primaryStartPosition,t._previousPositions.values[0],t._holdPixelTolerance)&&(i.A.clone(t._primaryPosition,U.position),u(U))},j.touchHoldDelayMilliseconds),n.preventDefault()}2!==c||l||(t._isPinching=!0,r=t.getInputAction(p.A.PINCH_START,o),(0,s.A)(r)&&(i.A.clone(e.values[0],x.position1),i.A.clone(e.values[1],x.position2),r(x),n.preventDefault()))}function k(t,n){w(t);const o=n.changedTouches;let e;const c=o.length;let r,u;const l=t._positions;for(e=0;e<c;++e){r=o[e],u=r.identifier;const n=l.get(u);(0,s.A)(n)&&_(t,r,n)}Y(t,n);const A=t._previousPositions;for(e=0;e<c;++e)r=o[e],u=r.identifier,i.A.clone(l.get(u),A.get(u))}const q={startPosition:new i.A,endPosition:new i.A},G={distance:{startPosition:new i.A,endPosition:new i.A},angleAndHeight:{startPosition:new i.A,endPosition:new i.A}};function Y(t,n){const o=f(n),e=t._positions,c=t._previousPositions,r=e.length;let u;if(1===r&&t._buttonDown[0]){const c=e.values[0];i.A.clone(c,t._primaryPosition);const r=t._primaryPreviousPosition;u=t.getInputAction(p.A.MOUSE_MOVE,o),(0,s.A)(u)&&(i.A.clone(r,q.startPosition),i.A.clone(c,q.endPosition),u(q)),i.A.clone(c,r),n.preventDefault()}else if(2===r&&t._isPinching&&(u=t.getInputAction(p.A.PINCH_MOVE,o),(0,s.A)(u))){const t=e.values[0],n=e.values[1],o=c.values[0],s=c.values[1],r=n.x-t.x,l=n.y-t.y,A=.25*Math.sqrt(r*r+l*l),p=s.x-o.x,_=s.y-o.y,a=.25*Math.sqrt(p*p+_*_),f=.125*(n.y+t.y),d=.125*(s.y+o.y),h=Math.atan2(l,r),P=Math.atan2(_,p);i.A.fromElements(0,a,G.distance.startPosition),i.A.fromElements(0,A,G.distance.endPosition),i.A.fromElements(P,d,G.angleAndHeight.startPosition),i.A.fromElements(h,f,G.angleAndHeight.endPosition),u(G)}}function V(t,n){if(n.target.setPointerCapture(n.pointerId),"touch"===n.pointerType){const o=t._positions,e=n.pointerId;o.set(e,_(t,n,new i.A)),W(t,n),t._previousPositions.set(e,i.A.clone(o.get(e)))}else T(t,n)}function B(t,n){if("touch"===n.pointerType){const o=t._positions,e=n.pointerId;o.remove(e),W(t,n),t._previousPositions.remove(e)}else L(t,n)}function X(t,n){if("touch"===n.pointerType){const o=t._positions,e=n.pointerId,c=o.get(e);if(!(0,s.A)(c))return;_(t,n,c),Y(t,n);const r=t._previousPositions;i.A.clone(o.get(e),r.get(e))}else H(t,n)}function j(t){this._inputEvents={},this._buttonDown={[d]:!1,[h]:!1,[P]:!1},this._isPinching=!1,this._isTouchHolding=!1,this._lastSeenTouchEvent=-j.mouseEmulationIgnoreMilliseconds,this._primaryStartPosition=new i.A,this._primaryPosition=new i.A,this._primaryPreviousPosition=new i.A,this._positions=new e.A,this._previousPositions=new e.A,this._removalFunctions=[],this._touchHoldTimer=void 0,this._clickPixelTolerance=5,this._holdPixelTolerance=25,this._element=t??document,function(t){const n=t._element,o=(0,s.A)(n.disableRootEvents)?n:document;let e;u.A.supportsPointerEvents()?(m(t,"pointerdown",n,V),m(t,"pointerup",n,B),m(t,"pointermove",n,X),m(t,"pointercancel",n,B)):(m(t,"mousedown",n,T),m(t,"mouseup",o,L),m(t,"mousemove",o,H),m(t,"touchstart",n,F),m(t,"touchend",o,S),m(t,"touchmove",o,k),m(t,"touchcancel",o,S)),m(t,"dblclick",n,b),e="onwheel"in n?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",m(t,e,n,O)}(this)}j.prototype.setInputAction=function(t,n,o){if(!(0,s.A)(t))throw new r.A("action is required.");if(!(0,s.A)(n))throw new r.A("type is required.");const e=a(n,o);this._inputEvents[e]=t},j.prototype.getInputAction=function(t,n){if(!(0,s.A)(t))throw new r.A("type is required.");const o=a(t,n);return this._inputEvents[o]},j.prototype.removeInputAction=function(t,n){if(!(0,s.A)(t))throw new r.A("type is required.");const o=a(t,n);delete this._inputEvents[o]},j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){return function(t){const n=t._removalFunctions;for(let t=0;t<n.length;++t)n[t]()}(this),(0,c.A)(this)},j.mouseEmulationIgnoreMilliseconds=800,j.touchHoldDelayMilliseconds=1500;const z=j},149785:(t,n,o)=>{o.d(n,{A:()=>e});const e=Object.freeze({LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19})},230259:(t,n,o)=>{let e;o.d(n,{A:()=>i}),e="undefined"!=typeof performance&&"function"==typeof performance.now&&isFinite(performance.now())?function(){return performance.now()}:function(){return Date.now()};const i=e}}]);