"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3111],{785492(e,t,i){i.r(t),i.d(t,{default:()=>N});var n=i(273517),a=i.n(n),o=i(104567),l=i.n(o),s=i(8117),d=i(750042),r=i.n(d),c=i(256951),u=i(8571),m=i(229710),v=i(406250);const p=function(e){var t=e.className,i=e.textContainerClassName,n=e.loading,o=void 0!==n&&n,s=e.detailsText;return a().createElement("div",{className:t},o?a().createElement(r(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):l()(s)?a().createElement("div",{className:i},a().createElement(u.A,{msgId:"maps.feedback.noDetailsAvailable"})):a().createElement("div",{className:i,dangerouslySetInnerHTML:{__html:s||""}}))},f=function(e){var t=e.children,i=e.loading,n=void 0!==i&&i,o=e.show,l=void 0!==o&&o,s=e.readOnly,d=void 0!==s&&s,r=e.title,c=e.detailsText,f=e.bodyClassName,g=e.onClose,h=void 0===g?function(){}:g,w=e.onSave,b=void 0===w?function(){}:w,E=a().createElement(p,{className:"ms-details-preview-container",textContainerClassName:"ms-details-preview",loading:n,detailsText:c});return a().createElement(v.A,null,d?a().createElement(m.A,{size:"lg",bodyClassName:"details-viewer-modal",showFullscreen:!0,fitContent:!0,onClose:function(){return h()},title:a().createElement(u.A,{msgId:"map.details.title",msgParams:{name:r}}),show:l},E):a().createElement(m.A,{show:l,title:a().createElement(u.A,{msgId:"map.details.title",msgParams:{name:r}}),bodyClassName:f,size:"lg",clickOutEnabled:!1,showFullscreen:!0,fullscreenType:"full",onClose:function(){return h()},buttons:[{text:a().createElement(u.A,{msgId:"map.details.back"}),onClick:function(){return h()}},{text:a().createElement(u.A,{msgId:"map.details.save"}),onClick:function(){return b(c)}}]},t))};var g=i(845204),h=i.n(g),w=i(682693);const b={component:function(e){var t=e.modules,i=void 0===t?{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["image","link"]]}:t,n=e.editorState,o=e.onUpdateEditorState,l=void 0===o?function(){}:o;return a().createElement("div",{id:"ms-details-editor"},a().createElement(w.A,{bounds:"#ms-details-editor",value:n||"<p><br></p>",onChange:function(e){l(e)},modules:i}))},detailsTextToEditorState:h(),editorStateToDetailsText:h(),containerBodyClass:"ms-details-quill-editor"};var E=i(916589),S=i(595451),A=i(12816);const C={QuillEditor:b,DraftJSEditor:{component:(0,E.compose)((0,E.withProps)(function(e){var t=e.editorState,i=e.onUpdateEditorState,n=void 0===i?function(){}:i;return{onEditorStateChange:function(e){n(e)},editorState:t,toolbar:{options:["fontFamily","blockType","inline","textAlign","colorPicker","list","link","remove","image"],image:{className:void 0,component:void 0,popupClassName:void 0,urlEnabled:!0,uploadEnabled:!0,alignmentEnabled:!0,uploadCallback:function(e){return new Promise(function(t,i){var n=new FileReader;n.addEventListener("load",function(){t({data:{link:n.result}})}),e?n.readAsDataURL(e):i()})},previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"auto"}}}}}),S.VI)(),detailsTextToEditorState:A.pn,editorStateToDetailsText:A.v6,containerBodyClass:"ms-details-draftjs-editor"}};function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},k.apply(null,arguments)}var T=(0,E.compose)((0,E.withState)("showPreview","setShowPreview",!1),(0,E.withHandlers)({onShowPreview:function(e){var t=e.setShowPreview,i=void 0===t?function(){}:t;return function(){i(!0)}},onHidePreview:function(e){var t=e.setShowPreview,i=void 0===t?function(){}:t;return function(){i(!1)}}}))(function(e){var t=e.loading,i=void 0!==t&&t,n=e.showPreview,o=void 0!==n&&n,d=e.editDetailsDisabled,m=e.detailsText,v=e.settings,p=void 0===v?{}:v,f=e.canUndo,g=void 0!==f&&f,h=e.onShowPreview,w=void 0===h?function(){}:h,b=e.onHidePreview,E=void 0===b?function(){}:b,S=e.onUndo,A=void 0===S?function(){}:S,C=e.onShowDetailsSheet,k=void 0===C?function(){}:C,T=e.onUpdate,N=void 0===T?function(){}:T,y=e.onUpdateResource,D=void 0===y?function(){}:y,I=e.onDelete,x=void 0===I?function(){}:I;return a().createElement("div",{className:"ms-section"+(o?" ms-transition":"")},a().createElement("div",{className:"mapstore-block-width"},a().createElement(s.fI,null,a().createElement(s.fv,{xs:6},a().createElement("div",{className:"m-label"},!i&&l()(m)?a().createElement(u.A,{msgId:"map.details.add"}):a().createElement(u.A,{msgId:"map.details.rowTitle"}))),a().createElement(s.fv,{xs:6},a().createElement("div",{className:"ms-details-sheet"},a().createElement("div",{className:"pull-right"},i?a().createElement(r(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,!i&&a().createElement(c.A,{btnDefaultProps:{className:"square-button no-border"},buttons:[{glyph:o?"eye-open":"eye-close",visible:!!m,onClick:function(){return o?E():w()},disabled:i,tooltipId:o?"map.details.hidePreview":"map.details.showPreview"},{glyph:"undo",tooltipId:"map.details.undo",visible:g,onClick:function(){return A()},disabled:i},{glyph:"pencil-add",tooltipId:"map.details.add",visible:!m,onClick:function(){k(),N()},disabled:i},{glyph:"pencil",tooltipId:"map.details.edit",visible:!!m&&!d,onClick:function(){k(),N(m)},disabled:i},{glyph:"new-window",tooltipId:"map.details.showAsModal",visible:!!m,bsStyle:p.showAsModal?"success":"default",onClick:function(){return D("attributes.detailsSettings.showAsModal",!p.showAsModal)}},{glyph:"pushpin",tooltipId:"map.details.showAtStartup",visible:!!m,bsStyle:p.showAtStartup?"success":"default",onClick:function(){return D("attributes.detailsSettings.showAtStartup",!p.showAtStartup)}},{glyph:"trash",tooltipId:"map.details.delete",visible:!!m,onClick:function(){return x()},disabled:i}]})))))),m&&a().createElement("div",{className:"ms-details-preview-container"},""!==m?a().createElement("div",{className:"ms-details-preview",dangerouslySetInnerHTML:{__html:m}}):a().createElement("div",{className:"ms-details-preview"}," ",a().createElement(u.A,{msgId:"maps.feedback.noDetailsAvailable"}))))});const N=function(e){var t,i,n=e.loading,o=e.resource,s=void 0===o?{}:o,d=e.editor,r=void 0===d?"DraftJSEditor":d,c=e.editorProps,u=void 0===c?{}:c,m=e.editorState,v=e.savedDetailsText,p=e.detailsBackup,g=e.showDetailsSheet,h=e.setEditorState,w=void 0===h?function(){}:h,b=e.setDetailsBackup,E=void 0===b?function(){}:b,S=e.onUpdateResource,A=void 0===S?function(){}:S,N=e.onUpdateLinkedResource,y=void 0===N?function(){}:N,D=e.onShowDetailsSheet,I=void 0===D?function(){}:D,x=e.onHideDetailsSheet,P=void 0===x?function(){}:x,U=C[r],L=U.component,_=U.editorStateToDetailsText,F=U.detailsTextToEditorState,O=U.containerBodyClass;return a().createElement(a().Fragment,null,a().createElement(T,{loading:n||s.saving,detailsText:v,detailsBackup:p,editDetailsDisabled:!l()(s.canEdit)&&!s.canEdit,settings:null===(t=s.attributes)||void 0===t?void 0:t.detailsSettings,canUndo:!!p,onUndo:function(){y("details",p,"DETAILS"),E()},onUpdate:function(e){return w(F(e))},onUpdateResource:A,onShowDetailsSheet:I,onDelete:function(){E(v),y("details","NODATA","DETAILS"),A("attributes.detailsSettings",{})}}),a().createElement(f,{loading:n,show:g,title:null===(i=s.metadata)||void 0===i?void 0:i.name,detailsText:m,bodyClassName:O,onClose:function(){P()},onSave:function(e){var t=_(e);P(),E(),t&&"<p><br></p>"!==t||(t=v),y("details",t||"NODATA","DETAILS")}},a().createElement(L,k({},u,{editorState:m,onUpdateEditorState:w}))))}}}]);