"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4164],{653077:(e,t,r)=>{r.d(t,{V:()=>E,a:()=>w});var n=r(904059),o=r(375482),i=r(142974),a=r(181817),l=r(995531),c=r(23412),s=r.n(c),u=r(738805),f=r.n(u),d=r(79738);const m={describeCoverage:function(e,t){var r=s().parse((0,d.t)(e),!0),n=s().format(Object.assign({},r,{query:Object.assign({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return l.A.get(n).then(function(e){var t;return f().parseString(e.data,{explicitArray:!1},function(e,r){t=r}),t})}};var y=r(112585),p=r(858156),v=r.n(p),b=r(112206);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){O(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e,t,r){return(t=function(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t,r){return function(i){return o.Ay.describeLayer(e,t.name,r).then(function(r){return r&&"WFS"===r.owsType?a.sq(e,r.name).then(function(e){return r.geometryType=(0,b.ud)(e),i((0,n.OK)(t.id,"id",{describeLayer:r,describeFeatureType:e}))}).catch(function(){return i((0,n.OK)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))}):(r&&"WCS"===r.owsType&&m.describeCoverage(e,r.name).then(function(e){var o=v()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map(function(e,t){return t+1+""}),i((0,n.OK)(t.id,"id",{describeLayer:r,describeCoverage:e}))}).catch(function(){return i((0,n.OK)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))}),i((0,n.OK)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))}).catch(function(e){return i((0,n.OK)(t.id,"id",{describeLayer:{error:e.status}}))})}}function w(e){var t=(0,y.wk)(e);return function(r){return r((0,n.OK)(e.id,"id",{capabilitiesLoading:!0})),o.Ay.getCapabilities(t).then(function(t){var a=o.Ay.parseLayerCapabilities(t,e);r(a?(0,n.OK)(e.id,"id",S(S({},(0,i.e9)(a)),{},{capabilitiesLoading:null})):(0,n.OK)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))}).catch(function(t){r((0,n.OK)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))})}}},267919:(e,t,r)=>{r.d(t,{Mj:()=>T,Sn:()=>k,YH:()=>C});var n=r(302404),o=r.n(n),i=r(858156),a=r.n(i),l=r(499084),c=r.n(l),s=r(185015),u=r.n(s),f=r(995531),d=r(403467),m=r(247167);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){g(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function g(e,t,r){return(t=function(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=["equalInterval","uniqueInterval","quantile","jenks","standardDeviation"],S=["equalInterval","quantile","jenks"],O={};function E(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return t.map(function(t){return t.ruleId===e?r(t):t})}var w=function(e,t){var r="uniqueInterval"===(null==e?void 0:e.method),n=null==e?void 0:e.intervalsForUnique;return{errorId:t&&t.includes("toc")?t:r?"styleeditor.classificationUniqueIntervalError":"styleeditor.classificationError",msgParams:r?{intervalsForUnique:n}:{}}},j=function(e,t){var r="uniqueInterval"===(null==e?void 0:e.method),n=null==e?void 0:e.intervalsForUnique;return{errorId:r?t&&t.includes("float type")?"styleeditor.classificationRasterUniqueIntervalError":"styleeditor.classificationUniqueIntervalError":"styleeditor.classificationRasterError",msgParams:r?{intervalsForUnique:n}:{}}},A=function(e,t){if(e.classification)return{classification:e.classification};var r=a()(e,"Rules.Rule"),n=r&&a()(r,"RasterSymbolizer.ColorMap.ColorMapEntry"),o="classificationRaster"===t.type?n&&c()(n).length:r&&c()(r).length,i="custom"===t.ramp&&t.classification.length>0&&{name:"custom",colors:t.classification.map(function(e){return e.color})},l=m.A.getColor(void 0,t.ramp,o||t.intervals,i).colors,s=void 0===l?[]:l,u=null==s?void 0:s.split(",");return t.reverse&&(u=u.reverse()),{classification:m.A["classificationRaster"===t.type?"readRasterClassification":"readClassification"](e,t.method).map(function(e,t){return b(b({},e),{},{color:u[t]})})}},P={geoserver:{updateStyleService:function(e){var t=e.baseUrl,r=e.styleService,n=null!=r&&r.isStatic?r.baseUrl:t;if(O[n])return new Promise(function(e){return e(O[n])});var o=m.A.getCapabilitiesUrl({url:n});return(null!=r&&r.isStatic?new Promise(function(e){return e(r)}):d.Ay.getStyleService({baseUrl:n})).then(function(e){return f.A.get(o).then(function(t){var r=t.data;return[e,r]}).catch(function(){return[e,null]})}).then(function(e){var t,r,o,i,a,l,c,s,u,f,d,m=(d=2,function(e){if(Array.isArray(e))return e}(f=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(f,d)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(f,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=m[0],v=m[1],g=b(b({},y),{},{classificationMethods:v?(t=v,r=(t||{}).capabilities,o=void 0===r?{}:r,i=o.vector,a=void 0===i?{}:i,l=o.raster,c=void 0===l?{}:l,s=a.classifications||[],u=c.classifications||[],{vector:s.filter(function(e){return-1!==h.indexOf(e)}),raster:u.filter(function(e){return-1!==h.indexOf(e)})}):{vector:S,raster:S}});return O[n]=g,g})}}};function C(e){var t=e.baseUrl,r=e.styleService;return P.geoserver.updateStyleService({baseUrl:t,styleService:r})}var I=function(e){var t=e.layer,r=e.params,n=e.styleService,o=Object.keys(r.msViewParams||{}).map(function(e){var t=r.msViewParams[e];if(void 0===t)return null;var n=c()(t).map(function(e){return u()(e)?"'".concat(e,"'"):e}).join("\\,");return"".concat(e,":").concat(n)}).filter(function(e){return e}).join(";"),i=b({intervals:r.intervals,method:r.method,attribute:r.attribute,intervalsForUnique:r.intervalsForUnique},o&&{viewparams:o});return f.A.get(m.A.getStyleMetadataService(t,i,n))};function k(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,a=e.styleService,l=e.classificationRequest,c=void 0===l?I:l,s=["intervals","method","reverse","attribute","ramp","intervalsForUnique","msViewParams"],u=b(b({},r),t),f=r.ruleId;if(void 0!==t.ramp&&t.ramp!==r.ramp&&"customInterval"===(null==u?void 0:u.method)&&!t.classification){var d=m.A.getColor(void 0,t.ramp,u.intervals).colors.split(",");return new Promise(function(e){return e(E(f,n,function(e){return b(b(b({},e),u),{},{classification:u.classification.map(function(e,t){return b(b({},e),{},{color:d[t]})}),errorId:void 0})}))})}var y=s.reduce(function(e,t){return b(b({},e),{},g({},t,r[t]))},{}),p=s.reduce(function(e,t){return b(b({},e),{},g({},t,u[t]))},{}),v=!s.filter(function(e){return"msViewParams"!==e}).find(function(e){return void 0===u[e]})&&!o()(y,p)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==u?void 0:u.method),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.errorId,o=e.msgParams;return E(f,n,function(e){return b(b(b({},e),t),{},{errorId:r,msgParams:o})})};return v?c({layer:i,params:u,styleService:a}).then(function(e){var r=e.data;return E(f,n,function(e){return b(b(b(b({},e),t),A(r,u)),{},{errorId:void 0})})}).catch(function(e){return h(w(u,null==e?void 0:e.message))}):new Promise(function(e){return e(h())})}function T(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,a=e.styleService,l=["intervals","continuous","method","reverse","ramp","intervalsForUnique"],c=b(b({},r),t),s=r.ruleId;if(void 0!==t.ramp&&t.ramp!==r.ramp&&"customInterval"===(null==c?void 0:c.method)&&!t.classification){var u=m.A.getColor(void 0,t.ramp,c.intervals).colors.split(",");return new Promise(function(e){return e(E(s,n,function(e){return b(b(b({},e),c),{},{classification:c.classification.map(function(e,t){return b(b({},e),{},{color:u[t]})}),errorId:void 0})}))})}var d=l.reduce(function(e,t){return b(b({},e),{},g({},t,r[t]))},{}),y=l.reduce(function(e,t){return b(b({},e),{},g({},t,c[t]))},{}),p=!l.find(function(e){return void 0===c[e]})&&!o()(d,y)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==c?void 0:c.method),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.errorId,o=e.msgParams;return E(s,n,function(e){return b(b(b({},e),t),{},{errorId:r,msgParams:o})})};return p?f.A.get(m.A.getStyleMetadataService(i,{intervals:c.intervals,continuous:c.continuous,method:c.method,reverse:c.reverse,intervalsForUnique:c.intervalsForUnique},a)).then(function(e){var r=e.data;return E(s,n,function(e){return b(b(b(b({},e),t),A(r,c)),{},{errorId:void 0})})}).catch(function(e){return v(j(c,null==e?void 0:e.data))}):new Promise(function(e){return e(v())})}},403467:(e,t,r)=>{r.d(t,{Ay:()=>T});var n=r(995531),o=r(858156),i=r.n(o),a=r(179674),l=r.n(a),c=r(984058),s=r.n(c);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f={},d=function(e){return e.map(function(e){return l()(e,function(e,t){return s()(t)})})},m=r(400912),y=r.n(m),p=r(499084),v=r.n(p),b=r(714905);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){E(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(e,t,r){return(t=function(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=[{regex:/gt-css/,format:"css"}],j={css:"application/vnd.geoserver.geocss+css",sld:"application/vnd.ogc.sld+xml",sldse:"application/vnd.ogc.se+xml",zip:"application/zip"},A=function(e,t){return"sld"===e?t&&t.version&&"1.1.0"===t.version?j.sldse:j.sld:j[e]||j.sld},P=function(e,t){var r=e.options,n=void 0===r?{}:r,o=e.format,i=e.baseUrl,a=e.name,l=e.workspace,c=e.languageVersion,s=t?{name:encodeURIComponent(a)}:{};return{options:O(O({},n),{},{params:O(O({},n.params),s),headers:O(O({},n.headers||{}),{},{"Content-Type":A(o,c)})}),url:"".concat(i,"rest/").concat(l&&"workspaces/".concat(l,"/")||"","styles").concat(t?".json":"/".concat(encodeURIComponent(a)))}},C=function(e){var t=e.geoserverBaseUrl,r=e.workspace,n=e.name,o=e.format,i=void 0===o?"json":o;return"".concat(t,"rest/").concat(r&&"workspaces/".concat(r,"/")||"","styles/","".concat(encodeURIComponent(n),".").concat(i))},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v()((null==e?void 0:e.entry)||[]).reduce(function(e,t){return O(O({},e),{},E({},t["@key"],t.$))},{})},k=function(e){var t=e.baseUrl,r=e.styleName,o=e.metadata,i=C(O(O({},(0,b.ke)(r)),{},{geoserverBaseUrl:t}));return n.A.get(i).then(function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,r=void 0===t?{}:t;return n.A.put(i,{style:O(O({},r.style),{},{metadata:O(O({},I(null===(e=r.style)||void 0===e?void 0:e.metadata)),o)})})})};const T={saveStyle:function(e,t,r,o){var i=e+"styles/"+encodeURI(t),a=Object.assign({},o);return a.headers=Object.assign({},a.headers,{"Content-Type":"application/vnd.ogc.sld+xml"}),n.A.put(i,r,a)},getStyleService:function(e){var t=e.baseUrl;return function(e){var t=e.baseUrl;return f[t]?new Promise(function(e){return e(f[t])}):n.A.all([n.A.get("".concat(t,"rest/about/version"),{"Content-Type":"application/json"}).then(function(e){var t=e.data;return i()(t,"about.resource")}).catch(function(){return null}),n.A.get("".concat(t,"rest/about/manifest"),{"Content-Type":"application/json"}).then(function(e){var t=e.data;return i()(t,"about.resource")}).catch(function(){return null}),n.A.get("".concat(t,"rest/fonts"),{"Content-Type":"application/json"}).then(function(e){var t=e.data;return i()(t,"fonts")}).catch(function(){return null})]).then(function(e){var r,n,o=(n=3,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(r,n)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],l=o[2],c={version:i&&d(i),manifest:a&&d(a),fonts:l};return i&&a?(f[t]=c,f[t]):c})}({baseUrl:t}).then(function(e){var r=e.version,n=e.manifest,o=e.fonts,i=void 0===o?[]:o;if(!r)return null;var a,l=(n||[]).map(function(e){var t=e.name;return y()(w.filter(function(e){var r=e.regex;return t.match(r)}).map(function(e){return e.format}))}).filter(function(e){return e}),c=y()(r.filter(function(e){var t=e.name;return"geoserver"===(void 0===t?"":t).toLowerCase()}))||{};return{baseUrl:t,version:c.version,formats:[].concat((a=l,function(e){if(Array.isArray(e))return h(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["sld"]),availableUrls:[],fonts:i}})},getStyle:function(e){var t=e.options,r=e.format,o=e.baseUrl,i=e.styleName,a=(0,b.ke)(i),l=a.name,c=a.workspace,s=P({options:t,format:r,baseUrl:o,name:l,workspace:c});return n.A.get(s.url,s.options)},createStyle:function(e){var t=e.baseUrl,r=e.code,o=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,s=e.metadata,u=(0,b.ke)(l),f=u.name,d=u.workspace,m=P({options:o,format:a,baseUrl:t,name:f,workspace:d,languageVersion:c},!0);return n.A.post(m.url,r,m.options).then(function(){return s?k({baseUrl:t,styleName:l,metadata:s}).then(function(){return null}).catch(function(){return null}):null})},updateStyle:function(e){var t=e.baseUrl,r=e.code,o=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,s=e.metadata,u=(0,b.ke)(l),f=u.name,d=u.workspace,m=P({options:o,format:a,baseUrl:t,name:f,workspace:d,languageVersion:c});return n.A.put(m.url,r,m.options).then(function(){return s?k({baseUrl:t,styleName:l,metadata:s}).then(function(){return null}).catch(function(){return null}):null})},deleteStyle:function(e){var t=e.baseUrl,r=e.options,o=e.format,i=void 0===o?"sld":o,a=e.styleName,l=(0,b.ke)(a),c=l.name,s=l.workspace,u=P({options:r,format:i,baseUrl:t,name:c,workspace:s});return n.A.delete(u.url,u.options)},getStylesInfo:function(e){var t=e.baseUrl,r=e.styles,o=void 0===r?[]:r,i=[],a=o.length;return new Promise(function(e){o&&0!==o.length?o.forEach(function(r,l){var c=r.name,s=r.href;return n.A.get(s||C(O(O({},(0,b.ke)(c)),{},{geoserverBaseUrl:t}))).then(function(t){var r=t.data;i[l]=Object.assign({},o[l],r&&r.style&&O(O(O({},r.style),r.style.metadata&&{metadata:I(r.style.metadata)}),{},{name:(0,b.x_)(r.style)})||{}),0===--a&&e(i.filter(function(e){return e}))}).catch(function(){i[l]=Object.assign({},o[l]),0===--a&&e(i.filter(function(e){return e}))})}):e([])})},getStyleCodeByName:function(e){var t=e.baseUrl,r=e.styleName,o=e.options,i=(0,b.ke)(r),a=i.name,l=i.workspace,c=C({name:a,workspace:l,geoserverBaseUrl:t});return n.A.get(c,o).then(function(e){return e.data&&e.data.style&&e.data.style.name?n.A.get(C({workspace:l,geoserverBaseUrl:t,name:e.data.style.name,format:(r=e.data.style.filename,r.split(".").pop())})).then(function(t){var r,n=t.data;return O(O(O({},e.data.style),(null==e||null===(r=e.data)||void 0===r||null===(r=r.style)||void 0===r?void 0:r.metadata)&&{metadata:I(e.data.style.metadata)}),{},{code:n})}):null;var r})},updateStyleMetadata:k}},347837:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(785072),o=r.n(n),i=r(664727);o()(i.A,{insert:"head",singleton:!1}),i.A.locals;var a=r(605556),l=r.n(a),c=r(273517),s=r.n(c),u=r(8117);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return v(e=function(e,t,r){return t=y(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"onFilter",function(t){e.props.onFilter(t.target.value)}),v(e,"onClear",function(){e.props.onFilter("")}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.filterText?s().createElement(u.N,{placement:"bottom",overlay:s().createElement(u.m_,{id:"mapstore-toc-filter"},this.props.tooltipClear)},s().createElement(u.e6,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):s().createElement(u.e6,{className:"text-primary",glyph:"filter"});return s().createElement(u.gE,{className:"mapstore-filter"},s().createElement(u.MG,null,s().createElement(u.MJ,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),s().createElement(u.MG.Addon,{className:"square-button-md"},this.props.loading?s().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&d(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);v(g,"propTypes",{loading:l().bool,filterText:l().string,filterPlaceholder:l().oneOfType([l().object,l().string]),onFilter:l().func,onFocus:l().func,tooltipClear:l().oneOfType([l().object,l().string])}),v(g,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const h=g},724183:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(273517),o=r.n(n),i=r(223805),a=r.n(i),l=r(275705);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var s=["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,r=e.caption,n=e.infoExtra,i=e.className,c=void 0===i?"":i,d=e.description,m=e.fullText,y=e.onClick,p=void 0===y?function(){}:y,v=e.onMouseEnter,b=void 0===v?function(){}:v,g=e.onMouseLeave,h=void 0===g?function(){}:g,S=e.preview,O=e.selected,E=e.size,w=e.style,j=void 0===w?{}:w,A=e.stylePreview,P=void 0===A?{}:A,C=e.styleTools,I=void 0===C?{}:C,k=e.title,T=e.loading,N=e.dragSymbol,x=void 0===N?"+":N,U=e.tools,D=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s);return o().createElement("div",{className:"mapstore-side-card".concat(O?" selected":"").concat(E?" ms-"+E:"").concat(c?" ".concat(c):"").concat(m?" full-text":""),onClick:function(e){return p(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({title:k,preview:S,description:d,caption:r,tools:U},D),e)},onMouseEnter:b,onMouseLeave:h,style:j},o().createElement("div",{className:"ms-head"},D.isDraggable&&D.connectDragSource&&D.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},x))),S&&o().createElement("div",{className:"mapstore-side-preview",style:P},S),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},k&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,k)),d&&o().createElement("div",{className:"mapstore-side-card-desc"},a()(d)?d:o().createElement("span",null,d)),r&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,r))),n),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:I},U),"sm"!==E&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(l.A,{className:"mapstore-side-card-loader",size:12,hidden:!T})))))),t&&o().createElement("div",{className:"ms-body"},t))}},243977:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(605556),o=r.n(n),i=r(273517),a=r.n(i),l=r(8117),c=r(724183);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(null,arguments)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function p(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=m(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,r=e.items,n=e.colProps,o=e.onItemClick,i=e.size,s=t||c.A;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(l.fI,{className:"items-list"},r.map(function(e,t){return a().createElement(l.fv,u({key:e.id||t},n),a().createElement(s,u({onClick:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return o.apply(void 0,[e].concat(r))},size:i},e)))})))}}],n&&f(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);p(b,"propTypes",{size:o().string,onItemClick:o().func,colProps:o().object,items:o().array,cardComponent:o().oneOfType([o().string,o().func]),className:o().string}),p(b,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]});const g=b},136767:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(273517),o=r.n(n),i=r(8571),a=r(237811);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const s=function(e){var t=e.onValid,r=e.onError,c=e.editorRef,s=e.json,u=void 0===s?{}:s,f=e.editorWillUnmount,d=void 0===f?function(){}:f,m=l((0,n.useState)(JSON.stringify(u,!0,2)),2),y=m[0],p=m[1],v=l((0,n.useState)(),2),b=v[0],g=v[1];return(0,n.useEffect)(function(){try{var e=JSON.parse(y);g(),t(e)}catch(e){g(e),r(e)}},[y]),o().createElement("div",{className:"code-editor"},o().createElement(a.A,{ref:c,editorWillUnmount:function(){return d(y)},value:y,onBeforeChange:function(e,t,r){p(r)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),b&&o().createElement("div",{className:"error-area"},o().createElement("div",{className:"error-area-header"},o().createElement(i.A,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),o().createElement("div",{className:"error-area-body"},o().createElement(i.A,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:b.message}},function(e){return o().createElement("pre",{className:"error-msg"},e)}))))}},764997:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(273517),o=r.n(n),i=r(916589),a=r(774177);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}var c=function(e){var t=e.loading,r=e.isLoading;return t||r&&("function"==typeof r?r():!0===r)};const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.A;return(0,i.branch)(e,function(){return function(e){var n=e.loaderProps;return o().createElement(r,l({},t,n))}})}},454518:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(273517),o=r.n(n),i=r(916589),a=r(406250),l=function(e,t,r){var n=r.maskContainerStyle,l=r.maskStyle,c=r.className,s=r.white,u=r.enablePortal;return function(r){return(0,i.nest)(function(r){var i=o().createElement("div",{className:"ms2-mask-container ".concat(c||""," ").concat(e(r)?"":"ms2-mask-empty"),style:n},r.children,e(r)?o().createElement("div",{className:"ms2-mask"+(s?" white-mask":""),style:l},t(r)):null);return u?o().createElement(a.A,null,i):i},r)}};const c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.alwaysWrap,o=void 0===n||n,a=r.white,c=void 0!==a&&a,s=r.maskContainerStyle,u=void 0===s?{}:s,f=r.maskStyle,d=void 0===f?{}:f,m=r.className,y=r.enablePortal;return o?l(e,t,{maskContainerStyle:u,maskStyle:d,className:m,white:c,enablePortal:void 0!==y&&y}):(0,i.branch)(e,l(function(){return!0},t,{maskContainerStyle:u,maskStyle:d,white:c}))}},432060:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(273517),o=r.n(n);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(null,arguments)}const a=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fallback,r=void 0===t?null:t;return function(t){return(0,n.forwardRef)(function(a,l){return void 0===e||e(a)?o().createElement(n.Suspense,{fallback:r},o().createElement(t,i({ref:l},a))):null})}}},324535:(e,t,r)=>{r.d(t,{A:()=>M});var n=r(738221),o=r.n(n),i=r(2296),a=r.n(i),l=r(302404),c=r.n(l),s=r(501882),u=r.n(s),f=r(223805),d=r.n(f),m=r(185015),y=r.n(m),p=r(605556),v=r.n(p),b=r(273517),g=r.n(b),h=r(8571),S=r(154150),O=r(275705),E=r(168995),w=r(237811);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function x(e,t,r){return(t=U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}var D=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return x(e=function(e,t,r){return t=T(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,r||[],T(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{}),x(e,"onRenderToken",function(t){var r=t.lineCount();e.inlineWidgets&&e.inlineWidgets.forEach(function(e){e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)}),e.inlineWidgets=[],t.doc.iter(0,r,function(r){var n=r.lineNo();t.getLineTokens(n).forEach(function(r){e.inlineWidgets=e.props.inlineWidgets.reduce(function(o,i){var a=i.type,l=i.style,c=void 0===l?{}:l,s=i.active,f=void 0===s?function(){return!1}:s,d=i.className,m=void 0===d?"":d;if(f(r)){var y=e.getInlineWidget({className:m,token:r,onClick:function(){return e.setState({inlineWidgetType:a,token:r,lineNo:n})},style:u()(c)&&c(r)||c});return t.addWidget({line:n,ch:r.start-1},y,!1),[].concat(P(o),[y])}return P(o)},P(e.inlineWidgets))})})}),x(e,"onAutocomplete",function(t){if(!(t&&t.state&&t.state.completionActive)){var r=t.getCursor(),n=t.getTokenAt(r);if(n.string&&(a()(n.string,"-")||n.string.match(/^[.`\w@]\w*$/))&&n.string.length>0){var o=e.editor&&e.editor.getWrapperElement&&e.editor.getWrapperElement()||null;e.cm.commands.autocomplete(t,null,{completeSingle:!1,container:o})}}}),x(e,"onUpdate",function(){e.update.cancel(),e.update()}),x(e,"getInlineWidget",function(e){var t=e.onClick,r=void 0===t?function(){}:t,n=e.token,o=void 0===n?{}:n,i=e.className,a=void 0===i?"":i,l=e.style,c=void 0===l?{}:l,s=document.createElement("div");return s.setAttribute("class","".concat(a," ms-style-editor-inline-widget")),Object.assign(s.style,c),s.onclick=function(){return r(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){x(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},o))},s}),x(e,"getChangedCode",function(e,t){if("application/json"===t&&y()(e))try{return{code:JSON.parse(e)}}catch(e){return{error:e}}return{code:e}}),x(e,"getErrorMessage",function(){return e.props.error.messageId?g().createElement(h.A,{msgId:e.props.error.messageId,msgParams:e.props.error.messageParams}):e.props.error.line?e.props.error.message:g().createElement(h.A,{msgId:"styleeditor.genericValidationError"})}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({code:d()(this.props.code)?JSON.stringify(this.props.code,null,2):this.props.code})}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!c()(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){var t=this.editor.lineCount(),r={line:e.error.line-1||0,ch:0},n=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(r,n,{className:"ms-style-editor-error"})}}},{key:"render",value:function(){var e=this;return g().createElement(S.A,{className:"ms-style-editor",style:this.props.style,header:g().createElement("div",{className:"ms-style-editor-head"},this.props.loading&&g().createElement(O.A,{className:"ms-style-editor-loader",size:20}),this.props.error&&g().createElement(E.A,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:g().createElement(h.A,{msgId:"styleeditor.validationErrorTitle"}),text:this.getErrorMessage()}))},g().createElement(w.A,{key:"style-editor",value:this.state.code,editorDidMount:function(t,r,n,i){e.onRenderToken(t),e.editor=t,e.cm=i,t.on("inputRead",e.onAutocomplete),e.update=o()(function(){var t=e.getChangedCode(e.state.code,e.props.mode),r=t.error,n=t.code;r?e.props.onError(r):e.props.onChange(n)},e.props.waitTime),e.cm.extendMode(e.props.mode,{hintProperties:e.props.hintProperties})},editorWillUnmount:function(t){return t.off("inputRead",e.onAutocomplete)},onBeforeChange:function(t,r,n){return e.setState({code:n})},onChange:function(t){e.onRenderToken(t),e.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&g().createElement("div",{className:"ms-inline-widget-container"},g().createElement("div",null,g().createElement("button",{className:"btn close square-button",onClick:function(){e.state.value&&e.editor.replaceRange(e.state.value,{line:e.state.lineNo,ch:e.state.token.start},{line:e.state.lineNo,ch:e.state.token.end}),e.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),g().createElement("div",null,this.props.inlineWidgets.filter(function(t){return t.type===e.state.inlineWidgetType}).map(function(t){var r=t.Widget;return g().createElement(r,{value:e.state.value,token:e.state.token,onChange:function(t){return e.setState({value:t})}})}))))}}])&&I(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(g().Component);x(D,"propTypes",{mode:v().string,theme:v().string,style:v().object,code:v().oneOfType([v().string,v().object]),onChange:v().func,waitTime:v().number,hintProperties:v().object,error:v().object,inlineWidgets:v().array,loading:v().bool,onError:v().func}),x(D,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:function(){},waitTime:1e3,hintProperties:{},inlineWidgets:[],onError:function(){}});const M=D},869996:(e,t,r)=>{r.d(t,{A:()=>X});var n=r(273517),o=r.n(n),i=r(605556),a=r.n(i),l=r(738221),c=r.n(l),s=r(907309),u=r.n(s),f=r(383488),d=r.n(f),m=r(256951),y=r(275705),p=r(947194),v=r(491281),b=r(34273),g=r(714905),h=r(503618),S=r(168995),O=r(8571),E=r(8117),w=r(232877),j=r(164045),A=r(711030),P=r(136767),C=r(302404),I=r.n(C),k=r(628017);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var U=(0,j.A)(A.A),D={params:[]};const M=function(e,t){var r=e.onUpdate,i=e.thematicCustomParams,a=e.editorRef,l=t.messages,c=N((0,n.useState)(!1),2),s=c[0],u=c[1],f=N((0,n.useState)(!0),2),d=f[0],y=f[1],p=N((0,n.useState)(!1),2),v=p[0],b=p[1],g=function(e){var t=!0;return e.params.forEach(function(e){var r,n,o="object"===T(e),i=null==e?void 0:e.field,a=!!((null==e||null===(r=e.values)||void 0===r?void 0:r.length)&&(null==e||null===(n=e.values)||void 0===n?void 0:n.length)>=1)&&(null==e?void 0:e.values.every(function(e){return(null==e?void 0:e.value)&&(null==e?void 0:e.name)}));o&&i&&a||(t=!1)}),t},h=function(){d?u(function(e){return!e}):b(!0)};return o().createElement(w.Q,{open:s,onClick:function(){return h()},placement:"right",content:o().createElement("div",{className:"ms-classification-layer-settings"},o().createElement("div",{className:"ms-classification-layer-settings-title"},o().createElement(O.A,{msgId:"styleeditor.customParams"}),o().createElement(U,{className:"square-button-md no-border",onClick:function(){return h()}},o().createElement(E.e6,{glyph:"1-close"}))),o().createElement(P.A,{json:null!=i&&i.params?i:D,editorWillUnmount:function(e){try{var t=JSON.parse(e);g(t)&&!I()(t,i)&&r(t)}catch(e){}},onValid:function(e){var t;if(null!=e&&null!==(t=e.params)&&void 0!==t&&t.length){if(!g(e))throw y(!1),new Error((0,k.kA)(l,"styleeditor.wrongFormatMsg"));!d&&y(!0)}},onError:function(){y(!1)},editorRef:a}),v&&o().createElement("div",{className:"ms-style-editor-alert"},o().createElement(E.Fc,{bsStyle:"warning"},o().createElement("p",null,o().createElement(O.A,{msgId:"styleeditor.alertCustomParamsNotValid"})),o().createElement("p",null,o().createElement(m.A,{buttons:[{text:o().createElement(O.A,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:function(){b(!1),u(!0)},style:{marginRight:4}},{bsStyle:"primary",text:o().createElement(O.A,{msgId:"styleeditor.closeCustomParamsEditor"}),onClick:function(){y(!0),b(!1),u(!1)}}]})))))},o().createElement(U,{className:"square-button-md no-border",tooltipId:"toc.thematic.goToCfg"},o().createElement(E.e6,{glyph:"cog"})))};var F=["values"];function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function R(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){V(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function V(e,t,r){return(t=function(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $="UPDATE_STYLE",J="UNDO_STYLE",K="REDO_STYLE",G=V({},$,function(e,t){return B({},t)}),Y=(0,h.Ay)(function(e,t){return(G[t.type]||d())(e,t.payload)},{limit:20,undoType:J,redoType:K,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),H={};function Q(e){var t,r,i,a,l=e.code,s=e.format,f=e.layer,d=e.zoom,h=e.scales,E=e.geometryType,w=e.fonts,j=e.bands,A=e.attributes,P=e.onChange,C=e.onError,I=e.defaultStyleJSON,k=e.config,T=e.loading,N=e.error,x=e.methods,U=e.getColors,D=e.styleUpdateTypes,z=e.debounceTime,L=e.styleService,q=e.exactMatchGeometrySymbol,W=e.enable3dStyleOptions,V=e.onUpdateNode,G=(0,b.A)({exactMatchGeometrySymbol:q,enable3dStyleOptions:W}),Q=G.symbolizerBlock,X=G.ruleBlock,Z=_((0,n.useState)(!1),2),ee=Z[0],te=Z[1],re=_((0,n.useReducer)(Y,{}),2),ne=re[0],oe=re[1],ie=(null==ne?void 0:ne.present)||H,ae=(0,n.useRef)();ae.current={style:ie};var le=(0,n.useRef)(!1);(0,n.useEffect)(function(){le.current&&null!==I||(0,v.getStyleParser)(s).then(function(e){return e&&l&&null===I?e.readStyle(l).then(function(e){oe({type:$,payload:(0,g.f9)(e)}),le.current=!0}).catch(function(e){return C(B(B({},e),{},{status:400}))}):e&&l&&I?(le.current=!0,oe({type:$,payload:I})):l&&!e?C({messageId:"styleeditor.formatNotSupported",status:400}):null})},[l,s,I]);var ce=function(e){if(te(!1),!e)return null;var t=B(B({},ae.current.style),{},{rules:e});return oe({type:$,payload:t})},se=(0,n.useRef)();(0,n.useEffect)(function(){return se.current=c()(function(e){var t,r=function(e){if(!e||0===e.length)return{messageId:"styleeditor.styleEmpty",status:400,isEmpty:!0};var t=u()(e.map(function(e){return e.errorId}),function(e){return e});if(t)return{messageId:t,status:400};if(u()(e,function(e){var t=e.kind,r=e.classification;return!("Classification"!==t&&"Raster"!==t||r&&0!==r.length)}))return{messageId:"styleeditor.incompleteClassification",status:400};var r,n=u()(e,function(e){var t=e.symbolizers,r=void 0===t?[]:t;return u()(r,function(e){var t=e.kind,r=e.image;return"Icon"===t&&(null==r?void 0:r.errorId)})});return n?{messageId:"styleeditor.".concat(null==n||null===(r=n.symbolizers)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.image)||void 0===r?void 0:r.errorId),status:400}:null}(null==e||null===(t=e.style)||void 0===t?void 0:t.rules);return r?C(r):(0,v.getStyleParser)(e.format).then(function(t){return t.writeStyle((0,g.vo)(e.style)).then(function(t){var r=(0,g.vj)(e,t),n=r.parsedCode,o=r.errorObj;o?C(o):P(n,e.style)}).catch(function(e){C(B(B({},e),{},{status:400}))})})},z),function(){se.current.cancel()}},[]),(0,n.useEffect)(function(){se.current.cancel(),se.current({format:s,style:ie})},[JSON.stringify(ie)]);var ue=N&&(N.message||N.messageId&&o().createElement(O.A,{msgId:N.messageId}));return o().createElement(p.A,{loading:ee,toolbar:o().createElement(m.A,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"undo",tooltipId:"styleeditor.undoStyle",disabled:0===((null==ne||null===(t=ne.past)||void 0===t?void 0:t.length)||0),onClick:function(){return oe({type:J})}},{disabled:0===((null==ne||null===(r=ne.future)||void 0===r?void 0:r.length)||0),tooltipId:"styleeditor.redoStyle",glyph:"redo",onClick:function(){return oe({type:K})}},{visible:["wms"].includes(null==f?void 0:f.type)&&!!u()(null===(i=ae.current)||void 0===i||null===(i=i.style)||void 0===i?void 0:i.rules,function(e){return"Classification"===e.kind}),thematicCustomParams:null==f?void 0:f.thematic,onUpdate:function(e){V(f.id,"layers",{thematic:B({},e)})},Element:M},{visible:!!N,Element:function(){return o().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},o().createElement(S.A,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:o().createElement(O.A,{msgId:"styleeditor.validationErrorTitle"}),text:o().createElement(o().Fragment,null,o().createElement("p",null,o().createElement(O.A,{msgId:"styleeditor.genericValidationError"})),ue?o().createElement("p",null,o().createElement(O.A,{msgId:"styleeditor.validationError"}),": ",ue):o().createElement("p",null,o().createElement(O.A,{msgId:"styleeditor.incorrectPropertyInputError"})))}))}},{visible:!(!T&&!ee),Element:function(){return o().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},o().createElement(y.A,{size:18}))}}]}),ruleBlock:X,symbolizerBlock:Q,config:B({geometryType:E,zoom:d,fonts:w,scales:h,bands:j,attributes:A,methods:x,getColors:U,format:s,thematicCustomParams:null==f||null===(a=f.thematic)||void 0===a?void 0:a.params},k),rules:(null==ie?void 0:ie.rules)&&R(ie.rules).reverse(),onChange:function(e){return ce(R(e).reverse())},onUpdate:function(e){var t=e.values,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,F);te(!0),function(e){var t=e.values,r=e.properties,n=e.rules,o=e.layer,i=e.styleService,a=e.styleUpdateTypes,l=void 0===a?{}:a;return new Promise(function(e){var a=r.type&&l[r.type];return e(a?a({values:t,properties:r,rules:n,layer:o,styleService:i}):n.map(function(e){return e.ruleId===r.ruleId?B(B(B({},e),t),{},{errorId:void 0}):e}))})}({values:t,properties:r,layer:f,rules:ae.current.style.rules,styleService:L,styleUpdateTypes:D}).then(function(e){return ce(e)}).catch(function(){return ce()})}})}Q.propTypes={code:a().string,format:a().string,layer:a().object,zoom:a().number,scales:a().array,geometryType:a().string,fonts:a().array,bands:a().array,attributes:a().array,onChange:a().func,onError:a().func,defaultStyleJSON:a().object,config:a().object,loading:a().bool,error:a().object,methods:a().array,getColors:a().func,styleUpdateTypes:a().object,debounceTime:a().number,onUpdateNode:a().func},Q.defaultProps={onChange:function(){},onError:function(){},config:{},getColors:function(){},styleUpdateTypes:{},debounceTime:300,defaultStyleJSON:null,onUpdateNode:function(){}};const X=Q},237811:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(273517);const o=(0,r(432060).A)()((0,n.lazy)(function(){return Promise.all([r.e(1774),r.e(7349)]).then(r.bind(r,127349))}))},581611:(e,t,r)=>{r.d(t,{$:()=>z,A:()=>R});var n=r(956449),o=r.n(n),i=r(223805),a=r.n(i),l=r(273517),c=r.n(l),s=r(8117),u=r(811668),f=r(801081),d=r(972192),m=r(904059),y=r(247167),p=r(267919),v=r(8571),b=r(154150),g=r(275705),h=r(256951),S=r(324535),O=r(869996),E=r(131127),w=r(348081),j=r(588100),A=r(714905),P=r(677986),C=r(987021),I=r.n(C);const k=[{type:"color",active:function(e){return"atom"===e.type&&I()(e.string).isValid()},style:function(e){return{backgroundColor:e.string}},Widget:function(e){var t=e.token,r=e.value,n=e.onChange,o=void 0===n?function(){}:n;return c().createElement(P.Xq,{color:{hex:r||t.string},onChange:function(e){return o(e.hex)}})}}];var T=["code","error","canEdit","editorType","onUpdateMetadata","onChange","loading","header","editors"];function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N.apply(null,arguments)}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var U={classificationVector:p.Sn,classificationRaster:p.Mj,classification:p.Sn,"classification-raster":p.Mj};function D(e,t,r){return e&&"raster"!==t?(0,A.gu)(e,r):[]}var M=(0,u.connect)((0,f.Mz)([w.Ux,w.WV,w.kA,w.zs,w.tg,w.Nh,w.oN,E.B1,E.mg,w.gr],function(e,t,r,n,i,a,l,c,s,u){var f,d;return{code:e,mode:(0,A.fL)(t),bands:o()(r)&&"raster"===l&&r||[],attributes:D(r,l,null==a?void 0:a.fields),error:n.edit||null,loading:i,format:t,layer:a,geometryType:l,scales:c.map(function(e){return Math.round(e)}),zoom:s.zoom,fonts:u.fonts||[],methods:("raster"===l?null==u||null===(f=u.classificationMethods)||void 0===f?void 0:f.raster:null==u||null===(d=u.classificationMethods)||void 0===d?void 0:d.vector)||y.A.methods,styleService:{baseUrl:null==u?void 0:u.baseUrl,isStatic:null==u?void 0:u.isStatic}}}),{onError:d.QQ.bind(null,"edit")})(O.A);M.defaultProps={getColors:y.A.getColors,styleUpdateTypes:U};var F={visual:M,textarea:(0,u.connect)((0,f.Mz)([w.Ux,w.WV,w.kA,w.zs,w.tg],function(e,t,r,n,o){return{code:e,mode:(0,A.fL)(t),hintProperties:r,error:n.edit||null,loading:o}}))(S.A)};function z(e){var t,r,n=e.code,o=e.error,i=e.canEdit,u=e.editorType,f=e.onUpdateMetadata,d=e.onChange,m=e.loading,y=e.header,p=e.editors,S=void 0===p?[]:p,O=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,T),E=(t=(0,l.useState)(),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=E[0],j=E[1],A={position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"};if(!n&&!o)return c().createElement("div",{style:A},c().createElement(g.A,{size:150}));if(!i)return c().createElement("div",{style:A},c().createElement("div",null,c().createElement(s.e6,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(v.A,{msgId:"styleeditor.noPermission"}))));if(404===(null==o?void 0:o.status))return c().createElement("div",{style:A},c().createElement("div",null,c().createElement(s.e6,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(v.A,{msgId:"styleeditor.styleNotFound"}))));var P=S[u]||F[u]||F.textarea;return c().createElement(b.A,{style:{position:"relative"},header:c().createElement("div",{className:"ms-style-editor-toolbar"},c().createElement("div",{className:"ms-style-editor-toolbar-left"},y),c().createElement(h.A,{buttons:[{className:"no-border",bsSize:"xs",disabled:m,active:"textarea"===u,textId:"visual"===u?"styleeditor.switchToTextareaEditor":"styleeditor.switchToVisualEditor",onClick:function(){return m?null:"visual"===u?f({editorType:"textarea"}):j(!0)}}]}))},P&&c().createElement(P,N({},O,{code:n,error:o,onChange:function(e,t){d(e),a()(t)&&f({styleJSON:JSON.stringify(t)})}})),w&&c().createElement("div",{className:"ms-style-editor-alert",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",padding:16,backgroundColor:"rgba(0, 0, 0, 0.6)"}},c().createElement(s.Fc,{bsStyle:"warning",style:{textAlign:"center"}},c().createElement("p",{style:{padding:8}},c().createElement(v.A,{msgId:"styleeditor.alertForceTranslate"})),c().createElement("p",null,c().createElement(h.A,{buttons:[{text:c().createElement(v.A,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:function(){return j(!1)},style:{marginRight:4}},{bsStyle:"primary",text:c().createElement(v.A,{msgId:"styleeditor.useLatestValidStyle"}),onClick:function(){f({editorType:"visual"}),j(!1)}}]})))))}z.defaultProps={inlineWidgets:k};const R=(0,u.connect)((0,j.yz)(w.Ux,w.zs,w.$O,function(e){var t=(0,w.w5)(e);return null==t?void 0:t.editorType},function(e){try{var t=(0,w.w5)(e);return JSON.parse(null==t?void 0:t.styleJSON)}catch(e){return null}},w.tg,function(e,t,r,n,o,i){return{code:e,error:t.edit||null,canEdit:r,editorType:n,defaultStyleJSON:o,loading:i}}),{onUpdateMetadata:d.SI,onChange:d.Bd,onUpdateNode:m.OK})(z)},234164:(e,t,r)=>{r.d(t,{ah:()=>Q,h7:()=>ie,PH:()=>ne});var n=r(273517),o=r.n(n),i=r(811668),a=r(916589),l=r(801081),c=r(593429),s=r(653077),u=r(904059),f=r(972192),d=r(8571),m=r(154150),y=r(563864),p=r(764997),v=r(454518),b=r(275705),g=r(8117),h=r(243977),S=r(551783),O=r(164045),E=r(347837),w=r(720538),j=r(102685);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function I(e,t,r){return(t=function(e){var t=function(e){if("object"!=A(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==A(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=(0,S.A)("filterPlaceholder")(E.A),T=(0,O.A)(g.e6),N=(0,y.A)(function(e){return 0===e.items.length},{title:o().createElement(d.A,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(h.A);var x=r(400912),U=r.n(x),D=r(595535);const M=function(e){var t=e.disabled,r=e.selected,n=e.title,i=e.preview,a=e.previewSrc,l=e.onClick,c=void 0===l?function(){}:l;return o().createElement("div",{className:"ms-square-card".concat(r?" ms-selected":"").concat(t?" ms-disabled":""),onClick:t?null:function(){return c()}},(i||a)&&o().createElement("div",{className:"ms-preview"},i||a&&o().createElement("img",{src:a})),o().createElement("small",null,n))};var F=r(406250),z=r(229710);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){q(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function q(e,t,r){return(t=function(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=(0,S.A)("filterPlaceholder")(E.A),B=(0,S.A)("placeholder")(g.MJ),V=(0,y.A)(function(e){return 0===e.items.length},{title:o().createElement(d.A,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(h.A),$=function(e){var t=e.title,r=e._abstract,n=/^[a-zA-Z0-9\s]*$/,o=t&&null!==t.match(n);return o&&!r||o&&r&&null!==r.match(n)};var J=r(256951);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var G=r(348081),Y=r(307679),H=r(714905),Q=r(581611).A,X=(0,H.BD)(),Z=(0,y.A)(function(e){return!e.canEdit},{glyph:"exclamation-mark",title:o().createElement(d.A,{msgId:"styleeditor.noPermission"})}),ee=function(e){return(0,p.A)(e,{size:150,style:{margin:"auto"}},function(e){return o().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},o().createElement(b.A,e))})},te=(0,a.compose)((0,a.defaultProps)({templates:X}),(0,i.connect)((0,l.Mz)([G.$_,G.YX,G.oN,G.$O,G.gr,G.tg],function(e,t,r,n){var o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).formats;return{selectedStyle:e,add:t&&e,geometryType:r,canEdit:n,availableFormats:void 0===o?[]:o,loading:arguments.length>5?arguments[5]:void 0}}),{onSelect:f.EB,onClose:f.TD.bind(null,!1),onSave:f._r}),Z,ee(function(e){return!e.geometryType}),(0,a.withState)("filterText","onFilter",""),(0,a.withState)("styleSettings","onUpdate",{}))(function(e){var t=e.selectedStyle,r=e.add,n=e.styleSettings,i=void 0===n?{}:n,a=e.geometryType,l=void 0===a?"":a,c=e.templates,s=void 0===c?[]:c,u=e.filterText,f=e.availableFormats,y=void 0===f?["sld","css"]:f,p=e.formFields,v=void 0===p?[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:o().createElement(d.A,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:o().createElement(d.A,{msgId:"styleeditor.abstractSettings"})}]:p,h=e.onFilter,S=void 0===h?function(){}:h,O=e.onSelect,E=void 0===O?function(){}:O,j=e.onClose,A=void 0===j?function(){}:j,P=e.onSave,C=void 0===P?function(){}:P,I=e.onUpdate,k=void 0===I?function(){}:I,T=e.loading;return o().createElement(m.A,{header:o().createElement("div",null,o().createElement(W,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:u,onFilter:S}),o().createElement("div",{className:"text-center"},o().createElement("small",null,T?o().createElement(b.A,{size:15,style:{display:"inline-block"}}):o().createElement(d.A,{msgId:"styleeditor.createStyleFromTemplate"}))))},o().createElement(V,{colProps:{},cardComponent:M,onItemClick:function(e){var t=e.code,r=e.styleId,n=e.format;E({code:t,templateId:r,format:n||"css"}),k(L(L({},i),{},{title:U()(s.filter(function(e){return e.styleId===r}).map(function(e){return e.title}))}))},items:s.filter(function(e){var t=e.title;return!u||u&&-1!==t.indexOf(u)}).filter(function(e){var t=e.types,r=e.format;return!t||U()(t.filter(function(e){return e===l}))&&-1!==y.indexOf(r)}).map(function(e){var r;return L(L({},e),{},{preview:null!=e&&null!==(r=e.preview)&&void 0!==r&&r.config?o().createElement(w.A,e.preview.config):null==e?void 0:e.preview,selected:e.styleId===t,disabled:T})})}),o().createElement(F.A,null,o().createElement(z.A,{show:!!r,fitContent:!0,title:o().createElement(d.A,{msgId:"styleeditor.createStyleModalTitle"}),onClose:function(){return A()},buttons:[{text:o().createElement(d.A,{msgId:"save"}),bsStyle:"primary",disabled:!$(i),onClick:function(){return C(i)}}]},o().createElement(g.lV,null,o().createElement(g.gE,{controlId:"styleTitle",validationState:!$(i)&&"error"},v.map(function(e){var t=e.title,r=e.placeholder,n=e.key;return o().createElement("span",{key:n},o().createElement(g.mq,null,t),o().createElement(B,{type:"text",defaultValue:i[n],placeholder:r,onChange:function(e){return k(L(L({},i),{},q({},n,e.target.value)))}}))})),!$(i)&&o().createElement(g.Fc,{style:{margin:0},bsStyle:"danger"},o().createElement(D.A,{msgId:"styleeditor.titleRequired"}))))))}),re=(0,a.compose)((0,i.connect)((0,l.Mz)([G.Pz,G.SS,Y.ZT],function(e,t,r){return{status:e,defaultStyle:t.defaultStyle,enabledStyle:t.enabledStyle,availableStyles:t.availableStyles,layer:r}}),{onSelect:u.b6}),(0,a.withState)("filterText","onFilter",""),(0,v.A)(function(e){var t=e.status,r=e.readOnly;return"template"===t&&!r},function(){return o().createElement(te,null)},{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))(function(e){var t=e.showDefaultStyleIcon,r=e.enabledStyle,n=e.defaultStyle,i=e.availableStyles,a=void 0===i?[]:i,l=e.onSelect,c=void 0===l?function(){}:l,s=e.layer,u=void 0===s?{}:s,f=e.formatColors,d=void 0===f?{sld:"#33ffaa",css:"#ffaa33"}:f,y=e.filterText,p=void 0===y?"":y,v=e.onFilter,b=void 0===v?function(){}:v;return o().createElement(m.A,{className:"ms-style-editor-list",header:o().createElement(k,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:p,onFilter:b})},o().createElement(N,{size:"sm",onItemClick:function(e){var t=e.name,r=(0,j.sO)(u,"style",t);c(r?{layerFilter:r,style:t}:{style:t},!0)},items:a.filter(function(e){var t,r,n=e.name,o=void 0===n?"":n,i=e.title,a=void 0===i?"":i,l=e._abstract,c=void 0===l?"":l,s=e.metadata,u=void 0===s?{}:s;return o.toLowerCase().includes(p.toLowerCase())||(null==u||null===(t=u.title)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase()))||(null==u||null===(r=u.description)||void 0===r?void 0:r.toLowerCase().includes(p.toLowerCase()))||a.toLowerCase().includes(p.toLowerCase())||c.toLowerCase().includes(p.toLowerCase())}).map(function(e){var i,a,l;return C(C({},e),{},{title:(null==e||null===(i=e.metadata)||void 0===i?void 0:i.title)||e.label||e.title||e.name,description:(null==e||null===(a=e.metadata)||void 0===a?void 0:a.description)||e._abstract,selected:r===e.name,preview:e.format&&o().createElement(w.A,{backgroundColor:"#333333",texts:[{text:(l=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[l]||l||"").toUpperCase(),fill:d[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||o().createElement(T,{glyph:"geoserver"}),tools:t&&n===e.name?o().createElement(T,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null})})}))}),ne=(0,a.compose)((0,a.withState)("showModal","onShowModal"),(0,i.connect)((0,l.Mz)([G.Pz,G.$_,G.zs,G.GZ,G.Ux,G.tg,G.mA,G.$O,G.SS,G.gr,G.hl,G.Dz],function(e,t,r,n,o,i,a,l,c){var s=c.defaultStyle,u=(arguments.length>9&&void 0!==arguments[9]?arguments[9]:{}).formats,f=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0;return{status:e,templateId:t,error:r,isCodeChanged:n!==o,loading:i,layerDefaultStyleName:s,selectedStyle:s===a?"":a,editEnabled:l,disableCodeEditing:-1===(void 0===u?["sld"]:u).indexOf(f),enableEditDefaultStyle:d}}),{onSelectStyle:f.yB.bind(null,"template"),onEditStyle:f.yB.bind(null,"edit"),onBack:f.yB.bind(null,""),onReset:c.y$.bind(null,H.gt,[{}]),onAdd:f.TD.bind(null,!0),onUpdate:f.kX,onDelete:f.Nr,onSetDefault:f.jd}))(function(e){var t,r=e.status,n=e.buttons,i=void 0===n?[]:n,a=e.templateId,l=e.error,c=e.isCodeChanged,s=e.showModal,u=e.onShowModal,f=e.loading,m=e.selectedStyle,y=e.layerDefaultStyleName,p=e.editEnabled,v=e.enableSetDefaultStyle,b=e.enableEditDefaultStyle,h=e.defaultStyles,S=void 0===h?["generic","point","line","polygon","raster"]:h,O=e.onBack,E=void 0===O?function(){}:O,w=e.onAdd,j=void 0===w?function(){}:w,A=e.onReset,P=void 0===A?function(){}:A,C=e.onDelete,I=void 0===C?function(){}:C,k=e.onSelectStyle,T=void 0===k?function(){}:k,N=e.onEditStyle,x=void 0===N?function(){}:N,U=e.onUpdate,D=void 0===U?function(){}:U,M=e.onSetDefault,R=void 0===M?function(){}:M,_=e.disableCodeEditing;return o().createElement("div",null,o().createElement(J.A,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!r,tooltipId:"styleeditor.backToList",disabled:!!f,onClick:function(){"edit"===r&&c?u({title:o().createElement(d.A,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:o().createElement(g.Fc,{bsStyle:"warning",style:{margin:0}},o().createElement(d.A,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:o().createElement(d.A,{msgId:"close"}),bsStyle:"primary",onClick:function(){u(null),E(),P()}}]}):(E(),P())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(r||!p),disabled:!!f,onClick:function(){return T()}},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(r||!p),disabled:!!f||-1!==S.indexOf(m)||!m&&-1!==S.indexOf(y)||_||!b&&!m,onClick:function(){return x()}},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(l&&l.edit&&l.edit.status)||!!f||-1!==S.indexOf(m),visible:!("edit"!==r||!p),onClick:function(){return D()}},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==r||!a||!p),disabled:!!f,onClick:function(){return j()}},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!f||-1!==S.indexOf(m)||!m,visible:!(r||!p),onClick:function(){u({title:o().createElement(d.A,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:o().createElement(g.Fc,{bsStyle:"warning",style:{margin:0}},o().createElement(d.A,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:o().createElement(d.A,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:function(){u(null),I(m)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!f||-1!==S.indexOf(m)||!m,visible:!(!v||r||!p),onClick:function(){return R()}}].concat((t=r?[]:i,function(e){if(Array.isArray(e))return K(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),o().createElement(F.A,null,o().createElement(z.A,{show:s,fitContent:!0,title:s&&s.title,onClose:function(){return u(null)},buttons:s&&s.buttons},s&&s.message)))}),oe=(0,a.compose)((0,i.connect)((0,l.Mz)([G.Nh],function(e){return{layer:e}}),{onInit:s.a}),(0,a.lifecycle)({UNSAFE_componentWillMount:function(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}),ee(function(e){var t=e.layer,r=void 0===t?{}:t;return r&&r.capabilitiesLoading}))(function(){return o().createElement(m.A,{className:"ms-style-editor-container",footer:o().createElement("div",{style:{height:25}})},o().createElement(re,{readOnly:!0}))}),ie=(0,a.branch)(function(e){return e.readOnly},function(){return oe})(re)},664727:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""]);const i=o}}]);