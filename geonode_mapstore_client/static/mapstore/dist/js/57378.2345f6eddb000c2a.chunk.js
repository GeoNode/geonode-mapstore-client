"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[57378],{457378:(o,e,r)=>{r.d(e,{Ac:()=>N,IP:()=>B,Oe:()=>D,Os:()=>_,Qi:()=>G,cp:()=>U,g7:()=>H,ge:()=>L,gi:()=>q,wm:()=>R,xX:()=>W});var t=r(41476),i=r(627680),n=r(75200),a=r(974904),l=r(977363),c=r(215327),s=r(920757),p=r(608191),d=r(842153),u=r(151949),f=r(105330),y=r(551549),m=r(267980),h=r(602317),A=r(317061),g=r(584164),v=r(543622),w=r(506964),b=r(348460),P=r(938487),O=r.n(P),F=r(715726),j=r(302982);function T(o){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},T(o)}function k(o){return function(o){if(Array.isArray(o))return I(o)}(o)||function(o){if("undefined"!=typeof Symbol&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}(o)||E(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(o,e){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,t)}return r}function S(o){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach(function(e){x(o,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(r,e))})}return o}function x(o,e,r){return(e=function(o){var e=function(o){if("object"!=T(o)||!o)return o;var e=o[Symbol.toPrimitive];if(void 0!==e){var r=e.call(o,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(o);return"symbol"==T(e)?e:e+""}(e))in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r,o}function M(o,e){return function(o){if(Array.isArray(o))return o}(o)||function(o,e){var r=null==o?null:"undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(null!=r){var t,i,n,a,l=[],c=!0,s=!1;try{if(n=(r=r.call(o)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(t=n.call(r)).done)&&(l.push(t.value),l.length!==e);c=!0);}catch(o){s=!0,i=o}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(o,e)||E(o,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(o,e){if(o){if("string"==typeof o)return I(o,e);var r={}.toString.call(o).slice(8,-1);return"Object"===r&&o.constructor&&(r=o.constructor.name),"Map"===r||"Set"===r?Array.from(o):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(o,e):void 0}}function I(o,e){(null==e||e>o.length)&&(e=o.length);for(var r=0,t=Array(e);r<e;r++)t[r]=o[r];return t}var D=function(o){var e=o.color,r=o.opacity,i=M(O()(e).gl(),4),n=i[0],a=i[1],l=i[2],c=i[3];return void 0!==r?new t.A(n,a,l,r):new t.A(n,a,l,c)},G=function(o){var e=o.coordinates,r=o.width,t=void 0===r?4:r,d=o.color,u=void 0===d?"#ff00ff":d,f=o.opacity,y=void 0===f?1:f,m=o.depthFailColor,h=o.depthFailOpacity,A=o.dashLength,g=o.clampToGround,v=o.allowPicking,w=void 0!==v&&v,b=o.geodesic,P=o.id,O=o.modelMatrix;return new i[g?"GroundPolylinePrimitive":"Primitive"](S(S({geometryInstances:new n.A({id:P,geometry:g?new a.A({positions:k(e),width:t}):new l.A({positions:k(e),width:t,arcType:b?c.A.GEODESIC:c.A.NONE}),modelMatrix:O}),appearance:new s.A({material:A?p.A.fromType("PolylineDash",{color:D({color:u,opacity:y}),dashLength:A}):p.A.fromType("Color",{color:D({color:u,opacity:y})})})},m&&{depthFailAppearance:new s.A({material:A?p.A.fromType("PolylineDash",{color:D({color:m,opacity:h}),dashLength:A}):p.A.fromType("Color",{color:D({color:m,opacity:h})})})}),{},{allowPicking:w,asynchronous:!1}))},L=function(o){var e=o.id,r=o.coordinates,t=o.color,i=void 0===t?"#ff00ffAA":t,a=o.opacity,l=void 0===a?1:a,c=o.depthFailColor,s=o.depthFailOpacity,m=o.allowPicking,h=void 0!==m&&m,A=o.geodesic;return new d.A(S(S({geometryInstances:new n.A({id:e,geometry:new u.A({polygonHierarchy:new f.A(k(r)),perPositionHeight:!A})}),appearance:new y.A({material:p.A.fromType("Color",{color:D({color:i,opacity:l})}),faceForward:!0})},c&&{depthFailAppearance:new y.A({material:p.A.fromType("Color",{color:D({color:c,opacity:s})}),faceForward:!0})}),{},{allowPicking:h,asynchronous:!1}))},R=function(o){var e=o.width,r=void 0===e?4:e,t=o.coordinates,i=o.color,n=void 0===i?"#ff00ff":i,a=o.opacity,l=void 0===a?1:a,c=o.depthFailColor,s=o.depthFailOpacity,p=o.dashLength,d=o.clampToGround,u=o.allowPicking,f=void 0!==u&&u,y=o.id,h=o.radius,A=o.semiMajorAxis,g=o.semiMinorAxis,v=o.geodesic,w=F.A.computeEllipsePositions({granularity:.02,semiMajorAxis:h||A,semiMinorAxis:h||g,rotation:0,center:t},!1,!0).outerPositions,b=m.A.unpackArray(w);return G({coordinates:[].concat(k(b),[b[0]]),width:r,color:n,opacity:l,depthFailColor:c,depthFailOpacity:s,dashLength:p,clampToGround:d,allowPicking:f,id:y,geodesic:v})},N=function(o){var e=o.id,r=o.coordinates,t=o.color,a=void 0===t?"#ff00ffAA":t,l=o.opacity,c=void 0===l?1:l,s=o.depthFailColor,d=o.depthFailOpacity,u=o.allowPicking,f=void 0!==u&&u,m=o.clampToGround,A=o.radius,g=o.semiMajorAxis,v=o.semiMinorAxis;return new i[m?"GroundPrimitive":"Primitive"](S(S({geometryInstances:new n.A({id:e,geometry:new h.A({center:r,semiMajorAxis:A||g,semiMinorAxis:A||v})}),appearance:new y.A({material:p.A.fromType("Color",{color:D({color:a,opacity:c})}),faceForward:!0})},s&&{depthFailAppearance:new y.A({material:p.A.fromType("Color",{color:D({color:s,opacity:d})}),faceForward:!0})}),{},{allowPicking:f,asynchronous:!1}))},_=function(o){var e=o.id,r=o.coordinates,t=o.color,i=void 0===t?"#ff00ffAA":t,a=o.opacity,l=void 0===a?1:a,c=o.depthFailColor,s=o.depthFailOpacity,u=o.allowPicking,f=void 0!==u&&u,h=o.length,w=o.radius,b=o.topRadius,P=o.bottomRadius;return new d.A(S(S({geometryInstances:new n.A({id:e,geometry:new A.A({length:null!=h?h:.1,topRadius:null!=b?b:w,bottomRadius:null!=P?P:w}),modelMatrix:g.A.multiplyByTranslation(v.A.eastNorthUpToFixedFrame(r),new m.A(0,0,0),new g.A)}),appearance:new y.A({material:p.A.fromType("Color",{color:D({color:i,opacity:l})}),faceForward:!0})},c&&{depthFailAppearance:new y.A({material:p.A.fromType("Color",{color:D({color:c,opacity:s})}),faceForward:!0})}),{},{allowPicking:f,asynchronous:!1}))},U=function(o){var e=o.id,r=o.coordinates,t=o.color,i=void 0===t?"#ff00ffAA":t,n=o.opacity,a=void 0===n?1:n,l=o.depthFailColor,c=o.depthFailOpacity,s=o.allowPicking,p=void 0!==s&&s,d=o.length,u=o.radius,f=o.dashLength,y=o.clampToGround,h=o.geodesic,A=o.width,w=o.slices,b=void 0===w?128:w,P=o.topRadius,O=o.bottomRadius,F=g.A.multiplyByTranslation(v.A.eastNorthUpToFixedFrame(r),new m.A(0,0,0),new g.A),T=j.A.computePositions(null!=d?d:0,null!=P?P:u,null!=O?O:u,b,!1),C=m.A.unpackArray(T);return G({coordinates:d?C:[].concat(k(C.splice(0,Math.ceil(C.length/2))),[C[0]]),width:A,color:i,opacity:a,depthFailColor:l,depthFailOpacity:c,dashLength:f,clampToGround:y,allowPicking:p,id:e,geodesic:h,modelMatrix:F})},B=function(o,e){var r;null!=o&&null!==(r=o.scene)&&void 0!==r&&r.primitives&&e&&!e.isDestroyed()&&(e.removeAll(),o.scene.primitives.remove(e))},H=function(o){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.stroke,t=e.strokeWidth,i=void 0===t?1:t,n=e.fill,a=void 0===n?"#ffffff":n,l=r?o+2*i:o,c=document.createElement("canvas");c.setAttribute("width",l),c.setAttribute("height",l);var s=c.getContext("2d");return s.beginPath(),a&&(s.fillStyle=a),r&&(s.strokeStyle=r,s.lineWidth=i),s.arc(l/2,l/2,o/2,0,2*Math.PI),a&&s.fill(),r&&s.stroke(),c},W=function(o){var e,r=[],t=(null==o||null===(e=o.geometry)||void 0===e||null===(e=e.coordinates)||void 0===e?void 0:e[0])||[];if(t.length>0){var i=t.map(function(o){var e=M(o,3),r=e[0],t=e[1],i=e[2],n=void 0===i?0:i;return m.A.fromDegrees(r,t,n)}),n=new w.A({positions:i});r.push(n)}return r},q=function(o){var e=o.target,r=o.polygons,t=o.inverse,i=o.scene,n=o.additionalProperties,a=void 0===n?{}:n;e&&r&&Array.isArray(r)&&(r.length&&!e.clippingPolygons&&(e.clippingPolygons=new b.A({polygons:r,enabled:!0,inverse:!!t})),e.clippingPolygons&&(e.clippingPolygons.removeAll(),r.forEach(function(o){e.clippingPolygons.add(o)}),e.clippingPolygons.inverse=!!t,Object.entries(a).forEach(function(o){var r=M(o,2),t=r[0],i=r[1];e[t]=i}),i&&i.requestRender()))}}}]);