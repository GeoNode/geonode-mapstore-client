(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[97308],{743929:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>X});var n=r(273517),o=r.n(n),i=r(605556),a=r.n(i),u=r(984058),l=r.n(u),c=r(8117),s=r(455268),f=r(310340),d=r(711030),p=r(267980),m=r(336946),A=r(434067),g=r(337632),v=r(742558),y=r(15817),b=r(367817),E=r(493721),h=r(770103),O=r(465674),I=r(541033),D=r.n(I),T=r(265365),N=r(106629),C=r(764932),S=r(457378),_=r(762222);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t,r){if(P())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&x(o,r.prototype),o}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return H(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e){var t=p.A.distance(e[1],e[0]),r=p.A.distance(e[1],e[2]),n=p.A.normalize(p.A.subtract(e[0],e[1],new p.A),new p.A),o=p.A.normalize(p.A.subtract(e[2],e[1],new p.A),new p.A),i=p.A.normalize((0,_.TS)(n,o),new p.A),a=(t>r?r:t)/3;return[n,i,o].map((function(t){return p.A.add(e[1],p.A.multiplyByScalar(t,a,new p.A),new p.A)}))}const U=function(e){var t,r=e.map,i=e.active,a=void 0!==i&&i,u=e.type,l=e.clearId,c=e.hideInfoLabel,s=e.hideSegmentsLengthLabels,f=e.onUpdateCollection,d=void 0===f?function(){}:f,I=e.unitsOfMeasure,L=void 0===I?{}:I,x=e.tooltipLabels,P=void 0===x?{}:x,w=e.style,G=void 0===w?{primaryLabel:{font:"12px sans-serif",fillColor:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.6)"},secondaryLabel:{font:"12px sans-serif",fillColor:"#ffffff",outlineColor:"#000000",outlineWidth:4,offset:[0,-16]},tooltip:{font:"12px sans-serif",fillColor:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.5)",offset:[8,8]},lineDrawing:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:3,dashLength:8},line:{color:"#ffcc33",opacity:1,depthFailColor:"#ffcc33",depthFailOpacity:.4,width:2},areaDrawing:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},area:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},cursor:{color:"#000000"},coordinatesNode:{color:"#333333"}}:w,H=e.infoLabelsFormat,U=void 0===H?j(j(j(j(j(j({},N.iQ.POLYLINE_DISTANCE_3D,(function(e){return e})),N.iQ.AREA_3D,(function(e){return e})),N.iQ.HEIGHT_FROM_TERRAIN,(function(e){return e})),N.iQ.ANGLE_3D,(function(e){return e})),N.iQ.SLOPE,(function(e){return e})),N.iQ.POINT_COORDINATES,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.latitude,n=t.longitude;return"latitude: ".concat(r.toFixed(6),"\n")+"longitude: ".concat(n.toFixed(6),"\n")+"altitude: ".concat(e)})):H,Y=e.getPositionInfo,z=(0,n.useRef)(),q=(0,n.useRef)(),V=(0,n.useRef)(),Z=(0,n.useRef)(),B=(0,n.useRef)(),W=(0,n.useRef)(),J=(0,n.useRef)({type:"FeatureCollection",features:[]}),$=(0,n.useRef)(),K=(0,n.useRef)(),X=(0,n.useRef)();X.current=L;var ee=(0,n.useRef)();ee.current=P;var te=(0,n.useRef)();function re(){return{color:(0,S.Oe)(k({},null==G?void 0:G.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}}function ne(){var e=(null==G?void 0:G.primaryLabel)||{},t=e.font,r=void 0===t?"12px sans-serif":t,n=e.fillColor,o=void 0===n?"#ffffff":n,i=e.backgroundColor,a=void 0===i?"rgba(0, 0, 0, 0.6)":i,u=e.offset,l=void 0===u?[0,-16]:u;return{font:r,disableDepthTestDistance:Number.POSITIVE_INFINITY,fillColor:(0,S.Oe)({color:o}),showBackground:!0,backgroundColor:(0,S.Oe)({color:a}),backgroundPadding:new A.A(4,4),pixelOffset:Q(A.A,F(l)),horizontalOrigin:g.A.CENTER,verticalOrigin:v.A.BASELINE}}function oe(e,t,r){return e&&e.value!==r?"".concat((0,N.Rl)(t,r,e.value).toFixed(2)," ").concat(e.label):"".concat(t.toFixed(2)," ").concat(e.label)}function ie(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r===N.iQ.AREA_3D?N.us[null===(n=X.current[r])||void 0===n?void 0:n.value]:X.current[r];return s?null:t.map((function(r,n){var a,u,l,c,s,f,d,E,h,O=t[n+1];if(O){var I=(0,_.TS)(r,O),D=p.A.distance(r,O);if(o){var T=m.A.fromCartesian(r),N=m.A.fromCartesian(O);D=(0,C.calculateDistance)([[b.A.toDegrees(T.longitude),b.A.toDegrees(T.latitude)],[b.A.toDegrees(N.longitude),b.A.toDegrees(N.latitude)]])}var L=m.A.fromCartesian(I),R=L.longitude,Q=L.latitude,x=L.height,P=oe(i,D,"m");return e.add(k({position:I,text:P},(l=void 0===(u=(a=(null==G?void 0:G.secondaryLabel)||{}).font)?"12px sans-serif":u,s=void 0===(c=a.fillColor)?"#ffffff":c,d=void 0===(f=a.outlineColor)?"#000000":f,h=void 0===(E=a.outlineWidth)?4:E,{font:l,disableDepthTestDistance:Number.POSITIVE_INFINITY,fillColor:(0,S.Oe)({color:s}),outlineColor:(0,S.Oe)({color:d}),outlineWidth:h,style:y.A.FILL_AND_OUTLINE,showBackground:!1,backgroundPadding:new A.A(4,4),pixelOffset:new A.A(0,0),horizontalOrigin:g.A.CENTER,verticalOrigin:v.A.BASELINE}))),[b.A.toDegrees(R),b.A.toDegrees(Q),x,D,P]}return null})).filter((function(e){return e}))}function ae(e){var t,n,o,i,a=e.coordinates,u=e.feature,l=e.measureType,s="",f=a[a.length-1],d=X.current[l],p=te.current[l];switch(l){case N.iQ.HEIGHT_FROM_TERRAIN:V.current.add({position:a[a.length-1],image:$.current,color:(0,S.Oe)({color:"#ffff00"}),disableDepthTestDistance:Number.POSITIVE_INFINITY,allowPicking:!1}),s=p(oe(d,u.properties.height,"m")),z.current.add((0,S.Qi)(k(k({},null==G?void 0:G.line),{},{coordinates:F(a)})));break;case N.iQ.ANGLE_3D:z.current.add((0,S.Qi)(k(k({},null==G?void 0:G.line),{},{coordinates:F(a)}))),s=p(oe(d,o=R((0,_.Ot)(a),1)[0],"deg")),f=a[1],z.current.add((0,S.Qi)(k(k({},null==G?void 0:G.line),{},{coordinates:M(a)})));break;case N.iQ.SLOPE:z.current.add((0,S.ge)(k(k({},null==G?void 0:G.area),{},{coordinates:F(a)}))),z.current.add((0,S.Qi)(k(k({},null==G?void 0:G.line),{},{coordinates:F(a)}))),s=p(oe(d,i=R((0,_.Q2)(a,null==r||null===(t=r.camera)||void 0===t?void 0:t.position),1)[0],"deg")),f=(0,_.L8)(a);break;case N.iQ.POINT_COORDINATES:V.current.add({position:a[a.length-1],image:$.current,color:(0,S.Oe)({color:"#ffff00"}),disableDepthTestDistance:Number.POSITIVE_INFINITY,allowPicking:!1}),s=p(oe(d,u.geometry.coordinates[2],"m"),{latitude:u.geometry.coordinates[1],longitude:u.geometry.coordinates[0]});break;case N.iQ.POLYLINE_DISTANCE_3D:a.length>1&&(z.current.add((0,S.Qi)(k(k({},null==G?void 0:G.line),{},{coordinates:F(a)}))),n=ie(B.current,a,N.iQ.POLYLINE_DISTANCE_3D),s=p(oe(d,u.properties.length,"m")));break;case N.iQ.LENGTH:if(a.length>1){var A=a.map((function(e){var t=m.A.fromCartesian(e),r=t.longitude,n=t.latitude;return[b.A.toDegrees(r),b.A.toDegrees(n)]})),g=(0,_.qg)(a,(function(e){return e[e.length-1].height})),v=(0,C.calculateDistance)(A);f=g[a.length-1],s=p(oe(d,v,"m")),z.current.add((0,S.Qi)(k(k({},null==G?void 0:G.line),{},{coordinates:F(g),geodesic:!0}))),n=ie(B.current,g,N.iQ.LENGTH,!0)}break;case N.iQ.AREA_3D:a.length>2&&(z.current.add((0,S.ge)(k(k({},null==G?void 0:G.area),{},{coordinates:F(a)}))),z.current.add((0,S.Qi)(k(k({},null==G?void 0:G.line),{},{coordinates:F(a)}))),n=ie(B.current,a,N.iQ.AREA_3D),s=p(oe(d,u.properties.area,"mÂ²")))}c||B.current.add(k({position:f,text:s},ne()));var y=null!=u&&u.id?u.id:D()();return k(k({},u),{},{id:y,properties:k(k(k(k(k({},null==u?void 0:u.properties),{},{id:y,measureType:l},n&&{segments:n,segmentsCRS:"WGS84",segmentsColumns:["longitude","latitude","height:m","length:m","label"]}),s&&{infoLabelText:s}),o&&{angle:o,angleUom:"deg"}),i&&{slope:i,slopeUom:"deg"})})}function ue(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coordinates,n=e.area,o=e.distance;q.current.removeAll(),Z.current.removeAll(),W.current.removeAll();var i,a,l,s,f,d,p,y,E,h="",O="",I=t[t.length-1],D=X.current[u],T=ee.current[u]||{},L=te.current[u];switch(u){case N.iQ.HEIGHT_FROM_TERRAIN:O=T.start,2===(null==t?void 0:t.length)&&(q.current.add((0,S.Qi)(k(k({},null==G?void 0:G.lineDrawing),{},{coordinates:F(t)}))),h=o?L(oe(D,o,"m")):"");break;case N.iQ.ANGLE_3D:O=T.start,3===t.length&&(h=L(oe(D,R((0,_.Ot)(t),1)[0],"deg")),I=t[1],q.current.add((0,S.Qi)(k(k({},null==G?void 0:G.lineDrawing),{},{coordinates:M(t)}))));break;case N.iQ.SLOPE:var x;O=T.start,3===t.length&&(h=L(oe(D,R((0,_.Q2)(t,null==r||null===(x=r.camera)||void 0===x?void 0:x.position),1)[0],"deg")),I=(0,_.L8)(t));break;case N.iQ.POINT_COORDINATES:if(O=T.start,t[0]){var P=m.A.fromCartesian(t[0]);h=L(oe(D,P.height,"m"),{latitude:b.A.toDegrees(P.latitude),longitude:b.A.toDegrees(P.longitude)})}break;case N.iQ.POLYLINE_DISTANCE_3D:O=T.start,t.length>1&&(O=T.end,h=L(oe(D,o,"m")),ie(W.current,t,N.iQ.POLYLINE_DISTANCE_3D),t.forEach((function(e,r){r!==t.length-1&&Z.current.add(k({position:e,image:K.current},re()))})));break;case N.iQ.LENGTH:if(O=T.start,t.length>1){O=T.end;var w=t.map((function(e){var t=m.A.fromCartesian(e),r=t.longitude,n=t.latitude;return[b.A.toDegrees(r),b.A.toDegrees(n)]})),j=(0,C.calculateDistance)(w),H=(0,_.qg)(t,(function(e){return e[e.length-1].height}));h=L(oe(D,j,"m")),ie(W.current,H,N.iQ.LENGTH,!0),H.forEach((function(e,r){r!==t.length-1&&Z.current.add(k({position:e,image:K.current},re()))}))}break;case N.iQ.AREA_3D:O=T.start,t.length>1&&(ie(W.current,t,N.iQ.AREA_3D),t.forEach((function(e,r){r!==t.length-1&&Z.current.add(k({position:e,image:K.current},re()))}))),t.length>2&&(O=T.end,h=L(oe(D,n,"mÂ²"))),2===t.length&&(O=T.missingVertex)}t.length>0&&(W.current.add(k({position:t[t.length-1],text:O},(l=void 0===(a=(i=(null==G?void 0:G.tooltip)||{}).font)?"12px sans-serif":a,f=void 0===(s=i.fillColor)?"#ffffff":s,p=void 0===(d=i.backgroundColor)?"rgba(0, 0, 0, 0.5)":d,E=void 0===(y=i.offset)?[8,8]:y,{font:l,disableDepthTestDistance:Number.POSITIVE_INFINITY,fillColor:(0,S.Oe)({color:f}),showBackground:!0,backgroundColor:(0,S.Oe)({color:p}),backgroundPadding:new A.A(4,4),pixelOffset:Q(A.A,F(E)),horizontalOrigin:g.A.LEFT,verticalOrigin:v.A.TOP}))),c||W.current.add(k({position:I,text:h},ne())),W.current.update(r.scene.frameState)),r.scene.requestRender()}({coordinates:e.coordinates,area:e.area,distance:e.distance})}return te.current=U,(0,n.useEffect)((function(){return r&&(z.current=new E.A({destroyPrimitives:!0}),r.scene.primitives.add(z.current),V.current=new h.A({scene:r.scene}),r.scene.primitives.add(V.current),B.current=new O.A({scene:r.scene}),r.scene.primitives.add(B.current),q.current=new E.A({destroyPrimitives:!0}),r.scene.primitives.add(q.current),Z.current=new h.A({scene:r.scene}),r.scene.primitives.add(Z.current),W.current=new O.A({scene:r.scene}),r.scene.primitives.add(W.current),$.current=(0,S.g7)(12,{stroke:"#ffffff",strokeWidth:2,fill:!1}),K.current=(0,S.g7)(8,{stroke:"#ffffff",strokeWidth:2,fill:!1})),function(){null!=r&&r.isDestroyed&&!r.isDestroyed()&&((0,S.IP)(r,z.current),z.current=null,(0,S.IP)(r,V.current),V.current=null,(0,S.IP)(r,B.current),B.current=null,(0,S.IP)(r,q.current),q.current=null,(0,S.IP)(r,Z.current),Z.current=null,(0,S.IP)(r,W.current),W.current=null)}}),[r]),(0,n.useEffect)((function(){a||(q.current.removeAll(),Z.current.removeAll(),W.current.removeAll(),r.scene.requestRender())}),[a]),(0,n.useEffect)((function(){l&&(q.current.removeAll(),Z.current.removeAll(),W.current.removeAll(),z.current.removeAll(),V.current.removeAll(),B.current.removeAll(),J.current={type:"FeatureCollection",features:[]},d(J.current),r.scene.requestRender())}),[l]),(0,n.useEffect)((function(){var e;null!==(e=L[u])&&void 0!==e&&e.value&&function(){z.current.removeAll(),V.current.removeAll(),B.current.removeAll();var e=(J.current||{}).features,t=(void 0===e?[]:e).map((function(e){var t,r=function(e){var t,r,n,o=e.properties,i=void 0===o?{}:o,a=e.geometry,u=void 0===a?{}:a,l=i.measureType,c=u.coordinates,s=void 0===c?[]:c;switch(l){case N.iQ.HEIGHT_FROM_TERRAIN:return[m.A.toCartesian((t=m.A).fromDegrees.apply(t,F(null==i?void 0:i.terrainCoordinates))),m.A.toCartesian((r=m.A).fromDegrees.apply(r,F(s)))];case N.iQ.POINT_COORDINATES:return[m.A.toCartesian((n=m.A).fromDegrees.apply(n,F(s)))];case N.iQ.ANGLE_3D:case N.iQ.POLYLINE_DISTANCE_3D:case N.iQ.LENGTH:return s.map((function(e){var t;return m.A.toCartesian((t=m.A).fromDegrees.apply(t,F(e)))}));case N.iQ.SLOPE:case N.iQ.AREA_3D:return s[0].map((function(e){var t;return m.A.toCartesian((t=m.A).fromDegrees.apply(t,F(e)))}));default:return[]}}(e);return ae({coordinates:r,feature:e,measureType:null==e||null===(t=e.properties)||void 0===t?void 0:t.measureType})}));J.current.features=t,d(J.current),r.scene.requestRender()}()}),[null===(t=L[u])||void 0===t?void 0:t.value]),o().createElement(T.default,{key:u,map:r,active:a,geometryType:function(){switch(u){case N.iQ.HEIGHT_FROM_TERRAIN:case N.iQ.POINT_COORDINATES:return"Point";case N.iQ.ANGLE_3D:case N.iQ.LENGTH:case N.iQ.POLYLINE_DISTANCE_3D:return"LineString";case N.iQ.SLOPE:case N.iQ.AREA_3D:return"Polygon";default:return null}}(),geodesic:u===N.iQ.LENGTH,onDrawStart:ue,onMouseMove:ue,onDrawing:ue,onDrawEnd:function(e){var t,n,o=e.coordinates,i=e.feature;o&&i&&(n=ae({coordinates:(t={coordinates:o,feature:i}).coordinates,feature:t.feature,measureType:u}),J.current.features.push(n),d(J.current),r.scene.requestRender())},depthTestAgainstTerrain:!1,sampleTerrain:N.iQ.HEIGHT_FROM_TERRAIN===u,coordinatesLength:function(){switch(u){case N.iQ.ANGLE_3D:case N.iQ.SLOPE:return 3;case N.iQ.HEIGHT_FROM_TERRAIN:case N.iQ.POINT_COORDINATES:case N.iQ.POLYLINE_DISTANCE_3D:case N.iQ.AREA_3D:default:return null}}(),getPositionInfo:Y,getObjectsToExcludeOnPick:function(){return[q.current,Z.current,W.current,z.current,V.current,B.current]}})};var Y=r(598234),z=r(164045),q=r(628017),V=r(750929),Z=r(457601);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function W(e,t,r){return(t=function(e){var t=function(e){if("object"!=B(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var $=(0,z.A)(d.A);function K(e,t){var r,i,a,u,d=e.map,p=e.active,m=e.targetId,A=void 0===m?Z.Ob:m,g=e.measureType,v=e.onChangeMeasureType,y=e.defaultMeasureType,b=e.hideInfoLabel,E=e.hideSegmentsLengthLabels,h=e.unitsOfMeasure,O=e.unitsOfMeasureOptions,I=void 0===O?N.jg:O,D=e.onUpdateFeatures,T=e.onChangeUnitOfMeasure,C=e.tools,S=void 0===C?[N.iQ.LENGTH,N.iQ.POLYLINE_DISTANCE_3D,N.iQ.AREA_3D,N.iQ.POINT_COORDINATES,N.iQ.HEIGHT_FROM_TERRAIN,N.iQ.ANGLE_3D,N.iQ.SLOPE]:C,_=e.onClose,L=e.measurement,R=e.onAddAsLayer,Q=t.messages,x=(a=(0,n.useState)(0),u=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(a,u)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}(a,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),P=x[0],w=x[1],k=I[g];function j(e){v(e)}if((0,n.useEffect)((function(){p&&j(y)}),[p,y]),!p)return null;var F=document.querySelector("#".concat(A));return F&&(0,f.createPortal)(o().createElement(o().Fragment,null,o().createElement(U,{map:d,active:!!g,type:g,clearId:P,hideInfoLabel:b,hideSegmentsLengthLabels:E,unitsOfMeasure:h,onUpdateCollection:function(e){return D((null==e?void 0:e.features)||[])},tooltipLabels:W(W(W(W(W(W(W({},N.iQ.LENGTH,{start:(0,q.kA)(Q,"measureComponent.tooltipPolylineDistance3DStart"),end:(0,q.kA)(Q,"measureComponent.tooltipPolylineDistance3DEnd")}),N.iQ.POLYLINE_DISTANCE_3D,{start:(0,q.kA)(Q,"measureComponent.tooltipPolylineDistance3DStart"),end:(0,q.kA)(Q,"measureComponent.tooltipPolylineDistance3DEnd")}),N.iQ.AREA_3D,{start:(0,q.kA)(Q,"measureComponent.tooltipArea3DStart"),missingVertex:(0,q.kA)(Q,"measureComponent.tooltipArea3DMissingVertex"),end:(0,q.kA)(Q,"measureComponent.tooltipArea3DEnd")}),N.iQ.POINT_COORDINATES,{start:(0,q.kA)(Q,"measureComponent.tooltipPointCoordinatesStart")}),N.iQ.HEIGHT_FROM_TERRAIN,{start:(0,q.kA)(Q,"measureComponent.tooltipHeightFromTerrainStart")}),N.iQ.ANGLE_3D,{start:(0,q.kA)(Q,"measureComponent.tooltipAngle3DStart")}),N.iQ.SLOPE,{start:(0,q.kA)(Q,"measureComponent.tooltipSlopeStart")}),infoLabelsFormat:W(W(W(W(W(W(W({},N.iQ.LENGTH,(function(e){return e})),N.iQ.POLYLINE_DISTANCE_3D,(function(e){return e})),N.iQ.AREA_3D,(function(e){return e})),N.iQ.POINT_COORDINATES,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.latitude,n=t.longitude;return"".concat((0,q.kA)(Q,"measureComponent.latitude"),": ").concat(r.toFixed(6),"\n")+"".concat((0,q.kA)(Q,"measureComponent.longitude"),": ").concat(n.toFixed(6),"\n")+"".concat((0,q.kA)(Q,"measureComponent.altitude"),": ").concat(e)})),N.iQ.HEIGHT_FROM_TERRAIN,(function(e){return e})),N.iQ.ANGLE_3D,(function(e){return e})),N.iQ.SLOPE,(function(e){return e}))}),o().createElement(Y.A,{info:o().createElement(s.DropdownList,{disabled:!k,value:h[g],data:k,onChange:function(e){T(g,e)},textField:"label",valueField:"value"}),onClose:_},o().createElement(c._O,null,o().createElement(c.e2,null,S.map((function(e){return o().createElement($,{key:e,className:"square-button-md",bsStyle:g===e?"success":"primary",tooltipId:"measureComponent.".concat(l()(e),"Measure"),tooltipPosition:"bottom",active:g===e,onClick:j.bind(null,e)},o().createElement(c.e6,{glyph:N.bU[e]}))}))),o().createElement(c.e2,null,o().createElement($,{className:"square-button-md",bsStyle:"primary",tooltipId:"measureComponent.resetTooltip",onClick:function(){return w(P+1)}},o().createElement(c.e6,{glyph:"trash"}))),o().createElement(c.e2,null,o().createElement($,{className:"square-button-md",bsStyle:"primary",tooltipId:"measureComponent.exportToGeoJSON",disabled:0===((null==L||null===(r=L.features)||void 0===r?void 0:r.length)||0),onClick:function(){return(0,V.RG)(JSON.stringify((0,Z.Xy)(L.features)),"measurements.json","application/geo+json")}},o().createElement(c.e6,{glyph:"ext-json"})),R&&o().createElement($,{className:"square-button-md",bsStyle:"primary",tooltipId:"measureComponent.addAsLayer",disabled:0===((null==L||null===(i=L.features)||void 0===i?void 0:i.length)||0),onClick:function(){return R(L.features)}},o().createElement(c.e6,{glyph:"add-layer"})))))),F)}K.contextTypes={messages:a().object};const X=K},401733:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},745539:(e,t,r)=>{var n=r(640882),o=r(350828),i=r(466645),a=RegExp("['â]","g");e.exports=function(e){return function(t){return n(i(o(t).replace(a,"")),e,"")}}},124647:(e,t,r)=>{var n=r(554552)({Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"});e.exports=n},645434:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},922225:e=>{var t="\\ud800-\\udfff",r="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+i+"]",u="\\d+",l="["+r+"]",c="["+n+"]",s="[^"+t+i+u+r+n+o+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+o+"]",m="(?:"+c+"|"+s+")",A="(?:"+p+"|"+s+")",g="(?:['â](?:d|ll|m|re|s|t|ve))?",v="(?:['â](?:D|LL|M|RE|S|T|VE))?",y="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",E=b+y+"(?:\\u200d(?:"+["[^"+t+"]",f,d].join("|")+")"+b+y+")*",h="(?:"+[l,f,d].join("|")+")"+E,O=RegExp([p+"?"+c+"+"+g+"(?="+[a,p,"$"].join("|")+")",A+"+"+v+"(?="+[a,p+m,"$"].join("|")+")",p+"?"+m+"+"+g,p+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",u,h].join("|"),"g");e.exports=function(e){return e.match(O)||[]}},984058:(e,t,r)=>{var n=r(314792),o=r(745539)((function(e,t,r){return t=t.toLowerCase(),e+(r?n(t):t)}));e.exports=o},350828:(e,t,r)=>{var n=r(124647),o=r(213222),i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=o(e))&&e.replace(i,n).replace(a,"")}},466645:(e,t,r)=>{var n=r(401733),o=r(645434),i=r(213222),a=r(922225);e.exports=function(e,t,r){return e=i(e),void 0===(t=r?void 0:t)?o(e)?a(e):n(e):e.match(t)||[]}}}]);