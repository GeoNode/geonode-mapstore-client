"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[37920],{537920:(r,t,e)=>{e.d(t,{A:()=>M});var n=e(858156),o=e.n(n),c=e(185015),u=e.n(c),a=e(198023),i=e.n(a),s=e(324713),l=e.n(s),d=e(907309),y=e.n(d),p=e(411331),v=e.n(p),f=e(956449),m=e.n(f),S=e(499084),h=e.n(S),g=e(950014),b=e.n(g),Z=e(905185),w=e(276901),O=e(541033),C=e.n(O),I=e(958496),j=e(754364);function P(r){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},P(r)}function A(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function D(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?A(Object(e),!0).forEach((function(t){E(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):A(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}function E(r,t,e){return(t=function(r){var t=function(r){if("object"!=P(r)||!r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var e=t.call(r,"string");if("object"!=P(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==P(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function k(r){return function(r){if(Array.isArray(r))return T(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,t){if(r){if("string"==typeof r)return T(r,t);var e={}.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?T(r,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}var q=function(r,t,e){var n=e.contents,o=e.background,c=e.id,u=e.resourceId,a=[],i=t+'{"id": "'.concat(c,'"}]');return u===r?[i]:(o&&o.resourceId===r&&a.push(i+".background"),n?n.reduce((function(t,e){return[].concat(k(t),k(q(r,i+".contents[",e)))}),a):a)},F={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1};const M=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.gj:var e=t.id,n=t.path,c=t.position,a=t.element,s=(0,w.DS)("currentStory.".concat(n),r),d=o()(r,s,[]),p=function(r,t){var e=r.length,n=0;return t||0===t||(n=e),u()(t)?n=l()(r,{id:t})+1:i()(t)&&(n=Math.min(t,r.length)),n}(d,c),f=d.slice();return f.splice(p,0,D({id:e},a)),(0,Z.hZ)(s,f,r);case I.J4:var S=t.id,g=t.mediaType,O=t.data;return(0,Z.hZ)("currentStory.resources",b()([{id:S,type:g,data:O}].concat(k(r.currentStory&&r.currentStory.resources||[])),"id"),r);case I.jn:return(0,Z.hZ)("mode",t.mode,r);case I.oS:var P=t.id,A=t.mediaType,T=t.data,M=(0,Z.Rd)("currentStory.resources",{id:P,type:A,data:T},{id:P},r);return A===w.mI.MAP&&r.currentStory.sections.filter((function(r){return r.type!==w.Fq.CAROUSEL})).reduce((function(r,t){return[].concat(k(r),k(q(P,"sections[",t)))}),[]).map((function(t){var e=(0,w.DS)("currentStory.".concat(t,".map"),r);M=(0,Z.hZ)(e,void 0,M)})),M;case I.s0:var U=t.id,R=t.mediaType,_=(0,Z.XB)("currentStory.resources",{id:U},r);return r.currentStory.sections.reduce((function(r,t){return[].concat(k(r),k(q(U,"sections[",t)))}),[]).map((function(t){var e=(0,w.DS)("currentStory.".concat(t,".resourceId"),r);if(_=(0,Z.wC)(e,_),R===w.mI.MAP){var n=(0,w.DS)("currentStory.".concat(t,".map"),r);_=(0,Z.wC)(n,_)}})),_;case I.ut:return(0,Z.hZ)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,(0,Z.hZ)("loading",t.value,r));case I.t2:var z=t.path,B=(0,w.DS)("currentStory.".concat(z),r),J=k(B),K=J.pop(),L=o()(r,J);return m()(L)?(u()(K)&&(K=parseInt(K,10)),(0,Z.hZ)(J,[].concat(k(L.slice(0,K)),k(L.slice(K+1))),r)):(0,Z.wC)(B,r);case I.RJ:var X,H,Q=r.defaultSettings||{},W=t.story.settings||Q,x=(null===(X=W)||void 0===X||null===(X=X.theme)||void 0===X?void 0:X.fontFamilies)||[],G=null===(H=r.currentStory)||void 0===H||null===(H=H.settings)||void 0===H||null===(H=H.theme)||void 0===H?void 0:H.fontFamilies;return G&&G.length>0&&(W=(0,Z.hZ)("theme.fontFamilies",b()([].concat(k(G),k(x)),"family"),W)),(0,Z.hZ)("currentStory",D(D({},t.story),{},{settings:W}),r);case I.Yp:return(0,Z.hZ)("selectedCard",r.selectedCard===t.card?"":t.card,r);case I.Vc:var N=t.control,V=t.value;return(0,Z.hZ)("controls.".concat(N),V,r);case I.sb:var Y=t.resource,$=r.currentStory&&r.currentStory.settings||{};return(0,Z.Zz)((0,Z.hZ)("resource",Y),(0,Z.hZ)("currentStory.settings.storyTitle",$.storyTitle||Y.name))(r);case I.MX:case I.NL:return(0,Z.wC)("errors.save",r);case I.Jq:return(0,Z.hZ)("errors.save",h()(t.error),r);case I.H0:return(0,Z.hZ)("isCollapsed",!r.isCollapsed,r);case I.sQ:var rr=o()(r,"currentStory.settings.".concat(t.option));return(0,Z.hZ)("currentStory.settings.".concat(t.option),!rr,r);case I.UW:var tr=!r.isSettingsEnabled,er=r.currentStory&&r.currentStory.settings||{};return(0,Z.Zz)((0,Z.hZ)("isSettingsEnabled",tr),(0,Z.hZ)("oldSettings",tr?er:{}),(0,Z.hZ)("currentStory.settings",tr?D({},er):t.withSave?er:r.oldSettings))(r);case I.q6:var nr=t.path,or=t.mode,cr=t.options,ur=t.element,ar=(0,w.DS)("currentStory.".concat(nr),r),ir=o()(r,ar);return v()(ir)&&v()(ur)&&"merge"===or&&(ur=D(D({},ir),ur)),m()(ir)&&m()(ur)&&"merge"===or&&(ur=null!=cr&&cr.uniqueByKey?b()([].concat(k(ir),k(ur)),cr.uniqueByKey):[].concat(k(ir),k(ur))),(0,Z.hZ)(ar,ur,r);case I.vG:return(0,Z.hZ)("currentStory.settings.".concat(t.prop),t.value,r);case I.Ck:if(t.columnId){var sr=y()(r.currentStory.sections,(function(r){return y()(r.contents,{id:t.columnId})}));return sr&&y()(sr.contents,{id:t.columnId})?(0,Z.hZ)("currentPage",D(D({},r.currentPage),{},{columns:D(D({},r.currentPage.columns),{},E({},sr.id,t.columnId))}),r):r}return(0,Z.hZ)("currentPage",D(D({},r.currentPage),{},{sectionId:t.sectionId}),r);case I.iq:var lr=t.status,dr=t.target,yr=t.selector,pr=void 0===yr?"":yr,vr=t.hideContent,fr=void 0!==vr&&vr,mr=t.path,Sr=lr?{target:dr,selector:pr,hideContent:fr,path:mr}:void 0;return(0,Z.hZ)("focusedContent",Sr,r);case I.ZW:return(0,Z.hZ)("pendingChanges",t.value,r);case I.jx:return(0,Z.hZ)("updateUrlOnScroll",t.value,r);case I.Rh:return(0,Z.hZ)("mediaEditorSettings",t.mediaEditorSettings,r);case I.HQ:if(t.sectionId){var hr=y()(r.currentStory.sections,(function(r){return y()(r.contents,{id:t.showContentId})}));return hr&&y()(hr.contents,{id:t.showContentId})?(0,Z.hZ)("currentStory",D(D({},r.currentStory),{},{sections:(0,w.zK)(r.currentStory.sections,t)}),r):r}return r;case I.DX:return(0,Z.hZ)("drawOptions",t.drawOptions,r);case I.T:return F;case j.if:var gr;return D(D({},r),{},{currentStory:D(D({},r.currentStory),{},{resources:null===(gr=r.currentStory)||void 0===gr||null===(gr=gr.resources)||void 0===gr?void 0:gr.map((function(r){return D(D({},r),{},{data:D(D({},r.data),{},{layers:r.data.layers.map((function(r){return r.security?D(D({},r),{},{security:D(D({},r.security),{},{rand:C()()})}):r}))})})}))})});case j.Lv:var br;return D(D({},r),{},{currentStory:D(D({},r.currentStory),{},{resources:null===(br=r.currentStory)||void 0===br||null===(br=br.resources)||void 0===br?void 0:br.map((function(r){return D(D({},r),{},{data:D(D({},r.data),{},{layers:r.data.layers.map((function(r){var e;return(null==r||null===(e=r.security)||void 0===e?void 0:e.sourceId)===t.protectedId?D(D({},r),{},{security:void 0}):r}))})})}))})});default:return r}}}}]);