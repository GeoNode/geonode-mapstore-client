"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[86881],{267465:(t,n,o)=>{o.d(n,{A:()=>e});const e=Object.freeze({SHIFT:0,CTRL:1,ALT:2})},86881:(t,n,o)=>{o.d(n,{A:()=>X});var e=o(288787),i=o(434067),s=o(419061),c=o(491446),r=o(677354),u=o(605971),l=o(520098),A=o(230259),p=o(267465),_=o(149785);function a(t,n,o){const e=t._element;if(e===document)return o.x=n.clientX,o.y=n.clientY,o;const i=e.getBoundingClientRect();return o.x=n.clientX-i.left,o.y=n.clientY-i.top,o}function f(t,n){let o=t;return(0,c.A)(n)&&(o+=`+${n}`),o}function d(t){return t.shiftKey?p.A.SHIFT:t.ctrlKey?p.A.CTRL:t.altKey?p.A.ALT:void 0}function h(t,n,o,e){function i(n){e(t,n)}l.A.isInternetExplorer()?o.addEventListener(n,i,!1):o.addEventListener(n,i,{capture:!1,passive:!1}),t._removalFunctions.push((function(){o.removeEventListener(n,i,!1)}))}const P={position:new i.A};function m(t){t._lastSeenTouchEvent=(0,A.A)()}function v(t){return(0,A.A)()-t._lastSeenTouchEvent>B.mouseEmulationIgnoreMilliseconds}function w(t,n,o){const e=t.x-n.x,i=t.y-n.y;return Math.sqrt(e*e+i*i)<o}function I(t,n){if(!v(t))return;const o=n.button;let e;if(t._buttonDown[o]=!0,0===o)e=_.A.LEFT_DOWN;else if(1===o)e=_.A.MIDDLE_DOWN;else{if(2!==o)return;e=_.A.RIGHT_DOWN}const s=a(t,n,t._primaryPosition);i.A.clone(s,t._primaryStartPosition),i.A.clone(s,t._primaryPreviousPosition);const r=d(n),u=t.getInputAction(e,r);(0,c.A)(u)&&(i.A.clone(s,P.position),u(P),n.preventDefault())}const E={position:new i.A},T={position:new i.A};function D(t,n,o,e){const s=d(e),r=t.getInputAction(n,s),u=t.getInputAction(o,s);if((0,c.A)(r)||(0,c.A)(u)){const n=a(t,e,t._primaryPosition);(0,c.A)(r)&&(i.A.clone(n,E.position),r(E)),(0,c.A)(u)&&w(t._primaryStartPosition,n,t._clickPixelTolerance)&&(i.A.clone(n,T.position),u(T))}}function g(t,n){if(!v(t))return;const o=n.button;0!==o&&1!==o&&2!==o||(t._buttonDown[0]&&(D(t,_.A.LEFT_UP,_.A.LEFT_CLICK,n),t._buttonDown[0]=!1),t._buttonDown[1]&&(D(t,_.A.MIDDLE_UP,_.A.MIDDLE_CLICK,n),t._buttonDown[1]=!1),t._buttonDown[2]&&(D(t,_.A.RIGHT_UP,_.A.RIGHT_CLICK,n),t._buttonDown[2]=!1))}const y={startPosition:new i.A,endPosition:new i.A};function L(t,n){if(!v(t))return;const o=d(n),e=a(t,n,t._primaryPosition),s=t._primaryPreviousPosition,r=t.getInputAction(_.A.MOUSE_MOVE,o);(0,c.A)(r)&&(i.A.clone(s,y.startPosition),i.A.clone(e,y.endPosition),r(y)),i.A.clone(e,s),(t._buttonDown[0]||t._buttonDown[1]||t._buttonDown[2])&&n.preventDefault()}const H={position:new i.A};function C(t,n){let o;if(0!==n.button)return;o=_.A.LEFT_DOUBLE_CLICK;const e=d(n),i=t.getInputAction(o,e);(0,c.A)(i)&&(a(t,n,H.position),i(H))}function M(t,n){let o;if((0,c.A)(n.deltaY)){const t=n.deltaMode;o=t===n.DOM_DELTA_PIXEL?-n.deltaY:t===n.DOM_DELTA_LINE?40*-n.deltaY:120*-n.deltaY}else o=n.detail>0?-120*n.detail:n.wheelDelta;if(!(0,c.A)(o))return;const e=d(n),i=t.getInputAction(_.A.WHEEL,e);(0,c.A)(i)&&(i(o),n.preventDefault())}function b(t,n){m(t);const o=n.changedTouches;let e;const s=o.length;let c,r;const u=t._positions;for(e=0;e<s;++e)c=o[e],r=c.identifier,u.set(r,a(t,c,new i.A));K(t,n);const l=t._previousPositions;for(e=0;e<s;++e)c=o[e],r=c.identifier,l.set(r,i.A.clone(u.get(r)))}function O(t,n){m(t);const o=n.changedTouches;let e;const i=o.length;let s,c;const r=t._positions;for(e=0;e<i;++e)s=o[e],c=s.identifier,r.remove(c);K(t,n);const u=t._previousPositions;for(e=0;e<i;++e)s=o[e],c=s.identifier,u.remove(c)}const F={position:new i.A},S={position1:new i.A,position2:new i.A},N={position:new i.A},x={position:new i.A},R={position:new i.A};function K(t,n){const o=d(n),e=t._positions,s=e.length;let r,u;const l=t._isPinching;if(1!==s&&t._buttonDown[0]&&(t._buttonDown[0]=!1,(0,c.A)(t._touchHoldTimer)&&(clearTimeout(t._touchHoldTimer),t._touchHoldTimer=void 0),r=t.getInputAction(_.A.LEFT_UP,o),(0,c.A)(r)&&(i.A.clone(t._primaryPosition,N.position),r(N)),0===s&&!t._isTouchHolding&&(u=t.getInputAction(_.A.LEFT_CLICK,o),(0,c.A)(u))&&w(t._primaryStartPosition,t._previousPositions.values[0],t._clickPixelTolerance)&&(i.A.clone(t._primaryPosition,x.position),u(x)),t._isTouchHolding=!1),0===s&&l&&(t._isPinching=!1,r=t.getInputAction(_.A.PINCH_END,o),(0,c.A)(r)&&r()),1===s&&!l){const s=e.values[0];i.A.clone(s,t._primaryPosition),i.A.clone(s,t._primaryStartPosition),i.A.clone(s,t._primaryPreviousPosition),t._buttonDown[0]=!0,r=t.getInputAction(_.A.LEFT_DOWN,o),(0,c.A)(r)&&(i.A.clone(s,F.position),r(F)),t._touchHoldTimer=setTimeout((function(){!t.isDestroyed()&&(t._touchHoldTimer=void 0,t._isTouchHolding=!0,u=t.getInputAction(_.A.RIGHT_CLICK,o),(0,c.A)(u))&&w(t._primaryStartPosition,t._previousPositions.values[0],t._holdPixelTolerance)&&(i.A.clone(t._primaryPosition,R.position),u(R))}),B.touchHoldDelayMilliseconds),n.preventDefault()}2!==s||l||(t._isPinching=!0,r=t.getInputAction(_.A.PINCH_START,o),(0,c.A)(r)&&(i.A.clone(e.values[0],S.position1),i.A.clone(e.values[1],S.position2),r(S),n.preventDefault()))}function U(t,n){m(t);const o=n.changedTouches;let e;const s=o.length;let r,u;const l=t._positions;for(e=0;e<s;++e){r=o[e],u=r.identifier;const n=l.get(u);(0,c.A)(n)&&a(t,r,n)}G(t,n);const A=t._previousPositions;for(e=0;e<s;++e)r=o[e],u=r.identifier,i.A.clone(l.get(u),A.get(u))}const W={startPosition:new i.A,endPosition:new i.A},k={distance:{startPosition:new i.A,endPosition:new i.A},angleAndHeight:{startPosition:new i.A,endPosition:new i.A}};function G(t,n){const o=d(n),e=t._positions,s=t._previousPositions,r=e.length;let u;if(1===r&&t._buttonDown[0]){const s=e.values[0];i.A.clone(s,t._primaryPosition);const r=t._primaryPreviousPosition;u=t.getInputAction(_.A.MOUSE_MOVE,o),(0,c.A)(u)&&(i.A.clone(r,W.startPosition),i.A.clone(s,W.endPosition),u(W)),i.A.clone(s,r),n.preventDefault()}else if(2===r&&t._isPinching&&(u=t.getInputAction(_.A.PINCH_MOVE,o),(0,c.A)(u))){const t=e.values[0],n=e.values[1],o=s.values[0],c=s.values[1],r=n.x-t.x,l=n.y-t.y,A=.25*Math.sqrt(r*r+l*l),p=c.x-o.x,_=c.y-o.y,a=.25*Math.sqrt(p*p+_*_),f=.125*(n.y+t.y),d=.125*(c.y+o.y),h=Math.atan2(l,r),P=Math.atan2(_,p);i.A.fromElements(0,a,k.distance.startPosition),i.A.fromElements(0,A,k.distance.endPosition),i.A.fromElements(P,d,k.angleAndHeight.startPosition),i.A.fromElements(h,f,k.angleAndHeight.endPosition),u(k)}}function q(t,n){if(n.target.setPointerCapture(n.pointerId),"touch"===n.pointerType){const o=t._positions,e=n.pointerId;o.set(e,a(t,n,new i.A)),K(t,n),t._previousPositions.set(e,i.A.clone(o.get(e)))}else I(t,n)}function Y(t,n){if("touch"===n.pointerType){const o=t._positions,e=n.pointerId;o.remove(e),K(t,n),t._previousPositions.remove(e)}else g(t,n)}function V(t,n){if("touch"===n.pointerType){const o=t._positions,e=n.pointerId,s=o.get(e);if(!(0,c.A)(s))return;a(t,n,s),G(t,n);const r=t._previousPositions;i.A.clone(o.get(e),r.get(e))}else L(t,n)}function B(t){this._inputEvents={},this._buttonDown={LEFT:!1,MIDDLE:!1,RIGHT:!1},this._isPinching=!1,this._isTouchHolding=!1,this._lastSeenTouchEvent=-B.mouseEmulationIgnoreMilliseconds,this._primaryStartPosition=new i.A,this._primaryPosition=new i.A,this._primaryPreviousPosition=new i.A,this._positions=new e.A,this._previousPositions=new e.A,this._removalFunctions=[],this._touchHoldTimer=void 0,this._clickPixelTolerance=5,this._holdPixelTolerance=25,this._element=(0,s.A)(t,document),function(t){const n=t._element,o=(0,c.A)(n.disableRootEvents)?n:document;let e;l.A.supportsPointerEvents()?(h(t,"pointerdown",n,q),h(t,"pointerup",n,Y),h(t,"pointermove",n,V),h(t,"pointercancel",n,Y)):(h(t,"mousedown",n,I),h(t,"mouseup",o,g),h(t,"mousemove",o,L),h(t,"touchstart",n,b),h(t,"touchend",o,O),h(t,"touchmove",o,U),h(t,"touchcancel",o,O)),h(t,"dblclick",n,C),e="onwheel"in n?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",h(t,e,n,M)}(this)}B.prototype.setInputAction=function(t,n,o){if(!(0,c.A)(t))throw new u.A("action is required.");if(!(0,c.A)(n))throw new u.A("type is required.");const e=f(n,o);this._inputEvents[e]=t},B.prototype.getInputAction=function(t,n){if(!(0,c.A)(t))throw new u.A("type is required.");const o=f(t,n);return this._inputEvents[o]},B.prototype.removeInputAction=function(t,n){if(!(0,c.A)(t))throw new u.A("type is required.");const o=f(t,n);delete this._inputEvents[o]},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){return function(t){const n=t._removalFunctions;for(let t=0;t<n.length;++t)n[t]()}(this),(0,r.A)(this)},B.mouseEmulationIgnoreMilliseconds=800,B.touchHoldDelayMilliseconds=1500;const X=B},149785:(t,n,o)=>{o.d(n,{A:()=>e});const e=Object.freeze({LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19})},230259:(t,n,o)=>{let e;o.d(n,{A:()=>i}),e="undefined"!=typeof performance&&"function"==typeof performance.now&&isFinite(performance.now())?function(){return performance.now()}:function(){return Date.now()};const i=e}}]);