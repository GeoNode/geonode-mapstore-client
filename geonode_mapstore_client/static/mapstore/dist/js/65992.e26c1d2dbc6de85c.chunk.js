"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[65992],{154150:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(273517),a=r.n(n);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(e){var t=e.id,r=e.children,n=e.header,l=e.footer,o=e.columns,s=e.height,c=e.style,u=void 0===c?{}:c,y=e.className,f=e.bodyClassName,d=void 0===f?"ms2-border-layout-body":f;return a().createElement("div",{id:t,className:y,style:i({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},u)},n,a().createElement("div",{className:d,style:{display:"flex",flex:1,overflowY:"auto"}},a().createElement("main",{className:"ms2-border-layout-content",style:{flex:1,overflowX:"hidden"}},s?a().createElement("div",{style:{height:s}},r):r),s?a().createElement("div",{style:{height:s}},o):o),l)}},672975:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(273517),a=r.n(n);const l=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{display:"inline-block"}:e;return a().createElement("div",{style:t,className:"mapstore-inline-loader"})}},229710:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(273517),a=r.n(n),l=r(32485),o=r.n(l),i=r(8117),s=r(711520),c=r(256951),u=r(916589),y=r(391456),f=r.n(y),d=r(672975),m={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},b={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const v=(0,u.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,r=void 0!==t&&t,n=e.loading,l=e.loadingText,u=e.onClose,y=void 0===u?function(){}:u,v=e.title,p=void 0===v?"":v,g=e.clickOutEnabled,S=void 0===g||g,h=e.showClose,O=void 0===h||h,w=e.disabledClose,E=void 0!==w&&w,N=e.showFullscreen,j=void 0!==N&&N,T=e.fullscreenType,A=void 0===T?"full":T,k=e.buttons,P=void 0===k?[]:k,x=e.size,D=void 0===x?"":x,U=e.bodyClassName,M=void 0===U?"":U,z=e.children,I=e.draggable,C=void 0!==I&&I,V=e.fullscreenState,F=e.onFullscreen,L=e.fade,Q=void 0!==L&&L,$=e.fitContent,_=e.modalClassName,W=void 0===_?"":_,R=e.dialogClassName,G=void 0===R?"":R,K=e.enableFooter,H=void 0===K||K,J=m[D]||"",Y=j&&"expanded"===V&&b.className[A]||"",X=r?a().createElement("div",{className:"modal-fixed ".concat(W," ")+(C?"ms-draggable":"")},a().createElement(s.A,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:S?y:function(){},containerClassName:"ms-resizable-modal",draggable:C,modal:!0,className:o()("modal-dialog modal-content",J,Y,G,{"ms-fit-content":$})},a().createElement("span",{role:"header"},a().createElement("h4",{className:"modal-title"},a().createElement("div",{className:"ms-title"},p),j&&b.className[A]&&a().createElement(i.e6,{className:"ms-header-btn",onClick:function(){return F("expanded"===V?"collapsed":"expanded")},glyph:b.glyph[V][A]}),O&&y&&a().createElement(i.e6,{glyph:"1-close",className:"ms-header-btn",onClick:y,disabled:E}))),a().createElement("div",{role:"body",className:M},z),H&&a().createElement("div",{style:{display:"flex"},role:"footer"},a().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},n?a().createElement(d.A,null):null),a().createElement("div",{className:"ms-resizable-modal-loading-text"},n?l:null),a().createElement(c.A,{buttons:P})))):null;return Q?a().createElement(f(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},X):X}))},549111:(e,t,r)=>{r.d(t,{Ay:()=>ne});var n=r(45388),a=r.n(n),l=r(858156),o=r.n(l),i=r(400912),s=r.n(i),c=r(956449),u=r.n(c),y=r(730872),f=r.n(y),d=r(950014),m=r.n(d),b=r(883832),v=r(904059),p=r(593429),g=r(653077),S=r(434164),h=r(112585),O=r(142974),w=r(972192),E=r(403467),N=r(995531),j=r(499084),T=r.n(j),A=r(714905);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function P(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return(t=function(e){var t=function(e){if("object"!=k(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const z=function(e,t,r){var n=e+"layers/"+t+".json";return N.A.get(n,r).then((function(e){return e.data&&e.data.layer}))},I=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,a=void 0===n?[]:n,l=e.options,o=void 0===l?{}:l,i=(0,A.ke)(r),s=i.name,c=i.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(s,".json");return N.A.get(u,o).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[],n=a.map((function(e){return e.name})),l=r.filter((function(e){var t=e.name;return-1===n.indexOf(t)}));return{layer:U(U({},t),{},{styles:{"@class":"linked-hash-set",style:l}})}})).then((function(e){return N.A.put(u,e).then((function(){return e}))}))},C=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,a=void 0===n?[]:n,l=e.options,o=void 0===l?{}:l,i=(0,A.ke)(r),s=i.name,c=i.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(s,".json");return N.A.get(u,o).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[];return{layer:U(U({},t),{},{styles:{"@class":"linked-hash-set",style:[].concat(P(r),P(a))}})}})).then((function(e){return N.A.put(u,e).then((function(){return e}))}))},V=function(e){var t=e.baseUrl,r=e.layerName,n=e.styleName,a=e.options,l=void 0===a?{}:a,o=(0,A.ke)(r),i=o.name,s=o.workspace,c="".concat(t,"rest/").concat(s&&"workspaces/".concat(s,"/")||"","layers/").concat(i,".json");return N.A.get(c,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[],a=t.defaultStyle||{},l=m()([a].concat(P(r)),"name");return{layer:U(U({},t),{},{defaultStyle:{name:n},styles:{"@class":"linked-hash-set",style:l}})}})).then((function(e){return N.A.put(c,e).then((function(){return e}))}))};var F=r(348081),L=r(307679),Q=r(267919),$=r(79738),_=r(629057);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}var R=["name","workspace"];function G(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return(t=function(e){var t=function(e){if("object"!=W(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==W(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,i=[],s=!0,c=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,t)||X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){if(e){if("string"==typeof e)return Z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var B=function(e){var t=e.status,r=e.styleName,n=e.baseUrl;return"edit"===t?a().Observable.defer((function(){return E.Ay.getStyleCodeByName({baseUrl:n,styleName:r}).then((function(e){return(0,A.z4)(e).then((function(t){return[e,t]})).catch((function(){return[e,!1]}))}))})).switchMap((function(e){var t,r,n=Y(e,2),l=n[0],o=n[1];return a().Observable.of((0,w.EB)({languageVersion:l.languageVersion,code:l.code,templateId:"",format:l.format,init:!0}),(0,w.SI)(o?{editorType:"textarea",styleJSON:null}:{editorType:(null==l||null===(t=l.metadata)||void 0===t?void 0:t.msEditorType)||"textarea",styleJSON:null==l||null===(r=l.metadata)||void 0===r?void 0:r.msStyleJSON}))})).catch((function(e){return a().Observable.of((0,w.QQ)("edit",e))})):a().Observable.empty()},q=function(e){var t=e.styleName,r=e.baseUrl,n=e.onSuccess$,l=e.onError$;return a().Observable.defer((function(){return E.Ay.deleteStyle({baseUrl:r,styleName:t})})).switchMap((function(){return n||a().Observable.empty()})).catch((function(){return l||a().Observable.empty()}))},ee=function(e){var t=e.baseUrl,r=e.update,n=e.code,l=e.format,o=e.styleName,i=e.status,s=e.languageVersion,c=e.options,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a().Observable.defer((function(){return E.Ay[r?"updateStyle":"createStyle"]({baseUrl:t,code:n,format:l,styleName:o,languageVersion:s,options:c})})).switchMap((function(){var e;return u()(y)&&(e=a().Observable).of.apply(e,[(0,w.xe)()].concat(G(y)))||y})).catch((function(e){var t;return(t=a().Observable).of.apply(t,[(0,w.QQ)(i,e),(0,w.xe)()].concat(G(f)))})).startWith((0,w.Sk)(i))};function te(e,t){return!t&&e.availableStyles?a().Observable.of((0,v.b6)({availableStyles:e.availableStyles}),(0,w.xe)()):(0,S.aF)(e).switchMap((function(t){var r=(0,O.e9)(t);return r.availableStyles?a().Observable.of((0,v.b6)({availableStyles:r.availableStyles}),(0,v.OK)(e.id,"layer",H(H({},r),{},{capabilitiesLoading:null})),(0,w.xe)()):a().Observable.of((0,w.QQ)("availableStyles",{status:401}),(0,w.xe)())})).catch((function(e){var t=-1!==e.message.indexOf("could not be unmarshalled")?"parsingCapabilities":"global";return a().Observable.of((0,w.QQ)(t,e),(0,w.xe)())})).startWith((0,w.Sk)("global"))}function re(e){return r.e(83503).then(r.t.bind(r,883503,23)).then((function(t){return(0,t.default)(e)}))}const ne={toggleStyleEditorEpic:function(e,t){return e.ofType(w.PD).filter((function(){return!(0,F.tg)(t.getState())})).switchMap((function(e){var r=t.getState(),n=(0,L.jY)(r),l=!!o()(n,"options.availableStyles");if(!e.enabled)return function(e){var t=(0,F.sD)(e),r=(0,F.gr)(e).baseUrl,n=void 0===r?"":r;return a().Observable.of((0,w.A9)(),(0,p.v9)({owner:A.gt})).merge(t?q({styleName:t,baseUrl:n}):a().Observable.empty())}(r);if((0,F.p$)(r)&&l)return a().Observable.empty();var i=e.layer||(0,L.ZT)(r);if(!i||i&&!i.url)return a().Observable.empty();var s=(0,h.jK)(i);if(!s)return te(i);var c=(0,$.t)(i.url).split(s),u="".concat(c[0]).concat(s),y=(0,F.gr)(r);return a().Observable.concat(a().Observable.of((0,w.Sk)("global"),(0,w.A9)()),a().Observable.defer((function(){return(0,Q.YH)({baseUrl:u,styleService:y})})).switchMap((function(e){return a().Observable.concat(a().Observable.of((0,w.bM)(e)),a().Observable.defer((function(){return z(u+"rest/",i.name)})).switchMap((function(e){var t,r=(null==e||null===(t=e.styles)||void 0===t?void 0:t.style)||[],n=m()([e.defaultStyle].concat(G(r)),"name");return 0===n.length?a().Observable.of((0,w.QQ)("availableStyles",{status:401}),(0,w.xe)()):a().Observable.defer((function(){return Promise.all([E.Ay.getStylesInfo({baseUrl:u,styles:n}),(0,S.aF)(i).toPromise().then((function(e){return e})).catch((function(){return null}))])})).switchMap((function(e){var t=Y(e,2),r=t[0],n=t[1],l=n&&(0,O.e9)(n),o=((null==l?void 0:l.availableStyles)||[]).map((function(e){return H(H({},e),(0,A.ke)(e.name))})).filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name})),s=o.length>0?r.map((function(e){var t=(0,A.ke)(e.name),r=o.find((function(e){return e.name===t.name}))||{},n=(r.name,r.workspace,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(r,R));return n?H(H({},n),e):e})):r;return a().Observable.of((0,p.E)(i.id,A.gt,"override",{}),(0,v.b6)({availableStyles:s}),(0,v.OK)(i.id,"layer",{availableStyles:s}),(0,w.xe)())}))})).catch((function(){return te(i,!0)})))})))}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(w.t5).switchMap((function(r){var n=t.getState(),l=(0,F.Nh)(n);if(!r.status)return a().Observable.of((0,v.OK)(l.id,"layers",{thematic:{}}));var o=l&&l.params||{},i=l&&!l.describeFeatureType&&(0,g.V)(l.url,l,{query:o}),s=(0,F.mA)(n)||l.availableStyles&&l.availableStyles[0]&&l.availableStyles[0].name,c=(0,F.gr)(n).baseUrl,u=void 0===c?"":c;return i&&function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=a().Observable).of.apply(r,[(0,w.Sk)("global")].concat(G(l))).merge(e.ofType(v.rN).filter((function(){var e=(0,L.ZT)(t.getState());return n(e)})).switchMap((function(){var e=(0,L.ZT)(t.getState());return o(e)})).catch((function(e){return a().Observable.of((0,w.QQ)("global",e),(0,w.xe)())})).takeUntil(e.ofType(w.i7)))}(e,t,(function(e){return e&&e.describeLayer}),[i],(function(e){return a().Observable.concat(B({status:r.status,styleName:s,baseUrl:u}),a().Observable.of((0,w.AT)(!(e&&e.describeLayer&&401===e.describeLayer.error)),(0,w.xe)()))}))||B({status:r.status,styleName:s,baseUrl:u})}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(w._D,w.h0).switchMap((function(e){var r=t.getState(),n=(0,F.sD)(r),a=(0,F.Nh)(r),l=(0,A.ke)(a.name).workspace,o=e.format&&e.format!==(0,F.WV)(r),i=n||"".concat(l?"".concat(l,":"):"").concat((0,A.VH)()),s=e.format||(0,F.WV)(r),c=(0,F.Pz)(r),u=(0,F.gr)(r).baseUrl,y=void 0===u?"":u,f=(0,F.$o)(r),d="sld"===s&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},m=f.version!==d.version?{params:{raw:!0}}:{},v=d,g=function(t){return ee({update:!0,code:e.code,format:s,styleName:t,status:c,baseUrl:y,languageVersion:v,options:m},[(0,p.y$)(A.gt,[{style:t,_v_:Date.now(),singleTile:!0}]),(0,w.kt)({temporaryId:t,templateId:e.templateId||"",code:e.code,format:s,init:e.init,languageVersion:v})],"edit"===c?[]:[(0,b.z3)({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},S=("css"===s?"* { stroke: #888888; }":"sld"===s&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",h=function(e){return ee({code:S,format:s,styleName:e,status:c,baseUrl:y},g(e),[(0,b.z3)({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),(0,w.kt)({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return o&&n&&q({styleName:n,baseUrl:y,onSuccess$:h("".concat(l?"".concat(l,":"):"").concat((0,A.VH)())),onError$:g(i)})||n&&g(i)||h(i)}))},createStyleEpic:function(e,t){return e.ofType(w.LA).switchMap((function(e){var r=t.getState(),n=(0,F.Ux)(r),l=(0,F.Nh)(r),o=(0,A.ke)(l.name).workspace,i="".concat(o?"".concat(o,":"):"").concat((0,A.Ob)(e.settings)),c=(0,F.WV)(r),u=e.settings||{},y=u.title,d=void 0===y?"":y,m=u._abstract,g=void 0===m?"":m,S=(0,F.gr)(r).baseUrl,h=void 0===S?"":S,O=(0,_.resetLayerLegendFilter)(l,"style",i),N=H({title:d,description:g},{msStyleJSON:null,msEditorType:"visual"}),j=f()(n)({styleTitle:d,styleAbstract:g});return a().Observable.defer((function(){return re(j).then((function(e){return E.Ay.createStyle({baseUrl:h,code:j,format:c,styleName:i,metadata:H(H({},N),{},{msMD5Hash:e})})}))})).switchMap((function(){return a().Observable.of((0,p.y$)(A.gt,[{}]),(0,v.b6)(H(H({},O&&{layerFilter:O}),{},{style:i||""}),!0),(0,w.yB)(""),(0,w.xe)()).merge(function(e){var t=e.baseUrl,r=e.layer,n=e.styleName,l=e.format,o=e.title,i=e._abstract,c=e.metadata;return a().Observable.defer((function(){return C({baseUrl:t,layerName:r.name,styles:[{name:n}]})})).switchMap((function(){var e=H({filename:"".concat(n,".").concat(l),format:l,name:n,title:o,_abstract:i},c&&{metadata:c}),t=s()(r.availableStyles),u=r.availableStyles&&[t,e].concat(G(r.availableStyles.filter((function(e,t){return t>0}))))||[e];return a().Observable.of((0,v.b6)({availableStyles:u},!0),(0,w.xe)())})).catch((function(){return a().Observable.of((0,w.xe)())})).startWith((0,w.Sk)("global"))}({layer:l,styleName:i,format:c,title:d,_abstract:g,baseUrl:h,metadata:N}))})).catch((function(e){return a().Observable.of((0,w.QQ)("",e),(0,w.xe)(),(0,b.z3)({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))})).startWith((0,w.Sk)(""))}))},updateStyleCodeEpic:function(e,t){return e.ofType(w.I4).switchMap((function(){var e=t.getState(),r=(0,F.WV)(e),n=(0,F.$o)(e),l=(0,F.Ux)(e),o=(0,F.mA)(e),i=(0,F.sD)(e),s=(0,F.Nh)(e),c=(0,F.gr)(e).baseUrl,u=void 0===c?"":c,y=(0,F.w5)(e)||{},f={msStyleJSON:y.styleJSON||null,msEditorType:y.editorType},d=(s.availableStyles||[]).map((function(e){return e.name===o?H(H({},e),{},{metadata:H(H({},e.metadata),f)}):e}));return a().Observable.defer((function(){return re(l).then((function(e){return E.Ay.updateStyle({baseUrl:u,code:l,format:r,styleName:o,languageVersion:n,options:{params:{raw:!0}},metadata:H(H({},f),{},{msMD5Hash:e})})}))})).switchMap((function(){return a().Observable.of((0,w.xe)(),(0,v.OK)(s.id,"layer",{_v_:Date.now(),availableStyles:d,styleVersion:"".concat(o,"-").concat(Date.now())}),(0,v.b6)({availableStyles:d}),(0,w.kt)({temporaryId:i,templateId:"",code:l,format:r,init:!0,languageVersion:n}),(0,b.kX)({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))})).catch((function(e){return a().Observable.of((0,w.QQ)("global",e),(0,w.xe)(),(0,b.z3)({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))})).startWith((0,w.Sk)("global"))}))},deleteStyleEpic:function(e,t){return e.ofType(w.Y1).filter((function(e){return!!e.styleName})).switchMap((function(e){var r=e.styleName,n=t.getState(),l=(0,F.Nh)(n),o=(0,F.gr)(n).baseUrl,i=void 0===o?"":o;return a().Observable.defer((function(){return I({baseUrl:i,layerName:l.name,styles:[{name:r}]})})).switchMap((function(){var e=l.availableStyles&&l.availableStyles.filter((function(e){return e.name!==r}))||[];return a().Observable.concat(a().Observable.of((0,v.b6)({style:"",availableStyles:e},!0),(0,w.xe)()),q({styleName:r,baseUrl:i,onSuccess$:a().Observable.of((0,b.kX)({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:a().Observable.of((0,b.z3)({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return a().Observable.of((0,w.xe)())})).startWith((function(){return a().Observable.of((0,w.Sk)("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(w.zA).switchMap((function(){var e=t.getState(),r=(0,F.gr)(e).baseUrl,n=void 0===r?"":r,l=(0,F.Nh)(e),o=(0,F.mA)(e);return a().Observable.defer((function(){return V({baseUrl:n,layerName:l.name,styleName:o})})).switchMap((function(){var e=l.availableStyles.filter((function(e){var t=e.name;return o===t})),t=l.availableStyles.filter((function(e){var t=e.name;return o!==t})),r=[].concat(G(e),G(t));return a().Observable.of((0,v.b6)({availableStyles:r},!0),(0,b.kX)({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),(0,w.xe)())})).startWith((0,w.Sk)("global")).catch((function(){return a().Observable.of((0,b.z3)({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),(0,w.xe)())}))}))}}},620864:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(972192),a=r(185015),l=r.n(a);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LH:var r,a;return s(s({},e),{},{service:t.service,editingAllowedRoles:(null==t||null===(r=t.permissions)||void 0===r?void 0:r.editingAllowedRoles)||e.editingAllowedRoles,editingAllowedGroups:(null==t||null===(a=t.permissions)||void 0===a?void 0:a.editingAllowedGroups)||e.editingAllowedGroups});case n.Gf:return s(s({},e),{},{canEdit:t.canEdit});case n.GF:return s(s({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case n.t5:return""===t.status?s(s({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):s(s({},e),{},{status:t.status});case n.u1:return{service:e.service&&s({},e.service)||{},canEdit:e.canEdit,loading:e.loading};case n.YE:return s(s({},e),{},{addStyle:t.add});case n.Z_:return s(s({},e),{},{loading:!t.status||t.status});case n.i7:return s(s({},e),{},{loading:!1,enabled:!0});case n.Lu:var o,i,u,y=(null==t||null===(o=t.error)||void 0===o?void 0:o.statusText)||(null==t||null===(i=t.error)||void 0===i?void 0:i.message)||"",f=l()(null==t||null===(u=t.error)||void 0===u?void 0:u.messageId)&&{messageId:t.error.messageId},d=y.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),m=d&&2===d.length&&d.reduce((function(e,t){var r=t.split(" "),n=r[0].replace(/Number:/g,""),a=parseFloat(r[1]);return n&&!isNaN(a)&&s(s({},e),{},c({},n,a))||s({},e)}),s({message:y},f))||s({message:y},f);return s(s({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status||t.error.message&&-1!==t.error.message.indexOf("could not be unmarshalled"))),error:s(s({},e.error),{},c({},t.status||"global",s({status:t.error&&t.error.status||400},m)))});case n.Yx:return s(s({},e),{},{metadata:s(s({},e.metadata),t.metadata)});default:return e}}}}]);