(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[95021,47310],{690825:(e,t,r)=>{"use strict";r.d(t,{H:()=>_,k:()=>T});var n=r(580416),o=r(501157),i=r(577215),a=r(432420),l=r(375875),u=r.n(l),s=r(472500),c=r.n(s),p=r(727418),f=r.n(p),d=r(505055),y=r.n(d);const m={describeCoverage:function(e,t){var r=c().parse(e,!0),n=c().format(f()({},r,{query:f()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return u().get(n).then((function(e){var t;return y().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))}};var b=r(624262),g=r(227361),E=r.n(g),v=r(838848);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==F(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return function(i){return o.ZP.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?a.v$(e,r.name).then((function(e){return r.geometryType=(0,v.mI)(e),i((0,n.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&m.describeCoverage(e,r.name).then((function(e){var o=E()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map((function(e,t){return t+1+""})),i((0,n.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return i((0,n.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function T(e){var t=(0,b.Fh)(e);return function(r){return r((0,n.tV)(e.id,"id",{capabilitiesLoading:!0})),o.ZP.getCapabilities(t).then((function(t){var a=o.ZP.parseLayerCapabilities(t,e);r(a?(0,n.tV)(e.id,"id",h(h({},(0,i.Br)(a)),{},{capabilitiesLoading:null})):(0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){r((0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},807878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>a,vo:()=>l,l1:()=>u,J9:()=>s,U:()=>c,z8:()=>p,ql:()=>f,O_:()=>d,M$:()=>y,Ug:()=>m,p5:()=>b,Fz:()=>g,WZ:()=>E,bP:()=>v,On:()=>F,d_:()=>O,xM:()=>h,bl:()=>_,Wi:()=>T,PN:()=>R,_M:()=>w,Wm:()=>S,Eg:()=>L,V1:()=>I,cY:()=>P,RD:()=>A,Hl:()=>j,co:()=>N,uY:()=>C,H8:()=>D,je:()=>U,go:()=>M,_8:()=>x,xd:()=>G,o7:()=>Y,Nr:()=>k,Gf:()=>V,nh:()=>q,Rf:()=>Q,Xp:()=>H,D6:()=>W,Sm:()=>Z,Ef:()=>z,qu:()=>B,LY:()=>$,ZC:()=>X,c1:()=>J,jW:()=>K,kQ:()=>ee,JG:()=>te,js:()=>re,q$:()=>ne,OZ:()=>oe,Nc:()=>ie,NV:()=>ae,I5:()=>le,QL:()=>ue,I:()=>se,ku:()=>ce,EU:()=>pe,IV:()=>fe,HT:()=>de,lg:()=>ye,ds:()=>me,VF:()=>be,DD:()=>ge,uo:()=>Ee,Ry:()=>ve,ZH:()=>Fe,AQ:()=>Oe,yC:()=>he,F:()=>_e,mc:()=>Te,uM:()=>we,eJ:()=>Se,uP:()=>Le,N5:()=>Ie,bn:()=>Pe,Bm:()=>Ae,F2:()=>je,jR:()=>Ne,$J:()=>Ce,ln:()=>De});var n=r(375875),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var a="ADD_FILTER_FIELD",l="REMOVE_FILTER_FIELD",u="UPDATE_FILTER_FIELD",s="UPDATE_EXCEPTION_FIELD",c="ADD_GROUP_FIELD",p="UPDATE_LOGIC_COMBO",f="REMOVE_GROUP_FIELD",d="CHANGE_CASCADING_VALUE",y="EXPAND_ATTRIBUTE_PANEL",m="EXPAND_SPATIAL_PANEL",b="QUERYFORM:EXPAND_CROSS_LAYER",g="QUERYFORM:SET_CROSS_LAYER_PARAMETER",E="QUERYFORM:RESET_CROSS_LAYER_FILTER",v="SELECT_SPATIAL_METHOD",F="SELECT_VIEWPORT_SPATIAL_METHOD",O="UPDATE_GEOMETRY",h="SELECT_SPATIAL_OPERATION",_="CHANGE_SPATIAL_ATTRIBUTE",T="CHANGE_SPATIAL_FILTER_VALUE",R="REMOVE_SPATIAL_SELECT",w="SHOW_SPATIAL_DETAILS",S="QUERY_FORM_SEARCH",L="QUERY_FORM_RESET",I="SHOW_GENERATED_FILTER",P="CHANGE_DWITHIN_VALUE",A="ZONE_SEARCH",j="ZONE_SEARCH_ERROR",N="ZONE_FILTER",C="ZONE_CHANGE",D="ZONES_RESET",U="SIMPLE_FILTER_FIELD_UPDATE",M="ADD_SIMPLE_FILTER_FIELD",x="REMOVE_SIMPLE_FILTER_FIELD",G="REMOVE_ALL_SIMPLE_FILTER_FIELDS",Y="UPDATE_FILTER_FIELD_OPTIONS",k="LOADING_FILTER_FIELD_OPTIONS",V="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",q="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",Q="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",H="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD_OPTIONS",W="SET_AUTOCOMPLETE_MODE",Z="TOGGLE_AUTOCOMPLETE_MENU",z="QUERYFORM:LOAD_FILTER",B="QUERYFORM:UPSERT_FILTERS",$="QUERYFORM:REMOVE_FILTERS",X="QUERYFORM:CHANGE_MAP_EDITOR",J=function(e){return{type:X,mapData:e}};function K(e){return{type:a,groupId:e}}function ee(e,t){return{type:c,groupId:e,index:t}}function te(e){return{type:l,rowId:e}}function re(e,t){return{type:Z,rowId:e,status:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function ne(e,t,r,n){return{type:u,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function oe(e,t){return{type:s,rowId:e,exceptionMessage:t}}function ie(e,t){return{type:p,groupId:e,logic:t}}function ae(e){return{type:W,status:e}}function le(e){return{type:f,groupId:e}}function ue(e){return{type:d,attributes:e}}function se(e){return{type:y,expand:e}}function ce(e){return{type:m,expand:e}}function pe(e){return{type:b,expand:e}}function fe(e,t){return{type:g,key:e,value:t}}function de(e,t){return{type:v,fieldName:t,method:e}}function ye(){return{type:F}}function me(e){return{type:O,geometry:e}}function be(e,t){return{type:h,fieldName:t,operation:e}}function ge(e){return{type:_,attribute:e}}function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:T,value:a,collectGeometries:n,options:i,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function ve(){return{type:R}}function Fe(e){return{type:w,show:e}}function Oe(e){return{type:P,distance:e}}function he(e,t){return{type:S,searchUrl:e,filterObj:t}}function _e(e){return{type:z,filter:e}}function Te(e){return{type:L,skip:e}}function Re(e,t){return{type:j,error:e,id:t}}function we(e,t){return{type:A,active:e,id:t}}function Se(e,t,r){return function(n){return o().post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(o){var a=o.data;if("object"!==i(a))try{a=JSON.parse(a)}catch(o){n(Re("Search result broken ("+e+":   "+t+"): "+o.message,r))}n(function(e,t){return{type:N,data:e,id:t}}(a,r)),n(we(!1,r))})).catch((function(e){n(Re(e,r))}))}}function Le(e,t){return{type:C,id:e,value:t}}function Ie(e){return{type:V,rowId:(new Date).getTime(),groupId:e}}function Pe(e,t,r,n){return{type:q,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function Ae(e){return{type:Q,rowId:e}}function je(){return{type:E}}function Ne(e,t){return{type:k,status:e,filterField:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function Ce(e,t,r){return{type:Y,filterField:e,options:t,valuesCount:r}}function De(e,t,r){return{type:H,filterField:e,options:t,valuesCount:r}}},95797:(e,t,r)=>{"use strict";r.d(t,{DR:()=>n,S0:()=>o,u7:()=>i,lj:()=>a,yz:()=>l,lN:()=>u,zW:()=>s,Yx:()=>c,VN:()=>p,Hu:()=>f,VT:()=>d,RD:()=>y,Qq:()=>m,R1:()=>b,_T:()=>g,vO:()=>E,XO:()=>v,jG:()=>F,Xc:()=>O,gT:()=>h,rG:()=>_,t3:()=>T,Fs:()=>R,w_:()=>w,Lm:()=>S,rh:()=>L,rP:()=>I,IO:()=>P}),r(375875);var n="LAYER_SELECTED_FOR_SEARCH",o="FEATURE_TYPE_SELECTED",i="FEATURE_TYPE_LOADED",a="FEATURE_LOADED",l="FEATURE_LOADING",u="FEATURE_TYPE_ERROR",s="FEATURE_ERROR",c="QUERY_CREATE",p="QUERY:UPDATE_QUERY",f="QUERY_RESULT",d="QUERY_ERROR",y="RESET_QUERY",m="QUERY",b="INIT_QUERY_PANEL",g="QUERY:TOGGLE_SYNC_WMS",E="QUERY:TOGGLE_LAYER_FILTER";function v(){return{type:g}}function F(){return{type:E}}function O(){return{type:b}}function h(e,t){return{type:o,url:e,typeName:t,fields:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],owner:arguments.length>3?arguments[3]:void 0}}function _(e,t,r){return{type:i,typeName:e,featureType:t,owner:r}}function T(e,t){return{type:u,typeName:e,error:t}}function R(e){return{type:l,isLoading:e}}function w(e,t,r,n,o){return{type:f,searchUrl:t,filterObj:r,result:e,queryOptions:n,reason:o}}function S(e){return{type:d,error:e}}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updates,r=e.reason,n=e.useLayerFilter;return{type:p,updates:t,reason:r,useLayerFilter:n}}function I(e,t,r){return{type:c,searchUrl:e,filterObj:t,owner:r}}function P(e,t,r,n){return{type:m,searchUrl:e,filterObj:t,queryOptions:r,reason:n}}},647310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(375875),o=r.n(n),i=r(472500),a=r.n(i),l=r(727418),u=r.n(l),s={format:"json",bounded:0,polygon_geojson:1,priority:5};const c={geocode:function(e,t){var r=u()({q:e},s,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=u()({lat:e.lat,lon:e.lng},t||{},s),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},807472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(727418),o=r.n(n),i=r(675263),a=r.n(i),l=r(124852),u=r.n(l),s=r(485294),c=r.n(s),p=r(472986),f=r.n(p),d=r(805346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function E(e,t,r){return t=F(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(e,v()?Reflect.construct(t,r||[],F(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function _(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:String(t)}var R=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _(O(e=E(this,t,[].concat(n))),"renderLoading",(function(){return e.props.maskLoading?u().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},u().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},u().createElement(d.Z,{msgId:"loading"}),u().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),_(O(e),"renderRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),_(O(e),"hasRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),_(O(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=u().createElement("div",{id:this.props.id,style:b({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},u().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),u().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?u().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):u().createElement("span",null)),r=this.props.draggable?u().createElement(c(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?u().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&g(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(u().Component);_(R,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),_(R,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const w=R},843614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(727418),o=r.n(n),i=r(480681),a=r(461365);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:String(t)}function c(e,t,r){return t=f(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,t,arguments)}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),r=t,(n=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Modal);const m=o()((0,a.Z)(y),{Body:i.Modal.Body,Dialog:i.Modal.Dialog,Footer:i.Modal.Footer,Header:i.Modal.Header,Title:i.Modal.Title})},797301:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(95797),o=r(433528),i=r(807878),a=r(782904),l=r(727418),u=r.n(l);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t,r){var n;return n=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==s(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f={featureTypes:{},data:{},result:null,resultError:null,syncWmsFilter:!1,isLayerFilter:!1};const d=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.S0:return u()({},t,{typeName:r.typeName,url:r.url});case n.u7:return u()({},t,{featureTypes:u()({},t.featureTypes,c({},r.typeName,r.featureType))});case n.lN:return u()({},t,{featureTypes:u()({},t.featureTypes,c({},r.typeName,{error:r.error}))});case n.yz:return u()({},t,{featureLoading:r.isLoading});case n.lj:return u()({},t,{featureLoading:!1,data:u()({},t.data,c({},r.typeName,(e=r.feature,["STATE_NAME","STATE_ABBR","SUB_REGION","STATE_FIPS"].map((function(t){return{attribute:t,values:e.features.reduce((function(e,r){return-1===e.indexOf(r.properties[t])?[].concat((n=e,function(e){if(Array.isArray(e))return p(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r.properties[t]]).sort():e;var n}),[])}})).reduce((function(e,t){return u()(e,c({},t.attribute,t.values.map((function(e){return{id:e,name:e}}))))}),{}))))});case n.zW:return u()({},t,{featureLoading:!1,featureTypes:u()({},t.data,c({},r.typeName,{error:r.error}))});case n.Yx:return u()({},t,{isNew:!0,searchUrl:r.searchUrl,filterObj:r.filterObj});case n.VN:return u()({},t,{filterObj:u()({},t.filterObj,r.updates)});case n.Hu:return u()({},t,{isNew:!1,result:r.result,searchUrl:r.searchUrl,filterObj:r.filterObj,resultError:null});case n.VT:return u()({},t,{isNew:!1,result:null,resultError:r.error});case a.l:case i.Eg:return r.skip&&r.skip.indexOf("query")>=0?t:u()({},t,{isNew:!1,result:null,filterObj:null,searchUrl:null,filters:null});case n.RD:return u()({},t,{result:null,resultError:null});case n._T:return u()({},t,{syncWmsFilter:!t.syncWmsFilter});case o.WB:return u()({},t,{syncWmsFilter:r.syncWmsFilter});case n.vO:return u()({},t,{isLayerFilter:!t.isLayerFilter});default:return t}}},146905:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(807878),o=r(604206),i=r(727418),a=r.n(i),l=r(819412),u=r.n(l),s=r(294707),c=r.n(s),p=r(227361),f=r.n(p),d=r(761868),y=["attribute"];function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){var n;return n=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==m(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={searchUrl:null,featureTypeConfigUrl:null,showGeneratedFilter:!1,attributePanelExpanded:!0,spatialPanelExpanded:!0,crossLayerExpanded:!0,showDetailsPanel:!1,groupLevels:5,useMapProjection:!1,toolbarEnabled:!0,groupFields:[{id:1,logic:"OR",index:0}],maxFeaturesWPS:5,filterFields:[],spatialField:{method:null,attribute:"the_geom",operation:"INTERSECTS",geometry:null},simpleFilterFields:[],map:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a()({},e,F(F({},t.fieldName,t.fieldValue),"type",t.fieldType),{fieldOptions:a()({},v({},e.fieldOptions),{currentPage:void 0===t.fieldOptions.currentPage?1:t.fieldOptions.currentPage})});return"attribute"===t.fieldName&&(r.value="string"===t.fieldType?"":null,r.operator="="),"operator"===t.fieldName&&(r.value=null),r};const _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ZC:return v(v({},e),{},{map:t.mapData});case n.Wm:return v(v({},e),{},{map:null});case n.E6:var r={rowId:(new Date).getTime(),groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};return a()({},e,{filterFields:e.filterFields?[].concat(b(e.filterFields),[r]):[r]});case n.vo:return a()({},e,{filterFields:e.filterFields.filter((function(e){return e.rowId!==t.rowId}))});case n.l1:return a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?h(e,t):e}))});case n.o7:return a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?a()({},e,{options:a()({},v({},e.options),F({},e.attribute,t.options))},{fieldOptions:a()({},v({},e.fieldOptions),{valuesCount:t.valuesCount})}):e}))});case n.Sm:return"filterField"===t.layerFilterType?a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?a()({},e,{openAutocompleteMenu:t.status}):e}))}):(0,d.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(f()(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===t.rowId?v(v({},e),{},{openAutocompleteMenu:t.status}):e})),e);case n.D6:return a()({},e,{autocompleteEnabled:t.status});case n.Nr:return"filterField"===t.layerFilterType?a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?a()({},e,{loading:t.status}):e}))}):(0,d.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(f()(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===t.filterField.rowId?v(v({},e),{},{loading:t.status}):e})),e);case n.J9:return a()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?a()({},e,{exception:t.exceptionMessage}):e}))});case n.U:var i={id:(new Date).getTime(),logic:"OR",groupId:t.groupId,index:t.index+1};return a()({},e,{groupFields:e.groupFields?[].concat(b(e.groupFields),[i]):[i]});case n.z8:return a()({},e,{groupFields:e.groupFields.map((function(e){return e.id===t.groupId?a()({},e,{logic:t.logic}):e}))});case n.ql:return a()({},e,{filterFields:e.filterFields.filter((function(e){return e.groupId!==t.groupId})),groupFields:e.groupFields.filter((function(e){return e.id!==t.groupId}))});case n.O_:return a()({},e,{filterFields:e.filterFields.map((function(e){for(var r=0;r<t.attributes.length;r++)if(e.attribute===t.attributes[r].id)return a()({},e,{value:null});return e}))});case n.M$:return a()({},e,{attributePanelExpanded:t.expand});case n.Ug:return a()({},e,{spatialPanelExpanded:t.expand});case n.p5:return a()({},e,{crossLayerExpanded:t.expand});case n.Fz:return a()({},e,{crossLayerFilter:(0,d.t8)(t.key,t.value,e.crossLayerFilter)});case n.Gf:return(0,d.vy)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId,groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null},{rowId:t.rowId},e);case n.nh:return(0,d.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(f()(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===t.rowId?h(e,t):e})),e);case n.Rf:return(0,d.z6)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId},e);case n.WZ:return a()({},e,{crossLayerFilter:{attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute}});case n.Xp:return(0,d.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(f()(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===t.filterField.rowId?v(v({},e),{},{options:v(v({},e.options),{},F({},e.attribute,t.options)),fieldOptions:v(v({},e.fieldOptions),{},{valuesCount:t.valuesCount})}):e})),e);case n.bP:return a()({},e,{spatialField:a()({},e.spatialField,F(F({},t.fieldName,t.method),"geometry",null))});case n.d_:return a()({},e,{spatialField:a()({},e.spatialField,{geometry:t.geometry})},{toolbarEnabled:!0});case n.xM:return a()({},e,{spatialField:a()({},e.spatialField,F({},t.fieldName,t.operation))});case n.bl:return a()({},e,{spatialField:a()({},e.spatialField,{attribute:t.attribute}),crossLayerFilter:a()({},e.crossLayerFilter,{attribute:t.attribute})});case o.hZ:return"queryform"===t.owner&&"start"===t.status?a()({},e,{toolbarEnabled:!1}):e;case n.Wi:return a()({},e,{toolbarEnabled:!0,spatialField:a()({},e.spatialField,{value:t.value,collectGeometries:t.collectGeometries,geometry:t.srsName?v(v({},t.geometry),{},{projection:t.srsName}):t.geometry})});case o.pb:return"queryform"===t.owner?a()({},e,{toolbarEnabled:!0,spatialField:a()({},e.spatialField,{collectGeometries:t.collectGeometries,geometry:t.geometry})}):e;case n.PN:var l=a()({},O.spatialField,{attribute:e.spatialField.attribute,value:void 0});return a()({},e,{spatialField:a()({},e.spatialField,l)});case n._M:return a()({},e,{showDetailsPanel:t.show});case n.Eg:var s=a()({},O.spatialField,{attribute:e.spatialField.attribute,value:void 0}),p={attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute};return a()({},e,O,{spatialField:s,crossLayerFilter:p,filters:[],map:e.map});case n.V1:return a()({},e,{showGeneratedFilter:t.data});case n.cY:return a()({},e,{spatialField:a()({},e.spatialField,{geometry:a()({},e.spatialField.geometry,{distance:t.distance})})});case n.co:return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id&&t.data.features&&t.data.features.length>0?a()({},e,{values:t.data.features,open:!0,error:null}):e}))})});case n.RD:return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?a()({},e,{busy:t.active}):e}))})});case n.uY:var g,E,_=e.spatialField.zoneFields.map((function(e){if(e.id===t.id){if(g=e.multivalue?t.value.value:t.value.value[0],t.value.feature[0]){var r=t.value.feature[0],n=r.geometry_name;if(e.multivalue&&t.value.feature.length>1){for(var o=1;o<t.value.feature.length;o++){var i=t.value.feature[o];i&&(r=u()(r,i))}E={coordinates:r.geometry.coordinates,geometryName:n,geometryType:r.geometry.type}}else E={coordinates:r.geometry.coordinates,geometryName:n,geometryType:r.geometry.type}}return a()({},e,{value:g,open:!1,geometryName:E?E.geometryName:null})}return e.dependson&&t.id===e.dependson.id?a()({},e,{disabled:!1,values:null,value:null,open:!1,dependson:a()({},e.dependson,{value:g})}):e})),T=c()({type:"FeatureCollection",features:t.value.feature});return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:_,geometry:T&&E?{extent:T,type:E.geometryType,coordinates:E.coordinates}:null})});case n.H8:return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){var t=a()({},e,{values:null,value:null,open:!1,error:null});return e.dependson?a()({},t,{disabled:!0,open:!1,value:null,dependson:a()({},e.dependson,{value:null})}):t})),geometry:null})});case n.Hl:var R;return a()({},e,{spatialField:a()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?(R="object"!==m(t.error)?t.error.status&&t.error.statusText&&t.error.data?{status:t.error.status,statusText:t.error.statusText,data:t.error.data}:{message:t.error.message||"unknown error"}:t.error,a()({},e,{error:R,busy:!1})):e}))})});case n.je:var w=e.simpleFilterFields.reduce((function(e,r){return r.fieldId===t.id?e.push(v(v({},r),t.properties)):e.push(r),e}),[]);return v(v({},e),{},{simpleFilterFields:w});case n.qu:var S,L=(null!==(S=e.filters)&&void 0!==S?S:[]).reduce((function(e,r){var n=t.filters.find((function(e){return e.id===r.id}));return n?e.push(n):e.push(r),e}),[]);return t.filters.forEach((function(e){L.find((function(t){return t.id===e.id}))||L.push(e)})),v(v({},e),{},{filters:L});case n.LY:var I,P=(null!==(I=e.filters)&&void 0!==I?I:[]).reduce((function(e,r){return t.filters.find((function(e){return e.id===r.id}))||e.push(r),e}),[]);return v(v({},e),{},{filters:P});case n.go:var A=t.properties.fieldId?t.properties:v(v({},t.properties),{},{fieldId:(new Date).getTime()}),j=e.simpleFilterFields?[].concat(b(e.simpleFilterFields),[A]):[A];return v(v({},e),{},{simpleFilterFields:j});case n._8:return v(v({},e),{},{simpleFilterFields:e.simpleFilterFields.filter((function(e){return e.fieldId!==t.id}))});case n.xd:return v(v({},e),{},{simpleFilterFields:[]});case n.Ef:var N=O.spatialField,C=(N.attribute,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(N,y)),D=a()({},O,{spatialField:v({},C)}),U=t.filter||D,M=U.spatialField,x=U.filterFields,G=U.groupFields,Y=U.crossLayerFilter,k=U.attributePanelExpanded,V=U.spatialPanelExpanded,q=U.crossLayerExpanded,Q=U.filters;return v(v({},e),{attributePanelExpanded:k,spatialPanelExpanded:V,crossLayerExpanded:q,spatialField:v(v({},M),{},{attribute:M&&M.attribute||e.spatialField&&e.spatialField.attribute}),filters:null!=Q?Q:[],filterFields:x,groupFields:G,crossLayerFilter:v(v({},Y),{},{attribute:Y&&Y.attribute||e.crossLayerFilter&&e.crossLayerFilter.attribute})});default:return e}}},611847:(e,t,r)=>{"use strict";r.d(t,{ij:()=>g,w0:()=>E,vl:()=>v,K2:()=>F,Nw:()=>O});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),l=r(747037),u=r.n(l),s=r(618446),c=r.n(s),p=r(189734),f=r.n(p),d=r(313311),y=r.n(d),m=r(964210);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var o,i,a=(i=6,function(e){if(Array.isArray(e))return e}(o=r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(o,i)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[1],u=a[3],s=a[4],c=a[5],p=0===c.indexOf("/")?c.split("/")[1]:"";return{protocol:l,domain:u,port:s,rootPath:c,applicationRootPath:p}},E=function(e,t){var r=a()(e)?e[0]:e,n=a()(t)?t[0]:t;if(r===n)return!0;if(!r||!n)return!1;if(!u()(r)||!u()(n))return!1;var i=o().parse(r),l=o().parse(n),s=g(r),p=g(n),d=s.protocol===p.protocol,y=s.domain===p.domain,m=s.port===p.port,b=i.pathname===l.pathname,E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return c()(f()(r),f()(n))}(i.query,l.query);return d&&m&&y&&b&&E},v=function(e){return m.Qc(e)},F=function(e){return new RegExp(arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/).test(e)},O=function(e,t){var r=new RegExp(arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/).test(e);if(!r)return!1;if(r&&!t)return!0;if(r&&t){var n=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return y()(n,e)})).length}return!1}}}]);