"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[65365],{265365:(e,t,i)=>{i.r(t),i.d(t,{default:()=>M});var n=i(273517),r=i(336946),o=i(448871),a=i(252544),s=i(491446),l=i(86881),c=i(149785),d=i(493721),u=i(770103),h=i(407350),f=i.n(h),v=i(770260),g=i(457378),m=i(762222),p=i(305493);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function _(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_(Object(i),!0).forEach((function(t){w(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function w(e,t,i){return(t=D(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,a,s=[],l=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return T(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function C(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function j(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getObjectsToExcludeOnPick,o=void 0===r?function(){return[]}:r,a=n.pickObjectsLimit,s=void 0===a?Number.MAX_VALUE:a,l=n.depthTestAgainstTerrain,c=o();void 0!==l&&(i=e.scene.globe.depthTestAgainstTerrain,e.scene.globe.depthTestAgainstTerrain=l),c.forEach((function(e){e&&(e.show=!1)})),e.scene.render();var d=(0,v.hm)(e,t,{pickObjectsLimit:s});return void 0!==l&&(e.scene.globe.depthTestAgainstTerrain=i),c.forEach((function(e){e&&(e.show=!0)})),d}function E(e,t,i){var n=i.area,o=i.areaUom,a=i.length,s=i.lengthUom,l=i.height,c=i.heightUom,d=i.terrainCoordinates,u=i.geodesic,h=u&&null!=t&&t[t.length-1]?r.A.fromCartesian(t[t.length-1]).height:void 0;switch(e){case"Point":return{type:"Feature",properties:d?{height:l,heightUom:c,terrainCoordinates:d}:{geodesic:u},geometry:{type:"Point",coordinates:(0,m.Kf)(t[t.length-1],h)}};case"LineString":return{type:"Feature",properties:{length:a,lengthUom:s,geodesic:u},geometry:{type:"LineString",coordinates:t.map((function(e){return(0,m.Kf)(e,h)}))}};case"Polygon":return{type:"Feature",properties:{area:n,areaUom:o,length:a,lengthUom:s,geodesic:u},geometry:{type:"Polygon",coordinates:[t.map((function(e){return(0,m.Kf)(e,h)}))]}};case"Circle":return{type:"Feature",properties:{radius:(0,m.Ht)([t[0],t[1]],u),radiusUom:"m",geodesic:u},geometry:{type:"Point",coordinates:(0,m.Kf)(t[0],h)}};default:return null}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,i=arguments.length>2?arguments[2]:void 0;return new Promise((function(n){var l=i.map((function(e){return r.A.fromCartesian(e)})).map((function(e){return new r.A(e.longitude,e.latitude,0)}));(e.ready?Promise.resolve(!0):e.readyPromise).then((function(){var i,r,c=null!=e&&e.availability?o.A(e,l):a.A(e,t,l);s.A(c)?null===(i=c.then((function(e){n(e)})))||void 0===i||null===(r=i.catch)||void 0===r||r.call(i,(function(){n()})):n()}))}))}const S=function(){return e=function e(t){var i,n,r,o,a,s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._type=null==t?void 0:t.type,this._map=null==t?void 0:t.map,this._coordinatesLength=null==t?void 0:t.coordinatesLength,this._geodesic=null==t?void 0:t.geodesic,this._sampleTerrain=null==t?void 0:t.sampleTerrain,this._getObjectsToExcludeOnPick=function(){return[].concat(P(null!=t&&t.getObjectsToExcludeOnPick?t.getObjectsToExcludeOnPick():[]),[s._dynamicPrimitivesCollection,s._dynamicBillboardCollection])},this._depthTestAgainstTerrain=null==t?void 0:t.depthTestAgainstTerrain,this._getPositionInfo=(null==t?void 0:t.getPositionInfo)||j,this._handler=new l.A(this._map.canvas),this._handler.setInputAction((function(e){s._handleDrawEnd(e,!0)}),c.A.LEFT_DOUBLE_CLICK),this._handler.setInputAction((function(e){s._handleDrawing(e),s._handleDrawStart(e)}),c.A.LEFT_CLICK),this._handler.setInputAction(f()((function(e){s._handleMouseMove(e)}),null!==(i=t.mouseMoveThrottleTime)&&void 0!==i?i:100),c.A.MOUSE_MOVE),this._drawing=!1,this._forcedDrawEnd=!1,this._coordinates=[],this._style=(0,p.zY)(null==t?void 0:t.style),this._dynamicPrimitivesCollection=new d.A({destroyPrimitives:!0}),this._map.scene.primitives.add(this._dynamicPrimitivesCollection),this._dynamicBillboardCollection=new u.A({scene:this._map.scene}),this._map.scene.primitives.add(this._dynamicBillboardCollection),this._cursorImage=(0,g.g7)(2*(null===(n=this._style)||void 0===n||null===(n=n.cursor)||void 0===n?void 0:n.radius),{stroke:"#ffffff",strokeWidth:null===(r=this._style)||void 0===r||null===(r=r.cursor)||void 0===r?void 0:r.width,fill:"rgba(0, 0, 0, 0)"}),this._coordinateNodeImage=(0,g.g7)(2*(null===(o=this._style)||void 0===o||null===(o=o.coordinatesNode)||void 0===o?void 0:o.radius),{stroke:"#ffffff",strokeWidth:null===(a=this._style)||void 0===a||null===(a=a.coordinatesNode)||void 0===a?void 0:a.width,fill:"rgba(0, 0, 0, 0.1)"}),this._onMouseMove=null!=t&&t.onMouseMove?t.onMouseMove:function(){},this._onDrawStart=null!=t&&t.onDrawStart?t.onDrawStart:function(){},this._onDrawing=null!=t&&t.onDrawing?t.onDrawing:function(){},this._onDrawEnd=null!=t&&t.onDrawEnd?t.onDrawEnd:function(){}},(t=[{key:"getCoordinates",value:function(){return this._coordinates}},{key:"remove",value:function(){var e;this._handler&&(this._handler.destroy(),this._handler=null),this._coordinates=[],this._drawing=!1,null!==(e=this._map)&&void 0!==e&&e.isDestroyed&&!this._map.isDestroyed()&&((0,g.IP)(this._map,this._dynamicPrimitivesCollection),this._dynamicPrimitivesCollection=null,(0,g.IP)(this._map,this._dynamicBillboardCollection),this._dynamicBillboardCollection=null)}},{key:"_getCoordinatesLength",value:function(){return"Circle"===this._type?2:this._coordinatesLength}},{key:"_handleMouseMove",value:function(e){var t=this,i=this._getPositionInfo(this._map,e,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;if(i)if("Point"===this._type&&this._sampleTerrain){var n,o,a;I(null===(n=this._map)||void 0===n?void 0:n.terrainProvider,null!==(o=null===(a=this._map)||void 0===a||null===(a=a.terrainProvider)||void 0===a?void 0:a.sampleTerrainZoomLevel)&&void 0!==o?o:18,[i]).then((function(e){var n;if(e){var o=A(e,1)[0],a=[r.A.toCartesian(o),i];n=(0,m._U)(a)*(0,m.Ht)(a),t._coordinates=a}else t._coordinates=[i];t._onMouseMove(t._drawPrimitives({distance:n,cartesian:i,coordinates:P(t._coordinates)}))}))}else{var s=this._coordinates[this._coordinates.length-1],l=[].concat(P(this._coordinates),[i]),c=(0,m.Vf)(l,void 0),d=(0,m.Ht)(l,this._geodesic);this._onMouseMove(this._drawPrimitives({area:c,distance:d,previousCartesian:s,cartesian:i,coordinates:l}))}}},{key:"_handleDrawStart",value:function(e){var t,i,n=this;if(!(this._drawing||this._forcedDrawEnd||null!==(t=this._handler)&&void 0!==t&&null!==(i=t.isDestroyed)&&void 0!==i&&i.call(t))){var o=P(this._coordinates);this._coordinates=[];var a=this._getPositionInfo(this._map,e,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;a&&(this._coordinates.push(a),"Point"===this._type?((this._sampleTerrain&&2!==o.length?function(){var e,t,i;return I(null===(e=n._map)||void 0===e?void 0:e.terrainProvider,null!==(t=null===(i=n._map)||void 0===i||null===(i=i.terrainProvider)||void 0===i?void 0:i.sampleTerrainZoomLevel)&&void 0!==t?t:18,[a]).then((function(e){if(e){var t=A(e,1)[0];return[r.A.toCartesian(t),a]}return[a]}))}:function(){return Promise.resolve(2===o.length?o:[a])})().then((function(e){n._onDrawStart(n._drawPrimitives({cartesian:e[e.length-1],coordinates:e,geodesicCoordinates:(0,m.qg)(e)})),n._onDrawEnd(n._clearPrimitive({coordinates:e,geodesicCoordinates:(0,m.qg)(e),feature:n._sampleTerrain&&2===e.length?E(n._type,e,{height:(0,m._U)(e)*(0,m.Ht)(e),heightUom:"m",terrainCoordinates:(0,m.Kf)(e[0]),geodesic:n._geodesic}):E(n._type,e,{geodesic:n._geodesic})}))})),this._coordinates=[]):(this._onDrawStart(this._drawPrimitives({cartesian:a,coordinates:P(this._coordinates),geodesicCoordinates:(0,m.qg)(this._coordinates)})),this._drawing=!0))}this._forcedDrawEnd&&(this._forcedDrawEnd=!1)}},{key:"_handleDrawing",value:function(e){if(this._drawing){if(this._coordinates.length+1===this._getCoordinatesLength())return this._forcedDrawEnd=!0,this._handleDrawEnd(e);var t=this._getPositionInfo(this._map,e,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;if(t){var i=this._coordinates[this._coordinates.length-1];this._coordinates.push(t);var n=P(this._coordinates),r=(0,m.Vf)(n,void 0),o=(0,m.Ht)(n,this._geodesic);this._onDrawing(this._drawPrimitives({area:r,distance:o,previousCartesian:i,cartesian:t,coordinates:P(this._coordinates),geodesicCoordinates:(0,m.qg)(this._coordinates)}))}}return null}},{key:"_handleDrawEnd",value:function(e,t){if(this._drawing){var i=this._getPositionInfo(this._map,e,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;if(t&&this._coordinates.splice(this._coordinates.length-2,2),this._coordinates.push(i),!function(e,t,i){if(i&&i!==t.length)return!1;switch(e){case"Point":case"LineString":default:return!0;case"Polygon":return t.length>2}}(this._type,P(this._coordinates),this._getCoordinatesLength()))return this._onDrawEnd(this._clearPrimitive({})),this._coordinates=[],this._drawing=!1,null;var n="Polygon"===this._type?[].concat(P(this._coordinates),[this._coordinates[0]]):P(this._coordinates),r=(0,m.Vf)(n,void 0),o=(0,m.Ht)(n,this._geodesic);this._onDrawEnd(this._clearPrimitive({area:r,distance:o,coordinates:n,geodesicCoordinates:(0,m.qg)(n),feature:E(this._type,n,{area:r,areaUom:"sqm",length:o,lengthUom:"m",geodesic:this._geodesic})})),this._coordinates=[],this._drawing=!1}return null}},{key:"_drawPrimitives",value:function(e){return this._style&&this._updateDynamicCoordinates(e.coordinates),e}},{key:"_clearPrimitive",value:function(e){return this._dynamicPrimitivesCollection.removeAll(),this._dynamicBillboardCollection.removeAll(),e}},{key:"_updateDynamicCoordinates",value:function(e){var t,i=this;switch(this._dynamicPrimitivesCollection.removeAll(),this._dynamicBillboardCollection.removeAll(),this._type){case"Point":if(this._geodesic){var n,r,o=(0,m.qg)(e);this._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(n=this._style)||void 0===n?void 0:n.wireframe),{},{coordinates:[o[0],e[0]]}))),this._dynamicBillboardCollection.add({position:o[0],image:this._coordinateNodeImage,color:(0,g.Oe)(b({},null===(r=this._style)||void 0===r?void 0:r.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY})}break;case"Circle":if(e.length>1){var a=(0,m.Ht)(e,this._geodesic);if(this._geodesic){var s,l,c,d,u,h,f=(0,m.qg)(e,(function(e){var t;return null===(t=e[e.length-1])||void 0===t?void 0:t.height})),v=(0,m.qg)(e);this._dynamicPrimitivesCollection.add((0,g.wm)(b(b({},null===(s=this._style)||void 0===s?void 0:s.wireframe),{},{coordinates:f[0],radius:a,geodesic:!0}))),this._dynamicPrimitivesCollection.add((0,g.wm)(b(b({},null===(l=this._style)||void 0===l?void 0:l.lineDrawing),{},{coordinates:v[0],radius:a,geodesic:!0}))),this._dynamicBillboardCollection.add({position:e[0],image:this._coordinateNodeImage,color:(0,g.Oe)(b({},null===(c=this._style)||void 0===c?void 0:c.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._dynamicBillboardCollection.add({position:f[0],image:this._coordinateNodeImage,color:(0,g.Oe)(b({},null===(d=this._style)||void 0===d?void 0:d.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._dynamicBillboardCollection.add({position:v[0],image:this._coordinateNodeImage,color:(0,g.Oe)(b({},null===(u=this._style)||void 0===u?void 0:u.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(h=this._style)||void 0===h?void 0:h.wireframe),{},{geodesic:!0,coordinates:[e[0],v[0],v[1],f[1],f[0]]})))}else{var p,y;this._dynamicPrimitivesCollection.add((0,g.cp)(b(b({},null===(p=this._style)||void 0===p?void 0:p.lineDrawing),{},{coordinates:e[0],radius:a}))),this._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(y=this._style)||void 0===y?void 0:y.wireframe),{},{coordinates:P(e)})))}}break;case"LineString":if(e.length>1)if(this._geodesic){var _,w,A=(0,m.qg)(e,(function(e){var t;return null===(t=e[e.length-1])||void 0===t?void 0:t.height})),O=(0,m.qg)(e);this._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(_=this._style)||void 0===_?void 0:_.wireframe),{},{geodesic:this._geodesic,coordinates:P(A)}))),this._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(w=this._style)||void 0===w?void 0:w.lineDrawing),{},{geodesic:this._geodesic,coordinates:P(O)}))),A.forEach((function(e,t){var n;i._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(n=i._style)||void 0===n?void 0:n.wireframe),{},{geodesic:i._geodesic,coordinates:[O[t],A[t]]})))}))}else{var T;this._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(T=this._style)||void 0===T?void 0:T.lineDrawing),{},{coordinates:P(e)})))}break;case"Polygon":if(e.length>1)if(this._geodesic){var C,D,j,E=(0,m.qg)(e,(function(e){var t;return null===(t=e[e.length-1])||void 0===t?void 0:t.height})),I=(0,m.qg)(e);this._dynamicPrimitivesCollection.add((0,g.ge)(b(b({},null===(C=this._style)||void 0===C?void 0:C.areaDrawing),{},{geodesic:this._geodesic,coordinates:[].concat(P(I),[I[0]])}))),this._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(D=this._style)||void 0===D?void 0:D.wireframe),{},{geodesic:this._geodesic,coordinates:[].concat(P(E),[E[0]])}))),this._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(j=this._style)||void 0===j?void 0:j.lineDrawing),{},{geodesic:this._geodesic,coordinates:[].concat(P(I),[I[0]])}))),E.forEach((function(e,t){var n;i._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(n=i._style)||void 0===n?void 0:n.wireframe),{},{geodesic:i._geodesic,coordinates:[I[t],E[t]]})))}))}else{var S,k;this._dynamicPrimitivesCollection.add((0,g.ge)(b(b({},null===(S=this._style)||void 0===S?void 0:S.areaDrawing),{},{coordinates:P(e)}))),this._dynamicPrimitivesCollection.add((0,g.Qi)(b(b({},null===(k=this._style)||void 0===k?void 0:k.lineDrawing),{},{coordinates:P(e)})))}}e.length>0&&this._dynamicBillboardCollection.add({position:e[e.length-1],image:this._cursorImage,color:(0,g.Oe)(b({},null===(t=this._style)||void 0===t?void 0:t.cursor)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._map.scene.requestRender()}}])&&C(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}const M=function(e){var t=e.map,i=e.active,r=e.geometryType,o=void 0===r?"LineString":r,a=e.geodesic,s=void 0!==a&&a,l=e.onDrawStart,c=void 0===l?function(){}:l,d=e.onDrawing,u=void 0===d?function(){}:d,h=e.onMouseMove,f=void 0===h?function(){}:h,v=e.onDrawEnd,g=void 0===v?function(){}:v,m=e.onInit,p=void 0===m?function(){}:m,y=e.onDestroy,_=void 0===y?function(){}:y,b=e.getObjectsToExcludeOnPick,w=e.depthTestAgainstTerrain,A=e.sampleTerrain,P=e.coordinatesLength,O=e.getPositionInfo,T=e.style,C=(0,n.useRef)();return(0,n.useEffect)((function(){return null!=t&&t.canvas&&i&&(p(),C.current=new S({map:t,type:o,coordinatesLength:P,getPositionInfo:O,getObjectsToExcludeOnPick:b,depthTestAgainstTerrain:w,style:T,geodesic:s,sampleTerrain:A,onDrawStart:c,onDrawing:u,onMouseMove:f,onDrawEnd:g})),function(){var e;C.current&&(_({coordinates:(e=C.current.getCoordinates(),function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?k(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),C.current.remove(),C.current=null)}}),[t,i,o,A,P,s]),null}},305493:(e,t,i)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e,t,i){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e){return o({wireframe:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:.5},lineDrawing:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:3,dashLength:8},line:{color:"#ffcc33",opacity:1,depthFailColor:"#ffcc33",depthFailOpacity:.4,width:2},areaDrawing:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},area:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},cursor:{color:"#ff0000",width:2,radius:4},coordinatesNode:{color:"#333333",width:2,radius:5}},e)}i.d(t,{Nv:()=>c,Or:()=>d,zY:()=>s});var l=function(e){var t;return null==e||null===(t=e.geometry)||void 0===t?void 0:t.type},c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).getGeometryType,t=void 0===e?l:e;return function(e){return o(o({},null==e?void 0:e.properties),{},{geometryType:t(e)})}},d=function(e,t){return o(o({},null==t?void 0:t.properties),void 0!==(null==e?void 0:e.radius)&&{radius:e.radius})}},770260:(e,t,i)=>{i.d(t,{Ay:()=>l,hm:()=>s});var n=i(336946),r=i(491446),o=i(623e3),a=i(433052);function s(e,t){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).pickObjectsLimit,r=void 0===i?Number.MAX_VALUE:i,s=e.scene,l=e.camera,c=t.position||t.endPosition,d=s.pick(c),u=s.pickPosition(c);if(!((null==d?void 0:d.primitive)instanceof o.A)&&!((null==d?void 0:d.primitive)instanceof a.A)&&d&&u)return{cartesian:u,cartographic:n.A.fromCartesian(u),feature:d};var h,f=l.getPickRay(c),v=s.drillPickFromRay(f,r).find((function(e){var t=e.exclude,i=e.object,n=e.position;return!t&&n&&i}))||null;if(v)return{cartesian:v.position,cartographic:n.A.fromCartesian(v.position),feature:null==v||null===(h=v.object)||void 0===h?void 0:h.primitive};var g=s.globe.pick(f,s);return g?{cartesian:g,cartographic:n.A.fromCartesian(g)}:{}}const l={getMouseXYZ:function(e,t){var i=e.scene,o=t.position||t.endPosition;if(!o)return null;if(e.scene.drillPick(o).find((function(e){var t;return!(!1===(null==e||null===(t=e.id)||void 0===t||null===(t=t.entityCollection)||void 0===t||null===(t=t.owner)||void 0===t?void 0:t.queryable))}))){var a=i.globe.depthTestAgainstTerrain,s=i.pickTranslucentDepth;i.globe.depthTestAgainstTerrain=!0,i.pickTranslucentDepth=!0;var l=i.pickPosition(o);if(i.globe.depthTestAgainstTerrain=a,i.pickTranslucentDepth=s,l)return n.A.fromCartesian(l)}var c=e.camera.getPickRay(o),d=e.scene.globe.pick(c,e.scene),u=i._globe.ellipsoid;if(r.A(d)){var h=u.cartesianToCartographic(d),f=function(e,t){if(null!==t.position){var i=e.scene,n=i._globe.ellipsoid;return i.camera.pickEllipsoid(t.position||t.endPosition,n)}return null}(e,t);return f&&(h.height=i._globe.getHeight(h),h.cartesian=f,h.position=d),h}return null},getMouseTile:function(e,t){var i=e.scene;if(!t.position)return null;var n=e.camera.getPickRay(t.position);return e.scene.globe.pickTile(n,i)}}},762222:(e,t,i)=>{i.d(t,{Ht:()=>b,Kf:()=>A,L8:()=>m,Lj:()=>v,Ot:()=>g,Q2:()=>p,TS:()=>f,Vf:()=>y,_U:()=>w,qg:()=>P});var n=i(267980),r=i(367817),o=i(434067),a=i(336946),s=i(602289),l=i(466570),c=i.n(l);function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function f(e,t){var i=n.A.subtract(t,e,new n.A),r=n.A.multiplyByScalar(i,.5,new n.A);return n.A.add(e,r,new n.A)}function v(e,t){var i=n.A.normalize(e,new n.A),o=n.A.normalize(t,new n.A),a=n.A.dot(i,o);return r.A.toDegrees(Math.acos(a))}function g(e){return e.map((function(t,i){var r=e[i-1],o=e[i+1];return r&&o?v(n.A.subtract(r,t,new n.A),n.A.subtract(o,t,new n.A)):null})).filter((function(e){return null!==e}))}function m(e){return new n.A((e[0].x+e[1].x+e[2].x)/3,(e[0].y+e[1].y+e[2].y)/3,(e[0].z+e[1].z+e[2].z)/3)}function p(e,t){return e.map((function(i,r){var o=e[r-1],a=e[r+1];if(o&&a){var s=function(e,t){var i=n.A.normalize(e,new n.A),r=n.A.normalize(t,new n.A);return n.A.cross(i,r,new n.A)}(n.A.subtract(o,i,new n.A),n.A.subtract(a,i,new n.A)),l=-Math.sign(n.A.dot(s,n.A.subtract(i,t,new n.A),new n.A));return v(n.A.multiplyByScalar(s,l,new n.A),i)}return null})).filter((function(e){return null!==e}))}function y(e,t){if((null==e?void 0:e.length)<3)return 0;for(var i=o.A.packArray(e),r=c()(i,t,2),a=0,s=0;s<r.length;s+=3){var l=e[r[s]],d=e[r[s+1]],u=e[r[s+2]],h=n.A.subtract(d,l,new n.A),f=n.A.subtract(u,l,new n.A),v=n.A.cross(h,f,new n.A);a+=n.A.magnitude(v)/2}return a}function _(e,t){var i,n=[e,t].map((function(e){return a.A.fromCartesian(e)}));return function(e,t,i){if(u())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var r=new(e.bind.apply(e,n));return i&&d(r,i.prototype),r}(s.A,(i=n.map((function(e){var t=e.longitude,i=e.latitude;return new a.A(t,i,0)})),function(e){if(Array.isArray(e))return h(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).surfaceDistance}function b(e,t){return(null==e?void 0:e.length)<2?0:e.reduce((function(i,r,o){return e[o-1]?i+(t?_(r,e[o-1]):n.A.distance(r,e[o-1])):i}),0)}function w(e){return Math.sign(a.A.fromCartesian(e[1]).height-a.A.fromCartesian(e[0]).height)}function A(e,t){var i=a.A.fromCartesian(e),n=i.longitude,o=i.latitude,s=i.height;return[r.A.toDegrees(n),r.A.toDegrees(o),null!=t?t:s]}function P(e,t){var i=e.map((function(e){return a.A.fromCartesian(e)})),n=t?t(i):0;return i.map((function(e){var t=e.longitude,i=e.latitude;return a.A.toCartesian(new a.A(t,i,n))}))}}}]);