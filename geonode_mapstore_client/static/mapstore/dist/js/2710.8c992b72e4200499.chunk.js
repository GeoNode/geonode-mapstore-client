(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2710],{156816:(e,t,r)=>{"use strict";r.d(t,{A:()=>Xe});var n=r(273517),o=r.n(n),a=r(275705),i=r(8117),l=r(711030),c=r(154150),s=r(8571),u=r(269843),p=r.n(u),d=r(168995);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const g=function(e){var t,r,n=e.children,a=e.service,l=e.onChangeServiceProperty,c=void 0===l?function(){}:l,u=e.onToggleThumbnail,m=void 0===u?function(){}:u;return o().createElement(o().Fragment,null,o().createElement(i.gE,{controlId:"autoload",key:"autoload"},void 0!==a.autoload&&o().createElement(i.Sc,{value:"autoload",onChange:function(e){return c("autoload",e.target.checked)},checked:!p()(a.autoload)&&a.autoload},o().createElement(s.A,{msgId:"catalog.autoload"}))),o().createElement(i.gE,{controlId:"thumbnail",key:"thumbnail"},o().createElement(i.Sc,{onChange:function(){return m()},checked:!!p()(a.hideThumbnail)||!a.hideThumbnail},o().createElement(s.A,{msgId:"catalog.showPreview"}))),!p()(a.type)&&"cog"===a.type&&o().createElement(i.gE,{controlId:"fetchMetadata",key:"fetchMetadata"},o().createElement(i.Sc,{onChange:function(e){return c("fetchMetadata",e.target.checked)},checked:!!p()(a.fetchMetadata)||a.fetchMetadata},o().createElement(s.A,{msgId:"catalog.fetchMetadata.label"})," ",o().createElement(d.A,{text:o().createElement(s.A,{msgId:"catalog.fetchMetadata.tooltip"})}))),["wfs","vector"].includes(a.type)&&o().createElement(i.gE,{className:"wfs-vector-interactive-legend",controlId:"enableInteractiveLegend",key:"enableInteractiveLegend"},o().createElement(i.Sc,{"data-qa":"display-interactive-legend-option",onChange:function(e){return c("layerOptions",y(y({},a.layerOptions),{},{enableInteractiveLegend:e.target.checked}))},checked:!p()(null===(t=a.layerOptions)||void 0===t?void 0:t.enableInteractiveLegend)&&(null===(r=a.layerOptions)||void 0===r?void 0:r.enableInteractiveLegend)},o().createElement(s.A,{msgId:"layerProperties.enableInteractiveLegendInfo.label"})," ",o().createElement(d.A,{text:o().createElement(s.A,{msgId:"layerProperties.enableInteractiveLegendInfo.infoWithoutGSNote"})}))),n)};var b=r(209250),h=r(302404),S=r.n(h),E=r(136767),O=r(595535),w={options:{}};const A=function(e){var t=e.service,r=void 0===t?{}:t,n=e.setValid,a=void 0===n?function(){}:n,l=e.onToggleThumbnail,c=void 0===l?function(){}:l,u=e.onChangeServiceProperty,m=void 0===u?function(){}:u,f=r.options||r.variants?{options:r.options||{},variants:r.variants}:void 0;return o().createElement("div",null,o().createElement(i.gE,{controlId:"autoload",key:"autoload"},void 0!==r.autoload&&o().createElement(i.Sc,{key:"autoload",value:"autoload",onChange:function(e){return m("autoload",e.target.checked)},checked:!p()(r.autoload)&&r.autoload},o().createElement(s.A,{msgId:"catalog.autoload"})),o().createElement(i.Sc,{key:"thumbnail",value:"thumbnail",onChange:function(){return c()},checked:!!p()(r.hideThumbnail)||!r.hideThumbnail},o().createElement(s.A,{msgId:"catalog.showPreview"})),"tms"===r.provider?o().createElement(i.Sc,{key:"forceDefaultTileGrid",value:"forceDefaultTileGrid",onChange:function(e){return m("forceDefaultTileGrid",e.target.checked)},checked:!p()(r.forceDefaultTileGrid)&&r.forceDefaultTileGrid},o().createElement(s.A,{msgId:"catalog.tms.forceDefaultTileGrid"})," ",o().createElement(d.A,{text:o().createElement(s.A,{msgId:"catalog.tms.forceDefaultTileGridDescription"})})):null,r.provider&&"custom"!==r.provider?null:o().createElement("div",null,o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.tms.customTMSConfiguration"}),"  ",o().createElement(d.A,{text:o().createElement(O.A,{msgId:"catalog.tms.customTMSConfigurationHint"})})),o().createElement(E.A,{json:f||w,onValid:function(e){var t=e.options,n=e.variants;S()(t,r.options)||m("options",t),S()(n,r.variants)||m("variants",n),a(!0)},onError:function(){r.options&&m("options",void 0),r.variants&&m("variants",void 0),a(!1)}}))))};var P=r(192016),j=r(984058),T=r.n(j),C=r(551783),k=r(682693),x=r(112585),I=r(237811),L=r(725304),N=r(306840);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(null,arguments)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){F(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F(e,t,r){return(t=function(e){var t=function(e){if("object"!=M(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G={mode:"xml",theme:"material",lineNumbers:!0,lineWrapping:!0,autoRefresh:!0,indentUnit:2,tabSize:2},U=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.className,a=void 0===n?"":n,l=e.tooltip;return o().createElement(N.A,{placement:"bottom",overlay:l},o().createElement(i.e6,{style:{marginLeft:4},glyph:r,className:a}))},V=function(e){var t="catalog.filter.".concat(e,".info");return"error"===e&&(t="catalog.filter.error"),o().createElement(i.m_,{id:"filter"},o().createElement(s.A,{msgId:t}))},W=o().createElement(U,{tooltip:V("error"),glyph:"exclamation-mark",className:"text-danger"}),q=o().createElement(i.f0,{style:{fontSize:12}},o().createElement(s.A,{msgId:"catalog.filter.dynamic.helpText"})),Z=function(e){var t=e.type,r=e.code,n=e.setCode,a=e.error,l="".concat(t,"Filter");return o().createElement(i.gE,null,o().createElement("div",{className:"label-pre-textarea"},o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.filter.".concat(t,".label")})),o().createElement(U,{tooltip:V(t)}),a[t]&&W),o().createElement("div",{className:"textarea-code"},o().createElement(I.A,{value:r[l],options:G,onBeforeChange:function(e,t,o){n(_(_({},r),{},F({},l,o)))}}),"dynamic"===t&&q))};const H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChangeServiceProperty,r=void 0===t?function(){}:t,a=e.filter,i=void 0===a?{}:a,l=i.staticFilter,c=i.dynamicFilter,s=z((0,n.useState)({}),2),u=s[0],p=s[1],d=z((0,n.useState)({staticFilter:l,dynamicFilter:c}),2),m=d[0],f=d[1],y={code:m,setCode:f,error:u},v=function(e){var t,r=(0,L.lV)({filterXml:e,startPosition:1,maxRecords:4,sortBy:""});return!(null!==(t=(new DOMParser).parseFromString(r,"application/xml"))&&void 0!==t&&null!==(t=t.getElementsByTagName("parsererror"))&&void 0!==t&&t.length)};return(0,n.useEffect)(function(){var e=v(m.staticFilter);e&&!S()(m.staticFilter,l)&&r("filter.staticFilter",m.staticFilter),p(_(_({},u),{},{static:!e}))},[m.staticFilter]),(0,n.useEffect)(function(){var e=v(m.dynamicFilter);e&&!S()(m.dynamicFilter,c)&&r("filter.dynamicFilter",m.dynamicFilter),p(_(_({},u),{},{dynamic:!e}))},[m.dynamicFilter]),o().createElement("div",{className:"catalog-csw-filters",style:{position:"relative",zIndex:0}},o().createElement(Z,R({type:"static"},y)),o().createElement(Z,R({type:"dynamic"},y)))};var $=r(738221),J=r.n($),K=r(47091),X=r.n(K),Y=r(455378),Q=r.n(Y),ee=r(590179),te=r.n(ee),re=r(761489),ne=r.n(re),oe=r(164045);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach(function(t){ce(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ce(e,t,r){return(t=function(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const pe=function(e){var t=e.onChangeServiceProperty,r=void 0===t?function(){}:t,a=e.service,l=(0,oe.A)(i.$n),c=se((0,n.useState)(X()(a.domainAliases)?a.domainAliases:{0:""}),2),u=c[0],p=c[1],m=se((0,n.useState)(1),2),f=m[0],y=m[1],v=(0,n.useCallback)(J()(function(e){r("domainAliases",e)},300),[]);(0,n.useEffect)(function(){v(u)},[u]);var g=function(e){return function(t){var r=t.target;return p(function(t){return le(le({},t),{},ce({},e,r.value))})}},b=function(e){return function(){return p(function(t){return le({},te()(t,[e]))})}},h=Q()(u,function(e,t){return o().createElement("div",{className:"form-group alias-item"},o().createElement(i.MJ,{id:"alias-".concat(t),key:"alias-".concat(t),type:"text",value:e,onChange:g(t)}),0!==ne()(t)&&o().createElement(l,{tooltip:o().createElement(s.A,{msgId:"catalog.domainAliases.removeAliasTooltip"}),tooltipid:"add-alias-button",tooltipPosition:"left",className:"remove-alias",onClick:b(t)},o().createElement(i.e6,{glyph:"minus"})))});return o().createElement(i.gE,{key:"domain-aliases",className:"mapstore-catalog-domain-aliases"},o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.domainAliases.title"}))," ",o().createElement(d.A,{text:o().createElement(s.A,{msgId:"catalog.domainAliases.helpTooltip"})}),h,o().createElement(l,{className:"add-alias",tooltip:o().createElement(s.A,{msgId:"catalog.domainAliases.addAliasTooltip"}),tooltipid:"add-alias-button",tooltipPosition:"right",onClick:function(){y(function(e){return e+1}),p(function(e){return le(le({},e),{},ce({},f,""))})}},o().createElement(i.e6,{glyph:"plus"})))};var de=r(881137),me=r(267224);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}var ye=["showFormatError","service","formatOptions","infoFormatOptions","onChangeServiceFormat","onChangeServiceProperty","currentWMSCatalogLayerSize","selectedService","onFormatOptionsFetch","advancedRasterSettingsStyles","tileSizeOptions","isLocalizedLayerStylesEnabled","onChangeMetadataTemplate","onToggleTemplate"];function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ve.apply(null,arguments)}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function he(e,t,r){return(t=function(e){var t=function(e){if("object"!=fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Se=(0,de.A)(i.$n),Ee=(0,C.A)("noResultsText")(P.Ay),Oe=function(e){return e.map(function(e){return{label:"".concat(e,"x").concat(e),value:e}})};const we=function(e){var t,r,a,l,c,u,m,f,y,v,b,h,S,E=e.showFormatError,O=e.service,w=e.formatOptions,A=void 0===w?[]:w,P=e.infoFormatOptions,j=void 0===P?[]:P,C=e.onChangeServiceFormat,I=void 0===C?function(){}:C,L=e.onChangeServiceProperty,M=void 0===L?function(){}:L,R=(e.currentWMSCatalogLayerSize,e.selectedService,e.onFormatOptionsFetch),z=void 0===R?function(){}:R,B=e.advancedRasterSettingsStyles,D=void 0===B?{}:B,_=e.tileSizeOptions,F=void 0===_?[256,512]:_,G=e.isLocalizedLayerStylesEnabled,U=e.onChangeMetadataTemplate,V=void 0===U?function(){}:U,W=e.onToggleTemplate,q=void 0===W?function(){}:W,Z=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ye);(0,n.useEffect)(function(){O.isNew&&M("autoSetVisibilityLimits",Z.autoSetVisibilityLimits)},[Z.autoSetVisibilityLimits]);var $=Oe(F),J=Object.keys(x.zy).map(function(e){return{label:o().createElement(s.A,{msgId:"layerProperties.serverTypeOption.".concat(T()(e))}),value:x.zy[e]}}),K=!(["csw"].includes(O.type)&&(null===(t=O.layerOptions)||void 0===t?void 0:t.serverType)===x.zy.NO_VENDOR);return o().createElement(g,ve({},Z,{onChangeServiceProperty:M,service:O}),!(!G||p()(O.type))&&"wms"===O.type&&o().createElement(i.gE,{controlId:"localized-styles",key:"localized-styles"},o().createElement(i.Sc,{"data-qa":"service-lacalized-layer-styles-option",onChange:function(e){return M("localizedLayerStyles",e.target.checked)},checked:!p()(O.localizedLayerStyles)&&O.localizedLayerStyles},o().createElement(s.A,{msgId:"catalog.enableLocalizedLayerStyles.label"})," ",o().createElement(d.A,{text:o().createElement(s.A,{msgId:"catalog.enableLocalizedLayerStyles.tooltip"})}))),o().createElement(i.gE,{controlId:"autoSetVisibilityLimits",key:"autoSetVisibilityLimits"},o().createElement(i.Sc,{onChange:function(e){return M("autoSetVisibilityLimits",e.target.checked)},checked:!p()(O.autoSetVisibilityLimits)&&O.autoSetVisibilityLimits},o().createElement(s.A,{msgId:"catalog.autoSetVisibilityLimits.label"})," ",o().createElement(d.A,{text:o().createElement(s.A,{msgId:"catalog.autoSetVisibilityLimits.tooltip"})}))),!p()(O.type)&&"wms"===O.type&&o().createElement(i.gE,{controlId:"singleTile",key:"singleTile"},o().createElement(i.Sc,{onChange:function(e){return M("layerOptions",be(be({},O.layerOptions),{},{singleTile:e.target.checked}))},checked:!p()(null==O||null===(r=O.layerOptions)||void 0===r?void 0:r.singleTile)&&O.layerOptions.singleTile},o().createElement(s.A,{msgId:"layerProperties.singleTile"})," ",o().createElement(d.A,{text:o().createElement(s.A,{msgId:"catalog.singleTile.tooltip"})}))),!p()(O.type)&&"csw"===O.type&&!O.excludeShowTemplate&&o().createElement(i.gE,{controlId:"metadata-template",key:"metadata-template",className:"metadata-template-editor"},o().createElement(i.Sc,{onChange:function(){return q()},checked:O&&O.showTemplate},o().createElement(s.A,{msgId:"catalog.showTemplate"})),o().createElement("br",null),O&&O.showTemplate&&o().createElement("div",null,o().createElement("span",null,o().createElement("p",null,o().createElement(s.A,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}}),"  "),o().createElement("pre",null,o().createElement(s.A,{msgId:"catalog.templateFormatDescriptionExample"})," ${ description }"))),o().createElement("div",null,O&&O.showTemplate&&o().createElement(k.A,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["link"]]},value:O.metadataTemplate||"",onChange:function(e){V(e&&"<p><br></p>"!==e?e:"")}}))),o().createElement(i.gE,{style:D,className:"form-group-flex"},o().createElement(i.mq,{className:"strong"},o().createElement(s.A,{msgId:"layerProperties.serverType"})),o().createElement(i.MG,null,o().createElement(Ee,{value:null===(a=O.layerOptions)||void 0===a?void 0:a.serverType,options:J,onChange:function(e){(null==e?void 0:e.value)===x.zy.NO_VENDOR&&M("layerOptions",be(be({},O.layerOptions),{},{enableInteractiveLegend:void 0})),M("layerOptions",be(be({},O.layerOptions),{},{serverType:null==e?void 0:e.value}))}}))),![x.zy.NO_VENDOR].includes(null===(l=O.layerOptions)||void 0===l?void 0:l.serverType)&&["wms","csw"].includes(O.type)&&o().createElement(i.gE,{controlId:"enableInteractiveLegend",key:"enableInteractiveLegend"},o().createElement(i.Sc,{"data-qa":"display-interactive-legend-option",onChange:function(e){return M("layerOptions",be(be({},O.layerOptions),{},{enableInteractiveLegend:e.target.checked}))},checked:!p()(null===(c=O.layerOptions)||void 0===c?void 0:c.enableInteractiveLegend)&&(null===(u=O.layerOptions)||void 0===u?void 0:u.enableInteractiveLegend)},o().createElement(s.A,{msgId:"layerProperties.enableInteractiveLegendInfo.label"})," ",o().createElement(d.A,{text:o().createElement(s.A,{msgId:"layerProperties.enableInteractiveLegendInfo.info"})}))),![x.zy.NO_VENDOR].includes(null===(m=O.layerOptions)||void 0===m?void 0:m.serverType)&&"wms"===O.type&&o().createElement(i.gE,{controlId:"useCacheOption",key:"useCacheOption"},o().createElement(i.Sc,{"data-qa":"display-interactive-legend-option",onChange:function(e){return M("layerOptions",be(be({},O.layerOptions),{},{remoteTileGrids:e.target.checked}))},checked:!p()(null===(f=O.layerOptions)||void 0===f?void 0:f.remoteTileGrids)&&(null===(y=O.layerOptions)||void 0===y?void 0:y.remoteTileGrids)},o().createElement(s.A,{msgId:"layerProperties.useCacheOptionInfo.label"})," ",o().createElement(d.A,{text:o().createElement(s.A,{msgId:"layerProperties.useCacheOptionInfo.info"})}))),o().createElement("hr",{style:{margin:"8px 0"}}),o().createElement(i.gE,{style:D,className:"form-group-flex"},o().createElement(i.mq,{className:"strong"},o().createElement(s.A,{msgId:"layerProperties.format.title"})),o().createElement("div",{className:"format-toolbar"},E?o().createElement(d.A,{bsStyle:"danger",placement:"top",showOnRender:!0,title:o().createElement(s.A,{msgId:"errorTitleDefault"}),text:o().createElement(s.A,{msgId:"layerProperties.formatError"})}):null,o().createElement(Se,{disabled:Z.formatsLoading||!K,tooltipId:"catalog.format.refresh",className:"square-button-md no-border",onClick:function(){return z(O.url,!0)},key:"format-refresh"},o().createElement(i.e6,{glyph:"refresh"})))),o().createElement(i.gE,{style:D,className:"form-group-flex"},o().createElement(i.mq,null,o().createElement(s.A,{msgId:"layerProperties.format.tile"})),o().createElement(i.MG,null,o().createElement(Ee,{disabled:!K,isLoading:Z.formatsLoading,onOpen:function(){return z(O.url)},value:O&&O.format,clearable:!0,noResultsText:Z.formatsLoading?"catalog.format.loading":"catalog.format.noOption",options:Z.formatsLoading?[]:A.map(function(e){return null!=e&&e.value?e:{value:e,label:e}}),onChange:function(e){return I(e&&e.value)}}))),o().createElement(i.gE,{style:D,className:"form-group-flex"},o().createElement(i.mq,null,o().createElement(s.A,{msgId:"layerProperties.format.information"})),o().createElement(i.MG,null,o().createElement(Ee,{disabled:!K,isLoading:Z.formatsLoading,onOpen:function(){return z(O.url)},value:O&&O.infoFormat,clearable:!0,options:Z.formatsLoading?[]:j.map(function(e){return{value:e,label:e}}),onChange:function(e){return M("infoFormat",e&&e.value)}}))),o().createElement("hr",{style:{margin:"8px 0"}}),o().createElement(i.gE,{style:D,className:"form-group-flex"},o().createElement(i.mq,{className:"strong"},o().createElement(s.A,{msgId:"layerProperties.wmsLayerTileSize"})),o().createElement(i.MG,null,o().createElement(Ee,{value:Oe([(null===(v=O.layerOptions)||void 0===v?void 0:v.tileSize)||256])[0],options:$,onChange:function(e){return M("layerOptions",be(be({},O.layerOptions),{},{tileSize:e&&e.value}))}}))),!p()(O.type)&&"csw"===O.type&&o().createElement(o().Fragment,null,o().createElement("hr",{style:{margin:"8px 0"}}),o().createElement(i.gE,{className:"form-group-flex sort-by"},o().createElement(i.mq,{className:"strong",style:{display:"flex",alignItems:"center"}},o().createElement(s.A,{msgId:"catalog.sortBy.label"}),o().createElement(N.A,{placement:"bottom",overlay:o().createElement(i.m_,{id:"sortby"},o().createElement(s.A,{msgId:"catalog.sortBy.tooltip"}))},o().createElement(i.e6,{style:{marginLeft:4},glyph:"info-sign"}))),o().createElement(i.MG,{style:{display:"flex"}},o().createElement(me.A,{type:"text",placeholder:"catalog.sortBy.placeholder",style:{textOverflow:"ellipsis",flex:1.5},value:null==O||null===(b=O.sortBy)||void 0===b?void 0:b.name,onChange:function(e){return M("sortBy",be(be({},null==O?void 0:O.sortBy),{},{name:e}))}}),o().createElement(Ee,{clearable:!1,wrapperStyle:{flex:1},value:null!==(h=null==O||null===(S=O.sortBy)||void 0===S?void 0:S.order)&&void 0!==h?h:"ASC",options:["ASC","DESC"].map(function(e){return{value:e,label:e}}),onChange:function(e){return M("sortBy",be(be({},null==O?void 0:O.sortBy),{},{order:e&&e.value}))}}))),o().createElement(H,{filter:null==O?void 0:O.filter,onChangeServiceProperty:M})),!p()(O.type)&&"wms"===O.type&&o().createElement(pe,{service:O,onChangeServiceProperty:M}))};var Ae=["onToggleAdvancedSettings"];const Pe=function(e){var t=e.onToggleAdvancedSettings,r=void 0===t?function(){}:t,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ae),a=n.service,i=void 0===a?{}:a,l=function(e){switch(e){case"tms":return A;case"wmts":case"wfs":default:return g;case"wms":case"csw":return we}}(i.type);return o().createElement(b.A,{useToolbar:!0,title:o().createElement(s.A,{msgId:"catalog.advancedSettings"}),expanded:!p()(i.showAdvancedSettings)&&i.showAdvancedSettings,onSwitch:r},o().createElement(l,n))};var je=r(858156),Te=r.n(je),Ce=r(907309),ke=r.n(Ce),xe=r(779893),Ie=r(23412),Le=r.n(Ie),Ne=r(839199);function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||Re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){if(e){if("string"==typeof e)return ze(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(e,t):void 0}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Be.apply(null,arguments)}var De=(0,C.A)("placeholder")(i.MJ),_e="custom",Fe="tms",Ge=(0,oe.A)(i.e6),Ue=function(e){var t=e.onClick,r=e.glyph,n=e.service,a=e.tooltipId,l=e.btnClassName;return o().createElement(i.MG.Addon,{onClick:function(){t(n)}},o().createElement(i.$n,{className:l||""},o().createElement(Ge,{glyph:r,tooltipId:a})))},Ve=function(e){var t=e.service,r=void 0===t?{}:t,n=e.addonsItems,a=void 0===n?[]:n,l=e.onChangeUrl,c=void 0===l?function(){}:l,u=o().createElement(De,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.urlPlaceHolders."+r.type,value:r&&r.url,onChange:function(e){return c(e.target.value)}});return o().createElement(i.gE,{controlId:"URL",bsSize:"medium"},o().createElement(i.fv,{xs:12},o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.url"})),o().createElement(i.MG,{style:{width:"100%"}},u,a.map(function(e){return o().createElement(e.Component,{key:e.name,itemComponent:function(e){return o().createElement(Ue,Be({},e,{service:r}))},service:r})}))))},We=function(e){return e===Fe?"TMS 1.0.0":e},qe=function(e){var t,r,n,a=e.serviceTypes,l=void 0===a?[]:a,c=e.onChangeServiceProperty,u=e.service,p=void 0===u?{}:u,m=e.onChangeUrl,f=void 0===m?function(){}:m,y=e.onChangeTitle,v=void 0===y?function(){}:y,g=(0,xe.Uh)("allowedProviders")||Te()(ke()(l||[],{name:"tms"}),"allowedProviders")||[],b=Object.keys(Ne.A).filter(function(e){return"ALL"===g||g.indexOf(e)>=0}),h=p===Fe?p:null==p||null===(t=p.provider)||void 0===t||null===(r=t.split)||void 0===r||null===(r=r.call(t,"."))||void 0===r?void 0:r[0],S=!h||h===_e,E=h===Fe,w=E||S;return o().createElement(i.gE,null,o().createElement(i.fv,{xs:12,sm:S?3:12,md:w?3:12},o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.tms.provider"})),o().createElement(De,{onChange:function(e){var t=e.target.value;c("provider","".concat(t)),t!==_e&&t!==Fe?v(t):S||E||v("")},value:h,componentClass:"select"},[_e,Fe].concat((n=b,function(e){if(Array.isArray(e))return ze(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||Re(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map(function(e){return{name:e,label:We(e)}}).map(function(e){return o().createElement("option",{value:e.name,key:e.name},e.label)}))),o().createElement(i.fv,{xs:12,sm:9,md:9},S?o().createElement(o().Fragment,null,o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.tms.urlTemplate"}),"  ",o().createElement(d.A,{text:o().createElement(O.A,{msgId:"catalog.tms.urlTemplateHint"})})),o().createElement(De,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.urlPlaceHolders.custom",value:p&&p.url,onChange:function(e){return f(e.target.value)}})):E?o().createElement(o().Fragment,null,o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.url"})),o().createElement(De,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.urlPlaceHolders.tms",value:p&&p.url,onChange:function(e){return f(e.target.value)}})):null))},Ze=function(e){var t,r=e.service,n=void 0===r?{}:r,a=e.onChangeServiceProperty,l=void 0===a?function(){}:a;return o().createElement(i.gE,{controlId:"URL"},o().createElement(i.fv,{xs:12},o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.urls"}),"  ",o().createElement(d.A,{text:o().createElement(O.A,{msgId:"catalog.cog.urlTemplateHint"})})),o().createElement(De,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.urlPlaceHolders.cog",value:n&&n.records&&(null===(t=n.records.map(function(e){return null==e?void 0:e.url}))||void 0===t?void 0:t.join(",")),onChange:function(e){var t,r=e.target.value||"";r=null===(t=r)||void 0===t||null===(t=t.split(","))||void 0===t||null===(t=t.map(function(e){return null==e?void 0:e.trim()}))||void 0===t?void 0:t.map(function(e,t){var r;return{url:e,title:(null==e||null===(r=e.split("/"))||void 0===r||null===(r=r.pop())||void 0===r?void 0:r.replace(".tif",""))||"COG_".concat(t)}}),l("records",r)}})))};const He=function(e){var t=e.service,r=void 0===t?{}:t,a=e.serviceTypes,l=e.onChangeTitle,c=e.onChangeUrl,u=e.onChangeServiceProperty,p=e.addonsItems,d=e.onChangeType,m=e.setValid,f=void 0===m?function(){}:m,y=Me((0,n.useState)(null),2),v=y[0],g=y[1],b=Me((0,n.useState)(null),2),h=b[0],S=b[1],E="tms"===r.type?qe:"cog"===r.type?Ze:Ve;return o().createElement(i.lV,{horizontal:!0},o().createElement(i.gE,{controlId:"title",key:"type-title-row"},o().createElement(i.fv,{key:"type",xs:12,sm:3,md:3},o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.type"})),o().createElement(De,{onChange:function(e){return d(e.target.value)},value:r&&r.type,componentClass:"select"},a.map(function(e){return o().createElement("option",{value:e.name,key:e.name},e.label)}))),o().createElement(i.fv,{key:"title",xs:12,sm:9,md:9},o().createElement(i.mq,null,o().createElement(s.A,{msgId:"catalog.serviceTitle"})),o().createElement(De,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.serviceTitlePlaceholder",value:r&&r.title,onChange:function(e){return l(e.target.value)}}))),o().createElement(E,{addonsItems:p,key:"url-row",serviceTypes:a,service:r,onChangeUrl:function(e){if(c(e),e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;try{var r=Le().parse(null!=t?t:window.location.href).protocol,n=Le().parse(e).protocol;return"https:"===r&&n?r===n?{valid:!0}:{valid:!1,errorMsgId:"catalog.invalidUrlHttpProtocol"}:{valid:!0}}catch(e){return{valid:!1,errorMsgId:"catalog.invalidArrayUsageForUrl"}}}(e,null,null==r?void 0:r.allowUnsecureLayers),n=t.valid,o=t.errorMsgId;"catalog.invalidUrlHttpProtocol"===o?(g(null),S(o)):(S(null),g(n?null:o),f(n))}},onChangeTitle:l,onChangeServiceProperty:u}),v?o().createElement(i.Fc,{bsStyle:"danger"},o().createElement(s.A,{msgId:v})):null,h?o().createElement(i.Fc,{bsStyle:"warning"},o().createElement(s.A,{msgId:h})):null)};function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$e.apply(null,arguments)}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ke(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Xe=(Ye=function(e){var t=e.service,r=void 0===t?{title:"",type:"wms",url:"",format:"image/png"}:t,u=e.serviceTypes,p=void 0===u?[{name:"csw",label:"CSW"}]:u,d=e.onChangeTitle,m=void 0===d?function(){}:d,f=e.onChangeUrl,y=void 0===f?function(){}:f,v=e.addonsItems,g=e.onChangeType,b=void 0===g?function(){}:g,h=e.id,S=e.urlTooltip,E=e.formatOptions,O=e.buttonStyle,w=e.saving,A=e.showFormatError,P=e.onChangeServiceFormat,j=void 0===P?function(){}:P,T=e.onChangeMetadataTemplate,C=void 0===T?function(){}:T,k=e.onToggleAdvancedSettings,x=void 0===k?function(){}:k,I=e.onChangeServiceProperty,L=void 0===I?function(){}:I,N=e.onToggleTemplate,M=void 0===N?function(){}:N,R=e.onToggleThumbnail,z=void 0===R?function(){}:R,B=e.onDeleteService,D=void 0===B?function(){}:B,_=e.onCancel,F=void 0===_?function(){}:_,G=e.onSaveService,U=void 0===G?function(){}:G,V=e.onFormatOptionsFetch,W=void 0===V?function(){}:V,q=e.selectedService,Z=e.isLocalizedLayerStylesEnabled,H=e.tileSizeOptions,$=void 0===H?[256,512]:H,J=e.formatsLoading,K=e.layerOptions,X=void 0===K?{}:K,Y=e.infoFormatOptions,Q=e.services,ee=e.autoSetVisibilityLimits,te=void 0!==ee&&ee,re=e.disabled,ne=Je((0,n.useState)(!0),2),oe=ne[0],ae=ne[1];return o().createElement(c.A,{bodyClassName:"ms2-border-layout-body catalog",header:o().createElement(He,{setValid:ae,service:r,serviceTypes:p,onChangeTitle:m,onChangeUrl:y,addonsItems:v,onChangeType:b,onChangeServiceProperty:L,urlTooltip:S})},o().createElement(i.lV,null,o().createElement(Pe,{setValid:ae,id:h,service:r,formatOptions:E,buttonStyle:O,saving:w,onChangeServiceFormat:j,onChangeMetadataTemplate:C,onToggleAdvancedSettings:x,onChangeServiceProperty:L,onToggleTemplate:M,onToggleThumbnail:z,isLocalizedLayerStylesEnabled:Z,tileSizeOptions:$,currentWMSCatalogLayerSize:X.tileSize?X.tileSize:256,selectedService:q,onFormatOptionsFetch:W,showFormatError:A,formatsLoading:J,infoFormatOptions:Y,autoSetVisibilityLimits:te}),o().createElement(i.gE,{controlId:"buttons",key:"buttons"},o().createElement(i.fv,{xs:12},o().createElement(l.A,{style:O,disabled:w||!oe,onClick:U,key:"catalog_add_service_button"},w?o().createElement(a.A,{size:12,style:{display:"inline-block"}}):null,o().createElement(s.A,{msgId:"save"})),r&&!r.isNew?o().createElement(l.A,{style:O,disabled:w,onClick:function(){return D(r,Q)},key:"catalog_delete_service_button"},o().createElement(s.A,{msgId:"catalog.delete"})):null,o().createElement(l.A,{style:O,disabled:re,onClick:F,key:"catalog_back_view_button"},o().createElement(s.A,{msgId:"cancel"}))))))},function(e){var t=Je((0,n.useState)(null),2),r=t[0],a=t[1];return o().createElement(Ye,$e({},e,{onCancel:function(){return r&&e.saving?null==r?void 0:r.abort():e.onChangeCatalogMode("view")},onSaveService:function(){var t="cog"===e.format?new AbortController:null;return a(t),e.onAddService({save:!0,controller:t})},disabled:!r&&e.saving}))});var Ye},724183:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(273517),o=r.n(n),a=r(223805),i=r.n(a),l=r(275705);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var s=["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e,t,r){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,r=e.caption,n=e.infoExtra,a=e.className,c=void 0===a?"":a,d=e.description,m=e.fullText,f=e.onClick,y=void 0===f?function(){}:f,v=e.onMouseEnter,g=void 0===v?function(){}:v,b=e.onMouseLeave,h=void 0===b?function(){}:b,S=e.preview,E=e.selected,O=e.size,w=e.style,A=void 0===w?{}:w,P=e.stylePreview,j=void 0===P?{}:P,T=e.styleTools,C=void 0===T?{}:T,k=e.title,x=e.loading,I=e.dragSymbol,L=void 0===I?"+":I,N=e.tools,M=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s);return o().createElement("div",{className:"mapstore-side-card".concat(E?" selected":"").concat(O?" ms-"+O:"").concat(c?" ".concat(c):"").concat(m?" full-text":""),onClick:function(e){return y(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({title:k,preview:S,description:d,caption:r,tools:N},M),e)},onMouseEnter:g,onMouseLeave:h,style:A},o().createElement("div",{className:"ms-head"},M.isDraggable&&M.connectDragSource&&M.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},L))),S&&o().createElement("div",{className:"mapstore-side-preview",style:j},S),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},k&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,k)),d&&o().createElement("div",{className:"mapstore-side-card-desc"},i()(d)?d:o().createElement("span",null,d)),r&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,r))),n),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:C},N),"sm"!==O&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(l.A,{className:"mapstore-side-card-loader",size:12,hidden:!x})))))),t&&o().createElement("div",{className:"ms-body"},t))}},136767:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(273517),o=r.n(n),a=r(8571),i=r(237811);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const s=function(e){var t=e.onValid,r=e.onError,c=e.editorRef,s=e.json,u=void 0===s?{}:s,p=e.editorWillUnmount,d=void 0===p?function(){}:p,m=l((0,n.useState)(JSON.stringify(u,!0,2)),2),f=m[0],y=m[1],v=l((0,n.useState)(),2),g=v[0],b=v[1];return(0,n.useEffect)(function(){try{var e=JSON.parse(f);b(),t(e)}catch(e){b(e),r(e)}},[f]),o().createElement("div",{className:"code-editor"},o().createElement(i.A,{ref:c,editorWillUnmount:function(){return d(f)},value:f,onBeforeChange:function(e,t,r){y(r)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),g&&o().createElement("div",{className:"error-area"},o().createElement("div",{className:"error-area-header"},o().createElement(a.A,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),o().createElement("div",{className:"error-area-body"},o().createElement(a.A,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:g.message}},function(e){return o().createElement("pre",{className:"error-msg"},e)}))))}},237811:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(273517);const o=(0,r(432060).A)()((0,n.lazy)(function(){return Promise.all([r.e(1774),r.e(7349)]).then(r.bind(r,127349))}))},682693:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(273517);const o=(0,r(432060).A)()((0,n.lazy)(function(){return Promise.all([r.e(5708),r.e(2341)]).then(r.bind(r,642341))}))},652710:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BackgroundSelectorAdd:()=>Rt,DEFAULT_ALLOWED_PROVIDERS:()=>Ct,default:()=>zt});var n=r(785072),o=r.n(n),a=r(380754);o()(a.A,{insert:"head",singleton:!1}),a.A.locals;var i=r(605556),l=r.n(i),c=r(273517),s=r.n(c),u=r(8117),p=r(811668),d=r(916589),m=r(801081),f=r(509095),y=r(621939),v=r(415392),g=r(904059),b=r(229665),h=r(269843),S=r.n(h),E=r(962193),O=r.n(E),w=r(711030),A=r(192016),P=r(154150),j=r(628017),T=r(8571),C=r(223805),k=r.n(C),x=r(400912),I=r.n(x),L=r(956449),N=r.n(L),M=r(344826),R=r.n(M),z=r(164045),B=r(223856),D=r(764932),_=r(833902),F=r(7157),G=r(306840),U=r(59399),V=r.n(U),W=r(584153);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(H=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function K(e,t,r){return(t=X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){var t=function(e){if("object"!=q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}var Y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return K(e=function(e,t,r){return t=$(t),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,r||[],$(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{showCopiedToolTip:!1}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this;if(!this.props.url)return null;var t=this.props.addAuthentication?(0,W.U8)(this.props.url):this.props.url,r=this.state.showCopiedToolTip?"catalog.copied":"catalog.copyToClipboard",n=s().createElement(u.m_,{id:"tooltip"},s().createElement(T.A,{msgId:r})),o=s().createElement(V(),{text:t,onCopy:this.props.onCopy},s().createElement(G.A,{placement:"right",overlay:n,onExited:function(){return e.setState({showCopiedToolTip:!1})}},s().createElement(w.A,{bsSize:this.props.bsSize,bsStyle:"primary",className:"link-button",onClick:function(){return e.setState({showCopiedToolTip:!0})}},s().createElement(u.e6,{glyph:"paperclip"})," ",this.props.labelId&&s().createElement(T.A,{msgId:this.props.labelId}))));return s().createElement("div",{className:"link-sharing"},s().createElement(u.gE,{bsSize:this.props.bsSize},s().createElement(u.MJ,{className:"link-input",type:"text",value:t,onChange:function(){}}),o))}}],n&&Z(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);K(Y,"propTypes",{url:l().string.isRequired,labelId:l().string,onCopy:l().func,bsSize:l().string,addAuthentication:l().bool}),K(Y,"defaultProps",{onCopy:function(){},bsSize:"small",addAuthentication:!1});const Q=Y;var ee=["links","buttonSize"];function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},re.apply(null,arguments)}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,le(n.key),n)}}function oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(oe=function(){return!!e})()}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function le(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}var ce,se,ue,pe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=ae(t),function(e,t){if(t&&("object"==te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oe()?Reflect.construct(t,r||[],ae(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(t,e),r=t,n=[{key:"render",value:function(){if(!this.props.links||0===this.props.links.length)return null;var e=this.props,t=e.links,r=e.buttonSize,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ee),o=t.map(function(e,t){return s().createElement(Q,re({key:t,url:e.url,labelId:e.labelId},n))}),a=s().createElement(u.AM,{className:"links-popover",id:"links-popover"},s().createElement("h5",null,s().createElement(T.A,{msgId:"catalog.share"})),o);return s().createElement(G.A,{container:this.props.popoverContainer,positionLeft:150,placement:"top",trigger:"click",overlay:a},s().createElement(w.A,{bsSize:r,className:"square-button-md",bsStyle:"primary"},s().createElement(u.e6,{glyph:"link"})))}}],n&&ne(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);ce=pe,se="propTypes",ue={links:l().array,onCopy:l().func,messages:l().object,locale:l().string,buttonSize:l().string,popoverContainer:l().object,addAuthentication:l().bool},(se=le(se))in ce?Object.defineProperty(ce,se,{value:ue,enumerable:!0,configurable:!0,writable:!0}):ce[se]=ue;const de=pe;var me=r(724183),fe=r(256951),ye=r(979882),ve=r.n(ye),ge=r(581436),be=r(529441),he=r.n(be),Se=r(6683),Ee=r(275705);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function we(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach(function(t){Ie(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Le(n.key),n)}}function Ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ce=function(){return!!e})()}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function Ie(e,t,r){return(t=Le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){var t=function(e){if("object"!=Oe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:t+""}var Ne=(0,z.A)(u.fk),Me=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ie(e=function(e,t,r){return t=ke(t),function(e,t){if(t&&("object"==Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ce()?Reflect.construct(t,r||[],ke(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{visibleExpand:!1,loading:!1}),Ie(e,"getTitle",function(t){return k()(t)?t[e.props.currentLocale]||t.default:t||""}),Ie(e,"renderThumb",function(t,r){var n=t||ve();return s().createElement(u._V,{className:"preview",src:n,alt:r&&e.getTitle(r.title)})}),Ie(e,"isSRSNotAllowed",function(t){var r;if("cog"!==t.serviceType){var n,o=t.ogcReferences||{SRS:[]},a=(null==o||null===(n=o.SRS)||void 0===n?void 0:n.length)>0&&(0,B.Zh)(o.SRS);return a&&!(0,D.isAllowedSRS)(e.props.crs,a)}var i=null==t||null===(r=t.sourceMetadata)||void 0===r?void 0:r.crs;return i&&!(0,D.isSRSAllowed)(i)}),Ie(e,"onAddToMap",function(t){var r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.serviceType;return e.isSRSNotAllowed(t)?e.props.onError("catalog.srs_not_allowed"):(e.setState({loading:!0}),b.A[o].getLayerFromRecord(t,{fetchCapabilities:!!t.fetchCapabilities,service:je(je({},e.props.service),{},{format:null!==(r=null===(n=e.props)||void 0===n||null===(n=n.service)||void 0===n?void 0:n.format)&&void 0!==r?r:e.props.defaultFormat}),layerBaseConfig:e.props.layerBaseConfig,removeParams:e.props.authkeyParamNames,catalogURL:"csw"===e.props.catalogType&&e.props.catalogURL?e.props.catalogURL+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+t.identifier:null,map:{projection:e.props.crs,resolutions:(0,Se._7)()}},!0).then(function(r){if(r){var n,o=r;null!==(n=e.props.service)&&void 0!==n&&n.protectedId&&e.props.selectedService&&(o=je(je({},o),{},{security:{type:"basic",sourceId:e.props.service.protectedId}})),e.addLayer(o,t)}}).finally(function(){e.setState({loading:!1})}))}),Ie(e,"getButtons",function(t){var r=e.props.showGetCapLinks?(0,B.Jx)(t):[],n=!O()(t.additionalOGCServices);return[].concat(we(n?[{Element:function(){var r;return s().createElement(Ne,{id:"add-layer-button",tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",title:e.state.loading?s().createElement(Ee.A,{className:"ms-loader ms-loader-primary"}):s().createElement(u.e6,{glyph:"plus"}),onClick:function(){return e.onAddToMap(t)},pullRight:"left",disabled:e.state.loading},s().createElement(u.Dr,{onClick:function(){return e.onAddToMap(t)}},s().createElement(T.A,{msgId:"catalog.additionalOGCServices.wms"})),Object.keys(null!==(r=t.additionalOGCServices)&&void 0!==r?r:{}).map(function(r){return s().createElement(u.Dr,{id:"ogc-".concat(r),onClick:function(){return e.onAddToMap(t.additionalOGCServices[r],r)}},s().createElement(T.A,{msgId:"catalog.additionalOGCServices.".concat(r)}))}))}}]:[{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",disabled:e.state.loading,loading:e.state.loading,glyph:"plus",onClick:function(){return e.onAddToMap(t)}}]),we(r.length>0?[{Element:function(){return s().createElement(de,{key:"sharing-links",popoverContainer:e,links:r,onCopy:e.props.onCopy,buttonSize:e.props.buttonSize,addAuthentication:e.props.addAuthentication})}}]:[]))}),Ie(e,"renderDescription",function(t){if(!t)return null;var r=(0,j.kA)(e.context.messages,"catalog.notAvailable");return e.state.fullText&&t.metadataTemplate?s().createElement("div",{className:"catalog-metadata ql-editor"},s().createElement(_.A,{html:(0,F.Zk)(t.metadataTemplate,t.metadata,function(e){return"".concat(R()(e.substring(2,e.length-1))," ").concat(r)})})):t.metadataTemplate?"":N()(t.description)?t.description.join(", "):t.description}),Ie(e,"isLinkCopied",function(t){return e.state[t]}),Ie(e,"setLinkCopiedStatus",function(t,r){e.setState(Ie({},t,r))}),Ie(e,"addLayer",function(t){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).background;if("backgroundSelector"===e.props.source)r?(e.props.onLayerAdd(je(je({},t),{},{group:"background"}),{source:e.props.source}),e.props.onAddBackground(t.id)):e.props.onAddBackgroundProperties({editing:!1,layer:t},!0);else{var n=e.props.zoomToLayer;e.props.onLayerAdd(t,{zoomToLayer:n})}}),Ie(e,"displayExpand",function(){return(e.descriptionRuler?e.descriptionRuler.clientWidth:0)>(e.sideCardDesc?e.sideCardDesc.clientWidth:0)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(t,e),function(e,t){return t&&Te(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){var e=(0,j.kA)(this.context.messages,"catalog.notAvailable"),t=this.props.record;this.setState({visibleExpand:!this.props.hideExpand&&(this.displayExpand()||!!(this.props.showTemplate&&t&&t.metadataTemplate&&(0,F.Zk)(t.metadataTemplate,t.metadata,function(t){return"".concat(R()(t.substring(2,t.length-1))," ").concat(e)})))})}},{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.props.record,r=t&&t.background,n=r&&I()((this.props.layers||[]).filter(function(e){return e.id===r.name||e.type===r.type&&e.source===r.source&&e.name===r.name}));return t?s().createElement("div",null,s().createElement(me.A,{style:{transform:"none",opacity:n?.4:1},fullText:this.state.fullText,preview:!this.props.hideThumbnail&&this.renderThumb(t&&t.thumbnail||r&&(r.name||r.source?ge.A[r.source][r.name]:he()),t),title:t&&this.getTitle(t.title),description:s().createElement("span",null,s().createElement("div",{className:!0,ref:function(t){e.sideCardDesc=t}},this.renderDescription(t))),caption:s().createElement("div",null,!this.props.hideIdentifier&&s().createElement("div",{className:"identifier"},t&&t.identifier),s().createElement("div",null,!t.isValid&&s().createElement("small",{className:"text-danger"},s().createElement(T.A,{msgId:"catalog.missingReference"}))),!this.props.hideExpand&&s().createElement("div",{className:"ms-ruler",style:{visibility:"hidden",height:0,whiteSpace:"nowrap",position:"absolute"},ref:function(t){e.descriptionRuler=t}},this.renderDescription(t))),tools:s().createElement(fe.A,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[{visible:!!n,Element:function(){return s().createElement(T.A,{msgId:"catalog.backgroundAlreadyAdded"})}}].concat(we(null!=t&&t.references&&!n?this.getButtons(t):[]),[{glyph:this.state.fullText?"chevron-down":"chevron-left",visible:this.state.visibleExpand,tooltipId:this.state.fullText?"collapse":"expand",onClick:function(){return e.setState({fullText:!e.state.fullText})}}])})})):null}}])}(s().Component);Ie(Me,"propTypes",{addAuthentication:l().bool,authkeyParamNames:l().array,buttonSize:l().string,catalogURL:l().string,catalogType:l().string,crs:l().string,currentLocale:l().string,hideThumbnail:l().bool,hideExpand:l().bool,hideIdentifier:l().bool,layerBaseConfig:l().object,onCopy:l().func,onError:l().func,onLayerAdd:l().func,record:l().object,showGetCapLinks:l().bool,zoomToLayer:l().bool,onPropertiesChange:l().func,onLayerChange:l().func,layers:l().array,onAdd:l().func,source:l().string,onAddBackgroundProperties:l().func,deletedId:l().string,clearModal:l().func,service:l().object,selectedService:l().string,showTemplate:l().bool,defaultFormat:l().string}),Ie(Me,"defaultProps",{buttonSize:"small",crs:"EPSG:3857",currentLocale:"en-US",onAddBackgroundProperties:function(){},hideThumbnail:!1,hideIdentifier:!1,hideExpand:!1,layerBaseConfig:{},onCopy:function(){},onError:function(){},onLayerAdd:function(){},onPropertiesChange:function(){},onLayerChange:function(){},clearModal:function(){},style:{},showGetCapLinks:!1,zoomToLayer:!0,layers:[],onAdd:function(){},source:"metadataExplorer",showTemplate:!1,changeLayerProperties:function(){},defaultFormat:"image/png"}),Ie(Me,"contextTypes",{messages:l().object});const Re=Me;function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Be.apply(null,arguments)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ve(n.key),n)}}function _e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_e=function(){return!!e})()}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fe(e)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function Ue(e,t,r){return(t=Ve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e){var t=function(e){if("object"!=ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ze(t)?t:t+""}var We=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ue(e=function(e,t,r){return t=Fe(t),function(e,t){if(t&&("object"==ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_e()?Reflect.construct(t,r||[],Fe(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"renderRecordItem",function(t){var r=e.props.recordItem||Re;return s().createElement(u.fv,Be({},e.props.column,{key:t.identifier}),s().createElement(r,{crs:e.props.crs,clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,onAddBackground:e.props.onAddBackground,source:e.props.source,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,hideThumbnail:e.props.hideThumbnail,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onError:e.props.onError,catalogURL:e.props.catalogURL,catalogType:e.props.catalogType,service:e.props.service,selectedService:e.props.selectedService,showTemplate:e.props.showTemplate,record:t,authkeyParamNames:e.props.authkeyParamNames,style:{height:"215px",maxHeight:"215px"},showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,defaultFormat:e.props.defaultFormat,layerBaseConfig:e.props.layerBaseConfig}))}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(t,e),function(e,t){return t&&De(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){if(this.props.records){var e=this.props.records instanceof Array?this.props.records:[this.props.records];return s().createElement(u.xA,{className:"record-grid",fluid:!0,style:this.props.style},s().createElement(u.fI,null,e.map(this.renderRecordItem)))}return null}}])}(s().Component);Ue(We,"propTypes",{crs:l().string,recordItem:l().element,catalogURL:l().string,catalogType:l().string,zoomToLayer:l().bool,onLayerAdd:l().func,onPropertiesChange:l().func,onError:l().func,records:l().array,authkeyParamNames:l().array,style:l().object,showGetCapLinks:l().bool,addAuthentication:l().bool,column:l().object,currentLocale:l().string,hideThumbnail:l().bool,hideIdentifier:l().bool,hideExpand:l().bool,source:l().string,onAddBackgroundProperties:l().func,modalParams:l().object,layers:l().object,clearModal:l().func,onAddBackground:l().func,showTemplate:l().bool,service:l().object,defaultFormat:l().string,layerBaseConfig:l().object}),Ue(We,"defaultProps",{column:{xs:12},currentLocale:"en-US",onLayerAdd:function(){},onPropertiesChange:function(){},onError:function(){},records:[],zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857"});const qe=We;function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},He.apply(null,arguments)}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach(function(t){et(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tt(n.key),n)}}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Xe=function(){return!!e})()}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qe(e,t)}function et(e,t,r){return(t=tt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e){var t=function(e){if("object"!=Ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ze(t)?t:t+""}var rt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return et(e=function(e,t,r){return t=Ye(t),function(e,t){if(t&&("object"==Ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xe()?Reflect.construct(t,r||[],Ye(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{catalogURL:null}),et(e,"onSearchTextChange",function(t){e.props.onChangeText(t.target.value)}),et(e,"onKeyDown",function(t){13===t.keyCode&&e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})}),et(e,"getServices",function(){return Object.keys(e.props.services).map(function(t){var r=e.props.services[t];return Object.assign({},{label:r.titleMsgId?(0,j.kA)(e.context.messages,r.titleMsgId):r.title,value:t})})}),et(e,"renderResult",function(){return e.props.result?0===e.props.result.numberOfRecordsMatched?s().createElement("div",null,s().createElement(T.A,{msgId:"catalog.noRecordsMatched"})):e.renderRecords():e.props.loadingError?e.renderError(e.props.loadingError):null}),et(e,"renderError",function(e){return s().createElement(u.Fc,{bsStyle:"danger"},s().createElement(T.A,{msgId:e||"catalog.error"}))}),et(e,"renderLoading",function(){return s().createElement("div",{className:"catalog-results loading"},s().createElement(Ee.A,{size:176}))}),et(e,"renderPagination",function(){if(e.props.result&&!e.props.isNewServiceAdded){var t=e.props.result.numberOfRecordsMatched,r=e.props.result.numberOfRecordsReturned,n=e.props.searchOptions.startPosition,o=e.props.pageSize,a=Math.floor(n/o),i=Math.ceil(t/o);return s().createElement("div",{className:"catalog-pagination"},s().createElement(u.dK,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:i,maxButtons:5,activePage:a+1,onSelect:e.handlePage}),s().createElement("div",{className:"push-right"},s().createElement(T.A,{msgId:"catalog.pageInfo",msgParams:{start:n,end:n+r-1,total:t}})))}return null}),et(e,"renderRecords",function(){var t="",r=!1,n=!1;if(e.props.services&&e.props.services[e.props.selectedService]){var o=e.props.services[e.props.selectedService];S()(o.metadataTemplate)||S()(o.showTemplate)||(r=o.showTemplate,t=o.metadataTemplate),S()(o.hideThumbnail)||(n=o.hideThumbnail)}var a=e.props.isNewServiceAdded?[]:e.props.records.map(function(e){return r&&t?Je(Je({},e),{},{metadataTemplate:t}):e});return s().createElement("div",{className:"catalog-results"},s().createElement(qe,He({},e.props.gridOptions,{crs:e.props.crs,key:"records",hideThumbnail:n,records:a,clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,source:e.props.source,authkeyParamNames:e.props.authkeyParamNames,catalogURL:e.isValidServiceSelected()&&e.props.services[e.props.selectedService].url||"",service:e.props.services[e.props.selectedService],selectedService:e.props.selectedService,catalogType:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].type,showTemplate:e.props.services[e.props.selectedService].showTemplate,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,onError:e.props.onError,showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,recordItem:e.props.recordItem,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onAddBackground:e.props.onAddBackground,defaultFormat:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].format,layerBaseConfig:e.props.layerBaseConfig,onAdd:function(){e.search({services:e.props.services,selectedService:e.props.selectedService})}})))}),et(e,"renderButtons",function(){var t=[];return e.props.includeSearchButton&&t.push(s().createElement(w.A,{bsStyle:"primary",style:e.props.buttonStyle,onClick:function(){var t,r=null===(t=e.props.services)||void 0===t?void 0:t[e.props.selectedService],n=null==r?void 0:r.protectedId,o=(0,W.pr)(n);n&&O()(o)?(e.props.onShowSecurityModal(!0),e.props.onSetProtectedServices([r])):e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})},className:e.props.buttonClassName,key:"catalog_search_button",disabled:e.props.loading||!e.isValidServiceSelected()},s().createElement(T.A,{msgId:"catalog.search"}))),e.props.includeResetButton&&t.push(s().createElement(w.A,{style:e.props.buttonStyle,onClick:e.reset,key:"catalog_reset_button"},s().createElement(T.A,{msgId:"catalog.reset"}))),t}),et(e,"renderTextSearch",function(){var t=s().createElement(u.MJ,{ref:"searchText",type:"text",style:{textOverflow:"ellipsis"},value:e.props.searchText,placeholder:(0,j.kA)(e.context.messages,"catalog.textSearchPlaceholder"),onChange:e.onSearchTextChange,onKeyDown:e.onKeyDown});return e.props.wrapOptions?s().createElement(u.Zk,{collapsible:!0,defaultExpanded:!1,header:(0,j.kA)(e.context.messages,"catalog.options")},t):t}),et(e,"isValidServiceSelected",function(){return void 0!==e.props.services[e.props.selectedService]}),et(e,"search",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.services,n=t.selectedService,o=t.start,a=void 0===o?1:o,i=t.searchText,l=void 0===i?"":i,c=(0,B.XU)(r[n]),s=r[n].type;e.props.isNewServiceAdded&&e.props.setNewServiceStatus(!1),e.props.isNewServiceAdded&&""===l||e.props.onSearch({format:s,url:c,startPosition:a,maxRecords:e.props.pageSize,text:l||"",options:{service:e.props.services[n]}})}),et(e,"reset",function(){e.props.onReset()}),et(e,"handlePage",function(t){if(t){var r=(t-1)*e.props.pageSize+1;e.search({services:e.props.services,selectedService:e.props.selectedService,start:r,searchText:e.props.searchText})}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(t,e),function(e,t){return t&&Ke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.props.selectedService&&this.isValidServiceSelected()&&this.props.services[this.props.selectedService].autoload&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(("view"===e.mode&&"edit"===this.props.mode||e.services!==this.props.services||e.selectedService!==this.props.selectedService)&&e.active&&this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}),e.active&&!1===this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}))}},{key:"render",value:function(){var e,t=this;return s().createElement(P.A,{key:"catalog-BorderLayout",bodyClassName:"ms2-border-layout-body catalog",header:s().createElement(u.lV,null,s().createElement(u.gE,{controlId:"labelService",key:"labelService"},s().createElement(u.mq,null,s().createElement(T.A,{msgId:"catalog.service"}))),s().createElement(u.gE,{controlId:"service",key:"service"},s().createElement(u.MG,{style:{width:"100%"}},s().createElement(A.Ay,{clearValueText:(0,j.kA)(this.context.messages,"catalog.clearValueText"),noResultsText:(0,j.kA)(this.context.messages,"catalog.noResultsText"),clearable:!0,options:this.getServices(),value:this.props.selectedService,onChange:function(e){return t.props.onChangeSelectedService(e&&e.value?e.value:"")},placeholder:(0,j.kA)(this.context.messages,"catalog.servicePlaceholder")}),this.props.canEdit&&this.isValidServiceSelected()&&!this.props.services[this.props.selectedService].readOnly?s().createElement(u.MG.Addon,{className:"btn",onClick:function(){return t.props.onChangeCatalogMode("edit",!1)}},s().createElement(u.e6,{glyph:"pencil"})):null,this.props.canEdit&&s().createElement(u.MG.Addon,{className:"btn",onClick:function(){return t.props.onChangeCatalogMode("edit",!0)}},s().createElement(u.e6,{glyph:"plus"})))),"3dtiles"!==(null===(e=this.props.services)||void 0===e||null===(e=e[this.props.selectedService])||void 0===e?void 0:e.type)&&s().createElement(u.gE,{controlId:"searchText",key:"searchText"},this.renderTextSearch()),s().createElement(u.gE,{controlId:"buttons",key:"buttons"},this.renderButtons(),this.props.layerError?this.renderError(this.props.layerError):null)),footer:this.renderPagination()},this.props.loading?this.renderLoading():this.renderResult())}}])}(s().Component);et(rt,"propTypes",{active:l().bool,searchText:l().string,addAuthentication:l().bool,buttonClassName:l().string,buttonStyle:l().object,currentLocale:l().string,loading:l().bool,format:l().string,crs:l().string,gridOptions:l().object,includeSearchButton:l().bool,includeResetButton:l().bool,loadingError:l().object,layerError:l().string,mode:l().string,onChangeCatalogMode:l().func,onChangeText:l().func,onChangeFormat:l().func,onChangeSelectedService:l().func,onPropertiesChange:l().func,onError:l().func,onLayerAdd:l().func,onReset:l().func,onSearch:l().func,onAddBackground:l().func,pageSize:l().number,records:l().array,authkeyParamNames:l().array,recordItem:l().element,result:l().object,searchOptions:l().object,selectedService:l().string,services:l().object,showGetCapLinks:l().bool,wrapOptions:l().bool,zoomToLayer:l().bool,hideThumbnail:l().bool,hideIdentifier:l().bool,hideExpand:l().bool,source:l().string,onAddBackgroundProperties:l().func,modalParams:l().object,layers:l().array,clearModal:l().func,layerBaseConfig:l().object,service:l().object,isNewServiceAdded:l().bool,setNewServiceStatus:l().func,onShowSecurityModal:l().func,onSetProtectedServices:l().func,canEdit:l().func}),et(rt,"contextTypes",{messages:l().object}),et(rt,"defaultProps",{buttonClassName:"search-button",buttonStyle:{marginBottom:"10px",marginRight:"5px"},currentLocale:"en-US",format:"csw",includeSearchButton:!0,includeResetButton:!1,mode:"view",onChangeCatalogMode:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeSelectedService:function(){},onPropertiesChange:function(){},onError:function(){},onLayerAdd:function(){},onReset:function(){},onSearch:function(){},changeLayerProperties:function(){},setNewServiceStatus:function(){},onShowSecurityModal:function(){},onSetProtectedServices:function(){},pageSize:4,records:[],loading:!1,services:{},wrapOptions:!1,zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857",service:{}});const nt=rt;var ot=r(156816),at=r(148936),it=r(486174),lt=r(307679),ct=r(286447),st=r(130711),ut=r(344297),pt=r(131127),dt=r(97401),mt=r(625885),ft=r(841533),yt=r(891543),vt=r(754364),gt=["onClick","selectedNodes","status","itemComponent","statusTypes","config"];function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ht.apply(null,arguments)}function St(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tt(n.key),n)}}function Et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Et=function(){return!!e})()}function Ot(e){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ot(e)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach(function(t){jt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jt(e,t,r){return(t=Tt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e){var t=function(e){if("object"!=bt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bt(t)?t:t+""}var Ct=["OpenStreetMap","OpenSeaMap","Stamen"],kt=(0,m.j8)({searchOptions:it.od,showFormatError:it.wA,result:it.z$,loadingError:it.Im,selectedService:it.Kz,mode:it.XU,services:it.C0,servicesWithBackgrounds:it.pY,layerError:it.xS,active:it.km,dockStyle:function(e){return(0,dt.o7)(e,{height:!0,right:!0},!0)},searchText:it.TW,group:it.fX,source:at.Mn,layers:lt.Kv,modalParams:at.JG,authkeyParamNames:it.Ns,saving:it.qb,openCatalogServiceList:it.nf,service:it.Tl,format:it.$d,selectedFormat:it._9,options:it.od,layerOptions:it.$w,tileSizeOptions:it.TA,currentLocale:ct.Pd,locales:ct.TI,pageSize:it.ah,loading:it.Uc,crs:pt.Bg,isLocalizedLayerStylesEnabled:ut.f8,formatsLoading:it.uy,formatOptions:it.io,infoFormatOptions:it.On,isNewServiceAdded:it.vf,canEdit:it.B2}),xt=(0,d.compose)((0,d.withProps)(function(e){var t=e.result,r=e.selectedFormat,n=e.options,o=e.layerOptions,a=e.services,i=e.selectedService,l=e.locales;return{records:t&&b.A[r].getCatalogRecords(t,Pt(Pt({},n),{},{layerOptions:o,service:a[i]}),l)||[]}}),(0,d.defaultProps)({buttonStyle:{marginBottom:"10px",marginRight:"5px"},formatOptions:[],advancedRasterStyles:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}}),(0,d.branch)(function(e){return"edit"===e.mode},(0,d.renderComponent)(ot.A)))(nt),It=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=Ot(t),function(e,t){if(t&&("object"==bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Et()?Reflect.construct(t,r||[],Ot(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}(t,e),function(e,t){return t&&St(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.props.onInitPlugin({editingAllowedRoles:this.props.editingAllowedRoles,editingAllowedGroups:this.props.editingAllowedGroups})}},{key:"componentWillUnmount",value:function(){this.props.closeCatalog()}},{key:"render",value:function(){var e=this,t={group:this.props.group||void 0},r=s().createElement(xt,ht({layerBaseConfig:t},this.props,{services:"backgroundSelector"===this.props.source?this.props.servicesWithBackgrounds:this.props.services}));return s().createElement(mt.A,{containerStyle:this.props.dockStyle,containerId:"catalog-root",containerClassName:this.props.active?"catalog-active":"",open:this.props.active,size:this.props.width,position:"right",title:s().createElement(T.A,{msgId:"catalog.title"}),onClose:function(){return e.props.closeCatalog()},glyph:"folder-open",style:this.props.dockStyle},s().createElement(u.Zk,{id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},r))}}])}(s().Component);jt(It,"propTypes",{id:l().string,source:l().string,active:l().bool,searchOnStartup:l().bool,serviceTypes:l().array,wrap:l().bool,wrapWithPanel:l().bool,panelStyle:l().object,panelClassName:l().string,closeCatalog:l().func,closeGlyph:l().string,buttonStyle:l().object,services:l().object,addonsItems:l().array,servicesWithBackgrounds:l().object,selectedService:l().string,style:l().object,dockProps:l().object,zoomToLayer:l().bool,isLocalizedLayerStylesEnabled:l().bool,width:l().number,dockStyle:l().object,group:l().string,onInitPlugin:l().func,editingAllowedRoles:l().array,editingAllowedGroups:l().array}),jt(It,"defaultProps",{id:"mapstore-metadata-explorer",serviceTypes:[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"},{name:"tms",label:"TMS",allowedProviders:Ct},{name:"wfs",label:"WFS"},{name:"3dtiles",label:"3D Tiles"},{name:"model",label:"IFC Model"},{name:"arcgis",label:"ArcGIS"}],active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"catalog-panel",closeCatalog:function(){},onInitPlugin:function(){},closeGlyph:"1-close",zoomToLayer:!0,width:ft.a0,dockProps:{dimMode:"none",fluid:!1,position:"right",zIndex:1030},dockStyle:{},group:null,services:{},servicesWithBackgrounds:{},editingAllowedRoles:["ALL"]});var Lt=function(e,t){var r=t.loadedPlugins,n=(0,yt.A)({items:e.items,loadedPlugins:r}).filter(function(e){return"url-addon"===e.target});return s().createElement(It,ht({},e,{addonsItems:n}))};Lt.contextTypes={loadedPlugins:l().object};var Nt=(0,p.connect)(kt,{clearModal:f.Zb,onSearch:y.yZ,onLayerAdd:y.VE,closeCatalog:y.QV,onChangeFormat:y.fM,onChangeServiceFormat:y.fm,onChangeUrl:y.CH,onChangeType:y.JA,onChangeTitle:y.tW,onChangeMetadataTemplate:y.c2,onChangeText:y.k0,onChangeServiceProperty:y.DF,onChangeSelectedService:y.Rt,onChangeCatalogMode:y.pp,onAddService:y.h1,onToggleAdvancedSettings:y.CP,onToggleThumbnail:y.bU,onToggleTemplate:y.ju,onDeleteService:y.hs,onError:y.ds,onAddBackgroundProperties:f.Xf,onFocusServicesList:y.X2,onPropertiesChange:g.ju,onAddBackground:f.vB,onFormatOptionsFetch:y.Al,onToggle:v.KP.bind(null,"backgroundSelector",null),onLayerChange:v.fN.bind(null,"backgroundSelector"),onStartChange:v.fN.bind(null,"backgroundSelector","start"),setNewServiceStatus:y.eo,onShowSecurityModal:vt.HB,onSetProtectedServices:vt.Bh,onInitPlugin:y.Wm})(Lt),Mt=(0,p.connect)(function(){return{}},{onClick:v.H3.bind(null,"metadataexplorer","enabled",!0,"group")})(function(e){var t=e.onClick,r=e.selectedNodes,n=e.status,o=e.itemComponent,a=e.statusTypes,i=e.config,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,gt),c=o;if(!1===i.activateAddLayerButton)return null;if([a.DESELECT,a.GROUP].includes(n)){var u,p=null==r||null===(u=r[0])||void 0===u?void 0:u.id;return s().createElement(c,ht({},l,{glyph:"add-layer",tooltipId:n===a.GROUP?"toc.addLayerToGroup":"toc.addLayer",onClick:function(){return t(p)}}))}return null}),Rt=(0,p.connect)((0,m.j8)({enabled:function(e){return e.controls&&e.controls.metadataexplorer&&e.controls.metadataexplorer.enabled}}),{onAdd:f.SU})(function(e){var t=e.source,r=e.onAdd,n=void 0===r?function(){}:r,o=e.itemComponent,a=e.canEdit,i=e.enabled,l=o;return a?s().createElement(l,{disabled:!!i,onClick:function(){n(t||"backgroundSelector")},tooltipId:"backgroundSelector.addTooltip",glyph:"plus"}):null});const zt={MetadataExplorerPlugin:Object.assign(Nt,{BurgerMenu:{name:"metadataexplorer",position:5,text:s().createElement(T.A,{msgId:"catalog.title"}),tooltip:"catalog.tooltip",icon:s().createElement(u.e6,{glyph:"folder-open"}),action:v.fN.bind(null,"metadataexplorer","enabled",!0,!0),doNotHide:!0,priority:1},BackgroundSelector:{name:"MetadataExplorer",doNotHide:!0,priority:1,Component:Rt,target:"background-toolbar"},TOC:{name:"MetadataExplorer",doNotHide:!0,priority:1,target:"toolbar",Component:Mt,position:2},SidebarMenu:{name:"metadataexplorer",position:5,text:s().createElement(T.A,{msgId:"catalog.title"}),tooltip:"catalog.tooltip",icon:s().createElement(u.e6,{glyph:"folder-open"}),action:v.fN.bind(null,"metadataexplorer","enabled",!0,!0),selector:function(e){return{style:{display:(0,st._z)(e)?"none":null}}},toggle:!0,doNotHide:!0,priority:1}}),reducers:{catalog:r(666899).A},epics:r(2834).A(b.A)}},666899:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var n=r(621939),o=r(754364),a=r(538704),i=r(905185),l=r(269843),c=r.n(l),s=r(668414),u=r.n(s),p=["isNew"];function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){y(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e,t,r){return(t=function(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={url:"",type:"wms",title:"",isNew:!0,autoload:!1,showAdvancedSettings:!1,showTemplate:!1,hideThumbnail:!1,metadataTemplate:"<p>${description}</p>"};const g=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:{services:{},selectedService:"",newService:{}},delayAutoSearch:1e3,loading:!1,showFormatError:!1,pageSize:4,services:{},selectedService:"",newService:{}},l=arguments.length>1?arguments[1]:void 0;switch(l.type){case n.DK:return f(f({},r),{},{editingAllowedRoles:(null==l||null===(e=l.options)||void 0===e?void 0:e.editingAllowedRoles)||r.editingAllowedRoles,editingAllowedGroups:(null==l||null===(t=l.options)||void 0===t?void 0:t.editingAllowedGroups)||r.editingAllowedGroups});case n.dB:return f(f({},r),{},{saving:l.status});case n.Dq:return Object.assign({},r,{result:l.result,searchOptions:l.searchOptions,loadingError:null,layerError:null,loading:!1});case n.W4:return Object.assign({},r,{result:null,loadingError:null,searchOptions:null});case n.LY:return Object.assign({},r,{result:null,searchOptions:null,loadingError:l.error,loading:!1,layerError:null});case n.j5:return Object.assign({},r,{result:null,loadingError:null,format:l.format,layerError:null});case n.dx:return Object.assign({},r,{layerError:l.error});case n.tM:return Object.assign({},r,{newService:l.isNew?v:Object.assign({},r.services&&r.services[r.selectedService||""]||{},{oldService:r.selectedService||""}),mode:l.mode,result:null,showFormatError:!1,loadingError:null,layerError:null});case a.mO:return r&&!c()(r.default)?l.config&&!c()(l.config.catalogServices)?Object.assign({},r,{services:l.config.catalogServices.services,selectedService:l.config.catalogServices.selectedService}):Object.assign({},r,{services:r.default.services,selectedService:r.default.selectedService}):r;case n.d6:return(0,i.hZ)("openCatalogServiceList",l.status,r);case n.jH:return(0,i.hZ)("searchOptions.text",l.text,r);case n.fE:return(0,i.hZ)("newService.".concat(l.property),l.value,r);case n.iK:return(0,i.hZ)("newService.title",l.title,r);case n.pr:return(0,i.hZ)("newService.url",l.url,(0,i.hZ)("showFormatError",!1,r));case n.Nu:return(0,i.hZ)("newService.format",l.format,r);case n.y3:var s=l.newType.toLowerCase(),d={};return"csw"!==s&&(d={showTemplate:!1,metadataTemplate:""}),Object.assign({},r,{newService:Object.assign({},r.newService,f({type:s},d))});case n.Wu:var m=l.service,g=m.isNew,b=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(m,p),h=g?b.title+u()():r.selectedService,S=Object.assign({},r.services,y({},h,b));return Object.assign({},r,{services:S,selectedService:h,mode:"view",result:null,loadingError:null,searchOptions:Object.assign({},r.searchOptions,{text:""}),layerError:null});case n.Nk:return f(f({},r),{},{services:l.services});case n.L_:return l.service!==r.selectedService?Object.assign({},r,{selectedService:l.service,result:null,loadingError:null,layerError:null}):r;case n.Yc:var E,O="";return delete(E=Object.assign({},r.services))[l.service],Object.keys(E).length&&(O=E[Object.keys(E)[0]].title),Object.assign({},r,{services:E,selectedService:O,mode:"view",result:null,loadingError:null,layerError:null});case n.gA:return(0,i.hZ)("newService.hideThumbnail",!r.newService.hideThumbnail,r);case n.oB:return(0,i.hZ)("loading",l.loading,r);case n.Wh:return(0,i.hZ)("newService.metadataTemplate",l.metadataTemplate,r);case n.AH:var w=(0,i.hZ)("newService.showTemplate",!r.newService.showTemplate,r);return w.newService.showTemplate&&(w=(0,i.hZ)("newService.metadataTemplate",w.newService.metadataTemplate||"<p>${description}</p>",w)),w;case n.sh:return(0,i.hZ)("newService.showAdvancedSettings",!r.newService.showAdvancedSettings,r);case n.cn:return(0,i.hZ)("formatsLoading",l.loading,r);case n.lv:return(0,i.hZ)("showFormatError",l.status,r);case n.un:return(0,i.hZ)("newService.supportedFormats",l.formats,(0,i.hZ)("newService.formatUrlUsed",l.url,r));case n.Og:return(0,i.hZ)("isNewServiceAdded",l.status,r);case o.Wj:var A=l.protectedService;return(0,i.hZ)("newService",A,r);case o.Lv:var P=l.protectedId,j=Object.keys(r.services).reduce(function(e,t){var n=r.services[t],o=(null==n?void 0:n.protectedId)===P?f(f({},n),{},{protectedId:void 0}):n;return f(f({},e),{},y({},t,o))},{});return(0,i.hZ)("services",j,r);default:return r}}},380754:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,".msgapi div.record-grid {\n    padding-left: 0;\n    padding-right: 0;\n}\n\n.msgapi div.record-grid .record-item{\n    height: auto;\n}\n.msgapi div.record-grid .record-item .panel-body{\n    padding: 0;\n}\n\n.msgapi #mapstore-catalog-panel button.search-button {\n    margin-bottom: 10px;\n}\n\n.msgapi #mapstore-catalog-panel .record-item {\n    min-height: 150px;\n}\n\n/*\n!important is needed because the library we used\nuse inline style which cannot be overridden unless\nwe use !important*/\n@media (max-width: 500px) {\n    .msgapi div .catalog-sidebar.nav-menu {\n        width: 100% !important\n    }\n}\n\n.msgapi #mapstore-metadata-explorer{\n    margin-bottom: 0\n}\n",""]);const a=o},979882:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/catalog/img/default.jpg"}}]);