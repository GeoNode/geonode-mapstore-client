(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[10304],{985564:(t,e,r)=>{"use strict";r.d(e,{$2:()=>j,DK:()=>E,Df:()=>w,F8:()=>n,Fr:()=>g,G2:()=>v,GT:()=>m,Ik:()=>F,Jq:()=>l,LL:()=>y,Lc:()=>N,MK:()=>A,NT:()=>s,OD:()=>f,RR:()=>_,SX:()=>h,Sz:()=>R,UT:()=>L,Uc:()=>b,Vd:()=>p,Vh:()=>M,Vm:()=>P,Vt:()=>O,Wm:()=>G,ZT:()=>k,_M:()=>d,aj:()=>i,eI:()=>D,f_:()=>U,gM:()=>I,h4:()=>C,iy:()=>o,mB:()=>T,nw:()=>x,pN:()=>a,pl:()=>c,uy:()=>u,vv:()=>S});var n="DASHBOARD:SET_AVAILABLE",o="DASHBOARD:SET_EDITING",i="DASHBOARD:SHOW_CONNECTIONS",a="DASHBOARD:TRIGGER_SAVE_MODAL",u="DASHBOARD:TRIGGER_SAVE_AS_MODAL",c="DASHBOARD:SAVE_DASHBOARD",l="DASHBOARD:SAVE_ERROR",s="DASHBOARD:DASHBOARD_SAVED",f="DASHBOARD:LOAD_DASHBOARD",p="DASHBOARD:DASHBOARD_RESET",y="DASHBOARD:DASHBOARD_LOADED",d="DASHBOARD:DASHBOARD_LOADING",m="DASHBOARD:UPDATE_SERVICES",v="DASHBOARD:SET_SELECTED_SERVICE",b="DASHBOARD:ADD_NEW_SERVICE",g="DASHBOARD:CATALOG_MODE",O="DASHBOARD:DELETE_SERVICE",h="DASHBOARD:SAVE_SERVICE_LOADING",A="DASHBOARD:EXPORT",S="DASHBOARD:IMPORT",E="DASHBOARD:INIT_PLUGIN",w=function(t){return{type:o,editing:t}},P=function(t){return{type:n,available:t}},j=function(t){return{type:i,show:t}},I=function(t){return{type:a,show:t}},T=function(t){return{type:u,show:t}},D=function(t){return{type:l,error:t}},R=function(t){return{type:s,id:t}},_=function(t){return{type:f,id:t}},L=function(){return{type:p}},F=function(t,e){return{type:y,resource:t,data:e}},C=function(t){return{type:d,name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading",value:t}},M=function(t){return{type:"DASHBOARD:DASHBOARD_LOAD_ERROR",error:t}},N=function(t,e){return{type:v,service:t,services:e}},x=function(t,e,r){return{type:b,service:t,services:e,isNew:r}},U=function(t,e){return{type:g,mode:t,isNew:e}},k=function(t,e){return{type:O,service:t,services:e}},G=function(t){return{type:E,options:t}}},223062:(t,e,r)=>{"use strict";r.d(e,{$A:()=>M,$P:()=>At,AM:()=>et,AW:()=>Y,Ap:()=>X,Bb:()=>St,Bo:()=>Tt,CS:()=>Ft,DB:()=>N,Dt:()=>jt,EV:()=>u,Fc:()=>K,Gs:()=>ot,Jd:()=>nt,Js:()=>ct,Ke:()=>yt,Kh:()=>pt,Lp:()=>T,MI:()=>I,Mj:()=>b,PN:()=>U,Q5:()=>x,QJ:()=>R,Ro:()=>_,Rx:()=>D,T:()=>d,TF:()=>p,TK:()=>j,TS:()=>Pt,Tk:()=>It,Tq:()=>E,Ur:()=>z,Vq:()=>Dt,Wu:()=>Ot,XD:()=>Ct,Xb:()=>h,YX:()=>st,Zi:()=>dt,Zs:()=>k,Zv:()=>ft,bA:()=>Lt,bB:()=>vt,bY:()=>_t,cH:()=>q,cL:()=>Et,ds:()=>O,eQ:()=>s,et:()=>J,g:()=>rt,g5:()=>C,g8:()=>V,gJ:()=>i,hA:()=>ht,hT:()=>ut,hX:()=>gt,hr:()=>a,hz:()=>B,j3:()=>S,jR:()=>$,k8:()=>v,kR:()=>G,lS:()=>tt,m5:()=>f,mj:()=>W,pp:()=>y,pr:()=>l,qG:()=>Z,qS:()=>at,qT:()=>g,qi:()=>m,qq:()=>F,qu:()=>mt,rQ:()=>H,ue:()=>Q,vH:()=>c,vT:()=>lt,wK:()=>Rt,wd:()=>it,y$:()=>P,yP:()=>bt,yq:()=>A,yz:()=>L,ze:()=>w});var n=r(995531);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var i="ADD_FILTER_FIELD",a="REMOVE_FILTER_FIELD",u="UPDATE_FILTER_FIELD",c="UPDATE_EXCEPTION_FIELD",l="ADD_GROUP_FIELD",s="UPDATE_LOGIC_COMBO",f="REMOVE_GROUP_FIELD",p="CHANGE_CASCADING_VALUE",y="EXPAND_ATTRIBUTE_PANEL",d="EXPAND_SPATIAL_PANEL",m="QUERYFORM:EXPAND_CROSS_LAYER",v="QUERYFORM:SET_CROSS_LAYER_PARAMETER",b="QUERYFORM:RESET_CROSS_LAYER_FILTER",g="SELECT_SPATIAL_METHOD",O="SELECT_VIEWPORT_SPATIAL_METHOD",h="UPDATE_GEOMETRY",A="SELECT_SPATIAL_OPERATION",S="CHANGE_SPATIAL_ATTRIBUTE",E="CHANGE_SPATIAL_FILTER_VALUE",w="REMOVE_SPATIAL_SELECT",P="SHOW_SPATIAL_DETAILS",j="QUERY_FORM_SEARCH",I="QUERY_FORM_RESET",T="SHOW_GENERATED_FILTER",D="CHANGE_DWITHIN_VALUE",R="ZONE_SEARCH",_="ZONE_SEARCH_ERROR",L="ZONE_FILTER",F="ZONE_CHANGE",C="ZONES_RESET",M="SIMPLE_FILTER_FIELD_UPDATE",N="ADD_SIMPLE_FILTER_FIELD",x="REMOVE_SIMPLE_FILTER_FIELD",U="REMOVE_ALL_SIMPLE_FILTER_FIELDS",k="UPDATE_FILTER_FIELD_OPTIONS",G="LOADING_FILTER_FIELD_OPTIONS",B="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",H="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",q="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",Y="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD_OPTIONS",V="SET_AUTOCOMPLETE_MODE",Q="TOGGLE_AUTOCOMPLETE_MENU",z="QUERYFORM:LOAD_FILTER",W="QUERYFORM:UPSERT_FILTERS",$="QUERYFORM:REMOVE_FILTERS",Z="QUERYFORM:CHANGE_MAP_EDITOR",X=function(t){return{type:Z,mapData:t}};function J(t){return{type:i,groupId:t}}function K(t,e){return{type:l,groupId:t,index:e}}function tt(t){return{type:a,rowId:t}}function et(t,e){return{type:Q,rowId:t,status:e,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function rt(t,e,r,n){return{type:u,rowId:t,fieldName:e,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function nt(t,e){return{type:c,rowId:t,exceptionMessage:e}}function ot(t,e){return{type:s,groupId:t,logic:e}}function it(t){return{type:V,status:t}}function at(t){return{type:f,groupId:t}}function ut(t){return{type:p,attributes:t}}function ct(t){return{type:y,expand:t}}function lt(t){return{type:d,expand:t}}function st(t){return{type:m,expand:t}}function ft(t,e){return{type:v,key:t,value:e}}function pt(t,e){return{type:g,fieldName:e,method:t}}function yt(){return{type:O}}function dt(t){return{type:h,geometry:t}}function mt(t,e){return{type:A,fieldName:e,operation:t}}function vt(t){return{type:S,attribute:t}}function bt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.feature,r=t.srsName,n=t.collectGeometries,o=t.style,i=t.options,a=t.value;return{type:E,value:a,collectGeometries:n,options:i,geometry:e&&e.geometry,feature:e,srsName:r,style:o}}function gt(){return{type:w}}function Ot(t){return{type:P,show:t}}function ht(t){return{type:D,distance:t}}function At(t,e){return{type:j,searchUrl:t,filterObj:e}}function St(t){return{type:z,filter:t}}function Et(t){return{type:I,skip:t}}function wt(t,e){return{type:_,error:t,id:e}}function Pt(t,e){return{type:R,active:t,id:e}}function jt(t,e,r){return function(i){return n.A.post(t,e,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(n){var a=n.data;if("object"!==o(a))try{a=JSON.parse(a)}catch(n){i(wt("Search result broken ("+t+":   "+e+"): "+n.message,r))}i(function(t,e){return{type:L,data:t,id:e}}(a,r)),i(Pt(!1,r))})).catch((function(t){i(wt(t,r))}))}}function It(t,e){return{type:F,id:t,value:e}}function Tt(t){return{type:B,rowId:(new Date).getTime(),groupId:t}}function Dt(t,e,r,n){return{type:H,rowId:t,fieldName:e,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function Rt(t){return{type:q,rowId:t}}function _t(){return{type:b}}function Lt(t,e){return{type:G,status:t,filterField:e,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function Ft(t,e,r){return{type:k,filterField:t,options:e,valuesCount:r}}function Ct(t,e,r){return{type:Y,filterField:t,options:e,valuesCount:r}}},654456:(t,e,r)=>{"use strict";r.d(e,{GW:()=>l,IY:()=>i,Ii:()=>g,Jj:()=>m,KF:()=>u,LO:()=>O,Lk:()=>I,Lm:()=>n,MN:()=>E,Mb:()=>S,P:()=>R,Rb:()=>d,UR:()=>h,V8:()=>v,VZ:()=>D,Ve:()=>p,Xi:()=>b,Z4:()=>w,ZJ:()=>a,_Z:()=>y,cv:()=>s,f4:()=>f,jF:()=>A,oR:()=>T,pF:()=>c,qD:()=>o,qu:()=>j,x5:()=>P}),r(995531);var n="LAYER_SELECTED_FOR_SEARCH",o="FEATURE_TYPE_SELECTED",i="FEATURE_TYPE_LOADED",a="FEATURE_LOADED",u="FEATURE_LOADING",c="FEATURE_TYPE_ERROR",l="FEATURE_ERROR",s="QUERY_CREATE",f="QUERY:UPDATE_QUERY",p="QUERY_RESULT",y="QUERY_ERROR",d="RESET_QUERY",m="QUERY",v="INIT_QUERY_PANEL",b="QUERY:TOGGLE_SYNC_WMS",g="QUERY:TOGGLE_LAYER_FILTER";function O(){return{type:b}}function h(){return{type:g}}function A(){return{type:v}}function S(t,e){return{type:o,url:t,typeName:e,fields:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],owner:arguments.length>3?arguments[3]:void 0}}function E(t,e,r){return{type:i,typeName:t,featureType:e,owner:r}}function w(t,e){return{type:c,typeName:t,error:e}}function P(t){return{type:u,isLoading:t}}function j(t,e,r,n,o){return{type:p,searchUrl:e,filterObj:r,result:t,queryOptions:n,reason:o}}function I(t){return{type:y,error:t}}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.updates,r=t.reason,n=t.useLayerFilter;return{type:f,updates:e,reason:r,useLayerFilter:n}}function D(t,e,r){return{type:s,searchUrl:t,filterObj:e,owner:r}}function R(t,e,r,n){return{type:m,searchUrl:t,filterObj:e,queryOptions:r,reason:n}}},962787:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});const n=r(54783).Ay},50173:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var n=r(273517),o=r.n(n),i=r(444003);function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a.apply(null,arguments)}const u=function(t){return function(e){var r;return o().createElement(t,a({mapType:(0,i.Jq)(null==e||null===(r=e.map)||void 0===r?void 0:r.visualizationMode)},e))}}},437430:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});var n=r(273517),o=r.n(n),i=r(605556),a=r.n(i),u=r(6683);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return(e=function(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){return function(e){var r,i,a,c=(null==e||null===(r=e.map)||void 0===r?void 0:r.projection)||"EPSG:3857",l=(null==e||null===(i=e.map)||void 0===i||null===(i=i.mapOptions)||void 0===i||null===(i=i.view)||void 0===i?void 0:i.DPI)||null,f=null==e||null===(a=e.map)||void 0===a||null===(a=a.mapOptions)||void 0===a||null===(a=a.view)||void 0===a?void 0:a.scales,p=(0,n.useMemo)((function(){return f?(0,u.C$)(f,c,l):null}),[f,c,l]),y=p?s(s({},e),{},{map:s(s({},e.map),{},{mapOptions:s(s({},e.map.mapOptions),{},{view:s(s({},e.map.mapOptions.view),{},{resolutions:p})})})}):e;return o().createElement(t,y)}};p.propTypes={Component:a().element};const y=p},159686:(t,e,r)=>{"use strict";r.d(e,{A:()=>p});var n=r(916589),o=r(245528),i=r(45388),a=r.n(i);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=function(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=(0,n.mapPropsStreamWithConfig)(o.A);const p=(0,n.compose)((0,n.defaultProps)({dataStreamFactory:function(){return a().Observable.of({})}}),f((function(t){return t.take(1).switchMap((function(e){return e.dataStreamFactory(t.startWith(e),e)})).combineLatest(t,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(l({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),t)}))})))},743445:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var n=r(273517),o=r.n(n),i=r(192016),a=r(8117),u=r(962193),c=r.n(u),l=r(858156),s=r.n(l),f=r(739875),p=r(551783),y=r(8571),d=r(711030),m=r(6683);function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var b=(0,p.A)("placeholder")(a.MJ),g=(0,p.A)(["noResultsText"])(i.Ay),O=(0,f.A)(d.A);const h=function(t){var e,r=t.maps,i=void 0===r?[]:r,u=t.onChange,l=void 0===u?function(){}:u,f=t.value,p=void 0===f?"":f,d=t.disabled,h=void 0!==d&&d,A=t.className,S=void 0===A?"":A,E=t.editorData,w=void 0===E?{}:E,P=t.setSelectedMap,j=void 0===P?function(){}:P,I=t.setEmptyMap,T=void 0===I?function(){}:I,D=t.emptyMap,R=void 0!==D&&D,_=t.withContainer,L=void 0!==_&&_,F=t.selectedMap,C=void 0===F?{}:F,M=function(t){var e;if(1===t.length)return null;var r=((null==t?void 0:t.find((function(t){return(null==t?void 0:t.mapId)===p})))||{}).size;return!L&&(null==r?void 0:r.width)<=400?o().createElement(O,{tooltipId:"widgets.mapSwitcher.infoOnHide",className:"square-button-md no-border",key:"info-sign"},o().createElement(a.e6,{glyph:"info-sign"})):o().createElement(g,{className:S,disabled:h,noResultsText:"widgets.mapSwitcher.noResults",options:c()(t)?[]:t.map((function(t){return{label:t.name,value:t.mapId}})),onChange:function(t){return t.value&&l("selectedMapId",t.value)},value:p||(null==t||null===(e=t[0])||void 0===e?void 0:e.mapId),clearable:!1})};if(!L)return M(i);var N,x,U=(N=(0,n.useState)(""),x=2,function(t){if(Array.isArray(t))return t}(N)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(N,x)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}(N,x)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),k=U[0],G=U[1];return(0,n.useEffect)((function(){if(!c()(null==w?void 0:w.maps)&&L){var t,e,r,n=null==w||null===(t=w.maps)||void 0===t?void 0:t.find((function(t){return t.name===m.j4}));c()(n)?(T(!1),e=s()(w,"maps[0]",{}),c()(w.selectedMapId)?l("selectedMapId",e.mapId):e=null===(r=w.maps)||void 0===r?void 0:r.find((function(t){return t.mapId===w.selectedMapId}))):(T(!0),e=n),j(e)}}),[w.maps,w.selectedMapId,L,j,l,T]),R||(null===(e=w.maps)||void 0===e?void 0:e.length)>1?o().createElement("div",{className:"widget-selector"},R?o().createElement("div",{style:{display:"inline-flex"}},o().createElement(b,{className:"widget-empty-map",type:"text",placeholder:"widgets.mapSwitcher.placeholder",style:{textOverflow:"ellipsis"},value:k,onChange:function(t){return G(t.target.value)}}),o().createElement(O,{bsStyle:"primary",disabled:!k,onClick:function(){l("maps[".concat(C.mapId,"].name"),k),l("selectedMapId",C.mapId)}},o().createElement(a.e6,{glyph:"ok"}))):o().createElement(o().Fragment,null,o().createElement("div",{className:"widget-selector-label"},o().createElement("strong",null,o().createElement(y.A,{msgId:"widgets.mapSwitcher.selectLabel"}))),M(w.maps))):null}},540285:(t,e,r)=>{"use strict";r.d(e,{A:()=>p,p:()=>y});var n=r(916589),o=r(332222),i=r(397619);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const p=(0,n.compose)(o.A,(0,n.compose)((0,n.withState)("showTable","setShowTable",!1),(0,n.withHandlers)({toggleTableView:function(t){var e=t.setShowTable,r=t.showTable;return function(){return e(!r)}}}),(0,n.withProps)((function(t){var e=t.widgetTools,r=void 0===e?[]:e,n=t.toggleTableView,o=void 0===n?function(){}:n,i=t.traces;return{widgetTools:[].concat(s(r),s(1===(null==i?void 0:i.length)?[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return o()}}]:[]))}}))),(0,i.jZ)(),(0,i.bU)(),(0,i.o$)(),(0,n.branch)((function(t){return!t.showTable}),(0,i.rk)()));var y=(0,n.compose)((0,n.withProps)((function(t){var e,r=t.charts,n=void 0===r?[]:r,o=t.selectedChartId,i=t.options,a=void 0===i?{}:i,u=(null==n?void 0:n.find((function(t){return t.chartId===o})))||{};return c(c({},u),{},{options:c(c({},a),null!==(e=null==u?void 0:u.options)&&void 0!==e?e:{}),charts:n,selectedChartId:o})})))},332222:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});const n=(0,r(916589).withState)("confirmDelete","toggleDeleteConfirm",!1)},817603:(t,e,r)=>{"use strict";r.d(e,{A:()=>R});var n=r(907309),o=r.n(n),i=r(962193),a=r.n(i),u=r(244383),c=r.n(u),l=r(916589),s=r(764932),f=r(102685),p=r(994959),y=r(159452),d=r(674466),m=r(58884);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}var b=["traces"],g=["nextTraces"];function O(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){return(e=function(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var P=function(t,e){var r=(0,m.rz)(t,e),n=o()(Object.keys(r||{}),(function(){return"cql_filter"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()}));return r&&n&&r[n]},j=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerFilter},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mapSync,r=t.geomProp,n=t.dependencies,o=void 0===n?{}:n,i=t.layer,a=t.quickFilters,u=t.options,c=t.filter,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e!==l.mapSync||o.viewport!==(l.dependencies&&l.dependencies.viewport)||o.quickFilters!==(l.dependencies&&l.dependencies.quickFilters)||o.options!==(l.dependencies&&l.dependencies.options)||r!==l.geomProp||c!==l.filter||u!==l.options||a!==l.quickFilters||P(i,o)!==P(l.layer,l.dependencies)||j(i)!==j(l.layer)},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mapSync,r=t.geomProp,n=void 0===r?"the_geom":r,o=t.dependencies,i=void 0===o?{}:o,u=t.filter,c=t.layer,l=t.quickFilters,v=t.options,b=i.viewport,g=(0,y.A)({gmlVersion:"3.1.1"}),O=(0,d.A)(g),h=g.filter,w=g.property,j=g.and,I=(c||{}).layerFilter,T={},D={},R=(0,m.gq)(u,l,v);if(!e)return{filter:!a()(R)||I?h(j.apply(void 0,E(I&&!I.disabled?(0,f.hG)(I,"1.1.0","ogc"):[]).concat(E(R?(0,f.hG)(R,"1.1.0","ogc"):[])))):void 0};if(c&&i&&i.quickFilters&&i.layer&&c.name===i.layer.name&&(R=A(A({},R),(0,m.gq)(R,i.quickFilters,i.options))),c&&i&&i.filter&&i.layer&&c.name===i.layer.name&&(R=A(A({},R),(0,f.mA)([R,i.filter]))),i.viewport){var _=Object.keys(b.bounds).reduce((function(t,e){return A(A({},t),{},S({},e,parseFloat(b.bounds[e])))}),{});T=(0,s.getViewportGeometry)(_,b.crs);var L=P(c,i);return D=L?[O((0,p.LF)(L))]:[],{filter:h(j.apply(void 0,E(D).concat(E(I&&!I.disabled?(0,f.hG)(I,"1.1.0","ogc"):[]),E(R?(0,f.hG)(R,"1.1.0","ogc"):[]),[w(n).intersects(T)])))}}return{filter:h(j.apply(void 0,E(I?(0,f.hG)(I,"1.1.0","ogc"):[]).concat(E(R?(0,f.hG)(R,"1.1.0","ogc"):[]))))}},D=["mapSync","dependencies","dependenciesMap","widgets"];const R=(0,l.compose)((0,l.withPropsOnChange)((function(t,e){var r=t.traces,n=O(t,b),o=e.nextTraces,i=void 0===o?[]:o,a=O(e,g);return r?r.some((function(t,e){return I(A(A({},c()(n,D)),t),A(A({},c()(a,D)),i[e]))})):I(n,a)}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.traces?{traces:t.traces.map((function(e){return A(A({},e),T(A(A({},c()(t,D)),e)))}))}:T(t)})))},367867:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});var n=r(916589),o=r(58884),i=r(907309),a=r.n(i),u=["traces"];function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return(e=function(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){var e=t.dependencies,r=void 0===e?{}:e,n=t.options,i=t.layer,u=void 0===i?{}:i,c=(0,o.rz)(u,r),l=a()(Object.keys(c||{}),(function(){return"viewparams"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()})),f=c&&l&&c[l];return{options:f?s(s({},n),{},{viewParams:f}):n}};const y=(0,n.compose)((0,n.withPropsOnChange)(["dependencies","options","traces"],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.traces,r=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,u);return e?{traces:e.map((function(t){return s(s({},t),p(s(s({},t),{},{dependencies:r.dependencies})))}))}:p(r)})))},859009:(t,e,r)=>{"use strict";r.d(e,{A:()=>f});var n=r(916589),o=r(244383),i=r.n(o);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t?Object.keys(t).reduce((function(o,a){if("dependenciesMap"===a&&e[t[a]]&&e[t.mapSync]&&e[t[a]][a]&&-1===e[t[a]][a].indexOf(r)&&n.every((function(r){return e[t[a]][a]!==r}))){var u=n.concat(e[t[a]][a]);return c(c({},o),i()(s(e[t[a]],e,r,u),["options","layer","quickFilters","filter","dependenciesMap"]))}return c(c({},o),{},l({},a,e[t[a]]))}),{}):e};const f=(0,n.withProps)((function(t){var e=t.dependenciesMap,r=t.dependencies,n=t.id;return{dependencies:e?s(e,r,n):r,dependenciesMap:e}}))},992717:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(563864),o=r(230454);const i=(0,n.A)((function(t){var e,r=t.data,n=void 0===r?[]:r;return!n||0===n.length||0===(null==n||null===(e=n.flat())||void 0===e?void 0:e.length)}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mapSync;return{iconFit:t.iconFit,messageId:e?"widgets.errors.nodatainviewport":"widgets.errors.nodata",glyph:"stats"}}),o.A)},537336:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var n=r(273517),o=r.n(n),i=r(563864),a=r(8571);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e,r){return(e=function(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.A)((function(t){var e,r=t.map,n=void 0===r?{}:r;return!(null!=n&&null!==(e=n.layers)&&void 0!==e&&e.length)}),c(c({},t?"tooltip":"title",o().createElement(a.A,{msgId:"widgets.errors.noLegend"})),"description",!t&&o().createElement(a.A,{msgId:"widgets.errors.noLegendDescription"})))}},721930:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var n=r(273517),o=r.n(n),i=r(8571),a=r(563864),u=r(230454);const c=(0,a.A)((function(t){return!!t.error}),(function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.error,a=r.layer,c=-1!==(null==n||null===(t=n.message)||void 0===t?void 0:t.indexOf("Could not locate"))?o().createElement(u.A,{glyph:"stats",messageId:"widgets.errors.layerNotAvailable",msgParams:{layerName:null==a?void 0:a.name}}):function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"ECONNABORTED"===t.code?o().createElement(i.A,{msgId:"widgets.errors.timeoutExpired"}):t.message?o().createElement(i.A,{msgId:"widgets.errors.genericErrorWithMessage",msgParams:{message:t.message}}):o().createElement(i.A,{msgId:"widgets.errors.genericError"})}(n);return{glyph:-1!==(null==n||null===(e=n.message)||void 0===e?void 0:e.indexOf("Could not locate"))?null:"warning-sign",iconFit:!1,content:c}}))},510448:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var n=r(916589),o=r(499084),i=r.n(o),a=r(858156),u=r.n(a),c=r(332222),l=r(397619),s=r(6683),f=r(71665),p=r(112585),y=r(519108);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}var m=["group"];function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return(e=function(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const h=(0,n.compose)((0,n.withProps)((function(t){var e=t.dependencies,r=void 0===e?{}:e,n=t.dependenciesMap,o=void 0===n?{}:n,a=r[o.layers]||r.layers||[],c=i()(r[o.groups]||r.groups||[]),l=a.filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==t.group&&!(0,p.qv)((null==t?void 0:t.group)||p.Yw,c)})).map((function(t){return t.group,function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,m)}));return{allLayers:a,map:{layers:l=(0,y.bA)(l,r),groups:[],projection:r.projection,bbox:r.viewport},dependencyMapPath:o.layers||"",scales:(0,s.kp)(r.projection||r.viewport&&r.viewport.crs||"EPSG:3857",u()(r,"mapOptions.view.DPI")),currentZoomLvl:r.zoom}})),(0,n.withHandlers)({updateProperty:function(t){var e=t.updateProperty,r=t.dependencyMapPath,n=t.allLayers,o=void 0===n?[]:n;return function(t,n){if(r){var i=(s=f.M9.exec(r)||[],p=3,function(t){if(Array.isArray(t))return t}(s)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(s,p)||function(t,e){if(t){if("string"==typeof t)return O(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(t,e):void 0}}(s,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[1],u=i[2];if(u&&"map"===t){var c=(null==n?void 0:n.layers)||[],l=o.map((function(t){var e=c.find((function(e){return e.id===t.id}));return e?b(b({},t),{},{visibility:e.visibility,opacity:e.opacity,expanded:e.expanded,layerFilter:e.layerFilter}):t}));e(a,"maps",{mapId:u,layers:l},"merge")}}var s,p}}}),c.A,(0,l.jZ)(),(0,l.o$)(),(0,l.rk)())},738885:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>R});var n=r(273517),o=r.n(n),i=r(499084),a=r.n(i),u=r(223805),c=r.n(u),l=r(269843),s=r.n(l),f=r(333031),p=r.n(f),y=r(738221),d=r.n(y),m=r(370561),v=r(545567),b=r(112585),g=r(995531),O=["traces"];function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function A(){return A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},A.apply(null,arguments)}function S(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||E(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){if(t){if("string"==typeof t)return w(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function I(t,e,r){return(e=function(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var T=g.A.CancelToken,D={wfs:function(t,e){var r=t.layer,n=t.options,o=t.filter,i=e.cancelToken;return(0,v.Gw)(r,o,{propertyName:n.classificationAttribute?[].concat(S(a()(n.aggregationAttribute)),S(a()(n.groupByAttributes)),S(a()(n.classificationAttribute))):[].concat(S(a()(n.aggregationAttribute)),S(a()(n.groupByAttributes))),requestOptions:{cancelToken:i}}).toPromise().then((function(t){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).features,e=(arguments.length>1?arguments[1]:void 0).groupByAttributes;return p()(t.map((function(t){return t.properties})),e)}(t,n)}))},wps:function(t,e){var r=t.layer,n=t.options,o=t.filter,i=e.cancelToken;return(0,m.A)((0,b.cs)(r),j(j({featureType:r.name},n),{},{filter:o}),{timeout:15e3,cancelToken:i}).toPromise().then((function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.AggregationResults,r=void 0===e?[]:e,n=t.GroupByAttributes,o=void 0===n?[]:n,i=t.AggregationAttribute,a=t.AggregationFunctions;return r.map((function(t){return j(j({},o.reduce((function(e,r,n){var o=t[n];if(c()(o)){if(s()(o.time))throw new Error("Unknown response format from server");o=new Date(o.time).toISOString()}return j(j({},e),{},I({},r,o))}),{})),{},I({},"".concat(a[0],"(").concat(i,")"),t[t.length-1]))})).sort((function(t,e){var r=parseFloat(t[o]),n=parseFloat(e[o]);return isNaN(r)||isNaN(n)?t<e?-1:t>e?1:0:r-n}))}(t)}))}};const R=function(t){function e(e){var r,i,a=e.traces,u=void 0===a?[]:a,c=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(e,O),l=(r=(0,n.useState)({loading:!0}),i=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(r,i)||E(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=l[0],f=l[1],p=(0,n.useRef)([]),y=(0,n.useRef)([]),m=(0,n.useRef)(!0),v=(0,n.useRef)();function h(){y.current.forEach((function(t){t()})),y.current=[],v.current.cancel()}return(0,n.useEffect)((function(){return m.current=!0,v.current=d()((function(t){g.A.all(t.map((function(t){return(0,t.dataServiceRequest)(t.trace,{cancelToken:new T((function(t){y.current.push(t)}))})}))).then((function(t){var e;m.current&&(f(e={data:t,loading:!1,isAnimationActive:!1,error:void 0}),c.onLoad&&c.onLoad(e))})).catch((function(t){var e;m.current&&!t.__CANCEL__&&(f(e={loading:!1,error:t,data:[]}),c.onLoadError&&c.onLoadError(e))})).finally((function(){y.current=[]}))}),c.debounceTime||300),function(){m.current=!1,h()}}),[]),(0,n.useEffect)((function(){if(u.length!==p.current.length||u.some((function(t,e){var r,n,o,i,a=p.current[e];return!(a&&(r=a,n=t,n.layer&&r.layer.name===n.layer.name&&r.layer.loadingError===n.layer.loadingError&&function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.aggregateFunction===e.aggregateFunction&&t.aggregationAttribute===e.aggregationAttribute&&t.groupByAttributes===e.groupByAttributes&&t.classificationAttribute===e.classificationAttribute&&t.viewParams===e.viewParams}(r.options,n.options)&&(o=r.filter,i=n.filter,o===i)))}))){var t=u.map((function(t){var e,r,n,o=(r=(e=t).layer,(n=e.options)?n.aggregateFunction&&"None"!==n.aggregateFunction?r.name&&(0,b.cs)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute&&n.groupByAttributes||n.classificationAttribute?"wps":"":r.name&&(0,b.U7)(r)&&null!=n&&n.aggregationAttribute&&null!=n&&n.groupByAttributes?"wfs":"":"");return{trace:t,dataServiceRequest:D[o]||function(){return Promise.resolve([])}}}));h(),f({loading:!0,error:void 0}),v.current(t)}p.current=S(u)})),o().createElement(t,A({},c,s,{traces:u}))}return(0,n.memo)(e)}},397619:(t,e,r)=>{"use strict";r.d(e,{o$:()=>_,jZ:()=>D,bU:()=>R,qP:()=>T,rk:()=>L});var n=r(916589);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var a=(0,n.compose)((0,n.withProps)((function(t){var e,r=t.maximized,n=void 0===r?{}:r,o=t.widgetTools,a=void 0===o?[]:o,u=t.toggleMaximize,c=void 0===u?function(){}:u,l=t.dataGrid,s=void 0===l?{}:l,f=t.toolsOptions;return{widgetTools:(void 0===f?{}:f).showMaximize?[].concat((e=a,function(t){if(Array.isArray(t))return i(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:n.widget?"resize-small":"resize-full",target:"icons",tooltipId:"widgets.widget.menu.".concat(n.widget?"minimize":"maximize"),tooltipPosition:"right",visible:!s.static,onClick:function(){return c()}}]):a}})));function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var f=r(273517),p=r.n(f),y=r(256951),d=function(t){return"icons"===t.target},m=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(d).length>0},v=r(819684);function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var g=r(8117),O=r(8571),h=r(739875);function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var S=function(t){var e=t.target,r=t.visible;return(void 0===r||r)&&"menu"===e},E=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(S).length>0},w=(0,h.A)(g.Dr);function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var j=function(t){return"tools"===t.target},I=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(j).length>0},T=function(){return(0,n.compose)((0,n.withProps)((function(t){var e,r=t.maximized,n=void 0===r?{}:r,o=t.widgetTools,i=void 0===o?[]:o,a=t.toolsOptions,u=void 0===a?{}:a,c=t.canEdit,s=t.updateProperty,f=void 0===s?function(){}:s,p=t.id,y=t.hide,d=void 0!==y&&y;return{widgetTools:u.showHide?[].concat((e=i,function(t){if(Array.isArray(t))return l(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"lock",target:"menu",active:d,textId:d?"widgets.widget.menu.unhide":"widgets.widget.menu.hide",tooltipId:d?"widgets.widget.menu.unhideDescription":"widgets.widget.menu.hideDescription",visible:!n.widget&&c,onClick:function(){return f(p,"hide",!d)}}]):i}})))},D=function(){return(0,n.withProps)((function(t){var e,r=t.widgetTools,n=void 0===r?[]:r,o=t.dataGrid,i=void 0===o?{}:o,a=t.canEdit,c=t.onEdit,l=void 0===c?function(){}:c,s=t.toggleDeleteConfirm,f=void 0===s?function(){}:s;return{widgetTools:a?[].concat((e=n,function(t){if(Array.isArray(t))return u(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pencil",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.edit",onClick:function(){return l()}},{glyph:"trash",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.delete",onClick:function(){return f(!0)}}]):n}}))},R=function(){return(0,n.withProps)((function(t){var e,r=t.widgetTools,n=void 0===r?[]:r,o=t.data,i=t.title,a=t.exportCSV,u=void 0===a?function(){}:a;return{widgetTools:[].concat((e=n,function(t){if(Array.isArray(t))return c(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"download",glyphClassName:"exportCSV",target:"menu",textId:"widgets.widget.menu.downloadData",disabled:!o||!o.length,onClick:function(){return u({data:o,title:i})}}])}}))},_=function(){return(0,n.compose)((0,n.compose)((0,n.withProps)((function(t){var e,r=t.maximized,n=void 0===r?{}:r,o=t.widgetTools,i=void 0===o?[]:o,a=t.toolsOptions,u=void 0===a?{}:a,c=t.updateProperty,l=void 0===c?function(){}:c,f=t.id,p=t.dataGrid,y=void 0===p?{}:p;return{widgetTools:u.showPin?[].concat((e=i,function(t){if(Array.isArray(t))return s(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pushpin",bsStyle:y.static&&"primary",glyphClassName:y.static?"active":void 0,tooltipId:y.static?"widgets.widget.menu.unpin":"widgets.widget.menu.pin",target:"icons",visible:!n.widget,onClick:function(){return l(f,"dataGrid.static",!y.static)}}]):i}}))),(0,n.compose)((0,n.withProps)((function(t){var e,r=t.maximized,n=void 0===r?{}:r,i=t.widgetTools,a=void 0===i?[]:i,u=t.dataGrid,c=void 0===u?{}:u,l=t.toggleCollapse,s=void 0===l?function(){}:l,f=t.toolsOptions;return{widgetTools:(void 0===f?{}:f).showCollapse?[].concat((e=a,function(t){if(Array.isArray(t))return o(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"minus",target:"icons",tooltipId:"widgets.widget.menu.collapse",visible:!n.widget&&!c.static,onClick:function(){return s()}}]):a}}))),a,(0,n.compose)((0,n.withProps)((function(t){var e,r=t.widgetTools,n=void 0===r?[]:r,o=t.title,i=t.description,a=t.widgetType;return{widgetTools:i&&"text"!==a?[].concat((e=n,function(t){if(Array.isArray(t))return b(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"question-sign",popover:{title:o,trigger:!0,text:i,id:(0,v.slug)(o)},target:"icons"}]):n}}))))},L=function(){return(0,n.compose)((0,n.compose)((0,n.withPropsOnChange)(["topLeftItems","widgetTools"],(function(t){var e,r=t.topLeftItems,n=void 0===r?[]:r,o=t.widgetTools;return{topLeftItems:I(o)?[].concat((e=n,function(t){if(Array.isArray(t))return P(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return P(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[p().createElement(y.A,{btnGroupProps:{style:{position:"absolute",left:14}},btnDefaultProps:{className:"no-border",bsSize:"small",bsStyle:"link",style:{paddingLeft:4,paddingRight:4}},buttons:o.filter(j)})]):n}}))),(0,n.compose)((0,n.withPropsOnChange)(["icons","widgetTools"],(function(t){var e=t.icons,r=void 0===e?[]:e,n=t.widgetTools;return{icons:m(n)?p().createElement(y.A,{btnDefaultProps:{className:"no-border",bsSize:"xs",bsStyle:"link"},buttons:n.filter(d)}):r}}))),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.className,r=void 0===e?"widget-menu":e,o=t.menuIcon,i=void 0===o?"option-vertical":o;return(0,n.withProps)((function(t){var e,n=t.widgetTools,o=t.topRightItems,a=void 0===o?[]:o;return{topRightItems:E(n)?[].concat((e=a,function(t){if(Array.isArray(t))return A(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return A(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[p().createElement(g._O,null,p().createElement(g.gf,{pullRight:!0,bsStyle:"default",className:r,title:p().createElement(g.e6,{glyph:i}),noCaret:!0,id:"dropdown-no-caret"},n.filter(S).map((function(t,e){var r=t.onClick,n=void 0===r?function(){}:r,o=t.disabled,i=void 0!==o&&o,a=t.glyph,u=t.glyphClassName,c=t.text,l=t.textId,s=t.tooltipId,f=t.active;return p().createElement(w,{active:f,tooltipId:s,onSelect:n,disabled:i,eventKey:e},p().createElement(g.e6,{className:u,glyph:a}),l?p().createElement(O.A,{msgId:l}):c)}))))]):a}}))}())}},452005:(t,e,r)=>{"use strict";r.d(e,{A:()=>v});var n=r(916589),o=r(370561),i=r(159686),a=r(45388),u=r.n(a),c=r(112585),l=r(549112);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.AggregationResults,r=void 0===e?[]:e,n=t.GroupByAttributes,o=void 0===n?[]:n,i=t.AggregationAttribute,a=t.AggregationFunctions;return r.map((function(t){return p(p({},o.reduce((function(e,r,n){return p(p({},e),{},y({},r,t[n]))}),{})),{},y({},"".concat(a[0],"(").concat(i,")"),t[t.length-1]))}))},m=function(t){return t.filter((function(t){var e=t.layer,r=void 0===e?{}:e,n=t.options,o=t.dependencies,i=t.mapSync,a=t.dependenciesMap,u=t.widgets;return!(i&&(0,l.zR)(u,a)&&(null==o||!o.viewport))&&r.name&&(0,c.cs)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute})).distinctUntilChanged((function(t,e){var r=t.layer,n=void 0===r?{}:r,o=t.options,i=void 0===o?{}:o,a=t.filter;return e.layer&&n.name===e.layer.name&&n.loadingError===e.layer.loadingError&&function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.aggregateFunction===e.aggregateFunction&&t.aggregationAttribute===e.aggregationAttribute&&t.viewParams===e.viewParams}(i,e.options)&&a===e.filter})).switchMap((function(t){var e=t.layer,r=void 0===e?{}:e,n=t.options,i=t.filter,a=t.onLoad,l=void 0===a?function(){}:a,s=t.onLoadError,f=void 0===s?function(){}:s;return(0,o.A)((0,c.cs)(r),p(p({featureType:r.name},n),{},{filter:i}),{timeout:15e3}).map((function(t){return{loading:!1,isAnimationActive:!1,error:void 0,data:d(t),series:[{dataKey:"".concat(t.AggregationFunctions[0],"(").concat(t.AggregationAttribute,")")}]}})).do(l).catch((function(t){return u().Observable.of({loading:!1,error:t,data:[]}).do(f)})).startWith({loading:!0})}))};const v=(0,n.compose)((0,n.withProps)((function(){return{dataStreamFactory:m}})),i.A)},577103:(t,e,r)=>{"use strict";r.d(e,{A:()=>T});var n=r(916589),o=r(858156),i=r.n(o),a=r(269843),u=r.n(a),c=r(710583),l=r(605556),s=r.n(l),f=r(803361),p=r(273517),y=r.n(p),d=r(764997),m=r(721930),v=r(992717),b=r(64513),g=r(549112);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}var h=["value","uom","formula","counterOpts"];function A(){return A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},A.apply(null,arguments)}function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t,e,r){return(e=function(t){var e=function(t){if("object"!=O(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var P=(0,d.A)(),j=function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.value,o=void 0===n?"":n,i=r.uom,a=void 0===i?"":i,l=r.formula,s=void 0===l?"":l,p=r.counterOpts,d=void 0===p?{tickPrefix:"",tickSuffix:""}:p,m=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(r,h),v=o;if(s&&(v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t;try{return(0,b.Y)(e,{value:r})}catch(e){return t}}(o,s)),null!=d&&d.format)try{v=(0,f.GP)(d.format)(v)}catch(t){console.error(t)}var O={fontFamily:(null==d||null===(t=d.layout)||void 0===t?void 0:t.fontFamily)||g.mE.FAMILY,color:(null==d||null===(e=d.layout)||void 0===e?void 0:e.color)||g.mE.COLOR},S=E({fontSize:"75%"},O);return y().createElement(c.zb,A({mode:"single",forceSingleModeWidth:!1,max:500,throttle:20},m),y().createElement("span",{style:S},null!=d&&d.tickPrefix?d.tickPrefix:null),y().createElement("span",{className:"value",style:O},u()(v)?0:v),y().createElement("span",{style:S},(null==d?void 0:d.tickSuffix)||a))},I=(0,n.compose)(P,m.A,v.A)((function(t){var e=t.series,r=void 0===e?[]:e,n=t.data,o=void 0===n?[]:n,a=t.options,u=void 0===a?{}:a,c=t.style,l=void 0===c?{width:"100%",height:"100%",transform:"translate(-50%, -50%)",position:"absolute",display:"inline",padding:"1%",top:"50%",left:"50%"}:c,s=t.counterOpts,f=t.formula;return y().createElement("div",{className:"counter-widget-view"},r.map((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).dataKey,e=arguments.length>1?arguments[1]:void 0;return y().createElement(j,{key:t,uom:i()(u,"seriesOptions[".concat(e,"].uom")),value:o[0][t]||0,counterOpts:s,formula:f,style:E({textAlign:"center"},l)})})))}));j.propTypes={uom:s().string,value:s().string,formula:s().string,counterOpts:s().object};const T=I},193670:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var n=r(273517),o=r.n(n),i=r(814585);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const s=function(t){var e=t.updateProperty,r=void 0===e?function(){}:e,n=t.legendProps,a=void 0===n?{}:n,u=t.currentZoomLvl,l=t.disableOpacitySlider,s=void 0!==l&&l,f=t.disableVisibility,p=void 0!==f&&f,y=t.legendExpanded,d=void 0!==y&&y,m=t.scales,v=t.language,b=t.currentLocale,g=t.map,O=void 0===g?{layers:[],groups:[]}:g;return o().createElement(i.A,{map:O,theme:"legend",config:{sortable:!1,showFullTitle:!0,hideOpacitySlider:s,hideVisibilityButton:p,expanded:!0===d||void 0,language:v,currentLocale:b,scales:m,zoom:u,layerOptions:{legendOptions:c(c({},a),{},{projection:null==O?void 0:O.projection,mapSize:null==O?void 0:O.size,mapBbox:null==O?void 0:O.bbox}),hideFilter:!0}},onChangeMap:function(t){r("map",t)}})}},138629:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});var n=r(916589),o=r(50173),i=r(367091),a=r(509327),u=r(761583),c=r(358132),l=r(552749),s=r(733053),f=r(475223),p=r(437430);const y=(0,n.compose)(l.A,(0,i.A)(0),o.A,p.A,c.A,s.Yl,s.iI,a.A,u.Y)(f.A)},230454:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var n=r(273517),o=r.n(n),i=r(8117),a=r(605556),u=r(8571);function c(t){var e=t.glyph,r=void 0===e?"info-sign":e,n=t.messageId,a=t.msgParams,c=void 0===a?{}:a;return o().createElement("div",{className:"ms-widget-empty-message"},o().createElement(i.e6,{glyph:r}),"  ",o().createElement(u.A,{msgId:n,msgParams:c}))}c.propTypes={messageId:a.PropTypes.string,glyph:a.PropTypes.string};const l=c},545567:(t,e,r)=>{"use strict";r.d(e,{EV:()=>H,Gw:()=>G,o0:()=>U,sq:()=>B});var n=r(23412),o=r.n(n),i=r(956449),a=r.n(i),u=r(499084),c=r.n(u),l=r(269843),s=r.n(l),f=r(223805),p=r.n(f),y=r(45388),d=r.n(y),m=r(738805),v=r(692114),b=r(995531),g=r(102685),O=r(112585),h=r(492312),A=r(193275),S=r(79738),E=["totalFeatures","features"],w=["sortOptions","propertyName"];function P(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function T(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return(e=function(t){var e=function(t){if("object"!=I(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==I(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var L=(0,A.A)({wfsVersion:"1.1.0"}),F=L.getFeature,C=L.query,M=L.sortBy,N=L.propertyName,x=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",i=(0,g.zD)(e,r),a=o().parse((0,S.t)(t),!0),u=p()(a.query)?a.query:{};u.service="WFS",u.outputFormat=n;var c=o().format({protocol:a.protocol,host:a.host,pathname:a.pathname,query:u});return r.layer&&"vector"===r.layer.type?d().Observable.defer((function(){return new Promise((function(t){var n,o=function(t,e){if(e.filterFields&&0!==e.filterFields.length){var r=t.features.filter((0,g.Jt)(e));t.features=r,t.numberMatched=r.length,t.numberReturned=r.length,t.totalFeatures=r.length}return e.sortOptions&&e.sortOptions.sortBy&&e.sortOptions.sortOrder&&"NONE"!==e.sortOptions.sortOrder&&t.features.sort((function(t,r){var n=t.properties[e.sortOptions.sortBy],o=r.properties[e.sortOptions.sortBy],i=n.toLowerCase().localeCompare(o.toLowerCase());return"ASC"===e.sortOptions.sortOrder?i:-1*i})),t}({crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},numberMatched:(n=r.layer.features).length,numberReturned:n.length,timeStamp:"2020-07-20T11:36:20.118Z",totalFeatures:n.length,type:"FeatureCollection",features:n},e);t(o)}))})):{data:i,queryString:c}},U=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(r.layer&&"vector"===r.layer.type)return x(t,e,r,n);var o=x(t,e,r,n),i=o.data,a=o.queryString;return d().Observable.defer((function(){return b.A.post(a,i,{timeout:6e4,responseType:"arraybuffer",headers:{Accept:"application/xml","Content-Type":"application/xml"}})}))},k=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.layer&&"vector"===r.layer.type)return x(t,e,r);var n=x(t,e,r),o=n.data,i=n.queryString;return d().Observable.defer((function(){return b.A.post(i,o,R({timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}},null==r?void 0:r.requestOptions))})).let(h.m9).map((function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.totalFeatures,r=t.features,n=T(t,E),o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).startIndex,i=arguments.length>2?arguments[2]:void 0;return i>e&&i===o+r.length&&e===r.length?R(R({},n),{},{features:r,totalFeatures:i}):R(R({},n),{},{features:r,totalFeatures:e})}(t.data,function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination||!s()(t.startIndex)&&!s()(t.maxFeatures)&&{startIndex:t.startIndex,maxFeatures:t.maxFeatures}}(e,r),r.totalFeatures)}))},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.search,r=void 0===e?{}:e,n=t.url,o=t.name,i=arguments.length>1?arguments[1]:void 0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=u.sortOptions,s=u.propertyName,f=T(u,w);return k(r.url||n,i&&"object"===I(i)?R(R({},i),{},{typeName:o||i.typeName}):F(C(o,[].concat(P(l?[M(l.sortBy,l.sortOrder)]:[]),P(s?[N(s)]:[]),P(i?c()(i):[]))),f),f).catch((function(t){if("OGCError"===t.name&&"NoApplicableCode"===t.code&&!l&&s&&s[0])return k(r.url||n,i&&"object"===I(i)?R(R({},i),{},{typeName:o||i.typeName}):F(C(o,[M(a()(s)?s[0]:s)].concat(P(s?[N(s)]:[]),P(i?c()(i):[]))),f),f);throw t}))},B=function(t){var e=t.layer;return d().Observable.defer((function(){return b.A.get(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,r=t.search,n=void 0===r?{}:r,i=t.url,a=t.describeFeatureTypeURL,u=o().parse((0,S.t)(a||n.url||i),!0);return o().format(R(R({},u),{},{search:void 0,query:R(R({},u.query),{},{service:"WFS",version:"1.1.0",typeName:e,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(e))})).let(h.m9)},H=function(t){var e=t.layer;return d().Observable.defer((function(){return b.A.get(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,r=t.search,n=void 0===r?{}:r,i=t.url,a=(0,O.wk)({name:e,url:n&&n.url||i}),u=o().parse(a,!0);return o().format(R(R({},u),{},{search:void 0,query:R(R({},u.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(e))})).let(h.m9).switchMap((function(t){return d().Observable.bindNodeCallback((function(t,e){return(0,m.parseString)(t,{tagNameProcessors:[v.stripPrefix],explicitArray:!1,mergeAttrs:!0},e)}))(t.data)}))}},370561:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var n=r(499084),o=r.n(n),i=r(325177),a=r(264053);function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const l=function(t,e){var r,n,c,l,s,f,p,y,d,m,v,b,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.p4)(t,(n=(r=e).featureType,c=r.aggregationAttribute,s=void 0===(l=r.classificationAttribute)?[]:l,p=void 0===(f=r.groupByAttributes)?[]:f,y=r.aggregateFunction,d=r.viewParams,v=void 0===(m=r.filter)?"":m,b="<wfs:GetFeature ".concat(d?'viewParams="'.concat(d,'"'):"",' outputFormat="GML2" service="WFS" version="1.0.0">')+'<wfs:Query typeName="'.concat(n,'">').concat(v,"</wfs:Query></wfs:GetFeature>"),(0,a.Yy)("gs:Aggregate",[(0,i.XH)("features",(0,i.Nj)("text/xml","http://geoserver/wfs","POST",b)),(0,i.XH)("aggregationAttribute",(0,i.oW)((0,i.mC)(c)))].concat(u(o()(y).map((function(t){return(0,i.XH)("function",(0,i.oW)((0,i.mC)(t)))}))),[(0,i.XH)("singlePass",(0,i.oW)((0,i.mC)("false")))],u(o()(p).map((function(t){return(0,i.XH)("groupByAttributes",(0,i.oW)((0,i.mC)(t)))}))),u(o()(s).map((function(t){return(0,i.XH)("groupByAttributes",(0,i.oW)((0,i.mC)(t)))})))),(0,i.mk)((0,i.Cs)("result","application/json")))),{},g)}},323930:()=>{},595625:()=>{},624066:()=>{}}]);