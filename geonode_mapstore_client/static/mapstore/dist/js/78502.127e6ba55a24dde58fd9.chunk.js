(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[78502],{501157:(e,t,n)=>{"use strict";n.d(t,{ID:()=>j,en:()=>E,Xv:()=>R,FU:()=>k,gs:()=>F,tt:()=>T,jY:()=>A,T6:()=>q,hZ:()=>W,ZP:()=>$});var r=n(472500),o=n.n(r),i=n(701469),a=n.n(i),u=n(984596),l=n.n(u),c=n(227361),s=n.n(c),f=n(505055),d=n.n(f),y=n(375875),m=n.n(y),p=n(737275),v=n(916651),g=n(577215);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={},B="1.3.0",j="1.1.1",E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{service:"WMS",version:B,request:"GetCapabilities"},n=arguments.length>2?arguments[2]:void 0,r=(a()(e)&&e||e.split(","))[0],i=o().parse(r,!0);return o().format(S(S({},i),{},{search:null,query:S(S(S({},t),i.query),(null==n?void 0:n.query)||{})}))},P=function(e){var t=e&&e.Title,n=e.LogoURL&&S(S({},s()(e,"LogoURL.$")||{}),{},{format:s()(e,"LogoURL.Format")}),r=s()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:n,imageUrl:s()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:r}},R=function e(t){var n,r,o=null!==(n=null==t?void 0:t.Layer)&&void 0!==n?n:null==t?void 0:t.layer,i=null!==(r=null==t?void 0:t.Name)&&void 0!==r?r:null==t?void 0:t.name;return o?l()(o).reduce((function(t,n){var r,o,i=null!==(r=n.Layer)&&void 0!==r?r:n.layer,a=null!==(o=n.Name)&&void 0!==o?o:n.name;return[].concat(h(t),h(e(n)),h(i&&a?[n]:[]))}),[]):i&&[t]||[]},C=function(e){var t,n,r,o,i=e.Capability;return{imageFormats:l()((null==i||null===(t=i.Request)||void 0===t||null===(n=t.GetMap)||void 0===n?void 0:n.Format)||[]).filter(g.F0),infoFormats:l()((null==i||null===(r=i.Request)||void 0===r||null===(o=r.GetFeatureInfo)||void 0===o?void 0:o.Format)||[]).filter(g.cP)}},M=function(){var e,t,n,r,o,i,u,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,y=c.Capability,m=c.Service,p=(u=y).Request&&u.Request.GetMap&&u.Request.GetMap.DCPType&&u.Request.GetMap.DCPType.HTTP&&u.Request.GetMap.DCPType.HTTP.Get&&u.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&u.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,v=y.Layer&&(null===(e=y.Layer.SRS||y.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],g=y.Layer&&y.Layer.Attribution&&P(y.Layer.Attribution),b=l()((null==y||null===(t=y.Request)||void 0===t||null===(n=t.GetMap)||void 0===n?void 0:n.Format)||[]),h=l()((null==y||null===(r=y.Request)||void 0===r||null===(o=r.GetFeatureInfo)||void 0===o?void 0:o.Format)||[]),L=R(y),O=(a()(L)?L:[L]).filter((function(e){return!d||-1!==e.Name.toLowerCase().indexOf(d.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(d.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(d.toLowerCase())}));return{numberOfRecordsMatched:O.length,numberOfRecordsReturned:Math.min(f,O.length),nextRecord:s+Math.min(f,O.length)+1,service:m,layerOptions:{version:(null==c||null===(i=c.$)||void 0===i?void 0:i.version)||B},records:O.filter((function(e,t){return t>=s-1&&t<s-1+f})).map((function(e){return S(S({},e),{},{getMapFormats:b,getFeatureInfoFormats:h,onlineResource:p,SRS:v,credits:e.Attribution?P(e.Attribution):g})}))}},k=function(e){return m().get(E(e,{service:"WMS",version:B,request:"GetCapabilities"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,n){t=n})),t.WMS_Capabilities||t.WMT_MS_Capabilities||{}}))},D=function(e,t,n,r){var o=w[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,p.u8)("cacheExpire")||60)?new Promise((function(e){e(M(o.data,t,n,r))})):k(e).then((function(o){return w[e]={timestamp:(new Date).getTime(),data:o},M(o,t,n,r)}))},F=function(e,t){return m().get(E(e,{service:"WMS",version:j,layers:t,request:"DescribeLayer"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,n){t=n&&n.WMS_DescribeLayerResponse&&n.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return S(S({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:S({},e&&e.query&&e.query.$||{})})}))}))},T=function(e,t,n,r){return D(e,t,n,r)},A=function(e,t){for(var n=e,r=n.EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,v.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;!r&&n.Layer&&n.Layer.length;)r=(n=n.Layer[0]).EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,v.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;r||(r={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[r.westBoundLongitude||r.minx,r.southBoundLatitude||r.miny,r.eastBoundLongitude||r.maxx,r.northBoundLatitude||r.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return k(e).then((function(e){var n=C(e),r=n.imageFormats,o=n.infoFormats;return t?{imageFormats:r,infoFormats:o}:r})).catch((function(){return t?{imageFormats:[],infoFormats:[]}:[]}))},G={},W=function(e){return(G[e]?function(){return Promise.resolve(G[e])}:function(){return m().get(e).then((function(t){var n,r;if("string"==typeof(null==t?void 0:t.data)&&t.data.includes("Exception"))throw new Error("Faild to get json legend");return G[e]=null==t||null===(n=t.data)||void 0===n?void 0:n.Legend,(null==t||null===(r=t.data)||void 0===r?void 0:r.Legend)||[]}))})().then((function(e){return e})).catch((function(e){throw e}))};const $={flatLayers:R,parseUrl:E,getDimensions:function(e){return l()(e.Dimension||e.dimension||[]).map((function(t,n){var r=e.Extent&&l()(e.Extent)[n]||e.extent&&l()(e.extent)[n];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||r&&r.$.default,values:t._&&t._.split(",")||r&&r._&&r._.split(",")}}))},getCapabilities:k,describeLayer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m().get(E(e,{service:"WMS",version:j,layers:t,request:"DescribeLayer"},n)).then((function(e){var t,n,r;d().parseString(e.data,{explicitArray:!1},(function(e,t){r=t}));var o=(null===(t=r)||void 0===t||null===(n=t.WMS_DescribeLayerResponse)||void 0===n?void 0:n.LayerDescription)&&l()(r.WMS_DescribeLayerResponse.LayerDescription)[0];return o&&S(S({},null==o?void 0:o.$),(null==o?void 0:o.Query)&&{query:l()(o.Query).map((function(e){return S({},null==e?void 0:e.$)}))})}))},getRecords:D,describeLayers:F,textSearch:T,parseLayerCapabilities:function(e,t){var n=e.Capability,r=R(n).find((function(e){var n=e.Name;return 2===t.name.split(":").length&&n&&2===n.split(":").length?t.name===n&&e:n&&2===n.split(":").length?t.name===n.split(":")[1]&&e:2===t.name.split(":").length?t.name.split(":")[1]===n&&e:t.name===n&&e}));if(r){var o=C(e),i=o.imageFormats,a=o.infoFormats;return S(S({},r),{},{layerOptions:{imageFormats:i,infoFormats:a}})}return null},getBBox:A,reset:function(){Object.keys(w).forEach((function(e){delete w[e]}))},getSupportedFormat:q}},1036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(618446),o=n.n(r);const i=(0,n(867076).shouldUpdate)((function(e,t){return!o()(e.start,t.start)||e.disabled!==t.disabled}))(n(185552))},808224:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(124852),o=n.n(r),i=n(480681),a=n(830049);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var y={Line:function(e){var t=e.symbolizer,n=0===t.width?1:t.width>7?7:t.width;return o().createElement("svg",{viewBox:"0 0 50 50"},o().createElement("path",{d:"M ".concat(n," ").concat(n," L ").concat(50-n," ").concat(50-n),stroke:t.color,strokeWidth:n,strokeDasharray:t.dasharray?"18 18":null,strokeLinecap:t.cap,strokeLinejoin:t.join,strokeOpacity:t.opacity}))},Fill:function(e){var t=e.symbolizer;return o().createElement("svg",{viewBox:"0 0 50 50"},o().createElement("path",{d:"M 1 1 L 1 49 L 49 49 L 49 1 L 1 1",fill:t.color,opacity:t.fillOpacity,stroke:t.outlineColor,strokeWidth:t.outlineWidth,strokeOpacity:t.outlineOpacity}))},Circle:function(e){var t=e.symbolizer;return o().createElement("svg",{viewBox:"0 0 50 50"},o().createElement("circle",{cx:"25",cy:"25",r:"25",fill:t.color,opacity:t.opacity,stroke:t.outlineColor,strokeWidth:t.outlineWidth,strokeOpacity:t.outlineOpacity}))},Mark:function(e){var t=e.symbolizer,n=f((0,r.useState)(null),2),i=n[0],u=n[1],l=(0,r.useRef)();(0,r.useEffect)((function(){return l.current=!0,function(){l.current=!1}}),[]),(0,r.useEffect)((function(){(0,a.$O)(t).then((function(e){l.current&&u(e)}))}),[t]);var c=t.rotate,s=t.opacity,d={transform:"rotate(".concat(c,"deg)"),opacity:s};return o().createElement("svg",{viewBox:"0 0 50 50",style:d},i&&o().createElement("image",{href:i.src,height:"50",width:"50"}))},Icon:function(e){var t=e.symbolizer,n=f((0,r.useState)(null),2),a=n[0],u=n[1],l=(0,r.useRef)();return(0,r.useEffect)((function(){return l.current=!0,function(){l.current=!1}}),[]),(0,r.useEffect)((function(){if(null!=t&&t.image){var e=new Image;e.onload=function(){l.current&&u(e)},e.onerror=function(){l.current&&u(null)},e.src=t.image}}),[null==t?void 0:t.image]),a?o().createElement("svg",{viewBox:"0 0 50 50",style:{transform:"rotate(".concat(t.rotate,"deg)"),opacity:t.opacity}},o().createElement("image",{href:a.src,height:"50",width:"50"})):o().createElement(i.gG,{glyph:"point"})},Model:function(){return o().createElement(i.gG,{glyph:"model"})},Text:function(e){var t,n=e.symbolizer;return o().createElement("svg",{viewBox:"0 0 16 16"},o().createElement("text",{x:"8",y:"8",textAnchor:"middle",alignmentBaseline:"middle",style:c({fontSize:n.size<14?n.size:14,fill:n.color,fontFamily:null==n||null===(t=n.font)||void 0===t?void 0:t.join(", "),fontStyle:n.fontStyle,fontWeight:n.fontWeight},n.haloWidth&&n.haloColor&&{paintOrder:"stroke",stroke:n.haloColor,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"})},"T"))}};const m=function(e){var t,n=e.rule,r=(0,a.mL)((null==n||null===(t=n.symbolizers)||void 0===t?void 0:t[0])||{},{properties:{}}),i=y[r.kind];return i?o().createElement("div",{className:"ms-legend-icon"},o().createElement(i,{symbolizer:r})):null}}}]);