(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[13563,120,58618],{53001:(e,t,r)=>{"use strict";r.d(t,{xT:()=>n,H_:()=>o,Wv:()=>i,gC:()=>a,dG:()=>u,oQ:()=>l,Q2:()=>c,R3:()=>s,Zr:()=>f,Op:()=>p,l$:()=>y,uL:()=>d,zg:()=>b,K2:()=>m,M3:()=>v,st:()=>g,US:()=>O,$c:()=>S,pW:()=>h,$D:()=>w,ke:()=>P,rE:()=>j,vw:()=>x,r5:()=>R,X1:()=>E,V3:()=>T,p2:()=>C});var n="BACKGROUND_SELECTOR:ADD_BACKGROUND",o="BACKGROUND_SELECTOR:REMOVE_BACKGROUND",i="BACKGROUND_SELECTOR:SET_CURRENT_BACKGROUND_LAYER",a="BACKGROUND_SELECTOR:BACKGROUND_ADDED",u="BACKGROUND_SELECTOR:BACKGROUND_EDITED",l="BACKGROUND_SELECTOR:ADD_BACKGROUND_PROPERTIES",c="BACKGROUND_SELECTOR:SET_BACKGROUND_MODAL_PARAMS",s="BACKGROUND_SELECTOR:UPDATE_BACKGROUND_THUMBNAIL",f="BACKGROUND_SELECTOR:BACKGROUNDS_CLEAR",p="BACKGROUND_SELECTOR:CREATE_BACKGROUNDS_LIST",y="BACKGROUND_SELECTOR:CLEAR_MODAL_PARAMETERS",d="BACKGROUND_SELECTOR:CONFIRM_DELETE_BACKGROUND_MODAL",b="BACKGROUND_SELECTOR:ALLOW_BACKGROUNDS_DELETION",m="BACKGROUND_SELECTOR:SYNC_CURRENT_BACKGROUND_LAYER";function v(e){return{type:p,backgrounds:e}}function g(e){return{type:n,source:e}}function O(e){return{type:l,modalParams:e}}function S(e){return{type:c,modalParams:e}}function h(e){return{type:a,layerId:e}}function w(e){return{type:u,layerId:e}}function P(e){return{type:i,layerId:e}}function j(e){return{type:m,id:e}}function x(e){return{type:b,allow:e}}function R(e,t){return{type:s,thumbnailData:e,id:t}}function E(e){return{type:o,backgroundId:e}}function T(){return{type:y}}function C(e){return{type:d,show:e,layerTitle:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,layerId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}},801550:(e,t,r)=>{"use strict";r.d(t,{pP:()=>n,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>u,Qy:()=>l,IL:()=>c,Li:()=>s,OW:()=>f,ZO:()=>p,Um:()=>y,TF:()=>d,Ls:()=>b,Ec:()=>m,Eu:()=>v,JJ:()=>g,nZ:()=>O,YD:()=>S,GI:()=>h,Jb:()=>w,Uh:()=>P,e$:()=>j,eh:()=>x,$j:()=>R,bJ:()=>E,Mk:()=>T,xy:()=>C,o6:()=>A,FP:()=>L,Mo:()=>M,sO:()=>D,Px:()=>_,hd:()=>U,y9:()=>G,Ju:()=>I,BV:()=>k,SO:()=>B,H0:()=>F,$X:()=>N,ou:()=>W,NE:()=>K,Lq:()=>V,aN:()=>$});var n="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",u="PAN_TO",l="ZOOM_TO_EXTENT",c="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",f="CHANGE_MAP_SCALES",p="CHANGE_MAP_STYLE",y="CHANGE_ROTATION",d="CREATION_ERROR_LAYER",b="UPDATE_VERSION",m="INIT_MAP",v="RESIZE_MAP",g="CHANGE_MAP_LIMITS",O="SET_MAP_RESOLUTIONS",S="REGISTER_EVENT_LISTENER",h="UNREGISTER_EVENT_LISTENER",w="MOUSE_MOVE",P="MOUSE_OUT",j="MAP:MAP_PLUGIN_LOAD",x="MAP:ORIENTATION",R="MAP:UPDATE_MAP_VIEW",E="MAP:UPDATE_MAP_OPTIONS";function T(e,t,r,n){return{type:j,mapType:t,loading:e,loaded:r,error:n}}function C(e,t,r){return{type:c,pos:e,zoom:t,crs:r}}function A(e,t,r,o,i,a,u,l){return{type:n,center:e,zoom:t,bbox:r,size:o,mapStateSource:i,projection:a,viewerOptions:u,resolution:l}}function L(e,t){return{type:o,point:e,layer:t}}function M(e){return{type:i,pointer:e}}function D(e,t){return{type:a,zoom:e,mapStateSource:t}}function _(e,t,r,n){return{type:l,extent:e,crs:t,maxZoom:r,options:n}}function U(e,t){return{type:p,style:e,mapStateSource:t}}function G(e){return{type:m,disableFeedbackMask:e}}function I(){return{type:v}}function k(e){var t=e.restrictedExtent,r=e.crs,n=e.minZoom;return{type:g,restrictedExtent:t,crs:r,minZoom:n}}function B(e){return{type:O,resolutions:e}}var F=function(e,t){return{type:S,eventName:e,toolName:t}},N=function(e,t){return{type:h,eventName:e,toolName:t}},W=function(e){return{type:w,position:e}},K=function(){return{type:P}},V=function(e){return{type:x,orientation:e}},$=function(e){return{type:E,configUpdate:e}}},181251:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Rr});var n={};r.r(n),r.d(n,{getCatalogRecords:()=>ue,getLayerFromRecord:()=>le,preprocess:()=>ne,testService:()=>ie,textSearch:()=>ae,validate:()=>oe});var o={};r.r(o),r.d(o,{getCatalogRecords:()=>Pe,getLayerFromRecord:()=>je,preprocess:()=>Oe,testService:()=>he,textSearch:()=>we,validate:()=>Se});var i={};r.r(i),r.d(i,{getCatalogRecords:()=>Be,getLayerFromRecord:()=>Fe,preprocess:()=>Ge,testService:()=>ke,textSearch:()=>Ue,validate:()=>Ie});var a={};r.r(a),r.d(a,{getCatalogRecords:()=>bt,getLayerFromRecord:()=>gt,getRecords:()=>ft,testService:()=>dt,textSearch:()=>pt,tileProviderToLayer:()=>vt,tmsToLayer:()=>mt,validate:()=>yt});var u={};r.r(u),r.d(u,{getCatalogRecords:()=>Lt,getLayerFromRecord:()=>Mt,getRecords:()=>Rt,preprocess:()=>Et,testService:()=>Ct,textSearch:()=>At,validate:()=>Tt});var l={};r.r(l),r.d(l,{getCatalogRecords:()=>Ft,getLayerFromRecord:()=>Nt,preprocess:()=>Gt,testService:()=>kt,textSearch:()=>Bt,validate:()=>It});var c={};r.r(c),r.d(c,{getCatalogRecords:()=>qt,getLayerFromRecord:()=>Xt,preprocess:()=>zt,testService:()=>Ht,textSearch:()=>$t,validate:()=>Zt});var s={};r.r(s),r.d(s,{getCatalogRecords:()=>ir,getLayerFromRecord:()=>ar,preprocess:()=>rr,testService:()=>nr,textSearch:()=>or,validate:()=>ur});var f={};r.r(f),r.d(f,{COG_LAYER_TYPE:()=>dr,cogToLayer:()=>Pr,getCatalogRecords:()=>wr,getLayerFromRecord:()=>xr,getProjectionFromGeoKeys:()=>br,getRecords:()=>gr,testService:()=>hr,textSearch:()=>Or,validate:()=>Sr});var p=r(91175),y=r.n(p),d=r(747037),b=r.n(d),m=r(264721),v=r.n(m),g=r(984596),O=r.n(g),S=r(189734),h=r.n(S),w=r(944908),P=r.n(w),j=r(701469),x=r.n(j),R=r(763105),E=r.n(R),T=r(441609),C=r.n(T),A=r(414293),L=r.n(A),M=r(727418),D=r.n(M),_=r(552259),U=r(49977),G=r.n(U),I=r(737275),k=r(624262),B=r(577215),F=r(453005),N=r(576712),W=r(501157),K=r(375875),V=r.n(K);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function z(e){var t="function"==typeof Map?new Map:void 0;return z=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(Z())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&H(o,r.prototype),o}(e,arguments,q(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),H(r,e)},z(e)}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var X=function(e){function t(e,r){var n,o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=this,i=t,a=[e],i=q(i),n=function(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(o,Z()?Reflect.construct(i,a||[],q(o).constructor):i.apply(o,a))).name="ServiceValidationError",n.notification=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(t,e),r=t,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(z(Error)),Y=function(e){return G().Observable.of(e)},J=function(e){return""===e.title||""===e.url?G().Observable.throw(new X("Validation Error","catalog.notification.warningAddCatalogService")):G().Observable.of(e)},Q=function(e){var t=e.parseUrl,r=void 0===t?function(e){return e}:t;return function(e){var t="catalog.notification.errorServiceUrl";return G().Observable.defer((function(){return V().get(r(e.url))})).catch((function(){throw new X("Service Test error",t)})).switchMap((function(r){if(r.error||""===r.data)throw new X("Service Test error",t);return G().Observable.of(e)}))}};function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=ee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==ee(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne=function(e){var t=e.domainAliases;return e.domainAliases=E()(t),U.Observable.of(e)},oe=J,ie=Q({parseUrl:W.en}),ae=W.tt,ue=function(e,t){return e&&e.records?e.records.map((function(r){var n=[{type:"OGC:WMS",url:t&&t.url,SRS:r.SRS&&(x()(r.SRS)?r.SRS:[r.SRS])||[],params:{name:r.Name}}],o=(0,N.tW)({references:n}).wms;return{serviceType:"wms",isValid:!!o,capabilities:r,credits:r.credits,boundingBox:(0,W.jY)(r),description:r.Abstract||r.Title||r.Name,identifier:r.Name,service:e.service,tags:"",layerOptions:re(re({},(null==t?void 0:t.layerOptions)||{}),(null==e?void 0:e.layerOptions)||{}),title:(0,k.EM)(r)||r.Name,getMapFormats:r.getMapFormats,getFeatureInfoFormats:r.getFeatureInfoFormats,dimensions:(r.Dimension&&O()(r.Dimension)||[]).map((function(e){return D()({},{values:e._&&e._.split(",")||[]},e.$||{})})).filter((function(e){return e&&"time"!==e.name})),references:n,ogcReferences:o}})):null},le=function(e,t,r){var n=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.removeParams,o=void 0===n?[]:n,i=r.service,a=r.catalogURL,u=r.url,l=r.map,c=void 0===l?{}:l,s=r.layerBaseConfig;if(!e||!e.references)return null;var f,p,y=(0,N.tW)(e).wms,d=function(e){return(0,N.em)((0,I.$F)(e),["request","layer","layers","service","version"].concat(o))},b=(0,N.qy)(y.url);if(b&&x()(b))f=b.map((function(e){return d(e)})).map((function(e){return e.url})),p=b.map((function(e){return d(e)})).map((function(e){return e.params})).reduce((function(e,t){return re(re({},e),t)}),{});else{var m=d(b||a);f=m.url,p=m.params}var v,g=(v=u||f,x()(v)&&1===v.length?v[0]:v),O=(0,N.n0)(y.SRS),S=null!==(t=null==e?void 0:e.capabilities)&&void 0!==t?t:{},h=S.MaxScaleDenominator,w=S.MinScaleDenominator,P=i||{},j=P.format,R=P.infoFormat,E=P.localizedLayerStyles,T=P.allowUnsecureLayers,A=P.autoSetVisibilityLimits,M=P.layerOptions,D=(e.getMapFormats||[]).filter(B.F0),U=(e.getFeatureInfoFormats||[]).filter(B.cP),G=(null==D?void 0:D.find((function(e){return e===j})))||D[0]||j,k=R&&F.so[R]?{format:F.so[R]}:null,W=re(re(re(re({type:"wms",requestEncoding:e.requestEncoding,style:e.style,format:G,featureInfo:k,url:g,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:y.params&&y.params.name,title:e.title||y.params&&y.params.name,description:e.description||"",credits:!(0,I.u8)("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:(0,N.F8)(e),params:p,allowedSRS:O,catalogURL:a},s),M),e.layerOptions),{},{localizedLayerStyles:L()(E)?void 0:E,imageFormats:D,infoFormats:U},!L()(T)&&{forceProxy:T});if(A&&!C()(c)&&(h||w)){var K=(!L()(w)&&(0,_.ed)(w,"scale",c)||{}).resolution,V=(!L()(h)&&(0,_.ed)(h,"scale",c)||{}).resolution;W=re(re({},W),{},{minResolution:K,maxResolution:V})}return W}(e,t);return r?Promise.resolve(n):n},ce=r(86638),se=r(916651),fe=r(659551),pe=r(658918);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){var n;return n=function(e,t){if("object"!=ye(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==ye(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ve=function(e,t,r){var n,o,i,a=r.name;if(void 0===a){a=e.title?e.title.join(" "):(0,ce.S$)(t,"catalog.notAvailable");var u=(n=r.protocol,r.value,null!==(o=null===(i=y()([{protocol:"https://registry.geodati.gov.it/metadata-codelist/ProtocolValue/www-download",displayValue:"Download"},{protocol:"http://www.opengis.net/def/serviceType/ogc/wms",displayValue:"WMS"},{protocol:"http://www.opengis.net/def/serviceType/ogc/wfs",displayValue:"WFS"}].filter((function(e){return e.protocol===n}))))||void 0===i?void 0:i.displayValue)&&void 0!==o?o:"Link");a="".concat(u?"".concat(a," - ").concat(u):a)}return'<li><a target="_blank" href="'.concat(r.value,'">').concat(a,"</a></li>")};function ge(e,t){var r,n,o=(null==e?void 0:e.URI)&&O()(e.URI);if(o){var i=y()(o.filter((function(e){return"thumbnail"===e.name})))||y()(o.filter((function(e){var t;return!e.name&&(null===(t=e.protocol)||void 0===t?void 0:t.indexOf("image/"))>-1})));r=i?i.value:null}if(!r&&e&&e.references){var a=function(e){return y()(O()(e.references).filter((function(t){return"WWW:LINK-1.0-http--image-thumbnail"===t.scheme||"thumbnail"===t.scheme||"WWW:DOWNLOAD-1.0-http--download"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))||"WWW:DOWNLOAD-REST_MAP"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))})))}(e);a&&(r=a.value)}return r&&(0===r.indexOf("http")||(r=((n=t&&t.url)&&n.replace(/\/csw$/,"/")||"")+r)),r}var Oe=Y,Se=J,he=Q({parseUrl:fe.ZP.parseUrl}),we=fe.ZP.textSearch,Pe=function(e,t,r){var n=e;return n&&n.records?n.records.map((function(e){var n=e.dc,o=[];n&&n.references&&(Array.isArray(n.references)?n.references:[n.references]).filter((function(e){return e.scheme.indexOf("http-get-capabilities")>-1})).forEach((function(e){var r=0===e.value.indexOf("http")?e.value:(t&&t.catalogURL||"")+"/"+e.value;o.push({type:e.scheme,url:r})}));var i=(0,fe.kv)(n,t);i&&o.push(i);var a={boundingBox:e.boundingBox&&e.boundingBox.extent&&O()(e.boundingBox.extent.join(","))};if(n&&(a=be(be({},a),h()(Object.keys(n)).reduce((function(e,t){return be(be({},e),{},me({},t,P()(O()(n[t]))))}),{}))),n&&n.URI&&O()(n.URI)&&O()(n.URI).length&&(a=be(be({},a),{},{uri:["<ul>"+O()(n.URI).map(ve.bind(void 0,a,r)).join("")+"</ul>"]})),n&&n.subject&&O()(n.subject)&&O()(n.subject).length&&(a=be(be({},a),{},{subject:["<ul>"+O()(n.subject).map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})),o&&O()(o).length?a=be(be({},a),{},{references:["<ul>"+O()(o).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.params&&e.params.name||e.url,"</a></li>")})).join("")+"</ul>"]}):delete a.references,n&&n.temporal){var u=b()(n.temporal)?n.temporal.split("; "):[];if(u.length){var l=u.filter((function(e){return-1!==e.indexOf("scheme=")})).map((function(e){var t=e.indexOf("=");return e.substr(t+1,e.length-1)}));l=l.length?l[0]:"W3C-DTF";var c=u.filter((function(e){return-1!==e.indexOf("start=")||-1!==e.indexOf("end=")})).map((function(e){var t=e.indexOf("="),n=e.substr(0,t),o=e.substr(t+1,e.length-1),i=e.length-t-1<=10;return v()(["start","end"],n)&&"W3C-DTF"===l&&!i?(0,ce.S$)(r,"catalog.".concat(n))+new Date(o).toLocaleString():v()(["start","end"],n)?(0,ce.S$)(r,"catalog.".concat(n))+o:""}));a=be(be({},a),{},{temporal:["<ul>"+c.map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})}}var s=be(be({},(0,N.tW)({references:o})),(0,N.FJ)({references:o})),f=Object.keys(s).find((function(e){return s[e]})),p=f&&"esri"!==f?s[f]:void 0;return n&&n.format===pe.X?function(e,t){var r,n=e.dc,o={crs:e.boundingBox.crs,bounds:(0,se.transformExtentToObj)(e.boundingBox.extent)};return{serviceType:"3dtiles",isValid:!0,description:n&&b()(n.abstract)&&n.abstract||"",title:n&&b()(n.title)&&n.title||"",identifier:n&&b()(n.identifier)&&n.identifier||"",url:(null==n||null===(r=n.URI)||void 0===r?void 0:r.value)||"",thumbnail:null,bbox:o,format:n&&n.format||"",references:[],catalogType:"csw",metadata:t}}(e,a):{serviceType:"csw",layerType:f,isValid:!!f,boundingBox:e.boundingBox,description:n&&b()(n.abstract)&&n.abstract||"",layerOptions:t&&t.layerOptions||{},identifier:n&&b()(n.identifier)&&n.identifier||"",references:o,thumbnail:ge(n,t),title:n&&b()(n.title)&&n.title||"",tags:n&&n.tags||"",metadata:a,capabilities:e.capabilities,ogcReferences:p}})):null},je=function(e,t,r){var n=function(e,t){switch(e.layerType){case"wms":return le(e,t);case"esri":return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layerBaseConfig,r=void 0===t?{}:t;if(!e||!e.references)return null;var n=(0,N.FJ)(e).esri;return be({type:n.type,url:n.url,visibility:!0,dimensions:e.dimensions||[],name:n.params&&n.params.name,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}}},r)}(e,t);default:return null}}(e,t);return r?Promise.resolve(n):n},xe=r(513218),Re=r.n(xe),Ee=r(707294),Te=r(603475);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(e,t,r){var n;return n=function(e,t){if("object"!=Ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ce(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var De=function(e){return Re()(e)&&e._||e},_e=function(e,t){return e.filter((function(r){return(0,Ee.C2)(t,r,e,t,null)}))},Ue=Te.Z.textSearch,Ge=Y,Ie=J,ke=Q({parseUrl:Te.Z.parseUrl}),Be=function(e,t){return e&&e.records?e.records.map((function(e){var r=O()((0,Ee.f1)(e)||t&&t.url);1===r.length&&(r=r[0]);var n=(0,Ee.dN)(e),o=O()((null==e?void 0:e.TileMatrixSetLink)||[]).reduce((function(t,r){var n,o=O()((null==e?void 0:e.TileMatrixSet)||[]).find((function(e){return e["ows:Identifier"]===r.TileMatrixSet})),i=o&&(0,se.getEPSGCode)(o["ows:SupportedCRS"]),a=null!=r&&r.TileMatrixSetLimits?O()((null==r||null===(n=r.TileMatrixSetLimits)||void 0===n?void 0:n.TileMatrixLimits)||[]).map((function(e){return{identifier:e.TileMatrix,ranges:{cols:{min:e.MinTileCol,max:e.MaxTileCol},rows:{min:e.MinTileRow,max:e.MaxTileRow}}}})):null;return Le(Le({},t),{},Me({},o["ows:Identifier"],Le(Le({crs:i},a&&{limits:a}),{},{tileMatrixSet:o})))}),{}),i=(0,Ee.nJ)({availableTileMatrixSets:o}).matrixIds,a=function(e){var t=e["ows:WGS84BoundingBox"];return t||(t={"ows:LowerCorner":"-180.0 -90.0","ows:UpperCorner":"180.0 90.0"}),t}(e),u=[{type:"OGC:WMTS",url:r,SRS:_e(e.SRS||[],i),params:{name:e["ows:Identifier"]}}],l=(0,N.tW)({references:u}).wmts;return{serviceType:"wmts",isValid:!!l,title:De(e["ows:Title"]||e["ows:Identifier"]),description:De(e["ows:Abstract"]||e["ows:Title"]||e["ows:Identifier"]),identifier:De(e["ows:Identifier"]),tags:"",layerOptions:t&&t.layerOptions||{},style:e.style,capabilitiesURL:n,queryable:e.queryable,requestEncoding:e.requestEncoding,availableTileMatrixSets:o,format:e.format,formats:e.formats,TileMatrixSetLink:O()(e.TileMatrixSetLink),boundingBox:{extent:[a["ows:LowerCorner"].split(" ")[0],a["ows:LowerCorner"].split(" ")[1],a["ows:UpperCorner"].split(" ")[0],a["ows:UpperCorner"].split(" ")[1]],crs:"EPSG:4326"},references:u,ogcReferences:l}})):null},Fe=function(e,t,r){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.removeParams,n=void 0===r?[]:r,o=t.service,i=t.catalogURL,a=t.url,u=t.layerBaseConfig;if(!e||!e.references)return null;var l,c,s=(0,N.tW)(e).wmts,f=function(e){return(0,N.em)((0,I.$F)(e),["request","layer","layers","service","version"].concat(n))},p=(0,N.qy)(s.url);if(p&&x()(p))l=p.map((function(e){return f(e)})).map((function(e){return e.url})),c=p.map((function(e){return f(e)})).map((function(e){return e.params})).reduce((function(e,t){return Le(Le({},e),t)}),{});else{var y=f(p||i);l=y.url,c=y.params}var d,b=(d=a||l,x()(d)&&1===d.length?d[0]:d),m=o||{},v=m.format,g=m.localizedLayerStyles,O=(0,N.n0)(s.SRS),S=e.format||v,h=e.formats?e.formats.find((function(e){return e===S}))||e.format:S;return Le(Le(Le({type:"wmts",requestEncoding:e.requestEncoding,style:e.style,format:h,url:b,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:s.params&&s.params.name,title:e.title||s.params&&s.params.name,description:e.description||"",availableTileMatrixSets:e.availableTileMatrixSets||[],credits:!(0,I.u8)("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:(0,N.F8)(e),params:c,allowedSRS:O,catalogURL:i},u),e.layerOptions),{},{localizedLayerStyles:L()(g)?void 0:g})}(e,t);return r?Promise.resolve(n):n},Ne=r(227361),We=r.n(Ne),Ke=r(505055),Ve=r.n(Ke),$e=r(233044),ze=r(993201);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ze(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xe={},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=O()(We()(e,"TileMapService.TileMaps.TileMap",[])),a=o.projection,u=We()(o,"options.service.allSRS"),l=i.map((function(t){var r=t.$,n=void 0===r?{}:r;return qe(qe({},n),{},{href:(0,$e.cleanAuthParamsFromURL)(n.href),identifier:(0,$e.cleanAuthParamsFromURL)(n.href),format:(0,ze.A)(n.href),tmsUrl:(0,$e.cleanAuthParamsFromURL)(e.url)})})).filter((function(e){var t=e.srs;return!(a&&!u)||function(e,t){return e===t||"EPSG:3857"===e&&"EPSG:900913"===t||"EPSG:900913"===e&&"EPSG:3857"===t}(t,a)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.srs,i=void 0===o?"":o;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:l.length,numberOfRecordsReturned:Math.min(r,l.length),nextRecord:t+Math.min(r,l.length)+1,records:l.filter((function(e,n){return n>=t-1&&n<t-1+r}))}},Je=function(e){return e},Qe=function(e,t,r,n,o){var i=Xe[e];return i&&(new Date).getTime()<i.timestamp+1e3*(I.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(Ye(i.data,t,r,n,o))})):V().get(e).then((function(i){var a;return Ve().parseString(i.data,{explicitArray:!1},(function(t,r){a=qe(qe({},r),{},{url:e})})),Xe[e]={timestamp:(new Date).getTime(),data:a},Ye(a,t,r,n,o)}))},et=r(836882),tt=r(611847);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=rt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==rt(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var it="custom",at=function(e,t,r,n,o){var i,a,u,l=We()(o,"options.service"),c=[];if(l.provider&&l.provider!==it){var s=(i=l.provider,Object.keys(null!==(a=null===et.Z||void 0===et.Z||null===(u=et.Z[i])||void 0===u?void 0:u.variants)&&void 0!==a?a:{}));0===s.length?c.push({provider:"".concat(l.provider),title:"".concat(l.provider)}):c=s.map((function(e){return{provider:"".concat(l.provider,".").concat(e)}}))}else l.url&&(c=[ot(ot({},l),{},{title:l.title,type:"tileprovider",url:l.url,attribution:l.attribution,options:l.options||{},provider:it})]);return new Promise((function(e){e(function(e,t,r,n){var o=e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===e?"":e).toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:t+Math.min(r,o.length)+1,records:i}}(c,t,r,n))}))};function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e,t,r){var n;return n=function(e,t){if("object"!=ut(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==ut(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ft=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=(o.options||{}).service;return"tms"===(void 0===i?{}:i).provider&&Qe(e,t,r,n,o),at(0,t,r,n,o)},pt=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=(o.options||{}).service;return"tms"===(void 0===i?{}:i).provider?Qe(e,t,r,n,o):at(0,t,r,n,o)},yt=function(e){return"tms"===e.provider?J(e):function(e){var t,r=e.provider&&"custom"!==e.provider?!!e.provider:(t=e.url,(0,tt.Nw)(t));if(e.title&&r)return U.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")}(e)},dt=function(e){return"tms"===e.provider?Q({parseUrl:Je})(e):function(e){return U.Observable.of(e)}(e)},bt=function(e,t){if(e&&e.records){if(t.service&&"tms"===t.service.provider){var r=[{type:"OGC:TMS",version:"1.0.0",url:t.url}],n=(0,N.tW)({references:r}).tms;return e.records.map((function(e){return{serviceType:"tms",layerType:"tms",isValid:!!n,title:e.title,tileMapUrl:e.href,description:"".concat(e.srs).concat(e.format?", "+e.format:""),tmsUrl:t.tmsUrl,references:r,ogcReferences:n}}))}return e.records.map((function(e){return{serviceType:"tms",layerType:"tileprovider",isValid:!!e.provider,title:e.title||e.provider,url:e.url,attribution:e.attribution,options:e.options,provider:e.provider,references:[]}}))}return null},mt=function(e,t){var r=e.tileMapUrl,n=t.tileMap,o=t.service,i=(n||{}).TileMap,a=void 0===i?{}:i,u=(o||{}).forceDefaultTileGrid,l=a.Title,c=a.Abstract,s=a.SRS,f=a.BoundingBox,p=void 0===f?{}:f,y=a.Origin,d=a.TileFormat,b=void 0===d?{}:d,m=a.TileSets,v=a.$,g=v.version,S=v.tilemapservice,h=We()(p,"$",{}),w=h.minx,P=h.miny,j=h.maxx,x=h.maxy,R=We()(y,"$"),E=R.x,T=R.y,C=We()(b,"$",{}),A=C.width,L=C.height,M=C["mime-type"],D=C.extension,_=[parseFloat(A),parseFloat(L,10)],U=O()(We()(m,"TileSet",[]).map((function(e){return e.$}))).map((function(e){var t=e.href,r=e.order,n=e["units-per-pixel"];return{href:(0,$e.cleanAuthParamsFromURL)(t),order:parseFloat(r),resolution:parseFloat(n)}})),G=We()(m,"profile");return{title:l,visibility:!0,hideErrors:!0,name:l,allowedSRS:st({},s,!0),description:c,srs:s,version:g,tileMapService:S?(0,$e.cleanAuthParamsFromURL)(S):void 0,type:"tms",profile:G,tileMapUrl:r,forceDefaultTileGrid:u,bbox:p&&{crs:s,bounds:{minx:parseFloat(w),miny:parseFloat(P),maxx:parseFloat(j),maxy:parseFloat(x)}},tileSets:U,origin:{x:parseFloat(E),y:parseFloat(T)},format:M,tileSize:_,extension:D}},vt=function(e){return{type:"tileprovider",visibility:!0,url:e.url,title:e.title,attribution:e.attribution,options:e.options,provider:e.provider,name:e.provider}},gt=function(e,t,r){return r?"tms"===e.layerType?(n=e.tileMapUrl,V().get(n).then((function(e){return new Promise((function(t){Ve().parseString(e.data,{explicitArray:!1},(function(e,r){return t(r)}))}))}))).then((function(r){return mt(e,ct(ct({},t),{},{tileMap:r}))})):Promise.resolve(vt(e)):function(e,t){return"tms"===e.layerType?mt(e,t):"tileprovider"===e.layerType?vt(e,t):null}(e,t);var n},Ot=r(432420);function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=St(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==St(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jt={},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=O()(We()(e,'["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType',[])).map((function(t){var r,n=t.Name,o=t.Title,i=t.Abstract,a=t.DefaultSRS,u=t.OtherSRS,l=void 0===u?[]:u,c=t["ows:WGS84BoundingBox"],s=c["ows:LowerCorner"].split(" "),f=c["ows:UpperCorner"].split(" "),p={minx:parseFloat(s[0]),miny:parseFloat(s[1]),maxx:parseFloat(f[0]),maxy:parseFloat(f[1])};return{featureType:t,type:"wfs",url:(0,$e.cleanAuthParamsFromURL)(e.url),name:n,title:o,description:i,SRS:[a].concat((r=l,function(e){if(Array.isArray(e))return Pt(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),defaultSRS:a,boundingBox:{bounds:p,crs:"EPSG:4326"}}})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.name,i=void 0===o?"":o,a=e.description;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())||-1!==a.toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:Math.min(r,i.length),nextRecord:t+Math.min(r,o.length)+1,records:i}},Rt=function(e,t,r,n,o){var i=jt[e];return i&&(new Date).getTime()<i.timestamp+1e3*(I.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(xt(i.data,t,r,n,o))})):(0,Ot.FU)(e).then((function(i){var a;return Ve().parseString(i.data,{explicitArray:!1,stripPrefix:!0},(function(t,r){a=wt(wt({},r),{},{url:e})})),jt[e]={timestamp:(new Date).getTime(),data:a},xt(a,t,r,n,o)}))},Et=Y,Tt=J,Ct=Q({parseUrl:Ot.dN}),At=function(e,t,r,n,o){return Rt(e,t,r,n,o)},Lt=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).records;return e?e.map((function(e){var t=[{type:"OGC:WFS-1.1.0-http-get-capabilities",url:e.url},{type:"OGC:WFS-1.1.0-http-get-feature",url:e.url}],r=(0,N.tW)({references:t}).wfs;return wt(wt({},e),{},{serviceType:"wfs",isValid:!!r,references:t,ogcReferences:r})})):null},Mt=function(e,t,r){var n=function(e){return wt({type:e.type||"wfs",search:{url:e.url,type:"wfs"},url:e.url,queryable:e.queryable,visibility:!0,name:e.name,title:e.title||e.name,description:e.description||"",bbox:e.boundingBox,links:(0,N.F8)(e)},e.layerOptions)}(e);return r?Promise.resolve(n):n};function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Dt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Dt(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Gt=Y,It=function(e){return U.Observable.of(e)},kt=function(e){return U.Observable.of(e)},Bt=function(e,t,r,n){return V().get(e).then((function(t){var r=t.data,o=[Ut({title:n,url:e,type:"geojson",name:n},r)];return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:o.length,records:o}}))},Ft=function(e){return e.records},Nt=function(e,t,r){var n=e?(0,k.Rt)(e):null;return r?Promise.resolve(n):n};function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Wt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Wt(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $t=r(932354).Z.textSearch,zt=Y,Zt=J,Ht=Q({parseUrl:function(e){return e}}),qt=function(e){return e&&e.records?e.records.map((function(e){return{serviceType:"backgrounds",isValid:!!e,description:e.title,title:e.title,identifier:e.name,thumbnail:e.thumbURL,references:[],background:e}})):null},Xt=function(e,t,r){var n=function(e){return Vt(Vt({},null==e?void 0:e.background),{},{id:null==e?void 0:e.background.name,visibility:!1})}(e);return r?Promise.resolve(n):n},Yt=["tileset"];function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Jt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Jt(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tr(e){var t=e.split("/");return t[t.length-2]}var rr=Y,nr=function(e){return U.Observable.of(e)},or=function(e,t,r,n,o){return function(e,t,r,n,o){return(0,pe.F)(e).then((function(t){var r,n,i=t.tileset,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,Yt),u=[er({title:(null==o||null===(r=o.options)||void 0===r||null===(n=r.service)||void 0===n?void 0:n.title)||tr(e),url:e,type:"3dtiles",tileset:i},a)];return{numberOfRecordsMatched:u.length,numberOfRecordsReturned:u.length,records:u}}))}(e,0,0,0,o)},ir=function(e){return null!=e&&e.records?e.records.map((function(e){var t=e.version,r=e.bbox,n=e.format,o=e.properties,i=(e.url||"").split("?")[0];return er(er(er(er({serviceType:"3dtiles",isValid:!0,description:"v. ".concat(t),title:e.title,identifier:i,url:e.url,thumbnail:null},r&&{bbox:r}),n&&{format:n}),o&&{properties:o}),{},{references:[]})})):null},ar=function(e,t,r){var n=function(e){if(!e)return null;var t=e.bbox,r=e.format,n=e.properties;return er(er(er({type:"3dtiles",url:e.url,title:e.title,visibility:!0},t&&{bbox:t}),r&&{format:r}),n&&{properties:n})}(e);return r?Promise.resolve(n):n},ur=function(e){if(e.title&&function(e){if((0,tt.Nw)(e)){var t=e.split(/\./g);return"json"===(t[t.length-1]||"").split(/\?/g)[0]}return!1}(e.url))return U.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")},lr=r(274698),cr=r(774565);function sr(e){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(e)}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=sr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==sr(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var dr="cog",br=function(e){var t=e.geoKeys;return t?t.ProjectedCSTypeGeoKey&&32767!==t.ProjectedCSTypeGeoKey?"EPSG:"+t.ProjectedCSTypeGeoKey:t.GeographicTypeGeoKey&&32767!==t.GeographicTypeGeoKey?"EPSG:"+t.GeographicTypeGeoKey:null:null},mr=function(e){return e(new DOMException("Aborted","AbortError"))},vr={},gr=function(e,t,r,n){var o,i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=We()(a,"options.service"),l=[];return u.records&&(l=null===(o=u.records)||void 0===o?void 0:o.map((function(e){var t=e.url,r=yr(yr({},u),{},{title:e.title,type:dr,sources:[{url:t}],options:u.options||{}}),n=We()(a,"options.controller"),o=We()(a,"options.save",!1);if((L()(u.fetchMetadata)||u.fetchMetadata)&&o){var i=vr[t];return i&&(new Date).getTime()<i.timestamp+1e3*(I.ZP.getConfigProp("cacheExpire")||60)?yr({},i.data):function(e,t){return null!=t&&t.aborted?mr(Promise.reject):new Promise((function(r,n){return null==t||t.addEventListener("abort",(function(){return mr(n)})),(0,lr.W0)(e).then((function(e){return e.getImage()})).then((function(e){return r(e)})).catch((function(){return mr(n)}))}))}(t,null==n?void 0:n.signal).then((function(e){var n=br(e),o=e.getBoundingBox(),i=(0,cr.LZ)(n);return r=yr(yr({},r),{},{sourceMetadata:{crs:n,extent:o,width:e.getWidth(),height:e.getHeight(),tileWidth:e.getTileWidth(),tileHeight:e.getTileHeight(),origin:e.getOrigin(),resolution:e.getResolution()}},!C()(o)&&!C()(n)&&{bbox:yr({crs:n},i&&{bounds:{minx:o[0],miny:o[1],maxx:o[2],maxy:o[3]}})}),vr[t]={timestamp:(new Date).getTime(),data:yr({},r)},r})).catch((function(){return yr({},r)}))}return Promise.resolve(r)}))),Promise.all((i=l,function(e){if(Array.isArray(e))return fr(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return fr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fr(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).then((function(e){return function(e,t,r,n){var o=e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===e?"":e).toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:t+Math.min(r,o.length)+1,records:i}}(e,t,r,n)}))},Or=function(e,t,r,n){return gr(e,t,r,n,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{})},Sr=function(e){return function(e){var t,r=null===(t=e.records)||void 0===t?void 0:t.every((function(e){return(0,tt.K2)(null==e?void 0:e.url)}));if(e.title&&r)return U.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")}(e)},hr=function(e){return U.Observable.of(e)},wr=function(e){return e&&e.records?e.records.map((function(e){var t;return yr(yr({},e),{},{serviceType:dr,isValid:null===(t=e.sources)||void 0===t?void 0:t.every((function(e){return(0,tt.K2)(e.url)})),title:e.title||e.provider,sources:e.sources,options:e.options,references:[]})})):null},Pr=function(e){return yr(yr({},e),{},{type:dr,visibility:!0,sources:e.sources,title:e.title,options:e.options,name:e.title})},jr=function(e,t){return Pr(e,t)},xr=function(e,t,r){return r?Promise.resolve(jr(e,t)):jr(e,t)};const Rr={csw:o,wfs:u,wms:n,tms:a,wmts:i,geojson:l,backgrounds:c,"3dtiles":s,cog:f}},856175:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ae});var n=r(49977),o=r(409669),i=r.n(o),a=r(737691),u=r.n(a),l=r(430647),c=r(91175),s=r.n(c),f=r(227361),p=r.n(f),y=r(313311),d=r.n(y),b=r(701469),m=r.n(b),v=r(747037),g=r.n(v),O=r(513218),S=r.n(O),h=r(3674),w=r.n(h),P=r(493220),j=r.n(P),x=r(682492),R=r.n(x),E=r(984596),T=r.n(E),C=r(931273),A=r(580416),L=r(197395),M=r(782904),D=r(921914),_=r(53001),U=r(788113),G=r(31935),I=r(308316),k=r(675110),B=r(576712),F=r(501157),N=r(916651),W=r(737275),K=r(624262),V=r(801550),$=r(659551),z=r(800827),Z=r(552259),H=r(432420),q=r(838848),X=r(904679),Y=["format","url","text","layerOptions","service"];function J(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t,r){var n;return n=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==te(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=function(e,t){return e?n.Observable.of((0,L.vU)({title:"notification.warning",message:"catalog.notification.errorServiceUrl",autoDismiss:6,position:"tc"}),(0,C.Rc)(!1)):n.Observable.of((0,C.m)(t))};const ae=function(e){return{recordSearchEpic:function(t,r){return t.ofType(C.V3).switchMap((function(t){var o=t.format,i=t.url,a=t.startPosition,u=t.maxRecords,l=t.text,c=t.options,s=p()(c,"service.filter")||p()(c,"filter"),f=p()(c,"isNewService",!1);return n.Observable.defer((function(){return e[o].textSearch(i,a,u,l,ne({options:c,filter:s},(0,U.HN)(r.getState())))})).switchMap((function(e){if(e.error)return ie(f,e);var t=n.Observable.empty();return f&&(t=n.Observable.from([(0,C.zX)(!0),(0,C.N3)(c.service),(0,L.Vp)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}),(0,C.Rc)(!1)])),t.concat([(0,C.nX)({url:i,startPosition:a,maxRecords:u,text:l},e)])})).startWith(f?(0,C.Rc)(!0):(0,C.K4)(!0)).catch((function(e){return ie(f,e)}))}))},addLayersFromCatalogsEpic:function(t,r){return t.ofType(C.WX).filter((function(e){var t=e.layers,r=e.sources;return m()(t)&&m()(r)&&t.length&&t.length===r.length})).mergeMap((function(t){var o=t.layers,i=t.sources,a=t.options,u=t.startPosition,l=void 0===u?1:u,c=t.maxRecords,f=void 0===c?4:c,y=r.getState(),d=(0,U.PG)(y),b=o.filter((function(e,t){return!(null==d||!d[i[t]])||"object"===te(i[t])})).map((function(t,r){var u,c=i[r],s="object"===te(c)?c:d[c],b=s.type.toLowerCase(),m=s.url,v=o[r],g=p()(a,r,(0,U.bA)(y)),O="3dtiles"===b||"geojson"===b?ne(ne({},g),{},{title:S()(null==g?void 0:g.title)?ne(ne({},null==g?void 0:g.title),{},{default:(null==g||null===(u=g.title)||void 0===u?void 0:u.default)||v}):(null==g?void 0:g.title)||v}):g;return n.Observable.defer((function(){return e[b].textSearch(m,l,f,v,ne(ne(ne({},O),s),{},{options:{service:s}})).catch((function(){return{records:[]}}))})).map((function(e){return ne(ne({},e),{},{format:b,url:m,text:v,layerOptions:O,service:s})}))}));return n.Observable.forkJoin(b).switchMap((function(t){return m()(t)&&t.length?n.Observable.of(t.map((function(t){var r=t.format,o=t.url,i=t.text,a=t.layerOptions,u=t.service,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,Y),c=(0,I.Ps)(y),f=e[r].getCatalogRecords(l,{layerOptions:a,url:null==u?void 0:u.url,service:u},c)||[],p=s()(f.filter((function(e){return e.identifier||e.name===i}))),d=(0,B.tW)(p),b=d.wms,m=d.wmts,v=b||m;if(v){var g=(0,B.n0)(v.SRS);if(v.SRS.length>0&&!N.default.isAllowedSRS("EPSG:3857",g))return n.Observable.empty()}var O=(0,U.kS)(y),S=e[r].getLayerFromRecord(p,{service:u,removeParams:O,catalogURL:"csw"===r&&o?o+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+p.identifier:o,layerBaseConfig:{},map:{projection:(0,z.uy)(y),resolutions:(0,Z.MR)()}});return p?[S,a]:[i]}))):n.Observable.empty()}))})).mergeMap((function(e){if(e){var t=e.filter((function(e){return g()(e[0])})).join(" "),r=[];t&&(r=[(0,C.E9)(t)]);var o=e.filter((function(e){return S()(e[0])})).map((function(e){return R()({},e[0],e[1])}));return r=[].concat(J(r),J(o.map((function(e){return(0,C.A4)(e)})))),n.Observable.from(r)}return n.Observable.empty()})).catch((function(){return n.Observable.empty()}))},addLayerAndDescribeEpic:function(e,t){return e.ofType(C.r7).mergeMap((function(e){var r=e.layer,o=e.zoomToLayer,i=[],a=t.getState(),u=(0,K.R8)(r);return i.push((0,A.A4)(ne(ne({},r),{},{id:u}))),o&&r.bbox&&i.push((0,V.Px)(r.bbox.bounds,r.bbox.crs)),"wms"===r.type?n.Observable.defer((function(){return(0,F.gs)((0,K.Hi)(r),r.name)})).switchMap((function(e){if(e){var t=d()(e,(function(e){return e.name===r.name}));if(t&&"WFS"===t.owsType){var o=W.ZP.filterUrlParams(W.ZP.cleanDuplicatedQuestionMarks(t.owsURL),(0,U.kS)(a));return n.Observable.of((0,A.He)(u,{search:{url:o,type:"wfs"}}))}}return n.Observable.empty()})).merge(n.Observable.from(i)).catch((function(e){return n.Observable.of((0,C.bu)(r,e))})):"wfs"===r.type?n.Observable.defer((function(){return(0,H.v$)(r.url,r.name)})).switchMap((function(e){var t=((0,q.mI)(e)||"").replace("Multi",""),r=["Point","LineString","Polygon"].includes(t)?t:"GeometryCollection";return n.Observable.of((0,A.He)(u,{style:(0,X.y)({geometryType:r})}))})).merge(n.Observable.from(i)).catch((function(e){return n.Observable.of((0,C.bu)(r,e))})):n.Observable.from(i)})).catch((function(){return n.Observable.empty()}))},newCatalogServiceAdded:function(t,r){return t.ofType(C.mh).switchMap((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).options,o=r.getState(),i=(0,U._S)(o),a=(0,U.y)(o);return n.Observable.of(i).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.preprocess)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.validate)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(e){return n.Observable.of((0,C.tt)({format:e.type,url:e.url,startPosition:1,maxRecords:a,text:"",options:ne({service:e,isNewService:!0},t)}))})).catch((function(e){return n.Observable.of((0,L.vU)({exception:e,title:"notification.warning",message:e.notification||"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))}))}))},deleteCatalogServiceEpic:function(e,t){return e.ofType(C.$Y).switchMap((function(){var e=t.getState(),r=(0,U.Cb)(e),o=(0,U.b6)(e),i=o[r]?(0,L.Vp)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):(0,L.vU)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),a=(0,C.SU)(r);return o[r]?n.Observable.of(i,a):n.Observable.of(i)}))},openCatalogEpic:function(e,t){return e.ofType(M.At,M.kM).filter((function(e){return"metadataexplorer"===e.control&&(0,U.JF)(t.getState())})).switchMap((function(){return n.Observable.of((0,D.g)(),(0,D.aN)())}))},getMetadataRecordById:function(e,t){return e.ofType(C.UT).switchMap((function(e){var r=e.metadataOptions,o=void 0===r?{}:r,a=t.getState(),c=(0,k.Iz)(a);return n.Observable.defer((function(){return(0,F.FU)((0,K.Fh)(c))})).switchMap((function(e){var t,r=(0,F.Xv)(null==e?void 0:e.Capability),a=T()((1===r.length?r[0].MetadataURL:null===(t=d()(r,(function(e){return(0,K.H7)(e.Name)===(0,K.H7)(c.name)})))||void 0===t?void 0:t.MetadataURL)||[]).map((function(e){var t,r,n,o,i,a;return ne(ne({},null==e?void 0:e.$),{},{format:null==e?void 0:e.Format,onlineResource:{type:null==e||null===(t=e.OnlineResource)||void 0===t||null===(r=t.$)||void 0===r?void 0:r["xlink:type"],href:null==e||null===(n=e.OnlineResource)||void 0===n||null===(o=n.$)||void 0===o?void 0:o["xlink:href"],xlink:null==e||null===(i=e.OnlineResource)||void 0===i||null===(a=i.$)||void 0===a?void 0:a["xmlns:xlink"]}})})),s=p()(d()(a,(function(e){return g()(e.type)&&("iso19115:2003"===e.type.toLowerCase()||"tc211"===e.type.toLowerCase())&&("application/xml"===e.format||"text/xml"===e.format)})),"onlineResource.href"),f=p()(d()(a,(function(e){return g()(e.type)&&("iso19115:2003"===e.type.toLowerCase()||"tc211"===e.type.toLowerCase())&&"text/html"===e.format})),"onlineResource.href"),y=d()(p()(o,"extractors",[]),(function(e){var t=e.properties,r=e.layersRegex,n=r?new RegExp(r):null;return S()(t)&&(!r||n.test(c.name))})),b=f?{metadataUrl:f}:{},m=n.Observable.defer((function(){return $.ZP.getRecordById(c.catalogURL)})).switchMap((function(e){return e&&e.error?n.Observable.of((0,L.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,A.c9)(b,!1)):e&&e.dc?n.Observable.of((0,A.c9)(ne(ne({},b),e.dc),!1)):n.Observable.empty()})),v=n.Observable.defer((function(){return i().get(s,{headers:{Accept:"application/xml"}})})).pluck("data").map((function(e){return(new l.a).parseFromString(e)})).map((function(e){var t=u().useNamespaces(o.xmlNamespaces||{});return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return j()(r).reduce((function(r,o){var i,a,u,l=(u=2,function(e){if(Array.isArray(e))return e}(a=o)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(a,u)||Q(a,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],s=l[1];if(S()(s)&&g()(s.xpath)&&S()(s.properties)&&w()(s.properties).length>0)0===(i=t(s.xpath,n).map((function(t){return e(s.properties,t)}))).length&&(i=null);else{var f,y=t(s,n);1===y.length?i=null!==(f=p()(y[0],"nodeValue"))&&void 0!==f?f:p()(y[0],"childNodes[0].nodeValue"):y.length>1&&(i=y.map((function(e){return p()(e,"childNodes[0].nodeValue")})).filter((function(e){return!!e})))}return ne(ne({},r),i?oe({},c,i):{})}),{})}(y.properties,e)})).switchMap((function(e){return n.Observable.of((0,A.c9)(ne(ne({},b),e),!1))}));return s&&y?v:c.catalogURL?m:n.Observable.of((0,A.c9)(b,!1))})).startWith((0,A.c9)({},!0)).catch((function(){return n.Observable.of((0,L.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,A.c9)({},!1))}))}))},autoSearchEpic:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(C.CO).debounce((function(){var e=r(),t=(0,U.l2)(e);return n.Observable.timer(t)})).switchMap((function(e){var t=e.text,o=r(),i=(0,U.y)(o),a=(0,U.R7)(o),u=a.type,l=a.url,c=a.filter;return n.Observable.of((0,C.tt)({format:u,url:l,startPosition:1,maxRecords:i,text:t,options:{service:a,filter:c}}))}))},catalogCloseEpic:function(e,t){return e.ofType(C.ur).switchMap((function(){var e,r=t.getState(),o=(0,G.YL)(r),i=(0,U.b6)(r);return(e=n.Observable).of.apply(e,J([(0,M.pu)("metadataexplorer","enabled",!1,"group",null),(0,C.In)("view"),(0,C.ye)()].concat("backgroundSelector"===o?[(0,C.Dw)(s()(w()(i))),(0,_.vw)(!0)]:[])))}))},updateGroupSelectedMetadataExplorerEpic:function(e,t){return e.ofType(A.c7).filter((function(){return(0,U.JF)(t.getState())})).switchMap((function(e){var r=e.nodeType,o=e.id,i=t.getState(),a=0===(0,k.NP)(i).length||"group"!==r?"Default":o;return n.Observable.of((0,M.Xg)("metadataexplorer","group",a))}))}}}},31935:(e,t,r)=>{"use strict";r.d(t,{YL:()=>u,B0:()=>l,Mz:()=>c,TC:()=>s,qS:()=>f,Pe:()=>p,TP:()=>y});var n=r(22222),o=r(675110),i=r(93152),a=r(624262),u=function(e){return e.backgroundSelector&&e.backgroundSelector.source},l=function(e){return e.backgroundSelector&&e.backgroundSelector.modalParams},c=function(e){return e.backgroundSelector&&e.backgroundSelector.backgrounds||[]},s=function(e){return e.backgroundSelector&&e.backgroundSelector.lastRemovedId},f=function(e){return e.backgroundSelector&&e.backgroundSelector.confirmDeleteBackgroundModal},p=function(e){return e.backgroundSelector&&e.backgroundSelector.allowDeletion},y=(0,n.P1)(o.l2,i.$v,i.lh,(function(e,t,r){var n=e.filter((function(e){return e&&"background"===e.group}));return r&&r[t]?n.map((function(e){return(0,a.kf)(e,t)}))||[]:n}))},788113:(e,t,r)=>{"use strict";r.d(t,{b6:()=>f,PG:()=>p,_x:()=>y,Mm:()=>d,dP:()=>b,SX:()=>m,ZL:()=>v,_S:()=>g,iH:()=>O,R7:()=>S,Q7:()=>h,n7:()=>w,bA:()=>P,hm:()=>j,E2:()=>x,Cb:()=>R,eK:()=>E,Im:()=>T,e8:()=>C,JF:()=>A,kS:()=>L,y:()=>M,l2:()=>D,HN:()=>_,BM:()=>U,O8:()=>G,am:()=>I,LV:()=>k,CK:()=>B,jU:()=>F,Qg:()=>N});var n=r(22222),o=r(227361),i=r.n(o),a=r(800827),u=r(577215);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==l(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(e){return i()(e,"catalog.services")},p=(0,n.P1)((function(e){return i()(e,"catalog.default.staticServices")}),f,(function(e,t){var r=null==e?void 0:e.default_map_backgrounds;return r?(r.readOnly=!0,s(s({},t),{},{default_map_backgrounds:r})):t})),y=function(e){return i()(e,"catalog.default.tileSizes",[256,512])},d=function(e){return i()(e,"controls.metadataexplorer.group")},b=function(e){return i()(e,"catalog.saving")},m=function(e){return i()(e,"catalog.result")},v=function(e){return i()(e,"catalog.openCatalogServiceList")},g=function(e){return i()(e,"catalog.newService")},O=function(e){return i()(e,"catalog.newService.type","csw")},S=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"]'))},h=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].type'),function(e){return i()(e,'catalog.default.staticServices["'.concat(i()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},w=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].layerOptions'),{})},P=function(e){return i()(e,"catalog.searchOptions")},j=function(e){return i()(e,"catalog.loadingError")},x=function(e){return i()(e,"catalog.loading",!1)},R=function(e){return i()(e,"catalog.selectedService")},E=function(e){return i()(e,"catalog.mode","view")},T=function(e){return i()(e,"catalog.layerError")},C=function(e){return i()(e,"catalog.searchOptions.text","")},A=function(e){return"metadataexplorer"===i()(e,"controls.toolbar.active")||i()(e,"controls.metadataexplorer.enabled")},L=function(e){return(i()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},M=function(e){return i()(e,"catalog.pageSize",4)},D=function(e){return i()(e,"catalog.delayAutoSearch",1e3)},_=(0,n.zB)({projection:a.uy}),U=function(e){return i()(e,"catalog.formatsLoading",!1)},G=function(e){return i()(e,"catalog.newService.supportedFormats.imageFormats",[])},I=function(e){var t,r;return"edit"===E(e)?G(e):(null===(t=S(e))||void 0===t||null===(r=t.supportedFormats)||void 0===r?void 0:r.imageFormats)||[]},k=function(e){return i()(e,"catalog.newService.supportedFormats.infoFormats",(0,u.oL)())},B=function(e){return i()(e,"catalog.newService.formatUrlUsed","")},F=function(e){return i()(e,"catalog.isNewServiceAdded",!1)},N=function(e){return i()(e,"catalog.showFormatError",!1)}},38842:(e,t,r)=>{"use strict";r.d(t,{wk:()=>f,Yf:()=>p,c3:()=>y,fY:()=>d});var n=r(218721),o=r.n(n),i=r(227361),a=r.n(i),u=r(313311),l=r.n(u),c=r(22222),s=r(308316),f=function(e){return o()(e,"localConfig.localizedLayerStyles")},p=function(e){var t=a()(e,"localConfig.plugins.dashboard",[]),r=l()(t,(function(e){return"DashboardEditor"===e.name}))||{};return a()(r,"cfg.catalog.localizedLayerStyles",!1)},y=function(e){return a()(e,"localConfig.localizedLayerStyles.name","mapstore_language")},d=(0,c.P1)(f,y,s.KV,(function(e,t,r){var n=[];return e&&n.push({name:t,value:r}),n}))},576712:(e,t,r)=>{"use strict";r.d(t,{n0:()=>p,em:()=>y,tW:()=>d,FJ:()=>b,F8:()=>m,p8:()=>v,qy:()=>g});var n=r(727418),o=r.n(n),i=r(91175),a=r.n(i),u=r(701469),l=r.n(u),c=r(916651);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){return e.filter((function(e){return c.default.isSRSAllowed(e)})).reduce((function(e,t){return o()(e,(r={},i=!0,a=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n=t),(n="symbol"==s(a)?a:String(a))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r));var r,n,i,a}),{})},y=function(e,t){var r=e.split("?"),n={};return r.length>=2&&r[1]&&r[1].split(/[&;]/g).forEach((function(e){var r=e.split("=");-1===t.indexOf(r[0].toLowerCase())&&(n[r[0]]=r[1])})),{url:r[0],params:n}},d=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).references,t=void 0===e?[]:e;return{wfs:a()(t.filter((function(e){return e.type&&("OGC:WFS"===e.type||e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-feature")>-1)}))),wms:a()(t.filter((function(e){return e.type&&("OGC:WMS"===e.type||e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-map")>-1)}))),wmts:a()(t.filter((function(e){return e.type&&("OGC:WMTS"===e.type||e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-map")>-1)}))),tms:a()(t.filter((function(e){return e.type&&("OGC:TMS"===e.type||e.type.indexOf("OGC:TMS")>-1)})))}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{references:[]};return{esri:a()(e.references.filter((function(e){return e.type&&("ESRI:SERVER"===e.type||"arcgis"===e.type)})))}},m=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).references,t=void 0===e?[]:e,r=a()(t.filter((function(e){return e.type&&e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),n=a()(t.filter((function(e){return e.type&&e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),o=a()(t.filter((function(e){return e.type&&e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),i=[];return r&&i.push({type:"WMS_GET_CAPABILITIES",url:r.url,labelId:"catalog.wmsGetCapLink"}),o&&i.push({type:"WMTS_GET_CAPABILITIES",url:o.url,labelId:"catalog.wmtsGetCapLink"}),n&&i.push({type:"WFS_GET_CAPABILITIES",url:n.url,labelId:"catalog.wfsGetCapLink"}),i},v=function(e){var t,r;return"wms"===e.type?[e.url].concat((r=null!==(t=e.domainAliases)&&void 0!==t?t:[],function(e){if(Array.isArray(e))return f(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).join(","):e.url},g=function(e){return e&&!l()(e)&&-1!==e.indexOf(",")?e.split(",").map((function(e){return e.trim()})):e}},904679:(e,t,r)=>{"use strict";r.d(t,{y:()=>v,p:()=>g});var n=r(717621),o=r.n(n),i=r(423570),a=r.n(i),u=r(903918),l=r.n(u),c=r(441609),s=r.n(c),f=r(166287);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==p(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.marker,r=e.fillColor,n=void 0===r?"#f2f2f2":r,o=e.fillOpacity,i=void 0===o?.3:o,u=e.strokeColor,c=void 0===u?"#3075e9":u,s=e.strokeOpacity,f=void 0===s?1:s,p=e.strokeWidth,y=void 0===p?2:p,d=e.radius,m=void 0===d?10:d,v=e.geometryType,g=void 0===v?"GeometryCollection":v;return{format:"geostyler",metadata:{editorType:"visual"},body:{rules:[].concat(b(t?[{name:"Default Marker Style",ruleId:a()(),symbolizers:[{kind:"Icon",image:l(),opacity:1,size:32,rotate:0,msBringToFront:!0,msHeightReference:"none",symbolizerId:a()()}]}]:[]),b(["GeometryCollection","Point","MultiPoint"].includes(g)&&!t?[{name:"Default Point Style",ruleId:a()(),symbolizers:[{kind:"Mark",color:n,fillOpacity:i,opacity:1,strokeColor:c,strokeOpacity:f,strokeWidth:y,wellKnownName:"Circle",radius:m,msBringToFront:!0,symbolizerId:a()()}]}]:[]),b(["GeometryCollection","LineString","MultiLineString"].includes(g)&&!t?[{name:"Default Line Style",ruleId:a()(),symbolizers:[{kind:"Line",color:c,opacity:f,width:y,symbolizerId:a()()}]}]:[]),b(["GeometryCollection","Polygon","MultiPolygon"].includes(g)&&!t?[{name:"Default Polygon Style",ruleId:a()(),symbolizers:[{kind:"Fill",color:n,fillOpacity:i,outlineColor:c,outlineOpacity:f,outlineWidth:y,symbolizerId:a()()}]}]:[]))}}},g=function(e,t){var r,n,i,a,u,l=(0,f.flattenFeatures)((null==e?void 0:e.features)||[]);if(l.find((function(e){var t;return!s()((null==e?void 0:e.style)||{})&&(null==e||null===(t=e.properties)||void 0===t?void 0:t.id)}))||null!=e&&null!==(r=e.style)&&void 0!==r&&r.format&&!s()(null==e||null===(n=e.style)||void 0===n?void 0:n.body)||(null==e||null===(i=e.style)||void 0===i||!i.format)&&!s()(e.style))return e;var c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).features,t=((e||[]).find((function(e){var t=e.geometry;return null==t?void 0:t.type}))||{}).geometry;if(!t)return null;var r=t.type.replace("Multi","");return"GeometryCollection"===r||(e||[]).find((function(e){var t,n=e.geometry;return(null==n||null===(t=n.type)||void 0===t?void 0:t.replace("Multi",""))!==r}))?"GeometryCollection":r}({features:l}),p=!(null==t||!t.marker||!["Point","MultiPoint"].includes(c)),y=t&&o()(t.fill).toHexString(),b=null==t||null===(a=t.fill)||void 0===a?void 0:a.a,m=t&&o()(null==t?void 0:t.color).toHexString(),g=null==t||null===(u=t.color)||void 0===u?void 0:u.a,O=null==t?void 0:t.width,S=null==t?void 0:t.radius;return d(d(d({},e),p&&{handleClickOnLayer:!0}),{},{style:v(t?{marker:p,fillColor:y,fillOpacity:b,strokeColor:m,strokeOpacity:g,strokeWidth:O,radius:S,geometryType:c}:{geometryType:c})})}},993201:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(264721),o=r.n(n),i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("?")[0].split("@");if(e.length>1){var t=e[e.length-1];if(o()(["png","png8","jpeg","vnd.jpeg-png","gif"],t))return t}return null}},577215:(e,t,r)=>{"use strict";r.d(t,{oL:()=>b,F0:()=>m,cP:()=>v,Br:()=>g,rD:()=>O});var n=r(944908),o=r.n(n),i=r(513218),a=r.n(i),u=r(984596),l=r.n(u),c=r(125376),s=r(916651);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==f(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],b=function(){return o()(Object.values((0,c.eq)()))},m=function(e){return d.includes(e)},v=function(e){return b().includes(e)},g=function(e){var t,r,n,o,i;return a()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.westBoundLongitude,miny:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.southBoundLatitude,maxx:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&l()(e.Style).map((function(e){return y(y(y({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:l()(e.LegendURL).map((function(e){var t,r,n,o,i,a;return y({width:null!=e&&null!==(t=e.$)&&void 0!==t&&t.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(r=e.$)&&void 0!==r&&r.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(n=e.OnlineResource)||void 0===n||null===(o=n.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(a=i.$)||void 0===a?void 0:a["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}},O=function(e){var t=e.tileGrids,r=void 0===t?[]:t,n=e.projection,o=e.tileSize,i=void 0===o?256:o;return r.find((function(e){var t,r,o;return(0,s.normalizeSRS)(e.crs)===(0,s.normalizeSRS)(n)&&!(((null===(t=e.tileSizes)||void 0===t||null===(r=t[0])||void 0===r?void 0:r[0])||(null===(o=e.tileSize)||void 0===o?void 0:o[0]))!==i)}))}},558618:()=>{},200120:()=>{}}]);