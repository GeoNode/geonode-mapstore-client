"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3321],{29628(e,t,r){r.d(t,{A:()=>i});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,"#featuregrid-toolbar .snap-tool.split-button .dropdown-menu {\n  min-width: 250px;\n  min-height: 200px;\n  overflow: hidden !important;\n}\n#featuregrid-toolbar .snap-tool.split-button .dropdown-menu > label,\n#featuregrid-toolbar .snap-tool.split-button .dropdown-menu .form-group > label {\n  padding: 3px 10px;\n  margin-bottom: 0;\n}\n#featuregrid-toolbar .snap-tool.split-button .dropdown-menu .Select {\n  margin: 0 15px;\n}\n#featuregrid-toolbar .snap-tool.split-button .Select-menu-outer .Select-menu {\n  overflow: auto;\n  max-height: 150px;\n}\n",""]);const i=o},82324(e,t,r){r.d(t,{A:()=>i});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,".ms-resize-container {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.ms-resize-container .ms-resize-handle {\n  height: 4px;\n  cursor: row-resize;\n  background-color: transparent;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 10;\n  border-top: 2px solid transparent;\n  transition: border-color 0.2s;\n}\n.ms-resize-container .ms-resize-handle:hover {\n  border-top-color: #ccc;\n}\n.ms-resize-container .ms-resize-content {\n  flex: 1;\n  overflow: hidden;\n}\n",""]);const i=o},87538(e,t,r){r.d(t,{A:()=>i});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,"\n.msgapi .featuregrid-toolbar {\n    margin-top: 5px;\n    margin-bottom: 5px;\n}\n\n.msgapi #featuregrid-toolbar .btn {\n    overflow: hidden;\n}\n\n.msgapi #featuregrid-toolbar .spinner {\n    margin: 0 auto;\n    width: 100%;\n}\n\n.msgapi #featuregrid-toolbar .spinner > div {\n    background-color: white;\n    width: 8px;\n    height: 8px;\n}\n",""]);const i=o},159686(e,t,r){r.d(t,{A:()=>d});var n=r(916589),o=r(245528),i=r(45388),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=(0,n.mapPropsStreamWithConfig)(o.A);const d=(0,n.compose)((0,n.defaultProps)({dataStreamFactory:function(){return a().Observable.of({})}}),f(function(e){return e.take(1).switchMap(function(t){return t.dataStreamFactory(e.startWith(t),t)}).combineLatest(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(c({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),e)})}))},250100(e,t,r){r.r(t),r.d(t,{default:()=>ot,selector:()=>nt});var n=r(273517),o=r.n(n),i=r(811668),a=r(801081),l=r(706702),u=r(978632),c=r.n(u),s=r(255435),f=r.n(s),d=r(809136),p=r.n(d),m=r(916589),v=r(993456),b=r(32719),g=r(154150),y=r(525859),h=r(762686),O=r(806653),S=r(401631),w=r(534332),E=r(406250),P=r(347018),j=r(742466),C=r(8117),A=r(750042),k=r.n(A),T=r(711030),I=r(8571),x=r(785072),F=r.n(x),N=r(87538);F()(N.A,{insert:"head",singleton:!1}),N.A.locals;var D=r(67235),M=r.n(D),z=r(926560),B=r(628304),G=r(477937),V=r(29628);F()(V.A,{insert:"head",singleton:!1}),V.A.locals;var H=r(32485),L=r.n(H);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}var R=["disabled","id","visible","onClick","active","title","buttonClassName","menuStyle","className","children","onMount"];function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q.apply(null,arguments)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){J(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function J(e,t,r){return(t=function(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const K=(0,n.forwardRef)(function(e,t){var r,i,a=e.disabled,l=e.id,u=e.visible,c=e.onClick,s=e.active,f=e.title,d=e.buttonClassName,p=void 0===d?"square-button":d,m=e.menuStyle,b=void 0===m?{}:m,g=e.className,y=e.children,h=e.onMount,O=void 0===h?function(){}:h,S=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,R),w=(r=(0,n.useState)(!1),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(r,i)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=w[0],P=w[1];return(0,n.useEffect)(function(){"function"==typeof O&&O()},[]),!!u&&o().createElement(v.A,null,o().createElement(C.ms,{className:L()(U({"split-button":!0},g?J({},g,!0):{})),open:E,onToggle:function(e,t){t&&P(e)}},o().createElement(C.$n,q({ref:t,id:l,onClick:function(){return!a&&c()},className:p,bsStyle:s?"success":"primary"},S),f),o().createElement(C.ms.Toggle,{bsStyle:s?"success":"primary"}),o().createElement(C.ms.Menu,{style:b,onSelect:function(e){["number","text"].includes(e.target.type)?P(!0):P(!E)}},y)))});var X=r(192016),Z=r(444003);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}var Q=["position"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ee.apply(null,arguments)}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach(function(t){oe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oe(e,t,r){return(t=function(e){var t=function(e){if("object"!=$(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=(0,z.A)(B.A),ae=(0,z.A)(K),le=function(e,t){return e?"featuregrid.toolbar.stopDrawGeom":t?"featuregrid.toolbar.drawGeom":"featuregrid.toolbar.addGeom"},ue=function(e){var t=e.saving,r=e.saved,n=e.error;return t||r?"featuregrid.toolbar.saving":n?"featuregrid.toolbar.validationError":"featuregrid.toolbar.saveChanges"},ce={editMode:function(e){var t=e.disabled,r=e.mode,n=e.isEditingAllowed,i=e.layer,a=e.events,l=void 0===a?{}:a;return o().createElement(ie,{id:"edit-mode",keyProp:"edit-mode",tooltipId:"featuregrid.toolbar.editMode",disabled:t,visible:"VIEW"===r&&n&&(0,y.Dx)(i),onClick:l.switchEditMode,glyph:"pencil"})},filter:function(e){var t=e.isFilterActive,r=void 0!==t&&t,n=e.viewportFilter,i=e.disabled,a=e.isSearchAllowed,l=e.mode,u=e.showAdvancedFilterButton,c=void 0===u||u,s=e.events,f=void 0===s?{}:s;return o().createElement(ie,{id:"search",keyProp:"search",tooltipId:"featuregrid.toolbar.advancedFilter",active:r||n,disabled:i||!a,visible:"VIEW"===l&&c,onClick:f.showQueryPanel,glyph:"filter"})},zoomAll:function(e){var t=e.disabled,r=e.disableZoomAll,n=void 0!==r&&r,i=e.mode,a=e.events,l=void 0===a?{}:a,u=e.hideSpatialFunctionalityTools,c=void 0!==u&&u;return o().createElement(ie,{id:"zoom-all",keyProp:"zoom-all",tooltipId:"featuregrid.toolbar.zoomAll",disabled:t||n,visible:"VIEW"===i&&!c,onClick:l.zoomAll,glyph:"zoom-to"})},backToViewMode:function(e){var t=e.disabled,r=e.mode,n=e.hasChanges,i=e.hasNewFeatures,a=e.events,l=void 0===a?{}:a;return o().createElement(ie,{id:"back-view",keyProp:"back-view",tooltipId:"featuregrid.toolbar.quitEditMode",disabled:t,visible:"EDIT"===r&&!n&&!i,onClick:l.switchViewMode,glyph:"arrow-left"})},addFeature:function(e){var t=e.disabled,r=e.mode,n=e.hasNewFeatures,i=e.hasChanges,a=e.hasSupportedGeometry,l=void 0===a||a,u=e.events,c=void 0===u?{}:u;return o().createElement(ie,{id:"add-feature",keyProp:"add-feature",tooltipId:"featuregrid.toolbar.addNewFeatures",disabled:t,visible:"EDIT"===r&&!n&&!i&&l,onClick:c.createFeature,glyph:"row-add"})},drawFeature:function(e){var t=e.isDrawing,r=void 0!==t&&t,n=e.disabled,i=e.isSimpleGeom,a=e.mode,l=e.selectedCount,u=e.hasGeometry,c=e.hasSupportedGeometry,s=void 0===c||c,f=e.events,d=void 0===f?{}:f,p=e.hideSpatialFunctionalityTools,m=void 0!==p&&p;return o().createElement(ie,{id:"draw-feature",keyProp:"draw-feature",tooltipId:le(r,i),disabled:n,visible:"EDIT"===a&&1===l&&(!u||u&&!i)&&s&&!m,onClick:d.startDrawingFeature,active:r,glyph:"pencil-add"})},removeFeature:function(e){var t=e.disabled,r=e.mode,n=e.selectedCount,i=e.hasChanges,a=e.hasNewFeatures,l=e.events,u=void 0===l?{}:l;return o().createElement(ie,{id:"remove-features",keyProp:"remove-features",tooltipId:"featuregrid.toolbar.deleteSelectedFeatures",disabled:t,visible:"EDIT"===r&&n>0&&!i&&!a,onClick:u.deleteFeatures,glyph:"trash-square"})},saveFeature:function(e){var t=e.saving,r=void 0!==t&&t,n=e.saved,i=void 0!==n&&n,a=e.disabled,l=e.mode,u=e.hasChanges,c=e.hasNewFeatures,s=e.events,f=void 0===s?{}:s,d=e.validationErrors,p=void 0===d?{}:d,m=Object.keys(p).some(function(e){return p[e].changed});return o().createElement(ie,{id:"save-feature",keyProp:"save-feature",className:m?"ms-notification-circle danger":void 0,tooltipId:ue({saving:r,saved:i,error:m}),disabled:r||i||a,visible:"EDIT"===l&&u||c,active:i,onClick:f.saveChanges,glyph:"floppy-disk"})},cancelEditing:function(e){var t=e.disabled,r=e.mode,n=e.hasChanges,i=e.hasNewFeatures,a=e.events,l=void 0===a?{}:a;return o().createElement(ie,{id:"cancel-editing",keyProp:"cancel-editing",tooltipId:"featuregrid.toolbar.cancelChanges",disabled:t,visible:"EDIT"===r&&n||i,onClick:l.clearFeatureEditing,glyph:"remove-square"})},deleteGeometry:function(e){var t=e.disabled,r=e.mode,n=e.hasGeometry,i=e.selectedCount,a=e.hasSupportedGeometry,l=void 0===a||a,u=e.events,c=void 0===u?{}:u,s=e.hideSpatialFunctionalityTools,f=void 0!==s&&s;return o().createElement(ie,{id:"delete-geometry",keyProp:"delete-geometry",tooltipId:"featuregrid.toolbar.deleteGeometry",disabled:t,visible:"EDIT"===r&&n&&1===i&&l&&!f,onClick:c.deleteGeometry,glyph:"polygon-trash"})},gridSettings:function(e){var t=e.disabled,r=e.isColumnsOpen,n=e.selectedCount,i=e.mode,a=e.events,l=void 0===a?{}:a;return o().createElement(ie,{id:"grid-settings",keyProp:"grid-settings",tooltipId:"featuregrid.toolbar.hideShowColumns",disabled:t,active:r,visible:n<=1&&"VIEW"===i,onClick:l.settings,glyph:"features-grid-set"})},syncGridFilterToMap:function(e){var t=e.disabled,r=e.isSyncActive,n=void 0!==r&&r,i=e.showSyncOnMapButton,a=void 0===i||i,l=e.events,u=void 0===l?{}:l,c=e.syncPopover,s=void 0===c?{dockSize:"32.2%"}:c,f=e.showPopoverSync,d=e.hideSyncPopover,p=e.hideSpatialFunctionalityTools,m=void 0!==p&&p;return o().createElement(ie,{id:"grid-map-filter",keyProp:"grid-map-filter",tooltipId:"featuregrid.toolbar.syncOnMap",disabled:t,active:n,visible:a&&!m,onClick:u.sync,glyph:"map-filter",renderPopover:f,popoverOptions:!t&&{placement:"top",content:o().createElement("span",null,o().createElement("p",null,o().createElement(I.A,{msgId:"featuregrid.toolbar.synchPopoverText"})),o().createElement("p",null,o().createElement(C.Sc,{checked:s.showAgain,onClick:u.toggleShowAgain},o().createElement(I.A,{msgId:"featuregrid.toolbar.notShowAgain"})))),props:{id:"sync-popover",title:o().createElement("div",null,o().createElement(I.A,{msgId:"featuregrid.toolbar.synchPopoverTitle"}),o().createElement("button",{onClick:function(){if(s.showAgain)try{(0,G.x4)().setItem("showPopoverSync",!1)}catch(e){console.error(e)}d()},className:"close"},o().createElement(C.e6,{className:"pull-right",glyph:"1-close"})))}}})},syncTimeParameter:function(e){var t=e.timeSync,r=e.showTimeSyncButton,n=void 0!==r&&r,i=e.events,a=void 0===i?{}:i;return o().createElement(ie,{id:"timeSync-button",keyProp:"fg-timeSync-button",tooltipId:t?"featuregrid.toolbar.disableTimeSync":"featuregrid.toolbar.enableTimeSync",visible:n,active:t,onClick:function(){return a.setTimeSync&&a.setTimeSync(!t)},glyph:"time"})},snapToFeature:function(e){var t,r,n,i,a,l,u,c,s,f,d,p,m,v=e.snapping,b=e.availableSnappingLayers,g=void 0===b?[]:b,y=e.isSnappingLoading,h=e.snappingConfig,O=e.mode,S=e.mapType,w=e.editorHeight,E=e.pluginCfg,P=e.events,j=void 0===P?{}:P,A=e.hideSpatialFunctionalityTools,T=void 0!==A&&A;return o().createElement(ae,{id:"snap-button",keyProp:"snap-button",tooltipId:v?"featuregrid.toolbar.disableSnapping":"featuregrid.toolbar.enableSnapping",visible:"EDIT"===O&&(null===(t=null==E?void 0:E.snapTool)||void 0===t||t)&&S===Z.Av.OPENLAYERS&&!T,onClick:function(){j.toggleSnapping&&j.toggleSnapping(!v)},onMount:function(){return!h&&j.setSnappingConfig&&j.setSnappingConfig(null,null,E)},title:y?o().createElement(k(),{spinnerName:"ball-beat",overrideSpinnerClassName:"spinner",key:"loadingSpinner",noFadeIn:!0}):o().createElement(C.e6,{glyph:"magnet"}),tooltipPosition:"top",className:"snap-tool",buttonClassName:"square-button no-border",menuStyle:{maxHeight:"calc(".concat(Math.round(100*w),"vh - 50px)"),overflowY:"auto"},active:!!v,pullLeft:!0},o().createElement(o().Fragment,null,o().createElement("label",{className:"control-label"},o().createElement(I.A,{msgId:"featuregrid.toolbar.snapToLayer"})),o().createElement(X.Ay,{clearable:!1,escapeClearsValue:!1,options:g,onChange:function(e){return j.setSnappingLayer(e.value)},value:g.find(function(e){return e.active})})),o().createElement("label",{className:"control-label"},o().createElement(I.A,{msgId:"featuregrid.toolbar.snappingSettings.header"})),o().createElement(C.gE,null,o().createElement(C.fv,{xs:6},o().createElement(C.Sc,{key:"edge",checked:null===(r=null!==(n=null==h?void 0:h.edge)&&void 0!==n?n:null==E||null===(i=E.snapConfig)||void 0===i?void 0:i.edge)||void 0===r||r,inline:!0,onChange:function(e){return j.setSnappingConfig(e.target.checked,"edge",E)}},o().createElement(I.A,{msgId:"featuregrid.toolbar.snappingSettings.edge"}))),o().createElement(C.fv,{xs:6},o().createElement(C.Sc,{key:"vertex",checked:null===(a=null!==(l=null==h?void 0:h.vertex)&&void 0!==l?l:null==E||null===(u=E.snapConfig)||void 0===u?void 0:u.vertex)||void 0===a||a,inline:!0,onChange:function(e){return j.setSnappingConfig(e.target.checked,"vertex",E)}},o().createElement(I.A,{msgId:"featuregrid.toolbar.snappingSettings.vertex"}))),o().createElement("span",{className:"clearfix"})),o().createElement(C.gE,null,o().createElement(C.fv,{xs:7},o().createElement("span",{className:"inline-control-label"},o().createElement(I.A,{msgId:"featuregrid.toolbar.snappingSettings.pixelTolerance"}))),o().createElement(C.fv,{xs:5},o().createElement(C.MJ,{key:"pixelTolerance",type:"number",onChange:function(e){return j.setSnappingConfig(e.target.value,"pixelTolerance",E)},defaultValue:null!==(c=null!==(s=null==h?void 0:h.pixelTolerance)&&void 0!==s?s:null==E||null===(f=E.snapConfig)||void 0===f?void 0:f.pixelTolerance)&&void 0!==c?c:10})),o().createElement("span",{className:"clearfix"})),o().createElement(C.gE,null,o().createElement(C.fv,{xs:7},o().createElement("span",{className:"inline-control-label"},o().createElement(I.A,{msgId:"featuregrid.toolbar.snappingSettings.loadingStrategy"}))),o().createElement(C.fv,{xs:5},o().createElement(C.MJ,{componentClass:"select",defaultValue:null!==(d=null!==(p=null==h?void 0:h.strategy)&&void 0!==p?p:null==E||null===(m=E.snapConfig)||void 0===m?void 0:m.strategy)&&void 0!==d?d:"bbox",onChange:function(e){return j.setSnappingConfig(e.target.value,"strategy",E)}},o().createElement("option",{value:"bbox"},"bbox"),o().createElement("option",{value:"all"},"all"))),o().createElement("span",{className:"clearfix"})))},viewportFilter:function(e){var t,r=e.viewportFilter,n=e.isFilterByViewportSupported,i=e.pluginCfg,a=e.events,l=void 0===a?{}:a,u=e.hideSpatialFunctionalityTools,c=void 0!==u&&u;return o().createElement(ie,{id:"viewportFilter-button",keyProp:"viewportFilter-button",tooltipId:r?"featuregrid.toolbar.disableViewportFilter":"featuregrid.toolbar.enableViewportFilter",visible:(null===(t=null==i?void 0:i.showFilterByViewportTool)||void 0===t||t)&&n&&!c,onClick:function(){l.setViewportFilter&&l.setViewportFilter(!r)},glyph:"viewport-filter",tooltipPosition:"top",className:"viewportFilter-tool",buttonClassName:"square-button no-border",active:null!=r?r:null==i?void 0:i.filterByViewport,pullLeft:!0})}},se=[{name:"editMode",Component:ce.editMode},{name:"backToViewMode",Component:ce.backToViewMode},{name:"addFeature",Component:ce.addFeature},{name:"drawFeature",Component:ce.drawFeature},{name:"removeFeature",Component:ce.removeFeature},{name:"saveFeature",Component:ce.saveFeature},{name:"cancelEditing",Component:ce.cancelEditing},{name:"deleteGeometry",Component:ce.deleteGeometry},{name:"filter",Component:ce.filter},{name:"viewportFilter",Component:ce.viewportFilter},{name:"zoomAll",Component:ce.zoomAll},{name:"gridSettings",position:900,Component:ce.gridSettings},{name:"snap",position:1300,Component:ce.snapToFeature},{name:"syncGridFilterToMap",position:1100,Component:ce.syncGridFilterToMap},{name:"syncTimeParameter",Component:ce.syncTimeParameter}].map(function(e,t){var r=e.position;return ne(ne({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Q)),{},{position:null!=r?r:t})});const fe=o().memo(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.toolbarItems,i=void 0===n?[]:n,a=r.pluginCfg,l=void 0===a?{showPopoverSync:!1}:a,u=(e=o().useState(null!==(0,G.x4)().getItem("showPopoverSync")&&null!=l&&l.showPopoverSync?"true"===(0,G.x4)().getItem("showPopoverSync"):null==l?void 0:l.showPopoverSync),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],s=u[1];return o().useEffect(function(){c&&"EDIT"===r.mode?s(!1):c||"EDIT"===r.mode||s(null!==(0,G.x4)().getItem("showPopoverSync")&&null!=l&&l.showPopoverSync?"true"===(0,G.x4)().getItem("showPopoverSync"):null==l?void 0:l.showPopoverSync)},[r.mode]),o().createElement(C.e2,{id:"featuregrid-toolbar",className:"featuregrid-toolbar featuregrid-toolbar-margin"},M()(se.concat(i),["position"]).map(function(e){var t,n=e.Component;return o().createElement(n,ee({},r,{showPopoverSync:c,hideSyncPopover:function(){return s(!1)},mode:null!==(t=null==r?void 0:r.mode)&&void 0!==t?t:"VIEW",disabled:r.disableToolbar}))}))});var de=r(747135),pe=r(214158),me=r(115263),ve=r(481458);const be=(0,i.connect)(function(e){return{attributes:(0,S.lT)(e),fields:(0,S.BQ)(e)}},{onChange:function(e,t){return(0,h._w)(e,"hide",t)}})(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.titleMsg,i=void 0===n?"featuregrid.columns":n,a=e.onChange,l=void 0===a?function(){}:a,u=e.attributes,c=void 0===u?[]:u;return o().createElement("div",{className:"bg-body data-attribute-selector",style:r},o().createElement("h4",{className:"text-center"},o().createElement("strong",null,o().createElement(I.A,{msgId:i}))),o().createElement("div",null,c.map(function(e){var t=(0,ve.dj)(e.label,e.attribute);return o().createElement(C.Sc,{key:e.attribute||e.name,checked:!e.hide,onChange:function(){return l(e.attribute,!e.hide)}},o().createElement(ve.Ay,{value:t}))})))});var ge=r(538359);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},he.apply(null,arguments)}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach(function(t){we(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function we(e,t,r){return(t=function(e){var t=function(e){if("object"!=ye(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ye(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ee=(0,i.connect)((0,a.j8)({loading:O.qd}))(P.A),Pe=(0,i.connect)((0,a.j8)({saving:S.ks,saved:S.hc,mode:S.XU,hasChanges:S.x_,hasNewFeatures:S.rV,hasGeometry:S.eN,syncPopover:function(e){return{showAgain:(0,S.Dd)(e)}},isDrawing:S.Ax,isSimpleGeom:S.en,selectedCount:S.g,disableToolbar:function(e){return e&&e.featuregrid&&e.featuregrid.disableToolbar||!(0,O.j5)(e,(0,S.nO)(e))},results:O.Yd,isSyncActive:O.jR,isColumnsOpen:function(e){return e&&e.featuregrid&&e.featuregrid.tools&&e.featuregrid.tools.settings},disableZoomAll:function(e){return e&&e.featuregrid.virtualScroll||0===(0,O.Hb)(e).features.length},isSearchAllowed:function(e){return!(0,de.NR)(e)},isEditingAllowed:S.mQ,hasSupportedGeometry:S.jI,isFilterActive:O.z7,showTimeSyncButton:S.OT,timeSync:S.te,snapping:ge.X0,availableSnappingLayers:ge.IO,isSnappingLoading:ge.BD,snappingConfig:ge.ht,mapType:de.GS,viewportFilter:S.N9,isFilterByViewportSupported:S.cY,layer:S.IT,hideSpatialFunctionalityTools:S.u_}),function(e){return{events:(0,l.zH)(me.DD,e)}})(fe),je=(0,i.connect)((0,a.Mz)(S.gY,function(e){return{title:e}}),{onClose:me.DD.onClose})(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onDownloadToggle:function(){}};return o().createElement("div",{className:"data-grid-top-toolbar"},o().createElement("div",{className:"data-grid-top-toolbar-left"},e.children),!e.hideLayerTitle&&o().createElement("div",{className:"data-grid-top-toolbar-title"},e.title),o().createElement("div",{className:"data-grid-top-toolbar-right"},!e.hideCloseButton&&o().createElement(T.A,{onClick:e.onClose,className:"square-button no-border featuregrid-top-toolbar-margin"},o().createElement(C.e6,{glyph:"1-close"}))))}),Ce=(0,i.connect)((0,a.Mz)((0,a.j8)(O.Be),O.qd,function(e){return e&&e.featuregrid&&!!e.featuregrid.virtualScroll},S.g,function(e,t,r,n){return Se(Se({},e),{},{selected:n,loading:t,virtualScroll:r})}),me.HS)(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,onPageChange:function(){}},n=(0,y.ZF)(r),i=n.page,a=void 0===i?0:i,l=n.size,u=void 0===l?0:l,c=n.resultSize,s=void 0===c?0:c,f=n.maxPages,d=void 0===f?0:f,p=n.total,m=void 0===p?0:p;return o().createElement(C.xA,{className:"bg-body data-grid-bottom-toolbar",fluid:!0,style:{width:"100%"}},o().createElement(C.fI,{className:"featuregrid-toolbar-margin"},o().createElement(C.fv,{md:3},o().createElement("span",null,o().createElement(I.A,{msgId:r.virtualScroll?"featuregrid.resultInfoVirtual":"featuregrid.resultInfo",msgParams:{start:a*u+1,end:a*u+s,total:m,selected:null!==(e=r.selected)&&void 0!==e?e:0}})),"Â ",r.selected>0?o().createElement("span",null,o().createElement(I.A,{msgId:"featuregrid.selectedInfo",msgParams:{selected:null!==(t=r.selected)&&void 0!==t?t:0}})):null),r.virtualScroll?null:o().createElement(C.fv,{className:"text-center",md:6},o().createElement(T.A,{key:"first-page",onClick:function(){return r.onPageChange(0)},disabled:0===a,className:"no-border first-page"},o().createElement(C.e6,{glyph:"step-backward"})),o().createElement(T.A,{key:"prev-page",onClick:function(){return r.onPageChange(a-1)},disabled:0===a,className:"no-border prev-page"},o().createElement(C.e6,{glyph:"chevron-left"})),o().createElement("span",{key:"page-info"},o().createElement(I.A,{msgId:"featuregrid.pageInfo",msgParams:{page:a+1,totalPages:d+1}})),o().createElement(T.A,{key:"next-page",onClick:function(){return r.onPageChange(a+1)},className:"no-border next-page",disabled:a>=d},o().createElement(C.e6,{glyph:"chevron-right"})),o().createElement(T.A,{key:"last-page",onClick:function(){return r.onPageChange(d)},className:"no-border last-page",disabled:a>=d},o().createElement(C.e6,{glyph:"step-forward"})))," ",o().createElement(C.fv,{md:3},r.loading?o().createElement("span",{style:{float:"right"}},o().createElement(I.A,{msgId:"loading"}),o().createElement(k(),{spinnerName:"circle",style:{float:"right"},noFadeIn:!0})):null)))}),Ae=(0,i.connect)((0,a.Mz)(S.g,function(e){return{count:e}}),{onClose:function(){return(0,h.bU)("deleteConfirm",!1)},onConfirm:function(){return(0,h.Nq)()}})(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,i=void 0!==n&&n,a=e.count,l=e.onConfirm,u=void 0===l?function(){}:l;return o().createElement(E.A,null,o().createElement(w.A,{show:!0,onCancel:r,onConfirm:u,variant:"danger",confirmId:"featuregrid.deleteButton",cancelId:"featuregrid.noButton",preventHide:!0,titleId:"featuregrid.delete",titleParams:{count:a},disabled:i}))}),ke=(0,i.connect)((0,a.Mz)(S.g,function(e){return{count:e}}),{onClose:function(){return(0,h.bU)("clearConfirm",!1)},onConfirm:function(){return(0,h.X_)()}})(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,i=void 0!==n&&n,a=e.onConfirm,l=void 0===a?function(){}:a;return o().createElement(E.A,null,o().createElement(w.A,{show:!0,onCancel:r,onConfirm:l,variant:"danger",titleId:"featuregrid.clear",confirmId:"featuregrid.yesButton",cancelId:"featuregrid.noButton",disabled:i}))}),Te=(0,i.connect)(function(){return{}},{onClose:function(){return(0,h.aA)()},onConfirm:function(){return(0,h.xp)()}})(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,i=void 0!==n&&n,a=e.onConfirm,l=void 0===a?function(){}:a;return o().createElement(E.A,null,o().createElement(w.A,{show:!0,onCancel:r,onConfirm:l,variant:"danger",confirmId:"featuregrid.yesButton",cancelId:"featuregrid.noButton",preventHide:!0,titleId:"featuregrid.featureClose",disabled:i}))}),Ie={settings:be},xe={deleteConfirm:Ae,featureCloseConfirm:Te,clearConfirm:ke},Fe={settings:{style:{padding:"0 12px",overflow:"auto",flex:"0 0 14em",boxShadow:"inset 0px 0px 10px rgba(0, 0, 0, 0.4)",height:"100%",minWidth:195}}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter(function(t){return e[t]&&Ie[t]}).map(function(e){var t=Ie[e];return o().createElement(t,he({key:e},Fe[e]||{}))})},De=function(e){var t=e.hideCloseButton,r=e.hideLayerTitle,n=e.toolbarItems,i=e.pluginCfg,a=e.validationErrors;return o().createElement(je,{hideCloseButton:t,hideLayerTitle:r},o().createElement(Pe,{pluginCfg:i,toolbarItems:n,validationErrors:a}))},Me=function(e){return e.focusOnEdit&&e.hasChanges||e.newFeatures.length>0?null:o().createElement(Ce,null)},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e?((0,pe.Mm)(e)||[]).reduce(function(e,n){var o,l,u=t.find(function(e){return e.name===n.name});return Se(Se({},e),{},we({},n.name,(0,i.connect)((0,a.Mz)(function(e){return(0,S.d3)(e,n.name)},S.XU,function(e,t){var r=Se({value:e&&(e.rawValue||e.value),operator:e&&e.operator},(0,pe.zd)(n)?{filterEnabled:null==e?void 0:e.enabled,filterDeactivated:null==e?void 0:e.deactivated}:{}),o=(0,pe.zd)(n)?{}:{disabled:!0,tooltipMsgId:"featuregrid.filter.tooltips.editMode"};return"EDIT"===t?Se(Se({},r),o):r}))((0,j.q5)({type:(0,pe.zd)(n)?"geometry":n.localType,name:null==u||null===(o=u.filterRenderer)||void 0===o?void 0:o.name,options:null==u||null===(l=u.filterRenderer)||void 0===l?void 0:l.options,isWithinAttrTbl:r}))))},{}):{}},Be=r(163282);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach(function(t){Le(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Le(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ge(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Re(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var qe=new(r.n(Be)())({allErrors:!0}),We=new Map;var Ue=r(82324);function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach(function(t){$e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $e(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ke(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}F()(Ue.A,{insert:"head",singleton:!1}),Ue.A.locals;var Qe,et=[],tt={},rt=(Qe=function(){var e,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tools:tt,dialogs:tt,select:et},a=null===(e=i.virtualScroll)||void 0===e||e,l=null==i||null===(t=i.pluginCfg)||void 0===t?void 0:t.maxZoom,u=(null!==(r=null==i?void 0:i.items)&&void 0!==r?r:[]).filter(function(e){return"toolbar"===e.target}),c=(0,n.useMemo)(function(){return ze(i.describe,i.fields,i.isWithinAttrTbl)},[i.describe,i.fields]),s=null==i?void 0:i.hasNoGeometry,f=(0,n.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.filter(function(e){return"geometry"!==(null==e?void 0:e.key)}):e}(i.gridTools,s)},[i.gridTools,s]),d=(0,n.useMemo)(function(){return(0,y.Fo)(i.changes)},[i.changes]),p=(0,n.useMemo)(function(){var e;return null!==(e=null==i?void 0:i.primaryKeyAttributes)&&void 0!==e?e:[]},[null==i?void 0:i.primaryKeyAttributes]),m=function(e){var t=e.featurePropertiesJSONSchema,r=e.newFeatures,o=e.features,i=e.changes,a=e.primaryKeyAttributes,l=void 0===a?[]:a,u=(0,n.useMemo)(function(){return function(e){if(!e)return null;var t=JSON.stringify(e);if(We.has(t))return We.get(t);try{var r=qe.compile(e);return We.set(t,r),r}catch(e){return console.error("Error compiling JSON schema validator:",e),null}}(t)},[t]),c=(0,n.useMemo)(function(){return r&&r.length>0?[].concat(_e(r),_e(o)):o},[r,o]);return(0,n.useMemo)(function(){if(!u||!t)return{};var e=null!=t&&t.properties?Object.fromEntries(Object.keys(t.properties).map(function(e){return[e,null]})):{};return Object.fromEntries(c.map(function(t){var r=(0,y.hF)(t,i)||{},n=r.id,o=r.properties;if(!n)return null;if(!u(He(He({},e),o))){var a=(u.errors||[]).filter(function(e){var t=(e.instancePath||e.dataPath||"").replace(/^[./]/,"");return!(0,y.eO)(t,l)});if(a.length>0)return[n,{errors:a,changed:!!i[n]||t._new}]}return null}).filter(function(e){return e}))},[u,c,i,t,l])}({featurePropertiesJSONSchema:i.featurePropertiesJSONSchema,features:i.features,newFeatures:i.newFeatures,changes:d,primaryKeyAttributes:p});return o().createElement(v.A,null,function(e){var t=e.height;return o().createElement(g.A,{className:"feature-grid-container",key:"feature-grid-container",height:t-74,header:De({toolbarItems:u,hideCloseButton:i.hideCloseButton,hideLayerTitle:i.hideLayerTitle,pluginCfg:i.pluginCfg,validationErrors:m}),columns:Ne(i.tools),footer:Me(i)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter(function(t){return e[t]&&xe[t]}).map(function(e){var t=xe[e];return o().createElement(t,{key:e})})}(i.tools),o().createElement(b.default,{isWithinAttrTbl:!0,showCheckbox:i.showCheckbox,editingAllowedRoles:i.editingAllowedRoles,customEditorsOptions:i.customEditorsOptions,autocompleteEnabled:i.autocompleteEnabled,url:i.url,typeName:i.typeName,filterRenderers:c,enableColumnFilters:i.enableColumnFilters,emptyRowsView:Ee,focusOnEdit:i.focusOnEdit,newFeatures:i.newFeatures,changes:d,mode:i.mode,select:i.select,key:"feature-grid-container",columnSettings:i.attributes,fields:i.fields,gridEvents:i.gridEvents,pageEvents:i.pageEvents,describeFeatureType:i.describe,features:i.features,minHeight:600,tools:f,pagination:i.pagination,pages:i.pages,virtualScroll:a,maxStoredPages:i.maxStoredPages,vsOverScan:i.vsOverScan,scrollDebounce:i.scrollDebounce,size:i.size,actionOpts:{maxZoom:l},dateFormats:i.dateFormats,useUTCOffset:i.useUTCOffset,validationErrors:m,featurePropertiesJSONSchema:i.featurePropertiesJSONSchema,primaryKeyAttributes:p}))})},function(e){var t=e.hasNoGeometry,r=e.defaultHeight,i=void 0===r?300:r,a=e.minHeight,l=void 0===a?75:a,u=e.maxHeight,c=void 0===u?"70%":u,s=Je((0,n.useState)(i),2),f=s[0],d=s[1],p=Je((0,n.useState)(!1),2),m=p[0],v=p[1],b=(0,n.useRef)(null),g=(0,n.useRef)(0),y=(0,n.useRef)(0);return(0,n.useEffect)(function(){var e="number"==typeof c?c:window.innerHeight*c.replace("%","")/100,t=function(t){if(m){var r=t.clientY-g.current,n=y.current-r,o=Math.max(l,Math.min(n,e));d(o)}},r=function(){v(!1)};return m&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r)),function(){document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r)}},[m,l,c]),t&&"boolean"==typeof t?o().createElement("div",{className:"ms-featuregrid-fill"},o().createElement(Qe,e)):o().createElement("div",{ref:b,className:"ms-resize-container",style:{height:"".concat(f,"px")}},o().createElement("div",{onMouseDown:function(e){e.preventDefault(),v(!0),g.current=e.clientY,y.current=f},className:"ms-resize-handle"}),o().createElement("div",{className:"ms-resize-content"},o().createElement(Qe,e)))}),nt=(0,a.j8)({open:function(e){return c()(e,"featuregrid.open")},customEditorsOptions:function(e){return c()(e,"featuregrid.customEditorsOptions")},autocompleteEnabled:function(e){return c()(e,"queryform.autocompleteEnabled")},url:function(e){return(0,O.BB)(e)},typeName:function(e){return(0,O.lb)(e)},features:function(e){return c()(e,"featuregrid.features")||et},describe:O.r5,featurePropertiesJSONSchema:O.KA,fields:S.BQ,attributes:function(e){return c()(e,"featuregrid.attributes")},tools:function(e){return c()(e,"featuregrid.tools")},select:S.e7,mode:S.XU,changes:function(e){return(0,S.xX)(e)},newFeatures:function(e){return(0,S.zS)(e)||et},hasChanges:S.x_,focusOnEdit:function(e){return c()(e,"featuregrid.focusOnEdit",!1)},enableColumnFilters:function(e){return c()(e,"featuregrid.enableColumnFilters")},pagination:(0,a.j8)(O.Be),pages:function(e){return c()(e,"featuregrid.pages")},size:function(e){return c()(e,"featuregrid.pagination.size")},hasNoGeometry:S.u_});const ot=(0,m.compose)((0,m.defaultProps)({isWithinAttrTbl:!0}),(0,i.connect)(function(e){return{isSyncWmsActive:(0,O.jR)(e)}},function(e){return{onMount:(0,l.zH)(h.s,e),setSyncTool:(0,l.zH)(h.iB,e)}}),(0,m.lifecycle)({componentDidMount:function(){this.props.onMount(f()(this.props,["showFilteredObject","showTimeSync","timeSync","customEditorsOptions"])),this.props.isSyncWmsActive||(this.props.enableMapFilterSync?this.props.setSyncTool(!0):this.props.setSyncTool(!1))},componentDidUpdate:function(e){var t=f()(this.props,["showFilteredObject","showTimeSync","timeSync","customEditorsOptions"]),r=f()(e,["showFilteredObject","showTimeSync","timeSync","customEditorsOptions"]);p()(t,r)||this.props.onMount(t)}}),(0,i.connect)(nt,function(e){return{gridEvents:(0,l.zH)(me.uE,e),pageEvents:(0,l.zH)(me.HS,e),toolbarEvents:(0,l.zH)(me.DD,e),gridTools:me.qq.map(function(t){return Ze(Ze({},t),{},{events:(0,l.zH)(t.events,e)})})}}))(rt)},509820(e,t,r){r.d(t,{A:()=>O});var n=r(273517),o=r.n(n),i=r(551258),a=r(8117),l=r(874295),u=r.n(l),c=r(310340),s=r.n(c);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var d=["popoverOptions","keyProp"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(null,arguments)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}function b(e,t,r){return t=y(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}const O=function(e){return function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),b(this,r,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(r,t),n=r,l=[{key:"render",value:function(){var t=null,r=this.props,n=r.popoverOptions,l=r.keyProp,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,d);return o().createElement("span",{className:"mapstore-info-popover"},o().createElement(e,p({},u()(c,["renderPopover","tooltipId"]),{key:l,ref:function(e){t=e}})),o().createElement(i.A,{placement:n.placement,shouldUpdatePosition:!0,show:!0,target:function(){return s().findDOMNode(t)}},o().createElement(a.AM,n.props,n.content)))}}],l&&m(n.prototype,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,l}(o().Component)}},628304(e,t,r){r.d(t,{A:()=>d});var n=r(273517),o=r.n(n),i=r(8117),a=r(711030),l=["disabled","id","visible","onClick","glyph","active","className"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(null,arguments)}var c={width:0,padding:0,borderWidth:0},s={},f=function(e){return e?s:c};const d=(0,n.forwardRef)(function(e,t){var r=e.disabled,n=e.id,c=e.visible,s=e.onClick,d=e.glyph,p=e.active,m=e.className,v=void 0===m?"square-button":m,b=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return o().createElement(a.A,u({ref:t},b,{bsStyle:p?"success":"primary",disabled:r,id:"fg-".concat(n),style:f(c),className:v,onClick:function(){return!r&&s()}}),o().createElement(i.e6,{glyph:d}))})},926560(e,t,r){r.d(t,{A:()=>s});var n=r(916589),o=r(164045),i=r(509820);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var l=["renderPopover","popoverOptions"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=(0,n.compose)((0,n.withProps)(function(e){var t=e.renderPopover,r=e.popoverOptions;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(t?{renderPopover:t,popoverOptions:r}:{},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l))}),(0,n.branch)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderPopover,r=e.popoverOptions;return t&&!!r},i.A,o.A))}}]);