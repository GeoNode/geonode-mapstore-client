"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[92561],{290505:(e,t,r)=>{r.d(t,{R:()=>s});var n=r(150802),o=r(323111),i=r(839545),a=r(764932);function u(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){return["centerPoint","lineToArc","startPoint","endPoint"].includes(null==e?void 0:e.name)},s={cesium:function(e){var t=e.Cesium,r=function(e){if(null!=e&&e.positions)return{type:e.geometry.type,positions:null==e?void 0:e.positions[0]};var r=("Polygon"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates).map(function(e){return t.Cartesian3.fromDegrees(e[0],e[1],e[2])});return{type:e.geometry.type,positions:r}},n={centerPoint:function(e){var n,o=r(e),a=o.positions,l=o.type,s=a.map(function(e){var r=t.Cartographic.fromCartesian(e),n=r.longitude,o=r.latitude,i=r.height;return[t.Math.toDegrees(n),t.Math.toDegrees(o),i]});if("LineString"===l){var f=a.reduce(function(e,r,n){return a[n+1]?e+t.Cartesian3.distance(r,a[n+1]):e},0)/2,y=s.map(function(e,r){var n=a.filter(function(e,t){return t<r+1});return[e[0],e[1],e[2],n.reduce(function(e,r,o){return n[o+1]?e+t.Cartesian3.distance(r,n[o+1]):e},0)]}),g=y.find(function(e){return e[3]>f}),m=y.indexOf(g)-1,p=y[m],d=f-p[3],v=t.Cartographic.toCartesian(t.Cartographic.fromDegrees(p[0],p[1],p[2])),P=t.Cartesian3.normalize(t.Cartesian3.subtract(t.Cartographic.toCartesian(t.Cartographic.fromDegrees(g[0],g[1],g[2])),v,new t.Cartesian3),new t.Cartesian3);return{position:t.Cartesian3.add(v,t.Cartesian3.multiplyByScalar(P,d,new t.Cartesian3),new t.Cartesian3)}}var b,h=((0,i.A)({type:"Polygon",coordinates:[[].concat((b=s,function(e){if(Array.isArray(e))return c(e)}(b)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(b)||u(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[s[0]])]})||{}).geometry,S=s.reduce(function(e,t){return e+function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,3)[2]},0)/s.length,C=[h.coordinates[0],h.coordinates[1],S]||0;return{position:t.Cartographic.toCartesian((n=t.Cartographic).fromDegrees.apply(n,C))}},lineToArc:function(){return{arcType:t.ArcType.GEODESIC,perPositionHeight:void 0}},startPoint:function(e){return{position:r(e).positions[0].clone()}},endPoint:function(e){var t=r(e).positions;return{position:t["Polygon"===e.geometry.type?t.length-2:t.length-1].clone()}}};return function(e){var t=e.msGeometry;return l(t)&&n[null==t?void 0:t.name]?n[t.name]:null}},openlayers:function(e){var t=e.Point,r=e.LineString,i=e.Polygon,u=e.GeoJSON,c=e.getCenter,s=new u,f={centerPoint:function(e){return function(r){var i=r.getGeometry().getType();if(["Point","MultiPoint"].includes(i))return r.getGeometry();var u=e?e.getView().getProjection().getCode():"EPSG:3857",l=r.getGeometry();if(["LineString"].includes(i)){var f=JSON.parse(s.writeFeature(r,{dataProjection:"EPSG:4326",featureProjection:u})),y=(0,n.A)(f)/2,g=(0,o.A)(f,y),m=(0,a.reproject)(g.geometry.coordinates,"EPSG:4326",u);return new t([m.x,m.y])}var p=l.getExtent(),d=c(p);return new t(d)}},lineToArc:function(e){return function(t){var n=e?e.getView().getProjection().getCode():"EPSG:3857",o=t.getGeometry().getType();if("LineString"===o||"MultiPoint"===o){var u=t.getGeometry().getCoordinates();return u=(0,a.transformLineToArcs)(u.map(function(e){var t=(0,a.reproject)(e,n,"EPSG:4326");return[t.x,t.y]})),new r(u.map(function(e){var t=(0,a.reproject)(e,"EPSG:4326",n);return[t.x,t.y]}))}if("Polygon"===o){var c=t.getGeometry().getCoordinates()[0];return c=(0,a.transformLineToArcs)(c.map(function(e){var t=(0,a.reproject)(e,n,"EPSG:4326");return[t.x,t.y]})),new i([c.map(function(e){var t=(0,a.reproject)(e,"EPSG:4326",n);return[t.x,t.y]})])}return t.getGeometry()}},startPoint:function(){return function(e){var r=e.getGeometry(),n=r.getType();if(["Point","MultiPoint"].includes(n))return e.getGeometry();var o="Polygon"===n?r.getCoordinates()[0]:r.getCoordinates();return o.length>1?new t(o[0]):null}},endPoint:function(){return function(e){var r=e.getGeometry(),n=r.getType();if(["Point","MultiPoint"].includes(n))return e.getGeometry();var o="Polygon"===n?r.getCoordinates()[0]:r.getCoordinates();return new t(o.length>3?o[o.length-("Polygon"===n?2:1)]:o[o.length-1])}}};return function(e,t,r){var n,o=e.msGeometry;if(l(o)&&f[null==o?void 0:o.name])return{geometry:f[o.name](r)};var i=(null==t?void 0:t.getGeometry)&&(null==t||null===(n=t.getGeometry())||void 0===n?void 0:n.getType());return["Mark","Icon"].includes(e.kind)&&["LineString","MultiLineString","Polygon","MultiPolygon"].includes(i)?{geometry:f.centerPoint(r)}:null}},geojson:function(){var e={centerPoint:function(e){if(["LineString"].includes(e.geometry.type)){var t=(0,n.A)(e)/2;return(0,o.A)(e,t).geometry.coordinates}return(0,i.A)(e).geometry.coordinates},lineToArc:function(e){return"LineString"===e.geometry.type?(0,a.transformLineToArcs)(e.geometry.coordinates):"Polygon"===e.geometry.type?e.geometry.coordinates.map(a.transformLineToArcs):null},startPoint:function(e){return"Polygon"===e.geometry.type?e.geometry.coordinates[0][0]:"LineString"===e.geometry.type?e.geometry.coordinates[0]:null},endPoint:function(e){return"Polygon"===e.geometry.type?e.geometry.coordinates[0][e.geometry.coordinates[0].length-2]:"LineString"===e.geometry.type?e.geometry.coordinates[e.geometry.coordinates.length-1]:null}};return function(t){var r=t.msGeometry;return l(r)&&e[null==r?void 0:r.name]?e[r.name]:null}}}},684633:(e,t,r)=>{r.d(t,{J:()=>m});var n=r(269843),o=r.n(n),i=r(779893),a=r(19708),u=r(399392);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e,t){var r=(e||{}).rules,n=(void 0===r?[]:r).reduce(function(e,r){var n=((null==r?void 0:r.symbolizers)||[]).filter(function(e){var t=e.kind;return["Mark","Icon"].includes(t)});if(!n.some(function(e){return Object.keys(e).some(function(t){var r;return!(null===(r=e[t])||void 0===r||!r.name)})}))return[].concat(y(e),y(n));var o=t.features||[],i=void 0===r.filter?o:o.filter(function(e){return(0,u.Cx)(e,r.filter)});return[].concat(y(e),y(n.reduce(function(e,t){return[].concat(y(e),y((i||[]).map(function(e){var r;return s(s({},(0,u.$k)(t,e)),"msMarkerIcon"===(null==t||null===(r=t.image)||void 0===r?void 0:r.name)&&{image:t.image})})))},[])))},[]),c=n.filter(function(e){return"Mark"===e.kind}),l=n.filter(function(e){return"Icon"===e.kind}),f=(0,i.Uh)("loadFontAwesomeForIcons");return((o()(f)||f)&&null!=l&&l.length?(0,a.N)():Promise.resolve()).then(function(){return new Promise(function(e){c.length>0||l.length>0?Promise.all([].concat(y(c.map(u.oI)),y(l.map(u.aG)))).then(function(t){e(t)}):e([])})})}}}]);