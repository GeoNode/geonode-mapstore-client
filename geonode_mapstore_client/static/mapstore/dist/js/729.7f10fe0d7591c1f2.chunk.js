"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[729],{46282:(e,t,r)=>{r.d(t,{F:()=>m,c:()=>d});var n=r(995531),i=r(764932),o=r(6683),a=r(427572);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e){return n.A.get(e).then((function(e){var t,n=e.data;return(t=n,Promise.all([r.e(56367),r.e(55394),r.e(86881),r.e(23905),r.e(62758),r.e(35341)]).then(r.bind(r,362758)).then((function(e){var r,n,a,u,l=e,s=void 0!==(null==t||null===(r=t.asset)||void 0===r?void 0:r.version)?t.asset.version:"1.0",p=function(e,t){var r,n,a,u,l,c;if(null!=t&&null!==(r=t.root)&&void 0!==r&&null!==(n=r.boundingVolume)&&void 0!==n&&n.region){var s=f(t.root.boundingVolume.region,4),p=s[0],m=s[1],d=s[2],y=s[3];return{bounds:{minx:(0,i.convertRadianToDegrees)(p),miny:(0,i.convertRadianToDegrees)(m),maxx:(0,i.convertRadianToDegrees)(d),maxy:(0,i.convertRadianToDegrees)(y)},crs:"EPSG:4326"}}var b=e.Matrix4.fromArray(t.root.transform||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(null!=t&&null!==(a=t.root)&&void 0!==a&&null!==(u=a.boundingVolume)&&void 0!==u&&u.box){var v=f(t.root.boundingVolume.box,3),g=v[0],h=v[1],S=v[2],w=e.Matrix4.multiplyByPoint(b,new e.Cartesian3(g,h,S),new e.Cartesian3),x=e.Matrix4.getMatrix3(b,new e.Matrix4),O=e.Matrix3.multiply(x,e.Matrix3.fromArray(t.root.boundingVolume.box,3,new e.Matrix3),new e.Matrix3),T=e.BoundingSphere.fromOrientedBoundingBox(new e.OrientedBoundingBox(w,O)),j=e.Cartographic.fromCartesian(T.center);if(!j)return null;var P=(0,i.convertRadianToDegrees)(j.longitude),C=(0,i.convertRadianToDegrees)(j.latitude),M=T.radius/o.Ig.degrees;return{bounds:{minx:P-M,miny:C-M,maxx:P+M,maxy:C+M},crs:"EPSG:4326"}}if(null!=t&&null!==(l=t.root)&&void 0!==l&&null!==(c=l.boundingVolume)&&void 0!==c&&c.sphere){var D=f(t.root.boundingVolume.sphere,4),R=D[0],E=D[1],A=D[2],I=D[3],L=e.Matrix4.multiplyByPoint(b,new e.Cartesian3(R,E,A),new e.Cartesian3),V=e.Matrix4.getScale(b,new e.Matrix4),G=I*e.Cartesian3.maximumComponent(V)/o.Ig.degrees,k=e.Cartographic.fromCartesian(L);if(!k)return null;var B=(0,i.convertRadianToDegrees)(k.longitude),F=(0,i.convertRadianToDegrees)(k.latitude);return{bounds:{minx:B-G,miny:F-G,maxx:B+G,maxy:F+G},crs:"EPSG:4326"}}return null}(l,t),m=(u=((null==t||null===(n=t.root)||void 0===n||null===(a=n.content)||void 0===a?void 0:a.uri)||"").split(/\./g))[u.length-1],d=null==t?void 0:t.properties;return c(c({version:s},p&&{bbox:p}),{},{format:m,properties:d})}))).then((function(e){return c({tileset:n},e)}))})).catch((function(e){return(0,a.vV)(e),{tileset:{}}}))},d="3D Tiles"},636422:(e,t,r)=>{r.d(t,{Ay:()=>j,Q3:()=>T});var n=r(995531),i=r(779893),o=r(23412),a=r.n(o),u=r(45228),l=r.n(u),c=r(738805),s=r.n(c),f=r(499084),p=r.n(f),m=r(764932),d=r(79738),y=r(724188);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S={},w=function(e){var t=a().parse((0,d.t)(e),!0);return a().format(l()({},t,{search:null},{query:l()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},t.query)}))},x=function(e,t,r,n,i){for(var o=e.Capabilities.Contents,a=(0,y.Bg)(e),u=(0,y.bf)(e),c=o.TileMatrixSet&&p()(o.TileMatrixSet)||[],s=[],f=c.length,d=0;d<f;d++)s.push((0,m.getEPSGCode)(c[d]["ows:SupportedCRS"]));var b=o.Layer,v=p()(b).filter((function(e){return!n||-1!==e["ows:Identifier"].toLowerCase().indexOf(n.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:v.length,numberOfRecordsReturned:Math.min(r,v.length),nextRecord:t+Math.min(r,v.length)+1,records:v.filter((function(e,n){return n>=t-1&&n<t-1+r})).map((function(e){return l()({},e,{SRS:s,TileMatrixSet:c,queryable:!!(0,y.eu)(a,"GetFeatureInfo","KVP"),requestEncoding:u,style:(0,y.Ot)(e),format:(0,y.n6)(e),formats:p()(e.Format),GetTileURL:(0,y.eu)(a,"GetTile",u),capabilitiesURL:i})}))}},O={parseUrl:w,getRecords:function(e,t,r,o){var a=S[e];return a&&(new Date).getTime()<a.timestamp+1e3*((0,i.Uh)("cacheExpire")||60)?new Promise((function(n){n(x(a.data,t,r,o,e))})):n.A.get(w(e)).then((function(n){var i;return s().parseString(n.data,{explicitArray:!1},(function(e,t){i=t})),S[e]={timestamp:(new Date).getTime(),data:i},x(i,t,r,o,e)}))},getCapabilities:function(e,t){null!=t&&t.force&&S[e]&&delete S[e];var r=S[e];return r&&(new Date).getTime()<r.timestamp+1e3*((0,i.Uh)("cacheExpire")||60)?new Promise((function(e){e(r.data)})):n.A.get(w(e)).then((function(t){var r;return s().parseString(t.data,{explicitArray:!1},(function(e,t){r=t})),S[e]={timestamp:(new Date).getTime(),data:r},r}))},textSearch:function(e,t,r,n){return O.getRecords(e,t,r,n)},reset:function(){Object.keys(S).forEach((function(e){delete S[e]}))}},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return O.getCapabilities(e,{force:null==r?void 0:r.force}).then((function(e){var r,n,i,o,a=t.split(":"),u=p()((null==e||null===(r=e.Capabilities)||void 0===r||null===(n=r.Contents)||void 0===n?void 0:n.Layer)||[]).find((function(e){return e["ows:Identifier"]===a[1]||e["ows:Identifier"]===t})),l=p()((null==u?void 0:u.TileMatrixSetLink)||[]).map((function(e){return e.TileMatrixSet})),c=p()((null==e||null===(i=e.Capabilities)||void 0===i||null===(o=i.Contents)||void 0===o?void 0:o.TileMatrixSet)||[]).filter((function(e){return l.includes(e["ows:Identifier"])})),s=c.map((function(e){var t=e.TileMatrix.map((function(e){return e.TopLeftCorner.split(" ").map(parseFloat)})),r=e.TileMatrix.map((function(e){return[parseFloat(e.TileWidth),parseFloat(e.TileHeight)]})),n=t[0],i=r[0],o=t.every((function(e){return n[0]===e[0]&&n[1]===e[1]})),a=r.every((function(e){return i[0]===e[0]&&i[1]===e[1]}));return g(g({id:e["ows:Identifier"],crs:(0,m.getEPSGCode)(e["ows:SupportedCRS"]),scales:e.TileMatrix.map((function(e){return parseFloat(e.ScaleDenominator)}))},o?{origin:n}:{origins:t}),a?{tileSize:i}:{tileSizes:r})}));return{tileMatrixSets:c,tileMatrixSetLinks:l,tileGrids:s,styles:p()((null==u?void 0:u.Style)||[]).map((function(e){return e["ows:Identifier"]})),formats:p()((null==u?void 0:u.Format)||[])}}))};const j=O}}]);