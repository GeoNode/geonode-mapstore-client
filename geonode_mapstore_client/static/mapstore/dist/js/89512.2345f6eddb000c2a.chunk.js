"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[89512],{635666:(e,r,t)=>{t.d(r,{Ay:()=>U});var n=t(45388),o=t.n(n),i=t(473916),a=t.n(i),u=t(223805),c=t.n(u),s=t(395950),l=t.n(s),f=t(269843),d=t.n(f),v=t(71665),b=t(985564),p=t(415392),y=t(654456),h=t(883832),g=t(223062),m=t(754364),O=t(589769),w=t(501719),S=t(737704),j=t(24812),P=t(327229),T=t(622795),D=t(233999),M=t(980971),E=t(549112),k=["data"],A=["status","statusText","data","message"];function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function I(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==r.indexOf(n))continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],-1===r.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function N(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,r){if(e){if("string"==typeof e)return L(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?L(e,r):void 0}}function L(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function C(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?C(Object(t),!0).forEach(function(r){K(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function K(e,r,t){return(r=function(e){var r=function(e){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=x(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const U={openDashboardWidgetEditor:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(v.dy,v.zx).filter(function(){return(0,O.aH)(t())}).switchMap(function(){return o().Observable.of((0,b.Df)(!0))})},closeDashboardWidgetEditorOnFinish:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(v.i).filter(function(){return(0,O.aH)(t())}).switchMap(function(){return o().Observable.of((0,b.Df)(!1))})},initDashboardEditorOnNew:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(v.dy).filter(function(){return(0,O.aH)(t())}).switchMap(function(e){return o().Observable.of((0,v.l6)(_(_({legend:!1,mapSync:!1,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))})},closeDashboardEditorOnExit:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(M.LK).filter(function(){return(0,O.aH)(t())}).filter(function(){return(0,O.Hd)(t())}).switchMap(function(){return o().Observable.of((0,b.Df)(!1))})},handleDashboardWidgetsFilterPanel:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(v.aE).filter(function(){return(0,O.aH)(t())}).switchMap(function(){return o().Observable.of(y.Mb.apply(void 0,N((r=t(),n=(0,S.oc)(r),[n.search&&n.search.url,n.name]))),(0,g.Bb)((0,S.tp)(t())),(0,p.fN)("queryPanel","enabled",!0)).concat(o().Observable.race(e.ofType(g.TK).take(1),e.ofType(p.x7).filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"queryPanel"===r&&(!t||"enabled"===t)}).take(1)).switchMap(function(e){return(e.filterObj?o().Observable.of((0,v.zd)((0,S.AP)(t()),e.filterObj)):o().Observable.empty()).merge(o().Observable.of((0,p.fN)("widgetBuilder","enabled",!0)))})).takeUntil(e.ofType(M.LK,v.zx).merge(e.ofType(p.x7).filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"widgetBuilder"===r&&0==!t}))).concat(o().Observable.of((0,p.fN)("queryPanel","enabled",!1)));var r,n})},filterAnonymousUsersForDashboard:function(e,r){return e.ofType(m.YP,m.T_).filter(function(){return"/dashboard"===(0,j.o)(r.getState())}).switchMap(function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),(0,w.M3)(r.getState())?o().Observable.empty():o().Observable.of((0,b.Vh)({status:403}))})},loadDashboardStream:function(e,r){var t=r.getState,n=void 0===t?function(){}:t;return e.ofType(b.OD).switchMap(function(e){var r=e.id;return(0,T.hZ)(r).map(function(e){var r=e.data,t=I(e,k);return(0,b.Ik)(t,(0,E.Mx)(r))}).let((0,D.TC)((0,b.h4)(!0,"loading"),(0,b.h4)(!1,"loading"),function(e){var r=window.location.href.match("dashboard-embedded")?"dashboardEmbedded":"dashboard",t=r+".errors.loading.unknownError";return 403===e.status&&(t=r+".errors.loading.pleaseLogin",(0,w.M3)(n())&&(t=r+".errors.loading.dashboardNotAccessible")),404===e.status&&(t=r+".errors.loading.dashboardDoesNotExist"),o().Observable.of((0,h.z3)({title:r+".errors.loading.title",message:t}),(0,b.Vh)(_(_({},e),{},{messageId:t})))}))})},reloadDashboardOnLoginLogout:function(e){return e.ofType(b.OD).switchMap(function(r){var t=r.id;return e.ofType(m._x,m.T_).switchMap(function(){return o().Observable.of((0,b.RR)(t)).delay(1e3)}).takeUntil(e.ofType(M.LK))})},saveDashboard:function(e){return e.ofType(b.pl).exhaustMap(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resource,r=a()(e.attributes,function(e){if(c()(e)){var r=null;try{r=JSON.stringify(e)}catch(e){r=null}return r}return e}),t=l()(r).filter(function(e){return"thumbnail"!==e&&"details"!==e&&!d()(r[e])});return o().Observable.forkJoin(e.id?(0,T.Uh)(e):(0,T.Zg)(e)).switchMap(function(n){var i,a,u=(i=n,a=1,function(e){if(Array.isArray(e))return e}(i)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(i,a)||Z(i,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(t.length>0?o().Observable.forkJoin(t.map(function(e){return(0,T.c5)({id:u,name:e,value:r[e]})})):o().Observable.of([])).switchMap(function(){return o().Observable.of((0,b.Sz)(u),e.id?(0,b.gM)(!1):(0,b.mB)(!1),e.id?(0,b.RR)(u):(0,M.VC)("/dashboard/".concat(u))).merge(o().Observable.of((0,h.WU)({id:"DASHBOARD_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(e.id?0:1e3))}).let((0,D.TC)((0,b.h4)(!0,"saving"),(0,b.h4)(!1,"saving")))})}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.status,t=e.statusText,n=e.data,i=e.message,a=I(e,A);return o().Observable.of((0,b.eI)(r?{status:r,statusText:t,data:n}:i||a),(0,b.h4)(!1,"saving"))})},exportDashboard:function(e){return e.ofType(b.MK).switchMap(function(e){var r=e.data,t=e.fileName;return o().Observable.of([JSON.stringify(_({},r)),t,"application/json"]).do(function(e){return P.RG.apply(void 0,N(e))}).map(function(){return(0,p.KP)("export")})})},importDashboard:function(e){return e.ofType(b.vv).switchMap(function(e){var r=e.file,t=e.resource;return o().Observable.defer(function(){return(0,P.Vh)(r[0]).then(function(e){return e})}).switchMap(function(e){return o().Observable.of((0,b.Ik)(t,e),(0,p.KP)("import"))}).catch(function(e){return o().Observable.of((0,h.z3)({title:"dashboard.errors.loading.title"}),(0,b.Vh)(_({},e)))})})}}},102780:(e,r,t)=>{t.d(r,{A:()=>v});var n=t(985564),o=t(71665),i=t(905185),a=t(499084),u=t.n(a),c=t(754364);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach(function(r){d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function d(e,r,t){return(r=function(e){var r=function(e){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=s(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showConnections:!0,services:null,saveServiceLoading:!1},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.DK:return f(f({},e),null==r?void 0:r.options);case n.F8:return(0,i.hZ)("editor.available",r.available,e);case n.iy:case o.q6:case o.i:case o.SJ:return(0,i.hZ)("editing",r.editing,e);case n.aj:return(0,i.hZ)("showConnections",r.show,e);case n.pN:return(0,i.hZ)("showSaveModal",r.show,(0,i.hZ)("saveErrors",void 0,e));case n.uy:return(0,i.hZ)("showSaveAsModal",r.show,(0,i.hZ)("saveErrors",void 0,e));case n.LL:var t;return f(f({},e),{},{originalData:r.data,resource:r.resource,services:null===(t=r.data)||void 0===t?void 0:t.catalogs});case n.Vd:return f(f({},e),{},{originalData:void 0,resource:void 0,mode:"view",services:void 0});case n.Jq:return(0,i.hZ)("saveErrors",u()(r.error),e);case n.NT:return(0,i.hZ)("saveErrors",void 0,e);case n.G2:var a,s;return f(f({},e),{},{services:e.services||r.services,selectedService:(null===(a=r.service)||void 0===a?void 0:a.key)||"",protectedId:null===(s=r.service)||void 0===s?void 0:s.protectedId});case c.Wj:var l=r.protectedService.protectedId;return f(f({},e),{},{protectedId:l});case c.Lv:return f(f({},e),{},{protectedId:void 0});case n.GT:return(0,i.hZ)("services",r.services,e);case n.Fr:return f(f({},e),{},{mode:r.mode,isNew:r.isNew,saveServiceLoading:!1});case n.SX:return f(f({},e),{},{saveServiceLoading:r.loading});case n.Uc:var d=r.services,v=r.service;v.isNew=!1,v.showAdvancedSettings=!1,delete v.old,d[v.key]=v;var b=v.key;return f(f({},e),{},{services:d,selectedService:b,mode:"view"});case n.Vt:var p,y,h=r.services,g=r.service;(h[g.key]||h[null===(p=g.old)||void 0===p?void 0:p.key])&&(delete h[g.key]||h[null===(y=g.old)||void 0===y?void 0:y.key]);var m=Object.keys(h)[0]||"";return f(f({},e),{},{services:h,mode:"view",selectedService:m});case n._M:return(0,i.hZ)("loading"===r.name?"loading":"loadFlags.".concat(r.name),r.value,(0,i.hZ)("loading",r.value,e));default:return e}}}}]);