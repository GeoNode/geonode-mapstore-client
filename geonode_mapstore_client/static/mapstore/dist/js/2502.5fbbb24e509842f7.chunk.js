"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2502],{362502:(e,t,n)=>{n.d(t,{A:()=>Y});var r=n(273517),o=n.n(r),i=n(605556),u=n.n(i),c=n(811668),a=n(23412),l=n.n(a),f=n(809136),s=n.n(f),p=n(779893),b=n(393149),m=n(702749),y=n(50906),v=n(480521);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}var d=["onLoaded","pluginsConfig","plugins","loaderComponent"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(null,arguments)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j(e,t,n){return(t=function(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.in;return function(t){return function(n){var i=n.onLoaded,u=void 0===i?function(){}:i,c=n.pluginsConfig,a=n.plugins,l=void 0===a?{}:a,f=n.loaderComponent,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,d),p=e(w({pluginsConfig:c},s)),b=(0,y.A)({pluginsEntries:(0,v.x)(l,"module"),pluginsConfig:p}),m=b.plugins,g=b.pending,h=(0,r.useMemo)(function(){return w(w({},m),(0,v.x)(l))},[m]),j=g,P=f;return(0,r.useEffect)(function(){j||u(!0)},[j]),j&&f?o().createElement(P,null):o().createElement(t,O({},s,{pluginsConfig:c,plugins:h,allPlugins:l}))}}}()(m.A);var S=n(588100),E=n(132672),C=n(593737),_=n.n(C);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t,n){return(t=function(e){var t=function(e){if("object"!=N(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=["width","height"];const M=function(e){var t=e.id,n=e.header,i=e.footer,u=e.background,c=e.leftColumn,a=e.rightColumn,l=e.columns,f=e.className,s=e.top,p=e.bottom,b=e.children,m=e.bodyClassName,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onResize,n=void 0===t?function(){}:t,o=e.watch,i=void 0===o?x:o,u=e.debounceTime,c=void 0===u?100:u,a=(0,r.useRef)(null),l=(0,r.useRef)({}),f=(0,r.useMemo)(function(){return _()(function(e){if(e){var t=e.getBoundingClientRect(),r=window.innerWidth,o=window.innerHeight,u={width:t.width,height:t.height,top:t.top,left:t.left,right:r-t.right,bottom:o-t.bottom},c={};i.forEach(function(e){var t=u[e];l.current[e]!==t&&(c[e]=t)}),Object.keys(c).length>0&&(l.current=k(k({},l.current),c),n(c))}},c)},[n,i,c]);return(0,r.useEffect)(function(){var e=a.current;if(!e||0===i.length)return null;var t=new ResizeObserver(function(){f(e)});return t.observe(e),function(){t.disconnect(),f.cancel()}},[f,i]),a}({onResize:e.onResize,watch:["bottom"]});return o().createElement(E.A,{id:t,className:f,column:!0,classNames:["_fill","_absolute"]},n,o().createElement(E.X,{flexBox:!0,column:!0,className:m,classNames:["_relative","ms-map-viewer-layout-body"]},o().createElement("div",{className:"_fill _absolute"},u),o().createElement("div",{className:"_relative"},s),o().createElement(E.X,{flexBox:!0,classNames:["_relative","ms-map-viewer-layout-main-content"]},o().createElement("div",{className:"_relative ms-map-viewer-layout-left-column"},c),o().createElement(E.X,{ref:y,classNames:["_relative","ms-map-viewer-layout-content"]},b),o().createElement("div",{className:"_relative ms-map-viewer-layout-right-column"},a),o().createElement("div",{className:"ms-map-viewer-layout-columns"},l)),o().createElement("div",{className:"_relative ms-map-viewer-layout-bottom"},p)),i)};var T=n(271020);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(null,arguments)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e,t,n){return(t=function(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const X=(0,c.connect)(function(e){return{mapLayout:e.maplayout}},{onContentResize:T.Ix})(function(e){return o().createElement(M,z({},e,{onResize:function(t){if(void 0!==t.bottom){var n=Math.max(0,t.bottom-35),r=e.mapLayout,o=r.boundingMapRect,i=r.layout,u=r.boundingSidebarRect;e.onContentResize(B(B(B({},i),u),{},{boundingMapRect:B(B({},o),{},{bottom:n})}))}}}))});function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(q=function(){return!!e})()}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function G(e,t,n){return(t=J(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}var K=l().parse(window.location.href,!0).query,Q=(0,c.connect)((0,S.UU)(s())(function(e){return e.plugins},function(e){return e.mode},function(e){var t;return null==e||null===(t=e.browser)||void 0===t?void 0:t.mobile},function(e){return e.controls},function(e){return(0,b.Rj)(e,p.Ay.getConfigProp("monitorState"))},function(e,t,n,r,o){return{statePluginsConfig:e,mode:K.mode||t||(n?"mobile":"desktop"),pluginsState:r,monitoredState:o}}))(P),V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=F(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,q()?Reflect.construct(t,n||[],F(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.props.loadMapConfig()}},{key:"render",value:function(){return o().createElement(Q,{key:"viewer",id:"viewer",className:this.props.className,pluginsConfig:this.props.pluginsConfig||this.props.statePluginsConfig||p.Ay.getConfigProp("plugins"),plugins:this.props.plugins,params:this.props.params,loaderComponent:this.props.loaderComponent,onLoaded:this.props.onLoaded,component:this.props.component||X})}}])&&W(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);G(V,"propTypes",{className:u().string,params:u().object,statePluginsConfig:u().object,pluginsConfig:u().object,loadMapConfig:u().func,plugins:u().object,loaderComponent:u().func,onLoaded:u().func,component:u().any}),G(V,"defaultProps",{mode:"desktop",className:"viewer",loadMapConfig:function(){},onLoaded:function(){}});const Y=V}}]);