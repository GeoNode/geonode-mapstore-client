(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1224],{718260:function(t){t.exports=function(){"use strict";function t(t,n,s,o,r){!function t(i,n,s,o,r){for(;o>s;){if(o-s>600){var a=o-s+1,h=n-s+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(h-a/2<0?-1:1);t(i,n,Math.max(s,Math.floor(n-h*c/a+u)),Math.min(o,Math.floor(n+(a-h)*c/a+u)),r)}var d=i[n],g=s,_=o;for(e(i,s,n),r(i[o],d)>0&&e(i,s,o);g<_;){for(e(i,g,_),g++,_--;r(i[g],d)<0;)g++;for(;r(i[_],d)>0;)_--}0===r(i[s],d)?e(i,s,_):e(i,++_,o),_<=n&&(s=_+1),n<=_&&(o=_-1)}}(t,n,s||0,o||t.length-1,r||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function o(t,e){r(t,0,t.children.length,e,t)}function r(t,e,i,n,s){s||(s=_(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var o=e;o<i;o++){var r=t.children[o];a(s,t.leaf?n(r):r)}return s}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(e,i,n,s,o){for(var r=[i,n];r.length;)if(!((n=r.pop())-(i=r.pop())<=s)){var a=i+Math.ceil((n-i)/s/2)*s;t(e,a,i,n,o),r.push(i,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!g(t,e))return i;for(var n=this.toBBox,s=[];e;){for(var o=0;o<e.children.length;o++){var r=e.children[o],a=e.leaf?n(r):r;g(t,a)&&(e.leaf?i.push(r):d(t,a)?this._all(r,i):s.push(r))}e=s.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!g(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var s=e.children[n],o=e.leaf?this.toBBox(s):s;if(g(t,o)){if(e.leaf||d(t,o))return!0;i.push(s)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=_([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,o,r=this.data,a=this.toBBox(t),h=[],l=[];r||h.length;){if(r||(r=h.pop(),n=h[h.length-1],i=l.pop(),o=!0),r.leaf){var c=s(t,r.children,e);if(-1!==c)return r.children.splice(c,1),h.push(r),this._condense(h),this}o||r.leaf||!d(r,a)?n?(i++,r=n.children[i],o=!1):r=null:(h.push(r),l.push(i),i=0,n=r,r=r.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var s,r=i-e+1,a=this._maxEntries;if(r<=a)return o(s=_(t.slice(e,i+1)),this.toBBox),s;n||(n=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,n-1))),(s=_([])).leaf=!1,s.height=n;var h=Math.ceil(r/a),l=h*Math.ceil(Math.sqrt(a));f(t,e,i,l,this.compareMinX);for(var c=e;c<=i;c+=l){var u=Math.min(c+l-1,i);f(t,c,u,h,this.compareMinY);for(var d=c;d<=u;d+=h){var g=Math.min(d+h-1,u);s.children.push(this._build(t,d,g,n-1))}}return o(s,this.toBBox),s},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var s=1/0,o=1/0,r=void 0,a=0;a<e.children.length;a++){var h=e.children[a],l=c(h),u=(d=t,g=h,(Math.max(g.maxX,d.maxX)-Math.min(g.minX,d.minX))*(Math.max(g.maxY,d.maxY)-Math.min(g.minY,d.minY))-l);u<o?(o=u,s=l<s?l:s,r=h):u===o&&l<s&&(s=l,r=h)}e=r||e.children[0]}var d,g;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),a(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);var r=this._chooseSplitIndex(i,s,n),a=_(i.children.splice(r,i.children.length-r));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(t,e){this.data=_([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,s,o,a,h,l,u,d=1/0,g=1/0,_=e;_<=i-e;_++){var f=r(t,0,_,this.toBBox),p=r(t,_,i,this.toBBox),m=(s=f,o=p,void 0,void 0,void 0,void 0,a=Math.max(s.minX,o.minX),h=Math.max(s.minY,o.minY),l=Math.min(s.maxX,o.maxX),u=Math.min(s.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,u-h)),x=c(f)+c(p);m<d?(d=m,n=_,g=x<g?x:g):m===d&&x<g&&(g=x,n=_)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:h,s=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,s)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var s=this.toBBox,o=r(t,0,e,s),h=r(t,i-e,i,s),l=u(o)+u(h),c=e;c<i-e;c++){var d=t.children[c];a(o,t.leaf?s(d):d),l+=u(o)}for(var g=i-e-1;g>=e;g--){var _=t.children[g];a(h,t.leaf?s(_):_),l+=u(h)}return l},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},650071:(t,e,i)=>{"use strict";i.d(e,{A:()=>c});var n=i(870017),s=i(234120),o=i(332135),r=i(301685);const a="length";class h extends r.Ay{constructor(t,e,i){super(t),this.element=e,this.index=i}}class l extends s.A{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(a)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new h(o.A.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new h(o.A.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new h(o.A.REMOVE,i,t)),this.dispatchEvent(new h(o.A.ADD,e,t))}updateLength_(){this.set(a,this.array_.length)}assertUnique_(t,e){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===t&&i!==e)throw new n.A(58)}}const c=l},332135:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n={ADD:"add",REMOVE:"remove"}},517933:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>C});var n=i(234120),s=i(162703),o=i(309015),r=i(657115),a=i(385733),h=i(374238),l=i(206933),c=i(190588),u=i(61597);function d(t,e,i){return function(n,s,o,r,a){if(!n)return;if(!s&&!e)return n;const h=e?0:o[0]*s,l=e?0:o[1]*s,c=a?a[0]:0,d=a?a[1]:0;let g=t[0]+h/2+c,_=t[2]-h/2+c,f=t[1]+l/2+d,p=t[3]-l/2+d;g>_&&(g=(_+g)/2,_=g),f>p&&(f=(p+f)/2,p=f);let m=(0,u.qE)(n[0],g,_),x=(0,u.qE)(n[1],f,p);if(r&&i&&s){const t=30*s;m+=-t*Math.log(1+Math.max(0,g-n[0])/t)+t*Math.log(1+Math.max(0,n[0]-_)/t),x+=-t*Math.log(1+Math.max(0,f-n[1])/t)+t*Math.log(1+Math.max(0,n[1]-p)/t)}return[m,x]}}function g(t){return t}var _=i(570915),f=i(166514);function p(t,e,i,n){const s=(0,_.RG)(e)/i[0],o=(0,_.Oq)(e)/i[1];return n?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function m(t,e,i){let n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),(0,u.qE)(n,i/2,2*e)}function x(t,e,i,n,s){return i=void 0===i||i,function(o,r,a,h){if(void 0!==o){const r=n?p(t,n,a,s):t;return i&&h?m(o,r,e):(0,u.qE)(o,e,r)}}}var y=i(624498),R=i(293474),v=i(934142);class A extends n.A{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.Av)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.RJ)(),t.center&&(t.center=(0,a.Ad)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.SD)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in o.A)delete e[t];this.setProperties(e,!0);const i=function(t){let e,i,n;let s=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28;const h=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,d=void 0!==t.showFullExtent&&t.showFullExtent,g=(0,a.Av)(t.projection,"EPSG:3857"),y=g.getExtent();let R=t.constrainOnlyCenter,v=t.extent;if(l||v||!g.isGlobal()||(R=!1,v=y),void 0!==t.resolutions){const r=t.resolutions;i=r[s],n=void 0!==r[o]?r[o]:r[r.length-1],e=t.constrainResolution?function(t,e,i,n){return e=void 0===e||e,function(s,o,r,a){if(void 0!==s){const h=t[0],l=t[t.length-1],c=i?p(h,i,r,n):h;if(a)return e?m(s,c,l):(0,u.qE)(s,l,c);const d=Math.min(c,s),g=Math.floor((0,f.FT)(t,d,o));return t[g]>c&&g<t.length-1?t[g+1]:t[g]}}}(r,c,!R&&v,d):x(i,n,c,!R&&v,d)}else{const l=(y?Math.max((0,_.RG)(y),(0,_.Oq)(y)):360*a.Ig.degrees/g.getMetersPerUnit())/r.R/Math.pow(2,0),f=l/Math.pow(2,28);i=t.maxResolution,void 0!==i?s=0:i=l/Math.pow(h,s),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(h,o):l/Math.pow(h,o):f),o=s+Math.floor(Math.log(i/n)/Math.log(h)),n=i/Math.pow(h,o-s),e=t.constrainResolution?function(t,e,i,n,s,o){return n=void 0===n||n,i=void 0!==i?i:0,function(r,a,h,l){if(void 0!==r){const c=s?p(e,s,h,o):e;if(l)return n?m(r,c,i):(0,u.qE)(r,i,c);const d=1e-9,g=Math.ceil(Math.log(e/c)/Math.log(t)-d),_=-a*(.5-d)+.5,f=Math.min(c,r),x=Math.floor(Math.log(e/f)/Math.log(t)+_),y=Math.max(g,x),R=e/Math.pow(t,y);return(0,u.qE)(R,i,c)}}}(h,i,n,c,!R&&v,d):x(i,n,c,!R&&v,d)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:s,zoomFactor:h}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return d(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.Av)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,d(t,!1,!1)}return g}(t),s=i.constraint,h=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?(0,y.cq)():!1===e?y.dv:"number"==typeof e?(0,y.a$)(e):y.dv}return y.b8}(t);this.constraints_={center:n,resolution:s,rotation:h},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(n[3]-e[3]+e[1]-n[1]),r=s/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let i=arguments[t];i.center&&(i=Object.assign({},i),i.center=(0,a.Ad)(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=(0,a.Ad)(i.anchor,this.getProjection())),e[t]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const t=arguments[n];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(n===i)return void(e&&S(e,!0));let o=Date.now(),r=this.targetCenter_.slice(),a=this.targetResolution_,h=this.targetRotation_;const l=[];for(;n<i;++n){const t=arguments[n],i={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||R.T9,callback:e};if(t.center&&(i.sourceCenter=r,i.targetCenter=t.center.slice(),r=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=a,i.targetResolution=this.getResolutionForZoom(t.zoom),a=i.targetResolution):t.resolution&&(i.sourceResolution=a,i.targetResolution=t.resolution,a=i.targetResolution),void 0!==t.rotation){i.sourceRotation=h;const e=(0,u.xP)(t.rotation-h+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=h+e,h=i.targetRotation}E(i)?i.complete=!0:o+=i.duration,l.push(i)}this.animations_.push(l),this.setHint(s.A.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[s.A.ANIMATING]>0}getInteracting(){return this.hints_[s.A.INTERACTING]>0}cancelAnimations(){let t;this.setHint(s.A.ANIMATING,-this.hints_[s.A.ANIMATING]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&S(i[0].callback,!1),!t)for(let e=0,n=i.length;e<n;++e){const n=i[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let o=!0;for(let i=0,s=n.length;i<s;++i){const s=n[i];if(s.complete)continue;const r=t-s.start;let a=s.duration>0?r/s.duration:1;a>=1?(s.complete=!0,a=1):o=!1;const h=s.easing(a);if(s.sourceCenter){const t=s.sourceCenter[0],e=s.sourceCenter[1],i=s.targetCenter[0],n=s.targetCenter[1];this.nextCenter_=s.targetCenter;const o=t+h*(i-t),r=e+h*(n-e);this.targetCenter_=[o,r]}if(s.sourceResolution&&s.targetResolution){const t=1===h?s.targetResolution:s.sourceResolution+h*(s.targetResolution-s.sourceResolution);if(s.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){const t=1===h?(0,u.xP)(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+h*(s.targetRotation-s.sourceRotation);if(s.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!s.complete)break}if(o){this.animations_[i]=null,this.setHint(s.A.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=n[0].callback;t&&S(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],(0,l.e$)(i,t-this.getRotation()),(0,l.WQ)(i,e)),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),s=this.getResolution();return void 0!==n&&void 0!==s&&(i=[e[0]-t*(e[0]-n[0])/s,e[1]-t*(e[1]-n[1])/s]),i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,a.te)(t,this.getProjection()):t}getCenterInternal(){return this.get(o.A.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,a.JR)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();(0,c.v)(e,1);const i=this.getResolution();(0,c.v)(void 0!==i,2);const n=this.getRotation();return(0,c.v)(void 0!==n,3),(0,_.Bg)(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(o.A.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.SD)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=(0,_.RG)(t)/e[0],n=(0,_.Oq)(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(i){return e/Math.pow(t,i*n)}}getRotation(){return this.get(o.A.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const t=this.getViewportSizeMinusPadding_();n=I(n,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const s=(0,f.FT)(this.resolutions_,t,1);n=s,e=this.resolutions_[s],i=s==this.resolutions_.length-1?2:e/this.resolutions_[s+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=(0,u.qE)(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,(0,u.qE)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if((0,c.v)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,c.v)(!(0,_.Im)(t),25);const e=(0,a.SD)(t,this.getProjection());i=(0,v.VY)(e)}else if("Circle"===t.getType()){const e=(0,a.SD)(t.getExtent(),this.getProjection());i=(0,v.VY)(e),i.rotate(this.getRotation(),(0,_.q1)(e))}else{const e=(0,a.Tf)();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let r=1/0,a=1/0,h=-1/0,l=-1/0;for(let t=0,e=s.length;t<e;t+=o){const e=s[t]*i-s[t+1]*n,o=s[t]*n+s[t+1]*i;r=Math.min(r,e),a=Math.min(a,o),h=Math.max(h,e),l=Math.max(l,o)}return[r,a,h,l]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(r,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,s?0:1);const l=this.getRotation(),c=Math.sin(l),u=Math.cos(l),d=(0,_.q1)(r);d[0]+=(n[1]-n[3])/2*a,d[1]+=(n[0]-n[2])/2*a;const g=d[0]*u-d[1]*c,f=d[1]*u+d[0]*c,p=this.getConstrainedCenter([g,f],a),m=e.callback?e.callback:h.tV;void 0!==e.duration?this.animateInternal({resolution:a,center:p,duration:e.duration,easing:e.easing},m):(this.targetResolution_=a,this.targetCenter_=p,this.applyTargetState_(!1,!0),S(m,!0))}centerOn(t,e,i){this.centerOnInternal((0,a.Ad)(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(I(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let s;const o=this.padding_;if(o&&t){const r=this.getViewportSizeMinusPadding_(-i),a=I(t,n,[r[0]/2+o[3],r[1]/2+o[0]],e,i);s=[t[0]-a[0],t[1]-a[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.te)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.Ad)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.Ad)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.Ad)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,r,s,i,this.calculateCenterShift(this.targetCenter_,r,n,s));this.get(o.A.ROTATION)!==n&&this.set(o.A.ROTATION,n),this.get(o.A.RESOLUTION)!==r&&(this.set(o.A.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),a&&this.get(o.A.CENTER)&&(0,l.aI)(this.get(o.A.CENTER),a)||this.set(o.A.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const n=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),r=this.constraints_.resolution(this.targetResolution_,n,o),a=this.constraints_.center(this.targetCenter_,r,o,!1,this.calculateCenterShift(this.targetCenter_,r,s,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=s,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===s&&this.getCenterInternal()&&(0,l.aI)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:a,resolution:r,duration:t,easing:R.vT,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(s.A.INTERACTING,1)}endInteraction(t,e,i){i=i&&(0,a.Ad)(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(s.A.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function S(t,e){setTimeout(function(){t(e)},0)}function E(t){return!(t.sourceCenter&&t.targetCenter&&!(0,l.aI)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function I(t,e,i,n,s){const o=Math.cos(-s);let r=Math.sin(-s),a=t[0]*o-t[1]*r,h=t[1]*o+t[0]*r;return a+=(e[0]/2-i[0])*n,h+=(i[1]-e[1]/2)*n,r=-r,[a*o-h*r,h*o+a*r]}const C=A},162703:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n={ANIMATING:0,INTERACTING:1}},309015:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},21142:(t,e,i)=>{"use strict";i.d(e,{m8:()=>o,nF:()=>r});var n=i(374238);let s=!1;function o(t,e,i,n,o,r,a){const h=new XMLHttpRequest;h.open("GET","function"==typeof t?t(i,n,o):t,!0),"arraybuffer"==e.getType()&&(h.responseType="arraybuffer"),h.withCredentials=s,h.onload=function(t){if(!h.status||h.status>=200&&h.status<300){const t=e.getType();let n;"json"==t||"text"==t?n=h.responseText:"xml"==t?(n=h.responseXML,n||(n=(new DOMParser).parseFromString(h.responseText,"application/xml"))):"arraybuffer"==t&&(n=h.response),n?r(e.readFeatures(n,{extent:i,featureProjection:o}),e.readProjection(n)):a()}else a()},h.onerror=a,h.send()}function r(t,e){return function(i,s,r,a,h){const l=this;o(t,e,i,s,r,function(t,e){l.addFeatures(t),void 0!==a&&a(t)},h||n.tV)}}},458620:(t,e,i)=>{"use strict";i.d(e,{A:()=>l});var n=i(234120),s=i(75332),o=i(104087),r=i(190588),a=i(61597);class h extends n.A{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[s.A.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,r.v)("number"==typeof e[s.A.OPACITY],64),e[s.A.VISIBLE]=void 0===t.visible||t.visible,e[s.A.Z_INDEX]=t.zIndex,e[s.A.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[s.A.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[s.A.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[s.A.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=(0,a.qE)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,o.b0)()}getLayerStatesArray(t){return(0,o.b0)()}getExtent(){return this.get(s.A.EXTENT)}getMaxResolution(){return this.get(s.A.MAX_RESOLUTION)}getMinResolution(){return this.get(s.A.MIN_RESOLUTION)}getMinZoom(){return this.get(s.A.MIN_ZOOM)}getMaxZoom(){return this.get(s.A.MAX_ZOOM)}getOpacity(){return this.get(s.A.OPACITY)}getSourceState(){return(0,o.b0)()}getVisible(){return this.get(s.A.VISIBLE)}getZIndex(){return this.get(s.A.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(s.A.EXTENT,t)}setMaxResolution(t){this.set(s.A.MAX_RESOLUTION,t)}setMinResolution(t){this.set(s.A.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(s.A.MAX_ZOOM,t)}setMinZoom(t){this.set(s.A.MIN_ZOOM,t)}setOpacity(t){(0,r.v)("number"==typeof t,64),this.set(s.A.OPACITY,t)}setVisible(t){this.set(s.A.VISIBLE,t)}setZIndex(t){this.set(s.A.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const l=h},532465:(t,e,i)=>{"use strict";i.d(e,{A:()=>y});var n=i(160764),s=i(718260),o=i(429276),r=i(927733),a=i(113628),h=i(55394),l=i(986936),c=i(200953),u=i(981426);function d(t){return new o.Ay({fill:g(t,""),stroke:_(t,""),text:f(t),image:p(t)})}function g(t,e){const i=t[e+"fill-color"];if(i)return new a.A({color:i})}function _(t,e){const i=t[e+"stroke-width"],n=t[e+"stroke-color"];if(i||n)return new c.A({width:i,color:n,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function f(t){const e=t["text-value"];if(e)return new u.A({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],repeat:t["text-repeat"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:g(t,"text-"),backgroundFill:g(t,"text-background-"),stroke:_(t,"text-"),backgroundStroke:_(t,"text-background-")})}function p(t){const e=t["icon-src"],i=t["icon-img"];if(e||i)return new h.A({src:e,img:i,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],width:t["icon-width"],height:t["icon-height"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]});const n=t["shape-points"];if(n){const e="shape-";return new l.A({points:n,fill:g(t,e),stroke:_(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}const s=t["circle-radius"];if(s){const e="circle-";return new r.A({radius:s,fill:g(t,e),stroke:_(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}const m="renderOrder";class x extends n.A{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(m)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new s(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(m,t)}setStyle(t){let e;if(void 0===t)e=o.d1;else if(null===t)e=null;else if("function"==typeof t)e=t;else if(t instanceof o.Ay)e=t;else if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let e=0;e<i;++e){const i=t[e];i instanceof o.Ay?n[e]=i:n[e]=d(i)}e=n}else e=d(t);this.style_=e,this.styleFunction_=null===t?void 0:(0,o.mC)(this.style_),this.changed()}}const y=x},160764:(t,e,i)=>{"use strict";i.d(e,{A:()=>g,l:()=>d});var n=i(458620),s=i(506837),o=i(75332),r=i(883984),a=i(517933),h=i(190588),l=i(570915),c=i(209438);class u extends n.A{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(o.A.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(o.A.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,c.JH)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=(0,c.KT)(t,s.A.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const i=this.getMapInternal();let n;!t&&i&&(t=i.getView()),e=t instanceof a.Ay?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),n=e.layerStatesArray?e.layerStatesArray.find(t=>t.layer===this):this.getLayerState();const s=this.getExtent();return d(n,e.viewState)&&(!s||(0,l.HY)(s,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];let n=e(t instanceof a.Ay?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(o.A.MAP,t)}getMapInternal(){return this.get(o.A.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,c.JH)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,c.JH)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,c.KT)(t,r.A.PRECOMPOSE,function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);(0,h.v)(!e.some(function(t){return t.layer===i.layer}),67),e.push(i)},this),this.mapRenderKey_=(0,c.KT)(this,s.A.CHANGE,t.render,t),this.changed())}setSource(t){this.set(o.A.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function d(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const g=u},75332:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},712651:(t,e,i)=>{"use strict";i.d(e,{A:()=>R});var n=i(532465),s=i(570587),o=i(996769),r=i(335146),a=i(162703),h=i(613663),l=i(609703),c=i(570915),u=i(568711),d=i(573608),g=i(166514),_=i(385733),f=i(104087),p=i(206933);class m extends o.A{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,c.S5)(),this.wrappedRenderedExtent_=(0,c.S5)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,s=e.viewState,o=s.center,r=s.resolution,h=s.projection,l=s.rotation,u=h.getExtent(),d=this.getLayer().getSource(),g=e.pixelRatio,_=e.viewHints,f=!(_[a.A.ANIMATING]||_[a.A.INTERACTING]),p=this.compositionContext_,m=Math.round(e.size[0]*g),x=Math.round(e.size[1]*g),y=d.getWrapX()&&h.canWrapX(),R=y?(0,c.RG)(u):null,v=y?Math.ceil((n[2]-u[2])/R)+1:1;let A=y?Math.floor((n[0]-u[0])/R):0;do{const e=this.getRenderTransform(o,r,l,g,m,x,A*R);t.execute(p,1,e,l,f,void 0,i)}while(++A<v)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,u.Y)(this.context.canvas.width,this.context.canvas.height,o.B);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,u.Yg)(this.compositionContext_),o.B.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];(0,l.rQ)(this.pixelTransform,1/i,1/i),(0,l.T9)(this.inversePixelTransform,this.pixelTransform);const s=(0,l.dI)(this.pixelTransform);this.useContainer(e,s,this.getBackground(t));const o=this.context,r=o.canvas,a=this.replayGroup_,h=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!h||h.isEmpty()))return null;const u=Math.round(t.size[0]*i),d=Math.round(t.size[1]*i);r.width!=u||r.height!=d?(r.width=u,r.height=d,r.style.transform!==s&&(r.style.transform=s)):this.containerReused||o.clearRect(0,0,u,d),this.preRender(o,t);const g=t.viewState,f=g.projection;this.opacity_=n.opacity,this.setupCompositionContext_();let p=!1,m=!0;if(n.extent&&this.clipping){const e=(0,_.SD)(n.extent,f);m=(0,c.HY)(e,t.extent),p=m&&!(0,c.ms)(e,t.extent),p&&this.clipUnrotated(this.compositionContext_,t,e)}return m&&this.renderWorlds(a,t),p&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==g.rotation&&(this.renderedRotation_=g.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];(0,l.Bb)(this.pixelTransform,t);const e=this.renderedCenter_,i=this.renderedResolution_,n=this.renderedRotation_,s=this.renderedProjection_,o=this.wrappedRenderedExtent_,r=this.getLayer(),a=[],u=t[0]*h.tF,d=t[1]*h.tF;a.push(this.getRenderTransform(e,i,n,h.tF,u,d,0).slice());const g=r.getSource(),_=s.getExtent();if(g.getWrapX()&&s.canWrapX()&&!(0,c.ms)(_,o)){let t=o[0];const s=(0,c.RG)(_);let r,l=0;for(;t<_[0];)--l,r=s*l,a.push(this.getRenderTransform(e,i,n,h.tF,u,d,r).slice()),t+=s;for(l=0,t=o[2];t>_[2];)++l,r=s*l,a.push(this.getRenderTransform(e,i,n,h.tF,u,d,r).slice()),t-=s}this.hitDetectionImageData_=(0,h._7)(t,a,this.renderedFeatures_,r.getStyleFunction(),o,i,n)}e((0,h.F8)(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,n,s){if(!this.replayGroup_)return;const o=e.viewState.resolution,r=e.viewState.rotation,a=this.getLayer(),h={},l=function(t,e,i){const o=(0,f.v6)(t),r=h[o];if(r){if(!0!==r&&i<r.distanceSq){if(0===i)return h[o]=!0,s.splice(s.lastIndexOf(r),1),n(t,a,e);r.geometry=e,r.distanceSq=i}}else{if(0===i)return h[o]=!0,n(t,a,e);s.push(h[o]={feature:t,layer:a,geometry:e,distanceSq:i,callback:n})}};let c;const u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some(n=>c=n.forEachFeatureAtCoordinate(t,o,r,i,l,n===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(t=>t.value):null)),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const n=t.viewHints[a.A.ANIMATING],o=t.viewHints[a.A.INTERACTING],h=e.getUpdateWhileAnimating(),l=e.getUpdateWhileInteracting();if(this.ready&&!h&&n||!l&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const u=t.extent,f=t.viewState,m=f.projection,x=f.resolution,y=t.pixelRatio,R=e.getRevision(),v=e.getRenderBuffer();let A=e.getRenderOrder();void 0===A&&(A=d.Eo);const S=f.center.slice(),E=(0,c.r)(u,v*x),I=E.slice(),C=[E.slice()],M=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!(0,c.ms)(M,t.extent)){const t=(0,c.RG)(M),e=Math.max((0,c.RG)(E)/2,t);E[0]=M[0]-e,E[2]=M[2]+e,(0,p.Li)(S,m);const i=(0,c.Li)(C[0],m);i[0]<M[0]&&i[2]<M[2]?C.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>M[0]&&i[2]>M[2]&&C.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==x&&this.renderedRevision_==R&&this.renderedRenderOrder_==A&&(0,c.ms)(this.wrappedRenderedExtent_,E))return(0,g.aI)(this.renderedExtent_,I)||(this.hitDetectionImageData_=null,this.renderedExtent_=I),this.renderedCenter_=S,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const T=new s.A((0,d.gY)(x,y),E,x,y);let b;this.getLayer().getDeclutter()&&(b=new s.A((0,d.gY)(x,y),E,x,y));const F=(0,_.Tf)();let O;if(F){for(let t=0,e=C.length;t<e;++t){const e=C[t],n=(0,_.JR)(e,m);i.loadFeatures(n,(0,_.vN)(x,m),F)}O=(0,_.FO)(F,m)}else for(let t=0,e=C.length;t<e;++t)i.loadFeatures(C[t],x,m);const w=(0,d.j)(x,y);let D=!0;const L=t=>{let i;const n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,x)),i){const e=this.renderFeature(t,w,i,T,O,b);D=D&&!e}},k=(0,_.JR)(E,m),P=i.getFeaturesInExtent(k);A&&P.sort(A);for(let t=0,e=P.length;t<e;++t)L(P[t]);this.renderedFeatures_=P,this.ready=D;const N=T.finish(),G=new r.A(E,x,y,i.getOverlaps(),N,e.getRenderBuffer());return b&&(this.declutterExecutorGroup=new r.A(E,x,y,i.getOverlaps(),b.finish(),e.getRenderBuffer())),this.renderedResolution_=x,this.renderedRevision_=R,this.renderedRenderOrder_=A,this.renderedExtent_=I,this.wrappedRenderedExtent_=E,this.renderedCenter_=S,this.renderedProjection_=m,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,s,o){if(!i)return!1;let r=!1;if(Array.isArray(i))for(let a=0,h=i.length;a<h;++a)r=(0,d.nl)(n,t,i[a],e,this.boundHandleStyleImageChange_,s,o)||r;else r=(0,d.nl)(n,t,i,e,this.boundHandleStyleImageChange_,s,o);return r}}const x=m;class y extends n.A{constructor(t){super(t)}createRenderer(){return new x(this)}}const R=y},260942:(t,e,i)=>{"use strict";i.d(e,{Q7:()=>s,Qk:()=>o,Vs:()=>r});var n=i(385733);function s(t,e){return[[-1/0,-1/0,1/0,1/0]]}function o(t,e){return[t]}function r(t){return function(e,i,s){const o=t.getZForResolution((0,n.U$)(i,s)),r=t.getTileRangeForExtentAndZ((0,n.SD)(e,s),o),a=[],h=[o,0,0];for(h[1]=r.minX;h[1]<=r.maxX;++h[1])for(h[2]=r.minY;h[2]<=r.maxY;++h[2])a.push((0,n.JR)(t.getTileCoordExtent(h),s));return a}}},809960:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(301685);class s extends n.Ay{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}const o=s},883984:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},808130:(t,e,i)=>{"use strict";i.d(e,{A:()=>d});var n=i(166429),s=i(611580),o=i(432826),r=i(977295),a=i(570915),h=i(838774),l=i(166514),c=i(956361);class u extends o.A{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let r=0,h=t.length;r<h;r+=e)n[0]=t[r],n[1]=t[r+1],(0,a.Ym)(i,n)&&(s[o++]=n[0],s[o++]=n[1]);return o}appendFlatLineCoordinates(t,e,i,n,o,r){const h=this.coordinates;let l=h.length;const c=this.getBufferedMaxExtent();r&&(e+=n);let u=t[e],d=t[e+1];const g=this.tmpCoordinate_;let _,f,p,m=!0;for(_=e+n;_<i;_+=n)g[0]=t[_],g[1]=t[_+1],p=(0,a.vz)(c,g),p!==f?(m&&(h[l++]=u,h[l++]=d,m=!1),h[l++]=g[0],h[l++]=g[1]):p===s.A.INTERSECTING?(h[l++]=g[0],h[l++]=g[1],m=!1):m=!0,u=g[0],d=g[1],f=p;return(o&&m||_===e+n)&&(h[l++]=u,h[l++]=d),l}drawCustomCoordinates_(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o){const r=i[o],a=this.appendFlatLineCoordinates(t,e,r,n,!1,!1);s.push(a),e=r}return e}drawCustom(t,e,i,s){this.beginGeometry(t,e);const o=t.getType(),r=t.getStride(),a=this.coordinates.length;let h,l,u,d,g;switch(o){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),d=[];const e=t.getEndss();g=0;for(let t=0,i=e.length;t<i;++t){const i=[];g=this.drawCustomCoordinates_(h,g,e[t],r,i),d.push(i)}this.instructions.push([n.Ay.CUSTOM,a,d,t,i,c.Dz]),this.hitDetectionInstructions.push([n.Ay.CUSTOM,a,d,t,s||i,c.Dz]);break;case"Polygon":case"MultiLineString":u=[],h="Polygon"==o?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),g=this.drawCustomCoordinates_(h,0,t.getEnds(),r,u),this.instructions.push([n.Ay.CUSTOM,a,u,t,i,c.cD]),this.hitDetectionInstructions.push([n.Ay.CUSTOM,a,u,t,s||i,c.cD]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),l=this.appendFlatLineCoordinates(h,0,h.length,r,!1,!1),this.instructions.push([n.Ay.CUSTOM,a,l,t,i,c.n2]),this.hitDetectionInstructions.push([n.Ay.CUSTOM,a,l,t,s||i,c.n2]);break;case"MultiPoint":h=t.getFlatCoordinates(),l=this.appendFlatPointCoordinates(h,r),l>a&&(this.instructions.push([n.Ay.CUSTOM,a,l,t,i,c.n2]),this.hitDetectionInstructions.push([n.Ay.CUSTOM,a,l,t,s||i,c.n2]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),l=this.coordinates.length,this.instructions.push([n.Ay.CUSTOM,a,l,t,i]),this.hitDetectionInstructions.push([n.Ay.CUSTOM,a,l,t,s||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[n.Ay.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[n.Ay.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let s,o,r=-1;for(e=0;e<i;++e)s=t[e],o=s[0],o==n.Ay.END_GEOMETRY?r=e:o==n.Ay.BEGIN_GEOMETRY&&(s[2]=e,(0,l.gI)(this.hitDetectionInstructions,r,e),r=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=(0,r.F)(e||h.qY)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=(0,r.F)(t||h.NT);const n=e.getLineCap();i.lineCap=void 0!==n?n:h._m;const s=e.getLineDash();i.lineDash=s?s.slice():h.Oq;const o=e.getLineDashOffset();i.lineDashOffset=o||h.vk;const a=e.getLineJoin();i.lineJoin=void 0!==a?a:h._K;const l=e.getWidth();i.lineWidth=void 0!==l?l:h.aq;const c=e.getMiterLimit();i.miterLimit=void 0!==c?c:h.eL,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[n.Ay.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[n.Ay.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,s=t.lineDash,o=t.lineDashOffset,r=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||s!=t.currentLineDash&&!(0,l.aI)(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=r||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=r,t.currentLineWidth=a,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[n.Ay.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,a.o8)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,a.r)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const d=u},570587:(t,e,i)=>{"use strict";i.d(e,{A:()=>f});var n=i(808130),s=i(166429);class o extends n.A{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.appendFlatPointCoordinates(i,n);this.instructions.push([s.Ay.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([s.Ay.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.appendFlatPointCoordinates(i,n);this.instructions.push([s.Ay.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([s.Ay.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const r=o;var a=i(838774);class h extends n.A{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const o=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),a=[s.Ay.MOVE_TO_LINE_TO,o,r];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){const i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0===n||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,a.Oq,a.vk],s.th);const r=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(r,0,r.length,h),this.hitDetectionInstructions.push(s.VD),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0===n||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],s.th);const r=t.getEnds(),a=t.getFlatCoordinates(),h=t.getStride();let l=0;for(let t=0,e=r.length;t<e;++t)l=this.drawFlatCoordinates_(a,l,r[t],h);this.hitDetectionInstructions.push(s.VD),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(s.VD),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(s.VD),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(s.th)}}const l=h;var c=i(383671);class u extends n.A{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const o=this.state,r=void 0!==o.fillStyle,a=void 0!==o.strokeStyle,h=i.length;this.instructions.push(s.th),this.hitDetectionInstructions.push(s.th);for(let o=0;o<h;++o){const r=i[o],h=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,r,n,!0,!a),c=[s.Ay.MOVE_TO_LINE_TO,h,l];this.instructions.push(c),this.hitDetectionInstructions.push(c),a&&(this.instructions.push(s.kx),this.hitDetectionInstructions.push(s.kx)),e=r}return r&&(this.instructions.push(s.I5),this.hitDetectionInstructions.push(s.I5)),a&&(this.instructions.push(s.VD),this.hitDetectionInstructions.push(s.VD)),e}drawCircle(t,e){const i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0===n&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([s.Ay.SET_FILL_STYLE,a.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const r=t.getFlatCoordinates(),h=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(r,0,r.length,h,!1,!1);const c=[s.Ay.CIRCLE,l];this.instructions.push(s.th,c),this.hitDetectionInstructions.push(s.th,c),void 0!==i.fillStyle&&(this.instructions.push(s.I5),this.hitDetectionInstructions.push(s.I5)),void 0!==i.strokeStyle&&(this.instructions.push(s.VD),this.hitDetectionInstructions.push(s.VD)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0===n&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([s.Ay.SET_FILL_STYLE,a.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const r=t.getEnds(),h=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(h,0,r,l),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0===n&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([s.Ay.SET_FILL_STYLE,a.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const r=t.getEndss(),h=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let t=0,e=r.length;t<e;++t)c=this.drawFlatCoordinatess_(h,c,r[t],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=(0,c.n$)(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}const d=u;var g=i(466982);const _={Circle:d,Default:n.A,Image:r,LineString:l,Polygon:d,Text:g.A},f=class{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const n in i){const s=i[n].finish();t[e][n]=s}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);let s=n[e];return void 0===s&&(s=new(0,_[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=s),s}}},335146:(t,e,i)=>{"use strict";i.d(e,{A:()=>M});var n=i(166429),s=i(466982),o=i(609703),r=i(570915),a=i(838774),h=i(61597),l=i(787622);function c(t,e,i,n,s,o,r,a,c,u,d,g){let _=t[e],f=t[e+1],p=0,m=0,x=0,y=0;function R(){p=_,m=f,_=t[e+=n],f=t[e+1],y+=x,x=Math.sqrt((_-p)*(_-p)+(f-m)*(f-m))}do{R()}while(e<i-n&&y+x<o);let v=0===x?0:(o-y)/x;const A=(0,h.Cc)(p,_,v),S=(0,h.Cc)(m,f,v),E=e-n,I=y,C=o+a*c(u,s,d);for(;e<i-n&&y+x<C;)R();v=0===x?0:(C-y)/x;const M=(0,h.Cc)(p,_,v),T=(0,h.Cc)(m,f,v);let b;if(g){const t=[A,S,M,T];(0,l.e$)(t,0,4,2,g,t,t),b=t[0]>t[2]}else b=A>M;const F=Math.PI,O=[],w=E+n===e;let D;if(x=0,y=I,_=t[e=E],f=t[e+1],w){R(),D=Math.atan2(f-m,_-p),b&&(D+=D>0?-F:F);const t=(M+A)/2,e=(T+S)/2;return O[0]=[t,e,(C-o)/2,D,s],O}for(let t=0,l=(s=s.replace(/\n/g," ")).length;t<l;){R();let g=Math.atan2(f-m,_-p);if(b&&(g+=g>0?-F:F),void 0!==D){let t=g-D;if(t+=t>F?-2*F:t<-F?2*F:0,Math.abs(t)>r)return null}D=g;const A=t;let S=0;for(;t<l;++t){const r=a*c(u,s[b?l-t-1:t],d);if(e+n<i&&y+x<o+S+r/2)break;S+=r}if(t===A)continue;const E=b?s.substring(l-A,l-t):s.substring(A,t);v=0===x?0:(o+S/2-y)/x;const I=(0,h.Cc)(p,_,v),C=(0,h.Cc)(m,f,v);O.push([I,C,S/2,g,E]),o+=S}return O}var u=i(166514),d=i(650904);const g=(0,r.S5)(),_=[],f=[],p=[],m=[];function x(t){return t[3].declutterBox}const y=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function R(t,e){return"start"!==e&&"end"!==e||y.test(t)||(e="start"===e?"left":"right"),s.E[e]}function v(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}const A=class{constructor(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,o.vt)(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,n){const o=t+e+i+n;if(this.labels_[o])return this.labels_[o];const r=n?this.strokeStates[n]:null,h=i?this.fillStates[i]:null,l=this.textStates[e],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(t),g=l.justify?s.E[l.justify]:R(Array.isArray(t)?t[0]:t,l.textAlign||a.MY),_=n&&r.lineWidth?r.lineWidth:0,f=d?t:t.split("\n").reduce(v,[]),{width:p,height:m,widths:x,heights:y,lineWidths:A}=(0,a.jT)(l,f),S=p+_,E=[],I=(S+2)*u[0],C=(m+_)*u[1],M={width:I<0?Math.floor(I):Math.ceil(I),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:E};1==u[0]&&1==u[1]||E.push("scale",u),n&&(E.push("strokeStyle",r.strokeStyle),E.push("lineWidth",_),E.push("lineCap",r.lineCap),E.push("lineJoin",r.lineJoin),E.push("miterLimit",r.miterLimit),E.push("setLineDash",[r.lineDash]),E.push("lineDashOffset",r.lineDashOffset)),i&&E.push("fillStyle",h.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const T=.5-g;let b=g*S+T*_;const F=[],O=[];let w,D=0,L=0,k=0,P=0;for(let t=0,e=f.length;t<e;t+=2){const e=f[t];if("\n"===e){L+=D,D=0,b=g*S+T*_,++P;continue}const s=f[t+1]||l.font;s!==w&&(n&&F.push("font",s),i&&O.push("font",s),w=s),D=Math.max(D,y[k]);const o=[e,b+T*x[k]+g*(x[k]-A[P]),.5*(_+D)+L];b+=x[k],n&&F.push("strokeText",o),i&&O.push("fillText",o),++k}return Array.prototype.push.apply(E,F),Array.prototype.push.apply(E,O),this.labels_[o]=M,M}replayTextBackground_(t,e,i,n,s,o,r){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),r&&(this.setStrokeStyle_(t,r),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,s,a,h,l,c,u,d,x,y,R,v,A){let S=i-(h*=x[0]),E=n-(l*=x[1]);const I=s+c>t?t-c:s,C=a+u>e?e-u:a,M=R[3]+I*x[0]+R[1],T=R[0]+C*x[1]+R[2],b=S-R[3],F=E-R[0];let O;return(v||0!==d)&&(_[0]=b,m[0]=b,_[1]=F,f[1]=F,f[0]=b+M,p[0]=f[0],p[1]=F+T,m[1]=p[1]),0!==d?(O=(0,o.Zz)((0,o.vt)(),i,n,1,1,d,-i,-n),(0,o.Bb)(O,_),(0,o.Bb)(O,f),(0,o.Bb)(O,p),(0,o.Bb)(O,m),(0,r.N)(Math.min(_[0],f[0],p[0],m[0]),Math.min(_[1],f[1],p[1],m[1]),Math.max(_[0],f[0],p[0],m[0]),Math.max(_[1],f[1],p[1],m[1]),g)):(0,r.N)(Math.min(b,b+M),Math.min(F,F+T),Math.max(b,b+M),Math.max(F,F+T),g),y&&(S=Math.round(S),E=Math.round(E)),{drawImageX:S,drawImageY:E,drawImageW:I,drawImageH:C,originX:c,originY:u,declutterBox:{minX:g[0],minY:g[1],maxX:g[2],maxY:g[3],value:A},canvasTransform:O,scale:x}}replayImageOrLabel_(t,e,i,n,s,o,r){const h=!(!o&&!r),l=n.declutterBox,c=t.canvas,u=r?r[2]*n.scale[0]/2:0;return l.minX-u<=c.width/e&&l.maxX+u>=0&&l.minY-u<=c.height/e&&l.maxY+u>=0&&(h&&this.replayTextBackground_(t,_,f,p,m,o,r),(0,a.Jw)(t,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){if(this.alignFill_){const e=(0,o.Bb)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){const o=this.textStates[e],r=this.createLabel(t,e,n,i),h=this.strokeStates[i],l=this.pixelRatio,c=R(Array.isArray(t)?t[0]:t,o.textAlign||a.MY),u=s.E[o.textBaseline||a.M8],d=h&&h.lineWidth?h.lineWidth:0;return{label:r,anchorX:c*(r.width/l-2*o.scale[0])+2*(.5-c)*d,anchorY:u*r.height/l+2*(.5-u)*d}}execute_(t,e,i,h,g,_,f,p){let m;this.pixelCoordinates_&&(0,u.aI)(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=(0,l.Rc)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,o.k3)(this.renderedTransform_,i));let y=0;const R=h.length;let v,A,S,E,I,C,M,T,b,F,O,w,D=0,L=0,k=0,P=null,N=null;const G=this.coordinateCache_,Y=this.viewRotation_,B=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,X={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Y},W=this.instructions!=h||this.overlaps?0:200;let Z,V,j,U;for(;y<R;){const i=h[y];switch(i[0]){case n.Ay.BEGIN_GEOMETRY:Z=i[1],U=i[3],Z.getGeometry()?void 0===f||(0,r.HY)(f,U.getExtent())?++y:y=i[2]+1:y=i[2];break;case n.Ay.BEGIN_PATH:L>W&&(this.fill_(t),L=0),k>W&&(t.stroke(),k=0),L||k||(t.beginPath(),E=NaN,I=NaN),++y;break;case n.Ay.CIRCLE:D=i[1];const o=m[D],h=m[D+1],l=m[D+2]-o,u=m[D+3]-h,R=Math.sqrt(l*l+u*u);t.moveTo(o+R,h),t.arc(o,h,R,0,2*Math.PI,!0),++y;break;case n.Ay.CLOSE_PATH:t.closePath(),++y;break;case n.Ay.CUSTOM:D=i[1],v=i[2];const K=i[3],q=i[4],z=6==i.length?i[5]:void 0;X.geometry=K,X.feature=Z,y in G||(G[y]=[]);const H=G[y];z?z(m,D,v,2,H):(H[0]=m[D],H[1]=m[D+1],H.length=2),q(H,X),++y;break;case n.Ay.DRAW_IMAGE:D=i[1],v=i[2],T=i[3],A=i[4],S=i[5];let J=i[6];const $=i[7],Q=i[8],tt=i[9],et=i[10];let it=i[11];const nt=i[12];let st=i[13];const ot=i[14],rt=i[15];if(!T&&i.length>=20){b=i[19],F=i[20],O=i[21],w=i[22];const t=this.drawLabelWithPointPlacement_(b,F,O,w);T=t.label,i[3]=T;const e=i[23];A=(t.anchorX-e)*this.pixelRatio,i[4]=A;const n=i[24];S=(t.anchorY-n)*this.pixelRatio,i[5]=S,J=T.height,i[6]=J,st=T.width,i[13]=st}let at,ht,lt,ct;i.length>25&&(at=i[25]),i.length>17?(ht=i[16],lt=i[17],ct=i[18]):(ht=a.Tq,lt=!1,ct=!1),et&&B?it+=Y:et||B||(it-=Y);let ut=0;for(;D<v;D+=2){if(at&&at[ut++]<st/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(T.width,T.height,m[D],m[D+1],st,J,A,S,Q,tt,it,nt,g,ht,lt||ct,Z),n=[t,e,T,i,$,lt?P:null,ct?N:null];if(p){if("none"===ot)continue;if("obstacle"===ot){p.insert(i.declutterBox);continue}{let t,e;if(rt){const i=v-D;if(!rt[i]){rt[i]=n;continue}if(t=rt[i],delete rt[i],e=x(t),p.collides(e))continue}if(p.collides(i.declutterBox))continue;t&&(p.insert(e),this.replayImageOrLabel_.apply(this,t)),p.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,n)}++y;break;case n.Ay.DRAW_CHARS:const dt=i[1],gt=i[2],_t=i[3],ft=i[4];w=i[5];const pt=i[6],mt=i[7],xt=i[8];O=i[9];const yt=i[10];b=i[11],F=i[12];const Rt=[i[13],i[13]],vt=this.textStates[F],At=vt.font,St=[vt.scale[0]*mt,vt.scale[1]*mt];let Et;At in this.widths_?Et=this.widths_[At]:(Et={},this.widths_[At]=Et);const It=(0,d.k)(m,dt,gt,2),Ct=Math.abs(St[0])*(0,a.TA)(At,b,Et);if(ft||Ct<=It){const i=this.textStates[F].textAlign,n=c(m,dt,gt,2,b,(It-Ct)*s.E[i],pt,Math.abs(St[0]),a.TA,At,Et,B?0:this.viewRotation_);t:if(n){const i=[];let s,o,r,h,l;if(O)for(s=0,o=n.length;s<o;++s){l=n[s],r=l[4],h=this.createLabel(r,F,"",O),A=l[2]+(St[0]<0?-yt:yt),S=_t*h.height+2*(.5-_t)*yt*St[1]/St[0]-xt;const o=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,A,S,0,0,l[3],Rt,!1,a.Tq,!1,Z);if(p&&p.collides(o.declutterBox))break t;i.push([t,e,h,o,1,null,null])}if(w)for(s=0,o=n.length;s<o;++s){l=n[s],r=l[4],h=this.createLabel(r,F,w,""),A=l[2],S=_t*h.height-xt;const o=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,A,S,0,0,l[3],Rt,!1,a.Tq,!1,Z);if(p&&p.collides(o.declutterBox))break t;i.push([t,e,h,o,1,null,null])}p&&p.load(i.map(x));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++y;break;case n.Ay.END_GEOMETRY:if(void 0!==_){Z=i[1];const t=_(Z,U);if(t)return t}++y;break;case n.Ay.FILL:W?L++:this.fill_(t),++y;break;case n.Ay.MOVE_TO_LINE_TO:for(D=i[1],v=i[2],V=m[D],j=m[D+1],C=V+.5|0,M=j+.5|0,C===E&&M===I||(t.moveTo(V,j),E=C,I=M),D+=2;D<v;D+=2)V=m[D],j=m[D+1],C=V+.5|0,M=j+.5|0,D!=v-2&&C===E&&M===I||(t.lineTo(V,j),E=C,I=M);++y;break;case n.Ay.SET_FILL_STYLE:P=i,this.alignFill_=i[2],L&&(this.fill_(t),L=0,k&&(t.stroke(),k=0)),t.fillStyle=i[1],++y;break;case n.Ay.SET_STROKE_STYLE:N=i,k&&(t.stroke(),k=0),this.setStrokeStyle_(t,i),++y;break;case n.Ay.STROKE:W?k++:t.stroke(),++y;break;default:++y}}L&&this.fill_(t),k&&t.stroke()}execute(t,e,i,n,s,o){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,e,i,n,s){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,s)}};var S=i(568711),E=i(643530);const I=["Polygon","Circle","LineString","Image","Text","Default"],C={},M=class{constructor(t,e,i,n,s,r){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,o.vt)(),this.createExecutors_(s)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);const n=t[e];for(const t in n){const e=n[t];i[t]=new A(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,n=t.length;e<n;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,s,a){const h=2*(n=Math.round(n))+1,l=(0,o.Zz)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=(0,S.Y)(h,h,void 0,{willReadFrequently:!0}));const d=this.hitDetectionContext_;let g;d.canvas.width!==h||d.canvas.height!==h?(d.canvas.width=h,d.canvas.height=h):c||d.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(g=(0,r.S5)(),(0,r.$C)(g,t),(0,r.r)(g,e*(this.renderBuffer_+n),g));const _=function(t){if(void 0!==C[t])return C[t];const e=2*t+1,i=t*t,n=new Array(i+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const r=s*s+o*o;if(r>i)break;let a=n[r];a||(a=[],n[r]=a),a.push(4*((t+s)*e+(t+o))+3),s>0&&a.push(4*((t-s)*e+(t+o))+3),o>0&&(a.push(4*((t+s)*e+(t-o))+3),s>0&&a.push(4*((t-s)*e+(t-o))+3))}const s=[];for(let t=0,e=n.length;t<e;++t)n[t]&&s.push(...n[t]);return C[t]=s,s}(n);let f;function p(t,e){const i=d.getImageData(0,0,h,h).data;for(let o=0,r=_.length;o<r;o++)if(i[_[o]]>0){if(!a||"Image"!==f&&"Text"!==f||a.includes(t)){const i=(_[o]-3)/4,r=n-i%h,a=n-(i/h|0),l=s(t,e,r*r+a*a);if(l)return l}d.clearRect(0,0,h,h);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);let x,y,R,v,A;for(m.sort(u.V_),x=m.length-1;x>=0;--x){const t=m[x].toString();for(R=this.executorsByZIndex_[t],y=I.length-1;y>=0;--y)if(f=I[y],v=R[f],void 0!==v&&(A=v.executeHitDetection(d,l,i,p,g),A))return A}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],n=e[1],s=e[2],o=e[3],r=[i,n,i,o,s,o,s,n];return(0,l.Rc)(r,0,8,2,t,r),r}isEmpty(){return(0,E.p)(this.executorsByZIndex_)}execute(t,e,i,n,s,o,r){const a=Object.keys(this.executorsByZIndex_).map(Number);let h,l,c,d,g,_;for(a.sort(u.V_),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||I,r&&a.reverse(),h=0,l=a.length;h<l;++h){const l=a[h].toString();for(g=this.executorsByZIndex_[l],c=0,d=o.length;c<d;++c)_=g[o[c]],void 0!==_&&_.execute(t,e,i,n,s,r)}this.maxExtent_&&t.restore()}}},166429:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>h,I5:()=>s,VD:()=>o,kx:()=>a,th:()=>r});const n={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},s=[n.FILL],o=[n.STROKE],r=[n.BEGIN_PATH],a=[n.CLOSE_PATH],h=n},466982:(t,e,i)=>{"use strict";i.d(e,{E:()=>d,A:()=>_});var n=i(808130),s=i(166429),o=i(977295),r=i(838774),a=i(104087),h=i(570915),l=i(61597);function c(t,e,i,n,s){const o=[];let r=i,a=0,h=e.slice(i,2);for(;a<t&&r+s<n;){const[i,n]=h.slice(-2),c=e[r+s],u=e[r+s+1],d=Math.sqrt((c-i)*(c-i)+(u-n)*(u-n));if(a+=d,a>=t){const e=(t-a+d)/d,g=(0,l.Cc)(i,c,e),_=(0,l.Cc)(n,u,e);h.push(g,_),o.push(h),h=[g,_],a==t&&(r+=s),a=0}else if(a<t)h.push(e[r+s],e[r+s+1]),r+=s;else{const t=d-a,e=(0,l.Cc)(i,c,t/d),g=(0,l.Cc)(n,u,t/d);h.push(e,g),o.push(h),h=[e,g],a=0,r+=s}}return a>0&&o.push(h),o}function u(t,e,i,n,s){let o,r,a,h,l,c,u,d,g,_,f=i,p=i,m=0,x=0,y=i;for(r=i;r<n;r+=s){const i=e[r],n=e[r+1];void 0!==l&&(g=i-l,_=n-c,h=Math.sqrt(g*g+_*_),void 0!==u&&(x+=a,o=Math.acos((u*g+d*_)/(a*h)),o>t&&(x>m&&(m=x,f=y,p=r),x=0,y=r-s)),a=h,u=g,d=_),l=i,c=n}return x+=h,x>m?[y,r]:[f,p]}const d={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class g extends n.A{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(""===this.text_||!o||!i&&!n)return;const a=this.coordinates;let l=a.length;const d=t.getType();let g=null,_=t.getStride();if("line"!==o.placement||"LineString"!=d&&"MultiLineString"!=d&&"Polygon"!=d&&"MultiPolygon"!=d){let i=o.overflow?null:[];switch(d){case"Point":case"MultiPoint":g=t.getFlatCoordinates();break;case"LineString":g=t.getFlatMidpoint();break;case"Circle":g=t.getCenter();break;case"MultiLineString":g=t.getFlatMidpoints(),_=2;break;case"Polygon":g=t.getFlatInteriorPoint(),o.overflow||i.push(g[2]/this.resolution),_=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();g=[];for(let t=0,n=e.length;t<n;t+=3)o.overflow||i.push(e[t+2]/this.resolution),g.push(e[t],e[t+1]);if(0===g.length)return;_=2}const n=this.appendFlatPointCoordinates(g,_);if(n===l)return;if(i&&(n-l)/2!==g.length/_){let t=l/2;i=i.filter((e,i)=>{const n=a[2*(t+i)]===g[i*_]&&a[2*(t+i)+1]===g[i*_+1];return n||--t,n})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let h=o.padding;if(h!=r.Tq&&(o.scale[0]<0||o.scale[1]<0)){let t=o.padding[0],e=o.padding[1],i=o.padding[2],n=o.padding[3];o.scale[0]<0&&(e=-e,n=-n),o.scale[1]<0&&(t=-t,i=-i),h=[t,e,i,n]}const c=this.pixelRatio;this.instructions.push([s.Ay.DRAW_IMAGE,l,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,h==r.Tq?r.Tq:h.map(function(t){return t*c}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const u=1/c;this.hitDetectionInstructions.push([s.Ay.DRAW_IMAGE,l,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[u,u],NaN,void 0,this.declutterImageWithText_,h,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}else{if(!(0,h.HY)(this.getBufferedMaxExtent(),t.getExtent()))return;let i;if(g=t.getFlatCoordinates(),"LineString"==d)i=[g.length];else if("MultiLineString"==d)i=t.getEnds();else if("Polygon"==d)i=t.getEnds().slice(0,1);else if("MultiPolygon"==d){const e=t.getEndss();i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t][0])}this.beginGeometry(t,e);const n=o.repeat,s=n?void 0:o.textAlign;let r=0;for(let t=0,e=i.length;t<e;++t){let e;e=n?c(n*this.resolution,g,r,i[t],_):[g.slice(r,i[t])];for(let n=0,h=e.length;n<h;++n){const h=e[n];let c=0,d=h.length;if(null==s){const t=u(o.maxAngle,h,0,h.length,2);c=t[0],d=t[1]}for(let t=c;t<d;t+=_)a.push(h[t],h[t+1]);const g=a.length;r=i[t],this.drawChars_(l,g),l=g}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||r.MY,justify:e.justify,textBaseline:e.textBaseline||r.M8,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,r=this.textKey_,a=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,l=d[n.textBaseline],c=this.textOffsetY_*h,u=this.text_,g=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([s.Ay.DRAW_CHARS,t,e,l,n.overflow,a,n.maxAngle,h,c,o,g*h,u,r,1]),this.hitDetectionInstructions.push([s.Ay.DRAW_CHARS,t,e,l,n.overflow,a,n.maxAngle,1,c,o,g,u,r,1/h])}setTextStyle(t,e){let i,n,s;if(t){const e=t.getFill();e?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=(0,o.F)(e.getColor()||r.qY)):(n=null,this.textFillState_=n);const h=t.getStroke();if(h){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const t=h.getLineDash(),e=h.getLineDashOffset(),i=h.getWidth(),n=h.getMiterLimit();s.lineCap=h.getLineCap()||r._m,s.lineDash=t?t.slice():r.Oq,s.lineDashOffset=void 0===e?r.vk:e,s.lineJoin=h.getLineJoin()||r._K,s.lineWidth=void 0===i?r.aq:i,s.miterLimit=void 0===n?r.eL:n,s.strokeStyle=(0,o.F)(h.getColor()||r.NT)}else s=null,this.textStrokeState_=s;i=this.textState_;const l=t.getFont()||r.ZV;(0,r.fZ)(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||r.M8,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||r.Tq,i.scale=void 0===c?[1,1]:c;const u=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===_?0:_,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:(0,a.v6)(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+(0,a.v6)(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}const _=g},613663:(t,e,i)=>{"use strict";i.d(e,{F8:()=>u,_7:()=>c,tF:()=>l});var n=i(702236),s=i(55394),o=i(166514),r=i(61597),a=i(568711),h=i(570915);const l=.5;function c(t,e,i,r,c,u,d){const g=t[0]*l,_=t[1]*l,f=(0,a.Y)(g,_);f.imageSmoothingEnabled=!1;const p=f.canvas,m=new n.A(f,l,c,null,d),x=i.length,y=Math.floor(16777215/x),R={};for(let t=1;t<=x;++t){const e=i[t-1],n=e.getStyleFunction()||r;if(!r)continue;let o=n(e,u);if(!o)continue;Array.isArray(o)||(o=[o]);const l=(t*y).toString(16).padStart(7,"#00000");for(let t=0,i=o.length;t<i;++t){const i=o[t],n=i.getGeometryFunction()(e);if(!n||!(0,h.HY)(c,n.getExtent()))continue;const r=i.clone(),u=r.getFill();u&&u.setColor(l);const d=r.getStroke();d&&(d.setColor(l),d.setLineDash(null)),r.setText(void 0);const g=i.getImage();if(g&&0!==g.getOpacity()){const t=g.getImageSize();if(!t)continue;const e=(0,a.Y)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=l,e.fillRect(0,0,i.width,i.height),r.setImage(new s.A({img:i,imgSize:t,anchor:g.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:g.getOrigin(),opacity:1,size:g.getSize(),scale:g.getScale(),rotation:g.getRotation(),rotateWithView:g.getRotateWithView()}))}const _=r.getZIndex()||0;let f=R[_];f||(f={},R[_]=f,f.Polygon=[],f.Circle=[],f.LineString=[],f.Point=[]);const p=n.getType();if("GeometryCollection"===p){const t=n.getGeometriesArrayRecursive();for(let e=0,i=t.length;e<i;++e){const i=t[e];f[i.getType().replace("Multi","")].push(i,r)}}else f[p.replace("Multi","")].push(n,r)}}const v=Object.keys(R).map(Number).sort(o.V_);for(let t=0,i=v.length;t<i;++t){const i=R[v[t]];for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t+=2){m.setStyle(n[t+1]);for(let i=0,s=e.length;i<s;++i)m.setTransform(e[i]),m.drawGeometry(n[t])}}}return f.getImageData(0,0,p.width,p.height)}function u(t,e,i){const n=[];if(i){const s=Math.floor(Math.round(t[0])*l),o=Math.floor(Math.round(t[1])*l),a=4*((0,r.qE)(s,0,i.width-1)+(0,r.qE)(o,0,i.height-1)*i.width),h=i.data[a],c=i.data[a+1],u=i.data[a+2]+256*(c+256*h),d=Math.floor(16777215/e.length);u&&u%d===0&&n.push(e[u/d-1])}return n}},5986:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var n=i(506837),s=i(706141),o=i(111854),r=i(104087);class a extends o.A{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,r.b0)()}getData(t){return null}prepareFrame(t){return(0,r.b0)()}renderFrame(t,e){return(0,r.b0)()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(n,s)=>{const o=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,s,o)}}forEachFeatureAtCoordinate(t,e,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===s.A.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=s.A.LOADED&&e!=s.A.ERROR&&t.addEventListener(n.A.CHANGE,this.boundHandleImageChange_),e==s.A.IDLE&&(t.load(),e=t.getState()),e==s.A.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const h=a},996769:(t,e,i)=>{"use strict";i.d(e,{A:()=>_,B:()=>u});var n=i(5986),s=i(809960),o=i(883984),r=i(609703),a=i(789352),h=i(568711),l=i(166514),c=i(570915);const u=[];let d=null;class g extends n.A{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,r.vt)(),this.pixelTransform=(0,r.vt)(),this.inversePixelTransform=(0,r.vt)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let n;d||(d=(0,h.Y)(1,1,void 0,{willReadFrequently:!0})),d.clearRect(0,0,1,1);try{d.drawImage(t,e,i,1,1,0,0,1,1),n=d.getImageData(0,0,1,1).data}catch(t){return d=null,null}return n}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let s,o;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&(0,l.aI)((0,a._j)(t.style.backgroundColor),(0,a._j)(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=n;let t=s.style;t.position="absolute",t.width="100%",t.height="100%",o=(0,h.Y)();const e=o.canvas;s.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=s,this.context=o}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=(0,c.Py)(i),s=(0,c.WU)(i),o=(0,c.k_)(i),a=(0,c.R)(i);(0,r.Bb)(e.coordinateToPixelTransform,n),(0,r.Bb)(e.coordinateToPixelTransform,s),(0,r.Bb)(e.coordinateToPixelTransform,o),(0,r.Bb)(e.coordinateToPixelTransform,a);const h=this.inversePixelTransform;(0,r.Bb)(h,n),(0,r.Bb)(h,s),(0,r.Bb)(h,o),(0,r.Bb)(h,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const o=new s.A(t,this.inversePixelTransform,i,e);n.dispatchEvent(o)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(o.A.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(o.A.POSTRENDER,t,e)}getRenderTransform(t,e,i,n,s,o,a){const h=s/2,l=o/2,c=n/e,u=-c,d=-t[0]+a,g=-t[1];return(0,r.Zz)(this.tempTransform,h,l,c,u,-i,d,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const _=g},16444:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(234120),s=i(385733);class o extends n.A{constructor(t){super(),this.projection=(0,s.Jt)(t.projection),this.attributions_=r(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(t,i){e.viewResolver=t,e.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=r(t),this.changed()}setState(t){this.state_=t,this.changed()}}function r(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const a=o},754602:(t,e,i)=>{"use strict";i.d(e,{A:()=>A});var n=i(650071),s=i(332135),o=i(301685),r=i(506837),a=i(228450),h=i(495902),l=i(16444),c=i(88280),u=i(374238),d=i(260942),g=i(190588),_=i(570915),f=i(166514),p=i(104087),m=i(643530),x=i(209438),y=i(21142);class R extends o.Ay{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class v extends l.A{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=u.tV,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,g.v)(this.format_,7),this.loader_=(0,y.nF)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:d.Q7;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,s;this.featuresRtree_=e?new h.A:null,this.loadedExtentsRtree_=new h.A,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),e||void 0!==i||(i=new n.A(s)),void 0!==s&&this.addFeaturesInternal(s),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,p.v6)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new R(c.A.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[(0,x.KT)(e,r.A.CHANGE,this.handleFeatureChange_,this),(0,x.KT)(e,a.A.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&((0,g.v)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[];for(let e=0,n=t.length;e<n;e++){const n=t[e],s=(0,p.v6)(n);this.addToIndex_(s,n)&&i.push(n)}for(let t=0,s=i.length;t<s;t++){const s=i[t],o=(0,p.v6)(s);this.setupChangeEvents_(o,s);const r=s.getGeometry();if(r){const t=r.getExtent();e.push(t),n.push(s)}else this.nullGeometryFeatures_[o]=s}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(c.A.ADDFEATURE))for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new R(c.A.ADDFEATURE,i[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(c.A.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(c.A.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(s.A.ADD,t=>{e||(e=!0,this.addFeature(t.element),e=!1)}),t.addEventListener(s.A.REMOVE,t=>{e||(e=!0,this.removeFeature(t.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(x.JH);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new R(c.A.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){if(i.getGeometry().intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const t=e(i);if(t)return t}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,m.p)(this.nullGeometryFeatures_)||(0,f.X$)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=(0,_.QJ)(t,e);return[].concat(...i.map(t=>this.featuresRtree_.getInExtent(t)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1];let s=null;const o=[NaN,NaN];let r=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||u.rT,this.featuresRtree_.forEachInExtent(a,function(t){if(e(t)){const e=t.getGeometry(),h=r;if(r=e.closestPointXY(i,n,o,r),r<h){s=t;const e=Math.sqrt(r);a[0]=i-e,a[1]=n-e,a[2]=i+e,a[3]=n+e}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=(0,p.v6)(e),n=e.getGeometry();if(n){const t=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const s=e.getId();if(void 0!==s){const t=s.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new R(c.A.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:(0,p.v6)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,m.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,s=this.strategy_(t,e,i);for(let t=0,o=s.length;t<o;++t){const o=s[t];n.forEachInExtent(o,function(t){return(0,_.ms)(t.extent,o)})||(++this.loadingExtentsCount_,this.dispatchEvent(new R(c.A.FEATURESLOADSTART)),this.loader_.call(this,o,e,i,t=>{--this.loadingExtentsCount_,this.dispatchEvent(new R(c.A.FEATURESLOADEND,void 0,t))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new R(c.A.FEATURESLOADERROR))}),n.insert(o,{extent:o.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(e){if((0,_.aI)(e.extent,t))return i=e,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=(0,p.v6)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=(0,p.v6)(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(x.JH),delete this.featureChangeKeys_[e];const n=t.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new R(c.A.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){(0,g.v)(this.format_,7),this.url_=t,this.setLoader((0,y.nF)(t,this.format_))}}const A=v},88280:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});const n={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},495902:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(718260),s=i(570915),o=i(104087),r=i(643530);const a=class{constructor(t){this.rbush_=new n(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,o.v6)(e)]=i}load(t,e){const i=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const s=t[n],r=e[n],a={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:r};i[n]=a,this.items_[(0,o.v6)(r)]=a}this.rbush_.load(i)}remove(t){const e=(0,o.v6)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[(0,o.v6)(e)],n=[i.minX,i.minY,i.maxX,i.maxY];(0,s.aI)(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,s=t.length;n<s;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return(0,r.p)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,s.N)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}},657115:(t,e,i)=>{"use strict";i.d(e,{L:()=>n,R:()=>s});const n=42,s=256}}]);