(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[52066],{433528:(e,t,r)=>{"use strict";r.d(t,{gJ:()=>n,Oj:()=>o,jp:()=>i,CM:()=>a,DU:()=>u,aO:()=>c,v6:()=>l,K8:()=>s,IN:()=>f,zh:()=>p,AH:()=>d,Ub:()=>y,_9:()=>b,JB:()=>v,oh:()=>m,AY:()=>O,yi:()=>g,SW:()=>E,Hk:()=>h,iQ:()=>S,dY:()=>R,$:()=>w,_u:()=>T,gG:()=>x,DI:()=>A,dZ:()=>P,qw:()=>j,f$:()=>I,bZ:()=>D,$O:()=>C,sF:()=>U,Gk:()=>M,vO:()=>_,ut:()=>F,MK:()=>L,VV:()=>G,B8:()=>N,VM:()=>W,a3:()=>B,Xp:()=>V,DA:()=>k,sK:()=>Y,yA:()=>Z,r:()=>H,iB:()=>$,WB:()=>q,EH:()=>z,Yd:()=>J,Hg:()=>K,Lz:()=>X,ye:()=>Q,Jb:()=>ee,d:()=>te,fT:()=>re,Ib:()=>ne,Pl:()=>oe,UB:()=>ie,Uh:()=>ae,QT:()=>ue,oL:()=>ce,Ap:()=>le,KD:()=>se,Z_:()=>fe,Vw:()=>pe,sY:()=>de,kA:()=>ye,gr:()=>be,pX:()=>ve,F5:()=>me,MO:()=>Oe,dq:()=>ge,DY:()=>Ee,oO:()=>he,uF:()=>Se,a8:()=>Re,Pv:()=>we,an:()=>Te,lg:()=>xe,nY:()=>Ae,nG:()=>Pe,lx:()=>je,$S:()=>Ie,gc:()=>De,Uz:()=>Ce,fO:()=>Ue,$E:()=>Me,cE:()=>_e,JK:()=>Fe,YV:()=>Le,t9:()=>Ge,YG:()=>Ne,HT:()=>We,MY:()=>Be,ve:()=>Ve,hB:()=>ke,Ox:()=>Ye,zd:()=>Ze,aT:()=>He,VH:()=>$e,Yb:()=>qe,Jr:()=>ze,pP:()=>Je,gL:()=>Ke});var n="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",i="FEATUREGRID:DESELECT_FEATURES",a="FEATUREGRID:CLEAR_SELECTION",u="FEATUREGRID:SET_SELECTION_OPTIONS",c="FEATUREGRID:TOGGLE_MODE",l="FEATUREGRID:TOGGLE_FEATURES_SELECTION",s="FEATUREGRID:FEATURES_MODIFIED",f="FEATUREGRID:NEW_FEATURE",p="FEATUREGRID:SAVE_CHANGES",d="FEATUREGRID:SAVING",y="FEATUREGRID:START_EDITING_FEATURE",b="FEATUREGRID:START_DRAWING_FEATURE",v="FEATUREGRID:DELETE_GEOMETRY",m="FEATUREGRID:DELETE_GEOMETRY_FEATURE",O="FEATUREGRID:SAVE_SUCCESS",g="FEATUREGRID:CLEAR_CHANGES",E="FEATUREGRID:SAVE_ERROR",h="FEATUREGRID:DELETE_SELECTED_FEATURES",S="SET_FEATURES",R="FEATUREGRID:SORT_BY",w="FEATUREGRID:SET_LAYER",T="QUERY:UPDATE_FILTER",x="FEATUREGRID:CHANGE_PAGE",A="FEATUREGRID:GEOMETRY_CHANGED",P="DOCK_SIZE_FEATURES",j="FEATUREGRID:TOGGLE_TOOL",I="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",D="ASK_CLOSE_FEATURE_GRID_CONFIRM",C="FEATUREGRID:OPEN_GRID",U="FEATUREGRID:CLOSE_GRID",M="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",_="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",F="FEATUREGRID:SET_PERMISSION",L="FEATUREGRID:DISABLE_TOOLBAR",G="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",N="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",W="FEATUREGRID:ADVANCED_SEARCH",B="FEATUREGRID:ZOOM_ALL",V="FEATUREGRID:INIT_PLUGIN",k="FEATUREGRID:SIZE_CHANGE",Y="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",Z="FEATUREGRID:HIDE_SYNC_POPOVER",H="FEATUREGRID:UPDATE_EDITORS_OPTIONS",$="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",q="FEATUREGRID:SET_SYNC_TOOL",z={EDIT:"EDIT",VIEW:"VIEW"},J="FEATUREGRID:START_SYNC_WMS",K="FEATUREGRID:STOP_SYNC_WMS",X="STORE_ADVANCED_SEARCH_FILTER",Q="LOAD_MORE_FEATURES",ee="FEATUREGRID:QUERY_RESULT",te="FEATUREGRID:SET_TIME_SYNC",re="FEATUREGRID:SET_PAGINATION";function ne(){return{type:Y}}function oe(){return{type:Z}}function ie(e,t){return{type:ee,features:e,pages:t}}function ae(e){return{type:X,filterObj:e}}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:V,options:e}}function ce(){return{type:M}}function le(){return{type:_}}function se(e,t){return{type:o,features:e,append:t}}function fe(e){return{type:n,options:e}}function pe(e){return{type:A,features:e}}function de(){return{type:y}}function ye(){return{type:b}}function be(e){return{type:i,features:e}}function ve(){return{type:v}}function me(e){return{type:m,features:e}}function Oe(){return{type:a}}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,r=e.showCheckbox;return{type:u,multiselect:t,showCheckbox:r}}function Ee(e,t){return{type:R,sortBy:e,sortOrder:t}}function he(e,t){return{type:x,page:e,size:t}}function Se(e){return{type:w,id:e}}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:T,update:e,append:t}}function we(e,t){return{type:j,tool:e,value:t}}function Te(e,t,r){return{type:I,name:e,key:t,value:r}}function xe(){return{type:c,mode:z.EDIT}}function Ae(){return{type:c,mode:z.VIEW}}function Pe(e,t){return{type:s,features:e,updated:t}}function je(e){return{type:f,features:e}}function Ie(){return{type:p}}function De(){return{type:O}}function Ce(){return{type:h}}function Ue(){return{type:d}}function Me(){return{type:g}}function _e(){return{type:E}}function Fe(){return{type:D}}function Le(){return{type:U}}function Ge(){return{type:C}}function Ne(e){return{type:L,disabled:e}}function We(e){return{type:F,permission:e}}function Be(){return{type:W}}function Ve(){return{type:B}}function ke(){return{type:J}}function Ye(e,t){return{type:k,size:e,dockProps:t}}var Ze=function(e){return{type:Q,pages:e}},He=function(e){return{type:G,activated:e}},$e=function(e){return{type:N,deactivated:e}},qe=function(e){return{type:te,value:e}},ze=function(e){return{type:re,size:e}},Je=function(e){return{type:$,updateFilterAction:e}},Ke=function(e){return{type:q,syncWmsFilter:e}}},801550:(e,t,r)=>{"use strict";r.d(t,{pP:()=>n,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>u,Qy:()=>c,IL:()=>l,Li:()=>s,OW:()=>f,ZO:()=>p,Um:()=>d,TF:()=>y,Ls:()=>b,Ec:()=>v,Eu:()=>m,JJ:()=>O,nZ:()=>g,YD:()=>E,GI:()=>h,Jb:()=>S,Uh:()=>R,e$:()=>w,eh:()=>T,$j:()=>x,Mk:()=>A,xy:()=>P,o6:()=>j,FP:()=>I,Mo:()=>D,sO:()=>C,Px:()=>U,hd:()=>M,Ju:()=>_,BV:()=>F,SO:()=>L,H0:()=>G,$X:()=>N,ou:()=>W,NE:()=>B});var n="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",u="PAN_TO",c="ZOOM_TO_EXTENT",l="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",f="CHANGE_MAP_SCALES",p="CHANGE_MAP_STYLE",d="CHANGE_ROTATION",y="CREATION_ERROR_LAYER",b="UPDATE_VERSION",v="INIT_MAP",m="RESIZE_MAP",O="CHANGE_MAP_LIMITS",g="SET_MAP_RESOLUTIONS",E="REGISTER_EVENT_LISTENER",h="UNREGISTER_EVENT_LISTENER",S="MOUSE_MOVE",R="MOUSE_OUT",w="MAP:MAP_PLUGIN_LOAD",T="MAP:ORIENTATION",x="MAP:UPDATE_MAP_VIEW";function A(e,t,r,n){return{type:w,mapType:t,loading:e,loaded:r,error:n}}function P(e,t,r){return{type:l,pos:e,zoom:t,crs:r}}function j(e,t,r,o,i,a,u,c){return{type:n,center:e,zoom:t,bbox:r,size:o,mapStateSource:i,projection:a,viewerOptions:u,resolution:c}}function I(e,t){return{type:o,point:e,layer:t}}function D(e){return{type:i,pointer:e}}function C(e,t){return{type:a,zoom:e,mapStateSource:t}}function U(e,t,r,n){return{type:c,extent:e,crs:t,maxZoom:r,options:n}}function M(e,t){return{type:p,style:e,mapStateSource:t}}function _(){return{type:m}}function F(e){var t=e.restrictedExtent,r=e.crs,n=e.minZoom;return{type:O,restrictedExtent:t,crs:r,minZoom:n}}function L(e){return{type:g,resolutions:e}}var G=function(e,t){return{type:E,eventName:e,toolName:t}},N=function(e,t){return{type:h,eventName:e,toolName:t}},W=function(e){return{type:S,position:e}},B=function(){return{type:R}}},658918:(e,t,r)=>{"use strict";r.d(t,{F:()=>p});var n=r(375875),o=r.n(n),i=r(986267),a=r(552259);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){return o().get(e).then((function(e){var t,n=e.data;return(t=n,r.e(76180).then(r.bind(r,376180)).then((function(e){var r,n,o,u,l=e,f=void 0!==(null==t||null===(r=t.asset)||void 0===r?void 0:r.version)?t.asset.version:"1.0",p=function(e,t){var r,n,o,u,c,l;if(null!=t&&null!==(r=t.root)&&void 0!==r&&null!==(n=r.boundingVolume)&&void 0!==n&&n.region){var f=s(t.root.boundingVolume.region,4),p=f[0],d=f[1],y=f[2],b=f[3];return{bounds:{minx:(0,i.convertRadianToDegrees)(p),miny:(0,i.convertRadianToDegrees)(d),maxx:(0,i.convertRadianToDegrees)(y),maxy:(0,i.convertRadianToDegrees)(b)},crs:"EPSG:4326"}}var v=e.Matrix4.fromArray(t.root.transform||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(null!=t&&null!==(o=t.root)&&void 0!==o&&null!==(u=o.boundingVolume)&&void 0!==u&&u.box){var m=s(t.root.boundingVolume.box,3),O=m[0],g=m[1],E=m[2],h=e.Matrix4.multiplyByPoint(v,new e.Cartesian3(O,g,E),new e.Cartesian3),S=e.Matrix4.getMatrix3(v,new e.Matrix4),R=e.Matrix3.multiply(S,e.Matrix3.fromArray(t.root.boundingVolume.box,3,new e.Matrix3),new e.Matrix3),w=e.BoundingSphere.fromOrientedBoundingBox(new e.OrientedBoundingBox(h,R)),T=e.Cartographic.fromCartesian(w.center);if(!T)return null;var x=(0,i.convertRadianToDegrees)(T.longitude),A=(0,i.convertRadianToDegrees)(T.latitude),P=w.radius/a.METERS_PER_UNIT.degrees;return{bounds:{minx:x-P,miny:A-P,maxx:x+P,maxy:A+P},crs:"EPSG:4326"}}if(null!=t&&null!==(c=t.root)&&void 0!==c&&null!==(l=c.boundingVolume)&&void 0!==l&&l.sphere){var j=s(t.root.boundingVolume.sphere,4),I=j[0],D=j[1],C=j[2],U=j[3],M=e.Matrix4.multiplyByPoint(v,new e.Cartesian3(I,D,C),new e.Cartesian3),_=e.Matrix4.getScale(v,new e.Matrix4),F=U*e.Cartesian3.maximumComponent(_)/a.METERS_PER_UNIT.degrees,L=e.Cartographic.fromCartesian(M);if(!L)return null;var G=(0,i.convertRadianToDegrees)(L.longitude),N=(0,i.convertRadianToDegrees)(L.latitude);return{bounds:{minx:G-F,miny:N-F,maxx:G+F,maxy:N+F},crs:"EPSG:4326"}}return null}(l,t),d=(u=((null==t||null===(n=t.root)||void 0===n||null===(o=n.content)||void 0===o?void 0:o.uri)||"").split(/\./g))[u.length-1],y=null==t?void 0:t.properties;return c(c({version:f},p&&{bbox:p}),{},{format:d,properties:y})}))).then((function(e){return c({tileset:n},e)}))}))}},823208:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Jt});var n={};r.r(n),r.d(n,{getCatalogRecords:()=>ie,getLayerFromRecord:()=>ae,preprocess:()=>te,testService:()=>ne,textSearch:()=>oe,validate:()=>re});var o={};r.r(o),r.d(o,{getCatalogRecords:()=>Oe,getLayerFromRecord:()=>ge,preprocess:()=>ye,testService:()=>ve,textSearch:()=>me,validate:()=>be});var i={};r.r(i),r.d(i,{getCatalogRecords:()=>Me,getLayerFromRecord:()=>_e,preprocess:()=>De,testService:()=>Ue,textSearch:()=>Ie,validate:()=>Ce});var a={};r.r(a),r.d(a,{getCatalogRecords:()=>st,getLayerFromRecord:()=>dt,getRecords:()=>at,testService:()=>lt,textSearch:()=>ut,tileProviderToLayer:()=>pt,tmsToLayer:()=>ft,validate:()=>ct});var u={};r.r(u),r.d(u,{getCatalogRecords:()=>At,getLayerFromRecord:()=>Pt,getRecords:()=>St,preprocess:()=>Rt,testService:()=>Tt,textSearch:()=>xt,validate:()=>wt});var c={};r.r(c),r.d(c,{getCatalogRecords:()=>Ft,getLayerFromRecord:()=>Lt,preprocess:()=>Ut,testService:()=>_t,textSearch:()=>Ct,validate:()=>Mt});var l={};r.r(l),r.d(l,{getCatalogRecords:()=>$t,getLayerFromRecord:()=>qt,preprocess:()=>Yt,testService:()=>Zt,textSearch:()=>Ht,validate:()=>zt});var s=r(91175),f=r.n(s),p=r(747037),d=r.n(p),y=r(264721),b=r.n(y),v=r(984596),m=r.n(v),O=r(189734),g=r.n(O),E=r(944908),h=r.n(E),S=r(701469),R=r.n(S),w=r(763105),T=r.n(w),x=r(441609),A=r.n(x),P=r(414293),j=r.n(P),I=r(727418),D=r.n(I),C=r(552259),U=r(49977),M=r.n(U),_=r(737275),F=r(624262),L=r(576712),G=r(501157),N=r(375875),W=r.n(N);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function V(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){var t="function"==typeof Map?new Map:void 0;return k=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Y(e,arguments,$(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),H(n,e)},k(e)}function Y(e,t,r){return Y=Z()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&H(o,r.prototype),o},Y.apply(null,arguments)}function Z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(i,e);var t,r,n,o=(t=i,r=Z(),function(){var e,n=$(t);if(r){var o=$(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return V(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e)).name="ServiceValidationError",r.notification=t,r}return n=i,Object.defineProperty(n,"prototype",{writable:!1}),n}(k(Error)),z=function(e){return M().Observable.of(e)},J=function(e){return""===e.title||""===e.url?M().Observable.throw(new q("Validation Error","catalog.notification.warningAddCatalogService")):M().Observable.of(e)},K=function(e){var t=e.parseUrl,r=void 0===t?function(e){return e}:t;return function(e){var t="catalog.notification.errorServiceUrl";return M().Observable.defer((function(){return W().get(r(e.url))})).catch((function(){throw new q("Service Test error",t)})).switchMap((function(r){if(r.error||""===r.data)throw new q("Service Test error",t);return M().Observable.of(e)}))}};function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var te=function(e){var t=e.domainAliases;return e.domainAliases=T()(t),U.Observable.of(e)},re=J,ne=K({parseUrl:G.en}),oe=G.tt,ie=function(e,t){return e&&e.records?e.records.map((function(r){var n=[{type:"OGC:WMS",url:t&&t.url,SRS:r.SRS&&(R()(r.SRS)?r.SRS:[r.SRS])||[],params:{name:r.Name}}],o=(0,L.tW)({references:n}).wms;return{serviceType:"wms",isValid:!!o,capabilities:r,credits:r.credits,boundingBox:(0,G.jY)(r),description:r.Abstract||r.Title||r.Name,identifier:r.Name,service:e.service,tags:"",layerOptions:Q(Q({},(null==t?void 0:t.layerOptions)||{}),(null==e?void 0:e.layerOptions)||{}),title:(0,F.EM)(r)||r.Name,formats:m()(r.formats||[]),dimensions:(r.Dimension&&m()(r.Dimension)||[]).map((function(e){return D()({},{values:e._&&e._.split(",")||[]},e.$||{})})).filter((function(e){return e&&"time"!==e.name})),references:n,ogcReferences:o}})):null},ae=function(e,t,r){var n=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.removeParams,o=void 0===n?[]:n,i=r.format,a=r.catalogURL,u=r.url,c=r.formats,l=void 0===c?{}:c,s=r.map,f=void 0===s?{}:s,p=r.layerBaseConfig,d=r.localizedLayerStyles;if(!e||!e.references)return null;var y,b,v=(0,L.tW)(e).wms,m=function(e){return(0,L.em)((0,_.$F)(e),["request","layer","layers","service","version"].concat(o))},O=(0,L.qy)(v.url);if(O&&R()(O))y=O.map((function(e){return m(e)})).map((function(e){return e.url})),b=O.map((function(e){return m(e)})).map((function(e){return e.params})).reduce((function(e,t){return Q(Q({},e),t)}),{});else{var g=m(O||a);y=g.url,b=g.params}var E,h=(E=u||y,R()(E)&&1===E.length?E[0]:E),S=(0,L.n0)(v.SRS),w=null!==(t=null==e?void 0:e.capabilities)&&void 0!==t?t:{},T=w.MaxScaleDenominator,x=w.MinScaleDenominator,P=Q(Q(Q({type:"wms",requestEncoding:e.requestEncoding,style:e.style,format:i,url:h,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:v.params&&v.params.name,title:e.title||v.params&&v.params.name,description:e.description||"",credits:!(0,_.u8)("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:(0,L.F8)(e),params:b,allowedSRS:S,catalogURL:a},p),e.layerOptions),{},{localizedLayerStyles:j()(d)?void 0:d});if(A()(l)||(P=Q(Q({},P),{},{imageFormats:l.imageFormats,infoFormats:l.infoFormats})),!A()(f)&&(T||x)){var I=(!j()(x)&&(0,C.getResolutionObject)(x,"scale",f)||{}).resolution,D=(!j()(T)&&(0,C.getResolutionObject)(T,"scale",f)||{}).resolution;P=Q(Q({},P),{},{minResolution:I,maxResolution:D})}return P}(e,t);return r?Promise.resolve(n):n},ue=r(86638),ce=r(659551);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe=function(e,t,r){var n,o,i,a=r.name;if(void 0===a){a=e.title?e.title.join(" "):(0,ue.S$)(t,"catalog.notAvailable");var u=(n=r.protocol,r.value,null!==(o=null===(i=f()([{protocol:"https://registry.geodati.gov.it/metadata-codelist/ProtocolValue/www-download",displayValue:"Download"},{protocol:"http://www.opengis.net/def/serviceType/ogc/wms",displayValue:"WMS"},{protocol:"http://www.opengis.net/def/serviceType/ogc/wfs",displayValue:"WFS"}].filter((function(e){return e.protocol===n}))))||void 0===i?void 0:i.displayValue)&&void 0!==o?o:"Link");a="".concat(u?"".concat(a," - ").concat(u):a)}return'<li><a target="_blank" href="'.concat(r.value,'">').concat(a,"</a></li>")};function de(e,t){var r,n,o=(null==e?void 0:e.URI)&&m()(e.URI);if(o){var i=f()(o.filter((function(e){return"thumbnail"===e.name})))||f()(o.filter((function(e){var t;return!e.name&&(null===(t=e.protocol)||void 0===t?void 0:t.indexOf("image/"))>-1})));r=i?i.value:null}if(!r&&e&&e.references){var a=function(e){return f()(m()(e.references).filter((function(t){return"WWW:LINK-1.0-http--image-thumbnail"===t.scheme||"thumbnail"===t.scheme||"WWW:DOWNLOAD-1.0-http--download"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))||"WWW:DOWNLOAD-REST_MAP"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))})))}(e);a&&(r=a.value)}return r&&(0===r.indexOf("http")||(r=((n=t&&t.url)&&n.replace(/\/csw$/,"/")||"")+r)),r}var ye=z,be=J,ve=K({parseUrl:ce.ZP.parseUrl}),me=ce.ZP.textSearch,Oe=function(e,t,r){var n=e;return n&&n.records?n.records.map((function(e){var n=e.dc,o=[];n&&n.references&&(Array.isArray(n.references)?n.references:[n.references]).filter((function(e){return e.scheme.indexOf("http-get-capabilities")>-1})).forEach((function(e){var r=0===e.value.indexOf("http")?e.value:(t&&t.catalogURL||"")+"/"+e.value;o.push({type:e.scheme,url:r})}));var i=(0,ce.kv)(n,t);i&&o.push(i);var a={boundingBox:e.boundingBox&&e.boundingBox.extent&&m()(e.boundingBox.extent.join(","))};if(n&&(a=se(se({},a),g()(Object.keys(n)).reduce((function(e,t){return se(se({},e),{},fe({},t,h()(m()(n[t]))))}),{}))),n&&n.URI&&m()(n.URI)&&m()(n.URI).length&&(a=se(se({},a),{},{uri:["<ul>"+m()(n.URI).map(pe.bind(void 0,a,r)).join("")+"</ul>"]})),n&&n.subject&&m()(n.subject)&&m()(n.subject).length&&(a=se(se({},a),{},{subject:["<ul>"+m()(n.subject).map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})),o&&m()(o).length?a=se(se({},a),{},{references:["<ul>"+m()(o).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.params&&e.params.name||e.url,"</a></li>")})).join("")+"</ul>"]}):delete a.references,n&&n.temporal){var u=d()(n.temporal)?n.temporal.split("; "):[];if(u.length){var c=u.filter((function(e){return-1!==e.indexOf("scheme=")})).map((function(e){var t=e.indexOf("=");return e.substr(t+1,e.length-1)}));c=c.length?c[0]:"W3C-DTF";var l=u.filter((function(e){return-1!==e.indexOf("start=")||-1!==e.indexOf("end=")})).map((function(e){var t=e.indexOf("="),n=e.substr(0,t),o=e.substr(t+1,e.length-1),i=e.length-t-1<=10;return b()(["start","end"],n)&&"W3C-DTF"===c&&!i?(0,ue.S$)(r,"catalog.".concat(n))+new Date(o).toLocaleString():b()(["start","end"],n)?(0,ue.S$)(r,"catalog.".concat(n))+o:""}));a=se(se({},a),{},{temporal:["<ul>"+l.map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})}}var s=se(se({},(0,L.tW)({references:o})),(0,L.FJ)({references:o})),f=Object.keys(s).find((function(e){return s[e]})),p=f&&"esri"!==f?s[f]:void 0;return{serviceType:"csw",layerType:f,isValid:!!f,boundingBox:e.boundingBox,description:n&&d()(n.abstract)&&n.abstract||"",layerOptions:t&&t.layerOptions||{},identifier:n&&d()(n.identifier)&&n.identifier||"",references:o,thumbnail:de(n,t),title:n&&d()(n.title)&&n.title||"",tags:n&&n.tags||"",metadata:a,capabilities:e.capabilities,ogcReferences:p}})):null},ge=function(e,t,r){var n=function(e,t){switch(e.layerType){case"wms":return ae(e,t);case"esri":return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layerBaseConfig,r=void 0===t?{}:t;if(!e||!e.references)return null;var n=(0,L.FJ)(e).esri;return se({type:n.type,url:n.url,visibility:!0,dimensions:e.dimensions||[],name:n.params&&n.params.name,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}}},r)}(e,t);default:return null}}(e,t);return r?Promise.resolve(n):n},Ee=r(513218),he=r.n(Ee),Se=r(986267),Re=r(707294),we=r(603475);function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pe=function(e){return he()(e)&&e._||e},je=function(e,t){return e.filter((function(r){return(0,Re.C2)(t,r,e,t,null)}))},Ie=we.Z.textSearch,De=z,Ce=J,Ue=K({parseUrl:we.Z.parseUrl}),Me=function(e,t){return e&&e.records?e.records.map((function(e){var r=m()((0,Re.f1)(e)||t&&t.url);1===r.length&&(r=r[0]);var n=(0,Re.dN)(e),o=m()(e.TileMatrixSetLink||[]).reduce((function(t,r){var n,o=f()((e.TileMatrixSet&&m()(e.TileMatrixSet)||[]).filter((function(e){return e["ows:Identifier"]===r.TileMatrixSet}))),i=o&&(0,Se.getEPSGCode)(o["ows:SupportedCRS"]),a=r.TileMatrixSetLimits&&(r.TileMatrixSetLimits.TileMatrixLimits||[]).map((function(e){return{identifier:e.TileMatrix,ranges:{cols:{min:e.MinTileCol,max:e.MaxTileCol},rows:{min:e.MinTileRow,max:e.MaxTileRow}}}}))||o.TileMatrix.map((function(e){return{identifier:e["ows:Identifier"]}}));return D()(t,(Ae(n={},o["ows:Identifier"],a),Ae(n,i,a),n))}),{}),i=function(e){var t=e["ows:WGS84BoundingBox"];return t||(t={"ows:LowerCorner":"-180.0 -90.0","ows:UpperCorner":"180.0 90.0"}),t}(e),a=[{type:"OGC:WMTS",url:r,SRS:je(e.SRS||[],o),params:{name:e["ows:Identifier"]}}],u=(0,L.tW)({references:a}).wmts;return{serviceType:"wmts",isValid:!!u,title:Pe(e["ows:Title"]||e["ows:Identifier"]),description:Pe(e["ows:Abstract"]||e["ows:Title"]||e["ows:Identifier"]),identifier:Pe(e["ows:Identifier"]),tags:"",layerOptions:t&&t.layerOptions||{},style:e.style,capabilitiesURL:n,queryable:e.queryable,requestEncoding:e.requestEncoding,tileMatrixSet:e.TileMatrixSet,matrixIds:o,format:e.format,TileMatrixSetLink:m()(e.TileMatrixSetLink),boundingBox:{extent:[i["ows:LowerCorner"].split(" ")[0],i["ows:LowerCorner"].split(" ")[1],i["ows:UpperCorner"].split(" ")[0],i["ows:UpperCorner"].split(" ")[1]],crs:"EPSG:4326"},references:a,ogcReferences:u}})):null},_e=function(e,t,r){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.removeParams,n=void 0===r?[]:r,o=t.format,i=t.catalogURL,a=t.url,u=t.layerBaseConfig,c=t.localizedLayerStyles;if(!e||!e.references)return null;var l,s,f=(0,L.tW)(e).wmts,p=function(e){return(0,L.em)((0,_.$F)(e),["request","layer","layers","service","version"].concat(n))},d=(0,L.qy)(f.url);if(d&&R()(d))l=d.map((function(e){return p(e)})).map((function(e){return e.url})),s=d.map((function(e){return p(e)})).map((function(e){return e.params})).reduce((function(e,t){return xe(xe({},e),t)}),{});else{var y=p(d||i);l=y.url,s=y.params}var b,v=(b=a||l,R()(b)&&1===b.length?b[0]:b),m=(0,L.n0)(f.SRS);return xe(xe(xe({type:"wmts",requestEncoding:e.requestEncoding,style:e.style,format:o,url:v,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:f.params&&f.params.name,title:e.title||f.params&&f.params.name,matrixIds:e.matrixIds||[],description:e.description||"",tileMatrixSet:e.tileMatrixSet||[],credits:!(0,_.u8)("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:(0,L.F8)(e),params:s,allowedSRS:m,catalogURL:i},u),e.layerOptions),{},{localizedLayerStyles:j()(c)?void 0:c})}(e,t);return r?Promise.resolve(n):n},Fe=r(227361),Le=r.n(Fe),Ge=r(505055),Ne=r.n(Ge),We=r(233044),Be=r(993201);function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){Ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ze={},He=function(e,t){return e===t||"EPSG:3857"===e&&"EPSG:900913"===t||"EPSG:900913"===e&&"EPSG:3857"===t},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=m()(Le()(e,"TileMapService.TileMaps.TileMap",[])),a=o.projection,u=Le()(o,"options.service.allSRS"),c=i.map((function(t){var r=t.$,n=void 0===r?{}:r;return ke(ke({},n),{},{href:(0,We.cleanAuthParamsFromURL)(n.href),identifier:(0,We.cleanAuthParamsFromURL)(n.href),format:(0,Be.A)(n.href),tmsUrl:(0,We.cleanAuthParamsFromURL)(e.url)})})).filter((function(e){var t=e.srs;return!(a&&!u)||He(t,a)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.srs,i=void 0===o?"":o;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:c.length,numberOfRecordsReturned:Math.min(r,c.length),nextRecord:t+Math.min(r,c.length)+1,records:c.filter((function(e,n){return n>=t-1&&n<t-1+r}))}},qe=function(e){return e},ze=function(e,t,r,n,o){var i=Ze[e];return i&&(new Date).getTime()<i.timestamp+1e3*(_.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e($e(i.data,t,r,n,o))})):W().get(e).then((function(i){var a;return Ne().parseString(i.data,{explicitArray:!1},(function(t,r){a=ke(ke({},r),{},{url:e})})),Ze[e]={timestamp:(new Date).getTime(),data:a},$e(a,t,r,n,o)}))},Je=r(836882),Ke=r(611847);function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tt="custom",rt=function(e,t,r,n,o){var i,a,u,c=Le()(o,"options.service"),l=[];if(c.provider&&c.provider!==tt){var s=(i=c.provider,Object.keys(null!==(a=null===Je.Z||void 0===Je.Z||null===(u=Je.Z[i])||void 0===u?void 0:u.variants)&&void 0!==a?a:{}));0===s.length?l.push({provider:"".concat(c.provider),title:"".concat(c.provider)}):l=s.map((function(e){return{provider:"".concat(c.provider,".").concat(e)}}))}else c.url&&(l=[Qe(Qe({},c),{},{title:c.title,type:"tileprovider",url:c.url,attribution:c.attribution,options:c.options||{},provider:tt})]);return new Promise((function(e){e(function(e,t,r,n){var o=e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===e?"":e).toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:t+Math.min(r,o.length)+1,records:i}}(l,t,r,n))}))};function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){it(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var at=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},u=a.service,c=void 0===u?{}:u;return"tms"===c.provider&&ze(e,t,r,n,o),rt(0,t,r,n,o)},ut=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.options,a=i||{},u=a.service,c=void 0===u?{}:u;return"tms"===c.provider?ze(e,t,r,n,o):rt(0,t,r,n,o)},ct=function(e){return"tms"===e.provider?J(e):function(e){var t,r=e.provider&&"custom"!==e.provider?!!e.provider:(t=e.url,(0,Ke.Nw)(t));if(e.title&&r)return U.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")}(e)},lt=function(e){return"tms"===e.provider?K({parseUrl:qe})(e):function(e){return U.Observable.of(e)}(e)},st=function(e,t){if(e&&e.records){if(t.service&&"tms"===t.service.provider){var r=[{type:"OGC:TMS",version:"1.0.0",url:t.url}],n=(0,L.tW)({references:r}).tms;return e.records.map((function(e){return{serviceType:"tms",layerType:"tms",isValid:!!n,title:e.title,tileMapUrl:e.href,description:"".concat(e.srs).concat(e.format?", "+e.format:""),tmsUrl:t.tmsUrl,references:r,ogcReferences:n}}))}return e.records.map((function(e){return{serviceType:"tms",layerType:"tileprovider",isValid:!!e.provider,title:e.title||e.provider,url:e.url,attribution:e.attribution,options:e.options,provider:e.provider,references:[]}}))}return null},ft=function(e,t){var r=e.tileMapUrl,n=t.tileMap,o=t.service,i=(n||{}).TileMap,a=void 0===i?{}:i,u=(o||{}).forceDefaultTileGrid,c=a.Title,l=a.Abstract,s=a.SRS,f=a.BoundingBox,p=void 0===f?{}:f,d=a.Origin,y=a.TileFormat,b=void 0===y?{}:y,v=a.TileSets,O=a.$,g=O.version,E=O.tilemapservice,h=Le()(p,"$",{}),S=h.minx,R=h.miny,w=h.maxx,T=h.maxy,x=Le()(d,"$"),A=x.x,P=x.y,j=Le()(b,"$",{}),I=j.width,D=j.height,C=j["mime-type"],U=j.extension,M=[parseFloat(I),parseFloat(D,10)],_=m()(Le()(v,"TileSet",[]).map((function(e){return e.$}))).map((function(e){var t=e.href,r=e.order,n=e["units-per-pixel"];return{href:(0,We.cleanAuthParamsFromURL)(t),order:parseFloat(r),resolution:parseFloat(n)}})),F=Le()(v,"profile");return{title:c,visibility:!0,hideErrors:!0,name:c,allowedSRS:it({},s,!0),description:l,srs:s,version:g,tileMapService:E?(0,We.cleanAuthParamsFromURL)(E):void 0,type:"tms",profile:F,tileMapUrl:r,forceDefaultTileGrid:u,bbox:p&&{crs:s,bounds:{minx:parseFloat(S),miny:parseFloat(R),maxx:parseFloat(w),maxy:parseFloat(T)}},tileSets:_,origin:{x:parseFloat(A),y:parseFloat(P)},format:C,tileSize:M,extension:U}},pt=function(e){return{type:"tileprovider",visibility:!0,url:e.url,title:e.title,attribution:e.attribution,options:e.options,provider:e.provider,name:e.provider}},dt=function(e,t,r){return r?"tms"===e.layerType?(n=e.tileMapUrl,W().get(n).then((function(e){return new Promise((function(t){Ne().parseString(e.data,{explicitArray:!1},(function(e,r){return t(r)}))}))}))).then((function(r){return ft(e,ot(ot({},t),{},{tileMap:r}))})):Promise.resolve(pt(e)):function(e,t){return"tms"===e.layerType?ft(e,t):"tileprovider"===e.layerType?pt(e,t):null}(e,t);var n},yt=r(432420);function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ot(e){return function(e){if(Array.isArray(e))return gt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Et={},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=m()(Le()(e,'["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType',[])),i=o.map((function(t){var r=t.Name,n=t.Title,o=t.Abstract,i=t.DefaultSRS,a=t.OtherSRS,u=void 0===a?[]:a,c=t["ows:WGS84BoundingBox"],l=c["ows:LowerCorner"].split(" "),s=c["ows:UpperCorner"].split(" "),f={minx:parseFloat(l[0]),miny:parseFloat(l[1]),maxx:parseFloat(s[0]),maxy:parseFloat(s[1])};return{featureType:t,type:"wfs",url:(0,We.cleanAuthParamsFromURL)(e.url),name:r,title:n,description:o,SRS:[i].concat(Ot(u)),defaultSRS:i,boundingBox:{bounds:f,crs:"EPSG:4326"}}})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.name,i=void 0===o?"":o,a=e.description;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())||-1!==a.toLowerCase().indexOf(n.toLowerCase())})),a=i.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:i.length,numberOfRecordsReturned:Math.min(r,a.length),nextRecord:t+Math.min(r,i.length)+1,records:a}},St=function(e,t,r,n,o){var i=Et[e];return i&&(new Date).getTime()<i.timestamp+1e3*(_.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(ht(i.data,t,r,n,o))})):(0,yt.FU)(e).then((function(i){var a;return Ne().parseString(i.data,{explicitArray:!1,stripPrefix:!0},(function(t,r){a=vt(vt({},r),{},{url:e})})),Et[e]={timestamp:(new Date).getTime(),data:a},ht(a,t,r,n,o)}))},Rt=z,wt=J,Tt=K({parseUrl:yt.dN}),xt=function(e,t,r,n,o){return St(e,t,r,n,o)},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.records;return t?t.map((function(e){var t=[{type:"OGC:WFS-1.1.0-http-get-capabilities",url:e.url},{type:"OGC:WFS-1.1.0-http-get-feature",url:e.url}],r=(0,L.tW)({references:t}).wfs;return vt(vt({},e),{},{serviceType:"wfs",isValid:!!r,references:t,ogcReferences:r})})):null},Pt=function(e,t,r){var n=function(e){return vt({type:e.type||"wfs",search:{url:e.url,type:"wfs"},url:e.url,queryable:e.queryable,visibility:!0,name:e.name,title:e.title||e.name,description:e.description||"",bbox:e.boundingBox,links:(0,L.F8)(e),style:{weight:1,color:"rgba(0, 0, 255, 1)",opacity:1,fillColor:"rgba(0, 0, 255, 0.1)",fillOpacity:.1,radius:10}},e.layerOptions)}(e);return r?Promise.resolve(n):n};function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){Dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ct=r(932354).Z.textSearch,Ut=z,Mt=J,_t=K({parseUrl:function(e){return e}}),Ft=function(e){return e&&e.records?e.records.map((function(e){return{serviceType:"backgrounds",isValid:!!e,description:e.title,title:e.title,identifier:e.name,thumbnail:e.thumbURL,references:[],background:e}})):null},Lt=function(e,t,r){var n=function(e){return It(It({},null==e?void 0:e.background),{},{id:null==e?void 0:e.background.name,visibility:!1})}(e);return r?Promise.resolve(n):n},Gt=r(658918),Nt=["tileset"];function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){Vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kt(e){var t=e.split("/");return t[t.length-2]}var Yt=z,Zt=function(e){return U.Observable.of(e)},Ht=function(e,t,r,n,o){return function(e,t,r,n,o){return(0,Gt.F)(e).then((function(t){var r,i,a=t.tileset,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,Nt),c=[Bt({title:(null==o||null===(r=o.options)||void 0===r||null===(i=r.service)||void 0===i?void 0:i.title)||kt(e),url:e,type:"3dtiles",tileset:a},u)].filter((function(e){var t=e.title;return!n||(null==t?void 0:t.toLowerCase().includes((null==n?void 0:n.toLowerCase())||""))}));return{numberOfRecordsMatched:c.length,numberOfRecordsReturned:c.length,records:c}}))}(e,0,0,n,o)},$t=function(e){return null!=e&&e.records?e.records.map((function(e){var t=e.version,r=e.bbox,n=e.format,o=e.properties;return Bt(Bt(Bt(Bt({serviceType:"3dtiles",isValid:!0,description:"v. ".concat(t),title:e.title,identifier:e.url,url:e.url,thumbnail:null},r&&{bbox:r}),n&&{format:n}),o&&{properties:o}),{},{references:[]})})):null},qt=function(e,t,r){var n=function(e){var t=e.bbox,r=e.format,n=e.properties;return Bt(Bt(Bt({type:"3dtiles",url:e.url,title:e.title,visibility:!0},t&&{bbox:t}),r&&{format:r}),n&&{properties:n})}(e);return r?Promise.resolve(n):n},zt=function(e){if(e.title&&function(e){if((0,Ke.Nw)(e)){var t=e.split(/\./g);return"json"===t[t.length-1]}return!1}(e.url))return U.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")};const Jt={csw:o,wfs:u,wms:n,tms:a,wmts:i,backgrounds:c,"3dtiles":l}},856175:(e,t,r)=>{"use strict";r.d(t,{Z:()=>re});var n=r(49977),o=r(409669),i=r.n(o),a=r(737691),u=r.n(a),c=r(430647),l=r(91175),s=r.n(l),f=r(227361),p=r.n(f),d=r(313311),y=r.n(d),b=r(701469),v=r.n(b),m=r(747037),O=r.n(m),g=r(513218),E=r.n(g),h=r(3674),S=r.n(h),R=r(493220),w=r.n(R),T=r(682492),x=r.n(T),A=r(931273),P=r(580416),j=r(197395),I=r(782904),D=r(433528),C=r(921914),U=r(53001),M=r(788113),_=r(31935),F=r(308316),L=r(675110),G=r(576712),N=r(501157),W=r(986267),B=r(737275),V=r(624262),k=r(589919),Y=r(801550),Z=r(659551),H=["format","url","text","layerOptions"];function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var te=function(e,t){return e?n.Observable.of((0,j.vU)({title:"notification.warning",message:"catalog.notification.errorServiceUrl",autoDismiss:6,position:"tc"}),(0,A.Rc)(!1)):n.Observable.of((0,A.m)(t))};const re=function(e){return{recordSearchEpic:function(t,r){return t.ofType(A.V3).switchMap((function(t){var o=t.format,i=t.url,a=t.startPosition,u=t.maxRecords,c=t.text,l=t.options,s=p()(l,"service.filter")||p()(l,"filter"),f=p()(l,"isNewService",!1);return n.Observable.defer((function(){return e[o].textSearch(i,a,u,c,Q({options:l,filter:s},(0,M.HN)(r.getState())))})).switchMap((function(e){if(e.error)return te(f,e);var t=n.Observable.empty();return f&&(t=n.Observable.from([(0,A.zX)(!0),(0,A.N3)(l.service),(0,j.Vp)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}),(0,A.Rc)(!1)])),t.concat([(0,A.nX)({url:i,startPosition:a,maxRecords:u,text:c},e)])})).startWith(f?(0,A.Rc)(!0):(0,A.K4)(!0)).catch((function(e){return te(f,e)}))}))},addLayersFromCatalogsEpic:function(t,r){return t.ofType(A.WX).filter((function(e){var t=e.layers,r=e.sources;return v()(t)&&v()(r)&&t.length&&t.length===r.length})).switchMap((function(t){var o=t.layers,i=t.sources,a=t.options,u=t.startPosition,c=void 0===u?1:u,l=t.maxRecords,f=void 0===l?4:l,d=r.getState(),y=(0,M.b6)(d),b=o.filter((function(e,t){return!!y[i[t]]||"object"===K(i[t])})).map((function(t,r){var u=p()(a,r,(0,M.bA)(d)),l=i[r],s="object"===K(l)?l:y[l],b=s.type.toLowerCase(),v=s.url,m=o[r];return n.Observable.defer((function(){return e[b].textSearch(v,c,f,m,Q(Q({},u),s)).catch((function(){return{results:[]}}))})).map((function(e){return Q(Q({},e),{},{format:b,url:v,text:m,layerOptions:u})}))}));return n.Observable.forkJoin(b).switchMap((function(t){return v()(t)&&t.length?n.Observable.of(t.map((function(t){var r=t.format,o=t.url,i=t.text,a=t.layerOptions,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,H),c=(0,F.Ps)(d),l=e[r].getCatalogRecords(u,a,c)||[],f=s()(l.filter((function(e){return e.identifier||e.name===i}))),p=(0,G.tW)(f),y=p.wms,b=p.wmts,v=y||b;if(v){var m=(0,G.n0)(v.SRS);if(v.SRS.length>0&&!W.default.isAllowedSRS("EPSG:3857",m))return n.Observable.empty()}var O=(0,M.kS)(d),g=e[r].getLayerFromRecord(f,{removeParams:O,catalogURL:"csw"===r&&o?o+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+f.identifier:o,layerBaseConfig:{}});return f?[g,a]:[i]}))):n.Observable.empty()}))})).mergeMap((function(e){if(e){var t=e.filter((function(e){return O()(e[0])})).join(" "),r=[];return t&&(r=[(0,A.E9)(t)]),r=[].concat(q(r),q(e.filter((function(e){return E()(e[0])})).map((function(e){return(0,A.A4)(x()({},e[0],e[1]))})))),n.Observable.from(r)}return n.Observable.empty()})).catch((function(){return n.Observable.empty()}))},addLayerAndDescribeEpic:function(e,t){return e.ofType(A.r7).mergeMap((function(e){var r=e.layer,o=e.zoomToLayer,i=[],a=t.getState(),u=(0,V.R8)(r);return i.push((0,P.A4)(Q(Q({},r),{},{id:u}))),o&&r.bbox&&i.push((0,Y.Px)(r.bbox.bounds,r.bbox.crs)),"wms"===r.type?n.Observable.defer((function(){return(0,N.gs)((0,V.Hi)(r),r.name)})).switchMap((function(e){if(e){var t=y()(e,(function(e){return e.name===r.name}));if(t&&"WFS"===t.owsType){var o=B.ZP.filterUrlParams(B.ZP.cleanDuplicatedQuestionMarks(t.owsURL),(0,M.kS)(a));return n.Observable.of((0,P.He)(u,{search:{url:o,type:"wfs"}}))}}return n.Observable.empty()})).merge(n.Observable.from(i)).catch((function(e){return n.Observable.of((0,A.bu)(r,e))})):n.Observable.from(i)})).catch((function(){return n.Observable.empty()}))},newCatalogServiceAdded:function(t,r){return t.ofType(A.mh).switchMap((function(){var t=r.getState(),o=(0,M._S)(t),i=(0,M.y)(t);return n.Observable.of(o).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.preprocess)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.validate)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(e){return n.Observable.of((0,A.tt)({format:e.type,url:e.url,startPosition:1,maxRecords:i,text:"",options:{service:e,isNewService:!0}}))})).catch((function(e){return n.Observable.of((0,j.vU)({exception:e,title:"notification.warning",message:e.notification||"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))}))}))},deleteCatalogServiceEpic:function(e,t){return e.ofType(A.$Y).switchMap((function(){var e=t.getState(),r=(0,M.Cb)(e),o=(0,M.b6)(e),i=o[r]?(0,j.Vp)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):(0,j.vU)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),a=(0,A.SU)(r);return o[r]?n.Observable.of(i,a):n.Observable.of(i)}))},openCatalogEpic:function(e){return e.ofType(I.At).filter((function(e){return"metadataexplorer"===e.control&&e.value})).switchMap((function(){return n.Observable.of((0,D.YV)(),(0,C.g)(),(0,C.aN)())}))},getMetadataRecordById:function(e,t){return e.ofType(A.UT).switchMap((function(e){var r=e.metadataOptions,o=void 0===r?{}:r,a=t.getState(),l=(0,L.Iz)(a);return n.Observable.defer((function(){return(0,N.FU)((0,V.Fh)(l))})).switchMap((function(e){var t=p()(e,"capability.layer.layer",[]),r=1===t.length?t[0].metadataURL:y()(t,(function(e){return e.name===l.name.split(":")[1]})),a=p()(y()(r,(function(e){return O()(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&("application/xml"===e.format||"text/xml"===e.format)})),"onlineResource.href"),s=p()(y()(r,(function(e){return O()(e.type)&&"iso19115:2003"===e.type.toLowerCase()&&"text/html"===e.format})),"onlineResource.href"),f=y()(p()(o,"extractors",[]),(function(e){var t=e.properties,r=e.layersRegex,n=r?new RegExp(r):null;return E()(t)&&(!r||n.test(l.name))})),d=s?{metadataUrl:s}:{},b=n.Observable.defer((function(){return Z.ZP.getRecordById(l.catalogURL)})).switchMap((function(e){return e&&e.error?n.Observable.of((0,j.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,P.c9)(d,!1)):e&&e.dc?n.Observable.of((0,P.c9)(Q(Q({},d),e.dc),!1)):n.Observable.empty()})),v=n.Observable.defer((function(){return i().get(a,{headers:{Accept:"application/xml"}})})).pluck("data").map((function(e){return(new c.a).parseFromString(e)})).map((function(e){var t=u().useNamespaces(o.xmlNamespaces||{});return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return w()(r).reduce((function(r,o){var i,a=$(o,2),u=a[0],c=a[1];if(E()(c)&&O()(c.xpath)&&E()(c.properties)&&S()(c.properties).length>0)0===(i=t(c.xpath,n).map((function(t){return e(c.properties,t)}))).length&&(i=null);else{var l,s=t(c,n);1===s.length?i=null!==(l=p()(s[0],"nodeValue"))&&void 0!==l?l:p()(s[0],"childNodes[0].nodeValue"):s.length>1&&(i=s.map((function(e){return p()(e,"childNodes[0].nodeValue")})).filter((function(e){return!!e})))}return Q(Q({},r),i?ee({},u,i):{})}),{})}(f.properties,e)})).switchMap((function(e){return n.Observable.of((0,P.c9)(Q(Q({},d),e),!1))}));return a&&f?v:l.catalogURL?b:n.Observable.of((0,P.c9)(d,!1))})).startWith((0,P.c9)({},!0)).catch((function(){return n.Observable.of((0,j.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,P.c9)({},!1))}))}))},autoSearchEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(A.CO).debounce((function(){var e=o(),t=(0,M.l2)(e);return n.Observable.timer(t)})).switchMap((function(e){var t=e.text,r=o(),i=(0,M.y)(r),a=(0,M.R7)(r),u=a.type,c=a.url,l=a.filter;return n.Observable.of((0,A.tt)({format:u,url:c,startPosition:1,maxRecords:i,text:t,options:{service:a,filter:l}}))}))},catalogCloseEpic:function(e,t){return e.ofType(A.ur).switchMap((function(){var e,r=t.getState(),o=(0,_.YL)(r),i=(0,M.b6)(r);return(e=n.Observable).of.apply(e,q([(0,I.pu)("metadataexplorer","enabled",!1,"group",null),(0,A.In)("view"),(0,A.ye)()].concat("backgroundSelector"===o?[(0,A.Dw)(s()(S()(i))),(0,U.vw)(!0)]:[])))}))},getSupportedFormatsEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(A.xM).filter((function(e){return(0,M.CK)(o())!==(null==e?void 0:e.url)})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,r=void 0===t?"":t;return n.Observable.defer((function(){return(0,N.T6)(r,!0)})).switchMap((function(e){return n.Observable.of((0,A.nx)(e,r))})).let((0,k.hP)((0,A.We)(!0),(0,A.We)(!1),(function(){return n.Observable.of((0,j.vU)({title:"layerProperties.format.error.title",message:"layerProperties.format.error.message"}),(0,A.We)(!1))})))}))},updateGroupSelectedMetadataExplorerEpic:function(e,t){return e.ofType(P.c7).filter((function(){return(0,M.$t)(t.getState())})).switchMap((function(e){var r=e.nodeType,o=e.id,i=t.getState(),a=0===(0,L.NP)(i).length||"group"!==r?"Default":o;return n.Observable.of((0,I.Xg)("metadataexplorer","group",a))}))}}}},589919:(e,t,r)=>{"use strict";r.d(t,{hP:()=>s});var n=r(984596),o=r.n(n),i=r(49977),a=r.n(i);function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,u(t))},s=function(e,t,r){return function(n){return(r?l(n,o()(e)).catch(r):l(n,o()(e))).concat(a().Observable.from(o()(t)))}}},38842:(e,t,r)=>{"use strict";r.d(t,{wk:()=>f,Yf:()=>p,c3:()=>d,fY:()=>y});var n=r(218721),o=r.n(n),i=r(227361),a=r.n(i),u=r(313311),c=r.n(u),l=r(22222),s=r(308316),f=function(e){return o()(e,"localConfig.localizedLayerStyles")},p=function(e){var t=a()(e,"localConfig.plugins.dashboard",[]),r=c()(t,(function(e){return"DashboardEditor"===e.name}))||{};return a()(r,"cfg.catalog.localizedLayerStyles",!1)},d=function(e){return a()(e,"localConfig.localizedLayerStyles.name","mapstore_language")},y=(0,l.P1)(f,d,s.KV,(function(e,t,r){var n=[];return e&&n.push({name:t,value:r}),n}))},576712:(e,t,r)=>{"use strict";r.d(t,{n0:()=>f,em:()=>p,tW:()=>d,FJ:()=>y,F8:()=>b,p8:()=>v,qy:()=>m});var n=r(727418),o=r.n(n),i=r(91175),a=r.n(i),u=r(701469),c=r.n(u),l=r(986267);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){return e.filter((function(e){return l.default.isSRSAllowed(e)})).reduce((function(e,t){return o()(e,(!0,(n=t)in(r={})?Object.defineProperty(r,n,{value:true,enumerable:!0,configurable:!0,writable:!0}):r[n]=true,r));var r,n}),{})},p=function(e,t){var r=e.split("?"),n={};return r.length>=2&&r[1]&&r[1].split(/[&;]/g).forEach((function(e){var r=e.split("=");-1===t.indexOf(r[0].toLowerCase())&&(n[r[0]]=r[1])})),{url:r[0],params:n}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,r=void 0===t?[]:t;return{wfs:a()(r.filter((function(e){return e.type&&("OGC:WFS"===e.type||e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-feature")>-1)}))),wms:a()(r.filter((function(e){return e.type&&("OGC:WMS"===e.type||e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-map")>-1)}))),wmts:a()(r.filter((function(e){return e.type&&("OGC:WMTS"===e.type||e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-map")>-1)}))),tms:a()(r.filter((function(e){return e.type&&("OGC:TMS"===e.type||e.type.indexOf("OGC:TMS")>-1)})))}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{references:[]};return{esri:a()(e.references.filter((function(e){return e.type&&("ESRI:SERVER"===e.type||"arcgis"===e.type)})))}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,r=void 0===t?[]:t,n=a()(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),o=a()(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),i=a()(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),u=[];return n&&u.push({type:"WMS_GET_CAPABILITIES",url:n.url,labelId:"catalog.wmsGetCapLink"}),i&&u.push({type:"WMTS_GET_CAPABILITIES",url:i.url,labelId:"catalog.wmtsGetCapLink"}),o&&u.push({type:"WFS_GET_CAPABILITIES",url:o.url,labelId:"catalog.wfsGetCapLink"}),u},v=function(e){var t,r;return"wms"===e.type?[e.url].concat((r=null!==(t=e.domainAliases)&&void 0!==t?t:[],function(e){if(Array.isArray(e))return s(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).join(","):e.url},m=function(e){return e&&!c()(e)&&-1!==e.indexOf(",")?e.split(",").map((function(e){return e.trim()})):e}},993201:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(264721),o=r.n(n),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("?")[0].split("@");if(t.length>1){var r=t[t.length-1];if(o()(["png","png8","jpeg","vnd.jpeg-png","gif"],r))return r}return null}}}]);