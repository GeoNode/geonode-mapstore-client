"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[69615],{277327:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(273517),o=r.n(n),a=r(904113),i=r(8571);function l(e){var t=e.msgId,r=e.icon;return o().createElement("div",{className:"gn-main-event-container"},o().createElement("div",{className:"gn-main-event-content"},o().createElement("div",{className:"gn-main-event-text"},o().createElement("div",{className:"gn-main-icon"},o().createElement(a.A,{name:r})),t&&o().createElement(i.A,{msgId:t}))))}l.defaultProps={msgId:"",icon:"exclamation"};const u=l},338877:(e,t,r)=>{r.d(t,{A:()=>E});var n=r(273517),o=r.n(n),a=r(995531),i=r(738221),l=r.n(i),u=r(962193),c=r.n(u),s=r(192016),m=r(551783);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var d=["loadOptions","pageSize","debounceTime","labelKey","valueKey","newOptionPromptText"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(null,arguments)}function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t,r){return(t=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var O=(0,m.A)("placeholder")(s.Ay);const E=function(e){var t=e.loadOptions,r=e.pageSize,i=void 0===r?20:r,u=e.debounceTime,s=void 0===u?500:u,m=e.labelKey,f=void 0===m?"label":m,g=e.valueKey,h=void 0===g?"value":g,E=e.newOptionPromptText,S=void 0===E?"Create option":E,j=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,d),w=b((0,n.useState)(""),2),P=w[0],A=w[1],k=b((0,n.useState)(!1),2),T=k[0],C=k[1],x=b((0,n.useState)(!1),2),N=x[0],F=x[1],I=b((0,n.useState)(!1),2),q=I[0],D=I[1],K=b((0,n.useState)(1),2),_=K[0],$=K[1],R=b((0,n.useState)([]),2),B=R[0],M=R[1],L=(0,n.useRef)(),U=(0,n.useRef)(),z=(0,n.useRef)();return z.current=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(){var e;L.current&&(null===(e=L.current)||void 0===e||e.cancel(),L.current=void 0);var t=a.A.CancelToken;L.current=t.source()}();var r=e.q,n=null!=r?r:P;C(!0);var o=e.page||_;t({q:n,page:o,pageSize:i,config:{cancelToken:L.current.token}}).then((function(e){var t=e.results.map((function(e){return e.selectOption}));t=function(e,t){if(j.creatable&&!c()(t)){var r,n=function(e){var r;return(null==e||null===(r=e[f])||void 0===r?void 0:r.toLowerCase())===t.toLowerCase()},o=null===(r=j.value)||void 0===r?void 0:r.some(n),a=e.some(n);return o||a?e:[y(y(y({},f,"".concat(S,' "').concat(t,'"')),h,t),"result",y(y({},h,t),f,t))].concat(e)}return e}(t=1===o?t:[].concat(v(B),v(t)),n),M(t),F(e.isNextPageAvailable),C(!1),L.current=void 0})).catch((function(){M([]),F(!1),C(!1),L.current=void 0}))},(0,n.useEffect)((function(){U.current=l()((function(e){e!==P&&(A(e),$(1),M([]),z.current({q:e,page:1}))}),s)}),[P]),(0,n.useEffect)((function(){q&&(A(""),$(1),M([]),z.current({q:"",page:1}))}),[q]),(0,n.useEffect)((function(){_>1&&z.current()}),[_]),o().createElement(O,p({},j,{isLoading:T,options:B,labelKey:f,valueKey:h,onOpen:function(){return D(!0)},onClose:function(){return D(!1)},filterOptions:function(e){return e.map((function(e){var t=/\"(.*?)\"/.exec(P);return t?t[1]:e}))},onInputChange:function(e){return t=e,L.current&&(null===(r=L.current)||void 0===r||r.cancel(),L.current=void 0),U.current.cancel(),void U.current(t);var t,r},onMenuScrollToBottom:function(){!T&&N&&$(_+1)}}))}},169615:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ie});var n=r(273517),o=r.n(n),a=r(605556),i=r.n(a),l=r(548975),u=r(466732),c=r(8117),s=r(962193),m=r.n(s),f=r(192202),d=r(899703);var p=r(487581),v=(0,n.lazy)((function(){return Promise.all([r.e(72208),r.e(53651)]).then(r.bind(r,653651))}));const y={SelectWidget:function(e){return o().createElement(d.A,e)},TextareaWidget:function(e){var t=e.id,r=e.options,a=void 0===r?{}:r,i=e.value,l=e.onChange;return null!=a&&a["geonode-ui:richTextEditor"]?o().createElement(n.Suspense,{fallback:null},o().createElement(v,{id:t,value:i,onChange:l})):o().createElement(p.A,e)}};var b=r(320089);var g=r(770491),h=["key"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(null,arguments)}var E=r(904113),S=r(8571),j=r(628017),w=r(553493),P=r(551783),A=["onChange","value","debounceTime"];function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(null,arguments)}var T=(0,P.A)("placeholder")(c.MJ);const C=(0,w.A)("onChange","value")((function(e){var t=e.onChange,r=e.value,n=(e.debounceTime,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,A));return o().createElement(T,k({},n,{value:r,onChange:function(e){return t(e.target.value)}}))}));function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=function(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return K(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t=document.querySelector("[for=".concat(e,"]"))||document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})};function $(e){var t=e.idSchema,r=e.title,a=e.group,i=e.expanded,l=q((0,n.useState)(!1),2),u=l[0],s=l[1],m=a.some((function(e){return e.error})),f=void 0===i?u:i;return o().createElement("li",null,o().createElement(b.A,{className:m?"gn-metadata-error":"",size:"xs",onClick:function(){return s((function(e){return!e}))}},o().createElement(c.e6,{glyph:f?"bottom":"next"})," ",r,m?o().createElement(o().Fragment,null," ",o().createElement(E.A,{name:"exclamation"})):null),f?o().createElement("ul",null,a.map((function(e){return o().createElement("li",{key:e.name},o().createElement(b.A,{size:"xs",className:e.error?"gn-metadata-error":"",onClick:function(){var r;return _(null===(r=t[e.name])||void 0===r?void 0:r.$id)}},e.title,e.error?o().createElement(o().Fragment,null," ",o().createElement(E.A,{name:"exclamation"})):null))}))):null)}function R(e,t){var r=e.idSchema,a=e.schema,i=e.uiSchema,l=e.properties,u=e.errorSchema,c=e.formContext.title,s=q((0,n.useState)(""),2),m=s[0],f=s[1],d=l.reduce((function(e,r){var n,o,l=(null==a||null===(n=a.properties)||void 0===n||null===(n=n[r.name])||void 0===n?void 0:n.title)||r.name,c=(null==i?void 0:i[null==r?void 0:r.name])||{},s=(null==c?void 0:c["ui:options"])||{};if("hidden"===((null==c?void 0:c["ui:widget"])||s.widget)||!l.toLowerCase().includes((m||"").toLowerCase()))return e;var f,d=(null==s?void 0:s["geonode-ui:group"])||(0,j.kA)(t.messages,"gnviewer.metadataGroupTitle"),p=e[d]||[];return F(F({},e),{},I({},d,[].concat(function(e){if(Array.isArray(e))return K(e)}(f=p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(f)||D(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[F(F({},r),{},{uiSchema:c,schema:null==a||null===(o=a.properties)||void 0===o?void 0:o[r.name],error:u[r.name],title:l})])))}),{}),p="gn-metadata-title",v=!Object.keys(d).some((function(e){return d[e].length>0}));return o().createElement("div",{className:"gn-metadata-layout"},o().createElement("ul",{className:"gn-metadata-list"},o().createElement(C,{placeholder:"gnviewer.filterMetadata",value:m,onChange:function(e){return f(e)}}),c?o().createElement("li",null,o().createElement(b.A,{size:"xs",onClick:function(){return _(p)}},o().createElement(S.A,{msgId:"gnviewer.metadataFor"})," ",c)):null,Object.keys(d).filter((function(e){return d[e].length>0})).map((function(e){var t=d[e];return o().createElement($,{key:e,idSchema:r,title:e,group:t,expanded:!!m||void 0})}))),o().createElement("div",{className:"gn-metadata-groups"},c?o().createElement("div",{id:p,className:"gn-metadata-title"},o().createElement(S.A,{msgId:"gnviewer.metadataFor"})," ",c):null,v?o().createElement("div",{className:"field"},o().createElement(S.A,{msgId:"gnviewer.noMetadataFound"})):null,Object.keys(d).filter((function(e){return d[e].length>0})).map((function(e,t){var r=d[e];return o().createElement("div",{className:"gn-metadata-group",key:t},o().createElement("div",{className:"gn-metadata-group-title"},e),r.map((function(e,r){return o().createElement(o().Fragment,{key:"".concat(t,"_").concat(r)},e.content)})))}))))}R.contextTypes={messages:i().object};var B=r(739875),M=r(36963);const L=(0,B.A)((function(e){return o().createElement("span",e,o().createElement(M.A,{name:"info-circle"}))})),U={ArrayFieldItemTemplate:function(e){var t=e.children,r=e.className,n=e.disabled,a=e.hasToolbar,i=e.hasMoveDown,l=e.hasMoveUp,u=e.hasRemove,c=e.hasCopy,s=e.index,m=e.onCopyIndexClick,f=e.onDropIndexClick,d=e.onReorderClick,p=e.readonly,v=e.registry,y=e.uiSchema,b=v.templates.ButtonTemplates,g=b.CopyButton,h=b.MoveDownButton,O=b.MoveUpButton,E=b.RemoveButton;return o().createElement("div",{className:r},t,a&&o().createElement(o().Fragment,null,(l||i)&&o().createElement(O,{disabled:n||p||!l,onClick:d(s,s-1),uiSchema:y,registry:v}),(l||i)&&o().createElement(h,{disabled:n||p||!i,onClick:d(s,s+1),uiSchema:y,registry:v}),c&&o().createElement(g,{disabled:n||p,onClick:m(s),uiSchema:y,registry:v}),u&&o().createElement(E,{disabled:n||p,onClick:f(s),uiSchema:y,registry:v})))},ArrayFieldTemplate:function(e){var t=e.canAdd,r=e.disabled,n=e.idSchema,a=e.uiSchema,i=e.items,l=e.onAddClick,u=e.readonly,c=e.registry,s=e.required,m=e.schema,f=e.title,d=(0,g.$R)(a),p=(0,g.$F)("ArrayFieldDescriptionTemplate",c,d),v=(0,g.$F)("ArrayFieldItemTemplate",c,d),y=(0,g.$F)("ArrayFieldTitleTemplate",c,d),b=c.templates.ButtonTemplates.AddButton;return o().createElement("div",{id:n.$id},o().createElement("div",{className:"field-array-header"},o().createElement(y,{idSchema:n,title:d.title||f,required:s,schema:m,uiSchema:a,registry:c,description:o().createElement(p,{idSchema:n,description:d.description||m.description,schema:m,uiSchema:a,registry:c})}),t&&o().createElement(b,{className:"array-item-add",onClick:l,disabled:r||u,uiSchema:a,registry:c})),o().createElement("div",{className:"array-item-list"},i&&i.map((function(e){var t=e.key,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,h);return o().createElement(v,O({key:t},r))}))))},ArrayFieldTitleTemplate:function(e){var t=e.idSchema,r=e.title,n=e.schema,a=e.uiSchema,i=e.required,l=e.registry,u=e.description,c=(0,g.$R)(a,l.globalUiOptions),s=c.label;if(!r||void 0!==s&&!s)return null;var m=(0,g.$F)("TitleFieldTemplate",l,c);return o().createElement(m,{id:(0,g.EH)(t),title:r,required:i,schema:n,uiSchema:a,registry:l,description:u})},ObjectFieldTemplate:function(e){var t;if("root"===(null==e||null===(t=e.idSchema)||void 0===t?void 0:t.$id))return o().createElement(R,e);var r=e.description,n=e.disabled,a=e.formData,i=e.idSchema,l=e.onAddClick,u=e.properties,c=e.readonly,s=e.registry,m=e.required,f=e.schema,d=e.title,p=e.uiSchema,v=(0,g.$R)(p),y=(0,g.$F)("TitleFieldTemplate",s,v),b=(0,g.$F)("DescriptionFieldTemplate",s,v),h=s.templates.ButtonTemplates.AddButton;return o().createElement("div",{id:i.$id},d&&o().createElement(y,{id:(0,g.EH)(i),title:d,required:m,schema:f,uiSchema:p,registry:s,description:o().createElement(b,{id:(0,g.IR)(i),description:r,schema:f,uiSchema:p,registry:s})}),null!=u&&u.length?o().createElement("div",{className:"field-object-properties"},u.map((function(e){return e.content}))):null,(0,g.Xl)(f,p,a)&&o().createElement(h,{onClick:l(f),disabled:n||c,uiSchema:p,registry:s}))},TitleFieldTemplate:function(e){var t=e.id,r=e.required,n=e.title,a=e.description;return o().createElement("div",{id:t},o().createElement("label",null,n,r&&o().createElement("span",{className:"required"}," ","*"),a?o().createElement(o().Fragment,null," ",a):null))},DescriptionFieldTemplate:function(e){var t=e.description,r=e.id;return m()(t)?null:o().createElement(L,{id:r,tooltip:t,tooltipPosition:"right"})},ErrorListTemplate:function(){return null},FieldTemplate:function(e){var t=e.id,r=e.label,n=e.children,a=e.errors,i=e.help,l=e.description,u=e.hidden,c=e.required,s=e.displayLabel,m=e.registry,f=e.uiSchema,d=(0,g.$R)(f),p=(0,g.$F)("WrapIfAdditionalTemplate",m,d);return u?o().createElement("div",{className:"hidden"},n):o().createElement(p,e,s&&o().createElement("label",{className:"control-label",htmlFor:t},r,c&&o().createElement("span",{className:"required"}," ","*"),l?o().createElement(o().Fragment,null," ",l):null),n,a,i)},ButtonTemplates:{AddButton:function(e){var t=e.onClick,r=e.disabled;return o().createElement(b.A,{disabled:r,className:"square-button-md",onClick:t,variant:"primary"},o().createElement(c.e6,{glyph:"plus"}))},MoveUpButton:function(e){var t=e.onClick,r=e.disabled;return o().createElement(b.A,{disabled:r,className:"square-button-md",onClick:t,style:r?{visibility:"hidden"}:{}},o().createElement(c.e6,{glyph:"arrow-up"}))},MoveDownButton:function(e){var t=e.onClick,r=e.disabled;return o().createElement(b.A,{disabled:r,className:"square-button-md",onClick:t,style:r?{visibility:"hidden"}:{}},o().createElement(c.e6,{glyph:"arrow-down"}))},RemoveButton:function(e){var t=e.onClick,r=e.disabled;return o().createElement(b.A,{disabled:r,className:"square-button-md",onClick:t},o().createElement(c.e6,{glyph:"trash"}))}}};var z=r(995531),V=r(499084),W=r.n(V),H=r(185015),G=r.n(H),J=r(730872),X=r.n(J),Q=r(956449),Y=r.n(Q),Z=r(338877);function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}var te=["className","description","error","helpTitleIcon","id","labelKey","name","title","value","valueKey","showLabel","required"];function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},re.apply(null,arguments)}function ne(e,t,r){return(t=function(e){var t=function(e){if("object"!=ee(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ee(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oe=function(e){var t=e.className,r=e.description,n=e.error,a=e.helpTitleIcon,i=e.id,l=e.labelKey,u=void 0===l?"label":l,c=e.name,s=e.title,f=e.value,d=e.valueKey,p=void 0===d?"value":d,v=e.showLabel,y=void 0===v||v,b=e.required,g=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,te);return o().createElement("div",{className:"form-group".concat(t?" "+t:"").concat(n?" has-error":"")},y?o().createElement("label",{className:"control-label",htmlFor:i},s||c,b?o().createElement("span",{className:"required"}," ","*"):null,a&&!m()(r)?o().createElement(o().Fragment,null," ",o().createElement(L,{tooltip:r,tooltipPosition:"right"})):null):null,o().createElement(Z.A,re({},g,{id:i,value:f&&Y()(f)?f.map((function(e){return ne(ne({result:e},p,G()(e)?e:e[p]),u,G()(e)?e:e[u])})):f,valueKey:p,labelKey:u})),n)};oe.propTypes={className:i().string,description:i().string,error:i().element,helpTitleIcon:i().bool,id:i().string.isRequired,labelKey:i().string,name:i().string,title:i().string,value:i().any.isRequired,valueKey:i().string,showLabel:i().bool};const ae=oe;var ie=r(283306),le=r(858156),ue=r.n(le);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return(t=function(e){var t=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}var pe=["name"],ve=["result"],ye=["q","config"];function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},be.apply(null,arguments)}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){Oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oe(e,t,r){return(t=function(e){var t=function(e){if("object"!=de(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==de(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Se(e,t){return Object.keys(t||{}).some((function(r){var n;return r===e||!(null===(n=t[r])||void 0===n||!n.properties)&&Se(e,t[r].properties)}))}function je(e){var t,r=e.name,n=Ee(e,pe),o=(r||"").split("-"),a=parseFloat(o[o.length-1]);return!isNaN(a)&&!Se(r,null==n||null===(t=n.registry)||void 0===t||null===(t=t.rootSchema)||void 0===t?void 0:t.properties)}const we={SchemaField:function(e){var t,r,a,i,l=e.onChange,u=e.schema,c=e.formData,s=e.idSchema,f=e.name,d=e.errorSchema,p=e.uiSchema,v=e.required,y=null==p?void 0:p["ui:options"],b=null==y?void 0:y["geonode-ui:autocomplete"],g="string"===(null==u||null===(t=u.items)||void 0===t?void 0:t.type),h="object"===(null==u||null===(r=u.items)||void 0===r?void 0:r.type),O="array"===(null==u?void 0:u.type)&&(g||h&&!m()(null==u||null===(a=u.items)||void 0===a?void 0:a.properties)),E="object"===(null==u?void 0:u.type)&&!m()(null==u?void 0:u.properties),S=function(e){var t=e.uiSchema,r=e.idSchema,o=e.onChange,a=e.isMultiSelect,i=e.formContext,l=e.name,u=null==t?void 0:t["ui:options"],c=null==u?void 0:u["geonode-ui:referencevalue"],s=null==u?void 0:u["geonode-ui:referencekey"],m=r.$id.match(/_(\d+)(_|$)/),f=m?parseInt(m[1],10):null,d=c?ue()(i,"metadata.".concat(X()(c)({index:f}))):null,p=(0,n.useRef)(null),v=function(e){p.current=me(me({},p.current),{},fe({},l,e))};return(0,n.useEffect)((function(){null===p.current&&c&&v(d)}),[]),(0,n.useEffect)((function(){var e;c&&d!==(null===(e=p.current)||void 0===e?void 0:e[l])&&(v(d),o(a?[]:{}))}),[c,d]),{referenceValue:d,referenceKey:s}}(he(he({},e),{},{isMultiSelect:O})),j=S.referenceValue,w=S.referenceKey;if(b&&(O||E)){var P,A=y.classNames,k=y.style,T=y.description,C=y.disabled,x=y.help,N=y.hideError,F=y.label,I=y.placeholder,q=y.title,D=(N?[]:W()(d)).reduce((function(e,t){return null!=t&&t.__errors?e.push({messages:t.__errors}):Object.keys(t||{}).forEach((function(r){var n;null!==(n=t[r])&&void 0!==n&&n.__errors&&e.push({key:r,messages:t[r].__errors})})),e}),[]),K=G()(b)?{url:b}:b,_=null==K?void 0:K.url;j&&(_=X()(_)(Oe({},null!=w?w:"id",j)));var $=(null==K?void 0:K.queryKey)||"q",R=(null==K?void 0:K.resultsKey)||"results",B=(null==K?void 0:K.valueKey)||"id",M=(null==K?void 0:K.labelKey)||"label",L=!(null==K||!K.creatable),U=null!=I?I:" ",V={className:"field".concat(A?" "+A:""),clearable:!v,creatable:L,id:s.$id,labelKey:M,multi:O,name:f,placeholder:U,showLabel:null==F||F,title:null!=q?q:u.title,value:c,valueKey:B,helpTitleIcon:!0,description:null!==(P=null!=x?x:T)&&void 0!==P?P:u.description,disabled:C||(null==e?void 0:e.readonly),style:k,required:v,onChange:function(e){var t,r=null!==(t=null==e?void 0:e.result)&&void 0!==t?t:void 0;return l(O?e.map((function(e){var t,r=e.result,n=Ee(e,ve);return void 0===r?n:G()(r)?r:g?r[B]:Object.fromEntries(Object.keys(null===(t=u.items)||void 0===t?void 0:t.properties).map((function(e){return[e,r[e]]})))})):r)},loadOptions:function(e){var t=e.q,r=e.config,n=Ee(e,ye);return z.A.get(_,he(he({},r),{},{params:he(he(he({},n),t&&Oe({},$,t)),{},{page:n.page})})).then((function(e){var t,r=e.data;return{isNextPageAvailable:!(null===(t=r.pagination)||void 0===t||!t.more),results:null==r?void 0:r[R].map((function(e){return{selectOption:Oe(Oe({result:e},B,G()(e)?e:e[B]),M,G()(e)?e:e[M])}}))}}))},error:m()(D)?null:o().createElement(o().Fragment,null,D.map((function(e,t){return o().createElement("ul",{key:t,className:"text-danger"},W()(e.messages).map((function(t,r){return o().createElement("li",{key:r},e.key?"".concat(e.key,": "):"",t)})))})))};return o().createElement(ae,V)}var H=je(e);return o().createElement(ie.A,be({},e,{uiSchema:H?he(he({},e.uiSchema),{},{"ui:label":!1,"ui:options":he(he({},null===(i=e.uiSchema)||void 0===i?void 0:i["ui:options"]),{},{label:!1})}):p}))}};var Pe=r(277327),Ae=r(866875);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}var Te=["__errors"];function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t,r){return(t=function(e){var t=function(e){if("object"!=ke(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e,t){var r=e.pk,a=e.loading,i=e.error,s=e.extraErrors,d=e.metadata,p=e.schema,v=e.uiSchema,b=e.updateError,g=e.setLoading,h=e.setError,O=e.setUISchema,E=e.setSchema,S=e.setMetadata,w=e.setInitialMetadata,P=e.setUpdateError,A=e.setResource,k=e.updating,T=e.setExtraErrors,C=e.readOnly,x=t.messages,N=(0,n.useRef)(!1),F=(0,n.useRef)(),I=null!=s?s:{},q=I.__errors,D=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(I,Te);return F.current=function(e){null!=e&&e.validateForm&&!N.current&&(N.current=!0,m()(D)&&e.validateForm())},(0,n.useEffect)((function(){r&&(g(!0),h(!1),(0,f._T)(r).then((function(e){O(e.uiSchema),E(e.schema),S(e.metadata),w(e.metadata),A(e.resource),T(e.extraErrors)})).catch((function(){h(!0)})).finally((function(){g(!1)})))}),[r]),(0,n.useEffect)((function(){return function(){P(null),T({})}}),[]),a?o().createElement(Ae.A,null):i?o().createElement(Pe.A,{msgId:"gnviewer.metadataNotFound"}):d||p?o().createElement("div",{className:"gn-metadata"},o().createElement("div",{className:"gn-metadata-header"},!m()(b)&&o().createElement(c.Fc,{bsStyle:"danger",style:{margin:"0.25rem 0"}},b,!m()(q)&&o().createElement("ul",null,q.map((function(e,t){return o().createElement("li",{key:t},e)}))))),o().createElement("div",{className:"gn-metadata-container"},o().createElement(u.Ay,{liveValidate:!0,readonly:C,ref:F.current,formContext:{title:null==d?void 0:d.title,metadata:d},schema:p,widgets:y,uiSchema:v,formData:d,validator:l.Ay,templates:U,fields:we,extraErrors:D,transformErrors:function(e){return e.filter((function(e){return"must be equal to constant"!==e.message})).map((function(e){var t=(e.message||"").startsWith("must have required property")?"must have required property":e.message,r="metadata.error.".concat(t),n=(0,j.kA)(x,r);return xe(xe({},e),{},{message:r===n?t:n})}))},experimental_defaultFormStateBehavior:{arrayMinItems:{populate:"never",mergeExtraDefaults:!1}},onChange:function(e){var t;t=e.formData,P(null),S(t)}},o().createElement(o().Fragment,null))),k?o().createElement(Ae.A,{style:{opacity:.5}}):null):null}Fe.contextTypes={messages:i().object};const Ie=Fe}}]);