"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[29479,40531],{140531:(e,t,r)=>{r.d(t,{Uj:()=>Z,zZ:()=>Y,Zg:()=>Q,Ay:()=>re,o8:()=>te,hZ:()=>q,QH:()=>V,lC:()=>K,Uh:()=>X,c5:()=>ee});var n={};r.r(n),r.d(n,{createCategory:()=>z,createResource:()=>_,deleteResource:()=>J,getResource:()=>N,getResourceDataByName:()=>U,getResourceIdByName:()=>B,getResources:()=>x,searchListByAttributes:()=>G,updateResource:()=>H,updateResourceAttribute:()=>W});var o=r(45388),i=r(541033),a=r.n(i),u=r(679859),c=r.n(u),l=r(269843),s=r.n(l),f=r(590179),p=r.n(f),b=r(956449),d=r.n(b),y=r(223805),v=r.n(y),m=r(858156),g=r.n(m),h=r(907309),O=r.n(h),w=r(392347),j=r(496463);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return(t=function(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k,D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"rest/geostore/data/".concat(e).concat(t)},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.A;return o.Observable.defer((function(){return r.getResourceAttributes(e)})).map((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name;return t(e)})).map((function(e){var t=e.value;return(0,j.s)(t)})).filter((function(e){return!s()(e)}))}))},I=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.A;return t?o.Observable.defer((function(){return r.updateResourcePermissions(e,{SecurityRuleList:{SecurityRule:t}})})):o.Observable.empty()},M=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w.A;return"NODATA"!==r.data?o.Observable.defer((function(){return i.createResource({name:"".concat(e,"-").concat(t,"-").concat(a()())},r.data,r.category)})).pluck("data").switchMap((function(a){return o.Observable.forkJoin([o.Observable.defer((function(){return i.updateResourceAttribute(e,t,D(a,r.tail))}))].concat(E(n?[I(a,n,i)]:[]))).map((function(){return a}))})):o.Observable.of(-1)},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.includeAttributes,n=void 0===r||r,i=t.withData,a=void 0===i||i,u=t.withPermissions,c=void 0!==u&&u,l=t.baseURL,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.A;return o.Observable.forkJoin([o.Observable.defer((function(){return s.getShortResource(e)})).pluck("ShortResource"),o.Observable.defer((function(){return n?s.getResourceAttributes(e):new Promise((function(e){return e([])}))}))].concat(E(a?[o.Observable.defer((function(){return s.getData(e,{baseURL:l})}))]:[]),E(c?[o.Observable.defer((function(){return s.getResourcePermissions(e,{},!0)}))]:[]))).map((function(e){var t,r,n=(r=4,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,r)||L(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1],a=n[2],u=n[3];return S(S({},o),{},{attributes:(i||[]).reduce((function(e,t){return S(S({},e),{},R({},t.name,t.value))}),{}),data:a,permissions:u})}))},B=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.A;return o.Observable.defer((function(){return r.getResourceIdByName(e,t)}))},U=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.A;return o.Observable.defer((function(){return r.getResourceDataByName(e,t)}))},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,r=void 0===t?"*":t,n=e.category,i=e.options,a=void 0===i?{params:{start:0,limit:10},includeAttributes:!1,withData:!1,withPermission:!1}:i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.A;return o.Observable.defer((function(){return u.getResourcesByCategory(n,r,a)})).map((function(e){var t=e.results,r=void 0===t?[]:t,n=e.totalCount,o=void 0===n?0:n,i=a.includeAttributes,c=a.withData,l=a.withPermission;return i||c||l?{totalCount:o,results:r.map((function(e){var t=e.id;return N(t,a,u)}))}:{totalCount:o,results:r}}))},_=function(e){var t=e.data,r=e.category,n=e.metadata,i=e.permission,a=e.linkedResources,u=void 0===a?{}:a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.A;return o.Observable.defer((function(){return c.createResource(n,t,r)})).pluck("data").switchMap((function(e){return o.Observable.defer((function(){return c.getResourcePermissions(e)})).map((function(e){return function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).concat(e)}(e,i)})).switchMap((function(t){return I(e,t,c).map((function(){return{id:e,permission:t}}))}))})).switchMap((function(e){var t=e.id,r=e.permission;return Object.keys(u).length>0?o.Observable.forkJoin(Object.keys(u).filter((function(e){return u[e].data&&"NODATA"!==u[e].data})).map((function(e){return M(t,e,u[e],r,c)}))).map((function(){return t})):o.Observable.of(t)}))},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.A;return o.Observable.defer((function(){return t.createCategory(e)}))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.data,n=e.permission,i=e.metadata,a=e.linkedResources,u=void 0===a?{}:a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.A,s=Object.keys(u);return o.Observable.forkJoin([o.Observable.defer((function(){return l.putResourceMetadataAndAttributes(t,i)})).switchMap((function(e){return r?o.Observable.defer((function(){return l.putResource(t,r)})):o.Observable.of(e)})).switchMap((function(e){return n?o.Observable.defer((function(){return I(t,n,l)})):o.Observable.of(e)})),(s.length>0?o.Observable.forkJoin.apply(o.Observable,E(s.map((function(e){return function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w.A;return o.Observable.defer((function(){return i.getResourceAttributes(e)})).switchMap((function(a){var u,c=null===(u=O()(a,{name:t}))||void 0===u?void 0:u.value;return(0,j.s)(c)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return"NODATA"===r.data?o.Observable.fromPromise(a.deleteResource(n)).catch((function(){return o.Observable.of("DUMMY")})).switchMap((function(){return o.Observable.fromPromise(a.updateResourceAttribute(e,t,"NODATA"))})):o.Observable.forkJoin([o.Observable.defer((function(){return a.putResource(n,r.data)})).switchMap((function(){return o.Observable.defer((function(){return a.updateResourceAttribute(e,t,D(n,r.tail))}))}))].concat(E(i?[I(n,i,a)]:[])))}(e,t,r,(0,j.s)(c),n,i):M(e,t,r,n,i)})).catch((function(o){return M(e,t,r,n,i,o)}))}(t,e,u[e],n,l)})))):o.Observable.of([])).switchMap((function(){return n?o.Observable.defer((function(){return function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.A;return T(e,(function(e){return!c()(Object.keys(t),e)})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===e.length?o.Observable.of([]):o.Observable.forkJoin(e.map((function(e){return I(e,r,n)})))}))}(t,u,n,l)})):o.Observable.of(-1)}))]).map((function(){return t}))},J=function(e){var t=e.id,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).deleteLinkedResources,n=void 0===r||r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.A;return(n?T(t,(function(){return!0}),i):o.Observable.of([])).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.Observable.forkJoin([t].concat(E(e)).map((function(e){return i.deleteResource(e)})))}))},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.A;return o.Observable.defer((function(){return r.searchListByAttributes(e,t)})).switchMap((function(e){if(!e||!g()(e,"ExtResourceList.Resource"))return o.Observable.of({results:[],totalCount:0});var n=g()(e,"ExtResourceList.Resource",[]),i=(d()(n)?n:[n]).map((function(e){return S(S({},p()(e,"Attributes")),{},{attributes:(t=e,r=g()(t,"Attributes.attribute"),n=d()(r)&&r||v()(r)&&[r],n&&n.reduce((function(e,t){return S(S({},e),{},R({},t.name,t.value))}),{})||{})});var t,r,n}));return(t.withPermissions?o.Observable.forkJoin(i.map((function(e){return o.Observable.defer((function(){return r.getResourcePermissions(e.id,{},!0)})).map((function(t){return S(S({},e),{},{permissions:t})}))}))):o.Observable.of(i)).map((function(t){return{results:t,totalCount:g()(e,"ExtResourceList.ResourceCount")}}))}))},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.name,n=e.value,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.A;return o.Observable.defer((function(){return i.updateResourceAttribute(t,r,n)})).switchMap((function(){return o.Observable.of(t)}))},$=r(779893),F={geostore:n},Z=function(e,t){F[e]=t},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"geostore";k.api=e},q=function(){var e;return(e=k.getApi()).getResource.apply(e,arguments)},Q=function(){var e;return(e=k.getApi()).createResource.apply(e,arguments)},Y=function(){var e;return(e=k.getApi()).createCategory.apply(e,arguments)},V=function(){var e;return(e=k.getApi()).getResources.apply(e,arguments)},X=function(){var e;return(e=k.getApi()).updateResource.apply(e,arguments)},ee=function(){var e;return(e=k.getApi()).updateResourceAttribute.apply(e,arguments)},te=function(){var e;return(e=k.getApi()).deleteResource.apply(e,arguments)};k={api:"geostore",addApi:Z,setApi:K,getApi:function(){return F[$.Ay.getConfigProp("persistenceApi")||k.api]},getResource:q,getResourceIdByName:function(){var e;return(e=k.getApi()).getResourceIdByName.apply(e,arguments)},getResourceDataByName:function(){var e;return(e=k.getApi()).getResourceDataByName.apply(e,arguments)},createResource:Q,createCategory:Y,getResources:V,updateResource:X,updateResourceAttribute:ee,deleteResource:te,searchListByAttributes:function(){var e;return(e=k.getApi()).searchListByAttributes.apply(e,arguments)}};const re=/^(45562|95947)$/.test(r.j)?k:null},191080:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(605556),o=r.n(n),i=r(499084),a=r.n(i),u=r(916589),c=r(628017),l=["locale"];function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=function(e){return(0,u.compose)((0,u.getContext)({locale:o().string}),(0,u.mapProps)((function(t){var r=t.locale,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,l);return p(p({},n),a()(e).reduce(function(e,t){return function(){var r=arguments.length>1?arguments[1]:void 0;return p(p({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},b({},r,e[r]&&(0,c.zH)(t,e[r])))}}(n,r),{}))})))}},531888:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(916589);const o=function(e,t,r){return(0,n.branch)((function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})[t]}),(0,n.withState)(e,t,r))}},814915:(e,t,r)=>{r.d(t,{A:()=>y});var n=r(223805),o=r.n(n),i=r(273517),a=r.n(i),u=r(8117),c=r(8571),l=r(164045),s=r(444003);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["settings","element","tabs","activeTab","width","groups","isLocalizedLayerStylesEnabled","setActiveTab","onUpdateParams","onRetrieveLayerData","realtimeUpdate"];function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(null,arguments)}var d=(0,l.A)(u.CI);const y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,r=e.element,n=void 0===r?{}:r,i=e.tabs,l=void 0===i?[]:i,y=e.activeTab,v=e.width,m=e.groups,g=e.isLocalizedLayerStylesEnabled,h=e.setActiveTab,O=void 0===h?function(){}:h,w=e.onUpdateParams,j=void 0===w?function(){}:w,P=e.onRetrieveLayerData,A=void 0===P?function(){}:P,S=e.realtimeUpdate,R=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,p);return a().createElement(u.fI,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},a().createElement(u.fv,{xs:12},a().createElement(u.so,{bsStyle:"tabs",activeKey:y,justified:!0},l.map((function(e){return a().createElement(d,{key:"ms-tab-settings-"+e.id,tooltip:a().createElement(c.A,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){return O(e.id)}},a().createElement(u.e6,{glyph:e.glyph}))})))),a().createElement(u.fv,{xs:12},l.filter((function(e){return e.id&&e.id===y})).filter((function(e){return e.Component})).map((function(e){var r,i;return a().createElement(e.Component,b({},R,{key:"ms-tab-settings-body-"+e.id,containerWidth:v,element:n,groups:m,nodeType:t.nodeType,settings:t,retrieveLayerData:A,isLocalizedLayerStylesEnabled:g,projection:null===(r=R.map)||void 0===r?void 0:r.projection,isCesiumActive:(null===(i=R.map)||void 0===i?void 0:i.visualizationMode)===s.Hd._3D,onChange:function(e,t){return o()(e)?j(e,S):j((r={},i=t,(n=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(n=e))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r),S);var r,n,i}}))}))))}},734068:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(273517),o=r.n(n),i=r(916589),a=r(175529),u=r(674336);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSelect,r=e.selectedNodes,n=e.updateMapEntries,i=void 0===n?function(){}:n,u=e.map;return o().createElement(a.A,{map:u,selectedNodes:r,onSelectNode:t,config:{hideOpacitySlider:!1,showFullTitle:!0,showOpacityTooltip:!0,showTitleTooltip:!0,sortable:!0,visualizationMode:null==u?void 0:u.visualizationMode,layerOptions:{legendOptions:{projection:null==u?void 0:u.projection,mapSize:null==u?void 0:u.size,mapBbox:null==u?void 0:u.bbox,WMSLegendOptions:"forceLabels:on",scaleDependent:!0,legendWidth:12,legendHeight:12},hideLegend:!1}},onChangeMap:function(e){i({layers:null==e?void 0:e.layers,groups:null==e?void 0:e.groups},"replace")}})}const l=(0,i.compose)(u.A)((function(e){return o().createElement(c,e)}))},674336:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(499084),o=r.n(n),i=r(324713),a=r.n(i),u=r(916589),c=r(112585),l=function(e){return"".concat(e.mapId?"maps[".concat(e.mapId,"]"):"map")};const s=(0,u.withHandlers)({changeLayerProperty:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.map,o=void 0===n?{}:n;return function(e,t,n){var i=a()(o.layers||[],{id:e});r("".concat(l(o),".layers[").concat(i,"].").concat(t),n)}},changeLayerPropertyByGroup:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.map,o=void 0===n?{}:n;return function(e,t,n){return o.layers.filter((0,c.lo)(e)).map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return a()(o.layers||[],{id:e})})).filter((function(e){return e>=0})).map((function(e){return r("".concat(l(o),".layers[").concat(e,"].").concat(t),n)}))}},changeGroupProperty:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.map,i=void 0===n?{}:n;return function(e,t,n){var u,c=i.groups?o()(i.groups):[],s=a()(c,(function(t){return e===t.id})),f=-1===s?c.length:s;"expanded"!==t||null!=c&&null!==(u=c[f])&&void 0!==u&&u.id||r("".concat(l(i),".groups[").concat(f,"].id"),e),r("".concat(l(i),".groups[").concat(f,"].").concat(t),n)}},updateMapEntries:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.map,o=void 0===n?{}:n;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.keys(e).map((function(n){return r("".concat(l(o),"[").concat(n,"]"),e[n],t)}))}}})},757104:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(916589),o=r(112585);function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const u=(0,n.compose)((0,n.withStateHandlers)((function(){return{selectedLayers:[],selectedGroups:[]}}),{onNodeSelect:function(e){var t=e.selectedLayers,r=void 0===t?[]:t,n=e.selectedGroups,a=void 0===n?[]:n;return function(e,t,n){var u=(0,o.BL)([].concat(i(r),i(a)),e,n),c="layer"===t?[].concat(i(r),[e]):r,l="group"===t?[].concat(i(a),[e]):a;return{selectedLayers:u.filter((function(e){return c.includes(e)})),selectedGroups:u.filter((function(e){return l.includes(e)}))}}}}),(0,n.withProps)((function(e){var t=e.selectedLayers,r=e.selectedGroups;return{selectedNodes:[].concat(i(t),i(r))}})))},4814:(e,t,r)=>{r.d(t,{A:()=>V});var n=r(858156),o=r.n(n),i=r(916589),a=r(112585),u=r(531888),c=r(548951),l=r(304995),s=r(875912),f=r(324713),p=r.n(f),b=r(605556),d=r.n(b),y=r(273517),v=r.n(y),m=r(8117),g=r(192016),h=r(711030),O=r(8571);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function R(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}var L=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return R(e=function(e,t,r){return t=A(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"renderLegend",(function(){return null})),R(e,"renderItemLabel",(function(e){return v().createElement("div",null,v().createElement("div",{key:"item-title"},e.title||e.name),v().createElement("div",null,v().createElement("small",{className:"text-muted",key:"item-key-description"},e.name)))})),R(e,"renderError",(function(){return e.props.element&&e.props.element.capabilities&&e.props.element&&e.props.element.capabilities.error?v().createElement(m.Fc,{bsStyle:"danger"},v().createElement(O.A,{msgId:"layerProperties.styleListLoadError"})):null})),R(e,"updateEntry",(function(t,r){var n=r.target.value;e.props.onChange(t,n)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=[{label:"Default Style",value:""}].concat((this.props.element.availableStyles||[]).map((function(t){return{label:e.renderItemLabel(t),value:t.name}})));return(this.props.element.style&&this.props.element.availableStyles&&p()(this.props.element.availableStyles,(function(t){return t.name===e.props.element.style})))>=0||!this.props.element.style||t.push({label:this.props.element.style,value:this.props.element.style}),v().createElement(m.xA,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},v().createElement("form",{ref:"style"},v().createElement(g.Ay.Creatable,{key:"styles-dropdown",options:t,isLoading:this.props.element&&this.props.element.capabilitiesLoading,value:this.props.element.style||"",onOpen:function(){!e.props.element||e.props.element.capabilities&&e.props.element.availableStyles||e.props.retrieveLayerData(e.props.element)},promptTextCreator:function(e){return v().createElement(O.A,{msgId:"layerProperties.styleCustom",msgParams:{value:e}})},onChange:function(t){e.updateEntry("style",{target:{value:t&&t.value||""}})}}),v().createElement("br",null),this.renderLegend(),this.renderError(),v().createElement(h.A,{bsStyle:"primary",style:{float:"right"},onClick:function(){return e.props.retrieveLayerData(e.props.element)}},v().createElement(m.e6,{glyph:"refresh"})," ",v().createElement(O.A,{msgId:"layerProperties.stylesRefreshList"})),v().createElement("br",null)))}}])&&j(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(v().Component);R(L,"propTypes",{retrieveLayerData:d().func,onChange:d().func,element:d().object,groups:d().array}),R(L,"defaultProps",{element:{},retrieveLayerData:function(){},onChange:function(){}});const C=L;var k=r(674336);const D=(0,i.withProps)((function(e){var t,r,n,o=e.map;return{nodes:(t=(0,a.u1)(o),r=t.layers,n=void 0===r?{}:r,(0,a.PR)(n.flat||[],n.groups||[]).groups)}}));var T=r(45388),I=r.n(T),M=r(434164),N=r(142974);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=function(e){var t=function(e){if("object"!=B(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const z=(0,i.mapPropsStream)((function(e){var t=(0,i.createEventHandler)(),r=t.stream,n=t.handler;return e.pluck("element").distinctUntilChanged((function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id===e.id})).switchMap((function(){return r.switchMap((function(e){return(0,M.aF)(e).map((function(e){return x(x({},(0,N.e9)(e)),{},{capabilitiesLoading:null})})).startWith({capabilitiesLoading:!0})})).catch((function(e){return I().Observable.of({capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:e},description:null})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return x(x({},t),{},{retrieveLayerData:n,element:x(x({},t.element),e)})}))}));var H=r(815425),J=r.n(H);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;for(var n in e)null!==e[n]&&"object"===G(e[n])&&(J()(e[n],t)&&r.apply(void 0,[e[n]]),W(e[n],t,r))};const $=(0,i.withProps)((function(e){var t=e.nodes,r=void 0===t?{}:t,n=e.editNode,o={};return n&&W(r,{id:n},(function(e){o=e})),{selectedNode:o}}));function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return(t=function(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=z(C),Y=(0,i.withProps)((function(e){return{tabs:(e.tabs||[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:s.A},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:e.settings&&"layers"===e.settings.nodeType,Component:l.A},{id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:e.settings&&"layers"===e.settings.nodeType&&e.element&&"wms"===e.element.type,Component:Q}]).filter((function(e){return!!e.visible}))}}));const V=(0,i.compose)(D,$,(0,i.withState)("settings","onUpdateSettings",{}),(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,r=void 0===t?{}:t,n=e.selectedNode,i=e.settings,u=void 0===i?{}:i;return{element:n,settings:K(K({},u),{},{nodeType:n&&n.nodes?"groups":"layers",options:{opacity:u.opacity>=0?u.opacity:n.opacity>=0?n.opacity:1}}),projection:r.projection,mapSize:r.size,mapBbox:r.bbox,groups:o()((0,a.u1)(r),"layers.groups")}})),(0,i.compose)(k.A,(0,i.withHandlers)({onUpdateNode:function(e){var t=e.changeLayerProperty,r=void 0===t?function(){}:t,n=e.changeGroupProperty,o=void 0===n?function(){}:n,i=e.editNode;return function(e,t,n){"layers"===t&&Object.keys(n).map((function(e){return r(i,e,n[e])})),"groups"===t&&Object.keys(n).map((function(e){return o(i,e,n[e])}))}}}),(0,i.withHandlers)({onUpdateParams:function(e){var t=e.settings,r=void 0===t?{}:t,n=e.onUpdateNode,o=void 0===n?function(){}:n;return function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&o(r.node,r.nodeType,K(K({},r.props),e))}}})),c.s$,(0,u.A)("activeTab","setActiveTab","general"),Y)},496463:(e,t,r)=>{r.d(t,{s:()=>o});var n=/rest\/geostore\/data\/(\d+)/,o=function(e){var t=decodeURIComponent(decodeURIComponent(e)),r=n.exec(t);return r&&!!r[0]&&r[1]}}}]);