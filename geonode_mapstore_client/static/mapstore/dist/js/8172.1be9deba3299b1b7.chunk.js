(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[8172],{4222(e,t,r){"use strict";r.d(t,{A:()=>ye});var n=r(273517),o=r.n(n),i=r(605556),a=r.n(i),l=r(916589),u=r(811668),c=r(8117),s=r(896067),f=r(593737),d=r.n(f),p=r(545567),m=r(995531),y=r(112585),v=r(989105),g=r(264053),b=r(102685),h=m.A.CancelToken,O=(0,l.compose)((0,l.withState)("fetchedItems","setFetchedItems",function(){return[]}),(0,l.withState)("loading","setLoading",!1),(0,l.withState)("fetchError","setFetchError",!1),(0,l.withState)("cancelTokenSource","setCancelTokenSource",null),(0,l.withHandlers)({performFetch:function(e){var t=e.filterData,r=e.setFetchedItems,n=e.setLoading,o=e.setFetchError,i=e.cancelTokenSource,a=e.setCancelTokenSource;return function(){var e=null==t?void 0:t.data,l=null==e?void 0:e.valuesFrom;if(o(!1),null==l)return null!=t&&t.items&&r(t.items),void n(!1);if(!e||!e.layer||!e.valueAttribute)return null!=t&&t.items&&r([]),void n(!1);if("features"!==e.dataSource)return null!=t&&t.items&&r(t.items),void n(!1);i&&i.cancel(),n(!0);var u,c=h.source();a(c);var s=String(l).trim();u="grouped"===s?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e||{},n=r.layer,o=r.valueAttribute,i=r.maxFeatures,a=void 0===i?20:i,l=r.sortByAttribute,u=r.sortOrder,c=void 0===u?"ASC":u;if(!n||!o)return Promise.resolve([]);var s=(0,y.cs)(n);if(!s)return Promise.resolve([]);var f=(0,v.H)({layerName:n.name,attribute:o,maxFeatures:a,startIndex:0,value:void 0,layerFilter:n.filter,sortByAttribute:l,sortOrder:c});return(0,g.p4)(s,f,{},{timeout:6e4,cancelToken:t.cancelToken},n).toPromise().then(function(e){var t=(("string"==typeof e?JSON.parse(e):e)||{}).values;return(void 0===t?[]:t).map(function(e){return{id:String(null!=e?e:""),label:String(null!=e?e:"")}}).filter(function(e){return""!==e.id})}).catch(function(e){if(!e.__CANCEL__)throw console.error("Error fetching filter data from WPS:",e),e;return[]})}(e,{cancelToken:c.token}):"single"===s?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e||{},n=r.layer,o=r.valueAttribute,i=r.labelAttribute,a=r.maxFeatures,l=void 0===a?20:a,u=r.sortByAttribute,c=r.sortOrder,s=void 0===c?"ASC":c;if(!n||!o)return Promise.resolve([]);var f={featureTypeName:n.name,filterType:"OGC",ogcVersion:"1.1.0",pagination:{startIndex:0,maxFeatures:l}};if(u&&(f.sortOptions={sortBy:u,sortOrder:"DESC"===s?"DESC":"ASC"}),null!=n&&n.filter&&(0,b.R9)(n.filter)){var d=(0,b.mA)([n.filter,f],"AND");Object.assign(f,d)}var m=[o];return i&&i!==o&&m.push(i),(0,p.Gw)(n,f,{propertyName:m,requestOptions:{cancelToken:t.cancelToken}}).toPromise().then(function(e){var t=(e||{}).features;return(void 0===t?[]:t).map(function(e){var t,r,n=null===(t=e.properties)||void 0===t?void 0:t[o],a=i?null===(r=e.properties)||void 0===r?void 0:r[i]:n;return{id:String(null!=n?n:""),label:String(null!=a?a:n||"")}}).filter(function(e){return""!==e.id})}).catch(function(e){if(!e.__CANCEL__)throw console.error("Error fetching filter data from WFS:",e),e;return[]})}(e,{cancelToken:c.token}):Promise.resolve([]),u.then(function(e){r(e),o(!1),n(!1),a(null)}).catch(function(e){e.__CANCEL__||(console.error("Error in filterWidget enhancer:",e),r([]),o(!0),n(!1)),a(null)})}}}),(0,l.lifecycle)({componentDidMount:function(){var e=this;this.debouncedFetch=d()(function(){e.props.performFetch()},100),this.props.performFetch()},componentDidUpdate:function(e){var t,r,n,o,i=this;t=e.filterData,r=this.props.filterData,n=(null==t?void 0:t.data)||{},o=(null==r?void 0:r.data)||{},(n.layer!==o.layer||n.valueAttribute!==o.valueAttribute||n.labelAttribute!==o.labelAttribute||n.maxFeatures!==o.maxFeatures||n.sortByAttribute!==o.sortByAttribute||n.sortOrder!==o.sortOrder||n.dataSource!==o.dataSource||n.valuesFrom!==o.valuesFrom||(null==t?void 0:t.items)!==(null==r?void 0:r.items))&&(this.debouncedFetch&&this.debouncedFetch.cancel(),this.debouncedFetch=d()(function(){i.props.performFetch()},100),this.debouncedFetch())},componentWillUnmount:function(){var e=this.props.cancelTokenSource;e&&e.cancel(),this.debouncedFetch&&this.debouncedFetch.cancel&&this.debouncedFetch.cancel()}}),(0,l.withProps)(function(e){var t=e.filterData,r=e.fetchedItems,n=e.loading,o=e.fetchError,i=(t||{}).data,a=void 0===i?{}:i;return{loading:n,selectableItems:"userDefined"===a.dataSource&&a.userDefinedItems?a.userDefinedItems.filter(function(e){return"filterList"===a.userDefinedType&&e.filter&&(0,b.R9)(e.filter)||"styleList"===a.userDefinedType&&e.style}).map(function(e){return{id:e.id,label:e.label||""}}):r||[],fetchError:o}}));const S=O;var w=r(672975),E=r(19708),A=function(e){var t=e.filterLabel,r=e.filterIcon,i=e.filterNameStyle,a=void 0===i?{}:i,l=e.className,u=void 0===l?"ms-filter-title":l,c=e.titleDisabled,s=void 0!==c&&c;return(0,n.useEffect)(function(){(0,E.N)()},[]),!t||s?null:o().createElement("span",{className:u,style:a},r&&o().createElement("i",{className:"fa fa-".concat(r),style:{marginRight:"5px"}}),t)};A.propTypes={filterLabel:a().string,filterIcon:a().string,filterNameStyle:a().object,className:a().string,titleDisabled:a().bool};const j=A;var P=r(8571),I=function(e){var t=e.items,r=void 0===t?[]:t,n=e.selectedValues,i=void 0===n?[]:n,a=e.onSelectionChange,l=e.selectionMode,u=void 0===l?"multiple":l,s=e.allowEmptySelection,f=void 0===s||s,d=r&&r.length>0,p="multiple"===u,m=p,y=d&&i.length===r.filter(function(e){return!e.disabled}).length,v=i&&i.length>0,g=f,b=p&&g;return d&&a&&(m||g)?o().createElement("div",{style:{display:"flex",justifyContent:"end",alignItems:"center",fontSize:"12px"}},p&&o().createElement(c.$n,{bsStyle:"link",bsSize:"sm",onClick:p?function(){if(a&&r&&0!==r.length){var e=r.filter(function(e){return!e.disabled}).map(function(e){return e.id});a(e)}}:void 0,disabled:!p||y},o().createElement("span",null,o().createElement(P.A,{msgId:"widgets.filterWidget.selectAll"}))),g?o().createElement(o().Fragment,null,b?o().createElement("span",null,"/"):null,o().createElement(c.$n,{bsStyle:"link",bsSize:"sm",onClick:v?function(){a&&a([])}:void 0,disabled:!v},o().createElement(P.A,{msgId:"widgets.filterWidget.clear"}))):null):null};I.propTypes={items:a().arrayOf(a().shape({id:a().oneOfType([a().string,a().number]).isRequired,label:a().string.isRequired,disabled:a().bool})),onSelectionChange:a().func,selectionMode:a().oneOf(["single","multiple"]),allowEmptySelection:a().bool};const T=I;var x=r(595535),C=r(785072),F=r.n(C),D=r(225613);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}F()(D.A,{insert:"head",singleton:!1}),D.A.locals;var R=function(e){var t=e.items,r=void 0===t?[]:t,n=e.selectionMode,i=void 0===n?"multiple":n,a=e.selectedValues,l=void 0===a?[]:a,u=e.onSelectionChange,s=void 0===u?function(){}:u,f=e.layoutDirection,d=void 0===f?"vertical":f,p=e.layoutMaxHeight,m="single"===i,y="horizontal"===d,v=m?c.sx:c.Sc,g=["ms-filter-checkbox-list-items","horizontal"===d?"_direction-horizontal":"_direction-vertical"].filter(Boolean).join(" "),b=p?{maxHeight:p,overflowY:"auto"}:void 0;return o().createElement(c.gE,{className:"ms-filter-checkbox-list"},o().createElement("div",{className:g,style:b},r.map(function(e){var t=e.id,r=e.label,n=e.description,i=e.disabled;return o().createElement(v,{inline:y,checked:l.includes(t),onChange:function(){return function(e){if(m)s([e]);else{var t=l.includes(e)?l.filter(function(t){return t!==e}):[].concat(function(e){if(Array.isArray(e))return _(e)}(r=l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e]);s(t)}var r}(t)},disabled:i},o().createElement("span",{className:"ms-filter-checkbox-list-item-label"},r),n?o().createElement("span",{className:"ms-filter-checkbox-list-item-description"},n):null)})))};R.propTypes={items:a().arrayOf(a().shape({id:a().oneOfType([a().string,a().number]).isRequired,label:a().string.isRequired,description:a().string,disabled:a().bool})),selectionMode:a().oneOf(["single","multiple"]),selectedValues:a().arrayOf(a().oneOfType([a().string,a().number])),onSelectionChange:a().func,layoutDirection:a().oneOf(["horizontal","vertical"]),layoutMaxHeight:a().oneOfType([a().number,a().string])};const L=R;var N=r(132672),k=r(267767),M=r(21342);function U(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}F()(M.A,{insert:"head",singleton:!1}),M.A.locals;var G=function(e){var t=e.items,r=void 0===t?[]:t,n=e.selectionMode,i=void 0===n?"multiple":n,a=e.selectedValues,l=void 0===a?[]:a,u=e.onSelectionChange,c=void 0===u?function(){}:u,s=e.layoutDirection,f=void 0===s?"vertical":s,d=e.layoutMaxHeight,p="single"===i,m="vertical"===f,y=function(e){var t=l.includes(e);if(p)return t&&1===l.length?void c([]):void c([e]);var r=t?l.filter(function(t){return t!==e}):[].concat(U(l),[e]);c(r)},v=function(e,t){return["ms-filter-button-list-item",e?"_is-active":void 0,t?"_is-disabled":"_pointer"].filter(Boolean)},g=d?{maxHeight:d,overflowY:"auto"}:void 0;return o().createElement(N.A,{column:!0,gap:"xs",className:"ms-filter-chip-list _padding-sm"},o().createElement(N.A,{component:"ul",gap:"xs",wrap:!m,column:m,className:"ms-filter-chip-list-items",style:g},r.map(function(e){var t=e.id,r=e.label,n=e.disabled,i=l.includes(t);return o().createElement(k.A,{key:t,component:"li",fontSize:"sm",role:p?"radio":"checkbox","aria-checked":i,tabIndex:n?-1:0,onClick:function(){return!n&&y(t)},onKeyDown:function(e){return function(e,t,r){r||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),y(t))}(e,t,n)},classNames:["ms-tag"].concat(U(v(i,n)))},r)})))};G.propTypes={items:a().arrayOf(a().shape({id:a().oneOfType([a().string,a().number]).isRequired,label:a().string.isRequired,disabled:a().bool})),selectionMode:a().oneOf(["single","multiple"]),selectedValues:a().arrayOf(a().oneOfType([a().string,a().number])),onSelectionChange:a().func,layoutDirection:a().oneOf(["horizontal","vertical"]),layoutMaxHeight:a().oneOfType([a().number,a().string])};const B=G;var W=r(192016),z=r(936093);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}F()(z.A,{insert:"head",singleton:!1}),z.A.locals;var Y=function(e){var t,r,i,a=e.items,l=void 0===a?[]:a,u=e.selectionMode,s=void 0===u?"multiple":u,f=e.selectedValues,d=e.placeholder,p=void 0===d?"Select...":d,m=e.onSelectionChange,y=void 0===m?function(){}:m,v=e.layoutMaxHeight,g="single"===s,b=Array.isArray(f)?f:f?[f]:[],h=(0,n.useMemo)(function(){return l.map(function(e){return{value:e.id,label:e.label,isDisabled:e.disabled}})},[l]),O=(0,n.useMemo)(function(){return g?h.find(function(e){return e.value===b[0]})||null:h.filter(function(e){return b.includes(e.value)})},[g,h,b]),S="number"==typeof v&&b.length>0,w=S?(t={},r="--filter-widget-dropdown-value-max-height",i="".concat(v,"px"),(r=function(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t):void 0,E=["ms-filter-widget-dropdown-list",S&&"ms-filter-widget-dropdown-list--scrollable-values"].filter(Boolean).join(" ");return o().createElement(c.gE,{className:E,style:w},o().createElement(W.Ay,{className:"ms-filter-widget-dropdown",clearable:g,multi:!g,closeOnSelect:g,options:h,value:O,placeholder:p,onChange:function(e){if(g)y(e?[e.value]:[]);else{var t=Array.isArray(e)?e.map(function(e){return e.value}):[];y(t)}}}))};Y.propTypes={items:a().arrayOf(a().shape({id:a().oneOfType([a().string,a().number]).isRequired,label:a().string.isRequired,disabled:a().bool})),selectionMode:a().oneOf(["single","multiple"]),selectedValues:a().arrayOf(a().oneOfType([a().string,a().number])),placeholder:a().string,onSelectionChange:a().func,layoutMaxHeight:a().number};const V=Y;var $=r(348317);function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){var t=e.items,r=void 0===t?[]:t,n=e.selectionMode,i=void 0===n?"multiple":n,a=e.selectedValues,l=void 0===a?[]:a,u=e.onSelectionChange,s=void 0===u?function(){}:u,f=e.layoutDirection,d=void 0===f?"vertical":f,p=e.layoutMaxHeight,m="single"===i,y=["ms-filter-switch-list-items","horizontal"===d?"_direction-horizontal":"_direction-vertical"].filter(Boolean).join(" "),v=p?{maxHeight:p,overflowY:"auto"}:void 0;return o().createElement(c.gE,{className:"ms-filter-switch-list"},o().createElement("div",{className:y,style:v},r.map(function(e){var t=e.id,r=e.label,n=e.disabled,i=l.includes(t);return o().createElement("div",{key:t,className:"ms-filter-switch-list-item"},o().createElement($.A,{checked:i,disabled:n,onChange:function(){return function(e,t){if(m)s(t?[]:[e]);else{var r=l.includes(e)?l.filter(function(t){return t!==e}):[].concat(function(e){if(Array.isArray(e))return Q(e)}(n=l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e]);s(r)}var n}(t,i)},className:"mapstore-switch-btn-xs"}),o().createElement("span",{className:"ms-filter-switch-list-item-label"},r))})))};Z.propTypes={items:a().arrayOf(a().shape({id:a().oneOfType([a().string,a().number]).isRequired,label:a().string.isRequired,disabled:a().bool})),selectionMode:a().oneOf(["single","multiple"]),selectedValues:a().arrayOf(a().oneOfType([a().string,a().number])),onSelectionChange:a().func,layoutDirection:a().oneOf(["horizontal","vertical"]),layoutMaxHeight:a().oneOfType([a().number,a().string])};const X=Z;var J=function(e){var t=e.className;return o().createElement("div",{className:t,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",textAlign:"center",color:"#999"}},o().createElement(c.e6,{glyph:"info-sign",style:{fontSize:"48px",marginBottom:"16px"}}),o().createElement("div",{style:{fontSize:"14px",maxWidth:"400px"}},o().createElement(P.A,{msgId:"widgets.filterWidget.noSelectableItems"})))};J.propTypes={className:a().string};const K=J;var ee=r(816196),te=r(168995),re=r(549112);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oe.apply(null,arguments)}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach(function(t){le(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function le(e,t,r){return(t=function(e){var t=function(e){if("object"!=ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var se=function(e){var t=e.interactions,r=void 0===t?[]:t,i=e.activeTargets,a=void 0===i?{}:i;return(0,n.useMemo)(function(){return r.filter(function(e){return e.plugged}).map(function(e){return(0,re._7)(e.target.nodePath)}).filter(function(e){return Object.entries(a).some(function(t){var r=ue(t,2),n=r[0];return r[1]&&e===(0,re._7)(n)})})},[a,r]).length>0?null:o().createElement(te.A,{bsStyle:"warning",glyph:"warning-sign",placement:"top",popoverStyle:{maxWidth:450},text:o().createElement(x.A,{msgId:0===r.length?"widgets.filterWidget.noInteractionsInfo":"widgets.filterWidget.noTargetsInfo"})})},fe=function(e){var t=e.interactions,r=void 0===t?[]:t,i=e.activeTargets,a=void 0===i?{}:i,l=e.targetsWithDisabledFilter,u=void 0===l?{}:l;return 0===(0,n.useMemo)(function(){return r.filter(function(e){return e.plugged}).map(function(e){return(0,re._7)(e.target.nodePath)}).filter(function(e){var t=Object.entries(a).some(function(t){var r=ue(t,2),n=r[0];return r[1]&&e===(0,re._7)(n)}),r=!0===u[e];return t&&r})},[a,r,u]).length?null:o().createElement(te.A,{bsStyle:"warning",glyph:"warning-sign",placement:"top",popoverStyle:{maxWidth:450},text:o().createElement(x.A,{msgId:"widgets.filterWidget.connectedLayerFilterDisabledInfo"})})},de=(0,u.connect)()(function(e){var t=e.applyStyleOutOfSync,r=void 0===t?{}:t,i=e.dispatch,a=ue((0,n.useState)(r),2),l=a[0],u=a[1],f=(0,n.useRef)(null);(0,n.useEffect)(function(){return f.current&&clearTimeout(f.current),f.current=setTimeout(function(){u(r),f.current=null},300),function(){f.current&&clearTimeout(f.current)}},[r]);var d=l.showBanner,p=l.actionParams;return d&&p?o().createElement(c.N,{placement:"top",overlay:o().createElement(c.m_,{id:"filter-style-out-of-sync-hover"},o().createElement(P.A,{msgId:"widgets.filterWidget.clickToSeeInfo"}))},o().createElement("span",null,o().createElement(te.A,{bsStyle:"warning",glyph:"warning-sign",placement:"top",popoverStyle:{maxWidth:450},trigger:["click"],text:o().createElement("div",null,o().createElement(x.A,{msgId:"widgets.filterWidget.styleChangedByWidgetInfo"}),o().createElement("div",{style:{marginTop:8}},o().createElement(c.$n,{bsStyle:"primary",bsSize:"small",onClick:function(){return i((0,s.K)(p.widgetId,p.target,p.filterId))}},o().createElement(P.A,{msgId:"widgets.filterWidget.applyStyleFromWidgetButton"}))))}))):null}),pe={checkbox:L,button:B,dropdown:V,switch:X},me=function(e){var t,r,n,i,a,l,u,s=e.className,f=e.filterData,d=e.selections,p=void 0===d?[]:d,m=e.interactions,y=void 0===m?[]:m,v=e.activeTargets,g=void 0===v?{}:v,b=e.targetsWithDisabledFilter,h=void 0===b?{}:b,O=e.applyStyleOutOfSync,S=void 0===O?{}:O,E=e.showNoTargetsInfo,A=e.onSelectionChange,I=void 0===A?function(){}:A,x=e.loading,C=void 0!==x&&x,F=e.missingParameters,D=void 0!==F&&F,_=e.selectableItems,R=void 0===_?[]:_,L=e.fetchError,N=void 0!==L&&L;if(!f)return null;var k=f.layout,M=void 0===k?{}:k,U=pe[null!==(t=M.variant)&&void 0!==t?t:"checkbox"];if(!U)throw new Error("Unsupported filter variant: ".concat(M.variant));var q=!0===M.forceSelection,G=!(0,ee.TO)(f,p||[]);if(D)return o().createElement("div",{className:[s].filter(Boolean).join(" ")},o().createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",textAlign:"center",color:"#999"}},o().createElement(c.e6,{glyph:"info-sign",style:{fontSize:"48px",marginBottom:"16px"}}),o().createElement("div",{className:"filter-view-widget-missing-parameter",style:{fontSize:"14px",maxWidth:"400px"}},o().createElement(P.A,{msgId:"widgets.filterWidget.missingParametersMessage"}))));if(N)return o().createElement("div",{className:["ms-filter-builder-mock-previews",s].filter(Boolean).join(" ")},o().createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",textAlign:"center"}},o().createElement(c.e6,{glyph:"warning-sign",style:{fontSize:"48px",marginBottom:"16px"}}),o().createElement("div",{style:{fontSize:"14px",maxWidth:"400px"}},o().createElement(P.A,{msgId:"widgets.filterWidget.fetchError"}))));var B=ae(ae(ae(ae({},(null===(r=M.titleStyle)||void 0===r?void 0:r.fontSize)&&{fontSize:"".concat(M.titleStyle.fontSize,"px")}),(null===(n=M.titleStyle)||void 0===n?void 0:n.fontWeight)&&{fontWeight:M.titleStyle.fontWeight}),(null===(i=M.titleStyle)||void 0===i?void 0:i.fontStyle)&&{fontStyle:M.titleStyle.fontStyle}),(null===(a=M.titleStyle)||void 0===a?void 0:a.textColor)&&{color:M.titleStyle.textColor}),W=null===(l=M.showSelectAll)||void 0===l||l,z=!M.titleDisabled,H=ae(ae({position:"relative"},M.backgroundColor&&{backgroundColor:M.backgroundColor}),M.backgroundColor&&{padding:"12px",borderRadius:"4px"}),Y=null===(u=null!=E?E:M.showNoTargetsInfo)||void 0===u||u;return o().createElement("div",{className:["ms-filter-builder-mock-previews",s].filter(Boolean).join(" "),style:H},C&&o().createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:10}},o().createElement(w.A,null)),o().createElement("div",{className:"ms-filter-selector-header"},z?o().createElement(j,{key:f.id+"-title",filterLabel:M.label,filterIcon:M.icon,filterNameStyle:B,className:"ms-filter-title"}):o().createElement("span",{className:"ms-filter-title",key:f.id+"-title"}),G&&o().createElement(c.N,{placement:"top",overlay:o().createElement(c.m_,{id:"ms-filter-force-selections-tooltip-".concat((null==f?void 0:f.id)||"default")},o().createElement(P.A,{msgId:"widgets.filterWidget.forceSelectionEnabledTooltip"}))},o().createElement("span",{style:{display:"inline-flex",alignItems:"center"}},o().createElement(c.e6,{glyph:"warning-sign",style:{color:"#d9534f"}}))),Y?o().createElement(se,{key:f.id+"-no-targets-info",interactions:y,activeTargets:g}):null,Y?o().createElement(fe,{key:f.id+"-disabled-filter-info",interactions:y,activeTargets:g,targetsWithDisabledFilter:h}):null,Y?o().createElement(de,{key:f.id+"-apply-style-out-of-sync-info",applyStyleOutOfSync:S}):null,W&&o().createElement(T,{key:f.id+"-select-all",items:R,selectedValues:p||[],onSelectionChange:I,selectionMode:M.selectionMode,allowEmptySelection:!q})),(null==R?void 0:R.length)>0?o().createElement(U,oe({key:f.id,items:R,selectionMode:M.selectionMode,selectedValues:p||[],onSelectionChange:function(e){0===(null==e?void 0:e.length)&&M.forceSelection||I(e)}},"button"===M.variant||"checkbox"===M.variant||"switch"===M.variant?{layoutDirection:M.direction,layoutMaxHeight:M.maxHeight}:"dropdown"===M.variant?{layoutMaxHeight:M.maxHeight}:{})):C?null:o().createElement(K,{className:"ms-filter-view-no-selectable-items"}))};me.propTypes={className:a().string,showNoTargetsInfo:a().bool,interactions:a().array,activeTargets:a().object,targetsWithDisabledFilter:a().object,applyStyleOutOfSync:a().shape({showBanner:a().bool,actionParams:a().shape({widgetId:a().string,target:a().string,filterId:a().string})}),filterData:a().shape({id:a().string.isRequired,label:a().string,layout:a().shape({variant:a().string.isRequired,icon:a().string,selectionMode:a().string,direction:a().oneOf(["horizontal","vertical"]),maxHeight:a().oneOfType([a().number,a().string])})}),selections:a().array,onSelectionChange:a().func,loading:a().bool,missingParameters:a().bool,selectableItems:a().array,fetchError:a().bool};const ye=(0,l.compose)(S)(me)},19708(e,t,r){"use strict";r.d(t,{N:()=>o});var n=!1,o=function(){return n?Promise.resolve():r.e(8033).then(r.bind(r,878033)).then(function(){return document.fonts.load("1rem FontAwesome").then(function(){return n=!0})})}},21342(e,t,r){"use strict";r.d(t,{A:()=>i});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,"/*\n * Copyright 2025, GeoSolutions.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n */\n.ms-filter-chip-list-items .ms-filter-button-list-item.ms-tag {\n  display: inline-flex;\n  align-self: flex-start;\n  background-color: #eee;\n  border-color: #eee;\n  color: #333;\n}\n.ms-filter-chip-list-items .ms-filter-button-list-item.ms-tag._is-active {\n  background-color: var(--ms-primary) !important;\n  border-color: var(--ms-primary) !important;\n  color: #fff !important;\n}\n",""]);const i=o},50173(e,t,r){"use strict";r.d(t,{A:()=>l});var n=r(273517),o=r.n(n),i=r(444003);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(null,arguments)}const l=function(e){return function(t){var r;return o().createElement(e,a({mapType:(0,i.Jq)(null==t||null===(r=t.map)||void 0===r?void 0:r.visualizationMode)},t))}}},102179(e,t,r){"use strict";r.d(t,{A:()=>f});var n=r(916589),o=r(549112);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=(0,n.compose)((0,n.withPropsOnChange)(["dependencies","data","charts"],function(){return function(e){var t=e.dependencies,r=void 0===t?{}:t,n=e.xAxisOpts,i=e.yAxisOpts,l=e.layout,u=void 0===l?{}:l,s={start:r["dimension.currentTime"],end:r["dimension.offsetTime"]};if(!s||!s.start&&!s.end)return{layout:u};var f=(0,o.Q2)({xAxisOpts:n,yAxisOpts:i},s);return f&&0!==f.length?{layout:c(c({},u),{},{shapes:[].concat(a((null==u?void 0:u.shapes)||[]),a(f))})}:{layout:u}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}))},138629(e,t,r){"use strict";r.d(t,{A:()=>p});var n=r(916589),o=r(50173),i=r(367091),a=r(509327),l=r(761583),u=r(358132),c=r(552749),s=r(733053),f=r(475223),d=r(437430);const p=(0,n.compose)(c.A,(0,i.A)(0),o.A,d.A,u.A,s.Yl,s.iI,a.A,l.Y)(f.A)},159686(e,t,r){"use strict";r.d(t,{A:()=>d});var n=r(916589),o=r(245528),i=r(45388),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=(0,n.mapPropsStreamWithConfig)(o.A);const d=(0,n.compose)((0,n.defaultProps)({dataStreamFactory:function(){return a().Observable.of({})}}),f(function(e){return e.take(1).switchMap(function(t){return t.dataStreamFactory(e.startWith(t),t)}).combineLatest(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(c({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),e)})}))},193670(e,t,r){"use strict";r.d(t,{A:()=>s});var n=r(273517),o=r.n(n),i=r(900636);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(e){var t=e.updateProperty,r=void 0===t?function(){}:t,n=e.legendProps,a=void 0===n?{}:n,l=e.currentZoomLvl,c=e.disableOpacitySlider,s=void 0!==c&&c,f=e.disableVisibility,d=void 0!==f&&f,p=e.legendExpanded,m=void 0!==p&&p,y=e.scales,v=e.language,g=e.currentLocale,b=e.map,h=void 0===b?{layers:[],groups:[]}:b;return o().createElement(i.A,{map:h,theme:"legend",config:{sortable:!1,showFullTitle:!0,hideOpacitySlider:s,hideVisibilityButton:d,expanded:!0===m||void 0,language:v,currentLocale:g,scales:y,zoom:l,layerOptions:{legendOptions:u(u({},a),{},{projection:null==h?void 0:h.projection,mapSize:null==h?void 0:h.size,mapBbox:null==h?void 0:h.bbox}),hideFilter:!0}},onChangeMap:function(e){r("map",e)}})}},223062(e,t,r){"use strict";r.d(t,{$A:()=>L,$P:()=>Se,AM:()=>te,AW:()=>z,Ap:()=>X,Bb:()=>we,Bo:()=>Te,CS:()=>_e,DB:()=>N,Dt:()=>Pe,EV:()=>l,Fc:()=>K,Gs:()=>oe,Jd:()=>ne,Js:()=>ue,Ke:()=>pe,Kh:()=>de,Lp:()=>T,MI:()=>I,Mj:()=>g,PN:()=>M,Q5:()=>k,QJ:()=>C,Ro:()=>F,Rx:()=>x,T:()=>m,TF:()=>d,TK:()=>P,TS:()=>je,Tk:()=>Ie,Tq:()=>E,Ur:()=>V,Vq:()=>xe,Wu:()=>he,XD:()=>Re,Xb:()=>O,YX:()=>se,Zi:()=>me,Zs:()=>U,Zv:()=>fe,bA:()=>De,bB:()=>ve,bY:()=>Fe,cH:()=>W,cL:()=>Ee,ds:()=>h,eQ:()=>s,et:()=>J,g:()=>re,g5:()=>R,g8:()=>H,gJ:()=>i,hA:()=>Oe,hT:()=>le,hX:()=>be,hr:()=>a,hz:()=>G,j3:()=>w,jR:()=>Q,k8:()=>v,kR:()=>q,lS:()=>ee,m5:()=>f,mj:()=>$,pp:()=>p,pr:()=>c,qG:()=>Z,qS:()=>ae,qT:()=>b,qi:()=>y,qq:()=>_,qu:()=>ye,rQ:()=>B,ue:()=>Y,vH:()=>u,vT:()=>ce,wK:()=>Ce,wd:()=>ie,y$:()=>j,yP:()=>ge,yq:()=>S,yz:()=>D,ze:()=>A});var n=r(995531);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i="ADD_FILTER_FIELD",a="REMOVE_FILTER_FIELD",l="UPDATE_FILTER_FIELD",u="UPDATE_EXCEPTION_FIELD",c="ADD_GROUP_FIELD",s="UPDATE_LOGIC_COMBO",f="REMOVE_GROUP_FIELD",d="CHANGE_CASCADING_VALUE",p="EXPAND_ATTRIBUTE_PANEL",m="EXPAND_SPATIAL_PANEL",y="QUERYFORM:EXPAND_CROSS_LAYER",v="QUERYFORM:SET_CROSS_LAYER_PARAMETER",g="QUERYFORM:RESET_CROSS_LAYER_FILTER",b="SELECT_SPATIAL_METHOD",h="SELECT_VIEWPORT_SPATIAL_METHOD",O="UPDATE_GEOMETRY",S="SELECT_SPATIAL_OPERATION",w="CHANGE_SPATIAL_ATTRIBUTE",E="CHANGE_SPATIAL_FILTER_VALUE",A="REMOVE_SPATIAL_SELECT",j="SHOW_SPATIAL_DETAILS",P="QUERY_FORM_SEARCH",I="QUERY_FORM_RESET",T="SHOW_GENERATED_FILTER",x="CHANGE_DWITHIN_VALUE",C="ZONE_SEARCH",F="ZONE_SEARCH_ERROR",D="ZONE_FILTER",_="ZONE_CHANGE",R="ZONES_RESET",L="SIMPLE_FILTER_FIELD_UPDATE",N="ADD_SIMPLE_FILTER_FIELD",k="REMOVE_SIMPLE_FILTER_FIELD",M="REMOVE_ALL_SIMPLE_FILTER_FIELDS",U="UPDATE_FILTER_FIELD_OPTIONS",q="LOADING_FILTER_FIELD_OPTIONS",G="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",B="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",W="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",z="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD_OPTIONS",H="SET_AUTOCOMPLETE_MODE",Y="TOGGLE_AUTOCOMPLETE_MENU",V="QUERYFORM:LOAD_FILTER",$="QUERYFORM:UPSERT_FILTERS",Q="QUERYFORM:REMOVE_FILTERS",Z="QUERYFORM:CHANGE_MAP_EDITOR",X=function(e){return{type:Z,mapData:e}};function J(e){return{type:i,groupId:e}}function K(e,t){return{type:c,groupId:e,index:t}}function ee(e){return{type:a,rowId:e}}function te(e,t){return{type:Y,rowId:e,status:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function re(e,t,r,n){return{type:l,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function ne(e,t){return{type:u,rowId:e,exceptionMessage:t}}function oe(e,t){return{type:s,groupId:e,logic:t}}function ie(e){return{type:H,status:e}}function ae(e){return{type:f,groupId:e}}function le(e){return{type:d,attributes:e}}function ue(e){return{type:p,expand:e}}function ce(e){return{type:m,expand:e}}function se(e){return{type:y,expand:e}}function fe(e,t){return{type:v,key:e,value:t}}function de(e,t){return{type:b,fieldName:t,method:e}}function pe(){return{type:h}}function me(e){return{type:O,geometry:e}}function ye(e,t){return{type:S,fieldName:t,operation:e}}function ve(e){return{type:w,attribute:e}}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:E,value:a,collectGeometries:n,options:i,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function be(){return{type:A}}function he(e){return{type:j,show:e}}function Oe(e){return{type:x,distance:e}}function Se(e,t){return{type:P,searchUrl:e,filterObj:t}}function we(e){return{type:V,filter:e}}function Ee(e){return{type:I,skip:e}}function Ae(e,t){return{type:F,error:e,id:t}}function je(e,t){return{type:C,active:e,id:t}}function Pe(e,t,r){return function(i){return n.A.post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then(function(n){var a=n.data;if("object"!==o(a))try{a=JSON.parse(a)}catch(n){i(Ae("Search result broken ("+e+":   "+t+"): "+n.message,r))}i(function(e,t){return{type:D,data:e,id:t}}(a,r)),i(je(!1,r))}).catch(function(e){i(Ae(e,r))})}}function Ie(e,t){return{type:_,id:e,value:t}}function Te(e){return{type:G,rowId:(new Date).getTime(),groupId:e}}function xe(e,t,r,n){return{type:B,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function Ce(e){return{type:W,rowId:e}}function Fe(){return{type:g}}function De(e,t){return{type:q,status:e,filterField:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function _e(e,t,r){return{type:U,filterField:e,options:t,valuesCount:r}}function Re(e,t,r){return{type:z,filterField:e,options:t,valuesCount:r}}},225613(e,t,r){"use strict";r.d(t,{A:()=>i});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,".ms-filter-checkbox-list-items .checkbox label {\n  display: flex;\n  align-items: center;\n}\n.ms-filter-checkbox-list-items .checkbox label input {\n  margin-top: 0px;\n}\n.ms-filter-checkbox-list-items .checkbox label .ms-filter-checkbox-list-item-label {\n  font-size: 12px;\n}\n.ms-filter-checkbox-list-items .radio label {\n  display: flex;\n  align-items: center;\n}\n.ms-filter-checkbox-list-items .radio label input {\n  margin-top: -2px;\n}\n.ms-filter-checkbox-list-items .radio label .ms-filter-checkbox-list-item-label {\n  font-size: 12px;\n}\n",""]);const i=o},230454(e,t,r){"use strict";r.d(t,{A:()=>c});var n=r(273517),o=r.n(n),i=r(8117),a=r(605556),l=r(8571);function u(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.messageId,a=e.msgParams,u=void 0===a?{}:a;return o().createElement("div",{className:"ms-widget-empty-message"},o().createElement(i.e6,{glyph:r}),"Â  ",o().createElement(l.A,{msgId:n,msgParams:u}))}u.propTypes={messageId:a.PropTypes.string,glyph:a.PropTypes.string};const c=u},323930(){},332222(e,t,r){"use strict";r.d(t,{A:()=>n});const n=(0,r(916589).withState)("confirmDelete","toggleDeleteConfirm",!1)},367867(e,t,r){"use strict";r.d(t,{A:()=>p});var n=r(916589),o=r(58884),i=r(356513),a=r.n(i),l=["traces"];function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(e){var t=e.dependencies,r=void 0===t?{}:t,n=e.options,i=e.layer,l=void 0===i?{}:i,u=(0,o.rz)(l,r),c=a()(Object.keys(u||{}),function(){return"viewparams"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()}),f=u&&c&&u[c];return{options:f?s(s({},n),{},{viewParams:f}):n}};const p=(0,n.compose)((0,n.withPropsOnChange)(["dependencies","options","traces"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.traces,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return t?{traces:t.map(function(e){return s(s({},e),d(s(s({},e),{},{dependencies:r.dependencies})))})}:d(r)}))},370561(e,t,r){"use strict";r.d(t,{A:()=>c});var n=r(39128),o=r.n(n),i=r(325177),a=r(264053);function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const c=function(e,t){var r,n,u,c,s,f,d,p,m,y,v,g,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=arguments.length>3?arguments[3]:void 0;return(0,a.p4)(e,(n=(r=t).featureType,u=r.aggregationAttribute,s=void 0===(c=r.classificationAttribute)?[]:c,d=void 0===(f=r.groupByAttributes)?[]:f,p=r.aggregateFunction,m=r.viewParams,v=void 0===(y=r.filter)?"":y,g="<wfs:GetFeature ".concat(m?'viewParams="'.concat(m,'"'):"",' outputFormat="GML2" service="WFS" version="1.0.0">')+'<wfs:Query typeName="'.concat(n,'">').concat(v,"</wfs:Query></wfs:GetFeature>"),(0,a.Yy)("gs:Aggregate",[(0,i.XH)("features",(0,i.Nj)("text/xml","http://geoserver/wfs","POST",g)),(0,i.XH)("aggregationAttribute",(0,i.oW)((0,i.mC)(u)))].concat(l(o()(p).map(function(e){return(0,i.XH)("function",(0,i.oW)((0,i.mC)(e)))})),[(0,i.XH)("singlePass",(0,i.oW)((0,i.mC)("false")))],l(o()(d).map(function(e){return(0,i.XH)("groupByAttributes",(0,i.oW)((0,i.mC)(e)))})),l(o()(s).map(function(e){return(0,i.XH)("groupByAttributes",(0,i.oW)((0,i.mC)(e)))}))),(0,i.mk)((0,i.Cs)("result","application/json")))),{},b,h)}},397619(e,t,r){"use strict";r.d(t,{o$:()=>F,jZ:()=>x,bU:()=>C,qP:()=>T,rk:()=>D});var n=r(916589);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=(0,n.compose)((0,n.withProps)(function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,a=void 0===o?[]:o,l=e.toggleMaximize,u=void 0===l?function(){}:l,c=e.dataGrid,s=void 0===c?{}:c,f=e.toolsOptions;return{widgetTools:(void 0===f?{}:f).showMaximize?[].concat((t=a,function(e){if(Array.isArray(e))return i(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:n.widget?"resize-small":"resize-full",target:"icons",tooltipId:"widgets.widget.menu.".concat(n.widget?"minimize":"maximize"),tooltipPosition:"right",visible:!s.static,onClick:function(){return u()}}]):a}}));function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=r(273517),d=r.n(f),p=r(256951),m=function(e){return"icons"===e.target},y=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(m).length>0},v=r(819684);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var b=r(8117),h=r(8571),O=r(164045);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var w=function(e){var t=e.target,r=e.visible;return(void 0===r||r)&&"menu"===t},E=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(w).length>0},A=(0,O.A)(b.Dr);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){return"tools"===e.target},I=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(P).length>0},T=function(){return(0,n.compose)((0,n.withProps)(function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,l=void 0===a?{}:a,u=e.canEdit,s=e.updateProperty,f=void 0===s?function(){}:s,d=e.id,p=e.hide,m=void 0!==p&&p;return{widgetTools:l.showHide?[].concat((t=i,function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"lock",target:"menu",active:m,textId:m?"widgets.widget.menu.unhide":"widgets.widget.menu.hide",tooltipId:m?"widgets.widget.menu.unhideDescription":"widgets.widget.menu.hideDescription",visible:!n.widget&&u,onClick:function(){return f(d,"hide",!m)}}]):i}}))},x=function(){return(0,n.withProps)(function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.dataGrid,i=void 0===o?{}:o,a=e.canEdit,u=e.onEdit,c=void 0===u?function(){}:u,s=e.toggleDeleteConfirm,f=void 0===s?function(){}:s;return{widgetTools:a?[].concat((t=n,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pencil",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.edit",onClick:function(){return c()}},{glyph:"trash",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.delete",onClick:function(){return f(!0)}}]):n}})},C=function(){return(0,n.withProps)(function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.data,i=e.title,a=e.exportCSV,l=void 0===a?function(){}:a;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return u(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"download",glyphClassName:"exportCSV",target:"menu",textId:"widgets.widget.menu.downloadData",disabled:!o||!o.length,onClick:function(){return l({data:o,title:i})}}])}})},F=function(){return(0,n.compose)((0,n.compose)((0,n.withProps)(function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,l=void 0===a?{}:a,u=e.updateProperty,c=void 0===u?function(){}:u,f=e.id,d=e.dataGrid,p=void 0===d?{}:d;return{widgetTools:l.showPin?[].concat((t=i,function(e){if(Array.isArray(e))return s(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pushpin",bsStyle:p.static&&"primary",glyphClassName:p.static?"active":void 0,tooltipId:p.static?"widgets.widget.menu.unpin":"widgets.widget.menu.pin",target:"icons",visible:!n.widget,onClick:function(){return c(f,"dataGrid.static",!p.static)}}]):i}})),(0,n.compose)((0,n.withProps)(function(e){var t,r=e.maximized,n=void 0===r?{}:r,i=e.widgetTools,a=void 0===i?[]:i,l=e.dataGrid,u=void 0===l?{}:l,c=e.toggleCollapse,s=void 0===c?function(){}:c,f=e.toolsOptions;return{widgetTools:(void 0===f?{}:f).showCollapse?[].concat((t=a,function(e){if(Array.isArray(e))return o(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"minus",target:"icons",tooltipId:"widgets.widget.menu.collapse",visible:!n.widget&&!u.static,onClick:function(){return s()}}]):a}})),a,(0,n.compose)((0,n.withProps)(function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.title,i=e.description,a=e.widgetType;return{widgetTools:i&&"text"!==a?[].concat((t=n,function(e){if(Array.isArray(e))return g(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"question-sign",popover:{title:o,trigger:!0,text:i,id:(0,v.slug)(o)},target:"icons"}]):n}})))},D=function(){return(0,n.compose)((0,n.compose)((0,n.withPropsOnChange)(["topLeftItems","widgetTools"],function(e){var t,r=e.topLeftItems,n=void 0===r?[]:r,o=e.widgetTools;return{topLeftItems:I(o)?[].concat((t=n,function(e){if(Array.isArray(e))return j(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[d().createElement(p.A,{btnGroupProps:{style:{position:"absolute",left:14}},btnDefaultProps:{className:"no-border",bsSize:"small",bsStyle:"link",style:{paddingLeft:4,paddingRight:4}},buttons:o.filter(P)})]):n}})),(0,n.compose)((0,n.withPropsOnChange)(["icons","widgetTools"],function(e){var t=e.icons,r=void 0===t?[]:t,n=e.widgetTools;return{icons:y(n)?d().createElement(p.A,{btnDefaultProps:{className:"no-border",bsSize:"xs",bsStyle:"link"},buttons:n.filter(m)}):r}})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,r=void 0===t?"widget-menu":t,o=e.menuIcon,i=void 0===o?"option-vertical":o;return(0,n.withProps)(function(e){var t,n=e.widgetTools,o=e.topRightItems,a=void 0===o?[]:o,l=e.items,u=void 0===l?[]:l,c=e.layer,s=e.id,f=e.map,p=e.widgetType;return{topRightItems:E(n)?[].concat((t=a,function(e){if(Array.isArray(e))return S(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[d().createElement(b._O,null,d().createElement(b.gf,{pullRight:!0,bsStyle:"default",className:r,title:d().createElement(b.e6,{glyph:i}),noCaret:!0,id:"dropdown-no-caret"},n.filter(w).map(function(e,t){var r=e.onClick,n=void 0===r?function(){}:r,o=e.disabled,i=void 0!==o&&o,a=e.glyph,l=e.glyphClassName,u=e.text,c=e.textId,s=e.tooltipId,f=e.active;return d().createElement(A,{active:f,tooltipId:s,onSelect:n,disabled:i,eventKey:t},d().createElement(b.e6,{className:l,glyph:a}),c?d().createElement(h.A,{msgId:c}):u)}),u.map(function(e){return d().createElement(e.Component,{key:e.name,layer:c,widgetId:s,map:f,widgetType:p,itemComponent:function(e){return d().createElement(A,e,d().createElement(b.e6,{glyph:e.glyph}),d().createElement(h.A,{msgId:e.textId}))}})})))]):a}})}())}},437430(e,t,r){"use strict";r.d(t,{A:()=>p});var n=r(273517),o=r.n(n),i=r(605556),a=r.n(i),l=r(6683);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(e){return function(t){var r,i,a,u=(null==t||null===(r=t.map)||void 0===r?void 0:r.projection)||"EPSG:3857",c=(null==t||null===(i=t.map)||void 0===i||null===(i=i.mapOptions)||void 0===i||null===(i=i.view)||void 0===i?void 0:i.DPI)||null,f=null==t||null===(a=t.map)||void 0===a||null===(a=a.mapOptions)||void 0===a||null===(a=a.view)||void 0===a?void 0:a.scales,d=(0,n.useMemo)(function(){return f?(0,l.C$)(f,u,c):null},[f,u,c]),p=d?s(s({},t),{},{map:s(s({},t.map),{},{mapOptions:s(s({},t.map.mapOptions),{},{view:s(s({},t.map.mapOptions.view),{},{resolutions:d})})})}):t;return o().createElement(e,p)}};d.propTypes={Component:a().element};const p=d},452005(e,t,r){"use strict";r.d(t,{A:()=>v});var n=r(916589),o=r(370561),i=r(159686),a=r(45388),l=r.n(a),u=r(112585),c=r(549112);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,n=e.GroupByAttributes,o=void 0===n?[]:n,i=e.AggregationAttribute,a=e.AggregationFunctions;return r.map(function(e){return d(d({},o.reduce(function(t,r,n){return d(d({},t),{},p({},r,e[n]))},{})),{},p({},"".concat(a[0],"(").concat(i,")"),e[e.length-1]))})},y=function(e){return e.filter(function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=e.dependencies,i=e.mapSync,a=e.dependenciesMap,l=e.widgets;return!(i&&(0,c.zR)(l,a)&&(null==o||!o.viewport))&&r.name&&(0,u.cs)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute}).distinctUntilChanged(function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter}).switchMap(function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,i=e.filter,a=e.onLoad,c=void 0===a?function(){}:a,s=e.onLoadError,f=void 0===s?function(){}:s;return(0,o.A)((0,u.cs)(r),d(d({featureType:r.name},n),{},{filter:i}),{timeout:15e3},r).map(function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:m(e),series:[{dataKey:"".concat(e.AggregationFunctions[0],"(").concat(e.AggregationAttribute,")")}]}}).do(c).catch(function(e){return l().Observable.of({loading:!1,error:e,data:[]}).do(f)}).startWith({loading:!0})})};const v=(0,n.compose)((0,n.withProps)(function(){return{dataStreamFactory:y}}),i.A)},510448(e,t,r){"use strict";r.d(t,{A:()=>O});var n=r(916589),o=r(39128),i=r.n(o),a=r(978632),l=r.n(a),u=r(332222),c=r(397619),s=r(6683),f=r(71665),d=r(112585),p=r(519108);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}var y=["group"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e,t,r){return(t=function(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const O=(0,n.compose)((0,n.withProps)(function(e){var t=e.dependencies,r=void 0===t?{}:t,n=e.dependenciesMap,o=void 0===n?{}:n,a=r[o.layers]||r.layers||[],u=i()(r[o.groups]||r.groups||[]),c=a.filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==e.group&&!(0,d.qv)((null==e?void 0:e.group)||d.Yw,u)}).map(function(e){return e.group,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,y)});return{allLayers:a,map:{layers:c=(0,p.bA)(c,r),groups:[],projection:r.projection,bbox:r.viewport},dependencyMapPath:o.layers||"",scales:(0,s.kp)(r.projection||r.viewport&&r.viewport.crs||"EPSG:3857",l()(r,"mapOptions.view.DPI")),currentZoomLvl:r.zoom}}),(0,n.withHandlers)({updateProperty:function(e){var t=e.updateProperty,r=e.dependencyMapPath,n=e.allLayers,o=void 0===n?[]:n;return function(e,n){if(r){var i=(s=f.M9.exec(r)||[],d=3,function(e){if(Array.isArray(e))return e}(s)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(s,d)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(s,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[1],l=i[2];if(l&&"map"===e){var u=(null==n?void 0:n.layers)||[],c=o.map(function(e){var t=u.find(function(t){return t.id===e.id});return t?g(g({},e),{},{visibility:t.visibility,opacity:t.opacity,expanded:t.expanded,layerFilter:t.layerFilter}):e});t(a,"maps",{mapId:l,layers:c},"merge")}}var s,d}}}),u.A,(0,c.jZ)(),(0,c.o$)(),(0,c.rk)())},537336(e,t,r){"use strict";r.d(t,{A:()=>c});var n=r(273517),o=r.n(n),i=r(563864),a=r(8571);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.A)(function(e){var t,r=e.map,n=void 0===r?{}:r;return!(null!=n&&null!==(t=n.layers)&&void 0!==t&&t.length)},u(u({},e?"tooltip":"title",o().createElement(a.A,{msgId:"widgets.errors.noLegend"})),"description",!e&&o().createElement(a.A,{msgId:"widgets.errors.noLegendDescription"})))}},540285(e,t,r){"use strict";r.d(t,{A:()=>d,p:()=>p});var n=r(916589),o=r(332222),i=r(397619);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const d=(0,n.compose)(o.A,(0,n.compose)((0,n.withState)("showTable","setShowTable",!1),(0,n.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,r=e.showTable;return function(){return t(!r)}}}),(0,n.withProps)(function(e){var t=e.widgetTools,r=void 0===t?[]:t,n=e.toggleTableView,o=void 0===n?function(){}:n,i=e.traces;return{widgetTools:[].concat(s(r),s(1===(null==i?void 0:i.length)?[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return o()}}]:[]))}})),(0,i.jZ)(),(0,i.bU)(),(0,i.o$)(),(0,n.branch)(function(e){return!e.showTable},(0,i.rk)()));var p=(0,n.compose)((0,n.withProps)(function(e){var t,r=e.charts,n=void 0===r?[]:r,o=e.selectedChartId,i=e.options,a=void 0===i?{}:i,l=(null==n?void 0:n.find(function(e){return e.chartId===o}))||{};return u(u({},l),{},{options:u(u({},a),null!==(t=null==l?void 0:l.options)&&void 0!==t?t:{}),charts:n,selectedChartId:o})}))},545567(e,t,r){"use strict";r.d(t,{EV:()=>B,Gw:()=>q,o0:()=>M,sq:()=>G});var n=r(23412),o=r.n(n),i=r(908437),a=r.n(i),l=r(39128),u=r.n(l),c=r(104567),s=r.n(c),f=r(802401),d=r.n(f),p=r(45388),m=r.n(p),y=r(738805),v=r(692114),g=r(995531),b=r(102685),h=r(112585),O=r(492312),S=r(193275),w=r(79738),E=["totalFeatures","features"],A=["sortOptions","propertyName"];function j(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function T(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){F(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F(e,t,r){return(t=function(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=(0,S.A)({wfsVersion:"1.1.0"}),_=D.getFeature,R=D.query,L=D.sortBy,N=D.propertyName,k=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",i=(0,b.zD)(t,r),a=o().parse((0,w.t)(e),!0),l=d()(a.query)?a.query:{};l.service="WFS",l.outputFormat=n;var u=o().format({protocol:a.protocol,host:a.host,pathname:a.pathname,query:l});return r.layer&&"vector"===r.layer.type?m().Observable.defer(function(){return new Promise(function(e){var n,o=function(e,t){if(t.filterFields&&0!==t.filterFields.length){var r=e.features.filter((0,b.Jt)(t));e.features=r,e.numberMatched=r.length,e.numberReturned=r.length,e.totalFeatures=r.length}return t.sortOptions&&t.sortOptions.sortBy&&t.sortOptions.sortOrder&&"NONE"!==t.sortOptions.sortOrder&&e.features.sort(function(e,r){var n=e.properties[t.sortOptions.sortBy],o=r.properties[t.sortOptions.sortBy],i=n.toLowerCase().localeCompare(o.toLowerCase());return"ASC"===t.sortOptions.sortOrder?i:-1*i}),e}({crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},numberMatched:(n=r.layer.features).length,numberReturned:n.length,timeStamp:"2020-07-20T11:36:20.118Z",totalFeatures:n.length,type:"FeatureCollection",features:n},t);e(o)})}):{data:i,queryString:u}},M=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(r.layer&&"vector"===r.layer.type)return k(e,t,r,n);var o=k(e,t,r,n),i=o.data,a=o.queryString;return m().Observable.defer(function(){var e,t;return g.A.post(a,i,{timeout:6e4,responseType:"arraybuffer",headers:{Accept:"application/xml","Content-Type":"application/xml"},_msAuthSourceId:(null===(e=r.layer)||void 0===e||null===(e=e.security)||void 0===e?void 0:e.sourceId)||(null===(t=r.security)||void 0===t?void 0:t.sourceId)})})},U=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.layer&&"vector"===r.layer.type)return k(e,t,r);var n=k(e,t,r),o=n.data,i=n.queryString;return m().Observable.defer(function(){return g.A.post(i,o,C({timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}},null==r?void 0:r.requestOptions))}).let(O.m9).map(function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=T(e,E),o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).startIndex,i=arguments.length>2?arguments[2]:void 0;return i>t&&i===o+r.length&&t===r.length?C(C({},n),{},{features:r,totalFeatures:i}):C(C({},n),{},{features:r,totalFeatures:t})}(e.data,function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination||!s()(e.startIndex)&&!s()(e.maxFeatures)&&{startIndex:e.startIndex,maxFeatures:e.maxFeatures}}(t,r),r.totalFeatures)})},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,o=e.name,i=e.security,l=arguments.length>1?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=c.sortOptions,f=c.propertyName,d=T(c,A);return U(r.url||n,l&&"object"===I(l)?C(C({},l),{},{typeName:o||l.typeName}):_(R(o,[].concat(j(s?[L(s.sortBy,s.sortOrder)]:[]),j(f?[N(f)]:[]),j(l?u()(l):[]))),d),C({security:i},d)).catch(function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!s&&f&&f[0])return U(r.url||n,l&&"object"===I(l)?C(C({},l),{},{typeName:o||l.typeName}):_(R(o,[L(a()(f)?f[0]:f)].concat(j(f?[N(f)]:[]),j(l?u()(l):[]))),d),d);throw e})},G=function(e){var t=e.layer,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,l=o().parse((0,w.t)(a||n.url||i),!0);return o().format(C(C({},l),{},{search:void 0,query:C(C({},l.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t);return m().Observable.defer(function(){var e;return g.A.get(r,{_msAuthSourceId:null==t||null===(e=t.security)||void 0===e?void 0:e.sourceId})}).let(O.m9)},B=function(e){var t=e.layer,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=(0,h.wk)({name:t,url:n&&n.url||i}),l=o().parse(a,!0);return o().format(C(C({},l),{},{search:void 0,query:C(C({},l.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t);return m().Observable.defer(function(){var e;return g.A.get(r,{_msAuthSourceId:null==t||null===(e=t.security)||void 0===e?void 0:e.sourceId})}).let(O.m9).switchMap(function(e){return m().Observable.bindNodeCallback(function(e,t){return(0,y.parseString)(e,{tagNameProcessors:[v.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)})(e.data)})}},577103(e,t,r){"use strict";r.d(t,{A:()=>T});var n=r(916589),o=r(978632),i=r.n(o),a=r(104567),l=r.n(a),u=r(710583),c=r(605556),s=r.n(c),f=r(803361),d=r(273517),p=r.n(d),m=r(764997),y=r(721930),v=r(992717),g=r(64513),b=r(549112);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var O=["value","uom","formula","counterOpts"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(null,arguments)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){A(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A(e,t,r){return(t=function(e){var t=function(e){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=(0,m.A)(),P=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.value,o=void 0===n?"":n,i=r.uom,a=void 0===i?"":i,c=r.formula,s=void 0===c?"":c,d=r.counterOpts,m=void 0===d?{tickPrefix:"",tickSuffix:""}:d,y=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,O),v=o;if(s&&(v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e;try{return(0,g.Y)(t,{value:r})}catch(t){return e}}(o,s)),null!=m&&m.format)try{v=(0,f.GP)(m.format)(v)}catch(e){console.error(e)}var h={fontFamily:(null==m||null===(e=m.layout)||void 0===e?void 0:e.fontFamily)||b.mE.FAMILY,color:(null==m||null===(t=m.layout)||void 0===t?void 0:t.color)||b.mE.COLOR},w=E({fontSize:"75%"},h);return p().createElement(u.zb,S({mode:"single",forceSingleModeWidth:!1,max:500,throttle:20},y),p().createElement("span",{style:w},null!=m&&m.tickPrefix?m.tickPrefix:null),p().createElement("span",{className:"value",style:h},l()(v)?0:v),p().createElement("span",{style:w},(null==m?void 0:m.tickSuffix)||a))},I=(0,n.compose)(j,y.A,v.A)(function(e){var t=e.series,r=void 0===t?[]:t,n=e.data,o=void 0===n?[]:n,a=e.options,l=void 0===a?{}:a,u=e.style,c=void 0===u?{width:"100%",height:"100%",transform:"translate(-50%, -50%)",position:"absolute",display:"inline",padding:"1%",top:"50%",left:"50%"}:u,s=e.counterOpts,f=e.formula;return p().createElement("div",{className:"counter-widget-view"},r.map(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).dataKey,t=arguments.length>1?arguments[1]:void 0;return p().createElement(P,{key:e,uom:i()(l,"seriesOptions[".concat(t,"].uom")),value:o[0][e]||0,counterOpts:s,formula:f,style:E({textAlign:"center"},c)})}))});P.propTypes={uom:s().string,value:s().string,formula:s().string,counterOpts:s().object};const T=I},595625(){},624066(){},654456(e,t,r){"use strict";r.d(t,{GW:()=>c,IY:()=>i,Ii:()=>b,Jj:()=>y,KF:()=>l,LO:()=>h,Lk:()=>I,Lm:()=>n,MN:()=>E,Mb:()=>w,P:()=>C,Rb:()=>m,UR:()=>O,V8:()=>v,VZ:()=>x,Ve:()=>d,Xi:()=>g,Z4:()=>A,ZJ:()=>a,_Z:()=>p,cv:()=>s,f4:()=>f,jF:()=>S,oR:()=>T,pF:()=>u,qD:()=>o,qu:()=>P,x5:()=>j}),r(995531);var n="LAYER_SELECTED_FOR_SEARCH",o="FEATURE_TYPE_SELECTED",i="FEATURE_TYPE_LOADED",a="FEATURE_LOADED",l="FEATURE_LOADING",u="FEATURE_TYPE_ERROR",c="FEATURE_ERROR",s="QUERY_CREATE",f="QUERY:UPDATE_QUERY",d="QUERY_RESULT",p="QUERY_ERROR",m="RESET_QUERY",y="QUERY",v="INIT_QUERY_PANEL",g="QUERY:TOGGLE_SYNC_WMS",b="QUERY:TOGGLE_LAYER_FILTER";function h(){return{type:g}}function O(){return{type:b}}function S(){return{type:v}}function w(e,t){return{type:o,url:e,typeName:t,fields:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],owner:arguments.length>3?arguments[3]:void 0}}function E(e,t,r){return{type:i,typeName:e,featureType:t,owner:r}}function A(e,t){return{type:u,typeName:e,error:t}}function j(e){return{type:l,isLoading:e}}function P(e,t,r,n,o){return{type:d,searchUrl:t,filterObj:r,result:e,queryOptions:n,reason:o}}function I(e){return{type:p,error:e}}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updates,r=e.reason,n=e.useLayerFilter;return{type:f,updates:t,reason:r,useLayerFilter:n}}function x(e,t,r){return{type:s,searchUrl:e,filterObj:t,owner:r}}function C(e,t,r,n){return{type:y,searchUrl:e,filterObj:t,queryOptions:r,reason:n}}},721930(e,t,r){"use strict";r.d(t,{A:()=>u});var n=r(273517),o=r.n(n),i=r(8571),a=r(563864),l=r(230454);const u=(0,a.A)(function(e){return!!e.error},function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.error,a=r.layer,u=-1!==(null==n||null===(e=n.message)||void 0===e?void 0:e.indexOf("Could not locate"))?o().createElement(l.A,{glyph:"chart",messageId:"widgets.errors.layerNotAvailable",msgParams:{layerName:null==a?void 0:a.name}}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"ECONNABORTED"===e.code?o().createElement(i.A,{msgId:"widgets.errors.timeoutExpired"}):e.message?o().createElement(i.A,{msgId:"widgets.errors.genericErrorWithMessage",msgParams:{message:e.message}}):o().createElement(i.A,{msgId:"widgets.errors.genericError"})}(n);return{glyph:-1!==(null==n||null===(t=n.message)||void 0===t?void 0:t.indexOf("Could not locate"))?null:"warning-sign",iconFit:!1,content:u}})},738885(e,t,r){"use strict";r.d(t,{Ay:()=>F});var n=r(273517),o=r.n(n),i=r(39128),a=r.n(i),l=r(802401),u=r.n(l),c=r(104567),s=r.n(c),f=r(67235),d=r.n(f),p=r(593737),m=r.n(p),y=r(370561),v=r(545567),g=r(112585),b=r(995531),h=["traces"];function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(null,arguments)}function w(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return A(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function I(e,t,r){return(t=function(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=b.A.CancelToken,x=function(){var e,t=(null===(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nullHandling)||void 0===e?void 0:e.groupByAttributes)||{};return{strategy:t.strategy||"default",placeholder:t.placeholder}},C={wfs:function(e,t){var r=e.layer,n=e.options,o=e.filter,i=t.cancelToken;return(0,v.Gw)(r,o,{propertyName:n.classificationAttribute?[].concat(w(a()(n.aggregationAttribute)),w(a()(n.groupByAttributes)),w(a()(n.classificationAttribute))):[].concat(w(a()(n.aggregationAttribute)),w(a()(n.groupByAttributes))),requestOptions:{cancelToken:i}}).toPromise().then(function(e){return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).features,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.groupByAttributes,n=x(t),o=n.strategy,i=n.placeholder;return d()(e.filter(function(e){var t=e.properties;return"exclude"!==o||null!==t[r]}).map(function(e){var t=e.properties;return null===t[r]&&"placeholder"===o&&i?P(P({},t),{},I({},r,i)):t}),r)}(e,n)})},wps:function(e,t){var r=e.layer,n=e.options,o=e.filter,i=t.cancelToken;return(0,y.A)((0,g.cs)(r),P(P({featureType:r.name},n),{},{filter:o}),{timeout:15e3,cancelToken:i},r).toPromise().then(function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,n=e.GroupByAttributes,o=void 0===n?[]:n,i=e.AggregationAttribute,a=e.AggregationFunctions,l=x(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),c=l.strategy,f=l.placeholder;return r.filter(function(e){return"exclude"!==c||null!==e[0]}).map(function(e){return P(P({},o.reduce(function(t,r,n){var o=e[n];if(0===n&&null===o&&"placeholder"===c&&f)o=f;else if(u()(o)){if(s()(o.time))throw new Error("Unknown response format from server");o=new Date(o.time).toISOString()}return P(P({},t),{},I({},r,o))},{})),{},I({},"".concat(a[0],"(").concat(i,")"),e[e.length-1]))}).sort(function(e,t){var r=parseFloat(e[o]),n=parseFloat(t[o]);return isNaN(r)||isNaN(n)?e<t?-1:e>t?1:0:r-n})}(e,n)})}};const F=function(e){function t(t){var r,i,a=t.traces,l=void 0===a?[]:a,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,h),c=(r=(0,n.useState)({loading:!0}),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(r,i)||E(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],f=c[1],d=(0,n.useRef)([]),p=(0,n.useRef)([]),y=(0,n.useRef)(!0),v=(0,n.useRef)();function O(){p.current.forEach(function(e){e()}),p.current=[],v.current.cancel()}return(0,n.useEffect)(function(){return y.current=!0,v.current=m()(function(e){b.A.all(e.map(function(e){return(0,e.dataServiceRequest)(e.trace,{cancelToken:new T(function(e){p.current.push(e)})})})).then(function(e){var t;y.current&&(f(t={data:e,loading:!1,isAnimationActive:!1,error:void 0}),u.onLoad&&u.onLoad(t))}).catch(function(e){var t;y.current&&!e.__CANCEL__&&(f(t={loading:!1,error:e,data:[]}),u.onLoadError&&u.onLoadError(t))}).finally(function(){p.current=[]})},u.debounceTime||300),function(){y.current=!1,O()}},[]),(0,n.useEffect)(function(){if(l.length!==d.current.length||l.some(function(e,t){var r,n,o,i,a=d.current[t];return!(a&&(r=a,n=e,n.layer&&r.layer.name===n.layer.name&&r.layer.loadingError===n.layer.loadingError&&function(){var e,t,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.aggregateFunction===i.aggregateFunction&&o.aggregationAttribute===i.aggregationAttribute&&o.groupByAttributes===i.groupByAttributes&&o.classificationAttribute===i.classificationAttribute&&o.viewParams===i.viewParams&&(null===(e=o.nullHandling)||void 0===e||null===(e=e.groupByAttributes)||void 0===e?void 0:e.strategy)===(null===(t=i.nullHandling)||void 0===t||null===(t=t.groupByAttributes)||void 0===t?void 0:t.strategy)&&(null===(r=o.nullHandling)||void 0===r||null===(r=r.groupByAttributes)||void 0===r?void 0:r.placeholder)===(null===(n=i.nullHandling)||void 0===n||null===(n=n.groupByAttributes)||void 0===n?void 0:n.placeholder)}(r.options,n.options)&&(o=r.filter,i=n.filter,o===i)))})){var e=l.map(function(e){var t,r,n,o=(r=(t=e).layer,(n=t.options)?n.aggregateFunction&&"None"!==n.aggregateFunction?r.name&&(0,g.cs)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute&&n.groupByAttributes||n.classificationAttribute?"wps":"":r.name&&(0,g.U7)(r)&&null!=n&&n.aggregationAttribute&&null!=n&&n.groupByAttributes?"wfs":"":"");return{trace:e,dataServiceRequest:C[o]||function(){return Promise.resolve([])}}});O(),f({loading:!0,error:void 0}),v.current(e)}d.current=w(l)}),o().createElement(e,S({},u,s,{traces:l}))}return(0,n.memo)(t)}},743445(e,t,r){"use strict";r.d(t,{A:()=>O});var n=r(273517),o=r.n(n),i=r(192016),a=r(8117),l=r(227341),u=r.n(l),c=r(978632),s=r.n(c),f=r(164045),d=r(551783),p=r(8571),m=r(711030),y=r(6683);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var g=(0,d.A)("placeholder")(a.MJ),b=(0,d.A)(["noResultsText"])(i.Ay),h=(0,f.A)(m.A);const O=function(e){var t,r=e.maps,i=void 0===r?[]:r,l=e.onChange,c=void 0===l?function(){}:l,f=e.value,d=void 0===f?"":f,m=e.disabled,O=void 0!==m&&m,S=e.className,w=void 0===S?"":S,E=e.editorData,A=void 0===E?{}:E,j=e.setSelectedMap,P=void 0===j?function(){}:j,I=e.setEmptyMap,T=void 0===I?function(){}:I,x=e.emptyMap,C=void 0!==x&&x,F=e.withContainer,D=void 0!==F&&F,_=e.selectedMap,R=void 0===_?{}:_,L=function(e){var t;if(1===e.length)return null;var r=((null==e?void 0:e.find(function(e){return(null==e?void 0:e.mapId)===d}))||{}).size;return!D&&(null==r?void 0:r.width)<=400?o().createElement(h,{tooltipId:"widgets.mapSwitcher.infoOnHide",className:"square-button no-border",key:"info-sign"},o().createElement(a.e6,{glyph:"info-sign"})):o().createElement(b,{className:w,disabled:O,noResultsText:"widgets.mapSwitcher.noResults",options:u()(e)?[]:e.map(function(e){return{label:e.name,value:e.mapId}}),onChange:function(e){return e.value&&c("selectedMapId",e.value)},value:d||(null==e||null===(t=e[0])||void 0===t?void 0:t.mapId),clearable:!1})};if(!D)return L(i);var N,k,M=(N=(0,n.useState)(""),k=2,function(e){if(Array.isArray(e))return e}(N)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(N,k)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(N,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),U=M[0],q=M[1];return(0,n.useEffect)(function(){if(!u()(null==A?void 0:A.maps)&&D){var e,t,r,n=null==A||null===(e=A.maps)||void 0===e?void 0:e.find(function(e){return e.name===y.j4});u()(n)?(T(!1),t=s()(A,"maps[0]",{}),u()(A.selectedMapId)?c("selectedMapId",t.mapId):t=null===(r=A.maps)||void 0===r?void 0:r.find(function(e){return e.mapId===A.selectedMapId})):(T(!0),t=n),P(t)}},[A.maps,A.selectedMapId,D,P,c,T]),C||(null===(t=A.maps)||void 0===t?void 0:t.length)>1?o().createElement("div",{className:"widget-selector"},C?o().createElement("div",{style:{display:"inline-flex"}},o().createElement(g,{className:"widget-empty-map",type:"text",placeholder:"widgets.mapSwitcher.placeholder",style:{textOverflow:"ellipsis"},value:U,onChange:function(e){return q(e.target.value)}}),o().createElement(h,{bsStyle:"primary",disabled:!U,onClick:function(){c("maps[".concat(R.mapId,"].name"),U),c("selectedMapId",R.mapId)}},o().createElement(a.e6,{glyph:"ok"}))):o().createElement(o().Fragment,null,o().createElement("div",{className:"widget-selector-label"},o().createElement("strong",null,o().createElement(p.A,{msgId:"widgets.mapSwitcher.selectLabel"}))),L(A.maps))):null}},817603(e,t,r){"use strict";r.d(t,{A:()=>C});var n=r(356513),o=r.n(n),i=r(227341),a=r.n(i),l=r(255435),u=r.n(l),c=r(916589),s=r(764932),f=r(102685),d=r(994959),p=r(159452),m=r(674466),y=r(58884);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}var g=["traces"],b=["nextTraces"];function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){w(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t,r){return(t=function(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e,t){var r=(0,y.rz)(e,t),n=o()(Object.keys(r||{}),function(){return"cql_filter"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()});return r&&n&&r[n]},P=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerFilter},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,n=e.dependencies,o=void 0===n?{}:n,i=e.layer,a=e.quickFilters,l=e.options,u=e.filter,c=e.interactionFilters,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t!==s.mapSync||o.viewport!==(s.dependencies&&s.dependencies.viewport)||o.quickFilters!==(s.dependencies&&s.dependencies.quickFilters)||o.options!==(s.dependencies&&s.dependencies.options)||r!==s.geomProp||u!==s.filter||l!==s.options||a!==s.quickFilters||j(i,o)!==j(s.layer,s.dependencies)||P(i)!==P(s.layer)||c!==s.interactionFilters},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,n=e.dependencies,o=void 0===n?{}:n,i=e.filter,l=e.layer,u=e.quickFilters,c=e.options,v=e.interactionFilters,g=o.viewport,b=(0,p.A)({gmlVersion:"3.1.1"}),h=(0,m.A)(b),O=b.filter,A=b.property,P=b.and,I=(l||{}).layerFilter,T={},x={},C=(0,y.gq)(i,u,c),F=v&&Array.isArray(v)&&v.length>0&&(0,f.Lx)(v,{nsplaceholder:"ogc",versionOGC:"1.1.0"})||[];if(!t)return{filter:!a()(C)||I||F.length>0?O(P.apply(void 0,E(I&&!I.disabled?(0,f.hG)(I,"1.1.0","ogc"):[]).concat(E(C?(0,f.hG)(C,"1.1.0","ogc"):[]),E(F)))):void 0};if(l&&o&&o.quickFilters&&o.layer&&l.name===o.layer.name&&(C=S(S({},C),(0,y.gq)(C,o.quickFilters,o.options))),l&&o&&o.filter&&o.layer&&l.name===o.layer.name&&(C=S(S({},C),(0,f.mA)([C,o.filter]))),o.viewport){var D=Object.keys(g.bounds).reduce(function(e,t){return S(S({},e),{},w({},t,parseFloat(g.bounds[t])))},{});T=(0,s.getViewportGeometry)(D,g.crs);var _=j(l,o);return x=_?[h((0,d.LF)(_))]:[],{filter:O(P.apply(void 0,E(x).concat(E(I&&!I.disabled?(0,f.hG)(I,"1.1.0","ogc"):[]),E(C?(0,f.hG)(C,"1.1.0","ogc"):[]),E(r?[A(r).intersects(T)]:[]),E(F))))}}var R=I?(0,f.hG)(I,"1.1.0","ogc"):[],L=C?(0,f.hG)(C,"1.1.0","ogc"):[];return{filter:a()(R)&&a()(L)&&0===F.length?void 0:O(P.apply(void 0,E(R).concat(E(L),E(F))))}},x=["mapSync","dependencies","dependenciesMap","widgets","interactionFilters"];const C=(0,c.compose)((0,c.withPropsOnChange)(function(e,t){var r=e.traces,n=h(e,g),o=t.nextTraces,i=void 0===o?[]:o,a=h(t,b);return r?r.some(function(e,t){return I(S(S({},u()(n,x)),e),S(S({},u()(a,x)),i[t]))}):I(n,a)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.traces?{traces:e.traces.map(function(t){return S(S({},t),T(S(S({},u()(e,x)),t)))})}:T(e)}))},859009(e,t,r){"use strict";r.d(t,{A:()=>f});var n=r(916589),o=r(255435),i=r.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e?Object.keys(e).reduce(function(o,a){if("dependenciesMap"===a&&t[e[a]]&&t[e.mapSync]&&t[e[a]][a]&&-1===t[e[a]][a].indexOf(r)&&n.every(function(r){return t[e[a]][a]!==r})){var l=n.concat(t[e[a]][a]);return u(u({},o),i()(s(t[e[a]],t,r,l),["options","layer","quickFilters","filter","dependenciesMap"]))}return u(u({},o),{},c({},a,t[e[a]]))},{}):t};const f=(0,n.withProps)(function(e){var t=e.dependenciesMap,r=e.dependencies,n=e.id;return{dependencies:t?s(t,r,n):r,dependenciesMap:t}})},896067(e,t,r){"use strict";r.d(t,{K:()=>o,L:()=>n});var n="INTERACTIONS:APPLY_FILTER_WIDGET_INTERACTIONS",o=function(e){return{type:n,widgetId:e,target:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"floating",filterId:arguments.length>2?arguments[2]:void 0}}},936093(e,t,r){"use strict";r.d(t,{A:()=>i});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,"/*\n * Copyright 2026, GeoSolutions.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/* Value container: selected tags area - max height + scroll only when there are selected values */\n.ms-filter-widget-dropdown-list.ms-filter-widget-dropdown-list--scrollable-values .Select-multi-value-wrapper {\n  max-height: var(--filter-widget-dropdown-value-max-height);\n  overflow-y: auto;\n}\n",""]);const i=o},962787(e,t,r){"use strict";r.d(t,{A:()=>n});const n=r(54783).Ay},992717(e,t,r){"use strict";r.d(t,{A:()=>i});var n=r(563864),o=r(230454);const i=(0,n.A)(function(e){var t,r=e.data,n=void 0===r?[]:r;return!n||0===n.length||0===(null==n||null===(t=n.flat())||void 0===t?void 0:t.length)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync;return{iconFit:e.iconFit,messageId:t?"widgets.errors.nodatainviewport":"widgets.errors.nodata",glyph:"chart"}},o.A)}}]);