(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[42367],{735563:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(472500),o=n.n(r),i=n(701469),l=n.n(i),a=n(414293),u=n.n(a),c=n(727418),s=n.n(c),d=n(45697),f=n.n(d),p=n(124852),y=n.n(p),m=n(233044),v=n(805346),g=n(42648);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function O(e,t,n){return t=w(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function j(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}var T=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return j(e=O(this,t,[].concat(r)),"state",{error:!1}),j(e,"onImgError",(function(){e.setState((function(){return{error:!0}}))})),j(e,"getScale",(function(e){if(e.scales&&void 0!==e.currentZoomLvl&&e.scaleDependent){var t,n=Math.round(e.currentZoomLvl),r=null!==(t=e.scales[n])&&void 0!==t?t:e.scales[e.scales.length-1];return Math.round(r)}return null})),j(e,"getUrl",(function(t,n){if(t.layer&&"wms"===t.layer.type&&t.layer.url){var r=t.layer,i=u()(n)?l()(r.url)&&Math.floor((0,g.I)(r.url.length)):n,a=l()(r.url)?r.url[i]:r.url.replace(/[?].*$/g,""),c=o().parse(a),d=(0,m.clearNilValuesForParams)(r.params),f=e.getScale(t),p=s()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:t.legendHeight,width:t.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:t.legendOptions},r.legendParams||{},t.language&&r.localizedLayerStyles?{LANGUAGE:t.language}:{},(0,m.addAuthenticationToSLD)(d||{},t.layer),d&&d.SLD_BODY?{SLD_BODY:d.SLD_BODY}:{},null!==f?{SCALE:f}:{});return(0,m.addAuthenticationParameter)(a,p),o().format({host:c.host,protocol:c.protocol,pathname:c.pathname,query:p})}return""})),j(e,"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?y().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):y().createElement(v.Z,{msgId:"layerProperties.legenderror"})}}],r&&h(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(y().Component);j(T,"propTypes",{layer:f().object,legendHeight:f().number,legendWidth:f().number,legendOptions:f().string,style:f().object,currentZoomLvl:f().number,scales:f().array,scaleDependent:f().bool,language:f().string}),j(T,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const C=T},612450:(e,t,n)=>{"use strict";n.d(t,{Z:()=>U});var r=n(472500),o=n.n(r),i=n(701469),l=n.n(i),a=n(414293),u=n.n(a),c=n(727418),s=n.n(c),d=n(45697),f=n.n(d),p=n(124852),y=n.n(p),m=n(480681),v=n(532425),g=n(830049);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var j={Line:function(e){var t=e.symbolizer,n=t["stroke-width"]?t["stroke-width"]:0===t.width?1:t.width>7?7:t.width;return y().createElement("svg",{viewBox:"0 0 50 50"},y().createElement("path",{d:"M ".concat(n," ").concat(n," L ").concat(50-n," ").concat(50-n),stroke:t.stroke||t.color,strokeWidth:n,strokeDasharray:t.dasharray?"18 18":null,strokeLinecap:t["stroke-linecap"],strokeLinejoin:t["stroke-linejoin"],strokeOpacity:t["stroke-opacity"]}))},Polygon:function(e){var t=e.symbolizer;return y().createElement("svg",{viewBox:"0 0 50 50"},y().createElement("path",{d:"M 1 1 L 1 49 L 49 49 L 49 1 L 1 1",fill:t.fill,opacity:t["fill-opacity"],stroke:t.stroke,strokeWidth:t["stroke-width"],strokeOpacity:t["stroke-opacity"]}))},Circle:function(e){var t=e.symbolizer;return y().createElement("svg",{viewBox:"0 0 50 50"},y().createElement("circle",{cx:"25",cy:"25",r:"25",fill:t.fill,opacity:t["fill-opacity"],stroke:t.stroke,strokeWidth:t["stroke-width"],strokeOpacity:t["stroke-opacity"]}))},Mark:function(e){var t=e.symbolizer,n=w((0,p.useState)(null),2),r=n[0],o=n[1],i=(0,p.useRef)();(0,p.useEffect)((function(){return i.current=!0,function(){i.current=!1}}),[]),(0,p.useEffect)((function(){(0,g.$O)(t).then((function(e){i.current&&o(e)}))}),[t]);var l=t.rotate,a=t.opacity,u={transform:"rotate(".concat(l,"deg)"),opacity:a};return y().createElement("svg",{viewBox:"0 0 50 50",style:u},r&&y().createElement("image",{href:r.src,height:"50",width:"50"}))},Icon:function(e){var t=e.symbolizer,n=w((0,p.useState)(null),2),r=n[0],o=n[1],i=(0,p.useRef)();return(0,p.useEffect)((function(){return i.current=!0,function(){i.current=!1}}),[]),(0,p.useEffect)((function(){if(null!=t&&t.image){var e=new Image;e.onload=function(){i.current&&o(e)},e.onerror=function(){i.current&&o(null)},e.src=t.image}}),[null==t?void 0:t.image]),r?y().createElement("svg",{viewBox:"0 0 50 50",style:{transform:"rotate(".concat(t.rotate,"deg)"),opacity:t.opacity}},y().createElement("image",{href:r.src,height:"50",width:"50"})):y().createElement(m.gG,{glyph:"point"})},Model:function(){return y().createElement(m.gG,{glyph:"model"})},Text:function(e){var t,n=e.symbolizer;return y().createElement("svg",{viewBox:"0 0 16 16"},y().createElement("text",{x:"8",y:"8","text-anchor":"middle","alignment-baseline":"middle",style:O({fontSize:n.size<14?n.size:14,fill:n.color,fontFamily:null==n||null===(t=n.font)||void 0===t?void 0:t.join(", "),fontStyle:n.fontStyle,fontWeight:n.fontWeight},n.haloWidth&&n.haloColor&&{paintOrder:"stroke",stroke:n.haloColor,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"})},"T"))}};const P=function(e){var t=e.rule,n=null==t?void 0:t.symbolizers,r=[];return n.forEach((function(e){var t=Object.keys(e),n=["Point","Line","Polygon"];t.forEach((function(t){if(n.includes(t)){if("Point"===t){var o,i,l=null===(o=e[t])||void 0===o||null===(i=o.graphics)||void 0===i?void 0:i.find((function(e){return Object.keys(e).includes("mark")})),a=l?"Mark":"Icon";return"Mark"===a&&(e[t]=function(e){var t={color:e.graphics[0].fill,fillOpacity:e.graphics[0]["fill-opacity"]?+e.graphics[0]["fill-opacity"]:1,strokeColor:e.graphics[0].stroke,strokeOpacity:e.graphics[0]["stroke-opacity"]?+e.graphics[0]["stroke-opacity"]:1,strokeWidth:e.graphics[0]["stroke-width"]?+e.graphics[0]["stroke-width"]:0,strokeDasharray:e.graphics[0]["strock-dasharray"]?"18 18":null,radius:e.size?+e.size:5,rotate:(null==e?void 0:e.rotate)||0,opacity:(null==e?void 0:e.opacity)||1};return e.graphics&&(t.graphics=e.graphics),t}(e[t])),e[t].wellKnownName="Mark"===a?l.mark.charAt(0).toUpperCase()+l.mark.slice(1):"",void r.push({Icon:j[a],symbolizer:e[t]})}r.push({Icon:j[t],symbolizer:e[t]})}}))})),r.length?y().createElement(y().Fragment,null," ",r.map((function(e,t){var n=e.Icon,r=e.symbolizer;return y().createElement("div",{key:"icons-wms-json"+t,className:"ms-legend-icon"},y().createElement(n,{symbolizer:r}))}))," "):null};var T=n(233044),C=n(501157),I=n(805346),x=n(86686),k=n(950966);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function L(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function R(e,t,n){return t=F(t),function(e,t){if(t&&("object"==D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M()?Reflect.construct(t,n||[],F(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function G(e,t,n){return(t=W(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}var Z=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return G(e=R(this,t,[].concat(r)),"state",{error:!1,loading:!1,jsonLegend:{},selectedFilters:[]}),G(e,"getScale",(function(e){if(e.scales&&void 0!==e.currentZoomLvl&&e.scaleDependent){var t,n=Math.round(e.currentZoomLvl),r=null!==(t=e.scales[n])&&void 0!==t?t:e.scales[e.scales.length-1];return Math.round(r)}return null})),G(e,"getUrl",(function(t,n){if(t.layer&&"wms"===t.layer.type&&t.layer.url){var r=t.layer,i=u()(n)?l()(r.url)&&Math.floor(Math.random()*r.url.length):n,a=l()(r.url)?r.url[i]:r.url.replace(/[?].*$/g,""),c=o().parse(a),d=(0,T.clearNilValuesForParams)(r.params),f=e.getScale(t),p=s()({},{service:"WMS",request:"GetLegendGraphic",format:"application/json",height:t.legendHeight,width:t.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:t.legendOptions},r.legendParams||{},t.language&&r.localizedLayerStyles?{LANGUAGE:t.language}:{},(0,T.addAuthenticationToSLD)(d||{},t.layer),d&&d.SLD_BODY?{SLD_BODY:d.SLD_BODY}:{},null!==f?{SCALE:f}:{});return(0,T.addAuthenticationParameter)(a,p),o().format({host:c.host,protocol:c.protocol,pathname:c.pathname,query:p})}return""})),G(e,"renderRules",(function(t){return(t||[]).map((function(t){var n,r,o,i,l=null===(n=e.state.selectedFilters)||void 0===n?void 0:n.find((function(e){return e===t.filter})),a=null===(r=e.props)||void 0===r||null===(o=r.layer)||void 0===o||null===(i=o.layerFilter)||void 0===i?void 0:i.disabled,u=t.filter&&l;return y().createElement("div",{className:"wms-json-legend-rule ".concat(a||"legendPreview"===e.props.owner||null==t||!t.filter?"":"filter-enabled "," ").concat(u?"active":""),key:t.filter,onClick:function(){return e.filterWMSLayerHandler(t.filter)}},y().createElement(P,{rule:t}),y().createElement("span",null,t.name||t.title||""))}))})),G(e,"filterWMSLayerHandler",(function(t){var n,r,o,i,l,a=null===(n=e.props)||void 0===n||null===(r=n.layer)||void 0===r||null===(o=r.layerFilter)||void 0===o?void 0:o.disabled;if(t&&!a){var u=(0,x.updateLayerLegendFilter)(null===(i=e.props)||void 0===i||null===(l=i.layer)||void 0===l?void 0:l.layerFilter,t);e.props.onChange({layerFilter:u});var c=L(e.state.selectedFilters);c=c.includes(t)?c.filter((function(e){return e!==t})):[].concat(L(c),[t]),e.setState({selectedFilters:c})}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getLegendData()}},{key:"componentDidUpdate",value:function(e){var t,n,r,o,i,l,a,u=null==e||null===(t=e.layer)||void 0===t?void 0:t.style;(null===(n=this.props)||void 0===n||null===(r=n.layer)||void 0===r?void 0:r.style)!==u&&this.getLegendData();var c=null===(o=this.props)||void 0===o||null===(i=o.layer)||void 0===i||null===(l=i.layerFilter)||void 0===l||null===(a=l.filters)||void 0===a?void 0:a.find((function(e){return"interactiveLegend"===e.id}));!(c?null==c?void 0:c.filters:[]).length&&this.state.selectedFilters.length&&this.setState({selectedFilters:[]})}},{key:"getLegendData",value:function(){var e=this,t=this.getUrl(this.props);t?(this.setState({loading:!0}),(0,C.hZ)(t).then((function(t){var n,r,o,i,l=null===(n=e.props)||void 0===n||null===(r=n.layer)||void 0===r||null===(o=r.layerFilter)||void 0===o||null===(i=o.filters)||void 0===i?void 0:i.find((function(e){return"interactiveLegend"===e.id})),a=l?null==l?void 0:l.filters:[];e.setState({jsonLegend:t[0],loading:!1,selectedFilters:(null==a?void 0:a.map((function(e){return e.id})))||[]})})).catch((function(){e.setState({error:!0,loading:!1})}))):this.setState({error:!0})}},{key:"render",value:function(){var e;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?y().createElement(y().Fragment,null,y().createElement("div",{className:"wms-legend",style:this.props.style},this.state.loading?y().createElement(v.Z,{size:12,style:{display:"inline-block"}}):this.renderRules((null===(e=this.state.jsonLegend)||void 0===e?void 0:e.rules)||[]))):y().createElement("div",{style:{display:"flex"}},y().createElement(I.Z,{msgId:"layerProperties.legenderror"})," ",y().createElement(k.Z,{placement:"right",overlay:y().createElement(m.u,{id:"interactiveLegendInfoError"},y().createElement(I.Z,{msgId:"layerProperties.enableInteractiveLegendInfo.fetchError"}))},y().createElement(m.gG,{style:{marginLeft:4},glyph:"info-sign"})))}}])&&A(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(y().Component);G(Z,"propTypes",{layer:f().object,legendHeight:f().number,legendWidth:f().number,legendOptions:f().string,style:f().object,currentZoomLvl:f().number,scales:f().array,scaleDependent:f().bool,language:f().string,onChange:f().func,owner:f().string}),G(Z,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0,onChange:function(){},owner:""});const U=Z},442367:(e,t,n)=>{"use strict";n.d(t,{d:()=>Nt,Z:()=>At});var r=n(124852),o=n.n(r),i=n(45697),l=n.n(i),a=n(624262);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var c=["node","groupElement","layerElement"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=e.node,n=e.groupElement,i=e.layerElement,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return n&&i?t.nodes?(0,r.cloneElement)(n,d({node:t,nodeType:l.nodeTypes.GROUP},l),o().createElement(p,{groupElement:n,layerElement:i})):(0,r.cloneElement)(i,d({node:t,nodeType:l.nodeTypes.LAYER},l)):null}p.propTypes={node:l().object,groupElement:l().element.isRequired,layerElement:l().element.isRequired,nodeTypes:l().object},p.defaultProps={node:{},nodeTypes:a.$P};const y=p;var m=n(815430),v=n(984596),g=n.n(v),b=n(313311),h=n.n(b),O=n(480681),E=n(590937),w=["children"];function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=e;if(arguments.length>2?arguments[2]:void 0){var r=e.split(".");n=r[r.length-1]}return"node-".concat(n.replace(/\.|\:| /g,"-")).concat(t?"-".concat(t):"")},P=(0,E.GR)("node",{drop:function(e){var t=e.sort,n=void 0===t?{}:t;null!=n&&n.drop&&n.drop()},hover:function(e,t){var n,r,o=e.sort,i=void 0===o?{}:o,l=function(e,t){var n=t.getItem(),r=e.id,o=e.parentId,i=e.index,l=e.position,a=n.containerNode,u=n.nodeTypes||{};if(r===n.id||!a)return null;var c=a.getAttribute("data-root-parent-id"),s=r||c,d=a.querySelector("[data-id=".concat(j(s,l,!0),"]")),f=a.querySelector("[data-id=".concat(j(n.id||c,n.position,!0),"]"));if(null==d||!d.getBoundingClientRect||null==f||!f.getBoundingClientRect)return null;var p=null==e?void 0:e.nodeType,y=d.getAttribute("data-node-id"),m=f.getAttribute("data-node-id"),v=f.getAttribute("data-parent-node-id")||c;if(n.id=m,n.parentId=v,y===m)return null;var g=d.getBoundingClientRect(),b=f.getBoundingClientRect().top,h=g.top,O=i,E=(g.bottom-g.top)/2,w=t.getClientOffset().y-g.top;if("before"===l&&v!==s)return[n.id,s,0];if("after"===l&&b<h&&w>E){var S=o||c,P=v!==S?O+1:O;return[n.id,S,P]}return["after","before"].includes(l)||p===u.GROUP&&b<h||b>h&&w>E||b<h&&w<E?null:[n.id,o||c,O]}(e,t);if(l&&null!=i&&i.hover){var a=(r=3,function(e){if(Array.isArray(e))return e}(n=l)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(n,r)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[0],c=a[1],s=a[2];i.hover(u,c,s)}}},(function(e){return{connectDropTarget:e.dropTarget()}}))((function(e){var t=e.id,n=e.parentId,r=e.position,i=e.style,l=e.children,a=e.connectDropTarget,u=e.nodeType;return a(o().createElement("div",{"data-id":j(t,r,!0),"data-node-id":t,"data-parent-node-id":n,className:"ms-drop-node".concat(u?" ".concat(u):""),style:i},l))}));const T=function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,w);return n.sortable?o().createElement(P,n,t):t};var C=["component"],I=["component"];function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(null,arguments)}function k(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var D=(0,E.Ej)("node",{beginDrag:function(e){var t=e.node,n=e.parentId,r=e.index,o=e.sort,i=e.containerNode,l=e.nodeTypes;return o.beginDrag&&o.beginDrag(t.id),{id:t.id,parentId:n,index:r,nodeType:null!=t&&t.nodes?l.GROUP:l.LAYER,containerNode:i,nodeTypes:l}}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((function(e){var t=e.component,n=k(e,C);return o().createElement(t,n)}));const L=function(e){var t,n=e.component,r=k(e,I),i=r.replaceNodeOptions?r.replaceNodeOptions(r.node,r.nodeType):r.node,l=!(!1===(null==r||null===(t=r.config)||void 0===t?void 0:t.sortable)||!1===(null==i?void 0:i.sortable)),a=n;return l?o().createElement(D,x({},r,{sortable:l,component:n})):o().createElement(a,x({},r,{sortable:l,connectDragSource:function(e){return e},connectDragPreview:function(e){return e}}))};var N=n(898631);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const R=function(e){var t,n,i=e.loading,l=(t=(0,r.useState)(i),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=l[0],u=l[1];return(0,r.useEffect)((function(){var e=setTimeout((function(){u(i)}),i?0:2e3);return function(){clearTimeout(e)}}),[i]),o().createElement("div",{className:"inline-loader-container"},o().createElement("div",{className:"inline-loader-bar",style:{display:a?"block":"none"}}))};var M=n(441609),F=n.n(M),_=n(281763),G=n.n(_),W=n(612450),Z=n(735563);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function z(e,t,n){return t=Y(t),function(e,t){if(t&&("object"==U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$()?Reflect.construct(t,n||[],Y(e).constructor):t.apply(e,n))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function q(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}var J=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(n=z(this,t,[e]),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),q(n,"canShow",(function(e){return e.visibility||!n.props.showOnlyIfVisible})),q(n,"useLegendOptions",(function(){return!F()(n.props.node.legendOptions)&&G()(n.props.node.legendOptions.legendHeight)&&G()(n.props.node.legendOptions.legendWidth)})),q(n,"setOverflow",(function(){return n.useLegendOptions()&&n.props.node.legendOptions.legendWidth>n.state.containerWidth})),n.containerRef=o().createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e,t=this.props.node||{},n=this.canShow(t)&&"wms"===t.type&&"background"!==t.group,r=null===(e=this.props.node)||void 0===e?void 0:e.enableInteractiveLegend,i=n&&this.useLegendOptions();return n&&!r?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(Z.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:t,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:i&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:i&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):n?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(W.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:t,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:i&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:i&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language,onChange:this.props.onChange})):null}}],r&&H(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);q(J,"propTypes",{node:l().object,legendContainerStyle:l().object,legendStyle:l().object,showOnlyIfVisible:l().bool,currentZoomLvl:l().number,scales:l().array,WMSLegendOptions:l().string,scaleDependent:l().bool,language:l().string,legendWidth:l().number,legendHeight:l().number,onChange:l().func}),q(J,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0,onChange:function(){}});const Q=J;var X=n(710691),ee=n.n(X),te=n(606162),ne=n.n(te),re=n(375875),oe=n.n(re),ie=n(805346),le=n(532425),ae=n(33935);function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const se=function(e){var t,n=e.node,i=void 0===n?{}:n,l=ue((0,r.useState)(null),2),a=l[0],u=l[1],c=ue((0,r.useState)(!1),2),s=c[0],d=c[1],f=i.url?"".concat(ee()(i.url,"/"),"/legend"):"";(0,r.useEffect)((function(){f&&oe().get(f,{params:{f:"json"}}).then((function(e){var t=e.data;return u(t)})).catch((function(){return d(!0)}))}),[f]);var p=void 0!==i.name?(0,ae.tJ)(i.name,(null==i||null===(t=i.options)||void 0===t?void 0:t.layers)||[]):[],y=((null==a?void 0:a.layers)||[]).filter((function(e){var t=e.layerId;return void 0===i.name||p.includes("".concat(t))})),m=!a&&!s;return o().createElement("div",{className:"ms-arcgis-legend"},y.map((function(e){var t=e.legendGroups,n=e.legend,r=e.layerName,i=t?t.map((function(e){return n.filter((function(t){return t.groupId===e.id}))})).flat():n,l=ne()(i.map((function(e){return e.width})));return o().createElement(o().Fragment,null,y.length>1&&o().createElement("div",{className:"ms-legend-title"},r),o().createElement("ul",{className:"ms-legend"},i.map((function(e,t){return o().createElement("li",{key:t,className:"ms-legend-rule"},o().createElement("div",{className:"ms-legend-icon",style:{minWidth:l}},o().createElement("img",{src:"data:".concat(e.contentType,";base64,").concat(e.imageData),width:e.width,height:e.height})),e.label)}))))})),m&&o().createElement(le.Z,{size:12,style:{display:"inline-block"}}),s&&o().createElement(ie.Z,{msgId:"layerProperties.legenderror"}))};var de=n(1036),fe=n(414293),pe=n.n(fe),ye=n(701469),me=n.n(ye);function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Se(r.key),r)}}function be(e,t,n){return t=Oe(t),function(e,t){if(t&&("object"==ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,he()?Reflect.construct(t,n||[],Oe(e).constructor):t.apply(e,n))}function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}function we(e,t,n){return(t=Se(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){var t=function(e,t){if("object"!=ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ve(t)?t:t+""}var je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),be(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this;return this.props.hide?null:o().createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(e){e.stopPropagation()}},this.props.hideTooltip?o().createElement(de.Z,{key:"no-tooltip",disabled:this.props.disabled,start:[pe()(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(t){me()(t)&&t[0]&&e.props.onChange(parseFloat(t[0].replace(" %","")/100))}}):o().createElement(de.Z,{key:"tooltip",disabled:this.props.disabled,start:[pe()(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" %"}},range:{min:0,max:100},onChange:function(t){return e.props.onChange(parseFloat(t[0].replace(" %",""))/100)}}))}}],r&&ge(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);we(je,"propTypes",{hide:l().bool,opacity:l().number,disabled:l().bool,hideTooltip:l().bool,onChange:l().func}),we(je,"defaultProps",{opacity:1,onChange:function(){},visibility:!0});const Pe=je;var Te=n(808224);function Ce(e){var t=e.style;return o().createElement(o().Fragment,null,"geostyler"===t.format&&o().createElement("div",{className:"ms-legend"},(t.body.rules||[]).map((function(e){return o().createElement("div",{className:"ms-legend-rule",key:e.ruleId},o().createElement(Te.Z,{rule:e}),o().createElement("span",null,e.name||""))}))))}Ce.propTypes={style:l().object};const Ie=Ce;var xe=n(815135),ke=["children"],De=(0,xe.Z)((function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ke);return o().createElement("button",n,t)}));const Le=function(e){var t=e.hide,n=e.value,r=e.onChange,i=e.mutuallyExclusive;return t?null:o().createElement(De,{className:"ms-visibility-check".concat(n?" active":""),onClick:function(e){e.stopPropagation(),r(!n)},onContextMenu:function(e){e.stopPropagation()}},o().createElement(O.gG,{glyph:i?n?"radio-on":"radio-off":n?"checkbox-on":"checkbox-off"}))};var Ne=n(580628),Ae=["children","titleRef","idDropDown","keyProp"];function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Me.apply(null,arguments)}var Fe=(0,xe.Z)((function(e){var t=e.children,n=e.titleRef,r=(e.idDropDown,e.keyProp,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ae));return o().createElement("div",Me({},r,{ref:n,className:"ms-node-title"}),t)}));const _e=(0,Ne.Z)((function(e){var t,n,i=e.node,l=void 0===i?{}:i,a=e.filterText,u=void 0===a?"":a,c=e.currentLocale,s=e.tooltipOptions,d=e.showTooltip,f=e.width,p=e.showFullTitle,y=(0,r.useRef)(),v=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],b=v[1],h=(0,m.BC)({node:l,currentLocale:c,tooltipOptions:s}),O=h.title,E=void 0===O?"":O,w=h.tooltipText,S=void 0===w?"":w,j=d&&g?S:void 0;(0,r.useEffect)((function(){b(!(S===E&&!(y.current.clientWidth<y.current.scrollWidth)))}),[E,S,f,p]);var P="title-tooltip-".concat(null==l?void 0:l.id),T=(null==l?void 0:l.tooltipPlacement)||"top";if(!u)return o().createElement(Fe,{titleRef:y,idDropDown:P,keyProp:P,tooltip:j,tooltipPosition:T},E);var C=new RegExp(u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi"),I=E.match(C);return I?o().createElement(Fe,{titleRef:y,idDropDown:P,keyProp:P,tooltip:j,tooltipPosition:T},E.split(C).map((function(e,t){return t<I.length?o().createElement(o().Fragment,{key:t},e,o().createElement("mark",null,I[t])):o().createElement(o().Fragment,{key:t},e)}))):o().createElement(Fe,{titleRef:y,idDropDown:P,keyProp:P,tooltip:j,tooltipPosition:T},E)})),Ge=function(e){var t=e.node,n=e.filterText,r=e.currentLocale,i=e.tooltipOptions,l=e.beforeTitle,a=e.afterTitle,u=e.onClick,c=e.className,s=e.showTitleTooltip,d=e.showFullTitle;return o().createElement(o().Fragment,null,o().createElement("div",{className:"ms-node-header".concat(c?" ".concat(c):""),onClick:u},o().createElement("div",{className:"ms-node-header-info"},o().createElement("div",{className:"ms-node-header-addons"},l),o().createElement("div",{className:"ms-node-title-container"},o().createElement(_e,{node:t,filterText:n,currentLocale:r,tooltipOptions:i,showTooltip:s,showFullTitle:d})),o().createElement("div",{className:"ms-node-header-addons"},a))))};var We=["children"],Ze=["onClick"];function Ue(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Be=(0,xe.Z)((function(e){var t=e.children,n=Ue(e,We);return o().createElement("button",n,t)})),He=(0,xe.Z)(O.gG);const ze=function(e){var t=e.onClick,n=Ue(e,Ze);if(!t)return o().createElement(He,n);var r=n.glyph,i=n.tooltipId,l=n.tooltip,a=n.active,u=n.style,c=n.className,s=n.disabled;return o().createElement(Be,{style:u,className:"".concat(c||"").concat(a?" active":""),disabled:s,tooltipId:i,tooltip:l,onClick:function(e){e.stopPropagation(),s||t(e)}},o().createElement(O.gG,{glyph:r}))},$e=function(e){var t=e.hide,n=e.expanded,r=e.disabled,i=e.onChange;return t?null:o().createElement("button",{className:"ms-node-expand",onClick:function(e){e.stopPropagation(),r||i({expanded:!n})},disabled:r},o().createElement(O.gG,{glyph:n?"bottom":"next"}))};function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ye(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Je=function(e){var t=e.node,n=e.onChange,r=e.itemComponent,i=(t||{}).layerFilter;if(!i||!r)return null;var l=(i||{}).disabled;return o().createElement(r,{glyph:"filter",active:!l,tooltipId:l?"toc.filterIconDisabled":"toc.filterIconEnabled",onClick:function(){n({layerFilter:qe(qe({},i),{},{disabled:!i.disabled})})}})};function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Qe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rt.apply(null,arguments)}var ot=function(e){var t,n,r,i,l=e.node,a=e.filterText,u=e.onChange,c=e.sortHandler,s=e.config,d=void 0===s?{}:s,f=e.nodeToolItems,p=void 0===f?[]:f,y=e.onSelect,m=e.nodeType,v=e.nodeTypes,b=e.error,O=e.visibilityWarningMessageId,E=e.visibilityCheck,w=e.nodeIcon,S=void 0!==(null==d?void 0:d.expanded),j=S?null==d?void 0:d.expanded:null==l?void 0:l.expanded,P=function(){var e;if(b||null!=d&&null!==(e=d.layerOptions)&&void 0!==e&&e.hideLegend)return null;var t,n,r,i,a,c=null==l?void 0:l.type;return["wfs","vector"].includes(c)?"geostyler"===(null==l||null===(t=l.style)||void 0===t?void 0:t.format)&&(null==l||null===(n=l.style)||void 0===n||null===(r=n.body)||void 0===r||null===(i=r.rules)||void 0===i?void 0:i.length)>0?o().createElement(o().Fragment,null,o().createElement("li",null,o().createElement(Ie,{style:null==l?void 0:l.style}))):null:"wms"===c?o().createElement(o().Fragment,null,o().createElement("li",null,o().createElement(Q,rt({node:l,currentZoomLvl:null==d?void 0:d.zoom,scales:null==d?void 0:d.scales,language:null==d?void 0:d.language},null==d||null===(a=d.layerOptions)||void 0===a?void 0:a.legendOptions,{onChange:u})))):"arcgis"===c?o().createElement(o().Fragment,null,o().createElement("li",null,o().createElement(se,{node:l}))):null}(),T={node:l,onChange:u,nodeType:m,nodeTypes:v,itemComponent:ze},C=null!=d&&null!==(t=d.layerOptions)&&void 0!==t&&t.hideFilter?[]:[{name:"FilterLayer",Component:Je}];return o().createElement(o().Fragment,null,o().createElement(Ge,{node:l,className:m,filterText:a,currentLocale:null==d?void 0:d.currentLocale,tooltipOptions:null==d||null===(n=d.layerOptions)||void 0===n?void 0:n.tooltipOptions,onClick:y,showTitleTooltip:null==d?void 0:d.showTitleTooltip,showFullTitle:null==d?void 0:d.showFullTitle,beforeTitle:o().createElement(o().Fragment,null,c,o().createElement($e,{hide:!(!S&&P),expanded:j,onChange:u}),E,w),afterTitle:o().createElement(o().Fragment,null,b?o().createElement(ze,{tooltip:o().createElement(ie.Z,{msgId:b.msgId,msgParams:b.msgParams}),glyph:"exclamation-mark"}):null,O&&o().createElement(ze,{glyph:"info-sign",tooltipId:O}),null!=d&&null!==(r=d.layerOptions)&&void 0!==r&&r.indicators?g()(d.layerOptions.indicators).map((function(e){return"dimension"===e.type&&h()((null==l?void 0:l.dimensions)||[],e.condition)?e.glyph&&o().createElement(ze,rt({onClick:!1,key:e.key,glyph:e.glyph},e.props)):null})):null,[].concat(C,(i=p,function(e){if(Array.isArray(e))return nt(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).filter((function(e){var t=e.selector;return(void 0===t?function(){return!0}:t)(T)})).map((function(e){var t=e.Component,n=e.name;return o().createElement(t,rt({key:n},T))})))}),j&&P?o().createElement("ul",null,P):null,o().createElement(Pe,{hide:!!b||(null==d?void 0:d.hideOpacitySlider)||["3dtiles","model"].includes(null==l?void 0:l.type),opacity:null==l?void 0:l.opacity,disabled:!l.visibility,hideTooltip:!d.showOpacityTooltip,onChange:function(e){return u({opacity:e})}}))},it=function(e){var t,n=e.node,r=e.parentId,i=e.connectDragPreview,l=void 0===i?function(e){return e}:i,u=e.connectDragSource,c=void 0===u?function(e){return e}:u,s=e.index,d=e.sort,f=e.filter,p=void 0===f?function(){return!0}:f,y=e.filterText,v=e.replaceNodeOptions,g=void 0===v?function(e){return e}:v,b=e.onChange,h=void 0===b?function(){}:b,E=e.onContextMenu,w=void 0===E?function(){}:E,S=e.onSelect,j=void 0===S?function(){}:S,P=e.getNodeStyle,C=void 0===P?function(){}:P,I=e.getNodeClassName,x=void 0===I?function(){return""}:I,k=e.mutuallyExclusive,D=e.nodeType,L=e.sortable,A=e.config,M=e.nodeToolItems,F=void 0===M?[]:M,_=e.nodeItems,G=void 0===_?[]:_,W=e.nodeTypes,Z=e.theme,U=g(n,D),B=null!==(t=null==U?void 0:U.error)&&void 0!==t?t:(0,m.EM)(U),H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.visualizationMode===N.nU._2D&&["3dtiles","model"].includes(e.type))return"toc.notVisibleSwitchTo3D";if(t.visualizationMode===N.nU._3D&&["cog"].includes(e.type))return"toc.notVisibleSwitchTo2D";if(void 0!==t.resolution&&!(0,a.T4)(e,t.resolution)){var n=e.maxResolution||1/0;return t.resolution>=n?"toc.notVisibleZoomIn":"toc.notVisibleZoomOut"}return"Warning"===e.loadingError?"toc.toggleLayerVisibilityWarning":""}(U,A),z=et(et({},U),{},{error:B,visibilityWarningMessageId:H});function $(e){h({node:n,nodeType:D,parentId:r,options:e})}if(!p(z,D,r))return null;var Y=(0,a.jg)(z),V={index:s,parentId:r,theme:Z,node:z,filterText:y,onChange:$,mutuallyExclusive:k,config:A,nodeToolItems:F,onSelect:function(e){e.stopPropagation(),e.preventDefault(),j({node:n,nodeType:D,parentId:r,event:e})},nodeType:D,error:B,visibilityWarningMessageId:H,nodeTypes:W,sortHandler:L?c(o().createElement("div",{className:"grab-handle",onClick:function(e){return e.stopPropagation()}},o().createElement(O.gG,{glyph:"grab-handle"}))):o().createElement("div",{className:"grab-handle disabled"}),visibilityCheck:o().createElement(Le,{hide:null==A?void 0:A.hideVisibilityButton,mutuallyExclusive:k,value:!(null==z||!z.visibility),onChange:function(e){$({visibility:e})}}),nodeIcon:o().createElement(O.gG,{className:"ms-node-icon",glyph:Y})},q=C(z,D),K=x(z,D),J=G.filter((function(e){var t=e.selector;return(void 0===t?function(){return!1}:t)(V)}));return l(o().createElement("li",{className:"ms-node ms-node-layer".concat(null!=z&&z.dragging?" dragging":"").concat(K?" ".concat(K):""),style:q,onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),w({node:n,nodeType:D,parentId:r,event:e})}},o().createElement(T,{sortable:L,sort:d,nodeType:D,index:s,id:z.id,parentId:r},o().createElement(R,{loading:null==z?void 0:z.loading}),J.length?J.map((function(e){var t=e.Component,n=e.name;return o().createElement(t,rt({key:n},V,{defaultLayerNodeComponent:ot}))})):o().createElement(ot,V))))};const lt=function(e){return o().createElement(L,rt({},e,{component:it}))};function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}var ut=["node","parentId","children","connectDragPreview","connectDragSource","mutuallyExclusive","sortable","nodeType"];function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=at(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==at(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ft.apply(null,arguments)}var pt=function(e){var t,n=e.node,r=e.nodeType,i=e.nodeTypes,l=e.config,a=e.onSelect,u=e.onChange,c=e.nodeToolItems,s=void 0===c?[]:c,d=e.sortHandler,f=e.expandButton,p=e.visibilityCheck,y=e.nodeIcon,m={node:n,onChange:u,nodeType:r,nodeTypes:i,itemComponent:ze};return o().createElement(o().Fragment,null,o().createElement(Ge,{node:n,nodeType:r,currentLocale:null==l?void 0:l.currentLocale,tooltipOptions:null==l||null===(t=l.groupOptions)||void 0===t?void 0:t.tooltipOptions,showFullTitle:null==l?void 0:l.showFullTitle,onClick:a,showTitleTooltip:null==l?void 0:l.showTitleTooltip,beforeTitle:o().createElement(o().Fragment,null,d,f,p,y),afterTitle:o().createElement(o().Fragment,null,n.error?o().createElement(ze,{tooltipId:"toc.loadingerror",glyph:"exclamation-mark"}):null,s.filter((function(e){var t=e.selector;return(void 0===t?function(){return!0}:t)(m)})).map((function(e){var t=e.Component,n=e.name;return o().createElement(t,ft({key:n},m))})))}))},yt=function(e){var t,n,i,l=e.node,a=e.parentId,u=e.children,c=e.connectDragPreview,s=void 0===c?function(e){return e}:c,d=e.connectDragSource,f=void 0===d?function(e){return e}:d,p=e.mutuallyExclusive,y=e.sortable,m=e.nodeType,v=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ut),g=v.sort,b=v.index,h=v.filter,E=void 0===h?function(){return!0}:h,w=v.replaceNodeOptions,S=void 0===w?function(e){return e}:w,j=v.filterText,P=v.onChange,C=void 0===P?function(){}:P,I=v.onContextMenu,x=void 0===I?function(){}:I,k=v.onSelect,D=void 0===k?function(){}:k,L=v.getNodeStyle,N=void 0===L?function(){}:L,A=v.getNodeClassName,M=void 0===A?function(){return""}:A,F=v.nodeTypes,_=v.config,G=v.nodeItems,W=void 0===G?[]:G,Z=v.nodeToolItems,U=void 0===Z?[]:Z,B=v.theme,H=S(l,m);function z(e){C({node:l,nodeType:m,parentId:a,options:e})}if(!E(H,m,a))return null;var $=void 0!==(null==_?void 0:_.expanded),Y=$?null==_?void 0:_.expanded:null===(t=null==H?void 0:H.expanded)||void 0===t||t,V=N(l,m),q=M(l,m),K={index:b,parentId:a,theme:B,node:H,filterText:j,nodeType:m,nodeTypes:F,config:_,onSelect:function(e){e.stopPropagation(),e.preventDefault(),D({node:l,nodeType:m,parentId:a,event:e})},onChange:z,nodeToolItems:U,mutuallyExclusive:p,visibilityCheck:o().createElement(Le,{hide:null==_?void 0:_.hideVisibilityButton,mutuallyExclusive:p,value:null==H?void 0:H.visibility,onChange:function(e){z({visibility:e})}}),expandButton:o().createElement($e,{hide:!!$,expanded:Y,onChange:z,disabled:!!j}),sortHandler:y?f(o().createElement("div",{className:"grab-handle",onClick:function(e){return e.stopPropagation()}},o().createElement(O.gG,{glyph:"grab-handle"}))):o().createElement("div",{className:"grab-handle disabled"}),nodeIcon:o().createElement(O.gG,{className:"ms-node-icon",glyph:Y?"folder-open":"folder-close"})},J=W.filter((function(e){var t=e.selector;return(void 0===t?function(){return!1}:t)(K)}));return s(o().createElement("li",{className:"ms-node ms-node-group".concat(null!=H&&H.dragging?" dragging":"").concat(q?" ".concat(q):""),style:V,onClick:function(e){return e.stopPropagation()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),x({node:l,nodeType:m,parentId:a,event:e})}},o().createElement(T,{nodeType:m,index:b,id:H.id,parentId:a,sort:g,sortable:y},o().createElement(R,{loading:null==H?void 0:H.loading}),J.length?J.map((function(e){var t=e.Component,n=e.name;return o().createElement(t,ft({key:n},K,{defaultGroupNodeComponent:pt}))})):o().createElement(pt,K)),Y?o().createElement("ul",null,o().createElement(T,{sortable:y,sort:g,nodeType:m,index:b,id:H.id,position:"before",parentId:a},o().createElement("div",{style:{display:"flex",height:8}})),null==H||null===(n=H.nodes)||void 0===n||null===(i=n.map)||void 0===i?void 0:i.call(n,(function(e,t){return(0,r.cloneElement)(u,st(st({},v),{},{key:e.id,node:e,parentId:H.id,index:t,mutuallyExclusive:null==H?void 0:H.nodesMutuallyExclusive,onChange:function(e){var t;return(null==e?void 0:e.parentId)===(null==H?void 0:H.id)&&void 0!==(null==e||null===(t=e.options)||void 0===t?void 0:t.visibility)&&null!=H&&H.nodesMutuallyExclusive?(H.nodes.forEach((function(t){var n;t.id!==(null==e||null===(n=e.node)||void 0===n?void 0:n.id)&&C({node:t,nodeType:null!=t&&t.nodes?F.GROUP:F.LAYER,parentId:null==H?void 0:H.id,options:{visibility:!1}})})),C(st(st({},e),{},{options:st(st({},null==e?void 0:e.options),{},{visibility:!0})}))):C(e)}}))}))):null,o().createElement(T,{sortable:y,sort:g,nodeType:m,index:b,id:H.id,position:"after",parentId:a},o().createElement("div",{style:{display:"flex",height:8}}))))};const mt=function(e){return o().createElement(L,ft({},e,{component:yt}))};function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||wt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){if(e){if("string"==typeof e)return St(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var jt=function(e){var t=e.node,n=e.filterText,r=e.currentLocale;return(0,m.BC)({node:t,currentLocale:r}).title.toLowerCase().includes(n.toLocaleLowerCase())},Pt=function e(t){var n,r=t.node,o=t.filterText,i=t.currentLocale;return!(null==r||null===(n=r.nodes)||void 0===n||!n.find((function(t){return null!=t&&t.nodes?e({node:t,filterText:o,currentLocale:i}):jt({node:t,filterText:o,currentLocale:i})})))},Tt=function e(t,n){var r;return!(null==t||null===(r=t.nodes)||void 0===r||!r.find((function(t){return!!n(t)||(null!=t&&t.nodes?!!e(t,n):!!n(t))})))};const Ct=function(e){var t=e.tree,n=e.filterText,i=e.onSort,l=void 0===i?function(){}:i,u=e.onChange,c=void 0===u?function(){}:u,s=e.groupNodeComponent,d=void 0===s?mt:s,f=e.layerNodeComponent,p=void 0===f?lt:f,v=e.onContextMenu,g=void 0===v?function(){}:v,b=e.onSelect,h=void 0===b?function(){}:b,O=e.contextMenu,E=e.selectedNodes,w=void 0===E?[]:E,S=e.rootGroupId,j=void 0===S?a.oR:S,P=e.defaultGroupId,T=void 0===P?a.tE:P,C=e.nodeTypes,I=void 0===C?a.$P:C,x=e.noFilteredResultsMsgId,k=void 0===x?"toc.noFilteredResults":x,D=e.config,L=void 0===D?{}:D,N=e.className,A=e.nodeItems,R=e.nodeToolItems,M=e.singleDefaultGroup,F=void 0===M?(0,m.js)(t):M,_=e.theme,G=(0,r.useRef)(),W=F?t[0].nodes:t,Z=F?T:j,U=Et((0,r.useState)(null),2),B=U[0],H=U[1],z=function(e){var t=(e||"").split(".");return t[t.length-1]},$=Et((0,r.useState)(!1),2),Y=$[0],V=$[1];(0,r.useLayoutEffect)((function(){var e,t;V(0===(null==G||null===(e=G.current)||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length))}),[n]);var q=function(){return{}},K=function(e){var t=w.find((function(t){return e.id===t.id})),n=(null==O?void 0:O.id)===e.id,r=e.visibilityWarningMessageId||!1===e.visibility||!0===e.inactive;return[].concat(Ot(n?["focused"]:[]),Ot(t?["selected"]:[]),Ot(e.error?["error"]:[]),Ot(r?["inactive"]:[])).join(" ")};return o().createElement("div",{className:"ms-layers-tree".concat(N?" ".concat(N):"").concat(_?" ".concat(_,"-tree"):"").concat(L.showFullTitle||n?"":" single-line-title"),onPointerLeave:function(){B&&H(null)}},o().createElement("ul",{ref:G,"data-root-parent-id":Z,onContextMenu:function(e){e.preventDefault()}},(W||[]).map((function(e,t){return o().createElement(y,{containerNode:G.current,key:e.id,index:t,node:e,groupElement:(i=d,o().createElement(i,null)),layerElement:(r=p,o().createElement(r,null)),nodeTypes:I,replaceNodeOptions:function(e,t){return bt(bt(bt(bt(bt(bt(bt({},e),B&&z(B)===z(e.id)&&{dragging:!0}),n&&{sortable:!1}),t===I.GROUP&&n&&{expanded:!0}),t===I.GROUP&&(null==e?void 0:e.id)===T&&{sortable:!1}),t===I.GROUP&&Tt(e,(function(e){return"Error"===e.loadingError}))&&{error:!0}),t===I.GROUP&&Tt(e,(function(e){return e.loading}))&&{loading:!0})},getNodeStyle:q,getNodeClassName:K,filterText:n,config:L,theme:_,filter:function(e,t){return t===I.GROUP&&n?Pt({node:e,filterText:n}):t!==I.LAYER||!n||jt({node:e,filterText:n,currentLocale:L.currentLocale})},sort:{beginDrag:function(e){H(e)},hover:function(e,t,n){l(e,t,n)},drop:function(){H(null)}},onChange:c,onContextMenu:g,onSelect:h,nodeItems:A,nodeToolItems:R});var r,i}))),Y&&n?o().createElement(ie.Z,{msgId:k}):null)};var It=n(552259);function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=xt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e){var t=e.tree,n=e.contextMenu,r=e.onSort,i=void 0===r?function(){}:r,l=e.onChange,u=void 0===l?function(){}:l,c=e.onSelectNode,s=void 0===c?function(){}:c,d=e.onContextMenu,f=void 0===d?function(){}:d,p=e.groupNodeComponent,y=e.layerNodeComponent,m=e.filterText,v=e.selectedNodes,g=e.rootGroupId,b=e.nodeTypes,h=void 0===b?a.$P:b,O=e.config,E=void 0===O?{}:O,w=e.className,S=e.nodeItems,j=e.nodeToolItems,P=e.singleDefaultGroup,T=e.theme;return o().createElement(Ct,{className:w,theme:T,tree:t,filterText:m,onSort:i,onChange:function(e){var t=e.options,n=e.node,r=e.nodeType;return u(n.id,r,t)},groupNodeComponent:p,layerNodeComponent:y,contextMenu:n,onContextMenu:f,selectedNodes:v,onSelect:function(e){var t=e.event,n=e.node,r=e.nodeType;return s(n.id,r===h.GROUP?"group":"layer",null==t?void 0:t.ctrlKey)},nodeTypes:h,rootGroupId:g,config:E,nodeItems:S,nodeToolItems:j,singleDefaultGroup:P})}const At=function(e){var t=e.map,n=void 0===t?{layers:[],groups:[]}:t,r=e.onChangeMap,i=void 0===r?function(){}:r,l=e.selectedNodes,u=void 0===l?[]:l,c=e.onSelectNode,s=void 0===c?function(){}:c,d=e.config,f=e.className,p=e.nodeToolItems,y=e.singleDefaultGroup,v=e.nodeItems,g=e.theme,b=((0,a.DN)(n)||{}).layers,h=(0,a.C1)(b.flat||[],b.groups||[]).groups;function O(e,t){var r,o,l=(0,It.QZ)(n,e||b.flat,t||b.groups,[]),a=Dt(Dt({},n),{},{layers:null==l||null===(r=l.map)||void 0===r?void 0:r.layers,groups:null==l||null===(o=l.map)||void 0===o?void 0:o.groups});i(a)}return o().createElement(Nt,{className:f,theme:g,tree:h,selectedNodes:(0,m.HC)(u,b.flat,h),onSelectNode:s,onSort:function(e,t,n){var r=(0,a.tV)({groups:b.groups,layers:b.flat},{node:e,index:n,groupId:t});r&&O(r.layers,r.groups)},onChange:function(e,t,n){var r=(0,a.Yt)({groups:b.groups,layers:b.flat},{node:e,nodeType:t,options:n});O(r.layers,r.groups)},config:d,nodeItems:v,nodeToolItems:p,singleDefaultGroup:y})}},815430:(e,t,n)=>{"use strict";n.d(t,{Sk:()=>g,js:()=>b,gP:()=>h,BC:()=>E,fu:()=>S,EM:()=>P,HC:()=>C});var r=n(513218),o=n.n(r),i=n(227361),l=n.n(i),a=n(414293),u=n.n(a),c=n(624262),s=n(916651),d=n(91175),f=n.n(d);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={DESELECT:"DESELECT",GROUP:"GROUP",LAYER:"LAYER",BOTH:"BOTH",GROUPS:"GROUPS",LAYERS:"LAYERS"},b=function(e){var t,n,r,o;return!(1!==(null==e?void 0:e.length)||null==e||null===(t=e[0])||void 0===t||!t.nodes||(null==e||null===(n=e[0])||void 0===n?void 0:n.id)!==c.tE||!1===(null==e||null===(r=e[0])||void 0===r?void 0:r.visibility)||!0===(null==e||null===(o=e[0])||void 0===o?void 0:o.nodesMutuallyExclusive))},h=function(e){var t=e.label,n=RegExp("^/|/$|/{2,}");return!(!t||n.test(t))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" - ";switch(e){case"title":return(o()(t.title)?t.title[n]||t.title.default:t.title)||t.name||"";case"description":return t.description||"";case"both":var i=(o()(t.title)?t.title[n]||t.title.default:t.title)||t.nam||"",l=t.description||"";return"".concat(i).concat(r&&l?r:"").concat(l);default:return t[e]}},E=function(e){var t=e.node,n=e.currentLocale,r=e.tooltipOptions,o=void 0===r?{separator:" - ",maxLength:807}:r,i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" - ";return O(e.tooltipOptions,e,t,n)}(t,n,o.separator)||"";return(i=i&&i.substring(0,o.maxLength)).length===o.maxLength&&(i+="..."),{title:O("title",t,n,o.separator),tooltipText:i}},w=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f()(n.filter((function(e){return e.label===t})))||n.reduce((function(n,r){return n||!!r.nodes&&e(t,r.nodes)}),void 0)},S=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/[^\.\/]+/g,(function(t){var n=l()(w(t,e),"label");return e&&n||t}));return(t=t.replace(/\./g,"/")).replace(/\${dot}/g,".")},j=function(e){var t,n;return(null==e||null===(t=e.bbox)||void 0===t?void 0:t.crs)||(null==e||null===(n=e.sourceMetadata)||void 0===n?void 0:n.crs)},P=function(e){return"Error"===e.loadingError?{msgId:"toc.loadingerror"}:function(e){var t=j(e);return!!u()(t)||(0,s.isSRSAllowed)(t)}(e)?null:{msgId:"toc.sourceCRSNotCompatible",msgParams:{sourceCRS:j(e)}}},T=function e(t,n){return(null==n?void 0:n.id)===t?n:null==n?void 0:n.nodes.reduce((function(n,r){return null!==n?n:null!=r&&r.nodes?e(t,r):null}),null)},C=function(e,t,n){return e.map((function(e){var r=t.find((function(t){var n=t.id;return e===n}));if(r){var o=P(r);return{id:e,node:m(m({},r),{},{error:o}),type:c.$P.LAYER}}var i=T(e,{nodes:n});return i?{id:e,node:i,type:c.$P.GROUP}:null})).filter((function(e){return!!e}))}}}]);