(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[61771],{735913:(t,e,r)=>{"use strict";r.d(e,{Z:()=>v});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i),c=r(480681),u=r(950966),l=r(805346);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function f(t,e,r){return e=b(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y()?Reflect.construct(e,r||[],b(t).constructor):e.apply(t,r))}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function m(t,e,r){return(e=d(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:String(e)}var g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,e,arguments)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this,e=this.props.className?" "+this.props.className:"",r=a().createElement(c.Glyphicon,{className:"toc-layer-tool"+e,style:this.props.style,glyph:this.props.glyph,onClick:function(){return t.props.onClick(t.props.node)}});return this.props.tooltip?a().createElement(u.Z,{placement:"bottom",overlay:a().createElement(c.Tooltip,{id:"Tooltip-"+this.props.tooltip},a().createElement("strong",null,a().createElement(l.Z,{msgId:this.props.tooltip,msgParams:this.props.msgParams})))},r):r}}])&&p(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(a().Component);m(g,"propTypes",{node:o().object,onClick:o().func,style:o().object,glyph:o().string,tooltip:o().string,msgParams:o().object,className:o().string}),m(g,"defaultProps",{onClick:function(){}});const v=g},497844:(t,e,r)=>{"use strict";r.d(e,{Z:()=>w});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),c=r(1036),u=r(414293),l=r.n(u),s=r(701469),p=r.n(s);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function b(t,e,r){return e=m(e),function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h()?Reflect.construct(e,r||[],m(t).constructor):e.apply(t,r))}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function g(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:String(e)}var O=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,e,arguments)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this;return o().createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(t){t.stopPropagation()}},this.props.hideTooltip&&o().createElement(c.Z,{disabled:this.props.disabled,start:[l()(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(e){p()(e)&&e[0]&&t.props.onChange(parseFloat(e[0].replace(" %","")/100))}})||o().createElement(c.Z,{disabled:this.props.disabled,start:[l()(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(t){return Math.round(t)},to:function(t){return Math.round(t)+" %"}},range:{min:0,max:100},onChange:function(e){return t.props.onChange(parseFloat(e[0].replace(" %",""))/100)}}))}}])&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(o().Component);g(O,"propTypes",{opacity:a().number,disabled:a().bool,hideTooltip:a().bool,onChange:a().func}),g(O,"defaultProps",{opacity:1,onChange:function(){},visibility:!0});const w=O},490079:(t,e,r)=>{"use strict";r.d(e,{Z:()=>T});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),c=r(414293),u=r.n(c),l=r(727418),s=r.n(l),p=r(675263),f=r.n(p),y=r(124852),b=r.n(y),h=r(233044),m=r(805346);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E(n.key),n)}}function v(t,e,r){return e=w(e),function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}(t,O()?Reflect.construct(e,r||[],w(t).constructor):e.apply(t,r))}function O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(O=function(){return!!t})()}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function S(t,e,r){return(e=E(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:String(e)}var _=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return S(j(t=v(this,e,[].concat(n))),"state",{error:!1}),S(j(t),"onImgError",(function(){t.setState((function(){return{error:!0}}))})),S(j(t),"getScale",(function(t){if(t.scales&&void 0!==t.currentZoomLvl&&t.scaleDependent){var e,r=Math.round(t.currentZoomLvl),n=null!==(e=t.scales[r])&&void 0!==e?e:t.scales[t.scales.length-1];return Math.round(n)}return null})),S(j(t),"getUrl",(function(e,r){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var n=e.layer,i=u()(r)?a()(n.url)&&Math.floor(Math.random()*n.url.length):r,c=a()(n.url)?n.url[i]:n.url.replace(/[?].*$/g,""),l=o().parse(c),p=(0,h.clearNilValuesForParams)(n.params),f=t.getScale(e),y=s()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:n.name,style:n.style||null,version:n.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},n.legendParams||{},e.language&&n.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,h.addAuthenticationToSLD)(p||{},e.layer),p&&p.SLD_BODY?{SLD_BODY:p.SLD_BODY}:{},null!==f?{SCALE:f}:{});return(0,h.addAuthenticationParameter)(c,y),o().format({host:l.host,protocol:l.protocol,pathname:l.pathname,query:y})}return""})),S(j(t),"validateImg",(function(e){e.height<=1&&e.width<=2&&t.onImgError()})),t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(e,t),r=e,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(t){this.state.error&&this.getUrl(t,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var t=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?b().createElement("img",{onError:this.onImgError,onLoad:function(e){return t.validateImg(e.target)},src:this.getUrl(this.props),style:this.props.style}):b().createElement(m.Z,{msgId:"layerProperties.legenderror"})}}])&&g(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(b().Component);S(_,"propTypes",{layer:f().object,legendHeight:f().number,legendWidth:f().number,legendOptions:f().string,style:f().object,currentZoomLvl:f().number,scales:f().array,scaleDependent:f().bool,language:f().string}),S(_,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const T=_}}]);