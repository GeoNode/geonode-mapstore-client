"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[12820,37369],{737369:(e,t,r)=>{r.d(t,{A:()=>u});var o=r(995531),n=r(23412),i=r.n(n),l=r(45228),a=r.n(l),p={format:"json",bounded:0,polygon_geojson:1,priority:5};const u={geocode:function(e,t){var r=a()({q:e},p,t||{}),n=i().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o.A.get(n)},reverseGeocode:function(e,t){var r=a()({lat:e.lat,lon:e.lng},t||{},p),n=i().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o.A.get(n)}}},400580:(e,t,r)=>{r.d(t,{A:()=>lt});var o=r(273517),n=r.n(o),i=r(605556),l=r.n(i),a=r(8117),p=r(256951),u=r(306840),c=r(868097),s=r(45228),d=r.n(s),f=r(551783);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,E(o.key),o)}}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function h(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}var w=(0,f.A)("placeholder")((0,f.A)("fieldOptions","label","object")(c.A)),F=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return h(e=function(e,t,r){return t=g(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}(this,t,[].concat(o)),"renderOperatorField",(function(){return n().createElement(c.A,{dropUp:e.props.dropUp,fieldOptions:e.props.operatorOptions,fieldName:"operator",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.operator,onUpdateField:e.updateFieldElement})})),h(e,"renderValueField",(function(t){return n().cloneElement(n().Children.toArray(e.props.children).filter((function(e){return e.props.attType===t.type}))[0],d()({fieldName:"value",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.value,fieldException:e.props.filterField.exception,onUpdateField:e.updateFieldElement,toggleMenu:e.props.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.updateExceptionFieldElement},t.fieldOptions||{}))})),h(e,"updateExceptionFieldElement",(function(t,r){e.props.onUpdateExceptionField(t,r)})),h(e,"updateFieldElement",(function(t,r,o,n,i){var l;if("attribute"===r){var a=(l=e.props.attributes.filter((function(e){return e.attribute===o}))[0])&&l.type||n;e.props.onUpdateField(t,r,o,a,i),"array"===a&&e.props.onUpdateField(t,"operator","contains",a,i)}else e.props.onUpdateField(t,r,o,"boolean"===n?"string":n,i);if("value"===r){var p=e.props.attributes.filter((function(t){return t.dependson&&t.dependson.field===e.props.filterField.attribute}));p.length>0&&e.props.onChangeCascadingValue(p)}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return n().createElement("div",{className:"filter-field-row"},n().createElement("div",{className:"filter-field-attribute"},n().createElement(w,{dropUp:this.props.dropUp,valueField:"attribute",textField:"label",fieldOptions:this.props.attributes,placeholder:"queryform.attributefilter.combo_placeholder",fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),n().createElement("div",{className:"filter-field-operator"},t?this.renderOperatorField():null),n().createElement("div",{className:"filter-field-value"},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?n().createElement("div",{className:"filter-field-tools"},this.props.deleteButton):null)}}])&&y(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);h(F,"propTypes",{dropUp:l().bool,attributes:l().array,filterField:l().object,operatorOptions:l().array,onUpdateField:l().func,maxFeaturesWPS:l().number,toggleMenu:l().func,deleteButton:l().node,onUpdateExceptionField:l().func,onChangeCascadingValue:l().func}),h(F,"contextTypes",{messages:l().object}),h(F,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}});const O=F;var P=r(274156),T=r(916589),j=r(269843),S=r.n(j),I=r(962193),k=r.n(I),x=r(795093),_=r.n(x),A=r(534973),D=r.n(A),q=r(574548),C=r(628017),N=r(871543),U=r(8571),R=r(802417),M=r(907958),B=r(525859);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function L(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,z(o.key),o)}}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function Q(e,t,r){return(t=z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}D()(_());var J=[{type:B.g4.DATE,value:"{today}+P0D",labelId:"queryform.attributefilter.datefield.quickSelectors.today"},{type:B.g4.DATE,value:"{today}-P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.yesterday"},{type:B.g4.DATE,value:"{today}+P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.tomorrow"},{type:B.g4.DATE_TIME,value:"{now}+P0D",labelId:"queryform.attributefilter.datefield.quickSelectors.now"},{type:B.g4.DATE_TIME,value:"{now}-P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.yesterday"},{type:B.g4.DATE_TIME,value:"{now}+P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.tomorrow"},{type:B.g4.DATE,value:"{today}/{today}",labelId:"queryform.attributefilter.datefield.quickSelectors.today"},{type:B.g4.DATE,value:"{thisWeekStart}/{thisWeekEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisWeek"},{type:B.g4.DATE,value:"{thisMonthStart}/{thisMonthEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisMonth"},{type:B.g4.DATE,value:"{today}/{today}+P7D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:B.g4.DATE,value:"{today}/{today}+P30D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:B.g4.DATE,value:"{today}/{today}+P90D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:B.g4.DATE_TIME,value:"{now}/{now}",labelId:"queryform.attributefilter.datefield.quickSelectors.now"},{type:B.g4.DATE_TIME,value:"{thisWeekStart}/{thisWeekEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisWeek"},{type:B.g4.DATE_TIME,value:"{thisMonthStart}/{thisMonthEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisMonth"},{type:B.g4.DATE_TIME,value:"{now}/{now}+P7D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:B.g4.DATE_TIME,value:"{now}/{now}+P30D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:B.g4.DATE_TIME,value:"{now}/{now}+P90D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"}],K=(0,N.A)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(R.A),$=(0,N.A)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(M.A),X=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return Q(e=function(e,t,r){return t=G(t),function(e,t){if(t&&("object"==V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,W()?Reflect.construct(t,r||[],G(e).constructor):t.apply(e,r))}(this,t,[].concat(o)),"handleChange",(function(t){e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,{startDate:t},e.props.attType)})),Q(e,"handleChangeRangeFilter",(function(t,r){var o,n,i={};i="end"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start")?{startDate:null===(o=e.props.fieldValue)||void 0===o?void 0:o.startDate,endDate:t}:{startDate:t,endDate:null===(n=e.props.fieldValue)||void 0===n?void 0:n.endDate},e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,i,e.props.attType)})),Q(e,"getQuickTimeSelectors",(function(t){var r;return null===(r=e.props.quickDateTimeSelectors)||void 0===r?void 0:r.filter((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.type,n=r.value;if(!k()(n)&&o===e.props.attType){var i,l=null===(i=n.split("/"))||void 0===i?void 0:i[1];return t?!S()(l):S()(l)}return!1}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e,t=(0,q.PR)(this.context.locale,this.props.attType),r=(0,C.kA)(this.context.messages,this.props.placeholderMsgId)||"Insert date",o=this.props.intl&&this.props.intl.formatMessage({id:"".concat(this.props.tooltipMsgId)},{format:t})||"Insert date in ".concat(t," format");return"><"===this.props.operator?n().createElement("div",{className:"query-field"},n().createElement($,{isWithinAttrTbl:!0,key:"query-range",className:this.props.className,format:t,placeholder:r,value:this.props.fieldValue,toolTip:o,operator:this.props.operator,popupPosition:"bottom",type:this.props.attType,time:this.props.attType===B.g4.TIME,calendar:this.props.attType===B.g4.DATE_TIME||this.props.attType===B.g4.DATE,onChange:this.handleChangeRangeFilter,quickDateTimeSelectors:this.getQuickTimeSelectors(!0)})):n().createElement("div",null,this.props.showLabels&&n().createElement(U.A,{msgId:"queryform.date"}),n().createElement(K,{isWithinAttrTbl:!0,key:"query-single",className:this.props.className,format:t,placeholder:r,value:null===(e=this.props.fieldValue)||void 0===e?void 0:e.startDate,toolTip:o,operator:this.props.operator,type:this.props.attType,popupPosition:"bottom",time:this.props.attType===B.g4.DATE_TIME||this.props.attType===B.g4.TIME,calendar:this.props.attType===B.g4.DATE_TIME||this.props.attType===B.g4.DATE,onChange:this.handleChange,quickDateTimeSelectors:this.getQuickTimeSelectors()}))}}])&&L(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);Q(X,"propTypes",{attType:l().string,dateEnabled:l().bool,fieldName:l().string,fieldRowId:l().number,fieldValue:l().object,fieldException:l().string,operator:l().string,onUpdateField:l().func,onUpdateExceptionField:l().func,showLabels:l().bool,timeEnabled:l().bool,quickDateTimeSelectors:l().array,placeholderMsgId:l().string,tooltipMsgId:l().string,className:l().string}),Q(X,"contextTypes",{messages:l().object,locale:l().string}),Q(X,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1,className:"query-date",placeholderMsgId:"queryform.attributefilter.datefield.placeholder",tooltipMsgId:"queryform.attributefilter.datefield.tooltip",quickDateTimeSelectors:J});const Y=(0,T.getContext)({intl:P.intlShape})(X);var Z=r(883085),ee=r.n(Z),te=r(455268);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ie.apply(null,arguments)}function le(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,se(o.key),o)}}function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ae=function(){return!!e})()}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function ce(e,t,r){return(t=se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){var t=function(e){if("object"!=re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:t+""}ee()();var de=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ce(e=function(e,t,r){return t=pe(t),function(e,t){if(t&&("object"==re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ae()?Reflect.construct(t,r||[],pe(e).constructor):t.apply(e,r))}(this,t,[].concat(o)),"renderPicker",(function(t){var r=e.props.label?n().createElement("label",null,e.props.label):null,o=e.props.lowLabel?n().createElement("label",null,e.props.lowLabel):null,i=e.props.upLabel?n().createElement("label",null,e.props.upLabel):null;return"><"===e.props.operator?n().createElement("div",{className:"query-field"},n().createElement("div",{className:"query-field-value"},o,n().createElement(te.NumberPicker,ie({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({lowBound:t,upBound:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null})}},e.props.options))),n().createElement("div",{className:"query-field-value"},i,n().createElement(te.NumberPicker,ie({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({upBound:t,lowBound:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null})}},e.props.options)))):n().createElement("div",null,r,n().createElement(te.NumberPicker,ie({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:e.props.fieldValue,onChange:function(t){return!isNaN(t)&&e.changeNumber(t)}},e.props.options)))})),ce(e,"changeNumber",(function(t){"><"===e.props.operator?null!==t.lowBound&&void 0!==t.lowBound&&null!==t.upBound&&void 0!==t.upBound&&t.lowBound>=t.upBound?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,C.kA)(e.context.messages,"queryform.attributefilter.numberfield.wrong_range")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null):e.props.isRequired&&null==t?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,C.kA)(e.context.messages,"queryform.attributefilter.numberfield.isRequired")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=ne(ne({},this.props.style),{},{borderColor:"#FF0000"})),n().createElement(u.A,{placement:"bottom",overlay:this.props.fieldException?n().createElement(a.m_,{id:this.props.fieldRowId+"_tooltip"},n().createElement("strong",null,this.props.fieldException)):n().createElement("noscript",null)},this.renderPicker(e))}}])&&le(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);ce(de,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().oneOfType([l().number,l().object]),fieldException:l().oneOfType([l().object,l().bool,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,isRequired:l().bool,label:l().string,lowLabel:l().string,upLabel:l().string,options:l().shape({format:l().string,min:l().number,max:l().number,step:l().number,precision:l().number}),style:l().object}),ce(de,"contextTypes",{messages:l().object}),ce(de,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}});const fe=de;var be=r(595535),ye=r(629057);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ge(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Fe(o.key),o)}}function ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ve=function(){return!!e})()}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}function we(e,t,r){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e){var t=function(e){if("object"!=me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==me(t)?t:t+""}var Oe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return we(e=function(e,t,r){return t=he(t),function(e,t){if(t&&("object"==me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ve()?Reflect.construct(t,r||[],he(e).constructor):t.apply(e,r))}(this,t,[].concat(o)),"renderField",(function(){var t,r=(0,C.kA)(e.context.messages,"queryform.attributefilter.text_placeholder"),o=n().createElement(a.m_,{id:"textField-tooltip"+e.props.fieldRowId},n().createElement(be.A,{msgId:null!==(t=e.props.tooltipMessage)&&void 0!==t?t:"queryform.attributefilter.tooltipTextField"})),i=n().createElement(a.MJ,{disabled:"isNull"===e.props.operator,placeholder:r,onChange:e.changeText,type:"text",value:e.props.fieldValue||""});return(0,ye.isLikeOrIlike)(e.props.operator)?n().createElement(u.A,{key:"textField-overlay"+e.props.fieldRowId,placement:"top",overlay:o},i):i})),we(e,"changeText",(function(t){e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t.target.value,e.props.attType)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?n().createElement("label",null,this.props.label):n().createElement("span",null);return n().createElement("div",{className:"textField"},e,this.renderField())}}])&&ge(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);we(Oe,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().string,label:l().string,tooltipMessage:l().string,fieldException:l().oneOfType([l().object,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,style:l().object}),we(Oe,"contextTypes",{messages:l().object}),we(Oe,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}});const Pe=Oe;var Te=r(897286),je=r(561334);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ie(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,De(o.key),o)}}function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ke=function(){return!!e})()}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function Ae(e,t,r){return(t=De(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e){var t=function(e){if("object"!=Se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Se(t)?t:t+""}var qe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ae(e=function(e,t,r){return t=xe(t),function(e,t){if(t&&("object"==Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ke()?Reflect.construct(t,r||[],xe(e).constructor):t.apply(e,r))}(this,t,[].concat(o)),"getOptions",(function(){return e.props.filterField&&e.props.filterField.options&&e.props.filterField.options[e.props.filterField.attribute]&&e.props.filterField.options[e.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),Ae(e,"getPagination",(function(t){if(!e.props.filterField.options)return{};var r=Math.ceil(e.props.filterField.fieldOptions.valuesCount/e.props.maxFeaturesWPS),o=1===e.props.filterField.fieldOptions.currentPage||!e.props.filterField.fieldOptions.currentPage,n=e.props.filterField.fieldOptions.currentPage===r||!e.props.filterField.fieldOptions.currentPage;return d()({},e.props.pagination,{paginated:0!==t.length&&!(o&&1===t.length),firstPage:o,lastPage:n,loadPrevPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),Ae(e,"getTooltip",(function(){return d()({},e.props.tooltip,{enabled:(0,ye.isLikeOrIlike)(e.props.filterField.operator),id:"autocompleteField-tooltip"+e.props.filterField&&e.props.filterField.rowId,message:n().createElement(be.A,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:"autocompleteField-overlay"+e.props.filterField&&e.props.filterField.rowId,placement:"top"})})),Ae(e,"renderField",(function(){var t;e.props.filterField&&e.props.filterField.value&&"*"!==e.props.filterField.value&&(t={value:e.props.filterField.value,label:e.props.filterField.value});var r=e.getOptions()?e.getOptions().slice(0):[];return n().createElement(je.A,{dropUp:e.props.dropUp,busy:e.props.filterField.loading,data:e.props.filterField.loading?[]:r,disabled:"isNull"===e.props.filterField.operator,itemComponent:e.props.itemComponent,open:e.props.filterField.openAutocompleteMenu,onChange:function(t){return e.handleChange(t)},onFocus:function(){return e.handleFocus(r)},onSelect:function(){return e.handleSelect()},onToggle:function(){return e.handleToggle(r)},pagination:e.getPagination(r),selectedValue:t&&t.value,tooltip:e.getTooltip()})})),Ae(e,"handleSelect",(function(){e.selected=!0})),Ae(e,"handleChange",(function(t){e.selected?(e.selected=!1,t&&""!==t.value&&e.props.onUpdateField(e.props.filterField.rowId,"value",t.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):e.props.onUpdateField(e.props.filterField.rowId,"value","string"==typeof t?t:t.value,"string",{currentPage:1,delayDebounce:1e3})})),Ae(e,"handleFocus",(function(t){e.loadWithoutfilter(t)})),Ae(e,"handleToggle",(function(){e.props.toggleMenu(e.props.filterField.rowId,!e.props.filterField.openAutocompleteMenu)})),Ae(e,"loadWithoutfilter",(function(t){0!==t.length||e.props.filterField.value||e.props.onUpdateField(e.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this.props.label?n().createElement("label",null,this.props.label):n().createElement("span",null);return n().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&Ie(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);Ae(qe,"propTypes",{dropUp:l().bool,disabled:l().bool,filterField:l().object,label:l().string,itemComponent:l().oneOfType([l().object,l().func]),maxFeaturesWPS:l().number,onUpdateField:l().func,pagination:l().object,textField:l().string,tooltip:l().object,toggleMenu:l().func,valueField:l().string}),Ae(qe,"contextTypes",{messages:l().object}),Ae(qe,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:Te.A,toggleMenu:function(){},filterField:{fieldOptions:{}}});const Ce=qe;var Ne=r(209250),Ue=r(907309),Re=r.n(Ue);function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Be(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,He(o.key),o)}}function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ve=function(){return!!e})()}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}function We(e,t){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},We(e,t)}function Ge(e,t,r){return(t=He(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function He(e){var t=function(e){if("object"!=Me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Me(t)?t:t+""}var Qe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return Ge(e=function(e,t,r){return t=Le(t),function(e,t){if(t&&("object"==Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ve()?Reflect.construct(t,r||[],Le(e).constructor):t.apply(e,r))}(this,t,[].concat(o)),"state",{open:!1}),Ge(e,"getSelected",(function(){return Re()(e.props.options,e.getFindFunciton())})),Ge(e,"getValue",(function(t){return e.props.valueField&&t&&t[e.props.valueField]?t[e.props.valueField]:t})),Ge(e,"getLabel",(function(t){return e.props.labelField&&t&&t[e.props.labelField]?t[e.props.labelField]:e.getValue(t)})),Ge(e,"getFindFunciton",(function(){return e.props.valueField?Ge({},e.props.valueField,e.props.value):e.props.value})),Ge(e,"renderLabel",(function(t){return e.props.labelRenderer?e.props.labelRenderer(t):e.getLabel(t)})),Ge(e,"handleOutsideClick",(function(t){e.node&&e.node.contains&&!e.node.contains(t.target)&&e.state.open?e.handleClick():document&&!e.node&&e.handleOutsideClick&&document.removeEventListener("click",e.handleOutsideClick,!1)})),Ge(e,"handleClick",(function(){document&&!e.state.open?document.addEventListener("click",e.handleOutsideClick,!1):document.removeEventListener("click",e.handleOutsideClick,!1);var t=!e.state.open;e.setState({open:t})})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this;return n().createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},n().createElement("span",{onClick:this.handleClick},n().createElement("strong",null,this.renderLabel(this.getSelected())),n().createElement(a.e6,{glyph:"chevron-down"})),this.state.open&&n().createElement("div",{className:"m-options"},n().createElement("ul",null,this.props.options.map((function(t,r){return n().createElement("li",{key:r,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&Be(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);Ge(Qe,"propTypes",{options:l().array,value:l().any,onSelect:l().func,valueField:l().string,labelField:l().string,labelRenderer:l().any}),Ge(Qe,"defaultProps",{onSelect:function(){},options:[]});const ze=Qe;var Je=r(712901),Ke=r(711030);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Xe(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ye(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function Ze(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,nt(o.key),o)}}function et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(et=function(){return!!e})()}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rt(e,t)}function ot(e,t,r){return(t=nt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){var t=function(e){if("object"!=$e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$e(t)?t:t+""}var it=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ot(e=function(e,t,r){return t=tt(t),function(e,t){if(t&&("object"==$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,et()?Reflect.construct(t,r||[],tt(e).constructor):t.apply(e,r))}(this,t,[].concat(o)),"getComboValues",(function(t,r){if(t&&t.dependson){var o=e.props.filterFields.filter((function(e){return e.attribute===t.dependson.field}))[0];if(o&&o.value){var n=r.filter((function(e){return e.attribute===o.attribute}))[0],i=n.values.filter((function(e){return e[n.valueId]===o.value}))[0][t.dependson.from],l=t.values.filter((function(e){return e[t.dependson.to]===i}));return t&&"list"===t.type?l.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null}}return t&&"list"===t.type?t.values.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null})),ot(e,"getOperator",(function(t){switch(t&&t.type?t.type:""){case"list":return e.props.listOperators;case"string":return e.props.stringOperators;case"boolean":return e.props.booleanOperators;case"array":return e.props.arrayOperators;default:return e.props.defaultOperators}})),ot(e,"renderFilterField",(function(t){var r=e.props.attributes.filter((function(e){return e.attribute===t.attribute}))[0],o=e.getComboValues(r,e.props.attributes),i=t.exception?n().createElement(u.A,{placement:"bottom",overlay:n().createElement(a.m_,{id:t.rowId+"tooltip"},n().createElement("strong",null,n().createElement(Je.Ay.Message,{msgId:t.exception||""})))},n().createElement(Ke.A,{id:"remove-filter-field",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,style:{backgroundColor:"red"},onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},n().createElement(a.e6,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):n().createElement(u.A,{placement:"top",overlay:n().createElement(a.m_,{id:t.rowId+"tooltip"},n().createElement("strong",null,n().createElement(Je.Ay.Message,{msgId:"queryform.attributefilter.delete"})))},n().createElement(Ke.A,{id:"remove-filter-field",bsStyle:e.props.buttonStyle,className:"filter-buttons no-border",onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},n().createElement(a.e6,{glyph:e.props.removeButtonIcon})));return n().createElement(O,{dropUp:e.props.dropUp,key:t.rowId,deleteButton:i,attributes:e.props.attributes,filterField:t,operatorOptions:e.getOperator(r),onUpdateField:e.props.actions.onUpdateFilterField,toggleMenu:e.props.actions.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.props.actions.onUpdateExceptionField,onChangeCascadingValue:e.props.actions.onChangeCascadingValue},n().createElement(c.A,{dropUp:e.props.dropUp,attType:"list",valueField:"id",textField:"name",fieldOptions:o||[],comboFilter:"contains"}),n().createElement(Y,{attType:"date",dateEnabled:!0,operator:t.operator,quickDateTimeSelectors:e.props.quickDateTimeSelectors}),n().createElement(Y,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:t.operator,quickDateTimeSelectors:e.props.quickDateTimeSelectors}),n().createElement(Pe,{attType:"array",operator:t.operator}),n().createElement(Y,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:t.operator}),n().createElement(fe,{operator:t.operator,attType:"number"}),e.props.autocompleteEnabled?n().createElement(Ce,{dropUp:e.props.dropUp,filterField:t,attType:"string"}):n().createElement(Pe,{tooltipMessage:e.props.textFieldTooltipMessageId,operator:t.operator,attType:"string"}),n().createElement(c.A,{dropUp:e.props.dropUp,fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"}))})),ot(e,"renderGroupButtons",(function(t){var r=[];return t.index<=e.props.groupLevels&&r.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_group",onClick:function(){return e.props.actions.onAddGroupField(t.id,t.index)}}),r.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:e.props.addButtonIcon,bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return e.props.actions.onAddFilterField(t.id)}}),t.groupId&&r.push({key:"remove-group",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.deleteGroup",glyph:e.props.removeGroupButtonIcon,onClick:function(){return e.props.actions.onRemoveGroupField(t.id)}}),n().createElement(p.A,{buttons:r,btnDefaultProps:{}})})),ot(e,"renderGroupHeader",(function(t){return n().createElement("div",{className:"logicHeader filter-logic-header"},n().createElement("div",{key:"filter-logic-header",className:"filter-logic-header-text m-label"},n().createElement("span",{className:"group_label_a"},n().createElement(Je.Ay.Message,{msgId:"queryform.attributefilter.group_label_a"}))," ",n().createElement(ze,{options:e.props.logicComboOptions,valueField:"logic",value:t.logic,onSelect:function(r){return e.props.actions.onUpdateLogicCombo(t.id,r)},labelRenderer:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name;return n().createElement(Je.Ay.Message,{msgId:e})}})," ",n().createElement("span",{className:"group_label_b"},n().createElement(Je.Ay.Message,{msgId:"queryform.attributefilter.group_label_b"}))),e.renderGroupButtons(t))})),ot(e,"renderGroupField",(function(t){var r=e.props.filterFields.filter((function(e){return e.groupId===t.id})),o=e.props.groupFields.filter((function(e){return e.groupId===t.id})),i=[].concat(Xe(r),Xe(o)).map((function(t){return void 0!==t.rowId?e.renderFilterField(t):e.renderGroupField(t)}));return n().createElement("div",{className:"mapstore-conditions-group",key:t.id},e.renderGroupHeader(t),n().createElement("div",{className:"query-content"},i))})),ot(e,"renderHeader",(function(){return(0,C.kA)(e.context.messages,"queryform.attributefilter.attribute_filter_header")})),ot(e,"updateLogicCombo",(function(t,r,o){var n=e.props.logicComboOptions.filter((function(t){return o===(0,C.kA)(e.context.messages,t.name)}))[0].logic;e.props.actions.onUpdateLogicCombo(t,n)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this;return this.props.withContainer?n().createElement(Ne.A,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):n().createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&Ze(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);ot(it,"propTypes",{dropUp:l().bool,groupLevels:l().number,withContainer:l().bool,autocompleteEnabled:l().bool,maxFeaturesWPS:l().number,groupFields:l().array,filterFields:l().array,attributes:l().array,fieldWidth:l().string,removeButtonIcon:l().string,addButtonIcon:l().string,removeGroupButtonIcon:l().string,buttonStyle:l().string,logicComboOptions:l().array,attributePanelExpanded:l().bool,actions:l().object,arrayOperators:l().array,listOperators:l().array,stringOperators:l().array,booleanOperators:l().array,defaultOperators:l().array,comboOptions:l().object,textFieldTooltipMessageId:l().string}),ot(it,"contextTypes",{messages:l().object}),ot(it,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",removeGroupButtonIcon:"trash",bsStyle:"default",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}},listOperators:["="],stringOperators:["=","<>","like","ilike","isNull"],arrayOperators:["contains"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>","><","isNull"],textFieldTooltipMessageId:"queryform.attributefilter.tooltipTextField"});const lt=it},774177:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(273517),n=r.n(o),i=r(993456),l=r(275705);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(e){var t=e.width,r=e.height,o=e.className,a=void 0===o?"loader-container":o,p=e.contentStyle,c=void 0===p?{}:p;return n().createElement("div",{className:a},n().createElement(i.A,null,(function(e){var o=e.width,i=void 0===o?200:o,a=e.height,p=void 0===a?200:a,s=t||(p>0?Math.min(i,p):i),d=r||(p>0?Math.min(i,p):i),f=Math.min(s,d);return n().createElement(l.A,{size:f,style:u({padding:f/10,margin:"auto",display:"flex"},c)})})))}}}]);