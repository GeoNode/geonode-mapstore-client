"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6330],{616330(t,e,n){n.r(e),n.d(e,{createLoader:()=>Qe,createTileLoadFunction:()=>en,deserialize:()=>Be,serialize:()=>Ve,tileUrlFunction:()=>tn});function i(t,e,n){let i,s;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,s=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+s*s}function s(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function r(t,e){const n=t[0],i=t[1],s=t[2],r=t[3],o=e[0],l=e[1];let h=0;return o<n?h|=16:o>s&&(h|=4),l<i?h|=8:l>r&&(h|=2),0===h&&(h=1),h}function o(t,e,n,i,s){return s?(s[0]=t,s[1]=e,s[2]=n,s[3]=i,s):[t,e,n,i]}function l(t){return o(1/0,1/0,-1/0,-1/0,t)}function h(t,e){const n=t[0],i=t[1];return o(n,i,n,i,e)}function a(t,e,n,i,s){return u(l(s),t,e,n,i)}function u(t,e,n,i,s){for(;n<i;n+=s)d(t,e[n],e[n+1]);return t}function d(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function f(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function c(t){return t[3]-t[1]}const g={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},_=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||g[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},p=6378137,y=Math.PI*p,C=[-y,-y,y,y],m=[-180,-85,180,85],v=p*Math.log(Math.tan(Math.PI/2));class x extends _{constructor(t){super({code:t,units:"m",extent:C,global:!0,worldExtent:m,getPointResolution:function(t,e){return t/Math.cosh(e[1]/p)}})}}const P=[new x("EPSG:3857"),new x("EPSG:102100"),new x("EPSG:102113"),new x("EPSG:900913"),new x("http://www.opengis.net/def/crs/EPSG/0/3857"),new x("http://www.opengis.net/gml/srs/epsg.xml#3857")];const M=[-180,-90,180,90],w=6378137*Math.PI/180;class E extends _{constructor(t,e){super({code:t,units:"degrees",extent:M,axisOrientation:e,global:!0,metersPerUnit:w,worldExtent:M})}}const G=[new E("CRS:84"),new E("EPSG:4326","neu"),new E("urn:ogc:def:crs:OGC:1.3:CRS84"),new E("urn:ogc:def:crs:OGC:2:84"),new E("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new E("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new E("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let R={},F={};function S(t,e,n){const i=t.getCode(),s=e.getCode();i in F||(F[i]={}),F[i][s]=n}function I(t,e){return t in F&&e in F[t]?F[t][e]:null}function L(t,e,n,i,s,r){const o=s-n,l=r-i;if(0!==o||0!==l){const h=((t-n)*o+(e-i)*l)/(o*o+l*l);h>1?(n=s,i=r):h>0&&(n+=o*h,i+=l*h)}return A(t,e,n,i)}function A(t,e,n,i){const s=n-t,r=i-e;return s*s+r*r}function X(t){return 180*t/Math.PI}function N(t){return t*Math.PI/180}function T(t,e,n){return t+n*(e-t)}function Y(t,e,n){if(t>=e&&t<n)return t;const i=n-e;return((t-e)%i+i)%i+e}const b=.9996,D=.00669438,O=D*D,q=O*D,U=D/(1-D),k=Math.sqrt(1-D),j=(1-k)/(1+k),W=j*j,Z=W*j,$=Z*j,K=$*j,z=.9983242984503243,J=15*O/256+45*q/1024,V=35*q/3072,B=1.5*j-27/32*Z+269/512*K,H=21/16*W-55/32*$,Q=151/96*Z-417/128*K,tt=1097/512*$,et=6378137;function nt(t,e,n){const i=t-5e5,s=(n.north?e:e-1e7)/b/(et*z),r=s+B*Math.sin(2*s)+H*Math.sin(4*s)+Q*Math.sin(6*s)+tt*Math.sin(8*s),o=Math.sin(r),l=o*o,h=Math.cos(r),a=o/h,u=a*a,d=u*u,f=1-D*l,c=Math.sqrt(1-D*l),g=U*h**2,_=g*g,p=i/(et/c*b),y=p*p,C=y*p,m=C*p,v=m*p,x=r-a/((1-D)/f)*(y/2-m/24*(5+3*u+10*g-4*_-9*U))+v*p/720*(61+90*u+298*g+45*d-252*U-3*_);let P=(p-C/6*(1+2*u+g)+v/120*(5-2*g+28*u-3*_+8*U+24*d))/h;return P=Y(P+N(st(n.number)),-Math.PI,Math.PI),[X(P),X(x)]}function it(t,e,n){t=Y(t,-180,180),e<-80?e=-80:e>84&&(e=84);const i=N(e),s=Math.sin(i),r=Math.cos(i),o=s/r,l=o*o,h=l*l,a=N(t),u=N(st(n.number)),d=et/Math.sqrt(1-D*s**2),f=U*r**2,c=r*Y(a-u,-Math.PI,Math.PI),g=c*c,_=g*c,p=_*c,y=p*c,C=y*c,m=et*(z*i-.002514607064228144*Math.sin(2*i)+J*Math.sin(4*i)-V*Math.sin(6*i)),v=b*d*(c+_/6*(1-l+f)+y/120*(5-18*l+h+72*f-58*U))+5e5;let x=b*(m+d*o*(g/2+p/24*(5-l+9*f+4*f**2)+C/720*(61-58*l+h+600*f-330*U)));return n.north||(x+=1e7),[v,x]}function st(t){return 6*(t-1)-180+3}const rt=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function ot(t){let e=0;for(const n of rt){const i=t.match(n);if(i){e=parseInt(i[1]);break}}if(!e)return null;let n=0,i=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(i=!0,n=e-32600),n?{number:n,north:i}:null}function lt(t,e){return function(n,i,s,r){const o=n.length;s=s>1?s:2,r=r??s,i||(i=s>2?n.slice():new Array(o));for(let s=0;s<o;s+=r){const r=n[s],o=n[s+1],l=t(r,o,e);i[s]=l[0],i[s+1]=l[1]}return i}}const ht=[function(t){const e=ot(t.getCode());return e?{forward:lt(it,e),inverse:lt(nt,e)}:null}],at=[function(t){return ot(t)?new _({code:t,units:"m"}):null}];function ut(t,e){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function dt(t){!function(t,e){R[t]=e}(t.getCode(),t),S(t,t,ut)}function ft(t){if("string"!=typeof t)return t;const e=R[n=t]||R[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null;var n;if(e)return e;for(const e of at){const n=e(t);if(n)return n}return null}function ct(t){!function(t){t.forEach(dt)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&S(e,t,ut)})})}function gt(t,e){const n=t.getCode(),i=e.getCode();let s=I(n,i);if(s)return s;let r=null,o=null;for(const n of ht)r||(r=n(t)),o||(o=n(e));if(!r&&!o)return null;const l="EPSG:4326";if(o)if(r)s=_t(r.inverse,o.forward);else{const t=I(n,l);t&&(s=_t(t,o.forward))}else{const t=I(l,i);t&&(s=_t(r.inverse,t))}return s&&(dt(t),dt(e),S(t,e,s)),s}function _t(t,e){return function(n,i,s,r){return i=t(n,i,s,r),e(i,i,s,r)}}function pt(t,e){return gt(ft(t),ft(e))}function yt(t,e,n,i){return function(t,e,n,i){if(function(t){return t[2]<t[0]||t[3]<t[1]}(t))return l(n);let s=[];if(i>1){const e=t[2]-t[0],n=t[3]-t[1];for(let r=0;r<i;++r)s.push(t[0]+e*r/i,t[1],t[2],t[1]+n*r/i,t[2]-e*r/i,t[3],t[0],t[3]-n*r/i)}else s=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(s,s,2);const r=[],h=[];for(let t=0,e=s.length;t<e;t+=2)r.push(s[t]),h.push(s[t+1]);return function(t,e,n){return o(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(r,h,n)}(t,pt(e,n),void 0,i)}var Ct,mt,vt;function xt(t,e){return[[-1/0,-1/0,1/0,1/0]]}ct(P),ct(G),Ct=P,mt=function(t,e,n,i){const s=t.length;n=n>1?n:2,i=i??n,void 0===e&&(e=n>2?t.slice():new Array(s));for(let n=0;n<s;n+=i){e[n]=y*t[n]/180;let i=p*Math.log(Math.tan(Math.PI*(+t[n+1]+90)/360));i>v?i=v:i<-v&&(i=-v),e[n+1]=i}return e},vt=function(t,e,n,i){const s=t.length;n=n>1?n:2,i=i??n,void 0===e&&(e=n>2?t.slice():new Array(s));for(let n=0;n<s;n+=i)e[n]=180*t[n]/y,e[n+1]=360*Math.atan(Math.exp(t[n+1]/p))/Math.PI-90;return e},G.forEach(function(t){Ct.forEach(function(e){S(t,e,mt),S(e,t,vt)})});var Pt=n(858261);const Mt="change",wt=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function Et(t,e){return t>e?1:t<e?-1:0}function Gt(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let e=0;e<i;e++)t[t.length]=n[e]}function Rt(){}function Ft(t){let e,n,i;return function(){const s=Array.prototype.slice.call(arguments);return n&&this===i&&function(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}(s,n)||(i=this,n=s,e=t.apply(this,arguments)),e}}function St(t){for(const e in t)delete t[e]}const It=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},Lt=class extends wt{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e="string"==typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const s=e?new It(t):t;s.target||(s.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});let l;n in r||(r[n]=0,o[n]=0),++r[n];for(let t=0,e=i.length;t<e;++t)if(l="handleEvent"in i[t]?i[t].handleEvent(s):i[t].call(this,s),!1===l||s.propagationStopped){l=!1;break}if(0===--r[n]){let t=o[n];for(delete o[n];t--;)this.removeEventListener(n,Rt);delete r[n]}return l}disposeInternal(){this.listeners_&&St(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=Rt,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}};function At(t,e,n,i,s){if(s){const s=n;n=function(r){return t.removeEventListener(e,n),s.call(i??this,r)}}else i&&i!==t&&(n=n.bind(i));const r={target:t,type:e,listener:n};return t.addEventListener(e,n),r}function Xt(t,e,n,i){return At(t,e,n,i,!0)}function Nt(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),St(t))}class Tt extends Lt{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Mt)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=At(this,t[s],e);return i}return At(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let s=0;s<i;++s)n[s]=Xt(this,t[s],e)}else n=Xt(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)Nt(t[e]);else Nt(t)}(n);else if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}Tt.prototype.on,Tt.prototype.once,Tt.prototype.un;const Yt=Tt;function bt(){throw new Error("Unimplemented abstract method.")}let Dt=0;class Ot extends It{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}const qt=class extends Yt{constructor(t){super(),this.on,this.once,this.un,this.ol_uid||(this.ol_uid=String(++Dt)),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new Ot(n,t,e)),n="propertychange",this.hasListener(n)&&this.dispatchEvent(new Ot(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],function(t){let e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,n)}}};class Ut extends qt{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Ut(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Nt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=At(t,Mt,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;let e;return Array.isArray(t)?e=t:(!function(t){if(!t)throw new Error("Expected an `ol/style/Style` or an array of `ol/style/Style.js`")}("function"==typeof t.getZIndex),e=[t]),function(){return e}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const kt=Ut;function jt(t,e,n,i,s,r,o,l){const h=Math.sin(r),a=Math.cos(r);return t[0]=i*a,t[1]=s*h,t[2]=-i*h,t[3]=s*a,t[4]=o*i*a-l*i*h+e,t[5]=o*s*h+l*s*a+n,t}function Wt(t,e,n,i,s,r,o){r=r||[],o=o||2;let l=0;for(let h=e;h<n;h+=i){const e=t[h],n=t[h+1];r[l++]=s[0]*e+s[2]*n+s[4],r[l++]=s[1]*e+s[3]*n+s[5];for(let e=2;e<o;e++)r[l++]=t[h+e]}return r&&r.length!=l&&(r.length=l),r}new Array(6);const Zt=[1,0,0,1,0,0],$t=[NaN,NaN],Kt=class extends qt{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Ft((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return bt()}closestPointXY(t,e,n,i){return bt()}containsXY(t,e){return 0===this.closestPointXY(t,e,$t,Number.MIN_VALUE)}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return bt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&l(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){bt()}scale(t,e,n){bt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return bt()}getType(){return bt()}applyTransform(t){bt()}intersectsExtent(t){return bt()}translate(t,e){bt()}transform(t,e){const n=ft(t),i="tile-pixels"==n.getUnits()?function(t,i,s){const r=n.getExtent(),o=n.getWorldExtent(),l=c(o)/c(r);jt(Zt,o[0],o[3],l,-l,0,0,0);const h=Wt(t,0,t.length,s,Zt,i),a=pt(n,e);return a?a(h,h,s):h}:pt(n,e);return this.applyTransform(i),this}};function zt(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const Jt=class extends Kt{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return bt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=zt(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){bt()}setLayout(t,e,n){let i;if(t)i=zt(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=function(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,s,r,o){o=o||[];const l=Math.cos(s),h=Math.sin(s),a=r[0],u=r[1];let d=0;for(let e=0;e<n;e+=i){const n=t[e]-a,s=t[e+1]-u;o[d++]=a+n*l-s*h,o[d++]=u+n*h+s*l;for(let n=e+2;n<e+i;++n)o[d++]=t[n]}o&&o.length!=d&&(o.length=d)}(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=f(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();!function(t,e,n,i,s,r,o,l){l=l||[];const h=o[0],a=o[1];let u=0;for(let e=0;e<n;e+=i){const n=t[e]-h,o=t[e+1]-a;l[u++]=h+s*n,l[u++]=a+r*o;for(let n=e+2;n<e+i;++n)l[u++]=t[n]}l&&l.length!=u&&(l.length=u)}(i,0,i.length,s,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,s,r,o){o=o||[];let l=0;for(let e=0;e<n;e+=i){o[l++]=t[e]+s,o[l++]=t[e+1]+r;for(let n=e+2;n<e+i;++n)o[l++]=t[n]}o&&o.length!=l&&(o.length=l)}(n,0,n.length,i,t,e,n),this.changed()}}};function Vt(t,e,n,i){for(let s=0,r=n.length;s<r;++s){const r=n[s];for(let n=0;n<i;++n)t[e++]=r[n]}return e}function Bt(t,e,n,i,s){s=s||[];let r=0;for(let o=0,l=n.length;o<l;++o){const l=Vt(t,e,n[o],i);s[r++]=l,e=l}return s.length=r,s}class Ht extends Jt{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Ht(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const s=this.flatCoordinates,r=A(t,e,s[0],s[1]);if(r<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=s[e];return n.length=t,r}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return h(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return s(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n){for(let i=0,s=n.length;i<s;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}const Qt=Ht;function te(t,e,n,i,s,r,o){const l=t[e],h=t[e+1],a=t[n]-l,u=t[n+1]-h;let d;if(0===a&&0===u)d=e;else{const f=((s-l)*a+(r-h)*u)/(a*a+u*u);if(f>1)d=n;else{if(f>0){for(let s=0;s<i;++s)o[s]=T(t[e+s],t[n+s],f);return void(o.length=i)}d=e}}for(let e=0;e<i;++e)o[e]=t[d+e];o.length=i}function ee(t,e,n,i,s){let r=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],l=A(r,o,n,i);l>s&&(s=l),r=n,o=i}return s}function ne(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const o=n[r];s=ee(t,e,o,i,s),e=o}return s}function ie(t,e,n,i,s,r,o,l,h,a,u){if(e==n)return a;let d,f;if(0===s){if(f=A(o,l,t[e],t[e+1]),f<a){for(d=0;d<i;++d)h[d]=t[e+d];return h.length=i,f}return a}u=u||[NaN,NaN];let c=e+i;for(;c<n;)if(te(t,c-i,c,i,o,l,u),f=A(o,l,u[0],u[1]),f<a){for(a=f,d=0;d<i;++d)h[d]=u[d];h.length=i,c+=i}else c+=i*Math.max((Math.sqrt(f)-Math.sqrt(a))/s|0,1);if(r&&(te(t,n-i,e,i,o,l,u),f=A(o,l,u[0],u[1]),f<a)){for(a=f,d=0;d<i;++d)h[d]=u[d];h.length=i}return a}function se(t,e,n,i,s,r,o,l,h,a,u){u=u||[NaN,NaN];for(let d=0,f=n.length;d<f;++d){const f=n[d];a=ie(t,e,f,i,s,r,o,l,h,a,u),e=f}return a}function re(t,e,n,i,s){s=void 0!==s?s:[];let r=0;for(let o=e;o<n;o+=i)s[r++]=t.slice(o,o+i);return s.length=r,s}function oe(t,e,n,i,s){s=void 0!==s?s:[];let r=0;for(let o=0,l=n.length;o<l;++o){const l=n[o];s[r++]=re(t,e,l,i,s[r]),e=l}return s.length=r,s}function le(t,e,n,i,s,r,o){let l,h;const a=(n-e)/i;if(1===a)l=e;else if(2===a)l=e,h=s;else if(0!==a){let r=t[e],o=t[e+1],a=0;const u=[0];for(let s=e+i;s<n;s+=i){const e=t[s],n=t[s+1];a+=Math.sqrt((e-r)*(e-r)+(n-o)*(n-o)),u.push(a),r=e,o=n}const d=s*a,f=function(t,e,n){let i,s;n=n||Et;let r=0,o=t.length,l=!1;for(;r<o;)i=r+(o-r>>1),s=+n(t[i],e),s<0?r=i+1:(o=i,l=!s);return l?r:~r}(u,d);f<0?(h=(d-u[-f-2])/(u[-f-1]-u[-f-2]),l=e+(-f-2)*i):l=e+f*i}o=o>1?o:2,r=r||new Array(o);for(let e=0;e<o;++e)r[e]=void 0===l?NaN:void 0===h?t[l+e]:T(t[l+e],t[l+i+e],h);return r}function he(t,e,n,i,s,r){if(n==e)return null;let o;if(s<t[e+i-1])return r?(o=t.slice(e,e+i),o[i-1]=s,o):null;if(t[n-1]<s)return r?(o=t.slice(n-i,n),o[i-1]=s,o):null;if(s==t[e+i-1])return t.slice(e,e+i);let l=e/i,h=n/i;for(;l<h;){const e=l+h>>1;s<t[(e+1)*i-1]?h=e:l=e+1}const a=t[l*i-1];if(s==a)return t.slice((l-1)*i,(l-1)*i+i);const u=(s-a)/(t[(l+1)*i-1]-a);o=[];for(let e=0;e<i-1;++e)o.push(T(t[(l-1)*i+e],t[l*i+e],u));return o.push(s),o}function ae(t,e,n,i,s){const r=function(t,e){let n;return n=e(function(t){return[t[0],t[1]]}(t)),n||(n=e(function(t){return[t[2],t[1]]}(t)),n||(n=e(function(t){return[t[2],t[3]]}(t)),n||(n=e(function(t){return[t[0],t[3]]}(t)),n||!1)))}(s,function(s){return!ue(t,e,n,i,s[0],s[1])});return!r}function ue(t,e,n,i,s,r){let o=0,l=t[n-i],h=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];h<=r?i>r&&(n-l)*(r-h)-(s-l)*(i-h)>0&&o++:i<=r&&(n-l)*(r-h)-(s-l)*(i-h)<0&&o--,l=n,h=i}return 0!==o}function de(t,e,n,i,s,r){if(0===n.length)return!1;if(!ue(t,e,n[0],i,s,r))return!1;for(let e=1,o=n.length;e<o;++e)if(ue(t,n[e-1],n[e],i,s,r))return!1;return!0}function fe(t,e,n,i,s){let r;for(e+=i;e<n;e+=i)if(r=s(t.slice(e-i,e),t.slice(e,e+i)),r)return r;return!1}function ce(t,e,n,i,s,o){return o=o??u([1/0,1/0,-1/0,-1/0],t,e,n,i),h=o,!!((l=s)[0]<=h[2]&&l[2]>=h[0]&&l[1]<=h[3]&&l[3]>=h[1])&&(o[0]>=s[0]&&o[2]<=s[2]||o[1]>=s[1]&&o[3]<=s[3]||fe(t,e,n,i,function(t,e){return function(t,e,n){let i=!1;const s=r(t,e),o=r(t,n);if(1===s||1===o)i=!0;else{const r=t[0],l=t[1],h=t[2],a=t[3],u=e[0],d=e[1],f=n[0],c=n[1],g=(c-d)/(f-u);let _,p;2&o&&!(2&s)&&(_=f-(c-a)/g,i=_>=r&&_<=h),i||!(4&o)||4&s||(p=c-(f-h)*g,i=p>=l&&p<=a),i||!(8&o)||8&s||(_=f-(c-l)/g,i=_>=r&&_<=h),i||!(16&o)||16&s||(p=c-(f-r)*g,i=p>=l&&p<=a)}return i}(s,t,e)}));var l,h}function ge(t,e,n,i,s){if(!function(t,e,n,i,s){return!!(ce(t,e,n,i,s)||ue(t,e,n,i,s[0],s[1])||ue(t,e,n,i,s[0],s[3])||ue(t,e,n,i,s[2],s[1])||ue(t,e,n,i,s[2],s[3]))}(t,e,n[0],i,s))return!1;if(1===n.length)return!0;for(let e=1,r=n.length;e<r;++e)if(ae(t,n[e-1],n[e],i,s)&&!ce(t,n[e-1],n[e],i,s))return!1;return!0}function _e(t,e,n,i){let s=t[e],r=t[e+1],o=0;for(let l=e+i;l<n;l+=i){const e=t[l],n=t[l+1];o+=Math.sqrt((e-s)*(e-s)+(n-r)*(n-r)),s=e,r=n}return o}function pe(t,e,n,i,s,r,o){const l=(n-e)/i;if(l<3){for(;e<n;e+=i)r[o++]=t[e],r[o++]=t[e+1];return o}const h=new Array(l);h[0]=1,h[l-1]=1;const a=[e,n-i];let u=0;for(;a.length>0;){const n=a.pop(),r=a.pop();let o=0;const l=t[r],d=t[r+1],f=t[n],c=t[n+1];for(let e=r+i;e<n;e+=i){const n=L(t[e],t[e+1],l,d,f,c);n>o&&(u=e,o=n)}o>s&&(h[(u-e)/i]=1,r+i<u&&a.push(r,u),u+i<n&&a.push(u,n))}for(let n=0;n<l;++n)h[n]&&(r[o++]=t[e+n*i],r[o++]=t[e+n*i+1]);return o}function ye(t,e,n,i,s,r,o,l){for(let h=0,a=n.length;h<a;++h){const a=n[h];o=pe(t,e,a,i,s,r,o),l.push(o),e=a}return o}function Ce(t,e){return e*Math.round(t/e)}function me(t,e,n,i,s,r,o){if(e==n)return o;let l,h,a=Ce(t[e],s),u=Ce(t[e+1],s);e+=i,r[o++]=a,r[o++]=u;do{if(l=Ce(t[e],s),h=Ce(t[e+1],s),(e+=i)==n)return r[o++]=l,r[o++]=h,o}while(l==a&&h==u);for(;e<n;){const n=Ce(t[e],s),d=Ce(t[e+1],s);if(e+=i,n==l&&d==h)continue;const f=l-a,c=h-u,g=n-a,_=d-u;f*_==c*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(c<0&&_<c||c==_||c>0&&_>c)?(l=n,h=d):(r[o++]=l,r[o++]=h,a=l,u=h,l=n,h=d)}return r[o++]=l,r[o++]=h,o}function ve(t,e,n,i,s,r,o,l){for(let h=0,a=n.length;h<a;++h){const a=n[h];o=me(t,e,a,i,s,r,o),l.push(o),e=a}return o}class xe extends Jt{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){Gt(this.flatCoordinates,t),this.changed()}clone(){const t=new xe(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<i(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,s))}forEachSegment(t){return fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,he(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return le(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return _e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=pe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new xe(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return ce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vt(this.flatCoordinates,0,t,this.stride),this.changed()}}const Pe=xe;function Me(t,e,n,i){let s=0;const r=t[n-i],o=t[n-i+1];let l=0,h=0;for(;e<n;e+=i){const n=t[e]-r,i=t[e+1]-o;s+=h*n-l*i,l=n,h=i}return s/2}function we(t,e,n,i){let s=0;for(let r=0,o=n.length;r<o;++r){const o=n[r];s+=Me(t,e,o,i),e=o}return s}class Ee extends Jt{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Ee(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,s){return s<i(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,s))}getArea(){return Me(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=pe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Ee(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vt(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ge=Ee;function Re(t,e,n,i,s,r,o){let l,h,a,u,d,f,c;const g=s[r+1],_=[];for(let s=0,r=n.length;s<r;++s){const r=n[s];for(u=t[r-i],f=t[r-i+1],l=e;l<r;l+=i)d=t[l],c=t[l+1],(g<=f&&c<=g||f<=g&&g<=c)&&(a=(g-f)/(c-f)*(d-u)+u,_.push(a)),u=d,f=c}let p=NaN,y=-1/0;for(_.sort(Et),u=_[0],l=1,h=_.length;l<h;++l){d=_[l];const s=Math.abs(d-u);s>y&&(a=(u+d)/2,de(t,e,n,i,a,g)&&(p=a,y=s)),u=d}return isNaN(p)&&(p=s[r]),o?(o.push(p,g,y),o):[p,g,y]}function Fe(t,e,n,i,s){let r=[];for(let o=0,l=n.length;o<l;++o){const l=n[o];r=Re(t,e,l,i,s,2*o,r),e=l[l.length-1]}return r}function Se(t,e,n,i){for(;e<n-i;){for(let s=0;s<i;++s){const r=t[e+s];t[e+s]=t[n-i+s],t[n-i+s]=r}e+=i,n-=i}}function Ie(t,e,n,i){let s=0,r=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];s+=(n-r)*(i+o),r=n,o=i}return 0===s?void 0:s>0}function Le(t,e,n,i,s){s=void 0!==s&&s;for(let r=0,o=n.length;r<o;++r){const o=n[r],l=Ie(t,e,o,i);if(0===r){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=o}return!0}function Ae(t,e,n,i,s){s=void 0!==s&&s;for(let r=0,o=n.length;r<o;++r){const o=n[r],l=Ie(t,e,o,i);(0===r?s&&l||!s&&!l:s&&!l||!s&&l)&&Se(t,e,o,i),e=o}return e}function Xe(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r)e=Ae(t,e,n[r],i,s);return e}class Ne extends Jt{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Gt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ne(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<i(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ne(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),se(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,s))}containsXY(t,e){return de(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return we(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Ae(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,oe(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=f(this.getExtent());this.flatInteriorPoint_=Re(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Qt(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Ge(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let s=0;for(let r=0,o=n.length;r<o;++r){const o=n[r],l=new Ge(e.slice(s,o),t);i.push(l),s=o}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Le(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ae(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=ve(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new Ne(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return ge(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Bt(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const Te=Ne;class Ye extends Jt{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){Gt(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new Ye(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){if(s<i(this.getExtent(),t,e))return s;const r=this.flatCoordinates,o=this.stride;for(let i=0,l=r.length;i<l;i+=o){const l=A(t,e,r[i],r[i+1]);if(l<s){s=l;for(let t=0;t<o;++t)n[t]=r[i+t];n.length=o}}return s}getCoordinates(){return re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Qt(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let s=0,r=t.length;s<r;s+=n){const r=new Qt(t.slice(s,s+n),e);i.push(r)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,r=e.length;i<r;i+=n)if(s(t,e[i],e[i+1]))return!0;return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vt(this.flatCoordinates,0,t,this.stride),this.changed()}}const be=Ye;class De extends Jt{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{const e=t,n=[],i=[];for(let t=0,s=e.length;t<s;++t)Gt(n,e[t].getFlatCoordinates()),i.push(n.length);const s=0===e.length?this.getLayout():e[0].getLayout();this.setFlatCoordinates(s,n),this.ends_=i}}appendLineString(t){Gt(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new De(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<i(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ne(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),se(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,s))}getCoordinateAtM(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,function(t,e,n,i,s,r,o){if(o)return he(t,e,n[n.length-1],i,s,r);let l;if(s<t[i-1])return r?(l=t.slice(0,i),l[i-1]=s,l):null;if(t[t.length-1]<s)return r?(l=t.slice(t.length-i),l[i-1]=s,l):null;for(let r=0,o=n.length;r<o;++r){const o=n[r];if(e!=o){if(s<t[e+i-1])return null;if(s<=t[o-1])return he(t,e,o,i,s,!1);e=o}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return oe(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Pe(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let s=0;for(let r=0,o=e.length;r<o;++r){const o=e[r],l=new Pe(t.slice(s,o),n);i.push(l),s=o}return i}getLength(){const t=this.ends_;let e=0,n=0;for(let i=0,s=t.length;i<s;++i)n+=_e(this.flatCoordinates,e,t[i],this.stride),e=t[i];return n}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,s=this.stride;for(let r=0,o=i.length;r<o;++r){const o=i[r];Gt(t,le(e,n,o,s,.5)),n=o}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=ye(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new De(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return function(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){if(ce(t,e,n[r],i,s))return!0;e=n[r]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Bt(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const Oe=De;function qe(t,e,n,i){const s=[];let r=[1/0,1/0,-1/0,-1/0];for(let o=0,l=n.length;o<l;++o){const l=n[o];r=a(t,e,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return s}class Ue extends Jt{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const i=t,s=[],r=[];for(let t=0,e=i.length;t<e;++t){const e=i[t],n=s.length,o=e.getEnds();for(let t=0,e=o.length;t<e;++t)o[t]+=n;Gt(s,e.getFlatCoordinates()),r.push(o)}e=0===i.length?this.getLayout():i[0].getLayout(),t=s,n=r}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;Gt(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,i=e.length;t<i;++t)e[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=this.endss_[n].slice();const n=new Ue(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,s){return s<i(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const o=n[r];s=ne(t,e,o,i,s),e=o[o.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,s,r,o,l,h,a,u){u=u||[NaN,NaN];for(let r=0,d=n.length;r<d;++r){const d=n[r];a=se(t,e,d,i,s,true,o,l,h,a,u),e=d[d.length-1]}return a}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,n,s))}containsXY(t,e){return function(t,e,n,i,s,r){if(0===n.length)return!1;for(let o=0,l=n.length;o<l;++o){const l=n[o];if(de(t,e,l,i,s,r))return!0;e=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return function(t,e,n,i){let s=0;for(let r=0,o=n.length;r<o;++r){const o=n[r];s+=we(t,e,o,i),e=o[o.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Xe(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,function(t,e,n,i,s){s=void 0!==s?s:[];let r=0;for(let o=0,l=n.length;o<l;++o){const l=n[o];s[r++]=1===l.length&&l[0]===e?[]:oe(t,e,l,i,s[r]),e=l[l.length-1]}return s.length=r,s}(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=qe(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Fe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new be(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,n,i){for(let s=0,r=n.length;s<r;++s){const r=n[s];if(!Le(t,e,r,i,void 0))return!1;r.length&&(e=r[r.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Xe(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=function(t,e,n,i,s,r,o,l){for(let h=0,a=n.length;h<a;++h){const a=n[h],u=[];o=ve(t,e,a,i,s,r,o,u),l.push(u),e=a[a.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new Ue(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let t=0,i=n.length;t<i;++t)n[t]-=e;return new Te(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let s=0;for(let r=0,o=n.length;r<o;++r){const o=n[r].slice(),l=o[o.length-1];if(0!==s)for(let t=0,e=o.length;t<e;++t)o[t]-=s;const h=new Te(e.slice(s,l),t,o);i.push(h),s=l}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return function(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const o=n[r];if(ge(t,e,o,i,s))return!0;e=o[o.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=function(t,e,n,i,s){s=s||[];let r=0;for(let o=0,l=n.length;o<l;++o){const l=Bt(t,e,n[o],i,s[r]);0===l.length&&(l[0]=e),s[r++]=l,e=l[l.length-1]}return s.length=r,s}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}const ke=Ue;const je=[1,0,0,1,0,0];class We{constructor(t,e,n,i,s,r){this.styleFunction,this.extent_,this.id_=r,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?h(this.flatCoordinates_):a(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=f(this.getExtent());this.flatInteriorPoints_=Re(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=function(t,e){const n=[];let i,s=0,r=0;for(let o=0,l=e.length;o<l;++o){const l=e[o],h=Ie(t,s,l,2);if(void 0===i&&(i=h),h===i)n.push(e.slice(r,o+1));else{if(0===n.length)continue;n[n.length-1].push(e[r])}r=o+1,s=l}return n}(this.flatCoordinates_,this.ends_),e=qe(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=Fe(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=le(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let i=0,s=n.length;i<s;++i){const s=n[i],r=le(t,e,s,2,.5);Gt(this.flatMidpoints_,r),e=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=ft(t)).getExtent(),n=t.getWorldExtent();if(e&&n){const t=c(n)/c(e);jt(je,n[0],n[3],t,-t,0,0,0),Wt(this.flatCoordinates_,0,this.flatCoordinates_.length,2,je,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new We(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Ft((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=pe(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=ye(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,i);break;case"Polygon":i=[],n.length=ve(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,i)}return i&&(this.simplifiedGeometry_=new We(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}We.prototype.getFlatCoordinates=We.prototype.getOrientedFlatCoordinates;const Ze=We;var $e=n(638658),Ke=n(358146);function ze(t,e){let n=Array(t.length+e.length);for(let i=0,s=0,r=0;i<t.length;i+=2,s++)n[r++]=t[i],n[r++]=t[i+1],n[r++]=e[s];return n}function Je(t,e){let n;if(n=e===Ke.d.Unknown?t?.type():e,!t)return;let i=t.xyArray();if(i){let e=Array.from(i),s=t.zArray(),r=t.mArray(),o=t.endsArray(),l="XY",h=2;s&&r?(l="XYZM",e=function(t,e,n){let i=Array(t.length+e.length+n.length);for(let s=0,r=0,o=0;s<t.length;s+=2,r++)i[o++]=t[s],i[o++]=t[s+1],i[o++]=e[r],i[o++]=n[r];return i}(e,Array.from(s),Array.from(r)),h=4):s?(l="XYZ",e=ze(e,Array.from(s)),h=3):r&&(l="XYM",e=ze(e,Array.from(r)),h=3);let a=o?Array.from(o.map(t=>t*h)):[e.length];switch(n){case Ke.d.Point:return new Qt(e);case Ke.d.MultiPoint:return new be(e,l);case Ke.d.LineString:return new Pe(e,l);case Ke.d.MultiLineString:return new Oe(e,l,a);case Ke.d.Polygon:return new Te(e,l,a)}}if(n===Ke.d.MultiPolygon){let e=t.partsLength(),n=Array(e);for(let i=0;i<e;i++)n[i]=Je(t.parts(i),Ke.d.Polygon);return new ke(n)}throw Error("Unknown type")}function Ve(t){return(0,Pt.lK)(t)}function Be(t,e,n,i=!1,s={},r=!1,o="EPSG:4326",l="EPSG:4326"){let h=function(t,e="EPSG:4326",n){let i;return i=t?function(t,i,s){let r="MultiPolygon"===i?.getType()?"Polygon":i?.getType();if("GeometryCollection"===r||"Circle"===r)throw Error(`Unsupported geometry type: ${r}`);let o=i?.getFlatCoordinates?.(),l=i?.getLayout?.().length;if(!o||!l)throw Error(`Geometry without coordinates: ${i}`);return function(t,e,n){const i=n?ft(n.featureProjection):null,s=n?ft(n.dataProjection):null;let r=t;if(i&&s&&!function(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||gt(t,e)===ut)&&n}(i,s)){e&&(r=t.clone());const n=e?i:s,o=e?s:i;"tile-pixels"===n.getUnits()?r.transform(n,o):r.applyTransform(pt(n,o))}if(e&&n&&void 0!==n.decimals){const e=Math.pow(10,n.decimals),i=function(t){for(let n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*e)/e;return t};r===t&&(r=t.clone()),r.applyTransform(i)}return r}(new Ze(r,o,[o.length],l,s||{},t).enableSimplifyTransformed(),!1,{dataProjection:e,featureProjection:n})}:function(t,i,s){let r=new kt(i);return n&&e!==n&&r.getGeometry()?.transform(e,n),r.setId(t),s&&r.setProperties&&r.setProperties(s),r},(t,e,n)=>(0,$e.J2)(t,e,n,Je,i)}(r,o,l);if(t instanceof Uint8Array)return(0,Pt.iu)(t,h,e,n);if(t instanceof ReadableStream)return(0,Pt.aW)(t,h,n);if("string"==typeof t&&e)return(0,Pt.Z5)(t,e,h,n,i,s);throw Error("Invalid input type or missing rect for URL input")}function He(t,e,n){let[i,s,r,o]=e&&n&&e!==n?yt(t,e,n):t;return{minX:i,minY:s,maxX:r,maxY:o}}function Qe(t,e,n="EPSG:4326",i=xt,s=!1,r={},o=!1){return async(l,h,a,u,d)=>{try{let h;s&&t.clear();let d=a.getCode(),f=[];if(i===xt)h=Be((await fetch(e,{headers:r})).body,void 0,void 0,!1,r,o,n,d);else{let t=He(l,d,n);h=Be(e,t,void 0,!1,r,o,n,d)}for await(let e of h)f.push(e),t.addFeature(e);u?.(f)}catch(t){d?.()}}}const tn=t=>JSON.stringify(t);function en(t,e,n="EPSG:4326",i={},s=!1){let r=t.getProjection(),o=r?.getCode()??"EPSG:3857";return t=>{t.setLoader(async r=>{let l=Be(e,He(r,o,n),void 0,!1,i,s,n,o),h=[];for await(let t of l)h.push(t);t.setFeatures(h)})}}}}]);