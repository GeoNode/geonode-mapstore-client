(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[21978],{501157:(e,t,r)=>{"use strict";r.d(t,{ID:()=>P,en:()=>j,Xv:()=>x,FU:()=>U,gs:()=>I,tt:()=>_,jY:()=>B,T6:()=>R,ZP:()=>L});var n=r(472500),o=r.n(n),i=r(701469),l=r.n(i),a=r(984596),u=r.n(a),p=r(227361),c=r.n(p),s=r(505055),d=r.n(s),f=r(375875),b=r.n(f),y=r(737275),m=r(916651),v=r(577215);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){var n,o,i,l;n=e,o=t,i=r[t],l=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==g(l)?l:String(l))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E={},S="1.3.0",P="1.1.1",j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{service:"WMS",version:S,request:"GetCapabilities"},r=arguments.length>2?arguments[2]:void 0,n=(l()(e)&&e||e.split(","))[0],i=o().parse(n,!0);return o().format(F(F({},i),{},{search:null,query:F(F(F({},t),i.query),(null==r?void 0:r.query)||{})}))},T=function(e){var t=e&&e.Title,r=e.LogoURL&&F(F({},c()(e,"LogoURL.$")||{}),{},{format:c()(e,"LogoURL.Format")}),n=c()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:r,imageUrl:c()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:n}},x=function e(t){var r,n,o=null!==(r=null==t?void 0:t.Layer)&&void 0!==r?r:null==t?void 0:t.layer,i=null!==(n=null==t?void 0:t.Name)&&void 0!==n?n:null==t?void 0:t.name;return o?u()(o).reduce((function(t,r){var n,o,i=null!==(n=r.Layer)&&void 0!==n?n:r.layer,l=null!==(o=r.Name)&&void 0!==o?o:r.name;return[].concat(h(t),h(e(r)),h(i&&l?[r]:[]))}),[]):i&&[t]||[]},C=function(){var e,t,r,n,o,i,a,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,f=p.Capability,b=p.Service,y=(a=f).Request&&a.Request.GetMap&&a.Request.GetMap.DCPType&&a.Request.GetMap.DCPType.HTTP&&a.Request.GetMap.DCPType.HTTP.Get&&a.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&a.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,m=f.Layer&&(null===(e=f.Layer.SRS||f.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],v=f.Layer&&f.Layer.Attribution&&T(f.Layer.Attribution),g=u()((null==f||null===(t=f.Request)||void 0===t||null===(r=t.GetMap)||void 0===r?void 0:r.Format)||[]),h=u()((null==f||null===(n=f.Request)||void 0===n||null===(o=n.GetFeatureInfo)||void 0===o?void 0:o.Format)||[]),w=x(f),O=(l()(w)?w:[w]).filter((function(e){return!d||-1!==e.Name.toLowerCase().indexOf(d.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(d.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(d.toLowerCase())}));return{numberOfRecordsMatched:O.length,numberOfRecordsReturned:Math.min(s,O.length),nextRecord:c+Math.min(s,O.length)+1,service:b,layerOptions:{version:(null==p||null===(i=p.$)||void 0===i?void 0:i.version)||S},records:O.filter((function(e,t){return t>=c-1&&t<c-1+s})).map((function(e){return F(F({},e),{},{getMapFormats:g,getFeatureInfoFormats:h,onlineResource:y,SRS:m,credits:e.Attribution?T(e.Attribution):v})}))}},U=function(e){return b().get(j(e,{service:"WMS",version:S,request:"GetCapabilities"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t.WMS_Capabilities||t.WMT_MS_Capabilities||{}}))},D=function(e,t,r,n){var o=E[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,y.u8)("cacheExpire")||60)?new Promise((function(e){e(C(o.data,t,r,n))})):U(e).then((function(o){return E[e]={timestamp:(new Date).getTime(),data:o},C(o,t,r,n)}))},I=function(e,t){return b().get(j(e,{service:"WMS",version:P,layers:t,request:"DescribeLayer"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,r){t=r&&r.WMS_DescribeLayerResponse&&r.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return F(F({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:F({},e&&e.query&&e.query.$||{})})}))}))},_=function(e,t,r,n){return D(e,t,r,n)},B=function(e,t){for(var r=e,n=r.EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,m.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;!n&&r.Layer&&r.Layer.length;)n=(r=r.Layer[0]).EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,m.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;n||(n={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[n.westBoundLongitude||n.minx,n.southBoundLatitude||n.miny,n.eastBoundLongitude||n.maxx,n.northBoundLatitude||n.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return U(e).then((function(e){var r,n,o,i,l=e.Capability,a=u()((null==l||null===(r=l.Request)||void 0===r||null===(n=r.GetMap)||void 0===n?void 0:n.Format)||[]).filter(v.F0);return t?{imageFormats:a,infoFormats:u()((null==l||null===(o=l.Request)||void 0===o||null===(i=o.GetFeatureInfo)||void 0===i?void 0:i.Format)||[]).filter(v.cP)}:a})).catch((function(){return t?{imageFormats:[],infoFormats:[]}:[]}))};const L={flatLayers:x,parseUrl:j,getDimensions:function(e){return u()(e.Dimension||e.dimension||[]).map((function(t,r){var n=e.Extent&&u()(e.Extent)[r]||e.extent&&u()(e.extent)[r];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||n&&n.$.default,values:t._&&t._.split(",")||n&&n._&&n._.split(",")}}))},getCapabilities:U,describeLayer:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b().get(j(e,{service:"WMS",version:P,layers:t,request:"DescribeLayer"},r)).then((function(e){var t,r,n;d().parseString(e.data,{explicitArray:!1},(function(e,t){n=t}));var o=(null===(t=n)||void 0===t||null===(r=t.WMS_DescribeLayerResponse)||void 0===r?void 0:r.LayerDescription)&&u()(n.WMS_DescribeLayerResponse.LayerDescription)[0];return o&&F(F({},null==o?void 0:o.$),(null==o?void 0:o.Query)&&{query:u()(o.Query).map((function(e){return F({},null==e?void 0:e.$)}))})}))},getRecords:D,describeLayers:I,textSearch:_,parseLayerCapabilities:function(e,t){var r=e.Capability;return x(r).find((function(e){var r=e.Name;return 2===t.name.split(":").length&&r&&2===r.split(":").length?t.name===r&&e:r&&2===r.split(":").length?t.name===r.split(":")[1]&&e:2===t.name.split(":").length?t.name.split(":")[1]===r&&e:t.name===r&&e}))},getBBox:B,reset:function(){Object.keys(E).forEach((function(e){delete E[e]}))},getSupportedFormat:R}},704201:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(124852),o=r.n(n),i=r(727418),l=r.n(i),a=r(86638),u=r(675263),p=r.n(u),c=r(480681),s=r(950966),d=r(200020),f=r(805346);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function v(e,t,r){return t=h(t),function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function O(e,t,r){return(t=F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:String(t)}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,t,arguments)}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=l()({},{borderColor:"#dedede"},this.props.style);this.props.fieldException&&(t=l()({},t,{borderColor:"#FF0000"}));var r=this.props.multivalue?d.Multiselect:d.DropdownList,n=null!==this.props.valueField&&null!==this.props.textField?o().createElement(r,y({dropUp:this.props.dropUp},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,valueField:this.props.valueField,textField:this.props.textField,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,a.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,e.props.multivalue?t:t[e.props.valueField],e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch})):o().createElement(r,y({dropUp:this.props.dropUp},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,a.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch}));return this.props.fieldException?o().createElement(s.Z,{placement:"bottom",overlay:o().createElement(c.Tooltip,{id:this.props.fieldRowId+"_tooltip"},o().createElement("strong",null,this.props.fieldException))},n):n}}])&&m(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);O(E,"propTypes",{dropUp:p().bool,busy:p().bool,style:p().object,valueField:p().string,textField:p().string,placeholder:p().object,itemComponent:p().oneOfType([p().object,p().func]),fieldOptions:p().array,fieldName:p().string,fieldRowId:p().number,attType:p().string,fieldValue:p().oneOfType([p().number,p().string,p().array]),fieldException:p().oneOfType([p().object,p().string]),comboFilter:p().oneOfType([p().bool,p().string,p().func]),groupBy:p().oneOfType([p().string,p().func]),multivalue:p().bool,disabled:p().bool,options:p().object,onSelect:p().func,onToggle:p().func,onSearch:p().func,onUpdateField:p().func,onClick:p().func,onUpdateExceptionField:p().func}),O(E,"contextTypes",{messages:p().object}),O(E,"defaultProps",{options:{},busy:!1,style:{width:"100%"},placeholder:o().createElement(f.Z,{msgId:"queryform.comboField.default_placeholder"}),multivalue:!1,disabled:!1,valueField:null,textField:null,fieldOptions:[],fieldName:null,itemComponent:null,fieldRowId:null,fieldValue:null,fieldException:null,comboFilter:!1,groupBy:function(){},onSelect:function(){},onToggle:function(){},onSearch:function(){},onUpdateField:function(){},onUpdateExceptionField:function(){}});const S=E},531071:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ut});var n=r(124852),o=r.n(n),i=r(675263),l=r.n(i),a=r(480681),u=r(80717),p=r(950966),c=r(704201),s=r(727418),d=r.n(s),f=r(993451);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function m(e,t,r){return t=g(t),function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(e,v()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function O(e,t,r){return(t=F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:String(t)}var E=(0,f.Z)("placeholder")((0,f.Z)("fieldOptions","label","object")(c.Z)),S=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return O(h(e=m(this,t,[].concat(n))),"renderOperatorField",(function(){return o().createElement(c.Z,{dropUp:e.props.dropUp,fieldOptions:e.props.operatorOptions,fieldName:"operator",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.operator,onUpdateField:e.updateFieldElement})})),O(h(e),"renderValueField",(function(t){return o().cloneElement(o().Children.toArray(e.props.children).filter((function(e){return e.props.attType===t.type}))[0],d()({fieldName:"value",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.value,fieldException:e.props.filterField.exception,onUpdateField:e.updateFieldElement,toggleMenu:e.props.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.updateExceptionFieldElement},t.fieldOptions||{}))})),O(h(e),"updateExceptionFieldElement",(function(t,r){e.props.onUpdateExceptionField(t,r)})),O(h(e),"updateFieldElement",(function(t,r,n,o,i){var l;if("attribute"===r){var a=(l=e.props.attributes.filter((function(e){return e.attribute===n}))[0])&&l.type||o;e.props.onUpdateField(t,r,n,a,i),"array"===a&&e.props.onUpdateField(t,"operator","contains",a,i)}else e.props.onUpdateField(t,r,n,"boolean"===o?"string":o,i);if("value"===r){var u=e.props.attributes.filter((function(t){return t.dependson&&t.dependson.field===e.props.filterField.attribute}));u.length>0&&e.props.onChangeCascadingValue(u)}})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return o().createElement("div",{className:"filter-field-row"},o().createElement("div",{className:"filter-field-attribute"},o().createElement(E,{dropUp:this.props.dropUp,valueField:"attribute",textField:"label",fieldOptions:this.props.attributes,placeholder:"queryform.attributefilter.combo_placeholder",fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),o().createElement("div",{className:"filter-field-operator"},t?this.renderOperatorField():null),o().createElement("div",{className:"filter-field-value"},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?o().createElement("div",{className:"filter-field-tools"},this.props.deleteButton):null)}}])&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);O(S,"propTypes",{dropUp:l().bool,attributes:l().array,filterField:l().object,operatorOptions:l().array,onUpdateField:l().func,maxFeaturesWPS:l().number,toggleMenu:l().func,deleteButton:l().node,onUpdateExceptionField:l().func,onChangeCascadingValue:l().func}),O(S,"contextTypes",{messages:l().object}),O(S,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}});const P=S;var j=r(730381),T=r.n(j),x=r(93054),C=r.n(x),U=r(143146),D=r(805346),I=r(55237),_=r(200020);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function L(e,t,r){return t=k(t),function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}(e,N()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function q(e,t,r){return(t=A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:String(t)}C()(T());var Z=(0,U.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(_.DateTimePicker),G=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return q(M(e=L(this,t,[].concat(n))),"updateValueState",(function(t){t.startDate&&t.endDate&&t.startDate>t.endDate?e.props.onUpdateExceptionField(e.props.fieldRowId,"queryform.attributefilter.datefield.wrong_date_range"):e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.fieldValue&&this.props.fieldValue.startDate||null,r=this.props.fieldValue&&this.props.fieldValue.endDate||null;return"><"===this.props.operator?o().createElement("div",{className:"query-field"},o().createElement("div",{className:"query-field-value date-filter-left"},this.props.showLabels&&o().createElement(D.Z,{msgId:"queryform.from"}),o().createElement(Z,{type:this.props.attType,defaultValue:t,value:t,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,I.V$)(this.context.locale,this.props.attType),onChange:function(t){return e.updateValueState({startDate:t,endDate:r})}})),o().createElement("div",{className:"query-field-value date-filter-right"},this.props.showLabels&&o().createElement(D.Z,{msgId:"queryform.to"}),o().createElement(Z,{type:this.props.attType,defaultValue:r,value:r,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,I.V$)(this.context.locale,this.props.attType),onChange:function(r){return e.updateValueState({startDate:t,endDate:r})}}))):o().createElement("div",null,this.props.showLabels&&o().createElement(D.Z,{msgId:"queryform.date"}),o().createElement(Z,{disabled:"isNull"===this.props.operator,type:this.props.attType,defaultValue:t,value:t,time:this.props.timeEnabled,calendar:this.props.dateEnabled,format:(0,I.V$)(this.context.locale,this.props.attType),onChange:function(t){e.updateValueState({startDate:t,endDate:null})}}))}}])&&R(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);q(G,"propTypes",{attType:l().string,dateEnabled:l().bool,fieldName:l().string,fieldRowId:l().number,fieldValue:l().object,fieldException:l().string,operator:l().string,onUpdateField:l().func,onUpdateExceptionField:l().func,showLabels:l().bool,timeEnabled:l().bool}),q(G,"contextTypes",{locale:l().string}),q(G,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1});const $=G;var W=r(86638),H=r(509886);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z.apply(this,arguments)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ie(n.key),n)}}function J(e,t,r){return t=te(t),function(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}(e,ee()?Reflect.construct(t,r||[],te(e).constructor):t.apply(e,r))}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function oe(e,t,r){return(t=ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:String(t)}r.n(H)()();var le=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return oe(re(e=J(this,t,[].concat(n))),"renderPicker",(function(t){var r=e.props.label?o().createElement("label",null,e.props.label):null,n=e.props.lowLabel?o().createElement("label",null,e.props.lowLabel):null,i=e.props.upLabel?o().createElement("label",null,e.props.upLabel):null;return"><"===e.props.operator?o().createElement("div",{className:"query-field"},o().createElement("div",{className:"query-field-value"},n,o().createElement(_.NumberPicker,z({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({lowBound:t,upBound:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null})}},e.props.options))),o().createElement("div",{className:"query-field-value"},i,o().createElement(_.NumberPicker,z({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({upBound:t,lowBound:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null})}},e.props.options)))):o().createElement("div",null,r,o().createElement(_.NumberPicker,z({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:e.props.fieldValue,onChange:function(t){return!isNaN(t)&&e.changeNumber(t)}},e.props.options)))})),oe(re(e),"changeNumber",(function(t){"><"===e.props.operator?null!==t.lowBound&&void 0!==t.lowBound&&null!==t.upBound&&void 0!==t.upBound&&t.lowBound>=t.upBound?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,W.S$)(e.context.messages,"queryform.attributefilter.numberfield.wrong_range")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null):e.props.isRequired&&null==t?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,W.S$)(e.context.messages,"queryform.attributefilter.numberfield.isRequired")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=Y(Y({},this.props.style),{},{borderColor:"#FF0000"})),o().createElement(p.Z,{placement:"bottom",overlay:this.props.fieldException?o().createElement(a.Tooltip,{id:this.props.fieldRowId+"_tooltip"},o().createElement("strong",null,this.props.fieldException)):o().createElement("noscript",null)},this.renderPicker(e))}}])&&K(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);oe(le,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().oneOfType([l().number,l().object]),fieldException:l().oneOfType([l().object,l().bool,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,isRequired:l().bool,label:l().string,lowLabel:l().string,upLabel:l().string,options:l().shape({format:l().string,min:l().number,max:l().number,step:l().number,precision:l().number}),style:l().object}),oe(le,"contextTypes",{messages:l().object}),oe(le,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}});const ae=le;var ue=r(615402),pe=r(86686);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ge(n.key),n)}}function de(e,t,r){return t=be(t),function(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ye(e)}(e,fe()?Reflect.construct(t,r||[],be(e).constructor):t.apply(e,r))}function fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fe=function(){return!!e})()}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function ve(e,t,r){return(t=ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ge(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:String(t)}var he=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return ve(ye(e=de(this,t,[].concat(n))),"renderField",(function(){var t,r=(0,W.S$)(e.context.messages,"queryform.attributefilter.text_placeholder"),n=o().createElement(a.Tooltip,{id:"textField-tooltip"+e.props.fieldRowId},o().createElement(ue.Z,{msgId:null!==(t=e.props.tooltipMessage)&&void 0!==t?t:"queryform.attributefilter.tooltipTextField"})),i=o().createElement(a.FormControl,{disabled:"isNull"===e.props.operator,placeholder:r,onChange:e.changeText,type:"text",value:e.props.fieldValue||""});return(0,pe.isLikeOrIlike)(e.props.operator)?o().createElement(p.Z,{key:"textField-overlay"+e.props.fieldRowId,placement:"top",overlay:n},i):i})),ve(ye(e),"changeText",(function(t){e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t.target.value,e.props.attType)})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?o().createElement("label",null,this.props.label):o().createElement("span",null);return o().createElement("div",{className:"textField"},e,this.renderField())}}])&&se(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);ve(he,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().string,label:l().string,tooltipMessage:l().string,fieldException:l().oneOfType([l().object,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,style:l().object}),ve(he,"contextTypes",{messages:l().object}),ve(he,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}});const we=he;var Oe=r(848384),Fe=r(749902);function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,De(n.key),n)}}function Pe(e,t,r){return t=Te(t),function(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xe(e)}(e,je()?Reflect.construct(t,r||[],Te(e).constructor):t.apply(e,r))}function je(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(je=function(){return!!e})()}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Ue(e,t,r){return(t=De(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e){var t=function(e,t){if("object"!=Ee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ee(t)?t:String(t)}var Ie=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Ue(xe(e=Pe(this,t,[].concat(n))),"getOptions",(function(){return e.props.filterField&&e.props.filterField.options&&e.props.filterField.options[e.props.filterField.attribute]&&e.props.filterField.options[e.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),Ue(xe(e),"getPagination",(function(t){if(!e.props.filterField.options)return{};var r=Math.ceil(e.props.filterField.fieldOptions.valuesCount/e.props.maxFeaturesWPS),n=1===e.props.filterField.fieldOptions.currentPage||!e.props.filterField.fieldOptions.currentPage,o=e.props.filterField.fieldOptions.currentPage===r||!e.props.filterField.fieldOptions.currentPage;return d()({},e.props.pagination,{paginated:0!==t.length&&!(n&&1===t.length),firstPage:n,lastPage:o,loadPrevPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),Ue(xe(e),"getTooltip",(function(){return d()({},e.props.tooltip,{enabled:(0,pe.isLikeOrIlike)(e.props.filterField.operator),id:"autocompleteField-tooltip"+e.props.filterField&&e.props.filterField.rowId,message:o().createElement(ue.Z,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:"autocompleteField-overlay"+e.props.filterField&&e.props.filterField.rowId,placement:"top"})})),Ue(xe(e),"renderField",(function(){var t;e.props.filterField&&e.props.filterField.value&&"*"!==e.props.filterField.value&&(t={value:e.props.filterField.value,label:e.props.filterField.value});var r=e.getOptions()?e.getOptions().slice(0):[];return o().createElement(Fe.Z,{dropUp:e.props.dropUp,busy:e.props.filterField.loading,data:e.props.filterField.loading?[]:r,disabled:"isNull"===e.props.filterField.operator,itemComponent:e.props.itemComponent,open:e.props.filterField.openAutocompleteMenu,onChange:function(t){return e.handleChange(t)},onFocus:function(){return e.handleFocus(r)},onSelect:function(){return e.handleSelect()},onToggle:function(){return e.handleToggle(r)},pagination:e.getPagination(r),selectedValue:t&&t.value,tooltip:e.getTooltip()})})),Ue(xe(e),"handleSelect",(function(){e.selected=!0})),Ue(xe(e),"handleChange",(function(t){e.selected?(e.selected=!1,t&&""!==t.value&&e.props.onUpdateField(e.props.filterField.rowId,"value",t.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):e.props.onUpdateField(e.props.filterField.rowId,"value","string"==typeof t?t:t.value,"string",{currentPage:1,delayDebounce:1e3})})),Ue(xe(e),"handleFocus",(function(t){e.loadWithoutfilter(t)})),Ue(xe(e),"handleToggle",(function(){e.props.toggleMenu(e.props.filterField.rowId,!e.props.filterField.openAutocompleteMenu)})),Ue(xe(e),"loadWithoutfilter",(function(t){0!==t.length||e.props.filterField.value||e.props.onUpdateField(e.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.label?o().createElement("label",null,this.props.label):o().createElement("span",null);return o().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&Se(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);Ue(Ie,"propTypes",{dropUp:l().bool,disabled:l().bool,filterField:l().object,label:l().string,itemComponent:l().oneOfType([l().object,l().func]),maxFeaturesWPS:l().number,onUpdateField:l().func,pagination:l().object,textField:l().string,tooltip:l().object,toggleMenu:l().func,valueField:l().string}),Ue(Ie,"contextTypes",{messages:l().object}),Ue(Ie,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:Oe.Z,toggleMenu:function(){},filterField:{fieldOptions:{}}});const _e=Ie;var Be=r(112346),Re=r(313311),Le=r.n(Re);function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$e(n.key),n)}}function Me(e,t,r){return t=qe(t),function(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ae(e)}(e,Ve()?Reflect.construct(t,r||[],qe(e).constructor):t.apply(e,r))}function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ve=function(){return!!e})()}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ze(e,t)}function Ge(e,t,r){return(t=$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e(e){var t=function(e,t){if("object"!=Ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ne(t)?t:String(t)}var We=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ge(Ae(e=Me(this,t,[].concat(n))),"state",{open:!1}),Ge(Ae(e),"getSelected",(function(){return Le()(e.props.options,e.getFindFunciton())})),Ge(Ae(e),"getValue",(function(t){return e.props.valueField&&t&&t[e.props.valueField]?t[e.props.valueField]:t})),Ge(Ae(e),"getLabel",(function(t){return e.props.labelField&&t&&t[e.props.labelField]?t[e.props.labelField]:e.getValue(t)})),Ge(Ae(e),"getFindFunciton",(function(){return e.props.valueField?Ge({},e.props.valueField,e.props.value):e.props.value})),Ge(Ae(e),"renderLabel",(function(t){return e.props.labelRenderer?e.props.labelRenderer(t):e.getLabel(t)})),Ge(Ae(e),"handleOutsideClick",(function(t){e.node&&e.node.contains&&!e.node.contains(t.target)&&e.state.open?e.handleClick():document&&!e.node&&e.handleOutsideClick&&document.removeEventListener("click",e.handleOutsideClick,!1)})),Ge(Ae(e),"handleClick",(function(){document&&!e.state.open?document.addEventListener("click",e.handleOutsideClick,!1):document.removeEventListener("click",e.handleOutsideClick,!1);var t=!e.state.open;e.setState({open:t})})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return o().createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},o().createElement("span",{onClick:this.handleClick},o().createElement("strong",null,this.renderLabel(this.getSelected())),o().createElement(a.Glyphicon,{glyph:"chevron-down"})),this.state.open&&o().createElement("div",{className:"m-options"},o().createElement("ul",null,this.props.options.map((function(t,r){return o().createElement("li",{key:r,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&ke(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);Ge(We,"propTypes",{options:l().array,value:l().any,onSelect:l().func,valueField:l().string,labelField:l().string,labelRenderer:l().any}),Ge(We,"defaultProps",{onSelect:function(){},options:[]});const He=We;var Qe=r(838167),Xe=r(38560);function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function ze(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ke(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lt(n.key),n)}}function et(e,t,r){return t=rt(t),function(e,t){if(t&&("object"===Ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}(e,tt()?Reflect.construct(t,r||[],rt(e).constructor):t.apply(e,r))}function tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tt=function(){return!!e})()}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e,t,r){return(t=lt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(e){var t=function(e,t){if("object"!=Ye(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ye(t)?t:String(t)}var at=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return it(nt(e=et(this,t,[].concat(n))),"getComboValues",(function(t,r){if(t&&t.dependson){var n=e.props.filterFields.filter((function(e){return e.attribute===t.dependson.field}))[0];if(n&&n.value){var o=r.filter((function(e){return e.attribute===n.attribute}))[0],i=o.values.filter((function(e){return e[o.valueId]===n.value}))[0][t.dependson.from],l=t.values.filter((function(e){return e[t.dependson.to]===i}));return t&&"list"===t.type?l.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null}}return t&&"list"===t.type?t.values.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null})),it(nt(e),"getOperator",(function(t){switch(t&&t.type?t.type:""){case"list":return e.props.listOperators;case"string":return e.props.stringOperators;case"boolean":return e.props.booleanOperators;case"array":return e.props.arrayOperators;default:return e.props.defaultOperators}})),it(nt(e),"renderFilterField",(function(t){var r=e.props.attributes.filter((function(e){return e.attribute===t.attribute}))[0],n=e.getComboValues(r,e.props.attributes),i=t.exception?o().createElement(p.Z,{placement:"bottom",overlay:o().createElement(a.Tooltip,{id:t.rowId+"tooltip"},o().createElement("strong",null,o().createElement(Qe.ZP.Message,{msgId:t.exception||""})))},o().createElement(Xe.Z,{id:"remove-filter-field",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,style:{backgroundColor:"red"},onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},o().createElement(a.Glyphicon,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):o().createElement(p.Z,{placement:"top",overlay:o().createElement(a.Tooltip,{id:t.rowId+"tooltip"},o().createElement("strong",null,o().createElement(Qe.ZP.Message,{msgId:"queryform.attributefilter.delete"})))},o().createElement(Xe.Z,{id:"remove-filter-field",bsStyle:e.props.buttonStyle,className:"filter-buttons no-border",onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},o().createElement(a.Glyphicon,{glyph:e.props.removeButtonIcon})));return o().createElement(P,{dropUp:e.props.dropUp,key:t.rowId,deleteButton:i,attributes:e.props.attributes,filterField:t,operatorOptions:e.getOperator(r),onUpdateField:e.props.actions.onUpdateFilterField,toggleMenu:e.props.actions.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.props.actions.onUpdateExceptionField,onChangeCascadingValue:e.props.actions.onChangeCascadingValue},o().createElement(c.Z,{dropUp:e.props.dropUp,attType:"list",valueField:"id",textField:"name",fieldOptions:n||[],comboFilter:"contains"}),o().createElement($,{attType:"date",dateEnabled:!0,operator:t.operator}),o().createElement($,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:t.operator}),o().createElement(we,{attType:"array",operator:t.operator}),o().createElement($,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:t.operator}),o().createElement(ae,{operator:t.operator,attType:"number"}),e.props.autocompleteEnabled?o().createElement(_e,{dropUp:e.props.dropUp,filterField:t,attType:"string"}):o().createElement(we,{tooltipMessage:e.props.textFieldTooltipMessageId,operator:t.operator,attType:"string"}),o().createElement(c.Z,{dropUp:e.props.dropUp,fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"}))})),it(nt(e),"renderGroupButtons",(function(t){var r=[];return t.index<=e.props.groupLevels&&r.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_group",onClick:function(){return e.props.actions.onAddGroupField(t.id,t.index)}}),r.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:e.props.addButtonIcon,bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return e.props.actions.onAddFilterField(t.id)}}),t.groupId&&r.push({key:"remove-group",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.deleteGroup",glyph:e.props.removeGroupButtonIcon,onClick:function(){return e.props.actions.onRemoveGroupField(t.id)}}),o().createElement(u.Z,{buttons:r,btnDefaultProps:{}})})),it(nt(e),"renderGroupHeader",(function(t){return o().createElement("div",{className:"logicHeader filter-logic-header"},o().createElement("div",{key:"filter-logic-header",className:"filter-logic-header-text m-label"},o().createElement("span",{className:"group_label_a"},o().createElement(Qe.ZP.Message,{msgId:"queryform.attributefilter.group_label_a"}))," ",o().createElement(He,{options:e.props.logicComboOptions,valueField:"logic",value:t.logic,onSelect:function(r){return e.props.actions.onUpdateLogicCombo(t.id,r)},labelRenderer:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name;return o().createElement(Qe.ZP.Message,{msgId:e})}})," ",o().createElement("span",{className:"group_label_b"},o().createElement(Qe.ZP.Message,{msgId:"queryform.attributefilter.group_label_b"}))),e.renderGroupButtons(t))})),it(nt(e),"renderGroupField",(function(t){var r=e.props.filterFields.filter((function(e){return e.groupId===t.id})),n=e.props.groupFields.filter((function(e){return e.groupId===t.id})),i=[].concat(ze(r),ze(n)).map((function(t){return void 0!==t.rowId?e.renderFilterField(t):e.renderGroupField(t)}));return o().createElement("div",{className:"mapstore-conditions-group",key:t.id},e.renderGroupHeader(t),o().createElement("div",{className:"query-content"},i))})),it(nt(e),"renderHeader",(function(){return(0,W.S$)(e.context.messages,"queryform.attributefilter.attribute_filter_header")})),it(nt(e),"updateLogicCombo",(function(t,r,n){var o=e.props.logicComboOptions.filter((function(t){return n===(0,W.S$)(e.context.messages,t.name)}))[0].logic;e.props.actions.onUpdateLogicCombo(t,o)})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return this.props.withContainer?o().createElement(Be.Z,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):o().createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&Je(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);it(at,"propTypes",{dropUp:l().bool,groupLevels:l().number,withContainer:l().bool,autocompleteEnabled:l().bool,maxFeaturesWPS:l().number,groupFields:l().array,filterFields:l().array,attributes:l().array,fieldWidth:l().string,removeButtonIcon:l().string,addButtonIcon:l().string,removeGroupButtonIcon:l().string,buttonStyle:l().string,logicComboOptions:l().array,attributePanelExpanded:l().bool,actions:l().object,arrayOperators:l().array,listOperators:l().array,stringOperators:l().array,booleanOperators:l().array,defaultOperators:l().array,comboOptions:l().object,textFieldTooltipMessageId:l().string}),it(at,"contextTypes",{messages:l().object}),it(at,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",removeGroupButtonIcon:"trash",bsStyle:"default",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}},listOperators:["="],stringOperators:["=","<>","like","ilike","isNull"],arrayOperators:["contains"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>","><","isNull"],textFieldTooltipMessageId:"queryform.attributefilter.tooltipTextField"});const ut=at},82110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(124852),o=r.n(n),i=r(496259),l=r(532425);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){var n,o,i,l;n=e,o=t,i=r[t],l=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==a(l)?l:String(l))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const c=function(e){var t=e.width,r=e.height,n=e.className,a=void 0===n?"loader-container":n,u=e.contentStyle,c=void 0===u?{}:u;return o().createElement("div",{className:a},o().createElement(i.Z,null,(function(e){var n=e.width,i=void 0===n?200:n,a=e.height,u=void 0===a?200:a,s=t||(u>0?Math.min(i,u):i),d=r||(u>0?Math.min(i,u):i),f=Math.min(s,d);return o().createElement(l.Z,{size:f,style:p({padding:f/10,margin:"auto",display:"flex"},c)})})))}},399534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(461365),o=r(356936);const i=(0,n.Z)(o.h_)},143146:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(867076),o=r(747037),i=r.n(o),l=r(647960),a=r.n(l),u=r(730381),p=r.n(u),c=r(55237);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t,r){var n;return n=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==s(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dateTypeProp,r=void 0===t?"type":t,o=e.dateProp,l=void 0===o?"date":o,u=e.setDateProp,s=void 0===u?"onSetDate":u;return(0,n.compose)((0,n.withPropsOnChange)([l],(function(e){var t=e[l],n=e[r],o=e.useUTCOffset,u=void 0===o||o,s=t,f="1970-01-01",b="00:00:00";if(!a()(t)&&i()(t)){if("time"===n){var y,m=(null===(y=t.split("T"))||void 0===y?void 0:y[1])||t;s=new Date("".concat(f,"T").concat(m))}if("date"===n){var v,g=(null===(v=t.split("T"))||void 0===v?void 0:v[0])||t;-1!==t.indexOf("Z")&&(g=t.substr(0,t.length-1)),s=new Date("".concat(g,"T").concat(b,"Z"))}"date-time"===n&&(s=new Date(t))}var h=s;if(a()(s)){switch(n){case"time":b=(0,c.kN)(s);break;case"date":f=(0,c.oD)(s);break;default:b=(0,c.kN)(s),f=(0,c.oD)(s)}(h=new Date("".concat(f,"T").concat(b,"Z"))).setUTCMilliseconds(s.getUTCMilliseconds());var w=u?(0,c.$4)(h):0;h=new Date(h.getTime()+w)}return d(d({},l,h),"defaultCurrentDate","date-time"===n?p()().startOf("day").toDate():void 0)})),(0,n.withHandlers)(d({},s,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e[s],n=e.datePropFormat,o=void 0===n?"short":n,i=e[r],l=e.useUTCOffset,a=void 0===l||l;return function(e,r,n){if(e){var l=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())),u=a?(0,c.$4)(e):0,p=new Date(l.getTime()-u);switch(o){case"full-iso":t(p.toISOString(),r,n);break;case"short":switch(i){case"time":t("".concat((0,c.kN)(p),"Z"),r,n);break;case"date":t("".concat((0,c.oD)(p),"Z"),r,n);break;case"date-time":t(p.toISOString(),r,n);break;default:t(p,r,n)}}}else t(null)}}))))}},55237:(e,t,r)=>{"use strict";r.d(t,{tr:()=>O,jb:()=>F,Xu:()=>E,un:()=>S,Qn:()=>P,_q:()=>j,og:()=>T,$4:()=>x,kN:()=>C,oD:()=>U,V$:()=>D,uH:()=>I,pC:()=>_,tz:()=>B,p:()=>R,Q7:()=>L,t:()=>N});var n=r(747037),o=r.n(n),i=r(647960),l=r.n(i),a=r(227361),u=r.n(a),p=r(984596),c=r.n(p),s=r(730381),d=r.n(s),f=r(86638);function b(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,p=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){p=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(p)throw o}}return a}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=/PT?[\d\.]+[YMWDHMS]/,h=function(e){return e?o()(e)?new Date(e).getTime():(l()(e)&&e.getTime(),e):null},w=function(e){var t=e.start,r=e.end,n=e.duration,o=d().duration(n).asMilliseconds();return(new Date(r).getTime()-new Date(t).getTime())/o},O=function(e){for(var t=e.start,r=e.end,n=e.duration,o=d().duration(n).asMilliseconds(),i=[],l=new Date(t),a=new Date(r);l<=a;)i.push(new Date(l).toISOString()),l.setTime(l.getTime()+o);return i},F=function(e){var t=e.start,r=e.end,n=e.duration;return O({start:t,end:r,duration:n}).map((function(e){return{start:new Date(e),end:new Date(new Date(e).getTime()+d().duration(n).asMilliseconds())}}))},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,r=e.end,n=e.duration,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.start,l=o.end;if(!i||!l)return{count:w({start:t,end:r,duration:n}),start:t,end:r};var a=d().duration(n).asMilliseconds(),u=new Date(t).getTime(),p=new Date(r).getTime(),c=new Date(i).getTime(),s=new Date(l).getTime(),f=Math.ceil((c-u)/a),b=Math.floor((s-u)/a),y=Math.floor((p-u)/a);if(f>=0&&b<=y){var m=b-f;return{start:new Date(u+Math.max(0,f)*a),end:new Date(u+Math.min(y,b)*a),count:m}}return{count:w({start:t,end:r,duration:n}),start:t,end:r}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,r=e.end,n=arguments.length>1?arguments[1]:void 0,o=new Date(t),i=new Date(r),l=Math.floor(i.getTime()-o.getTime())/n;return{range:{start:t,end:r},resolution:d().duration(l).toISOString().match(g)[0]}},P=function(){var e,t,r=arguments.length>1?arguments[1]:void 0,n=(e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],(t=arguments.length>2?arguments[2]:void 0)?e.map((function(e){var r=y(e.split("/"),2);return{start:r[0],end:r[1]}[t]})):e);return n[function(e,t){var r=h(t),n=1/0,o=-1;return e.forEach((function(e,t){var i=h(e),l=Math.abs(i-r);l<n&&(n=l,o=t)})),o}(n,r)]},j=function(e){return e&&e.indexOf&&e.indexOf("--")>0},T=function(e,t){var r=d()(e).diff(t);return{start:r>=0?t:e,end:r>=0?e:t}},x=function(e){return 6e4*e.getTimezoneOffset()},C=function(e){var t=e;!l()(e)&o()(e)&&(t=new Date(e));var r=t.getUTCHours();r=r<10?"0"+r:r;var n=t.getUTCMinutes();n=n<10?"0"+n:n;var i=t.getUTCSeconds();return i=i<10?"0"+i:i,"".concat(r,":").concat(n,":").concat(i)},U=function(e){var t=e;!l()(e)&o()(e)&&(t=new Date(e));var r=t.getUTCMonth()+1,n=t.getUTCDate();return r=r<10?"0"+r:r,n=n<10?"0"+n:n,"".concat(t.getUTCFullYear(),"-").concat(r,"-").concat(n)},D=function(e,t){var r=(0,f.mh)(e),n="HH:mm:SS";switch(t){case"time":return n;case"date":return r;default:return r+" "+n}},I=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).Domains,t=void 0===e?{}:e,r=arguments.length>1?arguments[1]:void 0,n=c()(t.DimensionDomain||[]).concat(),o=t["@version"]||t.version,i=u()(t,"SpaceDomain.BoundingBox");return i&&n.push({Identifier:"space",Domain:i}),n.map((function(e){var t=e.Identifier,n=e.Domain;return{source:{type:"multidim-extension",version:o,url:r},name:t,domain:n}}))},_=function(e,t,r){var n=h(t),o=h(r);return e.reduce((function(e,t){var r=h(t);return h(n)<r&&h(o)>r?[].concat(b(e),[t]):b(e)}),[])},B=function(e){var t=e.reduce((function(e,t){if(-1!==t.indexOf("/")){var r=y(t.split("/"),2),n=r[0],o=r[1];return[].concat(b(e),[n,o])}return[].concat(b(e),[t])}),[]).sort();return[t[0],t[t.length-1]]},R=function(e,t,r){var n=d()(e);return("add"===r?n.add(t,"seconds"):n.subtract(t,"seconds")).toISOString()},L=function(e){var t,r;(r=(r=o()(e)?e.indexOf("--")>0?e.split("--"):e.indexOf(",")>0?e.split(","):[e]:e).reduce((function(e,t){return e.concat(t.split("/"))}),[]).sort()).length>2&&(r=[r[0],r[r.length-1]]);var n=y((null===(t=r)||void 0===t?void 0:t.filter((function(e){return!!e})))||[],2);return[n[0],n[1]]},N=function(e){var t=e;!l()(e)&o()(e)&&(t=new Date(e));var r=t.getHours();r=r<10?"0"+r:r;var n=t.getMinutes();n=n<10?"0"+n:n;var i=t.getSeconds();return i=i<10?"0"+i:i,"".concat(r,":").concat(n,":").concat(i)}}}]);