"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[23403,37369],{812366:(e,r,t)=>{t.d(r,{$j:()=>K,A2:()=>a,A_:()=>J,BQ:()=>v,Cu:()=>j,Cx:()=>b,DK:()=>D,Df:()=>R,Ej:()=>z,GN:()=>A,Gt:()=>x,HN:()=>o,Lg:()=>ee,M4:()=>c,MX:()=>f,Ms:()=>V,Q$:()=>O,Rr:()=>y,S$:()=>L,Tg:()=>I,Tl:()=>S,Tv:()=>w,VK:()=>oe,W5:()=>g,WE:()=>k,Wp:()=>Y,Yq:()=>Q,Zv:()=>Z,_z:()=>G,bC:()=>H,bV:()=>F,cc:()=>B,cn:()=>q,dk:()=>ie,fJ:()=>T,fK:()=>s,g5:()=>h,gt:()=>U,jN:()=>E,kl:()=>p,m7:()=>te,nq:()=>N,nx:()=>re,ow:()=>l,p7:()=>m,pK:()=>ue,r:()=>$,s9:()=>d,t7:()=>u,tW:()=>i,ti:()=>P,uk:()=>_,vt:()=>ne,wC:()=>C,xk:()=>M,yd:()=>X});var n=t(737369),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",u="EXCEPTIONS_FEATURE_INFO",a="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",f="PURGE_MAPINFO_RESULTS",l="CHANGE_MAPINFO_FORMAT",p="SHOW_MAPINFO_MARKER",y="HIDE_MAPINFO_MARKER",b="SHOW_REVERSE_GEOCODE",s="HIDE_REVERSE_GEOCODE",d="NO_QUERYABLE_LAYERS",E="CLEAR_WARNING",v="FEATURE_INFO_CLICK",O="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",m="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",g="TOGGLE_MAPINFO_STATE",I="UPDATE_CENTER_TO_MARKER",T="IDENTIFY:CHANGE_PAGE",_="IDENTIFY:CLOSE_IDENTIFY",S="IDENTIFY:CHANGE_FORMAT",A="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",N="IDENTIFY:EDIT_LAYER_FEATURES",h="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",P="IDENTIFY:SET_MAP_TRIGGER",j="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",F="IDENTIFY:SET_SHOW_IN_MAP_POPUP",R="IDENTIFY:IDENTIFY_IS_MOUNTED",D="IDENTIFY:INIT_PLUGIN";function w(e,r,t,n,i){return{type:o,data:r,reqId:e,requestParams:t,layerMetadata:n,layer:i}}function M(e,r,t,n){return{type:i,error:r,reqId:e,requestParams:t,layerMetadata:n}}function k(){return{type:d}}function G(){return{type:E}}function C(e,r){return{type:c,reqId:e,request:r}}function L(e){return{type:a,enabled:e}}function U(){return{type:f}}function Y(e){return{type:l,infoFormat:e}}function q(){return{type:p}}function H(){return{type:y}}function W(e){return{type:b,reverseGeocodeData:e.data}}function K(e){return function(r){n.A.reverseGeocode(e).then((function(e){r(W(e))})).catch((function(e){r(W(e))}))}}function x(){return{type:s}}function B(){return{type:g}}function Q(e){return{type:I,status:e}}function V(e,r){return{type:v,point:e,layer:r,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function z(e){return{type:O,point:e}}function $(e){return{type:m,enabled:e}}function X(e){return{type:T,index:e}}var Z=function(){return{type:_}},J=function(e){return{type:S,format:e}},ee=function(e){return{type:A,showCoordinateEditor:e}},re=function(e){return{type:N,layer:e}},te=function(e){return{type:h,query:e}},ne=function(e){return{type:P,trigger:e}},oe=function(e){return{type:F,value:e}},ie=function(e){return{type:R,isMounted:e}},ue=function(e){return{type:D,cfg:e}}},737369:(e,r,t)=>{t.d(r,{A:()=>f});var n=t(995531),o=t(23412),i=t.n(o),u=t(45228),a=t.n(u),c={format:"json",bounded:0,polygon_geojson:1,priority:5};const f={geocode:function(e,r){var t=a()({q:e},c,r||{}),o=i().format({protocol:"https",host:"nominatim.openstreetmap.org",query:t});return n.A.get(o)},reverseGeocode:function(e,r){var t=a()({lat:e.lat,lon:e.lng},r||{},c),o=i().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:t});return n.A.get(o)}}},952228:(e,r,t)=>{t.d(r,{A:()=>A});var n=t(45388),o=t.n(n),i=t(400912),u=t.n(i),a=t(509095),c=t(415392),f=t(621939),l=t(904059),p=t(307679),y=t(148936),b=t(434164),s=t(142974),d=t(636422),E=t(724188),v=t(486174);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function m(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,r){if(e){if("string"==typeof e)return I(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(e,r):void 0}}function I(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?T(Object(t),!0).forEach((function(r){S(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function S(e,r,t){return(r=function(e){var r=function(e){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=O(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const A={accessMetadataExplorer:function(e,r){return e.ofType(a.lm).switchMap((function(){return o().Observable.of((0,c.fN)("metadataexplorer","enabled",!0),(0,a.bj)(!1),(0,a.XP)((0,v.Kz)(r.getState())),(0,f.Rt)("default_map_backgrounds"))}))},addBackgroundPropertiesEpic:function(e){return e.ofType(a.Nn).switchMap((function(e){var r,t=e.modalParams,n=o().Observable.of((0,a.Gh)(_(_({},t),{},{loading:!1}))),i=!t.editing&&(null==t||null===(r=t.layer)||void 0===r?void 0:r.remoteTileGrids);return t.layer&&"wms"===t.layer.type?o().Observable.of((0,a.Gh)(_(_({},t),{},{loading:!0}))).concat(o().Observable.forkJoin((0,b.aF)(t.layer),i?o().Observable.defer((function(){return(0,d.Q3)((0,E.ez)(t.layer),t.layer.name,t.layer)})).catch((function(){return o().Observable.of(null)})):o().Observable.of(null)).switchMap((function(e){var r,n,i=(n=2,function(e){if(Array.isArray(e))return e}(r=e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,u,a=[],c=!0,f=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(e){f=!0,o=e}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(f)throw o}}return a}}(r,n)||g(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=i[0],c=i[1],f=c?(0,s.Pj)(c):{};return o().Observable.of((0,a.Gh)(_(_({},t),{},{layer:_(_({},t.layer),f),loading:!1,capabilities:(0,s.e9)(u)})))})).catch((function(){return n}))):n}))},setCurrentBackgroundLayerEpic:function(e,r){return e.ofType(a.kz).switchMap((function(e){var t,n=e.layerId,i=r.getState(),u=(0,p.pO)(i,n);return(t=o().Observable).of.apply(t,m(u&&"background"===u.group?[(0,c.fN)("backgroundSelector","tempLayer",u),(0,c.fN)("backgroundSelector","currentLayer",u)]:[]))}))},updateTempBackgroundLayerEpic:function(e,r){return e.ofType(a.kk).take(1).switchMap((function(t){var n=t.id;return e.ofType(l.rN).switchMap((function(){var e,t=r.getState(),i=(0,p.pO)(t,n);return(0,p.vm)(t).id===i.id?(e=o().Observable).of.apply(e,m(i&&"background"===i.group?[(0,c.fN)("backgroundSelector","tempLayer",i),(0,c.fN)("backgroundSelector","currentLayer",i)]:[])):o().Observable.of((0,c.fN)("backgroundSelector","tempLayer",i))}))}))},backgroundAddedEpic:function(e,r){return e.ofType(a.ct).mergeMap((function(e){var t=e.layerId,n=r.getState(),i=(0,p.pO)(n,t);return i?o().Observable.of((0,l.ju)(i.id,{visibility:!0}),(0,a.F8)(i.id),(0,a.Zb)()):o().Observable.empty()}))},backgroundEditedEpic:function(e,r){return e.ofType(a.HW).mergeMap((function(e){var t=e.layerId,n=r.getState();return(0,p.pO)(n,t)?o().Observable.of((0,a.Zb)()):o().Observable.empty()}))},backgroundRemovedEpic:function(e,r){return e.ofType(a.M_).mergeMap((function(e){var t=e.backgroundId,n=r.getState(),i=(0,p.pO)(n,t),c=(0,y.CD)(n)||[],f=(0,p.vm)(n)||{},b=t===f.id?u()(c.filter((function(e){return e.id!==t&&!e.invalid}))):f;return i?o().Observable.of((0,l.bf)(t,"layers"),(0,l.ju)(b.id,{visibility:!0}),(0,a.F8)(b.id)):o().Observable.empty()}))},syncSelectedBackgroundEpic:function(e){return e.ofType(a.bS).take(1).switchMap((function(r){var t=r.id;return e.ofType(l.Cl).filter((function(e){return e.layer.id===t})).switchMap((function(){return o().Observable.of((0,a.vB)(t))})).takeUntil(e.ofType(a.ct))}))}}},434164:(e,r,t)=>{t.d(r,{Cc:()=>O,aF:()=>v});var n=t(23412),o=t.n(n),i=(t(400912),t(155584)),u=t(45388),a=t(375482),c=t(995531),f=(t(764932),t(112585)),l=t(492312),p=t(584153),y=t(79738);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){E(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function E(e,r,t){return(r=function(e){var r=function(e){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=b(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}i.default;var v=function(e){return u.Observable.defer((function(){return a.Ay.getCapabilities((0,f.wk)(e))})).let(l.m9).map((function(r){return a.Ay.parseLayerCapabilities(r,e)}))},O=function(e){return function(e){return u.Observable.defer((function(){return c.A.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.name,t=e.search,n=void 0===t?{}:t,i=e.url,u=o().parse((0,y.t)(n.url||i),!0);return o().format(d(d({},u),{},{search:void 0,query:d(d({},u.query),{},{service:"WMS",version:a.j0,layers:r,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(l.m9)}(e).map((function(e){var r=e.data,t=void 0===r?{}:r;return t&&t.layerDescriptions[0]})).map((function(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return d(d({},e),{},{params:{},search:r?{type:"wfs",url:(0,p.o_)(r)}:void 0})}))}}}]);