"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1744],{131744:(e,t,n)=>{n.r(t),n.d(t,{deserialize:()=>f,serialize:()=>d});var r=n(924787),o=n(638658),l=n(858261),i=n(554867),a=n(358146),s=n(182862);function u(e){let t,n,r=e.coordinates,o=[],l=[],i=(0,s.EH)(e.type),a=0;switch(e.type){case"Point":case"MultiPoint":case"LineString":(0,s.Ct)(r,o,l);break;case"MultiLineString":case"Polygon":(0,s.Ct)(r,o,l),r.length>1&&(t=r.map(e=>a+=e.length));break;case"MultiPolygon":n=r.map(e=>({type:"Polygon",coordinates:e})).map(u)}return{xy:o,z:l.length>0?l:void 0,ends:t,type:i,parts:n}}function p(e){let t=(0,s.EH)(e.type),n=[];for(let t=0;t<e.geometries.length;t++){let r=e.geometries[t];"GeometryCollection"===r.type?n.push(p(r)):n.push(u(r))}return{type:t,parts:n}}function c(e,t){let n=t;if(n===a.d.Unknown&&(n=e.type()),n===a.d.GeometryCollection){let t=[];for(let n=0;n<e.partsLength();n++){let r=e.parts(n),o=r.type();t.push(c(r,o))}return{type:a.d[n],geometries:t}}if(n===a.d.MultiPolygon){let t=[];for(let n=0;n<e.partsLength();n++)t.push(c(e.parts(n),a.d.Polygon));return{type:a.d[n],coordinates:t.map(e=>e.coordinates)}}let r=function(e,t){let n=e.xyArray(),r=e.zArray();switch(t){case a.d.Point:{let e=Array.from(n);return r&&e.push(r[0]),e}case a.d.MultiPoint:case a.d.LineString:return(0,s.FI)(n,r);case a.d.MultiLineString:case a.d.Polygon:return function(e,t,n){let r;if(!n||0===n.length)return[(0,s.FI)(e,t)];let o=0,l=Array.from(n).map(t=>e.slice(o,o=t<<1));return t&&(o=0,r=Array.from(n).map(e=>t.slice(o,o=e))),l.map((e,t)=>(0,s.FI)(e,r?r[t]:void 0))}(n,r,e.endsArray())}}(e,n);return{type:a.d[n],coordinates:r}}function y(e,t,n){let r=n.columns;return{type:"Feature",id:e,geometry:c(t.geometry(),n.geometryType),properties:(0,o.$9)(t,r)}}function g(e,t=0){var n;let a,s,c=(a=(n=e).features[0].properties,s=null,a&&(s=Object.keys(a).map(e=>(0,l.X)(a,e))),{geometryType:(0,i.b)(n.features),columns:s,envelope:null,featuresCount:n.features.length,indexNodeSize:0,crs:null,title:null,description:null,metadata:null}),y=(0,l.EC)(c,t),g=e.features.map(e=>(0,o.lV)("GeometryCollection"===e.geometry.type?p(e.geometry):u(e.geometry),e.properties,c)),d=g.map(e=>e.length).reduce((e,t)=>e+t),f=new Uint8Array(r.$.length+y.length+d);f.set(y,r.$.length);let m=r.$.length+y.length;for(let e of g)f.set(e,m),m+=e.length;return f.set(r.$),f}function d(e,t=0){return g(e,t)}function f(e,t,n,r=!1,o={}){return e instanceof Uint8Array?async function*(e,t,n){yield*(0,l.iu)(e,y,t,n)}(e,t,n):e instanceof ReadableStream?function(e,t){return(0,l.aW)(e,y,t)}(e,n):function(e,t,n,r=!1,o={}){return(0,l.Z5)(e,t,y,n,r,o)}(e,t,n,r,o)}}}]);