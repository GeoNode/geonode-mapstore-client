"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[39317,47310],{921914:(e,r,t)=>{t.d(r,{XL:()=>o,km:()=>i,Ih:()=>u,Xw:()=>a,Pn:()=>c,DZ:()=>f,e8:()=>l,E0:()=>p,F9:()=>y,X_:()=>s,pb:()=>b,Re:()=>d,ih:()=>E,xy:()=>v,jL:()=>m,oz:()=>O,ph:()=>g,lF:()=>I,gG:()=>T,cb:()=>_,GI:()=>S,B1:()=>P,fv:()=>h,gc:()=>A,zX:()=>F,ZF:()=>N,Zb:()=>R,DW:()=>D,Xp:()=>w,Fm:()=>M,sV:()=>j,LU:()=>k,XP:()=>G,WU:()=>C,mK:()=>L,g:()=>U,ws:()=>Y,HP:()=>H,aN:()=>q,Pg:()=>W,u0:()=>B,TM:()=>Z,PM:()=>K,lK:()=>x,sv:()=>V,MO:()=>$,oO:()=>Q,Mc:()=>z,Zw:()=>J,RA:()=>ee,am:()=>re,ZM:()=>te,wm:()=>ne,Y$:()=>oe,Qu:()=>ie,kT:()=>ue});var n=t(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",u="EXCEPTIONS_FEATURE_INFO",a="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",f="PURGE_MAPINFO_RESULTS",l="CHANGE_MAPINFO_FORMAT",p="SHOW_MAPINFO_MARKER",y="HIDE_MAPINFO_MARKER",s="SHOW_REVERSE_GEOCODE",b="HIDE_REVERSE_GEOCODE",d="NO_QUERYABLE_LAYERS",E="CLEAR_WARNING",v="FEATURE_INFO_CLICK",m="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",O="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",g="TOGGLE_MAPINFO_STATE",I="UPDATE_CENTER_TO_MARKER",T="IDENTIFY:CHANGE_PAGE",_="IDENTIFY:CLOSE_IDENTIFY",S="IDENTIFY:CHANGE_FORMAT",P="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",h="IDENTIFY:EDIT_LAYER_FEATURES",A="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",F="IDENTIFY:SET_MAP_TRIGGER",N="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",R="IDENTIFY:SET_SHOW_IN_MAP_POPUP",D="IDENTIFY:IDENTIFY_IS_MOUNTED",w="IDENTIFY:INIT_PLUGIN";function M(e,r,t,n,i){return{type:o,data:r,reqId:e,requestParams:t,layerMetadata:n,layer:i}}function j(e,r,t,n){return{type:i,error:r,reqId:e,requestParams:t,layerMetadata:n}}function k(){return{type:d}}function G(){return{type:E}}function C(e,r){return{type:c,reqId:e,request:r}}function L(e){return{type:a,enabled:e}}function U(){return{type:f}}function Y(e){return{type:l,infoFormat:e}}function H(){return{type:p}}function q(){return{type:y}}function X(e){return{type:s,reverseGeocodeData:e.data}}function W(e){return function(r){n.Z.reverseGeocode(e).then(function(e){r(X(e))}).catch(function(e){r(X(e))})}}function B(){return{type:b}}function Z(){return{type:g}}function K(e){return{type:I,status:e}}function x(e,r){return{type:v,point:e,layer:r,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function V(e){return{type:m,point:e}}function $(e){return{type:O,enabled:e}}function Q(e){return{type:T,index:e}}var z=function(){return{type:_}},J=function(e){return{type:S,format:e}},ee=function(e){return{type:P,showCoordinateEditor:e}},re=function(e){return{type:h,layer:e}},te=function(e){return{type:A,query:e}},ne=function(e){return{type:F,trigger:e}},oe=function(e){return{type:R,value:e}},ie=function(e){return{type:D,isMounted:e}},ue=function(e){return{type:w,cfg:e}}},647310:(e,r,t)=>{t.d(r,{Z:()=>l});var n=t(375875),o=t.n(n),i=t(472500),u=t.n(i),a=t(727418),c=t.n(a),f={format:"json",bounded:0,polygon_geojson:1,priority:5};const l={geocode:function(e,r){var t=c()({q:e},f,r||{}),n=u().format({protocol:"https",host:"nominatim.openstreetmap.org",query:t});return o().get(n)},reverseGeocode:function(e,r){var t=c()({lat:e.lat,lon:e.lng},r||{},f),n=u().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:t});return o().get(n)}}},879504:(e,r,t)=>{t.d(r,{Z:()=>P});var n=t(49977),o=t.n(n),i=t(91175),u=t.n(i),a=t(53001),c=t(782904),f=t(931273),l=t(580416),p=t(675110),y=t(31935),s=t(680833),b=t(577215),d=t(603475),E=t(707294),v=t(788113);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function O(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,r){if(e){if("string"==typeof e)return I(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(e,r):void 0}}function I(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?T(Object(t),!0).forEach(function(r){S(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function S(e,r,t){return(r=function(e){var r=function(e){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=m(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const P={accessMetadataExplorer:function(e,r){return e.ofType(a.xT).switchMap(function(){return o().Observable.of((0,c.Xg)("metadataexplorer","enabled",!0),(0,a.vw)(!1),(0,a.Py)((0,v.Cb)(r.getState())),(0,f.Dw)("default_map_backgrounds"))})},addBackgroundPropertiesEpic:function(e){return e.ofType(a.oQ).switchMap(function(e){var r,t=e.modalParams,n=o().Observable.of((0,a.$c)(_(_({},t),{},{loading:!1}))),i=!t.editing&&(null==t||null===(r=t.layer)||void 0===r?void 0:r.remoteTileGrids);return t.layer&&"wms"===t.layer.type?o().Observable.of((0,a.$c)(_(_({},t),{},{loading:!0}))).concat(o().Observable.forkJoin((0,s.kB)(t.layer),i?o().Observable.defer(function(){return(0,d.hn)((0,E.EG)(t.layer),t.layer.name,t.layer)}).catch(function(){return o().Observable.of(null)}):o().Observable.of(null)).switchMap(function(e){var r,n,i=(n=2,function(e){if(Array.isArray(e))return e}(r=e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,u,a=[],c=!0,f=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(e){f=!0,o=e}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(f)throw o}}return a}}(r,n)||g(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=i[0],c=i[1],f=c?(0,b.TS)(c):{};return o().Observable.of((0,a.$c)(_(_({},t),{},{layer:_(_({},t.layer),f),loading:!1,capabilities:(0,b.Br)(u)})))}).catch(function(){return n})):n})},setCurrentBackgroundLayerEpic:function(e,r){return e.ofType(a.Wv).switchMap(function(e){var t,n=e.layerId,i=r.getState(),u=(0,p.CA)(i,n);return(t=o().Observable).of.apply(t,O(u&&"background"===u.group?[(0,c.Xg)("backgroundSelector","tempLayer",u),(0,c.Xg)("backgroundSelector","currentLayer",u)]:[]))})},updateTempBackgroundLayerEpic:function(e,r){return e.ofType(a.R3).take(1).switchMap(function(t){var n=t.id;return e.ofType(l.K$).switchMap(function(){var e,t=r.getState(),i=(0,p.CA)(t,n);return(0,p.DP)(t).id===i.id?(e=o().Observable).of.apply(e,O(i&&"background"===i.group?[(0,c.Xg)("backgroundSelector","tempLayer",i),(0,c.Xg)("backgroundSelector","currentLayer",i)]:[])):o().Observable.of((0,c.Xg)("backgroundSelector","tempLayer",i))})})},backgroundAddedEpic:function(e,r){return e.ofType(a.gC).mergeMap(function(e){var t=e.layerId,n=r.getState(),i=(0,p.CA)(n,t);return i?o().Observable.of((0,l.He)(i.id,{visibility:!0}),(0,a.ke)(i.id),(0,a.V3)()):o().Observable.empty()})},backgroundEditedEpic:function(e,r){return e.ofType(a.dG).mergeMap(function(e){var t=e.layerId,n=r.getState();return(0,p.CA)(n,t)?o().Observable.of((0,a.V3)()):o().Observable.empty()})},backgroundRemovedEpic:function(e,r){return e.ofType(a.H_).mergeMap(function(e){var t=e.backgroundId,n=r.getState(),i=(0,p.CA)(n,t),c=(0,y.TP)(n)||[],f=(0,p.DP)(n)||{},s=t===f.id?u()(c.filter(function(e){return e.id!==t&&!e.invalid})):f;return i?o().Observable.of((0,l.ZF)(t,"layers"),(0,l.He)(s.id,{visibility:!0}),(0,a.ke)(s.id)):o().Observable.empty()})},syncSelectedBackgroundEpic:function(e){return e.ofType(a.K2).take(1).switchMap(function(r){var t=r.id;return e.ofType(l.oE).filter(function(e){return e.layer.id===t}).switchMap(function(){return o().Observable.of((0,a.pW)(t))}).takeUntil(e.ofType(a.gC))})}}},680833:(e,r,t)=>{t.d(r,{kB:()=>m,HI:()=>O});var n=t(472500),o=t.n(n),i=(t(91175),t(490173)),u=t(49977),a=t(501157),c=t(375875),f=t.n(c),l=(t(307887),t(624262)),p=t(510284),y=t(233044),s=t(611847);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function E(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach(function(r){v(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function v(e,r,t){return(r=function(e){var r=function(e){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=b(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}i.default;var m=function(e){return u.Observable.defer(function(){return a.ZP.getCapabilities((0,l.Fh)(e))}).let(p.oB).map(function(r){return a.ZP.parseLayerCapabilities(r,e)})},O=function(e){return function(e){return u.Observable.defer(function(){return f().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.name,t=e.search,n=void 0===t?{}:t,i=e.url,u=o().parse((0,s.eW)(n.url||i),!0);return o().format(E(E({},u),{},{search:void 0,query:E(E({},u.query),{},{service:"WMS",version:a.ID,layers:r,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))}).let(p.oB)}(e).map(function(e){var r=e.data,t=void 0===r?{}:r;return t&&t.layerDescriptions[0]}).map(function(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return E(E({},e),{},{params:{},search:r?{type:"wfs",url:(0,y.cleanAuthParamsFromURL)(r)}:void 0})})}}}]);