"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[22075],{277327:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(273517),a=r.n(n),l=r(904113),o=r(8571);function i(e){var t=e.msgId,r=e.icon;return a().createElement("div",{className:"gn-main-event-container"},a().createElement("div",{className:"gn-main-event-content"},a().createElement("div",{className:"gn-main-event-text"},a().createElement("div",{className:"gn-main-icon"},a().createElement(l.A,{name:r})),t&&a().createElement(o.A,{msgId:t}))))}i.defaultProps={msgId:"",icon:"exclamation"};const u=i},338877:(e,t,r)=>{r.d(t,{A:()=>S});var n=r(273517),a=r.n(n),l=r(995531),o=r(738221),i=r.n(o),u=r(962193),c=r.n(u),s=r(192016),m=r(551783);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var f=["loadOptions","pageSize","debounceTime","labelKey","valueKey","newOptionPromptText"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(null,arguments)}function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t,r){return(t=function(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,i=[],u=!0,c=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var E=(0,m.A)("placeholder")(s.Ay);const S=function(e){var t=e.loadOptions,r=e.pageSize,o=void 0===r?20:r,u=e.debounceTime,s=void 0===u?500:u,m=e.labelKey,d=void 0===m?"label":m,g=e.valueKey,h=void 0===g?"value":g,S=e.newOptionPromptText,O=void 0===S?"Create option":S,w=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,f),j=b((0,n.useState)(""),2),P=j[0],A=j[1],k=b((0,n.useState)(!1),2),T=k[0],C=k[1],N=b((0,n.useState)(!1),2),F=N[0],I=N[1],q=b((0,n.useState)(!1),2),x=q[0],D=q[1],K=b((0,n.useState)(1),2),_=K[0],$=K[1],B=b((0,n.useState)([]),2),R=B[0],M=B[1],L=(0,n.useRef)(),U=(0,n.useRef)(),z=(0,n.useRef)();return z.current=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(){var e;L.current&&(null===(e=L.current)||void 0===e||e.cancel(),L.current=void 0);var t=l.A.CancelToken;L.current=t.source()}();var r=e.q,n=null!=r?r:P;C(!0);var a=e.page||_;t({q:n,page:a,pageSize:o,config:{cancelToken:L.current.token}}).then((function(e){var t=e.results.map((function(e){return e.selectOption}));t=function(e,t){if(w.creatable&&!c()(t)){var r,n=function(e){var r;return(null==e||null===(r=e[d])||void 0===r?void 0:r.toLowerCase())===t.toLowerCase()},a=null===(r=w.value)||void 0===r?void 0:r.some(n),l=e.some(n);return a||l?e:[y(y(y({},d,"".concat(O,' "').concat(t,'"')),h,t),"result",y(y({},h,t),d,t))].concat(e)}return e}(t=1===a?t:[].concat(v(R),v(t)),n),M(t),I(e.isNextPageAvailable),C(!1),L.current=void 0})).catch((function(){M([]),I(!1),C(!1),L.current=void 0}))},(0,n.useEffect)((function(){U.current=i()((function(e){e!==P&&(A(e),$(1),M([]),z.current({q:e,page:1}))}),s)}),[P]),(0,n.useEffect)((function(){x&&(A(""),$(1),M([]),z.current({q:"",page:1}))}),[x]),(0,n.useEffect)((function(){_>1&&z.current()}),[_]),a().createElement(E,p({},w,{isLoading:T,options:R,labelKey:d,valueKey:h,onOpen:function(){return D(!0)},onClose:function(){return D(!1)},filterOptions:function(e){return e.map((function(e){var t=/\"(.*?)\"/.exec(P);return t?t[1]:e}))},onInputChange:function(e){return t=e,L.current&&(null===(r=L.current)||void 0===r||r.cancel(),L.current=void 0),U.current.cancel(),void U.current(t);var t,r},onMenuScrollToBottom:function(){!T&&F&&$(_+1)}}))}},722075:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Pe});var n=r(273517),a=r.n(n),l=r(605556),o=r.n(l),i=r(548975),u=r(466732),c=r(8117),s=r(962193),m=r.n(s),d=r(192202),f=r(8571),p=r(899703);var v=r(487581),y=(0,n.lazy)((function(){return Promise.all([r.e(72208),r.e(53651)]).then(r.bind(r,653651))}));const b={SelectWidget:function(e){return a().createElement(p.A,e)},TextareaWidget:function(e){var t=e.id,r=e.options,l=void 0===r?{}:r,o=e.value,i=e.onChange;return null!=l&&l["geonode-ui:richTextEditor"]?a().createElement(n.Suspense,{fallback:null},a().createElement(y,{id:t,value:o,onChange:i})):a().createElement(v.A,e)}};var g=r(320089);var h=r(770491),E=["key"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(null,arguments)}var O=r(904113),w=r(553493),j=r(551783),P=["onChange","value","debounceTime"];function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(null,arguments)}var k=(0,j.A)("placeholder")(c.MJ);const T=(0,w.A)("onChange","value")((function(e){var t=e.onChange,r=e.value,n=(e.debounceTime,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,P));return a().createElement(k,A({},n,{value:r,onChange:function(e){return t(e.target.value)}}))}));function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=function(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,i=[],u=!0,c=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return D(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e){var t=document.querySelector("[for=".concat(e,"]"))||document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})};function _(e){var t=e.idSchema,r=e.title,l=e.group,o=e.expanded,i=q((0,n.useState)(!1),2),u=i[0],s=i[1],m=l.some((function(e){return e.error})),d=void 0===o?u:o;return a().createElement("li",null,a().createElement(g.A,{className:m?"gn-metadata-error":"",size:"xs",onClick:function(){return s((function(e){return!e}))}},a().createElement(c.e6,{glyph:d?"bottom":"next"})," ",r,m?a().createElement(a().Fragment,null," ",a().createElement(O.A,{name:"exclamation"})):null),d?a().createElement("ul",null,l.map((function(e){return a().createElement("li",{key:e.name},a().createElement(g.A,{size:"xs",className:e.error?"gn-metadata-error":"",onClick:function(){var r;return K(null===(r=t[e.name])||void 0===r?void 0:r.$id)}},e.title,e.error?a().createElement(a().Fragment,null," ",a().createElement(O.A,{name:"exclamation"})):null))}))):null)}function $(e){var t=e.idSchema,r=e.schema,l=e.uiSchema,o=e.properties,i=e.errorSchema,u=e.formContext.title,c=q((0,n.useState)(""),2),s=c[0],m=c[1],d=o.reduce((function(e,t){var n,a,o,u=(null==r||null===(n=r.properties)||void 0===n||null===(a=n[t.name])||void 0===a?void 0:a.title)||t.name,c=(null==l?void 0:l[null==t?void 0:t.name])||{},m=(null==c?void 0:c["ui:options"])||{};if("hidden"===((null==c?void 0:c["ui:widget"])||m.widget)||!u.toLowerCase().includes((s||"").toLowerCase()))return e;var d,f=(null==m?void 0:m["geonode-ui:group"])||"General",p=e[f]||[];return F(F({},e),{},I({},f,[].concat(function(e){if(Array.isArray(e))return D(e)}(d=p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||x(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[F(F({},t),{},{uiSchema:c,schema:null==r||null===(o=r.properties)||void 0===o?void 0:o[t.name],error:i[t.name],title:u})])))}),{}),p="gn-metadata-title",v=!Object.keys(d).some((function(e){return d[e].length>0}));return a().createElement("div",{className:"gn-metadata-layout"},a().createElement("ul",{className:"gn-metadata-list"},a().createElement(T,{placeholder:"gnviewer.filterMetadata",value:s,onChange:function(e){return m(e)}}),u?a().createElement("li",null,a().createElement(g.A,{size:"xs",onClick:function(){return K(p)}},a().createElement(f.A,{msgId:"gnviewer.metadataFor"})," ",u)):null,Object.keys(d).filter((function(e){return d[e].length>0})).map((function(e){var r=d[e];return a().createElement(_,{key:e,idSchema:t,title:e,group:r,expanded:!!s||void 0})}))),a().createElement("div",{className:"gn-metadata-groups"},u?a().createElement("div",{id:p,className:"gn-metadata-title"},a().createElement(f.A,{msgId:"gnviewer.metadataFor"})," ",u):null,v?a().createElement("div",{className:"field"},a().createElement(f.A,{msgId:"gnviewer.noMetadataFound"})):null,Object.keys(d).filter((function(e){return d[e].length>0})).map((function(e,t){var r=d[e];return a().createElement("div",{className:"gn-metadata-group",key:t},a().createElement("div",{className:"gn-metadata-group-title"},e),r.map((function(e,r){return a().createElement(a().Fragment,{key:"".concat(t,"_").concat(r)},e.content)})))}))))}var B=r(164045),R=r(36963);const M=(0,B.A)((function(e){return a().createElement("span",e,a().createElement(R.A,{name:"info-circle"}))})),L={ArrayFieldItemTemplate:function(e){var t=e.children,r=e.className,n=e.disabled,l=e.hasToolbar,o=e.hasMoveDown,i=e.hasMoveUp,u=e.hasRemove,c=e.hasCopy,s=e.index,m=e.onCopyIndexClick,d=e.onDropIndexClick,f=e.onReorderClick,p=e.readonly,v=e.registry,y=e.uiSchema,b=v.templates.ButtonTemplates,g=b.CopyButton,h=b.MoveDownButton,E=b.MoveUpButton,S=b.RemoveButton;return a().createElement("div",{className:r},t,l&&a().createElement(a().Fragment,null,(i||o)&&a().createElement(E,{disabled:n||p||!i,onClick:f(s,s-1),uiSchema:y,registry:v}),(i||o)&&a().createElement(h,{disabled:n||p||!o,onClick:f(s,s+1),uiSchema:y,registry:v}),c&&a().createElement(g,{disabled:n||p,onClick:m(s),uiSchema:y,registry:v}),u&&a().createElement(S,{disabled:n||p,onClick:d(s),uiSchema:y,registry:v})))},ArrayFieldTemplate:function(e){var t=e.canAdd,r=e.disabled,n=e.idSchema,l=e.uiSchema,o=e.items,i=e.onAddClick,u=e.readonly,c=e.registry,s=e.required,m=e.schema,d=e.title,f=(0,h.$R)(l),p=(0,h.$F)("ArrayFieldDescriptionTemplate",c,f),v=(0,h.$F)("ArrayFieldItemTemplate",c,f),y=(0,h.$F)("ArrayFieldTitleTemplate",c,f),b=c.templates.ButtonTemplates.AddButton;return a().createElement("div",{id:n.$id},a().createElement("div",{className:"field-array-header"},a().createElement(y,{idSchema:n,title:f.title||d,required:s,schema:m,uiSchema:l,registry:c,description:a().createElement(p,{idSchema:n,description:f.description||m.description,schema:m,uiSchema:l,registry:c})}),t&&a().createElement(b,{className:"array-item-add",onClick:i,disabled:r||u,uiSchema:l,registry:c})),a().createElement("div",{className:"array-item-list"},o&&o.map((function(e){var t=e.key,r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,E);return a().createElement(v,S({key:t},r))}))))},ArrayFieldTitleTemplate:function(e){var t=e.idSchema,r=e.title,n=e.schema,l=e.uiSchema,o=e.required,i=e.registry,u=e.description,c=(0,h.$R)(l,i.globalUiOptions),s=c.label;if(!r||void 0!==s&&!s)return null;var m=(0,h.$F)("TitleFieldTemplate",i,c);return a().createElement(m,{id:(0,h.EH)(t),title:r,required:o,schema:n,uiSchema:l,registry:i,description:u})},ObjectFieldTemplate:function(e){var t;if("root"===(null==e||null===(t=e.idSchema)||void 0===t?void 0:t.$id))return a().createElement($,e);var r=e.description,n=e.disabled,l=e.formData,o=e.idSchema,i=e.onAddClick,u=e.properties,c=e.readonly,s=e.registry,m=e.required,d=e.schema,f=e.title,p=e.uiSchema,v=(0,h.$R)(p),y=(0,h.$F)("TitleFieldTemplate",s,v),b=(0,h.$F)("DescriptionFieldTemplate",s,v),g=s.templates.ButtonTemplates.AddButton;return a().createElement("div",{id:o.$id},f&&a().createElement(y,{id:(0,h.EH)(o),title:f,required:m,schema:d,uiSchema:p,registry:s,description:a().createElement(b,{id:(0,h.IR)(o),description:r,schema:d,uiSchema:p,registry:s})}),null!=u&&u.length?a().createElement("div",{className:"field-object-properties"},u.map((function(e){return e.content}))):null,(0,h.Xl)(d,p,l)&&a().createElement(g,{onClick:i(d),disabled:n||c,uiSchema:p,registry:s}))},TitleFieldTemplate:function(e){var t=e.id,r=e.required,n=e.title,l=e.description;return a().createElement("div",{id:t},a().createElement("label",null,n,r&&a().createElement("span",{className:"required"}," ","*"),l?a().createElement(a().Fragment,null," ",l):null))},DescriptionFieldTemplate:function(e){var t=e.description,r=e.id;return m()(t)?null:a().createElement(M,{id:r,tooltip:t,tooltipPosition:"right"})},ErrorListTemplate:function(){return null},FieldTemplate:function(e){var t=e.id,r=e.label,n=e.children,l=e.errors,o=e.help,i=e.description,u=e.hidden,c=e.required,s=e.displayLabel,m=e.registry,d=e.uiSchema,f=(0,h.$R)(d),p=(0,h.$F)("WrapIfAdditionalTemplate",m,f);return u?a().createElement("div",{className:"hidden"},n):a().createElement(p,e,s&&a().createElement("label",{className:"control-label",htmlFor:t},r,c&&a().createElement("span",{className:"required"}," ","*"),i?a().createElement(a().Fragment,null," ",i):null),n,l,o)},ButtonTemplates:{AddButton:function(e){var t=e.onClick,r=e.disabled;return a().createElement(g.A,{disabled:r,className:"square-button-md",onClick:t,variant:"primary"},a().createElement(c.e6,{glyph:"plus"}))},MoveUpButton:function(e){var t=e.onClick,r=e.disabled;return a().createElement(g.A,{disabled:r,className:"square-button-md",onClick:t,style:r?{visibility:"hidden"}:{}},a().createElement(c.e6,{glyph:"arrow-up"}))},MoveDownButton:function(e){var t=e.onClick,r=e.disabled;return a().createElement(g.A,{disabled:r,className:"square-button-md",onClick:t,style:r?{visibility:"hidden"}:{}},a().createElement(c.e6,{glyph:"arrow-down"}))},RemoveButton:function(e){var t=e.onClick,r=e.disabled;return a().createElement(g.A,{disabled:r,className:"square-button-md",onClick:t},a().createElement(c.e6,{glyph:"trash"}))}}};var U=r(995531),z=r(499084),W=r.n(z),H=r(185015),V=r.n(H),G=r(956449),J=r.n(G),X=r(338877);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}var Y=["className","description","error","helpTitleIcon","id","labelKey","name","title","value","valueKey","showLabel","required"];function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z.apply(null,arguments)}function ee(e,t,r){return(t=function(e){var t=function(e){if("object"!=Q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var te=function(e){var t=e.className,r=e.description,n=e.error,l=e.helpTitleIcon,o=e.id,i=e.labelKey,u=void 0===i?"label":i,c=e.name,s=e.title,d=e.value,f=e.valueKey,p=void 0===f?"value":f,v=e.showLabel,y=void 0===v||v,b=e.required,g=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Y);return a().createElement("div",{className:"form-group".concat(t?" "+t:"").concat(n?" has-error":"")},y?a().createElement("label",{className:"control-label",htmlFor:o},s||c,b?a().createElement("span",{className:"required"}," ","*"):null,l&&!m()(r)?a().createElement(a().Fragment,null," ",a().createElement(M,{tooltip:r,tooltipPosition:"right"})):null):null,a().createElement(X.A,Z({},g,{id:o,value:d&&J()(d)?d.map((function(e){return ee(ee({result:e},p,V()(e)?e:e[p]),u,V()(e)?e:e[u])})):d,valueKey:p,labelKey:u})),n)};te.propTypes={className:o().string,description:o().string,error:o().element,helpTitleIcon:o().bool,id:o().string.isRequired,labelKey:o().string,name:o().string,title:o().string,value:o().any.isRequired,valueKey:o().string,showLabel:o().bool};const re=te;var ne=r(283306);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}var le=["name"],oe=["result"],ie=["q","config"];function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ue.apply(null,arguments)}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return(t=function(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fe(e,t){return Object.keys(t||{}).some((function(r){var n;return r===e||!(null===(n=t[r])||void 0===n||!n.properties)&&fe(e,t[r].properties)}))}function pe(e){var t,r,n=e.name,a=de(e,le),l=(n||"").split("-"),o=parseFloat(l[l.length-1]);return!isNaN(o)&&!fe(n,null==a||null===(t=a.registry)||void 0===t||null===(r=t.rootSchema)||void 0===r?void 0:r.properties)}const ve={SchemaField:function(e){var t,r,n,l,o=e.onChange,i=e.schema,u=e.formData,c=e.idSchema,s=e.name,d=e.errorSchema,f=e.uiSchema,p=e.required,v=null==f?void 0:f["ui:options"],y=null==v?void 0:v["geonode-ui:autocomplete"],b="string"===(null==i||null===(t=i.items)||void 0===t?void 0:t.type),g="object"===(null==i||null===(r=i.items)||void 0===r?void 0:r.type),h="array"===(null==i?void 0:i.type)&&(b||g&&!m()(null==i||null===(n=i.items)||void 0===n?void 0:n.properties)),E="object"===(null==i?void 0:i.type)&&!m()(null==i?void 0:i.properties);if(y&&(h||E)){var S,O=v.classNames,w=v.style,j=v.description,P=v.disabled,A=v.help,k=v.hideError,T=v.label,C=v.placeholder,N=v.title,F=(k?[]:W()(d)).reduce((function(e,t){return null!=t&&t.__errors?e.push({messages:t.__errors}):Object.keys(t||{}).forEach((function(r){var n;null!==(n=t[r])&&void 0!==n&&n.__errors&&e.push({key:r,messages:t[r].__errors})})),e}),[]),I=V()(y)?{url:y}:y,q=null==I?void 0:I.url,x=(null==I?void 0:I.queryKey)||"q",D=(null==I?void 0:I.resultsKey)||"results",K=(null==I?void 0:I.valueKey)||"id",_=(null==I?void 0:I.labelKey)||"label",$=!(null==I||!I.creatable),B=null!=C?C:" ",R={className:"field".concat(O?" "+O:""),clearable:!p,creatable:$,id:c.$id,labelKey:_,multi:h,name:s,placeholder:B,showLabel:null==T||T,title:null!=N?N:i.title,value:u,valueKey:K,helpTitleIcon:!0,description:null!==(S=null!=A?A:j)&&void 0!==S?S:i.description,disabled:P||(null==e?void 0:e.readonly),style:w,required:p,onChange:function(e){var t,r=null!==(t=null==e?void 0:e.result)&&void 0!==t?t:void 0;return o(h?e.map((function(e){var t,r=e.result,n=de(e,oe);return void 0===r?n:V()(r)?r:b?r[K]:Object.fromEntries(Object.keys(null===(t=i.items)||void 0===t?void 0:t.properties).map((function(e){return[e,r[e]]})))})):r)},loadOptions:function(e){var t=e.q,r=e.config,n=de(e,ie);return U.A.get(q,se(se({},r),{},{params:se(se(se({},n),t&&me({},x,t)),{},{page:n.page})})).then((function(e){var t,r=e.data;return{isNextPageAvailable:!(null===(t=r.pagination)||void 0===t||!t.more),results:null==r?void 0:r[D].map((function(e){return{selectOption:me(me({result:e},K,V()(e)?e:e[K]),_,V()(e)?e:e[_])}}))}}))},error:m()(F)?null:a().createElement(a().Fragment,null,F.map((function(e,t){return a().createElement("ul",{key:t,className:"text-danger"},W()(e.messages).map((function(t,r){return a().createElement("li",{key:r},e.key?"".concat(e.key,": "):"",t)})))})))};return a().createElement(re,R)}var M=pe(e);return a().createElement(ne.A,ue({},e,{uiSchema:M?se(se({},e.uiSchema),{},{"ui:label":!1,"ui:options":se(se({},null===(l=e.uiSchema)||void 0===l?void 0:l["ui:options"]),{},{label:!1})}):f}))}};var ye=r(277327),be=r(866875),ge=r(628017);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}var Ee=["__errors"];function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e,t,r){return(t=function(e){var t=function(e){if("object"!=he(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){var r=e.pk,l=e.loading,o=e.error,s=e.extraErrors,p=e.metadata,v=e.schema,y=e.uiSchema,g=e.updateError,h=e.setLoading,E=e.setError,S=e.setUISchema,O=e.setSchema,w=e.setMetadata,j=e.setInitialMetadata,P=e.setUpdateError,A=e.setResource,k=e.updating,T=e.setExtraErrors,C=e.readOnly,N=t.messages,F=(0,n.useRef)(!1),I=(0,n.useRef)(),q=null!=s?s:{},x=q.__errors,D=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(q,Ee);return I.current=function(e){null!=e&&e.validateForm&&!F.current&&(F.current=!0,m()(D)&&e.validateForm())},(0,n.useEffect)((function(){r&&(h(!0),E(!1),(0,d._T)(r).then((function(e){S(e.uiSchema),O(e.schema),w(e.metadata),j(e.metadata),A(e.resource),T(e.extraErrors)})).catch((function(){E(!0)})).finally((function(){h(!1)})))}),[r]),l?a().createElement(be.A,null):o?a().createElement(ye.A,{msgId:"gnviewer.metadataNotFound"}):p||v?a().createElement("div",{className:"gn-metadata"},a().createElement("div",{className:"gn-metadata-header"},g&&a().createElement(c.Fc,{bsStyle:"danger",style:{margin:"0.25rem 0"}},a().createElement(f.A,{msgId:"gnviewer.metadataUpdateError"}),!m()(x)&&a().createElement("ul",null,x.map((function(e,t){return a().createElement("li",{key:t},e)}))))),a().createElement("div",{className:"gn-metadata-container"},a().createElement(u.Ay,{liveValidate:!0,readonly:C,ref:I.current,formContext:{title:null==p?void 0:p.title},schema:v,widgets:b,uiSchema:y,formData:p,validator:i.Ay,templates:L,fields:ve,extraErrors:D,transformErrors:function(e){return e.filter((function(e){return"must be equal to constant"!==e.message})).map((function(e){var t=(e.message||"").startsWith("must have required property")?"must have required property":e.message,r="metadata.error.".concat(t),n=(0,ge.kA)(N,r);return Oe(Oe({},e),{},{message:r===n?t:n})}))},experimental_defaultFormStateBehavior:{arrayMinItems:{populate:"never",mergeExtraDefaults:!1}},onChange:function(e){var t;t=e.formData,P(!1),w(t)}},a().createElement(a().Fragment,null))),k?a().createElement(be.A,{style:{opacity:.5}}):null):null}je.contextTypes={messages:o().object};const Pe=je}}]);