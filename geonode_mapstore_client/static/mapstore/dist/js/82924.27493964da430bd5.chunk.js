"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[82924],{717140:(t,e,r)=>{r.d(e,{Ij:()=>m,Jb:()=>o,Kf:()=>f,Lu:()=>i,Ly:()=>y,Mm:()=>b,Mr:()=>h,Ne:()=>s,Nu:()=>E,Q4:()=>u,S$:()=>p,V9:()=>n,VX:()=>g,ZM:()=>l,d:()=>w,et:()=>d,jx:()=>S,tq:()=>O,uw:()=>j,vK:()=>v,vw:()=>P});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",u="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",a="DRAW:FEATURES_SELECTED",c="DRAW:DRAWING_FEATURES",f="DRAW:SET_SNAPPING_LAYER",s="DRAW:SNAPPING_IS_LOADING",p="DRAW:TOGGLE_SNAPPING",y="DRAW:SET_SNAPPING_CONFIG";function v(t,e,r,n,o){return{type:u,features:t,owner:e,enableEdit:r,textChanged:n,circleChanged:o}}function d(){return{type:a,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function b(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function m(){return{type:l}}function g(t,e,r,o,i,u){return{type:n,status:t,method:e,owner:r,features:o,options:i,style:u}}function h(t,e){return{type:o,geometry:t,owner:e}}function w(t){return{type:i,currentStyle:t}}var O=function(t){return g("clean","",t,[],{})};function S(){return{type:p}}function j(t){return{type:f,snappingLayer:t}}function P(){return{type:s}}function E(t,e,r){return{type:y,value:t,prop:e,pluginCfg:r}}},595535:(t,e,r)=>{r.d(e,{A:()=>b});var n=r(605556),o=r.n(n),i=r(273517),u=r.n(i);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function p(t,e,r){return(e=y(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var v=r(274156).FormattedHTMLMessage,d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=f(e),function(t,e){if(e&&("object"==l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,r||[],f(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){return this.context.intl?u().createElement(v,{id:this.props.msgId,values:this.props.msgParams}):u().createElement("span",null,this.props.msgId||"")}}])&&a(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);p(d,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),p(d,"contextTypes",{intl:o().object});const b=d},232877:(t,e,r)=>{r.d(e,{A:()=>w,Q:()=>h});var n=r(273517),o=r.n(n),i=r(310340),u=r(978659),l=r.n(u),a=r(779893),c=r(501882),f=r.n(c);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var p=["open","onOpen"];function y(){return y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y.apply(null,arguments)}function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,l=[],a=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{if(!a&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function h(t){var e=t.containerNode,r=void 0===e?function(){return document.querySelector("."+((0,a.Uh)("themePrefix")||"ms2")+" > div")||document.body}:e,u=t.placement,c=t.content,s=t.children,p=t.open,y=t.onOpen,v=void 0===y?function(){}:y,b=t.onClick,g=void 0===b?function(){}:b,h=t.disabled,w=t.triggerScrollableElement,O=10,S=f()(r)?r():r,j=(0,n.useRef)({picker:{opacity:0},arrow:{opacity:0},overlay:{}}),P=m((0,n.useState)(j.current),2),E=P[0],R=P[1],A=(0,n.useRef)(),_=(0,n.useRef)(),D=(0,n.useRef)(),k=(0,n.useCallback)((function(){var t,e,r,n,o,i;if(!p)return j.current;var a={picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};if("center"===u)return a;var c=null==A||null===(t=A.current)||void 0===t||null===(e=t.getBoundingClientRect)||void 0===e?void 0:e.call(t),f=null==_||null===(r=_.current)||void 0===r||null===(n=r.getBoundingClientRect)||void 0===n?void 0:n.call(r),s=null==D||null===(o=D.current)||void 0===o||null===(i=o.getBoundingClientRect)||void 0===i?void 0:i.call(o);if(c&&f&&s){var y,v,d,b,m=s.width,g=s.height,h=f.top,w=f.left,S=f.width,P=f.height,E=c.top,R=c.left,k=c.width,L=c.height,C=m+20<S,N=g+20<P,T={top:{filter:function(){return C&&E-h>g+O},styles:function(){var t=R+k/2-m/2-w;return{picker:{position:"absolute",top:E-g-O-h,left:l()(t,w+O,w+S-m-O)},overlay:{},arrow:{top:E+2,left:R+k/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return N&&w+S-(R+k)>m+O},styles:function(){var t=E-g/2-h+L/2,e=R+k+O-w;return{picker:{position:"absolute",top:l()(t,h+O,h+P-g-O),left:e},overlay:{},arrow:{top:E+L/2,left:R+k-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return C&&h+P-(E+L)>g+O},styles:function(){var t=R+k/2-m/2-w;return{picker:{position:"absolute",top:E+L+O-h,left:l()(t,w+O,w+S-m-O)},overlay:{},arrow:{top:E+L-2,left:R+k/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return N&&R-w>m+O},styles:function(){var t=E-g/2-h+L/2,e=R-m-O-w;return{picker:{position:"absolute",top:l()(t,h+O,h+P-g-O),left:e},overlay:{},arrow:{top:E+L/2,left:R+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null!=T&&null!==(y=T[u])&&void 0!==y&&null!==(v=y.filter)&&void 0!==v&&v.call(y))return null==T||null===(d=T[u])||void 0===d||null===(b=d.styles)||void 0===b?void 0:b.call(d);if("top"!==u&&T.top.filter())return T.top.styles();if("right"!==u&&T.right.filter())return T.right.styles();if("bottom"!==u&&T.bottom.filter())return T.bottom.styles();if("left"!==u&&T.left.filter())return T.left.styles()}return a}),[u,p]);(0,n.useEffect)((function(){R(k());var t=function(){return R(k())};return window.addEventListener("resize",t),w&&p&&w.addEventListener("scroll",t),function(){window.removeEventListener("resize",t),w&&w.removeEventListener("scroll",t)}}),[k]);var L=(0,n.useRef)();return L.current={open:p},(0,n.useEffect)((function(){function t(t){var e=D.current,r=A.current,n=t.target&&(e&&e.contains(t.target)||r&&r.contains(t.target));if(L.current.open&&!n){var o,i,u=t.clientX,l=t.clientY,a=(null==D||null===(o=D.current)||void 0===o||null===(i=o.getBoundingClientRect)||void 0===i?void 0:i.call(o))||{},c=a.left,f=a.top,s=a.width,p=a.height;void 0!==u&&void 0!==l&&!(u>=c&&u<=c+s&&l>=f&&l<=f+p)&&v(!1)}}return window.addEventListener("click",t,!0),window.addEventListener("wheel",t,!0),window.addEventListener("scroll",t,!0),function(){window.removeEventListener("click",t,!0),window.removeEventListener("wheel",t,!0),window.removeEventListener("scroll",t,!0)}}),[]),o().createElement(o().Fragment,null,o().createElement("div",{className:"ms-popover",ref:A},(0,n.cloneElement)(s,{onClick:function(t){h||(t.stopPropagation(),v(!p),g())}})),S&&p?(0,i.createPortal)(o().createElement("div",{className:"ms-popover-overlay",ref:_,style:d({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none"},null==E?void 0:E.overlay)},o().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),o().createElement("div",{ref:D,style:d({pointerEvents:"auto"},null==E?void 0:E.picker)},c),o().createElement("div",{className:"ms-popover-arrow",style:d({position:"absolute",borderTop:"".concat(12,"px solid transparent"),borderBottom:"".concat(12,"px solid transparent"),borderRight:"".concat(12,"px solid #ffffff"),filter:"drop-shadow(-4px 2px 4px rgba(0, 0, 0, 0.2))"},null==E?void 0:E.arrow)})),S):null)}const w=function(t){var e=t.open,r=t.onOpen,i=void 0===r?function(){}:r,u=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,p),l=m((0,n.useState)(e),2),a=l[0],c=l[1];return o().createElement(h,y({},u,{open:a,onOpen:function(t){c(t),i(t)}}))}},978548:(t,e,r)=>{r.d(e,{A:()=>p});var n=r(717140),o=r(45228),i=r.n(o);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return(e=function(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f={drawStatus:null,drawOwner:null,drawMethod:null,options:{},features:[],tempFeatures:[],snapping:!1,snappingIsLoading:!1,snappingLayer:!1},s={edge:!0,vertex:!0,pixelTolerance:10,strategy:"bbox"};const p=function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case n.V9:return i()({},r,{drawStatus:o.status,drawOwner:o.owner,drawMethod:o.method,options:o.options,features:o.features,style:o.style});case n.Lu:return i()({},r,{currentStyle:o.currentStyle});case n.Q4:return i()({},r,{tempFeatures:o.features});case n.ZM:return i()({},r,{tempFeatures:[]});case n.S$:return a(a({},r),{},{snapping:!r.snapping});case n.Kf:return a(a({},r),{},{snappingLayer:o.snappingLayer,snappingIsLoading:!1});case n.Ne:return a(a({},r),{},{snappingIsLoading:!r.snappingIsLoading});case n.Ly:return a(a({},r),{},{snapConfig:a(a(a({},a(a({},s),(null===(t=o.pluginCfg)||void 0===t?void 0:t.snapConfig)||{})),null!==(e=null==r?void 0:r.snapConfig)&&void 0!==e?e:{}),o.prop&&void 0!==o.value?c({},o.prop,o.value):{})});default:return r}}},97401:(t,e,r)=>{r.d(e,{MA:()=>j,SU:()=>O,iS:()=>b,lU:()=>h,o:()=>d,o7:()=>m,si:()=>S,tV:()=>w,u$:()=>v,wd:()=>g});var n=r(400912),o=r.n(n),i=r(150104),u=r.n(i),l=r(131127),a=r(6683),c=r(779893);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return(e=function(t){var e=function(t){if("object"!=f(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var v=function(t){return t.maplayout&&t.maplayout.layout||{}},d=function(t){return t.maplayout&&t.maplayout.boundingMapRect||{}},b=function(t){return t.maplayout&&t.maplayout.boundingSidebarRect||{}},m=u()((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=v(t),o=b(t);return n&&Object.keys(n).filter((function(t){return e[t]})).reduce((function(t,e){var i;return p(p({},t),{},y({},e,r&&null!==(i=o[e])&&void 0!==i?i:n[e]))}),{})||{}}),(function(t,e,r){return JSON.stringify(v(t))+JSON.stringify(b(t))+JSON.stringify(e)+(r?"_isDock":"")})),g=function(t){var e;return!(null===(e=v(t))||void 0===e||!e.rightPanel)},h=function(t){var e,r=c.Ay.getConfigProp("mapLayout")||a.OH;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=v(t);return!!o()(e.filter((function(t){return r[t.key]})).map((function(t){return"not"===t.type?r[t.key]!==t.value&&r[t.key]:r[t.key]===t.value})))}(t,[{key:"bottom",value:null!==(e=null==r?void 0:r.bottom.sm)&&void 0!==e?e:0,type:"not"}])},w=function(t){var e=(0,l.mg)(t),r=d(t);return r&&e&&e.size&&{left:(0,a.n_)(r.left,e.size.width),bottom:(0,a.n_)(r.bottom,e.size.height),right:(0,a.n_)(r.right,e.size.width),top:(0,a.n_)(r.top,e.size.height)}},O=function(t){var e,r;return null!==(e=null==t||null===(r=t.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==e?e:{left:[],right:[]}},S=function(t){return m(t,{height:!0,right:!0},!0)},j=function(t){return m(t,{right:!0},!0)}}}]);