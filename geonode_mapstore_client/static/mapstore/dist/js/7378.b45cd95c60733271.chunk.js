"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[7378],{457378(o,e,r){r.d(e,{Ac:()=>N,IP:()=>B,Oe:()=>D,Os:()=>_,Qi:()=>G,cp:()=>U,g7:()=>H,ge:()=>L,gi:()=>q,wm:()=>R,xX:()=>W});var t=r(501144),i=r(215327),n=r(267980),a=r(41476),l=r(317061),c=r(602317),s=r(75200),p=r(974904),d=r(584164),u=r(151949),f=r(105330),y=r(977363),m=r(543622),h=r(506964),A=r(348460),g=r(608191),v=r(551549),w=r(920757),b=r(842153),P=r(938487),O=r.n(P),F=r(715726),j=r(302982);function T(o){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},T(o)}function k(o){return function(o){if(Array.isArray(o))return I(o)}(o)||function(o){if("undefined"!=typeof Symbol&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}(o)||E(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(o,e){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,t)}return r}function S(o){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach(function(e){x(o,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(r,e))})}return o}function x(o,e,r){return(e=function(o){var e=function(o){if("object"!=T(o)||!o)return o;var e=o[Symbol.toPrimitive];if(void 0!==e){var r=e.call(o,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(o);return"symbol"==T(e)?e:e+""}(e))in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r,o}function M(o,e){return function(o){if(Array.isArray(o))return o}(o)||function(o,e){var r=null==o?null:"undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(null!=r){var t,i,n,a,l=[],c=!0,s=!1;try{if(n=(r=r.call(o)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(t=n.call(r)).done)&&(l.push(t.value),l.length!==e);c=!0);}catch(o){s=!0,i=o}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(o,e)||E(o,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(o,e){if(o){if("string"==typeof o)return I(o,e);var r={}.toString.call(o).slice(8,-1);return"Object"===r&&o.constructor&&(r=o.constructor.name),"Map"===r||"Set"===r?Array.from(o):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(o,e):void 0}}function I(o,e){(null==e||e>o.length)&&(e=o.length);for(var r=0,t=Array(e);r<e;r++)t[r]=o[r];return t}var D=function(o){var e=o.color,r=o.opacity,t=M(O()(e).gl(),4),i=t[0],n=t[1],l=t[2],c=t[3];return void 0!==r?new a.A(i,n,l,r):new a.A(i,n,l,c)},G=function(o){var e=o.coordinates,r=o.width,n=void 0===r?4:r,a=o.color,l=void 0===a?"#ff00ff":a,c=o.opacity,d=void 0===c?1:c,u=o.depthFailColor,f=o.depthFailOpacity,m=o.dashLength,h=o.clampToGround,A=o.allowPicking,v=void 0!==A&&A,b=o.geodesic,P=o.id,O=o.modelMatrix;return new t[h?"GroundPolylinePrimitive":"Primitive"](S(S({geometryInstances:new s.A({id:P,geometry:h?new p.A({positions:k(e),width:n}):new y.A({positions:k(e),width:n,arcType:b?i.A.GEODESIC:i.A.NONE}),modelMatrix:O}),appearance:new w.A({material:m?g.A.fromType("PolylineDash",{color:D({color:l,opacity:d}),dashLength:m}):g.A.fromType("Color",{color:D({color:l,opacity:d})})})},u&&{depthFailAppearance:new w.A({material:m?g.A.fromType("PolylineDash",{color:D({color:u,opacity:f}),dashLength:m}):g.A.fromType("Color",{color:D({color:u,opacity:f})})})}),{},{allowPicking:v,asynchronous:!1}))},L=function(o){var e=o.id,r=o.coordinates,t=o.color,i=void 0===t?"#ff00ffAA":t,n=o.opacity,a=void 0===n?1:n,l=o.depthFailColor,c=o.depthFailOpacity,p=o.allowPicking,d=void 0!==p&&p,y=o.geodesic;return new b.A(S(S({geometryInstances:new s.A({id:e,geometry:new u.A({polygonHierarchy:new f.A(k(r)),perPositionHeight:!y})}),appearance:new v.A({material:g.A.fromType("Color",{color:D({color:i,opacity:a})}),faceForward:!0})},l&&{depthFailAppearance:new v.A({material:g.A.fromType("Color",{color:D({color:l,opacity:c})}),faceForward:!0})}),{},{allowPicking:d,asynchronous:!1}))},R=function(o){var e=o.width,r=void 0===e?4:e,t=o.coordinates,i=o.color,a=void 0===i?"#ff00ff":i,l=o.opacity,c=void 0===l?1:l,s=o.depthFailColor,p=o.depthFailOpacity,d=o.dashLength,u=o.clampToGround,f=o.allowPicking,y=void 0!==f&&f,m=o.id,h=o.radius,A=o.semiMajorAxis,g=o.semiMinorAxis,v=o.geodesic,w=F.A.computeEllipsePositions({granularity:.02,semiMajorAxis:h||A,semiMinorAxis:h||g,rotation:0,center:t},!1,!0).outerPositions,b=n.A.unpackArray(w);return G({coordinates:[].concat(k(b),[b[0]]),width:r,color:a,opacity:c,depthFailColor:s,depthFailOpacity:p,dashLength:d,clampToGround:u,allowPicking:y,id:m,geodesic:v})},N=function(o){var e=o.id,r=o.coordinates,i=o.color,n=void 0===i?"#ff00ffAA":i,a=o.opacity,l=void 0===a?1:a,p=o.depthFailColor,d=o.depthFailOpacity,u=o.allowPicking,f=void 0!==u&&u,y=o.clampToGround,m=o.radius,h=o.semiMajorAxis,A=o.semiMinorAxis;return new t[y?"GroundPrimitive":"Primitive"](S(S({geometryInstances:new s.A({id:e,geometry:new c.A({center:r,semiMajorAxis:m||h,semiMinorAxis:m||A})}),appearance:new v.A({material:g.A.fromType("Color",{color:D({color:n,opacity:l})}),faceForward:!0})},p&&{depthFailAppearance:new v.A({material:g.A.fromType("Color",{color:D({color:p,opacity:d})}),faceForward:!0})}),{},{allowPicking:f,asynchronous:!1}))},_=function(o){var e=o.id,r=o.coordinates,t=o.color,i=void 0===t?"#ff00ffAA":t,a=o.opacity,c=void 0===a?1:a,p=o.depthFailColor,u=o.depthFailOpacity,f=o.allowPicking,y=void 0!==f&&f,h=o.length,A=o.radius,w=o.topRadius,P=o.bottomRadius;return new b.A(S(S({geometryInstances:new s.A({id:e,geometry:new l.A({length:null!=h?h:.1,topRadius:null!=w?w:A,bottomRadius:null!=P?P:A}),modelMatrix:d.A.multiplyByTranslation(m.A.eastNorthUpToFixedFrame(r),new n.A(0,0,0),new d.A)}),appearance:new v.A({material:g.A.fromType("Color",{color:D({color:i,opacity:c})}),faceForward:!0})},p&&{depthFailAppearance:new v.A({material:g.A.fromType("Color",{color:D({color:p,opacity:u})}),faceForward:!0})}),{},{allowPicking:y,asynchronous:!1}))},U=function(o){var e=o.id,r=o.coordinates,t=o.color,i=void 0===t?"#ff00ffAA":t,a=o.opacity,l=void 0===a?1:a,c=o.depthFailColor,s=o.depthFailOpacity,p=o.allowPicking,u=void 0!==p&&p,f=o.length,y=o.radius,h=o.dashLength,A=o.clampToGround,g=o.geodesic,v=o.width,w=o.slices,b=void 0===w?128:w,P=o.topRadius,O=o.bottomRadius,F=d.A.multiplyByTranslation(m.A.eastNorthUpToFixedFrame(r),new n.A(0,0,0),new d.A),T=j.A.computePositions(null!=f?f:0,null!=P?P:y,null!=O?O:y,b,!1),C=n.A.unpackArray(T);return G({coordinates:f?C:[].concat(k(C.splice(0,Math.ceil(C.length/2))),[C[0]]),width:v,color:i,opacity:l,depthFailColor:c,depthFailOpacity:s,dashLength:h,clampToGround:A,allowPicking:u,id:e,geodesic:g,modelMatrix:F})},B=function(o,e){var r;null!=o&&null!==(r=o.scene)&&void 0!==r&&r.primitives&&e&&!e.isDestroyed()&&(e.removeAll(),o.scene.primitives.remove(e))},H=function(o){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.stroke,t=e.strokeWidth,i=void 0===t?1:t,n=e.fill,a=void 0===n?"#ffffff":n,l=r?o+2*i:o,c=document.createElement("canvas");c.setAttribute("width",l),c.setAttribute("height",l);var s=c.getContext("2d");return s.beginPath(),a&&(s.fillStyle=a),r&&(s.strokeStyle=r,s.lineWidth=i),s.arc(l/2,l/2,o/2,0,2*Math.PI),a&&s.fill(),r&&s.stroke(),c},W=function(o){var e,r=[],t=(null==o||null===(e=o.geometry)||void 0===e||null===(e=e.coordinates)||void 0===e?void 0:e[0])||[];if(t.length>0){var i=t.map(function(o){var e=M(o,3),r=e[0],t=e[1],i=e[2],a=void 0===i?0:i;return n.A.fromDegrees(r,t,a)}),a=new h.A({positions:i});r.push(a)}return r},q=function(o){var e=o.target,r=o.polygons,t=o.inverse,i=o.scene,n=o.additionalProperties,a=void 0===n?{}:n;e&&r&&Array.isArray(r)&&(r.length&&!e.clippingPolygons&&(e.clippingPolygons=new A.A({polygons:r,enabled:!0,inverse:!!t})),e.clippingPolygons&&(e.clippingPolygons.removeAll(),r.forEach(function(o){e.clippingPolygons.add(o)}),e.clippingPolygons.inverse=!!t,Object.entries(a).forEach(function(o){var r=M(o,2),t=r[0],i=r[1];e[t]=i}),i&&i.requestRender()))}}}]);