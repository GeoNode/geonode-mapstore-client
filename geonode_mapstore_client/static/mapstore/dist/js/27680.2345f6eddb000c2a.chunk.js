/*! For license information please see 27680.2345f6eddb000c2a.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[27680],{24827:(e,t)=>{var i,n,r,o,s,a,l,c,u,d,h,p,f;n={defaultNoDataValue:-34027999387901484e22,decode:function(e,t){var i=(t=t||{}).encodedMaskData||null===t.encodedMaskData,l=a(e,t.inputOffset||0,i),c=null!==t.noDataValue?t.noDataValue:n.defaultNoDataValue,u=r(l,t.pixelType||Float32Array,t.encodedMaskData,c,t.returnMask),d={width:l.width,height:l.height,pixelData:u.resultPixels,minValue:u.minValue,maxValue:l.pixels.maxValue,noDataValue:c};return u.resultMask&&(d.maskData=u.resultMask),t.returnEncodedMask&&l.mask&&(d.encodedMaskData=l.mask.bitset?l.mask.bitset:null),t.returnFileInfo&&(d.fileInfo=o(l),t.computeUsedBitDepths&&(d.fileInfo.bitDepths=s(l))),d}},r=function(e,t,i,n,r){var o,s,a,c=0,u=e.pixels.numBlocksX,d=e.pixels.numBlocksY,h=Math.floor(e.width/u),p=Math.floor(e.height/d),f=2*e.maxZError,m=Number.MAX_VALUE;i=i||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),r&&i&&(a=new Uint8Array(e.width*e.height));for(var g,A,_=new Float32Array(h*p),y=0;y<=d;y++){var v=y!==d?p:e.height%d;if(0!==v)for(var w=0;w<=u;w++){var b=w!==u?h:e.width%u;if(0!==b){var x,T,S,C,M=y*e.width*p+w*h,E=e.width-b,P=e.pixels.blocks[c];if(P.encoding<2?(0===P.encoding?x=P.rawData:(l(P.stuffedData,P.bitsPerPixel,P.numValidPixels,P.offset,f,_,e.pixels.maxValue),x=_),T=0):S=2===P.encoding?0:P.offset,i)for(A=0;A<v;A++){for(7&M&&(C=i[M>>3],C<<=7&M),g=0;g<b;g++)7&M||(C=i[M>>3]),128&C?(a&&(a[M]=1),m=m>(o=P.encoding<2?x[T++]:S)?o:m,s[M++]=o):(a&&(a[M]=0),s[M++]=n),C<<=1;M+=E}else if(P.encoding<2)for(A=0;A<v;A++){for(g=0;g<b;g++)m=m>(o=x[T++])?o:m,s[M++]=o;M+=E}else for(m=m>S?S:m,A=0;A<v;A++){for(g=0;g<b;g++)s[M++]=S;M+=E}if(1===P.encoding&&T!==P.numValidPixels)throw"Block and Mask do not match";c++}}}return{resultPixels:s,resultMask:a,minValue:m}},o=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},s=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,i={},n=0;n<t;n++){var r=e.pixels.blocks[n];0===r.encoding?i.float32=!0:1===r.encoding?i[r.bitsPerPixel]=!0:i[0]=!0}return Object.keys(i)},a=function(e,t,i){var n={},r=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,r),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var o=new DataView(e,t,24);if(n.fileVersion=o.getInt32(0,!0),n.imageType=o.getInt32(4,!0),n.height=o.getUint32(8,!0),n.width=o.getUint32(12,!0),n.maxZError=o.getFloat64(16,!0),t+=24,!i)if(o=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=o.getUint32(0,!0),n.mask.numBlocksX=o.getUint32(4,!0),n.mask.numBytes=o.getUint32(8,!0),n.mask.maxValue=o.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var s=new Uint8Array(Math.ceil(n.width*n.height/8)),a=(o=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),l=2,c=0;do{if(a>0)for(;a--;)s[c++]=o.getUint8(l++);else{var u=o.getUint8(l++);for(a=-a;a--;)s[c++]=u}a=o.getInt16(l,!0),l+=2}while(l<n.mask.numBytes);if(-32768!==a||c<s.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=s,t+=n.mask.numBytes}else 0===(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));o=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=o.getUint32(0,!0),n.pixels.numBlocksX=o.getUint32(4,!0),n.pixels.numBytes=o.getUint32(8,!0),n.pixels.maxValue=o.getFloat32(12,!0),t+=16;var d=n.pixels.numBlocksX,h=n.pixels.numBlocksY,p=d+(n.width%d>0?1:0),f=h+(n.height%h>0?1:0);n.pixels.blocks=new Array(p*f);for(var m=0,g=0;g<f;g++)for(var A=0;A<p;A++){var _=0,y=e.byteLength-t;o=new DataView(e,t,Math.min(10,y));var v={};n.pixels.blocks[m++]=v;var w=o.getUint8(0);if(_++,v.encoding=63&w,v.encoding>3)throw"Invalid block encoding ("+v.encoding+")";if(2!==v.encoding){if(0!==w&&2!==w){if(w>>=6,v.offsetType=w,2===w)v.offset=o.getInt8(1),_++;else if(1===w)v.offset=o.getInt16(1,!0),_+=2;else{if(0!==w)throw"Invalid block offset type";v.offset=o.getFloat32(1,!0),_+=4}if(1===v.encoding)if(w=o.getUint8(_),_++,v.bitsPerPixel=63&w,w>>=6,v.numValidPixelsType=w,2===w)v.numValidPixels=o.getUint8(_),_++;else if(1===w)v.numValidPixels=o.getUint16(_,!0),_+=2;else{if(0!==w)throw"Invalid valid pixel count type";v.numValidPixels=o.getUint32(_,!0),_+=4}}var b;if(t+=_,3!==v.encoding)if(0===v.encoding){var x=(n.pixels.numBytes-1)/4;if(x!==Math.floor(x))throw"uncompressed block has invalid length";b=new ArrayBuffer(4*x),new Uint8Array(b).set(new Uint8Array(e,t,4*x));var T=new Float32Array(b);v.rawData=T,t+=4*x}else if(1===v.encoding){var S=Math.ceil(v.numValidPixels*v.bitsPerPixel/8),C=Math.ceil(S/4);b=new ArrayBuffer(4*C),new Uint8Array(b).set(new Uint8Array(e,t,S)),v.stuffedData=new Uint32Array(b),t+=S}}else t++}return n.eofOffset=t,n},l=function(e,t,i,n,r,o,s){var a,l,c,u=(1<<t)-1,d=0,h=0,p=Math.ceil((s-n)/r),f=4*e.length-Math.ceil(t*i/8);for(e[e.length-1]<<=8*f,a=0;a<i;a++){if(0===h&&(c=e[d++],h=32),h>=t)l=c>>>h-t&u,h-=t;else{var m=t-h;l=(c&u)<<m&u,l+=(c=e[d++])>>>(h=32-m)}o[a]=l<p?n+l*r:s}return o},d=n,h=function(){"use strict";var e=function(e,t,i,n,r,o,s,a){var l,c,u,d,h,p=(1<<i)-1,f=0,m=0,g=4*e.length-Math.ceil(i*n/8);if(e[e.length-1]<<=8*g,r)for(l=0;l<n;l++)0===m&&(u=e[f++],m=32),m>=i?(c=u>>>m-i&p,m-=i):(c=(u&p)<<(d=i-m)&p,c+=(u=e[f++])>>>(m=32-d)),t[l]=r[c];else for(h=Math.ceil((a-o)/s),l=0;l<n;l++)0===m&&(u=e[f++],m=32),m>=i?(c=u>>>m-i&p,m-=i):(c=(u&p)<<(d=i-m)&p,c+=(u=e[f++])>>>(m=32-d)),t[l]=c<h?o+c*s:a},t=function(e,t,i,n,r,o,s,a){var l,c,u,d,h=(1<<i)-1,p=0,f=0,m=0;if(r)for(l=0;l<n;l++)0===f&&(u=e[p++],f=32,m=0),f>=i?(c=u>>>m&h,f-=i,m+=i):(c=u>>>m&h,f=32-(d=i-f),c|=((u=e[p++])&(1<<d)-1)<<i-d,m=d),t[l]=r[c];else{var g=Math.ceil((a-o)/s);for(l=0;l<n;l++)0===f&&(u=e[p++],f=32,m=0),f>=i?(c=u>>>m&h,f-=i,m+=i):(c=u>>>m&h,f=32-(d=i-f),c|=((u=e[p++])&(1<<d)-1)<<i-d,m=d),t[l]=c<g?o+c*s:a}return t},i={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,i=65535,n=e.length,r=Math.floor(n/2),o=0;r;){var s=r>=359?359:r;r-=s;do{t+=e[o++]<<8,i+=t+=e[o++]}while(--s);t=(65535&t)+(t>>>16),i=(65535&i)+(i>>>16)}return 1&n&&(i+=t+=e[o]<<8),((i=(65535&i)+(i>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var i=t.ptr,n=new Uint8Array(e,i,6),r={};if(r.fileIdentifierString=String.fromCharCode.apply(null,n),0!==r.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+r.fileIdentifierString;i+=6;var o,s=new DataView(e,i,8),a=s.getInt32(0,!0);if(r.fileVersion=a,i+=4,a>=3&&(r.checksum=s.getUint32(4,!0),i+=4),s=new DataView(e,i,12),r.height=s.getUint32(0,!0),r.width=s.getUint32(4,!0),i+=8,a>=4?(r.numDims=s.getUint32(8,!0),i+=4):r.numDims=1,s=new DataView(e,i,40),r.numValidPixel=s.getUint32(0,!0),r.microBlockSize=s.getInt32(4,!0),r.blobSize=s.getInt32(8,!0),r.imageType=s.getInt32(12,!0),r.maxZError=s.getFloat64(16,!0),r.zMin=s.getFloat64(24,!0),r.zMax=s.getFloat64(32,!0),i+=40,t.headerInfo=r,t.ptr=i,a>=3&&(o=a>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,i-o,r.blobSize-14))!==r.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var i=t.headerInfo,n=this.getDataTypeArray(i.imageType),r=i.numDims*this.getDataTypeSize(i.imageType),o=this.readSubArray(e,t.ptr,n,r),s=this.readSubArray(e,t.ptr+r,n,r);t.ptr+=2*r;var a,l=!0;for(a=0;a<i.numDims;a++)if(o[a]!==s[a]){l=!1;break}return i.minValues=o,i.maxValues=s,l},readSubArray:function(e,t,i,n){var r;if(i===Uint8Array)r=new Uint8Array(e,t,n);else{var o=new ArrayBuffer(n);new Uint8Array(o).set(new Uint8Array(e,t,n)),r=new i(o)}return r},readMask:function(e,t){var i,n,r=t.ptr,o=t.headerInfo,s=o.width*o.height,a=o.numValidPixel,l=new DataView(e,r,4),c={};if(c.numBytes=l.getUint32(0,!0),r+=4,(0===a||s===a)&&0!==c.numBytes)throw"invalid mask";if(0===a)i=new Uint8Array(Math.ceil(s/8)),c.bitset=i,n=new Uint8Array(s),t.pixels.resultMask=n,r+=c.numBytes;else if(c.numBytes>0){i=new Uint8Array(Math.ceil(s/8));var u=(l=new DataView(e,r,c.numBytes)).getInt16(0,!0),d=2,h=0,p=0;do{if(u>0)for(;u--;)i[h++]=l.getUint8(d++);else for(p=l.getUint8(d++),u=-u;u--;)i[h++]=p;u=l.getInt16(d,!0),d+=2}while(d<c.numBytes);if(-32768!==u||h<i.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(s);var f=0,m=0;for(m=0;m<s;m++)7&m?(f=i[m>>3],f<<=7&m):f=i[m>>3],128&f&&(n[m]=1);t.pixels.resultMask=n,c.bitset=i,r+=c.numBytes}return t.ptr=r,t.mask=c,!0},readDataOneSweep:function(e,t,n){var r,o=t.ptr,s=t.headerInfo,a=s.numDims,l=s.width*s.height,c=s.imageType,u=s.numValidPixel*i.getDataTypeSize(c)*a,d=t.pixels.resultMask;if(n===Uint8Array)r=new Uint8Array(e,o,u);else{var h=new ArrayBuffer(u);new Uint8Array(h).set(new Uint8Array(e,o,u)),r=new n(h)}if(r.length===l*a)t.pixels.resultPixels=r;else{t.pixels.resultPixels=new n(l*a);var p=0,f=0,m=0,g=0;if(a>1)for(m=0;m<a;m++)for(g=m*l,f=0;f<l;f++)d[f]&&(t.pixels.resultPixels[g+f]=r[p++]);else for(f=0;f<l;f++)d[f]&&(t.pixels.resultPixels[f]=r[p++])}return o+=u,t.ptr=o,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,o=new DataView(e,t.ptr,16);if(t.ptr+=16,o.getInt32(0,!0)<2)throw"unsupported Huffman version";var s=o.getInt32(4,!0),a=o.getInt32(8,!0),l=o.getInt32(12,!0);if(a>=l)return!1;var c=new Uint32Array(l-a);i.decodeBits(e,t,c);var u,d,h,p,f=[];for(u=a;u<l;u++)f[d=u-(u<s?0:s)]={first:c[u-a],second:null};var m=e.byteLength-t.ptr,g=Math.ceil(m/4),A=new ArrayBuffer(4*g);new Uint8Array(A).set(new Uint8Array(e,t.ptr,m));var _,y=new Uint32Array(A),v=0,w=0;for(_=y[0],u=a;u<l;u++)(p=f[d=u-(u<s?0:s)].first)>0&&(f[d].second=_<<v>>>32-p,32-v>=p?32===(v+=p)&&(v=0,_=y[++w]):(v+=p-32,_=y[++w],f[d].second|=_>>>32-v));var b,x=0,T=new n;for(u=0;u<f.length;u++)void 0!==f[u]&&(x=Math.max(x,f[u].first));b=x>=r?r:x,x>=30&&console.log("WARning, large NUM LUT BITS IS "+x);var S,C,M,E,P,k=[];for(u=a;u<l;u++)if((p=f[d=u-(u<s?0:s)].first)>0)if(S=[p,d],p<=b)for(C=f[d].second<<b-p,M=1<<b-p,h=0;h<M;h++)k[C|h]=S;else for(C=f[d].second,P=T,E=p-1;E>=0;E--)C>>>E&1?(P.right||(P.right=new n),P=P.right):(P.left||(P.left=new n),P=P.left),0!==E||P.val||(P.val=S[1]);return{decodeLut:k,numBitsLUTQick:b,numBitsLUT:x,tree:T,stuffedData:y,srcPtr:w,bitPos:v}},readHuffman:function(e,t,i){var n,r,o,s,a,l,c,u,d,h=t.headerInfo,p=h.numDims,f=t.headerInfo.height,m=t.headerInfo.width,g=m*f,A=this.readHuffmanTree(e,t),_=A.decodeLut,y=A.tree,v=A.stuffedData,w=A.srcPtr,b=A.bitPos,x=A.numBitsLUTQick,T=A.numBitsLUT,S=0===t.headerInfo.imageType?128:0,C=t.pixels.resultMask,M=0;b>0&&(w++,b=0);var E,P=v[w],k=1===t.encodeMode,O=new i(g*p),R=O;for(E=0;E<h.numDims;E++){if(p>1&&(R=new i(O.buffer,g*E,g),M=0),t.headerInfo.numValidPixel===m*f)for(u=0,l=0;l<f;l++)for(c=0;c<m;c++,u++){if(r=0,a=s=P<<b>>>32-x,32-b<x&&(a=s|=v[w+1]>>>64-b-x),_[a])r=_[a][1],b+=_[a][0];else for(a=s=P<<b>>>32-T,32-b<T&&(a=s|=v[w+1]>>>64-b-T),n=y,d=0;d<T;d++)if(!(n=s>>>T-d-1&1?n.right:n.left).left&&!n.right){r=n.val,b=b+d+1;break}b>=32&&(b-=32,P=v[++w]),o=r-S,k?(o+=c>0?M:l>0?R[u-m]:M,o&=255,R[u]=o,M=o):R[u]=o}else for(u=0,l=0;l<f;l++)for(c=0;c<m;c++,u++)if(C[u]){if(r=0,a=s=P<<b>>>32-x,32-b<x&&(a=s|=v[w+1]>>>64-b-x),_[a])r=_[a][1],b+=_[a][0];else for(a=s=P<<b>>>32-T,32-b<T&&(a=s|=v[w+1]>>>64-b-T),n=y,d=0;d<T;d++)if(!(n=s>>>T-d-1&1?n.right:n.left).left&&!n.right){r=n.val,b=b+d+1;break}b>=32&&(b-=32,P=v[++w]),o=r-S,k?(c>0&&C[u-1]?o+=M:l>0&&C[u-m]?o+=R[u-m]:o+=M,o&=255,R[u]=o,M=o):R[u]=o}t.ptr=t.ptr+4*(w+1)+(b>0?4:0)}t.pixels.resultPixels=O},decodeBits:function(i,n,r,o,s){var a=n.headerInfo,l=a.fileVersion,c=0,u=new DataView(i,n.ptr,5),d=u.getUint8(0);c++;var h=d>>6,p=0===h?4:3-h,f=(32&d)>0,m=31&d,g=0;if(1===p)g=u.getUint8(c),c++;else if(2===p)g=u.getUint16(c,!0),c+=2;else{if(4!==p)throw"Invalid valid pixel count type";g=u.getUint32(c,!0),c+=4}var A,_,y,v,w,b,x,T,S,C=2*a.maxZError,M=a.numDims>1?a.maxValues[s]:a.zMax;if(f){for(n.counter.lut++,T=u.getUint8(c),c++,v=Math.ceil((T-1)*m/8),w=Math.ceil(v/4),_=new ArrayBuffer(4*w),y=new Uint8Array(_),n.ptr+=c,y.set(new Uint8Array(i,n.ptr,v)),x=new Uint32Array(_),n.ptr+=v,S=0;T-1>>>S;)S++;v=Math.ceil(g*S/8),w=Math.ceil(v/4),_=new ArrayBuffer(4*w),(y=new Uint8Array(_)).set(new Uint8Array(i,n.ptr,v)),A=new Uint32Array(_),n.ptr+=v,b=l>=3?function(e,t,i,n,r,o){var s,a=(1<<t)-1,l=0,c=0,u=0,d=0,h=0,p=0,f=[],m=Math.ceil((o-n)/r);for(c=0;c<i;c++)0===d&&(s=e[l++],d=32,p=0),d>=t?(h=s>>>p&a,d-=t,p+=t):(h=s>>>p&a,d=32-(u=t-d),h|=((s=e[l++])&(1<<u)-1)<<t-u,p=u),f[c]=h<m?n+h*r:o;return f.unshift(n),f}(x,m,T-1,o,C,M):function(e,t,i,n,r,o){var s,a=(1<<t)-1,l=0,c=0,u=0,d=0,h=0,p=[],f=4*e.length-Math.ceil(t*i/8);e[e.length-1]<<=8*f;var m=Math.ceil((o-n)/r);for(c=0;c<i;c++)0===d&&(s=e[l++],d=32),d>=t?(h=s>>>d-t&a,d-=t):(h=(s&a)<<(u=t-d)&a,h+=(s=e[l++])>>>(d=32-u)),p[c]=h<m?n+h*r:o;return p.unshift(n),p}(x,m,T-1,o,C,M),l>=3?t(A,r,S,g,b):e(A,r,S,g,b)}else n.counter.bitstuffer++,S=m,n.ptr+=c,S>0&&(v=Math.ceil(g*S/8),w=Math.ceil(v/4),_=new ArrayBuffer(4*w),(y=new Uint8Array(_)).set(new Uint8Array(i,n.ptr,v)),A=new Uint32Array(_),n.ptr+=v,l>=3?null==o?function(e,t,i,n){var r,o,s,a,l=(1<<i)-1,c=0,u=0,d=0;for(r=0;r<n;r++)0===u&&(s=e[c++],u=32,d=0),u>=i?(o=s>>>d&l,u-=i,d+=i):(o=s>>>d&l,u=32-(a=i-u),o|=((s=e[c++])&(1<<a)-1)<<i-a,d=a),t[r]=o}(A,r,S,g):t(A,r,S,g,!1,o,C,M):null==o?function(e,t,i,n){var r,o,s,a,l=(1<<i)-1,c=0,u=0,d=4*e.length-Math.ceil(i*n/8);for(e[e.length-1]<<=8*d,r=0;r<n;r++)0===u&&(s=e[c++],u=32),u>=i?(o=s>>>u-i&l,u-=i):(o=(s&l)<<(a=i-u)&l,o+=(s=e[c++])>>>(u=32-a)),t[r]=o}(A,r,S,g):e(A,r,S,g,!1,o,C,M))},readTiles:function(e,t,n){var r=t.headerInfo,o=r.width,s=r.height,a=r.microBlockSize,l=r.imageType,c=i.getDataTypeSize(l),u=Math.ceil(o/a),d=Math.ceil(s/a);t.pixels.numBlocksY=d,t.pixels.numBlocksX=u,t.pixels.ptr=0;var h,p,f,m,g,A,_,y,v=0,w=0,b=0,x=0,T=0,S=0,C=0,M=0,E=0,P=0,k=0,O=0,R=0,I=0,D=0,B=new n(a*a),L=s%a||a,F=o%a||a,N=r.numDims,V=t.pixels.resultMask,U=t.pixels.resultPixels;for(b=0;b<d;b++)for(T=b!==d-1?a:L,x=0;x<u;x++)for(P=b*o*a+x*a,k=o-(S=x!==u-1?a:F),y=0;y<N;y++){if(N>1&&(U=new n(t.pixels.resultPixels.buffer,o*s*y*c,o*s)),C=e.byteLength-t.ptr,p={},D=0,D++,E=(M=(h=new DataView(e,t.ptr,Math.min(10,C))).getUint8(0))>>6&255,(M>>2&15)!=(x*a>>3&15))throw"integrity issue";if((g=3&M)>3)throw t.ptr+=D,"Invalid block encoding ("+g+")";if(2!==g)if(0===g){if(t.counter.uncompressed++,t.ptr+=D,O=(O=T*S*c)<(R=e.byteLength-t.ptr)?O:R,f=new ArrayBuffer(O%c===0?O:O+c-O%c),new Uint8Array(f).set(new Uint8Array(e,t.ptr,O)),m=new n(f),I=0,V)for(v=0;v<T;v++){for(w=0;w<S;w++)V[P]&&(U[P]=m[I++]),P++;P+=k}else for(v=0;v<T;v++){for(w=0;w<S;w++)U[P++]=m[I++];P+=k}t.ptr+=I*c}else if(A=i.getDataTypeUsed(l,E),_=i.getOnePixel(p,D,A,h),D+=i.getDataTypeSize(A),3===g)if(t.ptr+=D,t.counter.constantoffset++,V)for(v=0;v<T;v++){for(w=0;w<S;w++)V[P]&&(U[P]=_),P++;P+=k}else for(v=0;v<T;v++){for(w=0;w<S;w++)U[P++]=_;P+=k}else if(t.ptr+=D,i.decodeBits(e,t,B,_,y),D=0,V)for(v=0;v<T;v++){for(w=0;w<S;w++)V[P]&&(U[P]=B[D++]),P++;P+=k}else for(v=0;v<T;v++){for(w=0;w<S;w++)U[P++]=B[D++];P+=k}else t.counter.constant++,t.ptr+=D}},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:i.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e){var t=e.headerInfo.zMax,i=e.headerInfo.numDims,n=e.headerInfo.height*e.headerInfo.width,r=n*i,o=0,s=0,a=0,l=e.pixels.resultMask;if(l)if(i>1)for(o=0;o<i;o++)for(a=o*n,s=0;s<n;s++)l[s]&&(e.pixels.resultPixels[a+s]=t);else for(s=0;s<n;s++)l[s]&&(e.pixels.resultPixels[s]=t);else if(e.pixels.resultPixels.fill)e.pixels.resultPixels.fill(t);else for(s=0;s<r;s++)e.pixels.resultPixels[s]=t},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:default:t=Float32Array;break;case 7:t=Float64Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:default:t="F32";break;case 7:t="F64"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var i;switch(e){case 0:i=t>=-128&&t<=127;break;case 1:i=t>=0&&t<=255;break;case 2:i=t>=-32768&&t<=32767;break;case 3:i=t>=0&&t<=65536;break;case 4:i=t>=-2147483648&&t<=2147483647;break;case 5:i=t>=0&&t<=4294967296;break;case 6:i=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:i=t>=5e-324&&t<=17976931348623157e292;break;default:i=!1}return i},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var i=e;switch(e){case 2:case 4:i=e-t;break;case 3:case 5:i=e-2*t;break;case 6:i=0===t?e:1===t?2:1;break;case 7:i=0===t?e:e-2*t+1;break;default:i=e}return i},getOnePixel:function(e,t,i,n){var r=0;switch(i){case 0:r=n.getInt8(t);break;case 1:r=n.getUint8(t);break;case 2:r=n.getInt16(t,!0);break;case 3:r=n.getUint16(t,!0);break;case 4:r=n.getInt32(t,!0);break;case 5:r=n.getUInt32(t,!0);break;case 6:r=n.getFloat32(t,!0);break;case 7:r=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return r}},n=function(e,t,i){this.val=e,this.left=t,this.right=i};return{decode:function(e,t){var n=(t=t||{}).noDataValue,r=0,o={};if(o.ptr=t.inputOffset||0,o.pixels={},i.readHeaderInfo(e,o)){var s=o.headerInfo,a=s.fileVersion,l=i.getDataTypeArray(s.imageType);i.readMask(e,o),s.numValidPixel===s.width*s.height||o.pixels.resultMask||(o.pixels.resultMask=t.maskData);var c,u=s.width*s.height;if(o.pixels.resultPixels=new l(u*s.numDims),o.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0},0!==s.numValidPixel)if(s.zMax===s.zMin)i.constructConstantSurface(o);else if(a>=4&&i.checkMinMaxRanges(e,o))i.constructConstantSurface(o);else{var d=new DataView(e,o.ptr,2),h=d.getUint8(0);if(o.ptr++,h)i.readDataOneSweep(e,o,l);else if(a>1&&s.imageType<=1&&Math.abs(s.maxZError-.5)<1e-5){var p=d.getUint8(1);if(o.ptr++,o.encodeMode=p,p>2||a<4&&p>1)throw"Invalid Huffman flag "+p;p?i.readHuffman(e,o,l):i.readTiles(e,o,l)}else i.readTiles(e,o,l)}o.eofOffset=o.ptr,t.inputOffset?(c=o.headerInfo.blobSize+t.inputOffset-o.ptr,Math.abs(c)>=1&&(o.eofOffset=t.inputOffset+o.headerInfo.blobSize)):(c=o.headerInfo.blobSize-o.ptr,Math.abs(c)>=1&&(o.eofOffset=o.headerInfo.blobSize));var f={width:s.width,height:s.height,pixelData:o.pixels.resultPixels,minValue:s.zMin,maxValue:s.zMax,validPixelCount:s.numValidPixel,dimCount:s.numDims,dimStats:{minValues:s.minValues,maxValues:s.maxValues},maskData:o.pixels.resultMask};if(o.pixels.resultMask&&i.isValidPixelValue(s.imageType,n)){var m=o.pixels.resultMask;for(r=0;r<u;r++)m[r]||(f.pixelData[r]=n);f.noDataValue=n}return o.noDataValue=n,t.returnFileInfo&&(f.fileInfo=i.formatFileInfo(o)),f}},getBandCount:function(e){for(var t=0,n=0,r={ptr:0,pixels:{}};n<e.byteLength-58;)i.readHeaderInfo(e,r),n+=r.headerInfo.blobSize,t++,r.ptr=n;return t}}}(),c=new ArrayBuffer(4),u=new Uint8Array(c),new Uint32Array(c)[0]=1,p=1===u[0],f={decode:function(e,t){if(!p)throw"Big endian system is not supported.";var i,n,r=(t=t||{}).inputOffset||0,o=new Uint8Array(e,r,10),s=String.fromCharCode.apply(null,o);if("CntZImage"===s.trim())i=d,n=1;else{if("Lerc2"!==s.substring(0,5))throw"Unexpected file identifier string: "+s;i=h,n=2}for(var a,l,c,u,f,m,g=0,A=e.byteLength-10,_=[],y={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]};r<A;){var v=i.decode(e,{inputOffset:r,encodedMaskData:a,maskData:c,returnMask:0===g,returnEncodedMask:0===g,returnFileInfo:!0,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});r=v.fileInfo.eofOffset,0===g&&(a=v.encodedMaskData,c=v.maskData,y.width=v.width,y.height=v.height,y.dimCount=v.dimCount||1,y.pixelType=v.pixelType||v.fileInfo.pixelType,y.mask=v.maskData),n>1&&v.fileInfo.mask&&v.fileInfo.mask.numBytes>0&&_.push(v.maskData),g++,y.pixels.push(v.pixelData),y.statistics.push({minValue:v.minValue,maxValue:v.maxValue,noDataValue:v.noDataValue,dimStats:v.dimStats})}if(n>1&&_.length>1){for(m=y.width*y.height,y.bandMasks=_,(c=new Uint8Array(m)).set(_[0]),u=1;u<_.length;u++)for(l=_[u],f=0;f<m;f++)c[f]=c[f]&l[f];y.maskData=c}return y}},void 0===(i=function(){return f}.apply(t,[]))||(e.exports=i)},957171:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;module=__webpack_require__.nmd(module),function(undefined){"use strict";var modules,cache,entries,protobuf;modules={1:[function(e,t,i){t.exports=function(e,t){for(var i=new Array(arguments.length-1),n=0,r=2,o=!0;r<arguments.length;)i[n++]=arguments[r++];return new Promise(function(r,s){i[n]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];r.apply(null,t)}};try{e.apply(t||null,i)}catch(e){o&&(o=!1,s(e))}})}},{}],2:[function(e,t,i){var n=i;n.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var r=new Array(64),o=new Array(123),s=0;s<64;)o[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(e,t,i){for(var n,o=null,s=[],a=0,l=0;t<i;){var c=e[t++];switch(l){case 0:s[a++]=r[c>>2],n=(3&c)<<4,l=1;break;case 1:s[a++]=r[n|c>>4],n=(15&c)<<2,l=2;break;case 2:s[a++]=r[n|c>>6],s[a++]=r[63&c],l=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=r[n],s[a++]=61,1===l&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var a="invalid encoding";n.decode=function(e,t,i){for(var n,r=i,s=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&s>1)break;if((c=o[c])===undefined)throw Error(a);switch(s){case 0:n=c,s=1;break;case 1:t[i++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:t[i++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:t[i++]=(3&n)<<6|c,s=0}}if(1===s)throw Error(a);return i-r},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,i){function n(){this._listeners={}}t.exports=n,n.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},n.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===t?i.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,i)}return this}},{}],4:[function(e,t,i){function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),n=128===i[3];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3]}function o(e,n,r){t[0]=e,n[r]=i[3],n[r+1]=i[2],n[r+2]=i[1],n[r+3]=i[0]}function s(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],t[0]}function a(e,n){return i[3]=e[n],i[2]=e[n+1],i[1]=e[n+2],i[0]=e[n+3],t[0]}e.writeFloatLE=n?r:o,e.writeFloatBE=n?o:r,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,i,n){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,i,n);else if(isNaN(t))e(2143289344,i,n);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,i,n);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,i,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((r<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,i,n)}}function i(e,t,i){var n=e(t,i),r=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:r*(1/0):0===o?1401298464324817e-60*r*s:r*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,o),e.readFloatLE=i.bind(null,s),e.readFloatBE=i.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),n=128===i[7];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3],n[r+4]=i[4],n[r+5]=i[5],n[r+6]=i[6],n[r+7]=i[7]}function o(e,n,r){t[0]=e,n[r]=i[7],n[r+1]=i[6],n[r+2]=i[5],n[r+3]=i[4],n[r+4]=i[3],n[r+5]=i[2],n[r+6]=i[1],n[r+7]=i[0]}function s(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],i[4]=e[n+4],i[5]=e[n+5],i[6]=e[n+6],i[7]=e[n+7],t[0]}function a(e,n){return i[7]=e[n],i[6]=e[n+1],i[5]=e[n+2],i[4]=e[n+3],i[3]=e[n+4],i[2]=e[n+5],i[1]=e[n+6],i[0]=e[n+7],t[0]}e.writeDoubleLE=n?r:o,e.writeDoubleBE=n?o:r,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,i,n,r,o){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,r,o+t),e(1/n>0?0:2147483648,r,o+i);else if(isNaN(n))e(0,r,o+t),e(2146959360,r,o+i);else if(n>17976931348623157e292)e(0,r,o+t),e((s<<31|2146435072)>>>0,r,o+i);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,r,o+t),e((s<<31|a/4294967296)>>>0,r,o+i);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=n*Math.pow(2,-l))>>>0,r,o+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,r,o+i)}}}function i(e,t,i,n,r){var o=e(n,r+t),s=e(n,r+i),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=i.bind(null,s,0,4),e.readDoubleBE=i.bind(null,a,4,0)}(),e}function r(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function o(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=n(n)},{}],5:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],6:[function(e,t,i){t.exports=function(e,t,i){var n=i||8192,r=n>>>1,o=null,s=n;return function(i){if(i<1||i>r)return e(i);s+i>n&&(o=e(n),s=0);var a=t.call(o,s,s+=i);return 7&s&&(s=1+(7|s)),a}}},{}],7:[function(e,t,i){var n=i;n.length=function(e){for(var t=0,i=0,n=0;n<e.length;++n)(i=e.charCodeAt(n))<128?t+=1:i<2048?t+=2:55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,i){if(i-t<1)return"";for(var n,r=null,o=[],s=0;t<i;)(n=e[t++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),s=0);return r?(s&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(e,t,i){for(var n,r,o=i,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=63&n|128):55296==(64512&n)&&56320==(64512&(r=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&r),++s,t[i++]=n>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=63&n|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=63&n|128);return i-o}},{}],8:[function(e,t,i){var n=i;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e(16),n.BufferWriter=e(17),n.Reader=e(9),n.BufferReader=e(10),n.util=e(15),n.rpc=e(12),n.roots=e(11),n.configure=r,r()},{10:10,11:11,12:12,15:15,16:16,17:17,9:9}],9:[function(e,t,i){t.exports=l;var n,r=e(15),o=r.LongBits,s=r.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return r.Buffer?function(e){return(l.create=function(e){return r.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw a(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,i);if(t===i){var n=r.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=d(),n._configure();var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{15:15}],10:[function(e,t,i){t.exports=o;var n=e(9);(o.prototype=Object.create(n.prototype)).constructor=o;var r=e(15);function o(e){n.call(this,e)}o._configure=function(){r.Buffer&&(o.prototype._slice=r.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},{15:15,9:9}],11:[function(e,t,i){t.exports={}},{}],12:[function(e,t,i){i.Service=e(13)},{13:13}],13:[function(e,t,i){t.exports=r;var n=e(15);function r(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(r.prototype=Object.create(n.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,i,r,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,i,r,o);if(!a.rpcImpl)return setTimeout(function(){s(Error("already ended"))},0),undefined;try{return a.rpcImpl(t,i[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,i){if(e)return a.emit("error",e,t),s(e);if(null===i)return a.end(!0),undefined;if(!(i instanceof r))try{i=r[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",i,t),s(null,i)})}catch(e){return a.emit("error",e,t),setTimeout(function(){s(e)},0),undefined}},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{15:15}],14:[function(e,t,i){t.exports=r;var n=e(15);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return t&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new r(i,n)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(n.isString(e)){if(!n.Long)return r.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?o:new r((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},{15:15}],15:[function(e,t,i){var n=i;function r(e,t,i){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]!==undefined&&i||(e[n[r]]=t[n[r]]);return e}function o(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&r(this,i)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:undefined,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=e(1),n.base64=e(2),n.EventEmitter=e(3),n.float=e(4),n.inquire=e(5),n.utf8=e(7),n.pool=e(6),n.LongBits=e(14),n.isNode=Boolean(void 0!==__webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.process&&__webpack_require__.g.process.versions&&__webpack_require__.g.process.versions.node),n.global=n.isNode&&__webpack_require__.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var i=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&this[e[i]]!==undefined&&null!==this[e[i]])return e[i]}},n.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},{1:1,14:14,2:2,3:3,4:4,5:5,6:6,7:7}],16:[function(e,t,i){t.exports=d;var n,r=e(15),o=r.LongBits,s=r.base64,a=r.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=undefined,this.val=i}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var h=function(){return r.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,i){t[i]=255&e}function f(e,t){this.len=e,this.next=undefined,this.val=t}function m(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function g(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}d.create=h(),d.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(d.alloc=r.pool(d.alloc,r.Array.prototype.subarray)),d.prototype._push=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},f.prototype=Object.create(l.prototype),f.prototype.fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(m,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(m,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(m,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var A=r.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var n=0;n<e.length;++n)t[i+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(r.isString(e)){var i=d.alloc(t=s.length(e));s.decode(e,i,0),e=i}return this.uint32(t)._push(A,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},{15:15}],17:[function(e,t,i){t.exports=o;var n=e(16);(o.prototype=Object.create(n.prototype)).constructor=o;var r=e(15);function o(){n.call(this)}function s(e,t,i){e.length<40?r.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}o._configure=function(){o.alloc=r._Buffer_allocUnsafe,o.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var n=0;n<e.length;)t[i++]=e[n++]}},o.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=r.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},{15:15,16:16}]},cache={},entries=[8],protobuf=function e(t){var i=cache[t];return i||modules[t][0].call(i=cache[t]={exports:{}},e,i,i.exports),i.exports}(entries[0]),protobuf.util.global.protobuf=protobuf,__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(935017)],(__WEBPACK_AMD_DEFINE_RESULT__=function(e){return e&&e.isLong&&(protobuf.util.Long=e,protobuf.configure()),protobuf}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=protobuf)}()},935017:function(e,t){var i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=function(){var e={};return function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function i(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function n(e){return!0===(e&&e.__isLong__)}function r(e){var t=Math.clz32(e&-e);return e?31-t:t}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=n;var o={},s={};function a(e,t){var i,n,r;return t?(r=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(i=c(e,0,!0),r&&(s[e]=i),i):(r=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(i=c(e,e<0?-1:0,!1),r&&(o[e]=i),i)}function l(e,t){if(isNaN(e))return t?_:A;if(t){if(e<0)return _;if(e>=f)return x}else{if(e<=-m)return T;if(e+1>=m)return b}return e<0?l(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new i(e,t,n)}i.fromInt=a,i.fromNumber=l,i.fromBits=c;var u=Math.pow;function d(e,t,i){if(0===e.length)throw Error("empty string");if("number"==typeof t?(i=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?_:A;if((i=i||10)<2||36<i)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,i).neg();for(var r=l(u(i,8)),o=A,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),i);if(a<8){var h=l(u(i,a));o=o.mul(h).add(l(c))}else o=(o=o.mul(r)).add(l(c))}return o.unsigned=t,o}function h(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}i.fromString=d,i.fromValue=h;var p=4294967296,f=p*p,m=f/2,g=a(1<<24),A=a(0);i.ZERO=A;var _=a(0,!0);i.UZERO=_;var y=a(1);i.ONE=y;var v=a(1,!0);i.UONE=v;var w=a(-1);i.NEG_ONE=w;var b=c(-1,2147483647,!1);i.MAX_VALUE=b;var x=c(-1,-1,!0);i.MAX_UNSIGNED_VALUE=x;var T=c(0,-2147483648,!1);i.MIN_VALUE=T;var S=i.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var t=l(e),i=this.div(t),n=i.mul(t).sub(this);return i.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=l(u(e,6),this.unsigned),o=this,s="";;){var a=o.div(r),c=(o.sub(a.mul(r)).toInt()>>>0).toString(e);if((o=a).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&-1===e&&!(0===this.low&&-2097152===this.high)},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return!(1&~this.low)},S.isEven=function(){return!(1&this.low)},S.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(y)},S.neg=S.negate,S.add=function(e){n(e)||(e=h(e));var t=this.high>>>16,i=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,l=e.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,d+=(p+=r+l)>>>16,u+=(d+=i+a)>>>16,u+=t+s,c((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},S.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=h(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?_:A;if(this.eq(T))return e.isOdd()?T:A;if(e.eq(T))return this.isOdd()?T:A;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,m=0,y=0,v=0;return y+=(v+=s*p)>>>16,m+=(y+=o*p)>>>16,y&=65535,m+=(y+=s*d)>>>16,f+=(m+=r*p)>>>16,m&=65535,f+=(m+=o*d)>>>16,m&=65535,f+=(m+=s*u)>>>16,f+=i*p+r*d+o*u+s*a,c((y&=65535)<<16|(v&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(n(e)||(e=h(e)),e.isZero())throw Error("division by zero");var i,r,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:A;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return v;o=_}else{if(this.eq(T))return e.eq(y)||e.eq(w)?T:e.eq(T)?y:(i=this.shr(1).div(e).shl(1)).eq(A)?e.isNegative()?y:w:(r=this.sub(e.mul(i)),o=i.add(r.div(e)));if(e.eq(T))return this.unsigned?_:A;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=A}for(r=this;r.gte(e);){i=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:u(2,s-48),d=l(i),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=l(i-=a,this.unsigned)).mul(e);d.isZero()&&(d=y),o=o.add(d),r=r.sub(p)}return o},S.div=S.divide,S.modulo=function(e){return n(e)||(e=h(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return c(~this.low,~this.high,this.unsigned)},S.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},S.clz=S.countLeadingZeros,S.countTrailingZeros=function(){return this.low?r(this.low):r(this.high)+32},S.ctz=S.countTrailingZeros,S.and=function(e){return n(e)||(e=h(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return n(e)||(e=h(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return n(e)||(e=h(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):c(32===e?this.high:this.high>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),c(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},S.rotl=S.rotateLeft,S.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),c(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},S.rotr=S.rotateRight,S.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,n){return n?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(i.fromBigInt=function(e,t){return c(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},i.fromValue=function(e,t){return"bigint"==typeof e?i.fromBigInt(e,t):h(e,t)},S.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e}),e.default=i}(e),function(e){return e.default||e}(e)}.apply(t,[]),void 0===i||(e.exports=i)},707568:(e,t,i)=>{"use strict";function n(e){this.proxy=e}i.d(t,{A:()=>r}),n.prototype.getURL=function(e){const t=-1===this.proxy.indexOf("?")?"?":"";return this.proxy+t+encodeURIComponent(e)};const r=n},335385:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var n=i(303578),r=i(41476),o=i(491446),s=i(605971),a=i(744603),l=i(517638);function c(){this._cache={}}c.prototype.fromColor=function(e,t){if(!(0,o.A)(e))throw new s.A("color is required");if(!(0,o.A)(t))throw new s.A("size is required");return p(void 0,void 0,e,t,this._cache)},c.prototype.fromUrl=function(e,t,i){if(!(0,o.A)(e))throw new s.A("url is required");if(!(0,o.A)(t))throw new s.A("color is required");if(!(0,o.A)(i))throw new s.A("size is required");return p(e,void 0,t,i,this._cache)},c.prototype.fromMakiIconId=function(e,t,i){if(!(0,o.A)(e))throw new s.A("id is required");if(!(0,o.A)(t))throw new s.A("color is required");if(!(0,o.A)(i))throw new s.A("size is required");return p((0,n.A)(`Assets/Textures/maki/${encodeURIComponent(e)}.png`),void 0,t,i,this._cache)},c.prototype.fromText=function(e,t,i){if(!(0,o.A)(e))throw new s.A("text is required");if(!(0,o.A)(t))throw new s.A("color is required");if(!(0,o.A)(i))throw new s.A("size is required");return p(void 0,e,t,i,this._cache)};const u=new r.A;function d(e,t,i){const n=i/2.5;let o=n,s=n;t.width>t.height?s=n*(t.height/t.width):t.width<t.height&&(o=n*(t.width/t.height));const a=Math.round((i-o)/2),l=Math.round(7/24*i-s/2);e.globalCompositeOperation="destination-out",e.drawImage(t,a-1,l,o,s),e.drawImage(t,a,l-1,o,s),e.drawImage(t,a+1,l,o,s),e.drawImage(t,a,l+1,o,s),e.globalCompositeOperation="destination-over",e.fillStyle=r.A.BLACK.toCssColorString(),e.fillRect(a-1,l-1,o+2,s+2),e.globalCompositeOperation="destination-out",e.drawImage(t,a,l,o,s),e.globalCompositeOperation="destination-over",e.fillStyle=r.A.WHITE.toCssColorString(),e.fillRect(a-1,l-2,o+2,s+2)}const h=new Array(4);function p(e,t,i,n,r){h[0]=e,h[1]=t,h[2]=i,h[3]=n;const s=JSON.stringify(h),c=r[s];if((0,o.A)(c))return c;const p=document.createElement("canvas");p.width=n,p.height=n;const f=p.getContext("2d");if(function(e,t,i){e.save(),e.scale(i/24,i/24),e.fillStyle=t.toCssColorString(),e.strokeStyle=t.brighten(.6,u).toCssColorString(),e.lineWidth=.846,e.beginPath(),e.moveTo(6.72,.422),e.lineTo(17.28,.422),e.bezierCurveTo(18.553,.422,19.577,1.758,19.577,3.415),e.lineTo(19.577,10.973),e.bezierCurveTo(19.577,12.63,18.553,13.966,17.282,13.966),e.lineTo(14.386,14.008),e.lineTo(11.826,23.578),e.lineTo(9.614,14.008),e.lineTo(6.719,13.965),e.bezierCurveTo(5.446,13.983,4.422,12.629,4.422,10.972),e.lineTo(4.422,3.416),e.bezierCurveTo(4.423,1.76,5.447,.423,6.718,.423),e.closePath(),e.fill(),e.stroke(),e.restore()}(f,i,n),(0,o.A)(e)){const t=a.A.createIfNeeded(e).fetchImage().then(function(e){return d(f,e,n),r[s]=p,p});return r[s]=t,t}if((0,o.A)(t)){const e=(0,l.A)(t,{font:`bold ${n}px sans-serif`});d(f,e,n)}return r[s]=p,p}const f=c},419061:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(786101),r=i(915325);function o(e,t){return(0,n.A)("defaultValue","defaultValue has been deprecated and will be removed in Cesium 1.134. Use the nullish coalescing operator instead: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing"),null!=e?e:t}Object.defineProperty(o,"EMPTY_OBJECT",{get:function(){return(0,n.A)("defaultValue.EMPTY_OBJECT","defaultValue.EMPTY_OBJECT has been deprecated and will be removed in Cesium 1.134. Use Frozen.EMPTY_OBJECT instead"),r.A.EMPTY_OBJECT}});const s=o},3858:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(484193),r=i(491446),o=i(605971);const s=function(e){if(!(0,r.A)(e))throw new o.A("uri is required.");const t=new n(e);t.normalize();let i=t.path();const s=i.lastIndexOf("/");return-1!==s&&(i=i.substr(s+1)),i}},668696:(e,t,i)=>{"use strict";i.d(t,{A:()=>de});var n=i(215327),r=i(267980),o=i(41476),s=i(673874),a=i(672743),l=i(915325),c=i(491446),u=i(605971),d=i(955943),h=i(3858),p=i(335385),f=i(105330),m=i(744603),g=i(123245),A=i(63316),_=i(742558);function y(e){return e}function v(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return w(e,t)})}:w(e,t)}function w(e,t){var i=t.id,n=t.bbox,r=null==t.properties?{}:t.properties,o=function(e,t){var i=function(e){if(null==e)return y;var t,i,n=e.scale[0],r=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,a){a||(t=i=0);var l=2,c=e.length,u=new Array(c);for(u[0]=(t+=e[0])*n+o,u[1]=(i+=e[1])*r+s;l<c;)u[l]=e[l],++l;return u}}(e.transform),n=e.arcs;function r(e,t){t.length&&t.pop();for(var r=n[e<0?~e:e],o=0,s=r.length;o<s;++o)t.push(i(r[o],o));e<0&&function(e,t){for(var i,n=e.length,r=n-t;r<--n;)i=e[r],e[r++]=e[n],e[n]=i}(t,s)}function o(e){return i(e)}function s(e){for(var t=[],i=0,n=e.length;i<n;++i)r(e[i],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=s(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(a)}return function e(t){var i,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(e)};case"Point":i=o(t.coordinates);break;case"MultiPoint":i=t.coordinates.map(o);break;case"LineString":i=s(t.arcs);break;case"MultiLineString":i=t.arcs.map(s);break;case"Polygon":i=l(t.arcs);break;case"MultiPolygon":i=t.arcs.map(l);break;default:return null}return{type:n,coordinates:i}}(t)}(e,t);return null==i&&null==n?{type:"Feature",properties:r,geometry:o}:null==n?{type:"Feature",id:i,properties:r,geometry:o}:{type:"Feature",id:i,bbox:n,properties:r,geometry:o}}var b=i(470540),x=i(10082),T=i(312421),S=i(808938),C=i(969077),M=i(367725),E=i(899629),P=i(151075),k=i(193189),O=i(998261);function R(e){return r.A.fromDegrees(e[0],e[1],e[2])}const I={"urn:ogc:def:crs:OGC:1.3:CRS84":R,"EPSG:4326":R,"urn:ogc:def:crs:EPSG::4326":R},D={},B={};let L,F=48,N=o.A.ROYALBLUE,V=o.A.YELLOW,U=2,z=o.A.fromBytes(255,255,0,100),G=!1;const K={small:24,medium:48,large:64},q=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function H(e,t){let i="";for(const n in e)if(e.hasOwnProperty(n)){if(n===t||-1!==q.indexOf(n))continue;const r=e[n];(0,c.A)(r)&&(i+="object"==typeof r?`<tr><th>${n}</th><td>${H(r)}</td></tr>`:`<tr><th>${n}</th><td>${r}</td></tr>`)}return i.length>0&&(i=`<table class="cesium-infoBox-defaultTable"><tbody>${i}</tbody></table>`),i}function W(e,t){return new x.A(function(e,t,i){let n;return function(r,o){return(0,c.A)(n)||(n=e(t,i)),n}}(H,e,t),!0)}function j(e,t,i){let n=e.id;if((0,c.A)(n)&&"Feature"===e.type){let e=2,i=n;for(;(0,c.A)(t.getById(i));)i=`${n}_${e}`,e++;n=i}else n=(0,s.A)();const r=t.getOrCreateEntity(n),o=e.properties;if((0,c.A)(o)){let e;r.properties=o;const t=o.title;if((0,c.A)(t))r.name=t,e="title";else{let t=Number.MAX_VALUE;for(const i in o)if(o.hasOwnProperty(i)&&o[i]){const n=i.toLowerCase();if(t>1&&"title"===n){t=1,e=i;break}t>2&&"name"===n?(t=2,e=i):t>3&&/title/i.test(i)?(t=3,e=i):t>4&&/name/i.test(i)&&(t=4,e=i)}(0,c.A)(e)&&(r.name=o[e])}const n=o.description;null!==n&&(r.description=(0,c.A)(n)?new C.A(n):i(o,e))}return r}function $(e,t){const i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=t(e[n]);return i}const X={Feature:Z,FeatureCollection:function(e,t,i,n,r){const o=t.features;for(let t=0,i=o.length;t<i;t++)Z(e,o[t],0,n,r)},GeometryCollection:J,LineString:ne,MultiLineString:re,MultiPoint:te,MultiPolygon:ae,Point:ee,Polygon:se,Topology:le},Y={GeometryCollection:J,LineString:ne,MultiLineString:re,MultiPoint:te,MultiPolygon:ae,Point:ee,Polygon:se,Topology:le};function Z(e,t,i,n,r){if(null===t.geometry)return void j(t,e._entityCollection,r.describe);if(!(0,c.A)(t.geometry))throw new g.A("feature.geometry is required.");const o=t.geometry.type,s=Y[o];if(!(0,c.A)(s))throw new g.A(`Unknown geometry type: ${o}`);s(e,t,t.geometry,n,r)}function J(e,t,i,n,r){const o=i.geometries;for(let i=0,s=o.length;i<s;i++){const s=o[i],a=s.type,l=Y[a];if(!(0,c.A)(l))throw new g.A(`Unknown geometry type: ${a}`);l(e,t,s,n,r)}}function Q(e,t,i,n,r){let s=r.markerSymbol,a=r.markerColor,l=r.markerSize;const u=t.properties;if((0,c.A)(u)){const e=u["marker-color"];(0,c.A)(e)&&(a=o.A.fromCssColorString(e)),l=K[u["marker-size"]]??l;const t=u["marker-symbol"];(0,c.A)(t)&&(s=t)}let d;d=(0,c.A)(s)?1===s.length?e._pinBuilder.fromText(s.toUpperCase(),a,l):e._pinBuilder.fromMakiIconId(s,a,l):e._pinBuilder.fromColor(a,l);const h=new b.A;h.verticalOrigin=new C.A(_.A.BOTTOM),2===n.length&&r.clampToGround&&(h.heightReference=A.Ay.CLAMP_TO_GROUND);const p=j(t,e._entityCollection,r.describe);p.billboard=h,p.position=new S.A(i(n));const f=Promise.resolve(d).then(function(e){h.image=new C.A(e)}).catch(function(){h.image=new C.A(e._pinBuilder.fromColor(a,l))});e._promises.push(f)}function ee(e,t,i,n,r){Q(e,t,n,i.coordinates,r)}function te(e,t,i,n,r){const o=i.coordinates;for(let i=0;i<o.length;i++)Q(e,t,n,o[i],r)}function ie(e,t,i,r,s){let a=s.strokeMaterialProperty,l=s.strokeWidthProperty;const u=t.properties;if((0,c.A)(u)){const e=u["stroke-width"];let t;(0,c.A)(e)&&(l=new C.A(e));const i=u.stroke;(0,c.A)(i)&&(t=o.A.fromCssColorString(i));const n=u["stroke-opacity"];(0,c.A)(n)&&1!==n&&((0,c.A)(t)||(t=a.color.getValue().clone()),t.alpha=n),(0,c.A)(t)&&(a=new T.A(t))}const d=j(t,e._entityCollection,s.describe),h=new O.A;d.polyline=h,h.clampToGround=s.clampToGround,h.material=a,h.width=l,h.positions=new C.A($(r,i)),h.arcType=n.A.RHUMB}function ne(e,t,i,n,r){ie(e,t,n,i.coordinates,r)}function re(e,t,i,n,r){const o=i.coordinates;for(let i=0;i<o.length;i++)ie(e,t,n,o[i],r)}function oe(e,t,i,r,s){if(0===r.length||0===r[0].length)return;let a=s.strokeMaterialProperty.color,l=s.fillMaterialProperty,u=s.strokeWidthProperty;const d=t.properties;if((0,c.A)(d)){const e=d["stroke-width"];let t;(0,c.A)(e)&&(u=new C.A(e));const i=d.stroke;(0,c.A)(i)&&(t=o.A.fromCssColorString(i));let n,r=d["stroke-opacity"];(0,c.A)(r)&&1!==r&&((0,c.A)(t)||(t=a.getValue().clone()),t.alpha=r),(0,c.A)(t)&&(a=new C.A(t));const s=d.fill,h=l.color.getValue();(0,c.A)(s)&&(n=o.A.fromCssColorString(s),n.alpha=h.alpha),r=d["fill-opacity"],(0,c.A)(r)&&r!==h.alpha&&((0,c.A)(n)||(n=h.clone()),n.alpha=r),(0,c.A)(n)&&(l=new T.A(n))}const h=new k.A;h.outline=new C.A(!0),h.outlineColor=a,h.outlineWidth=u,h.material=l,h.arcType=n.A.RHUMB;const p=[];for(let e=1,t=r.length;e<t;e++)p.push(new f.A($(r[e],i)));const m=r[0];h.hierarchy=new C.A(new f.A($(m,i),p)),m[0].length>2?h.perPositionHeight=new C.A(!0):s.clampToGround||(h.height=0),j(t,e._entityCollection,s.describe).polygon=h}function se(e,t,i,n,r){oe(e,t,n,i.coordinates,r)}function ae(e,t,i,n,r){const o=i.coordinates;for(let i=0;i<o.length;i++)oe(e,t,n,o[i],r)}function le(e,t,i,n,r){for(const t in i.objects)if(i.objects.hasOwnProperty(t)){const o=v(i,i.objects[t]);(0,X[o.type])(e,o,o,n,r)}}function ce(e){this._name=e,this._changed=new d.A,this._error=new d.A,this._isLoading=!1,this._loading=new d.A,this._entityCollection=new P.A(this),this._promises=[],this._pinBuilder=new p.A,this._entityCluster=new E.A,this._credit=void 0,this._resourceCredits=[]}function ue(e,t,i,n){if(!(0,c.A)(t))throw new u.A("data is required.");M.A.setLoading(e,!0);let r=(i=i??l.A.EMPTY_OBJECT).credit;"string"==typeof r&&(r=new a.A(r)),e._credit=r;let o=t,s=i.sourceUri;if("string"==typeof t||t instanceof m.A){o=(t=m.A.createIfNeeded(t)).fetchJson(),s=s??t.getUrlComponent();const i=e._resourceCredits,n=t.credits;if((0,c.A)(n)){const e=n.length;for(let t=0;t<e;t++)i.push(n[t])}}return i={describe:i.describe??W,markerSize:i.markerSize??F,markerSymbol:i.markerSymbol??L,markerColor:i.markerColor??N,strokeWidthProperty:new C.A(i.strokeWidth??U),strokeMaterialProperty:new T.A(i.stroke??V),fillMaterialProperty:new T.A(i.fill??z),clampToGround:i.clampToGround??G},Promise.resolve(o).then(function(t){return function(e,t,i,n,r){let o;(0,c.A)(n)&&(o=(0,h.A)(n)),(0,c.A)(o)&&e._name!==o&&(e._name=o,e._changed.raiseEvent(e));const s=X[t.type];if(!(0,c.A)(s))throw new g.A(`Unsupported GeoJSON object type: ${t.type}`);const a=t.crs;let l=null!==a?R:null;if((0,c.A)(a)){if(!(0,c.A)(a.properties))throw new g.A("crs.properties is undefined.");const e=a.properties;if("name"===a.type){if(l=I[e.name],!(0,c.A)(l))throw new g.A(`Unknown crs name: ${e.name}`)}else if("link"===a.type){let t=D[e.href];if((0,c.A)(t)||(t=B[e.type]),!(0,c.A)(t))throw new g.A(`Unable to resolve crs link: ${JSON.stringify(e)}`);l=t(e)}else{if("EPSG"!==a.type)throw new g.A(`Unknown crs type: ${a.type}`);if(l=I[`EPSG:${e.code}`],!(0,c.A)(l))throw new g.A(`Unknown crs EPSG code: ${e.code}`)}}return Promise.resolve(l).then(function(n){return r&&e._entityCollection.removeAll(),null!==n&&s(e,t,t,n,i),Promise.all(e._promises).then(function(){return e._promises.length=0,M.A.setLoading(e,!1),e})})}(e,t,i,s,n)}).catch(function(t){throw M.A.setLoading(e,!1),e._error.raiseEvent(e,t),t})}ce.load=function(e,t){return(new ce).load(e,t)},Object.defineProperties(ce,{markerSize:{get:function(){return F},set:function(e){F=e}},markerSymbol:{get:function(){return L},set:function(e){L=e}},markerColor:{get:function(){return N},set:function(e){N=e}},stroke:{get:function(){return V},set:function(e){V=e}},strokeWidth:{get:function(){return U},set:function(e){U=e}},fill:{get:function(){return z},set:function(e){z=e}},clampToGround:{get:function(){return G},set:function(e){G=e}},crsNames:{get:function(){return I}},crsLinkHrefs:{get:function(){return D}},crsLinkTypes:{get:function(){return B}}}),Object.defineProperties(ce.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,c.A)(e))throw new u.A("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}}}),ce.prototype.load=function(e,t){return ue(this,e,t,!0)},ce.prototype.process=function(e,t){return ue(this,e,t,!1)},ce.prototype.update=function(e){return!0};const de=ce},424620:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var n=i(41476),r=i(915325),o=i(491446),s=i(955943),a=i(591978),l=i(819488),c=i(46257);const u=n.A.WHITE,d=n.A.TRANSPARENT;function h(e){e=e??r.A.EMPTY_OBJECT,this._definitionChanged=new s.A,this._color=void 0,this._colorSubscription=void 0,this._gapColor=void 0,this._gapColorSubscription=void 0,this._dashLength=void 0,this._dashLengthSubscription=void 0,this._dashPattern=void 0,this._dashPatternSubscription=void 0,this.color=e.color,this.gapColor=e.gapColor,this.dashLength=e.dashLength,this.dashPattern=e.dashPattern}Object.defineProperties(h.prototype,{isConstant:{get:function(){return c.A.isConstant(this._color)&&c.A.isConstant(this._gapColor)&&c.A.isConstant(this._dashLength)&&c.A.isConstant(this._dashPattern)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,l.A)("color"),gapColor:(0,l.A)("gapColor"),dashLength:(0,l.A)("dashLength"),dashPattern:(0,l.A)("dashPattern")}),h.prototype.getType=function(e){return"PolylineDash"};const p=new a.A;h.prototype.getValue=function(e,t){return(0,o.A)(e)||(e=a.A.now(p)),(0,o.A)(t)||(t={}),t.color=c.A.getValueOrClonedDefault(this._color,e,u,t.color),t.gapColor=c.A.getValueOrClonedDefault(this._gapColor,e,d,t.gapColor),t.dashLength=c.A.getValueOrDefault(this._dashLength,e,16,t.dashLength),t.dashPattern=c.A.getValueOrDefault(this._dashPattern,e,255,t.dashPattern),t},h.prototype.equals=function(e){return this===e||e instanceof h&&c.A.equals(this._color,e._color)&&c.A.equals(this._gapColor,e._gapColor)&&c.A.equals(this._dashLength,e._dashLength)&&c.A.equals(this._dashPattern,e._dashPattern)};const f=h},629606:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var n=i(702247),r=i(376758),o=i(915325),s=i(491446),a=i(605971),l=i(744603),c=i(33138),u=i(470622);function d(e){this._style={},this._ready=!1,this._show=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._labelColor=void 0,this._labelOutlineColor=void 0,this._labelOutlineWidth=void 0,this._font=void 0,this._labelStyle=void 0,this._labelText=void 0,this._backgroundColor=void 0,this._backgroundPadding=void 0,this._backgroundEnabled=void 0,this._scaleByDistance=void 0,this._translucencyByDistance=void 0,this._distanceDisplayCondition=void 0,this._heightOffset=void 0,this._anchorLineEnabled=void 0,this._anchorLineColor=void 0,this._image=void 0,this._disableDepthTestDistance=void 0,this._horizontalOrigin=void 0,this._verticalOrigin=void 0,this._labelHorizontalOrigin=void 0,this._labelVerticalOrigin=void 0,this._meta=void 0,this._colorShaderFunction=void 0,this._showShaderFunction=void 0,this._pointSizeShaderFunction=void 0,this._colorShaderFunctionReady=!1,this._showShaderFunctionReady=!1,this._pointSizeShaderFunctionReady=!1,this._colorShaderTranslucent=!1,function(e,t){t=(0,r.A)(t,!0)??e._style,e._style=t,e.show=t.show,e.color=t.color,e.pointSize=t.pointSize,e.pointOutlineColor=t.pointOutlineColor,e.pointOutlineWidth=t.pointOutlineWidth,e.labelColor=t.labelColor,e.labelOutlineColor=t.labelOutlineColor,e.labelOutlineWidth=t.labelOutlineWidth,e.labelStyle=t.labelStyle,e.font=t.font,e.labelText=t.labelText,e.backgroundColor=t.backgroundColor,e.backgroundPadding=t.backgroundPadding,e.backgroundEnabled=t.backgroundEnabled,e.scaleByDistance=t.scaleByDistance,e.translucencyByDistance=t.translucencyByDistance,e.distanceDisplayCondition=t.distanceDisplayCondition,e.heightOffset=t.heightOffset,e.anchorLineEnabled=t.anchorLineEnabled,e.anchorLineColor=t.anchorLineColor,e.image=t.image,e.disableDepthTestDistance=t.disableDepthTestDistance,e.horizontalOrigin=t.horizontalOrigin,e.verticalOrigin=t.verticalOrigin,e.labelHorizontalOrigin=t.labelHorizontalOrigin,e.labelVerticalOrigin=t.labelVerticalOrigin;const i={};if((0,s.A)(t.meta)){const e=t.defines,n=t.meta??o.A.EMPTY_OBJECT;for(const t in n)n.hasOwnProperty(t)&&(i[t]=new u.A(n[t],e))}e._meta=i,e._ready=!0}(this,e)}function h(e,t){const i=(e._style??o.A.EMPTY_OBJECT).defines;if((0,s.A)(t))return"boolean"==typeof t||"number"==typeof t?new u.A(String(t)):"string"==typeof t?new u.A(t,i):(0,s.A)(t.conditions)?new c.A(t,i):t}function p(e){if((0,s.A)(e))return(0,s.A)(e.expression)?e.expression:(0,s.A)(e.conditionsExpression)?(0,r.A)(e.conditionsExpression,!0):e}Object.defineProperties(d.prototype,{style:{get:function(){return this._style}},show:{get:function(){return this._show},set:function(e){this._show=h(this,e),this._style.show=p(this._show),this._showShaderFunctionReady=!1}},color:{get:function(){return this._color},set:function(e){this._color=h(this,e),this._style.color=p(this._color),this._colorShaderFunctionReady=!1}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=h(this,e),this._style.pointSize=p(this._pointSize),this._pointSizeShaderFunctionReady=!1}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=h(this,e),this._style.pointOutlineColor=p(this._pointOutlineColor)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=h(this,e),this._style.pointOutlineWidth=p(this._pointOutlineWidth)}},labelColor:{get:function(){return this._labelColor},set:function(e){this._labelColor=h(this,e),this._style.labelColor=p(this._labelColor)}},labelOutlineColor:{get:function(){return this._labelOutlineColor},set:function(e){this._labelOutlineColor=h(this,e),this._style.labelOutlineColor=p(this._labelOutlineColor)}},labelOutlineWidth:{get:function(){return this._labelOutlineWidth},set:function(e){this._labelOutlineWidth=h(this,e),this._style.labelOutlineWidth=p(this._labelOutlineWidth)}},font:{get:function(){return this._font},set:function(e){this._font=h(this,e),this._style.font=p(this._font)}},labelStyle:{get:function(){return this._labelStyle},set:function(e){this._labelStyle=h(this,e),this._style.labelStyle=p(this._labelStyle)}},labelText:{get:function(){return this._labelText},set:function(e){this._labelText=h(this,e),this._style.labelText=p(this._labelText)}},backgroundColor:{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=h(this,e),this._style.backgroundColor=p(this._backgroundColor)}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(e){this._backgroundPadding=h(this,e),this._style.backgroundPadding=p(this._backgroundPadding)}},backgroundEnabled:{get:function(){return this._backgroundEnabled},set:function(e){this._backgroundEnabled=h(this,e),this._style.backgroundEnabled=p(this._backgroundEnabled)}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){this._scaleByDistance=h(this,e),this._style.scaleByDistance=p(this._scaleByDistance)}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){this._translucencyByDistance=h(this,e),this._style.translucencyByDistance=p(this._translucencyByDistance)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){this._distanceDisplayCondition=h(this,e),this._style.distanceDisplayCondition=p(this._distanceDisplayCondition)}},heightOffset:{get:function(){return this._heightOffset},set:function(e){this._heightOffset=h(this,e),this._style.heightOffset=p(this._heightOffset)}},anchorLineEnabled:{get:function(){return this._anchorLineEnabled},set:function(e){this._anchorLineEnabled=h(this,e),this._style.anchorLineEnabled=p(this._anchorLineEnabled)}},anchorLineColor:{get:function(){return this._anchorLineColor},set:function(e){this._anchorLineColor=h(this,e),this._style.anchorLineColor=p(this._anchorLineColor)}},image:{get:function(){return this._image},set:function(e){this._image=h(this,e),this._style.image=p(this._image)}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){this._disableDepthTestDistance=h(this,e),this._style.disableDepthTestDistance=p(this._disableDepthTestDistance)}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){this._horizontalOrigin=h(this,e),this._style.horizontalOrigin=p(this._horizontalOrigin)}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){this._verticalOrigin=h(this,e),this._style.verticalOrigin=p(this._verticalOrigin)}},labelHorizontalOrigin:{get:function(){return this._labelHorizontalOrigin},set:function(e){this._labelHorizontalOrigin=h(this,e),this._style.labelHorizontalOrigin=p(this._labelHorizontalOrigin)}},labelVerticalOrigin:{get:function(){return this._labelVerticalOrigin},set:function(e){this._labelVerticalOrigin=h(this,e),this._style.labelVerticalOrigin=p(this._labelVerticalOrigin)}},meta:{get:function(){return this._meta},set:function(e){this._meta=e}}}),d.fromUrl=function(e){if(!(0,s.A)(e))throw new a.A("url is required");return l.A.createIfNeeded(e).fetchJson(e).then(function(e){return new d(e)})},d.prototype.getColorShaderFunction=function(e,t,i){return this._colorShaderFunctionReady?(i.translucent=this._colorShaderTranslucent,this._colorShaderFunction):(this._colorShaderFunctionReady=!0,(0,s.A)(this.color)&&(0,s.A)(this.color.getShaderFunction)?this._colorShaderFunction=this.color.getShaderFunction(e,t,i,"vec4"):this._colorShaderFunction=void 0,this._colorShaderTranslucent=i.translucent,this._colorShaderFunction)},d.prototype.getShowShaderFunction=function(e,t,i){return this._showShaderFunctionReady||(this._showShaderFunctionReady=!0,(0,s.A)(this.show)&&(0,s.A)(this.show.getShaderFunction)?this._showShaderFunction=this.show.getShaderFunction(e,t,i,"bool"):this._showShaderFunction=void 0),this._showShaderFunction},d.prototype.getPointSizeShaderFunction=function(e,t,i){return this._pointSizeShaderFunctionReady||(this._pointSizeShaderFunctionReady=!0,(0,s.A)(this.pointSize)&&(0,s.A)(this.pointSize.getShaderFunction)?this._pointSizeShaderFunction=this.pointSize.getShaderFunction(e,t,i,"float"):this._pointSizeShaderFunction=void 0),this._pointSizeShaderFunction},d.prototype.getVariables=function(){let e=[];return(0,s.A)(this.color)&&(0,s.A)(this.color.getVariables)&&(0,n.A)(e,this.color.getVariables()),(0,s.A)(this.show)&&(0,s.A)(this.show.getVariables)&&(0,n.A)(e,this.show.getVariables()),(0,s.A)(this.pointSize)&&(0,s.A)(this.pointSize.getVariables)&&(0,n.A)(e,this.pointSize.getVariables()),e=e.filter(function(e,t,i){return i.indexOf(e)===t}),e};const f=d},33138:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var n=i(702247),r=i(376758),o=i(491446),s=i(470622);function a(e,t){this._conditionsExpression=(0,r.A)(e,!0),this._conditions=e.conditions,this._runtimeConditions=void 0,function(e,t){const i=[],n=e._conditions;if(!(0,o.A)(n))return;const r=n.length;for(let e=0;e<r;++e){const r=n[e],o=String(r[0]),a=String(r[1]);i.push(new l(new s.A(o,t),new s.A(a,t)))}e._runtimeConditions=i}(this,t)}function l(e,t){this.condition=e,this.expression=t}Object.defineProperties(a.prototype,{conditionsExpression:{get:function(){return this._conditionsExpression}}}),a.prototype.evaluate=function(e,t){const i=this._runtimeConditions;if(!(0,o.A)(i))return;const n=i.length;for(let r=0;r<n;++r){const n=i[r];if(n.condition.evaluate(e))return n.expression.evaluate(e,t)}},a.prototype.evaluateColor=function(e,t){const i=this._runtimeConditions;if(!(0,o.A)(i))return;const n=i.length;for(let r=0;r<n;++r){const n=i[r];if(n.condition.evaluate(e))return n.expression.evaluateColor(e,t)}},a.prototype.getShaderFunction=function(e,t,i,n){const r=this._runtimeConditions;if(!(0,o.A)(r)||0===r.length)return;let s="";const a=r.length;for(let e=0;e<a;++e){const n=r[e];s+=`    ${0===e?"if":"else if"} (${n.condition.getShaderExpression(t,i)})\n    {\n        return ${n.expression.getShaderExpression(t,i)};\n    }\n`}return s=`${n} ${e}\n{\n${s}    return ${n}(1.0);\n}\n`,s},a.prototype.getVariables=function(){let e=[];const t=this._runtimeConditions;if(!(0,o.A)(t)||0===t.length)return e;const i=t.length;for(let r=0;r<i;++r){const i=t[r];(0,n.A)(e,i.condition.getVariables()),(0,n.A)(e,i.expression.getVariables())}return e=e.filter(function(e,t,i){return i.indexOf(e)===t}),e};const c=a},952392:(e,t,i)=>{"use strict";function n(e){}i.d(t,{A:()=>r}),n.prototype.isReady=function(){return!0},n.prototype.shouldDiscardImage=function(e){return!1};const r=n},627680:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AlphaMode:()=>dw.A,AlphaPipelineStage:()=>OR.A,AnchorPointDirect:()=>LL.A,AnchorPointIndirect:()=>FL.A,Animation:()=>iF.A,AnimationViewModel:()=>nF.A,Appearance:()=>hw.A,ApproximateTerrainHeights:()=>Cm.A,ArcGISTiledElevationTerrainProvider:()=>Gm,ArcGisBaseMapType:()=>pw.A,ArcGisMapServerImageryProvider:()=>fw.A,ArcGisMapService:()=>mw.A,ArcType:()=>Je.A,ArticulationStageType:()=>Km.A,AssociativeArray:()=>fa.A,Atmosphere:()=>gw.A,AtmospherePipelineStage:()=>RR.A,AttributeCompression:()=>qm.A,AttributeType:()=>Aw.A,AutoExposure:()=>_w.A,AutomaticUniforms:()=>n.A,Axis:()=>yw.A,AxisAlignedBoundingBox:()=>Hm.A,B3dmLoader:()=>IR.A,B3dmParser:()=>vw.A,BaseLayerPicker:()=>rF.A,BaseLayerPickerViewModel:()=>oF.A,BatchTable:()=>ww.A,BatchTableHierarchy:()=>bw.A,BatchTexture:()=>xw.A,BatchTexturePipelineStage:()=>DR.A,Billboard:()=>Tw.A,BillboardCollection:()=>Sw.A,BillboardGraphics:()=>oe.A,BillboardLoadState:()=>Cw.A,BillboardTexture:()=>Mw.A,BillboardVisualizer:()=>se.A,BingMapsGeocoderService:()=>$m,BingMapsImageryProvider:()=>Ew.A,BingMapsStyle:()=>Pw.A,BlendEquation:()=>kw.A,BlendFunction:()=>Ow.A,BlendOption:()=>Rw.A,BlendingState:()=>Iw.A,BoundingRectangle:()=>Qe.A,BoundingSphere:()=>ih.A,BoundingSphereState:()=>ae.A,BoundingVolumeSemantics:()=>Dw.A,BoxEmitter:()=>Nw,BoxGeometry:()=>Xm.A,BoxGeometryUpdater:()=>le.A,BoxGraphics:()=>ce.A,BoxOutlineGeometry:()=>Ym.A,BrdfLutGenerator:()=>Vw.A,Buffer:()=>r.A,BufferLoader:()=>Uw.A,BufferUsage:()=>o.A,CPUStylingPipelineStage:()=>BR.A,CallbackPositionProperty:()=>ue.A,CallbackProperty:()=>de.A,Camera:()=>zw.A,CameraEventAggregator:()=>Gw.A,CameraEventType:()=>Kw.A,CameraFlightPath:()=>qw.A,Cartesian2:()=>fe.A,Cartesian3:()=>D.A,Cartesian4:()=>Zm.A,CartesianRectangle:()=>LR.A,Cartographic:()=>et.A,CartographicGeocoderService:()=>Qm,CatmullRomSpline:()=>cg,Cesium3DContentGroup:()=>Hw.A,Cesium3DTile:()=>Ww.A,Cesium3DTileBatchTable:()=>jw.A,Cesium3DTileColorBlendMode:()=>$w.A,Cesium3DTileContent:()=>Yw,Cesium3DTileContentFactory:()=>Zw.A,Cesium3DTileContentState:()=>Jw.A,Cesium3DTileContentType:()=>Qw.A,Cesium3DTileFeature:()=>eb.A,Cesium3DTileFeatureTable:()=>tb.A,Cesium3DTileOptimizationHint:()=>ib.A,Cesium3DTileOptimizations:()=>nb.A,Cesium3DTilePass:()=>rb.A,Cesium3DTilePassState:()=>ob.A,Cesium3DTilePointFeature:()=>sb.A,Cesium3DTileRefine:()=>ab.A,Cesium3DTileStyle:()=>lb.A,Cesium3DTileStyleEngine:()=>cb.A,Cesium3DTilesInspector:()=>xF,Cesium3DTilesInspectorViewModel:()=>wF,Cesium3DTilesVoxelProvider:()=>Pb,Cesium3DTileset:()=>kb.A,Cesium3DTilesetBaseTraversal:()=>Ob.A,Cesium3DTilesetCache:()=>Rb.A,Cesium3DTilesetGraphics:()=>he.A,Cesium3DTilesetHeatmap:()=>Ib.A,Cesium3DTilesetMetadata:()=>ub.A,Cesium3DTilesetMostDetailedTraversal:()=>Db.A,Cesium3DTilesetSkipTraversal:()=>Bb.A,Cesium3DTilesetStatistics:()=>Lb.A,Cesium3DTilesetTraversal:()=>Fb.A,Cesium3DTilesetVisualizer:()=>pe.A,CesiumInspector:()=>DF,CesiumInspectorViewModel:()=>RF,CesiumTerrainProvider:()=>ug.A,CesiumWidget:()=>uw.A,Check:()=>B.A,CheckerboardMaterialProperty:()=>Se,CircleEmitter:()=>Vb,CircleGeometry:()=>gg,CircleOutlineGeometry:()=>wg,ClassificationModelDrawCommand:()=>FR.A,ClassificationPipelineStage:()=>NR.A,ClassificationPrimitive:()=>Ub.A,ClassificationType:()=>Et.A,ClearCommand:()=>s.A,ClippingPlane:()=>zb.A,ClippingPlaneCollection:()=>Gb.A,ClippingPolygon:()=>Kb.A,ClippingPolygonCollection:()=>qb.A,Clock:()=>Ft.A,ClockRange:()=>tt.A,ClockStep:()=>it.A,ClockViewModel:()=>XL.A,CloudCollection:()=>Rx,CloudType:()=>Wb,Color:()=>me.A,ColorBlendMode:()=>Pt.A,ColorGeometryInstanceAttribute:()=>bg.A,ColorMaterialProperty:()=>Ce.A,Command:()=>YL,ComponentDatatype:()=>xg.A,Composite3DTileContent:()=>Ix.A,CompositeEntityCollection:()=>Ve,CompositeMaterialProperty:()=>Ke,CompositePositionProperty:()=>qe.A,CompositeProperty:()=>Ue.A,CompressedTextureBuffer:()=>Tg.A,ComputeCommand:()=>a.A,ComputeEngine:()=>l.A,ConditionsExpression:()=>Dx.A,ConeEmitter:()=>Fx,ConstantPositionProperty:()=>He.A,ConstantProperty:()=>We.A,ConstantSpline:()=>Sg.A,ContentMetadata:()=>Nx.A,Context:()=>c.A,ContextLimits:()=>u.A,CoplanarPolygonGeometry:()=>Cg.A,CoplanarPolygonGeometryLibrary:()=>Mg.A,CoplanarPolygonOutlineGeometry:()=>Eg.A,CornerType:()=>nt.A,CorrelationGroup:()=>NL.A,CorridorGeometry:()=>Pg.A,CorridorGeometryLibrary:()=>kg.A,CorridorGeometryUpdater:()=>je.A,CorridorGraphics:()=>$e.A,CorridorOutlineGeometry:()=>Og.A,Credit:()=>rt.A,CreditDisplay:()=>Vx.A,CubeMap:()=>d.A,CubeMapFace:()=>h.A,CubicRealPolynomial:()=>Rg.A,CullFace:()=>Ux.A,CullingVolume:()=>Ig.A,CumulusCloud:()=>ix,CustomDataSource:()=>Xe.A,CustomHeightmapTerrainProvider:()=>Bg,CustomShader:()=>VR.A,CustomShaderMode:()=>UR.A,CustomShaderPipelineStage:()=>zR.A,CustomShaderTranslucencyMode:()=>GR.A,CylinderGeometry:()=>Lg.A,CylinderGeometryLibrary:()=>Fg.A,CylinderGeometryUpdater:()=>Ye.A,CylinderGraphics:()=>Ze.A,CylinderOutlineGeometry:()=>Ng.A,CzmlDataSource:()=>Xn,DataSource:()=>Lt.A,DataSourceClock:()=>Ut,DataSourceCollection:()=>Yn.A,DataSourceDisplay:()=>Zn.A,DebugAppearance:()=>Gx,DebugCameraPrimitive:()=>Kx.A,DebugInspector:()=>qx.A,DebugModelMatrixPrimitive:()=>$x,DefaultProxy:()=>Vg.A,DepthFunction:()=>Xx.A,DepthPlane:()=>Yx.A,DequantizationPipelineStage:()=>KR.A,DerivedCommand:()=>Zx.A,DeveloperError:()=>U.A,DeviceOrientationCameraController:()=>Jx.A,DirectionalLight:()=>Qx.A,DiscardEmptyTileImagePolicy:()=>eT.A,DiscardMissingTileImagePolicy:()=>tT.A,DistanceDisplayCondition:()=>ot.A,DistanceDisplayConditionGeometryInstanceAttribute:()=>Ug.A,DoubleEndedPriorityQueue:()=>zg.A,DoublyLinkedList:()=>Gg.A,DracoLoader:()=>iT.A,DrawCommand:()=>p.A,DynamicAtmosphereLightingType:()=>nT.A,DynamicEnvironmentMapManager:()=>rT.A,DynamicGeometryBatch:()=>Jn.A,DynamicGeometryUpdater:()=>Qn.A,EarthOrientationParameters:()=>Kg.A,EarthOrientationParametersSample:()=>qg.A,EasingFunction:()=>rh.A,EllipseGeometry:()=>dg.A,EllipseGeometryLibrary:()=>Hg.A,EllipseGeometryUpdater:()=>er.A,EllipseGraphics:()=>zt.A,EllipseOutlineGeometry:()=>Ag.A,Ellipsoid:()=>st.A,EllipsoidGeodesic:()=>Wg.A,EllipsoidGeometry:()=>jg.A,EllipsoidGeometryUpdater:()=>tr.A,EllipsoidGraphics:()=>Gt.A,EllipsoidOutlineGeometry:()=>$g.A,EllipsoidPrimitive:()=>oT.A,EllipsoidRhumbLine:()=>Xg.A,EllipsoidSurfaceAppearance:()=>uT,EllipsoidTangentPlane:()=>Yg.A,EllipsoidTerrainProvider:()=>Zg.A,EllipsoidalOccluder:()=>Jg.A,Empty3DTileContent:()=>dT.A,EncodedCartesian3:()=>Qg.A,Entity:()=>Ee.A,EntityCluster:()=>Kt.A,EntityCollection:()=>Pe.A,EntityView:()=>ir.A,Event:()=>ge.A,EventHelper:()=>yi.A,Expression:()=>hT.A,ExpressionNodeType:()=>pT.A,ExtrapolationType:()=>at.A,FeatureDetection:()=>eA.A,FeatureIdPipelineStage:()=>qR.A,Fog:()=>fT.A,ForEach:()=>aR.A,FrameRateMonitor:()=>gT,FrameState:()=>AT.A,Framebuffer:()=>f.A,FramebufferManager:()=>m.A,Frozen:()=>F.A,FrustumCommands:()=>_T.A,FrustumGeometry:()=>tA.A,FrustumOutlineGeometry:()=>iA.A,Fullscreen:()=>nA.A,FullscreenButton:()=>TF.A,FullscreenButtonViewModel:()=>SF.A,GaussianSplat3DTileContent:()=>yT.A,GaussianSplatPrimitive:()=>vT.A,GaussianSplatRenderResources:()=>wT.A,GaussianSplatSorter:()=>bT.A,GaussianSplatTextureGenerator:()=>xT.A,GeoJsonDataSource:()=>nr.A,GeoJsonLoader:()=>HR.A,GeocodeType:()=>rA.A,Geocoder:()=>CF.A,GeocoderService:()=>oA.A,GeocoderViewModel:()=>MF.A,GeographicProjection:()=>sA.A,GeographicTilingScheme:()=>Mm.A,Geometry:()=>aA.A,Geometry3DTileContent:()=>TT.A,GeometryAttribute:()=>lA.A,GeometryAttributes:()=>cA.A,GeometryFactory:()=>dA,GeometryInstance:()=>hA.A,GeometryInstanceAttribute:()=>pA.A,GeometryOffsetAttribute:()=>fA.A,GeometryPipeline:()=>mA.A,GeometryPipelineStage:()=>WR.A,GeometryType:()=>gA.A,GeometryUpdater:()=>rr.A,GeometryUpdaterSet:()=>or.A,GeometryVisualizer:()=>sr.A,GetFeatureInfoFormat:()=>ST.A,Globe:()=>CT.A,GlobeDepth:()=>MT.A,GlobeSurfaceShaderSet:()=>ET.A,GlobeSurfaceTile:()=>PT.A,GlobeSurfaceTileProvider:()=>kT.A,GlobeTranslucency:()=>OT.A,GlobeTranslucencyFramebuffer:()=>RT.A,GlobeTranslucencyState:()=>IT.A,GltfBufferViewLoader:()=>DT.A,GltfDracoLoader:()=>BT.A,GltfGpmLoader:()=>VL.A,GltfGpmLocal:()=>UL.A,GltfImageLoader:()=>LT.A,GltfIndexBufferLoader:()=>FT.A,GltfJsonLoader:()=>NT.A,GltfLoader:()=>VT.A,GltfLoaderUtil:()=>UT.A,GltfMeshPrimitiveGpmLoader:()=>zL.A,GltfSpzLoader:()=>zT.A,GltfStructuralMetadataLoader:()=>GT.A,GltfTextureLoader:()=>KT.A,GltfVertexBufferLoader:()=>qT.A,GoogleEarthEnterpriseImageryProvider:()=>jT,GoogleEarthEnterpriseMapsProvider:()=>$T.A,GoogleEarthEnterpriseMetadata:()=>RA,GoogleEarthEnterpriseTerrainData:()=>i_,GoogleEarthEnterpriseTerrainProvider:()=>l_,GoogleEarthEnterpriseTileInformation:()=>bA,GoogleGeocoderService:()=>d_,GoogleMaps:()=>p_,GpxDataSource:()=>da,GregorianDate:()=>f_.A,GridImageryProvider:()=>QT,GridMaterialProperty:()=>Yt,GroundGeometryUpdater:()=>ha.A,GroundPolylineGeometry:()=>m_.A,GroundPolylinePrimitive:()=>eS.A,GroundPrimitive:()=>tS.A,GroupMetadata:()=>iS.A,HeadingPitchRange:()=>va.A,HeadingPitchRoll:()=>wa.A,Heap:()=>g_.A,HeightReference:()=>kt.Ay,HeightmapEncoding:()=>Em.A,HeightmapTerrainData:()=>Pm.A,HeightmapTessellator:()=>A_.A,HermitePolynomialApproximation:()=>pt,HermiteSpline:()=>eg.A,HilbertOrder:()=>__.A,HomeButton:()=>BF.A,HomeButtonViewModel:()=>LF.A,HorizontalOrigin:()=>Ot.A,I3SBuildingSceneLayerExplorer:()=>qF,I3SBuildingSceneLayerExplorerViewModel:()=>KF,I3SDataProvider:()=>JS,I3SDecoder:()=>rS,I3SFeature:()=>sS,I3SField:()=>uS,I3SGeometry:()=>PS,I3SLayer:()=>KS,I3SNode:()=>LS,I3SStatistics:()=>HS,I3SSublayer:()=>jS,I3SSymbology:()=>zS,I3dmLoader:()=>jR.A,I3dmParser:()=>QS.A,ITwinData:()=>eC,ITwinPlatform:()=>v_,Iau2000Orientation:()=>w_.A,Iau2006XysData:()=>b_.A,Iau2006XysSample:()=>x_.A,IauOrientationAxes:()=>T_.A,IauOrientationParameters:()=>S_.A,ImageBasedLighting:()=>tC.A,ImageBasedLightingPipelineStage:()=>$R.A,ImageMaterialProperty:()=>Zt.A,Imagery:()=>iC.A,ImageryConfiguration:()=>XR.A,ImageryCoverage:()=>YR.A,ImageryFlags:()=>ZR.A,ImageryInput:()=>JR.A,ImageryLayer:()=>nC.A,ImageryLayerCollection:()=>rC.A,ImageryLayerFeatureInfo:()=>oC.A,ImageryPipelineStage:()=>QR.A,ImageryProvider:()=>sC.A,ImageryState:()=>aC.A,Implicit3DTileContent:()=>lC.A,ImplicitAvailabilityBitstream:()=>cC.A,ImplicitMetadataView:()=>uC.A,ImplicitSubdivisionScheme:()=>dC.A,ImplicitSubtree:()=>hb.A,ImplicitSubtreeCache:()=>mb,ImplicitSubtreeMetadata:()=>hC.A,ImplicitTileCoordinates:()=>gb.A,ImplicitTileset:()=>Ab.A,IndexDatatype:()=>IA.A,InfoBox:()=>jF.A,InfoBoxViewModel:()=>$F.A,InspectorShared:()=>ZL,InstanceAttributeSemantic:()=>pC.A,InstancingPipelineStage:()=>eI.A,InterpolationAlgorithm:()=>M_,InterpolationType:()=>E_.A,Intersect:()=>P_.A,IntersectionTests:()=>k_.A,Intersections2D:()=>DA.A,Interval:()=>O_.A,InvertClassification:()=>fC.A,Ion:()=>R_.A,IonGeocodeProviderType:()=>I_.A,IonGeocoderService:()=>D_.A,IonImageryProvider:()=>mC.A,IonResource:()=>B_.A,IonWorldImageryStyle:()=>gC.A,Iso8601:()=>ft.A,JobScheduler:()=>AC.A,JobType:()=>_C.A,JsonMetadataTable:()=>yC.A,JulianDate:()=>Ae.A,KTX2Transcoder:()=>L_.A,KeyboardEventModifier:()=>F_.A,KeyframeNode:()=>vC.A,KmlCamera:()=>pa,KmlDataSource:()=>Sp,KmlLookAt:()=>Yd,KmlTour:()=>th,KmlTourFlyTo:()=>sh,KmlTourWait:()=>lh,Label:()=>wC.A,LabelCollection:()=>bC.A,LabelGraphics:()=>Jt.A,LabelStyle:()=>Rt.A,LabelVisualizer:()=>Cp.A,LagrangePolynomialApproximation:()=>mt,LeapSecond:()=>N_.A,Light:()=>TC,LightingModel:()=>tI.A,LightingPipelineStage:()=>iI.A,LinearApproximation:()=>gt.A,LinearSpline:()=>V_.A,ManagedArray:()=>U_.A,MapMode2D:()=>SC.A,MapProjection:()=>G_,MapboxImageryProvider:()=>CC.A,MapboxStyleImageryProvider:()=>OC,MappedPositions:()=>nI.A,Material:()=>lT.A,MaterialAppearance:()=>RC.A,MaterialPipelineStage:()=>rI.A,MaterialProperty:()=>Mp.A,Math:()=>Me.A,Matrix2:()=>K_.A,Matrix3:()=>Ki.A,Matrix4:()=>tg.A,Megatexture:()=>IC.A,MeshPrimitiveGpmLocal:()=>GL.A,MetadataClass:()=>DC.A,MetadataClassProperty:()=>BC.A,MetadataComponentType:()=>LC.A,MetadataEntity:()=>FC.A,MetadataEnum:()=>NC.A,MetadataEnumValue:()=>VC.A,MetadataPicking:()=>UC.A,MetadataPickingPipelineStage:()=>oI.A,MetadataPipelineStage:()=>sI.A,MetadataSchema:()=>zC.A,MetadataSchemaLoader:()=>GC.A,MetadataSemantic:()=>_b.A,MetadataTable:()=>KC.A,MetadataTableProperty:()=>qC.A,MetadataType:()=>yb.A,MipmapHint:()=>g.A,Model:()=>aI.A,Model3DTileContent:()=>lI.A,ModelAlphaOptions:()=>cI.A,ModelAnimation:()=>uI.A,ModelAnimationChannel:()=>dI.A,ModelAnimationCollection:()=>hI.A,ModelAnimationLoop:()=>HC.A,ModelAnimationState:()=>WC.A,ModelArticulation:()=>pI.A,ModelArticulationStage:()=>fI.A,ModelClippingPlanesPipelineStage:()=>mI.A,ModelClippingPolygonsPipelineStage:()=>gI.A,ModelColorPipelineStage:()=>AI.A,ModelComponents:()=>jC.A,ModelDrawCommand:()=>_I.A,ModelDrawCommands:()=>yI.A,ModelFeature:()=>vI.A,ModelFeatureTable:()=>wI.A,ModelGraphics:()=>Qt.A,ModelImagery:()=>bI.A,ModelImageryMapping:()=>xI.A,ModelLightingOptions:()=>TI.A,ModelMatrixUpdateStage:()=>SI.A,ModelNode:()=>CI.A,ModelPrimitiveImagery:()=>MI.A,ModelReader:()=>EI.A,ModelRenderResources:()=>PI.A,ModelRuntimeNode:()=>kI.A,ModelRuntimePrimitive:()=>OI.A,ModelSceneGraph:()=>RI.A,ModelSilhouettePipelineStage:()=>II.A,ModelSkin:()=>DI.A,ModelSplitterPipelineStage:()=>BI.A,ModelStatistics:()=>LI.A,ModelType:()=>FI.A,ModelUtility:()=>NI.A,ModelVisualizer:()=>Ep.A,Moon:()=>$C.A,MorphTargetsPipelineStage:()=>VI.A,MorphWeightSpline:()=>H_,MortonOrder:()=>W_.A,Multiple3DTileContent:()=>XC.A,MultisampleFramebuffer:()=>A.A,NavigationHelpButton:()=>HF.A,NavigationHelpButtonViewModel:()=>WF.A,NearFarScalar:()=>At.A,NeverTileDiscardPolicy:()=>YC.A,NodeRenderResources:()=>UI.A,NodeStatisticsPipelineStage:()=>zI.A,NodeTransformationProperty:()=>ei.A,OIT:()=>ZC.A,Occluder:()=>j_.A,OffsetGeometryInstanceAttribute:()=>$_.A,OpenCageGeocoderService:()=>Y_,OpenStreetMapImageryProvider:()=>JC.A,OrderedGroundPrimitiveCollection:()=>QC.A,OrientedBoundingBox:()=>BA.A,OrthographicFrustum:()=>Z_.A,OrthographicOffCenterFrustum:()=>J_.A,Packable:()=>Q_,PackableForInterpolation:()=>ey,Particle:()=>nM,ParticleBurst:()=>oM,ParticleEmitter:()=>aM,ParticleSystem:()=>gM,Pass:()=>_.A,PassState:()=>y.A,PathGraphics:()=>ti.A,PathVisualizer:()=>Pp.A,PeliasGeocoderService:()=>ty.A,PerInstanceColorAppearance:()=>AM.A,PerformanceDisplay:()=>_M.A,PerformanceWatchdog:()=>eN,PerformanceWatchdogViewModel:()=>JF,PerspectiveFrustum:()=>iy.A,PerspectiveOffCenterFrustum:()=>ny.A,PickDepth:()=>yM.A,PickDepthFramebuffer:()=>vM.A,PickFramebuffer:()=>wM.A,PickedMetadataInfo:()=>bM.A,Picking:()=>xM.A,PickingPipelineStage:()=>GI.A,PinBuilder:()=>ar.A,PixelDatatype:()=>v.A,PixelFormat:()=>z.A,Plane:()=>ry.A,PlaneGeometry:()=>oy.A,PlaneGeometryUpdater:()=>kp.A,PlaneGraphics:()=>Op.A,PlaneOutlineGeometry:()=>sy.A,PntsLoader:()=>KI.A,PntsParser:()=>TM.A,PointCloud:()=>SM.A,PointCloudEyeDomeLighting:()=>CM.A,PointCloudShading:()=>MM.A,PointCloudStylingPipelineStage:()=>qI.A,PointGraphics:()=>ii.A,PointPrimitive:()=>EM.A,PointPrimitiveCollection:()=>PM.A,PointVisualizer:()=>Rp.A,PolygonGeometry:()=>ay.A,PolygonGeometryLibrary:()=>ly.A,PolygonGeometryUpdater:()=>Ip.A,PolygonGraphics:()=>ni.A,PolygonHierarchy:()=>_t.A,PolygonOutlineGeometry:()=>cy.A,PolygonPipeline:()=>uy.A,Polyline:()=>kM.A,PolylineArrowMaterialProperty:()=>si,PolylineCollection:()=>OM.A,PolylineColorAppearance:()=>Hx.A,PolylineDashMaterialProperty:()=>ai.A,PolylineGeometry:()=>dy.A,PolylineGeometryUpdater:()=>Dp.A,PolylineGlowMaterialProperty:()=>di,PolylineGraphics:()=>hi.A,PolylineMaterialAppearance:()=>RM.A,PolylineOutlineMaterialProperty:()=>Ai,PolylinePipeline:()=>hy.A,PolylineVisualizer:()=>Bp.A,PolylineVolumeGeometry:()=>py.A,PolylineVolumeGeometryLibrary:()=>fy.A,PolylineVolumeGeometryUpdater:()=>Lp.A,PolylineVolumeGraphics:()=>_i.A,PolylineVolumeOutlineGeometry:()=>my.A,PositionProperty:()=>Fp.A,PositionPropertyArray:()=>bi,PostProcessStage:()=>IM.A,PostProcessStageCollection:()=>DM.A,PostProcessStageComposite:()=>BM.A,PostProcessStageLibrary:()=>LM.A,PostProcessStageSampleMode:()=>FM.A,PostProcessStageTextureCache:()=>NM.A,PpeMetadata:()=>KL.A,PpeSource:()=>qL,PpeTexture:()=>HL.A,Primitive:()=>Wx.A,PrimitiveCollection:()=>VM.A,PrimitiveLoadPlan:()=>UM.A,PrimitiveOutlineGenerator:()=>HI.A,PrimitiveOutlinePipelineStage:()=>WI.A,PrimitivePipeline:()=>zM.A,PrimitiveRenderResources:()=>jI.A,PrimitiveState:()=>GM.A,PrimitiveStatisticsPipelineStage:()=>$I.A,PrimitiveType:()=>gy.A,ProjectionPicker:()=>XF.A,ProjectionPickerViewModel:()=>YF.A,Property:()=>ye.A,PropertyArray:()=>Si,PropertyAttribute:()=>KM.A,PropertyAttributeProperty:()=>qM.A,PropertyBag:()=>Ci.A,PropertyTable:()=>HM.A,PropertyTexture:()=>WM.A,PropertyTextureProperty:()=>jM.A,ProviderViewModel:()=>sF.A,Proxy:()=>_y,QuadraticRealPolynomial:()=>yy.A,QuadtreeOccluders:()=>$M.A,QuadtreePrimitive:()=>XM.A,QuadtreeTile:()=>YM.A,QuadtreeTileLoadState:()=>ZM.A,QuadtreeTileProvider:()=>QM,QuantizedMeshTerrainData:()=>LA.A,QuarticRealPolynomial:()=>vy.A,Quaternion:()=>yt.A,QuaternionSpline:()=>wy.A,Queue:()=>by.A,Ray:()=>xy.A,Rectangle:()=>vt.A,RectangleCollisionChecker:()=>Ty.A,RectangleGeometry:()=>Sy.A,RectangleGeometryLibrary:()=>Cy.A,RectangleGeometryUpdater:()=>Np.A,RectangleGraphics:()=>Mi.A,RectangleOutlineGeometry:()=>My.A,ReferenceFrame:()=>wt.A,ReferenceProperty:()=>Ei.A,RenderState:()=>w.A,Renderbuffer:()=>b.A,RenderbufferFormat:()=>x.A,Request:()=>km.A,RequestErrorEvent:()=>Ey.A,RequestScheduler:()=>Py.A,RequestState:()=>Om.A,RequestType:()=>Rm.A,Resource:()=>bt.A,ResourceCache:()=>wb.A,ResourceCacheKey:()=>eE.A,ResourceCacheStatistics:()=>tE.A,ResourceLoader:()=>iE.A,ResourceLoaderState:()=>nE.A,Rotation:()=>Pi,RuntimeError:()=>xt.A,S2Cell:()=>ky.A,SDFSettings:()=>rE.A,SampledPositionProperty:()=>ki.A,SampledProperty:()=>Oi.A,Sampler:()=>T.A,ScaledPositionProperty:()=>ch.A,Scene:()=>oE.A,SceneFramebuffer:()=>sE.A,SceneMode:()=>Sa.A,SceneMode2DPipelineStage:()=>XI.A,SceneModePicker:()=>nN.A,SceneModePickerViewModel:()=>rN.A,SceneTransforms:()=>aE.A,SceneTransitioner:()=>lE.A,ScreenSpaceCameraController:()=>cE.A,ScreenSpaceEventHandler:()=>Oy.A,ScreenSpaceEventType:()=>Ry.A,SelectedFeatureIdPipelineStage:()=>YI.A,SelectionIndicator:()=>tN.A,SelectionIndicatorViewModel:()=>iN.A,SensorVolumePortionToDisplay:()=>en,ShaderBuilder:()=>S.A,ShaderCache:()=>C.A,ShaderDestination:()=>M.A,ShaderFunction:()=>E.A,ShaderProgram:()=>P.A,ShaderSource:()=>k.A,ShaderStruct:()=>O.A,ShadowMap:()=>uE.A,ShadowMapShader:()=>dE.A,ShadowMode:()=>It.A,ShadowVolumeAppearance:()=>hE.A,SharedContext:()=>R.A,ShowGeometryInstanceAttribute:()=>Iy.A,Simon1994PlanetaryPositions:()=>Dy.A,SimplePolylineGeometry:()=>Uy,SingleTileImageryProvider:()=>pE.A,SkinningPipelineStage:()=>ZI.A,SkyAtmosphere:()=>fE.A,SkyBox:()=>mE.A,SpatialNode:()=>gE.A,Spdcf:()=>WL.A,SpecularEnvironmentCubeMap:()=>AE.A,SphereEmitter:()=>yE,SphereGeometry:()=>qy,SphereOutlineGeometry:()=>Hy.A,Spherical:()=>St,Spline:()=>ig.A,SplitDirection:()=>vE.A,Splitter:()=>wE.A,StaticGeometryColorBatch:()=>Vp.A,StaticGeometryPerMaterialBatch:()=>Up.A,StaticGroundGeometryColorBatch:()=>zp.A,StaticGroundGeometryPerMaterialBatch:()=>Gp.A,StaticGroundPolylinePerMaterialBatch:()=>Kp.A,StaticOutlineGeometryBatch:()=>qp.A,StencilConstants:()=>bE.A,StencilFunction:()=>xE.A,StencilOperation:()=>TE.A,SteppedSpline:()=>Wy.A,Stereographic:()=>jy.A,StorageType:()=>jL.A,StripeMaterialProperty:()=>Ni,StripeOrientation:()=>Ri,StructuralMetadata:()=>SE.A,StyleCommandsNeeded:()=>JI.A,StyleExpression:()=>ME,Sun:()=>EE.A,SunLight:()=>PE.A,SunPostProcess:()=>kE.A,SupportedImageFormats:()=>OE.A,SvgPathBindingHandler:()=>JL.A,TaskProcessor:()=>TA.A,Terrain:()=>RE.A,TerrainData:()=>FA.A,TerrainEncoding:()=>NA.A,TerrainFillMesh:()=>IE.A,TerrainMesh:()=>VA.A,TerrainOffsetProperty:()=>Hp.A,TerrainProvider:()=>Im.A,TerrainQuantization:()=>$y.A,TerrainState:()=>DE.A,Texture:()=>I.A,Texture3D:()=>j,TextureAtlas:()=>$.A,TextureCache:()=>X.A,TextureMagnificationFilter:()=>G.A,TextureManager:()=>QI.A,TextureMinificationFilter:()=>K.A,TexturePacker:()=>Xy.A,TextureUniform:()=>eD,TextureWrap:()=>Y.A,TileAvailability:()=>Dm.A,TileBoundingRegion:()=>BE.A,TileBoundingS2Cell:()=>LE.A,TileBoundingSphere:()=>FE.A,TileBoundingVolume:()=>VE,TileCoordinatesImageryProvider:()=>zE,TileDiscardPolicy:()=>KE,TileEdge:()=>Yy.A,TileImagery:()=>qE.A,TileMapServiceImageryProvider:()=>HE.A,TileMetadata:()=>WE.A,TileOrientedBoundingBox:()=>jE.A,TileProviderError:()=>Bm.A,TileReplacementQueue:()=>$E.A,TileSelectionResult:()=>XE.A,TileState:()=>YE,Tileset3DTileContent:()=>ZE.A,TilesetMetadata:()=>JE.A,TilesetPipelineStage:()=>tD.A,TilingScheme:()=>Jy,TimeConstants:()=>Qy.A,TimeDynamicImagery:()=>QE.A,TimeDynamicPointCloud:()=>eP.A,TimeInterval:()=>Ct.A,TimeIntervalCollection:()=>Mt.A,TimeIntervalCollectionPositionProperty:()=>Vi.A,TimeIntervalCollectionProperty:()=>Gi,TimeStandard:()=>ev.A,Timeline:()=>aN.A,TimelineHighlightRange:()=>lN.A,TimelineTrack:()=>cN.A,Tipsify:()=>tv.A,ToggleButtonViewModel:()=>QL.A,Tonemapper:()=>tP.A,TrackingReferenceFrame:()=>iv.A,Transforms:()=>qi.A,TranslationRotationScale:()=>nv.A,TranslucentTileClassification:()=>iP.A,TridiagonalSystemSolver:()=>rv.A,TrustedServers:()=>ov.A,TweenCollection:()=>nP.A,UniformState:()=>Z.A,UniformType:()=>iD.A,UrlTemplateImageryProvider:()=>MC.A,VERSION:()=>DN,VRButton:()=>uN.A,VRButtonViewModel:()=>dN.A,VRTheWorldTerrainProvider:()=>pv,VaryingType:()=>nD,Vector3DTileBatch:()=>rP.A,Vector3DTileClampedPolylines:()=>oP.A,Vector3DTileContent:()=>sP.A,Vector3DTileGeometry:()=>aP.A,Vector3DTilePoints:()=>lP.A,Vector3DTilePolygons:()=>cP.A,Vector3DTilePolylines:()=>uP.A,Vector3DTilePrimitive:()=>dP.A,VelocityOrientationProperty:()=>Zi,VelocityVectorProperty:()=>Hi.A,VertexArray:()=>J.A,VertexArrayFacade:()=>Q.A,VertexAttributeSemantic:()=>hP.A,VertexFormat:()=>hg.A,VerticalExaggeration:()=>fv.A,VerticalExaggerationPipelineStage:()=>rD.A,VerticalOrigin:()=>Dt.A,VideoSynchronizer:()=>gv,View:()=>pP.A,Viewer:()=>xN.A,ViewportQuad:()=>mP,Visibility:()=>Av.A,Visualizer:()=>jp,VoxelBoxShape:()=>gP.A,VoxelCell:()=>AP.A,VoxelContent:()=>bb.A,VoxelCylinderShape:()=>_P.A,VoxelEllipsoidShape:()=>yP.A,VoxelInspector:()=>bN,VoxelInspectorViewModel:()=>yN,VoxelMetadataOrder:()=>xb.A,VoxelPrimitive:()=>vP.A,VoxelProvider:()=>bP,VoxelRenderResources:()=>xP.A,VoxelShape:()=>SP,VoxelShapeType:()=>Tb.A,VoxelTraversal:()=>CP.A,VulkanConstants:()=>_v,WallGeometry:()=>yv.A,WallGeometryLibrary:()=>vv.A,WallGeometryUpdater:()=>$p.A,WallGraphics:()=>Ji.A,WallOutlineGeometry:()=>wv.A,WebGLConstants:()=>bv.A,WebMapServiceImageryProvider:()=>MP.A,WebMapTileServiceImageryProvider:()=>EP.A,WebMercatorProjection:()=>xv.A,WebMercatorTilingScheme:()=>Lm.A,WindingOrder:()=>Tv.A,WireframeIndexGenerator:()=>Sv.A,WireframePipelineStage:()=>oD.A,_shadersAcesTonemappingStage:()=>BO.A,_shadersAdditiveBlend:()=>LO.A,_shadersAdjustTranslucentFS:()=>Cf.A,_shadersAllMaterialAppearanceFS:()=>lk.A,_shadersAllMaterialAppearanceVS:()=>ck.A,_shadersAmbientOcclusionGenerate:()=>FO.A,_shadersAmbientOcclusionModulate:()=>NO.A,_shadersAspectRampMaterial:()=>vk.A,_shadersAtmosphereCommon:()=>Mf.A,_shadersAtmosphereStageFS:()=>Vk.A,_shadersAtmosphereStageVS:()=>Uk.A,_shadersBasicMaterialAppearanceFS:()=>uk.A,_shadersBasicMaterialAppearanceVS:()=>dk.A,_shadersBillboardCollectionFS:()=>Ef.A,_shadersBillboardCollectionVS:()=>Pf.A,_shadersBlackAndWhite:()=>VO.A,_shadersBloomComposite:()=>UO.A,_shadersBrdfLutGeneratorFS:()=>kf.A,_shadersBrightPass:()=>zO.A,_shadersBrightness:()=>GO.A,_shadersBumpMapMaterial:()=>wk.A,_shadersCPUStylingStageFS:()=>zk.A,_shadersCPUStylingStageVS:()=>Gk.A,_shadersCheckerboardMaterial:()=>bk.A,_shadersCloudCollectionFS:()=>Of,_shadersCloudCollectionVS:()=>Rf,_shadersCloudNoiseFS:()=>If,_shadersCloudNoiseVS:()=>Df,_shadersCompareAndPackTranslucentDepth:()=>Bf.A,_shadersCompositeOITFS:()=>Lf.A,_shadersCompositeTranslucentClassification:()=>KO.A,_shadersComputeIrradianceFS:()=>Ff.A,_shadersComputeRadianceMapFS:()=>Nf.A,_shadersContrastBias:()=>qO.A,_shadersConvolveSpecularMapFS:()=>Vf.A,_shadersConvolveSpecularMapVS:()=>Uf.A,_shadersCustomShaderStageFS:()=>Kk.A,_shadersCustomShaderStageVS:()=>qk.A,_shadersCzmBuiltins:()=>ak.A,_shadersDepthOfField:()=>HO.A,_shadersDepthPlaneFS:()=>zf.A,_shadersDepthPlaneVS:()=>Gf.A,_shadersDepthView:()=>WO.A,_shadersDepthViewPacked:()=>jO,_shadersDotMaterial:()=>xk.A,_shadersEdgeDetection:()=>$O.A,_shadersElevationBandMaterial:()=>Tk.A,_shadersElevationContourMaterial:()=>Sk.A,_shadersElevationRampMaterial:()=>Ck.A,_shadersEllipsoidFS:()=>Kf.A,_shadersEllipsoidSurfaceAppearanceFS:()=>sT,_shadersEllipsoidSurfaceAppearanceVS:()=>aT,_shadersEllipsoidVS:()=>qf.A,_shadersFXAA:()=>XO.A,_shadersFXAA3_11:()=>Hf.A,_shadersFadeMaterial:()=>Mk.A,_shadersFeatureIdStageFS:()=>Hk.A,_shadersFeatureIdStageVS:()=>Wk.A,_shadersFilmicTonemapping:()=>YO.A,_shadersGaussianBlur1D:()=>ZO.A,_shadersGeometryStageFS:()=>jk.A,_shadersGeometryStageVS:()=>$k.A,_shadersGlobeFS:()=>Wf.A,_shadersGlobeVS:()=>jf.A,_shadersGridMaterial:()=>Ek.A,_shadersGroundAtmosphere:()=>$f.A,_shadersHSBToRGB:()=>eB.A,_shadersHSLToRGB:()=>tB.A,_shadersImageBasedLightingStageFS:()=>Xk.A,_shadersInstancingStageCommon:()=>Yk.A,_shadersInstancingStageVS:()=>Zk.A,_shadersIntersectBox:()=>yO.A,_shadersIntersectClippingPlanes:()=>vO.A,_shadersIntersectCylinder:()=>wO.A,_shadersIntersectDepth:()=>bO.A,_shadersIntersectEllipsoid:()=>xO.A,_shadersIntersectLongitude:()=>TO.A,_shadersIntersection:()=>SO.A,_shadersIntersectionUtils:()=>CO.A,_shadersLegacyInstancingStageVS:()=>Jk.A,_shadersLensFlare:()=>JO.A,_shadersLightingStageFS:()=>Qk.A,_shadersMaterialStageFS:()=>eO.A,_shadersMegatexture:()=>MO.A,_shadersMetadataStageFS:()=>tO.A,_shadersMetadataStageVS:()=>iO.A,_shadersModelClippingPlanesStageFS:()=>nO.A,_shadersModelClippingPolygonsStageFS:()=>rO.A,_shadersModelClippingPolygonsStageVS:()=>oO.A,_shadersModelColorStageFS:()=>sO.A,_shadersModelFS:()=>aO.A,_shadersModelSilhouetteStageFS:()=>lO.A,_shadersModelSilhouetteStageVS:()=>cO.A,_shadersModelSplitterStageFS:()=>uO.A,_shadersModelVS:()=>dO.A,_shadersModifiedReinhardTonemapping:()=>QO.A,_shadersMorphTargetsStageVS:()=>hO.A,_shadersNightVision:()=>eR.A,_shadersNormalMapMaterial:()=>Pk.A,_shadersOctree:()=>EO.A,_shadersPassThrough:()=>tR.A,_shadersPassThroughDepth:()=>iR.A,_shadersPbrNeutralTonemapping:()=>nR.A,_shadersPerInstanceColorAppearanceFS:()=>hk.A,_shadersPerInstanceColorAppearanceVS:()=>pk.A,_shadersPerInstanceFlatColorAppearanceFS:()=>fk.A,_shadersPerInstanceFlatColorAppearanceVS:()=>mk.A,_shadersPointCloudEyeDomeLighting:()=>rR.A,_shadersPointCloudStylingStageVS:()=>pO.A,_shadersPointPrimitiveCollectionFS:()=>Xf.A,_shadersPointPrimitiveCollectionVS:()=>Yf.A,_shadersPolygonSignedDistanceFS:()=>Zf.A,_shadersPolylineArrowMaterial:()=>kk.A,_shadersPolylineColorAppearanceVS:()=>gk.A,_shadersPolylineCommon:()=>Jf.A,_shadersPolylineDashMaterial:()=>Ok.A,_shadersPolylineFS:()=>Qf.A,_shadersPolylineGlowMaterial:()=>Rk.A,_shadersPolylineMaterialAppearanceVS:()=>Ak.A,_shadersPolylineOutlineMaterial:()=>Ik.A,_shadersPolylineShadowVolumeFS:()=>em.A,_shadersPolylineShadowVolumeMorphFS:()=>tm.A,_shadersPolylineShadowVolumeMorphVS:()=>im.A,_shadersPolylineShadowVolumeVS:()=>nm.A,_shadersPolylineVS:()=>rm.A,_shadersPrimitiveGaussianSplatFS:()=>om.A,_shadersPrimitiveGaussianSplatVS:()=>sm.A,_shadersPrimitiveOutlineStageFS:()=>fO.A,_shadersPrimitiveOutlineStageVS:()=>mO.A,_shadersRGBToHSB:()=>iB.A,_shadersRGBToHSL:()=>nB.A,_shadersRGBToXYZ:()=>rB.A,_shadersReinhardTonemapping:()=>oR.A,_shadersReprojectWebMercatorFS:()=>am.A,_shadersReprojectWebMercatorVS:()=>lm.A,_shadersRimLightingMaterial:()=>Dk.A,_shadersSelectedFeatureIdStageCommon:()=>gO.A,_shadersShadowVolumeAppearanceFS:()=>cm.A,_shadersShadowVolumeAppearanceVS:()=>um.A,_shadersShadowVolumeFS:()=>dm.A,_shadersSilhouette:()=>sR.A,_shadersSkinningStageVS:()=>AO.A,_shadersSkyAtmosphereCommon:()=>hm.A,_shadersSkyAtmosphereFS:()=>pm.A,_shadersSkyAtmosphereVS:()=>fm.A,_shadersSkyBoxFS:()=>mm.A,_shadersSkyBoxVS:()=>gm.A,_shadersSlopeRampMaterial:()=>Bk.A,_shadersStripeMaterial:()=>Lk.A,_shadersSunFS:()=>Am.A,_shadersSunTextureFS:()=>_m.A,_shadersSunVS:()=>ym.A,_shadersTexturedMaterialAppearanceFS:()=>_k.A,_shadersTexturedMaterialAppearanceVS:()=>yk.A,_shadersVector3DTileClampedPolylinesFS:()=>vm.A,_shadersVector3DTileClampedPolylinesVS:()=>wm.A,_shadersVector3DTilePolylinesVS:()=>bm.A,_shadersVectorTileVS:()=>xm.A,_shadersVerticalExaggerationStageVS:()=>_O.A,_shadersViewportQuadFS:()=>Tm,_shadersViewportQuadVS:()=>Sm.A,_shadersVoxelFS:()=>PO.A,_shadersVoxelUtils:()=>kO.A,_shadersVoxelVS:()=>OO.A,_shadersWater:()=>Fk.A,_shadersWaterMaskMaterial:()=>Nk.A,_shadersXYZToRGB:()=>oB.A,_shadersacesTonemapping:()=>sB.A,_shadersalphaWeight:()=>aB.A,_shadersantialias:()=>lB.A,_shadersapplyHSBShift:()=>cB.A,_shadersapproximateSphericalCoordinates:()=>uB.A,_shadersapproximateTanh:()=>dB.A,_shadersbackFacing:()=>hB.A,_shadersbranchFreeTernary:()=>pB.A,_shaderscascadeColor:()=>fB.A,_shaderscascadeDistance:()=>mB.A,_shaderscascadeMatrix:()=>gB.A,_shaderscascadeWeights:()=>AB.A,_shadersclipPolygons:()=>_B.A,_shaderscolumbusViewMorph:()=>yB.A,_shaderscomputeAtmosphereColor:()=>vB.A,_shaderscomputeGroundAtmosphereScattering:()=>wB.A,_shaderscomputePosition:()=>bB.A,_shaderscomputeScattering:()=>xB.A,_shadersconvertUvToBox:()=>RO.A,_shadersconvertUvToCylinder:()=>IO.A,_shadersconvertUvToEllipsoid:()=>DO.A,_shaderscosineAndSine:()=>TB.A,_shadersdecompressTextureCoordinates:()=>SB.A,_shadersdegreesPerRadian:()=>aD.A,_shadersdepthClamp:()=>CB.A,_shadersdepthRange:()=>lD.A,_shadersdepthRangeStruct:()=>WD.A,_shaderseastNorthUpToEyeCoordinates:()=>MB.A,_shadersellipsoidContainsPoint:()=>EB.A,_shadersellipsoidTextureCoordinates:()=>PB.A,_shadersepsilon1:()=>cD.A,_shadersepsilon2:()=>uD.A,_shadersepsilon3:()=>dD.A,_shadersepsilon4:()=>hD.A,_shadersepsilon5:()=>pD.A,_shadersepsilon6:()=>fD.A,_shadersepsilon7:()=>mD.A,_shadersequalsEpsilon:()=>kB.A,_shaderseyeOffset:()=>OB.A,_shaderseyeToWindowCoordinates:()=>RB.A,_shadersfastApproximateAtan:()=>IB.A,_shadersfog:()=>DB.A,_shadersgammaCorrect:()=>BB.A,_shadersgeodeticSurfaceNormal:()=>LB.A,_shadersgetDefaultMaterial:()=>FB.A,_shadersgetDynamicAtmosphereLightDirection:()=>NB.A,_shadersgetLambertDiffuse:()=>VB.A,_shadersgetSpecular:()=>UB.A,_shadersgetWaterNoise:()=>zB.A,_shadershue:()=>GB.A,_shadersinfinity:()=>gD.A,_shadersinverseGamma:()=>KB.A,_shadersisEmpty:()=>qB.A,_shadersisFull:()=>HB.A,_shaderslatitudeToWebMercatorFraction:()=>WB.A,_shaderslineDistance:()=>jB.A,_shaderslinearToSrgb:()=>$B.A,_shadersluminance:()=>XB.A,_shadersmaterial:()=>jD.A,_shadersmaterialInput:()=>$D.A,_shadersmaximumComponent:()=>YB.A,_shadersmetersPerPixel:()=>ZB.A,_shadersmodelMaterial:()=>XD.A,_shadersmodelToWindowCoordinates:()=>JB.A,_shadersmodelVertexOutput:()=>YD.A,_shadersmultiplyWithColorBalance:()=>QB.A,_shadersnearFarScalar:()=>eL.A,_shadersoctDecode:()=>tL.A,_shadersoneOverPi:()=>AD.A,_shadersoneOverTwoPi:()=>_D.A,_shaderspackDepth:()=>iL.A,_shaderspassCesium3DTile:()=>yD.A,_shaderspassCesium3DTileClassification:()=>vD.A,_shaderspassCesium3DTileClassificationIgnoreShow:()=>wD.A,_shaderspassClassification:()=>bD.A,_shaderspassCompute:()=>xD.A,_shaderspassEnvironment:()=>TD.A,_shaderspassGaussianSplats:()=>SD.A,_shaderspassGlobe:()=>CD.A,_shaderspassOpaque:()=>MD.A,_shaderspassOverlay:()=>ED.A,_shaderspassTerrainClassification:()=>PD.A,_shaderspassTranslucent:()=>kD.A,_shaderspassVoxels:()=>OD.A,_shaderspbrLighting:()=>nL.A,_shaderspbrNeutralTonemapping:()=>rL.A,_shadersphong:()=>oL.A,_shaderspi:()=>RD.A,_shaderspiOverFour:()=>ID.A,_shaderspiOverSix:()=>DD.A,_shaderspiOverThree:()=>BD.A,_shaderspiOverTwo:()=>LD.A,_shadersplaneDistance:()=>sL.A,_shaderspointAlongRay:()=>aL.A,_shadersradiansPerDegree:()=>FD.A,_shadersray:()=>ZD.A,_shadersrayEllipsoidIntersectionInterval:()=>lL.A,_shadersraySegment:()=>JD.A,_shadersraySphereIntersectionInterval:()=>cL.A,_shadersreadDepth:()=>uL.A,_shadersreadNonPerspective:()=>dL.A,_shadersreverseLogDepth:()=>hL.A,_shadersround:()=>pL.A,_shaderssaturation:()=>fL.A,_shaderssceneMode2D:()=>ND.A,_shaderssceneMode3D:()=>VD.A,_shaderssceneModeColumbusView:()=>UD.A,_shaderssceneModeMorphing:()=>zD.A,_shadersshadowDepthCompare:()=>mL.A,_shadersshadowParameters:()=>QD.A,_shadersshadowVisibility:()=>gL.A,_shaderssignNotZero:()=>AL.A,_shaderssolarRadius:()=>GD.A,_shaderssphericalHarmonics:()=>_L.A,_shaderssrgbToLinear:()=>yL.A,_shaderstangentToEyeSpaceMatrix:()=>vL.A,_shaderstextureCube:()=>wL.A,_shadersthreePiOver2:()=>KD.A,_shaderstransformPlane:()=>bL.A,_shaderstranslateRelativeToEye:()=>xL.A,_shaderstranslucentPhong:()=>TL.A,_shaderstranspose:()=>SL.A,_shaderstwoPi:()=>qD.A,_shadersunpackClippingExtents:()=>CL.A,_shadersunpackDepth:()=>ML.A,_shadersunpackFloat:()=>EL.A,_shadersunpackUint:()=>PL.A,_shadersvalueTransform:()=>kL.A,_shadersvertexLogDepth:()=>OL.A,_shaderswebMercatorMaxLatitude:()=>HD.A,_shaderswindowToEyeCoordinates:()=>RL.A,_shaderswriteDepthClamp:()=>IL.A,_shaderswriteLogDepth:()=>DL.A,_shaderswriteNonPerspective:()=>BL.A,addAllToArray:()=>Cv.A,addBuffer:()=>lR.A,addDefaults:()=>cR.A,addExtensionsRequired:()=>uR.A,addExtensionsUsed:()=>dR.A,addPipelineExtras:()=>hR.A,addToArray:()=>pR.A,appendForwardSlash:()=>Mv.A,arrayRemoveDuplicates:()=>Ev.A,barycentricCoordinates:()=>Pv.A,binarySearch:()=>kv.A,buildModuleUrl:()=>ma.A,buildVoxelDrawCommands:()=>PP.A,clone:()=>ga.A,combine:()=>nh.A,computeFlyToLocationForRectangle:()=>kP.A,createBillboardPointCallback:()=>OP.A,createCommand:()=>eF.A,createDefaultImageryProviderViewModels:()=>aF.A,createDefaultTerrainProviderViewModels:()=>lF.A,createElevationBandMaterial:()=>GP,createGooglePhotorealistic3DTileset:()=>qP,createGuid:()=>L.A,createMaterialPropertyDescriptor:()=>Xp.A,createOsmBuildingsAsync:()=>HP,createPropertyDescriptor:()=>_e.A,createRawPropertyDescriptor:()=>Nt.A,createTangentSpaceDebugPrimitive:()=>WP,createTaskProcessorWorker:()=>$L,createUniform:()=>ee.A,createUniformArray:()=>te.A,createWorldBathymetryAsync:()=>Ov.A,createWorldImageryAsync:()=>jP.A,createWorldTerrainAsync:()=>Rv.A,decodeGoogleEarthEnterpriseData:()=>Dv,decodeVectorPolylinePositions:()=>Bv.A,defaultValue:()=>Lv.A,defer:()=>Aa.A,defined:()=>N.A,demodernizeShader:()=>ie.A,deprecationWarning:()=>Fv.A,destroyObject:()=>V.A,exportKml:()=>Tf,findAccessorMinMax:()=>fR.A,findContentMetadata:()=>$P.A,findGroupMetadata:()=>XP.A,findTileMetadata:()=>YP.A,forEachTextureInMaterial:()=>mR.A,formatError:()=>Nv.A,freezeRenderState:()=>ne.A,getAbsoluteUri:()=>Vv.A,getAccessorByteStride:()=>gR.A,getBaseUri:()=>Uv.A,getBinaryAccessor:()=>ZP.A,getClipAndStyleCode:()=>JP.A,getClippingFunction:()=>QP.A,getComponentReader:()=>AR.A,getElement:()=>Xd.A,getExtensionFromUri:()=>_a.A,getFilenameFromUri:()=>lt.A,getImageFromTypedArray:()=>zv.A,getImagePixels:()=>sv.A,getJsonFromTypedArray:()=>Gv.A,getMagic:()=>Kv.A,getMeshPrimitives:()=>ek.A,getMetadataClassProperty:()=>tk.A,getMetadataProperty:()=>ik.A,getStringFromTypedArray:()=>qv.A,getTimestamp:()=>ya.A,hasExtension:()=>db.A,heightReferenceOnEntityPropertyChanged:()=>Sf.A,isBitSet:()=>yA,isBlobUri:()=>Hv.A,isCrossOriginUrl:()=>Wv.A,isDataUri:()=>jv.A,isLeapYear:()=>$v.A,knockout:()=>cF.A,knockout_3_5_1:()=>oN.A,knockout_es5:()=>sN.A,loadAndExecuteScript:()=>xA.A,loadCubeMap:()=>re.A,loadImageFromTypedArray:()=>Xv.A,loadKTX2:()=>Yv.A,mergeSort:()=>Zv.A,moveTechniqueRenderStates:()=>_R.A,moveTechniquesToExtension:()=>yR.A,numberOfComponentsForType:()=>vR.A,objectToQuery:()=>ba.A,oneTimeWarning:()=>xa.A,parseBatchTable:()=>nk.A,parseFeatureMetadataLegacy:()=>rk.A,parseGlb:()=>wR.A,parseResponseHeaders:()=>Jv.A,parseStructuralMetadata:()=>ok.A,pickModel:()=>sD.A,pointInsideTriangle:()=>ew,preprocess3DTileContent:()=>vb.A,processVoxelProperties:()=>sk.A,queryToObject:()=>Ta.A,readAccessorPacked:()=>bR.A,removeExtension:()=>xR.A,removeExtensionsRequired:()=>TR.A,removeExtensionsUsed:()=>SR.A,removePipelineExtras:()=>CR.A,removeUnusedElements:()=>MR.A,resizeImageToNextPowerOfTwo:()=>tw.A,sampleTerrain:()=>iw.A,sampleTerrainMostDetailed:()=>nw.A,scaleToGeodeticSurface:()=>rw.A,srgbToLinear:()=>ow,subdivideArray:()=>sw.A,subscribeAndEvaluate:()=>tF.A,updateAccessorComponentTypes:()=>ER.A,updateVersion:()=>PR.A,usesExtension:()=>kR.A,viewerCesium3DTilesInspectorMixin:()=>TN,viewerCesiumInspectorMixin:()=>SN,viewerDragDropMixin:()=>ON,viewerPerformanceWatchdogMixin:()=>RN,viewerVoxelInspectorMixin:()=>IN,webGLConstantToGlslType:()=>aw,wrapFunction:()=>lw,writeTextToCanvas:()=>cw.A});var n=i(481),r=i(641613),o=i(442790),s=i(769493),a=i(718289),l=i(494156),c=i(681480),u=i(430332),d=i(346154),h=i(671495),p=i(377496),f=i(483128),m=i(804701),g=i(418906),A=i(915777),_=i(760866),y=i(326429),v=i(57775),w=i(40118),b=i(557053),x=i(100482),T=i(654799),S=i(469635),C=i(389994),M=i(624512),E=i(539846),P=i(302836),k=i(342875),O=i(693299),R=i(160619),I=i(616e3),D=i(267980),B=i(369031),L=i(673874),F=i(915325),N=i(491446),V=i(677354),U=i(605971),z=i(276904),G=i(957233),K=i(78078);function q(e){e=e??F.A.EMPTY_OBJECT,B.A.defined("options.context",e.context);const{context:t,source:i,pixelFormat:n=z.A.RGBA,pixelDatatype:r=v.A.UNSIGNED_BYTE,flipY:o=!0,skipColorSpaceConversion:s=!1,sampler:a=new T.A}=e;if(!t.webgl2)throw new U.A("WebGL1 does not support texture3D. Please use a WebGL2 context.");let{width:l,height:c,depth:d}=e;(0,N.A)(i)&&((0,N.A)(l)||(l=i.width),(0,N.A)(c)||(c=i.height),(0,N.A)(d)||(d=i.depth));const h=e.preMultiplyAlpha||n===z.A.RGB||n===z.A.LUMINANCE,p=z.A.toInternalFormat(n,r,t),f=z.A.isCompressedFormat(p);if(!(0,N.A)(l)||!(0,N.A)(c)||!(0,N.A)(d))throw new U.A("options requires a source field to create an initialized texture3D or width, height and depth fields to create a blank texture3D.");if(B.A.typeOf.number.greaterThan("width",l,0),l>u.A.maximumTextureSize)throw new U.A(`Width must be less than or equal to the maximum texture3D size (${u.A.maximumTextureSize}).  Check maximumTextureSize.`);if(B.A.typeOf.number.greaterThan("height",c,0),c>u.A.maximumTextureSize)throw new U.A(`Height must be less than or equal to the maximum texture3D size (${u.A.maximumTextureSize}).  Check maximumTextureSize.`);if(B.A.typeOf.number.greaterThan("depth",d,0),d>u.A.maximumTextureSize)throw new U.A(`Depth must be less than or equal to the maximum texture3D size (${u.A.maximumTextureSize}).  Check maximumTextureSize.`);if(!z.A.validate(n))throw new U.A("Invalid options.pixelFormat.");if(!f&&!v.A.validate(r))throw new U.A("Invalid options.pixelDatatype.");if(n===z.A.DEPTH_COMPONENT&&r!==v.A.UNSIGNED_SHORT&&r!==v.A.UNSIGNED_INT)throw new U.A("When options.pixelFormat is DEPTH_COMPONENT, options.pixelDatatype must be UNSIGNED_SHORT or UNSIGNED_INT.");if(n===z.A.DEPTH_STENCIL&&r!==v.A.UNSIGNED_INT_24_8)throw new U.A("When options.pixelFormat is DEPTH_STENCIL, options.pixelDatatype must be UNSIGNED_INT_24_8.");if(r===v.A.FLOAT&&!t.floatingPointTexture)throw new U.A("When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.  Check context.floatingPointTexture.");if(r===v.A.HALF_FLOAT&&!t.halfFloatingPointTexture)throw new U.A("When options.pixelDatatype is HALF_FLOAT, this WebGL implementation must support the OES_texture_half_float extension. Check context.halfFloatingPointTexture.");if(z.A.isDepthFormat(n)){if((0,N.A)(i))throw new U.A("When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, source cannot be provided.");if(!t.depthTexture)throw new U.A("When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, this WebGL implementation must support WEBGL_depth_texture.  Check context.depthTexture.")}if(f)throw new U.A("Texture3D does not currently support compressed formats.");const m=t._gl,g=z.A.texture3DSizeInBytes(n,r,l,c,d);if(this._id=e.id??(0,L.A)(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=m.TEXTURE_3D,this._texture=m.createTexture(),this._internalFormat=p,this._pixelFormat=n,this._pixelDatatype=r,this._width=l,this._height=c,this._depth=d,this._dimensions=new D.A(l,c,d),this._hasMipmap=!1,this._sizeInBytes=g,this._preMultiplyAlpha=h,this._flipY=o,this._initialized=!1,this._sampler=void 0,this._sampler=a,W(this,a),m.activeTexture(m.TEXTURE0),m.bindTexture(this._textureTarget,this._texture),(0,N.A)(i)){if(s?m.pixelStorei(m.UNPACK_COLORSPACE_CONVERSION_WEBGL,m.NONE):m.pixelStorei(m.UNPACK_COLORSPACE_CONVERSION_WEBGL,m.BROWSER_DEFAULT_WEBGL),!(0,N.A)(i.arrayBufferView))throw new U.A("For Texture3D, options.source.arrayBufferView must be defined");!function(e,t){const i=e._context,n=i._gl,r=e._textureTarget,o=e._internalFormat,{width:s,height:a,depth:l,pixelFormat:c,pixelDatatype:u,flipY:d}=e,h=z.A.alignmentInBytes(c,u,s);n.pixelStorei(n.UNPACK_ALIGNMENT,h),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const{arrayBufferView:p}=t;d&&console.warn("texture3D.flipY is not supported.");let f=1;if(t.mipLevels&&t.mipLevels.length&&(f=t.mipLevels.length+1),n.texStorage3D(r,f,o,s,a,l),n.texSubImage3D(r,0,0,0,0,s,a,l,c,v.A.toWebGLConstant(u,i),p),f>1){let e=s,o=a,d=l;for(let s=0;s<t.mipLevels.length;++s)e=H(e),o=H(o),d=H(d),n.texSubImage3D(r,s+1,0,0,0,e,o,d,c,v.A.toWebGLConstant(u,i),t.mipLevels[s])}}(this,i),this._initialized=!0}else!function(e){const t=e._context;t._gl.texImage3D(e._textureTarget,0,e._internalFormat,e._width,e._height,e._depth,0,e._pixelFormat,v.A.toWebGLConstant(e._pixelDatatype,t),null)}(this);m.bindTexture(this._textureTarget,null)}function H(e){const t=0|Math.floor(e/2);return Math.max(t,1)}function W(e,t){let{minificationFilter:i,magnificationFilter:n}=t;const r=[K.A.NEAREST_MIPMAP_NEAREST,K.A.NEAREST_MIPMAP_LINEAR,K.A.LINEAR_MIPMAP_NEAREST,K.A.LINEAR_MIPMAP_LINEAR].includes(i),o=e._context,s=e._pixelFormat,a=e._pixelDatatype;(a===v.A.FLOAT&&!o.textureFloatLinear||a===v.A.HALF_FLOAT&&!o.textureHalfFloatLinear)&&(i=r?K.A.NEAREST_MIPMAP_NEAREST:K.A.NEAREST,n=G.A.NEAREST),z.A.isDepthFormat(s)&&(i=K.A.NEAREST,n=G.A.NEAREST);const l=o._gl,c=e._textureTarget;l.activeTexture(l.TEXTURE0),l.bindTexture(c,e._texture),l.texParameteri(c,l.TEXTURE_MIN_FILTER,i),l.texParameteri(c,l.TEXTURE_MAG_FILTER,n),l.texParameteri(c,l.TEXTURE_WRAP_R,t.wrapR),l.texParameteri(c,l.TEXTURE_WRAP_S,t.wrapS),l.texParameteri(c,l.TEXTURE_WRAP_T,t.wrapT),(0,N.A)(e._textureFilterAnisotropic)&&l.texParameteri(c,e._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.maximumAnisotropy),l.bindTexture(c,null)}q.create=function(e){return new q(e)},Object.defineProperties(q.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){W(this,e),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},depth:{get:function(){return this._depth}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(8*this._sizeInBytes/7):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}}),q.prototype.generateMipmap=function(e){if(e=e??g.A.DONT_CARE,z.A.isDepthFormat(this._pixelFormat))throw new U.A("Cannot call generateMipmap when the texture3D pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(z.A.isCompressedFormat(this._pixelFormat))throw new U.A("Cannot call generateMipmap with a compressed pixel format.");if(!g.A.validate(e))throw new U.A("hint is invalid.");this._hasMipmap=!0;const t=this._context._gl,i=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(i,this._texture),t.generateMipmap(i),t.bindTexture(i,null)},q.prototype.isDestroyed=function(){return!1},q.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),(0,V.A)(this)};const j=q;var $=i(66589),X=i(16012),Y=i(557448),Z=i(492718),J=i(508380),Q=i(193470),ee=i(764011),te=i(757146),ie=i(790868),ne=i(240863),re=i(454214),oe=i(470540),se=i(798777),ae=i(810600),le=i(467466),ce=i(326230),ue=i(602941),de=i(10082),he=i(692632),pe=i(592493),fe=i(434067),me=i(41476),ge=i(955943),Ae=i(591978),_e=i(819488),ye=i(46257);const ve=me.A.WHITE,we=me.A.BLACK,be=new fe.A(2,2);function xe(e){e=e??F.A.EMPTY_OBJECT,this._definitionChanged=new ge.A,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.evenColor=e.evenColor,this.oddColor=e.oddColor,this.repeat=e.repeat}Object.defineProperties(xe.prototype,{isConstant:{get:function(){return ye.A.isConstant(this._evenColor)&&ye.A.isConstant(this._oddColor)&&ye.A.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},evenColor:(0,_e.A)("evenColor"),oddColor:(0,_e.A)("oddColor"),repeat:(0,_e.A)("repeat")}),xe.prototype.getType=function(e){return"Checkerboard"};const Te=new Ae.A;xe.prototype.getValue=function(e,t){return(0,N.A)(e)||(e=Ae.A.now(Te)),(0,N.A)(t)||(t={}),t.lightColor=ye.A.getValueOrClonedDefault(this._evenColor,e,ve,t.lightColor),t.darkColor=ye.A.getValueOrClonedDefault(this._oddColor,e,we,t.darkColor),t.repeat=ye.A.getValueOrDefault(this._repeat,e,be),t},xe.prototype.equals=function(e){return this===e||e instanceof xe&&ye.A.equals(this._evenColor,e._evenColor)&&ye.A.equals(this._oddColor,e._oddColor)&&ye.A.equals(this._repeat,e._repeat)};const Se=xe;var Ce=i(312421),Me=i(367817),Ee=i(426807),Pe=i(151075);const ke={id:void 0},Oe=new Array(2);function Re(e){const t=e.propertyNames,i=t.length;for(let n=0;n<i;n++)e[t[n]]=void 0;e._name=void 0,e._availability=void 0}function Ie(e,t,i,n){Oe[0]=i,Oe[1]=n.id,t[JSON.stringify(Oe)]=n.definitionChanged.addEventListener(Le.prototype._onDefinitionChanged,e)}function De(e,t,i,n){Oe[0]=i,Oe[1]=n.id;const r=JSON.stringify(Oe);t[r](),t[r]=void 0}function Be(e){if(e._shouldRecomposite=!0,0!==e._suspendCount)return;const t=e._collections,i=t.length,n=e._collectionsCopy,r=n.length;let o,s,a,l,c;const u=e._composite,d=new Pe.A(e),h=e._eventHash;let p;for(o=0;o<r;o++)for(c=n[o],c.collectionChanged.removeEventListener(Le.prototype._onCollectionChanged,e),a=c.values,p=c.id,l=a.length-1;l>-1;l--)s=a[l],De(0,h,p,s);for(o=i-1;o>=0;o--)for(c=t[o],c.collectionChanged.addEventListener(Le.prototype._onCollectionChanged,e),a=c.values,p=c.id,l=a.length-1;l>-1;l--){s=a[l],Ie(e,h,p,s);let t=d.getById(s.id);(0,N.A)(t)||(t=u.getById(s.id),(0,N.A)(t)?Re(t):(ke.id=s.id,t=new Ee.A(ke)),d.add(t)),t.merge(s)}e._collectionsCopy=t.slice(0),u.suspendEvents(),u.removeAll();const f=d.values;for(o=0;o<f.length;o++)u.add(f[o]);u.resumeEvents()}function Le(e,t){this._owner=t,this._composite=new Pe.A(this),this._suspendCount=0,this._collections=(0,N.A)(e)?e.slice():[],this._collectionsCopy=[],this._id=(0,L.A)(),this._eventHash={},Be(this),this._shouldRecomposite=!1}function Fe(e,t){if(!(0,N.A)(t))throw new U.A("collection is required.");const i=e.indexOf(t);if(-1===i)throw new U.A("collection is not in this composite.");return i}function Ne(e,t,i){const n=e._collections;if((t=Me.A.clamp(t,0,n.length-1))===(i=Me.A.clamp(i,0,n.length-1)))return;const r=n[t];n[t]=n[i],n[i]=r,Be(e)}Object.defineProperties(Le.prototype,{collectionChanged:{get:function(){return this._composite._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._composite.values}},owner:{get:function(){return this._owner}}}),Le.prototype.addCollection=function(e,t){const i=(0,N.A)(t);if(!(0,N.A)(e))throw new U.A("collection is required.");if(i){if(t<0)throw new U.A("index must be greater than or equal to zero.");if(t>this._collections.length)throw new U.A("index must be less than or equal to the number of collections.")}i?this._collections.splice(t,0,e):(t=this._collections.length,this._collections.push(e)),Be(this)},Le.prototype.removeCollection=function(e){const t=this._collections.indexOf(e);return-1!==t&&(this._collections.splice(t,1),Be(this),!0)},Le.prototype.removeAllCollections=function(){this._collections.length=0,Be(this)},Le.prototype.containsCollection=function(e){return-1!==this._collections.indexOf(e)},Le.prototype.contains=function(e){return this._composite.contains(e)},Le.prototype.indexOfCollection=function(e){return this._collections.indexOf(e)},Le.prototype.getCollection=function(e){if(!(0,N.A)(e))throw new U.A("index is required.","index");return this._collections[e]},Le.prototype.getCollectionsLength=function(){return this._collections.length},Le.prototype.raiseCollection=function(e){const t=Fe(this._collections,e);Ne(this,t,t+1)},Le.prototype.lowerCollection=function(e){const t=Fe(this._collections,e);Ne(this,t,t-1)},Le.prototype.raiseCollectionToTop=function(e){const t=Fe(this._collections,e);t!==this._collections.length-1&&(this._collections.splice(t,1),this._collections.push(e),Be(this))},Le.prototype.lowerCollectionToBottom=function(e){const t=Fe(this._collections,e);0!==t&&(this._collections.splice(t,1),this._collections.splice(0,0,e),Be(this))},Le.prototype.suspendEvents=function(){this._suspendCount++,this._composite.suspendEvents()},Le.prototype.resumeEvents=function(){if(0===this._suspendCount)throw new U.A("resumeEvents can not be called before suspendEvents.");this._suspendCount--,this._shouldRecomposite&&0===this._suspendCount&&(Be(this),this._shouldRecomposite=!1),this._composite.resumeEvents()},Le.prototype.computeAvailability=function(){return this._composite.computeAvailability()},Le.prototype.getById=function(e){return this._composite.getById(e)},Le.prototype._onCollectionChanged=function(e,t,i){const n=this._collectionsCopy,r=n.length,o=this._composite;let s,a,l,c;o.suspendEvents();const u=i.length,d=this._eventHash,h=e.id;for(s=0;s<u;s++){const e=i[s];De(0,d,h,e);const t=e.id;for(a=r-1;a>=0;a--)l=n[a].getById(t),(0,N.A)(l)&&((0,N.A)(c)||(c=o.getById(t),Re(c)),c.merge(l));(0,N.A)(c)||o.removeById(t),c=void 0}const p=t.length;for(s=0;s<p;s++){const e=t[s];Ie(this,d,h,e);const i=e.id;for(a=r-1;a>=0;a--)l=n[a].getById(i),(0,N.A)(l)&&((0,N.A)(c)||(c=o.getById(i),(0,N.A)(c)?Re(c):(ke.id=i,c=new Ee.A(ke),o.add(c))),c.merge(l));c=void 0}o.resumeEvents()},Le.prototype._onDefinitionChanged=function(e,t,i,n){const r=this._collections,o=this._composite,s=r.length,a=e.id,l=o.getById(a);let c=l[t];const u=!(0,N.A)(c);let d=!0;for(let i=s-1;i>=0;i--){const n=r[i].getById(e.id);if((0,N.A)(n)){const e=n[t];if((0,N.A)(e)){if(d){if(d=!1,!(0,N.A)(e.merge)||!(0,N.A)(e.clone)){c=e;break}c=e.clone(c)}c.merge(e)}}}u&&-1===l.propertyNames.indexOf(t)&&l.addProperty(t),l[t]=c};const Ve=Le;var Ue=i(98348);function ze(){this._definitionChanged=new ge.A,this._composite=new Ue.A,this._composite.definitionChanged.addEventListener(ze.prototype._raiseDefinitionChanged,this)}Object.defineProperties(ze.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite._intervals}}}),ze.prototype.getType=function(e){if(!(0,N.A)(e))throw new U.A("time is required");const t=this._composite._intervals.findDataForIntervalContainingDate(e);if((0,N.A)(t))return t.getType(e)};const Ge=new Ae.A;ze.prototype.getValue=function(e,t){(0,N.A)(e)||(e=Ae.A.now(Ge));const i=this._composite._intervals.findDataForIntervalContainingDate(e);if((0,N.A)(i))return i.getValue(e,t)},ze.prototype.equals=function(e){return this===e||e instanceof ze&&this._composite.equals(e._composite,ye.A.equals)},ze.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const Ke=ze;var qe=i(403911),He=i(808938),We=i(969077),je=i(490869),$e=i(779675),Xe=i(755394),Ye=i(581225),Ze=i(881679),Je=i(215327),Qe=i(647934),et=i(336946),tt=i(687536),it=i(945395),nt=i(297038),rt=i(672743),ot=i(853331),st=i(610750),at=i(908077),lt=i(3858);const ct=Me.A.factorial;function ut(e,t,i,n,r,o){let s,a,l,c=0;if(n>0){for(a=0;a<r;a++){for(s=!1,l=0;l<o.length&&!s;l++)a===o[l]&&(s=!0);s||(o.push(a),c+=ut(e,t,i,n-1,r,o),o.splice(o.length-1,1))}return c}for(c=1,a=0;a<r;a++){for(s=!1,l=0;l<o.length&&!s;l++)a===o[l]&&(s=!0);s||(c*=e-i[t[a]])}return c}const dt={type:"Hermite",getRequiredDataPoints:function(e,t){if(t=t??0,!(0,N.A)(e))throw new U.A("degree is required.");if(e<0)throw new U.A("degree must be 0 or greater.");if(t<0)throw new U.A("inputOrder must be 0 or greater.");return Math.max(Math.floor((e+1)/(t+1)),2)},interpolateOrderZero:function(e,t,i,n,r){let o,s,a,l,c,u;(0,N.A)(r)||(r=new Array(n));const d=t.length,h=new Array(n);for(o=0;o<n;o++){r[o]=0;const e=new Array(d);for(h[o]=e,s=0;s<d;s++)e[s]=[]}const p=d,f=new Array(p);for(o=0;o<p;o++)f[o]=o;let m=d-1;for(l=0;l<n;l++){for(s=0;s<p;s++)u=f[s]*n+l,h[l][0].push(i[u]);for(o=1;o<p;o++){let e=!1;for(s=0;s<p-o;s++){const r=t[f[s]],a=t[f[s+o]];let c;a-r<=0?(u=f[s]*n+n*o+l,c=i[u],h[l][o].push(c/ct(o))):(c=h[l][o-1][s+1]-h[l][o-1][s],h[l][o].push(c/(a-r))),e=e||0!==c}e||(m=o-1)}}for(a=0,c=0;a<=0;a++)for(o=a;o<=m;o++){const i=ut(e,f,t,a,o,[]);for(l=0;l<n;l++){const e=h[l][o][0];r[l+a*n]+=e*i}}return r}},ht=[];dt.interpolate=function(e,t,i,n,r,o,s){const a=n*(o+1);(0,N.A)(s)||(s=new Array(a));for(let e=0;e<a;e++)s[e]=0;const l=t.length,c=new Array(l*(r+1));let u;for(u=0;u<l;u++)for(let e=0;e<r+1;e++)c[u*(r+1)+e]=u;const d=c.length,h=ht,p=function(e,t,i,n,r,o){let s,a,l=-1;const c=t.length,u=c*(c+1)/2;for(let d=0;d<r;d++){const h=Math.floor(d*u);for(s=0;s<c;s++)a=t[s]*r*(o+1)+d,e[h+s]=n[a];for(let u=1;u<c;u++){let p=0;const f=Math.floor(u*(1-u)/2)+c*u;let m=!1;for(s=0;s<c-u;s++){const l=i[t[s]],g=i[t[s+u]];let A,_;if(g-l<=0)a=t[s]*r*(o+1)+r*u+d,A=n[a],_=A/Me.A.factorial(u),e[h+f+p]=_,p++;else{const t=Math.floor((u-1)*(2-u)/2)+c*(u-1);A=e[h+t+s+1]-e[h+t+s],_=A/(g-l),e[h+f+p]=_,p++}m=m||0!==A}m&&(l=Math.max(l,u))}}return l}(h,c,t,i,n,r),f=[],m=d*(d+1)/2,g=Math.min(p,o);for(let i=0;i<=g;i++)for(u=i;u<=p;u++){f.length=0;const r=ut(e,c,t,i,u,f),o=Math.floor(u*(1-u)/2)+d*u;for(let e=0;e<n;e++){const t=h[Math.floor(e*m)+o];s[e+i*n]+=t*r}}return s};const pt=dt;var ft=i(32655);const mt={type:"Lagrange",getRequiredDataPoints:function(e){return Math.max(e+1,2)},interpolateOrderZero:function(e,t,i,n,r){let o,s;(0,N.A)(r)||(r=new Array(n));const a=t.length;for(o=0;o<n;o++)r[o]=0;for(o=0;o<a;o++){let l=1;for(s=0;s<a;s++)if(s!==o){const i=t[o]-t[s];l*=(e-t[s])/i}for(s=0;s<n;s++)r[s]+=l*i[o*n+s]}return r}};var gt=i(862675),At=i(290176),_t=i(105330),yt=i(99479),vt=i(697422),wt=i(886033),bt=i(744603),xt=i(123245);function Tt(e,t,i){this.clock=e??0,this.cone=t??0,this.magnitude=i??1}Tt.fromCartesian3=function(e,t){B.A.typeOf.object("cartesian3",e);const i=e.x,n=e.y,r=e.z,o=i*i+n*n;return(0,N.A)(t)||(t=new Tt),t.clock=Math.atan2(n,i),t.cone=Math.atan2(Math.sqrt(o),r),t.magnitude=Math.sqrt(o+r*r),t},Tt.clone=function(e,t){if((0,N.A)(e))return(0,N.A)(t)?(t.clock=e.clock,t.cone=e.cone,t.magnitude=e.magnitude,t):new Tt(e.clock,e.cone,e.magnitude)},Tt.normalize=function(e,t){return B.A.typeOf.object("spherical",e),(0,N.A)(t)?(t.clock=e.clock,t.cone=e.cone,t.magnitude=1,t):new Tt(e.clock,e.cone,1)},Tt.equals=function(e,t){return e===t||(0,N.A)(e)&&(0,N.A)(t)&&e.clock===t.clock&&e.cone===t.cone&&e.magnitude===t.magnitude},Tt.equalsEpsilon=function(e,t,i){return i=i??0,e===t||(0,N.A)(e)&&(0,N.A)(t)&&Math.abs(e.clock-t.clock)<=i&&Math.abs(e.cone-t.cone)<=i&&Math.abs(e.magnitude-t.magnitude)<=i},Tt.prototype.equals=function(e){return Tt.equals(this,e)},Tt.prototype.clone=function(e){return Tt.clone(this,e)},Tt.prototype.equalsEpsilon=function(e,t){return Tt.equalsEpsilon(this,e,t)},Tt.prototype.toString=function(){return`(${this.clock}, ${this.cone}, ${this.magnitude})`};const St=Tt;var Ct=i(93467),Mt=i(224847),Et=i(71578),Pt=i(428027),kt=i(63316),Ot=i(337632),Rt=i(15817),It=i(988609),Dt=i(742558),Bt=i(484193),Lt=i(367725),Ft=i(565801),Nt=i(91440);function Vt(){this._definitionChanged=new ge.A,this._startTime=void 0,this._stopTime=void 0,this._currentTime=void 0,this._clockRange=void 0,this._clockStep=void 0,this._multiplier=void 0}Object.defineProperties(Vt.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},startTime:(0,Nt.A)("startTime"),stopTime:(0,Nt.A)("stopTime"),currentTime:(0,Nt.A)("currentTime"),clockRange:(0,Nt.A)("clockRange"),clockStep:(0,Nt.A)("clockStep"),multiplier:(0,Nt.A)("multiplier")}),Vt.prototype.clone=function(e){return(0,N.A)(e)||(e=new Vt),e.startTime=this.startTime,e.stopTime=this.stopTime,e.currentTime=this.currentTime,e.clockRange=this.clockRange,e.clockStep=this.clockStep,e.multiplier=this.multiplier,e},Vt.prototype.equals=function(e){return this===e||(0,N.A)(e)&&Ae.A.equals(this.startTime,e.startTime)&&Ae.A.equals(this.stopTime,e.stopTime)&&Ae.A.equals(this.currentTime,e.currentTime)&&this.clockRange===e.clockRange&&this.clockStep===e.clockStep&&this.multiplier===e.multiplier},Vt.prototype.merge=function(e){if(!(0,N.A)(e))throw new U.A("source is required.");this.startTime=this.startTime??e.startTime,this.stopTime=this.stopTime??e.stopTime,this.currentTime=this.currentTime??e.currentTime,this.clockRange=this.clockRange??e.clockRange,this.clockStep=this.clockStep??e.clockStep,this.multiplier=this.multiplier??e.multiplier},Vt.prototype.getValue=function(e){return(0,N.A)(e)||(e=new Ft.A),e.startTime=this.startTime??e.startTime,e.stopTime=this.stopTime??e.stopTime,e.currentTime=this.currentTime??e.currentTime,e.clockRange=this.clockRange??e.clockRange,e.multiplier=this.multiplier??e.multiplier,e.clockStep=this.clockStep??e.clockStep,e};const Ut=Vt;var zt=i(132753),Gt=i(654986),Kt=i(899629);const qt=me.A.WHITE,Ht=new fe.A(8,8),Wt=new fe.A(0,0),jt=new fe.A(1,1);function $t(e){e=e??F.A.EMPTY_OBJECT,this._definitionChanged=new ge.A,this._color=void 0,this._colorSubscription=void 0,this._cellAlpha=void 0,this._cellAlphaSubscription=void 0,this._lineCount=void 0,this._lineCountSubscription=void 0,this._lineThickness=void 0,this._lineThicknessSubscription=void 0,this._lineOffset=void 0,this._lineOffsetSubscription=void 0,this.color=e.color,this.cellAlpha=e.cellAlpha,this.lineCount=e.lineCount,this.lineThickness=e.lineThickness,this.lineOffset=e.lineOffset}Object.defineProperties($t.prototype,{isConstant:{get:function(){return ye.A.isConstant(this._color)&&ye.A.isConstant(this._cellAlpha)&&ye.A.isConstant(this._lineCount)&&ye.A.isConstant(this._lineThickness)&&ye.A.isConstant(this._lineOffset)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,_e.A)("color"),cellAlpha:(0,_e.A)("cellAlpha"),lineCount:(0,_e.A)("lineCount"),lineThickness:(0,_e.A)("lineThickness"),lineOffset:(0,_e.A)("lineOffset")}),$t.prototype.getType=function(e){return"Grid"};const Xt=new Ae.A;$t.prototype.getValue=function(e,t){return(0,N.A)(e)||(e=Ae.A.now(Xt)),(0,N.A)(t)||(t={}),t.color=ye.A.getValueOrClonedDefault(this._color,e,qt,t.color),t.cellAlpha=ye.A.getValueOrDefault(this._cellAlpha,e,.1),t.lineCount=ye.A.getValueOrClonedDefault(this._lineCount,e,Ht,t.lineCount),t.lineThickness=ye.A.getValueOrClonedDefault(this._lineThickness,e,jt,t.lineThickness),t.lineOffset=ye.A.getValueOrClonedDefault(this._lineOffset,e,Wt,t.lineOffset),t},$t.prototype.equals=function(e){return this===e||e instanceof $t&&ye.A.equals(this._color,e._color)&&ye.A.equals(this._cellAlpha,e._cellAlpha)&&ye.A.equals(this._lineCount,e._lineCount)&&ye.A.equals(this._lineThickness,e._lineThickness)&&ye.A.equals(this._lineOffset,e._lineOffset)};const Yt=$t;var Zt=i(612967),Jt=i(280749),Qt=i(327458),ei=i(874804),ti=i(423798),ii=i(71005),ni=i(193189);function ri(e){this._definitionChanged=new ge.A,this._color=void 0,this._colorSubscription=void 0,this.color=e}Object.defineProperties(ri.prototype,{isConstant:{get:function(){return ye.A.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,_e.A)("color")}),ri.prototype.getType=function(e){return"PolylineArrow"};const oi=new Ae.A;ri.prototype.getValue=function(e,t){return(0,N.A)(e)||(e=Ae.A.now(oi)),(0,N.A)(t)||(t={}),t.color=ye.A.getValueOrClonedDefault(this._color,e,me.A.WHITE,t.color),t},ri.prototype.equals=function(e){return this===e||e instanceof ri&&ye.A.equals(this._color,e._color)};const si=ri;var ai=i(424620);const li=me.A.WHITE;function ci(e){e=e??F.A.EMPTY_OBJECT,this._definitionChanged=new ge.A,this._color=void 0,this._colorSubscription=void 0,this._glowPower=void 0,this._glowPowerSubscription=void 0,this._taperPower=void 0,this._taperPowerSubscription=void 0,this.color=e.color,this.glowPower=e.glowPower,this.taperPower=e.taperPower}Object.defineProperties(ci.prototype,{isConstant:{get:function(){return ye.A.isConstant(this._color)&&ye.A.isConstant(this._glow)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,_e.A)("color"),glowPower:(0,_e.A)("glowPower"),taperPower:(0,_e.A)("taperPower")}),ci.prototype.getType=function(e){return"PolylineGlow"};const ui=new Ae.A;ci.prototype.getValue=function(e,t){return(0,N.A)(e)||(e=Ae.A.now(ui)),(0,N.A)(t)||(t={}),t.color=ye.A.getValueOrClonedDefault(this._color,e,li,t.color),t.glowPower=ye.A.getValueOrDefault(this._glowPower,e,.25,t.glowPower),t.taperPower=ye.A.getValueOrDefault(this._taperPower,e,1,t.taperPower),t},ci.prototype.equals=function(e){return this===e||e instanceof ci&&ye.A.equals(this._color,e._color)&&ye.A.equals(this._glowPower,e._glowPower)&&ye.A.equals(this._taperPower,e._taperPower)};const di=ci;var hi=i(998261);const pi=me.A.WHITE,fi=me.A.BLACK;function mi(e){e=e??F.A.EMPTY_OBJECT,this._definitionChanged=new ge.A,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this.color=e.color,this.outlineColor=e.outlineColor,this.outlineWidth=e.outlineWidth}Object.defineProperties(mi.prototype,{isConstant:{get:function(){return ye.A.isConstant(this._color)&&ye.A.isConstant(this._outlineColor)&&ye.A.isConstant(this._outlineWidth)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,_e.A)("color"),outlineColor:(0,_e.A)("outlineColor"),outlineWidth:(0,_e.A)("outlineWidth")}),mi.prototype.getType=function(e){return"PolylineOutline"};const gi=new Ae.A;mi.prototype.getValue=function(e,t){return(0,N.A)(e)||(e=Ae.A.now(gi)),(0,N.A)(t)||(t={}),t.color=ye.A.getValueOrClonedDefault(this._color,e,pi,t.color),t.outlineColor=ye.A.getValueOrClonedDefault(this._outlineColor,e,fi,t.outlineColor),t.outlineWidth=ye.A.getValueOrDefault(this._outlineWidth,e,1),t},mi.prototype.equals=function(e){return this===e||e instanceof mi&&ye.A.equals(this._color,e._color)&&ye.A.equals(this._outlineColor,e._outlineColor)&&ye.A.equals(this._outlineWidth,e._outlineWidth)};const Ai=mi;var _i=i(278659),yi=i(354975);function vi(e,t){this._value=void 0,this._definitionChanged=new ge.A,this._eventHelper=new yi.A,this._referenceFrame=t??wt.A.FIXED,this.setValue(e)}Object.defineProperties(vi.prototype,{isConstant:{get:function(){const e=this._value;if(!(0,N.A)(e))return!0;const t=e.length;for(let i=0;i<t;i++)if(!ye.A.isConstant(e[i]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}});const wi=new Ae.A;vi.prototype.getValue=function(e,t){return(0,N.A)(e)||(e=Ae.A.now(wi)),this.getValueInReferenceFrame(e,wt.A.FIXED,t)},vi.prototype.getValueInReferenceFrame=function(e,t,i){if(!(0,N.A)(e))throw new U.A("time is required.");if(!(0,N.A)(t))throw new U.A("referenceFrame is required.");const n=this._value;if(!(0,N.A)(n))return;const r=n.length;(0,N.A)(i)||(i=new Array(r));let o=0,s=0;for(;o<r;){const r=n[o].getValueInReferenceFrame(e,t,i[o]);(0,N.A)(r)&&(i[s]=r,s++),o++}return i.length=s,i},vi.prototype.setValue=function(e){const t=this._eventHelper;if(t.removeAll(),(0,N.A)(e)){this._value=e.slice();const i=e.length;for(let n=0;n<i;n++){const i=e[n];(0,N.A)(i)&&t.add(i.definitionChanged,vi.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},vi.prototype.equals=function(e){return this===e||e instanceof vi&&this._referenceFrame===e._referenceFrame&&ye.A.arrayEquals(this._value,e._value)},vi.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const bi=vi;function xi(e){this._value=void 0,this._definitionChanged=new ge.A,this._eventHelper=new yi.A,this.setValue(e)}Object.defineProperties(xi.prototype,{isConstant:{get:function(){const e=this._value;if(!(0,N.A)(e))return!0;const t=e.length;for(let i=0;i<t;i++)if(!ye.A.isConstant(e[i]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}});const Ti=new Ae.A;xi.prototype.getValue=function(e,t){(0,N.A)(e)||(e=Ae.A.now(Ti));const i=this._value;if(!(0,N.A)(i))return;const n=i.length;(0,N.A)(t)||(t=new Array(n));let r=0,o=0;for(;r<n;){const i=this._value[r].getValue(e,t[r]);(0,N.A)(i)&&(t[o]=i,o++),r++}return t.length=o,t},xi.prototype.setValue=function(e){const t=this._eventHelper;if(t.removeAll(),(0,N.A)(e)){this._value=e.slice();const i=e.length;for(let n=0;n<i;n++){const i=e[n];(0,N.A)(i)&&t.add(i.definitionChanged,xi.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},xi.prototype.equals=function(e){return this===e||e instanceof xi&&ye.A.arrayEquals(this._value,e._value)},xi.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const Si=xi;var Ci=i(470959),Mi=i(777370),Ei=i(857870);const Pi={packedLength:1,pack:function(e,t,i){if(!(0,N.A)(e))throw new U.A("value is required");if(!(0,N.A)(t))throw new U.A("array is required");return t[i=i??0]=e,t},unpack:function(e,t,i){if(!(0,N.A)(e))throw new U.A("array is required");return e[t=t??0]},convertPackedArrayForInterpolation:function(e,t,i,n){if(!(0,N.A)(e))throw new U.A("packedArray is required");let r;(0,N.A)(n)||(n=[]),t=t??0;for(let o=0,s=(i=i??e.length)-t+1;o<s;o++){const i=e[t+o];0===o||Math.abs(r-i)<Math.PI?n[o]=i:n[o]=i-Me.A.TWO_PI,r=i}},unpackInterpolationResult:function(e,t,i,n,r){if(!(0,N.A)(e))throw new U.A("array is required");if(!(0,N.A)(t))throw new U.A("sourceArray is required");return(r=e[0])<0?r+Me.A.TWO_PI:r}};var ki=i(841802),Oi=i(94805);const Ri=Object.freeze({HORIZONTAL:0,VERTICAL:1}),Ii=Ri.HORIZONTAL,Di=me.A.WHITE,Bi=me.A.BLACK;function Li(e){e=e??F.A.EMPTY_OBJECT,this._definitionChanged=new ge.A,this._orientation=void 0,this._orientationSubscription=void 0,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._offset=void 0,this._offsetSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.orientation=e.orientation,this.evenColor=e.evenColor,this.oddColor=e.oddColor,this.offset=e.offset,this.repeat=e.repeat}Object.defineProperties(Li.prototype,{isConstant:{get:function(){return ye.A.isConstant(this._orientation)&&ye.A.isConstant(this._evenColor)&&ye.A.isConstant(this._oddColor)&&ye.A.isConstant(this._offset)&&ye.A.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},orientation:(0,_e.A)("orientation"),evenColor:(0,_e.A)("evenColor"),oddColor:(0,_e.A)("oddColor"),offset:(0,_e.A)("offset"),repeat:(0,_e.A)("repeat")}),Li.prototype.getType=function(e){return"Stripe"};const Fi=new Ae.A;Li.prototype.getValue=function(e,t){return(0,N.A)(e)||(e=Ae.A.now(Fi)),(0,N.A)(t)||(t={}),t.horizontal=ye.A.getValueOrDefault(this._orientation,e,Ii)===Ri.HORIZONTAL,t.evenColor=ye.A.getValueOrClonedDefault(this._evenColor,e,Di,t.evenColor),t.oddColor=ye.A.getValueOrClonedDefault(this._oddColor,e,Bi,t.oddColor),t.offset=ye.A.getValueOrDefault(this._offset,e,0),t.repeat=ye.A.getValueOrDefault(this._repeat,e,1),t},Li.prototype.equals=function(e){return this===e||e instanceof Li&&ye.A.equals(this._orientation,e._orientation)&&ye.A.equals(this._evenColor,e._evenColor)&&ye.A.equals(this._oddColor,e._oddColor)&&ye.A.equals(this._offset,e._offset)&&ye.A.equals(this._repeat,e._repeat)};const Ni=Li;var Vi=i(13346);function Ui(){this._definitionChanged=new ge.A,this._intervals=new Mt.A,this._intervals.changedEvent.addEventListener(Ui.prototype._intervalsChanged,this)}Object.defineProperties(Ui.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}});const zi=new Ae.A;Ui.prototype.getValue=function(e,t){(0,N.A)(e)||(e=Ae.A.now(zi));const i=this._intervals.findDataForIntervalContainingDate(e);return(0,N.A)(i)&&"function"==typeof i.clone?i.clone(t):i},Ui.prototype.equals=function(e){return this===e||e instanceof Ui&&this._intervals.equals(e._intervals,ye.A.equals)},Ui.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)};const Gi=Ui;var Ki=i(331185),qi=i(543622),Hi=i(781745);function Wi(e,t){this._velocityVectorProperty=new Hi.A(e,!0),this._subscription=void 0,this._ellipsoid=void 0,this._definitionChanged=new ge.A,this.ellipsoid=t??st.A.default;const i=this;this._velocityVectorProperty.definitionChanged.addEventListener(function(){i._definitionChanged.raiseEvent(i)})}Object.defineProperties(Wi.prototype,{isConstant:{get:function(){return ye.A.isConstant(this._velocityVectorProperty)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._velocityVectorProperty.position},set:function(e){this._velocityVectorProperty.position=e}},ellipsoid:{get:function(){return this._ellipsoid},set:function(e){this._ellipsoid!==e&&(this._ellipsoid=e,this._definitionChanged.raiseEvent(this))}}});const ji=new D.A,$i=new D.A,Xi=new Ki.A,Yi=new Ae.A;Wi.prototype.getValue=function(e,t){(0,N.A)(e)||(e=Ae.A.now(Yi));const i=this._velocityVectorProperty._getValue(e,$i,ji);if((0,N.A)(i))return qi.A.rotationMatrixFromPositionVelocity(ji,i,this._ellipsoid,Xi),yt.A.fromRotationMatrix(Xi,t)},Wi.prototype.equals=function(e){return this===e||e instanceof Wi&&ye.A.equals(this._velocityVectorProperty,e._velocityVectorProperty)&&(this._ellipsoid===e._ellipsoid||this._ellipsoid.equals(e._ellipsoid))};const Zi=Wi;var Ji=i(685625);const Qi={COMPLETE:0,BELOW_ELLIPSOID_HORIZON:1,ABOVE_ELLIPSOID_HORIZON:2,validate:function(e){return e===Qi.COMPLETE||e===Qi.BELOW_ELLIPSOID_HORIZON||e===Qi.ABOVE_ELLIPSOID_HORIZON},toString:function(e){switch(e){case Qi.COMPLETE:return"COMPLETE";case Qi.BELOW_ELLIPSOID_HORIZON:return"BELOW_ELLIPSOID_HORIZON";case Qi.ABOVE_ELLIPSOID_HORIZON:return"ABOVE_ELLIPSOID_HORIZON";default:throw new U.A("SensorVolumePortionToDisplay value is not valid and cannot be converted to a String.")}}},en=Qi;function tn(){}let nn;function rn(e,t){return"#"===t[0]&&(t=nn+t),Ei.A.fromString(e,t)}function on(e,t,i){if((0,N.A)(i.reference))return rn(t,i.reference);if((0,N.A)(i.velocityReference)){const n=rn(t,i.velocityReference);switch(e){case D.A:case tn:return new Hi.A(n,e===tn);case yt.A:return new Zi(n)}}throw new xt.A(`${JSON.stringify(i)} is not valid CZML.`)}tn.packedLength=D.A.packedLength,tn.unpack=D.A.unpack,tn.pack=D.A.pack;const sn=new D.A,an=new St,ln=new et.A,cn=new Ct.A,un=new yt.A;function dn(e,t){const i=e.uri??e;return(0,N.A)(t)?t.getDerivedResource({url:i}):bt.A.createIfNeeded(i)}function hn(e){const t=e.cartesian;if((0,N.A)(t))return t;const i=e.cartesianVelocity;if((0,N.A)(i))return i;const n=e.unitCartesian;if((0,N.A)(n))return n;const r=e.unitSpherical;if((0,N.A)(r))return function(e){const t=e.length;if(an.magnitude=1,2===t)return an.clock=e[0],an.cone=e[1],D.A.fromSpherical(an,sn),[sn.x,sn.y,sn.z];const i=new Array(t/3*4);for(let n=0,r=0;n<t;n+=3,r+=4)i[r]=e[n],an.clock=e[n+1],an.cone=e[n+2],D.A.fromSpherical(an,sn),i[r+1]=sn.x,i[r+2]=sn.y,i[r+3]=sn.z;return i}(r);const o=e.spherical;if((0,N.A)(o))return function(e){const t=e.length;if(3===t)return an.clock=e[0],an.cone=e[1],an.magnitude=e[2],D.A.fromSpherical(an,sn),[sn.x,sn.y,sn.z];const i=new Array(t);for(let n=0;n<t;n+=4)i[n]=e[n],an.clock=e[n+1],an.cone=e[n+2],an.magnitude=e[n+3],D.A.fromSpherical(an,sn),i[n+1]=sn.x,i[n+2]=sn.y,i[n+3]=sn.z;return i}(o);const s=e.cartographicRadians;if((0,N.A)(s))return function(e){const t=e.length;if(3===t)return ln.longitude=e[0],ln.latitude=e[1],ln.height=e[2],st.A.default.cartographicToCartesian(ln,sn),[sn.x,sn.y,sn.z];const i=new Array(t);for(let n=0;n<t;n+=4)i[n]=e[n],ln.longitude=e[n+1],ln.latitude=e[n+2],ln.height=e[n+3],st.A.default.cartographicToCartesian(ln,sn),i[n+1]=sn.x,i[n+2]=sn.y,i[n+3]=sn.z;return i}(s);const a=e.cartographicDegrees;if((0,N.A)(a))return function(e){const t=e.length;if(3===t)return ln.longitude=Me.A.toRadians(e[0]),ln.latitude=Me.A.toRadians(e[1]),ln.height=e[2],st.A.default.cartographicToCartesian(ln,sn),[sn.x,sn.y,sn.z];const i=new Array(t);for(let n=0;n<t;n+=4)i[n]=e[n],ln.longitude=Me.A.toRadians(e[n+1]),ln.latitude=Me.A.toRadians(e[n+2]),ln.height=e[n+3],st.A.default.cartographicToCartesian(ln,sn),i[n+1]=sn.x,i[n+2]=sn.y,i[n+3]=sn.z;return i}(a);throw new xt.A(`${JSON.stringify(e)} is not a valid CZML interval.`)}function pn(e,t){D.A.unpack(e,t,sn),D.A.normalize(sn,sn),D.A.pack(sn,e,t)}function fn(e,t){yt.A.unpack(e,t,un),yt.A.normalize(un,un),yt.A.pack(un,e,t)}function mn(e){return"boolean"==typeof e?Boolean:"number"==typeof e?Number:"string"==typeof e?String:e.hasOwnProperty("array")?Array:e.hasOwnProperty("boolean")?Boolean:e.hasOwnProperty("boundingRectangle")?Qe.A:e.hasOwnProperty("cartesian2")?fe.A:e.hasOwnProperty("cartesian")||e.hasOwnProperty("spherical")||e.hasOwnProperty("cartographicRadians")||e.hasOwnProperty("cartographicDegrees")?D.A:e.hasOwnProperty("unitCartesian")||e.hasOwnProperty("unitSpherical")?tn:e.hasOwnProperty("rgba")||e.hasOwnProperty("rgbaf")?me.A:e.hasOwnProperty("arcType")?Je.A:e.hasOwnProperty("classificationType")?Et.A:e.hasOwnProperty("colorBlendMode")?Pt.A:e.hasOwnProperty("cornerType")?nt.A:e.hasOwnProperty("heightReference")?kt.Ay:e.hasOwnProperty("horizontalOrigin")?Ot.A:e.hasOwnProperty("date")?Ae.A:e.hasOwnProperty("labelStyle")?Rt.A:e.hasOwnProperty("number")?Number:e.hasOwnProperty("nearFarScalar")?At.A:e.hasOwnProperty("distanceDisplayCondition")?ot.A:e.hasOwnProperty("object")||e.hasOwnProperty("value")?Object:e.hasOwnProperty("unitQuaternion")?yt.A:e.hasOwnProperty("shadowMode")?It.A:e.hasOwnProperty("string")?String:e.hasOwnProperty("stripeOrientation")?Ri:e.hasOwnProperty("wsen")||e.hasOwnProperty("wsenDegrees")?vt.A:e.hasOwnProperty("uri")?Bt:e.hasOwnProperty("verticalOrigin")?Dt.A:Object}const gn={HERMITE:pt,LAGRANGE:mt,LINEAR:gt.A};function An(e,t){const i=e.interpolationAlgorithm,n=e.interpolationDegree;((0,N.A)(i)||(0,N.A)(n))&&t.setInterpolationOptions({interpolationAlgorithm:gn[i],interpolationDegree:n});const r=e.forwardExtrapolationType;(0,N.A)(r)&&(t.forwardExtrapolationType=at.A[r]);const o=e.forwardExtrapolationDuration;(0,N.A)(o)&&(t.forwardExtrapolationDuration=o);const s=e.backwardExtrapolationType;(0,N.A)(s)&&(t.backwardExtrapolationType=at.A[s]);const a=e.backwardExtrapolationDuration;(0,N.A)(a)&&(t.backwardExtrapolationDuration=a)}const _n={iso8601:void 0};function yn(e){if((0,N.A)(e))return _n.iso8601=e,Ct.A.fromIso8601(_n)}function vn(e){const t=ft.A.MAXIMUM_INTERVAL.clone();return t.data=e,t}function wn(e){const t=new Ue.A;return t.intervals.addInterval(vn(e)),t}function bn(e){const t=new qe.A(e.referenceFrame);return t.intervals.addInterval(vn(e)),t}function xn(e,t,i,n,r,o,s){let a,l,c,u=yn(n.interval);(0,N.A)(r)&&(u=(0,N.A)(u)?Ct.A.intersect(u,r,cn):r);const d=!(0,N.A)(n.reference)&&!(0,N.A)(n.velocityReference),h=(0,N.A)(u)&&!u.equals(ft.A.MAXIMUM_INTERVAL);if(!0===n.delete)return h?Tn(t[i],u):void(t[i]=void 0);let p=!1;if(d){if(l=function(e,t,i){switch(e){case Je.A:return Je.A[t.arcType??t];case Array:return t.array;case Boolean:return t.boolean??t;case Qe.A:return t.boundingRectangle;case fe.A:return t.cartesian2;case D.A:return hn(t);case tn:return function(e){const t=hn(e);if(3===t.length)return pn(t,0),t;for(let e=1;e<t.length;e+=4)pn(t,e);return t}(t);case me.A:return function(e){let t=e.rgbaf;if((0,N.A)(t))return t;const i=e.rgba;if(!(0,N.A)(i))return;const n=i.length;if(n===me.A.packedLength)return[me.A.byteToFloat(i[0]),me.A.byteToFloat(i[1]),me.A.byteToFloat(i[2]),me.A.byteToFloat(i[3])];t=new Array(n);for(let e=0;e<n;e+=5)t[e]=i[e],t[e+1]=me.A.byteToFloat(i[e+1]),t[e+2]=me.A.byteToFloat(i[e+2]),t[e+3]=me.A.byteToFloat(i[e+3]),t[e+4]=me.A.byteToFloat(i[e+4]);return t}(t);case Et.A:return Et.A[t.classificationType??t];case Pt.A:return Pt.A[t.colorBlendMode??t];case nt.A:return nt.A[t.cornerType??t];case kt.Ay:return kt.Ay[t.heightReference??t];case Ot.A:return Ot.A[t.horizontalOrigin??t];case Image:return dn(t,i);case Ae.A:return Ae.A.fromIso8601(t.date??t);case Rt.A:return Rt.A[t.labelStyle??t];case Number:return t.number??t;case At.A:return t.nearFarScalar;case ot.A:return t.distanceDisplayCondition;case Object:return t.object??t.value??t;case yt.A:return function(e){const t=e.unitQuaternion;if((0,N.A)(t)){if(4===t.length)return fn(t,0),t;for(let e=1;e<t.length;e+=5)fn(t,e)}return t}(t);case Pi:return t.number??t;case en:return en[t.portionToDisplay??t];case It.A:return It.A[t.shadowMode??t.shadows??t];case String:return t.string??t;case Ri:return Ri[t.stripeOrientation??t];case vt.A:return function(e){let t=e.wsen;if((0,N.A)(t))return t;const i=e.wsenDegrees;if(!(0,N.A)(i))return;const n=i.length;if(n===vt.A.packedLength)return[Me.A.toRadians(i[0]),Me.A.toRadians(i[1]),Me.A.toRadians(i[2]),Me.A.toRadians(i[3])];t=new Array(n);for(let e=0;e<n;e+=5)t[e]=i[e],t[e+1]=Me.A.toRadians(i[e+1]),t[e+2]=Me.A.toRadians(i[e+2]),t[e+3]=Me.A.toRadians(i[e+3]),t[e+4]=Me.A.toRadians(i[e+4]);return t}(t);case Bt:return dn(t,i);case Dt.A:return Dt.A[t.verticalOrigin??t];default:throw new xt.A(`Unknown CzmlDataSource interval type: ${e}`)}}(e,n,o),!(0,N.A)(l))return;a=e.packedLength??1,c=l.length??1,p=!(0,N.A)(n.array)&&"string"!=typeof l&&c>a&&e!==Object}const f="function"==typeof e.unpack&&e!==Pi;if(!p&&!h)return void(t[i]=d?new We.A(f?e.unpack(l,0):l):on(e,s,n));let m,g=t[i];const A=n.epoch;if((0,N.A)(A)&&(m=Ae.A.fromIso8601(A)),p&&!h)return g instanceof Oi.A||(t[i]=g=new Oi.A(e)),g.addSamplesPackedArray(l,m),void An(n,g);let _;if(!p&&h)return u=u.clone(),u.data=d?f?e.unpack(l,0):l:on(e,s,n),(0,N.A)(g)||(t[i]=g=d?new Gi:new Ue.A),void(d&&g instanceof Gi?g.intervals.addInterval(u):g instanceof Ue.A?(d&&(u.data=new We.A(u.data)),g.intervals.addInterval(u)):(t[i]=g=wn(g),d&&(u.data=new We.A(u.data)),g.intervals.addInterval(u)));(0,N.A)(g)||(t[i]=g=new Ue.A),g instanceof Ue.A||(t[i]=g=wn(g));const y=g.intervals;_=y.findInterval(u),(0,N.A)(_)&&_.data instanceof Oi.A||(_=u.clone(),_.data=new Oi.A(e),y.addInterval(_)),_.data.addSamplesPackedArray(l,m),An(n,_.data)}function Tn(e,t){if(e instanceof Oi.A)e.removeSamples(t);else if(e instanceof Gi)e.intervals.removeInterval(t);else if(e instanceof Ue.A){const i=e.intervals;for(let e=0;e<i.length;++e){const n=Ct.A.intersect(i.get(e),t,cn);n.isEmpty||Tn(n.data,t)}return void i.removeInterval(t)}}function Sn(e,t,i,n,r,o,s){if((0,N.A)(n))if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)xn(e,t,i,n[a],r,o,s);else xn(e,t,i,n,r,o,s)}function Cn(e,t,i,n,r,o){let s=yn(i.interval);(0,N.A)(n)&&(s=(0,N.A)(s)?Ct.A.intersect(s,n,cn):n);const a=(0,N.A)(i.cartesianVelocity)?1:0,l=D.A.packedLength*(a+1);let c,u;const d=!(0,N.A)(i.reference),h=(0,N.A)(s)&&!s.equals(ft.A.MAXIMUM_INTERVAL);if(!0===i.delete)return h?Mn(e[t],s):void(e[t]=void 0);let p,f=!1;if(d&&((0,N.A)(i.referenceFrame)&&(p=wt.A[i.referenceFrame]),p=p??wt.A.FIXED,c=hn(i),u=c.length??1,f=u>l),!f&&!h)return void(e[t]=d?new He.A(D.A.unpack(c),p):rn(o,i.reference));let m,g=e[t];const A=i.epoch;if((0,N.A)(A)&&(m=Ae.A.fromIso8601(A)),f&&!h)return g instanceof ki.A&&(!(0,N.A)(p)||g.referenceFrame===p)||(e[t]=g=new ki.A(p,a)),g.addSamplesPackedArray(c,m),void An(i,g);let _;if(!f&&h)return s=s.clone(),s.data=d?D.A.unpack(c):rn(o,i.reference),(0,N.A)(g)||(g=d?new Vi.A(p):new qe.A(p),e[t]=g),void(d&&g instanceof Vi.A&&(0,N.A)(p)&&g.referenceFrame===p?g.intervals.addInterval(s):g instanceof qe.A?(d&&(s.data=new He.A(s.data,p)),g.intervals.addInterval(s)):(e[t]=g=bn(g),d&&(s.data=new He.A(s.data,p)),g.intervals.addInterval(s)));(0,N.A)(g)?g instanceof qe.A||(e[t]=g=bn(g)):e[t]=g=new qe.A(p);const y=g.intervals;_=y.findInterval(s),(0,N.A)(_)&&_.data instanceof ki.A&&(!(0,N.A)(p)||_.data.referenceFrame===p)||(_=s.clone(),_.data=new ki.A(p,a),y.addInterval(_)),_.data.addSamplesPackedArray(c,m),An(i,_.data)}function Mn(e,t){if(e instanceof ki.A)e.removeSamples(t);else if(e instanceof Vi.A)e.intervals.removeInterval(t);else if(e instanceof qe.A){const i=e.intervals;for(let e=0;e<i.length;++e){const n=Ct.A.intersect(i.get(e),t,cn);n.isEmpty||Mn(n.data,t)}return void i.removeInterval(t)}}function En(e,t,i,n,r,o){if((0,N.A)(i))if(Array.isArray(i))for(let r=0,s=i.length;r<s;++r)Cn(e,t,i[r],n,0,o);else Cn(e,t,i,n,0,o)}function Pn(e,t,i,n){(0,N.A)(i.references)?Rn(e,t,i.references,i.interval,n,Si,Ue.A):((0,N.A)(i.cartesian2)?i.array=fe.A.unpackArray(i.cartesian2):(0,N.A)(i.cartesian)&&(i.array=fe.A.unpackArray(i.cartesian)),(0,N.A)(i.array)&&Sn(Array,e,t,i,void 0,void 0,n))}function kn(e,t,i,n,r,o){let s=yn(i.interval);(0,N.A)(n)&&(s=(0,N.A)(s)?Ct.A.intersect(s,n,cn):n);let a,l,c,u=e[t];if((0,N.A)(s)){u instanceof Ke||(u=new Ke,e[t]=u);const i=u.intervals;l=i.findInterval({start:s.start,stop:s.stop}),(0,N.A)(l)?a=l.data:(l=s.clone(),i.addInterval(l))}else a=u;(0,N.A)(i.solidColor)?(a instanceof Ce.A||(a=new Ce.A),c=i.solidColor,Sn(me.A,a,"color",c.color,void 0,void 0,o)):(0,N.A)(i.grid)?(a instanceof Yt||(a=new Yt),c=i.grid,Sn(me.A,a,"color",c.color,void 0,r,o),Sn(Number,a,"cellAlpha",c.cellAlpha,void 0,r,o),Sn(fe.A,a,"lineCount",c.lineCount,void 0,r,o),Sn(fe.A,a,"lineThickness",c.lineThickness,void 0,r,o),Sn(fe.A,a,"lineOffset",c.lineOffset,void 0,r,o)):(0,N.A)(i.image)?(a instanceof Zt.A||(a=new Zt.A),c=i.image,Sn(Image,a,"image",c.image,void 0,r,o),Sn(fe.A,a,"repeat",c.repeat,void 0,r,o),Sn(me.A,a,"color",c.color,void 0,r,o),Sn(Boolean,a,"transparent",c.transparent,void 0,r,o)):(0,N.A)(i.stripe)?(a instanceof Ni||(a=new Ni),c=i.stripe,Sn(Ri,a,"orientation",c.orientation,void 0,r,o),Sn(me.A,a,"evenColor",c.evenColor,void 0,r,o),Sn(me.A,a,"oddColor",c.oddColor,void 0,r,o),Sn(Number,a,"offset",c.offset,void 0,r,o),Sn(Number,a,"repeat",c.repeat,void 0,r,o)):(0,N.A)(i.polylineOutline)?(a instanceof Ai||(a=new Ai),c=i.polylineOutline,Sn(me.A,a,"color",c.color,void 0,r,o),Sn(me.A,a,"outlineColor",c.outlineColor,void 0,r,o),Sn(Number,a,"outlineWidth",c.outlineWidth,void 0,r,o)):(0,N.A)(i.polylineGlow)?(a instanceof di||(a=new di),c=i.polylineGlow,Sn(me.A,a,"color",c.color,void 0,r,o),Sn(Number,a,"glowPower",c.glowPower,void 0,r,o),Sn(Number,a,"taperPower",c.taperPower,void 0,r,o)):(0,N.A)(i.polylineArrow)?(a instanceof si||(a=new si),c=i.polylineArrow,Sn(me.A,a,"color",c.color,void 0,void 0,o)):(0,N.A)(i.polylineDash)?(a instanceof ai.A||(a=new ai.A),c=i.polylineDash,Sn(me.A,a,"color",c.color,void 0,void 0,o),Sn(me.A,a,"gapColor",c.gapColor,void 0,void 0,o),Sn(Number,a,"dashLength",c.dashLength,void 0,r,o),Sn(Number,a,"dashPattern",c.dashPattern,void 0,r,o)):(0,N.A)(i.checkerboard)&&(a instanceof Se||(a=new Se),c=i.checkerboard,Sn(me.A,a,"evenColor",c.evenColor,void 0,r,o),Sn(me.A,a,"oddColor",c.oddColor,void 0,r,o),Sn(fe.A,a,"repeat",c.repeat,void 0,r,o)),(0,N.A)(l)?l.data=a:e[t]=a}function On(e,t,i,n,r,o){if((0,N.A)(i))if(Array.isArray(i))for(let s=0,a=i.length;s<a;++s)kn(e,t,i[s],n,r,o);else kn(e,t,i,n,r,o)}function Rn(e,t,i,n,r,o,s){const a=i.map(function(e){return rn(r,e)});if((0,N.A)(n)){n=yn(n);let i=e[t];if(!(i instanceof s)){const n=new s;n.intervals.addInterval(vn(i)),e[t]=i=n}n.data=new o(a),i.intervals.addInterval(n)}else e[t]=new o(a)}function In(e,t,i,n){const r=i.references;(0,N.A)(r)?Rn(e,t,r,i.interval,n,Si,Ue.A):Sn(Array,e,t,i,void 0,void 0,n)}function Dn(e,t,i,n){if((0,N.A)(i))if(Array.isArray(i))for(let r=0,o=i.length;r<o;++r)In(e,t,i[r],n);else In(e,t,i,n)}function Bn(e,t,i,n){const r=i.references;(0,N.A)(r)?Rn(e,t,r,i.interval,n,bi,qe.A):((0,N.A)(i.cartesian)?i.array=D.A.unpackArray(i.cartesian):(0,N.A)(i.cartographicRadians)?i.array=D.A.fromRadiansArrayHeights(i.cartographicRadians,st.A.default):(0,N.A)(i.cartographicDegrees)&&(i.array=D.A.fromDegreesArrayHeights(i.cartographicDegrees,st.A.default)),(0,N.A)(i.array)&&Sn(Array,e,t,i,void 0,void 0,n))}function Ln(e,t,i,n){if((0,N.A)(i))if(Array.isArray(i))for(let r=0,o=i.length;r<o;++r)Bn(e,t,i[r],n);else Bn(e,t,i,n)}function Fn(e){return D.A.unpackArray(e)}function Nn(e){return D.A.fromRadiansArrayHeights(e,st.A.default)}function Vn(e){return D.A.fromDegreesArrayHeights(e,st.A.default)}function Un(e,t,i,n){const r=i.references;if((0,N.A)(r)){const o=r.map(function(e){const t={};return Rn(t,"positions",e,i.interval,n,bi,qe.A),t.positions});e[t]=new bi(o)}else(0,N.A)(i.cartesian)?i.array=i.cartesian.map(Fn):(0,N.A)(i.cartographicRadians)?i.array=i.cartographicRadians.map(Nn):(0,N.A)(i.cartographicDegrees)&&(i.array=i.cartographicDegrees.map(Vn)),(0,N.A)(i.array)&&Sn(Array,e,t,i,void 0,void 0,n)}function zn(e,t,i,n,r){let o=yn(t.interval);(0,N.A)(i)&&(o=(0,N.A)(o)?Ct.A.intersect(o,i,cn):i);let s=e.nodeTransformations;const a=Object.keys(t);for(let i=0,l=a.length;i<l;++i){const l=a[i];if("interval"===l)continue;const c=t[l];if(!(0,N.A)(c))continue;(0,N.A)(s)||(e.nodeTransformations=s=new Ci.A),s.hasProperty(l)||s.addProperty(l);let u=s[l];(0,N.A)(u)||(s[l]=u=new ei.A),Sn(D.A,u,"translation",c.translation,o,n,r),Sn(yt.A,u,"rotation",c.rotation,o,n,r),Sn(D.A,u,"scale",c.scale,o,n,r)}}function Gn(e,t,i,n,r){let o=yn(t.interval);(0,N.A)(i)&&(o=(0,N.A)(o)?Ct.A.intersect(o,i,cn):i);let s=e.articulations;const a=Object.keys(t);for(let i=0,l=a.length;i<l;++i){const l=a[i];if("interval"===l)continue;const c=t[l];(0,N.A)(c)&&((0,N.A)(s)||(e.articulations=s=new Ci.A),s.hasProperty(l)||s.addProperty(l),Sn(Number,s,l,c,o,n,r))}}function Kn(e){this.polygon=e,this._definitionChanged=new ge.A}function qn(e){return e?Je.A.GEODESIC:Je.A.NONE}function Hn(e,t,i,n,r){let o=e.id;if((0,N.A)(o)||(o=(0,L.A)()),nn=o,!(0,N.A)(r._version)&&"document"!==o)throw new xt.A("The first CZML packet is required to be the document object.");if(!0===e.delete)t.removeById(o);else if("document"===o)!function(e,t){const i=e.version;if((0,N.A)(i)&&"string"==typeof i){const e=i.split(".");if(2===e.length){if("1"!==e[0])throw new xt.A("Cesium only supports CZML version 1.");t._version=i}}if(!(0,N.A)(t._version))throw new xt.A("CZML version information invalid.  It is expected to be a property on the document object in the <Major>.<Minor> version format.");const n=t._documentPacket;(0,N.A)(e.name)&&(n.name=e.name);const r=e.clock;if((0,N.A)(r)){const e=n.clock;(0,N.A)(e)?(e.interval=r.interval??e.interval,e.currentTime=r.currentTime??e.currentTime,e.range=r.range??e.range,e.step=r.step??e.step,e.multiplier=r.multiplier??e.multiplier):n.clock={interval:r.interval,currentTime:r.currentTime,range:r.range,step:r.step,multiplier:r.multiplier}}}(e,r);else{const r=t.getOrCreateEntity(o),s=e.parent;(0,N.A)(s)&&(r.parent=t.getOrCreateEntity(s));for(let o=i.length-1;o>-1;o--)i[o](r,e,t,n)}nn=void 0}function Wn(e,t,i,n){if(!(0,N.A)(t))throw new U.A("czml is required.");let r=t,o=(i=i??F.A.EMPTY_OBJECT).sourceUri,s=i.credit;if("string"==typeof s&&(s=new rt.A(s)),e._credit=s,"string"==typeof t||t instanceof bt.A){r=(t=bt.A.createIfNeeded(t)).fetchJson(),o=o??t.clone();const i=e._resourceCredits,n=t.credits;if((0,N.A)(n)){const e=n.length;for(let t=0;t<e;t++)i.push(n[t])}}return o=bt.A.createIfNeeded(o),Lt.A.setLoading(e,!0),Promise.resolve(r).then(function(t){return function(e,t,i,n){Lt.A.setLoading(e,!0);const r=e._entityCollection;n&&(e._version=void 0,e._documentPacket=new jn,r.removeAll()),$n._processCzml(t,r,i,void 0,e);let o=function(e){let t;const i=e._documentPacket.clock;if(!(0,N.A)(i)){if(!(0,N.A)(e._clock)){const i=e._entityCollection.computeAvailability();if(!i.start.equals(ft.A.MINIMUM_VALUE)){const n=i.start,r=i.stop,o=Ae.A.secondsDifference(r,n),s=Math.round(o/120);return t=new Ut,t.startTime=Ae.A.clone(n),t.stopTime=Ae.A.clone(r),t.clockRange=tt.A.LOOP_STOP,t.multiplier=s,t.currentTime=Ae.A.clone(n),t.clockStep=it.A.SYSTEM_CLOCK_MULTIPLIER,e._clock=t,!0}}return!1}(0,N.A)(e._clock)?t=e._clock.clone():(t=new Ut,t.startTime=ft.A.MINIMUM_VALUE.clone(),t.stopTime=ft.A.MAXIMUM_VALUE.clone(),t.currentTime=ft.A.MINIMUM_VALUE.clone(),t.clockRange=tt.A.LOOP_STOP,t.clockStep=it.A.SYSTEM_CLOCK_MULTIPLIER,t.multiplier=1);const n=yn(i.interval);return(0,N.A)(n)&&(t.startTime=n.start,t.stopTime=n.stop),(0,N.A)(i.currentTime)&&(t.currentTime=Ae.A.fromIso8601(i.currentTime)),(0,N.A)(i.range)&&(t.clockRange=tt.A[i.range]??tt.A.LOOP_STOP),(0,N.A)(i.step)&&(t.clockStep=it.A[i.step]??it.A.SYSTEM_CLOCK_MULTIPLIER),(0,N.A)(i.multiplier)&&(t.multiplier=i.multiplier),!t.equals(e._clock)&&(e._clock=t.clone(e._clock),!0)}(e);const s=e._documentPacket;return(0,N.A)(s.name)&&e._name!==s.name?(e._name=s.name,o=!0):!(0,N.A)(e._name)&&(0,N.A)(i)&&(e._name=(0,lt.A)(i.getUrlComponent()),o=!0),Lt.A.setLoading(e,!1),o&&e._changed.raiseEvent(e),e}(e,t,o,n)}).catch(function(t){return Lt.A.setLoading(e,!1),e._error.raiseEvent(e,t),console.log(t),Promise.reject(t)})}function jn(){this.name=void 0,this.clock=void 0}function $n(e){this._name=e,this._changed=new ge.A,this._error=new ge.A,this._isLoading=!1,this._loading=new ge.A,this._clock=void 0,this._documentPacket=new jn,this._version=void 0,this._entityCollection=new Pe.A(this),this._entityCluster=new Kt.A,this._credit=void 0,this._resourceCredits=[]}Object.defineProperties(Kn.prototype,{isConstant:{get:function(){const e=this.polygon._positions,t=this.polygon._holes;return(!(0,N.A)(e)||e.isConstant)&&(!(0,N.A)(t)||t.isConstant)}},definitionChanged:{get:function(){return this._definitionChanged}}}),Kn.prototype.getValue=function(e,t){let i,n;return(0,N.A)(this.polygon._positions)&&(i=this.polygon._positions.getValue(e)),(0,N.A)(this.polygon._holes)&&(n=this.polygon._holes.getValue(e),(0,N.A)(n)&&(n=n.map(function(e){return new _t.A(e)}))),(0,N.A)(t)?(t.positions=i,t.holes=n,t):new _t.A(i,n)},Kn.prototype.equals=function(e){return this===e||e instanceof Kn&&ye.A.equals(this.polygon._positions,e.polygon._positions)&&ye.A.equals(this.polygon._holes,e.polygon._holes)},$n.load=function(e,t){return(new $n).load(e,t)},Object.defineProperties($n.prototype,{name:{get:function(){return this._name}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,N.A)(e))throw new U.A("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}}}),$n.updaters=[function(e,t,i,n){const r=t.billboard;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.billboard;(0,N.A)(s)||(e.billboard=s=new oe.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(Image,s,"image",r.image,o,n,i),Sn(Number,s,"scale",r.scale,o,n,i),Sn(fe.A,s,"pixelOffset",r.pixelOffset,o,n,i),Sn(D.A,s,"eyeOffset",r.eyeOffset,o,n,i),Sn(Ot.A,s,"horizontalOrigin",r.horizontalOrigin,o,n,i),Sn(Dt.A,s,"verticalOrigin",r.verticalOrigin,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(me.A,s,"color",r.color,o,n,i),Sn(Pi,s,"rotation",r.rotation,o,n,i),function(e,t,i,n,r){(0,N.A)(t)&&Sn(tn,e,"alignedAxis",t,i,n,r)}(s,r.alignedAxis,o,n,i),Sn(Boolean,s,"sizeInMeters",r.sizeInMeters,o,n,i),Sn(Number,s,"width",r.width,o,n,i),Sn(Number,s,"height",r.height,o,n,i),Sn(At.A,s,"scaleByDistance",r.scaleByDistance,o,n,i),Sn(At.A,s,"translucencyByDistance",r.translucencyByDistance,o,n,i),Sn(At.A,s,"pixelOffsetScaleByDistance",r.pixelOffsetScaleByDistance,o,n,i),Sn(Qe.A,s,"imageSubRegion",r.imageSubRegion,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Sn(Number,s,"disableDepthTestDistance",r.disableDepthTestDistance,o,n,i)},function(e,t,i,n){const r=t.box;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.box;(0,N.A)(s)||(e.box=s=new ce.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(D.A,s,"dimensions",r.dimensions,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(Boolean,s,"fill",r.fill,o,n,i),On(s,"material",r.material,o,n,i),Sn(Boolean,s,"outline",r.outline,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.corridor;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.corridor;(0,N.A)(s)||(e.corridor=s=new $e.A),Sn(Boolean,s,"show",r.show,o,n,i),Ln(s,"positions",r.positions,i),Sn(Number,s,"width",r.width,o,n,i),Sn(Number,s,"height",r.height,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(Number,s,"extrudedHeight",r.extrudedHeight,o,n,i),Sn(kt.Ay,s,"extrudedHeightReference",r.extrudedHeightReference,o,n,i),Sn(nt.A,s,"cornerType",r.cornerType,o,n,i),Sn(Number,s,"granularity",r.granularity,o,n,i),Sn(Boolean,s,"fill",r.fill,o,n,i),On(s,"material",r.material,o,n,i),Sn(Boolean,s,"outline",r.outline,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Sn(Et.A,s,"classificationType",r.classificationType,o,n,i),Sn(Number,s,"zIndex",r.zIndex,o,n,i)},function(e,t,i,n){const r=t.cylinder;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.cylinder;(0,N.A)(s)||(e.cylinder=s=new Ze.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(Number,s,"length",r.length,o,n,i),Sn(Number,s,"topRadius",r.topRadius,o,n,i),Sn(Number,s,"bottomRadius",r.bottomRadius,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(Boolean,s,"fill",r.fill,o,n,i),On(s,"material",r.material,o,n,i),Sn(Boolean,s,"outline",r.outline,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(Number,s,"numberOfVerticalLines",r.numberOfVerticalLines,o,n,i),Sn(Number,s,"slices",r.slices,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.ellipse;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.ellipse;(0,N.A)(s)||(e.ellipse=s=new zt.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(Number,s,"semiMajorAxis",r.semiMajorAxis,o,n,i),Sn(Number,s,"semiMinorAxis",r.semiMinorAxis,o,n,i),Sn(Number,s,"height",r.height,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(Number,s,"extrudedHeight",r.extrudedHeight,o,n,i),Sn(kt.Ay,s,"extrudedHeightReference",r.extrudedHeightReference,o,n,i),Sn(Pi,s,"rotation",r.rotation,o,n,i),Sn(Pi,s,"stRotation",r.stRotation,o,n,i),Sn(Number,s,"granularity",r.granularity,o,n,i),Sn(Boolean,s,"fill",r.fill,o,n,i),On(s,"material",r.material,o,n,i),Sn(Boolean,s,"outline",r.outline,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(Number,s,"numberOfVerticalLines",r.numberOfVerticalLines,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Sn(Et.A,s,"classificationType",r.classificationType,o,n,i),Sn(Number,s,"zIndex",r.zIndex,o,n,i)},function(e,t,i,n){const r=t.ellipsoid;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.ellipsoid;(0,N.A)(s)||(e.ellipsoid=s=new Gt.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(D.A,s,"radii",r.radii,o,n,i),Sn(D.A,s,"innerRadii",r.innerRadii,o,n,i),Sn(Number,s,"minimumClock",r.minimumClock,o,n,i),Sn(Number,s,"maximumClock",r.maximumClock,o,n,i),Sn(Number,s,"minimumCone",r.minimumCone,o,n,i),Sn(Number,s,"maximumCone",r.maximumCone,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(Boolean,s,"fill",r.fill,o,n,i),On(s,"material",r.material,o,n,i),Sn(Boolean,s,"outline",r.outline,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(Number,s,"stackPartitions",r.stackPartitions,o,n,i),Sn(Number,s,"slicePartitions",r.slicePartitions,o,n,i),Sn(Number,s,"subdivisions",r.subdivisions,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.label;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.label;(0,N.A)(s)||(e.label=s=new Jt.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(String,s,"text",r.text,o,n,i),Sn(String,s,"font",r.font,o,n,i),Sn(Rt.A,s,"style",r.style,o,n,i),Sn(Number,s,"scale",r.scale,o,n,i),Sn(Boolean,s,"showBackground",r.showBackground,o,n,i),Sn(me.A,s,"backgroundColor",r.backgroundColor,o,n,i),Sn(fe.A,s,"backgroundPadding",r.backgroundPadding,o,n,i),Sn(fe.A,s,"pixelOffset",r.pixelOffset,o,n,i),Sn(D.A,s,"eyeOffset",r.eyeOffset,o,n,i),Sn(Ot.A,s,"horizontalOrigin",r.horizontalOrigin,o,n,i),Sn(Dt.A,s,"verticalOrigin",r.verticalOrigin,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(me.A,s,"fillColor",r.fillColor,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(At.A,s,"translucencyByDistance",r.translucencyByDistance,o,n,i),Sn(At.A,s,"pixelOffsetScaleByDistance",r.pixelOffsetScaleByDistance,o,n,i),Sn(At.A,s,"scaleByDistance",r.scaleByDistance,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Sn(Number,s,"disableDepthTestDistance",r.disableDepthTestDistance,o,n,i)},function(e,t,i,n){const r=t.model;if(!(0,N.A)(r))return;const o=yn(r.interval);let s,a,l=e.model;(0,N.A)(l)||(e.model=l=new Qt.A),Sn(Boolean,l,"show",r.show,o,n,i),Sn(Bt,l,"uri",r.gltf,o,n,i),Sn(Number,l,"scale",r.scale,o,n,i),Sn(Number,l,"minimumPixelSize",r.minimumPixelSize,o,n,i),Sn(Number,l,"maximumScale",r.maximumScale,o,n,i),Sn(Boolean,l,"incrementallyLoadTextures",r.incrementallyLoadTextures,o,n,i),Sn(Boolean,l,"runAnimations",r.runAnimations,o,n,i),Sn(Boolean,l,"clampAnimations",r.clampAnimations,o,n,i),Sn(It.A,l,"shadows",r.shadows,o,n,i),Sn(kt.Ay,l,"heightReference",r.heightReference,o,n,i),Sn(me.A,l,"silhouetteColor",r.silhouetteColor,o,n,i),Sn(Number,l,"silhouetteSize",r.silhouetteSize,o,n,i),Sn(me.A,l,"color",r.color,o,n,i),Sn(Pt.A,l,"colorBlendMode",r.colorBlendMode,o,n,i),Sn(Number,l,"colorBlendAmount",r.colorBlendAmount,o,n,i),Sn(ot.A,l,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i);const c=r.nodeTransformations;if((0,N.A)(c))if(Array.isArray(c))for(s=0,a=c.length;s<a;++s)zn(l,c[s],o,n,i);else zn(l,c,o,n,i);const u=r.articulations;if((0,N.A)(u))if(Array.isArray(u))for(s=0,a=u.length;s<a;++s)Gn(l,u[s],o,n,i);else Gn(l,u,o,n,i)},function(e,t,i,n){const r=t.name;(0,N.A)(r)&&(e.name=t.name)},function(e,t,i,n){const r=t.description;(0,N.A)(r)&&Sn(String,e,"description",r,void 0,n,i)},function(e,t,i,n){const r=t.path;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.path;(0,N.A)(s)||(e.path=s=new ti.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(Number,s,"leadTime",r.leadTime,o,n,i),Sn(Number,s,"trailTime",r.trailTime,o,n,i),Sn(Number,s,"width",r.width,o,n,i),Sn(Number,s,"resolution",r.resolution,o,n,i),On(s,"material",r.material,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.point;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.point;(0,N.A)(s)||(e.point=s=new ii.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(Number,s,"pixelSize",r.pixelSize,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(me.A,s,"color",r.color,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(At.A,s,"scaleByDistance",r.scaleByDistance,o,n,i),Sn(At.A,s,"translucencyByDistance",r.translucencyByDistance,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Sn(Number,s,"disableDepthTestDistance",r.disableDepthTestDistance,o,n,i)},function(e,t,i,n){const r=t.polygon;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.polygon;(0,N.A)(s)||(e.polygon=s=new ni.A),Sn(Boolean,s,"show",r.show,o,n,i),Ln(s,"_positions",r.positions,i),function(e,t,i,n){if((0,N.A)(i))if(Array.isArray(i))for(let r=0,o=i.length;r<o;++r)Un(e,t,i[r],n);else Un(e,t,i,n)}(s,"_holes",r.holes,i),((0,N.A)(s._positions)||(0,N.A)(s._holes))&&(s.hierarchy=new Kn(s)),Sn(Number,s,"height",r.height,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(Number,s,"extrudedHeight",r.extrudedHeight,o,n,i),Sn(kt.Ay,s,"extrudedHeightReference",r.extrudedHeightReference,o,n,i),Sn(Pi,s,"stRotation",r.stRotation,o,n,i),Sn(Number,s,"granularity",r.granularity,o,n,i),Sn(Boolean,s,"fill",r.fill,o,n,i),On(s,"material",r.material,o,n,i),Sn(Boolean,s,"outline",r.outline,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(Boolean,s,"perPositionHeight",r.perPositionHeight,o,n,i),Sn(Boolean,s,"closeTop",r.closeTop,o,n,i),Sn(Boolean,s,"closeBottom",r.closeBottom,o,n,i),Sn(Je.A,s,"arcType",r.arcType,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Sn(Et.A,s,"classificationType",r.classificationType,o,n,i),Sn(Number,s,"zIndex",r.zIndex,o,n,i)},function(e,t,i,n){const r=t.polyline;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.polyline;if((0,N.A)(s)||(e.polyline=s=new hi.A),Sn(Boolean,s,"show",r.show,o,n,i),Ln(s,"positions",r.positions,i),Sn(Number,s,"width",r.width,o,n,i),Sn(Number,s,"granularity",r.granularity,o,n,i),On(s,"material",r.material,o,n,i),On(s,"depthFailMaterial",r.depthFailMaterial,o,n,i),Sn(Je.A,s,"arcType",r.arcType,o,n,i),Sn(Boolean,s,"clampToGround",r.clampToGround,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Sn(Et.A,s,"classificationType",r.classificationType,o,n,i),Sn(Number,s,"zIndex",r.zIndex,o,n,i),(0,N.A)(r.followSurface)&&!(0,N.A)(r.arcType)){const e={};Sn(Boolean,e,"followSurface",r.followSurface,o,n,i),s.arcType=(a=e.followSurface,l=qn,new de.A(function(e,t){return l(a.getValue(e,t))},a.isConstant))}var a,l},function(e,t,i,n){const r=t.polylineVolume;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.polylineVolume;(0,N.A)(s)||(e.polylineVolume=s=new _i.A),Ln(s,"positions",r.positions,i),function(e,t,i,n){if((0,N.A)(i))if(Array.isArray(i))for(let r=0,o=i.length;r<o;r++)Pn(e,t,i[r],n);else Pn(e,t,i,n)}(s,"shape",r.shape,i),Sn(Boolean,s,"show",r.show,o,n,i),Sn(nt.A,s,"cornerType",r.cornerType,o,n,i),Sn(Boolean,s,"fill",r.fill,o,n,i),On(s,"material",r.material,o,n,i),Sn(Boolean,s,"outline",r.outline,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(Number,s,"granularity",r.granularity,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.properties;if((0,N.A)(r)){(0,N.A)(e.properties)||(e.properties=new Ci.A);for(const t in r)if(r.hasOwnProperty(t)){e.properties.hasProperty(t)||e.properties.addProperty(t);const o=r[t];if(Array.isArray(o))for(let r=0,s=o.length;r<s;++r)xn(mn(o[r]),e.properties,t,o[r],void 0,n,i);else xn(mn(o),e.properties,t,o,void 0,n,i)}}},function(e,t,i,n){const r=t.rectangle;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.rectangle;(0,N.A)(s)||(e.rectangle=s=new Mi.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(vt.A,s,"coordinates",r.coordinates,o,n,i),Sn(Number,s,"height",r.height,o,n,i),Sn(kt.Ay,s,"heightReference",r.heightReference,o,n,i),Sn(Number,s,"extrudedHeight",r.extrudedHeight,o,n,i),Sn(kt.Ay,s,"extrudedHeightReference",r.extrudedHeightReference,o,n,i),Sn(Pi,s,"rotation",r.rotation,o,n,i),Sn(Pi,s,"stRotation",r.stRotation,o,n,i),Sn(Number,s,"granularity",r.granularity,o,n,i),Sn(Boolean,s,"fill",r.fill,o,n,i),On(s,"material",r.material,o,n,i),Sn(Boolean,s,"outline",r.outline,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Sn(Et.A,s,"classificationType",r.classificationType,o,n,i),Sn(Number,s,"zIndex",r.zIndex,o,n,i)},function(e,t,i,n){const r=t.position;(0,N.A)(r)&&En(e,"position",r,void 0,0,i)},function(e,t,i,n){const r=t.tileset;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.tileset;(0,N.A)(s)||(e.tileset=s=new he.A),Sn(Boolean,s,"show",r.show,o,n,i),Sn(Bt,s,"uri",r.uri,o,n,i),Sn(Number,s,"maximumScreenSpaceError",r.maximumScreenSpaceError,o,n,i)},function(e,t,i,n){const r=t.viewFrom;(0,N.A)(r)&&Sn(D.A,e,"viewFrom",r,void 0,n,i)},function(e,t,i,n){const r=t.wall;if(!(0,N.A)(r))return;const o=yn(r.interval);let s=e.wall;(0,N.A)(s)||(e.wall=s=new Ji.A),Sn(Boolean,s,"show",r.show,o,n,i),Ln(s,"positions",r.positions,i),Dn(s,"minimumHeights",r.minimumHeights,i),Dn(s,"maximumHeights",r.maximumHeights,i),Sn(Number,s,"granularity",r.granularity,o,n,i),Sn(Boolean,s,"fill",r.fill,o,n,i),On(s,"material",r.material,o,n,i),Sn(Boolean,s,"outline",r.outline,o,n,i),Sn(me.A,s,"outlineColor",r.outlineColor,o,n,i),Sn(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Sn(It.A,s,"shadows",r.shadows,o,n,i),Sn(ot.A,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.orientation;(0,N.A)(r)&&Sn(yt.A,e,"orientation",r,void 0,n,i)},function(e,t,i,n){const r=t.availability;if(!(0,N.A)(r))return;let o;if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)(0,N.A)(o)||(o=new Mt.A),o.addInterval(yn(r[e]));else o=new Mt.A,o.addInterval(yn(r));e.availability=o}],$n.registerUpdater=function(e){$n.updaters.includes(e)||$n.updaters.push(e)},$n.unregisterUpdater=function(e){if($n.updaters.includes(e)){const t=$n.updaters.indexOf(e);$n.updaters.splice(t,1)}},$n.prototype.process=function(e,t){return Wn(this,e,t,!1)},$n.prototype.load=function(e,t){return Wn(this,e,t,!0)},$n.prototype.update=function(e){return!0},$n.processPacketData=Sn,$n.processPositionPacketData=En,$n.processMaterialPacketData=On,$n._processCzml=function(e,t,i,n,r){if(n=n??$n.updaters,Array.isArray(e))for(let o=0,s=e.length;o<s;++o)Hn(e[o],t,n,i,r);else Hn(e,t,n,i,r)};const Xn=$n;var Yn=i(335557),Zn=i(720567),Jn=i(345747),Qn=i(799086),er=i(584295),tr=i(754462),ir=i(226698),nr=i(668696),rr=i(286299),or=i(867211),sr=i(253560),ar=i(335385),lr=function(e,t){return lr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},lr(e,t)};function cr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}lr(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var ur=function(){return ur=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ur.apply(this,arguments)};Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var dr=Object.prototype.hasOwnProperty;function hr(e){return"boolean"==typeof e}function pr(e,t){for(var i=e.length-1;i>=0;i--)!0===t(e[i])&&e.splice(i,1)}function fr(e){throw new Error("Unhandled case for value: '".concat(e,"'"))}var mr=/\s+/,gr=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName},e.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){for(var t,i=this.getClass(),n=i?i.split(mr):[],r=e.split(mr);t=r.shift();)-1===n.indexOf(t)&&n.push(t);return this.getAttrs().class=n.join(" "),this},e.prototype.removeClass=function(e){for(var t,i=this.getClass(),n=i?i.split(mr):[],r=e.split(mr);n.length&&(t=r.shift());){var o=n.indexOf(t);-1!==o&&n.splice(o,1)}return this.getAttrs().class=n.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},e.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){var e=this.getAttrs(),t=[];for(var i in e)dr.call(e,i)&&t.push(i+'="'+e[i]+'"');return t.join(" ")},e}();function Ar(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t}function _r(e,t,i){var n=t/2,r=Math.ceil(n),o=-1*Math.floor(n),s="";return o<0&&(s=e.substr(o)),e.substr(0,r)+i+s}var yr=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new gr({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},i=this.createCssClass(e);return i&&(t.class=i),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var i=[t],n=e.getCssClassSuffixes(),r=0,o=n.length;r<o;r++)i.push(t+"-"+n[r]);return i.join(" ")}return""},e.prototype.processAnchorText=function(e){return this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t.length)return e;var i=t.length,n=t.location;return"smart"===n?function(e,t,i){var n,r;if(null==i?(i="&hellip;",r=3,n=8):(r=i.length,n=i.length),e.length<=t)return e;var o=t-r,s=function(e){var t={},i=e,n=i.match(/^([a-z]+):\/\//i);return n&&(t.scheme=n[1],i=i.slice(n[0].length)),(n=i.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=n[1],i=i.slice(n[0].length)),(n=i.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=n[1],i=i.slice(n[0].length)),(n=i.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=n[1],i=i.slice(n[0].length)),(n=i.match(/^#(.*?)$/i))&&(t.fragment=n[1]),t}(e);if(s.query){var a=s.query.match(/^(.*?)(?=(\?|#))(.*?)$/i);a&&(s.query=s.query.substr(0,a[1].length),e=Ar(s))}if(e.length<=t)return e;if(s.host&&(s.host=s.host.replace(/^www\./,""),e=Ar(s)),e.length<=t)return e;var l="";if(s.host&&(l+=s.host),l.length>=o)return s.host.length===t?(s.host.substr(0,t-r)+i).substr(0,o+n):_r(l,o,i).substr(0,o+n);var c="";if(s.path&&(c+="/"+s.path),s.query&&(c+="?"+s.query),c){if((l+c).length>=o)return(l+c).length==t?(l+c).substr(0,t):(l+_r(c,o-l.length,i)).substr(0,o+n);l+=c}if(s.fragment){var u="#"+s.fragment;if((l+u).length>=o)return(l+u).length==t?(l+u).substr(0,t):(l+_r(u,o-l.length,i)).substr(0,o+n);l+=u}if(s.scheme&&s.host){var d=s.scheme+"://";if((l+d).length<o)return(d+l).substr(0,t)}if(l.length<=t)return l;var h="";return o>0&&(h=l.substr(-1*Math.floor(o/2))),(l.substr(0,Math.ceil(o/2))+i+h).substr(0,o+n)}(e,i):"middle"===n?function(e,t,i){if(e.length<=t)return e;var n,r;null==i?(i="&hellip;",n=8,r=3):(n=i.length,r=i.length);var o=t-r,s="";return o>0&&(s=e.substr(-1*Math.floor(o/2))),(e.substr(0,Math.ceil(o/2))+i+s).substr(0,o+n)}(e,i):function(e,t){return function(e,t,i){var n;return e.length>t&&(null==i?(i="&hellip;",n=3):n=i.length,e=e.substring(0,t-n)+i),e}(e,t,void 0)}(e,i)},e}(),vr=function(){function e(e){this._=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.type]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}();function wr(e){return e>=65&&e<=90||e>=97&&e<=122}function br(e){return e>=48&&e<=57}function xr(e){return 34==e||39==e}function Tr(e){return e<8232?e<160?e>=9&&e<=13||32==e:e<5760?160==e:5760==e||e>=8192&&e<=8202:e<8287?e>=8232&&e<=8233||8239==e:e<12288?8287==e:12288==e||65279==e}function Sr(e){return e<4800?e<2949?e<2451?e<1425?e<768?e<192?e<169?e<65?e>=48&&e<=57:e>=65&&e<=90||e>=97&&e<=122:e<181?e>=169&&e<=170||174==e:181==e||186==e:e<710?e<216?e>=192&&e<=214:e>=216&&e<=246||e>=248&&e<=705:e<748?e>=710&&e<=721||e>=736&&e<=740:748==e||750==e:e<910?e<895?e<886?e>=768&&e<=884:e>=886&&e<=887||e>=890&&e<=893:e<904?895==e||902==e:e>=904&&e<=906||908==e:e<1155?e<931?e>=910&&e<=929:e>=931&&e<=1013||e>=1015&&e<=1153:e<1369?e>=1155&&e<=1327||e>=1329&&e<=1366:1369==e||e>=1377&&e<=1415:e<1808?e<1552?e<1476?e<1471?e>=1425&&e<=1469:1471==e||e>=1473&&e<=1474:e<1488?e>=1476&&e<=1477||1479==e:e>=1488&&e<=1514||e>=1520&&e<=1522:e<1749?e<1568?e>=1552&&e<=1562:e>=1568&&e<=1641||e>=1646&&e<=1747:e<1770?e>=1749&&e<=1756||e>=1759&&e<=1768:e>=1770&&e<=1788||1791==e:e<2230?e<2042?e<1869?e>=1808&&e<=1866:e>=1869&&e<=1969||e>=1984&&e<=2037:e<2112?2042==e||e>=2048&&e<=2093:e>=2112&&e<=2139||e>=2208&&e<=2228:e<2406?e<2260?e>=2230&&e<=2237:e>=2260&&e<=2273||e>=2275&&e<=2403:e<2437?e>=2406&&e<=2415||e>=2417&&e<=2435:e>=2437&&e<=2444||e>=2447&&e<=2448:e<2693?e<2579?e<2519?e<2486?e<2474?e>=2451&&e<=2472:e>=2474&&e<=2480||2482==e:e<2503?e>=2486&&e<=2489||e>=2492&&e<=2500:e>=2503&&e<=2504||e>=2507&&e<=2510:e<2534?e<2524?2519==e:e>=2524&&e<=2525||e>=2527&&e<=2531:e<2565?e>=2534&&e<=2545||e>=2561&&e<=2563:e>=2565&&e<=2570||e>=2575&&e<=2576:e<2631?e<2613?e<2602?e>=2579&&e<=2600:e>=2602&&e<=2608||e>=2610&&e<=2611:e<2620?e>=2613&&e<=2614||e>=2616&&e<=2617:2620==e||e>=2622&&e<=2626:e<2649?e<2635?e>=2631&&e<=2632:e>=2635&&e<=2637||2641==e:e<2662?e>=2649&&e<=2652||2654==e:e>=2662&&e<=2677||e>=2689&&e<=2691:e<2821?e<2759?e<2730?e<2703?e>=2693&&e<=2701:e>=2703&&e<=2705||e>=2707&&e<=2728:e<2741?e>=2730&&e<=2736||e>=2738&&e<=2739:e>=2741&&e<=2745||e>=2748&&e<=2757:e<2784?e<2763?e>=2759&&e<=2761:e>=2763&&e<=2765||2768==e:e<2809?e>=2784&&e<=2787||e>=2790&&e<=2799:2809==e||e>=2817&&e<=2819:e<2887?e<2858?e<2831?e>=2821&&e<=2828:e>=2831&&e<=2832||e>=2835&&e<=2856:e<2869?e>=2858&&e<=2864||e>=2866&&e<=2867:e>=2869&&e<=2873||e>=2876&&e<=2884:e<2911?e<2902?e>=2887&&e<=2888||e>=2891&&e<=2893:e>=2902&&e<=2903||e>=2908&&e<=2909:e<2929?e>=2911&&e<=2915||e>=2918&&e<=2927:2929==e||e>=2946&&e<=2947:e<3517?e<3205?e<3046?e<2984?e<2969?e<2958?e>=2949&&e<=2954:e>=2958&&e<=2960||e>=2962&&e<=2965:e<2974?e>=2969&&e<=2970||2972==e:e>=2974&&e<=2975||e>=2979&&e<=2980:e<3014?e<2990?e>=2984&&e<=2986:e>=2990&&e<=3001||e>=3006&&e<=3010:e<3024?e>=3014&&e<=3016||e>=3018&&e<=3021:3024==e||3031==e:e<3142?e<3086?e<3072?e>=3046&&e<=3055:e>=3072&&e<=3075||e>=3077&&e<=3084:e<3114?e>=3086&&e<=3088||e>=3090&&e<=3112:e>=3114&&e<=3129||e>=3133&&e<=3140:e<3160?e<3146?e>=3142&&e<=3144:e>=3146&&e<=3149||e>=3157&&e<=3158:e<3174?e>=3160&&e<=3162||e>=3168&&e<=3171:e>=3174&&e<=3183||e>=3200&&e<=3203:e<3333?e<3274?e<3242?e<3214?e>=3205&&e<=3212:e>=3214&&e<=3216||e>=3218&&e<=3240:e<3260?e>=3242&&e<=3251||e>=3253&&e<=3257:e>=3260&&e<=3268||e>=3270&&e<=3272:e<3296?e<3285?e>=3274&&e<=3277:e>=3285&&e<=3286||3294==e:e<3313?e>=3296&&e<=3299||e>=3302&&e<=3311:e>=3313&&e<=3314||e>=3329&&e<=3331:e<3423?e<3389?e<3342?e>=3333&&e<=3340:e>=3342&&e<=3344||e>=3346&&e<=3386:e<3402?e>=3389&&e<=3396||e>=3398&&e<=3400:e>=3402&&e<=3406||e>=3412&&e<=3415:e<3458?e<3430?e>=3423&&e<=3427:e>=3430&&e<=3439||e>=3450&&e<=3455:e<3482?e>=3458&&e<=3459||e>=3461&&e<=3478:e>=3482&&e<=3505||e>=3507&&e<=3515:e<3804?e<3722?e<3570?e<3535?e<3520?3517==e:e>=3520&&e<=3526||3530==e:e<3544?e>=3535&&e<=3540||3542==e:e>=3544&&e<=3551||e>=3558&&e<=3567:e<3664?e<3585?e>=3570&&e<=3571:e>=3585&&e<=3642||e>=3648&&e<=3662:e<3716?e>=3664&&e<=3673||e>=3713&&e<=3714:3716==e||e>=3719&&e<=3720:e<3754?e<3737?e<3725?3722==e:3725==e||e>=3732&&e<=3735:e<3749?e>=3737&&e<=3743||e>=3745&&e<=3747:3749==e||3751==e:e<3776?e<3757?e>=3754&&e<=3755:e>=3757&&e<=3769||e>=3771&&e<=3773:e<3784?e>=3776&&e<=3780||3782==e:e>=3784&&e<=3789||e>=3792&&e<=3801:e<4176?e<3902?e<3872?e<3840?e>=3804&&e<=3807:3840==e||e>=3864&&e<=3865:e<3895?e>=3872&&e<=3881||3893==e:3895==e||3897==e:e<3974?e<3913?e>=3902&&e<=3911:e>=3913&&e<=3948||e>=3953&&e<=3972:e<4038?e>=3974&&e<=3991||e>=3993&&e<=4028:4038==e||e>=4096&&e<=4169:e<4688?e<4301?e<4256?e>=4176&&e<=4253:e>=4256&&e<=4293||4295==e:e<4348?4301==e||e>=4304&&e<=4346:e>=4348&&e<=4680||e>=4682&&e<=4685:e<4746?e<4698?e>=4688&&e<=4694||4696==e:e>=4698&&e<=4701||e>=4704&&e<=4744:e<4786?e>=4746&&e<=4749||e>=4752&&e<=4784:e>=4786&&e<=4789||e>=4792&&e<=4798:e<11035?e<7416?e<6176?e<5873?e<4992?e<4824?e<4802?4800==e:e>=4802&&e<=4805||e>=4808&&e<=4822:e<4888?e>=4824&&e<=4880||e>=4882&&e<=4885:e>=4888&&e<=4954||e>=4957&&e<=4959:e<5121?e<5024?e>=4992&&e<=5007:e>=5024&&e<=5109||e>=5112&&e<=5117:e<5761?e>=5121&&e<=5740||e>=5743&&e<=5759:e>=5761&&e<=5786||e>=5792&&e<=5866:e<6002?e<5920?e<5888?e>=5873&&e<=5880:e>=5888&&e<=5900||e>=5902&&e<=5908:e<5984?e>=5920&&e<=5940||e>=5952&&e<=5971:e>=5984&&e<=5996||e>=5998&&e<=6e3:e<6108?e<6016?e>=6002&&e<=6003:e>=6016&&e<=6099||6103==e:e<6155?e>=6108&&e<=6109||e>=6112&&e<=6121:e>=6155&&e<=6157||e>=6160&&e<=6169:e<6783?e<6512?e<6400?e<6272?e>=6176&&e<=6263:e>=6272&&e<=6314||e>=6320&&e<=6389:e<6448?e>=6400&&e<=6430||e>=6432&&e<=6443:e>=6448&&e<=6459||e>=6470&&e<=6509:e<6608?e<6528?e>=6512&&e<=6516:e>=6528&&e<=6571||e>=6576&&e<=6601:e<6688?e>=6608&&e<=6617||e>=6656&&e<=6683:e>=6688&&e<=6750||e>=6752&&e<=6780:e<7040?e<6832?e<6800?e>=6783&&e<=6793:e>=6800&&e<=6809||6823==e:e<6992?e>=6832&&e<=6846||e>=6912&&e<=6987:e>=6992&&e<=7001||e>=7019&&e<=7027:e<7245?e<7168?e>=7040&&e<=7155:e>=7168&&e<=7223||e>=7232&&e<=7241:e<7376?e>=7245&&e<=7293||e>=7296&&e<=7304:e>=7376&&e<=7378||e>=7380&&e<=7414:e<8450?e<8130?e<8025?e<7960?e<7424?e>=7416&&e<=7417:e>=7424&&e<=7669||e>=7675&&e<=7957:e<8008?e>=7960&&e<=7965||e>=7968&&e<=8005:e>=8008&&e<=8013||e>=8016&&e<=8023:e<8031?e<8027?8025==e:8027==e||8029==e:e<8118?e>=8031&&e<=8061||e>=8064&&e<=8116:e>=8118&&e<=8124||8126==e:e<8205?e<8150?e<8134?e>=8130&&e<=8132:e>=8134&&e<=8140||e>=8144&&e<=8147:e<8178?e>=8150&&e<=8155||e>=8160&&e<=8172:e>=8178&&e<=8180||e>=8182&&e<=8188:e<8305?e<8252?8205==e:8252==e||8265==e:e<8336?8305==e||8319==e:e>=8336&&e<=8348||e>=8400&&e<=8432:e<8579?e<8486?e<8469?e<8455?8450==e:8455==e||e>=8458&&e<=8467:e<8482?8469==e||e>=8473&&e<=8477:8482==e||8484==e:e<8495?e<8488?8486==e:8488==e||e>=8490&&e<=8493:e<8517?e>=8495&&e<=8505||e>=8508&&e<=8511:e>=8517&&e<=8521||8526==e:e<9410?e<9e3?e<8592?e>=8579&&e<=8580:e>=8592&&e<=8703||e>=8986&&e<=8987:e<9193?9e3==e||9167==e:e>=9193&&e<=9203||e>=9208&&e<=9210:e<9723?e<9654?9410==e||e>=9642&&e<=9643:9654==e||9664==e:e<10548?e>=9723&&e<=9726||e>=9728&&e<=10175:e>=10548&&e<=10549||e>=11013&&e<=11015:e<43259?e<12445?e<11688?e<11520?e<11264?e<11088?e>=11035&&e<=11036:11088==e||11093==e:e<11360?e>=11264&&e<=11310||e>=11312&&e<=11358:e>=11360&&e<=11492||e>=11499&&e<=11507:e<11568?e<11559?e>=11520&&e<=11557:11559==e||11565==e:e<11647?e>=11568&&e<=11623||11631==e:e>=11647&&e<=11670||e>=11680&&e<=11686:e<11744?e<11712?e<11696?e>=11688&&e<=11694:e>=11696&&e<=11702||e>=11704&&e<=11710:e<11728?e>=11712&&e<=11718||e>=11720&&e<=11726:e>=11728&&e<=11734||e>=11736&&e<=11742:e<12330?e<11823?e>=11744&&e<=11775:11823==e||e>=12293&&e<=12294:e<12353?e>=12330&&e<=12341||e>=12347&&e<=12349:e>=12353&&e<=12438||e>=12441&&e<=12442:e<42512?e<12951?e<12549?e<12449?e>=12445&&e<=12447:e>=12449&&e<=12538||e>=12540&&e<=12543:e<12704?e>=12549&&e<=12589||e>=12593&&e<=12686:e>=12704&&e<=12730||e>=12784&&e<=12799:e<19968?e<12953?12951==e:12953==e||e>=13312&&e<=19893:e<42192?e>=19968&&e<=40917||e>=40960&&e<=42124:e>=42192&&e<=42237||e>=42240&&e<=42508:e<42891?e<42623?e<42560?e>=42512&&e<=42539:e>=42560&&e<=42610||e>=42612&&e<=42621:e<42775?e>=42623&&e<=42725||e>=42736&&e<=42737:e>=42775&&e<=42783||e>=42786&&e<=42888:e<43072?e<42928?e>=42891&&e<=42926:e>=42928&&e<=42935||e>=42999&&e<=43047:e<43216?e>=43072&&e<=43123||e>=43136&&e<=43205:e>=43216&&e<=43225||e>=43232&&e<=43255:e<55243?e<43744?e<43488?e<43312?e<43261?43259==e:43261==e||e>=43264&&e<=43309:e<43392?e>=43312&&e<=43347||e>=43360&&e<=43388:e>=43392&&e<=43456||e>=43471&&e<=43481:e<43600?e<43520?e>=43488&&e<=43518:e>=43520&&e<=43574||e>=43584&&e<=43597:e<43642?e>=43600&&e<=43609||e>=43616&&e<=43638:e>=43642&&e<=43714||e>=43739&&e<=43741:e<43824?e<43785?e<43762?e>=43744&&e<=43759:e>=43762&&e<=43766||e>=43777&&e<=43782:e<43808?e>=43785&&e<=43790||e>=43793&&e<=43798:e>=43808&&e<=43814||e>=43816&&e<=43822:e<44012?e<43868?e>=43824&&e<=43866:e>=43868&&e<=43877||e>=43888&&e<=44010:e<44032?e>=44012&&e<=44013||e>=44016&&e<=44025:e>=44032&&e<=55203||e>=55216&&e<=55238:e<64848?e<64298?e<64112?e<55296?e>=55243&&e<=55291:e>=55296&&e<=57343||e>=63744&&e<=64109:e<64275?e>=64112&&e<=64217||e>=64256&&e<=64262:e>=64275&&e<=64279||e>=64285&&e<=64296:e<64320?e<64312?e>=64298&&e<=64310:e>=64312&&e<=64316||64318==e:e<64326?e>=64320&&e<=64321||e>=64323&&e<=64324:e>=64326&&e<=64433||e>=64467&&e<=64829:e<65296?e<65024?e<64914?e>=64848&&e<=64911:e>=64914&&e<=64967||e>=65008&&e<=65019:e<65136?e>=65024&&e<=65039||e>=65056&&e<=65071:e>=65136&&e<=65140||e>=65142&&e<=65276:e<65474?e<65345?e>=65296&&e<=65305||e>=65313&&e<=65338:e>=65345&&e<=65370||e>=65382&&e<=65470:e<65490?e>=65474&&e<=65479||e>=65482&&e<=65487:e>=65490&&e<=65495||e>=65498&&e<=65500}function Cr(e){return e<58?e<44?33==e:44==e||46==e:e<63?e>=58&&e<=59:63==e||94==e}function Mr(e){return e<91?40==e:91==e||123==e}function Er(e){return e<93?41==e:93==e||125==e}var Pr=/^(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|travelersinsurance|vermögensberatung|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermögensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--mgbcpq6gpa1a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbc0a9azcg|xn--nqv7fs00ema|americanfamily|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq480n2rg|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|wolterskluwer|xn--cckwcxetd|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--4dbrk0ce|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|சிங்கப்பூர்|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nextdirect|properties|protection|prudential|realestate|republican|restaurant|schaeffler|tatamotors|technology|university|vlaanderen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--q7ce6a|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|institute|insurance|kuokgroup|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|pramerica|richardli|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--qxa6a|xn--tckwe|xn--vhquv|yodobashi|موريتانيا|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|builders|business|capetown|catering|catholic|cipriani|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|mckinsey|memorial|merckmsd|mortgage|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|softbank|software|stcgroup|supplies|training|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|السعودية|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|banamex|bauhaus|bestbuy|booking|brother|capital|caravan|careers|channel|charity|chintai|citadel|clubmed|college|cologne|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hotmail|hyundai|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lanxess|lasalle|latrobe|leclerc|limited|lincoln|markets|monster|netbank|netflix|network|neustar|okinawa|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|singles|staples|storage|support|surgery|systems|temasek|theater|theatre|tickets|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|yamaxun|youtube|zuerich|католик|البحرين|الجزائر|العليان|پاکستان|كاثوليك|இந்தியா|abbott|abbvie|africa|agency|airbus|airtel|alipay|alsace|alstom|amazon|anquan|aramco|author|bayern|beauty|berlin|bharti|bostik|boston|broker|camera|career|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kindle|kosher|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|monash|mormon|moscow|museum|nagoya|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|pictet|quebec|racing|realty|reisen|repair|report|review|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|walter|webcam|xihuan|yachts|yandex|zappos|москва|онлайн|ابوظبي|ارامكو|الاردن|المغرب|امارات|فلسطين|مليسيا|भारतम्|இலங்கை|ファッション|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dance|deals|delta|drive|dubai|earth|edeka|email|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|irish|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|loans|locus|lotte|lotto|mango|media|miami|money|movie|music|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|ישראל|ایران|بازار|بھارت|سودان|سورية|همراه|भारोत|संगठन|বাংলা|భారత్|ഭാരതം|嘉里大酒店|aarp|able|aero|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|dvag|erni|fage|fail|fans|farm|fast|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kids|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|read|reit|rent|rest|rich|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scot|seat|seek|sexy|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|дети|сайт|بارت|بيتك|ڀارت|تونس|شبكة|عراق|عمان|موقع|भारत|ভারত|ভাৰত|ਭਾਰਤ|ભારત|ଭାରତ|ಭಾರತ|ලංකා|アマゾン|グーグル|クラウド|ポイント|组织机构|電訊盈科|香格里拉|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|ceo|cfa|cfd|com|cpa|crs|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gay|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|llp|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|scb|sew|sex|sfr|ski|sky|soy|spa|srl|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|бел|ком|қаз|мкд|мон|орг|рус|срб|укр|հայ|קום|عرب|قطر|كوم|مصر|कॉम|नेट|คอม|ไทย|ລາວ|ストア|セール|みんな|中文网|亚马逊|天主教|我爱你|新加坡|淡马锡|飞利浦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|ευ|бг|ею|рф|გე|닷넷|닷컴|삼성|한국|コム|世界|中信|中国|中國|企业|佛山|信息|健康|八卦|公司|公益|台湾|台灣|商城|商店|商标|嘉里|在线|大拿|娱乐|家電|广东|微博|慈善|手机|招聘|政务|政府|新闻|时尚|書籍|机构|游戏|澳門|点看|移动|网址|网店|网站|网络|联通|谷歌|购物|通販|集团|食品|餐厅|香港)$/,kr=/https?:\/\//i,Or=new RegExp("^"+kr.source,"i"),Rr=/^(javascript|vbscript):/i,Ir=/^[A-Za-z][-.+A-Za-z0-9]*:(\/\/)?([^:/]*)/,Dr=/^(?:\/\/)?([^/#?:]+)/,Br=wr;function Lr(e){return wr(e)||br(e)||43===e||45===e||46===e}var Fr=Sr;function Nr(e){return 95===e||Fr(e)}function Vr(e){return Sr(e)||((t=e)<91?t<47?t>=35&&t<=43||45==t:t<61?47==t:61==t||64==t:t<95?91==t||93==t:t<123?95==t:t>=123&&t<=126||10003==t)||Cr(e);var t}function Ur(e){return 47===e||63===e||35===e}function zr(e){return Pr.test(e.toLowerCase())}var Gr=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,Kr=/[:/?#]/,qr=/^(https?:\/\/)?(?:www\.)?/i,Hr=/^\/\//,Wr=function(e){function t(t){var i=e.call(this,t)||this;return i.type="url",i.url="",i.urlMatchType="scheme",i.protocolRelativeMatch=!1,i.stripPrefix={scheme:!0,www:!0},i.stripTrailingSlash=!0,i.decodePercentEncoding=!0,i.protocolPrepended=!1,i.urlMatchType=t.urlMatchType,i.url=t.url,i.protocolRelativeMatch=t.protocolRelativeMatch,i.stripPrefix=t.stripPrefix,i.stripTrailingSlash=t.stripTrailingSlash,i.decodePercentEncoding=t.decodePercentEncoding,i}return cr(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||"scheme"===this.urlMatchType||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=e.replace(Hr,"")),this.stripPrefix.scheme&&(e=function(e){return e.replace(Or,"")}(e)),this.stripPrefix.www&&(e=function(e){return e.includes("www.")?e.replace(qr,"$1"):e}(e)),this.stripTrailingSlash&&(e=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e}(e)),this.decodePercentEncoding&&(e=function(e){var t=e.replace(/%(?:22|26|27|3C|3E)/gi,function(e){return"%22"===e?"&quot;":"%26"===e?"&amp;":"%27"===e?"&#39;":"%3C"===e||"%3c"===e?"&lt;":"&gt;"});if(t.includes("%"))try{return decodeURIComponent(t)}catch(e){}return t}(e)),e},t}(vr),jr=/^mailto:/i,$r=Sr;function Xr(e){return $r(e)||((t=e)<47?t<42?33==t||t>=35&&t<=39:t>=42&&t<=43||45==t:t<63?47==t||61==t:t<94?63==t:t>=94&&t<=96||t>=123&&t<=126);var t}var Yr=function(e){function t(t){var i=e.call(this,t)||this;return i.type="email",i.email="",i.email=t.email,i}return cr(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(vr);function Zr(e){return 95===e||Sr(e)}var Jr=["twitter","facebook","instagram","tiktok","youtube"],Qr=function(e){function t(t){var i=e.call(this,t)||this;return i.type="hashtag",i.serviceName="twitter",i.hashtag="",i.serviceName=t.serviceName,i.hashtag=t.hashtag,i}return cr(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;case"tiktok":return"https://www.tiktok.com/tag/"+t;case"youtube":return"https://youtube.com/hashtag/"+t;default:fr(e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),i=this.getServiceName();return i&&t.push(i),t},t}(vr),eo={twitter:/^@\w{1,15}$/,instagram:/^@[_\w]{1,30}$/,soundcloud:/^@[-a-z0-9_]{3,25}$/,tiktok:/^@[.\w]{1,23}[\w]$/,youtube:/^@[-.·\w]{3,30}$/};function to(e){return 45===e||46===e||95===e||wr(e)||br(e)}var io=["twitter","instagram","soundcloud","tiktok","youtube"],no=function(e){function t(t){var i=e.call(this,t)||this;return i.type="mention",i.serviceName="twitter",i.mention="",i.mention=t.mention,i.serviceName=t.serviceName,i}return cr(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;case"tiktok":return"https://www.tiktok.com/@"+this.mention;case"youtube":return"https://youtube.com/@"+this.mention;default:fr(this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),i=this.getServiceName();return i&&t.push(i),t},t}(vr),ro=/[-. ()]/,oo=new RegExp("^".concat(/(?:(?:(?:(\+)?\d{1,3}[-. ]?)?\(?\d{3}\)?[-. ]?\d{3}[-. ]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-. ]?(?:\d[-. ]?){6,12}\d+))([,;]+[0-9]+#?)*/.source,"|").concat(/(0([1-9]-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source,"$"));function so(e){return 45===e||46===e||32===e}function ao(e){return 44===e||59===e}var lo=function(e){function t(t){var i=e.call(this,t)||this;return i.type="phone",i.number="",i.plusSign=!1,i.number=t.number,i.plusSign=t.plusSign,i}return cr(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(vr),co=function(){function e(e,t){this.charIdx=0,this.matches=[],this._stateMachines=[],this.schemeUrlMachinesCount=0,this.text=e,this.tagBuilder=t.tagBuilder,this.stripPrefix=t.stripPrefix,this.stripTrailingSlash=t.stripTrailingSlash,this.decodePercentEncoding=t.decodePercentEncoding,this.hashtagServiceName=t.hashtagServiceName,this.mentionServiceName=t.mentionServiceName}return Object.defineProperty(e.prototype,"stateMachines",{get:function(){return this._stateMachines},enumerable:!1,configurable:!0}),e.prototype.addMachine=function(e){this._stateMachines.push(e),ss(e)&&this.schemeUrlMachinesCount++},e.prototype.removeMachine=function(e){this._stateMachines=this._stateMachines.filter(function(t){return t!==e}),ss(e)&&this.schemeUrlMachinesCount--},e.prototype.hasSchemeUrlMachine=function(){return this.schemeUrlMachinesCount>0},e}();function uo(e,t,i){var n=e.charIdx;if(35===i)e.addMachine({type:2,startIdx:n,state:28,acceptStateReached:!1});else if(64===i)e.addMachine({type:3,startIdx:n,state:30,acceptStateReached:!1});else if(47===i)e.addMachine(rs(n,11));else if(43===i)e.addMachine(os(n,37));else if(40===i)e.addMachine(os(n,32));else{if(br(i)&&(e.addMachine(os(n,38)),e.addMachine(function(e){return{type:0,startIdx:e,state:13,acceptStateReached:!1,matchType:2,octetsEncountered:1}}(n))),$r(i)){var r="m"===t.toLowerCase()?15:22;e.addMachine(function(e,t){return{type:1,startIdx:e,state:t,acceptStateReached:!1}}(n,r))}Br(i)&&e.addMachine(ns(n,0)),Sr(i)&&e.addMachine(rs(n,5))}}function ho(e,t,i){58===i?t.state=2:45===i?t.state=1:Lr(i)||e.removeMachine(t)}function po(e,t,i){var n=e.charIdx;45===i||(47===i?(e.removeMachine(t),e.addMachine(rs(n,11))):Lr(i)?t.state=0:e.removeMachine(t))}function fo(e,t,i){var n=e.charIdx;47===i?t.state=3:46===i?e.removeMachine(t):Fr(i)?(t.state=5,Br(i)&&e.addMachine(ns(n,0))):e.removeMachine(t)}function mo(e,t,i){47===i?t.state=4:Vr(i)?(t.state=10,t.acceptStateReached=!0):es(e,t)}function go(e,t,i,n){47===n?(t.state=10,t.acceptStateReached=!0):Fr(n)?(t.state=5,t.acceptStateReached=!0):e.removeMachine(t)}function Ao(e,t,i){47===i?t.state=12:e.removeMachine(t)}function _o(e,t,i){Fr(i)?t.state=5:e.removeMachine(t)}function yo(e,t,i){46===i?t.state=7:45===i?t.state=6:58===i?t.state=8:Ur(i)?t.state=10:Nr(i)||es(e,t)}function vo(e,t,i,n){45===n||(46===n?es(e,t):Fr(n)?t.state=5:es(e,t))}function wo(e,t,i,n){46===n?es(e,t):Fr(n)?(t.state=5,t.acceptStateReached=!0):es(e,t)}function bo(e,t,i){46===i?t.state=14:58===i?t.state=8:br(i)||(Ur(i)?t.state=10:Sr(i)?e.removeMachine(t):es(e,t))}function xo(e,t,i){br(i)?(t.octetsEncountered++,4===t.octetsEncountered&&(t.acceptStateReached=!0),t.state=13):es(e,t)}function To(e,t,i){br(i)?t.state=9:es(e,t)}function So(e,t,i){br(i)||(Ur(i)?t.state=10:es(e,t))}function Co(e,t,i){Vr(i)||es(e,t)}function Mo(e,t,i,n){"a"===i.toLowerCase()?t.state=16:Do(e,t,n)}function Eo(e,t,i,n){"i"===i.toLowerCase()?t.state=17:Do(e,t,n)}function Po(e,t,i,n){"l"===i.toLowerCase()?t.state=18:Do(e,t,n)}function ko(e,t,i,n){"t"===i.toLowerCase()?t.state=19:Do(e,t,n)}function Oo(e,t,i,n){"o"===i.toLowerCase()?t.state=20:Do(e,t,n)}function Ro(e,t,i){58===i?t.state=21:Do(e,t,i)}function Io(e,t,i){Xr(i)?t.state=22:e.removeMachine(t)}function Do(e,t,i){46===i?t.state=23:64===i?t.state=24:Xr(i)?t.state=22:e.removeMachine(t)}function Bo(e,t,i){46===i||64===i?e.removeMachine(t):Xr(i)?t.state=22:e.removeMachine(t)}function Lo(e,t,i){Fr(i)?t.state=25:e.removeMachine(t)}function Fo(e,t,i){46===i?t.state=27:45===i?t.state=26:Nr(i)||es(e,t)}function No(e,t,i){45===i||46===i?es(e,t):Nr(i)?t.state=25:es(e,t)}function Vo(e,t,i){46===i||45===i?es(e,t):Fr(i)?(t.state=25,t.acceptStateReached=!0):es(e,t)}function Uo(e,t,i){Zr(i)?(t.state=29,t.acceptStateReached=!0):e.removeMachine(t)}function zo(e,t,i){Zr(i)||es(e,t)}function Go(e,t,i){to(i)?(t.state=31,t.acceptStateReached=!0):e.removeMachine(t)}function Ko(e,t,i){to(i)||(Sr(i)?e.removeMachine(t):es(e,t))}function qo(e,t,i,n){br(n)?t.state=38:(e.removeMachine(t),uo(e,i,n))}function Ho(e,t,i,n){br(n)?t.state=33:e.removeMachine(t),uo(e,i,n)}function Wo(e,t,i){br(i)?t.state=34:e.removeMachine(t)}function jo(e,t,i){br(i)?t.state=35:e.removeMachine(t)}function $o(e,t,i){41===i?t.state=36:e.removeMachine(t)}function Xo(e,t,i,n){br(n)?t.state=38:so(n)?t.state=39:e.removeMachine(t)}function Yo(e,t,i,n){var r=e.charIdx;t.acceptStateReached=!0,ao(n)?t.state=40:35===n?t.state=41:br(n)||(40===n?t.state=32:so(n)?t.state=39:(es(e,t),Br(n)&&e.addMachine(ns(r,0))))}function Zo(e,t,i,n){br(n)?t.state=38:40===n?t.state=32:(es(e,t),uo(e,i,n))}function Jo(e,t,i){ao(i)||(35===i?t.state=41:br(i)?t.state=38:es(e,t))}function Qo(e,t,i){ao(i)?t.state=40:br(i)?e.removeMachine(t):es(e,t)}function es(e,t){var i=e.matches,n=e.text,r=e.charIdx,o=e.tagBuilder,s=e.stripPrefix,a=e.stripTrailingSlash,l=e.decodePercentEncoding,c=e.hashtagServiceName,u=e.mentionServiceName;if(e.removeMachine(t),t.acceptStateReached){var d,h,p=t.startIdx,f=n.slice(t.startIdx,r);switch(f=function(e){for(var t={"(":0,"{":0,"[":0},i=0;i<e.length;i++){var n=e.charAt(i);Mr(o=e.charCodeAt(i))?t[n]++:Er(o)&&t[is[n]]--}for(var r=e.length-1;r>=0;){var o;if(n=e.charAt(r),Er(o=e.charCodeAt(r))){var s=is[n];if(!(t[s]<0))break;t[s]++,r--}else{if(!Cr(o))break;r--}}return e.slice(0,r+1)}(f),t.type){case 0:if(64===n.charCodeAt(t.startIdx-1))return;switch(t.matchType){case 0:var m=kr.exec(f);if(m&&(p+=m.index,f=f.slice(m.index)),!function(e){if(Rr.test(e))return!1;var t=e.match(Ir);if(!t)return!1;var i=!!t[1],n=t[2];return!!i||!(-1===n.indexOf(".")||!/[A-Za-z]/.test(n))}(f))return;break;case 1:if(!function(e){var t=e.match(Dr);if(!t)return!1;var i=t[0].split(".");return!(i.length<2||!zr(i[i.length-1]))}(f))return;break;case 2:if(!function(e){var t=e.split(Kr,1)[0];return Gr.test(t)}(f))return;break;default:fr(t)}i.push(new Wr({tagBuilder:o,matchedText:f,offset:p,urlMatchType:ts(t.matchType),url:f,protocolRelativeMatch:"//"===f.slice(0,2),stripPrefix:s,stripTrailingSlash:a,decodePercentEncoding:l}));break;case 1:zr(f.split(".").pop())&&i.push(new Yr({tagBuilder:o,matchedText:f,offset:p,email:f.replace(jr,"")}));break;case 2:f.length<=140&&i.push(new Qr({tagBuilder:o,matchedText:f,offset:p,serviceName:c,hashtag:f.slice(1)}));break;case 3:h=f,eo[u].test(h)&&i.push(new no({tagBuilder:o,matchedText:f,offset:p,serviceName:u,mention:f.slice(1)}));break;case 4:if(("+"===(d=f=f.replace(/ +$/g,"")).charAt(0)||ro.test(d))&&oo.test(d)){var g=f.replace(/[^0-9,;#]/g,"");i.push(new lo({tagBuilder:o,matchedText:f,offset:p,number:g,plusSign:"+"===f.charAt(0)}))}break;default:fr(t)}}}function ts(e){switch(e){case 0:return"scheme";case 1:return"tld";case 2:return"ipV4";default:fr(e)}}var is={")":"(","}":"{","]":"["};function ns(e,t){return{type:0,startIdx:e,state:t,acceptStateReached:!1,matchType:0}}function rs(e,t){return{type:0,startIdx:e,state:t,acceptStateReached:!1,matchType:1}}function os(e,t){return{type:4,startIdx:e,state:t,acceptStateReached:!1}}function ss(e){return 0===e.type&&0===e.matchType}var as=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing},ls=new as,cs=function(e,t){this.charIdx=0,this.state=0,this.currentDataIdx=0,this.currentTag=ls,this.html=e,this.callbacks=t};function us(e,t){"<"===t&&Rs(e)}function ds(e,t,i){"!"===t?e.state=13:"/"===t?(e.state=2,e.currentTag=new as(ur(ur({},e.currentTag),{isClosing:!0}))):"<"===t?Rs(e):wr(i)?(e.state=3,e.currentTag=new as(ur(ur({},e.currentTag),{isOpening:!0}))):(e.state=0,e.currentTag=ls)}function hs(e,t,i){Tr(i)?(e.currentTag=new as(ur(ur({},e.currentTag),{name:Ds(e)})),e.state=4):"<"===t?Rs(e):"/"===t?(e.currentTag=new as(ur(ur({},e.currentTag),{name:Ds(e)})),e.state=12):">"===t?(e.currentTag=new as(ur(ur({},e.currentTag),{name:Ds(e)})),Is(e)):wr(i)||br(i)||":"===t||Os(e)}function ps(e,t,i){">"===t?Os(e):wr(i)?e.state=3:Os(e)}function fs(e,t,i){var n;Tr(i)||("/"===t?e.state=12:">"===t?Is(e):"<"===t?Rs(e):"="===t||xr(i)||(n=i)>=0&&n<=31||127==n?Os(e):e.state=5)}function ms(e,t,i){Tr(i)?e.state=6:"/"===t?e.state=12:"="===t?e.state=7:">"===t?Is(e):"<"===t?Rs(e):xr(i)&&Os(e)}function gs(e,t,i){Tr(i)||("/"===t?e.state=12:"="===t?e.state=7:">"===t?Is(e):"<"===t?Rs(e):xr(i)?Os(e):e.state=5)}function As(e,t,i){Tr(i)||('"'===t?e.state=8:"'"===t?e.state=9:/[>=`]/.test(t)?Os(e):"<"===t?Rs(e):e.state=10)}function _s(e,t){'"'===t&&(e.state=11)}function ys(e,t){"'"===t&&(e.state=11)}function vs(e,t,i){Tr(i)?e.state=4:">"===t?Is(e):"<"===t&&Rs(e)}function ws(e,t,i){Tr(i)?e.state=4:"/"===t?e.state=12:">"===t?Is(e):"<"===t?Rs(e):(e.state=4,function(e){e.charIdx--}(e))}function bs(e,t){">"===t?(e.currentTag=new as(ur(ur({},e.currentTag),{isClosing:!0})),Is(e)):Os(e)}function xs(e){var t=e.html,i=e.charIdx;"--"===t.slice(i,i+2)?(e.charIdx++,e.currentTag=new as(ur(ur({},e.currentTag),{type:"comment"})),e.state=14):"DOCTYPE"===t.slice(i,i+7).toUpperCase()?(e.charIdx+=6,e.currentTag=new as(ur(ur({},e.currentTag),{type:"doctype"})),e.state=20):Os(e)}function Ts(e,t){"-"===t?e.state=15:">"===t?Os(e):e.state=16}function Ss(e,t){"-"===t?e.state=18:">"===t?Os(e):e.state=16}function Cs(e,t){"-"===t&&(e.state=17)}function Ms(e,t){e.state="-"===t?18:16}function Es(e,t){">"===t?Is(e):"!"===t?e.state=19:"-"===t||(e.state=16)}function Ps(e,t){"-"===t?e.state=17:">"===t?Is(e):e.state=16}function ks(e,t){">"===t?Is(e):"<"===t&&Rs(e)}function Os(e){e.state=0,e.currentTag=ls}function Rs(e){e.state=1,e.currentTag=new as({idx:e.charIdx})}function Is(e){var t=e.html.slice(e.currentDataIdx,e.currentTag.idx);t&&e.callbacks.onText(t,e.currentDataIdx);var i=e.currentTag;"comment"===i.type?e.callbacks.onComment(i.idx):"doctype"===i.type?e.callbacks.onDoctype(i.idx):(i.isOpening&&e.callbacks.onOpenTag(i.name,i.idx),i.isClosing&&e.callbacks.onCloseTag(i.name,i.idx)),Os(e),e.currentDataIdx=e.charIdx+1}function Ds(e){var t=e.currentTag.idx+(e.currentTag.isClosing?2:1);return e.html.slice(t,e.charIdx).toLowerCase()}function Bs(e,t){return e.getOffset()-t.getOffset()}const Ls=function(){function e(t){var i,n;void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.tagBuilder=null,this.urls=(null==(n=t.urls)&&(n=!0),hr(n)?{schemeMatches:n,tldMatches:n,ipV4Matches:n}:{schemeMatches:!hr(n.schemeMatches)||n.schemeMatches,tldMatches:!hr(n.tldMatches)||n.tldMatches,ipV4Matches:!hr(n.ipV4Matches)||n.ipV4Matches}),this.email=hr(t.email)?t.email:this.email,this.phone=hr(t.phone)?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow=hr(t.newWindow)?t.newWindow:this.newWindow,this.stripPrefix=(null==(i=t.stripPrefix)&&(i=!0),hr(i)?{scheme:i,www:i}:{scheme:!hr(i.scheme)||i.scheme,www:!hr(i.www)||i.www}),this.stripTrailingSlash=hr(t.stripTrailingSlash)?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding=hr(t.decodePercentEncoding)?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var r=this.mention;if(!1!==r&&-1===io.indexOf(r))throw new Error("invalid `mention` cfg '".concat(r,"' - see docs"));var o,s=this.hashtag;if(!1!==s&&-1===Jr.indexOf(s))throw new Error("invalid `hashtag` cfg '".concat(s,"' - see docs"));this.truncate="number"==typeof(o=t.truncate)?{length:o,location:"end"}:ur({length:Number.POSITIVE_INFINITY,location:"end"},o),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,i){return new e(i).link(t)},e.parse=function(t,i){return new e(i).parse(t)},e.prototype.parse=function(e){var t=this,i=["a","style","script"],n=0,r=[];return function(e,t){for(var i=new cs(e,t),n=e.length;i.charIdx<n;){var r=e.charAt(i.charIdx),o=e.charCodeAt(i.charIdx);switch(i.state){case 0:us(i,r);break;case 1:ds(i,r,o);break;case 2:ps(i,r,o);break;case 3:hs(i,r,o);break;case 4:fs(i,r,o);break;case 5:ms(i,r,o);break;case 6:gs(i,r,o);break;case 7:As(i,r,o);break;case 8:_s(i,r);break;case 9:ys(i,r);break;case 10:vs(i,r,o);break;case 11:ws(i,r,o);break;case 12:bs(i,r);break;case 13:xs(i);break;case 14:Ts(i,r);break;case 15:Ss(i,r);break;case 16:Cs(i,r);break;case 17:Ms(i,r);break;case 18:Es(i,r);break;case 19:Ps(i,r);break;case 20:ks(i,r);break;default:fr(i.state)}i.charIdx++}i.currentDataIdx<i.charIdx&&function(e){var t=e.html.slice(e.currentDataIdx,e.charIdx);e.callbacks.onText(t,e.currentDataIdx),e.currentDataIdx=e.charIdx+1}(i)}(e,{onOpenTag:function(e){i.indexOf(e)>=0&&n++},onText:function(e,i){if(0===n){var o=e.split(/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),s=i;o.forEach(function(e,i){if(i%2==0){var n=t.parseText(e,s);r.push.apply(r,function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}([],function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}(n),!1))}s+=e.length})}},onCloseTag:function(e){i.indexOf(e)>=0&&(n=Math.max(n-1,0))},onComment:function(){},onDoctype:function(){}}),r=this.compactMatches(r),r=this.removeUnwantedMatches(r)},e.prototype.compactMatches=function(e){e.sort(Bs);for(var t=0;t<e.length-1;){var i=e[t],n=i.getOffset(),r=i.getMatchedText().length;if(t+1<e.length&&e[t+1].getOffset()===n){var o=e[t+1].getMatchedText().length>r?t:t+1;e.splice(o,1)}else t++}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||pr(e,function(e){return"hashtag"===e.getType()}),this.email||pr(e,function(e){return"email"===e.getType()}),this.phone||pr(e,function(e){return"phone"===e.getType()}),this.mention||pr(e,function(e){return"mention"===e.getType()}),this.urls.schemeMatches||pr(e,function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()}),this.urls.tldMatches||pr(e,function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()}),this.urls.ipV4Matches||pr(e,function(e){return"url"===e.getType()&&"ipV4"===e.getUrlMatchType()}),e},e.prototype.parseText=function(e,t){t=t||0;for(var i=function(e,t){for(var i=new co(e,t);i.charIdx<i.text.length;i.charIdx++){var n=e.charAt(i.charIdx),r=e.charCodeAt(i.charIdx);if(0===i.stateMachines.length)uo(i,n,r);else{for(var o=i.stateMachines.length-1;o>=0;o--){var s=i.stateMachines[o];switch(s.state){case 11:Ao(i,s,r);break;case 12:_o(i,s,r);break;case 0:ho(i,s,r);break;case 1:po(i,s,r);break;case 2:fo(i,s,r);break;case 3:mo(i,s,r);break;case 4:go(i,s,0,r);break;case 5:yo(i,s,r);break;case 6:vo(i,s,0,r);break;case 7:wo(i,s,0,r);break;case 13:bo(i,s,r);break;case 14:xo(i,s,r);break;case 8:To(i,s,r);break;case 9:So(i,s,r);break;case 10:Co(i,s,r);break;case 15:Mo(i,s,n,r);break;case 16:Eo(i,s,n,r);break;case 17:Po(i,s,n,r);break;case 18:ko(i,s,n,r);break;case 19:Oo(i,s,n,r);break;case 20:Ro(i,s,r);break;case 21:Io(i,s,r);break;case 22:Do(i,s,r);break;case 23:Bo(i,s,r);break;case 24:Lo(i,s,r);break;case 25:Fo(i,s,r);break;case 26:No(i,s,r);break;case 27:Vo(i,s,r);break;case 28:Uo(i,s,r);break;case 29:zo(i,s,r);break;case 30:Go(i,s,r);break;case 31:Ko(i,s,r);break;case 32:Ho(i,s,n,r);break;case 33:Wo(i,s,r);break;case 34:jo(i,s,r);break;case 35:$o(i,s,r);break;case 36:Xo(i,s,0,r);break;case 37:qo(i,s,n,r);break;case 38:Yo(i,s,0,r);break;case 39:Zo(i,s,n,r);break;case 40:Jo(i,s,r);break;case 41:Qo(i,s,r);break;default:fr(s.state)}}if(!i.hasSchemeUrlMachine()&&i.charIdx>0&&Br(r)){var a=i.text.charCodeAt(i.charIdx-1);Br(a)||i.addMachine(ns(i.charIdx,0))}}}for(var l=i.stateMachines.length-1;l>=0;l--)i.stateMachines.forEach(function(e){return es(i,e)});return i.matches}(e,{tagBuilder:this.getTagBuilder(),stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding,hashtagServiceName:this.hashtag,mentionServiceName:this.mention||"twitter"}),n=0,r=i.length;n<r;n++)i[n].setOffset(t+i[n].getOffset());return i},e.prototype.link=function(e){if(!e)return"";this.sanitizeHtml&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var t=this.parse(e),i=new Array(2*t.length+1),n=0,r=0,o=t.length;r<o;r++){var s=t[r];i.push(e.substring(n,s.getOffset())),i.push(this.createMatchReturnVal(s)),n=s.getOffset()+s.getMatchedText().length}return i.push(e.substring(n)),i.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof gr?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new yr({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="4.1.5",e}();let Fs;"undefined"!=typeof DOMParser&&(Fs=new DOMParser);const Ns=new Ls({stripPrefix:!1,email:!1,replaceFn:function(e,t){return"scheme"===t.urlMatchType||"www"===t.urlMatchType}}),Vs=2414016,Us=16093e3,zs={gpx:[null,void 0,"http://www.topografix.com/GPX/1/1"]};function Gs(e,t){let i=Hs(e,"id");return i=(0,N.A)(i)?i:(0,L.A)(),t.getOrCreateEntity(i)}function Ks(e){const t=qs(e,"lon"),i=qs(e,"lat"),n=$s(e,"ele",zs.gpx);return D.A.fromDegrees(t,i,n)}function qs(e,t){if(!(0,N.A)(e))return;const i=e.getAttribute(t);if(null!==i){const e=parseFloat(i);return isNaN(e)?void 0:e}}function Hs(e,t){if(!(0,N.A)(e))return;const i=e.getAttribute(t);return null!==i?i:void 0}function Ws(e,t,i){if(!(0,N.A)(e))return;const n=e.childNodes,r=n.length;for(let e=0;e<r;e++){const r=n[e];if(r.localName===t&&-1!==i.indexOf(r.namespaceURI))return r}}function js(e,t,i){if(!(0,N.A)(e))return;const n=[],r=e.getElementsByTagName(t),o=r.length;for(let e=0;e<o;e++){const o=r[e];o.localName===t&&-1!==i.indexOf(o.namespaceURI)&&n.push(o)}return n}function $s(e,t,i){const n=Ws(e,t,i);if((0,N.A)(n)){const e=parseFloat(n.textContent);return isNaN(e)?void 0:e}}function Xs(e,t,i){const n=Ws(e,t,i);if((0,N.A)(n))return n.textContent.trim()}function Ys(e){const t=new oe.A;return t.width=32,t.height=32,t.scaleByDistance=new At.A(Vs,1,Us,.1),t.pixelOffsetScaleByDistance=new At.A(Vs,1,Us,.1),t.verticalOrigin=new We.A(Dt.A.BOTTOM),t.image=e,t}function Zs(e){const t=new hi.A;return t.width=4,t.material=new Ai,t.material.color=(0,N.A)(e)?e:me.A.RED,t.material.outlineWidth=2,t.material.outlineColor=me.A.BLACK,t}const Js={time:{text:"Time",tag:"time"},comment:{text:"Comment",tag:"cmt"},description:{text:"Description",tag:"desc"},source:{text:"Source",tag:"src"},number:{text:"GPS track/route number",tag:"number"},type:{text:"Type",tag:"type"}};let Qs;function ea(e,t){let i,n="";const r=Object.keys(Js),o=r.length;for(i=0;i<o;i++){const t=r[i],o=Js[t];o.value=Xs(e,o.tag,zs.gpx)??"",(0,N.A)(o.value)&&""!==o.value&&(n=`${n}<p>${o.text}: ${o.value}</p>`)}if(!(0,N.A)(n)||""===n)return;n=Ns.link(n),Qs.innerHTML=n;const s=Qs.querySelectorAll("a");for(i=0;i<s.length;i++)s[i].setAttribute("target","_blank");const a=me.A.WHITE,l=me.A.BLACK;let c='<div class="cesium-infoBox-description-lighter" style="';return c+="overflow:auto;",c+="word-wrap:break-word;",c+=`background-color:${a.toCssColorString()};`,c+=`color:${l.toCssColorString()};`,c+='">',c+=`${Qs.innerHTML}</div>`,Qs.innerHTML="",c}function ta(e,t,i,n){const r=Ks(t),o=Gs(t,i);o.position=r;const s=(0,N.A)(n.waypointImage)?n.waypointImage:e._pinBuilder.fromMakiIconId("marker",me.A.RED,32);o.billboard=Ys(s);const a=Xs(t,"name",zs.gpx);o.name=a,o.label=function(){const e=new Jt.A;return e.translucencyByDistance=new At.A(3e6,1,5e6,0),e.pixelOffset=new fe.A(17,0),e.horizontalOrigin=Ot.A.LEFT,e.font="16px sans-serif",e.style=Rt.A.FILL_AND_OUTLINE,e}(),o.label.text=a,o.description=ea(t),n.clampToGround&&(o.billboard.heightReference=kt.Ay.CLAMP_TO_GROUND,o.label.heightReference=kt.Ay.CLAMP_TO_GROUND)}function ia(e){const t={positions:[],times:[]},i=js(e,"trkpt",zs.gpx);let n;for(let e=0;e<i.length;e++){const r=Ks(i[e]);t.positions.push(r),n=Xs(i[e],"time",zs.gpx),(0,N.A)(n)&&t.times.push(Ae.A.fromIso8601(n))}return t}function na(e){const t=Ws(e,"author",zs.gpx);if((0,N.A)(t)){const e={name:Xs(t,"name",zs.gpx),email:ra(t),link:oa(t)};if((0,N.A)(e.name)||(0,N.A)(e.email)||(0,N.A)(e.link))return e}}function ra(e){const t=Ws(e,"email",zs.gpx);if((0,N.A)(t))return`${Xs(t,"id",zs.gpx)}@${Xs(t,"domain",zs.gpx)}`}function oa(e){const t=Ws(e,"link",zs.gpx);if((0,N.A)(t)){const e={href:Hs(t,"href"),text:Xs(t,"text",zs.gpx),mimeType:Xs(t,"type",zs.gpx)};if((0,N.A)(e.href)||(0,N.A)(e.text)||(0,N.A)(e.mimeType))return e}}function sa(e){const t=Ws(e,"copyright",zs.gpx);if((0,N.A)(t)){const e={author:Hs(t,"author"),year:Xs(t,"year",zs.gpx),license:Xs(t,"license",zs.gpx)};if((0,N.A)(e.author)||(0,N.A)(e.year)||(0,N.A)(e.license))return e}}function aa(e){const t=Ws(e,"bounds",zs.gpx);if((0,N.A)(t)){const e={minLat:$s(t,"minlat",zs.gpx),maxLat:$s(t,"maxlat",zs.gpx),minLon:$s(t,"minlon",zs.gpx),maxLon:$s(t,"maxlon",zs.gpx)};if((0,N.A)(e.minLat)||(0,N.A)(e.maxLat)||(0,N.A)(e.minLon)||(0,N.A)(e.maxLon))return e}}"undefined"!=typeof document&&(Qs=document.createElement("div"));const la={wpt:ta,rte:function(e,t,i,n){const r=Gs(t,i);r.description=ea(t);const o=js(t,"rtept",zs.gpx),s=new Array(o.length);for(let t=0;t<o.length;t++)ta(e,o[t],i,n),s[t]=Ks(o[t]);r.polyline=Zs(n.routeColor),n.clampToGround&&(r.polyline.clampToGround=!0),r.polyline.positions=s},trk:function(e,t,i,n){const r=Gs(t,i);r.description=ea(t);const o=js(t,"trkseg",zs.gpx);let s,a=[],l=[],c=!0;const u=new ki.A;for(let e=0;e<o.length;e++)s=ia(o[e]),a=a.concat(s.positions),s.times.length>0?(l=l.concat(s.times),u.addSamples(l,a),c=c&&!0):c=!1;if(c){const t=(0,N.A)(n.waypointImage)?n.waypointImage:e._pinBuilder.fromMakiIconId("marker",me.A.RED,32);r.billboard=Ys(t),r.position=u,n.clampToGround&&(r.billboard.heightReference=kt.Ay.CLAMP_TO_GROUND),r.availability=new Mt.A,r.availability.addInterval(new Ct.A({start:l[0],stop:l[l.length-1]}))}r.polyline=Zs(n.trackColor),r.polyline.positions=a,n.clampToGround&&(r.polyline.clampToGround=!0)}};function ca(e,t,i){const n=e._entityCollection;n.removeAll();const r=t.documentElement,o=Hs(r,"version"),s=Hs(r,"creator");let a;const l=function(e){const t=Ws(e,"metadata",zs.gpx);if((0,N.A)(t)){const e={name:Xs(t,"name",zs.gpx),desc:Xs(t,"desc",zs.gpx),author:na(t),copyright:sa(t),link:oa(t),time:Xs(t,"time",zs.gpx),keywords:Xs(t,"keywords",zs.gpx),bounds:aa(t)};if((0,N.A)(e.name)||(0,N.A)(e.desc)||(0,N.A)(e.author)||(0,N.A)(e.copyright)||(0,N.A)(e.link)||(0,N.A)(e.time)||(0,N.A)(e.keywords)||(0,N.A)(e.bounds))return e}}(r);let c;(0,N.A)(l)&&(a=l.name),"gpx"===r.localName?function(e,t,i,n){const r=Object.keys(la),o=r.length;for(let s=0;s<o;s++){const o=r[s],a=la[o],l=t.childNodes,c=l.length;for(let t=0;t<c;t++){const r=l[t];r.localName===o&&-1!==zs.gpx.indexOf(r.namespaceURI)&&a(e,r,i,n)}}}(e,r,n,i):console.log(`GPX - Unsupported node: ${r.localName}`);const u=n.computeAvailability();let d=u.start,h=u.stop;const p=Ae.A.equals(d,ft.A.MINIMUM_VALUE),f=Ae.A.equals(h,ft.A.MAXIMUM_VALUE);if(!p||!f){let e;p&&(e=new Date,e.setHours(0,0,0,0),d=Ae.A.fromDate(e)),f&&(e=new Date,e.setHours(24,0,0,0),h=Ae.A.fromDate(e)),c=new Ut,c.startTime=d,c.stopTime=h,c.currentTime=Ae.A.clone(d),c.clockRange=tt.A.LOOP_STOP,c.clockStep=it.A.SYSTEM_CLOCK_MULTIPLIER,c.multiplier=Math.round(Math.min(Math.max(Ae.A.secondsDifference(h,d)/60,1),31556900))}let m=!1;return e._name!==a&&(e._name=a,m=!0),e._creator!==s&&(e._creator=s,m=!0),g=e._metadata,A=l,!(!(0,N.A)(g)&&!(0,N.A)(A)||(0,N.A)(g)&&(0,N.A)(A)&&g.name===A.name&&g.dec===A.desc&&g.src===A.src&&g.author===A.author&&g.copyright===A.copyright&&g.link===A.link&&g.time===A.time&&g.bounds===A.bounds)&&(e._metadata=l,m=!0),e._version!==o&&(e._version=o,m=!0),c!==e._clock&&(m=!0,e._clock=c),m&&e._changed.raiseEvent(e),Lt.A.setLoading(e,!1),e;var g,A}function ua(){this._changed=new ge.A,this._error=new ge.A,this._loading=new ge.A,this._clock=void 0,this._entityCollection=new Pe.A(this),this._entityCluster=new Kt.A,this._name=void 0,this._version=void 0,this._creator=void 0,this._metadata=void 0,this._isLoading=!1,this._pinBuilder=new ar.A}ua.load=function(e,t){return(new ua).load(e,t)},Object.defineProperties(ua.prototype,{name:{get:function(){return this._name}},version:{get:function(){return this._version}},creator:{get:function(){return this._creator}},metadata:{get:function(){return this._metadata}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,N.A)(e))throw new U.A("value must be defined.");this._entityCluster=e}}}),ua.prototype.update=function(e){return!0},ua.prototype.load=function(e,t){if(!(0,N.A)(e))throw new U.A("data is required.");t=t??F.A.EMPTY_OBJECT,Lt.A.setLoading(this,!0);const i=this._name,n=this;return function(e,t,i,n){n=n??F.A.EMPTY_OBJECT;let r=i;if("string"==typeof i||i instanceof bt.A){r=(i=bt.A.createIfNeeded(i)).fetchBlob();const t=e._resourceCredits,n=i.credits;if((0,N.A)(n)){const e=n.length;for(let i=0;i<e;i++)t.push(n[i])}}return Promise.resolve(r).then(function(t){return t instanceof Blob?(i=t,new Promise((e,t)=>{const n=new FileReader;n.addEventListener("load",function(){e(n.result)}),n.addEventListener("error",function(){t(n.error)}),n.readAsText(i)})).then(function(t){let i,r;try{i=Fs.parseFromString(t,"application/xml")}catch(e){r=e.toString()}if((0,N.A)(r)||i.body||"parsererror"===i.documentElement.tagName){let e=(0,N.A)(r)?r:i.documentElement.firstChild.nodeValue;throw e||(e=i.body.innerText),new xt.A(e)}return ca(e,i,n)}):ca(e,t,n);var i}).catch(function(t){return e._error.raiseEvent(e,t),console.log(t),Promise.reject(t)})}(this,this._entityCollection,e,t).then(function(){let e;const t=n._entityCollection.computeAvailability();let r=t.start,o=t.stop;const s=Ae.A.equals(r,ft.A.MINIMUM_VALUE),a=Ae.A.equals(o,ft.A.MAXIMUM_VALUE);if(!s||!a){let t;s&&(t=new Date,t.setHours(0,0,0,0),r=Ae.A.fromDate(t)),a&&(t=new Date,t.setHours(24,0,0,0),o=Ae.A.fromDate(t)),e=new Ut,e.startTime=r,e.stopTime=o,e.currentTime=Ae.A.clone(r),e.clockRange=tt.A.LOOP_STOP,e.clockStep=it.A.SYSTEM_CLOCK_MULTIPLIER,e.multiplier=Math.round(Math.min(Math.max(Ae.A.secondsDifference(o,r)/60,1),31556900))}let l=!1;return e!==n._clock&&(n._clock=e,l=!0),i!==n._name&&(l=!0),l&&n._changed.raiseEvent(n),Lt.A.setLoading(n,!1),n}).catch(function(e){return Lt.A.setLoading(n,!1),n._error.raiseEvent(n,e),console.log(e),Promise.reject(e)})};const da=ua;var ha=i(817634);const pa=function(e,t){this.position=e,this.headingPitchRoll=t};var fa=i(288787),ma=i(303578),ga=i(376758),Aa=i(345563),_a=i(510986),ya=i(230259),va=i(805746),wa=i(953612),ba=i(548249),xa=i(983884),Ta=i(612933),Sa=i(62467);const Ca=-2;function Ma(e){return Ea(e.map(([e,t])=>new Array(e).fill(t,0,e)))}function Ea(e){return e.reduce((e,t)=>e.concat(Array.isArray(t)?Ea(t):t),[])}const Pa=[0,1,2,3].concat(...Ma([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function ka(){const e=this;function t(e,t){let i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}e.build_tree=function(i){const n=e.dyn_tree,r=e.stat_desc.static_tree,o=e.stat_desc.elems;let s,a,l,c=-1;for(i.heap_len=0,i.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(i.heap[++i.heap_len]=c=s,i.depth[s]=0):n[2*s+1]=0;for(;i.heap_len<2;)l=i.heap[++i.heap_len]=c<2?++c:0,n[2*l]=1,i.depth[l]=0,i.opt_len--,r&&(i.static_len-=r[2*l+1]);for(e.max_code=c,s=Math.floor(i.heap_len/2);s>=1;s--)i.pqdownheap(n,s);l=o;do{s=i.heap[1],i.heap[1]=i.heap[i.heap_len--],i.pqdownheap(n,1),a=i.heap[1],i.heap[--i.heap_max]=s,i.heap[--i.heap_max]=a,n[2*l]=n[2*s]+n[2*a],i.depth[l]=Math.max(i.depth[s],i.depth[a])+1,n[2*s+1]=n[2*a+1]=l,i.heap[1]=l++,i.pqdownheap(n,1)}while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(t){const i=e.dyn_tree,n=e.stat_desc.static_tree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,s=e.stat_desc.max_length;let a,l,c,u,d,h,p=0;for(u=0;u<=15;u++)t.bl_count[u]=0;for(i[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)l=t.heap[a],u=i[2*i[2*l+1]+1]+1,u>s&&(u=s,p++),i[2*l+1]=u,l>e.max_code||(t.bl_count[u]++,d=0,l>=o&&(d=r[l-o]),h=i[2*l],t.opt_len+=h*(u+d),n&&(t.static_len+=h*(n[2*l+1]+d)));if(0!==p){do{for(u=s-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[s]--,p-=2}while(p>0);for(u=s;0!==u;u--)for(l=t.bl_count[u];0!==l;)c=t.heap[--a],c>e.max_code||(i[2*c+1]!=u&&(t.opt_len+=(u-i[2*c+1])*i[2*c],i[2*c+1]=u),l--)}}(i),function(e,i,n){const r=[];let o,s,a,l=0;for(o=1;o<=15;o++)r[o]=l=l+n[o-1]<<1;for(s=0;s<=i;s++)a=e[2*s+1],0!==a&&(e[2*s]=t(r[a]++,a))}(n,e.max_code,i.bl_count)}}function Oa(e,t,i,n,r){const o=this;o.static_tree=e,o.extra_bits=t,o.extra_base=i,o.elems=n,o.max_length=r}ka._length_code=[0,1,2,3,4,5,6,7].concat(...Ma([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),ka.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],ka.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],ka.d_code=function(e){return e<256?Pa[e]:Pa[256+(e>>>7)]},ka.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ka.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ka.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ka.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Ra=Ma([[144,8],[112,9],[24,7],[8,8]]);Oa.static_ltree=Ea([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map((e,t)=>[e,Ra[t]]));const Ia=Ma([[30,5]]);function Da(e,t,i,n,r){const o=this;o.good_length=e,o.max_lazy=t,o.nice_length=i,o.max_chain=n,o.func=r}Oa.static_dtree=Ea([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map((e,t)=>[e,Ia[t]])),Oa.static_l_desc=new Oa(Oa.static_ltree,ka.extra_lbits,257,286,15),Oa.static_d_desc=new Oa(Oa.static_dtree,ka.extra_dbits,0,30,15),Oa.static_bl_desc=new Oa(null,ka.extra_blbits,0,19,7);const Ba=[new Da(0,0,0,0,0),new Da(4,4,8,4,1),new Da(4,5,16,8,1),new Da(4,6,32,32,1),new Da(4,4,16,16,2),new Da(8,16,32,32,2),new Da(8,16,128,128,2),new Da(8,32,128,256,2),new Da(32,128,258,1024,2),new Da(32,258,258,4096,2)],La=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],Fa=113,Na=666,Va=262;function Ua(e,t,i,n){const r=e[2*t],o=e[2*i];return r<o||r==o&&n[t]<=n[i]}function za(){const e=this;let t,i,n,r,o,s,a,l,c,u,d,h,p,f,m,g,A,_,y,v,w,b,x,T,S,C,M,E,P,k,O,R,I;const D=new ka,B=new ka,L=new ka;let F,N,V,U,z,G;function K(){let t;for(t=0;t<286;t++)O[2*t]=0;for(t=0;t<30;t++)R[2*t]=0;for(t=0;t<19;t++)I[2*t]=0;O[512]=1,e.opt_len=e.static_len=0,N=V=0}function q(e,t){let i,n=-1,r=e[1],o=0,s=7,a=4;0===r&&(s=138,a=3),e[2*(t+1)+1]=65535;for(let l=0;l<=t;l++)i=r,r=e[2*(l+1)+1],++o<s&&i==r||(o<a?I[2*i]+=o:0!==i?(i!=n&&I[2*i]++,I[32]++):o<=10?I[34]++:I[36]++,o=0,n=i,0===r?(s=138,a=3):i==r?(s=6,a=3):(s=7,a=4))}function H(t){e.pending_buf[e.pending++]=t}function W(e){H(255&e),H(e>>>8&255)}function j(e,t){let i;const n=t;G>16-n?(i=e,z|=i<<G&65535,W(z),z=i>>>16-G,G+=n-16):(z|=e<<G&65535,G+=n)}function $(e,t){const i=2*e;j(65535&t[i],65535&t[i+1])}function X(e,t){let i,n,r=-1,o=e[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),i=0;i<=t;i++)if(n=o,o=e[2*(i+1)+1],!(++s<a&&n==o)){if(s<l)do{$(n,I)}while(0!==--s);else 0!==n?(n!=r&&($(n,I),s--),$(16,I),j(s-3,2)):s<=10?($(17,I),j(s-3,3)):($(18,I),j(s-11,7));s=0,r=n,0===o?(a=138,l=3):n==o?(a=6,l=3):(a=7,l=4)}}function Y(){16==G?(W(z),z=0,G=0):G>=8&&(H(255&z),z>>>=8,G-=8)}function Z(t,i){let n,r,o;if(e.dist_buf[N]=t,e.lc_buf[N]=255&i,N++,0===t?O[2*i]++:(V++,t--,O[2*(ka._length_code[i]+256+1)]++,R[2*ka.d_code(t)]++),!(8191&N)&&M>2){for(n=8*N,r=w-A,o=0;o<30;o++)n+=R[2*o]*(5+ka.extra_dbits[o]);if(n>>>=3,V<Math.floor(N/2)&&n<Math.floor(r/2))return!0}return N==F-1}function J(t,i){let n,r,o,s,a=0;if(0!==N)do{n=e.dist_buf[a],r=e.lc_buf[a],a++,0===n?$(r,t):(o=ka._length_code[r],$(o+256+1,t),s=ka.extra_lbits[o],0!==s&&(r-=ka.base_length[o],j(r,s)),n--,o=ka.d_code(n),$(o,i),s=ka.extra_dbits[o],0!==s&&(n-=ka.base_dist[o],j(n,s)))}while(a<N);$(256,t),U=t[513]}function Q(){G>8?W(z):G>0&&H(255&z),z=0,G=0}function ee(t,i,n){j(0+(n?1:0),3),function(t,i){Q(),U=8,W(i),W(~i),e.pending_buf.set(l.subarray(t,t+i),e.pending),e.pending+=i}(t,i)}function te(i){(function(t,i,n){let r,o,s=0;M>0?(D.build_tree(e),B.build_tree(e),s=function(){let t;for(q(O,D.max_code),q(R,B.max_code),L.build_tree(e),t=18;t>=3&&0===I[2*ka.bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!=t?ee(t,i,n):o==r?(j(2+(n?1:0),3),J(Oa.static_ltree,Oa.static_dtree)):(j(4+(n?1:0),3),function(e,t,i){let n;for(j(e-257,5),j(t-1,5),j(i-4,4),n=0;n<i;n++)j(I[2*ka.bl_order[n]+1],3);X(O,e-1),X(R,t-1)}(D.max_code+1,B.max_code+1,s+1),J(O,R)),K(),n&&Q()})(A>=0?A:-1,w-A,i),A=w,t.flush_pending()}function ie(){let e,i,n,r;do{if(r=c-x-w,0===r&&0===w&&0===x)r=o;else if(-1==r)r--;else if(w>=o+o-Va){l.set(l.subarray(o,o+o),0),b-=o,w-=o,A-=o,e=p,n=e;do{i=65535&d[--n],d[n]=i>=o?i-o:0}while(0!==--e);e=o,n=e;do{i=65535&u[--n],u[n]=i>=o?i-o:0}while(0!==--e);r+=o}if(0===t.avail_in)return;e=t.read_buf(l,w+x,r),x+=e,x>=3&&(h=255&l[w],h=(h<<g^255&l[w+1])&m)}while(x<Va&&0!==t.avail_in)}function ne(e){let t,i,n=S,r=w,s=T;const c=w>o-Va?w-(o-Va):0;let d=k;const h=a,p=w+258;let f=l[r+s-1],m=l[r+s];T>=P&&(n>>=2),d>x&&(d=x);do{if(t=e,l[t+s]==m&&l[t+s-1]==f&&l[t]==l[r]&&l[++t]==l[r+1]){r+=2,t++;do{}while(l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&r<p);if(i=258-(p-r),r=p-258,i>s){if(b=e,s=i,i>=d)break;f=l[r+s-1],m=l[r+s]}}}while((e=65535&u[e&h])>c&&0!==--n);return s<=x?s:x}e.depth=[],e.bl_count=[],e.heap=[],O=[],R=[],I=[],e.pqdownheap=function(t,i){const n=e.heap,r=n[i];let o=i<<1;for(;o<=e.heap_len&&(o<e.heap_len&&Ua(t,n[o+1],n[o],e.depth)&&o++,!Ua(t,r,n[o],e.depth));)n[i]=n[o],i=o,o<<=1;n[i]=r},e.deflateInit=function(t,y,b,N,V,q){return N||(N=8),V||(V=8),q||(q=0),t.msg=null,-1==y&&(y=6),V<1||V>9||8!=N||b<9||b>15||y<0||y>9||q<0||q>2?Ca:(t.dstate=e,s=b,o=1<<s,a=o-1,f=V+7,p=1<<f,m=p-1,g=Math.floor((f+3-1)/3),l=new Uint8Array(2*o),u=[],d=[],F=1<<V+6,e.pending_buf=new Uint8Array(4*F),n=4*F,e.dist_buf=new Uint16Array(F),e.lc_buf=new Uint8Array(F),M=y,E=q,function(t){return t.total_in=t.total_out=0,t.msg=null,e.pending=0,e.pending_out=0,i=Fa,r=0,D.dyn_tree=O,D.stat_desc=Oa.static_l_desc,B.dyn_tree=R,B.stat_desc=Oa.static_d_desc,L.dyn_tree=I,L.stat_desc=Oa.static_bl_desc,z=0,G=0,U=8,K(),function(){c=2*o,d[p-1]=0;for(let e=0;e<p-1;e++)d[e]=0;C=Ba[M].max_lazy,P=Ba[M].good_length,k=Ba[M].nice_length,S=Ba[M].max_chain,w=0,A=0,x=0,_=T=2,v=0,h=0}(),0}(t))},e.deflateEnd=function(){return 42!=i&&i!=Fa&&i!=Na?Ca:(e.lc_buf=null,e.dist_buf=null,e.pending_buf=null,d=null,u=null,l=null,e.dstate=null,i==Fa?-3:0)},e.deflateParams=function(e,t,i){let n=0;return-1==t&&(t=6),t<0||t>9||i<0||i>2?Ca:(Ba[M].func!=Ba[t].func&&0!==e.total_in&&(n=e.deflate(1)),M!=t&&(M=t,C=Ba[M].max_lazy,P=Ba[M].good_length,k=Ba[M].nice_length,S=Ba[M].max_chain),E=i,n)},e.deflateSetDictionary=function(e,t,n){let r,s=n,c=0;if(!t||42!=i)return Ca;if(s<3)return 0;for(s>o-Va&&(s=o-Va,c=n-s),l.set(t.subarray(c,c+s),0),w=s,A=s,h=255&l[0],h=(h<<g^255&l[1])&m,r=0;r<=s-3;r++)h=(h<<g^255&l[r+2])&m,u[r&a]=d[h],d[h]=r;return 0},e.deflate=function(c,f){let S,P,k,O,R;if(f>4||f<0)return Ca;if(!c.next_out||!c.next_in&&0!==c.avail_in||i==Na&&4!=f)return c.msg=La[4],Ca;if(0===c.avail_out)return c.msg=La[7],-5;var I;if(t=c,O=r,r=f,42==i&&(P=8+(s-8<<4)<<8,k=(M-1&255)>>1,k>3&&(k=3),P|=k<<6,0!==w&&(P|=32),P+=31-P%31,i=Fa,H((I=P)>>8&255),H(255&I)),0!==e.pending){if(t.flush_pending(),0===t.avail_out)return r=-1,0}else if(0===t.avail_in&&f<=O&&4!=f)return t.msg=La[7],-5;if(i==Na&&0!==t.avail_in)return c.msg=La[7],-5;if(0!==t.avail_in||0!==x||0!=f&&i!=Na){switch(R=-1,Ba[M].func){case 0:R=function(e){let i,r=65535;for(r>n-5&&(r=n-5);;){if(x<=1){if(ie(),0===x&&0==e)return 0;if(0===x)break}if(w+=x,x=0,i=A+r,(0===w||w>=i)&&(x=w-i,w=i,te(!1),0===t.avail_out))return 0;if(w-A>=o-Va&&(te(!1),0===t.avail_out))return 0}return te(4==e),0===t.avail_out?4==e?2:0:4==e?3:1}(f);break;case 1:R=function(e){let i,n=0;for(;;){if(x<Va){if(ie(),x<Va&&0==e)return 0;if(0===x)break}if(x>=3&&(h=(h<<g^255&l[w+2])&m,n=65535&d[h],u[w&a]=d[h],d[h]=w),0!==n&&(w-n&65535)<=o-Va&&2!=E&&(_=ne(n)),_>=3)if(i=Z(w-b,_-3),x-=_,_<=C&&x>=3){_--;do{w++,h=(h<<g^255&l[w+2])&m,n=65535&d[h],u[w&a]=d[h],d[h]=w}while(0!==--_);w++}else w+=_,_=0,h=255&l[w],h=(h<<g^255&l[w+1])&m;else i=Z(0,255&l[w]),x--,w++;if(i&&(te(!1),0===t.avail_out))return 0}return te(4==e),0===t.avail_out?4==e?2:0:4==e?3:1}(f);break;case 2:R=function(e){let i,n,r=0;for(;;){if(x<Va){if(ie(),x<Va&&0==e)return 0;if(0===x)break}if(x>=3&&(h=(h<<g^255&l[w+2])&m,r=65535&d[h],u[w&a]=d[h],d[h]=w),T=_,y=b,_=2,0!==r&&T<C&&(w-r&65535)<=o-Va&&(2!=E&&(_=ne(r)),_<=5&&(1==E||3==_&&w-b>4096)&&(_=2)),T>=3&&_<=T){n=w+x-3,i=Z(w-1-y,T-3),x-=T-1,T-=2;do{++w<=n&&(h=(h<<g^255&l[w+2])&m,r=65535&d[h],u[w&a]=d[h],d[h]=w)}while(0!==--T);if(v=0,_=2,w++,i&&(te(!1),0===t.avail_out))return 0}else if(0!==v){if(i=Z(0,255&l[w-1]),i&&te(!1),w++,x--,0===t.avail_out)return 0}else v=1,w++,x--}return 0!==v&&(i=Z(0,255&l[w-1]),v=0),te(4==e),0===t.avail_out?4==e?2:0:4==e?3:1}(f)}if(2!=R&&3!=R||(i=Na),0==R||2==R)return 0===t.avail_out&&(r=-1),0;if(1==R){if(1==f)j(2,3),$(256,Oa.static_ltree),Y(),1+U+10-G<9&&(j(2,3),$(256,Oa.static_ltree),Y()),U=7;else if(ee(0,0,!1),3==f)for(S=0;S<p;S++)d[S]=0;if(t.flush_pending(),0===t.avail_out)return r=-1,0}}return 4!=f?0:1}}function Ga(){const e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}Ga.prototype={deflateInit(e,t){const i=this;return i.dstate=new za,t||(t=15),i.dstate.deflateInit(i,e,t)},deflate(e){const t=this;return t.dstate?t.dstate.deflate(t,e):Ca},deflateEnd(){const e=this;if(!e.dstate)return Ca;const t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams(e,t){const i=this;return i.dstate?i.dstate.deflateParams(i,e,t):Ca},deflateSetDictionary(e,t){const i=this;return i.dstate?i.dstate.deflateSetDictionary(i,e,t):Ca},read_buf(e,t,i){const n=this;let r=n.avail_in;return r>i&&(r=i),0===r?0:(n.avail_in-=r,e.set(n.next_in.subarray(n.next_in_index,n.next_in_index+r),t),n.next_in_index+=r,n.total_in+=r,r)},flush_pending(){const e=this;let t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}};const Ka=-2,qa=-3,Ha=-5,Wa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],ja=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],$a=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],Xa=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ya=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],Za=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Ja=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function Qa(){let e,t,i,n,r,o;function s(e,t,s,a,l,c,u,d,h,p,f){let m,g,A,_,y,v,w,b,x,T,S,C,M,E,P;T=0,y=s;do{i[e[t+T]]++,T++,y--}while(0!==y);if(i[0]==s)return u[0]=-1,d[0]=0,0;for(b=d[0],v=1;v<=15&&0===i[v];v++);for(w=v,b<v&&(b=v),y=15;0!==y&&0===i[y];y--);for(A=y,b>y&&(b=y),d[0]=b,E=1<<v;v<y;v++,E<<=1)if((E-=i[v])<0)return qa;if((E-=i[y])<0)return qa;for(i[y]+=E,o[1]=v=0,T=1,M=2;0!==--y;)o[M]=v+=i[T],M++,T++;y=0,T=0;do{0!==(v=e[t+T])&&(f[o[v]++]=y),T++}while(++y<s);for(s=o[A],o[0]=y=0,T=0,_=-1,C=-b,r[0]=0,S=0,P=0;w<=A;w++)for(m=i[w];0!==m--;){for(;w>C+b;){if(_++,C+=b,P=A-C,P=P>b?b:P,(g=1<<(v=w-C))>m+1&&(g-=m+1,M=w,v<P))for(;++v<P&&!((g<<=1)<=i[++M]);)g-=i[M];if(P=1<<v,p[0]+P>1440)return qa;r[_]=S=p[0],p[0]+=P,0!==_?(o[_]=y,n[0]=v,n[1]=b,v=y>>>C-b,n[2]=S-r[_-1]-v,h.set(n,3*(r[_-1]+v))):u[0]=S}for(n[1]=w-C,T>=s?n[0]=192:f[T]<a?(n[0]=f[T]<256?0:96,n[2]=f[T++]):(n[0]=c[f[T]-a]+16+64,n[2]=l[f[T++]-a]),g=1<<w-C,v=y>>>C;v<P;v+=g)h.set(n,3*(S+v));for(v=1<<w-1;0!==(y&v);v>>>=1)y^=v;for(y^=v,x=(1<<C)-1;(y&x)!=o[_];)_--,C-=b,x=(1<<C)-1}return 0!==E&&1!=A?Ha:0}function a(s){let a;for(e||(e=[],t=[],i=new Int32Array(16),n=[],r=new Int32Array(15),o=new Int32Array(16)),t.length<s&&(t=[]),a=0;a<s;a++)t[a]=0;for(a=0;a<16;a++)i[a]=0;for(a=0;a<3;a++)n[a]=0;r.set(i.subarray(0,15),0),o.set(i.subarray(0,16),0)}this.inflate_trees_bits=function(i,n,r,o,l){let c;return a(19),e[0]=0,c=s(i,0,19,19,null,null,r,n,o,e,t),c==qa?l.msg="oversubscribed dynamic bit lengths tree":c!=Ha&&0!==n[0]||(l.msg="incomplete dynamic bit lengths tree",c=qa),c},this.inflate_trees_dynamic=function(i,n,r,o,l,c,u,d,h){let p;return a(288),e[0]=0,p=s(r,0,i,257,Xa,Ya,c,o,d,e,t),0!=p||0===o[0]?(p==qa?h.msg="oversubscribed literal/length tree":-4!=p&&(h.msg="incomplete literal/length tree",p=qa),p):(a(288),p=s(r,i,n,0,Za,Ja,u,l,d,e,t),0!=p||0===l[0]&&i>257?(p==qa?h.msg="oversubscribed distance tree":p==Ha?(h.msg="incomplete distance tree",p=qa):-4!=p&&(h.msg="empty distance tree with lengths",p=qa),p):0)}}function el(){const e=this;let t,i,n,r,o=0,s=0,a=0,l=0,c=0,u=0,d=0,h=0,p=0,f=0;function m(e,t,i,n,r,o,s,a){let l,c,u,d,h,p,f,m,g,A,_,y,v,w,b,x;f=a.next_in_index,m=a.avail_in,h=s.bitb,p=s.bitk,g=s.write,A=g<s.read?s.read-g-1:s.end-g,_=Wa[e],y=Wa[t];do{for(;p<20;)m--,h|=(255&a.read_byte(f++))<<p,p+=8;if(l=h&_,c=i,u=n,x=3*(u+l),0!==(d=c[x]))for(;;){if(h>>=c[x+1],p-=c[x+1],16&d){for(d&=15,v=c[x+2]+(h&Wa[d]),h>>=d,p-=d;p<15;)m--,h|=(255&a.read_byte(f++))<<p,p+=8;for(l=h&y,c=r,u=o,x=3*(u+l),d=c[x];;){if(h>>=c[x+1],p-=c[x+1],16&d){for(d&=15;p<d;)m--,h|=(255&a.read_byte(f++))<<p,p+=8;if(w=c[x+2]+(h&Wa[d]),h>>=d,p-=d,A-=v,g>=w)b=g-w,g-b>0&&2>g-b?(s.win[g++]=s.win[b++],s.win[g++]=s.win[b++],v-=2):(s.win.set(s.win.subarray(b,b+2),g),g+=2,b+=2,v-=2);else{b=g-w;do{b+=s.end}while(b<0);if(d=s.end-b,v>d){if(v-=d,g-b>0&&d>g-b)do{s.win[g++]=s.win[b++]}while(0!==--d);else s.win.set(s.win.subarray(b,b+d),g),g+=d,b+=d,d=0;b=0}}if(g-b>0&&v>g-b)do{s.win[g++]=s.win[b++]}while(0!==--v);else s.win.set(s.win.subarray(b,b+v),g),g+=v,b+=v,v=0;break}if(64&d)return a.msg="invalid distance code",v=a.avail_in-m,v=p>>3<v?p>>3:v,m+=v,f-=v,p-=v<<3,s.bitb=h,s.bitk=p,a.avail_in=m,a.total_in+=f-a.next_in_index,a.next_in_index=f,s.write=g,qa;l+=c[x+2],l+=h&Wa[d],x=3*(u+l),d=c[x]}break}if(64&d)return 32&d?(v=a.avail_in-m,v=p>>3<v?p>>3:v,m+=v,f-=v,p-=v<<3,s.bitb=h,s.bitk=p,a.avail_in=m,a.total_in+=f-a.next_in_index,a.next_in_index=f,s.write=g,1):(a.msg="invalid literal/length code",v=a.avail_in-m,v=p>>3<v?p>>3:v,m+=v,f-=v,p-=v<<3,s.bitb=h,s.bitk=p,a.avail_in=m,a.total_in+=f-a.next_in_index,a.next_in_index=f,s.write=g,qa);if(l+=c[x+2],l+=h&Wa[d],x=3*(u+l),0===(d=c[x])){h>>=c[x+1],p-=c[x+1],s.win[g++]=c[x+2],A--;break}}else h>>=c[x+1],p-=c[x+1],s.win[g++]=c[x+2],A--}while(A>=258&&m>=10);return v=a.avail_in-m,v=p>>3<v?p>>3:v,m+=v,f-=v,p-=v<<3,s.bitb=h,s.bitk=p,a.avail_in=m,a.total_in+=f-a.next_in_index,a.next_in_index=f,s.write=g,0}e.init=function(e,o,s,a,l,c){t=0,d=e,h=o,n=s,p=a,r=l,f=c,i=null},e.proc=function(e,g,A){let _,y,v,w,b,x,T,S=0,C=0,M=0;for(M=g.next_in_index,w=g.avail_in,S=e.bitb,C=e.bitk,b=e.write,x=b<e.read?e.read-b-1:e.end-b;;)switch(t){case 0:if(x>=258&&w>=10&&(e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,A=m(d,h,n,p,r,f,e,g),M=g.next_in_index,w=g.avail_in,S=e.bitb,C=e.bitk,b=e.write,x=b<e.read?e.read-b-1:e.end-b,0!=A)){t=1==A?7:9;break}a=d,i=n,s=p,t=1;case 1:for(_=a;C<_;){if(0===w)return e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);A=0,w--,S|=(255&g.read_byte(M++))<<C,C+=8}if(y=3*(s+(S&Wa[_])),S>>>=i[y+1],C-=i[y+1],v=i[y],0===v){l=i[y+2],t=6;break}if(16&v){c=15&v,o=i[y+2],t=2;break}if(!(64&v)){a=v,s=y/3+i[y+2];break}if(32&v){t=7;break}return t=9,g.msg="invalid literal/length code",A=qa,e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);case 2:for(_=c;C<_;){if(0===w)return e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);A=0,w--,S|=(255&g.read_byte(M++))<<C,C+=8}o+=S&Wa[_],S>>=_,C-=_,a=h,i=r,s=f,t=3;case 3:for(_=a;C<_;){if(0===w)return e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);A=0,w--,S|=(255&g.read_byte(M++))<<C,C+=8}if(y=3*(s+(S&Wa[_])),S>>=i[y+1],C-=i[y+1],v=i[y],16&v){c=15&v,u=i[y+2],t=4;break}if(!(64&v)){a=v,s=y/3+i[y+2];break}return t=9,g.msg="invalid distance code",A=qa,e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);case 4:for(_=c;C<_;){if(0===w)return e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);A=0,w--,S|=(255&g.read_byte(M++))<<C,C+=8}u+=S&Wa[_],S>>=_,C-=_,t=5;case 5:for(T=b-u;T<0;)T+=e.end;for(;0!==o;){if(0===x&&(b==e.end&&0!==e.read&&(b=0,x=b<e.read?e.read-b-1:e.end-b),0===x&&(e.write=b,A=e.inflate_flush(g,A),b=e.write,x=b<e.read?e.read-b-1:e.end-b,b==e.end&&0!==e.read&&(b=0,x=b<e.read?e.read-b-1:e.end-b),0===x)))return e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);e.win[b++]=e.win[T++],x--,T==e.end&&(T=0),o--}t=0;break;case 6:if(0===x&&(b==e.end&&0!==e.read&&(b=0,x=b<e.read?e.read-b-1:e.end-b),0===x&&(e.write=b,A=e.inflate_flush(g,A),b=e.write,x=b<e.read?e.read-b-1:e.end-b,b==e.end&&0!==e.read&&(b=0,x=b<e.read?e.read-b-1:e.end-b),0===x)))return e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);A=0,e.win[b++]=l,x--,t=0;break;case 7:if(C>7&&(C-=8,w++,M--),e.write=b,A=e.inflate_flush(g,A),b=e.write,x=b<e.read?e.read-b-1:e.end-b,e.read!=e.write)return e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);t=8;case 8:return A=1,e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);case 9:return A=qa,e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A);default:return A=Ka,e.bitb=S,e.bitk=C,g.avail_in=w,g.total_in+=M-g.next_in_index,g.next_in_index=M,e.write=b,e.inflate_flush(g,A)}},e.free=function(){}}Qa.inflate_trees_fixed=function(e,t,i,n){return e[0]=9,t[0]=5,i[0]=ja,n[0]=$a,0};const tl=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function il(e,t){const i=this;let n,r=0,o=0,s=0,a=0;const l=[0],c=[0],u=new el;let d=0,h=new Int32Array(4320);const p=new Qa;i.bitk=0,i.bitb=0,i.win=new Uint8Array(t),i.end=t,i.read=0,i.write=0,i.reset=function(e,t){t&&(t[0]=0),6==r&&u.free(e),r=0,i.bitk=0,i.bitb=0,i.read=i.write=0},i.reset(e,null),i.inflate_flush=function(e,t){let n,r,o;return r=e.next_out_index,o=i.read,n=(o<=i.write?i.write:i.end)-o,n>e.avail_out&&(n=e.avail_out),0!==n&&t==Ha&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.win.subarray(o,o+n),r),r+=n,o+=n,o==i.end&&(o=0,i.write==i.end&&(i.write=0),n=i.write-o,n>e.avail_out&&(n=e.avail_out),0!==n&&t==Ha&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.win.subarray(o,o+n),r),r+=n,o+=n),e.next_out_index=r,i.read=o,t},i.proc=function(e,t){let f,m,g,A,_,y,v,w;for(A=e.next_in_index,_=e.avail_in,m=i.bitb,g=i.bitk,y=i.write,v=y<i.read?i.read-y-1:i.end-y;;){let b,x,T,S,C,M,E,P;switch(r){case 0:for(;g<3;){if(0===_)return i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);t=0,_--,m|=(255&e.read_byte(A++))<<g,g+=8}switch(f=7&m,d=1&f,f>>>1){case 0:m>>>=3,g-=3,f=7&g,m>>>=f,g-=f,r=1;break;case 1:b=[],x=[],T=[[]],S=[[]],Qa.inflate_trees_fixed(b,x,T,S),u.init(b[0],x[0],T[0],0,S[0],0),m>>>=3,g-=3,r=6;break;case 2:m>>>=3,g-=3,r=3;break;case 3:return m>>>=3,g-=3,r=9,e.msg="invalid block type",t=qa,i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t)}break;case 1:for(;g<32;){if(0===_)return i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);t=0,_--,m|=(255&e.read_byte(A++))<<g,g+=8}if((~m>>>16&65535)!=(65535&m))return r=9,e.msg="invalid stored block lengths",t=qa,i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);o=65535&m,m=g=0,r=0!==o?2:0!==d?7:0;break;case 2:if(0===_)return i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);if(0===v&&(y==i.end&&0!==i.read&&(y=0,v=y<i.read?i.read-y-1:i.end-y),0===v&&(i.write=y,t=i.inflate_flush(e,t),y=i.write,v=y<i.read?i.read-y-1:i.end-y,y==i.end&&0!==i.read&&(y=0,v=y<i.read?i.read-y-1:i.end-y),0===v)))return i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);if(t=0,f=o,f>_&&(f=_),f>v&&(f=v),i.win.set(e.read_buf(A,f),y),A+=f,_-=f,y+=f,v-=f,0!==(o-=f))break;r=0!==d?7:0;break;case 3:for(;g<14;){if(0===_)return i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);t=0,_--,m|=(255&e.read_byte(A++))<<g,g+=8}if(s=f=16383&m,(31&f)>29||(f>>5&31)>29)return r=9,e.msg="too many length or distance symbols",t=qa,i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);if(f=258+(31&f)+(f>>5&31),!n||n.length<f)n=[];else for(w=0;w<f;w++)n[w]=0;m>>>=14,g-=14,a=0,r=4;case 4:for(;a<4+(s>>>10);){for(;g<3;){if(0===_)return i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);t=0,_--,m|=(255&e.read_byte(A++))<<g,g+=8}n[tl[a++]]=7&m,m>>>=3,g-=3}for(;a<19;)n[tl[a++]]=0;if(l[0]=7,f=p.inflate_trees_bits(n,l,c,h,e),0!=f)return(t=f)==qa&&(n=null,r=9),i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);a=0,r=5;case 5:for(;f=s,!(a>=258+(31&f)+(f>>5&31));){let o,u;for(f=l[0];g<f;){if(0===_)return i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);t=0,_--,m|=(255&e.read_byte(A++))<<g,g+=8}if(f=h[3*(c[0]+(m&Wa[f]))+1],u=h[3*(c[0]+(m&Wa[f]))+2],u<16)m>>>=f,g-=f,n[a++]=u;else{for(w=18==u?7:u-14,o=18==u?11:3;g<f+w;){if(0===_)return i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);t=0,_--,m|=(255&e.read_byte(A++))<<g,g+=8}if(m>>>=f,g-=f,o+=m&Wa[w],m>>>=w,g-=w,w=a,f=s,w+o>258+(31&f)+(f>>5&31)||16==u&&w<1)return n=null,r=9,e.msg="invalid bit length repeat",t=qa,i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);u=16==u?n[w-1]:0;do{n[w++]=u}while(0!==--o);a=w}}if(c[0]=-1,C=[],M=[],E=[],P=[],C[0]=9,M[0]=6,f=s,f=p.inflate_trees_dynamic(257+(31&f),1+(f>>5&31),n,C,M,E,P,h,e),0!=f)return f==qa&&(n=null,r=9),t=f,i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);u.init(C[0],M[0],h,E[0],h,P[0]),r=6;case 6:if(i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,1!=(t=u.proc(i,e,t)))return i.inflate_flush(e,t);if(t=0,u.free(e),A=e.next_in_index,_=e.avail_in,m=i.bitb,g=i.bitk,y=i.write,v=y<i.read?i.read-y-1:i.end-y,0===d){r=0;break}r=7;case 7:if(i.write=y,t=i.inflate_flush(e,t),y=i.write,v=y<i.read?i.read-y-1:i.end-y,i.read!=i.write)return i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);r=8;case 8:return t=1,i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);case 9:return t=qa,i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t);default:return t=Ka,i.bitb=m,i.bitk=g,e.avail_in=_,e.total_in+=A-e.next_in_index,e.next_in_index=A,i.write=y,i.inflate_flush(e,t)}}},i.free=function(e){i.reset(e,null),i.win=null,h=null},i.set_dictionary=function(e,t,n){i.win.set(e.subarray(t,t+n),0),i.read=i.write=n},i.sync_point=function(){return 1==r?1:0}}const nl=13,rl=[0,0,255,255];function ol(){const e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),0):Ka}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,0},e.inflateInit=function(i,n){return i.msg=null,e.blocks=null,n<8||n>15?(e.inflateEnd(i),Ka):(e.wbits=n,i.istate.blocks=new il(i,1<<n),t(i),0)},e.inflate=function(e,t){let i,n;if(!e||!e.istate||!e.next_in)return Ka;const r=e.istate;for(t=4==t?Ha:0,i=Ha;;)switch(r.mode){case 0:if(0===e.avail_in)return i;if(i=t,e.avail_in--,e.total_in++,8!=(15&(r.method=e.read_byte(e.next_in_index++)))){r.mode=nl,e.msg="unknown compression method",r.marker=5;break}if(8+(r.method>>4)>r.wbits){r.mode=nl,e.msg="invalid win size",r.marker=5;break}r.mode=1;case 1:if(0===e.avail_in)return i;if(i=t,e.avail_in--,e.total_in++,n=255&e.read_byte(e.next_in_index++),((r.method<<8)+n)%31!=0){r.mode=nl,e.msg="incorrect header check",r.marker=5;break}if(!(32&n)){r.mode=7;break}r.mode=2;case 2:if(0===e.avail_in)return i;i=t,e.avail_in--,e.total_in++,r.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,r.mode=3;case 3:if(0===e.avail_in)return i;i=t,e.avail_in--,e.total_in++,r.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,r.mode=4;case 4:if(0===e.avail_in)return i;i=t,e.avail_in--,e.total_in++,r.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,r.mode=5;case 5:return 0===e.avail_in?i:(i=t,e.avail_in--,e.total_in++,r.need+=255&e.read_byte(e.next_in_index++),r.mode=6,2);case 6:return r.mode=nl,e.msg="need dictionary",r.marker=0,Ka;case 7:if(i=r.blocks.proc(e,i),i==qa){r.mode=nl,r.marker=0;break}if(0==i&&(i=t),1!=i)return i;i=t,r.blocks.reset(e,r.was),r.mode=12;case 12:return e.avail_in=0,1;case nl:return qa;default:return Ka}},e.inflateSetDictionary=function(e,t,i){let n=0,r=i;if(!e||!e.istate||6!=e.istate.mode)return Ka;const o=e.istate;return r>=1<<o.wbits&&(r=(1<<o.wbits)-1,n=i-r),o.blocks.set_dictionary(t,n,r),o.mode=7,0},e.inflateSync=function(e){let i,n,r,o,s;if(!e||!e.istate)return Ka;const a=e.istate;if(a.mode!=nl&&(a.mode=nl,a.marker=0),0===(i=e.avail_in))return Ha;for(n=e.next_in_index,r=a.marker;0!==i&&r<4;)e.read_byte(n)==rl[r]?r++:r=0!==e.read_byte(n)?0:4-r,n++,i--;return e.total_in+=n-e.next_in_index,e.next_in_index=n,e.avail_in=i,a.marker=r,4!=r?qa:(o=e.total_in,s=e.total_out,t(e),e.total_in=o,e.total_out=s,a.mode=7,0)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():Ka}}function sl(){}sl.prototype={inflateInit(e){const t=this;return t.istate=new ol,e||(e=15),t.istate.inflateInit(t,e)},inflate(e){const t=this;return t.istate?t.istate.inflate(t,e):Ka},inflateEnd(){const e=this;if(!e.istate)return Ka;const t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync(){const e=this;return e.istate?e.istate.inflateSync(e):Ka},inflateSetDictionary(e,t){const i=this;return i.istate?i.istate.inflateSetDictionary(i,e,t):Ka},read_byte(e){return this.next_in[e]},read_buf(e,t){return this.next_in.subarray(e,e+t)}};const al=4294967295,ll=65535,cl=67324752,ul=134695760,dl=ul,hl=33639248,pl=101010256,fl=101075792,ml=117853008,gl=22,Al=21589,_l=2048,yl="/",vl=30,wl=new Date(2107,11,31),bl=new Date(1980,0,1),xl=void 0,Tl="undefined",Sl="function";class Cl{constructor(e){return class extends TransformStream{constructor(t,i){const n=new e(i);super({transform(e,t){t.enqueue(n.append(e))},flush(e){const t=n.flush();t&&e.enqueue(t)}})}}}}let Ml=2;try{typeof navigator!=Tl&&navigator.hardwareConcurrency&&(Ml=navigator.hardwareConcurrency)}catch(e){}const El={chunkSize:524288,maxWorkers:Ml,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:xl,CompressionStreamNative:typeof CompressionStream!=Tl&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=Tl&&DecompressionStream},Pl=Object.assign({},El);function kl(){return Pl}function Ol(e){return Math.max(e.chunkSize,64)}function Rl(e){const{baseURL:t,chunkSize:i,maxWorkers:n,terminateWorkerTimeout:r,useCompressionStream:o,useWebWorkers:s,Deflate:a,Inflate:l,CompressionStream:c,DecompressionStream:u,workerScripts:d}=e;if(Il("baseURL",t),Il("chunkSize",i),Il("maxWorkers",n),Il("terminateWorkerTimeout",r),Il("useCompressionStream",o),Il("useWebWorkers",s),a&&(Pl.CompressionStream=new Cl(a)),l&&(Pl.DecompressionStream=new Cl(l)),Il("CompressionStream",c),Il("DecompressionStream",u),d!==xl){const{deflate:e,inflate:t}=d;if((e||t)&&(Pl.workerScripts||(Pl.workerScripts={})),e){if(!Array.isArray(e))throw new Error("workerScripts.deflate must be an array");Pl.workerScripts.deflate=e}if(t){if(!Array.isArray(t))throw new Error("workerScripts.inflate must be an array");Pl.workerScripts.inflate=t}}}function Il(e,t){t!==xl&&(Pl[e]=t)}const Dl=[];for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=t>>>1^3988292384:t>>>=1;Dl[e]=t}class Bl{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let i=0,n=0|e.length;i<n;i++)t=t>>>8^Dl[255&(t^e[i])];this.crc=t}get(){return~this.crc}}class Ll extends TransformStream{constructor(){let e;const t=new Bl;super({transform(e,i){t.append(e),i.enqueue(e)},flush(){const i=new Uint8Array(4);new DataView(i.buffer).setUint32(0,t.get()),e.value=i}}),e=this}}function Fl(e){if(typeof TextEncoder==Tl){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let i=0;i<t.length;i++)t[i]=e.charCodeAt(i);return t}return(new TextEncoder).encode(e)}const Nl={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const i=e[e.length-1],n=Nl.getPartial(i);return 32===n?e.concat(t):Nl._shiftRight(t,n,0|i,e.slice(0,e.length-1))},bitLength(e){const t=e.length;if(0===t)return 0;const i=e[t-1];return 32*(t-1)+Nl.getPartial(i)},clamp(e,t){if(32*e.length<t)return e;const i=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,i>0&&t&&(e[i-1]=Nl.partial(t,e[i-1]&2147483648>>t-1,1)),e},partial:(e,t,i)=>32===e?t:(i?0|t:t<<32-e)+1099511627776*e,getPartial:e=>Math.round(e/1099511627776)||32,_shiftRight(e,t,i,n){for(void 0===n&&(n=[]);t>=32;t-=32)n.push(i),i=0;if(0===t)return n.concat(e);for(let r=0;r<e.length;r++)n.push(i|e[r]>>>t),i=e[r]<<32-t;const r=e.length?e[e.length-1]:0,o=Nl.getPartial(r);return n.push(Nl.partial(t+o&31,t+o>32?i:n.pop(),1)),n}},Vl={bytes:{fromBits(e){const t=Nl.bitLength(e)/8,i=new Uint8Array(t);let n;for(let r=0;r<t;r++)3&r||(n=e[r/4]),i[r]=n>>>24,n<<=8;return i},toBits(e){const t=[];let i,n=0;for(i=0;i<e.length;i++)n=n<<8|e[i],3&~i||(t.push(n),n=0);return 3&i&&t.push(Nl.partial(8*(3&i),n)),t}}},Ul=class{constructor(e){const t=this;t.blockSize=512,t._init=[1732584193,4023233417,2562383102,271733878,3285377520],t._key=[1518500249,1859775393,2400959708,3395469782],e?(t._h=e._h.slice(0),t._buffer=e._buffer.slice(0),t._length=e._length):t.reset()}reset(){const e=this;return e._h=e._init.slice(0),e._buffer=[],e._length=0,e}update(e){const t=this;"string"==typeof e&&(e=Vl.utf8String.toBits(e));const i=t._buffer=Nl.concat(t._buffer,e),n=t._length,r=t._length=n+Nl.bitLength(e);if(r>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const o=new Uint32Array(i);let s=0;for(let e=t.blockSize+n-(t.blockSize+n&t.blockSize-1);e<=r;e+=t.blockSize)t._block(o.subarray(16*s,16*(s+1))),s+=1;return i.splice(0,16*s),t}finalize(){const e=this;let t=e._buffer;const i=e._h;t=Nl.concat(t,[Nl.partial(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),i}_f(e,t,i,n){return e<=19?t&i|~t&n:e<=39?t^i^n:e<=59?t&i|t&n|i&n:e<=79?t^i^n:void 0}_S(e,t){return t<<e|t>>>32-e}_block(e){const t=this,i=t._h,n=Array(80);for(let t=0;t<16;t++)n[t]=e[t];let r=i[0],o=i[1],s=i[2],a=i[3],l=i[4];for(let e=0;e<=79;e++){e>=16&&(n[e]=t._S(1,n[e-3]^n[e-8]^n[e-14]^n[e-16]));const i=t._S(5,r)+t._f(e,o,s,a)+l+n[e]+t._key[Math.floor(e/20)]|0;l=a,a=s,s=t._S(30,o),o=r,r=i}i[0]=i[0]+r|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0}},zl=class{constructor(e){const t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();const i=t._tables[0][4],n=t._tables[1],r=e.length;let o,s,a,l=1;if(4!==r&&6!==r&&8!==r)throw new Error("invalid aes key size");for(t._key=[s=e.slice(0),a=[]],o=r;o<4*r+28;o++){let e=s[o-1];(o%r===0||8===r&&o%r===4)&&(e=i[e>>>24]<<24^i[e>>16&255]<<16^i[e>>8&255]<<8^i[255&e],o%r===0&&(e=e<<8^e>>>24^l<<24,l=l<<1^283*(l>>7))),s[o]=s[o-r]^e}for(let e=0;o;e++,o--){const t=s[3&e?o:o-4];a[e]=o<=4||e<4?t:n[0][i[t>>>24]]^n[1][i[t>>16&255]]^n[2][i[t>>8&255]]^n[3][i[255&t]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){const e=this._tables[0],t=this._tables[1],i=e[4],n=t[4],r=[],o=[];let s,a,l,c;for(let e=0;e<256;e++)o[(r[e]=e<<1^283*(e>>7))^e]=e;for(let u=s=0;!i[u];u^=a||1,s=o[s]||1){let o=s^s<<1^s<<2^s<<3^s<<4;o=o>>8^255&o^99,i[u]=o,n[o]=u,c=r[l=r[a=r[u]]];let d=16843009*c^65537*l^257*a^16843008*u,h=257*r[o]^16843008*o;for(let i=0;i<4;i++)e[i][u]=h=h<<24^h>>>8,t[i][o]=d=d<<24^d>>>8}for(let i=0;i<5;i++)e[i]=e[i].slice(0),t[i]=t[i].slice(0)}_crypt(e,t){if(4!==e.length)throw new Error("invalid aes block size");const i=this._key[t],n=i.length/4-2,r=[0,0,0,0],o=this._tables[t],s=o[0],a=o[1],l=o[2],c=o[3],u=o[4];let d,h,p,f=e[0]^i[0],m=e[t?3:1]^i[1],g=e[2]^i[2],A=e[t?1:3]^i[3],_=4;for(let e=0;e<n;e++)d=s[f>>>24]^a[m>>16&255]^l[g>>8&255]^c[255&A]^i[_],h=s[m>>>24]^a[g>>16&255]^l[A>>8&255]^c[255&f]^i[_+1],p=s[g>>>24]^a[A>>16&255]^l[f>>8&255]^c[255&m]^i[_+2],A=s[A>>>24]^a[f>>16&255]^l[m>>8&255]^c[255&g]^i[_+3],_+=4,f=d,m=h,g=p;for(let e=0;e<4;e++)r[t?3&-e:e]=u[f>>>24]<<24^u[m>>16&255]<<16^u[g>>8&255]<<8^u[255&A]^i[_++],d=f,f=m,m=g,g=A,A=d;return r}},Gl={getRandomValues(e){const t=new Uint32Array(e.buffer),i=e=>{let t=987654321;const i=4294967295;return function(){return t=36969*(65535&t)+(t>>16)&i,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let n,r=0;r<e.length;r+=4){const e=i(4294967296*(n||Math.random()));n=987654071*e(),t[r/4]=4294967296*e()|0}return e}},Kl=class{constructor(e,t){this._prf=e,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if(255&~(e>>24))e+=1<<24;else{let t=e>>16&255,i=e>>8&255,n=255&e;255===t?(t=0,255===i?(i=0,255===n?n=0:++n):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=n}return e}incCounter(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}calculate(e,t,i){let n;if(!(n=t.length))return[];const r=Nl.bitLength(t);for(let r=0;r<n;r+=4){this.incCounter(i);const n=e.encrypt(i);t[r]^=n[0],t[r+1]^=n[1],t[r+2]^=n[2],t[r+3]^=n[3]}return Nl.clamp(t,r)}},ql={importKey:e=>new ql.hmacSha1(Vl.bytes.toBits(e)),pbkdf2(e,t,i,n){if(i=i||1e4,n<0||i<0)throw new Error("invalid params to pbkdf2");const r=1+(n>>5)<<2;let o,s,a,l,c;const u=new ArrayBuffer(r),d=new DataView(u);let h=0;const p=Nl;for(t=Vl.bytes.toBits(t),c=1;h<(r||1);c++){for(o=s=e.encrypt(p.concat(t,[c])),a=1;a<i;a++)for(s=e.encrypt(s),l=0;l<s.length;l++)o[l]^=s[l];for(a=0;h<(r||1)&&a<o.length;a++)d.setInt32(h,o[a]),h+=4}return u.slice(0,n/8)},hmacSha1:class{constructor(e){const t=this,i=t._hash=Ul,n=[[],[]];t._baseHash=[new i,new i];const r=t._baseHash[0].blockSize/32;e.length>r&&(e=(new i).update(e).finalize());for(let t=0;t<r;t++)n[0][t]=909522486^e[t],n[1][t]=1549556828^e[t];t._baseHash[0].update(n[0]),t._baseHash[1].update(n[1]),t._resultHash=new i(t._baseHash[0])}reset(){const e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){this._updated=!0,this._resultHash.update(e)}digest(){const e=this,t=e._resultHash.finalize(),i=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),i}encrypt(e){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},Hl=typeof crypto!=Tl&&typeof crypto.getRandomValues==Sl,Wl="Invalid password",jl="Invalid signature",$l="zipjs-abort-check-password";function Xl(e){return Hl?crypto.getRandomValues(e):Gl.getRandomValues(e)}const Yl=16,Zl={name:"PBKDF2"},Jl=Object.assign({hash:{name:"HMAC"}},Zl),Ql=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},Zl),ec=["deriveBits"],tc=[8,12,16],ic=[16,24,32],nc=10,rc=[0,0,0,0],oc=typeof crypto!=Tl,sc=oc&&crypto.subtle,ac=oc&&typeof sc!=Tl,lc=Vl.bytes,cc=zl,uc=Kl,dc=ql.hmacSha1;let hc=oc&&ac&&typeof sc.importKey==Sl,pc=oc&&ac&&typeof sc.deriveBits==Sl;class fc extends TransformStream{constructor({password:e,rawPassword:t,signed:i,encryptionStrength:n,checkPasswordOnly:r}){super({start(){Object.assign(this,{ready:new Promise(e=>this.resolveReady=e),password:_c(e,t),signed:i,strength:n-1,pending:new Uint8Array})},async transform(e,t){const i=this,{password:n,strength:o,resolveReady:s,ready:a}=i;n?(await async function(e,t,i,n){const r=await Ac(e,t,i,vc(n,0,tc[t])),o=vc(n,tc[t]);if(r[0]!=o[0]||r[1]!=o[1])throw new Error(Wl)}(i,o,n,vc(e,0,tc[o]+2)),e=vc(e,tc[o]+2),r?t.error(new Error($l)):s()):await a;const l=new Uint8Array(e.length-nc-(e.length-nc)%Yl);t.enqueue(gc(i,e,l,0,nc,!0))},async flush(e){const{signed:t,ctr:i,hmac:n,pending:r,ready:o}=this;if(n&&i){await o;const s=vc(r,0,r.length-nc),a=vc(r,r.length-nc);let l=new Uint8Array;if(s.length){const e=bc(lc,s);n.update(e);const t=i.update(e);l=wc(lc,t)}if(t){const e=vc(wc(lc,n.digest()),0,nc);for(let t=0;t<nc;t++)if(e[t]!=a[t])throw new Error(jl)}e.enqueue(l)}}})}}class mc extends TransformStream{constructor({password:e,rawPassword:t,encryptionStrength:i}){let n;super({start(){Object.assign(this,{ready:new Promise(e=>this.resolveReady=e),password:_c(e,t),strength:i-1,pending:new Uint8Array})},async transform(e,t){const i=this,{password:n,strength:r,resolveReady:o,ready:s}=i;let a=new Uint8Array;n?(a=await async function(e,t,i){const n=Xl(new Uint8Array(tc[t]));return yc(n,await Ac(e,t,i,n))}(i,r,n),o()):await s;const l=new Uint8Array(a.length+e.length-e.length%Yl);l.set(a,0),t.enqueue(gc(i,e,l,a.length,0))},async flush(e){const{ctr:t,hmac:i,pending:r,ready:o}=this;if(i&&t){await o;let s=new Uint8Array;if(r.length){const e=t.update(bc(lc,r));i.update(e),s=wc(lc,e)}n.signature=wc(lc,i.digest()).slice(0,nc),e.enqueue(yc(s,n.signature))}}}),n=this}}function gc(e,t,i,n,r,o){const{ctr:s,hmac:a,pending:l}=e,c=t.length-r;let u;for(l.length&&(t=yc(l,t),i=function(e,t){if(t&&t>e.length){const i=e;(e=new Uint8Array(t)).set(i,0)}return e}(i,c-c%Yl)),u=0;u<=c-Yl;u+=Yl){const e=bc(lc,vc(t,u,u+Yl));o&&a.update(e);const r=s.update(e);o||a.update(r),i.set(wc(lc,r),u+n)}return e.pending=vc(t,u),i}async function Ac(e,t,i,n){e.password=null;const r=await async function(e,t,i,n,r){if(!hc)return ql.importKey(t);try{return await sc.importKey("raw",t,i,!1,r)}catch(e){return hc=!1,ql.importKey(t)}}(0,i,Jl,0,ec),o=await async function(e,t,i){if(!pc)return ql.pbkdf2(t,e.salt,Ql.iterations,i);try{return await sc.deriveBits(e,t,i)}catch(n){return pc=!1,ql.pbkdf2(t,e.salt,Ql.iterations,i)}}(Object.assign({salt:n},Ql),r,8*(2*ic[t]+2)),s=new Uint8Array(o),a=bc(lc,vc(s,0,ic[t])),l=bc(lc,vc(s,ic[t],2*ic[t])),c=vc(s,2*ic[t]);return Object.assign(e,{keys:{key:a,authentication:l,passwordVerification:c},ctr:new uc(new cc(a),Array.from(rc)),hmac:new dc(l)}),c}function _c(e,t){return t===xl?Fl(e):t}function yc(e,t){let i=e;return e.length+t.length&&(i=new Uint8Array(e.length+t.length),i.set(e,0),i.set(t,e.length)),i}function vc(e,t,i){return e.subarray(t,i)}function wc(e,t){return e.fromBits(t)}function bc(e,t){return e.toBits(t)}class xc extends TransformStream{constructor({password:e,passwordVerification:t,checkPasswordOnly:i}){super({start(){Object.assign(this,{password:e,passwordVerification:t}),Mc(this,e)},transform(e,t){const n=this;if(n.password){const t=Sc(n,e.subarray(0,12));if(n.password=null,t.at(-1)!=n.passwordVerification)throw new Error(Wl);e=e.subarray(12)}i?t.error(new Error($l)):t.enqueue(Sc(n,e))}})}}class Tc extends TransformStream{constructor({password:e,passwordVerification:t}){super({start(){Object.assign(this,{password:e,passwordVerification:t}),Mc(this,e)},transform(e,t){const i=this;let n,r;if(i.password){i.password=null;const t=Xl(new Uint8Array(12));t[11]=i.passwordVerification,n=new Uint8Array(e.length+t.length),n.set(Cc(i,t),0),r=12}else n=new Uint8Array(e.length),r=0;n.set(Cc(i,e),r),t.enqueue(n)}})}}function Sc(e,t){const i=new Uint8Array(t.length);for(let n=0;n<t.length;n++)i[n]=Pc(e)^t[n],Ec(e,i[n]);return i}function Cc(e,t){const i=new Uint8Array(t.length);for(let n=0;n<t.length;n++)i[n]=Pc(e)^t[n],Ec(e,t[n]);return i}function Mc(e,t){const i=[305419896,591751049,878082192];Object.assign(e,{keys:i,crcKey0:new Bl(i[0]),crcKey2:new Bl(i[2])});for(let i=0;i<t.length;i++)Ec(e,t.charCodeAt(i))}function Ec(e,t){let[i,n,r]=e.keys;e.crcKey0.append([t]),i=~e.crcKey0.get(),n=Oc(Math.imul(Oc(n+kc(i)),134775813)+1),e.crcKey2.append([n>>>24]),r=~e.crcKey2.get(),e.keys=[i,n,r]}function Pc(e){const t=2|e.keys[2];return kc(Math.imul(t,1^t)>>>8)}function kc(e){return 255&e}function Oc(e){return 4294967295&e}const Rc="Invalid uncompressed size",Ic="deflate-raw";class Dc extends TransformStream{constructor(e,{chunkSize:t,CompressionStream:i,CompressionStreamNative:n}){super({});const{compressed:r,encrypted:o,useCompressionStream:s,zipCrypto:a,signed:l,level:c}=e,u=this;let d,h,p=super.readable;o&&!a||!l||(d=new Ll,p=Nc(p,d)),r&&(p=Fc(p,s,{level:c,chunkSize:t},n,i)),o&&(a?p=Nc(p,new Tc(e)):(h=new mc(e),p=Nc(p,h))),Lc(u,p,()=>{let e;o&&!a&&(e=h.signature),o&&!a||!l||(e=new DataView(d.value.buffer).getUint32(0)),u.signature=e})}}class Bc extends TransformStream{constructor(e,{chunkSize:t,DecompressionStream:i,DecompressionStreamNative:n}){super({});const{zipCrypto:r,encrypted:o,signed:s,signature:a,compressed:l,useCompressionStream:c}=e;let u,d,h=super.readable;o&&(r?h=Nc(h,new xc(e)):(d=new fc(e),h=Nc(h,d))),l&&(h=Fc(h,c,{chunkSize:t},n,i)),o&&!r||!s||(u=new Ll,h=Nc(h,u)),Lc(this,h,()=>{if((!o||r)&&s){const e=new DataView(u.value.buffer);if(a!=e.getUint32(0,!1))throw new Error(jl)}})}}function Lc(e,t,i){t=Nc(t,new TransformStream({flush:i})),Object.defineProperty(e,"readable",{get:()=>t})}function Fc(e,t,i,n,r){try{e=Nc(e,new(t&&n?n:r)(Ic,i))}catch(n){if(!t)throw n;e=Nc(e,new r(Ic,i))}return e}function Nc(e,t){return e.pipeThrough(t)}const Vc="data",Uc="close",zc="deflate",Gc="inflate";class Kc extends TransformStream{constructor(e,t){super({});const i=this,{codecType:n}=e;let r;n.startsWith(zc)?r=Dc:n.startsWith(Gc)&&(r=Bc),i.outputSize=0;let o=0;const s=new r(e,t),a=super.readable,l=new TransformStream({transform(e,t){e&&e.length&&(o+=e.length,t.enqueue(e))},flush(){Object.assign(i,{inputSize:o})}}),c=new TransformStream({transform(t,n){if(t&&t.length&&(n.enqueue(t),i.outputSize+=t.length,e.outputSize&&i.outputSize>e.outputSize))throw new Error(Rc)},flush(){const{signature:e}=s;Object.assign(i,{signature:e,inputSize:o})}});Object.defineProperty(i,"readable",{get:()=>a.pipeThrough(l).pipeThrough(s).pipeThrough(c)})}}class qc extends TransformStream{constructor(e){let t;super({transform:function i(n,r){if(t){const e=new Uint8Array(t.length+n.length);e.set(t),e.set(n,t.length),n=e,t=null}n.length>e?(r.enqueue(n.slice(0,e)),i(n.slice(e),r)):t=n},flush(e){t&&t.length&&e.enqueue(t)}})}}let Hc=typeof Worker!=Tl;class Wc{constructor(e,{readable:t,writable:i},{options:n,config:r,streamOptions:o,useWebWorkers:s,transferStreams:a,scripts:l},c){const{signal:u}=o;return Object.assign(e,{busy:!0,readable:t.pipeThrough(new qc(r.chunkSize)).pipeThrough(new jc(o),{signal:u}),writable:i,options:Object.assign({},n),scripts:l,transferStreams:a,terminate:()=>new Promise(t=>{const{worker:i,busy:n}=e;i?(n?e.resolveTerminated=t:(i.terminate(),t()),e.interface=null):t()}),onTaskFinished(){const{resolveTerminated:t}=e;t&&(e.resolveTerminated=null,e.terminated=!0,e.worker.terminate(),t()),e.busy=!1,c(e)}}),(s&&Hc?Yc:Xc)(e,r)}}class jc extends TransformStream{constructor({onstart:e,onprogress:t,size:i,onend:n}){let r=0;super({async start(){e&&await $c(e,i)},async transform(e,n){r+=e.length,t&&await $c(t,r,i),n.enqueue(e)},async flush(){n&&await $c(n,r)}})}}async function $c(e,...t){try{await e(...t)}catch(e){}}function Xc(e,t){return{run:()=>async function({options:e,readable:t,writable:i,onTaskFinished:n},r){let o;try{o=new Kc(e,r),await t.pipeThrough(o).pipeTo(i,{preventClose:!0,preventAbort:!0});const{signature:n,inputSize:s,outputSize:a}=o;return{signature:n,inputSize:s,outputSize:a}}catch(e){throw o&&(e.outputSize=o.outputSize),e}finally{n()}}(e,t)}}function Yc(e,t){const{baseURL:i,chunkSize:n}=t;if(!e.interface){let r;try{r=function(e,t,i){const n={type:"module"};let r,o;typeof e==Sl&&(e=e());try{r=new URL(e,t)}catch(t){r=e}if(Zc)try{o=new Worker(r)}catch(e){Zc=!1,o=new Worker(r,n)}else o=new Worker(r,n);return o.addEventListener("message",e=>async function({data:e},t){const{type:i,value:n,messageId:r,result:o,error:s}=e,{reader:a,writer:l,resolveResult:c,rejectResult:u,onTaskFinished:d}=t;try{if(s){const{message:e,stack:t,code:i,name:n,outputSize:r}=s,o=new Error(e);Object.assign(o,{stack:t,code:i,name:n,outputSize:r}),h(o)}else{if("pull"==i){const{value:e,done:i}=await a.read();Qc({type:Vc,value:e,done:i,messageId:r},t)}i==Vc&&(await l.ready,await l.write(new Uint8Array(n)),Qc({type:"ack",messageId:r},t)),i==Uc&&h(null,o)}}catch(s){Qc({type:Uc,messageId:r},t),h(s)}function h(e,t){e?u(e):c(t),l&&l.releaseLock(),d()}}(e,i)),o}(e.scripts[0],i,e)}catch(i){return Hc=!1,Xc(e,t)}Object.assign(e,{worker:r,interface:{run:()=>async function(e,t){let i,n;const r=new Promise((e,t)=>{i=e,n=t});Object.assign(e,{reader:null,writer:null,resolveResult:i,rejectResult:n,result:r});const{readable:o,options:s,scripts:a}=e,{writable:l,closed:c}=function(e){let t;const i=new Promise(e=>t=e);return{writable:new WritableStream({async write(t){const i=e.getWriter();await i.ready,await i.write(t),i.releaseLock()},close(){t()},abort:t=>e.getWriter().abort(t)}),closed:i}}(e.writable),u=Qc({type:"start",scripts:a.slice(1),options:s,config:t,readable:o,writable:l},e);u||Object.assign(e,{reader:o.getReader(),writer:l.getWriter()});const d=await r;return u||await l.getWriter().close(),await c,d}(e,{chunkSize:n})}})}return e.interface}let Zc=!0,Jc=!0;function Qc(e,{worker:t,writer:i,onTaskFinished:n,transferStreams:r}){try{const{value:i,readable:n,writable:o}=e,s=[];if(i&&(i.byteLength<i.buffer.byteLength?e.value=i.buffer.slice(0,i.byteLength):e.value=i.buffer,s.push(e.value)),r&&Jc?(n&&s.push(n),o&&s.push(o)):e.readable=e.writable=null,s.length)try{return t.postMessage(e,s),!0}catch(i){Jc=!1,e.readable=e.writable=null,t.postMessage(e)}else t.postMessage(e)}catch(e){throw i&&i.releaseLock(),n(),e}}let eu=[];const tu=[];let iu=0;async function nu(e,t){const{options:i,config:n}=t,{transferStreams:r,useWebWorkers:o,useCompressionStream:s,codecType:a,compressed:l,signed:c,encrypted:u}=i,{workerScripts:d,maxWorkers:h}=n;t.transferStreams=r||r===xl;const p=!(l||c||u||t.transferStreams);return t.useWebWorkers=!p&&(o||o===xl&&n.useWebWorkers),t.scripts=t.useWebWorkers&&d?d[a]:[],i.useCompressionStream=s||s===xl&&n.useCompressionStream,(await async function(){const i=eu.find(e=>!e.busy);if(i)return ru(i),new Wc(i,e,t,f);if(eu.length<h){const i={indexWorker:iu};return iu++,eu.push(i),new Wc(i,e,t,f)}return new Promise(i=>tu.push({resolve:i,stream:e,workerOptions:t}))}()).run();function f(e){if(tu.length){const[{resolve:t,stream:i,workerOptions:n}]=tu.splice(0,1);t(new Wc(e,i,n,f))}else e.worker?(ru(e),function(e,t){const{config:i}=t,{terminateWorkerTimeout:n}=i;Number.isFinite(n)&&n>=0&&(e.terminated?e.terminated=!1:e.terminateTimeout=setTimeout(async()=>{eu=eu.filter(t=>t!=e);try{await e.terminate()}catch(e){}},n))}(e,t)):eu=eu.filter(t=>t!=e)}}function ru(e){const{terminateTimeout:t}=e;t&&(clearTimeout(t),e.terminateTimeout=null)}const ou=65536,su="writable";class au{constructor(){this.size=0}init(){this.initialized=!0}}class lu extends au{get readable(){const e=this,{chunkSize:t=ou}=e,i=new ReadableStream({start(){this.chunkOffset=0},async pull(n){const{offset:r=0,size:o,diskNumberStart:s}=i,{chunkOffset:a}=this,l=o===xl?t:Math.min(t,o-a),c=await vu(e,r+a,l,s);n.enqueue(c),a+t>o||o===xl&&!c.length&&l?n.close():this.chunkOffset+=t}});return i}}class cu extends au{constructor(){super();const e=this,t=new WritableStream({write(t){if(!e.initialized)throw new Error("Writer not initialized");return e.writeUint8Array(t)}});Object.defineProperty(e,su,{get:()=>t})}writeUint8Array(){}}class uu extends cu{constructor(e){super(),Object.assign(this,{data:"data:"+(e||"")+";base64,",pending:[]})}writeUint8Array(e){const t=this;let i=0,n=t.pending;const r=t.pending.length;for(t.pending="",i=0;i<3*Math.floor((r+e.length)/3)-r;i++)n+=String.fromCharCode(e[i]);for(;i<e.length;i++)t.pending+=String.fromCharCode(e[i]);n.length&&(n.length>2?t.data+=btoa(n):t.pending+=n)}getData(){return this.data+btoa(this.pending)}}class du extends lu{constructor(e){super(),Object.assign(this,{blob:e,size:e.size})}async readUint8Array(e,t){const i=this,n=e+t,r=e||n<i.size?i.blob.slice(e,n):i.blob;let o=await r.arrayBuffer();return o.byteLength>t&&(o=o.slice(e,n)),new Uint8Array(o)}}class hu extends au{constructor(e){super();const t=new TransformStream,i=[];e&&i.push(["Content-Type",e]),Object.defineProperty(this,su,{get:()=>t.writable}),this.blob=new Response(t.readable,{headers:i}).blob()}getData(){return this.blob}}class pu extends du{constructor(e){super(new Blob([e],{type:"text/plain"}))}}class fu extends hu{constructor(e){super(e),Object.assign(this,{encoding:e,utf8:!e||"utf-8"==e.toLowerCase()})}async getData(){const{encoding:e,utf8:t}=this,i=await super.getData();if(i.text&&t)return i.text();{const t=new FileReader;return new Promise((n,r)=>{Object.assign(t,{onload:({target:e})=>n(e.result),onerror:()=>r(t.error)}),t.readAsText(i,e)})}}}class mu extends lu{constructor(e){super(),this.readers=e}async init(){const e=this,{readers:t}=e;e.lastDiskNumber=0,e.lastDiskOffset=0,await Promise.all(t.map(async(i,n)=>{await i.init(),n!=t.length-1&&(e.lastDiskOffset+=i.size),e.size+=i.size})),super.init()}async readUint8Array(e,t,i=0){const n=this,{readers:r}=this;let o,s=i;-1==s&&(s=r.length-1);let a=e;for(;r[s]&&a>=r[s].size;)a-=r[s].size,s++;const l=r[s];if(l){const r=l.size;if(a+t<=r)o=await vu(l,a,t);else{const s=r-a;o=new Uint8Array(t);const c=await vu(l,a,s);o.set(c,0);const u=await n.readUint8Array(e+s,t-s,i);o.set(u,s),c.length+u.length<t&&(o=o.subarray(0,c.length+u.length))}}else o=new Uint8Array;return n.lastDiskNumber=Math.max(s,n.lastDiskNumber),o}}class gu extends au{constructor(e,t=4294967295){super();const i=this;let n,r,o;Object.assign(i,{diskNumber:0,diskOffset:0,size:0,maxSize:t,availableSize:t});const s=new WritableStream({async write(t){const{availableSize:s}=i;if(o)t.length>=s?(await a(t.subarray(0,s)),await l(),i.diskOffset+=n.size,i.diskNumber++,o=null,await this.write(t.subarray(s))):await a(t);else{const{value:s,done:a}=await e.next();if(a&&!s)throw new Error("Writer iterator completed too soon");n=s,n.size=0,n.maxSize&&(i.maxSize=n.maxSize),i.availableSize=i.maxSize,await yu(n),r=s.writable,o=r.getWriter(),await this.write(t)}},async close(){await o.ready,await l()}});async function a(e){const t=e.length;t&&(await o.ready,await o.write(e),n.size+=t,i.size+=t,i.availableSize-=t)}async function l(){await o.close()}Object.defineProperty(i,su,{get:()=>s})}}class Au{constructor(e){return Array.isArray(e)&&(e=new mu(e)),e instanceof ReadableStream&&(e={readable:e}),e}}class _u{constructor(e){return e.writable===xl&&typeof e.next==Sl&&(e=new gu(e)),e instanceof WritableStream&&(e={writable:e}),e.size===xl&&(e.size=0),e instanceof gu||Object.assign(e,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),e}}async function yu(e,t){if(!e.init||e.initialized)return Promise.resolve();await e.init(t)}function vu(e,t,i,n){return e.readUint8Array(t,i,n)}const wu="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),bu=256==wu.length;function xu(e,t){return t&&"cp437"==t.trim().toLowerCase()?function(e){if(bu){let t="";for(let i=0;i<e.length;i++)t+=wu[e[i]];return t}return(new TextDecoder).decode(e)}(e):new TextDecoder(t).decode(e)}const Tu="filename",Su="rawFilename",Cu="comment",Mu="rawComment",Eu="uncompressedSize",Pu="compressedSize",ku="offset",Ou="diskNumberStart",Ru="lastModDate",Iu="rawLastModDate",Du="lastAccessDate",Bu="creationDate",Lu="internalFileAttribute",Fu="internalFileAttributes",Nu="externalFileAttribute",Vu="externalFileAttributes",Uu="msDosCompatible",zu="zip64",Gu="encrypted",Ku="version",qu="versionMadeBy",Hu="zipCrypto",Wu="directory",ju="executable",$u="compressionMethod",Xu="signature",Yu="extraField",Zu=[Tu,Su,Pu,Eu,Ru,Iu,Cu,Mu,Du,Bu,ku,Ou,Ou,Lu,Fu,Nu,Vu,Uu,zu,Gu,Ku,qu,Hu,Wu,ju,$u,Xu,Yu,"bitFlag","filenameUTF8","commentUTF8","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class Ju{constructor(e){Zu.forEach(t=>this[t]=e[t])}}const Qu="password",ed="rawPassword",td="passThrough",id="signal",nd="useWebWorkers",rd="useCompressionStream",od="preventClose",sd="supportZip64SplitFile",ad="offset",ld="usdz",cd="File format is not recognized",ud="Compression method not supported",dd="Split zip file",hd="utf-8",pd="cp437",fd=[[Eu,al],[Pu,al],[ku,al],[Ou,ll]],md={[ll]:{getValue:Cd,bytes:4},[al]:{getValue:Md,bytes:8}};class gd{constructor(e,t={}){Object.assign(this,{reader:new Au(e),options:t,config:kl(),readRanges:[]})}async*getEntriesGenerator(e={}){const t=this;let{reader:i}=t;const{config:n}=t;if(await yu(i),i.size!==xl&&i.readUint8Array||(i=new du(await new Response(i.readable).blob()),await yu(i)),i.size<gl)throw new Error(cd);i.chunkSize=Ol(n);const r=await async function(e,t,i){const n=new Uint8Array(4);var r,o;r=Ed(n),o=t,r.setUint32(0,o,!0);return await s(22)||await s(Math.min(1048582,i));async function s(t){const r=i-t,o=await vu(e,r,t);for(let e=o.length-22;e>=0;e--)if(o[e]==n[0]&&o[e+1]==n[1]&&o[e+2]==n[2]&&o[e+3]==n[3])return{offset:r+e,buffer:o.slice(e,e+22).buffer}}}(i,pl,i.size);if(!r)throw Cd(Ed(await vu(i,0,4)))==ul?new Error(dd):new Error("End of central directory not found");const o=Ed(r);let s=Cd(o,12),a=Cd(o,16);const l=r.offset,c=Sd(o,20),u=l+gl+c;let d=Sd(o,4);const h=i.lastDiskNumber||0;let p=Sd(o,6),f=Sd(o,8),m=0,g=0;if(a==al||s==al||f==ll||p==ll){const e=Ed(await vu(i,r.offset-20,20));if(Cd(e,0)==ml){a=Md(e,8);let t=await vu(i,a,56,-1),n=Ed(t);const o=r.offset-20-56;if(Cd(n,0)!=fl&&a!=o){const e=a;a=o,a>e&&(m=a-e),t=await vu(i,a,56,-1),n=Ed(t)}if(Cd(n,0)!=fl)throw new Error("End of Zip64 central directory locator not found");d==ll&&(d=Cd(n,16)),p==ll&&(p=Cd(n,20)),f==ll&&(f=Md(n,32)),s==al&&(s=Md(n,40)),a-=s}}if(a>=i.size&&(m=i.size-a-s-gl,a=i.size-s-gl),h!=d)throw new Error(dd);if(a<0)throw new Error(cd);let A=0,_=await vu(i,a,s,p),y=Ed(_);if(s){const e=r.offset-s;if(Cd(y,A)!=hl&&a!=e){const t=a;a=e,a>t&&(m+=a-t),_=await vu(i,a,s,p),y=Ed(_)}}const v=r.offset-a-(i.lastDiskOffset||0);if(s!=v&&v>=0&&(s=v,_=await vu(i,a,s,p),y=Ed(_)),a<0||a>=i.size)throw new Error(cd);const w=wd(t,e,"filenameEncoding"),b=wd(t,e,"commentEncoding");for(let r=0;r<f;r++){const o=new Ad(i,n,t.options);if(Cd(y,A)!=hl)throw new Error("Central directory header not found");_d(o,y,A+6);const s=Boolean(o.bitFlag.languageEncodingFlag),a=A+46,l=a+o.filenameLength,c=l+o.extraFieldLength,u=Sd(y,A+4),d=!(u>>8),h=u>>8==3,p=_.subarray(a,l),v=Sd(y,A+32),x=c+v,T=_.subarray(c,x),S=s,C=s,M=Cd(y,A+38),E=d&&!(16&~Td(y,A+38))||h&&16384==(M>>16&61440)||p.length&&p.at(-1)==yl.charCodeAt(0),P=h&&!!(M>>16&73),k=Cd(y,A+42)+m;Object.assign(o,{versionMadeBy:u,msDosCompatible:d,compressedSize:0,uncompressedSize:0,commentLength:v,directory:E,offset:k,diskNumberStart:Sd(y,A+34),internalFileAttributes:Sd(y,A+36),externalFileAttributes:M,rawFilename:p,filenameUTF8:S,commentUTF8:C,rawExtraField:_.subarray(l,c),executable:P}),o.internalFileAttribute=o.internalFileAttributes,o.externalFileAttribute=o.externalFileAttributes;const O=wd(t,e,"decodeText")||xu,R=S?hd:w||pd,I=C?hd:b||pd;let D=O(p,R);D===xl&&(D=xu(p,R));let B=O(T,I);B===xl&&(B=xu(T,I)),Object.assign(o,{rawComment:T,filename:D,comment:B,directory:E||D.endsWith(yl)}),g=Math.max(k,g),yd(o,o,y,A+6),o.zipCrypto=o.encrypted&&!o.extraFieldAES;const L=new Ju(o);L.getData=(e,i)=>o.getData(e,L,t.readRanges,i),L.arrayBuffer=async e=>{const i=new TransformStream,[n]=await Promise.all([new Response(i.readable).arrayBuffer(),o.getData(i,L,t.readRanges,e)]);return n},A=x;const{onprogress:F}=e;if(F)try{await F(r+1,f,new Ju(o))}catch(e){}yield L}const x=wd(t,e,"extractPrependedData"),T=wd(t,e,"extractAppendedData");return x&&(t.prependedData=g>0?await vu(i,0,g):new Uint8Array),t.comment=c?await vu(i,l+gl,c):new Uint8Array,T&&(t.appendedData=u<i.size?await vu(i,u,i.size-u):new Uint8Array),!0}async getEntries(e={}){const t=[];for await(const i of this.getEntriesGenerator(e))t.push(i);return t}async close(){}}class Ad{constructor(e,t,i){Object.assign(this,{reader:e,config:t,options:i})}async getData(e,t,i,n={}){const r=this,{reader:o,offset:s,diskNumberStart:a,extraFieldAES:l,extraFieldZip64:c,compressionMethod:u,config:d,bitFlag:h,signature:p,rawLastModDate:f,uncompressedSize:m,compressedSize:g}=r,{dataDescriptor:A}=h,_=t.localDirectory={},y=Ed(await vu(o,s,vl,a));let v=wd(r,n,Qu),w=wd(r,n,ed);const b=wd(r,n,td);if(v=v&&v.length&&v,w=w&&w.length&&w,l&&99!=l.originalCompressionMethod)throw new Error(ud);if(0!=u&&8!=u&&!b)throw new Error(ud);if(Cd(y,0)!=cl)throw new Error("Local file header not found");_d(_,y,4);const{extraFieldLength:x,filenameLength:T,lastAccessDate:S,creationDate:C}=_;_.rawExtraField=x?await vu(o,s+vl+T,x,a):new Uint8Array,yd(r,_,y,4,!0),Object.assign(t,{lastAccessDate:S,creationDate:C});const M=r.encrypted&&_.encrypted&&!b,E=M&&!l;if(b||(t.zipCrypto=E),M){if(!E&&l.strength===xl)throw new Error("Encryption method not supported");if(!v&&!w)throw new Error("File contains encrypted entry")}const P=s+vl+T+x,k=g,O=o.readable;Object.assign(O,{diskNumberStart:a,offset:P,size:k});const R=wd(r,n,id),I=wd(r,n,"checkPasswordOnly");let D=wd(r,n,"checkOverlappingEntry");const B=wd(r,n,"checkOverlappingEntryOnly");B&&(D=!0);const{onstart:L,onprogress:F,onend:N}=n,V={options:{codecType:Gc,password:v,rawPassword:w,zipCrypto:E,encryptionStrength:l&&l.strength,signed:wd(r,n,"checkSignature")&&!b,passwordVerification:E&&(A?f>>>8&255:p>>>24&255),outputSize:m,signature:p,compressed:0!=u&&!b,encrypted:r.encrypted&&!b,useWebWorkers:wd(r,n,nd),useCompressionStream:wd(r,n,rd),transferStreams:wd(r,n,"transferStreams"),checkPasswordOnly:I},config:d,streamOptions:{signal:R,size:k,onstart:L,onprogress:F,onend:N}};let U;D&&await async function({reader:e,fileEntry:t,offset:i,diskNumberStart:n,signature:r,compressedSize:o,uncompressedSize:s,dataOffset:a,dataDescriptor:l,extraFieldZip64:c,readRanges:u}){let d=0;if(n)for(let t=0;t<n;t++)d+=e.readers[t].size;let h=0;if(l&&(h=c?20:12),h){const i=await vu(e,a+o,h+4,n);if(Cd(Ed(i),0)==dl){const e=Cd(Ed(i),4);let n,a;c?(n=Md(Ed(i),8),a=Md(Ed(i),16)):(n=Cd(Ed(i),8),a=Cd(Ed(i),12)),(t.encrypted&&!t.zipCrypto||e==r)&&n==o&&a==s&&(h+=4)}}const p={start:d+i,end:d+a+o+h,fileEntry:t};for(const e of u)if(e.fileEntry!=t&&p.start>=e.start&&p.start<e.end){const t=new Error("Overlapping entry found");throw t.overlappingEntry=e.fileEntry,t}u.push(p)}({reader:o,fileEntry:t,offset:s,diskNumberStart:a,signature:p,compressedSize:g,uncompressedSize:m,dataOffset:P,dataDescriptor:A||_.bitFlag.dataDescriptor,extraFieldZip64:c||_.extraFieldZip64,readRanges:i});try{if(!B){I&&(e=new WritableStream),e=new _u(e),await yu(e,b?g:m),({writable:U}=e);const{outputSize:t}=await nu({readable:O,writable:U},V);if(e.size+=t,t!=(b?g:m))throw new Error(Rc)}}catch(t){if(t.outputSize!==xl&&(e.size+=t.outputSize),!I||t.message!=$l)throw t}finally{wd(r,n,od)||!U||U.locked||await U.getWriter().close()}return I||B?xl:e.getData?e.getData():U}}function _d(e,t,i){const n=e.rawBitFlag=Sd(t,i+2),r=!(1&~n),o=Cd(t,i+6);Object.assign(e,{encrypted:r,version:Sd(t,i),bitFlag:{level:(6&n)>>1,dataDescriptor:!(8&~n),languageEncodingFlag:(n&_l)==_l},rawLastModDate:o,lastModDate:bd(o),filenameLength:Sd(t,i+22),extraFieldLength:Sd(t,i+24)})}function yd(e,t,i,n,r){const{rawExtraField:o}=t,s=t.extraField=new Map,a=Ed(new Uint8Array(o));let l=0;try{for(;l<o.length;){const e=Sd(a,l),t=Sd(a,l+2);s.set(e,{type:e,data:o.slice(l+4,l+4+t)}),l+=4+t}}catch(e){}const c=Sd(i,n+4);Object.assign(t,{signature:Cd(i,n+10),compressedSize:Cd(i,n+14),uncompressedSize:Cd(i,n+18)});const u=s.get(1);u&&(function(e,t){t.zip64=!0;const i=Ed(e.data),n=fd.filter(([e,i])=>t[e]==i);for(let r=0,o=0;r<n.length;r++){const[s,a]=n[r];if(t[s]==a){const n=md[a];t[s]=e[s]=n.getValue(i,o),o+=n.bytes}else if(e[s])throw new Error("Zip64 extra field not found")}}(u,t),t.extraFieldZip64=u);const d=s.get(28789);d&&(vd(d,Tu,Su,t,e),t.extraFieldUnicodePath=d);const h=s.get(25461);h&&(vd(h,Cu,Mu,t,e),t.extraFieldUnicodeComment=h);const p=s.get(39169);p?(function(e,t,i){const n=Ed(e.data),r=Td(n,4);Object.assign(e,{vendorVersion:Td(n,0),vendorId:Td(n,2),strength:r,originalCompressionMethod:i,compressionMethod:Sd(n,5)}),t.compressionMethod=e.compressionMethod}(p,t,c),t.extraFieldAES=p):t.compressionMethod=c;const f=s.get(10);f&&(function(e,t){const i=Ed(e.data);let n,r=4;try{for(;r<e.data.length&&!n;){const t=Sd(i,r),o=Sd(i,r+2);1==t&&(n=e.data.slice(r+4,r+4+o)),r+=4+o}}catch(e){}try{if(n&&24==n.length){const i=Ed(n),r=i.getBigUint64(0,!0),o=i.getBigUint64(8,!0),s=i.getBigUint64(16,!0);Object.assign(e,{rawLastModDate:r,rawLastAccessDate:o,rawCreationDate:s});const a=xd(r),l={lastModDate:a,lastAccessDate:xd(o),creationDate:xd(s)};Object.assign(e,l),Object.assign(t,l)}}catch(e){}}(f,t),t.extraFieldNTFS=f);const m=s.get(Al);m&&(function(e,t,i){const n=Ed(e.data),r=Td(n,0),o=[],s=[];i?(1&~r||(o.push(Ru),s.push(Iu)),2&~r||(o.push(Du),s.push("rawLastAccessDate")),4&~r||(o.push(Bu),s.push("rawCreationDate"))):e.data.length>=5&&(o.push(Ru),s.push(Iu));let a=1;o.forEach((i,r)=>{if(e.data.length>=a+4){const o=Cd(n,a);t[i]=e[i]=new Date(1e3*o);const l=s[r];e[l]=o}a+=4})}(m,t,r),t.extraFieldExtendedTimestamp=m);const g=s.get(6534);g&&(t.extraFieldUSDZ=g)}function vd(e,t,i,n,r){const o=Ed(e.data),s=new Bl;s.append(r[i]);const a=Ed(new Uint8Array(4));a.setUint32(0,s.get(),!0);const l=Cd(o,1);Object.assign(e,{version:Td(o,0),[t]:xu(e.data.subarray(5)),valid:!r.bitFlag.languageEncodingFlag&&l==Cd(a,0)}),e.valid&&(n[t]=e[t],n[t+"UTF8"]=!0)}function wd(e,t,i){return t[i]===xl?e.options[i]:t[i]}function bd(e){const t=(4294901760&e)>>16,i=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&i)>>11,(2016&i)>>5,2*(31&i),0)}catch(e){}}function xd(e){return new Date(Number(e/BigInt(1e4)-BigInt(116444736e5)))}function Td(e,t){return e.getUint8(t)}function Sd(e,t){return e.getUint16(t,!0)}function Cd(e,t){return e.getUint32(t,!0)}function Md(e,t){return Number(e.getBigUint64(t,!0))}function Ed(e){return new DataView(e.buffer)}const Pd="Version exceeds 65535",kd="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",Od=new Uint8Array([7,0,2,0,65,69,3,0,0]);let Rd=0;const Id=[];class Dd{constructor(e,t={}){const i=(e=new _u(e)).availableSize!==xl&&e.availableSize>0&&e.availableSize!==1/0&&e.maxSize!==xl&&e.maxSize>0&&e.maxSize!==1/0;Object.assign(this,{writer:e,addSplitZipSignature:i,options:t,config:kl(),files:new Map,filenames:new Set,offset:t[ad]===xl?e.size||e.writable.size||0:t[ad],pendingEntriesSize:0,pendingAddFileCalls:new Set,bufferedWrites:0})}async prependZip(e){if(this.filenames.size)throw new Error("Zip file not empty");e=new Au(e);const t=new gd(e.readable),i=await t.getEntries();await t.close(),await e.readable.pipeTo(this.writer.writable,{preventClose:!0,preventAbort:!0}),this.writer.size=this.offset=e.size,this.filenames=new Set(i.map(e=>e.filename)),this.files=new Map(i.map(e=>{const{version:t,compressionMethod:i,lastModDate:n,lastAccessDate:r,creationDate:o,rawFilename:s,bitFlag:a,encrypted:l,uncompressedSize:c,compressedSize:u,diskOffset:d,diskNumber:h,zip64:p}=e;let{rawExtraFieldZip64:f,rawExtraFieldAES:m,rawExtraFieldExtendedTimestamp:g,rawExtraFieldNTFS:A,rawExtraField:_}=e;const{level:y,languageEncodingFlag:v,dataDescriptor:w}=a;f=f||new Uint8Array,m=m||new Uint8Array,g=g||new Uint8Array,A=A||new Uint8Array,_=_||new Uint8Array;const b=Wd(f,m,g,A,_),x=p&&c>al,T=p&&u>al,{headerArray:S,headerView:C}=jd({version:t,bitFlag:$d(y,v,w,l,i),compressionMethod:i,uncompressedSize:c,compressedSize:u,lastModDate:n,rawFilename:s,zip64CompressedSize:T,zip64UncompressedSize:x,extraFieldLength:b});return Object.assign(e,{zip64UncompressedSize:x,zip64CompressedSize:T,zip64Offset:p&&this.offset-d>al,zip64DiskNumberStart:p&&h>ll,rawExtraFieldZip64:f,rawExtraFieldAES:m,rawExtraFieldExtendedTimestamp:g,rawExtraFieldNTFS:A,rawExtraField:_,extendedTimestamp:g.length>0||A.length>0,extraFieldExtendedTimestampFlag:1+(r?2:0)+(o?4:0),headerArray:S,headerView:C}),[e.filename,e]}))}async add(e="",t,i={}){const n=this,{pendingAddFileCalls:r,config:o}=n;let s;Rd<o.maxWorkers?Rd++:await new Promise(e=>Id.push(e));try{if(e=e.trim(),n.filenames.has(e))throw new Error("File already exists");return n.filenames.add(e),s=async function(e,t,i,n){t=t.trim();const r=Nd(e,n,Uu),o=Nd(e,n,qu,r?20:768),s=Nd(e,n,ju);if(o>ll)throw new Error(Pd);let a=Nd(e,n,Vu,0);0===a&&(a=Nd(e,n,Nu,0)),!n[Wu]&&t.endsWith(yl)&&(n[Wu]=!0);Nd(e,n,Wu)?(t.endsWith(yl)||(t+=yl),0===a&&(a=16,r||(a|=16877<<16))):r||0!==a||(a=s?493<<16:27525120);const l=Nd(e,n,"encodeText",Fl);let c=l(t);if(c===xl&&(c=Fl(t)),Wd(c)>ll)throw new Error("File entry name exceeds 64KB");const u=n[Cu]||"";let d=l(u);if(d===xl&&(d=Fl(u)),Wd(d)>ll)throw new Error("File entry comment exceeds 64KB");const h=Nd(e,n,Ku,20);if(h>ll)throw new Error(Pd);const p=Nd(e,n,Ru,new Date),f=Nd(e,n,Du),m=Nd(e,n,Bu);let g=Nd(e,n,Fu,0);0===g&&(g=Nd(e,n,Lu,0));const A=Nd(e,n,td);let _,y;A||(_=Nd(e,n,Qu),y=Nd(e,n,ed));const v=Nd(e,n,"encryptionStrength",3),w=Nd(e,n,Hu),b=Nd(e,n,"extendedTimestamp",!0),x=Nd(e,n,"keepOrder",!0),T=Nd(e,n,"level"),S=Nd(e,n,nd),C=Nd(e,n,"bufferedWrite"),M=Nd(e,n,"dataDescriptorSignature",!1),E=Nd(e,n,id),P=Nd(e,n,"useUnicodeFileNames",!0),k=Nd(e,n,rd),O=Nd(e,n,$u);let R=Nd(e,n,"dataDescriptor");C&&R===xl&&(R=!1),(R===xl||w)&&(R=!0);let I=Nd(e,n,zu);if(!(w||_===xl&&y===xl||v>=1&&v<=3))throw new Error("The strength must equal 1, 2, or 3");let D=new Uint8Array;const B=n[Yu];if(B){let e=0,t=0;B.forEach(t=>e+=4+Wd(t)),D=new Uint8Array(e),B.forEach((e,i)=>{if(i>ll)throw new Error("Extra field type exceeds 65535");if(Wd(e)>ll)throw new Error("Extra field data exceeds 64KB");qd(D,new Uint16Array([i]),t),qd(D,new Uint16Array([Wd(e)]),t+2),qd(D,e,t+4),t+=4+Wd(e)})}let L=0,F=0,N=0;if(A&&(N=n[Eu],N===xl))throw new Error("Undefined uncompressed size");const V=!0===I;i&&(i=new Au(i),await yu(i),A?(n.uncompressedSize=N,L=Vd(N)):i.size===xl?(R=!0,(I||I===xl)&&(I=!0,N=L=4294967296)):(n.uncompressedSize=N=i.size,L=Vd(N)));const{diskOffset:U,diskNumber:z,maxSize:G}=e.writer,K=V||N>al,q=V||L>al,H=V||e.offset+e.pendingEntriesSize-U>al,W=Nd(e,n,sd,!0)&&V||z+Math.ceil(e.pendingEntriesSize/G)>ll;if(H||K||q||W){if(!1===I||!x)throw new Error(kd);I=!0}I=I||!1;const j=Nd(e,n,Gu),$=function(e){const{rawFilename:t,lastModDate:i,lastAccessDate:n,creationDate:r,level:o,zip64:s,zipCrypto:a,useUnicodeFileNames:l,dataDescriptor:c,directory:u,rawExtraField:d,encryptionStrength:h,extendedTimestamp:p,passThrough:f,encrypted:m,zip64UncompressedSize:g,zip64CompressedSize:A,zip64Offset:_,zip64DiskNumberStart:y,uncompressedSize:v,offset:w,diskNumberStart:b}=e;let{version:x,compressionMethod:T}=e;const S=!u&&(o>0||o===xl&&0!==T);let C;const M=f||!S,E=s&&(e.bufferedWrite||!g&&!A||M);if(s){let e=4;g&&(e+=8),A&&(e+=8),_&&(e+=8),y&&(e+=4),C=new Uint8Array(e);const t=Hd(C);if(zd(t,0,1),zd(t,2,Wd(C)-4),E){const e=Hd(C);let t=4;g&&(Kd(e,t,BigInt(v)),t+=8),A&&M&&(Kd(e,t,BigInt(v)),t+=8),_&&(Kd(e,t,BigInt(w)),t+=8),y&&(Gd(e,t,b),t+=4)}}else C=new Uint8Array;let P,k,O,R;if(m&&!a){P=new Uint8Array(Wd(Od)+2);const e=Hd(P);zd(e,0,39169),qd(P,Od,2),Ud(e,8,h)}else P=new Uint8Array;if(p){O=new Uint8Array(9+(n?4:0)+(r?4:0));const e=Hd(O);zd(e,0,Al),zd(e,2,Wd(O)-4),R=1+(n?2:0)+(r?4:0),Ud(e,4,R);let t=5;Gd(e,t,Math.floor(i.getTime()/1e3)),t+=4,n&&(Gd(e,t,Math.floor(n.getTime()/1e3)),t+=4),r&&Gd(e,t,Math.floor(r.getTime()/1e3));try{k=new Uint8Array(36);const e=Hd(k),t=Fd(i);zd(e,0,10),zd(e,2,32),zd(e,8,1),zd(e,10,24),Kd(e,12,t),Kd(e,20,Fd(n)||t),Kd(e,28,Fd(r)||t)}catch(e){k=new Uint8Array}}else k=O=new Uint8Array;T===xl&&(T=S?8:0),s&&(x=x>45?x:45),m&&!a&&(x=x>51?x:51,P[9]=T,T=99);const I=E?Wd(C):0,D=I+Wd(P,O,k,d),{headerArray:B,headerView:L,rawLastModDate:F}=jd({version:x,bitFlag:$d(o,l,c,m,T),compressionMethod:T,uncompressedSize:v,lastModDate:i<bl?bl:i>wl?wl:i,rawFilename:t,zip64CompressedSize:A,zip64UncompressedSize:g,extraFieldLength:D});let N=vl;const V=new Uint8Array(N+Wd(t)+D),U=Hd(V);return Gd(U,0,cl),qd(V,B,4),qd(V,t,N),N+=Wd(t),E&&qd(V,C,N),N+=I,qd(V,P,N),N+=Wd(P),qd(V,O,N),N+=Wd(O),qd(V,k,N),N+=Wd(k),qd(V,d,N),c&&(Gd(U,18,0),Gd(U,22,0)),{localHeaderArray:V,localHeaderView:U,headerArray:B,headerView:L,lastModDate:i,rawLastModDate:F,encrypted:m,compressed:S,version:x,compressionMethod:T,extraFieldExtendedTimestampFlag:R,rawExtraFieldZip64:C,localExtraFieldZip64Length:I,rawExtraFieldExtendedTimestamp:O,rawExtraFieldNTFS:k,rawExtraFieldAES:P,extraFieldLength:D}}(n=Object.assign({},n,{rawFilename:c,rawComment:d,version:h,versionMadeBy:o,lastModDate:p,lastAccessDate:f,creationDate:m,rawExtraField:D,zip64:I,zip64UncompressedSize:K,zip64CompressedSize:q,zip64Offset:H,zip64DiskNumberStart:W,password:_,rawPassword:y,level:k||e.config.CompressionStream!==xl||e.config.CompressionStreamNative!==xl?T:0,useWebWorkers:S,encryptionStrength:v,extendedTimestamp:b,zipCrypto:w,bufferedWrite:C,keepOrder:x,useUnicodeFileNames:P,dataDescriptor:R,dataDescriptorSignature:M,signal:E,msDosCompatible:r,internalFileAttribute:g,internalFileAttributes:g,externalFileAttribute:a,externalFileAttributes:a,useCompressionStream:k,passThrough:A,encrypted:Boolean(_&&Wd(_)||y&&Wd(y))||A&&j,signature:n[Xu],compressionMethod:O,uncompressedSize:N,offset:e.offset-U,diskNumberStart:z})),X=function({zip64:e,dataDescriptor:t,dataDescriptorSignature:i}){let n,r=new Uint8Array,o=0,s=e?20:12;return i&&(s+=4),t&&(r=new Uint8Array(s),n=Hd(r),i&&(o=4,Gd(n,0,dl))),{dataDescriptorArray:r,dataDescriptorView:n,dataDescriptorOffset:o}}(n),Y=Wd($.localHeaderArray,X.dataDescriptorArray);let Z;F=Y+L,e.options[ld]&&(F+=F+64),e.pendingEntriesSize+=F;try{Z=await async function(e,t,i,n,r){const{files:o,writer:s}=e,{keepOrder:a,dataDescriptor:l,signal:c}=r,{headerInfo:u}=n,d=e.options[ld],h=Array.from(o.values()).pop();let p,f,m,g,A,_,y,v={};o.set(t,v);try{let f;a&&(f=h&&h.lock,v.lock=new Promise(e=>m=e)),!(r.bufferedWrite||e.writerLocked||e.bufferedWrites&&a)&&l||d?(_=s,await w()):(_=new TransformStream,_.size=0,p=!0,e.bufferedWrites++,await yu(s)),await yu(_);const{writable:x,diskOffset:T}=s;if(e.addSplitZipSignature){delete e.addSplitZipSignature;const t=new Uint8Array(4);Gd(Hd(t),0,ul),await Ld(s,t),e.offset+=4}d&&function(e,t){const{headerInfo:i}=e;let{localHeaderArray:n,extraFieldLength:r}=i,o=Hd(n),s=64-(t+Wd(n))%64;s<4&&(s+=64);const a=new Uint8Array(s),l=Hd(a);zd(l,0,6534),zd(l,2,s-2);const c=n;i.localHeaderArray=n=new Uint8Array(Wd(c)+s),qd(n,c),qd(n,a,Wd(c)),o=Hd(n),zd(o,28,r+s),e.metadataSize+=s}(n,e.offset-T);const{localHeaderView:S,localHeaderArray:C}=u;p||(await f,await b(x));const{diskNumber:M}=s;A=!0,v.diskNumberStart=M,p?y=new Response(_.readable).blob():await Ld(_,C),v=await async function(e,t,{diskNumberStart:i,lock:n},r,o,s){const{headerInfo:a,dataDescriptorInfo:l,metadataSize:c}=r,{headerArray:u,headerView:d,lastModDate:h,rawLastModDate:p,encrypted:f,compressed:m,version:g,compressionMethod:A,rawExtraFieldZip64:_,localExtraFieldZip64Length:y,rawExtraFieldExtendedTimestamp:v,extraFieldExtendedTimestampFlag:w,rawExtraFieldNTFS:b,rawExtraFieldAES:x}=a,{dataDescriptorArray:T}=l,{rawFilename:S,lastAccessDate:C,creationDate:M,password:E,rawPassword:P,level:k,zip64:O,zip64UncompressedSize:R,zip64CompressedSize:I,zip64Offset:D,zip64DiskNumberStart:B,zipCrypto:L,dataDescriptor:F,directory:N,executable:V,versionMadeBy:U,rawComment:z,rawExtraField:G,useWebWorkers:K,onstart:q,onprogress:H,onend:W,signal:j,encryptionStrength:$,extendedTimestamp:X,msDosCompatible:Y,internalFileAttributes:Z,externalFileAttributes:J,useCompressionStream:Q,passThrough:ee}=s,te={lock:n,versionMadeBy:U,zip64:O,directory:Boolean(N),executable:Boolean(V),filenameUTF8:!0,rawFilename:S,commentUTF8:!0,rawComment:z,rawExtraFieldZip64:_,localExtraFieldZip64Length:y,rawExtraFieldExtendedTimestamp:v,rawExtraFieldNTFS:b,rawExtraFieldAES:x,rawExtraField:G,extendedTimestamp:X,msDosCompatible:Y,internalFileAttributes:Z,externalFileAttributes:J,diskNumberStart:i};let{signature:ie,uncompressedSize:ne}=s,re=0;ee||(ne=0);const{writable:oe}=t;if(e){e.chunkSize=Ol(o);const i=e.readable,n=e.size,r={options:{codecType:zc,level:k,rawPassword:P,password:E,encryptionStrength:$,zipCrypto:f&&L,passwordVerification:f&&L&&p>>8&255,signed:!ee,compressed:m&&!ee,encrypted:f&&!ee,useWebWorkers:K,useCompressionStream:Q,transferStreams:!1},config:o,streamOptions:{signal:j,size:n,onstart:q,onprogress:H,onend:W}};try{const e=await nu({readable:i,writable:oe},r);re=e.outputSize,t.size+=re,ee||(ne=e.inputSize,ie=e.signature)}catch(e){throw e.outputSize!==xl&&(t.size+=e.outputSize),e}}return function({signature:e,compressedSize:t,uncompressedSize:i,headerInfo:n,dataDescriptorInfo:r},{zip64:o,zipCrypto:s,dataDescriptor:a}){const{headerView:l,encrypted:c}=n,{dataDescriptorView:u,dataDescriptorOffset:d}=r;c&&!s||e===xl||(Gd(l,10,e),a&&Gd(u,d,e)),o?a&&(Kd(u,d+4,BigInt(t)),Kd(u,d+12,BigInt(i))):(Gd(l,14,t),Gd(l,18,i),a&&(Gd(u,d+4,t),Gd(u,d+8,i)))}({signature:ie,compressedSize:re,uncompressedSize:ne,headerInfo:a,dataDescriptorInfo:l},s),F&&await Ld(t,T),Object.assign(te,{uncompressedSize:ne,compressedSize:re,lastModDate:h,rawLastModDate:p,creationDate:M,lastAccessDate:C,encrypted:f,zipCrypto:L,size:c+re,compressionMethod:A,version:g,headerArray:u,headerView:d,signature:ie,extraFieldExtendedTimestampFlag:w,zip64UncompressedSize:R,zip64CompressedSize:I,zip64Offset:D,zip64DiskNumberStart:B}),te}(i,_,v,n,e.config,r);const{zip64:E}=v;if(A=!1,o.set(t,v),v.filename=t,p){const[t]=await Promise.all([y,_.writable.getWriter().close(),f]);await w(),g=!0,v.diskNumberStart=s.diskNumber,v.offset=e.offset-s.diskOffset,E&&Bd(v),function({rawFilename:e,encrypted:t,zip64:i,localExtraFieldZip64Length:n,signature:r,compressedSize:o,uncompressedSize:s,offset:a,diskNumberStart:l,zip64UncompressedSize:c,zip64CompressedSize:u,zip64Offset:d,zip64DiskNumberStart:h},p,{dataDescriptor:f}){if(f||(t||Gd(p,14,r),i||(Gd(p,18,o),Gd(p,22,s))),i&&n){let t=vl+Wd(e)+4;c&&(Kd(p,t,BigInt(s)),t+=8),u&&(Kd(p,t,BigInt(o)),t+=8),d&&(Kd(p,t,BigInt(a)),t+=8),h&&Gd(p,t,l)}}(v,S,r),await b(x),await Ld(s,C),await t.stream().pipeTo(x,{preventClose:!0,preventAbort:!0,signal:c}),s.size+=_.size,g=!1}else v.offset=e.offset-T,E&&Bd(v);if(v.offset>al&&!E)throw new Error(kd);return e.offset+=v.size,v}catch(i){if(p&&g||!p&&A){if(e.hasCorruptedEntries=!0,i)try{i.corruptedEntry=!0}catch(e){}p?e.offset+=_.size:e.offset=_.size}throw o.delete(t),i}finally{p&&e.bufferedWrites--,m&&m(),f&&f()}async function w(){e.writerLocked=!0;const{lockWriter:t}=e;e.lockWriter=new Promise(t=>f=()=>{e.writerLocked=!1,t()}),await t}async function b(e){Wd(u.localHeaderArray)>s.availableSize&&(s.availableSize=0,await Ld(e,new Uint8Array))}}(e,t,i,{headerInfo:$,dataDescriptorInfo:X,metadataSize:Y},n)}finally{e.pendingEntriesSize-=F}return Object.assign(Z,{name:t,comment:u,extraField:B}),new Ju(Z)}(n,e,t,i),r.add(s),await s}catch(t){throw n.filenames.delete(e),t}finally{r.delete(s);const e=Id.shift();e?e():Rd--}}remove(e){const{filenames:t,files:i}=this;if("string"==typeof e&&(e=i.get(e)),e&&e.filename!==xl){const{filename:n}=e;if(t.has(n)&&i.has(n))return t.delete(n),i.delete(n),!0}return!1}async close(e=new Uint8Array,t={}){const{pendingAddFileCalls:i,writer:n}=this,{writable:r}=n;for(;i.size;)await Promise.allSettled(Array.from(i));return await async function(e,t,i){const{files:n,writer:r}=e,{diskOffset:o}=r;let{diskNumber:s}=r,a=0,l=0,c=e.offset-o,u=n.size;for(const[,e]of n){const{rawFilename:t,rawExtraFieldZip64:i,rawExtraFieldAES:n,rawComment:r,rawExtraFieldNTFS:o,rawExtraField:s,extendedTimestamp:a,extraFieldExtendedTimestampFlag:c,lastModDate:u}=e;let d;if(a){d=new Uint8Array(9);const e=Hd(d);zd(e,0,Al),zd(e,2,5),Ud(e,4,c),Gd(e,5,Math.floor(u.getTime()/1e3))}else d=new Uint8Array;e.rawExtraFieldExtendedTimestamp=d,l+=46+Wd(t,r,i,n,o,d,s)}const d=new Uint8Array(l),h=Hd(d);await yu(r);let p=0;for(const[e,t]of Array.from(n.values()).entries()){const{offset:o,rawFilename:s,rawExtraFieldZip64:l,rawExtraFieldAES:c,rawExtraFieldExtendedTimestamp:u,rawExtraFieldNTFS:f,rawExtraField:m,rawComment:g,versionMadeBy:A,headerArray:_,headerView:y,zip64:v,zip64UncompressedSize:w,zip64CompressedSize:b,zip64DiskNumberStart:x,zip64Offset:T,internalFileAttributes:S,externalFileAttributes:C,diskNumberStart:M,uncompressedSize:E,compressedSize:P}=t,k=Wd(l,c,u,f,m);Gd(h,a,hl),zd(h,a+4,A),w||Gd(y,18,E),b||Gd(y,14,P),qd(d,_,a+6);let O=a+vl;if(zd(h,O,k),O+=2,zd(h,O,Wd(g)),O+=2,zd(h,O,v&&x?ll:M),O+=2,zd(h,O,S),O+=2,C&&Gd(h,O,C),O+=4,Gd(h,O,v&&T?al:o),O+=4,qd(d,s,O),O+=Wd(s),qd(d,l,O),O+=Wd(l),qd(d,c,O),O+=Wd(c),qd(d,u,O),O+=Wd(u),qd(d,f,O),O+=Wd(f),qd(d,m,O),O+=Wd(m),qd(d,g,O),a-p>r.availableSize&&(r.availableSize=0,await Ld(r,d.slice(p,a)),p=a),a=O,i.onprogress)try{await i.onprogress(e+1,n.size,new Ju(t))}catch(e){}}await Ld(r,p?d.slice(p):d);let f=r.diskNumber;const{availableSize:m}=r;m<gl&&f++;let g=Nd(e,i,zu);if(c>al||l>al||u>ll||f>ll){if(!1===g)throw new Error(kd);g=!0}const A=new Uint8Array(g?98:gl),_=Hd(A);a=0,g&&(Gd(_,0,fl),Kd(_,4,BigInt(44)),zd(_,12,45),zd(_,14,45),Gd(_,16,f),Gd(_,20,s),Kd(_,24,BigInt(u)),Kd(_,32,BigInt(u)),Kd(_,40,BigInt(l)),Kd(_,48,BigInt(c)),Gd(_,56,ml),Kd(_,64,BigInt(c)+BigInt(l)),Gd(_,72,f+1),Nd(e,i,sd,!0)&&(f=ll,s=ll),u=ll,c=al,l=al,a+=76),Gd(_,a,pl),zd(_,a+4,f),zd(_,a+6,s),zd(_,a+8,u),zd(_,a+10,u),Gd(_,a+12,l),Gd(_,a+16,c);const y=Wd(t);if(y){if(!(y<=ll))throw new Error("Zip file comment exceeds 64KB");zd(_,a+20,y)}await Ld(r,A),y&&await Ld(r,t)}(this,e,t),Nd(this,t,od)||await r.getWriter().close(),n.getData?n.getData():r}}function Bd({compressedSize:e,uncompressedSize:t,offset:i,diskNumberStart:n,zip64UncompressedSize:r,zip64CompressedSize:o,zip64Offset:s,zip64DiskNumberStart:a,rawExtraFieldZip64:l}){const c=Hd(l);let u=4;r&&(Kd(c,u,BigInt(t)),u+=8),o&&(Kd(c,u,BigInt(e)),u+=8),s&&(Kd(c,u,BigInt(i)),u+=8),a&&Gd(c,u,n)}async function Ld(e,t){const{writable:i}=e,n=i.getWriter();try{await n.ready,e.size+=Wd(t),await n.write(t)}finally{n.releaseLock()}}function Fd(e){if(e)return(BigInt(e.getTime())+BigInt(116444736e5))*BigInt(1e4)}function Nd(e,t,i,n){const r=t[i]===xl?e.options[i]:t[i];return r===xl?n:r}function Vd(e){return e+5*(Math.floor(e/16383)+1)}function Ud(e,t,i){e.setUint8(t,i)}function zd(e,t,i){e.setUint16(t,i,!0)}function Gd(e,t,i){e.setUint32(t,i,!0)}function Kd(e,t,i){e.setBigUint64(t,i,!0)}function qd(e,t,i){e.set(t,i)}function Hd(e){return new DataView(e.buffer)}function Wd(...e){let t=0;return e.forEach(e=>e&&(t+=e.length)),t}function jd({version:e,bitFlag:t,compressionMethod:i,uncompressedSize:n,compressedSize:r,lastModDate:o,rawFilename:s,zip64CompressedSize:a,zip64UncompressedSize:l,extraFieldLength:c}){const u=new Uint8Array(26),d=Hd(u);zd(d,0,e),zd(d,2,t),zd(d,4,i);const h=new Uint32Array(1),p=Hd(h);zd(p,0,(o.getHours()<<6|o.getMinutes())<<5|o.getSeconds()/2),zd(p,2,(o.getFullYear()-1980<<4|o.getMonth()+1)<<5|o.getDate());const f=h[0];return Gd(d,6,f),(a||r!==xl)&&Gd(d,14,a?al:r),(l||n!==xl)&&Gd(d,18,l?al:n),zd(d,22,Wd(s)),zd(d,24,c),{headerArray:u,headerView:d,rawLastModDate:f}}function $d(e,t,i,n,r){let o=0;return t&&(o|=_l),i&&(o|=8),8!=r&&9!=r||(e>=0&&e<=3&&(o|=6),e>3&&e<=5&&(o|=4),9==e&&(o|=2)),n&&(o|=1),o}Rl({Deflate:function(e){const t=new Ga,i=(n=e&&e.chunkSize?e.chunkSize:65536)+5*(Math.floor(n/16383)+1);var n;const r=new Uint8Array(i);let o=e?e.level:-1;void 0===o&&(o=-1),t.deflateInit(o),t.next_out=r,this.append=function(e,n){let o,s,a=0,l=0,c=0;const u=[];if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=i,o=t.deflate(0),0!=o)throw new Error("deflating: "+t.msg);t.next_out_index&&(t.next_out_index==i?u.push(new Uint8Array(r)):u.push(r.subarray(0,t.next_out_index))),c+=t.next_out_index,n&&t.next_in_index>0&&t.next_in_index!=a&&(n(t.next_in_index),a=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return u.length>1?(s=new Uint8Array(c),u.forEach(function(e){s.set(e,l),l+=e.length})):s=u[0]?new Uint8Array(u[0]):new Uint8Array,s}},this.flush=function(){let e,n,o=0,s=0;const a=[];do{if(t.next_out_index=0,t.avail_out=i,e=t.deflate(4),1!=e&&0!=e)throw new Error("deflating: "+t.msg);i-t.avail_out>0&&a.push(r.slice(0,t.next_out_index)),s+=t.next_out_index}while(t.avail_in>0||0===t.avail_out);return t.deflateEnd(),n=new Uint8Array(s),a.forEach(function(e){n.set(e,o),o+=e.length}),n}},Inflate:function(e){const t=new sl,i=e&&e.chunkSize?Math.floor(2*e.chunkSize):131072,n=new Uint8Array(i);let r=!1;t.inflateInit(),t.next_out=n,this.append=function(e,o){const s=[];let a,l,c=0,u=0,d=0;if(0!==e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=i,0!==t.avail_in||r||(t.next_in_index=0,r=!0),a=t.inflate(0),r&&a===Ha){if(0!==t.avail_in)throw new Error("inflating: bad input")}else if(0!==a&&1!==a)throw new Error("inflating: "+t.msg);if((r||1===a)&&t.avail_in===e.length)throw new Error("inflating: bad input");t.next_out_index&&(t.next_out_index===i?s.push(new Uint8Array(n)):s.push(n.subarray(0,t.next_out_index))),d+=t.next_out_index,o&&t.next_in_index>0&&t.next_in_index!=c&&(o(t.next_in_index),c=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return s.length>1?(l=new Uint8Array(d),s.forEach(function(e){l.set(e,u),u+=e.length})):l=s[0]?new Uint8Array(s[0]):new Uint8Array,l}},this.flush=function(){t.inflateEnd()}}});var Xd=i(116112);const Yd=function(e,t){this.position=e,this.headingPitchRange=t};function Zd(e,t){this.id=t,this.name=e,this.playlistIndex=0,this.playlist=[],this.tourStart=new ge.A,this.tourEnd=new ge.A,this.entryStart=new ge.A,this.entryEnd=new ge.A,this._activeEntries=[]}function Jd(e){for(let t=e.pop();void 0!==t;t=e.pop())t.stop()}function Qd(e,t,i){const n=this.playlist[this.playlistIndex];if(n){const r=eh.bind(this,e,t,i);if(this._activeEntries.push(n),this.entryStart.raiseEvent(n),n.blocking)n.play(r,e.scene.camera,t);else{const o=this;n.play(function(){o.entryEnd.raiseEvent(n);const e=o._activeEntries.indexOf(n);e>=0&&o._activeEntries.splice(e,1)}),r(e,t,i)}}else(0,N.A)(i)&&i(!1)}function eh(e,t,i,n){const r=this.playlist[this.playlistIndex];if(this.entryEnd.raiseEvent(r,n),n)i(n);else{const n=this._activeEntries.indexOf(r);n>=0&&this._activeEntries.splice(n,1),this.playlistIndex++,Qd.call(this,e,t,i)}}Zd.prototype.addPlaylistEntry=function(e){this.playlist.push(e)},Zd.prototype.play=function(e,t){this.tourStart.raiseEvent();const i=this;Qd.call(this,e,t,function(e){i.playlistIndex=0,e||Jd(i._activeEntries),i.tourEnd.raiseEvent(e)})},Zd.prototype.stop=function(){Jd(this._activeEntries)};const th=Zd;var ih=i(660662),nh=i(430346),rh=i(924290);function oh(e,t,i){this.type="KmlTourFlyTo",this.blocking=!0,this.activeCamera=null,this.activeCallback=null,this.duration=e,this.view=i,this.flyToMode=t}oh.prototype.play=function(e,t,i){if(this.activeCamera=t,(0,N.A)(e)&&null!==e){const t=this;this.activeCallback=function(i){delete t.activeCallback,delete t.activeCamera,e(!(0,N.A)(i)&&i)}}const n=this.getCameraOptions(i);if(this.view.headingPitchRoll)t.flyTo(n);else if(this.view.headingPitchRange){const e=new ih.A(this.view.position);t.flyToBoundingSphere(e,n)}},oh.prototype.stop=function(){(0,N.A)(this.activeCamera)&&this.activeCamera.cancelFlight(),(0,N.A)(this.activeCallback)&&this.activeCallback(!0)},oh.prototype.getCameraOptions=function(e){let t={duration:this.duration};return(0,N.A)(this.activeCallback)&&(t.complete=this.activeCallback),"smooth"===this.flyToMode&&(t.easingFunction=rh.A.LINEAR_NONE),this.view.headingPitchRoll?(t.destination=this.view.position,t.orientation=this.view.headingPitchRoll):this.view.headingPitchRange&&(t.offset=this.view.headingPitchRange),(0,N.A)(e)&&(t=(0,nh.A)(t,e)),t};const sh=oh;function ah(e){this.type="KmlTourWait",this.blocking=!0,this.duration=e,this.timeout=null}ah.prototype.play=function(e){const t=this;this.activeCallback=e,this.timeout=setTimeout(function(){delete t.activeCallback,e(!1)},1e3*this.duration)},ah.prototype.stop=function(){clearTimeout(this.timeout),(0,N.A)(this.activeCallback)&&this.activeCallback(!0)};const lh=ah;var ch=i(347768);const uh={avi:"video/x-msvideo",bmp:"image/bmp",bz2:"application/x-bzip2",chm:"application/vnd.ms-htmlhelp",css:"text/css",csv:"text/csv",doc:"application/msword",dvi:"application/x-dvi",eps:"application/postscript",flv:"video/x-flv",gif:"image/gif",gz:"application/x-gzip",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",jnlp:"application/x-java-jnlp-file",jpeg:"image/jpeg",jpg:"image/jpeg",m3u:"audio/x-mpegurl",m4v:"video/mp4",mathml:"application/mathml+xml",mid:"audio/midi",midi:"audio/midi",mov:"video/quicktime",mp3:"audio/mpeg",mp4:"video/mp4",mp4v:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",ogg:"application/ogg",pdf:"application/pdf",png:"image/png",pps:"application/vnd.ms-powerpoint",ppt:"application/vnd.ms-powerpoint",ps:"application/postscript",qt:"video/quicktime",rdf:"application/rdf+xml",rss:"application/rss+xml",rtf:"application/rtf",svg:"image/svg+xml",swf:"application/x-shockwave-flash",text:"text/plain",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/x-wav",wma:"audio/x-ms-wma",wmv:"video/x-ms-wmv",xml:"application/xml",zip:"application/zip",detectFromFilename:function(e){let t=e.toLowerCase();return t=(0,_a.A)(t),uh[t]}};let dh;"undefined"!=typeof DOMParser&&(dh=new DOMParser);const hh=new Ls({stripPrefix:!1,email:!1,replaceFn:function(e){return"scheme"===e.urlMatchType||"www"===e.urlMatchType}}),ph=32,fh=2414016,mh=16093e3,gh=[null,void 0,"http://www.opengis.net/kml/2.2","http://earth.google.com/kml/2.2","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.0"],Ah=["http://www.google.com/kml/ext/2.2"],_h={kml:gh,gx:Ah,atom:["http://www.w3.org/2005/Atom"],kmlgx:gh.concat(Ah)},yh={Document:sp,Folder:function(e,t,i,n){const r=op(e,t,i),o=(0,ga.A)(i);o.parentEntity=r.entity,sp(0,t,o,n)},Placemark:function(e,t,i,n){const r=op(e,t,i),o=r.entity,s=r.styleEntity;let a=!1;const l=t.childNodes;for(let t=0,n=l.length;t<n&&!a;t++){const n=l.item(t),r=np[n.localName];(0,N.A)(r)&&(r(e,i.entityCollection,n,o,s,o.id),a=!0)}a||(o.merge(s),Qh(e,o,s))},NetworkLink:function(e,t,i,n){const r=op(e,t,i).entity,o=i.sourceResource,s=i.uriResolver;let a=Rh(t,"Link",_h.kml);if((0,N.A)(a)||(a=Rh(t,"Url",_h.kml)),(0,N.A)(a)){let t,l,c=Lh(a,"href",_h.kml);if((0,N.A)(c)){let u=c;if(c=Nh(c,o,i.uriResolver),/^data:/.test(c.getUrlComponent()))/\.kmz/i.test(o.getUrlComponent())||(u=o.getDerivedResource({url:u}));else{if(u=c.clone(),t=Lh(a,"viewRefreshMode",_h.kml),"onRegion"===t)return void(0,xa.A)("kml-refrehMode-onRegion","KML - Unsupported viewRefreshMode: onRegion");l=Lh(a,"viewBoundScale",_h.kml)??1;const i="onStop"===t?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",n=Lh(a,"viewFormat",_h.kml)??i,r=Lh(a,"httpQuery",_h.kml);(0,N.A)(n)&&c.setQueryParameters((0,Ta.A)(pp(n))),(0,N.A)(r)&&c.setQueryParameters((0,Ta.A)(pp(r)));const o=e._ellipsoid;_p(c,e.camera,e.canvas,l,e._lastCameraView.bbox,o)}const d={sourceUri:u,uriResolver:s,context:r.id,screenOverlayContainer:i.screenOverlayContainer},h=new Pe.A,p=vp(e,h,c,d).then(function(i){const n=e._entityCollection,o=h.values;n.suspendEvents();for(let e=0;e<o.length;e++){const t=o[e];(0,N.A)(t.parent)||(t.parent=r,bp(t)),n.add(t)}n.resumeEvents();const s=Lh(a,"refreshMode",_h.kml);let u=Bh(a,"refreshInterval",_h.kml)??0;if("onInterval"===s&&u>0||"onExpire"===s||"onStop"===t){const t=Rh(i,"NetworkLinkControl",_h.kml),n=(0,N.A)(t),o=Ae.A.now(),d={id:(0,L.A)(),href:c,cookie:{},lastUpdated:o,updating:!1,entity:r,viewBoundScale:l,needsUpdate:!1,cameraUpdateTime:o};let h=0;if(n&&(d.cookie=(0,Ta.A)(Lh(t,"cookie",_h.kml)??""),h=Bh(t,"minRefreshPeriod",_h.kml)??0),"onInterval"===s)n&&(u=Math.max(h,u)),d.refreshMode=hp.INTERVAL,d.time=u;else if("onExpire"===s){let e;if(n&&(e=Lh(t,"expires",_h.kml)),(0,N.A)(e))try{const t=Ae.A.fromIso8601(e),i=Ae.A.secondsDifference(t,o);i>0&&i<h&&Ae.A.addSeconds(o,h,t),d.refreshMode=hp.EXPIRE,d.time=t}catch(e){(0,xa.A)("kml-refreshMode-onInterval-onExpire","KML - NetworkLinkControl expires is not a valid date")}else(0,xa.A)("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element")}else(0,N.A)(e.camera)?(d.refreshMode=hp.STOP,d.time=Bh(a,"viewRefreshTime",_h.kml)??0):(0,xa.A)("kml-refrehMode-onStop-noCamera","A NetworkLink with viewRefreshMode=onStop requires the `camera` property to be defined.");(0,N.A)(d.refreshMode)&&e._networkLinks.set(d.id,d)}}).catch(function(t){(0,xa.A)(`An error occured during loading ${c.url}`),e._error.raiseEvent(e,t)});n.addPromise(p)}}},GroundOverlay:function(e,t,i,n){const r=op(e,t,i).entity;let o,s=!1;const a=e._ellipsoid,l=Ph(Rh(t,"LatLonQuad",_h.gx),a),c=Bh(t,"drawOrder",_h.kml);if((0,N.A)(l))o=Kh(),o.hierarchy=new _t.A(l),o.zIndex=c,r.polygon=o,s=!0;else{o=new Mi.A,o.zIndex=c,r.rectangle=o;const e=Rh(t,"LatLonBox",_h.kml);if((0,N.A)(e)){let t=Bh(e,"west",_h.kml),i=Bh(e,"south",_h.kml),n=Bh(e,"east",_h.kml),r=Bh(e,"north",_h.kml);(0,N.A)(t)&&(t=Me.A.negativePiToPi(Me.A.toRadians(t))),(0,N.A)(i)&&(i=Me.A.clampToLatitudeRange(Me.A.toRadians(i))),(0,N.A)(n)&&(n=Me.A.negativePiToPi(Me.A.toRadians(n))),(0,N.A)(r)&&(r=Me.A.clampToLatitudeRange(Me.A.toRadians(r))),o.coordinates=new vt.A(t,i,n,r);const s=Bh(e,"rotation",_h.kml);if((0,N.A)(s)){const e=Me.A.toRadians(s);o.rotation=e,o.stRotation=e}}}const u=Rh(t,"Icon",_h.kml),d=Hh(u,e,i.sourceResource,i.uriResolver,!0);if((0,N.A)(d)){s&&(0,xa.A)("kml-gx:LatLonQuad","KML - gx:LatLonQuad Icon does not support texture projection.");const e=Bh(u,"x",_h.gx),i=Bh(u,"y",_h.gx),n=Bh(u,"w",_h.gx),r=Bh(u,"h",_h.gx);((0,N.A)(e)||(0,N.A)(i)||(0,N.A)(n)||(0,N.A)(r))&&(0,xa.A)("kml-groundOverlay-xywh","KML - gx:x, gx:y, gx:w, gx:h aren't supported for GroundOverlays"),o.material=d,o.material.color=zh(t,"color",_h.kml),o.material.transparent=!0}else o.material=zh(t,"color",_h.kml);let h=Lh(t,"altitudeMode",_h.kml);(0,N.A)(h)?"absolute"===h?(o.height=Bh(t,"altitude",_h.kml),o.zIndex=void 0):"clampToGround"!==h&&(0,xa.A)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${h}`):(h=Lh(t,"altitudeMode",_h.gx),"relativeToSeaFloor"===h?((0,xa.A)("kml-altitudeMode-relativeToSeaFloor","KML - altitudeMode relativeToSeaFloor is currently not supported, treating as absolute."),o.height=Bh(t,"altitude",_h.kml),o.zIndex=void 0):"clampToSeaFloor"===h?(0,xa.A)("kml-altitudeMode-clampToSeaFloor","KML - altitudeMode clampToSeaFloor is currently not supported, treating as clampToGround."):(0,N.A)(h)&&(0,xa.A)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${h}`))},PhotoOverlay:dp,ScreenOverlay:function(e,t,i,n){const r=i.screenOverlayContainer;if(!(0,N.A)(r))return;const o=i.sourceResource,s=i.uriResolver,a=Hh(Rh(t,"Icon",_h.kml),e,o,s,!1);if(!(0,N.A)(a))return;const l=document.createElement("img");e._screenOverlays.push(l),l.src=a.url,l.onload=function(){const e=["position: absolute"],i=Rh(t,"screenXY",_h.kml),n=Rh(t,"overlayXY",_h.kml),r=Rh(t,"size",_h.kml);let o,s,a,c,u,d;(0,N.A)(r)&&(o=kh(r,"x"),s=kh(r,"y"),a=Oh(r,"xunits"),c=Oh(r,"yunits"),(0,N.A)(o)&&-1!==o&&0!==o&&("fraction"===a?u=`width: ${Math.floor(100*o)}%`:"pixels"===a&&(u=`width: ${o}px`),e.push(u)),(0,N.A)(s)&&-1!==s&&0!==s&&("fraction"===c?d=`height: ${Math.floor(100*s)}%`:"pixels"===c&&(d=`height: ${s}px`),e.push(d))),l.style=e.join(";");let h=0,p=l.height;(0,N.A)(n)&&(o=kh(n,"x"),s=kh(n,"y"),a=Oh(n,"xunits"),c=Oh(n,"yunits"),(0,N.A)(o)&&("fraction"===a?h=o*l.width:("pixels"===a||"insetPixels"===a)&&(h=o)),(0,N.A)(s)&&("fraction"===c?p=s*l.height:("pixels"===c||"insetPixels"===c)&&(p=s))),(0,N.A)(i)&&(o=kh(i,"x"),s=kh(i,"y"),a=Oh(i,"xunits"),c=Oh(i,"yunits"),(0,N.A)(o)&&("fraction"===a?u=`left: calc(${Math.floor(100*o)}% - ${h}px)`:"pixels"===a?u=`left: ${o-h}px`:"insetPixels"===a&&(u=`right: ${o-h}px`),e.push(u)),(0,N.A)(s)&&("fraction"===c?d=`bottom: calc(${Math.floor(100*s)}% - ${p}px)`:"pixels"===c?d=`bottom: ${s-p}px`:"insetPixels"===c&&(d=`top: ${s-p}px`),e.push(d))),l.style=e.join(";")},r.appendChild(l)},Tour:function(e,t,i,n){const r=Lh(t,"name",_h.kml),o=Oh(t,"id"),s=new th(r,o),a=Rh(t,"Playlist",_h.gx);if(a){const t=e._ellipsoid,i=a.childNodes;for(let e=0;e<i.length;e++){const n=i[e];if(n.localName){const e=ap[n.localName];e?e(s,n,t):console.log(`Unknown KML Tour playlist entry type ${n.localName}`)}}}e._kmlTours.push(s)}};function vh(e){this._dataSource=e,this._deferred=(0,Aa.A)(),this._stack=[],this._promises=[],this._timeoutSet=!1,this._used=!1,this._started=0,this._timeThreshold=1e3}function wh(e){const t={xsi:"http://www.w3.org/2001/XMLSchema-instance"};let i,n,r,o;for(const s in t)t.hasOwnProperty(s)&&(r=RegExp(`[< ]${s}:`),o=`xmlns:${s}=`,r.test(e)&&-1===e.indexOf(o)&&((0,N.A)(i)||(i=e.substr(0,e.indexOf("<kml")+4),n=e.substr(i.length)),i+=` ${o}"${t[s]}"`));return(0,N.A)(i)&&(e=i+n),e}function bh(e){let t=e.indexOf("xmlns:");const i=e.indexOf(">",t);let n,r,o;for(;-1!==t&&t<i;)n=e.slice(t,e.indexOf('"',t)),r=t,t=e.indexOf(n,t+1),-1!==t?(o=e.indexOf('"',e.indexOf('"',t)+1),t=(e=e.slice(0,t-1)+e.slice(o+1,e.length)).indexOf("xmlns:",r-1)):t=e.indexOf("xmlns:",r+1);return e}function xh(e,t){const i=uh.detectFromFilename(e.filename)??"application/octet-stream";return Promise.resolve(e.getData(new uu(i))).then(function(i){t[e.filename]=i})}function Th(e,t,i,n){const r=n.keys,o=new Bt("."),s=e.querySelectorAll(t);for(let e=0;e<s.length;e++){const a=s[e],l=a.getAttribute(i);if((0,N.A)(l)){const e=new Bt(l).absoluteTo(o).toString(),s=r.indexOf(e);if(-1!==s){const e=r[s];a.setAttribute(i,n[e]),"a"===t&&null===a.getAttribute("download")&&a.setAttribute("download",e)}}}}function Sh(e,t,i,n){const r=e.querySelectorAll(t);for(let e=0;e<r.length;e++){const t=r[e],o=Nh(t.getAttribute(i),n);(0,N.A)(o)&&t.setAttribute(i,o.url)}}function Ch(e,t,i){let n=Oh(e,"id");n=(0,N.A)(n)&&0!==n.length?n:(0,L.A)(),(0,N.A)(i)&&(n=i+n);let r=t.getById(n);return(0,N.A)(r)&&(n=(0,L.A)(),(0,N.A)(i)&&(n=i+n)),r=t.add(new Ee.A({id:n})),(0,N.A)(r.kml)||(r.addProperty("kml"),r.kml=new Tp),r}function Mh(e,t){return"absolute"===e||"relativeToGround"===e||"relativeToSeaFloor"===t}function Eh(e,t){if(!(0,N.A)(e))return D.A.fromDegrees(0,0,0,t);const i=e.match(/[^\s,\n]+/g);if(!(0,N.A)(i))return D.A.fromDegrees(0,0,0,t);let n=parseFloat(i[0]),r=parseFloat(i[1]),o=parseFloat(i[2]);return n=isNaN(n)?0:n,r=isNaN(r)?0:r,o=isNaN(o)?0:o,D.A.fromDegrees(n,r,o,t)}function Ph(e,t){if(!(0,N.A)(e))return;const i=e.textContent.match(/[^\s\n]+/g);if(!(0,N.A)(i))return;const n=i.length,r=new Array(n);let o=0;for(let e=0;e<n;e++)r[o++]=Eh(i[e],t);return r}function kh(e,t){if(!(0,N.A)(e))return;const i=e.getAttribute(t);if(null!==i){const e=parseFloat(i);return isNaN(e)?void 0:e}}function Oh(e,t){if(!(0,N.A)(e))return;const i=e.getAttribute(t);return null!==i?i:void 0}function Rh(e,t,i){if(!(0,N.A)(e))return;const n=e.childNodes,r=n.length;for(let e=0;e<r;e++){const r=n[e];if(r.localName===t&&-1!==i.indexOf(r.namespaceURI))return r}}function Ih(e,t,i){if(!(0,N.A)(e))return;const n=[],r=e.getElementsByTagNameNS("*",t),o=r.length;for(let e=0;e<o;e++){const o=r[e];o.localName===t&&-1!==i.indexOf(o.namespaceURI)&&n.push(o)}return n}function Dh(e,t,i){if(!(0,N.A)(e))return[];const n=[],r=e.childNodes,o=r.length;for(let e=0;e<o;e++){const o=r[e];o.localName===t&&-1!==i.indexOf(o.namespaceURI)&&n.push(o)}return n}function Bh(e,t,i){const n=Rh(e,t,i);if((0,N.A)(n)){const e=parseFloat(n.textContent);return isNaN(e)?void 0:e}}function Lh(e,t,i){const n=Rh(e,t,i);if((0,N.A)(n))return n.textContent.trim()}function Fh(e,t,i){const n=Rh(e,t,i);if((0,N.A)(n)){const e=n.textContent.trim();return"1"===e||/^true$/i.test(e)}}function Nh(e,t,i){if(!(0,N.A)(e))return;let n;if((0,N.A)(i)){let r=i[e=e.replace(/\\/g,"/")];if((0,N.A)(r))n=new bt.A({url:r});else{const o=new Bt(t.getUrlComponent());r=i[new Bt(e).absoluteTo(o)],(0,N.A)(r)&&(n=new bt.A({url:r}))}}return(0,N.A)(n)||(n=t.getDerivedResource({url:e})),n}Object.defineProperties(vh.prototype,{dataSource:{get:function(){return this._dataSource}}}),vh.prototype.addNodes=function(e,t){this._stack.push({nodes:e,index:0,processingData:t}),this._used=!0},vh.prototype.addPromise=function(e){this._promises.push(e)},vh.prototype.wait=function(){const e=this._deferred;return this._used||e.resolve(),Promise.all([e.promise,Promise.all(this._promises)])},vh.prototype.process=function(){const e=1===this._stack.length;return e&&(this._started=wp._getTimestamp()),this._process(e)},vh.prototype._giveUpTime=function(){if(this._timeoutSet)return;this._timeoutSet=!0,this._timeThreshold=50;const e=this;setTimeout(function(){e._timeoutSet=!1,e._started=wp._getTimestamp(),e._process(!0)},0)},vh.prototype._nextNode=function(){const e=this._stack,t=e[e.length-1],i=t.index,n=t.nodes;if(i!==n.length)return++t.index,n[i]},vh.prototype._pop=function(){const e=this._stack;return e.pop(),0!==e.length||(this._deferred.resolve(),!1)},vh.prototype._process=function(e){const t=this.dataSource,i=this._stack[this._stack.length-1].processingData;let n=this._nextNode();for(;(0,N.A)(n);){const e=yh[n.localName];if((0,N.A)(e)&&(-1!==_h.kml.indexOf(n.namespaceURI)||-1!==_h.gx.indexOf(n.namespaceURI))&&(e(t,n,i,this),this._timeoutSet||wp._getTimestamp()>this._started+this._timeThreshold))return void this._giveUpTime();n=this._nextNode()}this._pop()&&e&&this._process(!0)};const Vh={maximumRed:void 0,red:void 0,maximumGreen:void 0,green:void 0,maximumBlue:void 0,blue:void 0};function Uh(e,t){if(!(0,N.A)(e)||/^\s*$/gm.test(e))return;"#"===e[0]&&(e=e.substring(1));const i=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255,o=parseInt(e.substring(6,8),16)/255;return t?(o>0?(Vh.maximumRed=o,Vh.red=void 0):(Vh.maximumRed=void 0,Vh.red=0),r>0?(Vh.maximumGreen=r,Vh.green=void 0):(Vh.maximumGreen=void 0,Vh.green=0),n>0?(Vh.maximumBlue=n,Vh.blue=void 0):(Vh.maximumBlue=void 0,Vh.blue=0),Vh.alpha=i,me.A.fromRandom(Vh)):new me.A(o,r,n,i)}function zh(e,t,i){const n=Lh(e,t,i);if((0,N.A)(n))return Uh(n,"random"===Lh(e,"colorMode",i))}function Gh(){const e=new oe.A;return e.width=ph,e.height=ph,e.scaleByDistance=new At.A(fh,1,mh,.1),e.pixelOffsetScaleByDistance=new At.A(fh,1,mh,.1),e}function Kh(){const e=new ni.A;return e.outline=!0,e.outlineColor=me.A.WHITE,e}function qh(){const e=new Jt.A;return e.translucencyByDistance=new At.A(3e6,1,5e6,0),e.pixelOffset=new fe.A(17,0),e.horizontalOrigin=Ot.A.LEFT,e.font="16px sans-serif",e.style=Rt.A.FILL_AND_OUTLINE,e}function Hh(e,t,i,n,r){let o=Lh(e,"href",_h.kml);if(!(0,N.A)(o)||0===o.length)return;if(0===o.indexOf("root://icons/palette-")){const t=o.charAt(21);let i=Bh(e,"x",_h.gx)??0,n=Bh(e,"y",_h.gx)??0;i=Math.min(i/32,7),n=7-Math.min(n/32,7),o=`https://maps.google.com/mapfiles/kml/pal${t}/icon${8*n+i}.png`}const s=Nh(o,i,n);if(r){const i=Lh(e,"refreshMode",_h.kml),n=Lh(e,"viewRefreshMode",_h.kml);"onInterval"===i||"onExpire"===i?(0,xa.A)(`kml-refreshMode-${i}`,`KML - Unsupported Icon refreshMode: ${i}`):"onStop"!==n&&"onRegion"!==n||(0,xa.A)(`kml-refreshMode-${n}`,`KML - Unsupported Icon viewRefreshMode: ${n}`);const r=Lh(e,"viewBoundScale",_h.kml)??1,o="onStop"===n?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",a=Lh(e,"viewFormat",_h.kml)??o,l=Lh(e,"httpQuery",_h.kml);(0,N.A)(a)&&s.setQueryParameters((0,Ta.A)(pp(a))),(0,N.A)(l)&&s.setQueryParameters((0,Ta.A)(pp(l)));const c=t._ellipsoid;return _p(s,t.camera,t.canvas,r,t._lastCameraView.bbox,c),s}return s}function Wh(e,t,i,n,r){let o=Bh(t,"scale",_h.kml);const s=Bh(t,"heading",_h.kml),a=zh(t,"color",_h.kml),l=Rh(t,"Icon",_h.kml);let c=Hh(l,e,n,r,!1);(0,N.A)(l)&&!(0,N.A)(c)&&(c=!1);const u=Bh(l,"x",_h.gx),d=Bh(l,"y",_h.gx),h=Bh(l,"w",_h.gx),p=Bh(l,"h",_h.gx),f=Rh(t,"hotSpot",_h.kml),m=kh(f,"x"),g=kh(f,"y"),A=Oh(f,"xunits"),_=Oh(f,"yunits");let y,v,w=i.billboard;(0,N.A)(w)||(w=Gh(),i.billboard=w),w.image=c,w.scale=o,w.color=a,((0,N.A)(u)||(0,N.A)(d)||(0,N.A)(h)||(0,N.A)(p))&&(w.imageSubRegion=new Qe.A(u,d,h,p)),(0,N.A)(s)&&0!==s&&(w.rotation=Me.A.toRadians(-s),w.alignedAxis=D.A.UNIT_Z),o=o??1,(0,N.A)(m)&&("pixels"===A?y=-m*o:"insetPixels"===A?y=(m-ph)*o:"fraction"===A&&(y=-m*ph*o),y+=16*o),(0,N.A)(g)&&("pixels"===_?v=g*o:"insetPixels"===_?v=(-g+ph)*o:"fraction"===_&&(v=g*ph*o),v-=16*o),((0,N.A)(y)||(0,N.A)(v))&&(w.pixelOffset=new fe.A(y,v))}function jh(e,t,i,n,r){for(let o=0,s=t.childNodes.length;o<s;o++){const s=t.childNodes.item(o);if("IconStyle"===s.localName)Wh(e,s,i,n,r);else if("LabelStyle"===s.localName){let e=i.label;(0,N.A)(e)||(e=qh(),i.label=e),e.scale=Bh(s,"scale",_h.kml)??e.scale,e.fillColor=zh(s,"color",_h.kml)??e.fillColor,e.text=i.name}else if("LineStyle"===s.localName){let e=i.polyline;(0,N.A)(e)||(e=new hi.A,i.polyline=e),e.width=Bh(s,"width",_h.kml),e.material=zh(s,"color",_h.kml),(0,N.A)(zh(s,"outerColor",_h.gx))&&(0,xa.A)("kml-gx:outerColor","KML - gx:outerColor is not supported in a LineStyle"),(0,N.A)(Bh(s,"outerWidth",_h.gx))&&(0,xa.A)("kml-gx:outerWidth","KML - gx:outerWidth is not supported in a LineStyle"),(0,N.A)(Bh(s,"physicalWidth",_h.gx))&&(0,xa.A)("kml-gx:physicalWidth","KML - gx:physicalWidth is not supported in a LineStyle"),(0,N.A)(Fh(s,"labelVisibility",_h.gx))&&(0,xa.A)("kml-gx:labelVisibility","KML - gx:labelVisibility is not supported in a LineStyle")}else if("PolyStyle"===s.localName){let e=i.polygon;(0,N.A)(e)||(e=Kh(),i.polygon=e),e.material=zh(s,"color",_h.kml)??e.material,e.fill=Fh(s,"fill",_h.kml)??e.fill,e.outline=Fh(s,"outline",_h.kml)??e.outline}else if("BalloonStyle"===s.localName){const e=Uh(Lh(s,"bgColor",_h.kml))??me.A.WHITE,t=Uh(Lh(s,"textColor",_h.kml))??me.A.BLACK,n=Lh(s,"text",_h.kml);i.addProperty("balloonStyle"),i.balloonStyle={bgColor:e,textColor:t,text:n}}else if("ListStyle"===s.localName){const e=Lh(s,"listItemType",_h.kml);"radioFolder"!==e&&"checkOffOnly"!==e||(0,xa.A)(`kml-listStyle-${e}`,`KML - Unsupported ListStyle with listItemType: ${e}`)}}}function $h(e,t,i){return t.fetchXML().then(function(n){return Xh(e,n,i,t,!0)})}function Xh(e,t,i,n,r,o){let s,a,l,c;const u=Ih(t,"Style",_h.kml);if((0,N.A)(u)){const t=u.length;for(s=0;s<t;s++)c=u[s],a=Oh(c,"id"),(0,N.A)(a)&&(a=`#${a}`,r&&(0,N.A)(n)&&(a=n.getUrlComponent()+a),(0,N.A)(i.getById(a))||(l=new Ee.A({id:a}),i.add(l),jh(e,c,l,n,o)))}const d=Ih(t,"StyleMap",_h.kml);if((0,N.A)(d)){const t=d.length;for(s=0;s<t;s++){const t=d[s];if(a=Oh(t,"id"),(0,N.A)(a)){const s=Dh(t,"Pair",_h.kml);for(let t=0;t<s.length;t++){const u=s[t],d=Lh(u,"key",_h.kml);if("normal"===d){if(a=`#${a}`,r&&(0,N.A)(n)&&(a=n.getUrlComponent()+a),!(0,N.A)(i.getById(a))){l=i.getOrCreateEntity(a);let t=Lh(u,"styleUrl",_h.kml);if((0,N.A)(t)){"#"!==t[0]&&(t=`#${t}`),r&&(0,N.A)(n)&&(t=n.getUrlComponent()+t);const e=i.getById(t);(0,N.A)(e)&&l.merge(e)}else c=Rh(u,"Style",_h.kml),jh(e,c,l,n,o)}}else(0,xa.A)(`kml-styleMap-${d}`,`KML - Unsupported StyleMap key: ${d}`)}}}}const h=[],p=t.getElementsByTagName("styleUrl"),f=p.length;for(s=0;s<f;s++){const t=p[s].textContent;if("#"!==t[0]){const r=t.split("#");if(2===r.length){const t=r[0],o=n.getDerivedResource({url:t});h.push($h(e,o,i))}}}return h}function Yh(e,t,i){const n=new Ei.A(e,t.id,["position"]),r=new ch.A(t.position);t.polyline=(0,N.A)(i.polyline)?i.polyline.clone():new hi.A,t.polyline.positions=new bi([n,r])}function Zh(e,t){return!(0,N.A)(e)&&!(0,N.A)(t)||"clampToGround"===e?kt.Ay.CLAMP_TO_GROUND:"relativeToGround"===e?kt.Ay.RELATIVE_TO_GROUND:"absolute"===e?kt.Ay.NONE:"clampToSeaFloor"===t?((0,xa.A)("kml-gx:altitudeMode-clampToSeaFloor","KML - <gx:altitudeMode>:clampToSeaFloor is currently not supported, using <kml:altitudeMode>:clampToGround."),kt.Ay.CLAMP_TO_GROUND):"relativeToSeaFloor"===t?((0,xa.A)("kml-gx:altitudeMode-relativeToSeaFloor","KML - <gx:altitudeMode>:relativeToSeaFloor is currently not supported, using <kml:altitudeMode>:relativeToGround."),kt.Ay.RELATIVE_TO_GROUND):((0,N.A)(e)?(0,xa.A)("kml-altitudeMode-unknown",`KML - Unknown <kml:altitudeMode>:${e}, using <kml:altitudeMode>:CLAMP_TO_GROUND.`):(0,xa.A)("kml-gx:altitudeMode-unknown",`KML - Unknown <gx:altitudeMode>:${t}, using <kml:altitudeMode>:CLAMP_TO_GROUND.`),kt.Ay.CLAMP_TO_GROUND)}function Jh(e,t,i){return"relativeToSeaFloor"===i||"absolute"===t||"relativeToGround"===t?e:(((0,N.A)(t)&&"clampToGround"!==t||(0,N.A)(i)&&"clampToSeaFloor"!==i)&&(0,xa.A)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${t??i}`),new ch.A(e))}function Qh(e,t,i,n){let r=t.label;(0,N.A)(r)||(r=(0,N.A)(i.label)?i.label.clone():qh(),t.label=r),r.text=t.name;let o=t.billboard;(0,N.A)(o)||(o=(0,N.A)(i.billboard)?i.billboard.clone():Gh(),t.billboard=o),(0,N.A)(o.image)?o.image.getValue()||(o.image=void 0):o.image=e._pinBuilder.fromColor(me.A.YELLOW,64);let s=1;(0,N.A)(o.scale)&&(s=o.scale.getValue(),0!==s?r.pixelOffset=new fe.A(16*s+1,0):(r.pixelOffset=void 0,r.horizontalOrigin=void 0)),(0,N.A)(n)&&e._clampToGround&&(o.heightReference=n,r.heightReference=n)}function ep(e,t){let i=e.path;(0,N.A)(i)||(i=new ti.A,i.leadTime=0,e.path=i);const n=t.polyline;(0,N.A)(n)&&(i.material=n.material,i.width=n.width)}function tp(e,t,i,n,r){const o=Rh(i,"coordinates",_h.kml),s=Lh(i,"altitudeMode",_h.kml),a=Lh(i,"altitudeMode",_h.gx),l=Fh(i,"extrude",_h.kml),c=Fh(i,"tessellate",_h.kml),u=Mh(s,a),d=Bh(i,"drawOrder",_h.gx),h=e._ellipsoid,p=Ph(o,h);let f=r.polyline;if(u&&l){const e=new Ji.A;n.wall=e,e.positions=p;const t=r.polygon;(0,N.A)(t)&&(e.fill=t.fill,e.material=t.material),e.outline=!0,(0,N.A)(f)?(e.outlineColor=(0,N.A)(f.material)?f.material.color:me.A.WHITE,e.outlineWidth=f.width):(0,N.A)(t)&&(e.outlineColor=(0,N.A)(t.material)?t.material.color:me.A.WHITE)}else if(e._clampToGround&&!u&&c){const e=new hi.A;e.clampToGround=!0,n.polyline=e,e.positions=p,(0,N.A)(f)?(e.material=(0,N.A)(f.material)?f.material.color.getValue(ft.A.MINIMUM_VALUE):me.A.WHITE,e.width=f.width??1):(e.material=me.A.WHITE,e.width=1),e.zIndex=d}else(0,N.A)(d)&&(0,xa.A)("kml-gx:drawOrder","KML - gx:drawOrder is not supported in LineStrings when clampToGround is false"),e._clampToGround&&!c&&(0,xa.A)("kml-line-tesselate","Ignoring clampToGround for KML lines without the tessellate flag."),f=(0,N.A)(f)?f.clone():new hi.A,n.polyline=f,f.positions=function(e,t,i,n){if(!(0,N.A)(e))return;if("relativeToSeaFloor"===i||"absolute"===t||"relativeToGround"===t)return e;((0,N.A)(t)&&"clampToGround"!==t||(0,N.A)(i)&&"clampToSeaFloor"!==i)&&(0,xa.A)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${t??i}`);const r=e.length;for(let t=0;t<r;t++){const i=e[t];n.scaleToGeodeticSurface(i,i)}return e}(p,s,a,h),c&&!u||(f.arcType=Je.A.NONE);return!0}function ip(e,t,i,n,r,o,s,a,l){const c=e[0],u=e[e.length-1],d=new ki.A;d.addSamples(e,t),i.intervals.addInterval(new Ct.A({start:c,stop:u,isStartIncluded:l,isStopIncluded:l,data:Jh(d,s,a)})),n.addInterval(new Ct.A({start:c,stop:u,isStartIncluded:l,isStopIncluded:l})),r.intervals.addInterval(new Ct.A({start:c,stop:u,isStartIncluded:l,isStopIncluded:l,data:o}))}const np={Point:function(e,t,i,n,r){const o=Lh(i,"coordinates",_h.kml),s=Lh(i,"altitudeMode",_h.kml),a=Lh(i,"altitudeMode",_h.gx),l=Fh(i,"extrude",_h.kml),c=Eh(o,e._ellipsoid);return n.position=c,Qh(e,n,r,Zh(s,a)),l&&Mh(s,a)&&Yh(t,n,r),!0},LineString:tp,LinearRing:tp,Polygon:function(e,t,i,n,r){const o=Rh(i,"outerBoundaryIs",_h.kml);let s=Rh(o,"LinearRing",_h.kml),a=Rh(s,"coordinates",_h.kml);const l=e._ellipsoid;let c=Ph(a,l);const u=Fh(i,"extrude",_h.kml),d=Mh(Lh(i,"altitudeMode",_h.kml),Lh(i,"altitudeMode",_h.gx)),h=(0,N.A)(r.polygon)?r.polygon.clone():Kh(),p=r.polyline;if((0,N.A)(p)&&(h.outlineColor=(0,N.A)(p.material)?p.material.color:me.A.WHITE,h.outlineWidth=p.width),n.polygon=h,d?(h.perPositionHeight=!0,h.extrudedHeight=u?0:void 0):e._clampToGround||(h.height=0),(0,N.A)(c)){const e=new _t.A(c),t=Dh(i,"innerBoundaryIs",_h.kml);for(let i=0;i<t.length;i++){s=Dh(t[i],"LinearRing",_h.kml);for(let t=0;t<s.length;t++)a=Rh(s[t],"coordinates",_h.kml),c=Ph(a,l),(0,N.A)(c)&&e.holes.push(new _t.A(c))}h.hierarchy=e}return!0},Track:function(e,t,i,n,r){const o=Lh(i,"altitudeMode",_h.kml),s=Lh(i,"altitudeMode",_h.gx),a=Dh(i,"coord",_h.gx),l=Dh(i,"angles",_h.gx),c=Dh(i,"when",_h.kml),u=Fh(i,"extrude",_h.kml),d=Mh(o,s),h=e._ellipsoid;l.length>0&&(0,xa.A)("kml-gx:angles","KML - gx:angles are not supported in gx:Tracks");const p=Math.min(a.length,c.length),f=[],m=[];for(let e=0;e<p;e++){const t=Eh(a[e].textContent,h);f.push(t),m.push(Ae.A.fromIso8601(c[e].textContent))}const g=new ki.A;return g.addSamples(m,f),n.position=g,Qh(e,n,r,Zh(o,s)),ep(n,r),n.availability=new Mt.A,c.length>0&&n.availability.addInterval(new Ct.A({start:m[0],stop:m[m.length-1]})),d&&u&&Yh(t,n,r),!0},MultiTrack:function(e,t,i,n,r){const o=Fh(i,"interpolate",_h.gx),s=Dh(i,"Track",_h.gx);let a,l,c,u=!1;const d=new Gi,h=new Mt.A,p=new qe.A,f=e._ellipsoid;for(let e=0,t=s.length;e<t;e++){const t=s[e],i=Dh(t,"when",_h.kml),n=Dh(t,"coord",_h.gx),r=Lh(t,"altitudeMode",_h.kml),m=Lh(t,"altitudeMode",_h.gx),g=Mh(r,m),A=Fh(t,"extrude",_h.kml),_=Math.min(n.length,i.length),y=[];a=[];for(let e=0;e<_;e++){const t=Eh(n[e].textContent,f);y.push(t),a.push(Ae.A.fromIso8601(i[e].textContent))}o&&((0,N.A)(l)&&ip([l,a[0]],[c,y[0]],p,h,d,!1,"absolute",void 0,!1),l=a[_-1],c=y[y.length-1]),ip(a,y,p,h,d,g&&A,r,m,!0),u=u||g&&A}return n.availability=h,n.position=p,Qh(e,n,r),ep(n,r),u&&(Yh(t,n,r),n.polyline.show=d),!0},MultiGeometry:function(e,t,i,n,r,o){const s=i.childNodes;let a=!1;for(let i=0,l=s.length;i<l;i++){const l=s.item(i),c=np[l.localName];if((0,N.A)(c)){const i=Ch(l,t,o);i.parent=n,i.name=n.name,i.availability=n.availability,i.description=n.description,i.kml=n.kml,c(e,t,l,i,r)&&(a=!0)}}return a},Model:function(e,t,i,n,r){return(0,xa.A)("kml-unsupportedGeometry",`KML - Unsupported geometry: ${i.localName}`),!1}};let rp;function op(e,t,i){const n=i.entityCollection,r=i.parentEntity,o=i.sourceResource,s=i.uriResolver,a=Ch(t,n,i.context),l=a.kml,c=function(e,t,i,n,r){const o=new Ee.A;let s,a=-1;const l=t.childNodes,c=l.length;for(let e=0;e<c;e++){const t=l[e];"Style"!==t.localName&&"StyleMap"!==t.localName||(a=e)}if(-1!==a){const t=l[a];if("Style"===t.localName)jh(e,t,o,n,r);else{const a=Dh(t,"Pair",_h.kml);for(let t=0;t<a.length;t++){const l=a[t],c=Lh(l,"key",_h.kml);if("normal"===c){const t=Lh(l,"styleUrl",_h.kml);(0,N.A)(t)?(s=i.getById(t),(0,N.A)(s)||(s=i.getById(`#${t}`)),(0,N.A)(s)&&o.merge(s)):jh(e,Rh(l,"Style",_h.kml),o,n,r)}else(0,xa.A)(`kml-styleMap-${c}`,`KML - Unsupported StyleMap key: ${c}`)}}}const u=Lh(t,"styleUrl",_h.kml);if((0,N.A)(u)){let e=u;if("#"!==u[0]&&-1!==u.indexOf("#")){const t=u.split("#"),i=t[0];e=`${n.getDerivedResource({url:i}).getUrlComponent()}#${t[1]}`}s=i.getById(e),(0,N.A)(s)||(s=i.getById(`#${e}`)),(0,N.A)(s)&&o.merge(s)}return o}(e,t,i.styleCollection,o,s),u=Lh(t,"name",_h.kml);a.name=u,a.parent=r;let d=function(e){const t=Rh(e,"TimeSpan",_h.kmlgx);if(!(0,N.A)(t))return;let i;const n=Rh(t,"begin",_h.kmlgx);let r=(0,N.A)(n)?Ae.A.fromIso8601(n.textContent):void 0;const o=Rh(t,"end",_h.kmlgx);let s=(0,N.A)(o)?Ae.A.fromIso8601(o.textContent):void 0;if((0,N.A)(r)&&(0,N.A)(s)){if(Ae.A.lessThan(s,r)){const e=r;r=s,s=e}i=new Mt.A,i.addInterval(new Ct.A({start:r,stop:s}))}else(0,N.A)(r)?(i=new Mt.A,i.addInterval(new Ct.A({start:r,stop:ft.A.MAXIMUM_VALUE}))):(0,N.A)(s)&&(i=new Mt.A,i.addInterval(new Ct.A({start:ft.A.MINIMUM_VALUE,stop:s})));return i}(t);(0,N.A)(d)||(d=function(e){const t=Rh(e,"TimeStamp",_h.kmlgx),i=Lh(t,"when",_h.kmlgx);if(!(0,N.A)(t)||!(0,N.A)(i)||0===i.length)return;const n=Ae.A.fromIso8601(i),r=new Mt.A;return r.addInterval(new Ct.A({start:n,stop:ft.A.MAXIMUM_VALUE})),r}(t)),a.availability=d,bp(a);const h=Fh(t,"visibility",_h.kml);a.show=function e(t){return!t||t.show&&e(t.parent)}(r)&&(h??!0);const p=Rh(t,"author",_h.atom),f=l.author;f.name=Lh(p,"name",_h.atom),f.uri=Lh(p,"uri",_h.atom),f.email=Lh(p,"email",_h.atom);const m=Rh(t,"link",_h.atom),g=l.link;g.href=Oh(m,"href"),g.hreflang=Oh(m,"hreflang"),g.rel=Oh(m,"rel"),g.type=Oh(m,"type"),g.title=Oh(m,"title"),g.length=Oh(m,"length"),l.address=Lh(t,"address",_h.kml),l.phoneNumber=Lh(t,"phoneNumber",_h.kml),l.snippet=Lh(t,"Snippet",_h.kml),function(e,t){const i=Rh(e,"ExtendedData",_h.kml);if(!(0,N.A)(i))return;(0,N.A)(Rh(i,"SchemaData",_h.kml))&&(0,xa.A)("kml-schemaData","KML - SchemaData is unsupported"),(0,N.A)(Oh(i,"xmlns:prefix"))&&(0,xa.A)("kml-extendedData","KML - ExtendedData with xmlns:prefix is unsupported");const n={},r=Dh(i,"Data",_h.kml);if((0,N.A)(r)){const e=r.length;for(let t=0;t<e;t++){const e=r[t],i=Oh(e,"name");(0,N.A)(i)&&(n[i]={displayName:Lh(e,"displayName",_h.kml),value:Lh(e,"value",_h.kml)})}}t.kml.extendedData=n}(t,a),function(e,t,i,n,r){let o,s,a;const l=t.kml,c=l.extendedData,u=Lh(e,"description",_h.kml),d=t.balloonStyle??i.balloonStyle;let h,p=me.A.WHITE,f=me.A.BLACK,m=u;if((0,N.A)(d)&&(p=d.bgColor??me.A.WHITE,f=d.textColor??me.A.BLACK,m=d.text??u),(0,N.A)(m)){if(m=m.replace("$[name]",t.name??""),m=m.replace("$[description]",u??""),m=m.replace("$[address]",l.address??""),m=m.replace("$[Snippet]",l.snippet??""),m=m.replace("$[id]",t.id),m=m.replace("$[geDirections]",""),(0,N.A)(c)){const e=m.match(/\$\[.+?\]/g);if(null!==e)for(o=0;o<e.length;o++){const t=e[o];let i=t.substr(2,t.length-3);const n=/\/displayName$/.test(i);i=i.replace(/\/displayName$/,""),h=c[i],(0,N.A)(h)&&(h=n?h.displayName:h.value),(0,N.A)(h)&&(m=m.replace(t,h??""))}}}else if((0,N.A)(c)&&(a=Object.keys(c),a.length>0)){for(m='<table class="cesium-infoBox-defaultTable cesium-infoBox-defaultTable-lighter"><tbody>',o=0;o<a.length;o++)s=a[o],h=c[s],m+=`<tr><th>${h.displayName??s}</th><td>${h.value??""}</td></tr>`;m+="</tbody></table>"}if(!(0,N.A)(m))return;m=hh.link(m),rp.innerHTML=m;const g=rp.querySelectorAll("a");for(o=0;o<g.length;o++)g[o].setAttribute("target","_blank");(0,N.A)(n)&&n.keys.length>1&&(Th(rp,"a","href",n),Th(rp,"link","href",n),Th(rp,"area","href",n),Th(rp,"img","src",n),Th(rp,"iframe","src",n),Th(rp,"video","src",n),Th(rp,"audio","src",n),Th(rp,"source","src",n),Th(rp,"track","src",n),Th(rp,"input","src",n),Th(rp,"embed","src",n),Th(rp,"script","src",n),Th(rp,"video","poster",n)),Sh(rp,"a","href",r),Sh(rp,"link","href",r),Sh(rp,"area","href",r),Sh(rp,"img","src",r),Sh(rp,"iframe","src",r),Sh(rp,"video","src",r),Sh(rp,"audio","src",r),Sh(rp,"source","src",r),Sh(rp,"track","src",r),Sh(rp,"input","src",r),Sh(rp,"embed","src",r),Sh(rp,"script","src",r),Sh(rp,"video","poster",r);let A='<div class="cesium-infoBox-description-lighter" style="';A+="overflow:auto;",A+="word-wrap:break-word;",A+=`background-color:${p.toCssColorString()};`,A+=`color:${f.toCssColorString()};`,A+='">',A+=`${rp.innerHTML}</div>`,rp.innerHTML="",t.description=A}(t,a,c,s,o);const A=e._ellipsoid;return up(t,a,A),cp(t,a,A),(0,N.A)(Rh(t,"Region",_h.kml))&&(0,xa.A)("kml-region","KML - Placemark Regions are unsupported"),{entity:a,styleEntity:c}}function sp(e,t,i,n){n.addNodes(t.childNodes,i),n.process()}"undefined"!=typeof document&&(rp=document.createElement("div"));const ap={FlyTo:function(e,t,i){const n=Bh(t,"duration",_h.gx),r=Lh(t,"flyToMode",_h.gx),o={kml:{}};up(t,o,i),cp(t,o,i);const s=o.kml.lookAt||o.kml.camera,a=new sh(n,r,s);e.addPlaylistEntry(a)},Wait:function(e,t){const i=Bh(t,"duration",_h.gx);e.addPlaylistEntry(new lh(i))},SoundCue:lp,AnimatedUpdate:lp,TourControl:lp};function lp(e,t){(0,xa.A)(`KML Tour unsupported node ${t.localName}`)}function cp(e,t,i){const n=Rh(e,"Camera",_h.kml);if((0,N.A)(n)){const e=Bh(n,"longitude",_h.kml)??0,r=Bh(n,"latitude",_h.kml)??0,o=Bh(n,"altitude",_h.kml)??0,s=Bh(n,"heading",_h.kml)??0,a=Bh(n,"tilt",_h.kml)??0,l=Bh(n,"roll",_h.kml)??0,c=D.A.fromDegrees(e,r,o,i),u=wa.A.fromDegrees(s,a-90,l);t.kml.camera=new pa(c,u)}}function up(e,t,i){const n=Rh(e,"LookAt",_h.kml);if((0,N.A)(n)){const e=Bh(n,"longitude",_h.kml)??0,r=Bh(n,"latitude",_h.kml)??0,o=Bh(n,"altitude",_h.kml)??0;let s=Bh(n,"heading",_h.kml),a=Bh(n,"tilt",_h.kml);const l=Bh(n,"range",_h.kml)??0;a=Me.A.toRadians(a??0),s=Me.A.toRadians(s??0);const c=new va.A(s,a-Me.A.PI_OVER_TWO,l),u=D.A.fromDegrees(e,r,o,i);t.kml.lookAt=new Yd(u,c)}}function dp(e,t,i,n){e._unsupportedNode.raiseEvent(e,i.parentEntity,t,i.entityCollection,i.styleCollection,i.sourceResource,i.uriResolver),(0,xa.A)(`kml-unsupportedFeature-${t.nodeName}`,`KML - Unsupported feature: ${t.nodeName}`)}const hp={INTERVAL:0,EXPIRE:1,STOP:2};function pp(e){if(!(0,N.A)(e)||0===e.length)return"";const t=e[0];return"&"!==t&&"?"!==t||(e=e.substring(1)),e}const fp=new vt.A,mp=new et.A,gp=new fe.A,Ap=new D.A;function _p(e,t,i,n,r,o){function s(e){return e<-Me.A.PI_OVER_TWO?-Me.A.PI_OVER_TWO:e>Me.A.PI_OVER_TWO?Me.A.PI_OVER_TWO:e}function a(e){return e>Me.A.PI?e-Me.A.TWO_PI:e<-Me.A.PI?e+Me.A.TWO_PI:e}let l=(0,ba.A)(e.queryParameters);if(l=l.replace(/%5B/g,"[").replace(/%5D/g,"]"),(0,N.A)(t)&&t._mode!==Sa.A.MORPHING){let e,c;if(r=r??fp,(0,N.A)(i)&&(gp.x=.5*i.clientWidth,gp.y=.5*i.clientHeight,e=t.pickEllipsoid(gp,o,Ap)),(0,N.A)(e)?c=o.cartesianToCartographic(e,mp):(c=vt.A.center(r,mp),e=o.cartographicToCartesian(c)),(0,N.A)(n)&&!Me.A.equalsEpsilon(n,1,Me.A.EPSILON9)){const e=r.width*n*.5,t=r.height*n*.5;r=new vt.A(a(c.longitude-e),s(c.latitude-t),a(c.longitude+e),s(c.latitude+t))}l=l.replace("[bboxWest]",Me.A.toDegrees(r.west).toString()),l=l.replace("[bboxSouth]",Me.A.toDegrees(r.south).toString()),l=l.replace("[bboxEast]",Me.A.toDegrees(r.east).toString()),l=l.replace("[bboxNorth]",Me.A.toDegrees(r.north).toString());const u=Me.A.toDegrees(c.longitude).toString(),d=Me.A.toDegrees(c.latitude).toString();l=l.replace("[lookatLon]",u),l=l.replace("[lookatLat]",d),l=l.replace("[lookatTilt]",Me.A.toDegrees(t.pitch).toString()),l=l.replace("[lookatHeading]",Me.A.toDegrees(t.heading).toString()),l=l.replace("[lookatRange]",D.A.distance(t.positionWC,e)),l=l.replace("[lookatTerrainLon]",u),l=l.replace("[lookatTerrainLat]",d),l=l.replace("[lookatTerrainAlt]",c.height.toString()),o.cartesianToCartographic(t.positionWC,mp),l=l.replace("[cameraLon]",Me.A.toDegrees(mp.longitude).toString()),l=l.replace("[cameraLat]",Me.A.toDegrees(mp.latitude).toString()),l=l.replace("[cameraAlt]",Me.A.toDegrees(mp.height).toString());const h=t.frustum,p=h.aspectRatio;let f="",m="";if((0,N.A)(p)){const e=Me.A.toDegrees(h.fov);p>1?(f=e,m=e/p):(m=e,f=e*p)}l=l.replace("[horizFov]",f.toString()),l=l.replace("[vertFov]",m.toString())}else l=l.replace("[bboxWest]","-180"),l=l.replace("[bboxSouth]","-90"),l=l.replace("[bboxEast]","180"),l=l.replace("[bboxNorth]","90"),l=l.replace("[lookatLon]",""),l=l.replace("[lookatLat]",""),l=l.replace("[lookatRange]",""),l=l.replace("[lookatTilt]",""),l=l.replace("[lookatHeading]",""),l=l.replace("[lookatTerrainLon]",""),l=l.replace("[lookatTerrainLat]",""),l=l.replace("[lookatTerrainAlt]",""),l=l.replace("[cameraLon]",""),l=l.replace("[cameraLat]",""),l=l.replace("[cameraAlt]",""),l=l.replace("[horizFov]",""),l=l.replace("[vertFov]","");(0,N.A)(i)?(l=l.replace("[horizPixels]",i.clientWidth),l=l.replace("[vertPixels]",i.clientHeight)):(l=l.replace("[horizPixels]",""),l=l.replace("[vertPixels]","")),l=l.replace("[terrainEnabled]","1"),l=l.replace("[clientVersion]","1"),l=l.replace("[kmlVersion]","2.2"),l=l.replace("[clientName]","Cesium"),l=l.replace("[language]","English"),e.setQueryParameters((0,Ta.A)(l))}function yp(e,t,i,n,r,o,s){t.removeAll();const a=i.documentElement;let l=Lh("Document"===a.localName?a:Rh(a,"Document",_h.kml),"name",_h.kml);(0,N.A)(l)||(l=(0,lt.A)(n.getUrlComponent())),(0,N.A)(e._name)||(e._name=l);const c=new wp._DeferredLoading(e),u=new Pe.A(e);return Promise.all(Xh(e,i,u,n,!1,r)).then(function(){let a=i.documentElement;if("kml"===a.localName){const e=a.childNodes;for(let t=0;t<e.length;t++){const i=e[t];if((0,N.A)(yh[i.localName])){a=i;break}}}const l={parentEntity:void 0,entityCollection:t,styleCollection:u,sourceResource:n,uriResolver:r,context:s,screenOverlayContainer:o};return t.suspendEvents(),function(e,t,i,n){const r=yh[t.localName];(0,N.A)(r)?r(e,t,i,n):dp(e,t,i)}(e,a,l,c),t.resumeEvents(),c.wait().then(function(){return i.documentElement})})}function vp(e,t,i,n){let r=(n=n??F.A.EMPTY_OBJECT).sourceUri;const o=n.uriResolver,s=n.context;let a=n.screenOverlayContainer,l=i;if("string"==typeof i||i instanceof bt.A){l=(i=bt.A.createIfNeeded(i)).fetchBlob(),r=r??i.clone();const t=e._resourceCredits,n=i.credits;if((0,N.A)(n)){const e=n.length;for(let i=0;i<e;i++)t.push(n[i])}}else r=r??bt.A.DEFAULT.clone();return r=bt.A.createIfNeeded(r),(0,N.A)(a)&&(a=(0,Xd.A)(a)),Promise.resolve(l).then(function(i){return i instanceof Blob?function(e){const t=e.slice(0,Math.min(4,e.size)),i=(0,Aa.A)(),n=new FileReader;return n.addEventListener("load",function(){i.resolve(1347093252===new DataView(n.result).getUint32(0,!1))}),n.addEventListener("error",function(){i.reject(n.error)}),n.readAsArrayBuffer(t),i.promise}(i).then(function(n){return n?function(e,t,i,n,r){const o=(0,ma.A)("ThirdParty/Workers/z-worker-pako.js");Rl({workerScripts:{deflate:[o,"./pako_deflate.min.js"],inflate:[o,"./pako_inflate.min.js"]}});const s=new gd(new du(i));return Promise.resolve(s.getEntries()).then(function(i){const o=[],a={};let l;for(let e=0;e<i.length;e++){const t=i[e];t.directory||(/\.kml$/i.test(t.filename)?(0,N.A)(l)&&/\//i.test(t.filename)?o.push(xh(t,a)):((0,N.A)(l)&&o.push(xh(l,a)),l=t):o.push(xh(t,a)))}return(0,N.A)(l)&&o.push(function(e,t){return Promise.resolve(e.getData(new fu)).then(function(e){e=bh(e=wh(e)),t.kml=dh.parseFromString(e,"application/xml")})}(l,a)),Promise.all(o).then(function(){if(s.close(),!(0,N.A)(a.kml))throw new xt.A("KMZ file does not contain a KML document.");return a.keys=Object.keys(a),yp(e,t,a.kml,n,a,r)})})}(e,t,i,r,a):function(e){const t=(0,Aa.A)(),i=new FileReader;return i.addEventListener("load",function(){t.resolve(i.result)}),i.addEventListener("error",function(){t.reject(i.error)}),i.readAsText(e),t.promise}(i).then(function(i){let n,l;i=bh(i=wh(i));try{n=dh.parseFromString(i,"application/xml")}catch(e){l=e.toString()}if((0,N.A)(l)||n.body||"parsererror"===n.documentElement.tagName){let e=(0,N.A)(l)?l:n.documentElement.firstChild.nodeValue;throw e||(e=n.body.innerText),new xt.A(e)}return yp(e,t,n,r,o,a,s)})}):yp(e,t,i,r,o,a,s)}).catch(function(t){return e._error.raiseEvent(e,t),console.log(t),Promise.reject(t)})}function wp(e){const t=(e=e??F.A.EMPTY_OBJECT).camera,i=e.canvas;this._changed=new ge.A,this._error=new ge.A,this._loading=new ge.A,this._refresh=new ge.A,this._unsupportedNode=new ge.A,this._clock=void 0,this._entityCollection=new Pe.A(this),this._name=void 0,this._isLoading=!1,this._pinBuilder=new ar.A,this._networkLinks=new fa.A,this._entityCluster=new Kt.A,this.canvas=i,this.camera=t,this._lastCameraView={position:(0,N.A)(t)?D.A.clone(t.positionWC):void 0,direction:(0,N.A)(t)?D.A.clone(t.directionWC):void 0,up:(0,N.A)(t)?D.A.clone(t.upWC):void 0,bbox:(0,N.A)(t)?t.computeViewRectangle():vt.A.clone(vt.A.MAX_VALUE)},this._ellipsoid=e.ellipsoid??st.A.default;let n=e.credit;"string"==typeof n&&(n=new rt.A(n)),this._credit=n,this._resourceCredits=[],this._kmlTours=[],this._screenOverlays=[]}function bp(e){const t=e.parent;if((0,N.A)(t)){const i=t.availability;if((0,N.A)(i)){const t=e.availability;(0,N.A)(t)?t.intersect(i):e.availability=i}}}wp.load=function(e,t){return new wp(t=t??F.A.EMPTY_OBJECT).load(e,t)},Object.defineProperties(wp.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},refreshEvent:{get:function(){return this._refresh}},unsupportedNodeEvent:{get:function(){return this._unsupportedNode}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,N.A)(e))throw new U.A("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}},kmlTours:{get:function(){return this._kmlTours}}}),wp.prototype.load=function(e,t){if(!(0,N.A)(e))throw new U.A("data is required.");t=t??F.A.EMPTY_OBJECT,Lt.A.setLoading(this,!0);const i=this._name;this._name=void 0,this._clampToGround=t.clampToGround??!1;const n=this;return vp(this,this._entityCollection,e,t).then(function(){let e;const t=n._entityCollection.computeAvailability();let r=t.start,o=t.stop;const s=Ae.A.equals(r,ft.A.MINIMUM_VALUE),a=Ae.A.equals(o,ft.A.MAXIMUM_VALUE);if(!s||!a){let t;s&&(t=new Date,t.setHours(0,0,0,0),r=Ae.A.fromDate(t)),a&&(t=new Date,t.setHours(24,0,0,0),o=Ae.A.fromDate(t)),e=new Ut,e.startTime=r,e.stopTime=o,e.currentTime=Ae.A.clone(r),e.clockRange=tt.A.LOOP_STOP,e.clockStep=it.A.SYSTEM_CLOCK_MULTIPLIER,e.multiplier=Math.round(Math.min(Math.max(Ae.A.secondsDifference(o,r)/60,1),31556900))}let l=!1;return e!==n._clock&&(n._clock=e,l=!0),i!==n._name&&(l=!0),l&&n._changed.raiseEvent(n),Lt.A.setLoading(n,!1),n}).catch(function(e){return Lt.A.setLoading(n,!1),n._error.raiseEvent(n,e),console.log(e),Promise.reject(e)})},wp.prototype.destroy=function(){for(;this._screenOverlays.length>0;)this._screenOverlays.pop().remove()};const xp=new fa.A;function Tp(){this.author={name:void 0,uri:void 0,email:void 0},this.link={href:void 0,hreflang:void 0,rel:void 0,type:void 0,title:void 0,length:void 0},this.address=void 0,this.phoneNumber=void 0,this.snippet=void 0,this.extendedData=void 0}wp.prototype.update=function(e){const t=this._networkLinks;if(0===t.length)return!0;const i=Ae.A.now(),n=this;function r(e){const t=e._children,i=t.length;for(let e=0;e<i;++e){const i=t[e];xp.set(i.id,i),r(i)}}xp.removeAll();let o=!1;const s=this._lastCameraView,a=this.camera;!(0,N.A)(a)||a.positionWC.equalsEpsilon(s.position,Me.A.EPSILON7)&&a.directionWC.equalsEpsilon(s.direction,Me.A.EPSILON7)&&a.upWC.equalsEpsilon(s.up,Me.A.EPSILON7)||(s.position=D.A.clone(a.positionWC),s.direction=D.A.clone(a.directionWC),s.up=D.A.clone(a.upWC),s.bbox=a.computeViewRectangle(),o=!0);const l=new fa.A;let c=!1;return t.values.forEach(function(e){const t=e.entity;if(!xp.contains(t.id)){if(!e.updating){let a=!1;if(e.refreshMode===hp.INTERVAL?Ae.A.secondsDifference(i,e.lastUpdated)>e.time&&(a=!0):e.refreshMode===hp.EXPIRE?Ae.A.greaterThan(i,e.time)&&(a=!0):e.refreshMode===hp.STOP&&(o&&(e.needsUpdate=!0,e.cameraUpdateTime=i),e.needsUpdate&&Ae.A.secondsDifference(i,e.cameraUpdateTime)>=e.time&&(a=!0)),a){r(t),e.updating=!0;const i=new Pe.A,o=e.href.clone();o.setQueryParameters(e.cookie);const a=n._ellipsoid??st.A.default;_p(o,n.camera,n.canvas,e.viewBoundScale,s.bbox,a),vp(n,i,o,{context:t.id}).then(function(e,t,i,n,r){return function(o){if(!n.contains(t.id))return;let s=!1;const a=Rh(o,"NetworkLinkControl",_h.kml);let l=0;if((0,N.A)(a)){if((0,N.A)(Rh(a,"Update",_h.kml)))return(0,xa.A)("kml-networkLinkControl-update","KML - NetworkLinkControl updates aren't supported."),t.updating=!1,void n.remove(t.id);t.cookie=(0,Ta.A)(Lh(a,"cookie",_h.kml)??""),l=Bh(a,"minRefreshPeriod",_h.kml)??0}const c=Ae.A.now(),u=t.refreshMode;if(u===hp.INTERVAL)(0,N.A)(a)&&(t.time=Math.max(l,t.time));else if(u===hp.EXPIRE){let e;if((0,N.A)(a)&&(e=Lh(a,"expires",_h.kml)),(0,N.A)(e))try{const i=Ae.A.fromIso8601(e),n=Ae.A.secondsDifference(i,c);n>0&&n<l&&Ae.A.addSeconds(c,l,i),t.time=i}catch(e){(0,xa.A)("kml-networkLinkControl-expires","KML - NetworkLinkControl expires is not a valid date"),s=!0}else(0,xa.A)("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element"),s=!0}const d=t.entity,h=e._entityCollection,p=i.values;function f(e){h.remove(e);const t=e._children,i=t.length;for(let e=0;e<i;++e)f(t[e])}h.suspendEvents();const m=h.values.slice();let g;for(g=0;g<m.length;++g){const e=m[g];e.parent===d&&(e.parent=void 0,f(e))}for(h.resumeEvents(),h.suspendEvents(),g=0;g<p.length;g++){const e=p[g];(0,N.A)(e.parent)||(e.parent=d,bp(e)),h.add(e)}h.resumeEvents(),s?n.remove(t.id):t.lastUpdated=c;const A=h.computeAvailability(),_=A.start,y=A.stop,v=Ae.A.equals(_,ft.A.MINIMUM_VALUE),w=Ae.A.equals(y,ft.A.MAXIMUM_VALUE);if(!v||!w){const t=e._clock;t.startTime===_&&t.stopTime===y||(t.startTime=_,t.stopTime=y,e._changed.raiseEvent(e))}t.updating=!1,t.needsUpdate=!1,e._refresh.raiseEvent(e,r.getUrlComponent(!0))}}(n,e,i,l,o)).catch(function(t){const i=`NetworkLink ${e.href} refresh failed: ${t}`;console.log(i),n._error.raiseEvent(n,i)}),c=!0}}l.set(e.id,e)}}),c&&(this._networkLinks=l,this._changed.raiseEvent(this)),!0},wp._DeferredLoading=vh,wp._getTimestamp=ya.A;const Sp=wp;var Cp=i(417496),Mp=i(644736),Ep=i(963503),Pp=i(563051),kp=i(379843),Op=i(810186),Rp=i(364360),Ip=i(570667),Dp=i(372891),Bp=i(302656),Lp=i(412605),Fp=i(759078),Np=i(459022),Vp=i(724883),Up=i(279436),zp=i(692296),Gp=i(759059),Kp=i(282323),qp=i(174068),Hp=i(307509);function Wp(){U.A.throwInstantiationError()}Wp.prototype.update=U.A.throwInstantiationError,Wp.prototype.getBoundingSphere=U.A.throwInstantiationError,Wp.prototype.isDestroyed=U.A.throwInstantiationError,Wp.prototype.destroy=U.A.throwInstantiationError;const jp=Wp;var $p=i(146511),Xp=i(802733);const Yp="http://www.google.com/kml/ext/2.2";function Zp(e){this._files={},this._promises=[],this._count=0,this._modelCallback=e}const Jp=/^data:image\/([^,;]+)/;function Qp(e,t){return function(i){e._files[t]=i}}function ef(e){this._time=e}function tf(){this._ids={},this._styles={},this._count=0}function nf(){this._ids={}}function rf(e){const t=(e=e??F.A.EMPTY_OBJECT).entities,i=e.kmz??!1;if(!(0,N.A)(t))throw new U.A("entities is required.");const n=rf._createState(e),r=t.values.filter(function(e){return!(0,N.A)(e.parent)}),o=n.kmlDoc,s=o.documentElement;s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",Yp);const a=o.createElement("Document");s.appendChild(a),sf(n,a,r),n.styleCache.save(a);const l=n.externalFileHandler;return l.promise.then(function(){const e=(new XMLSerializer).serializeToString(n.kmlDoc);return i?function(e,t){const i=(0,ma.A)("ThirdParty/Workers/z-worker-pako.js");Rl({workerScripts:{deflate:[i,"./pako_deflate.min.js"],inflate:[i,"./pako_inflate.min.js"]}});const n=new hu,r=new Dd(n);return r.add("doc.kml",new pu(e)).then(function(){const e=Object.keys(t);return of(r,e,t,0)}).then(function(){return r.close()}).then(function(e){return{kmz:e}})}(e,l.files):{kml:e,externalFiles:l.files}})}function of(e,t,i,n){if(t.length===n)return;const r=t[n];return e.add(r,new du(i[r])).then(function(){return of(e,t,i,n+1)})}function sf(e,t,i){const n=e.kmlDoc,r=e.styleCache,o=e.valueGetter,s=e.idManager,a=i.length;let l,c,u;for(let d=0;d<a;++d){const a=i[d];let h;l=[],c=[],u=[],uf(e,a,c,u),ff(e,a.polyline,c,u),gf(e,a.rectangle,c,u,l),gf(e,a.polygon,c,u,l),_f(e,a,a.model,c,u);const p=a.availability;(0,N.A)(p)&&(h=n.createElement("TimeSpan"),Ae.A.equals(p.start,ft.A.MINIMUM_VALUE)||h.appendChild(bf(n,"begin",Ae.A.toIso8601(p.start))),Ae.A.equals(p.stop,ft.A.MAXIMUM_VALUE)||h.appendChild(bf(n,"end",Ae.A.toIso8601(p.stop))));for(let e=0;e<l.length;++e){const i=l[e];i.setAttribute("id",s.get(a.id)),i.appendChild(bf(n,"name",a.name)),i.appendChild(bf(n,"visibility",a.show)),i.appendChild(bf(n,"description",a.description)),(0,N.A)(h)&&i.appendChild(h),t.appendChild(i)}const f=c.length;if(f>0){const e=n.createElement("Placemark");e.setAttribute("id",s.get(a.id));let i=a.name;const l=a.label;if((0,N.A)(l)){const e=n.createElement("LabelStyle"),t=o.get(l.text);i=(0,N.A)(t)&&t.length>0?t:i;const r=o.getColor(l.fillColor);(0,N.A)(r)&&(e.appendChild(bf(n,"color",r)),e.appendChild(bf(n,"colorMode","normal")));const s=o.get(l.scale);(0,N.A)(s)&&e.appendChild(bf(n,"scale",s)),u.push(e)}e.appendChild(bf(n,"name",i)),e.appendChild(bf(n,"visibility",a.show)),e.appendChild(bf(n,"description",a.description)),(0,N.A)(h)&&e.appendChild(h),t.appendChild(e);const d=u.length;if(d>0){const t=n.createElement("Style");for(let e=0;e<d;++e)t.appendChild(u[e]);e.appendChild(bf(n,"styleUrl",r.get(t)))}if(1===c.length)e.appendChild(c[0]);else if(c.length>1){const t=n.createElement("MultiGeometry");for(let e=0;e<f;++e)t.appendChild(c[e]);e.appendChild(t)}}const m=a._children;if(m.length>0){const i=n.createElement("Folder");i.setAttribute("id",s.get(a.id)),i.appendChild(bf(n,"name",a.name)),i.appendChild(bf(n,"visibility",a.show)),i.appendChild(bf(n,"description",a.description)),t.appendChild(i),sf(e,i,m)}}}Zp.prototype.texture=function(e){const t=this;let i;if("string"==typeof e||e instanceof bt.A){if(!(e=bt.A.createIfNeeded(e)).isDataUri)return e.url;const n=e.url.match(Jp);i="texture_"+ ++this._count,(0,N.A)(n)&&(i+=`.${n[1]}`);const r=e.fetchBlob().then(function(e){t._files[i]=e});return this._promises.push(r),i}if(e instanceof HTMLCanvasElement){i=`texture_${++this._count}.png`;const n=new Promise(n=>{e.toBlob(function(e){t._files[i]=e,n()})});return this._promises.push(n),i}return""},Zp.prototype.model=function(e,t){const i=this._modelCallback;if(!(0,N.A)(i))throw new xt.A("Encountered a model entity while exporting to KML, but no model callback was supplied.");const n={},r=i(e,t,n);for(const e in n)if(n.hasOwnProperty(e)){const t=Promise.resolve(n[e]);this._promises.push(t),t.then(Qp(this,e))}return r},Object.defineProperties(Zp.prototype,{promise:{get:function(){return Promise.all(this._promises)}},files:{get:function(){return this._files}}}),ef.prototype.get=function(e,t,i){let n;return(0,N.A)(e)&&(n=(0,N.A)(e.getValue)?e.getValue(this._time,i):e),n??t},ef.prototype.getColor=function(e,t){const i=this.get(e,t);if((0,N.A)(i))return xf(i)},ef.prototype.getMaterialType=function(e){if((0,N.A)(e))return e.getType(this._time)},tf.prototype.get=function(e){const t=this._ids,i=e.innerHTML;if((0,N.A)(t[i]))return t[i];let n="style-"+ ++this._count;return e.setAttribute("id",n),n=`#${n}`,t[i]=n,this._styles[i]=e,n},tf.prototype.save=function(e){const t=this._styles,i=e.childNodes[0];for(const n in t)t.hasOwnProperty(n)&&e.insertBefore(t[n],i)},nf.prototype.get=function(e){if(!(0,N.A)(e))return this.get((0,L.A)());const t=this._ids;return(0,N.A)(t[e])?`${e.toString()}-${++t[e]}`:(t[e]=0,e)},rf._createState=function(e){const t=e.entities,i=new tf,n=t.computeAvailability(),r=(0,N.A)(e.time)?e.time:n.start;let o=e.defaultAvailability??n;const s=e.sampleDuration??60;o.start===ft.A.MINIMUM_VALUE?o.stop===ft.A.MAXIMUM_VALUE?o=new Ct.A:Ae.A.addSeconds(o.stop,-10*s,o.start):o.stop===ft.A.MAXIMUM_VALUE&&Ae.A.addSeconds(o.start,10*s,o.stop);const a=new Zp(e.modelCallback);return{kmlDoc:document.implementation.createDocument("http://www.opengis.net/kml/2.2","kml"),ellipsoid:e.ellipsoid??st.A.default,idManager:new nf,styleCache:i,externalFileHandler:a,time:r,valueGetter:new ef(r),sampleDuration:s,defaultAvailability:new Mt.A([o])}};const af=new D.A,lf=new et.A,cf=new Ae.A;function uf(e,t,i,n){const r=e.kmlDoc,o=e.ellipsoid,s=e.valueGetter,a=t.billboard??t.point;if(!(0,N.A)(a)&&!(0,N.A)(t.path))return;const l=t.position;if(!l.isConstant)return void df(e,t,a,i,n);s.get(l,void 0,af);const c=bf(r,"coordinates",wf(af,o)),u=r.createElement("Point"),d=r.createElement("altitudeMode");d.appendChild(vf(e,a.heightReference)),u.appendChild(d),u.appendChild(c),i.push(u);const h=a instanceof oe.A?pf(e,a):hf(e,a);n.push(h)}function df(e,t,i,n,r){const o=e.kmlDoc,s=e.ellipsoid,a=e.valueGetter;let l;const c=t.position;let u=!0;c instanceof qe.A?(l=c.intervals,u=!1):l=t.availability??e.defaultAvailability;const d=i instanceof Qt.A;let h,p,f;const m=[];for(h=0;h<l.length;++h){const t=l.get(h);let n=u?c:t.data;const r=o.createElement("altitudeMode");n instanceof ch.A?(n=n._value,r.appendChild(vf(e,kt.Ay.CLAMP_TO_GROUND))):(0,N.A)(i)?r.appendChild(vf(e,i.heightReference)):r.appendChild(vf(e,kt.Ay.NONE));const g=[],A=[];if(n.isConstant){a.get(n,void 0,af);const e=bf(o,"coordinates",wf(af,s));g.push(Ae.A.toIso8601(t.start)),A.push(e),g.push(Ae.A.toIso8601(t.stop)),A.push(e)}else if(n instanceof ki.A)for(f=n._property._times,p=0;p<f.length;++p)g.push(Ae.A.toIso8601(f[p])),n.getValueInReferenceFrame(f[p],wt.A.FIXED,af),A.push(wf(af,s));else if(n instanceof Oi.A){f=n._times;const e=n._values;for(p=0;p<f.length;++p)g.push(Ae.A.toIso8601(f[p])),D.A.fromArray(e,3*p,af),A.push(wf(af,s))}else{const i=e.sampleDuration;t.start.clone(cf),t.isStartIncluded||Ae.A.addSeconds(cf,i,cf);const r=t.stop;for(;Ae.A.lessThan(cf,r);)n.getValue(cf,af),g.push(Ae.A.toIso8601(cf)),A.push(wf(af,s)),Ae.A.addSeconds(cf,i,cf);t.isStopIncluded&&Ae.A.equals(cf,r)&&(n.getValue(cf,af),g.push(Ae.A.toIso8601(cf)),A.push(wf(af,s)))}const _=o.createElementNS(Yp,"Track");_.appendChild(r);for(let e=0;e<g.length;++e){const t=bf(o,"when",g[e]),i=bf(o,"coord",A[e],Yp);_.appendChild(t),_.appendChild(i)}d&&_.appendChild(Af(e,i)),m.push(_)}if(1===m.length)n.push(m[0]);else if(m.length>1){const e=o.createElementNS(Yp,"MultiTrack");for(h=0;h<m.length;++h)e.appendChild(m[h]);n.push(e)}if((0,N.A)(i)&&!d){const t=i instanceof oe.A?pf(e,i):hf(e,i);r.push(t)}const g=t.path;if((0,N.A)(g)){const t=a.get(g.width),i=g.material;if((0,N.A)(i)||(0,N.A)(t)){const n=o.createElement("LineStyle");(0,N.A)(t)&&n.appendChild(bf(o,"width",t)),yf(e,i,n),r.push(n)}}}function hf(e,t){const i=e.kmlDoc,n=e.valueGetter,r=i.createElement("IconStyle"),o=n.getColor(t.color);(0,N.A)(o)&&(r.appendChild(bf(i,"color",o)),r.appendChild(bf(i,"colorMode","normal")));const s=n.get(t.pixelSize);return(0,N.A)(s)&&r.appendChild(bf(i,"scale",s/32)),r}function pf(e,t){const i=e.kmlDoc,n=e.valueGetter,r=e.externalFileHandler,o=i.createElement("IconStyle");let s=n.get(t.image);if((0,N.A)(s)){s=r.texture(s);const e=i.createElement("Icon");e.appendChild(bf(i,"href",s));const a=n.get(t.imageSubRegion);(0,N.A)(a)&&(e.appendChild(bf(i,"x",a.x,Yp)),e.appendChild(bf(i,"y",a.y,Yp)),e.appendChild(bf(i,"w",a.width,Yp)),e.appendChild(bf(i,"h",a.height,Yp))),o.appendChild(e)}const a=n.getColor(t.color);(0,N.A)(a)&&(o.appendChild(bf(i,"color",a)),o.appendChild(bf(i,"colorMode","normal")));let l=n.get(t.scale);(0,N.A)(l)&&o.appendChild(bf(i,"scale",l));const c=n.get(t.pixelOffset);if((0,N.A)(c)){l=l??1,fe.A.divideByScalar(c,l,c);const e=n.get(t.width,32),r=n.get(t.height,32),s=n.get(t.horizontalOrigin,Ot.A.CENTER);s===Ot.A.CENTER?c.x-=.5*e:s===Ot.A.RIGHT&&(c.x-=e);const a=n.get(t.verticalOrigin,Dt.A.CENTER);a===Dt.A.TOP?c.y+=r:a===Dt.A.CENTER&&(c.y+=.5*r);const u=i.createElement("hotSpot");u.setAttribute("x",-c.x),u.setAttribute("y",c.y),u.setAttribute("xunits","pixels"),u.setAttribute("yunits","pixels"),o.appendChild(u)}let u=n.get(t.rotation);const d=n.get(t.alignedAxis);return(0,N.A)(u)&&D.A.equals(D.A.UNIT_Z,d)&&(u=Me.A.toDegrees(-u),0===u&&(u=360),o.appendChild(bf(i,"heading",u))),o}function ff(e,t,i,n){const r=e.kmlDoc,o=e.ellipsoid,s=e.valueGetter;if(!(0,N.A)(t))return;const a=r.createElement("LineString"),l=r.createElement("altitudeMode"),c=s.get(t.clampToGround,!1);let u;c?(a.appendChild(bf(r,"tessellate",!0)),u=r.createTextNode("clampToGround")):u=r.createTextNode("absolute"),l.appendChild(u),a.appendChild(l);const d=t.positions,h=bf(r,"coordinates",wf(s.get(d),o));a.appendChild(h);const p=s.get(t.zIndex);c&&(0,N.A)(p)&&a.appendChild(bf(r,"drawOrder",p,Yp)),i.push(a);const f=r.createElement("LineStyle"),m=s.get(t.width);(0,N.A)(m)&&f.appendChild(bf(r,"width",m)),yf(e,t.material,f),n.push(f)}function mf(e,t,i,n){const r=e.kmlDoc,o=e.ellipsoid,s=[],a=t.length;for(let e=0;e<a;++e)et.A.fromCartesian(t[e],o,lf),s.push(`${Me.A.toDegrees(lf.longitude)},${Me.A.toDegrees(lf.latitude)},${n?lf.height:i}`);const l=bf(r,"coordinates",s.join(" ")),c=r.createElement("LinearRing");return c.appendChild(l),c}function gf(e,t,i,n,r){const o=e.kmlDoc,s=e.valueGetter;if(!(0,N.A)(t))return;const a=t instanceof Mi.A;if(a&&"Image"===s.getMaterialType(t.material))return void function(e,t,i){const n=e.kmlDoc,r=e.valueGetter,o=e.externalFileHandler,s=n.createElement("GroundOverlay"),a=n.createElement("altitudeMode");a.appendChild(vf(e,t.heightReference)),s.appendChild(a);const l=r.get(t.height);(0,N.A)(l)&&s.appendChild(bf(n,"altitude",l));const c=r.get(t.coordinates),u=n.createElement("LatLonBox");u.appendChild(bf(n,"north",Me.A.toDegrees(c.north))),u.appendChild(bf(n,"south",Me.A.toDegrees(c.south))),u.appendChild(bf(n,"east",Me.A.toDegrees(c.east))),u.appendChild(bf(n,"west",Me.A.toDegrees(c.west))),s.appendChild(u);const d=r.get(t.material),h=o.texture(d.image),p=n.createElement("Icon");p.appendChild(bf(n,"href",h)),s.appendChild(p);const f=d.color;(0,N.A)(f)&&s.appendChild(bf(n,"color",xf(d.color))),i.push(s)}(e,t,r);const l=o.createElement("Polygon"),c=s.get(t.extrudedHeight,0);c>0&&l.appendChild(bf(o,"extrude",!0));const u=a?function(e,t,i){const n=e.kmlDoc,r=e.valueGetter;let o=r.get(t.height,0);i>0&&(o=i);const s=t.coordinates,a=r.get(s),l=[],c=[vt.A.northeast,vt.A.southeast,vt.A.southwest,vt.A.northwest];for(let e=0;e<4;++e)c[e](a,lf),l.push(`${Me.A.toDegrees(lf.longitude)},${Me.A.toDegrees(lf.latitude)},${o}`);const u=bf(n,"coordinates",l.join(" ")),d=n.createElement("outerBoundaryIs"),h=n.createElement("LinearRing");return h.appendChild(u),d.appendChild(h),[d]}(e,t,c):function(e,t,i){const n=e.kmlDoc,r=e.valueGetter;let o=r.get(t.height,0);const s=r.get(t.perPositionHeight,!1);!s&&i>0&&(o=i);const a=[],l=t.hierarchy,c=r.get(l),u=Array.isArray(c)?c:c.positions,d=n.createElement("outerBoundaryIs");d.appendChild(mf(e,u,o,s)),a.push(d);const h=c.holes;if((0,N.A)(h)){const t=h.length;for(let i=0;i<t;++i){const t=n.createElement("innerBoundaryIs");t.appendChild(mf(e,h[i].positions,o,s)),a.push(t)}}return a}(e,t,c),d=u.length;for(let e=0;e<d;++e)l.appendChild(u[e]);const h=o.createElement("altitudeMode");h.appendChild(vf(e,t.heightReference)),l.appendChild(h),i.push(l);const p=o.createElement("PolyStyle"),f=s.get(t.fill,!1);f&&p.appendChild(bf(o,"fill",f)),yf(e,t.material,p);const m=s.get(t.outline,!1);if(m){p.appendChild(bf(o,"outline",m));const e=o.createElement("LineStyle"),i=s.get(t.outlineWidth,1);e.appendChild(bf(o,"width",i));const r=s.getColor(t.outlineColor,me.A.BLACK);e.appendChild(bf(o,"color",r)),e.appendChild(bf(o,"colorMode","normal")),n.push(e)}n.push(p)}function Af(e,t){const i=e.kmlDoc,n=e.valueGetter,r=e.externalFileHandler,o=i.createElement("Model"),s=n.get(t.scale);if((0,N.A)(s)){const e=i.createElement("scale");e.appendChild(bf(i,"x",s)),e.appendChild(bf(i,"y",s)),e.appendChild(bf(i,"z",s)),o.appendChild(e)}const a=i.createElement("Link"),l=r.model(t,e.time);return a.appendChild(bf(i,"href",l)),o.appendChild(a),o}function _f(e,t,i,n,r){const o=e.kmlDoc,s=e.ellipsoid,a=e.valueGetter;if(!(0,N.A)(i))return;const l=t.position;if(!l.isConstant)return void df(e,t,i,n,r);const c=Af(e,i),u=o.createElement("altitudeMode");u.appendChild(vf(e,i.heightReference)),c.appendChild(u),a.get(l,void 0,af),et.A.fromCartesian(af,s,lf);const d=o.createElement("Location");d.appendChild(bf(o,"longitude",Me.A.toDegrees(lf.longitude))),d.appendChild(bf(o,"latitude",Me.A.toDegrees(lf.latitude))),d.appendChild(bf(o,"altitude",lf.height)),c.appendChild(d),n.push(c)}function yf(e,t,i){const n=e.kmlDoc,r=e.valueGetter;if(!(0,N.A)(t))return;const o=r.get(t);if(!(0,N.A)(o))return;let s,a,l;switch(r.getMaterialType(t)){case"Image":s=xf(me.A.WHITE);break;case"Color":case"Grid":case"PolylineGlow":case"PolylineArrow":case"PolylineDash":s=xf(o.color);break;case"PolylineOutline":s=xf(o.color),a=xf(o.outlineColor),l=o.outlineWidth,i.appendChild(bf(n,"outerColor",a,Yp)),i.appendChild(bf(n,"outerWidth",l,Yp));break;case"Stripe":s=xf(o.oddColor)}(0,N.A)(s)&&(i.appendChild(bf(n,"color",s)),i.appendChild(bf(n,"colorMode","normal")))}function vf(e,t){const i=e.kmlDoc;let n;switch(e.valueGetter.get(t,kt.Ay.NONE)){case kt.Ay.NONE:n=i.createTextNode("absolute");break;case kt.Ay.CLAMP_TO_GROUND:n=i.createTextNode("clampToGround");break;case kt.Ay.RELATIVE_TO_GROUND:n=i.createTextNode("relativeToGround")}return n}function wf(e,t){Array.isArray(e)||(e=[e]);const i=e.length,n=[];for(let r=0;r<i;++r)et.A.fromCartesian(e[r],t,lf),n.push(`${Me.A.toDegrees(lf.longitude)},${Me.A.toDegrees(lf.latitude)},${lf.height}`);return n.join(" ")}function bf(e,t,i,n){"boolean"==typeof(i=i??"")&&(i=i?"1":"0");const r=(0,N.A)(n)?e.createElementNS(n,t):e.createElement(t),o="string"===i&&-1!==i.indexOf("<")?e.createCDATASection(i):e.createTextNode(i);return r.appendChild(o),r}function xf(e){let t="";const i=e.toBytes();for(let e=3;e>=0;--e)t+=i[e]<16?`0${i[e].toString(16)}`:i[e].toString(16);return t}const Tf=rf;var Sf=i(764729),Cf=i(756995),Mf=i(468649),Ef=i(952738),Pf=i(412562),kf=i(562523);const Of="uniform sampler2D u_noiseTexture;\nuniform vec3 u_noiseTextureDimensions;\nuniform float u_noiseDetail;\nin vec2 v_offset;\nin vec3 v_maximumSize;\nin vec4 v_color;\nin float v_slice;\nin float v_brightness;\n\nfloat wrap(float value, float rangeLength) {\n    if(value < 0.0) {\n        float absValue = abs(value);\n        float modValue = mod(absValue, rangeLength);\n        return mod(rangeLength - modValue, rangeLength);\n    }\n    return mod(value, rangeLength);\n}\n\nvec3 wrapVec(vec3 value, float rangeLength) {\n    return vec3(wrap(value.x, rangeLength),\n                wrap(value.y, rangeLength),\n                wrap(value.z, rangeLength));\n}\n\nvec2 voxelToUV(vec3 voxelIndex) {\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    float noiseTextureRows = u_noiseTextureDimensions.y;\n    float inverseNoiseTextureRows = u_noiseTextureDimensions.z;\n\n    float textureSliceWidthSquared = textureSliceWidth * textureSliceWidth;\n    vec2 inverseNoiseTextureDimensions = vec2(noiseTextureRows / textureSliceWidthSquared,\n                                            inverseNoiseTextureRows / textureSliceWidth);\n    vec3 wrappedIndex = wrapVec(voxelIndex, textureSliceWidth);\n    float column = mod(wrappedIndex.z, textureSliceWidth * inverseNoiseTextureRows);\n    float row = floor(wrappedIndex.z / textureSliceWidth * noiseTextureRows);\n\n    float xPixelCoord = wrappedIndex.x + column * textureSliceWidth;\n    float yPixelCoord = wrappedIndex.y + row * textureSliceWidth;\n    return vec2(xPixelCoord, yPixelCoord) * inverseNoiseTextureDimensions;\n}\n\n// Interpolate a voxel with its neighbor (along the positive X-axis)\nvec4 lerpSamplesX(vec3 voxelIndex, float x) {\n    vec2 uv0 = voxelToUV(voxelIndex);\n    vec2 uv1 = voxelToUV(voxelIndex + vec3(1.0, 0.0, 0.0));\n    vec4 sample0 = texture(u_noiseTexture, uv0);\n    vec4 sample1 = texture(u_noiseTexture, uv1);\n    return mix(sample0, sample1, x);\n}\n\nvec4 sampleNoiseTexture(vec3 position) {\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    vec3 recenteredPos = position + vec3(textureSliceWidth / 2.0);\n    vec3 lerpValue = fract(recenteredPos);\n    vec3 voxelIndex = floor(recenteredPos);\n\n    vec4 xLerp00 = lerpSamplesX(voxelIndex, lerpValue.x);\n    vec4 xLerp01 = lerpSamplesX(voxelIndex + vec3(0.0, 0.0, 1.0), lerpValue.x);\n    vec4 xLerp10 = lerpSamplesX(voxelIndex + vec3(0.0, 1.0, 0.0), lerpValue.x);\n    vec4 xLerp11 = lerpSamplesX(voxelIndex + vec3(0.0, 1.0, 1.0), lerpValue.x);\n\n    vec4 yLerp0 = mix(xLerp00, xLerp10, lerpValue.y);\n    vec4 yLerp1 = mix(xLerp01, xLerp11, lerpValue.y);\n    return mix(yLerp0, yLerp1, lerpValue.z);\n}\n\n// Intersection with a unit sphere with radius 0.5 at center (0, 0, 0).\nbool intersectSphere(vec3 origin, vec3 dir, float slice,\n                     out vec3 point, out vec3 normal) {\n    float A = dot(dir, dir);\n    float B = dot(origin, dir);\n    float C = dot(origin, origin) - 0.25;\n    float discriminant = (B * B) - (A * C);\n    if(discriminant < 0.0) {\n        return false;\n    }\n    float root = sqrt(discriminant);\n    float t = (-B - root) / A;\n    if(t < 0.0) {\n        t = (-B + root) / A;\n    }\n    point = origin + t * dir;\n\n    if(slice >= 0.0) {\n        point.z = (slice / 2.0) - 0.5;\n        if(length(point) > 0.5) {\n            return false;\n        }\n    }\n\n    normal = normalize(point);\n    point -= czm_epsilon2 * normal;\n    return true;\n}\n\n// Transforms the ray origin and direction into unit sphere space,\n// then transforms the result back into the ellipsoid's space.\nbool intersectEllipsoid(vec3 origin, vec3 dir, vec3 center, vec3 scale, float slice,\n                        out vec3 point, out vec3 normal) {\n    if(scale.x <= 0.01 || scale.y < 0.01 || scale.z < 0.01) {\n        return false;\n    }\n\n    vec3 o = (origin - center) / scale;\n    vec3 d = dir / scale;\n    vec3 p, n;\n    bool intersected = intersectSphere(o, d, slice, p, n);\n    if(intersected) {\n        point = (p * scale) + center;\n        normal = n;\n    }\n    return intersected;\n}\n\n// Assume that if phase shift is being called for octave i,\n// the frequency is of i - 1. This saves us from doing extra\n// division / multiplication operations.\nvec2 phaseShift2D(vec2 p, vec2 freq) {\n    return (czm_pi / 2.0) * sin(freq.yx * p.yx);\n}\n\nvec2 phaseShift3D(vec3 p, vec2 freq) {\n    return phaseShift2D(p.xy, freq) + czm_pi * vec2(sin(freq.x * p.z));\n}\n\n// The cloud texture function derived from Gardner's 1985 paper,\n// \"Visual Simulation of Clouds.\"\n// https://www.cs.drexel.edu/~david/Classes/Papers/p297-gardner.pdf\nconst float T0    = 0.6;  // contrast of the texture pattern\nconst float k     = 0.1;  // computed to produce a maximum value of 1\nconst float C0    = 0.8;  // coefficient\nconst float FX0   = 0.6;  // frequency X\nconst float FY0   = 0.6;  // frequency Y\nconst int octaves = 5;\n\nfloat T(vec3 point) {\n    vec2 sum = vec2(0.0);\n    float Ci = C0;\n    vec2 FXY = vec2(FX0, FY0);\n    vec2 PXY = vec2(0.0);\n    for(int i = 1; i <= octaves; i++) {\n        PXY = phaseShift3D(point, FXY);\n        Ci *= 0.707;\n        FXY *= 2.0;\n        vec2 sinTerm = sin(FXY * point.xy + PXY);\n        sum += Ci * sinTerm + vec2(T0);\n    }\n    return k * sum.x * sum.y;\n}\n\nconst float a = 0.5;  // fraction of surface reflection due to ambient or scattered light,\nconst float t = 0.4;  // fraction of texture shading\nconst float s = 0.25; // fraction of specular reflection\n\nfloat I(float Id, float Is, float It) {\n    return (1.0 - a) * ((1.0 - t) * ((1.0 - s) * Id + s * Is) + t * It) + a;\n}\n\nconst vec3 lightDir = normalize(vec3(0.2, -1.0, 0.7));\n\nvec4 drawCloud(vec3 rayOrigin, vec3 rayDir, vec3 cloudCenter, vec3 cloudScale, float cloudSlice,\n               float brightness) {\n    vec3 cloudPoint, cloudNormal;\n    if(!intersectEllipsoid(rayOrigin, rayDir, cloudCenter, cloudScale, cloudSlice,\n                            cloudPoint, cloudNormal)) {\n        return vec4(0.0);\n    }\n\n    float Id = clamp(dot(cloudNormal, -lightDir), 0.0, 1.0);  // diffuse reflection\n    float Is = max(pow(dot(-lightDir, -rayDir), 2.0), 0.0);   // specular reflection\n    float It = T(cloudPoint);                                 // texture function\n    float intensity = I(Id, Is, It);\n    vec3 color = vec3(intensity * clamp(brightness, 0.1, 1.0));\n\n    vec4 noise = sampleNoiseTexture(u_noiseDetail * cloudPoint);\n    float W = noise.x;\n    float W2 = noise.y;\n    float W3 = noise.z;\n\n    // The dot product between the cloud's normal and the ray's direction is greatest\n    // in the center of the ellipsoid's surface. It decreases towards the edge.\n    // Thus, it is used to blur the areas leading to the edges of the ellipsoid,\n    // so that no harsh lines appear.\n\n    // The first (and biggest) layer of worley noise is then subtracted from this.\n    // The final result is scaled up so that the base cloud is not too translucent.\n    float ndDot = clamp(dot(cloudNormal, -rayDir), 0.0, 1.0);\n    float TR = pow(ndDot, 3.0) - W; // translucency\n    TR *= 1.3;\n\n    // Subtracting the second and third layers of worley noise is more complicated.\n    // If these layers of noise were simply subtracted from the current translucency,\n    // the shape derived from the first layer of noise would be completely deleted.\n    // The erosion of this noise should thus be constricted to the edges of the cloud.\n    // However, because the edges of the ellipsoid were already blurred away, mapping\n    // the noise to (1.0 - ndDot) will have no impact on most of the cloud's appearance.\n    // The value of (0.5 - ndDot) provides the best compromise.\n    float minusDot = 0.5 - ndDot;\n\n    // Even with the previous calculation, subtracting the second layer of wnoise\n    // erode too much of the cloud. The addition of it, however, will detailed\n    // volume to the cloud. As long as the noise is only added and not subtracted,\n    // the results are aesthetically pleasing.\n\n    // The minusDot product is mapped in a way that it is larger at the edges of\n    // the ellipsoid, so a subtraction and min operation are used instead of\n    // an addition and max one.\n    TR -= min(minusDot * W2, 0.0);\n\n    // The third level of worley noise is subtracted from the result, with some\n    // modifications. First, a scalar is added to minusDot so that the noise\n    // starts affecting the shape farther away from the center of the ellipsoid's\n    // surface. Then, it is scaled down so its impact is not too intense.\n    TR -= 0.8 * (minusDot + 0.25) * W3;\n\n    // The texture function's shading does not correlate with the shape of the cloud\n    // produced by the layers of noise, so an extra shading scalar is calculated.\n    // The darkest areas of the cloud are assigned to be where the noise erodes\n    // the cloud the most. This is then interpolated based on the translucency\n    // and the diffuse shading term of that point in the cloud.\n    float shading = mix(1.0 - 0.8 * W * W, 1.0, Id * TR);\n\n    // To avoid values that are too dark, this scalar is increased by a small amount\n    // and clamped so it never goes to zero.\n    shading = clamp(shading + 0.2, 0.3, 1.0);\n\n    // Finally, the contrast of the cloud's color is increased.\n    vec3 finalColor = mix(vec3(0.5), shading * color, 1.15);\n    return vec4(finalColor, clamp(TR, 0.0, 1.0)) * v_color;\n}\n\nvoid main() {\n#ifdef DEBUG_BILLBOARDS\n    out_FragColor = vec4(0.0, 0.5, 0.5, 1.0);\n#endif\n    // To avoid calculations with high values,\n    // we raycast from an arbitrarily smaller space.\n    vec2 coordinate = v_maximumSize.xy * v_offset;\n\n    vec3 ellipsoidScale = 0.82 * v_maximumSize;\n    vec3 ellipsoidCenter = vec3(0.0);\n\n    float zOffset = max(ellipsoidScale.z - 10.0, 0.0);\n    vec3 eye = vec3(0, 0, -10.0 - zOffset);\n    vec3 rayDir = normalize(vec3(coordinate, 1.0) - eye);\n    vec3 rayOrigin = eye;\n#ifdef DEBUG_ELLIPSOIDS\n    vec3 point, normal;\n    if(intersectEllipsoid(rayOrigin, rayDir, ellipsoidCenter, ellipsoidScale, v_slice,\n                          point, normal)) {\n        out_FragColor = v_brightness * v_color;\n    }\n#else\n#ifndef DEBUG_BILLBOARDS\n    vec4 cloud = drawCloud(rayOrigin, rayDir,\n                           ellipsoidCenter, ellipsoidScale, v_slice, v_brightness);\n    if(cloud.w < 0.01) {\n        discard;\n    }\n    out_FragColor = cloud;\n#endif\n#endif\n}\n",Rf="#ifdef INSTANCED\nin vec2 direction;\n#endif\nin vec4 positionHighAndScaleX;\nin vec4 positionLowAndScaleY;\nin vec4 packedAttribute0;\nin vec4 packedAttribute1;\nin vec4 color;\n\nout vec2 v_offset;\nout vec3 v_maximumSize;\nout vec4 v_color;\nout float v_slice;\nout float v_brightness;\n\nvoid main() {\n    // Unpack attributes.\n    vec3 positionHigh = positionHighAndScaleX.xyz;\n    vec3 positionLow = positionLowAndScaleY.xyz;\n    vec2 scale = vec2(positionHighAndScaleX.w, positionLowAndScaleY.w);\n\n    float show = packedAttribute0.x;\n    float brightness = packedAttribute0.y;\n    vec2 coordinates = packedAttribute0.wz;\n    vec3 maximumSize = packedAttribute1.xyz;\n    float slice = packedAttribute1.w;\n\n#ifdef INSTANCED\n    vec2 dir = direction;\n#else\n    vec2 dir = coordinates;\n#endif\n\n    vec2 offset = dir - vec2(0.5, 0.5);\n    vec2 scaledOffset = scale * offset;\n    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);\n    vec4 positionEC = czm_modelViewRelativeToEye * p;\n    positionEC.xy += scaledOffset;\n    \n    positionEC.xyz *= show;\n    gl_Position = czm_projection * positionEC;\n\n    v_offset = offset;\n    v_maximumSize = maximumSize;\n    v_color = color;\n    v_slice = slice;\n    v_brightness = brightness;\n}\n",If="uniform vec3 u_noiseTextureDimensions;\nuniform float u_noiseDetail;\nuniform vec3 u_noiseOffset;\nin vec2 v_position;\n\nfloat wrap(float value, float rangeLength) {\n    if(value < 0.0) {\n        float absValue = abs(value);\n        float modValue = mod(absValue, rangeLength);\n        return mod(rangeLength - modValue, rangeLength);\n    }\n    return mod(value, rangeLength);\n}\n\nvec3 wrapVec(vec3 value, float rangeLength) {\n    return vec3(wrap(value.x, rangeLength),\n                wrap(value.y, rangeLength),\n                wrap(value.z, rangeLength));\n}\n\nvec3 random3(vec3 p) {\n    float dot1 = dot(p, vec3(127.1, 311.7, 932.8));\n    float dot2 = dot(p, vec3(269.5, 183.3, 421.4));\n    return fract(vec3(sin(dot1 - dot2), cos(dot1 * dot2), dot1 * dot2));\n}\n\n// Frequency corresponds to cell size.\n// The higher the frequency, the smaller the cell size.\nvec3 getWorleyCellPoint(vec3 centerCell, vec3 offset, float freq) {\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    vec3 cell = centerCell + offset;\n    cell = wrapVec(cell, textureSliceWidth / u_noiseDetail);\n    cell += floor(u_noiseOffset / u_noiseDetail);\n    vec3 p = offset + random3(cell);\n    return p;\n}\n\nfloat worleyNoise(vec3 p, float freq) {\n    vec3 centerCell = floor(p * freq);\n    vec3 pointInCell = fract(p * freq);\n    float shortestDistance = 1000.0;\n\n    for(float z = -1.0; z <= 1.0; z++) {\n        for(float y = -1.0; y <= 1.0; y++) {\n            for(float x = -1.0; x <= 1.0; x++) {\n                vec3 offset = vec3(x, y, z);\n                vec3 point = getWorleyCellPoint(centerCell, offset, freq);\n\n                float distance = length(pointInCell - point);\n                if(distance < shortestDistance) {\n                    shortestDistance = distance;\n                }\n            }\n        }\n    }\n\n    return shortestDistance;\n}\n\nconst float MAX_FBM_ITERATIONS = 10.0;\n\nfloat worleyFBMNoise(vec3 p, float octaves, float scale) {\n    float noise = 0.0;\n    float freq = 1.0;\n    float persistence = 0.625;\n    for(float i = 0.0; i < MAX_FBM_ITERATIONS; i++) {\n        if(i >= octaves) {\n            break;\n        }\n\n        noise += worleyNoise(p * scale, freq * scale) * persistence;\n        persistence *= 0.5;\n        freq *= 2.0;\n    }\n    return noise;\n}\n\nvoid main() {\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    float inverseNoiseTextureRows = u_noiseTextureDimensions.z;\n    float x = mod(v_position.x, textureSliceWidth);\n    float y = mod(v_position.y, textureSliceWidth);\n    float sliceRow = floor(v_position.y / textureSliceWidth);\n    float z = floor(v_position.x / textureSliceWidth) + sliceRow * inverseNoiseTextureRows * textureSliceWidth;\n\n    vec3 position = vec3(x, y, z);\n    position /= u_noiseDetail;\n    float worley0 = clamp(worleyFBMNoise(position, 3.0, 1.0), 0.0, 1.0);\n    float worley1 = clamp(worleyFBMNoise(position, 3.0, 2.0), 0.0, 1.0);\n    float worley2 = clamp(worleyFBMNoise(position, 3.0, 3.0), 0.0, 1.0);\n    out_FragColor = vec4(worley0, worley1, worley2, 1.0);\n}\n",Df="uniform vec3 u_noiseTextureDimensions;\nin vec2 position;\n\nout vec2 v_position;\n\nvoid main()\n{\n    gl_Position = vec4(position, 0.1, 1.0);\n\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    float noiseTextureRows = u_noiseTextureDimensions.y;\n    float inverseNoiseTextureRows = u_noiseTextureDimensions.z;\n    vec2 transformedPos = (position * 0.5) + vec2(0.5);\n    transformedPos *= textureSliceWidth;\n    transformedPos.x *= textureSliceWidth * inverseNoiseTextureRows;\n    transformedPos.y *= noiseTextureRows;\n    v_position = transformedPos;\n}\n";var Bf=i(212597),Lf=i(615954),Ff=i(635582),Nf=i(198709),Vf=i(722856),Uf=i(864248),zf=i(710434),Gf=i(77202),Kf=i(559352),qf=i(437736),Hf=i(689520),Wf=i(805696),jf=i(691760),$f=i(423603),Xf=i(208276),Yf=i(510148),Zf=i(291848),Jf=i(78149),Qf=i(682091),em=i(749513),tm=i(632577),im=i(700241),nm=i(575513),rm=i(57723),om=i(814617),sm=i(988617),am=i(275058),lm=i(208898),cm=i(710807),um=i(753543),dm=i(488961),hm=i(370298),pm=i(692352),fm=i(143344),mm=i(326453),gm=i(789221),Am=i(860139),_m=i(40510),ym=i(752123),vm=i(154920),wm=i(296312),bm=i(747776),xm=i(971532);const Tm="\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    czm_materialInput materialInput;\n    \n    materialInput.s = v_textureCoordinates.s;\n    materialInput.st = v_textureCoordinates;\n    materialInput.str = vec3(v_textureCoordinates, 0.0);\n    materialInput.normalEC = vec3(0.0, 0.0, -1.0);\n    \n    czm_material material = czm_getMaterial(materialInput);\n\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n}\n";var Sm=i(351014),Cm=i(564886),Mm=i(182348),Em=i(655365),Pm=i(165755),km=i(209202),Om=i(83181),Rm=i(307898),Im=i(98055),Dm=i(862892),Bm=i(705302),Lm=i(41076);function Fm(e){this.ellipsoid=e.ellipsoid??st.A.default,this.credit=void 0,this.tilingScheme=void 0,this.height=void 0,this.width=void 0,this.encoding=void 0,this.lodCount=void 0,this.hasAvailability=!1,this.tilesAvailable=void 0,this.tilesAvailabilityLoaded=void 0,this.levelZeroMaximumGeometricError=void 0,this.terrainDataStructure=void 0}function Nm(e){e=e??F.A.EMPTY_OBJECT,this._resource=void 0,this._credit=void 0,this._tilingScheme=void 0,this._levelZeroMaximumGeometricError=void 0,this._maxLevel=void 0,this._terrainDataStructure=void 0,this._width=void 0,this._height=void 0,this._encoding=void 0,this._lodCount=void 0,this._hasAvailability=!1,this._tilesAvailable=void 0,this._tilesAvailabilityLoaded=void 0,this._availableCache={},this._errorEvent=new ge.A}function Vm(e,t,i,n){if(!e._hasAvailability)return;const r=e._tilesAvailabilityLoaded,o=e._tilesAvailable;return!(t>e._lodCount)&&(!!o.isTileAvailable(t,i,n)||!r.isTileAvailable(t,i,n)&&void 0)}function Um(e,t,i,n){const r=t-1,o=i-1,s=n[e.y*t+e.x],a=[],l={startX:e.x,startY:e.y,endX:0,endY:0},c=new fe.A(e.x+1,e.y+1);let u=!1,d=!1;for(;!u||!d;){let i=c.x;const h=d?c.y+1:c.y;if(!u){for(let i=e.y;i<h;++i)if(n[i*t+c.x]!==s){u=!0;break}u?(a.push(new fe.A(c.x,e.y)),--c.x,--i,l.endX=c.x):c.x===r?(l.endX=c.x,u=!0):++c.x}if(!d){const r=c.y*t;for(let t=e.x;t<=i;++t)if(n[r+t]!==s){d=!0;break}d?(a.push(new fe.A(e.x,c.y)),--c.y,l.endY=c.y):c.y===o?(l.endY=c.y,d=!0):++c.y}}return{endingIndices:a,range:l,value:s}}function zm(e,t,i,n){if(!e._hasAvailability)return{};const r=128*Math.floor(i/128),o=128*Math.floor(n/128),s=Math.min(1<<t,128),a=`tilemap/${t}/${o}/${r}/${s}/${s}`,l=e._availableCache;if((0,N.A)(l[a]))return l[a];const c=new km.A({throttle:!1,throttleByServer:!0,type:Rm.A.TERRAIN});let u=e._resource.getDerivedResource({url:a,request:c}).fetchJson();return(0,N.A)(u)?(u=u.then(function(a){const l=function(e,t,i,n,r){const o=[];if(r.every(function(e){return e===r[0]}))return 1===r[0]&&o.push({startX:e,startY:t,endX:e+i-1,endY:t+n-1}),o;let s=[new fe.A(0,0)];for(;s.length>0;){const a=Um(s.pop(),i,n,r);if(1===a.value){const i=a.range;i.startX+=e,i.endX+=e,i.startY+=t,i.endY+=t,o.push(i)}const l=a.endingIndices;l.length>0&&(s=s.concat(l))}return o}(r,o,s,s,a.data);e._tilesAvailabilityLoaded.addAvailableTileRange(t,r,o,r+s,o+s);const c=e._tilesAvailable;for(let e=0;e<l.length;++e){const i=l[e];c.addAvailableTileRange(t,i.startX,i.startY,i.endX,i.endY)}return Vm(e,t,i,n)}),l[a]={promise:u,request:c},u=u.finally(function(e){return delete l[a],e}),{promise:u,request:c}):{}}Fm.prototype.build=function(e){e._credit=this.credit,e._tilingScheme=this.tilingScheme,e._height=this.height,e._width=this.width,e._encoding=this.encoding,e._lodCount=this.lodCount,e._hasAvailability=this.hasAvailability,e._tilesAvailable=this.tilesAvailable,e._tilesAvailabilityLoaded=this.tilesAvailabilityLoaded,e._levelZeroMaximumGeometricError=this.levelZeroMaximumGeometricError,e._terrainDataStructure=this.terrainDataStructure},Object.defineProperties(Nm.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){return this._tilesAvailable}}}),Nm.fromUrl=async function(e,t){B.A.defined("url",e),t=t??F.A.EMPTY_OBJECT,e=await Promise.resolve(e);let i=bt.A.createIfNeeded(e);i.appendForwardSlash(),(0,N.A)(t.token)&&(i=i.getDerivedResource({queryParameters:{token:t.token}}));const n=i.getDerivedResource({queryParameters:{f:"pjson"}}),r=new Fm(t);await async function(e,t,i){try{!function(e,t){const i=t.copyrightText;(0,N.A)(i)&&(e.credit=new rt.A(i));const n=t.spatialReference,r=n.latestWkid??n.wkid,o=t.extent,s={ellipsoid:e.ellipsoid};if(4326===r)s.rectangle=vt.A.fromDegrees(o.xmin,o.ymin,o.xmax,o.ymax),e.tilingScheme=new Mm.A(s);else{if(3857!==r)throw new xt.A("Invalid spatial reference");{const i=Math.PI*e.ellipsoid.maximumRadius;t.extent.xmax>i&&(t.extent.xmax=i),t.extent.ymax>i&&(t.extent.ymax=i),t.extent.xmin<-i&&(t.extent.xmin=-i),t.extent.ymin<-i&&(t.extent.ymin=-i),s.rectangleSouthwestInMeters=new fe.A(o.xmin,o.ymin),s.rectangleNortheastInMeters=new fe.A(o.xmax,o.ymax),e.tilingScheme=new Lm.A(s)}}const a=t.tileInfo;if(!(0,N.A)(a))throw new xt.A("tileInfo is required");e.width=a.rows+1,e.height=a.cols+1,e.encoding="LERC"===a.format?Em.A.LERC:Em.A.NONE,e.lodCount=a.lods.length-1,(e.hasAvailability=-1!==t.capabilities.indexOf("Tilemap"))&&(e.tilesAvailable=new Dm.A(e.tilingScheme,e.lodCount),e.tilesAvailable.addAvailableTileRange(0,0,0,e.tilingScheme.getNumberOfXTilesAtLevel(0),e.tilingScheme.getNumberOfYTilesAtLevel(0)),e.tilesAvailabilityLoaded=new Dm.A(e.tilingScheme,e.lodCount)),e.levelZeroMaximumGeometricError=Im.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(e.tilingScheme.ellipsoid,e.width,e.tilingScheme.getNumberOfXTilesAtLevel(0)),t.bandCount>1&&console.log("ArcGISTiledElevationTerrainProvider: Terrain data has more than 1 band. Using the first one."),(0,N.A)(t.minValues)&&(0,N.A)(t.maxValues)?e.terrainDataStructure={elementMultiplier:1,lowestEncodedHeight:t.minValues[0],highestEncodedHeight:t.maxValues[0]}:e.terrainDataStructure={elementMultiplier:1}}(e,await t.fetchJson())}catch(e){const n=`An error occurred while accessing ${t}.`;throw Bm.A.reportError(void 0,i,(0,N.A)(i)?i._errorEvent:void 0,n),e}}(r,n);const o=new Nm(t);return r.build(o),o._resource=i,o},Nm.prototype.requestTileGeometry=function(e,t,i,n){const r=this._resource.getDerivedResource({url:`tile/${i}/${t}/${e}`,request:n}),o=this._hasAvailability;let s,a=Promise.resolve(!0);if(o&&!(0,N.A)(Vm(this,i+1,2*e,2*t))){const n=zm(this,i+1,2*e,2*t);a=n.promise,s=n.request}const l=r.fetchArrayBuffer();if(!(0,N.A)(l)||!(0,N.A)(a))return;const c=this,u=this._tilesAvailable;return Promise.all([l,a]).then(function(n){return new Pm.A({buffer:n[0],width:c._width,height:c._height,childTileMask:o?u.computeChildMaskForTile(i,e,t):15,structure:c._terrainDataStructure,encoding:c._encoding})}).catch(async function(e){if((0,N.A)(s)&&s.state===Om.A.CANCELLED){n.cancel();try{await(n.deferred?.promise)}catch{}return n.state=Om.A.CANCELLED,Promise.reject(e)}return Promise.reject(e)})},Nm.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},Nm.prototype.getTileDataAvailable=function(e,t,i){if(!this._hasAvailability)return;const n=Vm(this,i,e,t);if((0,N.A)(n))return n;zm(this,i,e,t)},Nm.prototype.loadTileDataAvailability=function(e,t,i){};const Gm=Nm;var Km=i(794282),qm=i(961645),Hm=i(807135);const Wm="https://dev.virtualearth.net/REST/v1/Locations";function jm(e){const t=(e=e??F.A.EMPTY_OBJECT).key;if(!(0,N.A)(t))throw new U.A("options.key is required.");this._key=t;const i={key:t};(0,N.A)(e.culture)&&(i.culture=e.culture),this._resource=new bt.A({url:Wm,queryParameters:i}),this._credit=new rt.A('<img src="http://dev.virtualearth.net/Branding/logo_powered_by.png"/>',!1)}Object.defineProperties(jm.prototype,{url:{get:function(){return Wm}},key:{get:function(){return this._key}},credit:{get:function(){return this._credit}}}),jm.prototype.geocode=async function(e){return B.A.typeOf.string("query",e),this._resource.getDerivedResource({queryParameters:{query:e}}).fetchJsonp("jsonp").then(function(e){return 0===e.resourceSets.length?[]:e.resourceSets[0].resources.map(function(e){const t=e.bbox,i=t[0],n=t[1],r=t[2],o=t[3];return{displayName:e.name,destination:vt.A.fromDegrees(n,i,o,r)}})})};const $m=jm;var Xm=i(554630),Ym=i(854894),Zm=i(626809);function Jm(){}Object.defineProperties(Jm.prototype,{credit:{get:function(){}}}),Jm.prototype.geocode=function(e){B.A.typeOf.string("query",e);const t=e.match(/[^\s,\n]+/g);if(2===t.length||3===t.length){let i=+t[0],n=+t[1];const r=3===t.length?+t[2]:300;if(isNaN(i)&&isNaN(n)){const e=/^(\d+.?\d*)([nsew])/i;for(let r=0;r<t.length;++r){const o=t[r].match(e);e.test(t[r])&&3===o.length&&(/^[ns]/i.test(o[2])?n=/^[n]/i.test(o[2])?+o[1]:-o[1]:/^[ew]/i.test(o[2])&&(i=/^[e]/i.test(o[2])?+o[1]:-o[1]))}}if(!isNaN(i)&&!isNaN(n)&&!isNaN(r)){const t={displayName:e,destination:D.A.fromDegrees(i,n,r)};return Promise.resolve([t])}}return Promise.resolve([])};const Qm=Jm;var eg=i(961136),tg=i(584164),ig=i(437266);const ng=new Zm.A,rg=new D.A,og=new D.A,sg=new D.A,ag=new D.A;function lg(e){const t=(e=e??F.A.EMPTY_OBJECT).points,i=e.times;let n=e.firstTangent,r=e.lastTangent;if(B.A.defined("points",t),B.A.defined("times",i),B.A.typeOf.number.greaterThanOrEquals("points.length",t.length,2),B.A.typeOf.number.equals("times.length","points.length",i.length,t.length),t.length>2&&((0,N.A)(n)||(n=sg,D.A.multiplyByScalar(t[1],2,n),D.A.subtract(n,t[2],n),D.A.subtract(n,t[0],n),D.A.multiplyByScalar(n,.5,n)),!(0,N.A)(r))){const e=t.length-1;r=ag,D.A.multiplyByScalar(t[e-1],2,r),D.A.subtract(t[e],r,r),D.A.add(r,t[e-2],r),D.A.multiplyByScalar(r,.5,r)}this._times=i,this._points=t,this._firstTangent=D.A.clone(n),this._lastTangent=D.A.clone(r),this._evaluateFunction=function(e){const t=e.points,i=e.times;if(t.length<3){const e=i[0],n=1/(i[1]-e),r=t[0],o=t[1];return function(t,i){(0,N.A)(i)||(i=new D.A);const s=(t-e)*n;return D.A.lerp(r,o,s,i)}}return function(n,r){(0,N.A)(r)||(r=new D.A);const o=e._lastTimeIndex=e.findTimeInterval(n,e._lastTimeIndex),s=(n-i[o])/(i[o+1]-i[o]),a=ng;let l,c,u,d,h;return a.z=s,a.y=s*s,a.x=a.y*s,a.w=1,0===o?(l=t[0],c=t[1],u=e.firstTangent,d=D.A.subtract(t[2],l,rg),D.A.multiplyByScalar(d,.5,d),h=tg.A.multiplyByVector(eg.A.hermiteCoefficientMatrix,a,a)):o===t.length-2?(l=t[o],c=t[o+1],d=e.lastTangent,u=D.A.subtract(c,t[o-1],rg),D.A.multiplyByScalar(u,.5,u),h=tg.A.multiplyByVector(eg.A.hermiteCoefficientMatrix,a,a)):(l=t[o-1],c=t[o],u=t[o+1],d=t[o+2],h=tg.A.multiplyByVector(lg.catmullRomCoefficientMatrix,a,a)),r=D.A.multiplyByScalar(l,h.x,r),D.A.multiplyByScalar(c,h.y,og),D.A.add(r,og,r),D.A.multiplyByScalar(u,h.z,og),D.A.add(r,og,r),D.A.multiplyByScalar(d,h.w,og),D.A.add(r,og,r)}}(this),this._lastTimeIndex=0}Object.defineProperties(lg.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},firstTangent:{get:function(){return this._firstTangent}},lastTangent:{get:function(){return this._lastTangent}}}),lg.catmullRomCoefficientMatrix=new tg.A(-.5,1,-.5,0,1.5,-2.5,0,1,-1.5,2,.5,0,.5,-.5,0,0),lg.prototype.findTimeInterval=ig.A.prototype.findTimeInterval,lg.prototype.wrapTime=ig.A.prototype.wrapTime,lg.prototype.clampTime=ig.A.prototype.clampTime,lg.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};const cg=lg;var ug=i(564453),dg=i(602317),hg=i(769534);function pg(e){const t=(e=e??F.A.EMPTY_OBJECT).radius;B.A.typeOf.number("radius",t);const i={center:e.center,semiMajorAxis:t,semiMinorAxis:t,ellipsoid:e.ellipsoid,height:e.height,extrudedHeight:e.extrudedHeight,granularity:e.granularity,vertexFormat:e.vertexFormat,stRotation:e.stRotation,shadowVolume:e.shadowVolume};this._ellipseGeometry=new dg.A(i),this._workerName="createCircleGeometry"}pg.packedLength=dg.A.packedLength,pg.pack=function(e,t,i){return B.A.typeOf.object("value",e),dg.A.pack(e._ellipseGeometry,t,i)};const fg=new dg.A({center:new D.A,semiMajorAxis:1,semiMinorAxis:1}),mg={center:new D.A,radius:void 0,ellipsoid:st.A.clone(st.A.default),height:void 0,extrudedHeight:void 0,granularity:void 0,vertexFormat:new hg.A,stRotation:void 0,semiMajorAxis:void 0,semiMinorAxis:void 0,shadowVolume:void 0};pg.unpack=function(e,t,i){const n=dg.A.unpack(e,t,fg);return mg.center=D.A.clone(n._center,mg.center),mg.ellipsoid=st.A.clone(n._ellipsoid,mg.ellipsoid),mg.ellipsoid=st.A.clone(n._ellipsoid,fg._ellipsoid),mg.height=n._height,mg.extrudedHeight=n._extrudedHeight,mg.granularity=n._granularity,mg.vertexFormat=hg.A.clone(n._vertexFormat,mg.vertexFormat),mg.stRotation=n._stRotation,mg.shadowVolume=n._shadowVolume,(0,N.A)(i)?(mg.semiMajorAxis=n._semiMajorAxis,mg.semiMinorAxis=n._semiMinorAxis,i._ellipseGeometry=new dg.A(mg),i):(mg.radius=n._semiMajorAxis,new pg(mg))},pg.createGeometry=function(e){return dg.A.createGeometry(e._ellipseGeometry)},pg.createShadowVolume=function(e,t,i){const n=e._ellipseGeometry._granularity,r=e._ellipseGeometry._ellipsoid,o=t(n,r),s=i(n,r);return new pg({center:e._ellipseGeometry._center,radius:e._ellipseGeometry._semiMajorAxis,ellipsoid:r,stRotation:e._ellipseGeometry._stRotation,granularity:n,extrudedHeight:o,height:s,vertexFormat:hg.A.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(pg.prototype,{rectangle:{get:function(){return this._ellipseGeometry.rectangle}},textureCoordinateRotationPoints:{get:function(){return this._ellipseGeometry.textureCoordinateRotationPoints}}});const gg=pg;var Ag=i(692095);function _g(e){const t=(e=e??F.A.EMPTY_OBJECT).radius;B.A.typeOf.number("radius",t);const i={center:e.center,semiMajorAxis:t,semiMinorAxis:t,ellipsoid:e.ellipsoid,height:e.height,extrudedHeight:e.extrudedHeight,granularity:e.granularity,numberOfVerticalLines:e.numberOfVerticalLines};this._ellipseGeometry=new Ag.A(i),this._workerName="createCircleOutlineGeometry"}_g.packedLength=Ag.A.packedLength,_g.pack=function(e,t,i){return B.A.typeOf.object("value",e),Ag.A.pack(e._ellipseGeometry,t,i)};const yg=new Ag.A({center:new D.A,semiMajorAxis:1,semiMinorAxis:1}),vg={center:new D.A,radius:void 0,ellipsoid:st.A.clone(st.A.UNIT_SPHERE),height:void 0,extrudedHeight:void 0,granularity:void 0,numberOfVerticalLines:void 0,semiMajorAxis:void 0,semiMinorAxis:void 0};_g.unpack=function(e,t,i){const n=Ag.A.unpack(e,t,yg);return vg.center=D.A.clone(n._center,vg.center),vg.ellipsoid=st.A.clone(n._ellipsoid,vg.ellipsoid),vg.height=n._height,vg.extrudedHeight=n._extrudedHeight,vg.granularity=n._granularity,vg.numberOfVerticalLines=n._numberOfVerticalLines,(0,N.A)(i)?(vg.semiMajorAxis=n._semiMajorAxis,vg.semiMinorAxis=n._semiMinorAxis,i._ellipseGeometry=new Ag.A(vg),i):(vg.radius=n._semiMajorAxis,new _g(vg))},_g.createGeometry=function(e){return Ag.A.createGeometry(e._ellipseGeometry)};const wg=_g;var bg=i(433235),xg=i(571804),Tg=i(56233),Sg=i(931806),Cg=i(594647),Mg=i(246520),Eg=i(173885),Pg=i(374273),kg=i(766242),Og=i(686043),Rg=i(703983),Ig=i(400793);function Dg(e){e=e??F.A.EMPTY_OBJECT,B.A.defined("options.callback",e.callback),B.A.defined("options.width",e.width),B.A.defined("options.height",e.height),this._callback=e.callback,this._tilingScheme=e.tilingScheme,(0,N.A)(this._tilingScheme)||(this._tilingScheme=new Mm.A({ellipsoid:e.ellipsoid??st.A.default})),this._width=e.width,this._height=e.height;const t=Math.max(this._width,this._height);this._levelZeroMaximumGeometricError=Im.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,t,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._errorEvent=new ge.A;let i=e.credit;"string"==typeof i&&(i=new rt.A(i)),this._credit=i}Object.defineProperties(Dg.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),Dg.prototype.requestTileGeometry=function(e,t,i,n){const r=this._callback(e,t,i);if(!(0,N.A)(r))return;const o=this._width,s=this._height;return Promise.resolve(r).then(function(e){let t=e;return Array.isArray(t)&&(t=new Float64Array(t)),new Pm.A({buffer:t,width:o,height:s})})},Dg.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},Dg.prototype.getTileDataAvailable=function(e,t,i){},Dg.prototype.loadTileDataAvailability=function(e,t,i){};const Bg=Dg;var Lg=i(317061),Fg=i(302982),Ng=i(902503),Vg=i(707568),Ug=i(330926),zg=i(634061),Gg=i(606707),Kg=i(652785),qg=i(723635),Hg=i(715726),Wg=i(602289),jg=i(87762),$g=i(594706),Xg=i(551824),Yg=i(658091),Zg=i(149192),Jg=i(199528),Qg=i(816422),eA=i(520098),tA=i(17117),iA=i(788335),nA=i(263842),rA=i(123475),oA=i(675178),sA=i(653577),aA=i(944479),lA=i(305439),cA=i(46362);function uA(){U.A.throwInstantiationError()}uA.createGeometry=function(e){U.A.throwInstantiationError()};const dA=uA;var hA=i(75200),pA=i(494938),fA=i(794554),mA=i(34233),gA=i(597751),AA=i(957171),_A=i.t(AA,2);const yA=function(e,t){return 0!==(e&t)},vA=[1,2,4,8];function wA(e,t,i,n,r,o){this._bits=e,this.cnodeVersion=t,this.imageryVersion=i,this.terrainVersion=n,this.imageryProvider=r,this.terrainProvider=o,this.ancestorHasTerrain=!1,this.terrainState=void 0}wA.clone=function(e,t){return(0,N.A)(t)?(t._bits=e._bits,t.cnodeVersion=e.cnodeVersion,t.imageryVersion=e.imageryVersion,t.terrainVersion=e.terrainVersion,t.imageryProvider=e.imageryProvider,t.terrainProvider=e.terrainProvider):t=new wA(e._bits,e.cnodeVersion,e.imageryVersion,e.terrainVersion,e.imageryProvider,e.terrainProvider),t.ancestorHasTerrain=e.ancestorHasTerrain,t.terrainState=e.terrainState,t},wA.prototype.setParent=function(e){this.ancestorHasTerrain=e.ancestorHasTerrain||this.hasTerrain()},wA.prototype.hasSubtree=function(){return yA(this._bits,16)},wA.prototype.hasImagery=function(){return yA(this._bits,64)},wA.prototype.hasTerrain=function(){return yA(this._bits,128)},wA.prototype.hasChildren=function(){return yA(this._bits,15)},wA.prototype.hasChild=function(e){return yA(this._bits,vA[e])},wA.prototype.getChildBitmask=function(){return 15&this._bits};const bA=wA;var xA=i(222448),TA=i(971724);const SA=function(e){const t=new ArrayBuffer(1016),i=new Uint8Array(t);for(let t=0;t<1016;++t)i[t]=e.charCodeAt(t);return t}('Eô½\vyâjE",ÍqøIFgQ\0B%Æèa,f)\bÆ4Üjb%y\nwmiÖðk¡½NuàA[ß@V\fÙ»r|3SîOlÔq°{ÀEVZ­wUe\v3*¬l5Å0sø3>mF8J´Ýð.ÝuÚDt"úa"\f3"So¯9D\v9Ù9L¹¿«\\P_"uxéqh;ÁÄð<VqH\'UfYNeu£aF}a?A\0×´4MÎF°Õ¸\'{Ü+»Mg0ÈÑö\\Pú[/Fn5/\'C.ë\n\f^¥se4ål.jC\'c#U©?q{gC}:¯ÍâTUýKÆâ/(íË\\Æ-f§;/*"N°k.Ý\r}}GºC²²+>Mª>}æÎIÆæx\fa1-¤O¥~q ì\r1èN\v\0nPh}=\b\r¦n£h$[kó#ó¶s³\r\v@ÀØQ]ú".jßI\0¹ wUÆïj¿{GLîÜÜF©­S+S4ÿYä8è1N¹XFkË-#p\x005"Ï1²&/çÃu-6,rt°#G·ÓÑ&7râ\0DÏÚ3-Þ`i#i*|ÍKQ\rT9w.)ê¦P¢joP\\>TûïP[\vEm(w7ÛJfJo åpâ¹q~\fmI-zþrÇòY0»]såÉ êxì ðB|G`°½&·q¶ÇÑ3=Ó«îcÈ+S D\\qÆÌD2O<ÊÀ)=RÓaX©}e´ÜÏ\rô=ñ\b©BÚ#\tØ¿^PIøMÀËGLO÷{+ØÅ1;µoÜl\rÑÛ?âéÚ_ÔâFaZÞUÏ¤\0¾ýÎgñJiæ HØ]~®q N®ÀV©<rçvì)IÖ]-ãÛ6©;fjÕ¶=P^R¹KÇsWxÉô.YoÐKW>\'\'Ç`Û;íSD>?mw¢\në?R¨ÆU^1I7ôÅ&-©¿\'TÚÃj å*x°Öprªh½÷_H±~ÀXL?fù>áeÀp§Ï8i¯ðVldI\'­xtOÂÞV9\0Úw\vË-û5Oõ\bQ`Á\nZGM&30xÚÀFGâ[y`In7gS\n>éìF9²ñ4\rÆSuná\fYÙÞ){II¥wy¾IV.6ç\v:»Ob{ÒM1/½8{¨O!áìFpv})"x\nÝ\\ÚÞQÏðüYRe|3ßóHÚ»*uÛ`²Ôüíì5¨ÿ(1-ÈÜF|["');function CA(e){this.imageryPresent=!0,this.protoImagery=void 0,this.terrainPresent=!0,this.negativeAltitudeExponentBias=32,this.negativeAltitudeThreshold=Me.A.EPSILON12,this.providers={},this.key=void 0,this._resource=void 0,this._quadPacketVersion=1,this._tileInfo={},this._subtreePromises={}}Object.defineProperties(CA.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},resource:{get:function(){return this._resource}}}),CA.fromUrl=async function(e){B.A.defined("resourceOrUrl",e);let t=e;"string"==typeof t||t instanceof bt.A||(B.A.typeOf.string("resourceOrUrl.url",e.url),t=e.url);const i=bt.A.createIfNeeded(t);i.appendForwardSlash();const n=new CA;n._resource=i;try{await function(e){const t=e._resource.getDerivedResource({url:"dbRoot.v5",queryParameters:{output:"proto"}});if(!(0,N.A)(OA)){const e=(0,ma.A)("ThirdParty/google-earth-dbroot-parser.js"),t=window.cesiumGoogleEarthDbRootParser;OA=(0,xA.A)(e).then(function(){kA=window.cesiumGoogleEarthDbRootParser(_A),(0,N.A)(t)?window.cesiumGoogleEarthDbRootParser=t:delete window.cesiumGoogleEarthDbRootParser})}return OA.then(function(){return t.fetchArrayBuffer()}).then(function(t){const i=kA.EncryptedDbRootProto.decode(new Uint8Array(t));let n=i.encryptionData,r=n.byteOffset,o=r+n.byteLength;const s=e.key=n.buffer.slice(r,o);n=i.dbrootData,r=n.byteOffset,o=r+n.byteLength;const a=n.buffer.slice(r,o);return MA.scheduleTask({buffer:a,type:"DbRoot",key:s},[a])}).then(function(t){const i=kA.DbRootProto.decode(new Uint8Array(t.buffer));if(e.imageryPresent=i.imageryPresent??e.imageryPresent,e.protoImagery=i.protoImagery,e.terrainPresent=i.terrainPresent??e.terrainPresent,(0,N.A)(i.endSnippet)&&(0,N.A)(i.endSnippet.model)){const t=i.endSnippet.model;e.negativeAltitudeExponentBias=t.negativeAltitudeExponentBias??e.negativeAltitudeExponentBias,e.negativeAltitudeThreshold=t.compressedNegativeAltitudeThreshold??e.negativeAltitudeThreshold}(0,N.A)(i.databaseVersion)&&(e._quadPacketVersion=i.databaseVersion.quadtreeVersion??e._quadPacketVersion);const n=e.providers,r=i.providerInfo??[],o=r.length;for(let e=0;e<o;++e){const t=r[e],i=t.copyrightString;(0,N.A)(i)&&(n[t.providerId]=new rt.A(i.value))}}).catch(function(){console.log(`Failed to retrieve ${t.url}. Using defaults.`),e.key=SA})}(n),await n.getQuadTreePacket("",n._quadPacketVersion)}catch(e){const t=`An error occurred while accessing ${PA(n,"",1).url}: ${e}`;throw new xt.A(t)}return n},CA.tileXYToQuadKey=function(e,t,i){let n="";for(let r=i;r>=0;--r){const i=1<<r;let o=0;yA(t,i)?yA(e,i)&&(o|=1):(o|=2,yA(e,i)||(o|=1)),n+=o}return n},CA.quadKeyToTileXY=function(e){let t=0,i=0;const n=e.length-1;for(let r=n;r>=0;--r){const o=1<<r,s=+e[n-r];yA(s,2)?yA(s,1)||(t|=o):(i|=o,yA(s,1)&&(t|=o))}return{x:t,y:i,level:n}},CA.prototype.isValid=function(e){let t=this.getTileInformationFromQuadKey(e);if((0,N.A)(t))return null!==t;let i,n=!0,r=e;for(;r.length>1;){if(i=r.substring(r.length-1),r=r.substring(0,r.length-1),t=this.getTileInformationFromQuadKey(r),(0,N.A)(t)){t.hasSubtree()||t.hasChild(parseInt(i))||(n=!1);break}if(null===t){n=!1;break}}return n};const MA=new TA.A("decodeGoogleEarthEnterprisePacket");function EA(e,t,i){const n=e._tileInfo;let r,o=t,s=n[o];if((0,N.A)(s)&&(!s.hasSubtree()||s.hasChildren()))return s;for(;void 0===s&&o.length>1;)o=o.substring(0,o.length-1),s=n[o];const a=e._subtreePromises;let l=a[o];return(0,N.A)(l)?l.then(function(){return r=new km.A({throttle:i.throttle,throttleByServer:i.throttleByServer,type:i.type,priorityFunction:i.priorityFunction}),EA(e,t,r)}):(0,N.A)(s)&&s.hasSubtree()?(l=e.getQuadTreePacket(o,s.cnodeVersion,i),(0,N.A)(l)?(a[o]=l,l.then(function(){return r=new km.A({throttle:i.throttle,throttleByServer:i.throttleByServer,type:i.type,priorityFunction:i.priorityFunction}),EA(e,t,r)}).finally(function(){delete a[o]})):void 0):Promise.reject(new xt.A(`Couldn't load metadata for tile ${t}`))}function PA(e,t,i,n){return e._resource.getDerivedResource({url:`flatfile?q2-0${t}-q.${i.toString()}`,request:n})}let kA,OA;CA.prototype.getQuadTreePacket=function(e,t,i){const n=PA(this,e=e??"",t=t??1,i).fetchArrayBuffer();if(!(0,N.A)(n))return;const r=this._tileInfo,o=this.key;return n.then(function(t){return MA.scheduleTask({buffer:t,quadKey:e,type:"Metadata",key:o},[t]).then(function(t){let i,n=-1;if(""!==e){n=e.length+1;const o=t[e];i=r[e],i._bits|=o._bits,delete t[e]}const o=Object.keys(t);o.sort(function(e,t){return e.length-t.length});const s=o.length;for(let e=0;e<s;++e){const s=o[e];if(null!==t[s]){const e=bA.clone(t[s]),o=s.length;if(o===n)e.setParent(i);else if(o>1){const t=r[s.substring(0,s.length-1)];e.setParent(t)}r[s]=e}else r[s]=null}})})},CA.prototype.populateSubtree=function(e,t,i,n){return EA(this,CA.tileXYToQuadKey(e,t,i),n)},CA.prototype.getTileInformation=function(e,t,i){const n=CA.tileXYToQuadKey(e,t,i);return this._tileInfo[n]},CA.prototype.getTileInformationFromQuadKey=function(e){return this._tileInfo[e]};const RA=CA;var IA=i(874915),DA=i(587451),BA=i(832698),LA=i(589670),FA=i(42794),NA=i(371267),VA=i(255335);function UA(e){e=e??F.A.EMPTY_OBJECT,B.A.typeOf.object("options.buffer",e.buffer),B.A.typeOf.number("options.negativeAltitudeExponentBias",e.negativeAltitudeExponentBias),B.A.typeOf.number("options.negativeElevationThreshold",e.negativeElevationThreshold),this._buffer=e.buffer,this._credits=e.credits,this._negativeAltitudeExponentBias=e.negativeAltitudeExponentBias,this._negativeElevationThreshold=e.negativeElevationThreshold;const t=e.childTileMask??15;let i=3&t;i|=4&t?8:0,i|=8&t?4:0,this._childTileMask=i,this._createdByUpsampling=e.createdByUpsampling??!1,this._skirtHeight=void 0,this._bufferType=this._buffer.constructor,this._mesh=void 0,this._minimumHeight=void 0,this._maximumHeight=void 0}Object.defineProperties(UA.prototype,{credits:{get:function(){return this._credits}},waterMask:{get:function(){}}});const zA="createVerticesFromGoogleEarthEnterpriseBuffer",GA=new TA.A(zA),KA=new TA.A(zA,FA.A.maximumAsynchronousTasks),qA=new vt.A,HA=new vt.A;UA.prototype.createMesh=function(e){e=e??F.A.EMPTY_OBJECT,B.A.typeOf.object("options.tilingScheme",e.tilingScheme),B.A.typeOf.number("options.x",e.x),B.A.typeOf.number("options.y",e.y),B.A.typeOf.number("options.level",e.level);const t=e.tilingScheme,i=e.x,n=e.y,r=e.level,o=e.exaggeration??1,s=e.exaggerationRelativeHeight??0,a=e.throttle??!0,l=t.ellipsoid;t.tileXYToNativeRectangle(i,n,r,qA),t.tileXYToRectangle(i,n,r,HA);const c=l.cartographicToCartesian(vt.A.center(HA)),u=40075.16/(1<<r);this._skirtHeight=Math.min(8*u,1e3);const d=(a?KA:GA).scheduleTask({buffer:this._buffer,nativeRectangle:qA,rectangle:HA,relativeToCenter:c,ellipsoid:l,skirtHeight:this._skirtHeight,exaggeration:o,exaggerationRelativeHeight:s,includeWebMercatorT:!0,negativeAltitudeExponentBias:this._negativeAltitudeExponentBias,negativeElevationThreshold:this._negativeElevationThreshold});if(!(0,N.A)(d))return;const h=this;return d.then(function(e){return h._mesh=new VA.A(c,new Float32Array(e.vertices),new Uint16Array(e.indices),e.indexCountWithoutSkirts,e.vertexCountWithoutSkirts,e.minimumHeight,e.maximumHeight,ih.A.clone(e.boundingSphere3D),D.A.clone(e.occludeePointInScaledSpace),e.numberOfAttributes,BA.A.clone(e.orientedBoundingBox),NA.A.clone(e.encoding),e.westIndicesSouthToNorth,e.southIndicesEastToWest,e.eastIndicesNorthToSouth,e.northIndicesWestToEast),h._minimumHeight=e.minimumHeight,h._maximumHeight=e.maximumHeight,h._buffer=void 0,h._mesh})},UA.prototype.interpolateHeight=function(e,t,i){const n=Me.A.clamp((t-e.west)/e.width,0,1),r=Me.A.clamp((i-e.south)/e.height,0,1);return(0,N.A)(this._mesh)?function(e,t,i){const n=e._mesh,r=n.vertices,o=n.encoding,s=n.indices;for(let e=0,n=s.length;e<n;e+=3){const n=s[e],a=s[e+1],l=s[e+2],c=o.decodeTextureCoordinates(r,n,jA),u=o.decodeTextureCoordinates(r,a,$A),d=o.decodeTextureCoordinates(r,l,XA),h=DA.A.computeBarycentricCoordinates(t,i,c.x,c.y,u.x,u.y,d.x,d.y,YA);if(h.x>=-1e-15&&h.y>=-1e-15&&h.z>=-1e-15){const e=o.decodeHeight(r,n),t=o.decodeHeight(r,a),i=o.decodeHeight(r,l);return h.x*e+h.y*t+h.z*i}}}(this,n,r):function(e,t,i,n){const r=e._buffer;let o=0,s=0,a=0;i>.5?(t>.5?(o=2,s=.5):o=3,a=.5):t>.5&&(o=1,s=.5);const l=new DataView(r);let c=0;for(let e=0;e<o;++e)c+=l.getUint32(c,!0),c+=JA;c+=JA,c+=2*t_;const u=Me.A.toRadians(180*l.getFloat64(c,!0));c+=t_;const d=Me.A.toRadians(180*l.getFloat64(c,!0));c+=t_;const h=n.width/u/2,p=n.height/d/2,f=l.getInt32(c,!0);c+=QA;const m=3*l.getInt32(c,!0);c+=QA,c+=QA;const g=new Array(f),A=new Array(f),_=new Array(f);let y;for(y=0;y<f;++y)g[y]=s+l.getUint8(c++)*h,A[y]=a+l.getUint8(c++)*p,_[y]=6371010*l.getFloat32(c,!0),c+=e_;const v=new Array(m);for(y=0;y<m;++y)v[y]=l.getUint16(c,!0),c+=ZA;for(y=0;y<m;y+=3){const e=v[y],n=v[y+1],r=v[y+2],o=g[e],s=g[n],a=g[r],l=A[e],c=A[n],u=A[r],d=DA.A.computeBarycentricCoordinates(t,i,o,l,s,c,a,u,YA);if(d.x>=-1e-15&&d.y>=-1e-15&&d.z>=-1e-15)return d.x*_[e]+d.y*_[n]+d.z*_[r]}}(this,n,r,e)};const WA=new TA.A("upsampleQuantizedTerrainMesh",FA.A.maximumAsynchronousTasks);UA.prototype.upsample=function(e,t,i,n,r,o,s){if(B.A.typeOf.object("tilingScheme",e),B.A.typeOf.number("thisX",t),B.A.typeOf.number("thisY",i),B.A.typeOf.number("thisLevel",n),B.A.typeOf.number("descendantX",r),B.A.typeOf.number("descendantY",o),B.A.typeOf.number("descendantLevel",s),s-n>1)throw new U.A("Upsampling through more than one level at a time is not currently supported.");const a=this._mesh;if(!(0,N.A)(this._mesh))return;const l=2*t!==r,c=2*i===o,u=e.ellipsoid,d=e.tileXYToRectangle(r,o,s),h=WA.scheduleTask({vertices:a.vertices,indices:a.indices,indexCountWithoutSkirts:a.indexCountWithoutSkirts,vertexCountWithoutSkirts:a.vertexCountWithoutSkirts,encoding:a.encoding,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,isEastChild:l,isNorthChild:c,childRectangle:d,ellipsoid:u});if(!(0,N.A)(h))return;const p=this;return h.then(function(e){const t=new Uint16Array(e.vertices),i=IA.A.createTypedArray(t.length/3,e.indices),n=p._skirtHeight;return new LA.A({quantizedVertices:t,indices:i,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,boundingSphere:ih.A.clone(e.boundingSphere),orientedBoundingBox:BA.A.clone(e.orientedBoundingBox),horizonOcclusionPoint:D.A.clone(e.horizonOcclusionPoint),westIndices:e.westIndices,southIndices:e.southIndices,eastIndices:e.eastIndices,northIndices:e.northIndices,westSkirtHeight:n,southSkirtHeight:n,eastSkirtHeight:n,northSkirtHeight:n,childTileMask:0,createdByUpsampling:!0,credits:p._credits})})},UA.prototype.isChildAvailable=function(e,t,i,n){B.A.typeOf.number("thisX",e),B.A.typeOf.number("thisY",t),B.A.typeOf.number("childX",i),B.A.typeOf.number("childY",n);let r=2;return i!==2*e&&++r,n!==2*t&&(r-=2),!!(this._childTileMask&1<<r)},UA.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};const jA=new fe.A,$A=new fe.A,XA=new fe.A,YA=new D.A,ZA=Uint16Array.BYTES_PER_ELEMENT,JA=Uint32Array.BYTES_PER_ELEMENT,QA=Int32Array.BYTES_PER_ELEMENT,e_=Float32Array.BYTES_PER_ELEMENT,t_=Float64Array.BYTES_PER_ELEMENT,i_=UA,n_=new Ae.A;function r_(){this._terrainCache={},this._lastTidy=Ae.A.now()}function o_(e){e=e??F.A.EMPTY_OBJECT,this._tilingScheme=new Mm.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new vt.A(-Me.A.PI,-Me.A.PI,Me.A.PI,Me.A.PI),ellipsoid:e.ellipsoid});let t=e.credit;"string"==typeof t&&(t=new rt.A(t)),this._credit=t,this._levelZeroMaximumGeometricError=40075.16,this._terrainCache=new r_,this._terrainPromises={},this._terrainRequests={},this._errorEvent=new ge.A}r_.prototype.add=function(e,t){this._terrainCache[e]={buffer:t,timestamp:Ae.A.now()}},r_.prototype.get=function(e){const t=this._terrainCache[e];if((0,N.A)(t))return delete this._terrainCache[e],t.buffer},r_.prototype.tidy=function(){if(Ae.A.now(n_),Ae.A.secondsDifference(n_,this._lastTidy)>10){const e=this._terrainCache,t=Object.keys(e),i=t.length;for(let n=0;n<i;++n){const i=t[n],r=e[i];Ae.A.secondsDifference(n_,r.timestamp)>10&&delete e[i]}Ae.A.clone(n_,this._lastTidy)}},Object.defineProperties(o_.prototype,{url:{get:function(){return this._metadata.url}},proxy:{get:function(){return this._metadata.proxy}},tilingScheme:{get:function(){return this._tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}}),o_.fromMetadata=function(e,t){if(B.A.defined("metadata",e),!e.terrainPresent)throw new xt.A(`The server ${e.url} doesn't have terrain`);const i=new o_(t);return i._metadata=e,i};const s_=new TA.A("decodeGoogleEarthEnterprisePacket");function a_(e,t,i){let n=t.getChildBitmask();if(3===t.terrainState){n=0;for(let t=0;t<4;++t){const r=i.getTileInformationFromQuadKey(e+t.toString());(0,N.A)(r)&&r.hasTerrain()&&(n|=1<<t)}}return n}o_.prototype.requestTileGeometry=function(e,t,i,n){const r=RA.tileXYToQuadKey(e,t,i),o=this._terrainCache,s=this._metadata,a=s.getTileInformationFromQuadKey(r);if(!(0,N.A)(a))return Promise.reject(new xt.A("Terrain tile doesn't exist"));let l=a.terrainState;(0,N.A)(l)||(l=a.terrainState=0);const c=o.get(r);if((0,N.A)(c)){const e=s.providers[a.terrainProvider];return Promise.resolve(new i_({buffer:c,childTileMask:a_(r,a,s),credits:(0,N.A)(e)?[e]:void 0,negativeAltitudeExponentBias:s.negativeAltitudeExponentBias,negativeElevationThreshold:s.negativeAltitudeThreshold}))}if(o.tidy(),!a.ancestorHasTerrain)return Promise.resolve(new Pm.A({buffer:new Uint8Array(256),width:16,height:16}));if(1===l)return Promise.reject(new xt.A("Terrain tile doesn't exist"));let u,d=r,h=-1;switch(l){case 2:h=a.terrainVersion;break;case 3:d=d.substring(0,d.length-1),u=s.getTileInformationFromQuadKey(d),h=u.terrainVersion;break;case 0:a.hasTerrain()?h=a.terrainVersion:(d=d.substring(0,d.length-1),u=s.getTileInformationFromQuadKey(d),(0,N.A)(u)&&u.hasTerrain()&&(h=u.terrainVersion))}if(h<0)return Promise.reject(new xt.A("Terrain tile doesn't exist"));const p=this._terrainPromises,f=this._terrainRequests;let m,g;if((0,N.A)(p[d]))m=p[d],g=f[d];else{g=n;const e=function(e,t,i,n){return i=(0,N.A)(i)&&i>0?i:1,e._metadata.resource.getDerivedResource({url:`flatfile?f1c-0${t}-t.${i.toString()}`,request:n})}(this,d,h,g).fetchArrayBuffer();if(!(0,N.A)(e))return;m=e.then(function(e){return(0,N.A)(e)?s_.scheduleTask({buffer:e,type:"Terrain",key:s.key},[e]).then(function(e){const t=s.getTileInformationFromQuadKey(d);t.terrainState=2,o.add(d,e[0]);const i=t.terrainProvider,n=e.length-1;for(let t=0;t<n;++t){const n=d+t.toString(),r=s.getTileInformationFromQuadKey(n);(0,N.A)(r)&&(o.add(n,e[t+1]),r.terrainState=3,0===r.terrainProvider&&(r.terrainProvider=i))}}):Promise.reject(new xt.A("Failed to load terrain."))}),p[d]=m,f[d]=g,m=m.finally(function(){delete p[d],delete f[d]})}return m.then(function(){const e=o.get(r);if((0,N.A)(e)){const t=s.providers[a.terrainProvider];return new i_({buffer:e,childTileMask:a_(r,a,s),credits:(0,N.A)(t)?[t]:void 0,negativeAltitudeExponentBias:s.negativeAltitudeExponentBias,negativeElevationThreshold:s.negativeAltitudeThreshold})}return Promise.reject(new xt.A("Failed to load terrain."))}).catch(function(e){return g.state===Om.A.CANCELLED?(n.state=g.state,Promise.reject(e)):(a.terrainState=1,Promise.reject(e))})},o_.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},o_.prototype.getTileDataAvailable=function(e,t,i){const n=this._metadata;let r=RA.tileXYToQuadKey(e,t,i);const o=n.getTileInformation(e,t,i);if(null===o)return!1;if((0,N.A)(o)){if(!o.ancestorHasTerrain)return!0;const e=o.terrainState;if(1===e)return!1;if(!((0,N.A)(e)&&0!==e||(o.terrainState=0,o.hasTerrain()))){r=r.substring(0,r.length-1);const e=n.getTileInformationFromQuadKey(r);if(!(0,N.A)(e)||!e.hasTerrain())return!1}return!0}if(n.isValid(r)){const r=new km.A({throttle:!1,throttleByServer:!0,type:Rm.A.TERRAIN});n.populateSubtree(e,t,i,r)}return!1},o_.prototype.loadTileDataAvailability=function(e,t,i){};const l_=o_,c_='<img alt="Google" src="https://assets.ion.cesium.com/google-credit.png" style="vertical-align:-5px">';function u_(e){const t=(e=e??F.A.EMPTY_OBJECT).key;if(!(0,N.A)(t))throw new U.A("options.key is required.");this._resource=new bt.A({url:"https://maps.googleapis.com/maps/api/geocode/json",queryParameters:{key:t}}),this._credit=new rt.A(c_,!0)}Object.defineProperties(u_.prototype,{credit:{get:function(){return this._credit}}}),u_.prototype.geocode=async function(e){B.A.typeOf.string("query",e);const t=this._resource.getDerivedResource({queryParameters:{address:e}}),i=await t.fetchJson();if("ZERO_RESULTS"===i.status)return[];if("OK"!==i.status)throw new xt.A(`GoogleGeocoderService got a bad response ${i.status}: ${i.error_message}`);return i.results.map(e=>{const t=e.geometry.viewport.southwest,i=e.geometry.viewport.northeast;return{displayName:e.formatted_address,destination:vt.A.fromDegrees(t.lng,t.lat,i.lng,i.lat),attribution:{html:c_,collapsible:!1}}})};const d_=u_,h_={defaultApiKey:void 0};h_.mapTilesApiEndpoint=new bt.A({url:"https://tile.googleapis.com/v1/"}),h_.getDefaultCredit=function(){return new rt.A('<img src="https://assets.ion.cesium.com/google-credit.png" style="vertical-align: -5px" alt="Google">',!0)};const p_=h_;var f_=i(658919),m_=i(974904),g_=i(129961),A_=i(103882),__=i(416721);const y_={};y_.ExportStatus=Object.freeze({NotStarted:"NotStarted",InProgress:"InProgress",Complete:"Complete",Invalid:"Invalid"}),y_.ExportType=Object.freeze({IMODEL:"IMODEL",CESIUM:"CESIUM","3DTILES":"3DTILES"}),y_.RealityDataType=Object.freeze({Cesium3DTiles:"Cesium3DTiles",PNTS:"PNTS",RealityMesh3DTiles:"RealityMesh3DTiles",Terrain3DTiles:"Terrain3DTiles",KML:"KML",GeoJSON:"GeoJSON",Unstructured:"Unstructured"}),y_.defaultAccessToken=void 0,y_.defaultShareKey=void 0,y_._getAuthorizationHeader=function(){if(!(0,N.A)(y_.defaultAccessToken)&&!(0,N.A)(y_.defaultShareKey))throw new U.A("Must set ITwinPlatform.defaultAccessToken or ITwinPlatform.defaultShareKey first");return(0,N.A)(y_.defaultShareKey)?`Basic ${y_.defaultShareKey}`:`Bearer ${y_.defaultAccessToken}`},y_.apiEndpoint=new bt.A({url:"https://api.bentley.com"}),y_.getExports=async function(e,t){if(B.A.typeOf.string("iModelId",e),(0,N.A)(t)&&B.A.typeOf.string("changesetId",t),!(0,N.A)(y_.defaultAccessToken)&&!(0,N.A)(y_.defaultShareKey))throw new U.A("Must set ITwinPlatform.defaultAccessToken or ITwinPlatform.defaultShareKey first");const i=new bt.A({url:`${y_.apiEndpoint}mesh-export`,headers:{Authorization:y_._getAuthorizationHeader(),Accept:"application/vnd.bentley.itwin-platform.v1+json",Prefer:"return=representation"},queryParameters:{iModelId:e,exportType:y_.ExportType["3DTILES"],$top:"5",client:"CesiumJS"}});"undefined"!=typeof CESIUM_VERSION&&i.appendQueryParameters({clientVersion:CESIUM_VERSION}),(0,N.A)(t)&&""!==t&&i.appendQueryParameters({changesetId:t});try{return await i.fetchJson()}catch(e){const t=JSON.parse(e.response);if(401===e.statusCode){const e=t.error.details?.[0].code??"";throw new xt.A(`Unauthorized, bad token, wrong scopes or headers bad. ${e}`)}if(403===e.statusCode)throw console.error(t.error.code,t.error.message),new xt.A("Not allowed, forbidden");if(422===e.statusCode)throw new xt.A(`Unprocessable Entity:${t.error.code} ${t.error.message}`);if(429===e.statusCode)throw new xt.A("Too many requests");throw new xt.A(`Unknown request failure ${e.statusCode}`)}},y_.getRealityDataMetadata=async function(e,t){if(B.A.typeOf.string("iTwinId",e),B.A.typeOf.string("realityDataId",t),!(0,N.A)(y_.defaultAccessToken)&&!(0,N.A)(y_.defaultShareKey))throw new U.A("Must set ITwinPlatform.defaultAccessToken or ITwinPlatform.defaultShareKey first");const i=new bt.A({url:`${y_.apiEndpoint}reality-management/reality-data/${t}`,headers:{Authorization:y_._getAuthorizationHeader(),Accept:"application/vnd.bentley.itwin-platform.v1+json"},queryParameters:{iTwinId:e}});try{return(await i.fetchJson()).realityData}catch(i){const n=JSON.parse(i.response);if(401===i.statusCode){const e=n.error.details?.[0].code??"";throw new xt.A(`Unauthorized, bad token, wrong scopes or headers bad. ${e}`)}if(403===i.statusCode)throw console.error(n.error.code,n.error.message),new xt.A("Not allowed, forbidden");if(404===i.statusCode)throw new xt.A(`Reality data not found: ${e}, ${t}`);if(422===i.statusCode)throw new xt.A(`Unprocessable Entity:${n.error.code} ${n.error.message}`);if(429===i.statusCode)throw new xt.A("Too many requests");throw new xt.A(`Unknown request failure ${i.statusCode}`)}},y_.getRealityDataURL=async function(e,t,i){if(B.A.typeOf.string("iTwinId",e),B.A.typeOf.string("realityDataId",t),B.A.typeOf.string("rootDocument",i),!(0,N.A)(y_.defaultAccessToken)&&!(0,N.A)(y_.defaultShareKey))throw new U.A("Must set ITwinPlatform.defaultAccessToken or ITwinPlatform.defaultShareKey first");const n=new bt.A({url:`${y_.apiEndpoint}reality-management/reality-data/${t}/readaccess`,headers:{Authorization:y_._getAuthorizationHeader(),Accept:"application/vnd.bentley.itwin-platform.v1+json"},queryParameters:{iTwinId:e}});try{const e=(await n.fetchJson())._links.containerUrl.href,t=new URL(e);return t.pathname=`${t.pathname}/${i}`,t.toString()}catch(i){const n=JSON.parse(i.response);if(401===i.statusCode){const e=n.error.details?.[0].code??"";throw new xt.A(`Unauthorized, bad token, wrong scopes or headers bad. ${e}`)}if(403===i.statusCode)throw console.error(n.error.code,n.error.message),new xt.A("Not allowed, forbidden");if(404===i.statusCode)throw new xt.A(`Reality data not found: ${e}, ${t}`);if(422===i.statusCode)throw new xt.A(`Unprocessable Entity:${n.error.code} ${n.error.message}`);if(429===i.statusCode)throw new xt.A("Too many requests");throw new xt.A(`Unknown request failure ${i.statusCode}`)}};const v_=y_;var w_=i(941060),b_=i(548840),x_=i(150066),T_=i(220871),S_=i(300138);const C_={type:void 0};C_.getRequiredDataPoints=U.A.throwInstantiationError,C_.interpolateOrderZero=U.A.throwInstantiationError,C_.interpolate=U.A.throwInstantiationError;const M_=C_;var E_=i(92457),P_=i(647326),k_=i(150429),O_=i(33914),R_=i(386009),I_=i(139152),D_=i(5188),B_=i(954865),L_=i(708025),F_=i(267465),N_=i(223049),V_=i(153127),U_=i(981757);function z_(){U.A.throwInstantiationError()}Object.defineProperties(z_.prototype,{ellipsoid:{get:U.A.throwInstantiationError}}),z_.prototype.project=U.A.throwInstantiationError,z_.prototype.unproject=U.A.throwInstantiationError;const G_=z_;var K_=i(463298);function q_(e){const t=(e=e??F.A.EMPTY_OBJECT).weights,i=e.times;if(B.A.defined("weights",t),B.A.defined("times",i),B.A.typeOf.number.greaterThanOrEquals("weights.length",t.length,3),t.length%i.length!==0)throw new U.A("times.length must be a factor of weights.length.");this._times=i,this._weights=t,this._count=t.length/i.length,this._lastTimeIndex=0}Object.defineProperties(q_.prototype,{times:{get:function(){return this._times}},weights:{get:function(){return this._weights}}}),q_.prototype.findTimeInterval=ig.A.prototype.findTimeInterval,q_.prototype.wrapTime=ig.A.prototype.wrapTime,q_.prototype.clampTime=ig.A.prototype.clampTime,q_.prototype.evaluate=function(e,t){const i=this.weights,n=this.times,r=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),o=(e-n[r])/(n[r+1]-n[r]);(0,N.A)(t)||(t=new Array(this._count));for(let e=0;e<this._count;e++){const n=r*this._count+e;t[e]=i[n]*(1-o)+i[n+this._count]*o}return t};const H_=q_;var W_=i(245226),j_=i(19128),$_=i(852575);function X_(e,t,i){B.A.defined("url",e),B.A.defined("apiKey",t),(0,N.A)(i)&&B.A.typeOf.object("params",i),(e=bt.A.createIfNeeded(e)).appendForwardSlash(),e.setQueryParameters({key:t}),this._url=e,this._params=i??{},this._credit=new rt.A('Geodata copyright <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',!1)}Object.defineProperties(X_.prototype,{url:{get:function(){return this._url}},params:{get:function(){return this._params}},credit:{get:function(){return this._credit}}}),X_.prototype.geocode=async function(e){return B.A.typeOf.string("query",e),this._url.getDerivedResource({url:"json",queryParameters:(0,nh.A)(this._params,{q:e})}).fetchJson().then(function(e){return e.results.map(function(e){let t;const i=e.bounds;if((0,N.A)(i))t=vt.A.fromDegrees(i.southwest.lng,i.southwest.lat,i.northeast.lng,i.northeast.lat);else{const i=e.geometry.lat,n=e.geometry.lng;t=D.A.fromDegrees(i,n)}return{displayName:e.formatted,destination:t}})})};const Y_=X_;var Z_=i(811203),J_=i(65891);const Q_={packedLength:void 0,pack:U.A.throwInstantiationError,unpack:U.A.throwInstantiationError},ey={packedInterpolationLength:void 0,convertPackedArrayForInterpolation:U.A.throwInstantiationError,unpackInterpolationResult:U.A.throwInstantiationError};var ty=i(927578),iy=i(666775),ny=i(65783),ry=i(257941),oy=i(84609),sy=i(350939),ay=i(151949),ly=i(71694),cy=i(87551),uy=i(576770),dy=i(977363),hy=i(870349),py=i(828021),fy=i(748918),my=i(365943),gy=i(402330);function Ay(){U.A.throwInstantiationError()}Ay.prototype.getURL=U.A.throwInstantiationError;const _y=Ay;var yy=i(118135),vy=i(173866),wy=i(259690),by=i(67988),xy=i(766067),Ty=i(370347),Sy=i(844610),Cy=i(512827),My=i(406882),Ey=i(373388),Py=i(866569),ky=i(252538),Oy=i(86881),Ry=i(149785),Iy=i(708857),Dy=i(658542);function By(e,t,i,n,r,o,s){const a=hy.A.numberOfPoints(e,t,r);let l;const c=i.red,u=i.green,d=i.blue,h=i.alpha,p=n.red,f=n.green,m=n.blue,g=n.alpha;if(me.A.equals(i,n)){for(l=0;l<a;l++)o[s++]=me.A.floatToByte(c),o[s++]=me.A.floatToByte(u),o[s++]=me.A.floatToByte(d),o[s++]=me.A.floatToByte(h);return s}const A=(p-c)/a,_=(f-u)/a,y=(m-d)/a,v=(g-h)/a;let w=s;for(l=0;l<a;l++)o[w++]=me.A.floatToByte(c+l*A),o[w++]=me.A.floatToByte(u+l*_),o[w++]=me.A.floatToByte(d+l*y),o[w++]=me.A.floatToByte(h+l*v);return w}function Ly(e){const t=(e=e??F.A.EMPTY_OBJECT).positions,i=e.colors,n=e.colorsPerVertex??!1;if(!(0,N.A)(t)||t.length<2)throw new U.A("At least two positions are required.");if((0,N.A)(i)&&(n&&i.length<t.length||!n&&i.length<t.length-1))throw new U.A("colors has an invalid length.");this._positions=t,this._colors=i,this._colorsPerVertex=n,this._arcType=e.arcType??Je.A.GEODESIC,this._granularity=e.granularity??Me.A.RADIANS_PER_DEGREE,this._ellipsoid=e.ellipsoid??st.A.default,this._workerName="createSimplePolylineGeometry";let r=1+t.length*D.A.packedLength;r+=(0,N.A)(i)?1+i.length*me.A.packedLength:1,this.packedLength=r+st.A.packedLength+3}Ly.pack=function(e,t,i){if(!(0,N.A)(e))throw new U.A("value is required");if(!(0,N.A)(t))throw new U.A("array is required");let n;i=i??0;const r=e._positions;let o=r.length;for(t[i++]=o,n=0;n<o;++n,i+=D.A.packedLength)D.A.pack(r[n],t,i);const s=e._colors;for(o=(0,N.A)(s)?s.length:0,t[i++]=o,n=0;n<o;++n,i+=me.A.packedLength)me.A.pack(s[n],t,i);return st.A.pack(e._ellipsoid,t,i),i+=st.A.packedLength,t[i++]=e._colorsPerVertex?1:0,t[i++]=e._arcType,t[i]=e._granularity,t},Ly.unpack=function(e,t,i){if(!(0,N.A)(e))throw new U.A("array is required");let n;t=t??0;let r=e[t++];const o=new Array(r);for(n=0;n<r;++n,t+=D.A.packedLength)o[n]=D.A.unpack(e,t);r=e[t++];const s=r>0?new Array(r):void 0;for(n=0;n<r;++n,t+=me.A.packedLength)s[n]=me.A.unpack(e,t);const a=st.A.unpack(e,t);t+=st.A.packedLength;const l=1===e[t++],c=e[t++],u=e[t];return(0,N.A)(i)?(i._positions=o,i._colors=s,i._ellipsoid=a,i._colorsPerVertex=l,i._arcType=c,i._granularity=u,i):new Ly({positions:o,colors:s,ellipsoid:a,colorsPerVertex:l,arcType:c,granularity:u})};const Fy=new Array(2),Ny=new Array(2),Vy={positions:Fy,height:Ny,ellipsoid:void 0,minDistance:void 0,granularity:void 0};Ly.createGeometry=function(e){const t=e._positions,i=e._colors,n=e._colorsPerVertex,r=e._arcType,o=e._granularity,s=e._ellipsoid,a=Me.A.chordLength(o,s.maximumRadius),l=(0,N.A)(i)&&!n;let c;const u=t.length;let d,h,p,f,m=0;if(r===Je.A.GEODESIC||r===Je.A.RHUMB){let e,n,h;r===Je.A.GEODESIC?(e=Me.A.chordLength(o,s.maximumRadius),n=hy.A.numberOfPoints,h=hy.A.generateArc):(e=o,n=hy.A.numberOfPointsRhumbLine,h=hy.A.generateRhumbArc);const g=hy.A.extractHeights(t,s),A=Vy;if(r===Je.A.GEODESIC?A.minDistance=a:A.granularity=o,A.ellipsoid=s,l){let r=0;for(c=0;c<u-1;c++)r+=n(t[c],t[c+1],e)+1;d=new Float64Array(3*r),p=new Uint8Array(4*r),A.positions=Fy,A.height=Ny;let o=0;for(c=0;c<u-1;++c){Fy[0]=t[c],Fy[1]=t[c+1],Ny[0]=g[c],Ny[1]=g[c+1];const e=h(A);if((0,N.A)(i)){const t=e.length/3;f=i[c];for(let e=0;e<t;++e)p[o++]=me.A.floatToByte(f.red),p[o++]=me.A.floatToByte(f.green),p[o++]=me.A.floatToByte(f.blue),p[o++]=me.A.floatToByte(f.alpha)}d.set(e,m),m+=e.length}}else if(A.positions=t,A.height=g,d=new Float64Array(h(A)),(0,N.A)(i)){for(p=new Uint8Array(d.length/3*4),c=0;c<u-1;++c)m=By(t[c],t[c+1],i[c],i[c+1],a,p,m);const e=i[u-1];p[m++]=me.A.floatToByte(e.red),p[m++]=me.A.floatToByte(e.green),p[m++]=me.A.floatToByte(e.blue),p[m++]=me.A.floatToByte(e.alpha)}}else{h=l?2*u-2:u,d=new Float64Array(3*h),p=(0,N.A)(i)?new Uint8Array(4*h):void 0;let e=0,n=0;for(c=0;c<u;++c){const r=t[c];if(l&&c>0&&(D.A.pack(r,d,e),e+=3,f=i[c-1],p[n++]=me.A.floatToByte(f.red),p[n++]=me.A.floatToByte(f.green),p[n++]=me.A.floatToByte(f.blue),p[n++]=me.A.floatToByte(f.alpha)),l&&c===u-1)break;D.A.pack(r,d,e),e+=3,(0,N.A)(i)&&(f=i[c],p[n++]=me.A.floatToByte(f.red),p[n++]=me.A.floatToByte(f.green),p[n++]=me.A.floatToByte(f.blue),p[n++]=me.A.floatToByte(f.alpha))}}const g=new cA.A;g.position=new lA.A({componentDatatype:xg.A.DOUBLE,componentsPerAttribute:3,values:d}),(0,N.A)(i)&&(g.color=new lA.A({componentDatatype:xg.A.UNSIGNED_BYTE,componentsPerAttribute:4,values:p,normalize:!0})),h=d.length/3;const A=2*(h-1),_=IA.A.createTypedArray(h,A);let y=0;for(c=0;c<h-1;++c)_[y++]=c,_[y++]=c+1;return new aA.A({attributes:g,indices:_,primitiveType:gy.A.LINES,boundingSphere:ih.A.fromPoints(t)})};const Uy=Ly;function zy(e){const t=e.radius??1,i={radii:new D.A(t,t,t),stackPartitions:e.stackPartitions,slicePartitions:e.slicePartitions,vertexFormat:e.vertexFormat};this._ellipsoidGeometry=new jg.A(i),this._workerName="createSphereGeometry"}zy.packedLength=jg.A.packedLength,zy.pack=function(e,t,i){return B.A.typeOf.object("value",e),jg.A.pack(e._ellipsoidGeometry,t,i)};const Gy=new jg.A,Ky={radius:void 0,radii:new D.A,vertexFormat:new hg.A,stackPartitions:void 0,slicePartitions:void 0};zy.unpack=function(e,t,i){const n=jg.A.unpack(e,t,Gy);return Ky.vertexFormat=hg.A.clone(n._vertexFormat,Ky.vertexFormat),Ky.stackPartitions=n._stackPartitions,Ky.slicePartitions=n._slicePartitions,(0,N.A)(i)?(D.A.clone(n._radii,Ky.radii),i._ellipsoidGeometry=new jg.A(Ky),i):(Ky.radius=n._radii.x,new zy(Ky))},zy.createGeometry=function(e){return jg.A.createGeometry(e._ellipsoidGeometry)};const qy=zy;var Hy=i(6874),Wy=i(587841),jy=i(465159),$y=i(66415),Xy=i(878626),Yy=i(36138);function Zy(e){throw new U.A("This type should not be instantiated directly.  Instead, use WebMercatorTilingScheme or GeographicTilingScheme.")}Object.defineProperties(Zy.prototype,{ellipsoid:{get:U.A.throwInstantiationError},rectangle:{get:U.A.throwInstantiationError},projection:{get:U.A.throwInstantiationError}}),Zy.prototype.getNumberOfXTilesAtLevel=U.A.throwInstantiationError,Zy.prototype.getNumberOfYTilesAtLevel=U.A.throwInstantiationError,Zy.prototype.rectangleToNativeRectangle=U.A.throwInstantiationError,Zy.prototype.tileXYToNativeRectangle=U.A.throwInstantiationError,Zy.prototype.tileXYToRectangle=U.A.throwInstantiationError,Zy.prototype.positionToTileXY=U.A.throwInstantiationError;const Jy=Zy;var Qy=i(711337),ev=i(193387),tv=i(343899),iv=i(73772),nv=i(884842),rv=i(710551),ov=i(78170),sv=i(85935);function av(e,t){this.rectangle=e,this.maxLevel=t}function lv(e){this.ellipsoid=e.ellipsoid??st.A.default,this.tilingScheme=void 0,this.heightmapWidth=void 0,this.heightmapHeight=void 0,this.levelZeroMaximumGeometricError=void 0,this.rectangles=[]}function cv(e){e=e??F.A.EMPTY_OBJECT,this._errorEvent=new ge.A,this._terrainDataStructure={heightScale:.001,heightOffset:-1e3,elementsPerHeight:3,stride:4,elementMultiplier:256,isBigEndian:!0,lowestEncodedHeight:0,highestEncodedHeight:16777215};let t=e.credit;"string"==typeof t&&(t=new rt.A(t)),this._credit=t,this._tilingScheme=void 0,this._rectangles=[]}lv.prototype.build=function(e){e._tilingScheme=this.tilingScheme,e._heightmapWidth=this.heightmapWidth,e._heightmapHeight=this.heightmapHeight,e._levelZeroMaximumGeometricError=this.levelZeroMaximumGeometricError,e._rectangles=this.rectangles},Object.defineProperties(cv.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}}),cv.fromUrl=async function(e,t){B.A.defined("url",e);const i=new lv(t=t??F.A.EMPTY_OBJECT),n=bt.A.createIfNeeded(e);await async function(e,t,i){try{!function(e,t){const i=t.getElementsByTagName("SRS")[0].textContent;if("EPSG:4326"!==i)throw new xt.A(`SRS ${i} is not supported`);e.tilingScheme=new Mm.A({ellipsoid:e.ellipsoid});const n=t.getElementsByTagName("TileFormat")[0];e.heightmapWidth=parseInt(n.getAttribute("width"),10),e.heightmapHeight=parseInt(n.getAttribute("height"),10),e.levelZeroMaximumGeometricError=Im.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(e.ellipsoid,Math.min(e.heightmapWidth,e.heightmapHeight),e.tilingScheme.getNumberOfXTilesAtLevel(0));const r=t.getElementsByTagName("DataExtent");for(let t=0;t<r.length;++t){const i=r[t],n=Me.A.toRadians(parseFloat(i.getAttribute("minx"))),o=Me.A.toRadians(parseFloat(i.getAttribute("miny"))),s=Me.A.toRadians(parseFloat(i.getAttribute("maxx"))),a=Me.A.toRadians(parseFloat(i.getAttribute("maxy"))),l=parseInt(i.getAttribute("maxlevel"),10);e.rectangles.push(new av(new vt.A(n,o,s,a),l))}}(e,await t.fetchXML())}catch(e){!function(e,t,i){let n=`An error occurred while accessing ${e.url}`;throw(0,N.A)(t)&&(0,N.A)(t.message)&&(n=`${n}: ${t.message}`),Bm.A.reportError(void 0,i,(0,N.A)(i)?i._errorEvent:void 0,n),new xt.A(n)}(t,e,i)}}(i,n);const r=new cv(t);return i.build(r),r._resource=n,r},cv.prototype.requestTileGeometry=function(e,t,i,n){const r=this._tilingScheme.getNumberOfYTilesAtLevel(i),o=this._resource.getDerivedResource({url:`${i}/${e}/${r-t-1}.tif`,queryParameters:{cesium:!0},request:n}).fetchImage({preferImageBitmap:!0});if(!(0,N.A)(o))return;const s=this;return Promise.resolve(o).then(function(n){return new Pm.A({buffer:(0,sv.A)(n),width:s._heightmapWidth,height:s._heightmapHeight,childTileMask:dv(s,e,t,i),structure:s._terrainDataStructure})})},cv.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)};const uv=new vt.A;function dv(e,t,i,n){const r=e._tilingScheme,o=e._rectangles,s=r.tileXYToRectangle(t,i,n);let a=0;for(let e=0;e<o.length&&15!==a;++e){const l=o[e];if(l.maxLevel<=n)continue;const c=l.rectangle,u=vt.A.intersection(c,s,uv);(0,N.A)(u)&&(hv(r,c,2*t,2*i,n+1)&&(a|=4),hv(r,c,2*t+1,2*i,n+1)&&(a|=8),hv(r,c,2*t,2*i+1,n+1)&&(a|=1),hv(r,c,2*t+1,2*i+1,n+1)&&(a|=2))}return a}function hv(e,t,i,n,r){const o=e.tileXYToRectangle(i,n,r);return(0,N.A)(vt.A.intersection(o,t,uv))}cv.prototype.getTileDataAvailable=function(e,t,i){},cv.prototype.loadTileDataAvailability=function(e,t,i){};const pv=cv;var fv=i(717339);function mv(e){e=e??F.A.EMPTY_OBJECT,this._clock=void 0,this._element=void 0,this._clockSubscription=void 0,this._seekFunction=void 0,this._lastPlaybackRate=void 0,this.clock=e.clock,this.element=e.element,this.epoch=e.epoch??ft.A.MINIMUM_VALUE,this.tolerance=e.tolerance??1,this._seeking=!1,this._seekFunction=void 0,this._firstTickAfterSeek=!1}Object.defineProperties(mv.prototype,{clock:{get:function(){return this._clock},set:function(e){const t=this._clock;t!==e&&((0,N.A)(t)&&(this._clockSubscription(),this._clockSubscription=void 0),(0,N.A)(e)&&(this._clockSubscription=e.onTick.addEventListener(mv.prototype._onTick,this)),this._clock=e)}},element:{get:function(){return this._element},set:function(e){const t=this._element;var i;t!==e&&((0,N.A)(t)&&t.removeEventListener("seeked",this._seekFunction,!1),(0,N.A)(e)&&(this._seeking=!1,this._seekFunction=(i=this,function(){i._seeking=!1,i._firstTickAfterSeek=!0}),e.addEventListener("seeked",this._seekFunction,!1)),this._element=e,this._seeking=!1,this._firstTickAfterSeek=!1)}}}),mv.prototype.destroy=function(){return this.element=void 0,this.clock=void 0,(0,V.A)(this)},mv.prototype.isDestroyed=function(){return!1},mv.prototype._trySetPlaybackRate=function(e){if(this._lastPlaybackRate===e.multiplier)return;const t=this._element;try{t.playbackRate=e.multiplier}catch(e){t.playbackRate=0}this._lastPlaybackRate=e.multiplier},mv.prototype._onTick=function(e){const t=this._element;if(!(0,N.A)(t)||t.readyState<2)return;const i=t.paused,n=e.shouldAnimate;if(n===i&&(n?t.play():t.pause()),this._seeking||this._firstTickAfterSeek)return void(this._firstTickAfterSeek=!1);this._trySetPlaybackRate(e);const r=e.currentTime,o=this.epoch??ft.A.MINIMUM_VALUE;let s=Ae.A.secondsDifference(r,o);const a=t.duration;let l;const c=t.currentTime;t.loop?(s%=a,s<0&&(s=a-s),l=s):l=s>a?a:s<0?0:s;const u=n?this.tolerance??1:.001;Math.abs(l-c)>u&&(this._seeking=!0,t.currentTime=l)};const gv=mv;var Av=i(566123);const _v=Object.freeze({VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:1000156006,VK_FORMAT_R10X6_UNORM_PACK16:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:1000156016,VK_FORMAT_R12X4_UNORM_PACK16:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:1000156033,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:1000054001,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:1000054002,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:1000054003,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:1000054004,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:1000054005,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:1000054006,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:1000054007,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:1000066001,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:1000066002,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:1000066003,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:1000066004,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:1000066005,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:1000066006,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:1000066007,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:1000066008,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:1000066009,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:1000066010,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:1000066011,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:1000066012,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:1000066013,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:1000156006,VK_FORMAT_R10X6_UNORM_PACK16_KHR:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:1000156016,VK_FORMAT_R12X4_UNORM_PACK16_KHR:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:1000156033});var yv=i(660419),vv=i(266180),wv=i(903473),bv=i(352581),xv=i(414305),Tv=i(666765),Sv=i(635692),Cv=i(702247),Mv=i(785933),Ev=i(263604),Pv=i(744436),kv=i(525490),Ov=i(394290),Rv=i(75584);function Iv(e,t){if(Iv.passThroughDataForTesting)return t;B.A.typeOf.object("key",e),B.A.typeOf.object("data",t);const i=e.byteLength;if(0===i||i%4!=0)throw new xt.A("The length of key must be greater than 0 and a multiple of 4.");const n=new DataView(t),r=n.getUint32(0,!0);if(1953029805===r||2917034100===r)return t;const o=new DataView(e);let s=0;const a=t.byteLength,l=a-a%8,c=i;let u,d=8;for(;s<l;)for(d=(d+8)%24,u=d;s<l&&u<c;)n.setUint32(s,n.getUint32(s,!0)^o.getUint32(u,!0),!0),n.setUint32(s+4,n.getUint32(s+4,!0)^o.getUint32(u+4,!0),!0),s+=8,u+=24;if(s<a)for(u>=c&&(d=(d+8)%24,u=d);s<a;)n.setUint8(s,n.getUint8(s)^o.getUint8(u)),s++,u++}Iv.passThroughDataForTesting=!1;const Dv=Iv;var Bv=i(223460),Lv=i(419061),Fv=i(786101),Nv=i(522216),Vv=i(712066),Uv=i(592594),zv=i(869467),Gv=i(604752),Kv=i(452684),qv=i(241839),Hv=i(881096),Wv=i(89104),jv=i(647885),$v=i(734780),Xv=i(404547),Yv=i(471874),Zv=i(108303),Jv=i(359897);const Qv=new D.A,ew=function(e,t,i,n){const r=(0,Pv.A)(e,t,i,n,Qv);return!!(0,N.A)(r)&&r.x>0&&r.y>0&&r.z>0};var tw=i(271868),iw=i(252544),nw=i(448871),rw=i(761203);const ow=function(e){return B.A.defined("value",e),e<=.04045?.07739938080495357*e:Math.pow(.9478672985781991*(e+.055),2.4)};var sw=i(841387);const aw=function(e){switch(e){case bv.A.FLOAT:return"float";case bv.A.FLOAT_VEC2:return"vec2";case bv.A.FLOAT_VEC3:return"vec3";case bv.A.FLOAT_VEC4:return"vec4";case bv.A.FLOAT_MAT2:return"mat2";case bv.A.FLOAT_MAT3:return"mat3";case bv.A.FLOAT_MAT4:return"mat4";case bv.A.SAMPLER_2D:return"sampler2D";case bv.A.BOOL:return"bool"}},lw=function(e,t,i){if("function"!=typeof t)throw new U.A("oldFunction is required to be a function.");if("function"!=typeof i)throw new U.A("oldFunction is required to be a function.");return function(){i.apply(e,arguments),t.apply(e,arguments)}};var cw=i(517638),uw=i(566732),dw=i(953019),hw=i(207828),pw=i(418510),fw=i(531573),mw=i(95146),gw=i(153662),Aw=i(730839),_w=i(355540),yw=i(320475),vw=i(511517),ww=i(425438),bw=i(744671),xw=i(653565),Tw=i(124547),Sw=i(770103),Cw=i(734814),Mw=i(208836),Ew=i(886626),Pw=i(74006),kw=i(620297),Ow=i(443383),Rw=i(416882),Iw=i(200646),Dw=i(655979);const Bw=new D.A(1,1,1);function Lw(e){e=e??Bw,B.A.defined("dimensions",e),B.A.typeOf.number.greaterThanOrEquals("dimensions.x",e.x,0),B.A.typeOf.number.greaterThanOrEquals("dimensions.y",e.y,0),B.A.typeOf.number.greaterThanOrEquals("dimensions.z",e.z,0),this._dimensions=D.A.clone(e)}Object.defineProperties(Lw.prototype,{dimensions:{get:function(){return this._dimensions},set:function(e){B.A.defined("value",e),B.A.typeOf.number.greaterThanOrEquals("value.x",e.x,0),B.A.typeOf.number.greaterThanOrEquals("value.y",e.y,0),B.A.typeOf.number.greaterThanOrEquals("value.z",e.z,0),D.A.clone(e,this._dimensions)}}});const Fw=new D.A;Lw.prototype.emit=function(e){const t=this._dimensions,i=D.A.multiplyByScalar(t,.5,Fw),n=Me.A.randomBetween(-i.x,i.x),r=Me.A.randomBetween(-i.y,i.y),o=Me.A.randomBetween(-i.z,i.z);e.position=D.A.fromElements(n,r,o,e.position),e.velocity=D.A.normalize(e.position,e.velocity)};const Nw=Lw;var Vw=i(691302),Uw=i(452663),zw=i(635577),Gw=i(985888),Kw=i(927181),qw=i(625224),Hw=i(308695),Ww=i(474751),jw=i(184483),$w=i(716750);function Xw(){this.featurePropertiesDirty=!1}Object.defineProperties(Xw.prototype,{featuresLength:{get:function(){U.A.throwInstantiationError()}},pointsLength:{get:function(){U.A.throwInstantiationError()}},trianglesLength:{get:function(){U.A.throwInstantiationError()}},geometryByteLength:{get:function(){U.A.throwInstantiationError()}},texturesByteLength:{get:function(){U.A.throwInstantiationError()}},batchTableByteLength:{get:function(){U.A.throwInstantiationError()}},innerContents:{get:function(){U.A.throwInstantiationError()}},ready:{get:function(){U.A.throwInstantiationError()}},tileset:{get:function(){U.A.throwInstantiationError()}},tile:{get:function(){U.A.throwInstantiationError()}},url:{get:function(){U.A.throwInstantiationError()}},batchTable:{get:function(){U.A.throwInstantiationError()}},metadata:{get:function(){U.A.throwInstantiationError()},set:function(e){U.A.throwInstantiationError()}},group:{get:function(){U.A.throwInstantiationError()},set:function(e){U.A.throwInstantiationError()}}}),Xw.prototype.hasProperty=function(e,t){U.A.throwInstantiationError()},Xw.prototype.getFeature=function(e){U.A.throwInstantiationError()},Xw.prototype.applyDebugSettings=function(e,t){U.A.throwInstantiationError()},Xw.prototype.applyStyle=function(e){U.A.throwInstantiationError()},Xw.prototype.update=function(e,t){U.A.throwInstantiationError()},Xw.prototype.pick=function(e,t,i){U.A.throwInstantiationError()},Xw.prototype.isDestroyed=function(){U.A.throwInstantiationError()},Xw.prototype.destroy=function(){U.A.throwInstantiationError()};const Yw=Xw;var Zw=i(891846),Jw=i(621065),Qw=i(223702),eb=i(622569),tb=i(468741),ib=i(45679),nb=i(649413),rb=i(581010),ob=i(953677),sb=i(294023),ab=i(661314),lb=i(629606),cb=i(816968),ub=i(979830),db=i(800859),hb=i(409211);function pb(e){e=e??F.A.EMPTY_OBJECT,this._maximumSubtreeCount=e.maximumSubtreeCount??0,this._subtreeRequestCounter=0,this._queue=new zg.A({comparator:pb.comparator})}function fb(e,t){this.subtree=e,this.stamp=t}pb.prototype.addSubtree=function(e){const t=new fb(e,this._subtreeRequestCounter);this._subtreeRequestCounter++,this._queue.insert(t);const i=e.implicitCoordinates;if(i.level>0){const e=i.getParentSubtreeCoordinates();if(void 0===this.find(e))throw new U.A("parent node needs to exist")}if(this._maximumSubtreeCount>0)for(;this._queue.length>this._maximumSubtreeCount&&this._queue.getMinimum()!==t;)this._queue.removeMinimum()},pb.prototype.find=function(e){const t=this._queue,i=t.internalArray,n=t.length;for(let t=0;t<n;t++){const n=i[t],r=n.subtree.implicitCoordinates;if(e.isEqual(r))return n.subtree}},pb.comparator=function(e,t){const i=e.subtree.implicitCoordinates,n=t.subtree.implicitCoordinates;return i.isAncestor(n)?1:n.isAncestor(i)?-1:e.stamp-t.stamp};const mb=pb;var gb=i(410974),Ab=i(834957),_b=i(165955),yb=i(374607),vb=i(192518),wb=i(872182),bb=i(491807),xb=i(574917),Tb=i(304431);function Sb(e){e=e??F.A.EMPTY_OBJECT;const{className:t,names:i,types:n,componentTypes:r,shape:o,dimensions:s,paddingBefore:a=D.A.ZERO.clone(),paddingAfter:l=D.A.ZERO.clone(),globalTransform:c=tg.A.IDENTITY.clone(),shapeTransform:u=tg.A.IDENTITY.clone(),minBounds:d,maxBounds:h,minimumValues:p,maximumValues:f,maximumTileCount:m}=e;B.A.typeOf.string("className",t),B.A.typeOf.object("names",i),B.A.typeOf.object("types",n),B.A.typeOf.object("componentTypes",r),B.A.typeOf.string("shape",o),B.A.typeOf.object("dimensions",s),this._shapeTransform=u,this._globalTransform=c,this._shape=o,this._minBounds=d,this._maxBounds=h,this._dimensions=s,this._paddingBefore=a,this._paddingAfter=l,this._className=t,this._names=i,this._types=n,this._componentTypes=r,this._metadataOrder=o===Tb.A.ELLIPSOID?xb.A.Z_UP:xb.A.Y_UP,this._minimumValues=p,this._maximumValues=f,this._maximumTileCount=m,this._availableLevels=void 0,this._implicitTileset=void 0,this._subtreeCache=new mb}Object.defineProperties(Sb.prototype,{globalTransform:{get:function(){return this._globalTransform}},shapeTransform:{get:function(){return this._shapeTransform}},shape:{get:function(){return this._shape}},minBounds:{get:function(){return this._minBounds}},maxBounds:{get:function(){return this._maxBounds}},dimensions:{get:function(){return this._dimensions}},paddingBefore:{get:function(){return this._paddingBefore}},paddingAfter:{get:function(){return this._paddingAfter}},className:{get:function(){return this._className}},names:{get:function(){return this._names}},types:{get:function(){return this._types}},componentTypes:{get:function(){return this._componentTypes}},metadataOrder:{get:function(){return this._metadataOrder}},minimumValues:{get:function(){return this._minimumValues}},maximumValues:{get:function(){return this._maximumValues}},maximumTileCount:{get:function(){return this._maximumTileCount}},availableLevels:{get:function(){return this._availableLevels}}}),Sb.fromUrl=async function(e){B.A.defined("url",e);const t=bt.A.createIfNeeded(e),i=await t.fetchJson();!function(e){const t=e.root;if(!(0,N.A)(t.content))throw new xt.A("Root must have content");if(!(0,db.A)(t.content,"3DTILES_content_voxels"))throw new xt.A("Root tile content must have 3DTILES_content_voxels extension");if(!(0,db.A)(t,"3DTILES_implicit_tiling")&&!(0,N.A)(t.implicitTiling))throw new xt.A("Root tile must have implicit tiling");if(!(0,N.A)(e.schema)&&!(0,N.A)(e.schemaUri)&&!(0,db.A)(e,"3DTILES_metadata"))throw new xt.A("Tileset must have a metadata schema")}(i);const n=function(e,t){const{schemaUri:i,schema:n}=e;return(0,N.A)(i)?wb.A.getSchemaLoader({resource:t.getDerivedResource({url:i})}):wb.A.getSchemaLoader({schema:n})}(i,t);await n.load();const{root:r}=i,o=(0,db.A)(i,"3DTILES_metadata")?i.extensions["3DTILES_metadata"]:i,s=new ub.A({metadataJson:o,schema:n.schema}),a=r.content.extensions["3DTILES_content_voxels"],l=function(e,t){const{schema:i,statistics:n}=e,r=n?.classes[t],o=i.classes[t].properties,s=Object.entries(o).map(([e,t])=>{const{type:i,componentType:n}=t,o=r?.properties[e].min,s=r?.properties[e].max,a=yb.A.getComponentCount(i);return{id:e,type:i,componentType:n,minValue:Eb(o,a),maxValue:Eb(s,a)}}),a=s.map(e=>e.id),l=s.map(e=>e.type),c=s.map(e=>e.componentType),u=s.map(e=>e.minValue),d=s.map(e=>e.maxValue),h=u.some(N.A);return{className:t,names:a,types:l,componentTypes:c,minimumValues:h?u:void 0,maximumValues:h?d:void 0}}(s,a.class);Object.assign(l,function(e){const t=e.boundingVolume;if((0,N.A)(t.box))return function(e){const t=BA.A.unpack(e),i=Ki.A.getScale(t.halfAxes,Cb),n=Ki.A.getRotation(t.halfAxes,Mb);return{shape:Tb.A.BOX,minBounds:D.A.negate(i,new D.A),maxBounds:D.A.clone(i),shapeTransform:tg.A.fromRotationTranslation(n,t.center)}}(t.box);if((0,N.A)(t.region))return function(e){const t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],s=e[5],a=tg.A.fromScale(st.A.WGS84.radii),l=new D.A(t,i,o),c=new D.A(n,r,s);return{shape:Tb.A.ELLIPSOID,minBounds:l,maxBounds:c,shapeTransform:a}}(t.region);if((0,db.A)(t,"3DTILES_bounding_volume_cylinder"))return function(e){const{minRadius:t,maxRadius:i,height:n,minAngle:r=-Me.A.PI,maxAngle:o=Me.A.PI,translation:s=[0,0,0],rotation:a=[0,0,0,1]}=e;B.A.typeOf.number("minRadius",t),B.A.typeOf.number("maxRadius",i),B.A.typeOf.number("height",n),B.A.typeOf.number("minAngle",r),B.A.typeOf.number("maxAngle",o),B.A.typeOf.object("translation",s),B.A.typeOf.object("rotation",a);const l=-.5*n+s[2],c=.5*n+s[2],u=tg.A.fromTranslationQuaternionRotationScale(D.A.unpack(s),yt.A.unpack(a),D.A.ONE);return{shape:Tb.A.CYLINDER,minBounds:D.A.fromElements(t,r,l),maxBounds:D.A.fromElements(i,o,c),shapeTransform:u}}(t.extensions["3DTILES_bounding_volume_cylinder"]);throw new xt.A("Only box, region and 3DTILES_bounding_volume_cylinder are supported in Cesium3DTilesVoxelProvider")}(r)),(0,N.A)(r.transform)?l.globalTransform=tg.A.unpack(r.transform):l.globalTransform=tg.A.clone(tg.A.IDENTITY),l.dimensions=D.A.unpack(a.dimensions),l.maximumTileCount=function(e){if((0,N.A)(e.tileset))return e.tileset.getPropertyBySemantic(_b.A.TILESET_TILE_COUNT)}(s),(0,N.A)(a.padding)&&(l.paddingBefore=D.A.unpack(a.padding.before),l.paddingAfter=D.A.unpack(a.padding.after));const c=new Sb(l),u=new Ab.A(t,r,n.schema);return c._implicitTileset=u,c._availableLevels=u.availableLevels,wb.A.unload(n),c};const Cb=new D.A,Mb=new Ki.A;function Eb(e,t){if(!(0,N.A)(e))return;const i=Array.isArray(e)?e:[e];return Array.from({length:t},(e,t)=>i[t])}Sb.prototype.requestData=async function(e){e=e??F.A.EMPTY_OBJECT;const{tileLevel:t=0,tileX:i=0,tileY:n=0,tileZ:r=0,keyframe:o=0}=e;if(0!==o)return Promise.reject("3D Tiles currently doesn't support time-dynamic data.");const s=this._implicitTileset,a=new gb.A({subdivisionScheme:s.subdivisionScheme,subtreeLevels:s.subtreeLevels,level:t,x:i,y:n,z:r}),l=a.isSubtreeRoot()&&a.level>0,c=l?a.getParentSubtreeCoordinates():a.getSubtreeCoordinates(),u=await async function(e,t){const i=e._implicitTileset,n=e._subtreeCache;let r=n.find(t);if((0,N.A)(r))return r;const o=i.subtreeUriTemplate.getDerivedResource({templateValues:t.getTemplateValues()}),s=i.baseResource.getDerivedResource({url:o.url}),a=await s.fetchArrayBuffer();if(r=n.find(t),(0,N.A)(r))return r;const l=(0,vb.A)(a);return r=await hb.A.fromSubtreeJson(s,l.jsonPayload,l.binaryPayload,i,t),n.addSubtree(r),r}(this,c);if(!(l?u.childSubtreeIsAvailableAtCoordinates:u.tileIsAvailableAtCoordinates).call(u,a))return Promise.reject(`Tile is not available at level ${t}, x ${i}, y ${n}, z ${r}.`);const{contentUriTemplates:d,baseResource:h}=s,p=d[0].getDerivedResource({templateValues:a.getTemplateValues()}),f=h.getDerivedResource({url:p.url});return bb.A.fromGltf(f)};const Pb=Sb;var kb=i(855927),Ob=i(329554),Rb=i(648117),Ib=i(529755),Db=i(741740),Bb=i(724812),Lb=i(485760),Fb=i(727541);function Nb(e){e=e??1,B.A.typeOf.number.greaterThan("radius",e,0),this._radius=e??1}Object.defineProperties(Nb.prototype,{radius:{get:function(){return this._radius},set:function(e){B.A.typeOf.number.greaterThan("value",e,0),this._radius=e}}}),Nb.prototype.emit=function(e){const t=Me.A.randomBetween(0,Me.A.TWO_PI),i=Me.A.randomBetween(0,this._radius),n=i*Math.cos(t),r=i*Math.sin(t);e.position=D.A.fromElements(n,r,0,e.position),e.velocity=D.A.clone(D.A.UNIT_Z,e.velocity)};const Vb=Nb;var Ub=i(627853),zb=i(23708),Gb=i(711284),Kb=i(506964),qb=i(348460);const Hb={CUMULUS:0,validate:function(e){return e===Hb.CUMULUS}},Wb=Object.freeze(Hb);function jb(e,t){if(e=e??F.A.EMPTY_OBJECT,this._show=e.show??!0,this._position=D.A.clone(e.position??D.A.ZERO),!(0,N.A)(e.scale)&&(0,N.A)(e.maximumSize))this._maximumSize=D.A.clone(e.maximumSize),this._scale=new fe.A(this._maximumSize.x,this._maximumSize.y);else{this._scale=fe.A.clone(e.scale??new fe.A(20,12));const t=new D.A(this._scale.x,this._scale.y,Math.min(this._scale.x,this._scale.y)/1.5);this._maximumSize=D.A.clone(e.maximumSize??t)}this._slice=e.slice??-1,this._color=me.A.clone(e.color??me.A.WHITE),this._brightness=e.brightness??1,this._cloudCollection=t,this._index=-1}const $b=jb.SHOW_INDEX=0,Xb=jb.POSITION_INDEX=1,Yb=jb.SCALE_INDEX=2,Zb=jb.MAXIMUM_SIZE_INDEX=3,Jb=jb.SLICE_INDEX=4,Qb=jb.BRIGHTNESS_INDEX=5,ex=jb.COLOR_INDEX=6;function tx(e,t){const i=e._cloudCollection;(0,N.A)(i)&&(i._updateCloud(e,t),e._dirty=!0)}jb.NUMBER_OF_PROPERTIES=7,Object.defineProperties(jb.prototype,{show:{get:function(){return this._show},set:function(e){B.A.typeOf.bool("value",e),this._show!==e&&(this._show=e,tx(this,$b))}},position:{get:function(){return this._position},set:function(e){B.A.typeOf.object("value",e);const t=this._position;D.A.equals(t,e)||(D.A.clone(e,t),tx(this,Xb))}},scale:{get:function(){return this._scale},set:function(e){B.A.typeOf.object("value",e);const t=this._scale;fe.A.equals(t,e)||(fe.A.clone(e,t),tx(this,Yb))}},maximumSize:{get:function(){return this._maximumSize},set:function(e){B.A.typeOf.object("value",e);const t=this._maximumSize;D.A.equals(t,e)||(D.A.clone(e,t),tx(this,Zb))}},color:{get:function(){return this._color},set:function(e){B.A.typeOf.object("value",e);const t=this._color;me.A.equals(t,e)||(me.A.clone(e,t),tx(this,ex))}},slice:{get:function(){return this._slice},set:function(e){B.A.typeOf.number("value",e),this._slice!==e&&(this._slice=e,tx(this,Jb))}},brightness:{get:function(){return this._brightness},set:function(e){B.A.typeOf.number("value",e),this._brightness!==e&&(this._brightness=e,tx(this,Qb))}}}),jb.prototype._destroy=function(){this._cloudCollection=void 0};const ix=jb;let nx;const rx=new D.A,ox={positionHighAndScaleX:0,positionLowAndScaleY:1,packedAttribute0:2,packedAttribute1:3,color:4},sx={direction:0,positionHighAndScaleX:1,positionLowAndScaleY:2,packedAttribute0:3,packedAttribute1:4,color:5},ax=ix.SHOW_INDEX,lx=ix.POSITION_INDEX,cx=ix.SCALE_INDEX,ux=ix.MAXIMUM_SIZE_INDEX,dx=ix.SLICE_INDEX,hx=ix.BRIGHTNESS_INDEX,px=ix.NUMBER_OF_PROPERTIES,fx=ix.COLOR_INDEX;function mx(e){e=e??F.A.EMPTY_OBJECT,this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(px),this._noiseTexture=void 0,this._textureSliceWidth=128,this._noiseTextureRows=4,this.noiseDetail=e.noiseDetail??16,this.noiseOffset=D.A.clone(e.noiseOffset??D.A.ZERO),this._loading=!1,this._ready=!1;const t=this;this._uniforms={u_noiseTexture:function(){return t._noiseTexture},u_noiseTextureDimensions:gx(t),u_noiseDetail:function(){return t.noiseDetail}},this._vaNoise=void 0,this._spNoise=void 0,this._spCreated=!1,this._sp=void 0,this._rs=void 0,this.show=e.show??!0,this._colorCommands=[],this.debugBillboards=e.debugBillboards??!1,this._compiledDebugBillboards=!1,this.debugEllipsoids=e.debugEllipsoids??!1,this._compiledDebugEllipsoids=!1}function gx(e){return function(){return rx.x=e._textureSliceWidth,rx.y=e._noiseTextureRows,rx.z=1/e._noiseTextureRows,rx}}function Ax(e){const t=e.length;for(let i=0;i<t;++i)e[i]&&e[i]._destroy()}function _x(e){if(e._cloudsRemoved){e._cloudsRemoved=!1;const t=[],i=e._clouds,n=i.length;for(let e=0,r=0;e<n;++e){const n=i[e];(0,N.A)(n)&&(i._index=r++,t.push(n))}e._clouds=t}}Object.defineProperties(mx.prototype,{length:{get:function(){return _x(this),this._clouds.length}}}),mx.prototype.add=function(e){const t=(e=e??F.A.EMPTY_OBJECT).cloudType??Wb.CUMULUS;if(!Wb.validate(t))throw new U.A("invalid cloud type");let i;return t===Wb.CUMULUS&&(i=new ix(e,this),i._index=this._clouds.length,this._clouds.push(i),this._createVertexArray=!0),i},mx.prototype.remove=function(e){return!!this.contains(e)&&(this._clouds[e._index]=void 0,this._cloudsRemoved=!0,this._createVertexArray=!0,e._destroy(),!0)},mx.prototype.removeAll=function(){Ax(this._clouds),this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!0},mx.prototype._updateCloud=function(e,t){e._dirty||(this._cloudsToUpdate[this._cloudsToUpdateIndex++]=e),++this._propertiesChanged[t]},mx.prototype.contains=function(e){return(0,N.A)(e)&&e._cloudCollection===this},mx.prototype.get=function(e){return B.A.typeOf.number("index",e),_x(this),this._clouds[e]};const yx=new Float32Array([-1,-1,1,-1,1,1,-1,1]),vx=new Uint16Array([0,1,2,0,2,3]);let wx;function bx(e){let t=e.cache.cloudCollection_indexBufferBatched;if((0,N.A)(t))return t;const i=new Uint16Array(98298);for(let e=0,t=0;e<98298;e+=6,t+=4)i[e]=t,i[e+1]=t+1,i[e+2]=t+2,i[e+3]=t,i[e+4]=t+2,i[e+5]=t+3;return t=r.A.createIndexBuffer({context:e,typedArray:i,usage:o.A.STATIC_DRAW,indexDatatype:IA.A.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferBatched=t,t}function xx(e){let t=e.cache.cloudCollection_indexBufferInstanced;return(0,N.A)(t)||(t=r.A.createIndexBuffer({context:e,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:o.A.STATIC_DRAW,indexDatatype:IA.A.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferInstanced=t),t}function Tx(e){let t=e.cache.cloudCollection_vertexBufferInstanced;return(0,N.A)(t)||(t=r.A.createVertexBuffer({context:e,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:o.A.STATIC_DRAW}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_vertexBufferInstanced=t),t}const Sx=new Qg.A;function Cx(e,t,i,n){let r;const o=i[nx.positionHighAndScaleX],s=i[nx.positionLowAndScaleY],a=n.position;Qg.A.fromCartesian(a,Sx);const l=n.scale,c=Sx.high,u=Sx.low;e._instanced?(r=n._index,o(r,c.x,c.y,c.z,l.x),s(r,u.x,u.y,u.z,l.y)):(r=4*n._index,o(r+0,c.x,c.y,c.z,l.x),o(r+1,c.x,c.y,c.z,l.x),o(r+2,c.x,c.y,c.z,l.x),o(r+3,c.x,c.y,c.z,l.x),s(r+0,u.x,u.y,u.z,l.y),s(r+1,u.x,u.y,u.z,l.y),s(r+2,u.x,u.y,u.z,l.y),s(r+3,u.x,u.y,u.z,l.y))}function Mx(e,t,i,n){let r;const o=i[nx.packedAttribute0],s=n.show,a=n.brightness;e._instanced?(r=n._index,o(r,s,a,0,0)):(r=4*n._index,o(r+0,s,a,0,0),o(r+1,s,a,1,0),o(r+2,s,a,1,1),o(r+3,s,a,0,1))}function Ex(e,t,i,n){let r;const o=i[nx.packedAttribute1],s=n.maximumSize,a=n.slice;e._instanced?(r=n._index,o(r,s.x,s.y,s.z,a)):(r=4*n._index,o(r+0,s.x,s.y,s.z,a),o(r+1,s.x,s.y,s.z,a),o(r+2,s.x,s.y,s.z,a),o(r+3,s.x,s.y,s.z,a))}function Px(e,t,i,n){let r;const o=i[nx.color],s=n.color,a=me.A.floatToByte(s.red),l=me.A.floatToByte(s.green),c=me.A.floatToByte(s.blue),u=me.A.floatToByte(s.alpha);e._instanced?(r=n._index,o(r,a,l,c,u)):(r=4*n._index,o(r+0,a,l,c,u),o(r+1,a,l,c,u),o(r+2,a,l,c,u),o(r+3,a,l,c,u))}function kx(e,t,i,n){Cx(e,0,i,n),Mx(e,0,i,n),Ex(e,0,i,n),Px(e,0,i,n)}const Ox=[];mx.prototype.update=function(e){if(_x(this),!this.show)return;const t=this.debugBillboards||this.debugEllipsoids;this._ready=!!t||(0,N.A)(this._noiseTexture),this._ready||this._loading||t||function(e,t,i,n){const s=e,l=s._textureSliceWidth,c=s._noiseTextureRows;if(l/c<1||l%c!==0)throw new U.A("noiseTextureRows must evenly divide textureSliceWidth");const u=t.context;s._vaNoise=function(e){const t=r.A.createVertexBuffer({context:e,typedArray:yx,usage:o.A.STATIC_DRAW}),i=r.A.createIndexBuffer({context:e,typedArray:vx,usage:o.A.STATIC_DRAW,indexDatatype:IA.A.UNSIGNED_SHORT}),n=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:xg.A.FLOAT}];return new J.A({context:e,attributes:n,indexBuffer:i})}(u),s._spNoise=P.A.fromCache({context:u,vertexShaderSource:i,fragmentShaderSource:n,attributeLocations:{position:0}});const d=s.noiseDetail,h=s.noiseOffset;s._noiseTexture=new I.A({context:u,width:l*l/c,height:l*c,pixelDatatype:v.A.UNSIGNED_BYTE,pixelFormat:z.A.RGBA,sampler:new T.A({wrapS:Y.A.REPEAT,wrapT:Y.A.REPEAT,minificationFilter:K.A.NEAREST,magnificationFilter:G.A.NEAREST})});const p=new a.A({vertexArray:s._vaNoise,shaderProgram:s._spNoise,outputTexture:s._noiseTexture,uniformMap:{u_noiseTextureDimensions:gx(s),u_noiseDetail:function(){return d},u_noiseOffset:function(){return h}},persists:!1,owner:e,postExecute:function(e){s._ready=!0,s._loading=!1}});t.commandList.push(p),s._loading=!0}(this,e,Df,If),this._instanced=e.context.instancedArrays,nx=this._instanced?sx:ox,wx=this._instanced?xx:bx;const i=this._clouds.length,n=this._cloudsToUpdate,s=this._cloudsToUpdateIndex;this._createVertexArray?function(e,t){const i=e,n=t.context;i._createVertexArray=!1,i._vaf=i._vaf&&i._vaf.destroy();const r=e._clouds,s=r.length;if(s>0){i._vaf=function(e,t,i){const n=[{index:nx.positionHighAndScaleX,componentsPerAttribute:4,componentDatatype:xg.A.FLOAT,usage:o.A.STATIC_DRAW},{index:nx.positionLowAndScaleY,componentsPerAttribute:4,componentDatatype:xg.A.FLOAT,usage:o.A.STATIC_DRAW},{index:nx.packedAttribute0,componentsPerAttribute:4,componentDatatype:xg.A.FLOAT,usage:o.A.STATIC_DRAW},{index:nx.packedAttribute1,componentsPerAttribute:4,componentDatatype:xg.A.FLOAT,usage:o.A.STATIC_DRAW},{index:nx.color,componentsPerAttribute:4,componentDatatype:xg.A.UNSIGNED_BYTE,normalize:!0,usage:o.A.STATIC_DRAW}];i&&n.push({index:nx.direction,componentsPerAttribute:2,componentDatatype:xg.A.FLOAT,vertexBuffer:Tx(e)});const r=i?t:4*t;return new Q.A(e,n,r,i)}(n,s,i._instanced);const t=i._vaf.writers;let a;for(a=0;a<s;++a)kx(e,0,t,r[a]);i._vaf.commit(wx(n))}}(this,e):s>0&&function(e,t){const i=t.context,n=e,r=n._clouds.length,o=n._cloudsToUpdate,s=n._cloudsToUpdateIndex,a=n._propertiesChanged,l=Ox;l.length=0,(a[lx]||a[cx])&&l.push(Cx),(a[ax]||a[hx])&&l.push(Mx),(a[ux]||a[dx])&&l.push(Ex),a[fx]&&l.push(Px);const c=l.length,u=n._vaf.writers;let d,h,p;if(s/r>.1){for(d=0;d<s;++d)for(h=o[d],h._dirty=!1,p=0;p<c;++p)l[p](e,t,u,h);n._vaf.commit(wx(i))}else{for(d=0;d<s;++d){for(h=o[d],h._dirty=!1,p=0;p<c;++p)l[p](e,t,u,h);n._instanced?n._vaf.subCommit(h._index,1):n._vaf.subCommit(4*h._index,4)}n._vaf.endSubCommits()}n._cloudsToUpdateIndex=0}(this,e),s>1.5*i&&(n.length=i),!(0,N.A)(this._vaf)||!(0,N.A)(this._vaf.va)||!this._ready&!t||(this._spCreated&&this.debugBillboards===this._compiledDebugBillboards&&this.debugEllipsoids===this._compiledDebugEllipsoids||function(e,t,i,n){const r=t.context,o=e,s=new k.A({defines:[],sources:[i]});o._instanced&&s.defines.push("INSTANCED");const a=new k.A({defines:[],sources:[n]});o.debugBillboards&&a.defines.push("DEBUG_BILLBOARDS"),o.debugEllipsoids&&a.defines.push("DEBUG_ELLIPSOIDS"),o._sp=P.A.replaceCache({context:r,shaderProgram:o._sp,vertexShaderSource:s,fragmentShaderSource:a,attributeLocations:nx}),o._rs=w.A.fromCache({depthTest:{enabled:!0,func:bv.A.LESS},depthMask:!1,blending:Iw.A.ALPHA_BLEND}),o._spCreated=!0,o._compiledDebugBillboards=o.debugBillboards,o._compiledDebugEllipsoids=o.debugEllipsoids}(this,e,Rf,Of),function(e,t){const i=e,n=t.passes,r=i._uniforms,o=t.commandList;if(n.render){const t=i._colorCommands,n=i._vaf.va,s=n.length;t.length=s;for(let a=0;a<s;a++){let s=t[a];(0,N.A)(s)||(s=t[a]=new p.A),s.pass=_.A.TRANSLUCENT,s.owner=e,s.uniformMap=r,s.count=n[a].indicesCount,s.vertexArray=n[a].va,s.shaderProgram=i._sp,s.renderState=i._rs,i._instanced&&(s.count=6,s.instanceCount=i._clouds.length),o.push(s)}}}(this,e))},mx.prototype.isDestroyed=function(){return!1},mx.prototype.destroy=function(){return this._noiseTexture=this._noiseTexture&&this._noiseTexture.destroy(),this._sp=this._sp&&this._sp.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),Ax(this._clouds),(0,V.A)(this)};const Rx=mx;var Ix=i(583511),Dx=i(33138);const Bx=Me.A.toRadians(30);function Lx(e){this._angle=e??Bx}Object.defineProperties(Lx.prototype,{angle:{get:function(){return this._angle},set:function(e){B.A.typeOf.number("value",e),this._angle=e}}}),Lx.prototype.emit=function(e){const t=Math.tan(this._angle),i=Me.A.randomBetween(0,Me.A.TWO_PI),n=Me.A.randomBetween(0,t),r=n*Math.cos(i),o=n*Math.sin(i);e.velocity=D.A.fromElements(r,o,1,e.velocity),D.A.normalize(e.velocity,e.velocity),e.position=D.A.clone(D.A.ZERO,e.position)};const Fx=Lx;var Nx=i(35204),Vx=i(937069),Ux=i(527083);function zx(e){const t=(e=e??F.A.EMPTY_OBJECT).attributeName;let i=e.perInstanceAttribute;if(!(0,N.A)(t))throw new U.A("options.attributeName is required.");(0,N.A)(i)||(i=!1);let n=e.glslDatatype??"vec3";const r=`v_${t}`;let o;if("normal"===t||"tangent"===t||"bitangent"===t)o=`vec4 getColor() { return vec4((${r} + vec3(1.0)) * 0.5, 1.0); }\n`;else switch("st"===t&&(n="vec2"),n){case"float":o=`vec4 getColor() { return vec4(vec3(${r}), 1.0); }\n`;break;case"vec2":o=`vec4 getColor() { return vec4(${r}, 0.0, 1.0); }\n`;break;case"vec3":o=`vec4 getColor() { return vec4(${r}, 1.0); }\n`;break;case"vec4":o=`vec4 getColor() { return ${r}; }\n`;break;default:throw new U.A("options.glslDatatype must be float, vec2, vec3, or vec4.")}const s=`in vec3 position3DHigh;\nin vec3 position3DLow;\nin float batchId;\n${i?"":`in ${n} ${t};\n`}out ${n} ${r};\nvoid main()\n{\nvec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n${i?`${r} = czm_batchTable_${t}(batchId);\n`:`${r} = ${t};\n`}gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}`,a=`in ${n} ${r};\n${o}\nvoid main()\n{\nout_FragColor = getColor();\n}`;this.material=void 0,this.translucent=e.translucent??!1,this._vertexShaderSource=e.vertexShaderSource??s,this._fragmentShaderSource=e.fragmentShaderSource??a,this._renderState=hw.A.getDefaultRenderState(!1,!1,e.renderState),this._closed=e.closed??!1,this._attributeName=t,this._glslDatatype=n}Object.defineProperties(zx.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},attributeName:{get:function(){return this._attributeName}},glslDatatype:{get:function(){return this._glslDatatype}}}),zx.prototype.getFragmentShaderSource=hw.A.prototype.getFragmentShaderSource,zx.prototype.isTranslucent=hw.A.prototype.isTranslucent,zx.prototype.getRenderState=hw.A.prototype.getRenderState;const Gx=zx;var Kx=i(199744),qx=i(809418),Hx=i(234957),Wx=i(842153);function jx(e){e=e??F.A.EMPTY_OBJECT,this.length=e.length??1e7,this._length=void 0,this.width=e.width??2,this._width=void 0,this.show=e.show??!0,this.modelMatrix=tg.A.clone(e.modelMatrix??tg.A.IDENTITY),this._modelMatrix=new tg.A,this.id=e.id,this._id=void 0,this._primitive=void 0}jx.prototype.update=function(e){if(this.show){if(!(0,N.A)(this._primitive)||!tg.A.equals(this._modelMatrix,this.modelMatrix)||this._length!==this.length||this._width!==this.width||this._id!==this.id){this._modelMatrix=tg.A.clone(this.modelMatrix,this._modelMatrix),this._length=this.length,this._width=this.width,this._id=this.id,(0,N.A)(this._primitive)&&this._primitive.destroy(),0===this.modelMatrix[12]&&0===this.modelMatrix[13]&&0===this.modelMatrix[14]&&(this.modelMatrix[14]=.01);const e=new hA.A({geometry:new dy.A({positions:[D.A.ZERO,D.A.UNIT_X],width:this.width,vertexFormat:Hx.A.VERTEX_FORMAT,colors:[me.A.RED,me.A.RED],arcType:Je.A.NONE}),modelMatrix:tg.A.multiplyByUniformScale(this.modelMatrix,this.length,new tg.A),id:this.id,pickPrimitive:this}),t=new hA.A({geometry:new dy.A({positions:[D.A.ZERO,D.A.UNIT_Y],width:this.width,vertexFormat:Hx.A.VERTEX_FORMAT,colors:[me.A.GREEN,me.A.GREEN],arcType:Je.A.NONE}),modelMatrix:tg.A.multiplyByUniformScale(this.modelMatrix,this.length,new tg.A),id:this.id,pickPrimitive:this}),i=new hA.A({geometry:new dy.A({positions:[D.A.ZERO,D.A.UNIT_Z],width:this.width,vertexFormat:Hx.A.VERTEX_FORMAT,colors:[me.A.BLUE,me.A.BLUE],arcType:Je.A.NONE}),modelMatrix:tg.A.multiplyByUniformScale(this.modelMatrix,this.length,new tg.A),id:this.id,pickPrimitive:this});this._primitive=new Wx.A({geometryInstances:[e,t,i],appearance:new Hx.A,asynchronous:!1})}this._primitive.update(e)}},jx.prototype.isDestroyed=function(){return!1},jx.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,V.A)(this)};const $x=jx;var Xx=i(523721),Yx=i(626355),Zx=i(384292),Jx=i(77191),Qx=i(489970),eT=i(253478),tT=i(836721),iT=i(445848),nT=i(226381),rT=i(615557),oT=i(168976);const sT="in vec3 v_positionMC;\nin vec3 v_positionEC;\nin vec2 v_st;\n\nvoid main()\n{\n    czm_materialInput materialInput;\n\n    vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    materialInput.s = v_st.s;\n    materialInput.st = v_st;\n    materialInput.str = vec3(v_st, 0.0);\n\n    // Convert tangent space material normal to eye space\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\n\n    // Convert view vector to world space\n    vec3 positionToEyeEC = -v_positionEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n",aT="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec2 st;\nin float batchId;\n\nout vec3 v_positionMC;\nout vec3 v_positionEC;\nout vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionMC = position3DHigh + position3DLow;           // position in model coordinates\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;     // position in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n";var lT=i(608191);function cT(e){const t=(e=e??F.A.EMPTY_OBJECT).translucent??!0,i=e.aboveGround??!1;this.material=(0,N.A)(e.material)?e.material:lT.A.fromType(lT.A.ColorType),this.translucent=e.translucent??!0,this._vertexShaderSource=e.vertexShaderSource??aT,this._fragmentShaderSource=e.fragmentShaderSource??sT,this._renderState=hw.A.getDefaultRenderState(t,!i,e.renderState),this._closed=!1,this._flat=e.flat??!1,this._faceForward=e.faceForward??i,this._aboveGround=i}Object.defineProperties(cT.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return cT.VERTEX_FORMAT}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}},aboveGround:{get:function(){return this._aboveGround}}}),cT.VERTEX_FORMAT=hg.A.POSITION_AND_ST,cT.prototype.getFragmentShaderSource=hw.A.prototype.getFragmentShaderSource,cT.prototype.isTranslucent=hw.A.prototype.isTranslucent,cT.prototype.getRenderState=hw.A.prototype.getRenderState;const uT=cT;var dT=i(84269),hT=i(470622),pT=i(203576),fT=i(5244);function mT(e){if(!(0,N.A)(e)||!(0,N.A)(e.scene))throw new U.A("options.scene is required.");this._scene=e.scene,this.samplingWindow=e.samplingWindow??mT.defaultSettings.samplingWindow,this.quietPeriod=e.quietPeriod??mT.defaultSettings.quietPeriod,this.warmupPeriod=e.warmupPeriod??mT.defaultSettings.warmupPeriod,this.minimumFrameRateDuringWarmup=e.minimumFrameRateDuringWarmup??mT.defaultSettings.minimumFrameRateDuringWarmup,this.minimumFrameRateAfterWarmup=e.minimumFrameRateAfterWarmup??mT.defaultSettings.minimumFrameRateAfterWarmup,this._lowFrameRate=new ge.A,this._nominalFrameRate=new ge.A,this._frameTimes=[],this._needsQuietPeriod=!0,this._quietPeriodEndTime=0,this._warmupPeriodEndTime=0,this._frameRateIsLow=!1,this._lastFramesPerSecond=void 0,this._pauseCount=0;const t=this;this._preUpdateRemoveListener=this._scene.preUpdate.addEventListener(function(e,i){!function(e){if(e._pauseCount>0)return;const t=(0,ya.A)();if(e._needsQuietPeriod)e._needsQuietPeriod=!1,e._frameTimes.length=0,e._quietPeriodEndTime=t+e.quietPeriod/Qy.A.SECONDS_PER_MILLISECOND,e._warmupPeriodEndTime=e._quietPeriodEndTime+(e.warmupPeriod+e.samplingWindow)/Qy.A.SECONDS_PER_MILLISECOND;else if(t>=e._quietPeriodEndTime){e._frameTimes.push(t);const i=t-e.samplingWindow/Qy.A.SECONDS_PER_MILLISECOND;if(e._frameTimes.length>=2&&e._frameTimes[0]<=i){for(;e._frameTimes.length>=2&&e._frameTimes[1]<i;)e._frameTimes.shift();const n=(t-e._frameTimes[0])/(e._frameTimes.length-1);e._lastFramesPerSecond=1e3/n,n>1e3/(t>e._warmupPeriodEndTime?e.minimumFrameRateAfterWarmup:e.minimumFrameRateDuringWarmup)?e._frameRateIsLow||(e._frameRateIsLow=!0,e._needsQuietPeriod=!0,e.lowFrameRate.raiseEvent(e.scene,e._lastFramesPerSecond)):e._frameRateIsLow&&(e._frameRateIsLow=!1,e._needsQuietPeriod=!0,e.nominalFrameRate.raiseEvent(e.scene,e._lastFramesPerSecond))}}}(t)}),this._hiddenPropertyName=void 0!==document.hidden?"hidden":void 0!==document.mozHidden?"mozHidden":void 0!==document.msHidden?"msHidden":void 0!==document.webkitHidden?"webkitHidden":void 0;const i=void 0!==document.hidden?"visibilitychange":void 0!==document.mozHidden?"mozvisibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychange":void 0;function n(){var e;e=t,document[e._hiddenPropertyName]?e.pause():e.unpause()}this._visibilityChangeRemoveListener=void 0,(0,N.A)(i)&&(document.addEventListener(i,n,!1),this._visibilityChangeRemoveListener=function(){document.removeEventListener(i,n,!1)})}mT.defaultSettings={samplingWindow:5,quietPeriod:2,warmupPeriod:5,minimumFrameRateDuringWarmup:4,minimumFrameRateAfterWarmup:8},mT.fromScene=function(e){if(!(0,N.A)(e))throw new U.A("scene is required.");return(0,N.A)(e._frameRateMonitor)&&!e._frameRateMonitor.isDestroyed()||(e._frameRateMonitor=new mT({scene:e})),e._frameRateMonitor},Object.defineProperties(mT.prototype,{scene:{get:function(){return this._scene}},lowFrameRate:{get:function(){return this._lowFrameRate}},nominalFrameRate:{get:function(){return this._nominalFrameRate}},lastFramesPerSecond:{get:function(){return this._lastFramesPerSecond}}}),mT.prototype.pause=function(){++this._pauseCount,1===this._pauseCount&&(this._frameTimes.length=0,this._lastFramesPerSecond=void 0)},mT.prototype.unpause=function(){--this._pauseCount,this._pauseCount<=0&&(this._pauseCount=0,this._needsQuietPeriod=!0)},mT.prototype.isDestroyed=function(){return!1},mT.prototype.destroy=function(){return this._preUpdateRemoveListener(),(0,N.A)(this._visibilityChangeRemoveListener)&&this._visibilityChangeRemoveListener(),(0,V.A)(this)};const gT=mT;var AT=i(346400),_T=i(311664),yT=i(271845),vT=i(472360),wT=i(873536),bT=i(44706),xT=i(257601),TT=i(823064),ST=i(463823),CT=i(897741),MT=i(545880),ET=i(38867),PT=i(295550),kT=i(301947),OT=i(208375),RT=i(5105),IT=i(738375),DT=i(494820),BT=i(201783),LT=i(395989),FT=i(385618),NT=i(560710),VT=i(982504),UT=i(782556),zT=i(179006),GT=i(582998),KT=i(952575),qT=i(946240);function HT(){this._image=new Image}function WT(e){e=e??F.A.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=new Mm.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new vt.A(-Me.A.PI,-Me.A.PI,Me.A.PI,Me.A.PI),ellipsoid:e.ellipsoid});let t=e.credit;"string"==typeof t&&(t=new rt.A(t)),this._credit=t,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=23,(0,N.A)(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new HT),this._errorEvent=new ge.A}HT.prototype.isReady=function(){return!0},HT.prototype.shouldDiscardImage=function(e){return e===this._image},Object.defineProperties(WT.prototype,{url:{get:function(){return this._metadata.url}},proxy:{get:function(){return this._metadata.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}}}),WT.fromMetadata=function(e,t){if(B.A.defined("metadata",e),!e.imageryPresent)throw new xt.A(`The server ${e.url} doesn't have imagery`);const i=new WT(t);return i._metadata=e,i},WT.prototype.getTileCredits=function(e,t,i){const n=this._metadata,r=n.getTileInformation(e,t,i);if((0,N.A)(r)){const e=n.providers[r.imageryProvider];if((0,N.A)(e))return[e]}},WT.prototype.requestImage=function(e,t,i,n){const r=this._tileDiscardPolicy._image,o=this._metadata,s=RA.tileXYToQuadKey(e,t,i),a=o.getTileInformation(e,t,i);if(!(0,N.A)(a)){if(o.isValid(s)){const r=new km.A({throttle:n.throttle,throttleByServer:n.throttleByServer,type:n.type,priorityFunction:n.priorityFunction});return void o.populateSubtree(e,t,i,r)}return Promise.resolve(r)}if(!a.hasImagery())return Promise.resolve(r);const l=function(e,t,i,n,r,o){const s=RA.tileXYToQuadKey(i,n,r);let a=t.imageryVersion;return a=(0,N.A)(a)&&a>0?a:1,e._metadata.resource.getDerivedResource({url:`flatfile?f1-0${s}-i.${a.toString()}`,request:o})}(this,a,e,t,i,n).fetchArrayBuffer();return(0,N.A)(l)?l.then(function(e){Dv(o.key,e);let t,i=new Uint8Array(e);const n=o.protoImagery;if((0,N.A)(n)&&n||(t=function(e){const t="JFIF";if(e[6]===t.charCodeAt(0)&&e[7]===t.charCodeAt(1)&&e[8]===t.charCodeAt(2)&&e[9]===t.charCodeAt(3))return"image/jpeg";const i="PNG";return e[1]===i.charCodeAt(0)&&e[2]===i.charCodeAt(1)&&e[3]===i.charCodeAt(2)?"image/png":void 0}(i)),!(0,N.A)(t)&&(!(0,N.A)(n)||n)){const e=function(e){const t=AA.Reader.create(e),i=t.len,n={};for(;t.pos<i;){const e=t.uint32();let i;switch(e>>>3){case 1:n.imageType=t.uint32();break;case 2:n.imageData=t.bytes();break;case 3:n.alphaType=t.uint32();break;case 4:n.imageAlpha=t.bytes();break;case 5:if(i=n.copyrightIds,(0,N.A)(i)||(i=n.copyrightIds=[]),2==(7&e)){const e=t.uint32()+t.pos;for(;t.pos<e;)i.push(t.uint32())}else i.push(t.uint32());break;default:t.skipType(7&e)}}const r=n.imageType;if((0,N.A)(r))switch(r){case 0:n.imageType="image/jpeg";break;case 4:n.imageType="image/png";break;default:throw new xt.A("GoogleEarthEnterpriseImageryProvider: Unsupported image type.")}const o=n.alphaType;return(0,N.A)(o)&&0!==o&&(console.log("GoogleEarthEnterpriseImageryProvider: External alpha not supported."),delete n.alphaType,delete n.imageAlpha),n}(i);t=e.imageType,i=e.imageData}return(0,N.A)(t)&&(0,N.A)(i)?(0,Xv.A)({uint8Array:i,format:t,flipY:!0}):r}):void 0},WT.prototype.pickFeatures=function(e,t,i,n,r){};const jT=WT;var $T=i(38300);const XT=new me.A(1,1,1,.4),YT=new me.A(0,1,0,.05),ZT=new me.A(0,.5,0,.2);function JT(e){e=e??F.A.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tilingScheme=(0,N.A)(e.tilingScheme)?e.tilingScheme:new Mm.A({ellipsoid:e.ellipsoid}),this._cells=e.cells??8,this._color=e.color??XT,this._glowColor=e.glowColor??YT,this._glowWidth=e.glowWidth??6,this._backgroundColor=e.backgroundColor??ZT,this._errorEvent=new ge.A,this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._canvasSize=e.canvasSize??256,this._canvas=this._createGridCanvas()}Object.defineProperties(JT.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}}}),JT.prototype._drawGrid=function(e){const t=this._canvasSize;for(let i=0;i<=this._cells;++i){const n=1+i/this._cells*(t-1);e.moveTo(n,0),e.lineTo(n,t),e.moveTo(0,n),e.lineTo(t,n)}e.stroke()},JT.prototype._createGridCanvas=function(){const e=document.createElement("canvas");e.width=this._canvasSize,e.height=this._canvasSize;const t=this._canvasSize,i=e.getContext("2d"),n=this._backgroundColor.toCssColorString();i.fillStyle=n,i.fillRect(0,0,t,t);const r=this._glowColor.toCssColorString();i.strokeStyle=r,i.lineWidth=this._glowWidth,i.strokeRect(0,0,t,t),this._drawGrid(i),i.lineWidth=.5*this._glowWidth,i.strokeRect(0,0,t,t),this._drawGrid(i);const o=this._color.toCssColorString();return i.strokeStyle=o,i.lineWidth=2,i.strokeRect(0,0,t,t),i.lineWidth=1,this._drawGrid(i),e},JT.prototype.getTileCredits=function(e,t,i){},JT.prototype.requestImage=function(e,t,i,n){return Promise.resolve(this._canvas)},JT.prototype.pickFeatures=function(e,t,i,n,r){};const QT=JT;var eS=i(433052),tS=i(623e3),iS=i(834298);function nS(){}nS._maxDecodingConcurrency=Math.max(eA.A.hardwareConcurrency-1,1),nS._decodeTaskProcessor=new TA.A("decodeI3S",nS._maxDecodingConcurrency),nS._promise=void 0,nS.decode=async function(e,t,i,n,r){return B.A.typeOf.string("url",e),B.A.defined("defaultGeometrySchema",t),B.A.defined("geometryData",i),(0,N.A)(nS._promise)||(nS._promise=async function(){if(await nS._decodeTaskProcessor.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}))return nS._decodeTaskProcessor;throw new xt.A("I3S decoder could not be initialized.")}()),nS._promise.then(function(o){const s=i._parent._data,a=i._parent._inverseRotationMatrix;let l=0,c=0,u=0;(0,N.A)(s.obb)?(l=s.obb.center[0],c=s.obb.center[1],u=s.obb.center[2]):(0,N.A)(s.mbs)&&(l=s.mbs[0],c=s.mbs[1],u=s.mbs[2]);const d=Ki.A.fromRotationX(-Me.A.PI_OVER_TWO),h=new Ki.A;Ki.A.multiply(d,a,h);const p=et.A.fromDegrees(l,c,u),f=st.A.WGS84.cartographicToCartesian(p),m={binaryData:i._data,featureData:(0,N.A)(n)&&(0,N.A)(n[0])?n[0].data:void 0,schema:t,bufferInfo:i._geometryBufferInfo,ellipsoidRadiiSquare:st.A.WGS84.radiiSquared,url:e,geoidDataList:i._dataProvider._geoidDataList,cartographicCenter:p,cartesianCenter:f,parentRotation:h,enableFeatures:i._dataProvider.showFeatures,splitGeometryByColorTransparency:i._dataProvider.adjustMaterialAlphaMode,symbologyData:r,calculateNormals:i._dataProvider.calculateNormals};return o.scheduleTask(m)})};const rS=nS;function oS(e,t){this._parent=e,this._dataProvider=e._dataProvider,this._layer=e._layer,(0,N.A)(this._parent._nodeIndex)?this._resource=this._parent._layer.resource.getDerivedResource({url:`nodes/${this._parent._data.mesh.attribute.resource}/${t}`}):this._resource=this._parent.resource.getDerivedResource({url:t})}Object.defineProperties(oS.prototype,{resource:{get:function(){return this._resource}},data:{get:function(){return this._data}}}),oS.prototype.load=async function(){return this._data=await JS.loadJson(this._resource),this._data};const sS=oS;function aS(e,t){this._storageInfo=t,this._parent=e,this._dataProvider=e._dataProvider,this._loadPromise=void 0;const i=`attributes/${t.key}/0`;(0,N.A)(this._parent._nodeIndex)?this._resource=this._parent._layer.resource.getDerivedResource({url:`nodes/${this._parent._data.mesh.attribute.resource}/${i}`}):this._resource=this._parent.resource.getDerivedResource({url:i})}function lS(e){return"UInt8"===e||"Int8"===e?1:"UInt16"===e||"Int16"===e?2:"UInt32"===e||"Int32"===e||"Oid32"===e||"Float32"===e?4:"UInt64"===e||"Int64"===e||"Float64"===e?8:0}function cS(e){return"String"===e?1:lS(e)}Object.defineProperties(aS.prototype,{resource:{get:function(){return this._resource}},header:{get:function(){return this._header}},values:{get:function(){if((0,N.A)(this._values)){if((0,N.A)(this._values.attributeValues))return this._values.attributeValues;if((0,N.A)(this._values.objectIds))return this._values.objectIds}return[]}},name:{get:function(){return this._storageInfo.name}}}),aS.prototype.load=function(){return(0,N.A)(this._loadPromise)||(this._loadPromise=async function(e){const t=await e._dataProvider._loadBinary(e._resource),i=new DataView(t);e._data=t,e._validateHeader(i);const n=e._parseHeader(i),r=e._getBodyOffset(n);e._validateBody(i,r),e._parseBody(i,r)}(this).catch(function(e){console.error(e)})),this._loadPromise},aS.prototype._parseValue=function(e,t,i){let n;if("UInt8"===t)n=e.getUint8(i),i+=1;else if("Int8"===t)n=e.getInt8(i),i+=1;else if("UInt16"===t)n=e.getUint16(i,!0),i+=2;else if("Int16"===t)n=e.getInt16(i,!0),i+=2;else if("UInt32"===t)n=e.getUint32(i,!0),i+=4;else if("Oid32"===t)n=e.getUint32(i,!0),i+=4;else if("Int32"===t)n=e.getInt32(i,!0),i+=4;else if("UInt64"===t){const t=e.getUint32(i,!0),r=e.getUint32(i+4,!0);n=t+Math.pow(2,32)*r,i+=8}else if("Int64"===t){const t=e.getUint32(i,!0),r=e.getUint32(i+4,!0);n=r<Math.pow(2,31)?t+Math.pow(2,32)*r:t+Math.pow(2,32)*(r-Math.pow(2,32)),i+=8}else"Float32"===t?(n=e.getFloat32(i,!0),i+=4):"Float64"===t?(n=e.getFloat64(i,!0),i+=8):"String"===t&&(n=String.fromCharCode(e.getUint8(i)),i+=1);return{value:n,offset:i}},aS.prototype._parseHeader=function(e){let t=0;this._header={};for(let i=0;i<this._storageInfo.header.length;i++){const n=this._storageInfo.header[i],r=this._parseValue(e,n.valueType,t);this._header[n.property]=r.value,t=r.offset}return t},aS.prototype._parseBody=function(e,t){this._values={};for(let i=0;i<this._storageInfo.ordering.length;i++){const n=this._storageInfo.ordering[i],r="ObjectIds"===n?"objectIds":n,o=this._storageInfo[r];if((0,N.A)(o)){this._values[r]=[];for(let i=0;i<this._header.count;++i)if("String"!==o.valueType){const i=this._parseValue(e,o.valueType,t);this._values[r].push(i.value),t=i.offset}else{const n=this._values.attributeByteCounts[i];let s="";for(let i=0;i<n;++i){const i=this._parseValue(e,o.valueType,t);0!==i.value.charCodeAt(0)&&(s+=i.value),t=i.offset}this._values[r].push(s)}}}},aS.prototype._getBodyOffset=function(e){let t=0;return(0,N.A)(this._storageInfo.attributeValues)?t=lS(this._storageInfo.attributeValues.valueType):(0,N.A)(this._storageInfo.objectIds)&&(t=lS(this._storageInfo.objectIds.valueType)),t>0?Math.ceil(e/t)*t:e},aS.prototype._validateHeader=function(e){let t=0;for(let e=0;e<this._storageInfo.header.length;e++)t+=cS(this._storageInfo.header[e].valueType);if(e.byteLength<t)throw new xt.A(`Invalid attribute buffer size (field: ${this.name}, header: ${t}, actual: ${e.byteLength})`)},aS.prototype._validateBody=function(e,t){if(!(0,N.A)(this._header.count))throw new xt.A(`Invalid attribute buffer (field: ${this.name}, count is missing)`);let i;for(let n=0;n<this._storageInfo.ordering.length&&t<e.byteLength;n++){const r=this._storageInfo.ordering[n],o="ObjectIds"===r?"objectIds":r,s=this._storageInfo[o];if(!(0,N.A)(s))throw new xt.A(`Invalid attribute buffer (field: ${this.name}, ${o} is missing)`);if("String"!==s.valueType)"attributeByteCounts"===o&&(i=t),t+=lS(s.valueType)*this._header.count;else{if(!(0,N.A)(i))throw new xt.A(`Invalid attribute buffer (field: ${this.name}, attributeByteCounts is missing)`);for(let n=0;n<this._header.count&&t<e.byteLength;++n){const n=this._parseValue(e,this._storageInfo.attributeByteCounts.valueType,i);t+=n.value,i=n.offset}}}if(e.byteLength<t)throw new xt.A(`Invalid attribute buffer size (field: ${this.name}, expected: ${t}, actual: ${e.byteLength})`)};const uS=aS;function dS(e,t){const i=e._dataProvider,n=e._layer;let r;r=(0,N.A)(e._nodeIndex)?n.resource.getDerivedResource({url:`nodes/${e._data.mesh.geometry.resource}/${t}`}):e.resource.getDerivedResource({url:t}),this._parent=e,this._dataProvider=i,this._layer=n,this._resource=r,this._customAttributes=void 0}Object.defineProperties(dS.prototype,{resource:{get:function(){return this._resource}},data:{get:function(){return this._data}},customAttributes:{get:function(){return this._customAttributes}}}),dS.prototype.load=function(){const e=this;return this._dataProvider._loadBinary(this._resource).then(function(t){return e._data=t,t})};const hS=new D.A,pS=new D.A,fS=new D.A,mS=new D.A,gS=new D.A;function AS(e,t,i,n){const r=D.A.subtract(n,i,hS),o=D.A.cross(r,D.A.subtract(e,i,pS),mS),s=D.A.cross(r,D.A.subtract(t,i,fS),gS);return D.A.dot(o,s)>=0}const _S=new D.A,yS=new D.A,vS=new D.A,wS=new D.A,bS=new D.A,xS=new D.A,TS=new D.A,SS=new D.A,CS=new D.A,MS=new D.A;function ES(e){const t=[],i=e.length;for(let n=0;n<i;n++)n<3?t.push(ow(e[n])):t.push(e[n]);return t}dS.prototype.getClosestPointIndexOnTriangle=function(e,t,i){if((0,N.A)(this._customAttributes)&&(0,N.A)(this._customAttributes.positions)){const n=new D.A(e,t,i);n.x-=this._customAttributes.cartesianCenter.x,n.y-=this._customAttributes.cartesianCenter.y,n.z-=this._customAttributes.cartesianCenter.z,Ki.A.multiplyByVector(this._customAttributes.parentRotation,n,n);let r,o,s,a,l=Number.MAX_VALUE;const c=this._customAttributes.positions,u=this._customAttributes.indices;let d;d=(0,N.A)(u)?u.length:c.length/3;for(let e=0;e<d;e++){let t,i,d;(0,N.A)(u)?(t=u[e],i=u[e+1],d=u[e+2]):(t=3*e,i=3*e+1,d=3*e+2);const h=D.A.fromElements(c[3*t],c[3*t+1],c[3*t+2],_S),p=D.A.fromElements(c[3*i],c[3*i+1],c[3*i+2],yS),f=new D.A(c[3*d],c[3*d+1],c[3*d+2],vS);if(!AS(n,h,p,f)||!AS(n,p,h,f)||!AS(n,f,h,p))continue;const m=D.A.subtract(p,h,wS),g=D.A.subtract(f,h,bS),A=D.A.cross(m,g,xS);if(0===D.A.magnitude(A))continue;const _=D.A.normalize(A,TS),y=D.A.subtract(n,h,SS),v=Math.abs(D.A.dot(y,_));if(v<l){l=v,r=e;const c=D.A.magnitudeSquared(D.A.subtract(n,h,y)),u=D.A.magnitudeSquared(D.A.subtract(n,p,CS)),m=D.A.magnitudeSquared(D.A.subtract(n,f,MS));c<u&&c<m?(s=t,a=h,o=c):u<m?(s=i,a=p,o=u):(s=d,a=f,o=m)}}if((0,N.A)(r))return{index:s,distanceSquared:o,distance:Math.sqrt(o),queriedPosition:n,closestPosition:D.A.clone(a)}}return{index:-1,distanceSquared:Number.Infinity,distance:Number.Infinity}},dS.prototype._generateGltf=function(e,t,i,n,r,o,s,a){let l,c={pbrMetallicRoughness:{metallicFactor:0},doubleSided:!0,name:"Material"},u=!1,d="";if((0,N.A)(this._parent._data.mesh)&&(0,N.A)(this._layer._data.materialDefinitions)){const e=this._parent._data.mesh.material.definition;if(e>=0&&e<this._layer._data.materialDefinitions.length){if(l=this._layer._data.materialDefinitions[e],c=l,(0,N.A)(c.pbrMetallicRoughness)&&(0,N.A)(c.pbrMetallicRoughness.baseColorTexture)){u=!0,c.pbrMetallicRoughness.baseColorTexture.index=0;let e="0";if((0,N.A)(this._layer._data.textureSetDefinitions))for(let t=0;t<this._layer._data.textureSetDefinitions.length;t++){const i=this._layer._data.textureSetDefinitions[t];for(let t=0;t<i.formats.length;t++){const n=i.formats[t];if("jpg"===n.format){e=n.name;break}}}(0,N.A)(this._parent._data.mesh)&&this._parent._data.mesh.material.resource>=0&&(d=this._layer.resource.getDerivedResource({url:`nodes/${this._parent._data.mesh.material.resource}/textures/${e}`}).url)}(0,N.A)(c.pbrMetallicRoughness)&&(0,N.A)(c.pbrMetallicRoughness.baseColorFactor)&&(c.pbrMetallicRoughness.baseColorFactor=ES(c.pbrMetallicRoughness.baseColorFactor)),(0,N.A)(c.emissiveFactor)&&(c.emissiveFactor=ES(c.emissiveFactor))}}else(0,N.A)(this._parent._data.textureData)&&(u=!0,d=this._parent.resource.getDerivedResource({url:`${this._parent._data.textureData[0].href}`}).url,c.pbrMetallicRoughness.baseColorTexture={index:0});(0,N.A)(c.alphaMode)&&(c.alphaMode=c.alphaMode.toUpperCase());let h=[],p=[],f=[];u&&(h=[{sampler:0,source:0}],p=[{uri:d}],f=[{magFilter:9729,minFilter:9986,wrapS:10497,wrapT:10497}]);const m=[],g=i.length;for(let e=0;e<g;e++){const t=i[e].primitives,n=t.length;for(let e=0;e<n;e++){const i=t[e];if((0,N.A)(i.material)){for(;i.material>=m.length;){const e=(0,ga.A)(c,!0);m.push(e)}const e=m[i.material];(0,N.A)(i.extra)&&i.extra.isTransparent?(0,N.A)(e.alphaMode)||(e.alphaMode="BLEND"):"BLEND"===e.alphaMode&&(e.alphaMode="OPAQUE")}}}return{scene:0,scenes:[{nodes:e}],nodes:t,meshes:i,buffers:n,bufferViews:r,accessors:o,materials:m,textures:h,images:p,samplers:f,asset:{version:"2.0"},extensions:s,extensionsUsed:a}};const PS=dS;function kS(e,t,i){let n,r,o,s;i?(n=0,r=e):(n=e._level+1,r=e._layer),"number"==typeof t?o=t:s=e.resource.getDerivedResource({url:`${t}/`}),this._parent=e,this._dataProvider=e._dataProvider,this._isRoot=i,this._level=n,this._layer=r,this._nodeIndex=o,this._resource=s,this._isLoading=!1,this._tile=void 0,this._data=void 0,this._geometryData=[],this._featureData=[],this._fields={},this._children=[],this._childrenReadyPromise=void 0,this._globalTransform=void 0,this._inverseGlobalTransform=void 0,this._inverseRotationMatrix=void 0,this._symbologyData=void 0}function OS(e,t){const i=new uS(e,t);return e._fields[t.name]=i,i.load()}function RS(e,t,i){if(!(0,N.A)(i.values)||0===i.values.length)return!1;const n=(0,N.A)(t)?t.values:[];let r;e<n.length&&(r=n[e]);let o=!1;for(let e=0;e<i.values.length;e++)if(i.values[e]===r){o=!0;break}return o}async function IS(e,t){const i=e._tile.content.batchTable;if((0,N.A)(i)&&i.featuresLength>0){i.setAllShow(!0);const t=await async function(e){const t=e._layer._filters,i=[];for(let n=0;n<t.length;n++){const r=e.loadField(t[n].name);i.push(r)}return await Promise.all(i),t}(e);if(t.length>0)for(let n=0;n<i.featuresLength;n++)for(let r=0;r<t.length;r++){const o=t[r];if(!RS(n,e._fields[o.name],o)){i.setShow(n,!1);break}}}t.show=!0}function DS(e,t,i,n){return n[e+t*i]}function BS(e,t,i){const n=i.nativeExtent;let r=(e-n.west)/(n.east-n.west)*(i.width-1),o=(t-n.south)/(n.north-n.south)*(i.height-1);const s=Math.floor(r);let a=Math.floor(o);r-=s,o-=a;const l=s<i.width?s+1:s;let c=a<i.height?a+1:a;a=i.height-1-a,c=i.height-1-c;let u=(d=r,h=o,p=DS(s,a,i.width,i.buffer),f=DS(l,a,i.width,i.buffer),m=DS(s,c,i.width,i.buffer),g=DS(l,c,i.width,i.buffer),(p*(1-d)+f*d)*(1-h)+(m*(1-d)+g*d)*h);var d,h,p,f,m,g;return u=u*i.scale+i.offset,u}Object.defineProperties(kS.prototype,{resource:{get:function(){return this._resource}},layer:{get:function(){return this._layer}},parent:{get:function(){return this._parent}},children:{get:function(){return this._children}},geometryData:{get:function(){return this._geometryData}},featureData:{get:function(){return this._featureData}},fields:{get:function(){return this._fields}},tile:{get:function(){return this._tile}},data:{get:function(){return this._data}}}),kS.prototype.load=async function(){const e=this;function t(){if(!e._isRoot){const t=e._create3DTileDefinition();e._tile=new Ww.A(e._layer._tileset,e._dataProvider.resource,t,e._parent._tile),e._tile._i3sNode=e}}if(!(0,N.A)(this._nodeIndex)){const i=await JS.loadJson(this._resource);return e._data=i,void t()}const i=await this._layer._getNodeInNodePages(this._nodeIndex);let n;e._data=i,e._isRoot?n="nodes/root/":(0,N.A)(i.mesh)&&(n=`../${i.mesh.geometry.resource}/`),(0,N.A)(n)&&(0,N.A)(e._parent.resource)&&(e._resource=e._parent.resource.getDerivedResource({url:n})),t()},kS.prototype.loadFields=function(){const e=this._layer._data.attributeStorageInfo,t=[];if((0,N.A)(e))for(let i=0;i<e.length;i++){const n=e[i],r=this._fields[n.name];(0,N.A)(r)?t.push(r.load()):t.push(OS(this,n))}return Promise.all(t)},kS.prototype.loadField=function(e){B.A.defined("name",e);const t=this._fields[e];if((0,N.A)(t))return t.load();const i=this._layer._data.attributeStorageInfo;if((0,N.A)(i))for(let t=0;t<i.length;t++){const n=i[t];if(n.name===e)return OS(this,n)}return Promise.resolve()},kS.prototype.getFieldsForPickedPosition=function(e){const t=this.geometryData[0];if(!(0,N.A)(t.customAttributes.featureIndex))return{};const i=t.getClosestPointIndexOnTriangle(e.x,e.y,e.z);if(-1===i.index||i.index>t.customAttributes.featureIndex.length)return{};const n=t.customAttributes.featureIndex[i.index];return this.getFieldsForFeature(n)},kS.prototype.getFieldsForFeature=function(e){const t={};for(const i in this.fields)if(this.fields.hasOwnProperty(i)){const n=this.fields[i];e>=0&&e<n.values.length&&(t[n.name]=n.values[e])}return t},kS.prototype._loadChildren=function(){const e=this;if((0,N.A)(this._childrenReadyPromise))return this._childrenReadyPromise;const t=[];if((0,N.A)(e._data.children))for(let i=0;i<e._data.children.length;i++){const n=e._data.children[i],r=new kS(e,n.href??n,!1);e._children.push(r),t.push(r.load())}return this._childrenReadyPromise=Promise.all(t).then(function(){for(let t=0;t<e._children.length;t++)e._tile.children.push(e._children[t]._tile)}),this._childrenReadyPromise},kS.prototype._loadGeometryData=function(){const e=[];if((0,N.A)(this._data.geometryData))for(let t=0;t<this._data.geometryData.length;t++){const i=new PS(this,this._data.geometryData[t].href);this._geometryData.push(i),e.push(i.load())}else if((0,N.A)(this._data.mesh)){const t=this._layer._findBestGeometryBuffers(this._data.mesh.geometry.definition,["position","uv0"]),i=`./geometries/${t.bufferIndex}/`,n=new PS(this,i);n._geometryDefinitions=t.definition,n._geometryBufferInfo=t.geometryBufferInfo,this._geometryData.push(n),e.push(n.load())}return Promise.all(e)},kS.prototype._loadFeatureData=function(){const e=[];if((0,N.A)(this._data.featureData))for(let t=0;t<this._data.featureData.length;t++){const i=new sS(this,this._data.featureData[t].href);this._featureData.push(i),e.push(i.load())}return Promise.all(e)},kS.prototype._clearGeometryData=function(){this._geometryData=[]},kS.prototype._create3DTileDefinition=function(){const e=this._data.obb,t=this._data.mbs;if(!(0,N.A)(e)&&!(0,N.A)(t))return void console.error("Failed to load I3S node. Bounding volume is required.");let i;if(i=(0,N.A)(e)?et.A.fromDegrees(e.center[0],e.center[1],e.center[2]):et.A.fromDegrees(t[0],t[1],t[2]),(0,N.A)(this._dataProvider._geoidDataList)&&(0,N.A)(i))for(let e=0;e<this._dataProvider._geoidDataList.length;e++){const t=this._dataProvider._geoidDataList[e],n=t.projection.project(i);if(n.x>t.nativeExtent.west&&n.x<t.nativeExtent.east&&n.y>t.nativeExtent.south&&n.y<t.nativeExtent.north){i.height+=BS(n.x,n.y,t);break}}let n,r={},o=0;(0,N.A)(e)?(r={box:[0,0,0,e.halfSize[0],0,0,0,e.halfSize[1],0,0,0,e.halfSize[2]]},o=Math.max(Math.max(this._data.obb.halfSize[0],this._data.obb.halfSize[1]),this._data.obb.halfSize[2]),n=st.A.WGS84.cartographicToCartesian(i)):(r={sphere:[0,0,0,t[3]]},n=st.A.WGS84.cartographicToCartesian(i),o=this._data.mbs[3]),o*=2;let s=1/0;if((0,N.A)(this._data.lodThreshold))"maxScreenThresholdSQ"===this._layer._data.nodePages.lodSelectionMetricType?s=o/Math.sqrt(this._data.lodThreshold/(.25*Math.PI)):"maxScreenThreshold"===this._layer._data.nodePages.lodSelectionMetricType?s=o/this._data.lodThreshold:console.error("Invalid lodSelectionMetricType in Layer");else if((0,N.A)(this._data.lodSelection))for(let e=0;e<this._data.lodSelection.length;e++)"maxScreenThreshold"===this._data.lodSelection[e].metricType&&(s=o/this._data.lodSelection[e].maxError);s===1/0&&(s=1e5);const a=16*s,l=new wa.A(0,0,0);let c=qi.A.headingPitchRollQuaternion(n,l);(0,N.A)(this._data.obb)&&(c=new yt.A(this._data.obb.quaternion[0],this._data.obb.quaternion[1],this._data.obb.quaternion[2],this._data.obb.quaternion[3]));const u=Ki.A.fromQuaternion(c),d=Ki.A.inverse(u,new Ki.A),h=new tg.A(u[0],u[1],u[2],0,u[3],u[4],u[5],0,u[6],u[7],u[8],0,n.x,n.y,n.z,1),p=tg.A.inverse(h,new tg.A),f=tg.A.clone(h);(0,N.A)(this._parent._globalTransform)&&tg.A.multiply(h,this._parent._inverseGlobalTransform,f),this._globalTransform=h,this._inverseGlobalTransform=p,this._inverseRotationMatrix=d;const m=[];for(let e=0;e<this._children.length;e++)m.push(this._children[e]._create3DTileDefinition());return{children:m,refine:"REPLACE",boundingVolume:r,transform:[f[0],f[4],f[8],f[12],f[1],f[5],f[9],f[13],f[2],f[6],f[10],f[14],f[3],f[7],f[11],f[15]],content:{uri:(0,N.A)(this._resource)?this._resource.url:void 0},geometricError:a}},kS.prototype._loadSymbology=async function(){!(0,N.A)(this._symbologyData)&&(0,N.A)(this._layer._symbology)&&(this._symbologyData=await this._layer._symbology._getSymbology(this))},kS.prototype._createContentURL=async function(){let e={scene:0,scenes:[{nodes:[0]}],nodes:[{name:"singleNode"}],meshes:[],buffers:[],bufferViews:[],accessors:[],materials:[],textures:[],images:[],samplers:[],asset:{version:"2.0"}};const t=[this._loadGeometryData()];if(this._dataProvider.legacyVersion16&&t.push(this._loadFeatureData()),await Promise.all(t),(0,N.A)(this._geometryData)&&this._geometryData.length>0){this._dataProvider._applySymbology&&await this._loadSymbology();const t=this._geometryData[0].resource.url,i=this._layer._data.store.defaultGeometrySchema,n=this._geometryData[0],r=await rS.decode(t,i,n,this._featureData[0],this._symbologyData);if(!(0,N.A)(r))return;e=n._generateGltf(r.meshData.nodesInScene,r.meshData.nodes,r.meshData.meshes,r.meshData.buffers,r.meshData.bufferViews,r.meshData.accessors,r.meshData.rootExtensions,r.meshData.extensionsUsed),this._geometryData[0]._customAttributes=r.meshData._customAttributes}const i=this._dataProvider._binarizeGltf(e),n=new Blob([i],{type:"application/binary"});return URL.createObjectURL(n)},kS.prototype._filterFeatures=function(){const e=[];for(let t=0;t<this._children.length;t++){const i=this._children[t]._filterFeatures();e.push(i)}const t=this._tile?.content?._model;if((0,N.A)(this._geometryData)&&this._geometryData.length>0&&(0,N.A)(t)&&t.ready){t.show=!1;const i=IS(this,t);e.push(i)}return Promise.all(e)},Ww.A.prototype._hookedRequestContent=Ww.A.prototype.requestContent,Ww.A.prototype.requestContent=function(){if(!this.tileset._isI3STileSet)return this._hookedRequestContent();if(!this._isLoading){this._isLoading=!0;const e=this;return this._i3sNode._createContentURL().then(t=>{if((0,N.A)(t))return e._contentResource=new bt.A({url:t}),e._hookedRequestContent();e._isLoading=!1}).then(t=>{const i=t?._model;return(0,N.A)(e._i3sNode._geometryData)&&e._i3sNode._geometryData.length>0&&(0,N.A)(i)&&(i.show=!1,i.readyEvent.addEventListener(()=>{IS(e._i3sNode,i)})),e._isLoading=!1,t})}},Object.defineProperties(Ww.A.prototype,{i3sNode:{get:function(){return this._i3sNode}}});const LS=kS;function FS(e){this._layer=e,this._defaultSymbology=void 0,this._valueFields=[],this._uniqueValueHash=void 0,this._classBreaksHash=void 0,this._parseLayerSymbology()}function NS(e,t){const i=[];for(let t=0;t<e.length;t++){const n=me.A.byteToFloat(e[t]);t<3?i.push(ow(n)):i.push(n)}return 3===i.length&&((0,N.A)(t)?i.push(1-t/100):i.push(1)),i}function VS(e,t){const i={edges:void 0,material:void 0};if((0,N.A)(e)&&(0,N.A)(e.symbolLayers))for(let n=0;n<e.symbolLayers.length;n++){const r=e.symbolLayers[n];if("Fill"===r.type){const e=r.edges,n=r.outline;if((0,N.A)(e)?(i.edges={},(0,N.A)(e.color)&&(i.edges.color=NS(e.color,e.transparency))):(0,N.A)(n)&&(i.edges={},(0,N.A)(n.color)&&(i.edges.color=NS(n.color,n.transparency))),!t){const e=r.material;(0,N.A)(e)&&(i.material={colorMixMode:e.colorMixMode},(0,N.A)(e.color)&&(i.material.color=NS(e.color,e.transparency)))}break}}return i}function US(e,t,i,n){const r=t[i];if(n<r.length){const o=e[r[n]];return(0,N.A)(o)&&++i<t.length?US(o,t,i,n):o}}Object.defineProperties(FS.prototype,{defaultSymbology:{get:function(){return this._defaultSymbology}}}),FS.prototype._parseLayerSymbology=function(){const e=this._layer.data.drawingInfo;if((0,N.A)(e)&&(0,N.A)(e.renderer)){const t=this._layer.data.cachedDrawingInfo,i=(0,N.A)(t)&&!0===t.color,n=e.renderer;"simple"===n.type?this._defaultSymbology=VS(n.symbol,i):"uniqueValue"===n.type?(this._defaultSymbology=VS(n.defaultSymbol,i),this._valueFields.push(n.field1),(0,N.A)(n.field2)&&this._valueFields.push(n.field2),(0,N.A)(n.field3)&&this._valueFields.push(n.field3),this._uniqueValueHash=function(e,t){if((0,N.A)(e.uniqueValueGroups)){const i={};for(let n=0;n<e.uniqueValueGroups.length;n++){const r=e.uniqueValueGroups[n].classes;if((0,N.A)(r))for(let e=0;e<r.length;e++){const n=VS(r[e].symbol,t),o=r[e].values;for(let e=0;e<o.length;e++){const t=o[e];let r=i;for(let e=0;e<t.length;e++){const i=t[e];e===t.length-1?r[i]=n:((0,N.A)(r[i])||(r[i]={}),r=r[i])}}}}return i}if((0,N.A)(e.uniqueValueInfos)){const i={};for(let n=0;n<e.uniqueValueInfos.length;n++){const r=e.uniqueValueInfos[n];i[r.value]=VS(r.symbol,t)}return i}}(n,i)):"classBreaks"===n.type&&(this._defaultSymbology=VS(n.defaultSymbol,i),this._valueFields.push(n.field),this._classBreaksHash=function(e,t){if((0,N.A)(e.classBreakInfos)){const i=[...e.classBreakInfos];i.sort(function(e,t){return(e.classMaxValue??e.classMinValue)-(t.classMaxValue??t.classMinValue)});const n={ranges:[],symbols:[]};(0,N.A)(e.minValue)&&(n.ranges.push(e.minValue),n.symbols.push(void 0));for(let e=0;e<i.length;e++){const r=i[e];(0,N.A)(r.classMinValue)&&(0===n.ranges.length||r.classMinValue>n.ranges[n.ranges.length-1])&&(n.ranges.push(r.classMinValue),n.symbols.push(void 0)),(0,N.A)(r.classMaxValue)&&(0===n.ranges.length||r.classMaxValue>n.ranges[n.ranges.length-1])&&(n.ranges.push(r.classMaxValue),n.symbols.push(VS(r.symbol,t)))}return n.symbols.push(void 0),n}}(n,i))}},FS.prototype._getSymbology=async function(e){const t={default:this._defaultSymbology};if(this._valueFields.length>0){const i=[];for(let t=0;t<this._valueFields.length;t++)i.push(e.loadField(this._valueFields[t]));await Promise.all(i);const n=[];for(let t=0;t<this._valueFields.length;t++)n.push(e.fields[this._valueFields[t]].values);let r;if((0,N.A)(this._uniqueValueHash)?r=e=>US(this._uniqueValueHash,n,0,e):(0,N.A)(this._classBreaksHash)&&(r=e=>function(e,t,i){const n=t[i],r=function(e,t){let i=0,n=e.length;if(i<n)do{const r=i+n>>>1;e[r]<t?i=r+1:n=r}while(i<n);return i}(e.ranges,n);return e.symbols[r]}(this._classBreaksHash,n[0],e)),(0,N.A)(r)){const e=n[0];for(let i=0;i<e.length;i++){const e=r(i);(0,N.A)(e)&&(t[i]=e)}}}return t};const zS=FS;function GS(e,t,i){this._dataProvider=e,this._parent=i,!(0,N.A)(t.href)&&(0,N.A)(t.id)&&(t.href=`layers/${t.id}`);const n=this._parent.resource.getUrlComponent();let r="";r=n.match(/layers\/\d/)?`${n}`.replace(/\/+$/,""):`${n}`.replace(/\/?$/,"/").concat(`${t.href}`),this._version=t.store.version;const o=this._version.split(".");this._majorVersion=parseInt(o[0]),this._minorVersion=o.length>1?parseInt(o[1]):0,this._resource=new bt.A({url:r}),this._resource.setQueryParameters(this._dataProvider.resource.queryParameters),this._resource.appendForwardSlash(),this._data=t,this._rootNode=void 0,this._nodePages={},this._nodePageFetches={},this._extent=void 0,this._tileset=void 0,this._geometryDefinitions=void 0,this._filters=[],this._symbology=void 0,this._computeGeometryDefinitions(!0),this._computeExtent()}Object.defineProperties(GS.prototype,{resource:{get:function(){return this._resource}},rootNode:{get:function(){return this._rootNode}},tileset:{get:function(){return this._tileset}},data:{get:function(){return this._data}},version:{get:function(){return this._version}},majorVersion:{get:function(){return this._majorVersion}},minorVersion:{get:function(){return this._minorVersion}},legacyVersion16:{get:function(){if((0,N.A)(this.version))return this.majorVersion<1||1===this.majorVersion&&this.minorVersion<=6}}}),GS.prototype.load=async function(e){if(4326!==this._data.spatialReference.wkid)throw new xt.A(`Unsupported spatial reference: ${this._data.spatialReference.wkid}`);if(this._dataProvider.applySymbology&&(this._symbology=new zS(this)),await this._dataProvider.loadGeoidData(),await this._loadRootNode(e),await this._create3DTileset(e),this._rootNode._tile=this._tileset._root,this._tileset._root._i3sNode=this._rootNode,this.legacyVersion16)return this._rootNode._loadChildren()},GS.prototype._computeGeometryDefinitions=function(e){if(this._geometryDefinitions=[],(0,N.A)(this._data.geometryDefinitions))for(let t=0;t<this._data.geometryDefinitions.length;t++){const i=[],n=this._data.geometryDefinitions[t].geometryBuffers;for(let t=0;t<n.length;t++){const r=n[t],o=[];let s=!1;if((0,N.A)(r.compressedAttributes)&&e){s=!0;const e=r.compressedAttributes.attributes;for(let t=0;t<e.length;t++)o.push(e[t])}else for(const e in r)"offset"!==e&&o.push(e);i.push({compressed:s,attributes:o,index:n.indexOf(r)})}i.sort(function(e,t){return e.compressed&&!t.compressed?-1:!e.compressed&&t.compressed?1:e.attributes.length-t.attributes.length}),this._geometryDefinitions.push(i)}},GS.prototype._findBestGeometryBuffers=function(e,t){const i=this._geometryDefinitions[e];if((0,N.A)(i)){for(let e=0;e<i.length;++e){const n=i[e];let r=!1;const o=n.attributes;for(let e=0;e<t.length;e++)if(!o.includes(t[e])){r=!0;break}if(!r)return{bufferIndex:n.index,definition:i,geometryBufferInfo:n}}if((0,N.A)(i[0]))return{bufferIndex:0,definition:i,geometryBufferInfo:i[0]}}},GS.prototype._loadRootNode=function(e){if((0,N.A)(this._data.nodePages)){let e=0;(0,N.A)(this._data.nodePages.rootIndex)&&(e=this._data.nodePages.rootIndex),this._rootNode=new LS(this,e,!0)}else this._rootNode=new LS(this,this._data.store.rootNode,!0);return this._rootNode.load(e)},GS.prototype._getNodeInNodePages=function(e){const t=Math.floor(e/this._data.nodePages.nodesPerPage),i=e%this._data.nodePages.nodesPerPage;return this._loadNodePage(t).then(function(e){return e.nodes[i]})},GS._fetchJson=function(e){return e.fetchJson()},GS.prototype._loadNodePage=function(e){const t=this;if(!(0,N.A)(this._nodePageFetches[e])){const i=this.resource.getDerivedResource({url:`nodepages/${e}/`}),n=GS._fetchJson(i).then(function(i){return(0,N.A)(i.error)&&200!==i.error.code?Promise.reject(i.error):(t._nodePages[e]=i.nodes,i)});this._nodePageFetches[e]=n}return this._nodePageFetches[e]},GS.prototype._computeExtent=function(){(0,N.A)(this._data.fullExtent)?this._extent=vt.A.fromDegrees(this._data.fullExtent.xmin,this._data.fullExtent.ymin,this._data.fullExtent.xmax,this._data.fullExtent.ymax):(0,N.A)(this._data.store.extent)&&(this._extent=vt.A.fromDegrees(this._data.store.extent[0],this._data.store.extent[1],this._data.store.extent[2],this._data.store.extent[3]))},GS.prototype._create3DTileset=async function(e){const t={asset:{version:"1.0"},geometricError:Number.MAX_VALUE,root:this._rootNode._create3DTileDefinition()},i=new Blob([JSON.stringify(t)],{type:"application/json"}),n=URL.createObjectURL(i),r=this._symbology?.defaultSymbology?.edges?.color;(0,N.A)(r)&&!(0,N.A)(e?.outlineColor)&&((e=(0,N.A)(e)?(0,ga.A)(e):{}).outlineColor=me.A.fromCartesian4(Zm.A.fromArray(r))),this._tileset=await kb.A.fromUrl(n,e),this._tileset.show=this._parent.show,this._tileset._isI3STileSet=!0,this._tileset.tileUnload.addEventListener(function(e){e._i3sNode._clearGeometryData(),URL.revokeObjectURL(e._contentResource._url),e._contentResource=e._i3sNode.resource}),this._tileset.tileVisible.addEventListener(function(e){(0,N.A)(e._i3sNode)&&e._i3sNode._loadChildren()})},GS.prototype._updateVisibility=function(){(0,N.A)(this._tileset)&&(this._tileset.show=this._parent.show)},GS.prototype.filterByAttributes=function(e){this._filters=(0,N.A)(e)?(0,ga.A)(e,!0):[];const t=this._rootNode;return(0,N.A)(t)?t._filterFeatures():Promise.resolve()};const KS=GS;function qS(e,t){this._dataProvider=e,this._resource=new bt.A({url:t}),this._resource.setQueryParameters(e.resource.queryParameters),this._resource.appendForwardSlash()}Object.defineProperties(qS.prototype,{resource:{get:function(){return this._resource}},data:{get:function(){return this._data}},names:{get:function(){const e=[],t=this._data.summary;if((0,N.A)(t))for(let i=0;i<t.length;++i)e.push(t[i].fieldName);return e}}}),qS.prototype.load=async function(){return this._data=await JS.loadJson(this._resource),this._data},qS.prototype._getValues=function(e){const t=this._data.summary;if((0,N.A)(t))for(let i=0;i<t.length;++i){const n=t[i];if(n.fieldName===e)return(0,N.A)(n.mostFrequentValues)?[...n.mostFrequentValues]:[]}};const HS=qS;function WS(e,t,i){this._dataProvider=e,this._parent=t,this._data=i,this._name=i.name,this._modelName=i.modelName,this._visibility=i.visibility??!0,this._resource=void 0,this._sublayers=[],this._i3sLayers=[]}Object.defineProperties(WS.prototype,{resource:{get:function(){return this._resource}},data:{get:function(){return this._data}},name:{get:function(){return this._name}},modelName:{get:function(){return this._modelName}},sublayers:{get:function(){return this._sublayers}},visibility:{get:function(){return this._visibility},set:function(e){if(B.A.defined("value",e),this._visibility!==e){this._visibility=e;for(let e=0;e<this._i3sLayers.length;e++)this._i3sLayers[e]._updateVisibility()}}},show:{get:function(){return this._visibility&&this._parent.show}}}),WS._fromData=async function(e,t,i,n){const r=new WS(e,n,i);if("group"===r._data.layerType){const i=r._data.sublayers;if((0,N.A)(i)){const n=[];for(let o=0;o<i.length;o++){const s=WS._fromData(e,t,i[o],r);n.push(s)}const o=await Promise.all(n);for(let e=0;e<o.length;e++){const t=o[e];r._sublayers.push(t),r._i3sLayers.push(...t._i3sLayers)}}}else if("3DObject"===r._data.layerType){const i=t.concat(`/sublayers/${r._data.id}`),n=new bt.A({url:i});n.setQueryParameters(e.resource.queryParameters),n.appendForwardSlash(),r._resource=n;const o=await JS.loadJson(r._resource),s=new KS(e,o,r);r._i3sLayers.push(s)}else console.log(`${r._data.layerType} layer ${r._data.name} is skipped as not supported.`);return r};const jS=WS;var $S=i(24827);function XS(e){e=e??F.A.EMPTY_OBJECT,this._name=e.name,this._show=e.show??!0,this._geoidTiledTerrainProvider=e.geoidTiledTerrainProvider,this._showFeatures=e.showFeatures??!1,this._adjustMaterialAlphaMode=e.adjustMaterialAlphaMode??!1,this._applySymbology=e.applySymbology??!1,this._calculateNormals=e.calculateNormals??!1,this._cesium3dTilesetOptions=e.cesium3dTilesetOptions??F.A.EMPTY_OBJECT,this._layers=[],this._sublayers=[],this._data=void 0,this._extent=void 0,this._geoidDataPromise=void 0,this._geoidDataList=void 0,this._decoderTaskProcessor=void 0,this._taskProcessorReadyPromise=void 0,this._attributeStatistics=[],this._layersExtent=[]}async function YS(e,t,i){if("Building"===t.layerType){(0,N.A)(i.showFeatures)||(e._showFeatures=!0),(0,N.A)(i.adjustMaterialAlphaMode)||(e._adjustMaterialAlphaMode=!0),(0,N.A)(i.applySymbology)||(e._applySymbology=!0),(0,N.A)(i.calculateNormals)||(e._calculateNormals=!0);const n=function(e,t){const i=e.resource.getUrlComponent();let n="";return n=i.match(/layers\/\d/)?`${i}`.replace(/\/+$/,""):`${i}`.replace(/\/?$/,"/").concat(`layers/${t}`),n}(e,t.id);if((0,N.A)(t.sublayers)){const i=[];for(let r=0;r<t.sublayers.length;r++){const o=jS._fromData(e,n,t.sublayers[r],e);i.push(o)}const r=await Promise.all(i);for(let t=0;t<r.length;t++){const i=r[t];e._sublayers.push(i),e._layers.push(...i._i3sLayers)}}if((0,N.A)(t.statisticsHRef)){const i=n.concat(`/${t.statisticsHRef}`),r=new HS(e,i);await r.load(),e._attributeStatistics.push(r)}if((0,N.A)(t.fullExtent)){const i=vt.A.fromDegrees(t.fullExtent.xmin,t.fullExtent.ymin,t.fullExtent.xmax,t.fullExtent.ymax);e._layersExtent.push(i)}}else if("3DObject"===t.layerType||"IntegratedMesh"===t.layerType){(0,N.A)(i.calculateNormals)||(0,N.A)(t.textureSetDefinitions)||(e._calculateNormals=!0);const n=new KS(e,t,e);e._layers.push(n),(0,N.A)(n._extent)&&e._layersExtent.push(n._extent)}else console.log(`${t.layerType} layer ${t.name} is skipped as not supported.`)}Object.defineProperties(XS.prototype,{name:{get:function(){return this._name}},show:{get:function(){return this._show},set:function(e){if(B.A.defined("value",e),this._show!==e){this._show=e;for(let e=0;e<this._layers.length;e++)this._layers[e]._updateVisibility()}}},geoidTiledTerrainProvider:{get:function(){return this._geoidTiledTerrainProvider}},layers:{get:function(){return this._layers}},sublayers:{get:function(){return this._sublayers}},data:{get:function(){return this._data}},extent:{get:function(){return this._extent}},resource:{get:function(){return this._resource}},showFeatures:{get:function(){return this._showFeatures}},adjustMaterialAlphaMode:{get:function(){return this._adjustMaterialAlphaMode}},applySymbology:{get:function(){return this._applySymbology}},calculateNormals:{get:function(){return this._calculateNormals}}}),XS.prototype.destroy=function(){for(let e=0;e<this._layers.length;e++)(0,N.A)(this._layers[e]._tileset)&&this._layers[e]._tileset.destroy();return(0,V.A)(this)},XS.prototype.isDestroyed=function(){return!1},XS.prototype.update=function(e){for(let t=0;t<this._layers.length;t++)(0,N.A)(this._layers[t]._tileset)&&this._layers[t]._tileset.update(e)},XS.prototype.prePassesUpdate=function(e){for(let t=0;t<this._layers.length;t++)(0,N.A)(this._layers[t]._tileset)&&this._layers[t]._tileset.prePassesUpdate(e)},XS.prototype.postPassesUpdate=function(e){for(let t=0;t<this._layers.length;t++)(0,N.A)(this._layers[t]._tileset)&&this._layers[t]._tileset.postPassesUpdate(e)},XS.prototype.updateForPass=function(e,t){for(let i=0;i<this._layers.length;i++)(0,N.A)(this._layers[i]._tileset)&&this._layers[i]._tileset.updateForPass(e,t)},XS.fromUrl=async function(e,t){B.A.defined("url",e),t=t??F.A.EMPTY_OBJECT;const i=bt.A.createIfNeeded(e);i.setQueryParameters({f:"pjson"},!0);const n=await XS.loadJson(i),r=new XS(t);if(r._resource=i,r._data=n,(0,N.A)(n.layers)){const e=[];for(let i=0;i<n.layers.length;i++){const o=YS(r,n.layers[i],t);e.push(o)}await Promise.all(e)}else await YS(r,n,t);r._computeExtent();const o=[];for(let e=0;e<r._layers.length;e++)o.push(r._layers[e].load(t.cesium3dTilesetOptions));return await Promise.all(o),r},XS._fetchJson=function(e){return e.fetchJson()},XS.loadJson=async function(e){const t=await XS._fetchJson(e);if((0,N.A)(t.error)){if(console.error("Failed to fetch I3S ",e.url),(0,N.A)(t.error.message)&&console.error(t.error.message),(0,N.A)(t.error.details))for(let e=0;e<t.error.details.length;e++)console.log(t.error.details[e]);throw new xt.A(t.error)}return t},XS.prototype._loadBinary=async function(e){const t=await e.fetchArrayBuffer();if(t.byteLength>0&&new Uint8Array(t)[0]==="{".charCodeAt(0)&&(new TextDecoder).decode(t).includes("404"))throw new xt.A(`Failed to load binary: ${e.url}`);return t},XS.prototype._binarizeGltf=function(e){const t=(new TextEncoder).encode(JSON.stringify(e)),i=new Uint8Array(t.byteLength+20),n={magic:new Uint8Array(i.buffer,0,4),version:new Uint32Array(i.buffer,4,1),length:new Uint32Array(i.buffer,8,1),chunkLength:new Uint32Array(i.buffer,12,1),chunkType:new Uint32Array(i.buffer,16,1),chunkData:new Uint8Array(i.buffer,20,t.byteLength)};return n.magic[0]="g".charCodeAt(),n.magic[1]="l".charCodeAt(),n.magic[2]="T".charCodeAt(),n.magic[3]="F".charCodeAt(),n.version[0]=2,n.length[0]=i.byteLength,n.chunkLength[0]=t.byteLength,n.chunkType[0]=1313821514,n.chunkData.set(t),i};const ZS=new fe.A;XS.prototype.loadGeoidData=async function(){return(0,N.A)(this._geoidDataPromise)||(this._geoidDataPromise=async function(e){const t=e._geoidTiledTerrainProvider;if((0,N.A)(t))try{const i=await function(e,t){const i=e.tilingScheme,n=[],r={},o=e._lodCount,s=et.A.fromRadians(t.west,t.north),a=et.A.fromRadians(t.east,t.south),l=i.positionToTileXY(s,o),c=i.positionToTileXY(a,o);for(let t=l.x;t<=c.x;t++)for(let s=l.y;s<=c.y;s++){const a=fe.A.fromElements(t,s,ZS),l=a.toString();if(!r.hasOwnProperty(l)){const t={x:a.x,y:a.y,level:o,tilingScheme:i,terrainProvider:e,positions:[]};r[l]=t,n.push(t)}}const u=[];for(let e=0;e<n.length;++e){const t=n[e],i=t.terrainProvider.requestTileGeometry(t.x,t.y,t.level);u.push(i)}return Promise.all(u).then(function(e){const t=[];for(let r=0;r<e.length;r++){const o={tilingScheme:i,x:n[r].x,y:n[r].y,level:n[r].level},s=e[r];let a="Geographic";i._projection instanceof xv.A&&(a="WebMercator");const l={projectionType:a,projection:i._projection,nativeExtent:i.tileXYToNativeRectangle(o.x,o.y,o.level),height:s._height,width:s._width,scale:s._structure.heightScale,offset:s._structure.heightOffset};if(s._encoding===Em.A.LERC){const e=$S.decode(s._buffer);l.buffer=e.pixels[0]}else l.buffer=s._buffer;t.push(l)}return t})}(t,e._extent);e._geoidDataList=i}catch(e){console.log("Error retrieving Geoid Terrain tiles - no geoid conversion will be performed.")}}(this)),this._geoidDataPromise},XS.prototype._computeExtent=function(){let e;for(let t=0;t<this._layersExtent.length;t++){const i=this._layersExtent[t];(0,N.A)(e)?vt.A.union(e,i,e):e=vt.A.clone(i)}this._extent=e},XS.prototype.getAttributeNames=function(){const e=[];for(let t=0;t<this._attributeStatistics.length;++t)e.push(...this._attributeStatistics[t].names);return e},XS.prototype.getAttributeValues=function(e){B.A.defined("name",e);for(let t=0;t<this._attributeStatistics.length;++t){const i=this._attributeStatistics[t]._getValues(e);if((0,N.A)(i))return i}return[]},XS.prototype.filterByAttributes=function(e){const t=[];for(let i=0;i<this._layers.length;i++){const n=this._layers[i].filterByAttributes(e);t.push(n)}return Promise.all(t)};const JS=XS;var QS=i(680278);const eC={createTilesetFromIModelId:async function({iModelId:e,changesetId:t,tilesetOptions:i}){const{exports:n}=await v_.getExports(e,t);if(n.length>0&&n.every(e=>e.status===v_.ExportStatus.Invalid))throw new xt.A(`All exports for this iModel are Invalid: ${e}`);const r=n.find(e=>e.status===v_.ExportStatus.Complete);if(!(0,N.A)(r))return;const o=new URL(r._links.mesh.href);o.pathname=`${o.pathname}/tileset.json`;const s=o.toString(),a=new bt.A({url:s});return kb.A.fromUrl(a,i)},createTilesetForRealityDataId:async function({iTwinId:e,realityDataId:t,type:i,rootDocument:n,tilesetOptions:r}){if(B.A.typeOf.string("iTwinId",e),B.A.typeOf.string("realityDataId",t),(0,N.A)(i)&&B.A.typeOf.string("type",i),(0,N.A)(n)&&B.A.typeOf.string("rootDocument",n),!(0,N.A)(i)||!(0,N.A)(n)){const r=await v_.getRealityDataMetadata(e,t);n=r.rootDocument,i=r.type}if(![v_.RealityDataType.Cesium3DTiles,v_.RealityDataType.PNTS,v_.RealityDataType.RealityMesh3DTiles,v_.RealityDataType.Terrain3DTiles].includes(i))throw new xt.A(`Reality data type is not a mesh type: ${i}`);const o=await v_.getRealityDataURL(e,t,n),s={maximumScreenSpaceError:4,...r};return kb.A.fromUrl(o,s)},createDataSourceForRealityDataId:async function({iTwinId:e,realityDataId:t,type:i,rootDocument:n}){if(B.A.typeOf.string("iTwinId",e),B.A.typeOf.string("realityDataId",t),(0,N.A)(i)&&B.A.typeOf.string("type",i),(0,N.A)(n)&&B.A.typeOf.string("rootDocument",n),!(0,N.A)(i)||!(0,N.A)(n)){const r=await v_.getRealityDataMetadata(e,t);n=r.rootDocument,i=r.type}if(![v_.RealityDataType.KML,v_.RealityDataType.GeoJSON].includes(i))throw new xt.A(`Reality data type is not a data source type: ${i}`);const r=await v_.getRealityDataURL(e,t,n);return i===v_.RealityDataType.GeoJSON?nr.A.load(r):Sp.load(r)},loadGeospatialFeatures:async function({iTwinId:e,collectionId:t,limit:i}){if(B.A.typeOf.string("iTwinId",e),B.A.typeOf.string("collectionId",t),(0,N.A)(i)&&(B.A.typeOf.number("limit",i),B.A.typeOf.number.lessThanOrEquals("limit",i,1e4),B.A.typeOf.number.greaterThanOrEquals("limit",i,1)),!(0,N.A)(v_.defaultAccessToken)&&!(0,N.A)(v_.defaultShareKey))throw new U.A("Must set ITwinPlatform.defaultAccessToken or ITwinPlatform.defaultShareKey first");const n=i??1e4,r=`${v_.apiEndpoint}geospatial-features/itwins/${e}/ogc/collections/${t}/items`,o=new bt.A({url:r,headers:{Authorization:v_._getAuthorizationHeader(),Accept:"application/vnd.bentley.itwin-platform.v1+json"},queryParameters:{limit:n,client:"CesiumJS"}});return nr.A.load(o)}};var tC=i(208198),iC=i(17656),nC=i(451227),rC=i(869327),oC=i(789989),sC=i(553909),aC=i(921243),lC=i(961965),cC=i(1235),uC=i(829513),dC=i(586067),hC=i(123314),pC=i(866857),fC=i(819598),mC=i(670549),gC=i(231097),AC=i(647474),_C=i(666203),yC=i(784749),vC=i(301866),wC=i(566798),bC=i(465674);function xC(){}Object.defineProperties(xC.prototype,{color:{get:U.A.throwInstantiationError},intensity:{get:U.A.throwInstantiationError}});const TC=xC;var SC=i(77879),CC=i(847072),MC=i(66458);const EC=/\/$/,PC=new rt.A('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function kC(e){const t=(e=e??F.A.EMPTY_OBJECT).styleId;if(!(0,N.A)(t))throw new U.A("options.styleId is required.");const i=e.accessToken;if(!(0,N.A)(i))throw new U.A("options.accessToken is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const n=bt.A.createIfNeeded(e.url??"https://api.mapbox.com/styles/v1/");this._styleId=t,this._accessToken=i;const r=e.tilesize??512;this._tilesize=r;const o=e.username??"mapbox";this._username=o;const s=(0,N.A)(e.scaleFactor)?"@2x":"";let a,l=n.getUrlComponent();EC.test(l)||(l+="/"),l+=`${this._username}/${t}/tiles/${this._tilesize}/{z}/{x}/{y}${s}`,n.url=l,n.setQueryParameters({access_token:i}),(0,N.A)(e.credit)?(a=e.credit,"string"==typeof a&&(a=new rt.A(a))):a=PC,this._resource=n,this._imageryProvider=new MC.A({url:n,credit:a,ellipsoid:e.ellipsoid,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,rectangle:e.rectangle})}Object.defineProperties(kC.prototype,{url:{get:function(){return this._imageryProvider.url}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}}}),kC.prototype.getTileCredits=function(e,t,i){},kC.prototype.requestImage=function(e,t,i,n){return this._imageryProvider.requestImage(e,t,i,n)},kC.prototype.pickFeatures=function(e,t,i,n,r){return this._imageryProvider.pickFeatures(e,t,i,n,r)},kC._defaultCredit=PC;const OC=kC;var RC=i(551549),IC=i(866109),DC=i(32335),BC=i(343674),LC=i(568748),FC=i(965976),NC=i(266262),VC=i(901717),UC=i(658036),zC=i(4024),GC=i(729295),KC=i(874403),qC=i(140182),HC=i(598361),WC=i(304686),jC=i(995537),$C=i(534095),XC=i(409816),YC=i(952392),ZC=i(433184),JC=i(566334),QC=i(736125);const eM=new fe.A(1,1);function tM(e){e=e??F.A.EMPTY_OBJECT,this.mass=e.mass??1,this.position=D.A.clone(e.position??D.A.ZERO),this.velocity=D.A.clone(e.velocity??D.A.ZERO),this.life=e.life??Number.MAX_VALUE,this.image=e.image,this.startColor=me.A.clone(e.startColor??me.A.WHITE),this.endColor=me.A.clone(e.endColor??me.A.WHITE),this.startScale=e.startScale??1,this.endScale=e.endScale??1,this.imageSize=fe.A.clone(e.imageSize??eM),this._age=0,this._normalizedAge=0,this._billboard=void 0}Object.defineProperties(tM.prototype,{age:{get:function(){return this._age}},normalizedAge:{get:function(){return this._normalizedAge}}});const iM=new D.A;tM.prototype.update=function(e,t){return D.A.multiplyByScalar(this.velocity,e,iM),D.A.add(this.position,iM,this.position),(0,N.A)(t)&&t(this,e),this._age+=e,this.life===Number.MAX_VALUE?this._normalizedAge=0:this._normalizedAge=this._age/this.life,this._age<=this.life};const nM=tM;function rM(e){e=e??F.A.EMPTY_OBJECT,this.time=e.time??0,this.minimum=e.minimum??0,this.maximum=e.maximum??50,this._complete=!1}Object.defineProperties(rM.prototype,{complete:{get:function(){return this._complete}}});const oM=rM;function sM(e){throw new U.A("This type should not be instantiated directly.  Instead, use BoxEmitter, CircleEmitter, ConeEmitter or SphereEmitter.")}sM.prototype.emit=function(e){U.A.throwInstantiationError()};const aM=sM,lM=new fe.A(1,1);function cM(e){e=e??F.A.EMPTY_OBJECT,this.show=e.show??!0,this.updateCallback=e.updateCallback,this.loop=e.loop??!0,this.image=e.image??void 0;let t=e.emitter;(0,N.A)(t)||(t=new Vb(.5)),this._emitter=t,this._bursts=e.bursts,this._modelMatrix=tg.A.clone(e.modelMatrix??tg.A.IDENTITY),this._emitterModelMatrix=tg.A.clone(e.emitterModelMatrix??tg.A.IDENTITY),this._matrixDirty=!0,this._combinedMatrix=new tg.A,this._startColor=me.A.clone(e.color??e.startColor??me.A.WHITE),this._endColor=me.A.clone(e.color??e.endColor??me.A.WHITE),this._startScale=e.scale??e.startScale??1,this._endScale=e.scale??e.endScale??1,this._emissionRate=e.emissionRate??5,this._minimumSpeed=e.speed??e.minimumSpeed??1,this._maximumSpeed=e.speed??e.maximumSpeed??1,this._minimumParticleLife=e.particleLife??e.minimumParticleLife??5,this._maximumParticleLife=e.particleLife??e.maximumParticleLife??5,this._minimumMass=e.mass??e.minimumMass??1,this._maximumMass=e.mass??e.maximumMass??1,this._minimumImageSize=fe.A.clone(e.imageSize??e.minimumImageSize??lM),this._maximumImageSize=fe.A.clone(e.imageSize??e.maximumImageSize??lM),this._sizeInMeters=e.sizeInMeters??!1,this._lifetime=e.lifetime??Number.MAX_VALUE,this._billboardCollection=void 0,this._particles=[],this._particlePool=[],this._previousTime=void 0,this._currentTime=0,this._carryOver=0,this._complete=new ge.A,this._isComplete=!1,this._updateParticlePool=!0,this._particleEstimate=0}function uM(e){let t=e._particlePool.pop();return(0,N.A)(t)||(t=new nM),t}function dM(e,t){e._particlePool.push(t)}function hM(e){(0,N.A)(e._billboard)&&(e._billboard.show=!1)}function pM(e,t){let i=t._billboard;(0,N.A)(i)||(i=t._billboard=e._billboardCollection.add({image:t.image})),i.width=t.imageSize.x,i.height=t.imageSize.y,i.position=t.position,i.sizeInMeters=e.sizeInMeters,i.show=!0;const n=Me.A.lerp(t.startColor.red,t.endColor.red,t.normalizedAge),r=Me.A.lerp(t.startColor.green,t.endColor.green,t.normalizedAge),o=Me.A.lerp(t.startColor.blue,t.endColor.blue,t.normalizedAge),s=Me.A.lerp(t.startColor.alpha,t.endColor.alpha,t.normalizedAge);i.color=new me.A(n,r,o,s),i.scale=Me.A.lerp(t.startScale,t.endScale,t.normalizedAge)}function fM(e,t){t.startColor=me.A.clone(e._startColor,t.startColor),t.endColor=me.A.clone(e._endColor,t.endColor),t.startScale=e._startScale,t.endScale=e._endScale,t.image=e.image,t.life=Me.A.randomBetween(e._minimumParticleLife,e._maximumParticleLife),t.mass=Me.A.randomBetween(e._minimumMass,e._maximumMass),t.imageSize.x=Me.A.randomBetween(e._minimumImageSize.x,e._maximumImageSize.x),t.imageSize.y=Me.A.randomBetween(e._minimumImageSize.y,e._maximumImageSize.y),t._normalizedAge=0,t._age=0;const i=Me.A.randomBetween(e._minimumSpeed,e._maximumSpeed);D.A.multiplyByScalar(t.velocity,i,t.velocity),e._particles.push(t)}Object.defineProperties(cM.prototype,{emitter:{get:function(){return this._emitter},set:function(e){B.A.defined("value",e),this._emitter=e}},bursts:{get:function(){return this._bursts},set:function(e){this._bursts=e,this._updateParticlePool=!0}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){B.A.defined("value",e),this._matrixDirty=this._matrixDirty||!tg.A.equals(this._modelMatrix,e),tg.A.clone(e,this._modelMatrix)}},emitterModelMatrix:{get:function(){return this._emitterModelMatrix},set:function(e){B.A.defined("value",e),this._matrixDirty=this._matrixDirty||!tg.A.equals(this._emitterModelMatrix,e),tg.A.clone(e,this._emitterModelMatrix)}},startColor:{get:function(){return this._startColor},set:function(e){B.A.defined("value",e),me.A.clone(e,this._startColor)}},endColor:{get:function(){return this._endColor},set:function(e){B.A.defined("value",e),me.A.clone(e,this._endColor)}},startScale:{get:function(){return this._startScale},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._startScale=e}},endScale:{get:function(){return this._endScale},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._endScale=e}},emissionRate:{get:function(){return this._emissionRate},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._emissionRate=e,this._updateParticlePool=!0}},minimumSpeed:{get:function(){return this._minimumSpeed},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._minimumSpeed=e}},maximumSpeed:{get:function(){return this._maximumSpeed},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumSpeed=e}},minimumParticleLife:{get:function(){return this._minimumParticleLife},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._minimumParticleLife=e}},maximumParticleLife:{get:function(){return this._maximumParticleLife},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumParticleLife=e,this._updateParticlePool=!0}},minimumMass:{get:function(){return this._minimumMass},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._minimumMass=e}},maximumMass:{get:function(){return this._maximumMass},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumMass=e}},minimumImageSize:{get:function(){return this._minimumImageSize},set:function(e){B.A.typeOf.object("value",e),B.A.typeOf.number.greaterThanOrEquals("value.x",e.x,0),B.A.typeOf.number.greaterThanOrEquals("value.y",e.y,0),this._minimumImageSize=e}},maximumImageSize:{get:function(){return this._maximumImageSize},set:function(e){B.A.typeOf.object("value",e),B.A.typeOf.number.greaterThanOrEquals("value.x",e.x,0),B.A.typeOf.number.greaterThanOrEquals("value.y",e.y,0),this._maximumImageSize=e}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(e){B.A.typeOf.bool("value",e),this._sizeInMeters=e}},lifetime:{get:function(){return this._lifetime},set:function(e){B.A.typeOf.number.greaterThanOrEquals("value",e,0),this._lifetime=e}},complete:{get:function(){return this._complete}},isComplete:{get:function(){return this._isComplete}}});const mM=new D.A;cM.prototype.update=function(e){if(!this.show)return;(0,N.A)(this._billboardCollection)||(this._billboardCollection=new Sw.A),this._updateParticlePool&&(function(e){const t=e._emissionRate,i=e._maximumParticleLife;let n=0;const r=e._bursts;if((0,N.A)(r)){const e=r.length;for(let t=0;t<e;++t)n+=r[t].maximum}const o=e._billboardCollection,s=e.image,a=Math.ceil(t*i+n),l=e._particles,c=e._particlePool,u=Math.max(a-l.length-c.length,0);for(let e=0;e<u;++e){const e=new nM;e._billboard=o.add({image:s,show:!1}),c.push(e)}e._particleEstimate=a}(this),this._updateParticlePool=!1);let t=0;this._previousTime&&(t=Ae.A.secondsDifference(e.time,this._previousTime)),t<0&&(t=0);const i=this._particles,n=this._emitter,r=this.updateCallback;let o,s,a=i.length;for(o=0;o<a;++o)s=i[o],s.update(t,r)?pM(this,s):(hM(s),dM(this,s),i[o]=i[a-1],--o,--a);i.length=a;const l=function(e,t){if(e._isComplete)return 0;const i=(t=Me.A.mod(t,e._lifetime))*e._emissionRate;let n=Math.floor(i);if(e._carryOver+=i-n,e._carryOver>1&&(n++,e._carryOver-=1),(0,N.A)(e.bursts)){const t=e.bursts.length;for(let i=0;i<t;i++){const t=e.bursts[i],r=e._currentTime;(0,N.A)(t)&&!t._complete&&r>t.time&&(n+=Me.A.randomBetween(t.minimum,t.maximum),t._complete=!0)}}return n}(this,t);if(l>0&&(0,N.A)(n)){this._matrixDirty&&(this._combinedMatrix=tg.A.multiply(this.modelMatrix,this.emitterModelMatrix,this._combinedMatrix),this._matrixDirty=!1);const e=this._combinedMatrix;for(o=0;o<l;o++)s=uM(this),this._emitter.emit(s),D.A.add(s.position,s.velocity,mM),tg.A.multiplyByPoint(e,mM,mM),s.position=tg.A.multiplyByPoint(e,s.position,s.position),D.A.subtract(mM,s.position,s.velocity),D.A.normalize(s.velocity,s.velocity),fM(this,s),pM(this,s)}if(this._billboardCollection.update(e),this._previousTime=Ae.A.clone(e.time,this._previousTime),this._currentTime+=t,this._lifetime!==Number.MAX_VALUE&&this._currentTime>this._lifetime)if(this.loop){if(this._currentTime=Me.A.mod(this._currentTime,this._lifetime),this.bursts){const e=this.bursts.length;for(o=0;o<e;o++)this.bursts[o]._complete=!1}}else this._isComplete=!0,this._complete.raiseEvent(this);e.frameNumber%120==0&&function(e){const t=e._particles,i=e._particlePool,n=e._billboardCollection,r=t.length,o=i.length,s=e._particleEstimate,a=o-Math.max(s-r-o,0);for(let e=a;e<o;++e){const t=i[e];n.remove(t._billboard)}i.length=a}(this)},cM.prototype.isDestroyed=function(){return!1},cM.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),(0,V.A)(this)};const gM=cM;var AM=i(612123),_M=i(467302),yM=i(670270),vM=i(425415),wM=i(981152),bM=i(842623),xM=i(878471),TM=i(679854),SM=i(259069),CM=i(534135),MM=i(929771),EM=i(520853),PM=i(24013),kM=i(154622),OM=i(891674),RM=i(920757),IM=i(421549),DM=i(201733),BM=i(517290),LM=i(380590),FM=i(339600),NM=i(922990),VM=i(493721),UM=i(289758),zM=i(632791),GM=i(871160),KM=i(828847),qM=i(663386),HM=i(287659),WM=i(105792),jM=i(875037),$M=i(1229),XM=i(798732),YM=i(67521),ZM=i(980840);function JM(){U.A.throwInstantiationError()}JM.computeDefaultLevelZeroMaximumGeometricError=function(e){return 2*e.ellipsoid.maximumRadius*Math.PI*.25/(65*e.getNumberOfXTilesAtLevel(0))},Object.defineProperties(JM.prototype,{quadtree:{get:U.A.throwInstantiationError,set:U.A.throwInstantiationError},tilingScheme:{get:U.A.throwInstantiationError},errorEvent:{get:U.A.throwInstantiationError}}),JM.prototype.update=U.A.throwInstantiationError,JM.prototype.beginUpdate=U.A.throwInstantiationError,JM.prototype.endUpdate=U.A.throwInstantiationError,JM.prototype.getLevelMaximumGeometricError=U.A.throwInstantiationError,JM.prototype.loadTile=U.A.throwInstantiationError,JM.prototype.computeTileVisibility=U.A.throwInstantiationError,JM.prototype.showTileThisFrame=U.A.throwInstantiationError,JM.prototype.computeDistanceToTile=U.A.throwInstantiationError,JM.prototype.isDestroyed=U.A.throwInstantiationError,JM.prototype.destroy=U.A.throwInstantiationError;const QM=JM;var eE=i(147795),tE=i(366165),iE=i(569445),nE=i(48660),rE=i(589834),oE=i(464088),sE=i(413285),aE=i(78173),lE=i(619872),cE=i(373749),uE=i(681750),dE=i(33559),hE=i(395250),pE=i(556541),fE=i(920685),mE=i(148784),gE=i(533872),AE=i(126797);function _E(e){e=e??1,B.A.typeOf.number.greaterThan("radius",e,0),this._radius=e??1}Object.defineProperties(_E.prototype,{radius:{get:function(){return this._radius},set:function(e){B.A.typeOf.number.greaterThan("value",e,0),this._radius=e}}}),_E.prototype.emit=function(e){const t=Me.A.randomBetween(0,Me.A.TWO_PI),i=Me.A.randomBetween(0,Me.A.PI),n=Me.A.randomBetween(0,this._radius),r=n*Math.cos(t)*Math.sin(i),o=n*Math.sin(t)*Math.sin(i),s=n*Math.cos(i);e.position=D.A.fromElements(r,o,s,e.position),e.velocity=D.A.normalize(e.position,e.velocity)};const yE=_E;var vE=i(913419),wE=i(992881),bE=i(938987),xE=i(896464),TE=i(138151),SE=i(590732);function CE(){}CE.prototype.evaluate=function(e,t){U.A.throwInstantiationError()},CE.prototype.evaluateColor=function(e,t){U.A.throwInstantiationError()},CE.prototype.getShaderFunction=function(e,t,i,n){U.A.throwInstantiationError()},CE.prototype.getVariables=function(){U.A.throwInstantiationError()};const ME=CE;var EE=i(874818),PE=i(205672),kE=i(380983),OE=i(768213),RE=i(557417),IE=i(640809),DE=i(71160),BE=i(413690),LE=i(224159),FE=i(315747);function NE(){}NE.prototype.boundingVolume=void 0,NE.prototype.boundingSphere=void 0,NE.prototype.distanceToCamera=function(e){U.A.throwInstantiationError()},NE.prototype.intersectPlane=function(e){U.A.throwInstantiationError()},NE.prototype.createDebugVolume=function(e){U.A.throwInstantiationError()};const VE=NE;function UE(e){e=e??F.A.EMPTY_OBJECT,this._tilingScheme=(0,N.A)(e.tilingScheme)?e.tilingScheme:new Mm.A({ellipsoid:e.ellipsoid}),this._color=e.color??me.A.YELLOW,this._errorEvent=new ge.A,this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0}Object.defineProperties(UE.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}}}),UE.prototype.getTileCredits=function(e,t,i){},UE.prototype.requestImage=function(e,t,i,n){const r=document.createElement("canvas");r.width=256,r.height=256;const o=r.getContext("2d"),s=this._color.toCssColorString();return o.strokeStyle=s,o.lineWidth=2,o.strokeRect(1,1,255,255),o.font="bold 25px Arial",o.textAlign="center",o.fillStyle=s,o.fillText(`L: ${i}`,124,86),o.fillText(`X: ${e}`,124,136),o.fillText(`Y: ${t}`,124,186),Promise.resolve(r)},UE.prototype.pickFeatures=function(e,t,i,n,r){};const zE=UE;function GE(e){U.A.throwInstantiationError()}GE.prototype.isReady=U.A.throwInstantiationError,GE.prototype.shouldDiscardImage=U.A.throwInstantiationError;const KE=GE;var qE=i(976092),HE=i(829670),WE=i(335859),jE=i(11745),$E=i(271101),XE=i(960847);const YE=Object.freeze({START:0,LOADING:1,READY:2,UPSAMPLED_ONLY:3});var ZE=i(323314),JE=i(751069),QE=i(99520),eP=i(972757),tP=i(639475),iP=i(440463),nP=i(584247),rP=i(28940),oP=i(308521),sP=i(868897),aP=i(301350),lP=i(601165),cP=i(566453),uP=i(953681),dP=i(471293),hP=i(595826),pP=i(342767);function fP(e,t){this.show=!0,(0,N.A)(e)||(e=new Qe.A),this.rectangle=Qe.A.clone(e),(0,N.A)(t)||(t=lT.A.fromType(lT.A.ColorType,{color:new me.A(1,1,1,1)})),this.material=t,this._material=void 0,this._overlayCommand=void 0,this._rs=void 0}fP.prototype.update=function(e){if(!this.show)return;if(!(0,N.A)(this.material))throw new U.A("this.material must be defined.");if(!(0,N.A)(this.rectangle))throw new U.A("this.rectangle must be defined.");const t=this._rs;if((0,N.A)(t)&&Qe.A.equals(t.viewport,this.rectangle)||(this._rs=w.A.fromCache({blending:Iw.A.ALPHA_BLEND,viewport:this.rectangle})),e.passes.render){const t=e.context;if(this._material!==this.material||!(0,N.A)(this._overlayCommand)){this._material=this.material,(0,N.A)(this._overlayCommand)&&this._overlayCommand.shaderProgram.destroy();const e=new k.A({sources:[this._material.shaderSource,Tm]});this._overlayCommand=t.createViewportQuadCommand(e,{renderState:this._rs,uniformMap:this._material._uniforms,owner:this}),this._overlayCommand.pass=_.A.OVERLAY}this._material.update(t),this._overlayCommand.renderState=this._rs,this._overlayCommand.uniformMap=this._material._uniforms,e.commandList.push(this._overlayCommand)}},fP.prototype.isDestroyed=function(){return!1},fP.prototype.destroy=function(){return(0,N.A)(this._overlayCommand)&&(this._overlayCommand.shaderProgram=this._overlayCommand.shaderProgram&&this._overlayCommand.shaderProgram.destroy()),(0,V.A)(this)};const mP=fP;var gP=i(204758),AP=i(879152),_P=i(823345),yP=i(2930),vP=i(450339);function wP(){U.A.throwInstantiationError()}Object.defineProperties(wP.prototype,{globalTransform:{get:U.A.throwInstantiationError},shapeTransform:{get:U.A.throwInstantiationError},shape:{get:U.A.throwInstantiationError},minBounds:{get:U.A.throwInstantiationError},maxBounds:{get:U.A.throwInstantiationError},dimensions:{get:U.A.throwInstantiationError},paddingBefore:{get:U.A.throwInstantiationError},paddingAfter:{get:U.A.throwInstantiationError},names:{get:U.A.throwInstantiationError},types:{get:U.A.throwInstantiationError},componentTypes:{get:U.A.throwInstantiationError},minimumValues:{get:U.A.throwInstantiationError},maximumValues:{get:U.A.throwInstantiationError},maximumTileCount:{get:U.A.throwInstantiationError},availableLevels:{get:U.A.throwInstantiationError},keyframeCount:{get:U.A.throwInstantiationError},timeIntervalCollection:{get:U.A.throwInstantiationError}}),wP.prototype.requestData=function(e){U.A.throwInstantiationError()};const bP=wP;var xP=i(618291);function TP(){U.A.throwInstantiationError()}Object.defineProperties(TP.prototype,{orientedBoundingBox:{get:U.A.throwInstantiationError},boundingSphere:{get:U.A.throwInstantiationError},boundTransform:{get:U.A.throwInstantiationError},shapeTransform:{get:U.A.throwInstantiationError},shaderUniforms:{get:U.A.throwInstantiationError},shaderDefines:{get:U.A.throwInstantiationError},shaderMaximumIntersectionsLength:{get:U.A.throwInstantiationError}}),TP.prototype.update=U.A.throwInstantiationError,TP.prototype.computeOrientedBoundingBoxForTile=U.A.throwInstantiationError,TP.prototype.computeOrientedBoundingBoxForSample=U.A.throwInstantiationError,TP.DefaultMinBounds=U.A.throwInstantiationError,TP.DefaultMaxBounds=U.A.throwInstantiationError;const SP=TP;var CP=i(307452),MP=i(762270),EP=i(32706),PP=i(593054),kP=i(849750),OP=i(883734);const RP=new me.A,IP=new me.A,DP=new me.A,BP=new me.A,LP=new Zm.A,FP=new Uint8Array(4);function NP(e,t,i,n){const r=t.height===i.height?0:(e-t.height)/(i.height-t.height);return me.A.lerp(t.color,i.color,r,n)}function VP(e,t){return{height:e,color:me.A.clone(t)}}function UP(e){return(e=(e=e.filter(function(e,t,i){const n=t>0,r=t<i.length-1,o=!n||e.height===i[t-1].height,s=!r||e.height===i[t+1].height;return!o||!s})).filter(function(e,t,i){const n=t>0,r=t<i.length-1,o=!!n&&me.A.equals(e.color,i[t-1].color),s=!!r&&me.A.equals(e.color,i[t+1].color);return!o||!s})).filter(function(e,t,i){const n=t>0,r=!!n&&me.A.equals(e.color,i[t-1].color),o=!n||e.height===i[t-1].height;return!r||!o})}function zP(e){const{scene:t,layers:i}=e??F.A.EMPTY_OBJECT;B.A.typeOf.object("options.scene",t),B.A.defined("options.layers",i),B.A.typeOf.number.greaterThan("options.layers.length",i.length,0);const{context:n}=t,r=function(e){const t=function(e){let t,i;const n=[],r=e.length;for(t=0;t<r;t++){const r=e[t],o=r.entries,s=o.length;if(!Array.isArray(o)||0===s)throw new U.A("entries must be an array with size > 0.");let a=[];for(i=0;i<s;i++){const e=o[i];if(!(0,N.A)(e.height))throw new U.A("entry requires a height.");if(!(0,N.A)(e.color))throw new U.A("entry requires a color.");const t=Me.A.clamp(e.height,zP._minimumHeight,zP._maximumHeight),n=me.A.clone(e.color,RP);n.red*=n.alpha,n.green*=n.alpha,n.blue*=n.alpha,a.push(VP(t,n))}let l=!0,c=!0;for(i=0;i<s-1;i++){const e=a[i+0],t=a[i+1];l=l&&e.height<=t.height,c=c&&e.height>=t.height}c?a=a.reverse():l||(0,Zv.A)(a,function(e,t){return Me.A.sign(e.height-t.height)});let u=r.extendDownwards??!1,d=r.extendUpwards??!1;1!==a.length||u||d||(u=!0,d=!0),u&&a.splice(0,0,VP(zP._minimumHeight,a[0].color)),d&&a.splice(a.length,0,VP(zP._maximumHeight,a[a.length-1].color)),a=UP(a),n.push(a)}return n}(e);let i,n=[],r=[];function o(e,t){n.push(VP(e,t))}function s(e,t,i){let n=me.A.multiplyByScalar(i,1-t.alpha,BP);n=me.A.add(n,t,n),o(e,n)}const a=t.length;for(i=0;i<a;i++){const e=t[i];let a=0,l=0;r=n,n=[];const c=e.length,u=r.length;for(;a<c||l<u;){const t=a<c?e[a]:void 0,i=a>0?e[a-1]:void 0,n=a<c-1?e[a+1]:void 0,d=l<u?r[l]:void 0,h=l>0?r[l-1]:void 0,p=l<u-1?r[l+1]:void 0;if((0,N.A)(t)&&(0,N.A)(d)&&t.height===d.height){const e=(0,N.A)(p)&&d.height===p.height,r=!(0,N.A)(h),c=!(0,N.A)(p),u=(0,N.A)(n)&&t.height===n.height,f=!(0,N.A)(i),m=!(0,N.A)(n);e?u?(s(t.height,t.color,d.color),s(t.height,n.color,p.color)):f?(o(t.height,d.color),s(t.height,t.color,p.color)):m?(s(t.height,t.color,d.color),o(t.height,p.color)):(s(t.height,t.color,d.color),s(t.height,t.color,p.color)):r?u?(o(t.height,t.color),s(t.height,n.color,d.color)):m?(o(t.height,t.color),o(t.height,d.color)):(f||o(t.height,t.color),s(t.height,t.color,d.color)):c?u?(s(t.height,t.color,d.color),o(t.height,n.color)):f?(o(t.height,d.color),o(t.height,t.color)):m?s(t.height,t.color,d.color):(s(t.height,t.color,d.color),o(t.height,t.color)):u?(s(t.height,t.color,d.color),s(t.height,n.color,d.color)):f?(o(t.height,d.color),s(t.height,t.color,d.color)):m?(s(t.height,t.color,d.color),o(t.height,d.color)):s(t.height,t.color,d.color),a+=u?2:1,l+=e?2:1}else if((0,N.A)(t)&&(0,N.A)(d)&&(0,N.A)(h)&&t.height<d.height){const e=NP(t.height,h,d,DP);(0,N.A)(i)?(0,N.A)(n)?s(t.height,t.color,e):(s(t.height,t.color,e),o(t.height,e)):(o(t.height,e),s(t.height,t.color,e)),a++}else if((0,N.A)(d)&&(0,N.A)(t)&&(0,N.A)(i)&&d.height<t.height){const e=NP(d.height,i,t,IP);(0,N.A)(h)?(0,N.A)(p)?s(d.height,e,d.color):(s(d.height,e,d.color),o(d.height,e)):(o(d.height,e),s(d.height,e,d.color)),l++}else(0,N.A)(t)&&(!(0,N.A)(d)||t.height<d.height)?(!(0,N.A)(d)||(0,N.A)(h)||(0,N.A)(n)?((0,N.A)(d)||!(0,N.A)(h)||(0,N.A)(i)||(o(h.height,zP._emptyColor),o(t.height,zP._emptyColor)),o(t.height,t.color)):(o(t.height,t.color),o(t.height,zP._emptyColor),o(d.height,zP._emptyColor)),a++):(0,N.A)(d)&&(!(0,N.A)(t)||d.height<t.height)&&(o(d.height,d.color),l++)}}return UP(n)}(i),o=r.length;let s,a,l;if(zP._useFloatTexture(n)){a=v.A.FLOAT,l=n.webgl2?z.A.RED:z.A.LUMINANCE,s=new Float32Array(o);for(let e=0;e<o;e++)s[e]=r[e].height}else{a=v.A.UNSIGNED_BYTE,l=z.A.RGBA,s=new Uint8Array(4*o);for(let e=0;e<o;e++)Zm.A.packFloat(r[e].height,LP),Zm.A.pack(LP,s,4*e)}const c=I.A.create({context:n,pixelFormat:l,pixelDatatype:a,source:{arrayBufferView:s,width:o,height:1},sampler:new T.A({wrapS:Y.A.CLAMP_TO_EDGE,wrapT:Y.A.CLAMP_TO_EDGE,minificationFilter:K.A.NEAREST,magnificationFilter:G.A.NEAREST})}),u=new Uint8Array(4*o);for(let e=0;e<o;e++)r[e].color.toBytes(FP),u[4*e+0]=FP[0],u[4*e+1]=FP[1],u[4*e+2]=FP[2],u[4*e+3]=FP[3];const d=I.A.create({context:n,pixelFormat:z.A.RGBA,pixelDatatype:v.A.UNSIGNED_BYTE,source:{arrayBufferView:u,width:o,height:1},sampler:new T.A({wrapS:Y.A.CLAMP_TO_EDGE,wrapT:Y.A.CLAMP_TO_EDGE,minificationFilter:K.A.LINEAR,magnificationFilter:G.A.LINEAR})});return lT.A.fromType("ElevationBand",{heights:c,colors:d})}zP._useFloatTexture=function(e){return e.floatingPointTexture},zP._maximumHeight=5906376425472,zP._minimumHeight=-5906376425472,zP._emptyColor=new me.A(0,0,0,0);const GP=zP,KP={},qP=async function(e,t){(t=t??{}).cacheBytes=t.cacheBytes??1610612736,t.maximumCacheOverflowBytes=t.maximumCacheOverflowBytes??1073741824,t.enableCollision=t.enableCollision??!0,e=e??F.A.EMPTY_OBJECT,B.A.typeOf.object("apiOptions",e),e.onlyUsingWithGoogleGeocoder||(0,xa.A)("google-tiles-with-google-geocoder","Only the Google geocoder can be used with Google Photorealistic 3D Tiles.  Set the `geocode` property of Viewer constructor options.  You can set additionalOptions.onlyUsingWithGoogleGeocoder to hide this warning once you have configured the geocoder.");const i=e.key??p_.defaultApiKey;if(!(0,N.A)(i))return async function(e){const t=2275207;let i=KP[2275207];(0,N.A)(i)||(i=B_.A.fromAssetId(t),KP[2275207]=i);const n=await i;return kb.A.fromUrl(n,e)}(t);let n;const r=p_.getDefaultCredit();(0,N.A)(r)&&(n=[r]);const o=new bt.A({url:`${p_.mapTilesApiEndpoint}3dtiles/root.json`,queryParameters:{key:i},credits:n});return kb.A.fromUrl(o,t)},HP=async function(e){const t=await kb.A.fromIonAssetId(96188,e);let i=(e=e??F.A.EMPTY_OBJECT).style;if(!(0,N.A)(i)){const t=(e.defaultColor??me.A.WHITE).toCssColorString();i=new lb.A({color:`Boolean(\${feature['cesium#color']}) ? color(\${feature['cesium#color']}) : ${t}`})}return t.style=i,t},WP=function(e){const t=[];let i=(e=e??F.A.EMPTY_OBJECT).geometry;if(!(0,N.A)(i))throw new U.A("options.geometry is required.");(0,N.A)(i.attributes)&&(0,N.A)(i.primitiveType)||(i=i.constructor.createGeometry(i));const n=i.attributes,r=tg.A.clone(e.modelMatrix??tg.A.IDENTITY),o=e.length??1e4;if((0,N.A)(n.normal)&&t.push(new hA.A({geometry:mA.A.createLineSegmentsForVectors(i,"normal",o),attributes:{color:new bg.A(1,0,0,1)},modelMatrix:r})),(0,N.A)(n.tangent)&&t.push(new hA.A({geometry:mA.A.createLineSegmentsForVectors(i,"tangent",o),attributes:{color:new bg.A(0,1,0,1)},modelMatrix:r})),(0,N.A)(n.bitangent)&&t.push(new hA.A({geometry:mA.A.createLineSegmentsForVectors(i,"bitangent",o),attributes:{color:new bg.A(0,0,1,1)},modelMatrix:r})),t.length>0)return new Wx.A({asynchronous:!1,geometryInstances:t,appearance:new AM.A({flat:!0,translucent:!1})})};var jP=i(655028),$P=i(635649),XP=i(217543),YP=i(961624),ZP=i(351554),JP=i(245329),QP=i(796170),ek=i(63267),tk=i(772796),ik=i(201052),nk=i(115959),rk=i(4471),ok=i(613161),sk=i(16620),ak=i(2218),lk=i(301005),ck=i(980509),uk=i(291192),dk=i(149800),hk=i(495702),pk=i(328326),fk=i(857831),mk=i(537335),gk=i(692608),Ak=i(438376),_k=i(64137),yk=i(373785),vk=i(239942),wk=i(980360),bk=i(874099),xk=i(360069),Tk=i(70966),Sk=i(21561),Ck=i(831373),Mk=i(375916),Ek=i(76846),Pk=i(320441),kk=i(830539),Ok=i(227798),Rk=i(207131),Ik=i(889216),Dk=i(865114),Bk=i(256773),Lk=i(807783),Fk=i(551672),Nk=i(733185),Vk=i(50937),Uk=i(390249),zk=i(759889),Gk=i(726401),Kk=i(58747),qk=i(181163),Hk=i(625322),Wk=i(204410),jk=i(896077),$k=i(575581),Xk=i(490129),Yk=i(75899),Zk=i(295673),Jk=i(370988),Qk=i(419421),eO=i(563402),tO=i(143938),iO=i(801202),nO=i(403139),rO=i(521791),oO=i(212143),sO=i(325161),aO=i(261126),lO=i(221334),cO=i(980678),uO=i(768601),dO=i(501782),hO=i(828077),pO=i(7562),fO=i(34274),mO=i(494098),gO=i(443045),AO=i(40640),_O=i(323745),yO=i(186930),vO=i(138338),wO=i(864393),bO=i(189670),xO=i(485326),TO=i(755774),SO=i(741641),CO=i(418816),MO=i(195987),EO=i(940702),PO=i(791533),kO=i(677101),OO=i(305725),RO=i(774390),IO=i(248877),DO=i(945042),BO=i(752925),LO=i(249550),FO=i(365559),NO=i(427139),VO=i(844644),UO=i(638943),zO=i(732156),GO=i(377126),KO=i(279291),qO=i(547146),HO=i(934993),WO=i(712957);const jO="uniform sampler2D u_depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    float z_window = czm_unpackDepth(texture(u_depthTexture, v_textureCoordinates));\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    float z_ndc = (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n    float scale = pow(z_ndc * 0.5 + 0.5, 8.0);\n    out_FragColor = vec4(mix(vec3(0.0), vec3(1.0), scale), 1.0);\n}\n";var $O=i(388241),XO=i(780953),YO=i(347961),ZO=i(602142),JO=i(947709),QO=i(724355),eR=i(573311),tR=i(90979),iR=i(307386),nR=i(537070),rR=i(812178),oR=i(951834),sR=i(382743),aR=i(133240),lR=i(724447),cR=i(267047),uR=i(84334),dR=i(114098),hR=i(865980),pR=i(155463),fR=i(839078),mR=i(464335),gR=i(534702),AR=i(614480),_R=i(884137),yR=i(494490),vR=i(137261),wR=i(512286),bR=i(578283),xR=i(166479),TR=i(495331),SR=i(277315),CR=i(899557),MR=i(330483),ER=i(94334),PR=i(913081),kR=i(493435),OR=i(19120),RR=i(538198),IR=i(802227),DR=i(186919),BR=i(212642),LR=i(503631),FR=i(899700),NR=i(662274),VR=i(106430),UR=i(212525),zR=i(381508),GR=i(747680),KR=i(13916),qR=i(598073),HR=i(66502),WR=i(320578),jR=i(521032),$R=i(3282),XR=i(509830),YR=i(890692),ZR=i(577847),JR=i(610084),QR=i(391648),eI=i(281810),tI=i(10803),iI=i(817082),nI=i(736355),rI=i(193497),oI=i(963564),sI=i(64389),aI=i(623379),lI=i(224975),cI=i(56241),uI=i(156621),dI=i(275670),hI=i(4773),pI=i(41358),fI=i(647478),mI=i(303036),gI=i(855692),AI=i(542614),_I=i(270316),yI=i(652259),vI=i(242893),wI=i(947129),bI=i(701111),xI=i(112497),TI=i(127329),SI=i(657685),CI=i(922167),MI=i(17728),EI=i(949020),PI=i(136426),kI=i(885251),OI=i(850210),RI=i(814071),II=i(746761),DI=i(496854),BI=i(566258),LI=i(650884),FI=i(226827),NI=i(471147),VI=i(163010),UI=i(604883),zI=i(799395),GI=i(601945),KI=i(31908),qI=i(752709),HI=i(623524),WI=i(366413),jI=i(214666),$I=i(531218),XI=i(252843),YI=i(391852),ZI=i(456727),JI=i(942836),QI=i(821174);const eD=function(e){e=e??F.A.EMPTY_OBJECT;const t=(0,N.A)(e.typedArray);if(t===(0,N.A)(e.url))throw new U.A("exactly one of options.typedArray, options.url must be defined");if(t&&(!(0,N.A)(e.width)||!(0,N.A)(e.height)))throw new U.A("options.width and options.height are required when options.typedArray is defined");this.typedArray=e.typedArray,this.width=e.width,this.height=e.height,this.pixelFormat=e.pixelFormat??z.A.RGBA,this.pixelDatatype=e.pixelDatatype??v.A.UNSIGNED_BYTE;let i=e.url;"string"==typeof i&&(i=bt.A.createIfNeeded(i)),this.resource=i;const n=e.repeat??1?Y.A.REPEAT:Y.A.CLAMP_TO_EDGE;this.sampler=new T.A({wrapS:n,wrapT:n,minificationFilter:e.minificationFilter,magnificationFilter:e.magnificationFilter,maximumAnisotropy:e.maximumAnisotropy})};var tD=i(807048),iD=i(671098);const nD=Object.freeze({FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",MAT2:"mat2",MAT3:"mat3",MAT4:"mat4"});var rD=i(641882),oD=i(6214),sD=i(965020),aD=i(433175),lD=i(779548),cD=i(945363),uD=i(575190),dD=i(703381),hD=i(960352),pD=i(550071),fD=i(291146),mD=i(680633),gD=i(751418),AD=i(616053),_D=i(509473),yD=i(54754),vD=i(484374),wD=i(673089),bD=i(178303),xD=i(658594),TD=i(228970),SD=i(135869),CD=i(517382),MD=i(538496),ED=i(747543),PD=i(317374),kD=i(884252),OD=i(485806),RD=i(903149),ID=i(601995),DD=i(552111),BD=i(154487),LD=i(856253),FD=i(685879),ND=i(570941),VD=i(819888),UD=i(656328),zD=i(915065),GD=i(564363),KD=i(300255),qD=i(658169),HD=i(820965),WD=i(30284),jD=i(851714),$D=i(423340),XD=i(416407),YD=i(171037),ZD=i(41715),JD=i(229806),QD=i(731759),eB=i(106245),tB=i(638211),iB=i(702673),nB=i(461091),rB=i(187411),oB=i(812499),sB=i(498386),aB=i(264968),lB=i(668784),cB=i(990227),uB=i(922956),dB=i(981767),hB=i(413799),pB=i(919085),fB=i(892987),mB=i(498969),gB=i(505559),AB=i(436749),_B=i(641179),yB=i(68787),vB=i(803270),wB=i(225424),bB=i(441786),xB=i(865459),TB=i(269453),SB=i(817515),CB=i(240790),MB=i(12624),EB=i(13500),PB=i(943703),kB=i(915493),OB=i(493458),RB=i(820789),IB=i(565274),DB=i(247408),BB=i(177627),LB=i(624782),FB=i(195814),NB=i(9102),VB=i(534173),UB=i(348941),zB=i(431443),GB=i(448358),KB=i(633899),qB=i(393597),HB=i(293367),WB=i(31862),jB=i(610675),$B=i(160958),XB=i(21038),YB=i(363063),ZB=i(973717),JB=i(254805),QB=i(548051),eL=i(191195),tL=i(738340),iL=i(674794),nL=i(584312),rL=i(428395),oL=i(696042),sL=i(820121),aL=i(147769),lL=i(394839),cL=i(932901),uL=i(527105),dL=i(916117),hL=i(755541),pL=i(463540),fL=i(199494),mL=i(82914),gL=i(568758),AL=i(562348),_L=i(19687),yL=i(501738),vL=i(660164),wL=i(480262),bL=i(608860),xL=i(980902),TL=i(367309),SL=i(880691),CL=i(648777),ML=i(231511),EL=i(293752),PL=i(617172),kL=i(169513),OL=i(720547),RL=i(584783),IL=i(10451),DL=i(237688),BL=i(322556),LL=i(593920),FL=i(316923),NL=i(882209),VL=i(659282),UL=i(912726),zL=i(893828),GL=i(47367),KL=i(714574);const qL=Object.freeze({SIGX:"SIGX",SIGY:"SIGY",SIGZ:"SIGZ",VARX:"VARX",VARY:"VARY",VARZ:"VARZ",SIGR:"VARZ"});var HL=i(858288),WL=i(453056),jL=i(844833);const $L=function(e){return self.onmessage=async function({data:t}){const i=[],n={id:t.id,result:void 0,error:void 0};self.CESIUM_BASE_URL=t.baseUrl;try{const r=await e(t.parameters,i);n.result=r}catch(e){e instanceof Error?n.error={name:e.name,message:e.message,stack:e.stack}:n.error=e}t.canTransferArrayBuffer||(i.length=0);try{postMessage(n,i)}catch(e){n.result=void 0,n.error=`postMessage failed with error: ${(0,Nv.A)(e)}\n  with responseMessage: ${JSON.stringify(n)}`,postMessage(n)}},self.onmessageerror=function(e){postMessage({id:e.data?.id,error:`postMessage failed with error: ${JSON.stringify(e)}`})},self};var XL=i(112306);const YL=function(){this.canExecute=void 0,this.beforeExecute=void 0,this.afterExecute=void 0,U.A.throwInstantiationError()},ZL={createCheckbox:function(e,t,i){B.A.typeOf.string("labelText",e),B.A.typeOf.string("checkedBinding",t);const n=document.createElement("div"),r=document.createElement("label"),o=document.createElement("input");o.type="checkbox";let s=`checked: ${t}`;return(0,N.A)(i)&&(s+=`, enable: ${i}`),o.setAttribute("data-bind",s),r.appendChild(o),r.appendChild(document.createTextNode(e)),n.appendChild(r),n},createSection:function(e,t,i,n){B.A.defined("panel",e),B.A.typeOf.string("headerText",t),B.A.typeOf.string("sectionVisibleBinding",i),B.A.typeOf.string("toggleSectionVisibilityBinding",n);const r=document.createElement("div");r.className="cesium-cesiumInspector-section",r.setAttribute("data-bind",`css: { "cesium-cesiumInspector-section-collapsed": !${i} }`),e.appendChild(r);const o=document.createElement("h3");o.className="cesium-cesiumInspector-sectionHeader",o.appendChild(document.createTextNode(t)),o.setAttribute("data-bind",`click: ${n}`),r.appendChild(o);const s=document.createElement("div");return s.className="cesium-cesiumInspector-sectionContent",r.appendChild(s),s},createRangeInput:function(e,t,i,n,r,o){B.A.typeOf.string("rangeText",e),B.A.typeOf.string("sliderValueBinding",t),B.A.typeOf.number("min",i),B.A.typeOf.number("max",n),o=o??t;const s=document.createElement("input");s.setAttribute("data-bind",`value: ${o}`),s.type="number";const a=document.createElement("input");a.type="range",a.min=i,a.max=n,a.step=r??"any",a.setAttribute("data-bind",`valueUpdate: "input", value: ${t}`);const l=document.createElement("div");l.appendChild(a);const c=document.createElement("div");return c.className="cesium-cesiumInspector-slider",c.appendChild(document.createTextNode(e)),c.appendChild(s),c.appendChild(l),c},createRangeInputWithDynamicMinMax:function(e,t,i,n){B.A.typeOf.string("rangeText",e),B.A.typeOf.string("sliderValueBinding",t),n=n??t;const r=document.createElement("input");r.setAttribute("data-bind",`value: ${n}`),r.type="number";const o=document.createElement("input");o.type="range",o.step=i??"any",o.setAttribute("data-bind",`valueUpdate: "input", value: ${t}, attr: { min: ${t}Min, max: ${t}Max }`);const s=document.createElement("div");s.appendChild(o);const a=document.createElement("div");return a.className="cesium-cesiumInspector-slider",a.appendChild(document.createTextNode(e)),a.appendChild(r),a.appendChild(s),a},createButton:function(e,t,i){B.A.typeOf.string("buttonText",e),B.A.typeOf.string("clickedBinding",t);const n=document.createElement("button");n.type="button",n.textContent=e,n.className="cesium-cesiumInspector-pickButton";let r=`click: ${t}`;return(0,N.A)(i)&&(r+=`, css: {"cesium-cesiumInspector-pickButtonHighlight" : ${i}}`),n.setAttribute("data-bind",r),n}};var JL=i(677854),QL=i(798518),eF=i(277441),tF=i(618168),iF=i(338863),nF=i(806441),rF=i(622463),oF=i(93017),sF=i(687194),aF=i(714018),lF=i(177647),cF=i(914684);function uF(e,t){t?e._eventHandler.setInputAction(function(t){const i=e._scene.pick(t.endPosition);(0,N.A)(i)&&i.primitive instanceof kb.A&&(e.tileset=i.primitive)},Ry.A.MOUSE_MOVE):(e._eventHandler.removeInputAction(Ry.A.MOUSE_MOVE),e.picking=e.picking)}const dF={maximumFractionDigits:3};function hF(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,dF):Math.round(t).toLocaleString()}function pF(e,t){if(!(0,N.A)(e))return"";const i=t?e._statisticsPerPass[rb.A.PICK]:e._statisticsPerPass[rb.A.RENDER];let n='<ul class="cesium-cesiumInspector-statistics">';return n+=`<li><strong>Visited: </strong>${i.visited.toLocaleString()}</li><li><strong>Selected: </strong>${i.selected.toLocaleString()}</li><li><strong>Commands: </strong>${i.numberOfCommands.toLocaleString()}</li>`,n+="</ul>",t||(n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Requests: </strong>${i.numberOfPendingRequests.toLocaleString()}</li><li><strong>Attempted: </strong>${i.numberOfAttemptedRequests.toLocaleString()}</li><li><strong>Processing: </strong>${i.numberOfTilesProcessing.toLocaleString()}</li><li><strong>Content Ready: </strong>${i.numberOfTilesWithContentReady.toLocaleString()}</li><li><strong>Total: </strong>${i.numberOfTilesTotal.toLocaleString()}</li>`,n+="</ul>",n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Features Selected: </strong>${i.numberOfFeaturesSelected.toLocaleString()}</li><li><strong>Features Loaded: </strong>${i.numberOfFeaturesLoaded.toLocaleString()}</li><li><strong>Points Selected: </strong>${i.numberOfPointsSelected.toLocaleString()}</li><li><strong>Points Loaded: </strong>${i.numberOfPointsLoaded.toLocaleString()}</li><li><strong>Triangles Selected: </strong>${i.numberOfTrianglesSelected.toLocaleString()}</li>`,n+="</ul>",n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Tiles styled: </strong>${i.numberOfTilesStyled.toLocaleString()}</li><li><strong>Features styled: </strong>${i.numberOfFeaturesStyled.toLocaleString()}</li>`,n+="</ul>",n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Children Union Culled: </strong>${i.numberOfTilesCulledWithChildrenUnion.toLocaleString()}</li>`,n+="</ul>",n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Geometry Memory (MB): </strong>${hF(i.geometryByteLength)}</li><li><strong>Texture Memory (MB): </strong>${hF(i.texturesByteLength)}</li><li><strong>Batch Table Memory (MB): </strong>${hF(i.batchTableByteLength)}</li>`,n+="</ul>"),n}function fF(){const e=wb.A.statistics;return`\n  <ul class="cesium-cesiumInspector-statistics">\n    <li><strong>Geometry Memory (MB): </strong>${hF(e.geometryByteLength)}</li>\n    <li><strong>Texture Memory (MB): </strong>${hF(e.texturesByteLength)}</li>\n  </ul>\n  `}const mF=[{text:"Highlight",value:$w.A.HIGHLIGHT},{text:"Replace",value:$w.A.REPLACE},{text:"Mix",value:$w.A.MIX}],gF=new me.A(1,1,0,.4),AF=new me.A,_F=new me.A;function yF(e,t){B.A.typeOf.object("scene",e),B.A.typeOf.object("performanceContainer",t);const i=this,n=e.canvas;this._eventHandler=new Oy.A(n),this._scene=e,this._performanceContainer=t,this._canvas=n,this._performanceDisplay=new _M.A({container:t}),this._statisticsText="",this._pickStatisticsText="",this._resourceCacheStatisticsText="",this._editorError="",this.performance=!1,this.showStatistics=!0,this.showPickStatistics=!0,this.showResourceCacheStatistics=!1,this.inspectorVisible=!0,this.tilesetVisible=!1,this.displayVisible=!1,this.updateVisible=!1,this.loggingVisible=!1,this.styleVisible=!1,this.tileDebugLabelsVisible=!1,this.optimizationVisible=!1,this.styleString="{}",this.hasEnabledWireframe=!1,this._tileset=void 0,this._feature=void 0,this._tile=void 0,cF.A.track(this,["performance","inspectorVisible","_statisticsText","_pickStatisticsText","_resourceCacheStatisticsText","_editorError","showPickStatistics","showStatistics","showResourceCacheStatistics","tilesetVisible","displayVisible","updateVisible","loggingVisible","styleVisible","optimizationVisible","tileDebugLabelsVisible","styleString","_feature","_tile","_tileset","hasEnabledWireframe"]),this._properties=cF.A.observable({}),this.properties=[],cF.A.defineProperty(this,"properties",function(){const e=[],t=i._properties();for(const i in t)t.hasOwnProperty(i)&&e.push(i);return e});const r=cF.A.observable();cF.A.defineProperty(this,"dynamicScreenSpaceError",{get:function(){return r()},set:function(e){r(e),(0,N.A)(i._tileset)&&(i._tileset.dynamicScreenSpaceError=e)}}),this.dynamicScreenSpaceError=!1;const o=cF.A.observable();cF.A.defineProperty(this,"colorBlendMode",{get:function(){return o()},set:function(e){o(e),(0,N.A)(i._tileset)&&(i._tileset.colorBlendMode=e,i._scene.requestRender())}}),this.colorBlendMode=$w.A.HIGHLIGHT;const s=cF.A.observable(),a=cF.A.observable();cF.A.defineProperty(this,"picking",{get:function(){return a()},set:function(t){a(t),t?i._eventHandler.setInputAction(function(t){const n=e.pick(t.endPosition);if(n instanceof eb.A?(i.feature=n,i.tile=n.content.tile):(0,N.A)(n)&&(0,N.A)(n.content)?(i.feature=void 0,i.tile=n.content.tile):(i.feature=void 0,i.tile=void 0),(0,N.A)(i._tileset)){if(s&&(0,N.A)(n)&&(0,N.A)(n.content)){let r;e.pickPositionSupported&&(r=e.pickPosition(t.endPosition),(0,N.A)(r)&&(i._tileset.debugPickPosition=r)),i._tileset.debugPickedTile=n.content.tile}else i._tileset.debugPickedTile=void 0;i._scene.requestRender()}},Ry.A.MOUSE_MOVE):(i.feature=void 0,i.tile=void 0,i._eventHandler.removeInputAction(Ry.A.MOUSE_MOVE))}}),this.picking=!0;const l=cF.A.observable();cF.A.defineProperty(this,"colorize",{get:function(){return l()},set:function(e){l(e),(0,N.A)(i._tileset)&&(i._tileset.debugColorizeTiles=e,i._scene.requestRender())}}),this.colorize=!1;const c=cF.A.observable();cF.A.defineProperty(this,"wireframe",{get:function(){return c()},set:function(e){c(e),(0,N.A)(i._tileset)&&(i._tileset.debugWireframe=e,i._scene.requestRender())}}),this.wireframe=!1;const u=cF.A.observable();cF.A.defineProperty(this,"showBoundingVolumes",{get:function(){return u()},set:function(e){u(e),(0,N.A)(i._tileset)&&(i._tileset.debugShowBoundingVolume=e,i._scene.requestRender())}}),this.showBoundingVolumes=!1;const d=cF.A.observable();cF.A.defineProperty(this,"showContentBoundingVolumes",{get:function(){return d()},set:function(e){d(e),(0,N.A)(i._tileset)&&(i._tileset.debugShowContentBoundingVolume=e,i._scene.requestRender())}}),this.showContentBoundingVolumes=!1;const h=cF.A.observable();cF.A.defineProperty(this,"showRequestVolumes",{get:function(){return h()},set:function(e){h(e),(0,N.A)(i._tileset)&&(i._tileset.debugShowViewerRequestVolume=e,i._scene.requestRender())}}),this.showRequestVolumes=!1;const p=cF.A.observable();cF.A.defineProperty(this,"freezeFrame",{get:function(){return p()},set:function(e){p(e),(0,N.A)(i._tileset)&&(i._tileset.debugFreezeFrame=e,i._scene.debugShowFrustumPlanes=e,i._scene.requestRender())}}),this.freezeFrame=!1,cF.A.defineProperty(this,"showOnlyPickedTileDebugLabel",{get:function(){return s()},set:function(e){s(e),(0,N.A)(i._tileset)&&(i._tileset.debugPickedTileLabelOnly=e,i._scene.requestRender())}}),this.showOnlyPickedTileDebugLabel=!1;const f=cF.A.observable();cF.A.defineProperty(this,"showGeometricError",{get:function(){return f()},set:function(e){f(e),(0,N.A)(i._tileset)&&(i._tileset.debugShowGeometricError=e,i._scene.requestRender())}}),this.showGeometricError=!1;const m=cF.A.observable();cF.A.defineProperty(this,"showRenderingStatistics",{get:function(){return m()},set:function(e){m(e),(0,N.A)(i._tileset)&&(i._tileset.debugShowRenderingStatistics=e,i._scene.requestRender())}}),this.showRenderingStatistics=!1;const g=cF.A.observable();cF.A.defineProperty(this,"showMemoryUsage",{get:function(){return g()},set:function(e){g(e),(0,N.A)(i._tileset)&&(i._tileset.debugShowMemoryUsage=e,i._scene.requestRender())}}),this.showMemoryUsage=!1;const A=cF.A.observable();cF.A.defineProperty(this,"showUrl",{get:function(){return A()},set:function(e){A(e),(0,N.A)(i._tileset)&&(i._tileset.debugShowUrl=e,i._scene.requestRender())}}),this.showUrl=!1;const _=cF.A.observable();cF.A.defineProperty(this,"maximumScreenSpaceError",{get:function(){return _()},set:function(e){e=Number(e),isNaN(e)||(_(e),(0,N.A)(i._tileset)&&(i._tileset.maximumScreenSpaceError=e))}}),this.maximumScreenSpaceError=16;const y=cF.A.observable();cF.A.defineProperty(this,"dynamicScreenSpaceErrorDensity",{get:function(){return y()},set:function(e){e=Number(e),isNaN(e)||(y(e),(0,N.A)(i._tileset)&&(i._tileset.dynamicScreenSpaceErrorDensity=e))}}),this.dynamicScreenSpaceErrorDensity=2e-4,this.dynamicScreenSpaceErrorDensitySliderValue=void 0,cF.A.defineProperty(this,"dynamicScreenSpaceErrorDensitySliderValue",{get:function(){return Math.pow(y(),1/6)},set:function(e){const t=Math.pow(e,6);y(t),(0,N.A)(i._tileset)&&(i._tileset.dynamicScreenSpaceErrorDensity=t)}});const v=cF.A.observable();cF.A.defineProperty(this,"dynamicScreenSpaceErrorFactor",{get:function(){return v()},set:function(e){e=Number(e),isNaN(e)||(v(e),(0,N.A)(i._tileset)&&(i._tileset.dynamicScreenSpaceErrorFactor=e))}}),this.dynamicScreenSpaceErrorFactor=24;const w=(b=this,function(e){const t=b._scene.pick(e.position);(0,N.A)(t)&&t.primitive instanceof kb.A&&(b.tileset=t.primitive),b.pickActive=!1});var b;const x=cF.A.observable();cF.A.defineProperty(this,"pickActive",{get:function(){return x()},set:function(e){x(e),e?i._eventHandler.setInputAction(w,Ry.A.LEFT_CLICK):i._eventHandler.removeInputAction(Ry.A.LEFT_CLICK)}});const T=cF.A.observable();cF.A.defineProperty(this,"pointCloudShading",{get:function(){return T()},set:function(e){T(e),(0,N.A)(i._tileset)&&(i._tileset.pointCloudShading.attenuation=e)}}),this.pointCloudShading=!1;const S=cF.A.observable();cF.A.defineProperty(this,"geometricErrorScale",{get:function(){return S()},set:function(e){e=Number(e),isNaN(e)||(S(e),(0,N.A)(i._tileset)&&(i._tileset.pointCloudShading.geometricErrorScale=e))}}),this.geometricErrorScale=1;const C=cF.A.observable();cF.A.defineProperty(this,"maximumAttenuation",{get:function(){return C()},set:function(e){e=Number(e),isNaN(e)||(C(e),(0,N.A)(i._tileset)&&(i._tileset.pointCloudShading.maximumAttenuation=0===e?void 0:e))}}),this.maximumAttenuation=0;const M=cF.A.observable();cF.A.defineProperty(this,"baseResolution",{get:function(){return M()},set:function(e){e=Number(e),isNaN(e)||(M(e),(0,N.A)(i._tileset)&&(i._tileset.pointCloudShading.baseResolution=0===e?void 0:e))}}),this.baseResolution=0;const E=cF.A.observable();cF.A.defineProperty(this,"eyeDomeLighting",{get:function(){return E()},set:function(e){E(e),(0,N.A)(i._tileset)&&(i._tileset.pointCloudShading.eyeDomeLighting=e)}}),this.eyeDomeLighting=!1;const P=cF.A.observable();cF.A.defineProperty(this,"eyeDomeLightingStrength",{get:function(){return P()},set:function(e){e=Number(e),isNaN(e)||(P(e),(0,N.A)(i._tileset)&&(i._tileset.pointCloudShading.eyeDomeLightingStrength=e))}}),this.eyeDomeLightingStrength=1;const k=cF.A.observable();cF.A.defineProperty(this,"eyeDomeLightingRadius",{get:function(){return k()},set:function(e){e=Number(e),isNaN(e)||(k(e),(0,N.A)(i._tileset)&&(i._tileset.pointCloudShading.eyeDomeLightingRadius=e))}}),this.eyeDomeLightingRadius=1,this.pickActive=!1;const O=cF.A.observable();cF.A.defineProperty(this,"skipLevelOfDetail",{get:function(){return O()},set:function(e){O(e),(0,N.A)(i._tileset)&&(i._tileset.skipLevelOfDetail=e)}}),this.skipLevelOfDetail=!0;const R=cF.A.observable();cF.A.defineProperty(this,"skipScreenSpaceErrorFactor",{get:function(){return R()},set:function(e){e=Number(e),isNaN(e)||(R(e),(0,N.A)(i._tileset)&&(i._tileset.skipScreenSpaceErrorFactor=e))}}),this.skipScreenSpaceErrorFactor=16;const I=cF.A.observable();cF.A.defineProperty(this,"baseScreenSpaceError",{get:function(){return I()},set:function(e){e=Number(e),isNaN(e)||(I(e),(0,N.A)(i._tileset)&&(i._tileset.baseScreenSpaceError=e))}}),this.baseScreenSpaceError=1024;const D=cF.A.observable();cF.A.defineProperty(this,"skipLevels",{get:function(){return D()},set:function(e){e=Number(e),isNaN(e)||(D(e),(0,N.A)(i._tileset)&&(i._tileset.skipLevels=e))}}),this.skipLevels=1;const L=cF.A.observable();cF.A.defineProperty(this,"immediatelyLoadDesiredLevelOfDetail",{get:function(){return L()},set:function(e){L(e),(0,N.A)(i._tileset)&&(i._tileset.immediatelyLoadDesiredLevelOfDetail=e)}}),this.immediatelyLoadDesiredLevelOfDetail=!1;const F=cF.A.observable();cF.A.defineProperty(this,"loadSiblings",{get:function(){return F()},set:function(e){F(e),(0,N.A)(i._tileset)&&(i._tileset.loadSiblings=e)}}),this.loadSiblings=!1,this._style=void 0,this._shouldStyle=!1,this._definedProperties=["properties","dynamicScreenSpaceError","colorBlendMode","picking","colorize","wireframe","showBoundingVolumes","showContentBoundingVolumes","showRequestVolumes","freezeFrame","maximumScreenSpaceError","dynamicScreenSpaceErrorDensity","baseScreenSpaceError","skipScreenSpaceErrorFactor","skipLevelOfDetail","skipLevels","immediatelyLoadDesiredLevelOfDetail","loadSiblings","dynamicScreenSpaceErrorDensitySliderValue","dynamicScreenSpaceErrorFactor","pickActive","showOnlyPickedTileDebugLabel","showGeometricError","showRenderingStatistics","showMemoryUsage","showUrl","pointCloudShading","geometricErrorScale","maximumAttenuation","baseResolution","eyeDomeLighting","eyeDomeLightingStrength","eyeDomeLightingRadius"],this._removePostRenderEvent=e.postRender.addEventListener(function(){i._update()}),(0,N.A)(this._tileset)||uF(this,!0)}function vF(e){if(!(0,N.A)(e))return!1;if(e.featuresLength>0)return!0;const t=e.innerContents;if((0,N.A)(t)){const e=t.length;for(let i=0;i<e;++i)if(!vF(t[i]))return!1;return!0}return!1}Object.defineProperties(yF.prototype,{scene:{get:function(){return this._scene}},performanceContainer:{get:function(){return this._performanceContainer}},statisticsText:{get:function(){return this._statisticsText}},pickStatisticsText:{get:function(){return this._pickStatisticsText}},resourceCacheStatisticsText:{get:function(){return this._resourceCacheStatisticsText}},colorBlendModes:{get:function(){return mF}},editorError:{get:function(){return this._editorError}},tileset:{get:function(){return this._tileset},set:function(e){if(this._tileset=e,this._style=void 0,this.styleString="{}",this.feature=void 0,this.tile=void 0,(0,N.A)(e)){this._properties(e.properties);const t=["colorize","wireframe","showBoundingVolumes","showContentBoundingVolumes","showRequestVolumes","freezeFrame","showOnlyPickedTileDebugLabel","showGeometricError","showRenderingStatistics","showMemoryUsage","showUrl"],i=t.length;for(let e=0;e<i;++e){const i=t[e];this[i]=this[i]}this.maximumScreenSpaceError=e.maximumScreenSpaceError,this.dynamicScreenSpaceError=e.dynamicScreenSpaceError,this.dynamicScreenSpaceErrorDensity=e.dynamicScreenSpaceErrorDensity,this.dynamicScreenSpaceErrorFactor=e.dynamicScreenSpaceErrorFactor,this.colorBlendMode=e.colorBlendMode,this.skipLevelOfDetail=e.skipLevelOfDetail,this.skipScreenSpaceErrorFactor=e.skipScreenSpaceErrorFactor,this.baseScreenSpaceError=e.baseScreenSpaceError,this.skipLevels=e.skipLevels,this.immediatelyLoadDesiredLevelOfDetail=e.immediatelyLoadDesiredLevelOfDetail,this.loadSiblings=e.loadSiblings,this.hasEnabledWireframe=e._enableDebugWireframe;const n=e.pointCloudShading;this.pointCloudShading=n.attenuation,this.geometricErrorScale=n.geometricErrorScale,this.maximumAttenuation=n.maximumAttenuation?n.maximumAttenuation:0,this.baseResolution=n.baseResolution?n.baseResolution:0,this.eyeDomeLighting=n.eyeDomeLighting,this.eyeDomeLightingStrength=n.eyeDomeLightingStrength,this.eyeDomeLightingRadius=n.eyeDomeLightingRadius,this._scene.requestRender()}else this._properties({});this._statisticsText=pF(e,!1),this._pickStatisticsText=pF(e,!0),this._resourceCacheStatisticsText=fF(),uF(this,!1)}},feature:{get:function(){return this._feature},set:function(e){if(this._feature===e)return;const t=this._feature;(0,N.A)(t)&&!t.content.isDestroyed()&&(!this.colorize&&(0,N.A)(this._style)?t.color=(0,N.A)(this._style.color)?this._style.color.evaluateColor(t,AF):me.A.WHITE:t.color=_F,this._scene.requestRender()),(0,N.A)(e)&&(me.A.clone(e.color,_F),e.color=gF,this._scene.requestRender()),this._feature=e}},tile:{get:function(){return this._tile},set:function(e){if(this._tile===e)return;const t=this._tile;!(0,N.A)(t)||t.isDestroyed()||vF(t.content)||(t.color=_F,this._scene.requestRender()),(0,N.A)(e)&&!vF(e.content)&&(me.A.clone(e.color,_F),e.color=gF,this._scene.requestRender()),this._tile=e}}}),yF.prototype.togglePickTileset=function(){this.pickActive=!this.pickActive},yF.prototype.toggleInspector=function(){this.inspectorVisible=!this.inspectorVisible},yF.prototype.toggleTileset=function(){this.tilesetVisible=!this.tilesetVisible},yF.prototype.toggleDisplay=function(){this.displayVisible=!this.displayVisible},yF.prototype.toggleUpdate=function(){this.updateVisible=!this.updateVisible},yF.prototype.toggleLogging=function(){this.loggingVisible=!this.loggingVisible},yF.prototype.toggleStyle=function(){this.styleVisible=!this.styleVisible},yF.prototype.toggleTileDebugLabels=function(){this.tileDebugLabelsVisible=!this.tileDebugLabelsVisible},yF.prototype.toggleOptimization=function(){this.optimizationVisible=!this.optimizationVisible},yF.prototype.trimTilesCache=function(){(0,N.A)(this._tileset)&&this._tileset.trimLoadedTiles()},yF.prototype.compileStyle=function(){const e=this._tileset;if((0,N.A)(e)&&this.styleString!==JSON.stringify(e.style)){this._editorError="";try{0===this.styleString.length&&(this.styleString="{}"),this._style=new lb.A(JSON.parse(this.styleString)),this._shouldStyle=!0,this._scene.requestRender()}catch(e){this._editorError=e.toString()}this.feature=this._feature,this.tile=this._tile}},yF.prototype.styleEditorKeyPress=function(e,t){if(9===t.keyCode){t.preventDefault();const e=t.target,i=e.selectionStart,n=e.selectionEnd;let r=n;const o=e.value.slice(i,n).split("\n"),s=o.length;let a;if(t.shiftKey)for(a=0;a<s;++a)" "===o[a][0]&&(" "===o[a][1]?(o[a]=o[a].substr(2),r-=2):(o[a]=o[a].substr(1),r-=1));else for(a=0;a<s;++a)o[a]=`  ${o[a]}`,r+=2;const l=o.join("\n");e.value=e.value.slice(0,i)+l+e.value.slice(n),e.selectionStart=i!==n?i:r,e.selectionEnd=r}else!t.ctrlKey||10!==t.keyCode&&13!==t.keyCode||this.compileStyle();return!0},yF.prototype._update=function(){const e=this._tileset;if(this.performance&&this._performanceDisplay.update(),(0,N.A)(e)){if(e.isDestroyed())return this.tile=void 0,this.feature=void 0,void(this.tileset=void 0);const t=e.style;this._style!==e.style&&(this._shouldStyle?(e.style=this._style,this._shouldStyle=!1):(this._style=t,this.styleString=JSON.stringify(t.style,null,"  ")))}this.showStatistics&&(this._statisticsText=pF(e,!1),this._pickStatisticsText=pF(e,!0),this._resourceCacheStatisticsText=fF())},yF.prototype.isDestroyed=function(){return!1},yF.prototype.destroy=function(){this._eventHandler.destroy(),this._removePostRenderEvent();const e=this;return this._definedProperties.forEach(function(t){cF.A.getObservable(e,t).dispose()}),(0,V.A)(this)},yF.getStatistics=pF;const wF=yF;function bF(e,t){B.A.defined("container",e),B.A.typeOf.object("scene",t),e=(0,Xd.A)(e);const i=document.createElement("div"),n=document.createElement("div");n.setAttribute("data-bind","visible: performance");const r=new wF(t,n);this._viewModel=r,this._container=e,this._element=i;const o=document.createElement("div");o.textContent="3D Tiles Inspector",o.className="cesium-cesiumInspector-button",o.setAttribute("data-bind","click: toggleInspector"),i.appendChild(o),i.className="cesium-cesiumInspector cesium-3DTilesInspector",i.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : inspectorVisible, "cesium-cesiumInspector-hidden" : !inspectorVisible}'),e.appendChild(i);const s=document.createElement("div");s.className="cesium-cesiumInspector-dropDown",i.appendChild(s);const a=ZL.createSection,l=ZL.createCheckbox,c=ZL.createRangeInput,u=ZL.createButton,d=a(s,"Tileset","tilesetVisible","toggleTileset"),h=a(s,"Display","displayVisible","toggleDisplay"),p=a(s,"Update","updateVisible","toggleUpdate"),f=a(s,"Logging","loggingVisible","toggleLogging"),m=a(s,"Tile Debug Labels","tileDebugLabelsVisible","toggleTileDebugLabels"),g=a(s,"Style","styleVisible","toggleStyle"),A=a(s,"Optimization","optimizationVisible","toggleOptimization"),_=document.createElement("div");_.className="field-group";const y=document.createElement("label");y.className="field-label",y.appendChild(document.createTextNode("Properties: "));const v=document.createElement("div");v.setAttribute("data-bind","text: properties"),_.appendChild(y),_.appendChild(v),d.appendChild(_),d.appendChild(u("Pick Tileset","togglePickTileset","pickActive")),d.appendChild(u("Trim Tiles Cache","trimTilesCache")),d.appendChild(l("Enable Picking","picking")),h.appendChild(l("Colorize","colorize"));const w=h.appendChild(l("Wireframe","wireframe","_tileset === undefined || hasEnabledWireframe")),b=document.createElement("p");b.setAttribute("data-bind","visible: _tileset !== undefined && !hasEnabledWireframe"),b.setAttribute("class","cesium-3DTilesInspector-disabledElementsInfo"),b.innerText="Set enableDebugWireframe to true in the tileset constructor to enable this option.",w.appendChild(b),h.appendChild(l("Bounding Volumes","showBoundingVolumes")),h.appendChild(l("Content Volumes","showContentBoundingVolumes")),h.appendChild(l("Request Volumes","showRequestVolumes")),h.appendChild(l("Point Cloud Shading","pointCloudShading"));const x=document.createElement("div");x.setAttribute("data-bind","visible: pointCloudShading"),x.appendChild(c("Geometric Error Scale","geometricErrorScale",0,2,.01)),x.appendChild(c("Maximum Attenuation","maximumAttenuation",0,32,1)),x.appendChild(c("Base Resolution","baseResolution",0,1,.01)),x.appendChild(l("Eye Dome Lighting (EDL)","eyeDomeLighting")),h.appendChild(x);const T=document.createElement("div");T.setAttribute("data-bind","visible: eyeDomeLighting"),T.appendChild(c("EDL Strength","eyeDomeLightingStrength",0,2,.1)),T.appendChild(c("EDL Radius","eyeDomeLightingRadius",0,4,.1)),x.appendChild(T),p.appendChild(l("Freeze Frame","freezeFrame")),p.appendChild(l("Dynamic Screen Space Error","dynamicScreenSpaceError"));const S=document.createElement("div");S.appendChild(c("Maximum Screen Space Error","maximumScreenSpaceError",0,128,1)),p.appendChild(S);const C=document.createElement("div");C.setAttribute("data-bind","visible: dynamicScreenSpaceError"),C.appendChild(c("Screen Space Error Density","dynamicScreenSpaceErrorDensitySliderValue",0,1,.005,"dynamicScreenSpaceErrorDensity")),C.appendChild(c("Screen Space Error Factor","dynamicScreenSpaceErrorFactor",1,32,.1)),p.appendChild(C),f.appendChild(l("Performance","performance")),f.appendChild(n),f.appendChild(l("Statistics","showStatistics"));const M=document.createElement("div");M.className="cesium-3dTilesInspector-statistics",M.setAttribute("data-bind","html: statisticsText, visible: showStatistics"),f.appendChild(M),f.appendChild(l("Pick Statistics","showPickStatistics"));const E=document.createElement("div");E.className="cesium-3dTilesInspector-statistics",E.setAttribute("data-bind","html: pickStatisticsText, visible: showPickStatistics"),f.appendChild(E),f.appendChild(l("Resource Cache Statistics","showResourceCacheStatistics"));const P=document.createElement("div");P.className="cesium-3dTilesInspector-statistics",P.setAttribute("data-bind","html: resourceCacheStatisticsText, visible: showResourceCacheStatistics"),f.appendChild(P);const k=document.createElement("div");g.appendChild(k),k.appendChild(document.createTextNode("Color Blend Mode: "));const O=document.createElement("select");O.setAttribute("data-bind",'options: colorBlendModes, optionsText: "text", optionsValue: "value", value: colorBlendMode'),k.appendChild(O);const R=document.createElement("textarea");R.setAttribute("data-bind","textInput: styleString, event: { keydown: styleEditorKeyPress }"),k.className="cesium-cesiumInspector-styleEditor",k.appendChild(R);const I=u("Compile (Ctrl+Enter)","compileStyle");k.appendChild(I);const D=document.createElement("div");D.className="cesium-cesiumInspector-error",D.setAttribute("data-bind","text: editorError"),k.appendChild(D),m.appendChild(l("Show Picked Only","showOnlyPickedTileDebugLabel")),m.appendChild(l("Geometric Error","showGeometricError")),m.appendChild(l("Rendering Statistics","showRenderingStatistics")),m.appendChild(l("Memory Usage (MB)","showMemoryUsage")),m.appendChild(l("Url","showUrl")),A.appendChild(l("Skip Tile LODs","skipLevelOfDetail"));const L=document.createElement("div");L.appendChild(c("Skip SSE Factor","skipScreenSpaceErrorFactor",1,50,1)),A.appendChild(L);const F=document.createElement("div");F.appendChild(c("SSE before skipping LOD","baseScreenSpaceError",0,4096,1)),A.appendChild(F);const N=document.createElement("div");N.appendChild(c("Min. levels to skip","skipLevels",0,10,1)),A.appendChild(N),A.appendChild(l("Load only tiles that meet the max SSE.","immediatelyLoadDesiredLevelOfDetail")),A.appendChild(l("Load siblings of visible tiles","loadSiblings")),cF.A.applyBindings(r,i)}Object.defineProperties(bF.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),bF.prototype.isDestroyed=function(){return!1},bF.prototype.destroy=function(){return cF.A.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),(0,V.A)(this)};const xF=bF;var TF=i(877987),SF=i(377909),CF=i(413369),MF=i(300347);function EF(e,t,i){let n=Math.min(i,t);return n=Math.max(n,e),n}const PF=new xy.A,kF=new D.A;function OF(e,t){if(!(0,N.A)(e))throw new U.A("scene is required");if(!(0,N.A)(t))throw new U.A("performanceContainer is required");const i=this,n=e.canvas,r=new Oy.A(n);this._eventHandler=r,this._scene=e,this._canvas=n,this._primitive=void 0,this._tile=void 0,this._modelMatrixPrimitive=void 0,this._performanceDisplay=void 0,this._performanceContainer=t;const o=this._scene.globe;let s;function a(e){const t=i._scene.pick({x:e.position.x,y:e.position.y});(0,N.A)(t)&&(i.primitive=(0,N.A)(t.collection)?t.collection:t.primitive),i._scene.requestRender(),i.pickPrimitiveActive=!1}function l(e){let t;const n=o.ellipsoid,r=i._scene.camera.getPickRay(e.position,PF),s=o.pick(r,i._scene,kF);if((0,N.A)(s)){const e=n.cartesianToCartographic(s),i=o._surface.tileProvider._tilesToRenderByTextureCount;for(let n=0;!t&&n<i.length;++n){const r=i[n];if((0,N.A)(r))for(let i=0;!t&&i<r.length;++i){const n=r[i];vt.A.contains(n.rectangle,e)&&(t=n)}}}i.tile=t,i.pickTileActive=!1}o.depthTestAgainstTerrain=!0,this.frustums=!1,this.frustumPlanes=!1,this.performance=!1,this.shaderCacheText="",this.primitiveBoundingSphere=!1,this.primitiveReferenceFrame=!1,this.filterPrimitive=!1,this.tileBoundingSphere=!1,this.filterTile=!1,this.wireframe=!1,this.depthFrustum=1,this._numberOfFrustums=1,this.suspendUpdates=!1,this.tileCoordinates=!1,this.frustumStatisticText=!1,this.tileText="",this.hasPickedPrimitive=!1,this.hasPickedTile=!1,this.pickPrimitiveActive=!1,this.pickTileActive=!1,this.dropDownVisible=!0,this.generalVisible=!0,this.primitivesVisible=!1,this.terrainVisible=!1,this.depthFrustumText="",cF.A.track(this,["frustums","frustumPlanes","performance","shaderCacheText","primitiveBoundingSphere","primitiveReferenceFrame","filterPrimitive","tileBoundingSphere","filterTile","wireframe","depthFrustum","suspendUpdates","tileCoordinates","frustumStatisticText","tileText","hasPickedPrimitive","hasPickedTile","pickPrimitiveActive","pickTileActive","dropDownVisible","generalVisible","primitivesVisible","terrainVisible","depthFrustumText"]),this._toggleDropDown=(0,eF.A)(function(){i.dropDownVisible=!i.dropDownVisible}),this._toggleGeneral=(0,eF.A)(function(){i.generalVisible=!i.generalVisible}),this._togglePrimitives=(0,eF.A)(function(){i.primitivesVisible=!i.primitivesVisible}),this._toggleTerrain=(0,eF.A)(function(){i.terrainVisible=!i.terrainVisible}),this._frustumsSubscription=cF.A.getObservable(this,"frustums").subscribe(function(e){i._scene.debugShowFrustums=e,i._scene.requestRender()}),this._frustumPlanesSubscription=cF.A.getObservable(this,"frustumPlanes").subscribe(function(e){i._scene.debugShowFrustumPlanes=e,i._scene.requestRender()}),this._performanceSubscription=cF.A.getObservable(this,"performance").subscribe(function(e){e?i._performanceDisplay=new _M.A({container:i._performanceContainer}):i._performanceContainer.innerHTML=""}),this._showPrimitiveBoundingSphere=(0,eF.A)(function(){return i._primitive.debugShowBoundingVolume=i.primitiveBoundingSphere,i._scene.requestRender(),!0}),this._primitiveBoundingSphereSubscription=cF.A.getObservable(this,"primitiveBoundingSphere").subscribe(function(){i._showPrimitiveBoundingSphere()}),this._showPrimitiveReferenceFrame=(0,eF.A)(function(){if(i.primitiveReferenceFrame){const e=i._primitive.modelMatrix;i._modelMatrixPrimitive=new $x({modelMatrix:e}),i._scene.primitives.add(i._modelMatrixPrimitive)}else(0,N.A)(i._modelMatrixPrimitive)&&(i._scene.primitives.remove(i._modelMatrixPrimitive),i._modelMatrixPrimitive=void 0);return i._scene.requestRender(),!0}),this._primitiveReferenceFrameSubscription=cF.A.getObservable(this,"primitiveReferenceFrame").subscribe(function(){i._showPrimitiveReferenceFrame()}),this._doFilterPrimitive=(0,eF.A)(function(){return i.filterPrimitive?i._scene.debugCommandFilter=function(e){return!(!(0,N.A)(i._modelMatrixPrimitive)||e.owner!==i._modelMatrixPrimitive._primitive)||!!(0,N.A)(i._primitive)&&(e.owner===i._primitive||e.owner===i._primitive._billboardCollection||e.owner.primitive===i._primitive)}:i._scene.debugCommandFilter=void 0,!0}),this._filterPrimitiveSubscription=cF.A.getObservable(this,"filterPrimitive").subscribe(function(){i._doFilterPrimitive(),i._scene.requestRender()}),this._wireframeSubscription=cF.A.getObservable(this,"wireframe").subscribe(function(e){o._surface.tileProvider._debug.wireframe=e,i._scene.requestRender()}),this._depthFrustumSubscription=cF.A.getObservable(this,"depthFrustum").subscribe(function(e){i._scene.debugShowDepthFrustum=e,i._scene.requestRender()}),this._incrementDepthFrustum=(0,eF.A)(function(){const e=i.depthFrustum+1;return i.depthFrustum=EF(1,i._numberOfFrustums,e),i._scene.requestRender(),!0}),this._decrementDepthFrustum=(0,eF.A)(function(){const e=i.depthFrustum-1;return i.depthFrustum=EF(1,i._numberOfFrustums,e),i._scene.requestRender(),!0}),this._suspendUpdatesSubscription=cF.A.getObservable(this,"suspendUpdates").subscribe(function(e){o._surface._debug.suspendLodUpdate=e,e||(i.filterTile=!1)}),this._showTileCoordinates=(0,eF.A)(function(){return i.tileCoordinates&&!(0,N.A)(s)?s=e.imageryLayers.addImageryProvider(new zE({tilingScheme:e.terrainProvider.tilingScheme})):!i.tileCoordinates&&(0,N.A)(s)&&(e.imageryLayers.remove(s),s=void 0),!0}),this._tileCoordinatesSubscription=cF.A.getObservable(this,"tileCoordinates").subscribe(function(){i._showTileCoordinates(),i._scene.requestRender()}),this._tileBoundingSphereSubscription=cF.A.getObservable(this,"tileBoundingSphere").subscribe(function(){i._showTileBoundingSphere(),i._scene.requestRender()}),this._showTileBoundingSphere=(0,eF.A)(function(){return i.tileBoundingSphere?o._surface.tileProvider._debug.boundingSphereTile=i._tile:o._surface.tileProvider._debug.boundingSphereTile=void 0,i._scene.requestRender(),!0}),this._doFilterTile=(0,eF.A)(function(){return i.filterTile?(i.suspendUpdates=!0,o._surface._tilesToRender=[],(0,N.A)(i._tile)&&i._tile.renderable&&o._surface._tilesToRender.push(i._tile)):i.suspendUpdates=!1,!0}),this._filterTileSubscription=cF.A.getObservable(this,"filterTile").subscribe(function(){i.doFilterTile(),i._scene.requestRender()}),this._pickPrimitive=(0,eF.A)(function(){i.pickPrimitiveActive=!i.pickPrimitiveActive}),this._pickPrimitiveActiveSubscription=cF.A.getObservable(this,"pickPrimitiveActive").subscribe(function(e){e?r.setInputAction(a,Ry.A.LEFT_CLICK):r.removeInputAction(Ry.A.LEFT_CLICK)}),this._pickTile=(0,eF.A)(function(){i.pickTileActive=!i.pickTileActive}),this._pickTileActiveSubscription=cF.A.getObservable(this,"pickTileActive").subscribe(function(e){e?r.setInputAction(l,Ry.A.LEFT_CLICK):r.removeInputAction(Ry.A.LEFT_CLICK)}),this._removePostRenderEvent=e.postRender.addEventListener(function(){i._update()})}Object.defineProperties(OF.prototype,{scene:{get:function(){return this._scene}},performanceContainer:{get:function(){return this._performanceContainer}},toggleDropDown:{get:function(){return this._toggleDropDown}},showPrimitiveBoundingSphere:{get:function(){return this._showPrimitiveBoundingSphere}},showPrimitiveReferenceFrame:{get:function(){return this._showPrimitiveReferenceFrame}},doFilterPrimitive:{get:function(){return this._doFilterPrimitive}},incrementDepthFrustum:{get:function(){return this._incrementDepthFrustum}},decrementDepthFrustum:{get:function(){return this._decrementDepthFrustum}},showTileCoordinates:{get:function(){return this._showTileCoordinates}},showTileBoundingSphere:{get:function(){return this._showTileBoundingSphere}},doFilterTile:{get:function(){return this._doFilterTile}},toggleGeneral:{get:function(){return this._toggleGeneral}},togglePrimitives:{get:function(){return this._togglePrimitives}},toggleTerrain:{get:function(){return this._toggleTerrain}},pickPrimitive:{get:function(){return this._pickPrimitive}},pickTile:{get:function(){return this._pickTile}},selectParent:{get:function(){const e=this;return(0,eF.A)(function(){e.tile=e.tile.parent})}},selectNW:{get:function(){const e=this;return(0,eF.A)(function(){e.tile=e.tile.northwestChild})}},selectNE:{get:function(){const e=this;return(0,eF.A)(function(){e.tile=e.tile.northeastChild})}},selectSW:{get:function(){const e=this;return(0,eF.A)(function(){e.tile=e.tile.southwestChild})}},selectSE:{get:function(){const e=this;return(0,eF.A)(function(){e.tile=e.tile.southeastChild})}},primitive:{get:function(){return this._primitive},set:function(e){const t=this._primitive;e!==t&&(this.hasPickedPrimitive=!0,(0,N.A)(t)&&(t.debugShowBoundingVolume=!1),this._scene.debugCommandFilter=void 0,(0,N.A)(this._modelMatrixPrimitive)&&(this._scene.primitives.remove(this._modelMatrixPrimitive),this._modelMatrixPrimitive=void 0),this._primitive=e,e.show=!1,setTimeout(function(){e.show=!0},50),this.showPrimitiveBoundingSphere(),this.showPrimitiveReferenceFrame(),this.doFilterPrimitive())}},tile:{get:function(){return this._tile},set:function(e){if((0,N.A)(e)){if(this.hasPickedTile=!0,e!==this._tile){this.tileText=`L: ${e.level} X: ${e.x} Y: ${e.y}`,this.tileText+=`<br>SW corner: ${e.rectangle.west}, ${e.rectangle.south}`,this.tileText+=`<br>NE corner: ${e.rectangle.east}, ${e.rectangle.north}`;const t=e.data;(0,N.A)(t)&&(0,N.A)(t.tileBoundingRegion)?this.tileText+=`<br>Min: ${t.tileBoundingRegion.minimumHeight} Max: ${t.tileBoundingRegion.maximumHeight}`:this.tileText+="<br>(Tile is not loaded)"}this._tile=e,this.showTileBoundingSphere(),this.doFilterTile()}else this.hasPickedTile=!1,this._tile=void 0}}}),OF.prototype._update=function(){this.frustums&&(this.frustumStatisticText=function(e){let t;if((0,N.A)(e)){t="Command Statistics";const i=e.commandsInFrustums;for(const e in i)if(i.hasOwnProperty(e)){let n,r=parseInt(e,10);if(7===r)n="1, 2 and 3";else{const e=[];for(let t=2;t>=0;t--){const i=Math.pow(2,t);r>=i&&(e.push(t+1),r-=i)}n=e.reverse().join(" and ")}t+=`<br>&nbsp;&nbsp;&nbsp;&nbsp;${i[e]} in frustum ${n}`}t+=`<br>Total: ${e.totalCommands}`}return t}(this._scene.debugFrustumStatistics));const e=this._scene.numberOfFrustums;this._numberOfFrustums=e,this.depthFrustum=EF(1,e,this.depthFrustum),this.depthFrustumText=`${this.depthFrustum} of ${e}`,this.performance&&this._performanceDisplay.update(),this.primitiveReferenceFrame&&(this._modelMatrixPrimitive.modelMatrix=this._primitive.modelMatrix),this.shaderCacheText=`Cached shaders: ${this._scene.context.shaderCache.numberOfShaders}`},OF.prototype.isDestroyed=function(){return!1},OF.prototype.destroy=function(){return this._eventHandler.destroy(),this._removePostRenderEvent(),this._frustumsSubscription.dispose(),this._frustumPlanesSubscription.dispose(),this._performanceSubscription.dispose(),this._primitiveBoundingSphereSubscription.dispose(),this._primitiveReferenceFrameSubscription.dispose(),this._filterPrimitiveSubscription.dispose(),this._wireframeSubscription.dispose(),this._depthFrustumSubscription.dispose(),this._suspendUpdatesSubscription.dispose(),this._tileCoordinatesSubscription.dispose(),this._tileBoundingSphereSubscription.dispose(),this._filterTileSubscription.dispose(),this._pickPrimitiveActiveSubscription.dispose(),this._pickTileActiveSubscription.dispose(),(0,V.A)(this)};const RF=OF;function IF(e,t){if(!(0,N.A)(e))throw new U.A("container is required.");if(!(0,N.A)(t))throw new U.A("scene is required.");e=(0,Xd.A)(e);const i=document.createElement("div"),n=new RF(t,i);this._viewModel=n,this._container=e;const r=document.createElement("div");this._element=r;const o=document.createElement("div");o.textContent="Cesium Inspector",o.className="cesium-cesiumInspector-button",o.setAttribute("data-bind","click: toggleDropDown"),r.appendChild(o),r.className="cesium-cesiumInspector",r.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : dropDownVisible, "cesium-cesiumInspector-hidden" : !dropDownVisible }'),e.appendChild(this._element);const s=document.createElement("div");s.className="cesium-cesiumInspector-dropDown",r.appendChild(s);const a=ZL.createSection,l=ZL.createCheckbox,c=a(s,"General","generalVisible","toggleGeneral"),u=l("Show Frustums","frustums"),d=document.createElement("div");d.className="cesium-cesiumInspector-frustumStatistics",d.setAttribute("data-bind","visible: frustums, html: frustumStatisticText"),u.appendChild(d),c.appendChild(u),c.appendChild(l("Show Frustum Planes","frustumPlanes")),c.appendChild(l("Performance Display","performance")),i.className="cesium-cesiumInspector-performanceDisplay",c.appendChild(i);const h=document.createElement("div");h.className="cesium-cesiumInspector-shaderCache",h.setAttribute("data-bind","html: shaderCacheText"),c.appendChild(h);const p=document.createElement("div");c.appendChild(p);const f=document.createElement("span");f.setAttribute("data-bind",'html: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Frustum:"'),p.appendChild(f);const m=document.createElement("span");m.setAttribute("data-bind","text: depthFrustumText"),p.appendChild(m);const g=document.createElement("input");g.type="button",g.value="-",g.className="cesium-cesiumInspector-pickButton",g.setAttribute("data-bind","click: decrementDepthFrustum"),p.appendChild(g);const A=document.createElement("input");A.type="button",A.value="+",A.className="cesium-cesiumInspector-pickButton",A.setAttribute("data-bind","click: incrementDepthFrustum"),p.appendChild(A);const _=a(s,"Primitives","primitivesVisible","togglePrimitives"),y=document.createElement("div");y.className="cesium-cesiumInspector-pickSection",_.appendChild(y);const v=document.createElement("input");v.type="button",v.value="Pick a primitive",v.className="cesium-cesiumInspector-pickButton",v.setAttribute("data-bind",'css: {"cesium-cesiumInspector-pickButtonHighlight" : pickPrimitiveActive}, click: pickPrimitive');let w=document.createElement("div");w.className="cesium-cesiumInspector-center",w.appendChild(v),y.appendChild(w),y.appendChild(l("Show bounding sphere","primitiveBoundingSphere","hasPickedPrimitive")),y.appendChild(l("Show reference frame","primitiveReferenceFrame","hasPickedPrimitive")),this._primitiveOnly=l("Show only selected","filterPrimitive","hasPickedPrimitive"),y.appendChild(this._primitiveOnly);const b=a(s,"Terrain","terrainVisible","toggleTerrain"),x=document.createElement("div");x.className="cesium-cesiumInspector-pickSection",b.appendChild(x);const T=document.createElement("input");T.type="button",T.value="Pick a tile",T.className="cesium-cesiumInspector-pickButton",T.setAttribute("data-bind",'css: {"cesium-cesiumInspector-pickButtonHighlight" : pickTileActive}, click: pickTile'),w=document.createElement("div"),w.appendChild(T),w.className="cesium-cesiumInspector-center",x.appendChild(w);const S=document.createElement("div");x.appendChild(S);const C=document.createElement("input");C.type="button",C.value="Parent",C.className="cesium-cesiumInspector-pickButton",C.setAttribute("data-bind","click: selectParent");const M=document.createElement("input");M.type="button",M.value="NW",M.className="cesium-cesiumInspector-pickButton",M.setAttribute("data-bind","click: selectNW");const E=document.createElement("input");E.type="button",E.value="NE",E.className="cesium-cesiumInspector-pickButton",E.setAttribute("data-bind","click: selectNE");const P=document.createElement("input");P.type="button",P.value="SW",P.className="cesium-cesiumInspector-pickButton",P.setAttribute("data-bind","click: selectSW");const k=document.createElement("input");k.type="button",k.value="SE",k.className="cesium-cesiumInspector-pickButton",k.setAttribute("data-bind","click: selectSE");const O=document.createElement("div");O.className="cesium-cesiumInspector-tileText",S.className="cesium-cesiumInspector-frustumStatistics",S.appendChild(O),S.setAttribute("data-bind","visible: hasPickedTile"),O.setAttribute("data-bind","html: tileText");const R=document.createElement("div");R.className="cesium-cesiumInspector-relativeText",R.textContent="Select relative:",S.appendChild(R);const I=document.createElement("table"),D=document.createElement("tr"),B=document.createElement("tr"),L=document.createElement("td");L.appendChild(C);const F=document.createElement("td");F.appendChild(M);const V=document.createElement("td");V.appendChild(E),D.appendChild(L),D.appendChild(F),D.appendChild(V);const z=document.createElement("td"),G=document.createElement("td");G.appendChild(P);const K=document.createElement("td");K.appendChild(k),B.appendChild(z),B.appendChild(G),B.appendChild(K),I.appendChild(D),I.appendChild(B),S.appendChild(I),x.appendChild(l("Show bounding volume","tileBoundingSphere","hasPickedTile")),x.appendChild(l("Show only selected","filterTile","hasPickedTile")),b.appendChild(l("Wireframe","wireframe")),b.appendChild(l("Suspend LOD update","suspendUpdates")),b.appendChild(l("Show tile coordinates","tileCoordinates")),cF.A.applyBindings(n,this._element)}Object.defineProperties(IF.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),IF.prototype.isDestroyed=function(){return!1},IF.prototype.destroy=function(){return cF.A.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),(0,V.A)(this)};const DF=IF;var BF=i(217263),LF=i(863529);function FF(e,t){t.currentTarget.parentElement.parentElement.querySelector(`#${e.name}-expander`).classList.toggle("active"),t.currentTarget.textContent="+"===t.currentTarget.textContent?"-":"+"}function NF(e,t){cF.A.track(e);for(let i=0;i<e.sublayers.length;i++)NF(e.sublayers[i],t)}function VF(e){return"FullModel"===e.modelName}function UF(e){return"Overview"===e.modelName}function zF(e){return UF(e)||VF(e)}function GF(e,t){if(zF(e)){e.visibility=!1;for(let t=0;t<e.sublayers.length;t++)e.sublayers[t].visibility=!0;const i={name:e.name,modelName:e.modelName,disable:cF.A.observable(!1),index:t.sublayers.length};return t.topLayers.push(i),t.sublayers.push(e),i}}const KF=function(e){const t=this;this.levels=[],this.viewModel={sublayers:[],levels:this.levels,currentLevel:cF.A.observable(),selectedLevel:"All",topLayers:[{name:"Select a layer to explore...",disable:cF.A.observable(!0),index:-1}],currentLayer:cF.A.observable(),expandClickHandler:FF,setOptionDisable:function(e,t){cF.A.applyBindingsToNode(e,{disable:t.disable},t)},defaultLayer:void 0},this.viewModel.currentLayer.subscribe(function(e){!function(e,t){if(zF(e)){t.sublayers.forEach(e=>e.visibility=!1),t.sublayers[e.index].visibility=!0;const i=document.getElementById("bsl-wrapper");VF(e)?(t.currentLevel=t.selectedLevel,i.style.display="block"):(t.selectedLevel=t.currentLevel,t.currentLevel="All",i.style.display="none")}}(e,t.viewModel)});const i=e.sublayers;for(let e=0;e<i.length;e++){NF(i[e],this.viewModel);const t=GF(i[e],this.viewModel);(0,N.A)(t)&&(UF(t)||!(0,N.A)(this.viewModel.defaultLayer)&&VF(t))&&(this.viewModel.defaultLayer=t)}if(1===this.viewModel.topLayers.length&&i.length>0){e.show=!1;const t={name:"Full Model",modelName:"FullModel",visibility:e.show,sublayers:e.sublayers};this.viewModel.defaultLayer=GF(t,this.viewModel),this.viewModel.currentLayer.subscribe(function(t){e.show=VF(t)})}else 1===this.viewModel.topLayers.length&&(this.viewModel.topLayers[0].name="Building layers not found");return async function(e,t){try{const i=e.getAttributeNames();for(let n=0;n<i.length;n++)if("BldgLevel"===i[n]){const r=e.getAttributeValues(i[n]);for(let e=0;e<r.length;e++)t.push(r[e])}t.sort((e,t)=>e-t),t.unshift("All")}catch(e){console.log(`There was an error getting attributes: ${e}`)}}(e,this.levels),this.viewModel.currentLevel.subscribe(function(t){"All"!==t?e.filterByAttributes([{name:"BldgLevel",values:[t]}]):e.filterByAttributes()}),this.viewModel},qF=function(e,t){const i=document.getElementById(e);B.A.defined("container",i),B.A.defined("i3sProvider",t);const n=document.createElement("div");n.classList.add("cesium-viewer-i3s-explorer"),n.innerHTML='\n        <h3>Building explorer</h3>\n        <select\n          data-bind="options: topLayers, optionsText: \'name\', optionsAfterRender: setOptionDisable, value: currentLayer"\n        ></select>\n        <div id="bsl-wrapper">\n          <h3>Select Level</h3>\n          <select data-bind="options: levels, value: currentLevel"></select>\n          <h3>Disciplines & Categories</h3>\n          <ul class="layersList" data-bind="foreach: sublayers">\n            <ul class="layersList" data-bind="foreach: sublayers.sort(function (l, r) { return l.name.localeCompare(r.name) })">\n              <li>\n                <div class="li-wrapper">\n                  <span\n                    class="expandItem"\n                    data-bind="click: $root.expandClickHandler"\n                    >+</span\n                  >\n                  <input\n                    type="checkbox"\n                    data-bind="checked: visibility, valueUpdate: \'input\', attr: { id: name}"\n                  />\n                  <label data-bind="attr: { for: name}">\n                    <span data-bind="text: name"></span>\n                  </label>\n                </div>\n                <ul class="nested" data-bind="attr: { id: name + \'-expander\'}">\n                  <li data-bind="foreach: sublayers.sort(function (l, r) { return l.name.localeCompare(r.name) })">\n                    <div class="li-wrapper">\n                      <input\n                        type="checkbox"\n                        data-bind="checked: visibility, valueUpdate: \'input\', attr: { id: name}"\n                      />\n                      <label data-bind="attr: { for: name}">\n                        <span data-bind="text: name"></span>\n                      </label>\n                    </div>\n                  </li>\n                </ul>\n              </li>\n            </ul>\n          </ul>\n        </div>',i.appendChild(n);const r=new KF(t);cF.A.track(r),cF.A.applyBindings(r,i),(0,N.A)(r.defaultLayer)&&(r.currentLayer=r.defaultLayer)};var HF=i(221899),WF=i(720749),jF=i(506527),$F=i(504377),XF=i(72211),YF=i(522437);function ZF(e){if(!(0,N.A)(e)||!(0,N.A)(e.scene))throw new U.A("options.scene is required.");this._scene=e.scene,this.lowFrameRateMessage=e.lowFrameRateMessage??"This application appears to be performing poorly on your system.  Please try using a different web browser or updating your video drivers.",this.lowFrameRateMessageDismissed=!1,this.showingLowFrameRateMessage=!1,cF.A.track(this,["lowFrameRateMessage","lowFrameRateMessageDismissed","showingLowFrameRateMessage"]);const t=this;this._dismissMessage=(0,eF.A)(function(){t.showingLowFrameRateMessage=!1,t.lowFrameRateMessageDismissed=!0});const i=gT.fromScene(e.scene);this._unsubscribeLowFrameRate=i.lowFrameRate.addEventListener(function(){t.lowFrameRateMessageDismissed||(t.showingLowFrameRateMessage=!0)}),this._unsubscribeNominalFrameRate=i.nominalFrameRate.addEventListener(function(){t.showingLowFrameRateMessage=!1})}Object.defineProperties(ZF.prototype,{scene:{get:function(){return this._scene}},dismissMessage:{get:function(){return this._dismissMessage}}}),ZF.prototype.destroy=function(){return this._unsubscribeLowFrameRate(),this._unsubscribeNominalFrameRate(),(0,V.A)(this)};const JF=ZF;function QF(e){if(!(0,N.A)(e)||!(0,N.A)(e.container))throw new U.A("options.container is required.");if(!(0,N.A)(e.scene))throw new U.A("options.scene is required.");const t=(0,Xd.A)(e.container),i=new JF(e),n=document.createElement("div");n.className="cesium-performance-watchdog-message-area",n.setAttribute("data-bind","visible: showingLowFrameRateMessage");const r=document.createElement("button");r.setAttribute("type","button"),r.className="cesium-performance-watchdog-message-dismiss",r.innerHTML="&times;",r.setAttribute("data-bind","click: dismissMessage"),n.appendChild(r);const o=document.createElement("div");o.className="cesium-performance-watchdog-message",o.setAttribute("data-bind","html: lowFrameRateMessage"),n.appendChild(o),t.appendChild(n),cF.A.applyBindings(i,n),this._container=t,this._viewModel=i,this._element=n}Object.defineProperties(QF.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),QF.prototype.isDestroyed=function(){return!1},QF.prototype.destroy=function(){return this._viewModel.destroy(),cF.A.cleanNode(this._element),this._container.removeChild(this._element),(0,V.A)(this)};const eN=QF;var tN=i(585820),iN=i(956009),nN=i(288823),rN=i(828033),oN=i(973292),sN=i(595394),aN=i(544835),lN=i(273578),cN=i(249944),uN=i(674221),dN=i(316375);function hN(e){const t=e.split("\n");let i;for(i=0;i<t.length&&!t[i].match(/\S/);i++);if(i===t.length)return"";let n="";const r=/^\s*/,o=t[i].match(r)[0].length;for(let e=i;e<t.length;e++){let i=t[e];i.match(r)[0].length>=o&&(i=i.slice(o)),n+=`${i}\n`}return n}function pN(e){B.A.typeOf.object("scene",e),this._scene=e,this._voxelPrimitive=void 0,this._customShaderCompilationRemoveCallback=void 0,this._definedProperties=[],this._getPrimitiveFunctions=[],this._modelMatrixReady=!1;const t=this;function i(i){const{name:n,initialValue:r}=i;t._definedProperties.push(n);let o=i.setPrimitiveFunction;!0===o&&(o=function(e){t._voxelPrimitive[n]=e});let s=i.getPrimitiveFunction;!0===s&&(s=function(){t[n]=t._voxelPrimitive[n]}),(0,N.A)(s)&&t._getPrimitiveFunctions.push(s);const a=cF.A.observable();return cF.A.defineProperty(t,n,{get:function(){return a()},set:function(i){"number"==typeof r&&"string"==typeof i&&(i=Number(i),isNaN(i)&&(i=r)),"boolean"==typeof r&&"number"==typeof i&&(i=1===i),a(i),(0,N.A)(o)&&(0,N.A)(t._voxelPrimitive)&&(o(i),e.requestRender())}}),t[n]=r,a}function n(e,i){return function(n){const r=t._voxelPrimitive[e].clone();r[i]=n,t._voxelPrimitive[e]=r}}i({name:"inspectorVisible",initialValue:!0}),i({name:"displayVisible",initialValue:!1}),i({name:"transformVisible",initialValue:!1}),i({name:"boundsVisible",initialValue:!1}),i({name:"clippingVisible",initialValue:!1}),i({name:"shaderVisible",initialValue:!1}),i({name:"shaderString",initialValue:"",getPrimitiveFunction:function(){const e=t._voxelPrimitive.customShader.fragmentShaderText;t.shaderString=hN(e)}}),i({name:"shaderCompilationMessage",initialValue:""}),i({name:"shaderCompilationSuccess",initialValue:!0}),i({name:"depthTest",initialValue:!1,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"show",initialValue:!0,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"disableUpdate",initialValue:!1,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"debugDraw",initialValue:!1,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"jitter",initialValue:!0,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"nearestSampling",initialValue:!0,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"screenSpaceError",initialValue:4,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"stepSize",initialValue:1,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"shapeIsBox",getPrimitiveFunction:function(){const e=t._voxelPrimitive.shape;t.shapeIsBox=e===Tb.A.BOX}}),i({name:"shapeIsEllipsoid",getPrimitiveFunction:function(){const e=t._voxelPrimitive.shape;t.shapeIsEllipsoid=e===Tb.A.ELLIPSOID}}),i({name:"shapeIsCylinder",getPrimitiveFunction:function(){const e=t._voxelPrimitive.shape;t.shapeIsCylinder=e===Tb.A.CYLINDER}}),i({name:"clippingBoxMaxXMin",initialValue:0,getPrimitiveFunction:function(){t.clippingBoxMaxXMin=t._voxelPrimitive.minBounds.x}}),i({name:"clippingBoxMaxXMax",initialValue:1,getPrimitiveFunction:function(){t.clippingBoxMaxXMax=t._voxelPrimitive.maxBounds.x}}),i({name:"clippingBoxMaxX",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","x"),getPrimitiveFunction:function(){t.clippingBoxMaxX=t._voxelPrimitive.maxClippingBounds.x}}),i({name:"clippingBoxMinXMin",initialValue:0,getPrimitiveFunction:function(){t.clippingBoxMinXMin=t._voxelPrimitive.minBounds.x}}),i({name:"clippingBoxMinXMax",initialValue:1,getPrimitiveFunction:function(){t.clippingBoxMinXMax=t._voxelPrimitive.maxBounds.x}}),i({name:"clippingBoxMinX",initialValue:0,setPrimitiveFunction:n("minClippingBounds","x"),getPrimitiveFunction:function(){t.clippingBoxMinX=t._voxelPrimitive.minClippingBounds.x}}),i({name:"clippingBoxMaxYMin",initialValue:0,getPrimitiveFunction:function(){t.clippingBoxMaxYMin=t._voxelPrimitive.minBounds.y}}),i({name:"clippingBoxMaxYMax",initialValue:1,getPrimitiveFunction:function(){t.clippingBoxMaxYMax=t._voxelPrimitive.maxBounds.y}}),i({name:"clippingBoxMaxY",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","y"),getPrimitiveFunction:function(){t.clippingBoxMaxY=t._voxelPrimitive.maxClippingBounds.y}}),i({name:"clippingBoxMinYMin",initialValue:0,getPrimitiveFunction:function(){t.clippingBoxMinYMin=t._voxelPrimitive.minBounds.y}}),i({name:"clippingBoxMinYMax",initialValue:1,getPrimitiveFunction:function(){t.clippingBoxMinYMax=t._voxelPrimitive.maxBounds.y}}),i({name:"clippingBoxMinY",initialValue:0,setPrimitiveFunction:n("minClippingBounds","y"),getPrimitiveFunction:function(){t.clippingBoxMinY=t._voxelPrimitive.minClippingBounds.y}}),i({name:"clippingBoxMaxZMin",initialValue:0,getPrimitiveFunction:function(){t.clippingBoxMaxZMin=t._voxelPrimitive.minBounds.z}}),i({name:"clippingBoxMaxZMax",initialValue:1,getPrimitiveFunction:function(){t.clippingBoxMaxZMax=t._voxelPrimitive.maxBounds.z}}),i({name:"clippingBoxMaxZ",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","z"),getPrimitiveFunction:function(){t.clippingBoxMaxZ=t._voxelPrimitive.maxClippingBounds.z}}),i({name:"clippingBoxMinZMin",initialValue:0,getPrimitiveFunction:function(){t.clippingBoxMinZMin=t._voxelPrimitive.minBounds.z}}),i({name:"clippingBoxMinZMax",initialValue:1,getPrimitiveFunction:function(){t.clippingBoxMinZMax=t._voxelPrimitive.maxBounds.z}}),i({name:"clippingBoxMinZ",initialValue:0,setPrimitiveFunction:n("minClippingBounds","z"),getPrimitiveFunction:function(){t.clippingBoxMinZ=t._voxelPrimitive.minClippingBounds.z}}),i({name:"clippingEllipsoidMaxLongitudeMin",initialValue:-Me.A.PI,getPrimitiveFunction:function(){t.clippingEllipsoidMaxLongitudeMin=t._voxelPrimitive.minBounds.x}}),i({name:"clippingEllipsoidMaxLongitudeMax",initialValue:Me.A.PI,getPrimitiveFunction:function(){t.clippingEllipsoidMaxLongitudeMax=t._voxelPrimitive.maxBounds.x}}),i({name:"clippingEllipsoidMaxLongitude",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","x"),getPrimitiveFunction:function(){t.clippingEllipsoidMaxLongitude=t._voxelPrimitive.maxClippingBounds.x}}),i({name:"clippingEllipsoidMinLongitudeMin",initialValue:-Me.A.PI,getPrimitiveFunction:function(){t.clippingEllipsoidMinLongitudeMin=t._voxelPrimitive.minBounds.x}}),i({name:"clippingEllipsoidMinLongitudeMax",initialValue:Me.A.PI,getPrimitiveFunction:function(){t.clippingEllipsoidMinLongitudeMax=t._voxelPrimitive.maxBounds.x}}),i({name:"clippingEllipsoidMinLongitude",initialValue:0,setPrimitiveFunction:n("minClippingBounds","x"),getPrimitiveFunction:function(){t.clippingEllipsoidMinLongitude=t._voxelPrimitive.minClippingBounds.x}}),i({name:"clippingEllipsoidMaxLatitudeMin",initialValue:-Me.A.PI_OVER_TWO,getPrimitiveFunction:function(){t.clippingEllipsoidMaxLatitudeMin=t._voxelPrimitive.minBounds.y}}),i({name:"clippingEllipsoidMaxLatitudeMax",initialValue:Me.A.PI_OVER_TWO,getPrimitiveFunction:function(){t.clippingEllipsoidMaxLatitudeMax=t._voxelPrimitive.maxBounds.y}}),i({name:"clippingEllipsoidMaxLatitude",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","y"),getPrimitiveFunction:function(){t.clippingEllipsoidMaxLatitude=t._voxelPrimitive.maxClippingBounds.y}}),i({name:"clippingEllipsoidMinLatitudeMin",initialValue:-Me.A.PI_OVER_TWO,getPrimitiveFunction:function(){t.clippingEllipsoidMinLatitudeMin=t._voxelPrimitive.minBounds.y}}),i({name:"clippingEllipsoidMinLatitudeMax",initialValue:Me.A.PI_OVER_TWO,getPrimitiveFunction:function(){t.clippingEllipsoidMinLatitudeMax=t._voxelPrimitive.maxBounds.y}}),i({name:"clippingEllipsoidMinLatitude",initialValue:0,setPrimitiveFunction:n("minClippingBounds","y"),getPrimitiveFunction:function(){t.clippingEllipsoidMinLatitude=t._voxelPrimitive.minClippingBounds.y}}),i({name:"clippingEllipsoidMaxHeightMin",initialValue:0,getPrimitiveFunction:function(){t.clippingEllipsoidMaxHeightMin=t._voxelPrimitive.minBounds.z}}),i({name:"clippingEllipsoidMaxHeightMax",initialValue:1e5,getPrimitiveFunction:function(){t.clippingEllipsoidMaxHeightMax=t._voxelPrimitive.maxBounds.z}}),i({name:"clippingEllipsoidMaxHeight",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","z"),getPrimitiveFunction:function(){t.clippingEllipsoidMaxHeight=t._voxelPrimitive.maxClippingBounds.z}}),i({name:"clippingEllipsoidMinHeightMin",initialValue:-1e5,getPrimitiveFunction:function(){t.clippingEllipsoidMinHeightMin=t._voxelPrimitive.minBounds.z}}),i({name:"clippingEllipsoidMinHeightMax",initialValue:0,getPrimitiveFunction:function(){t.clippingEllipsoidMinHeightMax=t._voxelPrimitive.maxBounds.z}}),i({name:"clippingEllipsoidMinHeight",initialValue:0,setPrimitiveFunction:n("minClippingBounds","z"),getPrimitiveFunction:function(){t.clippingEllipsoidMinHeight=t._voxelPrimitive.minClippingBounds.z}}),i({name:"clippingCylinderMaxRadiusMin",initialValue:0,getPrimitiveFunction:function(){t.clippingCylinderMaxRadiusMin=t._voxelPrimitive.minBounds.x}}),i({name:"clippingCylinderMaxRadiusMax",initialValue:1,getPrimitiveFunction:function(){t.clippingCylinderMaxRadiusMax=t._voxelPrimitive.maxBounds.x}}),i({name:"clippingCylinderMaxRadius",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","x"),getPrimitiveFunction:function(){t.clippingCylinderMaxRadius=t._voxelPrimitive.maxClippingBounds.x}}),i({name:"clippingCylinderMinRadiusMin",initialValue:0,getPrimitiveFunction:function(){t.clippingCylinderMinRadiusMin=t._voxelPrimitive.minBounds.x}}),i({name:"clippingCylinderMinRadiusMax",initialValue:1,getPrimitiveFunction:function(){t.clippingCylinderMinRadiusMax=t._voxelPrimitive.maxBounds.x}}),i({name:"clippingCylinderMinRadius",initialValue:0,setPrimitiveFunction:n("minClippingBounds","x"),getPrimitiveFunction:function(){t.clippingCylinderMinRadius=t._voxelPrimitive.minClippingBounds.x}}),i({name:"clippingCylinderMaxAngleMin",initialValue:-Me.A.PI,getPrimitiveFunction:function(){t.clippingCylinderMaxAngleMin=t._voxelPrimitive.minBounds.y}}),i({name:"clippingCylinderMaxAngleMax",initialValue:Me.A.PI,getPrimitiveFunction:function(){t.clippingCylinderMaxAngleMax=t._voxelPrimitive.maxBounds.y}}),i({name:"clippingCylinderMaxAngle",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","y"),getPrimitiveFunction:function(){t.clippingCylinderMaxAngle=t._voxelPrimitive.maxClippingBounds.y}}),i({name:"clippingCylinderMinAngleMin",initialValue:-Me.A.PI}),i({name:"clippingCylinderMinAngleMax",initialValue:Me.A.PI}),i({name:"clippingCylinderMinAngle",initialValue:0,setPrimitiveFunction:n("minClippingBounds","y"),getPrimitiveFunction:function(){t.clippingCylinderMinAngle=t._voxelPrimitive.minClippingBounds.y}}),i({name:"clippingCylinderMaxHeightMin",initialValue:-1,getPrimitiveFunction:function(){t.clippingCylinderMaxHeightMin=t._voxelPrimitive.minBounds.z}}),i({name:"clippingCylinderMaxHeightMax",initialValue:1,getPrimitiveFunction:function(){t.clippingCylinderMaxHeightMax=t._voxelPrimitive.maxBounds.z}}),i({name:"clippingCylinderMaxHeight",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","z"),getPrimitiveFunction:function(){t.clippingCylinderMaxHeight=t._voxelPrimitive.maxClippingBounds.z}}),i({name:"clippingCylinderMinHeightMin",initialValue:-1,getPrimitiveFunction:function(){t.clippingCylinderMinHeightMin=t._voxelPrimitive.minBounds.z}}),i({name:"clippingCylinderMinHeightMax",initialValue:1,getPrimitiveFunction:function(){t.clippingCylinderMinHeightMax=t._voxelPrimitive.maxBounds.z}}),i({name:"clippingCylinderMinHeight",initialValue:0,setPrimitiveFunction:n("minClippingBounds","z"),getPrimitiveFunction:function(){t.clippingCylinderMinHeight=t._voxelPrimitive.minClippingBounds.z}}),i({name:"translationX",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&_N(t)},getPrimitiveFunction:function(){t.translationX=tg.A.getTranslation(t._voxelPrimitive.modelMatrix,new D.A).x}}),i({name:"translationY",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&_N(t)},getPrimitiveFunction:function(){t.translationY=tg.A.getTranslation(t._voxelPrimitive.modelMatrix,new D.A).y}}),i({name:"translationZ",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&_N(t)},getPrimitiveFunction:function(){t.translationZ=tg.A.getTranslation(t._voxelPrimitive.modelMatrix,new D.A).z}}),i({name:"scaleX",initialValue:1,setPrimitiveFunction:function(){t._modelMatrixReady&&_N(t)},getPrimitiveFunction:function(){t.scaleX=tg.A.getScale(t._voxelPrimitive.modelMatrix,new D.A).x}}),i({name:"scaleY",initialValue:1,setPrimitiveFunction:function(){t._modelMatrixReady&&_N(t)},getPrimitiveFunction:function(){t.scaleY=tg.A.getScale(t._voxelPrimitive.modelMatrix,new D.A).y}}),i({name:"scaleZ",initialValue:1,setPrimitiveFunction:function(){t._modelMatrixReady&&_N(t)},getPrimitiveFunction:function(){t.scaleZ=tg.A.getScale(t._voxelPrimitive.modelMatrix,new D.A).z}}),i({name:"angleX",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&_N(t)}}),i({name:"angleY",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&_N(t)}}),i({name:"angleZ",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&_N(t)}})}const fN=new D.A,mN=new D.A,gN=new wa.A,AN=new Ki.A;function _N(e){const t=D.A.fromElements(e.translationX,e.translationY,e.translationZ,fN),i=D.A.fromElements(e.scaleX,e.scaleY,e.scaleZ,mN),n=gN;n.heading=e.angleX,n.pitch=e.angleY,n.roll=e.angleZ;const r=Ki.A.fromHeadingPitchRoll(n,AN),o=Ki.A.multiplyByScale(r,i,r);e._voxelPrimitive.modelMatrix=tg.A.fromRotationTranslation(o,t,e._voxelPrimitive.modelMatrix)}Object.defineProperties(pN.prototype,{scene:{get:function(){return this._scene}},voxelPrimitive:{get:function(){return this._voxelPrimitive},set:function(e){if((0,N.A)(this._customShaderCompilationRemoveCallback)&&this._customShaderCompilationRemoveCallback(),!(0,N.A)(e))return;this._voxelPrimitive=e;const t=this;t._customShaderCompilationRemoveCallback=t._voxelPrimitive.customShaderCompilationEvent.addEventListener(function(e){const i=t._voxelPrimitive.customShader.fragmentShaderText;t.shaderString=hN(i),(0,N.A)(e)?(t.shaderCompilationMessage=e.message,t.shaderCompilationSuccess=!1):(t.shaderCompilationMessage="Shader compiled successfully!",t.shaderCompilationSuccess=!0)}),t._modelMatrixReady=!1;for(let e=0;e<t._getPrimitiveFunctions.length;e++)t._getPrimitiveFunctions[e]();t._modelMatrixReady=!0,_N(t)}}}),pN.prototype.toggleInspector=function(){this.inspectorVisible=!this.inspectorVisible},pN.prototype.toggleDisplay=function(){this.displayVisible=!this.displayVisible},pN.prototype.toggleTransform=function(){this.transformVisible=!this.transformVisible},pN.prototype.toggleBounds=function(){this.boundsVisible=!this.boundsVisible},pN.prototype.toggleClipping=function(){this.clippingVisible=!this.clippingVisible},pN.prototype.toggleShader=function(){this.shaderVisible=!this.shaderVisible},pN.prototype.compileShader=function(){(0,N.A)(this._voxelPrimitive)&&(this._voxelPrimitive.customShader=new VR.A({fragmentShaderText:this.shaderString,uniforms:this._voxelPrimitive.customShader.uniforms}))},pN.prototype.shaderEditorKeyPress=function(e,t){if(9===t.keyCode){t.preventDefault();const e=t.target,i=e.selectionStart,n=e.selectionEnd;let r=n;const o=e.value.slice(i,n).split("\n"),s=o.length;let a;if(t.shiftKey)for(a=0;a<s;++a)" "===o[a][0]&&(" "===o[a][1]?(o[a]=o[a].substr(2),r-=2):(o[a]=o[a].substr(1),r-=1));else for(a=0;a<s;++a)o[a]=`  ${o[a]}`,r+=2;const l=o.join("\n");e.value=e.value.slice(0,i)+l+e.value.slice(n),e.selectionStart=i!==n?i:r,e.selectionEnd=r}else!t.ctrlKey||10!==t.keyCode&&13!==t.keyCode||this.compileShader();return!0},pN.prototype.isDestroyed=function(){return!1},pN.prototype.destroy=function(){const e=this;return this._definedProperties.forEach(function(t){cF.A.getObservable(e,t).dispose()}),(0,V.A)(this)};const yN=pN;function vN(e,t){B.A.defined("container",e),B.A.typeOf.object("scene",t),e=(0,Xd.A)(e);const i=document.createElement("div"),n=new yN(t);this._viewModel=n,this._container=e,this._element=i;const r=document.createElement("div");r.textContent="Voxel Inspector",r.className="cesium-cesiumInspector-button",r.setAttribute("data-bind","click: toggleInspector"),i.appendChild(r),i.className="cesium-cesiumInspector cesium-VoxelInspector",i.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : inspectorVisible, "cesium-cesiumInspector-hidden" : !inspectorVisible}'),e.appendChild(i);const o=document.createElement("div");o.className="cesium-cesiumInspector-dropDown",i.appendChild(o);const{createSection:s,createCheckbox:a,createRangeInput:l,createButton:c}=ZL,u=s(o,"Display","displayVisible","toggleDisplay"),d=s(o,"Transform","transformVisible","toggleTransform"),h=s(o,"Clipping","clippingVisible","toggleClipping"),p=s(o,"Shader","shaderVisible","toggleShader");u.appendChild(a("Depth Test","depthTest")),u.appendChild(a("Show","show")),u.appendChild(a("Disable Update","disableUpdate")),u.appendChild(a("Debug Draw","debugDraw")),u.appendChild(a("Jitter","jitter")),u.appendChild(a("Nearest Sampling","nearestSampling")),u.appendChild(l("Screen Space Error","screenSpaceError",0,128)),u.appendChild(l("Step Size","stepSize",0,2));const f=Me.A.PI;d.appendChild(l("Translation X","translationX",-10,10)),d.appendChild(l("Translation Y","translationY",-10,10)),d.appendChild(l("Translation Z","translationZ",-10,10)),d.appendChild(l("Scale X","scaleX",0,10)),d.appendChild(l("Scale Y","scaleY",0,10)),d.appendChild(l("Scale Z","scaleZ",0,10)),d.appendChild(l("Heading","angleX",-f,+f)),d.appendChild(l("Pitch","angleY",-f,+f)),d.appendChild(l("Roll","angleZ",-f,+f)),wN("Max X","Min X","Max Y","Min Y","Max Z","Min Z","clippingBoxMaxX","clippingBoxMinX","clippingBoxMaxY","clippingBoxMinY","clippingBoxMaxZ","clippingBoxMinZ","shapeIsBox",h),wN("Max Longitude","Min Longitude","Max Latitude","Min Latitude","Max Height","Min Height","clippingEllipsoidMaxLongitude","clippingEllipsoidMinLongitude","clippingEllipsoidMaxLatitude","clippingEllipsoidMinLatitude","clippingEllipsoidMaxHeight","clippingEllipsoidMinHeight","shapeIsEllipsoid",h),wN("Max Radius","Min Radius","Max Angle","Min Angle","Max Height","Min Height","clippingCylinderMaxRadius","clippingCylinderMinRadius","clippingCylinderMaxAngle","clippingCylinderMinAngle","clippingCylinderMaxHeight","clippingCylinderMinHeight","shapeIsCylinder",h);const m=document.createElement("div");p.appendChild(m);const g=document.createElement("textarea");g.setAttribute("data-bind","textInput: shaderString, event: { keydown: shaderEditorKeyPress }"),m.className="cesium-cesiumInspector-styleEditor",m.appendChild(g);const A=c("Compile (Ctrl+Enter)","compileShader");m.appendChild(A);const _=document.createElement("label");_.style.display="block",_.setAttribute("data-bind","text: shaderCompilationMessage, style: {color: shaderCompilationSuccess ? 'green' : 'red'}"),m.appendChild(_),cF.A.applyBindings(n,i)}function wN(e,t,i,n,r,o,s,a,l,c,u,d,h,p){const f=ZL.createRangeInputWithDynamicMinMax,m=p.appendChild(document.createElement("div"));m.setAttribute("data-bind",`if: ${h}`),m.appendChild(f(e,s)),m.appendChild(f(t,a)),m.appendChild(f(i,l)),m.appendChild(f(n,c)),m.appendChild(f(r,u)),m.appendChild(f(o,d))}Object.defineProperties(vN.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),vN.prototype.isDestroyed=function(){return!1},vN.prototype.destroy=function(){return cF.A.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),(0,V.A)(this)};const bN=vN;var xN=i(123905);const TN=function(e){B.A.typeOf.object("viewer",e);const t=document.createElement("div");t.className="cesium-viewer-cesium3DTilesInspectorContainer",e.container.appendChild(t);const i=new xF(t,e.scene);Object.defineProperties(e,{cesium3DTilesInspector:{get:function(){return i}}})},SN=function(e){if(!(0,N.A)(e))throw new U.A("viewer is required.");const t=document.createElement("div");t.className="cesium-viewer-cesiumInspectorContainer",e.container.appendChild(t);const i=new DF(t,e.scene);Object.defineProperties(e,{cesiumInspector:{get:function(){return i}}})};function CN(e){e.stopPropagation(),e.preventDefault()}function MN(e,t){const i=e;(0,N.A)(i)&&(i.removeEventListener("drop",t,!1),i.removeEventListener("dragenter",CN,!1),i.removeEventListener("dragover",CN,!1),i.removeEventListener("dragexit",CN,!1))}function EN(e,t){e.addEventListener("drop",t,!1),e.addEventListener("dragenter",CN,!1),e.addEventListener("dragover",CN,!1),e.addEventListener("dragexit",CN,!1)}function PN(e,t,i,n){const r=e.scene;return function(o){const s=t.name;try{let a;if(/\.czml$/i.test(s))a=Xn.load(JSON.parse(o.target.result),{sourceUri:s});else if(/\.geojson$/i.test(s)||/\.json$/i.test(s)||/\.topojson$/i.test(s))a=nr.A.load(JSON.parse(o.target.result),{sourceUri:s,clampToGround:n});else if(/\.(kml|kmz)$/i.test(s))a=Sp.load(t,{sourceUri:s,proxy:i,camera:r.camera,canvas:r.canvas,clampToGround:n,screenOverlayContainer:e.container});else{if(!/\.gpx$/i.test(s))return void e.dropError.raiseEvent(e,s,`Unrecognized file: ${s}`);a=da.load(t,{sourceUri:s,proxy:i})}(0,N.A)(a)&&e.dataSources.add(a).then(function(t){e.flyToOnDrop&&e.flyTo(t)}).catch(function(t){e.dropError.raiseEvent(e,s,t)})}catch(t){e.dropError.raiseEvent(e,s,t)}}}function kN(e,t){return function(i){e.dropError.raiseEvent(e,t.name,i.target.error)}}const ON=function(e,t){if(!(0,N.A)(e))throw new U.A("viewer is required.");if(e.hasOwnProperty("dropTarget"))throw new U.A("dropTarget is already defined by another mixin.");if(e.hasOwnProperty("dropEnabled"))throw new U.A("dropEnabled is already defined by another mixin.");if(e.hasOwnProperty("dropError"))throw new U.A("dropError is already defined by another mixin.");if(e.hasOwnProperty("clearOnDrop"))throw new U.A("clearOnDrop is already defined by another mixin.");if(e.hasOwnProperty("flyToOnDrop"))throw new U.A("flyToOnDrop is already defined by another mixin.");t=t??F.A.EMPTY_OBJECT;let i=!0,n=t.flyToOnDrop??!0;const r=new ge.A;let o=t.clearOnDrop??!0,s=t.dropTarget??e.container,a=t.clampToGround??!0,l=t.proxy;function c(t){CN(t),o&&(e.entities.removeAll(),e.dataSources.removeAll());const i=t.dataTransfer.files,n=i.length;for(let t=0;t<n;t++){const n=i[t],r=new FileReader;r.onload=PN(e,n,l,a),r.onerror=kN(e,n),r.readAsText(n)}}s=(0,Xd.A)(s),Object.defineProperties(e,{dropTarget:{get:function(){return s},set:function(e){if(!(0,N.A)(e))throw new U.A("value is required.");MN(s,c),s=e,EN(s,c)}},dropEnabled:{get:function(){return i},set:function(e){e!==i&&(e?EN(s,c):MN(s,c),i=e)}},dropError:{get:function(){return r}},clearOnDrop:{get:function(){return o},set:function(e){o=e}},flyToOnDrop:{get:function(){return n},set:function(e){n=e}},proxy:{get:function(){return l},set:function(e){l=e}},clampToGround:{get:function(){return a},set:function(e){a=e}}}),EN(s,c),e.destroy=lw(e,e.destroy,function(){e.dropEnabled=!1}),e._handleDrop=c},RN=function(e,t){if(!(0,N.A)(e))throw new U.A("viewer is required.");t=t??F.A.EMPTY_OBJECT;const i=new eN({scene:e.scene,container:e.bottomContainer,lowFrameRateMessage:t.lowFrameRateMessage});Object.defineProperties(e,{performanceWatchdog:{get:function(){return i}}})},IN=function(e){B.A.typeOf.object("viewer",e);const t=document.createElement("div");t.className="cesium-viewer-voxelInspectorContainer",e.container.appendChild(t);const i=new bN(t,e.scene);Object.defineProperties(e,{voxelInspector:{get:function(){return i}}})},DN="1.133.1"}}]);