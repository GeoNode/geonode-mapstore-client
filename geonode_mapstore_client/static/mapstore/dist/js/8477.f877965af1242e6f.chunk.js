"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[8477],{208477:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var r=n(273517),i=n.n(r),o=n(8117),l=n(668414),a=n.n(l),u=n(394506),s=n.n(u),c=n(503618),d=n(383488),p=n.n(d),m=n(917987),f=n(711030),v=n(164045);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g=(0,v.A)(f.A),b=function(e){return e.replace(/\./g,"-")};const h=(0,m.I4)("option",{beginDrag:function(e){return{id:e.id,index:e.index}}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}})((0,m.Tl)("option",{drop:function(e){var t=e.onMoveEnd;(void 0===t?function(){}:t)()},hover:function(e,t){var n=t.getItem(),r=e.id,i=e.index,o=e.onMove,l=void 0===o?function(){}:o,a=document.querySelector("[data-id=item-".concat(b(r),"]"));if(null==a||!a.getBoundingClientRect)return null;var u=n.index,s=i;if(u===s)return null;var c=a.getBoundingClientRect(),d=(c.bottom-c.top)/2,p=t.getClientOffset().y-c.top;return u<s&&p<d||u>s&&p>d||(l(u,s),n.index=s),null}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t,n,l=e.id,a=e.title,u=e.selected,s=e.onSelect,c=e.onRemove,d=e.isDragging,p=e.connectDragPreview,m=e.connectDropTarget,f=e.connectDragSource,v=e.isSortable,h=(0,r.useRef)(),w=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,l,a=[],u=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw i}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=w[0],S=w[1],O=d?0:1,T=v?f(i().createElement("div",{className:"grab-handle",onClick:function(e){return e.stopPropagation()}},i().createElement(o.e6,{glyph:"grab-handle"}))):null,I=i().createElement("li",{"data-id":"item-".concat(b(l)),className:"ms-map-views-item".concat(u?" selected":"").concat(E?" focus":""),style:{opacity:O},onClick:function(){var e;return null==h||null===(e=h.current)||void 0===e?void 0:e.click()},tabIndex:0},T,i().createElement("div",{className:"ms-map-views-item-title"},a),i().createElement("div",{onClick:function(e){return e.stopPropagation()}},i().createElement("button",{ref:h,style:{left:0,visibility:"hidden",position:"absolute",width:0,height:0,overflow:"hidden"},onClick:s,onFocus:function(){return S(!0)},onBlur:function(){return S(!1)}},"select ",a," item"),c&&i().createElement(g,{className:"square-button-md",bsStyle:u?"primary":"default",onClick:c,tooltipId:"mapViews.removeView"},i().createElement(o.e6,{glyph:"trash"}))));return v?p(m(I)):I})),w=function(e){var t=e.views,n=e.selectedId,r=e.onSelect,o=e.onRemove,l=e.onMove,a=e.onMoveEnd,u=e.options,s=e.edit;return i().createElement("div",{className:"ms-map-views-list"},i().createElement("div",{className:"ms-map-views-list-header"},u),i().createElement("div",{className:"ms-map-views-list-body"},i().createElement("ul",null,t.map(function(e,t){return i().createElement(h,{key:e.id,id:e.id,selected:n===e.id,index:t,title:e.title,onSelect:function(){return r(e)},onRemove:s?function(){return o(e)}:void 0,isSortable:!!s,onMove:l,onMoveEnd:a})}))))};var E=["left","active"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(null,arguments)}var O=(0,v.A)(function(e){var t=e.left,n=e.active,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,E);return i().createElement("div",S({},r,{className:"ms-map-view-progress-tick".concat(n?" active":""),style:{left:t}}))});const T=function(e){var t=e.play,n=e.progress,r=e.segments,o=e.totalLength,l=e.onSelect,a=e.currentIndex;return i().createElement("div",{className:"ms-map-view-progress-container".concat(t?" playing":"")},i().createElement("div",{className:"ms-map-view-progress-bar",style:{width:"".concat(n,"%")}}),null==r?void 0:r.map(function(e,t){var n=e.duration,r=e.view;return i().createElement(O,{key:t,tooltip:null==r?void 0:r.title,active:t<=a,tooltipPosition:"bottom",left:"".concat(Math.round(n/o*100),"%"),onClick:function(){return l(r)}})}))};var I=n(267224),V=n(731807),N=n(8571),P=n(275705),C=n(444003),A=["mapType","onSelectView","onUpdateViews","onUpdateResources","onUpdateServices","views","selectedId","defaultTitle","layers","groups","locale","resources","services","selectedService","defaultServices","defaultSelectedService","edit","hide"];function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(null,arguments)}function D(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,l,a=[],u=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw i}}return a}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e,t,n){return(t=function(e){var t=function(e){if("object"!=k(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=(0,v.A)(f.A),F=_(_(_({},C.Av.LEAFLET,(0,r.lazy)(function(){return n.e(9113).then(n.bind(n,301647))})),C.Av.OPENLAYERS,(0,r.lazy)(function(){return n.e(4499).then(n.bind(n,859112))})),C.Av.CESIUM,(0,r.lazy)(function(){return Promise.all([n.e(2129),n.e(5394),n.e(6881),n.e(6714),n.e(1144),n.e(6570),n.e(7378),n.e(296)]).then(n.bind(n,793784))})),B=(0,r.lazy)(function(){return Promise.all([n.e(953),n.e(5096),n.e(56),n.e(6553)]).then(n.bind(n,746553))}),G="UPDATE_VIEWS_STATE",z="UNDO_VIEWS_STATE",H="REDO_VIEWS_STATE",W=_({},G,function(e,t){return M(M({},e),t)}),$=(0,c.Ay)(function(e,t){return(W[t.type]||p())(e,t.payload)},{limit:20,undoType:z,redoType:H,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),Q=function(e){var t;return null!==(t=null==e?void 0:e.reduce(function(e,t){var n;return e+1e3*(null!==(n=null==t?void 0:t.duration)&&void 0!==n?n:V.BU.DURATION)},0))&&void 0!==t?t:0};const Y=function(e){var t,n,l,u,c,d=e.mapType,p=e.onSelectView,m=void 0===p?function(){}:p,f=e.onUpdateViews,v=void 0===f?function(){}:f,y=e.onUpdateResources,g=void 0===y?function(){}:y,b=e.onUpdateServices,h=void 0===b?function(){}:b,E=e.views,S=void 0===E?[]:E,O=e.selectedId,C=e.defaultTitle,k=void 0===C?"Map View":C,R=e.layers,U=e.groups,q=e.locale,_=e.resources,W=void 0===_?[]:_,Y=e.services,J=e.selectedService,K=(e.defaultServices,e.defaultSelectedService),X=e.edit,Z=e.hide,ee=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,A),te=x((0,r.useReducer)($,{}),2),ne=te[0],re=te[1],ie=function(e){return re({type:G,payload:{views:e}})};(0,r.useEffect)(function(){var e;re({type:G,payload:{views:(e={views:S,resources:W}).views,resources:e.resources}})},[]);var oe=x((0,r.useState)(0),2),le=oe[0],ae=oe[1],ue=x((0,r.useState)({}),2),se=ue[0],ce=ue[1];function de(e){var t;e===z&&(t=null==ne?void 0:ne.past[(null==ne?void 0:ne.past.length)-1]),e===H&&(t=null==ne?void 0:ne.future[(null==ne?void 0:ne.future.length)-1]),re({type:e}),v(t.views),g(t.resources),ae(le+1)}var pe=(null==ne?void 0:ne.present)||{},me=pe.views,fe=void 0===me?[]:me,ve=pe.resources,ye=void 0===ve?[]:ve,ge=x((0,r.useState)(""),2),be=ge[0],he=ge[1],we=x((0,r.useState)(!0),2),Ee=we[0],Se=we[1],Oe=x((0,r.useState)(!1),2),Te=Oe[0],Ie=Oe[1],Ve=x((0,r.useState)(!1),2),Ne=Ve[0],Pe=Ve[1],Ce=fe.find(function(e){return e.id===O}),Ae=fe.indexOf(Ce),ke=x((0,r.useState)(!1),2),je=ke[0],De=ke[1],xe=(0,r.useRef)();function Re(e){var t=fe.length>0&&s()(fe.map(function(e){var t,n=new RegExp("".concat(k," \\(([0-9]+)\\)")),r=null===(t=(e.title||"").match(n))||void 0===t?void 0:t[1];return r?parseFloat(r):void 0}).filter(function(e){return void 0!==e})),n=t&&!isNaN(t)?t:0,r=M(M({duration:V.BU.DURATION,flyTo:!0},e||xe.current.getView()),{},{title:"".concat(k," (").concat(n+1,")"),id:a()()}),i=-1===Ae?[].concat(D(fe),[r]):fe.reduce(function(e,t,n){return[].concat(D(e),n===Ae?[t,r]:[t])},[]);ie(i),m(r.id),v(i),Y||0!==fe.length||h(K)}function Ue(e,t){var n;e&&null!=xe&&null!==(n=xe.current)&&void 0!==n&&n.setView&&xe.current.setView(t?e:M(M({},e),{},{flyTo:!1})),m(e.id)}var qe=(0,r.useRef)();qe.current=fe;var Me=(0,r.useCallback)(function(e,t){var n=D(qe.current);n.splice(e,1),n.splice(t,0,qe.current[e]),ie(n)},[]);function _e(e){fe[Ae+e]&&Ue(fe[Ae+e])}var Le=function(e){var t=e.currentIndex,n=e.views,i=e.onInit,o=e.onChangeView,l=x((0,r.useState)(!1),2),a=l[0],u=l[1],s=x((0,r.useState)(0),2),c=s[0],d=s[1],p=Q(n),m=n.map(function(e,t){return{view:e,duration:Q(n.filter(function(e,n){return n<t}))}});return(0,r.useEffect)(function(){var e,n;a||d(Math.round((null!==(e=null==m||null===(n=m[t])||void 0===n?void 0:n.duration)&&void 0!==e?e:0)/p*100))},[t,a]),(0,r.useEffect)(function(){function e(){"visible"!==document.visibilityState&&u(!1)}var r,l=!1;if(a){var s,c=Date.now(),f=-1===t?0:t,v=null==m||null===(s=m[f])||void 0===s?void 0:s.duration,y=c,g=n[f>=n.length?0:f];i(g);var b=function(){if(!l){var e,t;r=requestAnimationFrame(b);var i=Date.now(),a=i-c,u=1e3*(null!==(e=null===(t=g)||void 0===t?void 0:t.duration)&&void 0!==e?e:V.BU.DURATION);if(a>=u){c=Date.now();var s=f>=n.length?0:f,m=s+1>=n.length?0:s+1,h=n[m];o(h),g=h,f=m}var w=i+v-y,E=Math.round(w/p*100);Math.round(a/u*100)%5==0&&d(E),w>=p&&(y=Date.now(),v=0)}};b(f),document.addEventListener("visibilitychange",e)}return function(){l=!0,r&&cancelAnimationFrame(r),a&&document.removeEventListener("visibilitychange",e)}},[a]),{play:a,setPlay:u,navigationProgress:c,viewsTimeSegments:m,viewsTimeTotalLength:p}}({currentIndex:Ae,views:fe,onInit:function(e){Ue(e),he("")},onChangeView:function(e){Ue(e,!0)}}),Fe=Le.play,Be=Le.setPlay,Ge=Le.navigationProgress,ze=Le.viewsTimeSegments,He=Le.viewsTimeTotalLength,We=(0,r.useRef)(!1);(0,r.useEffect)(function(){je&&!We.current&&(We.current=!0,Ce&&setTimeout(function(){xe.current.setView(M(M({},Ce),{},{flyTo:!1}))},500))},[je]);var $e=F[d];return!$e||!X&&0===(null==fe?void 0:fe.length)||Z?null:i().createElement(i().Fragment,null,i().createElement(r.Suspense,{fallback:i().createElement("div",null)},i().createElement($e,j({},ee,{selectedId:O,views:fe,apiRef:function(e){xe.current=e,je||De(!0)},showViewsGeometries:Te,resources:ye,showClipGeometries:Ne}))),X&&0===(null==fe?void 0:fe.length)?i().createElement("div",{className:"ms-map-views"},i().createElement("div",{className:"ms-map-views-wrapper"},i().createElement("div",{className:"ms-map-views-header"},i().createElement("div",{className:"ms-map-views-title"},i().createElement(N.A,{msgId:"mapViews.addInitialView"})),i().createElement(o._O,null,i().createElement(o.e2,null,((null==ne||null===(t=ne.past)||void 0===t?void 0:t.length)||0)>0&&i().createElement(L,{bsStyle:"primary",className:"square-button-md",disabled:0===((null==ne||null===(n=ne.past)||void 0===n?void 0:n.length)||0),onClick:function(){return de(z)},tooltipId:"mapViews.undoChanges",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"undo"})),i().createElement(L,{bsStyle:"primary",className:"square-button-md",onClick:Re.bind(null,void 0),tooltipId:"mapViews.addNewView",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"plus"}))))))):i().createElement("div",{className:"ms-map-views",onClick:function(e){return e.stopPropagation()}},i().createElement("div",{className:"ms-map-views-wrapper"},i().createElement(T,{play:Fe,currentIndex:Ae,progress:Ge,segments:ze,totalLength:He,onSelect:function(e){Fe&&Be(!1),Ue(e)}}),i().createElement("div",{className:"ms-map-views-header"},null!=Ce&&Ce.description&&!be?i().createElement(L,{className:"square-button-md no-border",style:{borderRadius:"50%",marginRight:4},onClick:function(){return Se(!Ee)},tooltipId:Ee?"mapViews.hideDescription":"mapViews.showDescription",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:Ee?"chevron-down":"chevron-right"})):null,i().createElement("div",{className:"ms-map-views-title"},"settings"===be?i().createElement(I.A,{key:"".concat(null==Ce?void 0:Ce.id,"-").concat(le),value:null==Ce?void 0:Ce.title,onChange:function(e){return t={title:e},n=fe.map(function(e){return e.id===Ce.id?M(M({},e),t):e}),ie(n),void v(n);var t,n}}):null==Ce?void 0:Ce.title),i().createElement(o._O,null,!Fe&&i().createElement(o.e2,null,i().createElement(L,{bsStyle:"list"===be?"success":"primary",className:"square-button-md",active:"list"===be,onClick:function(){return he("list"!==be?"list":"")},tooltipId:"list"===be?"mapViews.hideViewsList":"mapViews.showViewsList",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"list"}))),!Fe&&X&&i().createElement(o.e2,null,i().createElement(L,{bsStyle:"primary",className:"square-button-md",disabled:"settings"===be,onClick:Re.bind(null,void 0),tooltipId:Ce?"mapViews.addNewViewBelowSelected":"mapViews.addNewView",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"plus"})),i().createElement(L,{bsStyle:"primary",className:"square-button-md",disabled:!Ce||"settings"===be,onClick:Re.bind(null,Ce),tooltipId:"mapViews.copyCurrentView",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"duplicate"})),i().createElement(L,{bsStyle:"settings"===be?"success":"primary",className:"square-button-md",active:"settings"===be,disabled:!Ce,onClick:function(){return he("settings"!==be?"settings":"")},tooltipId:"settings"===be?"mapViews.stopEdit":"mapViews.edit",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"pencil"})),i().createElement(L,{bsStyle:"primary",className:"square-button-md",disabled:0===((null==ne||null===(l=ne.past)||void 0===l?void 0:l.length)||0),onClick:function(){return de(z)},tooltipId:"mapViews.undoChanges",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"undo"})),i().createElement(L,{bsStyle:"primary",className:"square-button-md",disabled:0===((null==ne||null===(u=ne.future)||void 0===u?void 0:u.length)||0),onClick:function(){return de(H)},tooltipId:"mapViews.redoChanges",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"redo"}))),i().createElement(o.e2,null,i().createElement(L,{bsStyle:"primary",className:"square-button-md",onClick:function(){return Ue(fe[0])},disabled:0===Ae||Fe,tooltipId:"mapViews.gotToFirstView",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"fast-backward"})),i().createElement(L,{bsStyle:"primary",className:"square-button-md",onClick:function(){return _e(-1)},disabled:!fe[Ae-1]||Fe,tooltipId:"mapViews.gotToPreviousView",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"step-backward"})),i().createElement(L,{bsStyle:"primary",className:"square-button-md",active:!!Fe,disabled:1===(null==fe?void 0:fe.length),onClick:function(){return Be(!Fe)},tooltipId:Fe?"mapViews.pause":"mapViews.play",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:Fe?"pause":"play"})),i().createElement(L,{bsStyle:"primary",className:"square-button-md",onClick:function(){return _e(1)},disabled:!fe[Ae+1]||Fe,tooltipId:"mapViews.gotToNextView",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"step-forward"})),i().createElement(L,{bsStyle:"primary",className:"square-button-md",onClick:function(){return Ue(fe[(null==fe?void 0:fe.length)-1])},disabled:Ae===(null==fe?void 0:fe.length)-1||Fe,tooltipId:"mapViews.gotToLastView",tooltipPosition:"bottom"},i().createElement(o.e6,{glyph:"fast-forward"}))))),i().createElement("div",{className:"ms-map-views-body"},"list"===be&&i().createElement(w,{views:fe,edit:X,selectedId:null==Ce?void 0:Ce.id,onSelect:Ue,onMove:Me,onMoveEnd:function(){v(fe)},onRemove:function(e){var t=fe.filter(function(t){return t.id!==e.id});ie(t),v(t)},options:i().createElement(i().Fragment,null,(null===(c=xe.current)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.showClipGeometriesEnabled)&&i().createElement(o.Sc,{checked:Te,onChange:function(){return Ie(!Te)}},i().createElement(N.A,{msgId:"mapViews.showViewsGeometries"})))}),"settings"===be&&Ce&&i().createElement(r.Suspense,{fallback:i().createElement("div",{style:{display:"flex",justifyContent:"center",padding:8,width:"100%"}},i().createElement(P.A,{size:30}))},i().createElement(B,{key:"".concat(Ce.id,"-").concat(le),expandedSections:se,onExpandSection:function(e){return ce(function(t){return M(M({},t),e)})},view:Ce,api:xe.current,onChange:function(e){var t=fe.map(function(t){return t.id===e.id?e:t});ie(t),v(t)},onCaptureView:function(e){var t=fe.map(function(t){return t.id===e.id?M(M({},e),xe.current.getView()):t});ie(t),v(t)},layers:R,groups:U,locale:q,services:Y,selectedService:J,resources:ye,onUpdateResource:function(e,t){var n=ye.find(function(t){return t.id===e})?ye.map(function(n){return n.id===e?{id:e,data:t}:n}):[].concat(D(ye),[{id:e,data:t}]);!function(e){re({type:G,payload:{resources:e}})}(n),g(n)},showClipGeometries:Ne,onShowClipGeometries:Pe})))),!be&&Ee&&(null==Ce?void 0:Ce.description)&&i().createElement("div",{className:"ms-map-views-description"},i().createElement("div",{dangerouslySetInnerHTML:{__html:Ce.description}}))))}},503618:(e,t)=>{var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.Ay=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=t.debug;var a={initialState:t.initialState,initTypes:p(t.initTypes,["@@redux/INIT","@@INIT"]),limit:t.limit,filter:t.filter||function(){return!0},undoType:t.undoType||l.UNDO,redoType:t.redoType||l.REDO};return a.history=t.initialHistory||d(a.initialState),0===a.initTypes.length&&console.warn("redux-undo: supply at least one action type in initTypes to ensure initial state"),function(t,l){!function(e,t){if(r){var n=["action",e.type];console.group?(n.unshift("%credux-undo","font-style: italic"),console.groupCollapsed.apply(console,n),console.log("received",{state:t,action:e})):i.apply(void 0,n)}}(l,t);var p=void 0;switch(l.type){case a.undoType:return p=function(e){i("undo",{history:e});var t=e.past,n=e.present,r=e.future;return t.length<=0?e:{past:t.slice(0,t.length-1),present:t[t.length-1],future:[n].concat(r)}}(t),i("after undo",p),o(),p?c(t,p):t;case a.redoType:return p=function(e){i("redo",{history:e});var t=e.past,n=e.present,r=e.future;return r.length<=0?e:{future:r.slice(1,r.length),present:r[0],past:[].concat(t,[n])}}(t),i("after redo",p),o(),p?c(t,p):t;default:if(p=e(t&&t.present,l),a.initTypes.some(function(e){return e===l.type}))return i("reset history due to init action"),o(),s(n({},t,d(p)));if(a.filter&&"function"==typeof a.filter&&!a.filter(l,p,t&&t.present))return i("filter prevented action, not storing it"),o(),s(n({},t,{present:p}));var m=function(e,t,n){i("insert",{state:t,history:e,free:n-u(e)});var r=e.past,o=e.present,l=n&&u(e)>=n;return void 0===o?{past:[],present:t,future:[]}:{past:[].concat(r.slice(l?1:0),[o]),present:t,future:[]}}(t&&void 0!==t.present?t:a.history,p,a.limit);return i("after insert",{history:m,free:a.limit-u(m)}),o(),s(n({},t,m))}}};var r=void 0;function i(){if(r){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.group||t.unshift("%credux-undo","font-style: italic"),console.log.apply(console,t)}}function o(){if(r)return console.groupEnd&&console.groupEnd()}var l={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO"};t.Q3=l;var a={undo:function(){return{type:l.UNDO}},redo:function(){return{type:l.REDO}}};function u(e){var t=e.past,n=e.future;return t.length+1+n.length}function s(e){return n({},e,{history:e})}function c(e,t){return s(n({},e,t))}function d(e){return{past:[],present:e,future:[]}}function p(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Array.isArray(e)?e:"string"==typeof e?[e]:t}t.IE=a}}]);