(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[82044,8265],{116745:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var o,r=n(273517),i=n(151230);const p=function(e){var t=e.map,n=e.onBoxEnd,p=e.status;return(0,r.useEffect)((function(){"start"===p?(o=new i.A({condition:function(e){return e.originalEvent.altKey}}),t.addInteraction(o)):"end"===p&&t.removeInteraction(o)}),[p]),(0,r.useEffect)((function(){o&&o.on("boxend",(function(e){n({boxExtent:o.getGeometry().getExtent(),modifiers:{ctrl:e.mapBrowserEvent.originalEvent.ctrlKey,metaKey:e.mapBrowserEvent.originalEvent.metaKey}})}))}),[p]),null}},194166:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var o=n(273517),r=n.n(o),i=n(310340),p=n.n(i),u=n(605556),a=n.n(u),c=n(211795),s=n(185015),l=n.n(s),f=n(315211),d=n(520943);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,O(o.key),o)}}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function h(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}var E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return h(e=function(e,t,n){return t=P(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,n||[],P(e).constructor):t.apply(e,n))}(this,t,[].concat(o)),"onPopupClose",(function(t){e.props.onPopupClose(t)})),h(e,"renderPopups",(function(){return e.preparePopups().map((function(t){var n,o=t.popup,i=t.id,u=t.component,a=t.content,c=t.props,s=t.containerStyle,v=o.getElement(),m=l()(u)&&d.default[u]||u;return m?n=r().isValidElement(m)&&m||r().createElement(m,c):a&&(n=f.AH(a)?r().createElement("div",{dangerouslySetInnerHTML:{__html:a}}):a),v&&p().createPortal(r().createElement("div",{className:"map-popup-ol",key:i,onMouseUp:e.convertToClick},r().createElement("div",{className:"ol-popup-content-wrapper"},r().createElement("div",{className:"ol-popup-content",style:s},n)),r().createElement("div",{className:"ol-popup-closer",onClick:function(){return e.onPopupClose(i)}},"x")),v)}))})),h(e,"update",(function(){(e._popups||[]).map((function(e){var t=e.popup;t.setElement(t.getElement())}))})),h(e,"convertToClick",(function(e){var t=new MouseEvent("click",{bubbles:!0});t.stopPropagation=function(){},e.target.dispatchEvent(t)})),h(e,"preparePopups",(function(){var t=e.props,n=t.popups,o=void 0===n?[]:n,r=t.map,i=r.getSize();return(e._popups||[]).forEach((function(e){var t=e.popup,n=e.observer;n&&n.disconnect(),t&&r.removeOverlay(t)})),e._popups=o.map((function(e){var t=Math.round(.9*i[0])-40,n=Math.round(.9*i[1])-40,o=e.id,p=e.position.coordinates,u=e.className,a=e.maxWidth,s=void 0===a?t:a,l=e.maxHeight,d=void 0===l?n:l,v=e.autoPan,y=void 0!==v&&v,b=e.autoPanMargin,P=void 0===b?20:b,g=e.offset,O=void 0===g?[0,0]:g,E=e.autoPanAnimation,w=void 0===E?{duration:200}:E,j=s>t?t:s,S=d>n?n:d,A=f.g$(o,u),x=new c.A({id:o,element:A,autoPan:y,offset:O,autoPanMargin:P,autoPanAnimation:w,positioning:"bottom-center",className:"ol-overlay-container ol-unselectable",position:p});r.addOverlay(x);var _=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new MutationObserver((function(){e.getMap().getSize()&&(e.setPosition(void 0),e.setPosition(n.coordinates))}));return o.observe(t,{attributes:!0,childList:!0,subtree:!0}),o}(x,A,{coordinates:p});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({popup:x,observer:_,containerStyle:{maxWidth:j,maxHeight:S}},e)})),e._popups})),h(e,"stopPropagationOnPointerMove",(function(e){e.stopPropagation()})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(o=[{key:"UNSAFE_componentWillMount",value:function(){this.props.map&&this.props.map.getOverlayContainerStopEvent().addEventListener("pointermove",this.stopPropagationOnPointerMove)}},{key:"shouldComponentUpdate",value:function(e){return e.popups!==this.props.popups}},{key:"componentWillUnmount",value:function(){this.props.map&&this.props.map.getOverlayContainerStopEvent().removeEventListener("pointermove",this.stopPropagationOnPointerMove)}},{key:"render",value:function(){return r().createElement("div",null,this.renderPopups())}}])&&y(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Component);h(E,"propTypes",{map:a().object,popups:a().arrayOf(a().object),onPopupClose:a().func}),h(E,"defaultProps",{popups:[],onPopupClose:function(){}})},752933:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=function(){return n(3032).default,{Map:n(971481).A,Layer:n(954762).A,Feature:n(42811).A,MeasurementSupport:n(128168).default,Overview:n(868280).A,ScaleBar:n(94584).A,DrawSupport:n(173998).A,PopupSupport:n(194166).A,BoxSelectionSupport:n(116745).A}}},520943:(e,t,n)=>{"use strict";n.r(t),n.d(t,{IDENTIFY_POPUP:()=>w,default:()=>j});var o=n(273517),r=n.n(o),i=n(764997),p=n(419862),u=n(916589),a=n(811668),c=n(801081),s=n(975699),l=n(812366),f=n(986446),d=n(956449),v=n.n(d),m=n(762216),y=n.n(m),b=n(737056),P=n(131127),g=n(185520),h=(0,u.compose)((0,a.connect)((0,c.Mz)(s.oO,(function(e){return{index:e}})),{setIndex:l.yd}),(0,u.defaultProps)({index:0,responses:[]})),O=(0,c.Mz)([s.SL,s.mR,s.KB,s.P9,s.XJ,P.GY,s.SH,g.T],(function(e,t,n,o,r,i,p,u){return{responses:e,validResponses:t,requests:n,format:o,showEmptyMessageGFI:r,missingResponses:(n||[]).length-(e||[]).length,renderValidOnly:i,loaded:p,hidePopupIfNoResults:u}}));const E=(0,u.compose)((0,a.connect)(O),(0,u.defaultProps)({responses:[],container:function(e){var t=e.index,n=e.children;return r().createElement(r().Fragment,null,v()(n)&&n[t]||n)},header:b.A}),h,p.Bo,p.tq,(0,i.A)((function(e){var t=e.loaded;return y()(t)})))(f.A);var w="identify";const j={identify:E}},185520:(e,t,n)=>{"use strict";n.d(t,{N:()=>o,T:()=>r});var o=function(e){var t;return(null==e?void 0:e.mapPopups)&&(null==e||null===(t=e.mapPopups)||void 0===t?void 0:t.popups)||[]},r=function(e){var t;return(null==e?void 0:e.mapPopups)&&(null==e||null===(t=e.mapPopups)||void 0===t?void 0:t.hideEmptyPopupOption)||!1}},315211:(e,t,n)=>{"use strict";n.d(t,{AH:()=>p,BC:()=>u,g$:()=>i});var o=n(668414),r=n.n(o),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r()(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms-map-popup",n=document.createElement("div");return n.setAttribute("id",e+"-map-popup"),n.setAttribute("class",t),n},p=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").startsWith("<")},u=function(e,t){if(!t)return e;if(t instanceof Node){var n=document.createDocumentFragment();n.appendChild(t),e.appendChild(n)}else p(t)?e.innerHTML=t:e.append(document.createTextNode(String(t)));return e}},927537:(e,t,n)=>{var o=n(225160),r=n(761489);e.exports=function(e,t,n){var i=null==e?0:e.length;return i?(t=n||void 0===t?1:r(t),o(e,0,(t=i-t)<0?0:t)):[]}},677126:e=>{var t=Array.prototype.reverse;e.exports=function(e){return null==e?e:t.call(e)}},722331:(e,t,n)=>{var o=n(587133),r=n(677556),i=n(761489),p=n(213222);e.exports=function(e,t,n){return e=p(e),n=null==n?0:o(i(n),0,e.length),t=r(t),e.slice(n,n+t.length)==t}}}]);