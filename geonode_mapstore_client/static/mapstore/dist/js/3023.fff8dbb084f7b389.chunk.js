/*! For license information please see 3023.fff8dbb084f7b389.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3023],{717140:(e,t,n)=>{n.d(t,{Ij:()=>g,Jb:()=>o,Kf:()=>s,Lu:()=>i,Ly:()=>p,Mm:()=>m,Mr:()=>h,Ne:()=>d,Nu:()=>E,Q4:()=>a,S$:()=>f,V9:()=>r,VX:()=>b,ZM:()=>l,d:()=>w,et:()=>y,jx:()=>S,tq:()=>O,uw:()=>P,vK:()=>v,vw:()=>j});var r="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",c="DRAW:FEATURES_SELECTED",u="DRAW:DRAWING_FEATURES",s="DRAW:SET_SNAPPING_LAYER",d="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",p="DRAW:SET_SNAPPING_CONFIG";function v(e,t,n,r,o){return{type:a,features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}function y(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function m(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function g(){return{type:l}}function b(e,t,n,o,i,a){return{type:r,status:e,method:t,owner:n,features:o,options:i,style:a}}function h(e,t){return{type:o,geometry:e,owner:t}}function w(e){return{type:i,currentStyle:e}}var O=function(e){return b("clean","",e,[],{})};function S(){return{type:f}}function P(e){return{type:s,snappingLayer:e}}function j(){return{type:d}}function E(e,t,n){return{type:p,value:e,prop:t,pluginCfg:n}}},270871:(e,t,n)=>{n.d(t,{$7:()=>o,UN:()=>c,W0:()=>i,WU:()=>a,_O:()=>r,jD:()=>l});var r="MAP_EDITOR:SHOW",o="MAP_EDITOR:HIDE",i="MAP_EDITOR:SAVE",a=function(e,t){return{type:r,owner:e,map:t}},l=function(e){return{type:o,owner:e}},c=function(e,t){return{type:i,owner:t,map:e}}},697950:(e,t,n)=>{n.d(t,{Qy:()=>u,Ty:()=>s});var r=n(273517),o=n.n(r),i=n(368180),a=n(916589),l=n(109054);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}var u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).overrideWidthProvider;return(0,a.compose)((0,a.defaultProps)({useDefaultWidthProvider:!e}),function(e){return function(t){return o().createElement(i.A,{handleWidth:!0},function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).width;return o().createElement(e,c({width:n},t))})}})},s=function(e){return(0,a.compose)((0,a.withStateHandlers)(function(){return{}},{onResize:function(){return function(e){return{height:e.height}}}}),(0,l.A)(e))}},639996:(e,t,n)=>{n.d(t,{A:()=>x});var r=n(273517),o=n.n(r),i=n(916589),a=n(907309),l=n.n(a),c=n(473916),u=n.n(c),s=n(566816),d=n(858156),f=n.n(d),p=n(400912),v=n.n(p);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,t,n){return(t=function(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){return f()(v()(e,function(e){return e.color}),"color")};const w=(0,i.withProps)(function(e){var t=e.groups,n=e.showGroupColor,r=e.headerStyle,o=void 0===r?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:r;return{headerStyle:n&&t&&h(t)?g(g({},o),{},{borderTop:"3px solid ".concat(h(t))}):o}});function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}n(850890);var S=["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgetOpts","widgets","layouts","dependencies","compactType","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","currentLocale","env"];function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(null,arguments)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t,n){return(t=function(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=(0,i.branch)(function(e){var t=e.useDefaultWidthProvider;return void 0===t||t},s.WidthProvider)(s.Responsive),I=w(n(745523).A),T=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(t){return l()(t.widgets,function(t){return t===e.id})})};const x=(0,i.pure)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.style,r=e.className,i=void 0===r?"":r,a=e.toolsOptions,c=void 0===a?{}:a,s=e.rowHeight,d=void 0===s?150:s,f=e.breakpoints,p=void 0===f?{lg:1200,md:996,sm:768,xs:480,xxs:0}:f,v=e.cols,y=void 0===v?{lg:6,md:6,sm:4,xs:2,xxs:1}:v,m=e.widgetOpts,g=void 0===m?{}:m,b=e.widgets,h=void 0===b?[]:b,w=e.layouts,O=e.dependencies,j=e.compactType,D=void 0===j?null:j,x=e.compactMode,C=e.useDefaultWidthProvider,k=void 0===C||C,M=e.measureBeforeMount,R=e.width,F=e.showGroupColor,N=e.groups,L=void 0===N?[]:N,W=e.canEdit,G=void 0===W||W,z=e.getWidgetClass,_=void 0===z?function(){}:z,U=e.onWidgetClick,q=void 0===U?function(){}:U,H=e.updateWidgetProperty,Z=void 0===H?function(){}:H,V=e.deleteWidget,$=void 0===V?function(){}:V,K=e.toggleCollapse,B=void 0===K?function(){}:K,Y=e.toggleMaximize,J=void 0===Y?function(){}:Y,X=e.editWidget,Q=void 0===X?function(){}:X,ee=e.onLayoutChange,te=void 0===ee?function(){}:ee,ne=e.language,re=e.currentLocale,oe=e.env,ie=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,S),ae=h.filter(function(e){var t=e.mapSync,n=e.dependenciesMap;return t&&n}).map(function(e){return e.dependenciesMap}),le=function(e){return"table"===e.widgetType&&ae.filter(function(t){return Object.keys(t).filter(function(n){return t[n]&&-1!==t[n].indexOf(e.id)}).length>0}).length>0};return o().createElement(A,{key:t||"widgets-view",useDefaultWidthProvider:k,measureBeforeMount:M,width:k?void 0:R,isResizable:G,isDraggable:G,draggableHandle:".draggableHandle",onLayoutChange:te,preventCollision:!0,style:n,className:"widget-container ".concat(i," ").concat(G?"":"no-drag"),rowHeight:d,autoSize:!0,compactType:D,compactMode:x,breakpoints:p,cols:y,layouts:w?JSON.parse(JSON.stringify(u()(w,function(e){return e.map(function(e){var t=l()(h,{id:e.i});return t?E(E({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e})}))):void 0},h.map(function(e){return o().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return q(e)},className:_(e)},o().createElement(I,P({"data-grid":e.dataGrid},ie,e,{widgets:h,widgetOpts:g,quickFilters:le(e)?e.quickFilters:void 0,toolsOptions:c,groups:T(L,e),showGroupColor:F,dependencies:O,enableColumnFilters:le(e),canEdit:G,updateProperty:function(){return Z.apply(void 0,arguments)},toggleCollapse:function(){return B(e)},toggleMaximize:function(){return J(e)},onDelete:function(){return $(e)},onEdit:function(){return Q(e)},language:ne,currentLocale:re,env:oe})))}))})},745523:(e,t,n)=>{n.d(t,{A:()=>Dn});var r=n(273517),o=n.n(r),i=n(916589),a=n(540285),l=n(332222),c=n(397619);const u=(0,i.compose)(l.A,(0,c.jZ)(),(0,c.o$)(),(0,c.rk)());var s=n(858156),d=n.n(s),f=n(811668),p=n(738221),v=n.n(p),y=n(382378),m=n.n(y),g=n(672975),b=n(273494),h=n(883832),w=n(115263),O=n(181817);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function P(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return j(u,"_invoke",function(n,r,o){var i,l,c,u=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,l=0,c=e,f.n=n,a}};function p(n,r){for(l=n,c=r,t=0;!d&&u&&!o&&t<s.length;t++){var o,i=s[t],p=f.p,v=i[2];n>3?(o=v===r)&&(c=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(l=0,f.v=r,f.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,f.n=v,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,s,v){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,v),l=s,c=v;(t=l<2?e:c)||!d;){i||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(u=2,i){if(l||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){i=e,l=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function l(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(j(t={},r,function(){return this}),t),d=u.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,j(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,j(d,"constructor",u),j(u,"constructor",c),c.displayName="GeneratorFunction",j(u,o,"GeneratorFunction"),j(d),j(d,o,"Generator"),j(d,r,function(){return this}),j(d,"toString",function(){return"[object Generator]"}),(P=function(){return{w:i,m:f}})()}function j(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}j=function(e,t,n,r){function i(t,n){j(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},j(e,t,n,r)}function E(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I(e,t,n){return(t=function(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=(0,i.compose)((0,i.compose)((0,f.connect)(null,function(e,t){var n,r="table"===(null==t?void 0:t.widgetType)&&(null==t?void 0:t.enableZoomInTblWidget),i=r&&!(null==t||!t.isDashboardWidget),a=r&&!i,l=(null==t||null===(n=t.widgets)||void 0===n?void 0:n.filter(function(e){var n;return"map"===e.widgetType&&(null==e?void 0:e.dependenciesMap)&&(null==e||null===(n=e.dependenciesMap)||void 0===n||null===(n=n.mapSync)||void 0===n?void 0:n.includes(t.id))&&e.mapSync}))||[];return{gridTools:((null==t?void 0:t.mapSync)||l.length)&&i||a?w.qq.map(function(n){return A(A({},n),{},{events:{onClick:(r=P().m(function n(r,o,a){var l,c,u,s,d,f,p,v=arguments;return P().w(function(n){for(;;)switch(n.p=n.n){case 0:if(c=(l=v.length>3&&void 0!==v[3]?v[3]:{}).crs,u=l.maxZoom,null==t||!t.recordZoomLoading){n.n=1;break}return n.a(2);case 1:if(n.p=1,null!=r&&r.bbox){n.n=3;break}return null==t||t.updateProperty(t.id,"dependencies.zoomLoader",!0),n.n=2,(0,O.x$)(null==t||null===(s=t.layer)||void 0===s||null===(s=s.search)||void 0===s?void 0:s.url,null==t||null===(d=t.layer)||void 0===d?void 0:d.name,{outputFormat:"application/json",srsname:"EPSG:4326",featureId:r.id,propertyName:(null==t?void 0:t.geomProp)||"the_geom"});case 2:f=n.v,p=f.data,r.geometry=null==p?void 0:p.features[0].geometry,r.bbox=m()(null==p?void 0:p.features[0]),i?null==t||t.updateProperty(t.id,"dependencies.extentObj",{extent:r.bbox,crs:c||"EPSG:4326",maxZoom:u}):e((0,b.jc)(r.bbox,c||"EPSG:4326",u)),null==t||t.updateProperty(t.id,"dependencies.zoomLoader",!1),n.n=4;break;case 3:i?null==t||t.updateProperty(t.id,"dependencies.extentObj",{extent:r.bbox,crs:c||"EPSG:4326",maxZoom:u}):e((0,b.jc)(r.bbox,c||"EPSG:4326",u));case 4:n.n=6;break;case 5:n.p=5,n.v,e((0,h.z3)({title:"notification.warning",message:"notification.errorLoadingGF",action:{label:"notification.warning"},autoDismiss:3,position:"tc"})),null==t||t.updateProperty(t.id,"dependencies.zoomLoader",!1);case 6:return n.a(2)}},n,null,[[1,5]])}),a=function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){E(i,n,o,a,l,"next",e)}function l(e){E(i,n,o,a,l,"throw",e)}a(void 0)})},function(e,t,n){return a.apply(this,arguments)})},formatter:null!=t&&t.recordZoomLoading?o().createElement(o().Fragment,null,o().createElement("span",null,o().createElement(g.A,null))):n.tableWidgetFormatter});var r,a}):[]}})),(0,i.withPropsOnChange)(["gridEvents"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,n=void 0===t?{}:t,r=e.updateProperty,o=void 0===r?function(){}:r,i=e.id,a=v()(function(){return o.apply(void 0,arguments)},500);return{gridEvents:A(A({},n),{},{onAddFilter:function(e){return a(i,"quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,n,r,a,l){return o(i,'options.columnSettings["'.concat(d()(l.filter(function(e){return!e.hide})[e],"name"),'"].width'),t)}})}}),l.A,(0,c.jZ)(),(0,c.o$)(),(0,c.rk)(),(0,i.withPropsOnChange)(["gridEvents"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,n=void 0===t?{}:t,r=e.updateProperty,o=void 0===r?function(){}:r,i=e.id;return{gridEvents:A(A({},n),{},{onGridSort:function(e,t){return o(i,"sortOptions",{sortBy:e,sortOrder:t})}})}}));var x=n(510448);const C=(0,i.compose)(l.A,(0,c.jZ)(),(0,c.qP)(),(0,c.o$)(),(0,c.rk)()),k=(0,i.compose)(l.A,(0,c.jZ)(),(0,c.o$)(),(0,c.rk)());var M=n(738885),R=n(452005),F=n(679859),N=n.n(F),L=n(355364),W=n.n(L),G=n(214158),z=n(159686),_=n(45388),U=n.n(_),q=n(545567),H=n(112585),Z=n(525859);const V=function(e){return e.switchMap(function(e){var t=e.layer,n=void 0===t?{}:t,r=e.options,o=void 0===r?{}:r,i=e.filter,a=e.onLoad,l=void 0===a?function(){}:a,c=e.onLoadError,u=void 0===c?function(){}:c;return(0,q.Gw)(n,i,{timeout:15e3,params:{propertyName:(0,Z.MI)(o.propertyName),viewParams:o.viewParams}}).map(function(){return{loading:!1,error:void 0}}).do(function(e){return l({features:e.features,pagination:{totalFeatures:e.totalFeatures}})}).catch(function(e){return U().Observable.of({loading:!1,error:e,data:[]}).do(u)})})};var $=n(549112);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){J(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function J(e,t,n){return(t=function(e){var t=function(e){if("object"!=K(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){te(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function te(e,t,n){return(t=function(e){var t=function(e){if("object"!=X(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==X(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(45388);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach(function(t){ie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ie(e,t,n){return(t=function(e){var t=function(e){if("object"!=ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n=e,n.filter(function(e){var t=e.layer,n=void 0===t?{}:t,r=e.mapSync,o=e.dependencies,i=e.dependenciesMap,a=e.widgets;return!(r&&(0,$.zR)(a,i)&&(null==o||!o.viewport))&&n.name}).distinctUntilChanged(function(e,t){var n=e.layer,r=void 0===n?{}:n,o=e.options,i=void 0===o?{}:o,a=e.filter,l=e.sortOptions;return t.layer&&r.name===t.layer.name&&r.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(l,t.sortOptions)}).map(function(e){return Y(Y({},e),{},{features:[],pages:[],pagination:{}})})).let(r?function(e){return function(t){return t.switchMap(function(t){var n=t.layer,r=void 0===n?{}:n,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,l=void 0===a?5:a,c=t.filter,u=t.options,s=void 0===u?{}:u,d=t.sortOptions,f=t.pages,p=t.features,v=void 0===p?[]:p,y=t.onLoad,m=void 0===y?function(){}:y,g=t.onLoadError,b=void 0===g?function(){}:g;return e.switchMap(function(e,t){var n=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),(0,q.Gw)(r,c,ee(ee({},(0,Z.yJ)(n,f,i)),{},{sortOptions:d,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:(0,Z.MI)(s.propertyName),viewParams:s.viewParams})).do(function(e){return m(ee(ee({},(0,Z.gz)(e,n,{pages:f,features:v},ee(ee({},(0,Z.yJ)(n,f,i)),{},{size:i,maxStoredPages:l}))),{},{pagination:{totalFeatures:e.totalFeatures}}))}).map(function(){return{loading:!1}}).catch(function(e){return U().Observable.of({loading:!1,error:e}).do(b)}).startWith({loading:!0})})})}}(t.withLatestFrom(e.map(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}}),function(e,t){return oe({pagesRange:e},t)})):V).startWith({})},le=function(e){var t,n=(0,i.createEventHandler)(),r=n.handler,o=n.stream;return(t=e,t.distinctUntilChanged(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layer;return(0,H.U7)(e)===(0,H.U7)(t)&&e.loadingError===t.loadingError}).switchMap(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer;return(0,q.sq)({layer:e}).map(function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}}).catch(function(e){return U().Observable.of({loading:!1,error:e})})})).combineLatest(ae(e,o.startWith({startPage:0,endPage:1})),function(e,t){return oe(oe(oe({},e),t),{},{pageEvents:{moreFeatures:r,onPageChange:function(){}}})}).startWith({loading:!0})};const ce=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{pages:e.pages,features:e.features,pagination:e.pagination,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,n=void 0===t?function(){}:t,r=e.onLoad,o=void 0===r?function(){}:r;return function(){n.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)(function(){return{dataStreamFactory:le}}),z.A,(0,i.withProps)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:W()(r?(0,G.Mm)(r).filter(function(e){return!N()((0,Z.MI)(n.propertyName)||[],e.name)}).reduce(function(e,t){return oe(oe({},e),{},ie({},t.name,{hide:!0}))},{}):{},n.columnSettings||{},i)}}));var ue=n(817603),se=n(367867),de=n(859009),fe=n(738805),pe=n.n(fe),ve=n(962193),ye=n.n(ve),me=n(302404),ge=n.n(me),be=n(58884),he=n(325177),we=n(264053);var Oe=n(102685),Se=n(905185),Pe=n(6683);function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach(function(t){Ae(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ae(e,t,n){return(t=function(e){var t=function(e){if("object"!=je(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==je(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Te=(0,i.compose)((0,i.withPropsOnChange)(["id"],function(e){var t=e.hookRegister,n=void 0===t?null:t,r=e.id;return{hookRegister:(null==n?void 0:n.id)!==r?(0,Pe.sl)(r):n}}),(0,i.compose)((0,i.withPropsOnChange)(function(){var e,t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null===(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).widgets)||void 0===e?void 0:e.find(function(e){var t;return null==e||null===(t=e.dependencies)||void 0===t?void 0:t.extentObj}),o=null===(t=n.widgets)||void 0===t?void 0:t.find(function(e){var t;return null==e||null===(t=e.dependencies)||void 0===t?void 0:t.extentObj});return!ge()(r,o)&&o},function(e){var t,n,r,o=e.id,i=e.widgets,a=e.updateProperty,l=e.hookRegister,c=null==i?void 0:i.find(function(e){var t;return null==e||null===(t=e.dependencies)||void 0===t?void 0:t.extentObj}),u=null==c||null===(t=c.dependencies)||void 0===t?void 0:t.extentObj,s=o;if(!c)return{};if(null!=c&&c.mapSync){var d,f=null==i?void 0:i.find(function(e){var t;return(null==c||null===(t=c.dependenciesMap)||void 0===t?void 0:t.mapSync.includes(e.id))&&e.id===s});n=null==f||null===(d=f.maps)||void 0===d?void 0:d.find(function(e){return e.mapStateSource===f.id})}if(!n||null==c||!c.mapSync){var p=i.filter(function(e){var t;return"map"===e.widgetType&&(null==e?void 0:e.dependenciesMap)&&(null==e||null===(t=e.dependenciesMap)||void 0===t||null===(t=t.mapSync)||void 0===t?void 0:t.includes(null==c?void 0:c.id))&&e.id===s});n=null!=p&&p.length?function(e){if(Array.isArray(e))return Ie(e)}(r=p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():void 0}var v=null==l?void 0:l.getHook("ZOOM_TO_EXTENT_HOOK");return v&&(null==l?void 0:l.id)===o&&n&&(v(u.extent,{crs:u.crs,maxZoom:u.maxZoom}),a(c.id,"dependencies.extentObj",void 0)),{}})),(0,i.branch)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies;return t&&(!ye()(n.quickFilters)||!ye()(n.filter))},(0,i.compose)((0,i.withPropsOnChange)(["id"],function(e){var t=e.hookRegister,n=void 0===t?null:t,r=e.id;return{hookRegister:(null==n?void 0:n.id)!==r?(0,Pe.sl)(r):n}}),(0,i.mapPropsStream)(function(e){return e.distinctUntilChanged(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ge()(e.dependencies.quickFilters,t.dependencies.quickFilters)&&ge()(e.dependencies.filter,t.dependencies.filter)&&ge()(e.dependencies.layer,t.dependencies.layer)}).debounceTime(500).switchMap(function(e){var t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.filter,i=e.hookRegister;if(!t||ye()(r.layer))return _.Observable.of({loading:!1});var a={};r.quickFilters&&(a=De(De({},a),(0,be.gq)(o,r.quickFilters,r.options))),r.filter&&(a=De(De({},a),(0,Oe.mA)([a,r.filter])));var l=r&&r.layer&&r.layer.name;if(!ye()(a)){a=De(De({},a),{},{options:De(De({},a.options||{}),{},{noSchemaLocation:!0})});var c=(0,Oe.T$)(l,a,"1.1.0");return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,we.p4)(e,(n=t.wfsGetFeature,(0,we.Yy)("gs:Bounds",[(0,he.XH)("features",(0,he.Nj)("text/xml","http://geoserver/wfs","POST",n))],(0,he.mk)((0,he.Cs)("bounds","application/json")))),{},r)}((0,H.cs)(r.layer),{wfsGetFeature:c}).switchMap(function(e){var t,n,r;if(pe().parseString(e,{explicitArray:!1},function(e,o){t=o["ows:BoundingBox"],n=t["ows:LowerCorner"].split(" "),r=t["ows:UpperCorner"].split(" ")}),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return _.Observable.of({loading:!1});var o={minx:parseFloat(n[0]),miny:parseFloat(n[1]),maxx:parseFloat(r[0]),maxy:parseFloat(r[1])},a=i.getHook(Pe.jY);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),_.Observable.of({loading:!1})}).startWith({loading:!0}).catch(function(e){return _.Observable.of({error:"error getting bounds from filter",details:e})})}return _.Observable.of({loading:!1})}).combineLatest(e,function(e){var t=e.loading,n=void 0!==t&&t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Se.hZ)("loading",n,r)})}))));var xe=n(907309),Ce=n.n(xe),ke=n(504631);function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach(function(t){Ne(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ne(e,t,n){return(t=function(e){var t=function(e){if("object"!=Me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Me(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Le=(0,i.compose)((0,i.withPropsOnChange)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.maps,i=void 0===o?[]:o,a=e.selectedMapId,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;return t!==l.mapSync||!ge()(r,l.dependencies)||!ge()(i,l.maps)||c!==l.filter||a!==l.selectedMapId},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.filter,i=void 0===o?{}:o,a=e.maps,l=void 0===a?[]:a,c=e.selectedMapId,u=r&&r.layer&&r.layer.name,s=Ce()(l,function(e){return e.mapId===c});if(s){var d=Ce()(null==s?void 0:s.layers,{name:u})||{},f={},p={},v=void 0;return t&&!ye()(d)&&(r.quickFilters&&(f=Fe(Fe({},f),(0,be.gq)(i,r.quickFilters,r.options))),r.filter&&(f=Fe(Fe({},f),(0,Oe.mA)([f,r.filter]))),!ye()(f)&&(0,Oe.Io)(f))?(v=(0,Oe.Io)(f),p=(0,Se.Rd)(!1,Fe(Fe({},d),{},{params:(0,ke.w)({params:{CQL_FILTER:v}},d&&d.params&&d.params.CQL_FILTER)}),{name:u},s.layers),{maps:(0,Se.Rd)(!1,Fe(Fe({},s),{},{layers:p}),{mapId:c},l)}):(p=s.layers.map(function(e){return Fe(Fe({},e),{},{params:Fe(Fe({},e.params),{},{CQL_FILTER:void 0})})}),{maps:(0,Se.Rd)(!1,Fe(Fe({},s),{},{layers:p}),{mapId:c},l)})}return{maps:l}})),We=function(e){return(0,i.withPropsOnChange)(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mapSync,r=t.dependencies,o=void 0===r?{}:r,a=t.selectedMapId,l=arguments.length>1?arguments[1]:void 0,c=l.mapSync,u=l.dependencies,s=l.selectedMapId;return u&&(0,i.shallowEqual)(o[e],u[e])||n===c||a===s},function(t){var n=t.maps,r=void 0===n?[]:n,o=t.mapSync,i=t.dependencies,a=void 0===i?{}:i,l=t.selectedMapId,c=Ce()(r,{mapId:l})||{},u=a[e]&&o?(0,Se.hZ)(e,a[e],c):c;return{mapStateSource:"__dependency_system__",maps:r.map(function(e){return e.mapId===u.mapId?u:e}),map:u}})};var Ge=n(8117);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}var _e=["data"];function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach(function(t){He(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function He(e,t,n){return(t=function(e){var t=function(e){if("object"!=ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ze=n(993456),Ve=n(764997),$e=n(721930),Ke=n(992717),Be=n(962787),Ye=(0,Ve.A)()((0,$e.A)((0,Ke.A)(Be.A)));const Je=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(Ze.A,null,o().createElement(Ye,e)))};var Xe=n(154150),Qe=n(534332),et=n(192016),tt=n(32485),nt=n.n(tt),rt=n(711030);const ot=function(e){var t,n,i=e.options,a=i.dropdownWidgets.length>1,l=i.dropdownWidgets.length-1,c=i.dropdownWidgets.findIndex(function(e){return e.id===i.activeWidget.id}),u=c===l?0:c+1,s=0===c?l:c-1;return o().createElement("div",{className:"widget-selector"},a?o().createElement(rt.A,{className:"previous-widget btn-sm no-border",onPointerDown:function(){return i.setActiveWidget(i.dropdownWidgets[s])}},o().createElement(Ge.e6,{glyph:"arrow-left"})):null,o().createElement(et.Ay,{openOnFocus:!0,clearable:!1,searchable:!1,value:{id:i.activeWidget.id,label:null!==(t=i.activeWidget.title)&&void 0!==t?t:null===(n=i.activeWidget)||void 0===n||null===(n=n.layer)||void 0===n?void 0:n.title},onChange:function(e){return i.setActiveWidget(i.dropdownWidgets.find(function(t){return t.id===e.value}))},options:(0,r.useMemo)(function(){return i.dropdownWidgets.map(function(e){var t,n;return{value:e.id,label:null!==(t=e.title)&&void 0!==t?t:null==e||null===(n=e.layer)||void 0===n?void 0:n.title,active:e.id===i.activeWidget.id}})},[i.dropdownWidgets]),optionComponent:function(e){var t=e.option,n=e.onSelect;return o().createElement("div",{className:nt()({"Select-option":!0,"is-focused":t.active}),onPointerDown:function(e){return n(t,e)}},t.label)}}),a?o().createElement(rt.A,{className:"next-widget btn-sm no-border",onPointerDown:function(){return i.setActiveWidget(i.dropdownWidgets[u])}},o().createElement(Ge.e6,{glyph:"arrow-right"})):null)},it=function(e){var t=e.id,n=e.title,r=e.confirmDelete,i=void 0!==r&&r,a=e.className,l=e.isDraggable,c=void 0===l||l,u=e.toggleDeleteConfirm,s=void 0===u?function(){}:u,d=e.onDelete,f=void 0===d?function(){}:d,p=e.icons,v=e.topLeftItems,y=e.topRightItems,m=e.headerStyle,g=void 0===m?{}:m,b=e.options,h=void 0===b?{}:b,w=e.children;return o().createElement("div",{className:"mapstore-widget-card ".concat(h.singleWidget?"single-widget":""),id:t},o().createElement(Xe.A,{className:a,header:o().createElement("div",{style:g,className:"mapstore-widget-info ".concat(c?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},p),v,h.singleWidget?o().createElement(ot,{options:h}):o().createElement("span",{className:"widget-title"},n),o().createElement("span",{className:"mapstore-widget-options"},y)))},w),i?o().createElement(Qe.A,{confirmId:"widgets.widget.menu.delete",titleId:"widgets.widget.menu.confirmDelete",show:i,preventHide:!0,variant:"danger",onCancel:function(){return s(!1)},onConfirm:function(){return f(t)}}):null)};var at=n(164045),lt=n(551783),ct=n(8571);function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}var st=["charts","onChange","value","disabled","className","editorData","setSelectedChart","selectedChart","withContainer","featureTypeProperties","width"];function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach(function(t){pt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pt(e,t,n){return(t=function(e){var t=function(e){if("object"!=ut(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ut(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var mt=(0,lt.A)(["noResultsText"])(et.Ay),gt=(0,lt.A)("placeholder")(Ge.MJ),bt=(0,at.A)(rt.A);const ht=function(e){var t,n=e.charts,i=void 0===n?[]:n,a=e.onChange,l=void 0===a?function(){}:a,c=e.value,u=void 0===c?"":c,s=e.disabled,f=void 0!==s&&s,p=e.className,v=void 0===p?"":p,y=e.editorData,m=void 0===y?{}:y,g=e.setSelectedChart,b=void 0===g?function(){}:g,h=e.selectedChart,w=e.withContainer,O=void 0!==w&&w,S=(e.featureTypeProperties,e.width),P=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,st),j=vt((0,r.useState)(!1),2),E=j[0],D=j[1],A=vt((0,r.useState)(null==h?void 0:h.name),2),I=A[0],T=A[1],x=function(e){var t,n;if(1===e.length)return null;if(!O&&S<=410)return o().createElement(bt,{tooltipId:"widgets.chartSwitcher.infoOnHide",className:"square-button-md no-border",key:"info-sign"},o().createElement(Ge.e6,{glyph:"info-sign"}));var r=null!=I?I:null==e||null===(t=e.find(function(e){return e.chartId===u}))||void 0===t?void 0:t.name;return o().createElement("div",{className:"chart-fields"},E?o().createElement(gt,{type:"text",placeholder:"widgets.chartSwitcher.placeholder",style:{textOverflow:"ellipsis"},value:r,onChange:function(e){return T(e.target.value)}}):o().createElement(mt,{className:v,disabled:f,noResultsText:"widgets.chartSwitcher.noResults",options:ye()(e)?[]:e.map(function(e,t){return{label:(null==e?void 0:e.name)||"[Chart ".concat(t+1,"]"),value:e.chartId}}),onChange:function(e){e.value&&(l("selectedChartId",e.value),T(null))},value:u||(null==e||null===(n=e[0])||void 0===n?void 0:n.chartId),clearable:!1}),O&&o().createElement(bt,{bsStyle:"primary",disabled:E&&ye()(r),onClick:function(){E?(I&&l("charts[".concat(null==h?void 0:h.chartId,"].name"),I),D(!1)):D(!0)}},o().createElement(Ge.e6,{glyph:E?"ok":"pencil"})))};return O?((0,r.useEffect)(function(){if(!ye()(null==m?void 0:m.charts)&&O){var e,t=d()(m,"charts[0]",{});ye()(m.selectedChartId)?l("selectedChartId",t.chartId):t=null===(e=m.charts)||void 0===e?void 0:e.find(function(e){return e.chartId===m.selectedChartId}),b(ft(ft({},h),t))}},[m.charts,m.selectedChartId,O,b,l]),o().createElement(o().Fragment,null,(null==m||null===(t=m.charts)||void 0===t?void 0:t.length)>1?o().createElement("div",{className:"chart-switcher"},o().createElement("strong",null,o().createElement(ct.A,{msgId:"widgets.chartSwitcher.selectLabel"})),x(m.charts)):null,O&&P.children?o().Children.map(P.children,function(e,t){return o().cloneElement(e,ft({key:"chart-component-".concat(t)},P))}):null)):x(i)};var wt=["id","title","description","headerStyle","data","charts","selectedChartId","traces","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm","updateProperty","selectionActive"];function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(null,arguments)}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Pt=(0,Ve.A)()((0,Ke.A)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?[]:t,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,_e),i=n[0],a=Object.keys(i.reduce(function(e,t){return qe(qe({},e),t)},{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(Ge.XI,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,a.map(function(e,t){return o().createElement("th",null,t+1===a.length&&r.yAxisLabel?r.yAxisLabel:t>0?"".concat(e):e)}))),o().createElement("tbody",null,i.map(function(e){return o().createElement("tr",null,a.map(function(t){return o().createElement("td",null,e[t])}))}))))})),jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?o().createElement(Ge.e6,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null};var Et=n(563864),Dt=n(230454),At=(0,Et.A)(function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text},function(){return{glyph:"sheet",messageId:"widgets.errors.notext"}},Dt.A)(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:e}})}),It=n(590179),Tt=n.n(It),xt=n(138629),Ct=n(743445),kt=n(913121),Mt=n(193670);function Rt(e){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(e)}var Ft=["layers"];function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach(function(t){Gt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Gt(e,t,n){return(t=function(e){var t=function(e){if("object"!=Rt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Rt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zt=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.onUpdateMapProperty,n=void 0===t?function(){}:t;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ft);return n(t)}}})(xt.A),_t=(0,i.withHandlers)({updateProperty:function(e){var t=e.onUpdateMapProperty,n=void 0===t?function(){}:t,r=e.map;return function(e,t){var o,i,a=null===(o=r.layers)||void 0===o?void 0:o.map(function(e){var n=null==t?void 0:t.layers.find(function(t){return t.id===e.id});return n?Wt(Wt({},e),{},{visibility:n.visibility,opacity:n.opacity,expanded:n.expanded,layerFilter:n.layerFilter}):e}),l=null===(i=r.groups)||void 0===i?void 0:i.map(function(e){var n=null==t?void 0:t.groups.find(function(t){return t.id===e.id});return n?Wt(Wt({},e),{},{visibility:n.visibility,expanded:n.expanded}):e});ge()(r.layers,a)&&ge()(r.groups,l)||n(Wt(Wt({},r),{},{layers:a,groups:l}))}}})(Mt.A),Ut=(0,i.withHandlers)({onPropertiesChange:function(e){var t=e.onUpdateMapProperty,n=e.map;return function(e,r){var o;if(e){var i=null===(o=n.layers)||void 0===o?void 0:o.map(function(t){if("background"===t.group){var n=Wt(Wt({},t),{},{visibility:!1});return t.id===e?Wt(Wt({},n),{},{visibility:!0},r):n}return t});ge()(n.layers,i)||t(Wt(Wt({},n),{},{layers:i}))}}}})(kt.A),qt=(0,i.compose)((0,i.withProps)(function(e){return{selectedMapId:e.selectedMapId}}),(0,i.withHandlers)({onUpdateMapProperty:function(e){var t=e.updateProperty,n=void 0===t?function(){}:t,r=e.id,o=e.selectedMapId;return function(e){var t=o?Wt(Wt({},e),{},{mapId:o}):e;n(r,"maps",t,"merge")}}}))(function(e){var t,n=e.updateProperty,r=void 0===n?function(){}:n,i=e.onUpdateMapProperty,a=void 0===i?function(){}:i,l=e.toggleDeleteConfirm,c=void 0===l?function(){}:l,u=e.id,s=e.title,d=e.map,f=void 0===d?{}:d,p=e.maps,v=void 0===p?[]:p,y=e.selectedMapId,m=e.icons,b=e.hookRegister,h=e.mapStateSource,w=e.topRightItems,O=void 0===w?[]:w,S=e.options,P=void 0===S?{}:S,j=e.confirmDelete,E=void 0!==j&&j,D=e.loading,A=void 0!==D&&D,I=e.dataGrid,T=void 0===I?{}:I,x=e.onDelete,C=void 0===x?function(){}:x,k=e.headerStyle,M=e.env,R=e.selectionActive,F=e.currentZoomLvl,N=e.scales,L=e.language,W=e.currentLocale,G=f.size,z=void 0===G?{}:G,_=z.height,U=z.width,q=f.mapInfoControl,Z=(f.layers||[]).filter(function(e){return"background"===e.group}),V=_>400&&U>400&&q;return o().createElement(it,{className:"map-widget-view",id:"widget-text-".concat(u),title:s,confirmDelete:E,onDelete:C,toggleDeleteConfirm:c,headerStyle:k,icons:m,topRightItems:[o().createElement(Ct.A,{key:"map-switcher",className:"map-switcher",maps:v,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(void 0,[u].concat(t))},value:y,disabled:R})].concat((t=O,function(e){if(Array.isArray(e))return Nt(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Nt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),isDraggable:T.isDraggable,options:P},o().createElement(Xe.A,{footer:A?o().createElement("div",{className:"widget-footer"},o().createElement("span",{style:{float:"right"}},o().createElement(g.A,null))):null},o().createElement("div",{className:"map-widget-view-content"},o().createElement(zt,{tools:V?["popup"]:[],onUpdateMapProperty:a,id:u,map:Wt({},Tt()(f,"mapStateSource")),mapStateSource:h,hookRegister:b,layers:(0,H.UA)(f.layers,f.groups),options:{style:{margin:"0 10px 10px 10px",height:"calc(100% - 10px)"}},env:M}),V&&o().createElement(o().Fragment,null,f.showBackgroundSelector&&(null==Z?void 0:Z.length)>0&&o().createElement(Ut,{id:u,map:f,onUpdateMapProperty:a,backgrounds:Z,projection:f.projection,style:{position:"absolute",bottom:8,left:8,zIndex:100,marginBottom:0},alwaysVisible:!1,canEdit:!1,allowDeletion:!1,backgroundToolbarItems:[]}),f.showLegend&&o().createElement("div",{className:"legend-in-mapview"},o().createElement(_t,{id:u,map:f,onUpdateMapProperty:a,currentZoomLvl:F,scales:N,language:L,currentLocale:W}))))))});const Ht=qt;var Zt=n(742466);function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach(function(t){Bt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bt(e,t,n){return(t=function(e){var t=function(e){if("object"!=Vt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yt=(0,i.compose)((0,i.mapPropsStream)(function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap(function(e){return e}).startWith(void 0),function(e,t){var n,r=t&&e.options&&Ce()((0,Z.MI)(null===(n=e.options)||void 0===n?void 0:n.propertyName),function(t){return t===e.attributeName})&&t[e.attributeName]||{},o=r&&(r.rawValue||r.value);return Kt(Kt({},e),{},{value:o})})})),Jt=(0,i.compose)((0,i.mapPropsStream)(function(e){return e.map(function(t){return Kt(Kt({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})})})),Xt=(0,i.compose)(Jt,(0,i.withPropsOnChange)(["layer","describeFeatureType","options"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=void 0===t?{}:t,r=e.describeFeatureType,o=e.options,a=e.quickFilterStream$,l=(null==n?void 0:n.fields)||[];return r?{filterRenderers:(0,Z.CG)(r).reduce(function(e,t){var n=t.localType,r=t.name,c=function(e){var t,n,r=e.field,o=void 0===r?{}:r,a=e.options,l=e.localType,c=e.attributeName,u=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:u,attributeName:c,options:a}),Yt)((0,Zt.q5)({name:null===(t=o.filterRenderer)||void 0===t?void 0:t.name,type:l,options:null===(n=o.filterRenderer)||void 0===n?void 0:n.options}))}({field:Ce()(l,{name:r}),options:o,localType:n,attributeName:r,quickFilterStream$:a});return Kt(Kt({},e),{},Bt({},r,c))},{})}:{}})),Qt=n(347018);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach(function(t){rn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rn(e,t,n){return(t=function(e){var t=function(e){if("object"!=en(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==en(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var on=(0,n(432060).A)()((0,r.lazy)(function(){return Promise.all([n.e(1206),n.e(8645),n.e(2719)]).then(n.bind(n,32719))})),an=(0,$e.A)((0,Ve.A)(function(e){return!e.describeFeatureType})(on)),ln=["rowHeight","headerRowHeight","headerFiltersHeight"].reduce(function(e,t){return nn(nn({},e),{},rn({},t,28))},"");const cn=Xt(function(e){var t=e.id,n=e.title,r=e.loading,i=e.confirmDelete,a=void 0!==i&&i,l=e.enableColumnFilters,c=void 0!==l&&l,u=e.headerStyle,s=e.icons,d=e.topRightItems,f=e.toggleDeleteConfirm,p=void 0===f?function(){}:f,v=e.onDelete,y=void 0===v?function(){}:v,m=e.gridEvents,b=void 0===m?function(){}:m,h=e.pageEvents,w=void 0===h?{moreFeatures:function(){}}:h,O=e.describeFeatureType,S=e.filterRenderers,P=e.columnSettings,j=e.features,E=e.layer,D=e.size,A=e.pages,I=e.error,T=e.pagination,x=void 0===T?{}:T,C=e.dataGrid,k=void 0===C?{}:C,M=e.virtualScroll,R=void 0===M||M,F=e.gridOpts,N=void 0===F?ln:F,L=e.options,W=void 0===L?{}:L,G=e.dateFormats,z=e.gridTools;return o().createElement(it,{id:"widget-chart-".concat(t),title:n,headerStyle:u,icons:s,isDraggable:k.isDraggable,confirmDelete:a,onDelete:y,toggleDeleteConfirm:p,topRightItems:d,options:W},o().createElement(Xe.A,{footer:x.totalFeatures?o().createElement("div",{className:"widget-footer"},r?o().createElement("span",{style:{float:"right"}},o().createElement(g.A,null)):null,void 0===I&&o().createElement("span",{className:"result-info"},o().createElement(ct.A,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:x.totalFeatures}}))):null},o().createElement(an,{emptyRowsView:function(){return o().createElement(Qt.A,{loading:r},o().createElement(Dt.A,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"}))},gridEvents:b,sortable:!0,defaultSize:!1,columnSettings:P,pageEvents:w,virtualScroll:R,enableColumnFilters:c,filterRenderers:S,fields:null==E?void 0:E.fields,features:j,pages:A,error:I,size:D,rowKey:"id",describeFeatureType:O,pagination:x,gridOpts:N,options:W,tools:z,dateFormats:G})))});var un=n(577103),sn=["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"];function dn(){return dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dn.apply(null,arguments)}var fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?o().createElement(Ge.e6,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null},pn=n(537336),vn=["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"],yn=(0,pn.A)()(Mt.A),mn=n(102179),gn=(0,i.compose)(a.p,de.A,ue.A,se.A,M.Ay,a.A,mn.A)(function(e){var t,n,r=e.id,i=e.title,a=e.description,l=e.headerStyle,c=e.data,u=void 0===c?[]:c,s=e.charts,d=void 0===s?[]:s,f=e.selectedChartId,p=e.traces,v=void 0===p?[]:p,y=e.loading,m=e.icons,g=e.showTable,b=e.topRightItems,h=e.confirmDelete,w=void 0!==h&&h,O=e.dataGrid,S=void 0===O?{}:O,P=e.onDelete,j=void 0===P?function(){}:P,E=e.toggleTableView,D=void 0===E?function(){}:E,A=e.toggleDeleteConfirm,I=void 0===A?function(){}:A,T=e.updateProperty,x=void 0===T?function(){}:T,C=e.selectionActive,k=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,wt),M="widget-chart-".concat(r),R=null===(t=document.getElementById(M))||void 0===t?void 0:t.clientWidth;return o().createElement(it,{className:"chart-widget-view",id:M,headerStyle:l,isDraggable:S.isDraggable,title:i,icons:m,topLeftItems:jt({loading:y,title:i,description:a,showTable:g,toggleTableView:D}),confirmDelete:w,onDelete:j,toggleDeleteConfirm:I,topRightItems:[o().createElement(ht,{className:"chart-switcher",charts:d,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.apply(void 0,[r].concat(t))},value:f,disabled:C,width:R})].concat((n=b||[],function(e){if(Array.isArray(e))return St(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),options:null==k?void 0:k.options},g?o().createElement(Pt,Ot({data:u},k)):o().createElement(Je,Ot({id:r,isAnimationActive:!y,loading:y,data:u,traces:v,iconFit:!0},k)))}),bn=(0,i.compose)(C)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,r=e.icons,i=e.topLeftItems,a=e.id,l=e.title,c=e.text,u=e.headerStyle,s=e.topRightItems,d=e.options,f=void 0===d?{}:d,p=e.dataGrid,v=void 0===p?{}:p,y=e.confirmDelete,m=void 0!==y&&y,g=e.onDelete,b=void 0===g?function(){}:g;return o().createElement(it,{id:"widget-text-".concat(a),title:l,confirmDelete:m,onDelete:b,toggleDeleteConfirm:n,headerStyle:u,isDraggable:v.isDraggable,icons:r,topLeftItems:i,topRightItems:s,options:f},o().createElement(At,{text:c}))}),hn=(0,i.compose)(de.A,Le,We("center"),We("zoom"),Te,k)(Ht),wn=(0,i.compose)(de.A,se.A,ue.A,ce,T)(cn),On=(0,i.compose)(de.A,ue.A,se.A,R.A,u)(function(e){var t=e.id,n=e.title,r=e.description,i=e.data,a=void 0===i?[]:i,l=e.series,c=void 0===l?[]:l,u=e.loading,s=e.showTable,d=e.confirmDelete,f=void 0!==d&&d,p=e.headerStyle,v=e.icons,y=e.topRightItems,m=e.dataGrid,g=void 0===m?{}:m,b=e.toggleTableView,h=void 0===b?function(){}:b,w=e.toggleDeleteConfirm,O=void 0===w?function(){}:w,S=e.onDelete,P=void 0===S?function(){}:S,j=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,sn);return o().createElement(it,{className:"counter-widget",id:"widget-chart-".concat(t),title:n,isDraggable:g.isDraggable,icons:v,topLeftItems:fn({loading:u,title:n,description:r,showTable:s,toggleTableView:h}),confirmDelete:f,onDelete:P,toggleDeleteConfirm:O,headerStyle:p,topRightItems:y,options:null==j?void 0:j.options},o().createElement(un.A,dn({id:t,isAnimationActive:!u,loading:u,data:a,series:c,iconFit:!0},j)))}),Sn=(0,i.compose)(de.A,x.A)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,r=e.id,i=e.title,a=e.icons,l=e.headerStyle,c=e.confirmDelete,u=void 0!==c&&c,s=e.topRightItems,d=e.dataGrid,f=void 0===d?{}:d,p=e.onDelete,v=void 0===p?function(){}:p,y=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,vn);return o().createElement(it,{id:"widget-text-".concat(r),title:i,confirmDelete:u,onDelete:v,toggleDeleteConfirm:n,headerStyle:l,icons:a,topRightItems:s,isDraggable:f.isDraggable,options:null==y?void 0:y.options},o().createElement(yn,y))}),Pn=["items","dependencies","toggleCollapse","exportCSV","onDelete","onEdit"];function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jn.apply(null,arguments)}var En=function(e){var t;return null==e||null===(t=e.widgetOpts)||void 0===t?void 0:t[e.widgetType]};const Dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,n=e.dependencies,r=e.toggleCollapse,i=void 0===r?function(){}:r,a=e.exportCSV,l=void 0===a?function(){}:a,c=e.onDelete,u=void 0===c?function(){}:c,s=e.onEdit,d=void 0===s?function(){}:s,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Pn);return"text"===f.widgetType?o().createElement(bn,jn({},f,{toggleCollapse:i,onDelete:u,onEdit:d})):"table"===f.widgetType?o().createElement(wn,jn({},f,En(f),{toggleCollapse:i,exportCSV:l,dependencies:n,onDelete:u,onEdit:d,items:t})):"counter"===f.widgetType?o().createElement(On,jn({},f,En(f),{toggleCollapse:i,dependencies:n,onDelete:u,onEdit:d})):"map"===f.widgetType?o().createElement(hn,jn({},f,En(f),{toggleCollapse:i,dependencies:n,onDelete:u,onEdit:d,items:t})):"legend"===f.widgetType?o().createElement(Sn,jn({},f,En(f),{toggleCollapse:i,dependencies:n,onDelete:u,onEdit:d})):o().createElement(gn,jn({},f,En(f),{toggleCollapse:i,exportCSV:l,dependencies:n,onDelete:u,onEdit:d}))}},779956:(e,t,n)=>{n.d(t,{Ay:()=>H});var r=n(45388),o=n.n(r),i=n(2296),a=n.n(i),l=n(761448),c=n.n(l),u=n(858156),s=n.n(u),d=n(679859),f=n.n(d),p=n(302404),v=n.n(p),y=n(590179),m=n.n(y),g=n(142194),b=n.n(g),h=n(71665),w=n(223062),O=n(538704),S=n(415392),P=n(130711),j=n(737704),E=n(904059),D=n(307679),A=n(24812),I=n(589769),T=n(985564),x=n(980971),C=n(791936),k=n(764932),M=n(77645),R=n(6683),F=n(549112),N=n(270871);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function W(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e,t,n){return(t=function(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=function(e,t,n){return o().Observable.of((0,h.zd)("mapSync",e),(0,h.zd)("dependenciesMap",function(e,t,n){var r=n.dependenciesMap,o=n.mappings,i=["layer","filter","quickFilters","options"],l=["layers","groups","viewport","zoom","center"],c=["dimension.currentTime","dimension.offsetTime"],u=(h.Yi.exec(t)||[])[1],s=b()(r,function(e){return-1===e.indexOf(u)}),d=t.split(".maps")[0],p=Object.keys(o).filter(function(e){return void 0!==o[e]}).reduce(function(e,n){return f()(c,n)?_(_({},e),{},U({},n,"map"===t?"dimension.".concat(o[n]):"".concat(d,".").concat(o[n]))):!a()(t,"map")&&f()(i,n)?_(_({},e),{},U({},n,"".concat(t,".").concat(o[n]))):a()(t,"map")?f()(l,n)?_(_({},e),{},U({},n,"map"===t?o[n]:"".concat(t.replace(/.map$/,""),".").concat(o[n]))):_(_({},e),{},U({},n,"".concat(d,".").concat(o[n]))):e},{});return e?_(_(_({},s),p),{},U(U({},"dependenciesMap","".concat(d,".dependenciesMap")),"mapSync","".concat(d,".mapSync"))):m()(s,[Object.keys(o)])}(e,t,n)))};const H={exportWidgetData:function(e){return e.ofType(h.Ok).do(function(e){var t=e.data,n=void 0===t?[]:t,r=e.title,o=void 0===r?"data":r;return(0,C.saveAs)(new Blob([(0,M.Vu)(n)],{type:"text/csv"}),o+".csv")}).filter(function(){return!1})},alignDependenciesToWidgets:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(O.mO,T.LL,h.i).map(function(){return(0,j.Gw)(n())}).pluck("availableDependencies").distinctUntilChanged(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return v()(W(e),W(t))}).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h.cV)(e.reduce(function(e,t){var n=t.split(".maps")[0],r=t.replace(/.map$/,"");return a()(t,"map")?_(_({},e),{},U(U(U(U(U(U(U(U(U({},"".concat(n,".dependenciesMap"),"".concat(n,".dependenciesMap")),"".concat(n,".mapSync"),"".concat(n,".mapSync")),"map"===t?"viewport":"".concat(r,".viewport"),"".concat(r,".bbox")),"map"===t?"center":"".concat(r,".center"),"".concat(r,".center")),"map"===t?"zoom":"".concat(r,".zoom"),"".concat(r,".zoom")),"map"===t?"layers":"".concat(r,".layers"),"map"===t?"layers.flat":"".concat(r,".layers")),"map"===t?"groups":"".concat(r,".groups"),"map"===t?"layers.groups":"".concat(r,".groups")),"dimension.currentTime","dimension.currentTime"),"dimension.offsetTime","dimension.offsetTime")):_(_({},e),{},U(U(U(U(U(U(U(U({},"".concat(t,".filter"),"".concat(t,".filter")),"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),"".concat(n,".dependenciesMap"),"".concat(n,".dependenciesMap")),"".concat(n,".mapSync"),"".concat(n,".mapSync")),"".concat(t,".layer"),"".concat(t,".layer")),"".concat(t,".options"),"".concat(t,".options")),"dimension.currentTime","dimension.currentTime"),"dimension.offsetTime","dimension.offsetTime"))},{}))})},toggleWidgetConnectFlow:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(h.af).switchMap(function(t){var r=t.active,i=t.availableDependencies,a=void 0===i?[]:i,l=t.options;return r&&a.length>0?1===a.length?q(r,a[0],l):o().Observable.of((0,h.hY)(r,{availableDependencies:a})).merge(e.ofType(h.Zl).filter(function(){return(0,j.Zh)(n())}).switchMap(function(e){var t=e.widget,i=s()((0,j.f$)(n()),"availableDependencies").filter(function(e){return(h.Yi.exec(e)||[])[1]===t.id});return"map"===t.widgetType&&(i=i.filter(function(e){return(h.M9.exec(e)||[])[2]===t.selectedMapId})),q(r,i[0],l).concat(o().Observable.of((0,h.hY)(!1,{})))}).takeUntil(e.ofType(x.LK).merge(e.filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.key;return t===h._&&n===h.Ws})))):q(r,a[0],l)})},clearWidgetsOnLocationChange:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(O.mO).switchMap(function(){var t=(0,A.o)(n()).split("/"),r=t[t.length-1];return e.ofType(x.LK).filter(function(e){var t=e.payload,o=(0,A.o)(n()).split("/"),i=o[o.length-1];return"REPLACE"!==t.action&&i!==r}).switchMap(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).payload,t=void 0===e?{}:e;return t&&t.location&&t.location.pathname?o().Observable.of((0,h.LO)()):o().Observable.empty()})})},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(E.nX,E.rN).filter(function(e){var t=e.layer,n=e.newProperties,r=e.nodeType,o=e.options;return t&&n||"layers"===r&&c()(o,"layerFilter")}).switchMap(function(e){var n=e.layer,r=e.newProperties,i=e.node,a=e.options,l=t.getState(),u=(0,D.pO)(l,null!=n?n:i);return u&&(c()(null!=r?r:a,"layerFilter")||c()(r,"fields"))?o().Observable.of((0,h.Dh)(u)):o().Observable.empty()})},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(E.ZL,E.dX).groupBy(function(e){return e.layerId}).map(function(e){return e.switchMap(function(e){var n,r=e.layerId,i=t.getState(),a=(0,D.pO)(i,r);return(n=o().Observable).of.apply(n,W(a&&a.previousLoadingError!==a.loadingError?[(0,h.Dh)(a)]:[]))})}).mergeAll()},updateDependenciesMapOnMapSwitch:function(e,t){return e.ofType(h.ao).filter(function(e){var t=e.key;return f()(["maps","selectedMapId"],t)}).switchMap(function(e){var n=e.id,r=e.value,i=o().Observable.empty(),a="string"==typeof r?r:null==r?void 0:r.mapId;if(a){var l=(0,j.Qs)(t.getState()),c=(0,F.y1)(l,n,a);v()(l,c)||(i=o().Observable.of((0,h.ID)(c)))}return i})},onWidgetCreationFromMap:function(e,t){return e.ofType(h.Pv).filter(function(e){var n=e.key,r=e.value;return"widgetType"===n&&"chart"===r&&!(0,I.Hd)(t.getState())}).switchMap(function(){var e=o().Observable.empty(),n=t.getState(),r=(0,j.oR)(n);return r&&(e=o().Observable.of((0,h.zd)("chart-layers",[r]))),e})},onOpenFilterEditorEpic:function(e,t){return e.ofType(h.aE).switchMap(function(){var e=t.getState(),n=(0,j.oR)(e),r=(0,R.Yd)((0,k.reprojectBbox)(n.bbox.bounds,"EPSG:4326","EPSG:3857"),F.tu.size,0,21,96,F.tu.resolutions),i=_(_({},F.tu),{},{zoom:r,center:{crs:n.bbox.crs,x:(n.bbox.bounds.maxx+n.bbox.bounds.minx)/2,y:(n.bbox.bounds.maxy+n.bbox.bounds.miny)/2}}),a=null!=n&&n.bbox?i:null;return o().Observable.of((0,w.Ap)(a))})},onResetMapEpic:function(e,t){return e.ofType(S.x7).filter(function(e,n){return!(0,P.sY)(t.getState())&&"queryPanel"===n&&(0,I.Hd)(t.getState())}).switchMap(function(){return o().Observable.of((0,w.Ap)(null))})},onMapEditorOpenEpic:function(e){return e.ofType(N.W0).filter(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map;return null==e?void 0:e.widgetId}).switchMap(function(e){var t=e.map;return o().Observable.of((0,h.Dr)(t.widgetId,"maps",t,"merge"),(0,N.jD)("widgetInlineEditor"))})}}},795153:(e,t,n)=>{n.d(t,{A:()=>M});var r=n(541033),o=n.n(r),i=n(71665),a=n(754364),l=n(538704),c=n(985564),u=n(877731),s=n.n(u),d=n(858156),f=n.n(d),p=n(907309),v=n.n(p),y=n(590179),m=n.n(y),g=n(473916),b=n.n(g),h=n(499084),w=n.n(h),O=n(962193),S=n.n(O),P=n(905185),j=n(549112);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function D(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return(t=function(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{map:null,settings:{step:0}}};const M=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case i.Zz:return s()("defaults",n.cfg,t);case i._:return s()("builder.settings.".concat(n.key),n.value,t);case i.E1:return s()("builder.editor",n.widget,s()("builder.settings",n.settings||k.settings,t));case i.zx:return s()("builder.editor",x(x({},n.widget),{},{widgetType:n.widget&&n.widget.widgetType||"chart"}),s()("builder.settings.step",0,t));case i.Pv:return(0,j.YL)(n,t);case i.i:var r,u,d,p,y,g=x({},n.widget);"chart"===g.widgetType&&(g=m()(g,["layer","url"]));var h=null!==(r=null==t||null===(u=t.defaults)||void 0===u||null===(u=u.initialSize)||void 0===u?void 0:u.w)&&void 0!==r?r:1,O=null!==(d=null==t||null===(p=t.defaults)||void 0===p||null===(p=p.initialSize)||void 0===p?void 0:p.h)&&void 0!==d?d:1,E=f()(t,"containers[".concat(i.Kv,"].selectedLayoutId")),I=f()(t,"containers[".concat(i.Kv,"].layouts")),T=E||(null==I||null===(y=I[0])||void 0===y?void 0:y.id);return(0,P.Vo)("containers[".concat(n.target,"].widgets"),x(x(x({id:n.id},g),T?{layoutId:T}:{}),{},{dataGrid:n.id&&{w:h,h:O,x:0,y:0}}),{id:n.widget.id||n.id},t);case i.dj:var C="containers[".concat(n.target,"].widgets");return f()(t,C)?s()(C,n.widgets,t):t;case i.ao:var M,R=v()(f()(t,"containers[".concat(n.target,"].widgets")),{id:n.id}),F=n.value;return"merge"===n.mode&&(F="maps"===n.key?null==R||null===(M=R.maps)||void 0===M?void 0:M.map(function(e){var t;return e.mapId===(null===(t=n.value)||void 0===t?void 0:t.mapId)?x(x({},e),null==n?void 0:n.value):e}):Object.assign({},R[n.key],n.value)),(0,P.Vo)("containers[".concat(n.target,"].widgets"),s()(n.key,F,R),{id:n.id},t);case i._3:if(n.layer){var N=f()(t,"containers[".concat(i.Kv,"].widgets"));if(N)return s()("containers[".concat(i.Kv,"].widgets"),N.map(function(e){if("chart"===e.widgetType&&null!=e&&e.charts){var t,r=null!=e&&null!==(t=e.charts)&&void 0!==t&&t.length?D(e.charts):[];return r=r.map(function(e){var t,r=x({},e);return r.traces=null==r||null===(t=r.traces)||void 0===t?void 0:t.map(function(e){return f()(e,"layer.id")===n.layer.id?s()("layer",n.layer,e):e}),r}),s()("charts",r,e)}return f()(e,"layer.id")===n.layer.id?s()("layer",n.layer,e):e}),t)}return t;case i.SJ:var L="containers[".concat(i.Kv,"].widgets"),W=(0,P.XB)("containers[".concat(n.target,"].widgets"),{id:n.widget.id},t),G=f()(W,L,[]);return s()(L,G.map(function(e){if(e.dependenciesMap){var t=(r=i.Yi.exec((Object.values(e.dependenciesMap)||[])[0])||[],o=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(r,o)||A(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];if(t&&n.widget.id===t)return x(x({},m()(e,"dependenciesMap")),{},{mapSync:!1})}var r,o;return e}),t);case c.LL:var z=n.data;return s()("containers[".concat(i.Kv,"]"),x({},z),t);case a.if:var _,U,q,H=(null==t||null===(_=t.containers)||void 0===_?void 0:_[i.Kv].widgets)||[];H=null===(U=H)||void 0===U?void 0:U.map(function(e){var t,n=null===(t=e.maps)||void 0===t?void 0:t.map(function(e){var t;return x(x({},e),{},{layers:null===(t=e.layers)||void 0===t?void 0:t.map(function(e){return e.security?x(x({},e),{},{security:x(x({},e.security),{},{rand:o()()})}):e})})});return x(x({},e),{},{maps:n})});var Z=null===(q=t.builder)||void 0===q||null===(q=q.editor)||void 0===q||null===(q=q.maps)||void 0===q?void 0:q.map(function(e){return x(x({},e),{},{layers:e.layers.map(function(e){return e.security?x(x({},e),{},{security:x(x({},e.security),{},{rand:o()()})}):e})})});return s()("containers[".concat(i.Kv,"].widgets"),H,s()("builder.editor.maps",Z,t));case a.Lv:var V,$,K,B=(null==t||null===(V=t.containers)||void 0===V?void 0:V[i.Kv].widgets)||[];B=null===($=B)||void 0===$?void 0:$.map(function(e){var t,r=null===(t=e.maps)||void 0===t?void 0:t.map(function(e){return x(x({},e),{},{layers:e.layers.map(function(e){var t;return(null==e||null===(t=e.security)||void 0===t?void 0:t.sourceId)===n.protectedId?x(x({},e),{},{security:void 0}):e})})});return x(x({},e),{},{maps:r})});var Y=null===(K=t.builder)||void 0===K||null===(K=K.editor)||void 0===K||null===(K=K.maps)||void 0===K?void 0:K.map(function(e){return x(x({},e),{},{layers:e.layers.map(function(e){var t;return(null==e||null===(t=e.security)||void 0===t?void 0:t.sourceId)===n.protectedId?x(x({},e),{},{security:void 0}):e})})});return s()("containers[".concat(i.Kv,"].widgets"),B,s()("builder.editor.maps",Y,t));case l.mO:var J=(n.config||{}).widgetsConfig;return S()(J)?t:(J=(0,j.Mx)(J),s()("containers[".concat(i.Kv,"]"),x({},J),t));case i.cv:return s()("containers[".concat(n.target,"].layout"),n.layout)(s()("containers[".concat(n.target,"].layouts"),n.allLayouts,t));case i.Y3:case c.Vd:return s()("containers[".concat(i.Kv,"]"),k.containers[i.Kv],t);case i.OO:var X=n.key,Q=n.value;return s()("dependencies[".concat(X,"]"),Q,t);case i.V$:var ee=n.key;return s()("dependencies[".concat(ee,"]"),null,t);case i.j2:var te=n.dependencies;return s()("dependencies",te,t);case i.Up:return s()("dependencies",k.dependencies,t);case i.D5:var ne=n.widget,re=void 0===ne?{}:ne;if(re.dataGrid&&re.dataGrid.static)return t;var oe=f()(t,"containers[".concat(n.target,"].collapsed[").concat(re.id));if(oe){var ie=[].concat(D(f()(t,"containers[".concat(n.target,"].layout"),[])),D(w()(f()(oe,"layout",[])))),ae=b()(f()(t,"containers[".concat(n.target,"].layouts"),{}),function(){var e=arguments.length>1?arguments[1]:void 0;return[].concat(D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),D(w()(f()(oe,"layouts[".concat(e,"]"),[]))))});return m()((0,P.Zz)(s()("containers[".concat(n.target,"].layout"),ie),s()("containers[".concat(n.target,"].layouts"),ae))(t),"containers[".concat(n.target,"].collapsed[").concat(re.id,"]"))}return s()("containers[".concat(n.target,"].collapsed[").concat(re.id,"]"),{layout:v()(f()(t,"containers[".concat(n.target,"].layout"),[]),{i:re.id}),layouts:b()(f()(t,"containers[".concat(n.target,"].layouts"),{}),function(e){return v()(e,{i:re.id})})},t);case i.wf:var le,ce,ue,se,de,fe,pe,ve,ye,me,ge,be=n.widget,he=null==t||null===(le=t.containers)||void 0===le||null===(le=le[n.target])||void 0===le?void 0:le.maximized;if(!be||null!==(ce=be.dataGrid)&&void 0!==ce&&ce.static)return t;var we,Oe=null==t||null===(ue=t.containers)||void 0===ue||null===(ue=ue[n.target])||void 0===ue?void 0:ue.layouts,Se=(null==t||null===(se=t.containers)||void 0===se||null===(se=se[n.target])||void 0===se?void 0:se.selectedLayoutId)||(null==Oe||null===(de=Oe[0])||void 0===de?void 0:de.id),Pe=Array.isArray(Oe),je=null!=he&&he.widget&&Array.isArray(he.widget)?he.widget.find(function(e){return e.id===be.id}):be;if(je&&null!=he&&he.widget&&(null==he||null===(fe=he.widget)||void 0===fe?void 0:fe.length)>1){var Ee,De,Ae=x(x({},he),{},{widget:he.widget.filter(function(e){return e.id!==be.id})}),Ie=Oe.map(function(e){return e.id===be.layoutId?x({},he.layouts.find(function(e){return e.id===be.layoutId})):x({},e)});return(0,P.Zz)(s()("containers[".concat(n.target,"].maximized"),Ae),s()("containers[".concat(n.target,"].layout"),null===(Ee=Ie.find(function(e){return e.id===be.layoutId}))||void 0===Ee?void 0:Ee.md),s()("containers[".concat(n.target,"].layouts"),Ie),s()("containers[".concat(n.target,"].widgets"),null==t||null===(De=t.containers)||void 0===De||null===(De=De[n.target])||void 0===De||null===(De=De.widgets)||void 0===De?void 0:De.map(function(e){return e.id===be.id?x(x({},e),{},{dataGrid:x(x({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e})))(t)}if(je&&null!=he&&he.widget)return(0,P.Zz)(s()("containers[".concat(n.target,"].layout"),he.layout),s()("containers[".concat(n.target,"].layouts"),he.layouts),s()("containers[".concat(n.target,"].maximized"),{}),s()("containers[".concat(n.target,"].widgets"),null==t||null===(we=t.containers)||void 0===we||null===(we=we[n.target])||void 0===we||null===(we=we.widgets)||void 0===we?void 0:we.map(function(e){return e.id===he.widget.id?x(x({},e),{},{dataGrid:x(x({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e})))(t);if(null!=t&&null!==(pe=t.containers)&&void 0!==pe&&null!==(pe=pe[n.target])&&void 0!==pe&&null!==(pe=pe.collapsed)&&void 0!==pe&&pe[be.id])return t;var Te=x(x({},v()(null==t||null===(ve=t.containers)||void 0===ve||null===(ve=ve[n.target])||void 0===ve?void 0:ve.layout,{i:be.id})),{x:0,y:0,w:1,h:1}),xe=Pe?Oe.map(function(e){return e.id===Se?x(x({},e),{},{xxs:[Te],md:[]}):x({},e)}):{xxs:[Te]};return(0,P.Zz)(s()("containers[".concat(n.target,"].maximized"),{widget:Pe?[].concat(D((null==he?void 0:he.widget)||[]),[be]):be,layout:(null==he?void 0:he.layout)||(null==t||null===(ye=t.containers)||void 0===ye||null===(ye=ye[n.target])||void 0===ye?void 0:ye.layout),layouts:(null==he?void 0:he.layouts)||(null==t||null===(me=t.containers)||void 0===me||null===(me=me[n.target])||void 0===me?void 0:me.layouts)}),s()("containers[".concat(n.target,"].layout"),[Te]),s()("containers[".concat(n.target,"].layouts"),xe),s()("containers[".concat(n.target,"].widgets"),null==t||null===(ge=t.containers)||void 0===ge||null===(ge=ge[n.target])||void 0===ge||null===(ge=ge.widgets)||void 0===ge?void 0:ge.map(function(e){return e.id===be.id?x(x({},e),{},{dataGrid:x(x({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e})))(t);case i.FM:var Ce=f()(t,"containers[".concat(n.target,"].widgets"),[]).filter(function(e){return!e.dataGrid||!e.dataGrid.static}),ke=Ce.filter(function(e){return f()(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))}),Me=Ce.filter(function(e){return!f()(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))});return 0===Me.length?ke.reduce(function(t,n){return e(t,(0,i.Ye)(n))},t):Me.length>0?Me.reduce(function(t,n){return e(t,(0,i.Ye)(n))},t):t;case i.Mi:return s()("tray",n.value,t);case i.uh:return s()("containers[".concat(n.target,"].layouts"),n.layouts,t);case i.Kw:return s()("containers[".concat(n.target,"].selectedLayoutId"),n.viewId,t);default:return t}}}}]);