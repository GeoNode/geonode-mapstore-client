(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[60297,47310],{460604:(e,t,r)=>{"use strict";r.d(t,{hn:()=>n,yg:()=>o,vD:()=>i,jJ:()=>a,oy:()=>l,am:()=>u,W:()=>c,B1:()=>s,YP:()=>f,fU:()=>p,cY:()=>d});var n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",l="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",u="ADDITIONALLAYER:MERGE_OPTIONS_BY_OWNER",c=function(e,t){return{type:a,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},s=function(e,t){return{type:l,owner:e,options:t}},f=function(e,t){return{type:u,owner:e,options:t}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.owner;return{type:o,id:t,owner:r}},d=function(e){return{type:i,owner:e}}},604206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>n,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>l,uB:()=>s,Rh:()=>f,G_:()=>p,vU:()=>d,Vw:()=>y,KD:()=>m,uj:()=>v,lo:()=>b,Yf:()=>g,fo:()=>E,PY:()=>h,bp:()=>O,oJ:()=>w,k4:()=>S,sc:()=>A,Li:()=>I});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",c="DRAW:DRAWING_FEATURES",s="DRAW:SET_SNAPPING_LAYER",f="DRAW:SNAPPING_IS_LOADING",p="DRAW:TOGGLE_SNAPPING",d="DRAW:SET_SNAPPING_CONFIG";function y(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function m(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function v(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function b(){return{type:l}}function g(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function E(e,t){return{type:o,geometry:e,owner:t}}function h(e){return{type:i,currentStyle:e}}var O=function(e){return g("clean","",e,[],{})};function w(){return{type:p}}function S(e){return{type:s,snappingLayer:e}}function A(){return{type:f}}function I(e,t,r){return{type:d,value:e,prop:t,pluginCfg:r}}},433528:(e,t,r)=>{"use strict";r.d(t,{gJ:()=>n,Oj:()=>o,jp:()=>i,CM:()=>a,DU:()=>l,aO:()=>u,v6:()=>c,K8:()=>s,IN:()=>f,zh:()=>p,AH:()=>d,Ub:()=>y,_9:()=>m,JB:()=>v,oh:()=>b,AY:()=>g,yi:()=>E,SW:()=>h,Hk:()=>O,iQ:()=>w,dY:()=>S,$:()=>A,_u:()=>I,gG:()=>T,DI:()=>P,dZ:()=>_,qw:()=>R,f$:()=>j,bZ:()=>D,$O:()=>N,sF:()=>L,Gk:()=>C,vO:()=>G,ut:()=>M,MK:()=>U,VV:()=>F,B8:()=>x,VM:()=>k,a3:()=>V,Xp:()=>Y,DA:()=>z,sK:()=>Z,r:()=>H,iB:()=>W,WB:()=>K,vm:()=>B,EH:()=>q,Yd:()=>$,Hg:()=>Q,Lz:()=>X,ye:()=>J,Jb:()=>ee,d:()=>te,fT:()=>re,Ib:()=>ne,UB:()=>oe,Uh:()=>ie,QT:()=>ae,oL:()=>le,Ap:()=>ue,KD:()=>ce,Z_:()=>se,Vw:()=>fe,sY:()=>pe,kA:()=>de,gr:()=>ye,pX:()=>me,F5:()=>ve,MO:()=>be,dq:()=>ge,DY:()=>Ee,oO:()=>he,uF:()=>Oe,a8:()=>we,Pv:()=>Se,an:()=>Ae,lg:()=>Ie,nY:()=>Te,nG:()=>Pe,lx:()=>_e,$S:()=>Re,gc:()=>je,Uz:()=>De,fO:()=>Ne,$E:()=>Le,cE:()=>Ce,JK:()=>Ge,YV:()=>Me,t9:()=>Ue,YG:()=>Fe,HT:()=>xe,MY:()=>ke,ve:()=>Ve,hB:()=>Ye,Ox:()=>ze,zd:()=>Ze,aT:()=>He,VH:()=>We,Yb:()=>Ke,Jr:()=>Be,pP:()=>qe,gL:()=>$e,dM:()=>Qe});var n="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",i="FEATUREGRID:DESELECT_FEATURES",a="FEATUREGRID:CLEAR_SELECTION",l="FEATUREGRID:SET_SELECTION_OPTIONS",u="FEATUREGRID:TOGGLE_MODE",c="FEATUREGRID:TOGGLE_FEATURES_SELECTION",s="FEATUREGRID:FEATURES_MODIFIED",f="FEATUREGRID:NEW_FEATURE",p="FEATUREGRID:SAVE_CHANGES",d="FEATUREGRID:SAVING",y="FEATUREGRID:START_EDITING_FEATURE",m="FEATUREGRID:START_DRAWING_FEATURE",v="FEATUREGRID:DELETE_GEOMETRY",b="FEATUREGRID:DELETE_GEOMETRY_FEATURE",g="FEATUREGRID:SAVE_SUCCESS",E="FEATUREGRID:CLEAR_CHANGES",h="FEATUREGRID:SAVE_ERROR",O="FEATUREGRID:DELETE_SELECTED_FEATURES",w="SET_FEATURES",S="FEATUREGRID:SORT_BY",A="FEATUREGRID:SET_LAYER",I="QUERY:UPDATE_FILTER",T="FEATUREGRID:CHANGE_PAGE",P="FEATUREGRID:GEOMETRY_CHANGED",_="DOCK_SIZE_FEATURES",R="FEATUREGRID:TOGGLE_TOOL",j="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",D="ASK_CLOSE_FEATURE_GRID_CONFIRM",N="FEATUREGRID:OPEN_GRID",L="FEATUREGRID:CLOSE_GRID",C="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",G="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",M="FEATUREGRID:SET_PERMISSION",U="FEATUREGRID:DISABLE_TOOLBAR",F="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",x="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",k="FEATUREGRID:ADVANCED_SEARCH",V="FEATUREGRID:ZOOM_ALL",Y="FEATUREGRID:INIT_PLUGIN",z="FEATUREGRID:SIZE_CHANGE",Z="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",H="FEATUREGRID:UPDATE_EDITORS_OPTIONS",W="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",K="FEATUREGRID:SET_SYNC_TOOL",B="FEATUREGRID:SET_VIEWPORT_FILTER",q={EDIT:"EDIT",VIEW:"VIEW"},$="FEATUREGRID:START_SYNC_WMS",Q="FEATUREGRID:STOP_SYNC_WMS",X="STORE_ADVANCED_SEARCH_FILTER",J="LOAD_MORE_FEATURES",ee="FEATUREGRID:QUERY_RESULT",te="FEATUREGRID:SET_TIME_SYNC",re="FEATUREGRID:SET_PAGINATION";function ne(){return{type:Z}}function oe(e,t){return{type:ee,features:e,pages:t}}function ie(e){return{type:X,filterObj:e}}function ae(){return{type:Y,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function le(){return{type:C}}function ue(){return{type:G}}function ce(e,t){return{type:o,features:e,append:t}}function se(e){return{type:n,options:e}}function fe(e){return{type:P,features:e}}function pe(){return{type:y}}function de(){return{type:m}}function ye(e){return{type:i,features:e}}function me(){return{type:v}}function ve(e){return{type:b,features:e}}function be(){return{type:a}}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,r=e.showCheckbox;return{type:l,multiselect:t,showCheckbox:r}}function Ee(e,t){return{type:S,sortBy:e,sortOrder:t}}function he(e,t){return{type:T,page:e,size:t}}function Oe(e){return{type:A,id:e}}function we(e){return{type:I,update:e,append:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}function Se(e,t){return{type:R,tool:e,value:t}}function Ae(e,t,r){return{type:j,name:e,key:t,value:r}}function Ie(){return{type:u,mode:q.EDIT}}function Te(){return{type:u,mode:q.VIEW}}function Pe(e,t){return{type:s,features:e,updated:t}}function _e(e){return{type:f,features:e}}function Re(){return{type:p}}function je(){return{type:g}}function De(){return{type:O}}function Ne(){return{type:d}}function Le(){return{type:E}}function Ce(){return{type:h}}function Ge(){return{type:D}}function Me(e){return{type:L,closer:e}}function Ue(){return{type:N}}function Fe(e){return{type:U,disabled:e}}function xe(e){return{type:M,permission:e}}function ke(){return{type:k}}function Ve(){return{type:V}}function Ye(){return{type:$}}function ze(e,t){return{type:z,size:e,dockProps:t}}var Ze=function(e){return{type:J,pages:e}},He=function(e){return{type:F,activated:e}},We=function(e){return{type:x,deactivated:e}},Ke=function(e){return{type:te,value:e}},Be=function(e){return{type:re,size:e}},qe=function(e){return{type:W,updateFilterAction:e}},$e=function(e){return{type:K,syncWmsFilter:e}},Qe=function(e){return{type:B,value:e}}},801550:(e,t,r)=>{"use strict";r.d(t,{pP:()=>n,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>l,Qy:()=>u,IL:()=>c,Li:()=>s,OW:()=>f,ZO:()=>p,Um:()=>d,TF:()=>y,Ls:()=>m,Ec:()=>v,Eu:()=>b,JJ:()=>g,nZ:()=>E,YD:()=>h,GI:()=>O,Jb:()=>w,Uh:()=>S,e$:()=>A,eh:()=>I,$j:()=>T,bJ:()=>P,Mk:()=>_,xy:()=>R,o6:()=>j,NH:()=>D,FP:()=>N,Mo:()=>L,sO:()=>C,Px:()=>G,hd:()=>M,y9:()=>U,Ju:()=>F,BV:()=>x,SO:()=>k,H0:()=>V,$X:()=>Y,ou:()=>z,NE:()=>Z,Lq:()=>H,aN:()=>W});var n="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",l="PAN_TO",u="ZOOM_TO_EXTENT",c="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",f="CHANGE_MAP_SCALES",p="CHANGE_MAP_STYLE",d="CHANGE_ROTATION",y="CREATION_ERROR_LAYER",m="UPDATE_VERSION",v="INIT_MAP",b="RESIZE_MAP",g="CHANGE_MAP_LIMITS",E="SET_MAP_RESOLUTIONS",h="REGISTER_EVENT_LISTENER",O="UNREGISTER_EVENT_LISTENER",w="MOUSE_MOVE",S="MOUSE_OUT",A="MAP:MAP_PLUGIN_LOAD",I="MAP:ORIENTATION",T="MAP:UPDATE_MAP_VIEW",P="MAP:UPDATE_MAP_OPTIONS";function _(e,t,r,n){return{type:A,mapType:t,loading:e,loaded:r,error:n}}function R(e,t,r){return{type:c,pos:e,zoom:t,crs:r}}function j(e,t,r,o,i,a,l,u){return{type:n,center:e,zoom:t,bbox:r,size:o,mapStateSource:i,projection:a,viewerOptions:l,resolution:u}}function D(e){return{type:s,crs:e}}function N(e,t){return{type:o,point:e,layer:t}}function L(e){return{type:i,pointer:e}}function C(e,t){return{type:a,zoom:e,mapStateSource:t}}function G(e,t,r,n){return{type:u,extent:e,crs:t,maxZoom:r,options:n}}function M(e,t){return{type:p,style:e,mapStateSource:t}}function U(e){return{type:v,disableFeedbackMask:e}}function F(){return{type:b}}function x(e){var t=e.restrictedExtent,r=e.crs,n=e.minZoom;return{type:g,restrictedExtent:t,crs:r,minZoom:n}}function k(e){return{type:E,resolutions:e}}var V=function(e,t){return{type:h,eventName:e,toolName:t}},Y=function(e,t){return{type:O,eventName:e,toolName:t}},z=function(e){return{type:w,position:e}},Z=function(){return{type:S}},H=function(e){return{type:I,orientation:e}},W=function(e){return{type:P,configUpdate:e}}},921914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>l,Pn:()=>u,DZ:()=>c,e8:()=>s,E0:()=>f,F9:()=>p,X_:()=>d,pb:()=>y,Re:()=>m,ih:()=>v,xy:()=>b,jL:()=>g,oz:()=>E,ph:()=>h,lF:()=>O,gG:()=>w,cb:()=>S,GI:()=>A,B1:()=>I,fv:()=>T,gc:()=>P,zX:()=>_,ZF:()=>R,Zb:()=>j,DW:()=>D,Xp:()=>N,Fm:()=>L,sV:()=>C,LU:()=>G,XP:()=>M,WU:()=>U,mK:()=>F,g:()=>x,ws:()=>k,HP:()=>V,aN:()=>Y,Pg:()=>Z,u0:()=>H,TM:()=>W,PM:()=>K,lK:()=>B,sv:()=>q,MO:()=>$,oO:()=>Q,Mc:()=>X,Zw:()=>J,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>ne,Y$:()=>oe,Qu:()=>ie,kT:()=>ae});var n=r(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",c="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",f="SHOW_MAPINFO_MARKER",p="HIDE_MAPINFO_MARKER",d="SHOW_REVERSE_GEOCODE",y="HIDE_REVERSE_GEOCODE",m="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",b="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",E="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",h="TOGGLE_MAPINFO_STATE",O="UPDATE_CENTER_TO_MARKER",w="IDENTIFY:CHANGE_PAGE",S="IDENTIFY:CLOSE_IDENTIFY",A="IDENTIFY:CHANGE_FORMAT",I="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",T="IDENTIFY:EDIT_LAYER_FEATURES",P="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",_="IDENTIFY:SET_MAP_TRIGGER",R="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",j="IDENTIFY:SET_SHOW_IN_MAP_POPUP",D="IDENTIFY:IDENTIFY_IS_MOUNTED",N="IDENTIFY:INIT_PLUGIN";function L(e,t,r,n,i){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:i}}function C(e,t,r,n){return{type:i,error:t,reqId:e,requestParams:r,layerMetadata:n}}function G(){return{type:m}}function M(){return{type:v}}function U(e,t){return{type:u,reqId:e,request:t}}function F(e){return{type:l,enabled:e}}function x(){return{type:c}}function k(e){return{type:s,infoFormat:e}}function V(){return{type:f}}function Y(){return{type:p}}function z(e){return{type:d,reverseGeocodeData:e.data}}function Z(e){return function(t){n.Z.reverseGeocode(e).then((function(e){t(z(e))})).catch((function(e){t(z(e))}))}}function H(){return{type:y}}function W(){return{type:h}}function K(e){return{type:O,status:e}}function B(e,t){return{type:b,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function q(e){return{type:g,point:e}}function $(e){return{type:E,enabled:e}}function Q(e){return{type:w,index:e}}var X=function(){return{type:S}},J=function(e){return{type:A,format:e}},ee=function(e){return{type:I,showCoordinateEditor:e}},te=function(e){return{type:T,layer:e}},re=function(e){return{type:P,query:e}},ne=function(e){return{type:_,trigger:e}},oe=function(e){return{type:j,value:e}},ie=function(e){return{type:D,isMounted:e}},ae=function(e){return{type:N,cfg:e}}},647310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(375875),o=r.n(n),i=r(472500),a=r.n(i),l=r(727418),u=r.n(l),c={format:"json",bounded:0,polygon_geojson:1,priority:5};const s={geocode:function(e,t){var r=u()({q:e},c,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=u()({lat:e.lat,lon:e.lng},t||{},c),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},807472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(727418),o=r.n(n),i=r(45697),a=r.n(i),l=r(124852),u=r.n(l),c=r(485294),s=r.n(c),f=r(472986),p=r.n(f),d=r(805346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function g(e,t,r){return t=h(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function w(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var A=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return w(e=g(this,t,[].concat(n)),"renderLoading",(function(){return e.props.maskLoading?u().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},u().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},u().createElement(d.Z,{msgId:"loading"}),u().createElement(p(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),w(e,"renderRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),w(e,"hasRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),w(e,"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=u().createElement("div",{id:this.props.id,style:v({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},u().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),u().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?u().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):u().createElement("span",null)),r=this.props.draggable?u().createElement(s(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?u().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&b(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);w(A,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),w(A,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const I=A},135400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(124852),o=r.n(n),i=r(379313);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.mainViewStyle,a=void 0===n?{}:n,l=e.contentStyle,c=void 0===l?{}:l,s=e.imageStyle,f=void 0===s?{}:s,p=e.glyph,d=void 0===p?"info-sign":p,y=e.iconFit,m=e.title,v=e.tooltip,b=e.tooltipId,g=e.description,E=e.content;return o().createElement("div",{className:"empty-state-container",style:u({height:y?"100%":void 0},r)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:u({height:y?"100%":void 0},a)},d?o().createElement("div",{key:"glyph",className:"empty-state-image",style:u({height:y?"100%":void 0},f)},o().createElement(i.Z,{iconFit:y,tooltip:v,tooltipId:b,glyph:d})):null,m?o().createElement("h1",{key:"title"},m):null,g?o().createElement("p",{key:"description",className:"empty-state-description"},g):null),o().createElement("div",{key:"content",className:"empty-state-content",style:c},E))}},379313:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n),i=r(480681),a=r(496259),l=(0,r(815135).Z)(i.gG);const u=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.tooltip,i=e.tooltipId,u=e.iconFit,c=e.padding,s=void 0===c?0:c,f=e.margin,p=void 0===f?0:f;return o().createElement(a.Z,null,(function(e){var t=e.width,a=e.height;return o().createElement(l,{glyph:r,tooltip:n,tooltipId:i,style:{display:"inline-block",padding:s+"px",margin:p+"px",textAlign:"center",fontSize:u?Math.min(t,a)-2*s-2*p:t-2*s-2*p}})}))}},103355:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Tr});var n={};r.r(n),r.d(n,{getAPI:()=>ee,getLocation:()=>re,loadAPI:()=>te,loadGoogleMapsAPI:()=>J});var o={};r.r(o),r.d(o,{getAPI:()=>ie,getLocation:()=>ae,loadAPI:()=>oe});var i={};r.r(i),r.d(i,{getAPI:()=>de,getLocation:()=>ye,loadAPI:()=>pe});var a={};r.r(a),r.d(a,{disableGFIForStreetViewEpic:()=>yr,streetViewMapClickHandler:()=>vr,streetViewSetupTearDown:()=>mr,streetViewSyncLayer:()=>br,tearDownStreetViewOnDrawToolActive:()=>gr});var l=r(124852),u=r.n(l),c=r(480681),s=r(171703),f=r(322843),p="street-view",d=p,y="street-view-data",m={GOOGLE:"google",CYCLOMEDIA:"cyclomedia",MAPILLARY:"mapillary"},v="__cycloMedia_streetView_source_credential__",b=r(22222),g=r(805346),E=r(807472),h=r(101706),O=r(624262),w=r(607147),S=r(569893),A=r(2510);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=(0,w.Yq)(p),j=function(e){var t;return null!==(t=null==e?void 0:e.streetView)&&void 0!==t?t:{}},D=function(e){return function(t){var r,n,o;return null!==(r=null===(n=j(t))||void 0===n||null===(o=n.apiLoaded)||void 0===o?void 0:o[e])&&void 0!==r&&r}},N=(0,b.P1)(j,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).location})),L=(0,b.P1)(j,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pov}));function C(e){var t,r;return null!==(t=null===(r=j(e))||void 0===r?void 0:r.configuration)&&void 0!==t?t:{}}function G(e){var t,r;return null!==(t=null===(r=C(e))||void 0===r?void 0:r.provider)&&void 0!==t?t:"google"}var M=function(e){return{format:"geostyler",body:{name:"My Style",rules:[{name:"",symbolizers:[P(P({color:"#3165ef",fillOpacity:.6,strokeColor:"#3165ef",strokeOpacity:.8,strokeWidth:2,radius:6,wellKnownName:"Circle",msHeightReference:"none",msBringToFront:!0},e),{},{kind:"Mark",symbolizerId:"d2c4dab1-a0e7-11ee-a734-df08d0913056"})],ruleId:"d2c4dab0-a0e7-11ee-a734-df08d0913056"}]}}},U={provider:"custom",type:"tileprovider",url:"https://mts1.googleapis.com/vt?hl=en-US&lyrs=svv|cb_client:apiv3&style=40,18&x={x}&y={y}&z={z}"},F={type:"wfs",security:{type:"Basic",sourceType:"sessionStorage",sourceId:v},strategy:"bbox",maxResolution:1,serverType:O.z$.NO_VENDOR,url:"https://atlasapi.cyclomedia.com/api/Recordings/wfs",name:"atlas:Recording"},x={type:"vector"},k=(0,b.P1)(G,C,(function(e,t){var r,n=null!=t&&t.clampToGround?"clamp":"none";switch(e){case m.GOOGLE:return U;case m.CYCLOMEDIA:return P(P({},F),{},{style:M({msHeightReference:n})});case m.MAPILLARY:return P(P({},x),{},{style:M({msHeightReference:n}),url:null==t||null===(r=t.providerSettings)||void 0===r?void 0:r.ApiURL});default:return{}}}));function V(e){switch(G(e)){case m.GOOGLE:return function(e){var t,r,n,o,i,a,l,u,c;return null!==(t=null!==(r=null!==(n=null===(o=C(e))||void 0===o?void 0:o.apiKey)&&void 0!==n?n:null===(i=(0,A.kQ)(e))||void 0===i||null===(a=i.apiKeys)||void 0===a?void 0:a.googleStreetViewAPIKey)&&void 0!==r?r:null===(l=(0,A.kQ)(e))||void 0===l||null===(u=l.apiKeys)||void 0===u?void 0:u.googleAPIKey)&&void 0!==t?t:null===(c=(0,A.kQ)(e))||void 0===c?void 0:c.googleAPIKey}(e);case m.CYCLOMEDIA:return function(e){var t,r,n,o;return null!==(t=null===(r=C(e))||void 0===r?void 0:r.apiKey)&&void 0!==t?t:null===(n=(0,A.kQ)(e))||void 0===n||null===(o=n.apiKeys)||void 0===o?void 0:o.cyclomediaAPIKey}(e);case m.MAPILLARY:return function(e){var t,r,n,o,i=C(e);return null!=i&&null!==(t=i.providerSettings)&&void 0!==t&&t.ApiURL?{}:null!==(r=null==i?void 0:i.apiKey)&&void 0!==r?r:null===(n=(0,A.kQ)(e))||void 0===n||null===(o=n.apiKeys)||void 0===o?void 0:o.mapillaryAPIKey}(e);default:return null}}function Y(e){var t,r;return null===(t=null===(r=C(e))||void 0===r?void 0:r.useDataLayer)||void 0===t||t}function z(e){var t;return null===(t=C(e))||void 0===t?void 0:t.panoramaOptions}var Z=r(782904),H=r(197395),W=r(433311),K=function(e){var t,r;return{pano:null==e?void 0:e.pano,shortDescription:null==e?void 0:e.shortDescription,description:null==e?void 0:e.description,latLng:{lat:null==e||null===(t=e.latLng)||void 0===t?void 0:t.lat(),lng:null==e||null===(r=e.latLng)||void 0===r?void 0:r.lng()}}};function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}var q,$=["apiKey","version","useStaticCache"];function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiKey,r=e.version,n=void 0===r?"weekly":r,o=e.useStaticCache,i=void 0===o||o,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,$);if(!(i?q:void 0)){var l=new W.a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({apiKey:t,version:n},a));return l.load().then((function(e){return q=e,e}))}return new Promise((function(e){return e(q)}))};function ee(){return q}var te=J;function re(e){var t=e.latlng;return(new(ee().maps.StreetViewService)).getPanorama({location:t,radius:50}).then((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,t=(null!=e?e:{}).location;return K(t)}))}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var oe=function(){return new Promise((function(e){return e()}))},ie=function(){},ae=function(e){return new Promise((function(t,r){var n,o,i,a=e.intersectedFeatures,l=null!==(n=null===(o=(void 0===a?[]:a).find((function(e){return e.id===y})))||void 0===o?void 0:o.features)&&void 0!==n?n:[];l.length||r({code:"ZERO_RESULTS"});var u,c,s=null!==(i=l[0])&&void 0!==i?i:{},f=s.properties,p=s.geometry,d=(u=(void 0===p?{}:p).coordinates,c=3,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(u,c)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,t):void 0}}(u,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=d[0],v=d[1],b=d[2];t({properties:f,latLng:{lat:v,lng:m,h:void 0===b?0:b}})}))};function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var pe=function(){return new Promise((function(e){return e()}))},de=function(){},ye=function(e){return new Promise((function(t,r){var n,o,i,a,l=e.intersectedFeatures,u=null!==(n=null===(o=(void 0===l?[]:l).find((function(e){return e.id===y})))||void 0===o?void 0:o.features)&&void 0!==n?n:[];u.length||r({code:"ZERO_RESULTS"});var c,s,f={};if(null!==(i=u[0])&&void 0!==i&&i.geometry){var p,d=(null!==(p=u[0])&&void 0!==p?p:{}).geometry,m=(c=(void 0===d?{}:d).coordinates,s=3,function(e){if(Array.isArray(e))return e}(c)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(c,s)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}(c,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=m[0],b=m[1],g=m[2];f={latLng:{lat:b,lng:v,h:void 0===g?0:g}}}else f=null!=e&&e.latlng?{latLng:ce({},null==e?void 0:e.latlng)}:{};f.properties=(null===(a=u[0])||void 0===a?void 0:a.properties)||{},t(f)}))};const me={google:n,cyclomedia:o,mapillary:i};var ve="STREET_VIEW:API_LOADING",be="STREET_VIEW:API_LOADED",ge="STREET_VIEW:SET_LOCATION",Ee="STREET_VIEW:SET_POV",he="STREET_VIEW:CONFIGURE",Oe="STREET_VIEW:RESET",we="STREET_VIEW:RESET_STREET_VIEW_DATA",Se="STREET_VIEW:UPDATE_STREET_VIEW_LAYER";function Ae(e){return{type:ve,loading:e}}function Ie(){return function(e,t){var r,n,o=G(t());if(D(o)(t()))e((0,Z.Xi)(p,"enabled"));else{Ae(!0);var i=V(t()),a=null!==(r=null===(n=C(t()))||void 0===n?void 0:n.providerSettings)&&void 0!==r?r:{};me[o]||(console.error("No API found for provider ".concat(o)),e((0,H.vU)({title:"streetView.title",message:"No API found for provider ".concat(o)}))),me[o].loadAPI({apiKey:i,providerSettings:a}).then((function(){Ae(!1),e(function(e){return{type:be,provider:e}}(o)),e((0,Z.Xi)(p,"enabled"))})).catch((function(e){Ae(!1),console.log(e)}))}}}function Te(e){return{type:ge,location:e}}function Pe(e){return{type:Ee,pov:e}}var _e=r(618446),Re=r.n(_e),je=r(472986),De=r.n(je),Ne=r(135400);const Le=function(e){var t=e.loading,r=void 0!==t&&t,n=e.title,o=void 0===n?u().createElement(g.Z,{msgId:"streetView.emptyTitle"}):n,i=e.description,a=void 0===i?u().createElement(g.Z,{msgId:"streetView.emptyDescription"}):i;return u().createElement("div",{className:"empty-street-view"},u().createElement(Ne.Z,{iconFit:!1,glyph:"road",title:o,description:u().createElement(u().Fragment,null,r?u().createElement(u().Fragment,null,u().createElement(De(),{style:{display:"inline-block",verticalAlign:"bottom"},spinnerName:"circle",noFadeIn:!0})," "):null,a)}))};function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){Ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ke=function(e){var t=e.size,r=e.google,n=e.position,o=e.location,i=e.pov,a=e.className,c=void 0===a?"google-street-view":a,s=e.style,f=void 0===s?{}:s,p=e.panoramaOptions,d=void 0===p?{}:p,y=(0,l.useRef)(),m=Fe((0,l.useState)(),2),v=m[0],b=m[1];(0,l.useEffect)((function(){if(r&&o&&!v){var e=new r.maps.StreetViewPanorama(y.current,Me({position:n,pov:i,zoom:1},d));o.pano&&e.setPano(o.pano),b(e)}}),[r,o,v,d]);var g=Fe((0,l.useState)(),2),E=g[0],h=g[1];return(0,l.useEffect)((function(){return v&&h(function(e,t){var r=t.location,n=t.setLocation,o=t.setPov,i=[];return i.push(e.addListener("position_changed",(function(){var t=K(e.getLocation());Re()(null==r?void 0:r.latLng,null==t?void 0:t.latLng)||n(t)}))),i.push(e.addListener("pov_changed",(function(){var t=e.getPov(),r=t.heading,n=t.pitch;o({heading:r,pitch:n})}))),i}(v,e)),function(e){e&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){return e.removeListener(t)}))}(v,E)}),[v]),(0,l.useEffect)((function(){r&&r.maps.event.trigger(v,"resize")}),[t]),(0,l.useEffect)((function(){v&&o.pano&&v.setPano(o.pano)}),[null==o?void 0:o.pano]),u().createElement(u().Fragment,null,u().createElement("div",{className:c,style:Me({display:v?"none":"block"},f)},u().createElement(Le,null)),u().createElement("div",{className:c,style:Me({display:v?"block":"none"},f),ref:y}))};var Ve=["apiLoaded","enabled"];function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ye.apply(null,arguments)}const ze=(0,s.connect)((0,b.zB)({apiLoaded:D("google"),location:N,panoramaOptions:z}),{setLocation:Te,setPov:Pe})((function(e){var t=e.apiLoaded,r=(e.enabled,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ve));return t?u().createElement(ke,Ye({location,google:ee()},r)):u().createElement("div",{className:"street-view-api-loader"},u().createElement(g.Z,{msgId:"streetView.loadingAPI"}))}));var Ze=r(774565),He=r(916651),We=r(233044);function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Be(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var qe=(0,r(815135).Z)(c.zx);const $e=function(e){var t=e.setCredentials,r=void 0===t?function(){}:t,n=e.credentials,o=e.showCredentialsForm,i=e.setShowCredentialsForm,a=void 0===i?function(){}:i,s=Ke((0,l.useState)((null==n?void 0:n.username)||""),2),f=s[0],p=s[1],d=Ke((0,l.useState)((null==n?void 0:n.password)||""),2),y=d[0],m=d[1];return o?u().createElement("div",{className:"street-view-credentials"},u().createElement("h5",null,u().createElement(g.Z,{msgId:"streetView.cyclomedia.insertCredentials"})),u().createElement(c.l0,null,u().createElement(c.J$,null,u().createElement(g.Z,{msgId:"streetView.cyclomedia.username"})),u().createElement(c.NI,{type:"text",value:f,onChange:function(e){return p(e.target.value)}}),u().createElement(c.J$,null,u().createElement(g.Z,{msgId:"streetView.cyclomedia.password"})),u().createElement(c.NI,{type:"password",value:y,onChange:function(e){return m(e.target.value)}}),u().createElement("div",{className:"street-view-credentials-form-buttons"},u().createElement(c.zx,{disabled:!f||!y,onClick:function(){return r({username:f,password:y}),void a(!1)}},u().createElement(g.Z,{msgId:"streetView.cyclomedia.submit"})),(null==n?void 0:n.username)&&(null==n?void 0:n.password)&&u().createElement(c.zx,{onClick:function(){r({username:n.username,password:n.password}),a(!1)}},u().createElement(g.Z,{msgId:"cancel"}))))):u().createElement("div",{style:{textAlign:"right"}},u().createElement(qe,{style:{marginRight:10,border:"none",background:"none"},tooltipId:"streetView.cyclomedia.changeCredentials",onClick:function(){a(!0)}},u().createElement(c.gG,{glyph:"1-user-mod"})))};function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Qe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nt="Projection not available",ot=function(e){var t,r;return null==e||null===(t=e.message)||void 0===t||null===(r=t.indexOf)||void 0===r?void 0:r.call(t,"code 401")},it=function(e){var t=e.initializing,r=e.initialized,n=e.StreetSmartApi,o=e.mapPointVisible;return r&&!o?u().createElement(Le,{description:u().createElement(g.Z,{msgId:"streetView.cyclomedia.zoomIn"})}):r?u().createElement(Le,null):t?u().createElement(Le,{loading:!0,description:u().createElement(g.Z,{msgId:"streetView.cyclomedia.initializing"})}):n?null:u().createElement(Le,{loading:!0,description:u().createElement(g.Z,{msgId:"streetView.cyclomedia.loadingAPI"})})};const at=function(e){var t,r,n,o,i=e.apiKey,a=e.style,s=e.location,f=void 0===s?{}:s,p=e.setPov,d=void 0===p?function(){}:p,y=e.setLocation,m=void 0===y?function(){}:y,b=e.mapPointVisible,E=e.providerSettings,h=void 0===E?{}:E,O=e.refreshLayer,w=void 0===O?function(){}:O,S=null!==(t=null==h?void 0:h.StreetSmartApiURL)&&void 0!==t?t:"https://streetsmart.cyclomedia.com/api/v23.7/StreetSmartApi.js",A=null!==(r=null==h?void 0:h.scripts)&&void 0!==r?r:'\n    <script type="text/javascript" src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"><\/script>\n    <script type="text/javascript" src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"><\/script>\n    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"><\/script>\n    ',I=null!==(n=null==h?void 0:h.initOptions)&&void 0!==n?n:{},T=null!==(o=null==h?void 0:h.srs)&&void 0!==o?o:"EPSG:4326",P=f.properties,_=(null!=P?P:{}).imageId,R=tt((0,l.useState)(),2),j=R[0],D=R[1],N=tt((0,l.useState)(),2),L=N[0],C=N[1],G=(0,l.useRef)(null),M=tt((0,l.useState)(!1),2),U=M[0],F=M[1],x=tt((0,l.useState)(!1),2),k=x[0],V=x[1],Y=tt((0,l.useState)(1),2),z=Y[0],Z=Y[1],H=tt((0,l.useState)(null),2),W=H[0],K=H[1],B=(0,We.getCredentials)(v),q=tt((0,l.useState)(B),2),$=q[0],Q=q[1],X=tt((0,l.useState)(!(null!=$&&$.username&&null!=$&&$.password)),2),J=X[0],ee=X[1],te=null!=$?$:{},re=te.username,ne=te.password;(0,l.useEffect)((function(){(0,Ze.LZ)(T)||(console.error("Cyclomedia API: init: error: projection ".concat(T," is not available")),K(new Error(nt)))}),[T]),(0,l.useEffect)((function(){return j&&re&&ne&&i&&(0,Ze.LZ)(T)?(F(!0),j.init(Je({targetElement:L,username:re,password:ne,apiKey:i,loginOauth:!1,srs:T,locale:"en-us"},I)).then((function(){F(!1),V(!0),K(null)})).catch((function(e){F(!1),K(e),e&&console.error("Cyclomedia API: init: error: "+e)})),function(){try{var e;V(!1),null==j||null===(e=j.destroy)||void 0===e||e.call(j,{targetElement:L})}catch(e){console.error(e)}}):function(){}}),[j,re,ne,i,z]),(0,l.useEffect)((function(){var e=ot(W);k&&re&&ne&&!e&&k?((0,We.setCredentials)(v,$),w()):((0,We.getCredentials)(v)&&(0,We.setCredentials)(v,void 0),w())}),[k,re,ne,re,ne,W,k]);var oe=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).detail,r=null!=t?t:{},n=r.yaw,o=r.pitch;d({heading:n,pitch:o})},ie=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).detail,r=(null!=t?t:{}).recording;if(null!=r&&r.xyz&&null!=r&&r.id){var n,o,i,a=(0,He.reproject)([null==r||null===(n=r.xyz)||void 0===n?void 0:n[0],null==r||null===(o=r.xyz)||void 0===o?void 0:o[1]],T,"EPSG:4326"),l=a.x,u=a.y;m({latLng:{lat:u,lng:l,h:(null==r||null===(i=r.xyz)||void 0===i?void 0:i[2])||0},properties:Je(Je({},r),{},{imageId:null==r?void 0:r.id})})}};(0,l.useEffect)((function(){return j&&_&&k?(function(e){var t={viewerType:j.ViewerType.PANORAMA,srs:T,panoramaViewer:{closable:!1,maximizable:!0,replace:!0,recordingsVisible:!0,navbarVisible:!0,timeTravelVisible:!0,measureTypeButtonVisible:!0,measureTypeButtonStart:!0,measureTypeButtonToggle:!0},obliqueViewer:{closable:!0,maximizable:!0,navbarVisible:!1}};return j.open(e,t)}(_).then((function(n){n&&n[0]&&(e=n[0],t=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return oe.apply(void 0,[e].concat(r))},r=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ie.apply(void 0,[e].concat(r))},e.on(j.Events.panoramaViewer.VIEW_CHANGE,t),e.on(j.Events.panoramaViewer.RECORDING_CLICK,r))})).catch((function(e){K(e),console.error("Cyclomedia API: open: error: "+e)})),function(){e&&t&&(e.off(j.Events.panoramaViewer.VIEW_CHANGE,t),e.off(j.Events.panoramaViewer.RECORDING_CLICK,r))}):function(){};var e,t,r}),[j,k,_]);var ae=j&&k&&_&&!J&&!W,le=U||!J&&!ae&&!W,ue=W&&!J&&!ae&&!U,ce="<html>\n        <head>\n            <style>\n                html, body, #ms-street-smart-viewer-container {\n                    width: 100%;\n                    height: 100%;\n                    margin: 0;\n                    padding: 0;\n                    overflow: hidden;\n                }\n            </style>\n            ".concat(A,'\n            <script type="text/javascript" src="').concat(S,'" ><\/script>\n            <script>\n                    window.StreetSmartApi = StreetSmartApi\n            <\/script>\n            </head>\n            <body>\n                <div key="main" id="ms-street-smart-viewer-container" />\n\n            </body>\n        </html>');return u().createElement(u().Fragment,null,u().createElement($e,{key:"credentials",showCredentialsForm:J,setShowCredentialsForm:ee,credentials:$,setCredentials:function(e){Q(e)}}),le?u().createElement(it,{key:"empty-view",StreetSmartApi:j,style:a,initializing:U,initialized:k,mapPointVisible:b}):null,u().createElement("iframe",{key:"iframe",ref:G,onLoad:function(){var e,t;C(null===(e=G.current)||void 0===e?void 0:e.contentDocument.querySelector("#ms-street-smart-viewer-container")),D(null===(t=G.current)||void 0===t?void 0:t.contentWindow.StreetSmartApi)},style:Je(Je({},a),{},{display:ae?"block":"none"}),srcDoc:ce}),u().createElement(c.bZ,{bsStyle:"danger",style:Je(Je({},a),{},{textAlign:"center",alignContent:"center",display:ue?"block":"none"}),key:"error"},u().createElement(g.Z,{msgId:"streetView.cyclomedia.errorOccurred"}),function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ot(e)>=0?u().createElement(g.Z,{msgId:"streetView.cyclomedia.errors.invalidCredentials",msgParams:o}):(null==e||null===(t=e.message)||void 0===t||null===(r=t.indexOf)||void 0===r?void 0:r.call(t,nt))>=0?u().createElement(g.Z,{msgId:"streetView.cyclomedia.errors.projectionNotAvailable",msgParams:o}):null!==(n=null==e?void 0:e.message)&&void 0!==n?n:"Unknown error"}(W,{srs:T}),k?u().createElement("div",null,u().createElement(c.zx,{onClick:function(){K(null);try{Z(z+1)}catch(e){console.error(e)}}},u().createElement(g.Z,{msgId:"streetView.cyclomedia.reloadAPI"}))):null))};var lt=r(800827),ut=["enabled","apiLoaded"];function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ct.apply(null,arguments)}var st=(0,b.P1)(lt.G3,(function(e){return e<1})),ft=(0,s.connect)((0,b.zB)({apiLoaded:D(m.CYCLOMEDIA),location:N,apiKey:V,mapPointVisible:st}),{setLocation:Te,setPov:Pe,refreshLayer:function(){return e={_v_:Date.now()},{type:Se,updates:e};var e}})((function(e){var t=e.enabled,r=e.apiLoaded,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ut),o=(0,l.useMemo)((function(){return ie()}),[r]);return t?u().createElement(at,ct({api:o},n)):null}));const pt=ft;var dt=r(409669),yt=r.n(dt),mt=r(178640),vt=1024;function bt(e){return Math.pow(2,e.z-e.max)}function gt(e){return Math.ceil(function(e){var t=Math.max(e.w,e.h);return Math.log(t)/Math.log(2)}(e))}function Et(e,t){var r=bt(t),n=Math.ceil(r*e.h/vt);return{columns:Math.ceil(r*e.w/vt),rows:n}}function ht(e,t,r){var n=1/bt(r)*vt,o=n*e.x,i=n*e.y,a=Math.min(n,t.w-o);return{h:Math.min(n,t.h-i),x:o,y:i,w:a}}function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,St(n.key),n)}}function St(e){var t=function(e,t){if("object"!=Ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ot(t)?t:t+""}function At(e,t,r){return t=Tt(t),function(e,t){if(t&&("object"==Ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,It()?Reflect.construct(t,r||[],Tt(e).constructor):t.apply(e,r))}function It(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(It=function(){return!!e})()}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}function Pt(e,t){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pt(e,t)}function _t(e,t){if(e){if("string"==typeof e)return Rt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rt(e,t):void 0}}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var jt={alt:0,lat:0,lng:0};var Dt=function(e){var t=e.split("/");return{imageName:t[t.length-1],group:2===t.length?t[0]:void 0}},Nt=function(e){function t(){var e,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=At(this,t,[null!==(e=o.geometry)&&void 0!==e?e:new mt.S2GeometryProvider(null==o?void 0:o.geometryLevel)]))._features=(null==o||null===(r=o.geojson)||void 0===r?void 0:r.features)||[],n._debug=!!o.debug,n._getImageFromUrl=o.getImageFromUrl?o.getImageFromUrl:function(e){return yt().get(e,{responseType:"arraybuffer"}).then((function(e){return e.data}))},n._url=o.url,n._initialize(),n._populate(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pt(e,t)}(t,e),r=t,n=[{key:"getCluster",value:function(){return Promise.resolve({points:{},reference:jt})}},{key:"getCoreImages",value:function(e){var t=this.cells.has(e)?this.cells.get(e):[];return Promise.resolve({cell_id:e,images:t})}},{key:"getImageBuffer",value:function(e){return this._getImageFromUrl(e)}},{key:"getImages",value:function(e){var t=this,r=e.map((function(e){return{node:t.images.has(e)?t.images.get(e):null,node_id:e}}));return Promise.resolve(r)}},{key:"getImageTiles",value:function(e){var t=this,r=this.images.has(e.imageId)?this.images.get(e.imageId):null;if(r){var n={w:r.width,h:r.height};if(this._debug)return Promise.resolve(function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256,n=gt(e),o={z:t.z,max:n},i=Et(e,o),a=i.columns,l=i.rows,u=[],c=0;c<l;c++)for(var s=0;s<a;s++){var f=ht({x:s,y:c},e,o),p=r,d=r/(f.w/f.h),y=document.createElement("canvas");y.setAttribute("width",p),y.setAttribute("height",d);var m=y.getContext("2d");m.fillStyle="#ffffff",m.fillRect(0,0,p,d),m.strokeStyle="#ff0000",m.strokeRect(0,0,p,d),m.fillStyle="#000000",m.font="10px monospace",m.textAlign="center",m.textBaseline="middle",m.fillText("x: ".concat(s,", y: ").concat(c,", z: ").concat(t.z),p/2,d/2),u.push({url:y.toDataURL(),x:s,y:c,z:null==t?void 0:t.z})}return{node:u,node_id:t.imageId}}(n,e));var o=function(e,t){for(var r=[],n={z:t,max:gt(e)},o=Et(e,n),i=o.columns,a=o.rows,l=0;l<a;l++)for(var u=0;u<i;u++){var c=ht({x:u,y:l},e,n);r.push({x:u,y:l,z:t,pixel:c})}return r}(n,e.z),i=Dt(e.imageId),a=i.imageName,l=i.group;return Promise.resolve({node:o.map((function(e){var r=e.x,n=e.y,o=e.z;return{url:"".concat(t._url).concat(l?"".concat(l,"/"):"","tiles/").concat(a,"/").concat(o,"_").concat(r,"_").concat(n,".jpg"),x:r,y:n,z:o}})),node_id:e.imageId})}return Promise.reject(new mt.MapillaryError("Not image id ".concat(e.imageId," for tiling request")))}},{key:"getMesh",value:function(){return Promise.resolve({faces:[],vertices:[]})}},{key:"getSequence",value:function(e){var t=this;return new Promise((function(r,n){t.sequences.has(e)?r(t.sequences.get(e)):n(new mt.MapillaryError("Sequence ".concat(e," does not exist")))}))}},{key:"getSpatialImages",value:function(e){return this.getImages(e)}},{key:"_initialize",value:function(){this.sequences=new Map,this.images=new Map,this.clusters=new Map,this.cells=new Map,this.meshes=new Map}},{key:"_populate",value:function(){var e=this,t=[],r={};this._features.forEach((function(n){var o=n.properties.MAPSequenceUUID||"1";r[o]||(r[o]={id:o,image_ids:[]});var i=n.properties.filename;r[o].image_ids.push(i),t.push(function(e,t){var r=t.imageId,n=t.meshId,o=t.clusterId,i=t.sequenceId,a=t.url,l={lat:e.properties.MAPLatitude,lng:e.properties.MAPLongitude},u=Dt(e.properties.filename),c=u.imageName,s=u.group,f=e.properties.filename,p=a+(s?s+"/":"")+"thumb/"+c+".jpg",d=e.properties.width,y=e.properties.height,m=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||_t(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.properties.MAPCaptureTime.split("_"),6),v=m[0],b=m[1],g=m[2],E=m[3],h=m[4],O=m[5];return{altitude:e.properties.MAPAltitude,atomic_scale:1,camera_parameters:[],camera_type:"spherical",captured_at:new Date("".concat(v,"/").concat(b,"/").concat(g," ").concat(E,":").concat(h,":").concat(O)).getTime(),cluster:{id:o,url:o},compass_angle:e.properties.MAPCompassHeading.TrueHeading,computed_compass_angle:e.properties.MAPCompassHeading.TrueHeading,computed_altitude:e.properties.MAPAltitude,computed_geometry:l,creator:{id:null,username:null},geometry:l,height:y,id:r,merge_id:"merge_id",mesh:{id:n,url:n},exif_orientation:e.properties.MAPOrientation,private:null,quality_score:1,sequence:{id:i},thumb:{id:f,url:p},owner:{id:null},width:d}}(n,{imageId:i,clusterId:1,meshId:1,sequenceId:o,url:e._url}))})),this.images=new Map(t.map((function(e){return[e.id,e]}))),this.cells=function(e,t){var r,n=new Map,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_t(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(e);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=t.lngLatToCellId(i.geometry);n.has(a)||n.set(a,[]),n.get(a).push(i)}}catch(e){o.e(e)}finally{o.f()}return n}(this.images.values(),this._geometry),this.sequences=new Map(Object.keys(r).map((function(e){return[e,r[e]]})))}}],n&&wt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(mt.DataProviderBase);const Lt=Nt;function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){Ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ut(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Ct(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ct(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r(684016);const kt=function(e){var t=e.size,n=e.location,o=e.className,i=void 0===o?"google-street-view":o,a=e.style,c=void 0===a?{}:a,s=e.setPov,f=void 0===s?function(){}:s,p=e.setLocation,d=void 0===p?function(){}:p,y=e.providerSettings,m=e.apiKey,v=(0,l.useRef)(),b=Ft((0,l.useState)(),2),g=b[0],E=b[1],h=Ft((0,l.useState)(!1),2),O=h[0],w=h[1];return(0,l.useEffect)((function(){return function(){null!=g&&g.remove&&g.remove(),null!=e&&e.resetStViewData&&e.resetStViewData()}}),[]),(0,l.useEffect)((function(){if(n&&g){var e,t,r=(null==n||null===(e=n.properties)||void 0===e?void 0:e.imageId)||(null==n||null===(t=n.properties)||void 0===t?void 0:t.filename);r&&g.isNavigable&&g.moveTo(r)}}),[n]),(0,l.useEffect)((function(){if(!g&&n){var e={url:null==y?void 0:y.ApiURL,geometryLevel:(null==y?void 0:y.geometryLevel)||14};!function(e,t){w(!0),Promise.resolve().then(r.bind(r,178640)).then((function(e){return e.Viewer})).then((function(r){new Promise((function(r,n){e&&null!=t&&t.url?yt().get("".concat(t.url,"index.json")).then((function(e){var t=e.data;r(t)})).catch((function(e){return n(e)})):r()})).then((function(e){var o=new Lt({url:t.url,geometryLevel:(null==t?void 0:t.geometryLevel)||14,geojson:e||{type:"FeatureCollection",features:[]}});!function(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new e({container:v.current,dataProvider:o,imageId:(null==n||null===(t=n.properties)||void 0===t?void 0:t.imageId)||(null==n||null===(r=n.properties)||void 0===r?void 0:r.filename),accessToken:m,component:{cover:!1}});E(i),i.on("bearing",(function(e){f({heading:e.bearing})})),i.on("image",(function(e){d({latLng:{lat:e.image.lngLat.lat,lng:e.image.lngLat.lng,h:e.image.computedAltitude||0},properties:{imageId:e.image.id,filename:e.image.id,id:e.image.id}})}))}(r,o),w(!1)}))})).catch((function(e){w(!1),console.error(e)}))}(null==y?void 0:y.ApiURL,e)}}),[g,n]),(0,l.useEffect)((function(){g&&g.resize()}),[t]),u().createElement(u().Fragment,null,u().createElement("div",{className:i,style:Mt({display:g?"none":"block"},c)},u().createElement(Le,{loading:O})),u().createElement("div",{className:i,style:{position:"absolute",margin:c.margin,height:c.height,width:c.width},ref:v}))};var Vt=["apiLoaded","enabled"];function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yt.apply(null,arguments)}function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ht(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=zt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Kt={google:ze,cyclomedia:pt,mapillary:(0,s.connect)((0,b.zB)({apiLoaded:D("mapillary"),location:N,panoramaOptions:z}),{setLocation:Te,setPov:Pe})((function(e){var t=e.apiLoaded,r=(e.enabled,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Vt));return t?u().createElement(kt,Yt({location,mapillary:de()},r)):u().createElement("div",{className:"street-view-api-loader"},u().createElement(g.Z,{msgId:"streetView.loadingAPI"}))}))};const Bt=(0,s.connect)((0,b.zB)({enabled:R}),{onClose:function(){return Ie()}})((function(e){var t,r,n=e.enabled,o=e.onClose,i=void 0===o?function(){}:o,a=e.provider,s=e.panelSize,f=e.providerSettings,p=e.apiKey,d=e.resetStViewData,y=(t=(0,l.useState)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){Ht(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({width:400,height:300},s)),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Wt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wt(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=y[0],v=y[1],b=(0,l.useMemo)((function(){return Kt[a]}),[a]);return n?u().createElement(E.Z,{id:"street-view-dialog",bodyClassName:"street-view-window-body",draggable:!0,style:{zIndex:1e4,position:"absolute",left:"17%",top:"50px",margin:0,width:m.width}},u().createElement("span",{role:"header",style:{display:"flex",justifyContent:"space-between"}},u().createElement("span",null,u().createElement(g.Z,{msgId:"streetView.title"})),u().createElement("button",{onClick:function(){return i()},className:"close"},u().createElement(c.gG,{glyph:"1-close"}))),u().createElement("div",{role:"body",style:{height:m.height}},u().createElement(h.Resizable,{width:m.width,height:m.height,onResize:function(e,t){var r=t.size;v(r)}},u().createElement("div",{style:{display:"flex",flexDirection:"column",width:m.width,height:m.height}},b?u().createElement(b,{resetStViewData:d,providerSettings:f,apiKey:p,enabled:n,size:m,style:{flex:1,margin:10,height:"calc(100% - ".concat(20,"px)"),width:"calc(100% - ".concat(20,"px)")}}):u().createElement(c.bZ,{bsStyle:"danger"},"Unknown provider ",a))))):null}));function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){Xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=qt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jt={},er=r(49977),tr=r.n(er),rr=r(460604),nr=r(801550),or=r(921914),ir=r(307877),ar=r(998869);function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}var ur=["url"];function cr(e){return function(e){if(Array.isArray(e))return sr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(r),!0).forEach((function(t){dr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=lr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yr=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(Z.kM,Z.At,Z.dc).filter((function(e){return e.control===p})).filter((function(){return R(n())})).switchMap((function(){return tr().Observable.of((0,or.aN)(),(0,or.mK)(!1)).merge(e.ofType(Z.kM,Z.At,Z.dc).filter((function(e){return e.control===p})).take(1).filter((function(){return!R(n())})).filter((function(){return!(0,ir.yg)(n())})).mapTo((0,or.mK)(!0)).takeUntil(e.ofType(Z.l)))}))},mr=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(Z.kM,Z.At,Z.dc).filter((function(e){return e.control===p})).filter((function(){return R(n())})).switchMap((function(){return tr().Observable.defer((function(){var e,t=(e=n(),k(e));if(null===t)return Promise.resolve(null);var r={id:y,name:y,visibility:!0};if("vector"===t.type&&t.url){var o=t||{},i=o.url,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(o,ur);return yt().get("".concat(i,"index.json")).then((function(e){var t=e.data;return pr(pr(pr({},r),a),{},{features:(null==t?void 0:t.features)||{}})})).catch((function(e){throw e.code="FAIL_TO_FETCH_DATA",e}))}return Promise.resolve(pr(pr({},r),t))})).switchMap((function(t){return tr().Observable.from([(0,nr.H0)("click",p)].concat(cr(Y(n())?cr(null!==t?[(0,rr.W)(y,d,"overlay",t)]:[]):[]))).concat(e.ofType(Z.kM,Z.At,Z.dc).filter((function(e){return e.control===p})).filter((function(){return!R(n())})).merge(e.ofType(Z.l)).take(1).switchMap((function(){return tr().Observable.from([(0,nr.$X)("click",p)].concat(cr(Y(n())?[(0,rr.fU)({id:y,owner:d})]:[])))})))})).catch((function(e){return tr().Observable.of((0,H.vU)({title:"streetView.title",message:"FAIL_TO_FETCH_DATA"===e.code?"streetView.messages.errorRetriveingLayerData":"streetView.messages.unknownError"}))}))}))},vr=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(nr.TR).filter((function(){return R(n())})).filter((function(){return e=n(),D(G(e))(e);var e})).switchMap((function(e){var t,r=e.point,o=G(n()),i=null===(t=me[o])||void 0===t?void 0:t.getLocation;return i?tr().Observable.defer((function(){return i(r)})).map(Te).catch((function(e){return"ZERO_RESULTS"===e.code?tr().Observable.of((0,H.um)({title:"streetView.title",message:"streetView.messages.noDataForPosition"})):(console.error(e),tr().Observable.of((0,H.vU)({title:"streetView.title",message:"streetView.messages.unknownError"})))})):tr().Observable.of((0,H.vU)({title:"streetView.title",message:"streetView.messages.providerNotSupported"}))}))},br=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(Se).switchMap((function(e){var t,r,o,i,a=e.updates,l=void 0===a?{}:a,u=(t=n(),null===(o=(null!==(r=(0,S.K)(t))&&void 0!==r?r:[]).filter((function(e){return e.id===y})))||void 0===o||null===(i=o[0])||void 0===i?void 0:i.options);return tr().Observable.of((0,rr.W)(y,d,"overlay",pr(pr({},u),l)))}))},gr=function(e,t){return(0,ar.U)(e,t,p)},Er=r(893379),hr=r.n(Er),Or=r(68778);hr()(Or.Z,{insert:"head",singleton:!1}),Or.Z.locals;var wr=["mapType","enabled"],Sr={openlayers:(0,l.lazy)((function(){return Promise.all([r.e(18672),r.e(52043),r.e(65792),r.e(4319),r.e(47202),r.e(69141),r.e(51554),r.e(85828),r.e(63419)]).then(r.bind(r,285944))})),cesium:(0,l.lazy)((function(){return Promise.all([r.e(65792),r.e(82093),r.e(34531),r.e(44139)]).then(r.bind(r,644139))}))};const Ar=(0,s.connect)((0,b.P1)([R,N,L],(function(e,t,r){return{enabled:e,location:t,pov:r}})))((function(e){var t=e.mapType,r=e.enabled,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,wr);if(!r)return null;var o=Sr[t];return o?u().createElement(l.Suspense,{fallback:null},u().createElement(o,n)):null}));var Ir=(0,s.connect)((function(){return{}}),{onMount:function(e){return{type:he,configuration:e}},onUnmount:function(){return function(e,t){e({type:Oe}),R(t())&&e((0,Z.Xg)(p,"enabled",!1))}},resetStViewData:function(){return function(e){return e({type:we})}}})((function(e){var t=e.onMount,r=e.onUnmount,n=e.resetStViewData,o=e.apiKey,i=e.useDataLayer,a=e.clampToGround,c=e.dataLayerConfig,s=e.panoramaOptions,f=e.provider,p=void 0===f?"google":f,d=e.providerSettings,y=e.panelSize;return(0,l.useEffect)((function(){return t({apiKey:o,useDataLayer:i,dataLayerConfig:c,panoramaOptions:s,provider:p,providerSettings:d,clampToGround:a}),function(){r()}}),[o,i,c,JSON.stringify(null!=s?s:{})]),u().createElement(Bt,{resetStViewData:n,apiKey:o,provider:p,providerSettings:d,panelSize:y})}));const Tr=(0,f.rx)("StreetView",{options:{disablePluginIf:"{state('mapType') === 'leaflet'}"},epics:a,reducers:{streetView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(null==t?void 0:t.type){case he:return Qt(Qt({},e),{},{configuration:null==t?void 0:t.configuration});case ge:var r;return Qt(Qt({},e),{},{location:null!==(r=null==t?void 0:t.location)&&void 0!==r?r:e.location});case Ee:var n;return Qt(Qt({},e),{},{pov:null!==(n=null==t?void 0:t.pov)&&void 0!==n?n:e.pov});case ve:return Qt(Qt({},e),{},{apiLoading:null==t?void 0:t.loading});case be:return Qt(Qt({},e),{},{apiLoaded:Xt({},t.provider,!0)});case we:return Qt(Qt({},e),{},{location:void 0,pov:void 0});case Oe:return Jt;default:return e}}},component:Ir,containers:{BurgerMenu:{position:40,priority:2,doNotHide:!0,name:p,text:u().createElement(g.Z,{msgId:"streetView.title"}),tooltip:"streetView.tooltip",icon:u().createElement(c.gG,{glyph:"road"}),action:function(){return Ie()}},SidebarMenu:{position:40,priority:1,doNotHide:!0,name:p,text:u().createElement(g.Z,{msgId:"streetView.title"}),tooltip:"streetView.tooltip",icon:u().createElement(c.gG,{glyph:"road"}),action:function(){return Ie()},selector:function(e){return{bsStyle:R(e)?"primary":"tray",active:R(e)||!1}}},Map:{Tool:Ar,name:"StreetViewMapLocationSupport",alwaysRender:!0}}})},569893:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(227361),o=r.n(n),i=function(e){return o()(e,"additionallayers")||[]}},998869:(e,t,r)=>{"use strict";r.d(t,{k:()=>s,U:()=>f});var n=r(782904),o=r(49977),i=r.n(o),a=r(607147),l=r(604206),u=r(801550),c=r(433528),s="export-context",f=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return i().Observable.from([(0,n.Xg)(t,"enabled",null)])},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t){return(0,a.Yq)(t)(e)};return e.ofType(l.hZ,u.YD,c.$O).filter((function(e){var n=e.type,o=e.status,i=e.owner,a=e.eventName,f=e.toolName,p=s(t.getState(),r);switch(n){case c.$O:return"featureGrid"!==r;case u.YD:return p&&"click"===a&&f!==r;case l.hZ:return p&&("drawOrEdit"===o||"start"===o)&&i!==r;default:return p&&"annotations"!==r}})).switchMap((function(e){return s(t.getState(),r)?o(t.getState(),r,e):i().Observable.empty()}))}},68778:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(923645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,"/* css for react-resizable */\n.street-view-window-body {\n  /* override the standard justify */\n}\n.street-view-window-body .react-resizable-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  bottom: 0;\n  right: 0;\n  background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+');\n  background-position: bottom right;\n  padding: 0 3px 3px 0;\n  background-repeat: no-repeat;\n  background-origin: content-box;\n  box-sizing: border-box;\n  cursor: se-resize;\n}\n.street-view-window-body .react-resizable {\n  position: relative;\n}\n.street-view-window-body .empty-state-container .empty-state-main-view .empty-state-description {\n  text-align: center;\n}\n.street-view-window-body .street-view-api-loader {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n}\n.street-view-window-body .empty-street-view {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n.street-view-window-body .empty-street-view div {\n  max-width: 350px;\n}\n.street-view-window-body .empty-street-view .empty-state-image .glyphicon {\n  margin-left: -14% !important;\n}\n.street-view-window-body .street-view-credentials h5 {\n  text-align: center;\n  font-weight: bold;\n  margin: 25px auto;\n}\n.street-view-window-body .street-view-credentials form {\n  margin: 0 30px;\n}\n.street-view-window-body .street-view-credentials form .street-view-credentials-form-buttons {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n.street-view-window-body iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n",""]);const i=o}}]);