(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[78225,30049],{868143:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var n=r(124852),o=r.n(n),a=r(867076),i=r(22222),u=r(171703),c=r(675263),s=r.n(c),l=r(322843),f=r(367306),p=r(296311),d=r(557579),h=r(555927);const m=(0,a.compose)((0,u.connect)((function(){return{}}),{backFromWizard:function(){return(0,d.Rz)("layer",void 0)}}),(0,a.withProps)((function(e){var t=e.backFromWizard;return{exitButton:{id:"dashboard-exit-button",onClick:void 0===t?function(){}:t,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToLayerSelection"}}})));var b=r(454679),v=r(807691),y=r(24412);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function k(e,t,r){return t=T(t),function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,r||[],T(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function P(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}var C=(0,a.compose)((0,u.connect)(p.Nb,{toggleConnection:d.w2,triggerShowConnections:h.G9}),(0,u.connect)(p.Tw),(0,a.withProps)((function(e){var t=e.availableDependencies;return{availableDependencies:(void 0===t?[]:t).filter((function(e){return"map"!==e}))}})),m)(b.Z),j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var e=this,t=this.props.pluginCfg.selectedService||"",r=this.props.pluginCfg.services||{};return!!this.props.editing&&o().createElement("div",{className:"dashboard-editor de-builder"},o().createElement(C,{disableEmptyMap:this.props.disableEmptyMap,defaultSelectedService:t,defaultServices:r,enabled:this.props.editing,onClose:function(){return e.props.setEditing(!1)},catalog:this.props.catalog}))}}])&&w(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);P(j,"propTypes",{id:s().string,editing:s().bool,limitDockHeight:s().bool,fluid:s().bool,zIndex:s().number,dockSize:s().number,position:s().string,onMount:s().func,onUnmount:s().func,setEditing:s().func,dimMode:s().string,src:s().string,style:s().object,pluginCfg:s().object,catalog:s().object,disableEmptyMap:s().bool}),P(j,"defaultProps",{id:"dashboard-editor",editing:!1,dockSize:500,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",onMount:function(){},onUnmount:function(){},setEditing:function(){}});var I=(0,u.connect)((0,i.P1)(f.i$,f.MZ,f.Wy,(function(e,t){return{editing:e,isDashboardOpened:t}})),{setEditing:h.D_,onMount:function(){return(0,h.Nl)(!0)},onUnmount:function(){return(0,h.Nl)(!1)}})(j);const E=(0,l.rx)("DashboardEditor",{component:I,reducers:{dashboard:y.Z},epics:v.ZP})},830049:(e,t,r)=>{"use strict";r.d(t,{H2:()=>k,R9:()=>O,_P:()=>P,st:()=>C,NG:()=>j,xV:()=>I,kD:()=>F,kf:()=>A,$O:()=>L,mL:()=>N,vg:()=>W});var n=r(717621),o=r.n(n),a=r(409669),i=r.n(a),u=r(414293),c=r.n(u),s=r(513218),l=r.n(s),f=r(433506);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var d=["image"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){var n;return n=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==p(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=function(e){return["between","double2bool","in","parseBoolean","strEndsWith","strEqualsIgnoreCase","strMatches","strStartsWith"].includes(null==e?void 0:e.name)},k=function(e){return["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","modulo","pi","pow","random","rint","round","sin","sqrt","strIndexOf","strLastIndexOf","strLength","tan","toDegrees","toRadians"].includes(null==e?void 0:e.name)},O=function(e){return["numberFormat","strAbbreviate","strCapitalize","strConcat","strDefaultIfBlank","strReplace","strStripAccents","strSubstring","strSubstringStart","strToLowerCase","strToUpperCase","strTrim"].includes(null==e?void 0:e.name)},T=function(e){return["property"].includes(null==e?void 0:e.name)},S=function(e){return"attribute"===(null==e?void 0:e.type)||["msMarkerIcon"].includes(null==e?void 0:e.name)},P=function(e){return w(e)||k(e)||O(e)||T(e)||S(e)},M=function(e){return(null!=e&&e.getProperties?e.getProperties():null==e?void 0:e.properties)||{}},C={evaluateFunction:function(e,t){var r=M(t);if("property"===e.name){if(!t)throw new Error("Could not evalute 'property' function. Feature ".concat(t," is not defined."));return O(e.args[0])?r[C.evaluateStringFunction(e.args[0],t)]:r[e.args[0]]}return O(e)?C.evaluateStringFunction(e,t):k(e)?C.evaluateNumberFunction(e,t):w(e)?C.evaluateBooleanFunction(e,t):T(e)?C.evaluateUnknownFunction(e,t):S(e)?C.evaluateMapStoreFunction(e,t):null},evaluateBooleanFunction:function(e,t){var r=e.args.map((function(e){return P(e)?C.evaluateFunction(e,t):e}));switch(e.name){case"between":return r[0]>=r[1]&&r[0]<=r[2];case"double2bool":default:return!1;case"in":return r.slice(1).includes(r[0]);case"parseBoolean":return!!r[0];case"strEndsWith":return r[0].endsWith(r[1]);case"strEqualsIgnoreCase":return r[0].toLowerCase()===r[1].toLowerCase();case"strMatches":return new RegExp(r[1]).test(r[0]);case"strStartsWith":return r[0].startsWith(r[1])}},evaluateNumberFunction:function(e,t){if("pi"===e.name)return Math.PI;if("random"===e.name)return Math.random();var r=e.args.map((function(e){return P(e)?C.evaluateFunction(e,t):e}));switch(e.name){case"abs":return Math.abs(r[0]);case"acos":return Math.acos(r[0]);case"asin":return Math.asin(r[0]);case"atan":return Math.atan(r[0]);case"atan2":case"rint":default:return r[0];case"ceil":return Math.ceil(r[0]);case"cos":return Math.cos(r[0]);case"exp":return Math.exp(r[0]);case"floor":return Math.floor(r[0]);case"log":return Math.log(r[0]);case"max":return Math.max.apply(Math,v(r));case"min":return Math.min.apply(Math,v(r));case"modulo":return r[0]%r[1];case"pow":return Math.pow(r[0],r[1]);case"round":return Math.round(r[0]);case"sin":return Math.sin(r[0]);case"sqrt":return Math.sqrt(r[0]);case"strIndexOf":return r[0].indexOf(r[1]);case"strLastIndexOf":return r[0].lastIndexOf(r[1]);case"strLength":return r[0].length;case"tan":return Math.tan(r[0]);case"toDegrees":return r[0]*(180/Math.PI);case"toRadians":return r[0]*(Math.PI/180)}},evaluateUnknownFunction:function(e,t){var r=e.args.map((function(e){return P(e)?C.evaluateFunction(e,t):e})),n=M(t);return"property"===e.name?n[r[0]]:r[0]},evaluateStringFunction:function(e,t){var r,n=e.args.map((function(e){return P(e)?C.evaluateFunction(e,t):e}));switch(e.name){case"numberFormat":case"strAbbreviate":default:return n[0];case"strCapitalize":var o,a=n[0].toLowerCase().split(" "),i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(a);try{for(i.s();!(o=i.n()).done;){var u=o.value;u=u.charAt(0).toUpperCase()+u.substring(1)}}catch(e){i.e(e)}finally{i.f()}return a.join(" ");case"strConcat":return n.join();case"strDefaultIfBlank":return(null===(r=n[0])||void 0===r?void 0:r.length)<1?n[1]:n[0];case"strReplace":return!0===n[3]?n[0].replaceAll(n[1],n[2]):n[0].replace(n[1],n[2]);case"strStripAccents":return n[0].normalize("NFKD").replace(/[\u0300-\u036f]/g,"");case"strSubstring":return n[0].substring(n[1],n[2]);case"strSubstringStart":return n[0].substring(n[1]);case"strToLowerCase":return n[0].toLowerCase();case"strToUpperCase":return n[0].toUpperCase();case"strTrim":return n[0].trim()}},evaluateMapStoreFunction:function(e,t){if("attribute"===e.type)return C.evaluateFunction({name:"property",args:[e.name]},t);var r=e.args.map((function(e){return P(e)?C.evaluateFunction(e,t):e}));return"msMarkerIcon"===e.name?f.Z.markers.extra.markerToDataUrl({iconColor:r[0].color,iconShape:r[0].shape,iconGlyph:r[0].glyph}):r[0]}},j=function e(t,r){var n=M(t),o=!0,a=!1;({"&&":!0,"||":!0,"!":!0})[r[0]]&&(a=!0);try{var i,u,c;if(a)switch(r[0]){case"&&":i=!0,r.slice(1).forEach((function(r){e(t,r)||(i=!1)})),o=i;break;case"||":i=!1,r.slice(1).forEach((function(r){e(t,r)&&(i=!0)})),o=i;break;case"!":o=!undefined.geoStylerFilterToOlParserFilter(t,r[1]);break;default:throw new Error("Cannot parse Filter. Unknown combination or negation operator.")}else switch(u=P(r[1])?C.evaluateFunction(r[1],t):n[r[1]],c=P(r[2])?n[C.evaluateFunction(r[2],t)]:r[2],r[0]){case"==":o=""+u==""+c;break;case"*=":"string"==typeof c&&"string"==typeof u&&(o=!(c.length>u.length)&&-1!==u.indexOf(c));break;case"!=":o=""+u!=""+c;break;case"<":o=Number(u)<Number(c);break;case"<=":o=Number(u)<=Number(c);break;case">":o=Number(u)>Number(c);break;case">=":o=Number(u)>=Number(c);break;default:throw new Error("Cannot parse Filter. Unknown comparison operator.")}}catch(e){throw new Error("Cannot parse Filter. Invalid structure.")}return o},I=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n.v.",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return t},o=M(e),a=t||"",i=new RegExp("\\{\\{(.*?)\\}\\}","g"),u=a.match(i);return u&&u.forEach((function(e){for(var t=0,i=0,u=Object.entries(o);i<u.length;i++){var c=(f=u[i],p=2,function(e){if(Array.isArray(e))return e}(f)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return u}}(f,p)||y(f,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],l=c[1];if(e.slice(2,e.length-2).toLowerCase()===s.toLowerCase()){a=a.replace(e,n(s,l));break}t++}var f,p;t===Object.keys(o).length&&(a=a.replace(e,r))})),a},E={},F=function(e,t){var r,n,o,a,i,u,c,s,l,f,p,d,h,m,b,v,y;return l=(n="msMarkerIcon"===(null==t||null===(r=t.image)||void 0===r?void 0:r.name)?t:e).image,f=n.color,p=n.fillOpacity,d=n.strokeColor,h=n.strokeOpacity,m=n.strokeWidth,b=n.strokeDasharray,v=n.radius,y=n.wellKnownName,l?"msMarkerIcon"===(null==l?void 0:l.name)?"msMarkerIcon:".concat(null==l||null===(o=l.args)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.color,":").concat(null==l||null===(i=l.args)||void 0===i||null===(u=i[0])||void 0===u?void 0:u.shape,":").concat(null==l||null===(c=l.args)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.glyph):l:[y,f,p,d,h,(b||[]).join("_"),m,v].join(":")},x=function(e){var t=e.image,r=F(e);return E[r]?Promise.resolve(E[r]):new Promise((function(e,n){var o=new Image,a=t;if(l()(a)&&"msMarkerIcon"===a.name)try{var i=a.args[0];a=f.Z.markers.extra.markerToDataUrl({iconColor:i.color,iconShape:i.shape,iconGlyph:i.glyph})}catch(e){n(r)}o.crossOrigin="anonymous",o.onload=function(){E[r]={id:r,image:o,src:a,width:o.naturalWidth,height:o.naturalHeight},e(E[r])},o.onerror=function(){n(r)},o.src=a}))},D=function(e,t,r,n,o){var a=n*o/2,i=n/2;e.moveTo(t-a,r-i),e.lineTo(t+a,r-i),e.lineTo(t+a,r-a),e.lineTo(t+i,r-a),e.lineTo(t+i,r+a),e.lineTo(t+a,r+a),e.lineTo(t+a,r+i),e.lineTo(t-a,r+i),e.lineTo(t-a,r+a),e.lineTo(t-i,r+a),e.lineTo(t-i,r-a),e.lineTo(t-a,r-a),e.closePath()},A=function(e){var t=F(e);if(E[t]){var r=E[t],n=r.image;return m(m({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,d)),{},{canvas:n})}var a=!(null==e||!e.strokeWidth||null==e||!e.strokeOpacity),i=!(null==e||!e.fillOpacity||(e.wellKnownName||"").includes("shape://")),u=document.createElement("canvas"),c=u.getContext("2d"),s=e.radius,l=a?e.strokeWidth/2:4,f=l,p=l,h=s+l,b=s+l,v=2*e.radius,y=2*e.radius;if(u.setAttribute("width",v+2*l),u.setAttribute("height",y+2*l),i){var g=o()(e.color);g.setAlpha(e.fillOpacity),c.fillStyle=g.toRgbString()}if(a){var w=o()(e.strokeColor);w.setAlpha(e.strokeOpacity),c.strokeStyle=w.toRgbString(),c.lineWidth=e.strokeWidth,c.lineJoin="round",c.lineCap="round",e.strokeDasharray&&c.setLineDash(e.strokeDasharray)}switch(e.wellKnownName){case"Circle":default:c.arc(h,b,s,0,2*Math.PI);break;case"Square":c.rect(f,p,v,y);break;case"Triangle":var k=Math.sqrt(3)*s,O=k/3,T=(y-k)/2;c.moveTo(h,b+T-2*O),c.lineTo(h+s,b+T+O),c.lineTo(h-s,b+T+O),c.closePath();break;case"Star":!function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=Math.PI/2*3,u=t,c=r,s=Math.PI/n;e.moveTo(t,r-o);for(var l=0;l<n;l++)u=t+Math.cos(i)*o,c=r+Math.sin(i)*o,e.lineTo(u,c),i+=s,u=t+Math.cos(i)*a,c=r+Math.sin(i)*a,e.lineTo(u,c),i+=s;e.lineTo(t,r-o),e.closePath()}(c,h,b,5,s,s/2);break;case"Cross":D(c,h,b,2*s,.2);break;case"X":c.translate(h,b),c.rotate(45*Math.PI/180),c.translate(-h,-b),D(c,h,b,2*s,.2);break;case"shape://vertline":c.moveTo(h,p),c.lineTo(h,y),c.closePath();break;case"shape://horline":c.moveTo(f,b),c.lineTo(v,b),c.closePath();break;case"shape://slash":c.translate(h,b),c.rotate(45*Math.PI/180),c.translate(-h,-b),c.moveTo(h,p),c.lineTo(h,y),c.closePath();break;case"shape://backslash":c.translate(h,b),c.rotate(-45*Math.PI/180),c.translate(-h,-b),c.moveTo(h,p),c.lineTo(h,y);break;case"shape://dot":c.moveTo(h-1,b-1),c.lineTo(h+1,b+1),c.closePath();break;case"shape://plus":c.moveTo(h,p),c.lineTo(h,y),c.moveTo(f,b),c.lineTo(v,b),c.closePath();break;case"shape://times":c.translate(h,b),c.rotate(45*Math.PI/180),c.translate(-h,-b),c.moveTo(h,p),c.lineTo(h,y),c.moveTo(f,b),c.lineTo(v,b),c.closePath();break;case"shape://oarrow":c.moveTo(f,p),c.lineTo(v,b),c.lineTo(f,y);break;case"shape://carrow":c.moveTo(f,p),c.lineTo(v,b),c.lineTo(f,y),c.closePath()}return i&&c.fill(),a&&c.stroke(),{width:v,height:y,canvas:u}},L=function(e){var t=F(e);return E[t]?Promise.resolve(E[t]):new Promise((function(r,n){var o,a,u,s;if(null!==(o=document)&&void 0!==o&&o.createElement||n(t),null!=e&&null!==(a=e.wellKnownName)&&void 0!==a&&a.includes(".svg"))(u=e.wellKnownName,s={fillColor:e.color,fillOpacity:e.fillOpacity,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth,strokeDasharray:e.strokeDasharray,size:2*e.radius},new Promise((function(e,t){i().get(u,{"Content-Type":"image/svg+xml;charset=utf-8"}).then((function(r){var n,o=window.URL||window.webkitURL||window,a=(new DOMParser).parseFromString(r.data,"image/svg+xml").firstElementChild,i=s.size||32,u=null!==(n=s.strokeWidth)&&void 0!==n?n:1,l=i+u,f=i+u;a.setAttribute("fill",s.fillColor||"#FFCC33"),a.setAttribute("fill-opacity",c()(s.fillOpacity)?.2:s.fillOpacity),a.setAttribute("stroke",s.strokeColor||"#FFCC33"),a.setAttribute("stroke-opacity",c()(s.strokeOpacity)?1:s.strokeOpacity),a.setAttribute("stroke-width",u),a.setAttribute("width",l),a.setAttribute("height",f),a.setAttribute("stroke-dasharray",s.strokeDasharray||"none");var p=document.createElement("div");p.appendChild(a);var d=new Blob([p.innerHTML],{type:"image/svg+xml;charset=utf-8"}),h=o.createObjectURL(d),m=new Image;m.onload=function(){try{var r=document.createElement("canvas");r.width=l,r.height=f,r.getContext("2d").drawImage(m,r.width/2-m.width/2,r.height/2-m.height/2),e({width:l,height:f,canvas:r})}catch(e){t(e)}},m.onerror=function(e){t(e)},m.src=h})).catch((function(e){t(e)}))}))).then((function(e){var n=e.width,o=e.height,a=e.canvas;E[t]={id:t,image:a,src:a.toDataURL(),width:n,height:o},r(E[t])})).catch((function(){n(t)}));else{var l=A(e),f=l.width,p=l.height,d=l.canvas;E[t]={id:t,image:d,src:d.toDataURL(),width:f,height:p},r(E[t])}}))},N=function(e,t){return e?Object.keys(e).reduce((function(r,n){return m(m({},r),{},b({},n,P(e[n])?C.evaluateFunction(e[n],t):e[n]))}),{}):{}},U=!1,W=function(e,t){var n=(e||{}).rules,o=(void 0===n?[]:n).reduce((function(e,r){var n=((null==r?void 0:r.symbolizers)||[]).filter((function(e){var t=e.kind;return["Mark","Icon"].includes(t)}));if(!n.some((function(e){return Object.keys(e).some((function(t){var r;return!(null===(r=e[t])||void 0===r||!r.name)}))})))return[].concat(v(e),v(n));var o=t.features||[],a=void 0===r.filter?o:o.filter((function(e){return j(e,r.filter)}));return[].concat(v(e),v(n.reduce((function(e,t){return[].concat(v(e),v((a||[]).map((function(e){var r;return m(m({},N(t,e)),"msMarkerIcon"===(null==t||null===(r=t.image)||void 0===r?void 0:r.name)&&{image:t.image})}))))}),[])))}),[]),a=o.filter((function(e){return"Mark"===e.kind})),i=o.filter((function(e){return"Icon"===e.kind}));return(U?Promise.resolve():r.e(50957).then(r.bind(r,950957)).then((function(){return document.fonts.load("1rem FontAwesome").then((function(){return U=!0}))}))).then((function(){return new Promise((function(e){a.length>0||i.length>0?Promise.all([].concat(v(a.map(L)),v(i.map(x)))).then((function(t){e(t)})):e([])}))}))}}}]);