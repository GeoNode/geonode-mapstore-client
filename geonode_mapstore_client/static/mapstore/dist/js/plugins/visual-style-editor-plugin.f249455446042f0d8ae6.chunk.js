(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[9010],{55105:(e,t,n)=>{"use strict";n.d(t,{Nr:()=>d,ic:()=>y,Jz:()=>v,VM:()=>m,CF:()=>p});var r=n(91175),l=n.n(r),a=n(827),o=n(52259);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){return e.maplayout&&e.maplayout.layout||{}},d=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){return c(c({},e),{},u({},t,n[t]))}),{})||{}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=s(e),r=!!l()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})));return r},v=function(e){return f(e,[{key:"right",value:658}])},m=function(e){return f(e,[{key:"bottom",value:30,type:"not"}])},p=function(e){var t=(0,a.Od)(e),n=d(e);return n&&t&&t.size&&{left:(0,o.parseLayoutValue)(n.left,t.size.width),bottom:(0,o.parseLayoutValue)(n.bottom,t.size.height),right:(0,o.parseLayoutValue)(n.right,t.size.width),top:(0,o.parseLayoutValue)(n.top,t.size.height)}}},73443:(e,t,n)=>{"use strict";n.d(t,{rs:()=>r,AY:()=>l,SW:()=>a,yB:()=>o,oG:()=>i,oz:()=>c,id:()=>u,gc:()=>s,cE:()=>d,rG:()=>y,Vj:()=>f,nY:()=>v});var r="GEONODE:SAVING_RESOURCE",l="GEONODE:SAVE_SUCCESS",a="GEONODE:SAVE_ERROR",o="GEONODE:CLEAR_SAVE",i="GEONODE:SAVE_CONTENT",c="GEONODE:SAVE_DIRECT_CONTENT";function u(){return{type:r}}function s(e){return{type:l,success:e}}function d(e){return{type:a,error:e}}function y(){return{type:o}}function f(e,t,n,r){return{type:i,id:e,metadata:t,reload:n,showNotifications:r}}function v(){return{type:c}}},28261:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294),l=n.n(r),a=n(45697),o=n.n(a),i=["id","className","style","children"];function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e){var t=e.id,n=e.className,r=e.style,a=e.children,o=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,i),u=n?" "+n:"";return l().createElement(l().Fragment,null,l().createElement("div",c({},o,{id:t,className:"gn-spinner".concat(u),style:r}),l().createElement("div",null)),a)}u.propTypes={id:o().string,className:o().string,style:o().object},u.defaultProps={};const s=u},51605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(28261)},32247:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(67294);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const a=function(e,t){var n,a,o=function(){if("undefined"==typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.log("Error to get item key “".concat(e,"”:"),n),t}},i=(n=(0,r.useState)(o),a=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw l}}return a}}(n,a)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],u=i[1];return(0,r.useEffect)((function(){u(o())}),[]),(0,r.useEffect)((function(){var e=function(){u(o())};return window.addEventListener("localStorage",e),function(){window.removeEventListener("localStorage",e)}}),[]),[c,function(t){try{var n=t instanceof Function?t(c):t;u(n),window.localStorage.setItem(e,JSON.stringify(n)),window.dispatchEvent(new Event("localStorage"))}catch(t){console.log("Error “".concat(e,"”:"),t)}}]}},58074:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ue});var r=n(67294),l=n.n(r),a=n(22843),o=n(33664),i=n(22222),c=n(57588),u=n(92222),s=n(32244),d=n(94943),y=n(89255),f=n(23570),v=n.n(f),m=n(80416),p=n(96909),b=n(82904),g=n(60604),E=n(99009),S=n(9082),O=n(93222),h="GEONODE:REQUEST_DATASET_AVAILABLE_STYLES",w="GEONODE:CREATE_GEONODE_STYLE",N="GEONODE:DELETE_GEONODE_STYLE",C=n(73443),j=n(17621),P=n.n(j),k=n(3828),T=n(35721);function Z(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=e.type,n=e.title,r=P()("hsl(".concat(Math.floor(270*Math.random()),", 90%, 70%)")).toHexString();switch(t){case"raster":return"@mode 'Flat'; @styleTitle '"+n+"'; \n* {\n\traster-channels: auto;\n\traster-opacity: 1;\n}\n";case"point":default:return"@mode 'Flat'; @styleTitle '"+n+"'; \n* {\n\tmark: symbol('square');\n\t:mark {\n\t\tfill: "+r+";\n\t\tsize: 4;\n\t}\n}\n";case"linestring":return"@mode 'Flat'; @styleTitle '"+n+"'; \n* {\n\tstroke: "+r+";\n}\n";case"polygon":return"@mode 'Flat'; @styleTitle '"+n+"'; \n* {\n\tfill: "+r+";\n}\n"}}function U(e){var t=e.name;return"geonode:".concat(v()(),"_ms_").concat(t)}const _={gnCreateStyle:function(e,t){return e.ofType(w).switchMap((function(e){var n,r,l,a,o=t.getState(),i=(null==e||null===(n=e.options)||void 0===n?void 0:n.styleService)||(0,O.Z0)(o),c=U({name:e.title.toLowerCase().replace(/\W/g,"")}),u=e.layer||(0,O.Vf)(o),s={title:e.title,description:"",msStyleJSON:null,msEditorType:"visual",gnLayerName:u.name,gnDatasetPk:null==u||null===(r=u.extendedParams)||void 0===r||null===(l=r.mapLayer)||void 0===l||null===(a=l.dataset)||void 0===a?void 0:a.pk},d=(0,O.lC)(o);return y.Observable.defer((function(){return S.ZP.createStyle({baseUrl:null==i?void 0:i.baseUrl,code:x({type:d,title:e.title}),format:"css",styleName:c,metadata:s})})).switchMap((function(){return y.Observable.of((0,m.tV)(u.id,"layer",{availableStyles:[].concat(Z(u.availableStyles),[{format:"css",metadata:s,name:c,title:e.title}])}),(0,g.W)(u.id,E.s1,"override",{}),(0,m.Xy)({style:c},!0),(0,p.Nf)("edit"),(0,C.nY)())}))}))},gnDeleteStyle:function(e,t){return e.ofType(N).switchMap((function(e){var n,r=t.getState(),l=(null==e||null===(n=e.options)||void 0===n?void 0:n.styleService)||(0,O.Z0)(r),a=e.layer||(0,O.Vf)(r),o=function(){var t,n=(a.availableStyles||[]).filter((function(t){return t.name!==e.styleName}));return y.Observable.of((0,m.tV)(a.id,"layer",{availableStyles:n}),(0,g.W)(a.id,E.s1,"override",{}),(0,m.Xy)({style:(null==n||null===(t=n[0])||void 0===t?void 0:t.name)||""},!0),(0,p.Nf)("edit"),(0,C.nY)())};return y.Observable.defer((function(){return y.Observable.defer((function(){return S.ZP.deleteStyle({baseUrl:null==l?void 0:l.baseUrl,styleName:e.styleName})}))})).switchMap((function(){return o()})).catch((function(){return o()}))}))},gnRequestDatasetAvailableStyles:function(e,t){return e.ofType(h).switchMap((function(e){var n,r=t.getState(),l=(null==e||null===(n=e.options)||void 0===n?void 0:n.styleService)||(0,O.Z0)(r);return y.Observable.defer((function(){return function(e){var t,n,r,l,a,o,i=e.layer,c=e.styleService,u=null==i||null===(t=i.extendedParams)||void 0===t||null===(n=t.mapLayer)||void 0===n||null===(r=n.dataset)||void 0===r?void 0:r.subtype,s=(null==i?void 0:i.availableStyles)||[];return 0===s.length?function(e,t){var n,r="visual",l=null;return e?S.ZP.getStyleCodeByName({baseUrl:null==t?void 0:t.baseUrl,styleName:(0,T.UH)(e)}).then((function(e){var t=e||{},n=t.metadata,a=void 0===n?{}:n,o=t.code,i=t.format,c=t.languageVersion,u=(0,T.BB)(a);return V(V({msEditorType:r,msStyleJSON:l},u),{},{code:o,format:i,languageVersion:c})})).catch((function(){return{msEditorType:r,msStyleJSON:l,code:n}})):new Promise((function(e){return e({msStyleJSON:l,msEditorType:r,code:n})}))}(null==i||null===(l=i.extendedParams)||void 0===l||null===(a=l.mapLayer)||void 0===a||null===(o=a.dataset)||void 0===o?void 0:o.default_style,c).then((function(e){var t,n,r,l=e||{},a=l.msEditorType,o=l.msStyleJSON,s=l.code,d=l.format,y=l.languageVersion,f=i.name.split(":"),v=1===f.length?f[0]:f[f.length-1],m=U({name:v}),p={title:v,description:"",msStyleJSON:o||null,msEditorType:a||"visual",gnDatasetPk:null==i||null===(t=i.extendedParams)||void 0===t||null===(n=t.mapLayer)||void 0===n||null===(r=n.dataset)||void 0===r?void 0:r.pk};return S.ZP.createStyle(V({baseUrl:null==c?void 0:c.baseUrl,code:s||x({type:u,title:v}),format:s&&d?d:"css",styleName:m,metadata:p},s&&d&&{languageVersion:y})).then((function(){return[[{name:m,title:v,metadata:p,format:d}],!0]}))})):new Promise((function(e){return e([s])}))}({layer:e.layer,styleService:l})})).switchMap((function(t){var n,a,o,i=(o=2,function(e){if(Array.isArray(e))return e}(a=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw l}}return a}}(a,o)||A(a,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],u=i[1],s=null==c||null===(n=c[0])||void 0===n?void 0:n.name;return y.Observable.concat(y.Observable.of((0,b.Xg)("visualStyleEditor","enabled",!0)),y.Observable.defer((function(){return S.ZP.getStylesInfo({baseUrl:null==l?void 0:l.baseUrl,styles:c})})).switchMap((function(t){return y.Observable.of.apply(y.Observable,[(0,m.tV)(e.layer.id,"layer",{availableStyles:t}),(0,m.Xy)({style:s},!0),(0,g.W)(e.layer.id,E.s1,"override",{}),(0,p.Nf)("edit")].concat(Z(u&&!(0,k.V$)(r)?[(0,C.nY)()]:[])))})))}))}))},gnUpdateStyleInfoOnSave:function(e,t){return e.ofType(p.ch).switchMap((function(){var e=t.getState(),n=(0,O.Vf)(e);return y.Observable.of((0,m.tV)(n.id,"layers",{style:n.style}))}))}};var G=n(1550),M=n(5346),z=n(83958),R=n(90702),F=n(93473),J=n(99534),Y=n(94745),B=n(51605),W=n(55105),$=n(93451),X=n(15135),q=n(75110),H=n(32247);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=(0,$.Z)("placeholder")(c.FormControl),le=(0,E.YD)().filter((function(e){return!["Base CSS","Base SLD"].includes(e.title)})),ae=(0,X.Z)(F.Z),oe=(0,o.connect)((0,i.P1)([O.QW,O.gB,O.aN,O.p],(function(e,t,n,r){var l;return{isStyleChanged:void 0!==e&&void 0!==t&&e!==t,loading:n,error:!(null==r||null===(l=r.edit)||void 0===l||!l.status)}})),{onClick:p.Lc})((function(e){var t=e.variant,n=e.onClick,r=e.size,a=e.isStyleChanged,o=e.error,i=e.loading,c=!(!i&&!o);return l().createElement(ae,{className:a?"gn-pending-changes-icon":"",variant:t||"primary",size:r,disabled:c,onClick:c?function(){}:function(){return n()}},l().createElement(M.Z,{msgId:"save"})," ",i&&l().createElement(B.Z,null))})),ie=(0,o.connect)((0,i.P1)([O.Vf,O.gc,O.Z0,O.Ed,O.lC,O.QW,function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.visualStyleEditor)||void 0===n?void 0:n.enabled},O.i7,function(e){return(0,W.ic)(e,{height:!0})},q.Iz],(function(e,t,n,r,l,a,o,i,c,u){var s;return{layer:e,temporaryStyleId:t,styleService:n,format:r,geometryType:l,initialCode:a,enabled:o,selectedStyle:null==e||null===(s=e.availableStyles)||void 0===s?void 0:s.find((function(e){return e.name===i})),style:c,originalStyle:null==u?void 0:u.style}})),{onUpdateStatus:p.Nf,onUpdateParams:m.Xy,onInit:p.E0,onReset:p.Wv.bind(null,void 0,!1),onSelect:p.p2,onUpdateMetadata:p.bB,onSave:p.Lc,onClose:b.Xg.bind(null,"visualStyleEditor","enabled",!1),onZoomTo:G.Px,onCreate:function(e,t){return{type:w,title:e,options:t}},onDelete:function(e,t){return{type:N,styleName:e,options:t}},onUpdateNode:m.tV},(function(e,t,n){var r,l,a,o=(null===(r=n.styleService)||void 0===r?void 0:r.baseUrl)===(null===(l=e.styleService)||void 0===l?void 0:l.baseUrl)&&(null===(a=e.styleService)||void 0===a?void 0:a.isStatic),i=n.styleService&&!o?K(K({},n.styleService),{},{isStatic:!0}):K({},e.styleService);return K(K(K(K({},n),e),t),{},{styleService:i})}))((function(e){var t=e.layer,n=e.editorConfig,a=e.styleService,o=e.onInit,i=e.onReset,s=e.temporaryStyleId,d=e.showLayerProperties,y=e.geometryType,f=e.format,v=e.onSelect,m=e.onUpdateMetadata,p=e.initialCode,b=e.enabled,g=e.onClose,E=e.onZoomTo,O=e.onCreate,h=e.onDelete,w=e.selectedStyle,N=e.style,C=te((0,r.useState)(!1),2),j=C[0],P=C[1],k=te((0,r.useState)(!1),2),T=k[0],Z=k[1],A=te((0,r.useState)(""),2),I=A[0],D=A[1],V=te((0,H.Z)("style-notifcation",!1),2),L=V[0],x=V[1],U=te((0,r.useState)(!1),2),_=U[0],G=U[1],F=(0,r.useRef)();F.current=function(){s&&S.ZP.deleteStyle({baseUrl:a.baseUrl,styleName:s})},(0,r.useEffect)((function(){function e(){F.current()}return o(a),window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e),i()}}),[]);var B=le.filter((function(e){return e.types.includes(y)&&f===e.format}));if(!b||!t.id)return null;var W=!!((null==B?void 0:B.length)>0);return l().createElement("div",{className:"gn-visual-style-editor",style:N},d&&l().createElement("div",{className:"gn-visual-style-editor-layer-info"},l().createElement("div",{className:"gn-visual-style-editor-layer-title"},t.title),t.bbox&&l().createElement(ae,{onClick:function(){var e=t.bbox.bounds,n=e.minx,r=e.miny,l=e.maxx,a=e.maxy;E([n,r,l,a],t.bbox.crs)},tooltipId:"gnviewer.zoomToLayer"},l().createElement(c.Glyphicon,{glyph:"zoom-to"})),l().createElement(ae,{onClick:function(){i(),g()},className:"square-button"},l().createElement(c.Glyphicon,{glyph:"1-close"}))),(W||d)&&l().createElement("div",{className:"gn-visual-style-editor-toolbar"},d&&l().createElement(oe,{variant:"default",size:"xs"}),W&&l().createElement(R.Z,{placement:"right",content:l().createElement("ul",{className:"gn-visual-style-editor-templates"},B.map((function(e,t){var n;return l().createElement("li",{key:t,className:"gn-visual-style-editor-template",onClick:function(){return function(e){v(e),m({styleJSON:null})}((t=e.code,l=(null==w||null===(n=w.metadata)||void 0===n?void 0:n.title)||(null==w?void 0:w.label)||(null==w?void 0:w.title)||(null==w?void 0:w.name)||"",a=(null==w||null===(r=w.metadata)||void 0===r?void 0:r.description)||(null==w?void 0:w._abstract)||"",t.replace(/\$\{styleTitle\}/,l).replace(/\$\{styleAbstract\}/,a)));var t,n,r,l,a}},l().createElement("div",{className:"gn-visual-style-editor-template-preview"},null!=e&&null!==(n=e.preview)&&void 0!==n&&n.config?l().createElement(z.Z,e.preview.config):null==e?void 0:e.preview),l().createElement("div",{className:"gn-visual-style-editor-template-title"},e.title))})))},l().createElement(ae,{size:"xs"},l().createElement(M.Z,{msgId:"gnviewer.copyFrom"})))),!_&&!L&&l().createElement("div",{className:"gn-visual-style-editor-alert alert-info"},l().createElement("div",{className:"gn-visual-style-editor-alert-message"},l().createElement(M.Z,{msgId:"gnviewer.stylesFirstClone"}),l().createElement(ae,{size:"xs",variant:"transparent",onClick:function(){x(!0)}},l().createElement("p",null,l().createElement(M.Z,{msgId:"gnviewer.dismissMessage"})))),l().createElement(ae,{size:"xs",variant:"transparent",onClick:function(){G(!0)}},l().createElement(c.Glyphicon,{glyph:"remove"}))),l().createElement("div",{className:"gn-visual-style-editor-body"},l().createElement("div",null,l().createElement(u.m2,{key:p,config:n}))),l().createElement(J.Z,null,l().createElement(Y.Z,{title:l().createElement(M.Z,{msgId:"gnviewer.createStyleTitle"}),fitContent:!0,clickOutEnabled:!1,show:j,onClose:function(){P(!1),D("")},buttons:[{text:l().createElement(M.Z,{msgId:"gnviewer.createStyleClose"}),onClick:function(){P(!1),D("")}},{text:l().createElement(M.Z,{msgId:"gnviewer.createStyleCreate"}),bsStyle:"primary",onClick:function(){P(!1),O(I),D("")}}]},l().createElement("div",{style:{padding:"1rem"}},l().createElement(c.ControlLabel,null,l().createElement(M.Z,{msgId:"gnviewer.createStyleTitleInput"})," "),l().createElement(re,{value:I,onChange:function(e){var t;return D(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}})))),l().createElement(J.Z,null,l().createElement(Y.Z,{title:l().createElement(M.Z,{msgId:"gnviewer.deleteStyleTitle"}),show:T,fitContent:!0,clickOutEnabled:!1,onClose:function(){Z(!1)},buttons:[{text:l().createElement(M.Z,{msgId:"gnviewer.deleteStyleCancel"}),onClick:function(){Z(!1)}},{text:l().createElement(M.Z,{msgId:"gnviewer.deleteStyleConfirm"}),bsStyle:"danger",onClick:function(){h(t.style),Z(!1)}}]},l().createElement("div",{style:{padding:"1rem"}},l().createElement(M.Z,{msgId:"gnviewer.deleteStyleMessage"})))))})),ce=(0,o.connect)((0,i.P1)([O.Vf,k.HG,k.V$],(function(e,t,n){return{layer:e,enabled:!(null==t||!t.includes("change_resourcebase")),isNew:n}})),{onClick:function(e,t){return{type:h,layer:e,options:t}}})((function(e){var t,n=e.layer,r=e.status,a=e.onClick,o=void 0===a?function(){}:a,i=e.enabled,u=e.isNew;return"LAYER"===r&&null!=n&&null!==(t=n.extendedParams)&&void 0!==t&&t.mapLayer&&(i||u)?l().createElement(ae,{variant:"primary",className:"square-button-md",onClick:function(){o(n)}},l().createElement(c.Glyphicon,{glyph:"dropper"})):null}));const ue=(0,a.rx)("VisualStyleEditor",{component:ie,containers:{ActionNavbar:{name:"SaveStyle",Component:oe},TOC:{target:"toolbar",Component:ce}},reducers:{styleeditor:s.Z},epics:K(K({},d.ZP),_)})}}]);