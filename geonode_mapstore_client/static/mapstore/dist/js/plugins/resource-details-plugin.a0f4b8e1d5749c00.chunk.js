"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[25187],{669906:(e,t,n)=>{n.d(t,{O8:()=>a,j3:()=>o,pn:()=>r});var r="DETAILS:DETAILS_LOADED",a=function(e,t,n){return{type:r,id:e,detailsUri:t,detailsSettings:n}},o=function(){return{type:"DETAILS:OPEN_DETAILS_PANEL"}}},995134:(e,t,n)=>{n.d(t,{HH:()=>r,g$:()=>a,k5:()=>o});var r="MAP_TYPE_CHANGED",a="MAP_TYPE:VISUALIZATION_MODE_CHANGED";function o(e){return{type:a,visualizationMode:e}}},779376:(e,t,n)=>{n.d(t,{A:()=>I});var r=n(980971),a=n(538704),o=n(669906),i=n(995134),s=n(45228),l=n.n(s),c=n(779893),u=n(905185),d=n(112585),p=n(499084),g=n.n(p),m=n(444003);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const I=function(){var e,t,n,s,p,f,v,b,I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,w=arguments.length>1?arguments[1]:void 0;switch(w.type){case r.LK:var h;return"REPLACE"===(null==w||null===(h=w.payload)||void 0===h?void 0:h.action)?I:y(y({},I),{},{mapInitialConfig:{}});case a.mO:var D=I&&I.map&&I.map.present&&I.map.present.size||I&&I.map&&I.map.size,S=I&&I.map&&I.map.present&&I.map.present.bbox||I&&I.map&&I.map.bbox,x=w.config&&w.config.version>=2,R=w.legacy&&!x?c.Ay.convertFromLegacy(w.config):c.Ay.normalizeConfig(w.config.map),E=y(y({},R),{},{layers:R.layers.map((function(e){return"background"!==e.group||"ol"!==e.type&&"OpenLayers.Layer"!==e.type||(e.type="empty"),e})).map(d.jR),mapConfigRawData:y({},w.config)}),O=(null==I||null===(e=I.map)||void 0===e?void 0:e.mapId)||(null==I||null===(t=I.map)||void 0===t||null===(t=t.present)||void 0===t?void 0:t.mapId);return O=null!==(n=w.config)&&void 0!==n&&n.fileName&&O?O:w.mapId,E.map=l()({},E.map,{mapId:O,size:D,bbox:S,version:x?w.config.version:1}),l()({},E,{mapInitialConfig:y(y({},E.map),{},{mapId:w.mapId})});case a.Wy:return{loadingError:y(y({},w.error),{},{mapId:w.mapId})};case a.Il:return(b=I&&I.map&&I.map.present?I.map.present:I&&I.map)&&b.mapId===w.mapId?(b=l()({},b,{loadingInfo:!0}),l()({},I,{map:b})):I;case a.EE:return(b=I&&I.map&&I.map.present?I.map.present:I&&I.map)&&b.mapId===w.mapId?(b=l()({},b,{loadingInfoError:w.error,loadingInfo:!1}),l()({},I,{map:b})):I;case a.Aq:return!(b=I&&I.map&&I.map.present?I.map.present:I&&I.map)||"".concat(b.mapId)!=="".concat(w.mapId)&&(b.mapId||w.mapId)?I:(b=l()({},b,{info:w.merge?y(y({},b.info),w.info):w.info,loadingInfo:!1}),l()({},I,{map:b}));case o.pn:var A,C,P,k=null===(s=I.dashboard)||void 0===s?void 0:s.resource;return(b=I&&I.map&&I.map.present?I.map.present:I&&I.map)&&(null===(p=b.mapId)||void 0===p?void 0:p.toString())===w.id.toString()?(b=y(y({},b),{},{info:y(y({},b.info),{},{attributes:y(y({},null===(A=b.info)||void 0===A?void 0:A.attributes),{},{details:w.detailsUri||(null===(C=b.info)||void 0===C||null===(C=C.attributes)||void 0===C?void 0:C.details),detailsSettings:w.detailsSettings||(null===(P=b.info)||void 0===P||null===(P=P.attributes)||void 0===P?void 0:P.detailsSettings)})})}),l()({},I,{map:b})):k&&(null===(f=k.id)||void 0===f?void 0:f.toString())===w.id.toString()?(k=l()({},k,{attributes:l()({},k.attributes,{details:w.detailsUri,detailsSettings:w.detailsSettings})}),l()({},I,{dashboard:y(y({},I.dashboard),{},{resource:k})})):I;case a.QW:return b=I&&I.map&&I.map.present?I.map.present:I&&I.map,b=(0,u.hZ)("mapSaveErrors",g()(w.error),b),l()({},I,{map:b});case a.xg:return b=I&&I.map&&I.map.present?I.map.present:I&&I.map,b=(0,u.wC)("mapSaveErrors",b),l()({},I,{map:b});case a.u1:return b=(null==I||null===(v=I.map)||void 0===v?void 0:v.present)||(null==I?void 0:I.map),b=(0,u.wC)("mapSaveErrors",b),y(y({},I),{},{map:b});case i.g$:case i.HH:b=I&&I.map&&I.map.present?I.map.present:I&&I.map;var j=void 0!==w.mapType?(0,m.RR)(w.mapType):w.visualizationMode||m.Hd._2D;return b=(0,u.hZ)("visualizationMode",j,b),y(y({},I),{},{map:b});default:return I}}},290895:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var r=n(273517),a=n.n(r),o=n(393149),i=n(811668),s=n(801081),l=n(605556),c=n.n(l),u=n(66178),d=n(68352),p=n(779376),g=n(930196),m=n(172175),f=n(891543),v=n(868888),y=n(662387),b=n(935897),I=n(592497),w=n(201384),h=n(82725),D=n(51797),S=n(467726),x=n(147628),R=["defaultOpen"];function E(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){var n,o,i=e.tabs,s=void 0===i?[{type:"tab",id:"info",labelId:"gnviewer.info",items:[{type:"text",labelId:"gnviewer.title",value:"{context.get(state('gnResourceData'), 'title')}"},{type:"link",labelId:"gnviewer.owner",href:"{'/people/profile/' + context.get(state('gnResourceData'), 'owner.username')}",value:"{context.getUserResourceName(context.get(state('gnResourceData'), 'owner'))}",disableIf:"{!context.get(state('gnResourceData'), 'owner.username')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"{'gnviewer.'+context.get(state('gnResourceData'), 'date_type')}",value:"{context.get(state('gnResourceData'), 'date')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"gnviewer.created",value:"{context.get(state('gnResourceData'), 'created')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"gnviewer.lastModified",value:"{context.get(state('gnResourceData'), 'last_updated')}"},{type:"query",labelId:"gnviewer.resourceType",value:"{context.get(state('gnResourceData'), 'resource_type')}",pathname:"/",query:{f:"{context.get(state('gnResourceData'), 'resource_type')}"}},{type:"{context.isDocumentExternalSource(state('gnResourceData')) ? 'link' : 'text'}",labelId:"gnviewer.sourceType",value:"{context.get(state('gnResourceData'), 'sourcetype', '').toLowerCase()}",href:"{context.get(state('gnResourceData'), 'href')}"},{type:"query",labelId:"gnviewer.category",value:"{context.get(state('gnResourceData'), 'category.gn_description')}",pathname:"/",query:{"filter{category.identifier.in}":"{context.get(state('gnResourceData'), 'category.identifier')}"}},{type:"link",labelId:"gnviewer.pointOfContact",value:"{context.getUserResourceNames(context.get(state('gnResourceData'), 'poc'))}",disableIf:"{!context.get(state('gnResourceData'), 'poc')}"},{type:"query",labelId:"gnviewer.keywords",value:"{context.get(state('gnResourceData'), 'keywords')}",valueKey:"name",pathname:"/",queryTemplate:{"filter{keywords.slug.in}":"${slug}"}},{type:"query",labelId:"gnviewer.regions",value:"{context.get(state('gnResourceData'), 'regions')}",valueKey:"name",pathname:"/",queryTemplate:{"filter{regions.code.in}":"${code}"}},{type:"text",labelId:"gnviewer.attribution",value:"{context.get(state('gnResourceData'), 'attribution')}"},{type:"text",labelId:"gnviewer.language",value:"{context.get(state('gnResourceData'), 'language')}"},{type:"html",labelId:"gnviewer.supplementalInformation",value:"{context.get(state('gnResourceData'), 'supplemental_information')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"gnviewer.temporalExtent",value:{start:"{context.get(state('gnResourceData'), 'temporal_extent_start')}",end:"{context.get(state('gnResourceData'), 'temporal_extent_end')}"}},{type:"link",style:"label",labelId:"gnviewer.viewFullMetadata",href:"{context.getMetadataDetailUrl(state('gnResourceData'))}",disableIf:"{!context.getMetadataDetailUrl(state('gnResourceData'))}"}]},{type:"permissions",id:"permissions",labelId:"gnviewer.permissions",disableIf:"{!context.canAccessPermissions(state('gnResourceData'))}",items:[!0]},{type:"locations",id:"locations",labelId:"gnviewer.locations",items:"{({extent: context.get(state('gnResourceData'), 'extent')})}"},{type:"attribute-table",id:"attributes",labelId:"gnviewer.attributes",disableIf:"{context.get(state('gnResourceData'), 'resource_type') !== 'dataset'}",items:"{context.get(state('gnResourceData'), 'attribute_set')}"},{type:"linked-resources",id:"related",labelId:"gnviewer.linkedResources.label",items:"{context.get(state('gnResourceData'), 'linkedResources')}"},{type:"assets",id:"assets",labelId:"gnviewer.assets",items:"{context.get(state('gnResourceData'), 'assets')}"},{type:"settings",id:"settings",labelId:"gnviewer.management",disableIf:"{!context.canManageResourceSettings(state('gnResourceData'))}",items:[!0]}]:i,l=e.items,c=e.editable,u=void 0===c||c,d=e.canEdit,p=e.targetSelector,g=e.headerNodeSelector,m=void 0===g?"#gn-brand-navbar":g,w=e.navbarNodeSelector,h=void 0===w?"#ms-action-navbar":w,R=e.footerNodeSelector,A=void 0===R?".gn-footer":R,C=e.width,P=e.height,k=e.show,j=e.onShow,_=e.enableFilters,T=e.resource,M=e.resourcesGridId,N=e.loading,Y=e.pendingChanges,H=e.enablePreview,L=e.editingOverlay,q=e.closeOnClickOut,G=e.showViewerButton,U=(n=(0,r.useState)(!1),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(n,o)||E(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),z=U[0],F=U[1],$=d&&u,B=(0,I.A)({headerNodeSelector:m,navbarNodeSelector:h,footerNodeSelector:A,width:C,height:P,active:!0}),K=B.stickyTop,V=B.stickyBottom;function Z(){j(!1)}function W(){Y?F(!0):Z()}(0,r.useEffect)((function(){return function(){W()}}),[]);var Q=(0,x.A)({disabled:!q||!k,onClickOut:function(){W()}}),J=t.loadedPlugins,X=function(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,f.A)({items:l,loadedPlugins:J},[null==T?void 0:T.pk]).filter((function(e){return"toolbar"===e.target}))).sort((function(e,t){return e.position-t.position}));return a().createElement(b.A,{targetSelector:p},a().createElement(y.A,{className:"ms-resource-detail shadow-md",top:K,bottom:V,show:k,enabled:k,editing:L&&Y},a().createElement(S.A,{panelRef:Q,resource:T,loading:N,toolbarItems:X,onClose:W,editing:$,enableFilters:_,enablePreview:H,tabs:s,tabComponents:v.A,resourcesGridId:M,showViewerButton:G})),a().createElement(D.A,{show:!!z,onCancel:function(){return F(!1)},onConfirm:Z,pendingState:!!Y,titleId:"resourcesCatalog.detailsPendingChangesTitle",descriptionId:"resourcesCatalog.detailsPendingChangesDescription",cancelId:"resourcesCatalog.detailsPendingChangesCancel",confirmId:"resourcesCatalog.detailsPendingChangesConfirm",variant:"danger"}))}A.contextTypes={loadedPlugins:c().object,plugins:c().object};var C=(0,i.connect)((0,s.j8)({resource:m.xF,show:w.e_,loading:m.tI,canEdit:m.PA,pendingChanges:m.i9}),{onShow:h.GE})((function(e){var t,n,o=e.defaultOpen,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,R);return(0,r.useEffect)((function(){var e;null!=i&&null!==(e=i.resource)&&void 0!==e&&e.pk&&o&&i.onShow(!0)}),[null==i||null===(t=i.resource)||void 0===t?void 0:t.pk,o]),null!=i&&null!==(n=i.resource)&&void 0!==n&&n.pk&&i.show?a().createElement(A,i):null}));const P=(0,o.i1)("ResourceDetails",{component:C,containers:{ActionNavbar:{name:"ResourceDetailsButton",Component:(0,i.connect)((function(e){return{resource:(0,m.xF)(e)}}),{onShow:h.GE})((function(e){var t=e.component,n=e.resourcesGridId,r=e.onShow,o=e.resource;if(null==o||!o.pk)return null;var i=t;return i?a().createElement(i,{onClick:function(){r(!0,n)},glyph:"details",iconType:"glyphicon",square:!0,labelId:"resourcesCatalog.viewResourceProperties"}):null})),priority:1,doNotHide:!0},ResourcesGrid:{priority:2,target:"card-buttons",position:2,Component:(0,i.connect)((0,s.j8)({selectedResource:m.xF}),{onSelect:u.gu,onShow:h.GE})((function(e){var t=e.resourcesGridId,n=e.resource,r=e.onSelect,o=e.component,i=e.selectedResource,s=e.onShow,l=o;return a().createElement(l,{onClick:function(){i["@ms-detail"]&&(null==i?void 0:i.pk)===(null==n?void 0:n.pk)||r(n,t),s(!0,t)},glyph:"details",iconType:"glyphicon",square:!0,labelId:"resourcesCatalog.viewResourceProperties"})})),doNotHide:!0}},reducers:{gnresource:g.A,controls:d.A,config:p.A}})}}]);