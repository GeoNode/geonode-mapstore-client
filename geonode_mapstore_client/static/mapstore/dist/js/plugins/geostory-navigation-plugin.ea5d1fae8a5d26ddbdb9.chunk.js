(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[8710,9081],{81593:(t,e,r)=>{"use strict";r.d(e,{Z:()=>d});var n=r(67294),o=r(45338);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const d=function(t){var e=t.direction,r=void 0===e?"horizontal":e,i=t.deltaScroll,s=t.width,f=t.height,d=t.transition,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],v=(0,n.useState)(0),m=l(v,2),y=m[0],g=m[1],h=(0,n.useState)(0),b=l(h,2),w=b[0],O=b[1],S=(0,n.useRef)({x:0,y:0}),E=(0,n.useState)(!1),C=l(E,2),j=C[0],P=C[1],I=(0,n.useState)("start"),x=l(I,2),T=x[0],k=x[1],D=(0,n.useState)(),R=l(D,2),N=R[0],A=R[1],M=(0,n.useRef)(),U=(0,n.useRef)({});function Z(t,e){A("move:start");var n=M.current,o=n.parentNode,i=n.getBoundingClientRect(),a=o.getBoundingClientRect();if("horizontal"===r){var c=t+i.width;t<0&&c>a.width?(g(t),S.current.x=t,k("center")):t>=0?(g(0),S.current.x=0,k("start")):c<=a.width&&(g(a.width-i.width),S.current.x=a.width-i.width,k("end"))}if("vertical"===r){var u=e+i.height;e<0&&u>a.height?(O(e),S.current.y=e,k("center")):e>=0?(O(0),S.current.y=0,k("start")):u<=a.height&&(O(a.height-i.height),S.current.y=a.height-i.height,k("end"))}setTimeout((function(){A("move:end")}),d)}function _(t){Z(y+t,w+t)}function z(){var t=M.current,e=t.parentNode,n=t.getBoundingClientRect(),o=e.getBoundingClientRect();return!("horizontal"===r&&o.width>=n.width||"vertical"===r&&o.height>=n.height)}(0,n.useEffect)((function(){function t(t){t.preventDefault();var e=z();return P(z()),e?Z(S.current.x-(t.deltaY>0?i:-i),S.current.y-(t.deltaY>0?i:-i)):null}var e=z();P(e);var r=M.current.parentNode;return e&&Z(S.current.x,S.current.y),e&&r&&r.addEventListener&&r.addEventListener("wheel",t),function(){e&&r&&r.removeEventListener&&r.removeEventListener("wheel",t)}}),[s,f].concat(u(p)));var B=(0,o.QS)({onSwiping:function(t){t.event.stopPropagation();var e=z();return P(z()),e?Z(y-t.deltaX*t.velocity,w-t.deltaY*t.velocity):null},trackTouch:!0,trackMouse:!0});function F(t,e){U.current=a(a({},U.current),{},c({},t,e))}function L(t){var e=U.current[t];if(e){var n=M.current,o=(n&&n.parentNode).getBoundingClientRect(),i=e.getBoundingClientRect();if("horizontal"===r){var a=o.width,c=o.left,u=i.width,l=i.left,s=c+a,f=l+u;return c<=l&&s>=l||c<=f&&s>=f}}return!1}function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.margin,o=void 0===n?0:n,i=U.current[t];if(i){var a=M.current,c=a&&a.parentNode,u=c.getBoundingClientRect(),l=i.getBoundingClientRect();if("horizontal"===r){var s=u.width,f=u.left,d=l.width,p=l.left,v=f+s,m=p+d,y=f<=p&&v>=m;if(!y){var g=a.getBoundingClientRect(),h=g.left;Z(-(p-h)+o,void 0)}}}}var q=j&&("end"===T||"center"===T),W=j&&("start"===T||"center"===T);return{status:N,canSwipe:j,isStartControlActive:q,isEndControlActive:W,positionLabel:T,coordinates:{x:y,y:w},containerPropsHandlers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.style,r=void 0===e?{}:e;return a(a({},B),{},{style:a({position:"relative",overflow:"hidden",width:"100%",height:"100%"},r)})},contentPropsHandlers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.style,n=void 0===e?{}:e;return{ref:M,style:a(a(a(a({position:"absolute",display:"flex"},d&&{transition:"transform ".concat(d,"ms ease 0s")}),{},{flexDirection:"horizontal"===r?"row":"column"},j&&"horizontal"===r&&{transform:"translateX(".concat(y,"px)")}),j&&"vertical"===r&&{transform:"translateY(".concat(w,"px)")}),n)}},itemPropsHandlers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=t.onClick;return a({key:e,ref:function(t){return t&&F(e,t)}},r?{onClick:r,tabindex:L(e)?0:-1,onKeyDown:function(t){"Enter"===t.key&&r()}}:{tabindex:-1})},updateCoordinates:Z,moveItemInViewById:H,moveToDeltaSize:_}}},26538:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>$});var n=r(67294),o=r.n(n),i=r(33664),a=r(22222),c=r(22843),u=r(92579),l=r(66113),s=r(24684),f=r(66190),d=r(80717),p=r(57588),v=r(23279),m=r.n(v),y=r(81593),g=r(80628),h=r(82467);function b(){return b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b.apply(this,arguments)}var w=function(t){var e=t.tabindex,r=t.text,n=t.selected,i=t.style;return o().createElement(h.Z,{tabindex:e,className:"".concat(n?"active":"btn-tray"," btn-xs btn-default"),style:i},r)};const O=(0,g.Z)((function(t){var e=t.currentPage,r=t.items,i=t.scrollTo,a=void 0===i?function(){}:i,c=t.width,u=t.height,l=t.deltaSwipeSize,s=void 0===l?200:l,f=t.transition,d=void 0===f?300:f,v=t.updateTimeDebounceTime,g=void 0===v?500:v,O=t.getItemStyle,S=void 0===O?function(){return{}}:O,E=(0,y.Z)({direction:"horizontal",width:c,height:u,transition:d,deltaScroll:s}),C=E.isStartControlActive,j=E.isEndControlActive,P=E.containerPropsHandlers,I=E.contentPropsHandlers,x=E.itemPropsHandlers,T=E.moveToDeltaSize,k=E.moveItemInViewById,D=e&&e.columns&&e.sectionId&&e.columns[e.sectionId]||e&&e.sectionId,R=(0,n.useRef)(null);return(0,n.useEffect)((function(){return R.current=m()((function(t){k(t,{margin:32})}),g),function(){R.current&&(R.current.cancel(),R.current=null)}}),[]),(0,n.useEffect)((function(){R.current&&(R.current.cancel(),R.current(D))}),[D]),o().createElement("div",b({},P(),{className:"ms-horizontal-menu"}),o().createElement("div",I(),r.map((function(t){var r=t.title,n=t.id,i=x({id:n,onClick:function(){e&&e.sectionId!==n&&a(n)}});return o().createElement("div",b({},i,{className:"ms-menu-item"}),o().createElement(w,{tabindex:"-1",id:n,text:r||"title",selected:n===D,style:S(n===D)}))}))),C&&o().createElement(h.Z,{className:"square-button-md no-border",style:{position:"absolute"},onClick:function(){return T(s)}},o().createElement(p.Glyphicon,{glyph:"chevron-left"})),j&&o().createElement(h.Z,{className:"square-button-md no-border",style:{position:"absolute",right:0},onClick:function(){return T(-s)}},o().createElement(p.Glyphicon,{glyph:"chevron-right"})))}));var S=r(45697),E=r.n(S),C=r(50966),j=r(5346),P=r(94745);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}var x=["tooltipPosition"];function T(){return T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T.apply(this,arguments)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e){return R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},R(t,e)}function N(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return A(t)}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}function U(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(c,t);var e,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(n);if(i){var r=M(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return N(this,t)});function c(){var t;k(this,c);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return U(A(t=a.call.apply(a,[this].concat(r))),"checkUnsavedChanges",(function(){t.props.renderUnsavedMapChangesDialog?t.props.onCheckMapChanges(t.goHome):(t.props.onCloseUnsavedDialog(),t.goHome())})),U(A(t),"goHome",(function(){t.context.router.history.push("/")})),t}return e=c,(r=[{key:"render",value:function(){var t=this.props,e=t.tooltipPosition,r=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,x),n=o().createElement(p.Tooltip,{id:"toolbar-home-button"},o().createElement(j.Z,{msgId:"gohome"}));return o().createElement(o().Fragment,null,o().createElement(C.Z,{overlay:n,placement:e},o().createElement(h.Z,T({id:"home-button",className:"square-button",bsStyle:"primary",onClick:this.checkUnsavedChanges,tooltip:n},r),this.props.icon)),o().createElement(P.Z,{ref:"unsavedMapModal",show:this.props.displayUnsavedDialog||!1,onClose:this.props.onCloseUnsavedDialog,title:o().createElement(j.Z,{msgId:"resources.maps.unsavedMapConfirmTitle"}),buttons:[{bsStyle:"primary",text:o().createElement(j.Z,{msgId:"resources.maps.unsavedMapConfirmButtonText"}),onClick:this.goHome},{text:o().createElement(j.Z,{msgId:"resources.maps.unsavedMapCancelButtonText"}),onClick:this.props.onCloseUnsavedDialog}],fitContent:!0},o().createElement("div",{className:"ms-detail-body"},o().createElement(j.Z,{msgId:"resources.maps.unsavedMapConfirmMessage"}))))}}])&&D(e.prototype,r),c}(o().Component);U(Z,"propTypes",{icon:E().node,onCheckMapChanges:E().func,onCloseUnsavedDialog:E().func,displayUnsavedDialog:E().bool,renderUnsavedMapChangesDialog:E().bool,tooltipPosition:E().string}),U(Z,"contextTypes",{router:E().object,messages:E().object}),U(Z,"defaultProps",{icon:o().createElement(p.Glyphicon,{glyph:"home"}),onCheckMapChanges:function(){},onCloseUnsavedDialog:function(){},renderUnsavedMapChangesDialog:!0,tooltipPosition:"left"});const _=Z;var z=r(11847),B=r(13218),F=r.n(B);function L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?L(Object(r),!0).forEach((function(e){q(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function q(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const W=function(t){var e,r=t.settings,n=t.scrollTo,i=void 0===n?function(){}:n,a=t.navigableItems,c=void 0===a?[]:a,u=t.currentPage,l=void 0===u?{}:u,s=t.totalItems,f=void 0===s?1:s,p=t.currentPosition,v=void 0===p?0:p,m=t.router,y=t.buttons,g=void 0===y?[]:y,h=null==r||null===(e=r.theme)||void 0===e?void 0:e.general,b=F()(h)&&h||{},w=b.fontFamily,S=b.borderColor,E=b.color,C=b.backgroundColor,j=r||{},P=j.isTitleEnabled,I=j.isLogoEnabled,x=j.isNavbarEnabled,T=g.length>0,k=m&&m.pathname&&m.search&&"true"===(0,z.vl)(m.search).showHome&&m.pathname.includes("/geostory/shared"),D=x&&(null==c?void 0:c.length)>0,R=P||I||D||T||k;return o().createElement("div",{className:"ms-geostory-navigation-bar",style:H(H({color:E,backgroundColor:C},S&&{borderBottom:"1px solid ".concat(S)}),{},{fontFamily:w})},o().createElement("div",{className:"progress-bar",key:"progress-bar",style:{backgroundColor:S}},o().createElement("div",{className:"progress-percent",style:{width:"".concat((v+1)/f*100,"%"),backgroundColor:E}})),R&&o().createElement("div",{className:"ms-geostory-navigation-tools"},o().createElement("div",{className:"ms-geostory-navigation-toolbar"},o().createElement(d.Z,{buttons:g}),k&&o().createElement(_,{bsStyle:"default",className:"square-button-md no-border",tooltipPosition:"right",renderUnsavedMapChangesDialog:!1})),o().createElement("div",{className:"ms-geostory-navigation-elements"},D?o().createElement("div",{className:"ms-geostory-navigation-navigable-items"},o().createElement(O,{items:c,currentPage:l,scrollTo:i,getItemStyle:function(t){return t?{color:C,backgroundColor:E}:{outlineColor:E,borderColor:E}}})):null,o().createElement("div",{className:"ms-geostory-navigation-metadata"},P&&o().createElement("div",{className:"ms-geostory-navigation-title",style:{fontSize:r.storyTitleFontSize||"14px"}},r.storyTitle),I&&o().createElement("div",{className:"ms-geostory-navigation-logo"},o().createElement("img",{src:r.thumbnail&&(r.thumbnail.data||r.thumbnail.url)||"",height:32}))))))},$=(0,c.rx)("GeoStoryNavigation",{component:(0,i.connect)((0,a.zB)({mode:l.eK,settings:l.TQ,currentPage:l.PR,currentPosition:l.u5,totalItems:l.CK,navigableItems:(0,l.w)({includeAlways:!1}),pathname:s.F,search:s.y}))((function(t){var e=t.mode,r=void 0===e?u.nl.VIEW:e,n=t.currentPage,i=t.currentPosition,a=t.totalItems,c=t.settings,l=t.navigableItems,s=void 0===l?[]:l,f=t.pathname,d=t.search,p=t.items,v=(void 0===p?[]:p).filter((function(t){return t.tool})).map((function(t){return{Element:t.tool}}));return r===u.nl.VIEW?o().createElement("div",{key:"geostory-navigation",className:"ms-geostory-navigation",style:{width:"100%",position:"relative"}},o().createElement(W,{settings:c,currentPage:n,currentPosition:i,totalItems:a,scrollTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};(0,u.M1)(t,e)},navigableItems:s,router:{pathname:f,search:d},buttons:v})):null})),reducers:{geostory:f.Z}})},66190:(t,e,r)=>{"use strict";r.d(e,{Z:()=>R});var n=r(27361),o=r.n(n),i=r(47037),a=r.n(i),c=r(81763),u=r.n(c),l=r(30998),s=r.n(l),f=r(13311),d=r.n(f),p=r(68630),v=r.n(p),m=r(1469),y=r.n(m),g=r(84596),h=r.n(g),b=r(19155),w=r.n(b),O=r(61868),S=r(92579),E=r(34990);function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){P(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function P(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return x(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var T=function(t,e){var r=t.length,n=0;return e||0===e||(n=r),a()(e)?n=s()(t,{id:e})+1:u()(e)&&(n=Math.min(e,t.length)),n},k=function t(e,r,n){var o=n.contents,i=n.background,a=n.id,c=n.resourceId,u=[],l=r+'{"id": "'.concat(a,'"}]');return c===e?[l]:(i&&i.resourceId===e&&u.push(l+".background"),o?o.reduce((function(r,n){return[].concat(I(r),I(t(e,l+".contents[",n)))}),u):u)},D={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1};const R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E.D7:var r=e.id,n=e.path,i=e.position,c=e.element,u=(0,S.Ll)("currentStory.".concat(n),t),l=o()(t,u,[]),s=T(l,i),f=l.slice();return f.splice(s,0,j({id:r},c)),(0,O.t8)(u,f,t);case E.mN:var p=e.id,m=e.mediaType,g=e.data;return(0,O.t8)("currentStory.resources",w()([{id:p,type:m,data:g}].concat(I(t.currentStory&&t.currentStory.resources||[])),"id"),t);case E.vb:return(0,O.t8)("mode",e.mode,t);case E.QK:var b=e.id,C=e.mediaType,x=e.data,R=(0,O.cc)("currentStory.resources",{id:b,type:C,data:x},{id:b},t);return C===S.Tr.MAP&&t.currentStory.sections.filter((function(t){return t.type!==S.ID.CAROUSEL})).reduce((function(t,e){return[].concat(I(t),I(k(b,"sections[",e)))}),[]).map((function(e){var r=(0,S.Ll)("currentStory.".concat(e,".map"),t);R=(0,O.t8)(r,void 0,R)})),R;case E.Ro:var N=e.id,A=e.mediaType,M=(0,O.z6)("currentStory.resources",{id:N},t);return t.currentStory.sections.reduce((function(t,e){return[].concat(I(t),I(k(N,"sections[",e)))}),[]).map((function(e){var r=(0,S.Ll)("currentStory.".concat(e,".resourceId"),t);if(M=(0,O.zN)(r,M),A===S.Tr.MAP){var n=(0,S.Ll)("currentStory.".concat(e,".map"),t);M=(0,O.zN)(n,M)}})),M;case E.lX:return(0,O.t8)("loading"===e.name?"loading":"loadFlags.".concat(e.name),e.value,(0,O.t8)("loading",e.value,t));case E.Dq:var U=e.path,Z=(0,S.Ll)("currentStory.".concat(U),t),_=I(Z),z=_.pop(),B=o()(t,_);return y()(B)?(a()(z)&&(z=parseInt(z,10)),(0,O.t8)(_,[].concat(I(B.slice(0,z)),I(B.slice(z+1))),t)):(0,O.zN)(Z,t);case E.ij:var F,L,H,q,W,$=t.defaultSettings||{},K=e.story.settings||$,Y=(null===(F=K)||void 0===F||null===(L=F.theme)||void 0===L?void 0:L.fontFamilies)||[],Q=null===(H=t.currentStory)||void 0===H||null===(q=H.settings)||void 0===q||null===(W=q.theme)||void 0===W?void 0:W.fontFamilies;return Q&&Q.length>0&&(K=(0,O.t8)("theme.fontFamilies",w()([].concat(I(Q),I(Y)),"family"),K)),(0,O.t8)("currentStory",j(j({},e.story),{},{settings:K}),t);case E.i2:return(0,O.t8)("selectedCard",t.selectedCard===e.card?"":e.card,t);case E.IY:var G=e.control,V=e.value;return(0,O.t8)("controls.".concat(G),V,t);case E.Zf:var X=e.resource,J=t.currentStory&&t.currentStory.settings||{};return(0,O.qC)((0,O.t8)("resource",X),(0,O.t8)("currentStory.settings.storyTitle",J.storyTitle||X.name))(t);case E.si:case E.KT:return(0,O.zN)("errors.save",t);case E.SW:return(0,O.t8)("errors.save",h()(e.error),t);case E.Mk:return(0,O.t8)("isCollapsed",!t.isCollapsed,t);case E.NZ:var tt=o()(t,"currentStory.settings.".concat(e.option));return(0,O.t8)("currentStory.settings.".concat(e.option),!tt,t);case E.c:var et=!t.isSettingsEnabled,rt=t.currentStory&&t.currentStory.settings||{};return(0,O.qC)((0,O.t8)("isSettingsEnabled",et),(0,O.t8)("oldSettings",et?rt:{}),(0,O.t8)("currentStory.settings",et?j({},rt):e.withSave?rt:t.oldSettings))(t);case E.wb:var nt=e.path,ot=e.mode,it=e.element,at=(0,S.Ll)("currentStory.".concat(nt),t),ct=o()(t,at);return v()(ct)&&v()(it)&&"merge"===ot&&(it=j(j({},ct),it)),y()(ct)&&y()(it)&&"merge"===ot&&(it=[].concat(I(ct),I(it))),(0,O.t8)(at,it,t);case E.km:return(0,O.t8)("currentStory.settings.".concat(e.prop),e.value,t);case E.un:if(e.columnId){var ut=d()(t.currentStory.sections,(function(t){return d()(t.contents,{id:e.columnId})}));return ut&&d()(ut.contents,{id:e.columnId})?(0,O.t8)("currentPage",j(j({},t.currentPage),{},{columns:j(j({},t.currentPage.columns),{},P({},ut.id,e.columnId))}),t):t}return(0,O.t8)("currentPage",j(j({},t.currentPage),{},{sectionId:e.sectionId}),t);case E.Cx:var lt=e.status,st=e.target,ft=e.selector,dt=void 0===ft?"":ft,pt=e.hideContent,vt=void 0!==pt&&pt,mt=e.path,yt=lt?{target:st,selector:dt,hideContent:vt,path:mt}:void 0;return(0,O.t8)("focusedContent",yt,t);case E.jr:return(0,O.t8)("pendingChanges",e.value,t);case E.ZY:return(0,O.t8)("updateUrlOnScroll",e.value,t);case E.EQ:return(0,O.t8)("mediaEditorSettings",e.mediaEditorSettings,t);case E.W$:if(e.sectionId){var gt=d()(t.currentStory.sections,(function(t){return d()(t.contents,{id:e.showContentId})}));return gt&&d()(gt.contents,{id:e.showContentId})?(0,O.t8)("currentStory",j(j({},t.currentStory),{},{sections:(0,S.eI)(t.currentStory.sections,e)}),t):t}return t;case E.mk:return(0,O.t8)("drawOptions",e.drawOptions,t);default:return t}}},11847:(t,e,r)=>{"use strict";r.d(e,{ij:()=>y,w0:()=>g,vl:()=>h,K2:()=>b,Nw:()=>w});var n=r(8575),o=r(1469),i=r.n(o),a=r(47037),c=r.n(a),u=r(18446),l=r.n(u),s=r(89734),f=r.n(s),d=r(13311),p=r.n(d),v=r(64210);function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var y=function(t){if(!t)return{};var e=!(0===t.indexOf("http")),r=e?[]:t.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(e){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=t}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:t.slice(r[0].length);var o,i,a=(i=6,function(t){if(Array.isArray(t))return t}(o=r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(o,i)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[1],u=a[3],l=a[4],s=a[5],f=0===s.indexOf("/")?s.split("/")[1]:"";return{protocol:c,domain:u,port:l,rootPath:s,applicationRootPath:f}},g=function(t,e){var r=i()(t)?t[0]:t,o=i()(e)?e[0]:e;if(r===o)return!0;if(!r||!o)return!1;if(!c()(r)||!c()(o))return!1;var a=n.parse(r),u=n.parse(o),s=y(r),d=y(o),p=s.protocol===d.protocol,v=s.domain===d.domain,m=s.port===d.port,g=a.pathname===u.pathname,h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t===e)return!0;if(!t&&!e)return!0;var r=t?t.split("&").filter((function(t){return!!t})):[],n=e?e.split("&").filter((function(t){return!!t})):[];return l()(f()(r),f()(n))}(a.query,u.query);return p&&m&&v&&g&&h},h=function(t){return v.Qc(t)},b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,r=new RegExp(e);return r.test(t)},w=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/,n=new RegExp(r),o=n.test(t);if(!o)return!1;if(o&&!e)return!0;if(o&&e){var i=/\{(.*?)\}/.test(t);return 0===e.filter((function(t){return p()(i,t)})).length}return!1}},44020:t=>{"use strict";var e="%[a-f0-9]{2}",r=new RegExp(e,"gi"),n=new RegExp("("+e+")+","gi");function o(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],o(r),o(n))}function i(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=o(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=n.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(t){var o=i(r[0]);o!==r[0]&&(e[r[0]]=o)}r=n.exec(t)}e["%C2"]="�";for(var a=Object.keys(e),c=0;c<a.length;c++){var u=a[c];t=t.replace(new RegExp(u,"g"),e[u])}return t}(t)}}},23279:(t,e,r)=>{var n=r(13218),o=r(7771),i=r(14841),a=Math.max,c=Math.min;t.exports=function(t,e,r){var u,l,s,f,d,p,v=0,m=!1,y=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var r=u,n=l;return u=l=void 0,v=e,f=t.apply(n,r)}function b(t){return v=t,d=setTimeout(O,e),m?h(t):f}function w(t){var r=t-p;return void 0===p||r>=e||r<0||y&&t-v>=s}function O(){var t=o();if(w(t))return S(t);d=setTimeout(O,function(t){var r=e-(t-p);return y?c(r,s-(t-v)):r}(t))}function S(t){return d=void 0,g&&u?h(t):(u=l=void 0,f)}function E(){var t=o(),r=w(t);if(u=arguments,l=this,p=t,r){if(void 0===d)return b(p);if(y)return clearTimeout(d),d=setTimeout(O,e),h(p)}return void 0===d&&(d=setTimeout(O,e)),f}return e=i(e)||0,n(r)&&(m=!!r.leading,s=(y="maxWait"in r)?a(i(r.maxWait)||0,e):s,g="trailing"in r?!!r.trailing:g),E.cancel=function(){void 0!==d&&clearTimeout(d),v=0,u=p=l=d=void 0},E.flush=function(){return void 0===d?f:S(o())},E}},7771:(t,e,r)=>{var n=r(55639);t.exports=function(){return n.Date.now()}},19081:(t,e,r)=>{"use strict";t.exports=r(1174)},80628:(t,e,r)=>{"use strict";r.d(e,{Z:()=>v});var n=r(67294),o=r.n(n),i=r(55553);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}const v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleWidth:!0,handleHeight:!0};return function(r){function n(){return c(this,n),s(this,f(n).apply(this,arguments))}return d(n,r),l(n,[{key:"render",value:function(){return o().createElement(i.Z,e,o().createElement(t,this.props))}}]),n}(n.Component)}}}]);