(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[95121],{678833:(e,r,t)=>{"use strict";t.d(r,{Z:()=>m});var n=t(124852),o=t.n(n),i=t(598611),u=t.n(i),a=t(322843);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){var n,o,i,u;n=e,o=r,i=t[r],u=function(e,r){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(u)?u:u+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}const m=function(e){var r=e.items,t=e.loadedPlugins,i=e.loaderComponent,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=(0,n.useRef)({});l.current={items:r,loadedPlugins:t,loaderComponent:i};var d=u()(Object.keys(t||{}),","),m=(0,n.useMemo)((function(){return function(e){return f(e.items).sort((function(e,r){return e.position>r.position?1:-1})).map((function(r){return s(s({},r),{},{Component:r.Component||(0,a.KB)(r,e.loadedPlugins,e.loaderComponent||o().createElement("div",null))})}))||[]}(l.current)}),[d].concat(f(c)));return m}},94228:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>B});var n=t(124852),o=t.n(n),i=t(322843),u=t(171703),a=t(22222),c=t(737275),l=t(398288),s=t(274621),f=t(643892),d=t(452992),m=t(17594),p=t(925108),b=t(782904),y=t(572036),v=t(482100),g=t(303744);var O=t(100824),h=t(625635),j=t(877593),w=t(805346),P=t(675110),S=t(800827),E=t(770058),C=t(807461),k=t(678833),A=t(535721),T=["hide"];function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function I(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var x=(0,u.connect)((0,a.P1)([function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data)||null},function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.loading)||!1},function(e){var r,t;return(null==e||null===(r=e.gnresource)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.favorite)||!1},function(e){var r;return(null==e||null===(r=e.gnsave)||void 0===r?void 0:r.savingThumbnailMap)||!1},P.l2,v.km,v.Bs,S.Od,function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.showMapThumbnail)||!1},d.WB],(function(e,r,t,n,o,i,u,a,c,l){return{layers:o,resource:e,loading:r,savingThumbnailMap:n,favorite:t,isThumbnailChanged:i,resourceThumbnailUpdating:u,initialBbox:null==a?void 0:a.bbox,enableMapViewer:c,downloading:l,resourceId:e.pk}})),{closePanel:b.Xg.bind(null,"rightOverlay","enabled",!1),onFavorite:f.gw,onMapThumbnail:f.CB,onResourceThumbnail:f.e5,onClose:f.qs,onSetExtent:f.rg})(l.Z),R=(0,u.connect)((0,a.P1)([v.V$,v.fg,v.L4],(function(e,r,t){return{hide:e||!r,resourceType:t}})),{onClick:b.Xg.bind(null,"rightOverlay","enabled","DetailViewer")})((function(e){var r=e.onClick,t=e.hide,n=e.variant,i=e.size,u=e.showMessage,a=e.resourceType,c=((0,A.NN)()[a]||{}).icon,l=void 0===c?"info-circle":c;return t?null:o().createElement(g.Z,{variant:n,size:i,onClick:function(){r()}},u?o().createElement(w.Z,{msgId:"gnviewer.viewInfo"}):o().createElement(m.Z,{name:l}))}));function Z(e,r){var t=e.location,i=e.enabled,u=e.onEditResource,a=e.onEditAbstractResource,c=e.onEditThumbnail,l=e.canEdit,s=e.user,f=e.onClose,d=e.monitoredState,m=e.queryPathname,p=void 0===m?"/":m,b=e.tabs,y=void 0===b?[]:b,v=e.items,g=e.resourceId,h=(0,E._y)(d,{tabs:y}),w=function(e){var r=e.disabled,t=e.onClickOut,o=(0,n.useRef)();return(0,n.useEffect)((function(){function e(e){var n;!r&&(null==o||null===(n=o.current)||void 0===n?void 0:n.contains)&&!o.current.contains(e.target)&&t()}return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[r,o,t]),o}({disabled:!i,onClickOut:function(){f()}}),P=r.loadedPlugins,S=(0,k.Z)({items:v,loadedPlugins:P},[g]).filter((function(e){return"toolbar"===e.target}));return o().createElement(O.Z,{enabled:i,ref:w,className:"gn-overlay-wrapper"},o().createElement(x,{editTitle:function(e){u(e)},editAbstract:function(e){a(e)},editThumbnail:function(e){c(e,!0)},activeEditMode:i&&l,enableFavorite:!!s,formatHref:function(e){return(0,j.nz)(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?I(Object(t),!0).forEach((function(r){var n,o,i,u;n=e,o=r,i=t[r],u=function(e,r){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==D(u)?u:u+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({location:t},e))},tabs:h.tabs,pathname:p,toolbarItems:S}))}var M=(0,u.connect)((0,a.P1)([function(e){var r,t;return"DetailViewer"===(null==e||null===(r=e.controls)||void 0===r||null===(t=r.rightOverlay)||void 0===t?void 0:t.enabled)},v.il,v.V$,v.fg,s.np,function(e){return(0,i.bh)(e,(0,c.u8)("monitorState"))},function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data)||null}],(function(e,r,t,n,o,i,u){return{enabled:e,canEdit:r,hide:t||!n,user:o,monitoredState:i,resourceId:null==u?void 0:u.pk}})),{onEditResource:f.Br,onEditAbstractResource:f.bI,onEditThumbnail:f.U5,onClose:b.Xg.bind(null,"rightOverlay","enabled",!1)})((0,h.EN)((function(e){var r=e.hide,t=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,T);return r?null:o().createElement(Z,t)})));const B=(0,i.rx)("DetailViewer",{component:M,containers:{ActionNavbar:{name:"DetailViewerButton",Component:R}},epics:C.Z,reducers:{gnresource:y.Z,controls:p.Z}})},572036:(e,r,t)=>{"use strict";t.d(r,{Z:()=>g});var n=t(618446),o=t.n(n),i=t(441609),u=t.n(i),a=t(643892),c=t(535721),l=["data"],s=["features"],f=["features"],d=["features"];function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function p(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){var n,o,i,u;n=e,o=r,i=t[r],u=function(e,r){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==m(u)?u:u+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var v={selectedLayerPermissions:[],data:{},permissions:[]};const g=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.$X:return v;case a.ql:return y(y({},r),{},{configError:void 0,loadingResourceConfig:t.loading});case a.nS:return y(y({},r),{},{loading:!1,configError:t.message});case a.W:return y(y({},r),{},{loading:!0});case a.Zf:var n,i,m=t.data||{},b=(m.data,y({},p(m,l))),g=null===(n=r.data)||void 0===n?void 0:n.linkedResources;return u()(g)||b.pk!==(null===(i=r.data)||void 0===i?void 0:i.pk)||(b.linkedResources=g),y(y({},r),{},{error:null,initialResource:y({},t.data),data:b,loading:!1,isNew:!1});case a.Eu:return y(y({},r),{},{initialResource:null,data:null,error:t.error,loading:!1});case a.Vy:return y(y({},r),{},{data:y(y({},r.data),t.properties)});case a.YB:return y(y({},r),{},{type:t.resourceType});case a.xm:return y(y({},v),{},{isNew:!0});case a._f:return y(y({},r),{},{id:t.id});case a.ek:return y(y({},r),{},{permissions:t.permissions});case a.cd:return y(y({},r),{},{data:y(y({},null==r?void 0:r.data),{},{title:null==t?void 0:t.title,name:null==t?void 0:t.title})});case a.pt:return y(y({},r),{},{data:y(y({},null==r?void 0:r.data),{},{abstract:null==t?void 0:t.abstract})});case a.ww:return y(y({},r),{},{data:y(y({},null==r?void 0:r.data),{},{thumbnail_url:null==t?void 0:t.thumbnailUrl,thumbnailChanged:null==t?void 0:t.thumbnailChanged})});case a._Z:return y(y({},r),{},{data:y(y({},null==r?void 0:r.data),{},{updatingThumbnail:!0})});case a.dh:return y(y({},r),{},{showMapThumbnail:t.enabled});case a.p2:return y(y({},r),{},{selectedLayerPermissions:t.permissions});case a.ih:return y(y({},r),{},{initialCompactPermissions:t.compactPermissions,compactPermissions:t.compactPermissions,isCompactPermissionsChanged:!1,geoLimits:[]});case a.J5:return y(y({},r),{},{compactPermissions:t.compactPermissions,isCompactPermissionsChanged:!o()((0,c.go)(r.initialCompactPermissions),(0,c.go)(t.compactPermissions)),geoLimits:(0,c.vB)(t.compactPermissions)});case a.uA:if(r.compactPermissions){var O=r.compactPermissions,h=O.users,j=O.organizations,w=O.groups;return y(y({},r),{},{compactPermissions:{users:h.map((function(e){return e.features,p(e,s)})),organizations:j.map((function(e){return e.features,p(e,f)})),groups:w.map((function(e){return e.features,p(e,d)}))},geoLimits:[]})}return r;case a.Y0:return y(y({},r),{},{data:y(y({},r.data),{},{extent:y(y({},null===(e=r.data)||void 0===e?void 0:e.extent),{},{coords:t.coords})})});case a.sA:return y(y({},r),{},{params:t.params});case a.ip:return y(y({},r),{},{viewerLinkedResource:t.resource});default:return r}}},770058:(e,r,t)=>{"use strict";t.d(r,{gj:()=>d,QH:()=>m,mk:()=>p,BK:()=>b,bH:()=>y,_y:()=>v});var n=t(227361),o=t.n(n),i=t(414293),u=t.n(i),a=t(322843),c=t(368523);function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,r,t){var n=r?r.filter((function(e){return e.type===t})):void 0;return void 0===n||n&&0===n.length||n&&n.some((function(r){return e&&e.includes(null==r?void 0:r.value)}))}function m(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",n=r.split(t).map((function(r){return function(e,r){return 0===(null==r?void 0:r.indexOf("${"))?o()(e,r.replace(/^\$\{(.*)\}$/,"$1")):r}(e,r)}));return n.join(t)}var p=function(e){return!(""===e||u()(e))},b=function(e){return function r(t){return t&&"object"===f(t)?Array.isArray(t)?t.map(r):Object.fromEntries(Object.entries(t).map((function(e){var t=l(e,2),n=t[0],o=t[1];return[n,r(o)]}))):e(t)}},y=function e(r,t){return r&&r.reduce((function(r,n){var o=n;return Object.entries(n).forEach((function(r){var i=l(r,2),u=i[0],a=i[1];Array.isArray(a)&&(o[u]=e(n[u],t))})),t(o)&&r.push(o),r}),[])},v=function(e,r){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).filterFunc,n=void 0===t?function(e){return!e.disableIf}:t;return l(y([b((function(r){return(0,a.CU)((function(r){return o()(e,r)}),(0,c.z)(),r)}))(r)],n),1)[0]}}}]);