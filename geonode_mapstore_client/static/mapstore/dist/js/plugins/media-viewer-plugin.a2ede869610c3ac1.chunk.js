"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6609],{277327:(e,n,t)=>{t.d(n,{A:()=>u});var r=t(273517),a=t.n(r),l=t(8571),i=t(8117);function o(e){var n=e.msgId,t=e.icon;return a().createElement("div",{className:"gn-main-event-container"},a().createElement("div",{className:"gn-main-event-content"},a().createElement("div",{className:"gn-main-event-text"},a().createElement("div",{className:"gn-main-icon"},a().createElement(i.e6,{glyph:t})),n&&a().createElement(l.A,{msgId:n}))))}o.defaultProps={msgId:"",icon:"exclamation-sign"};const u=o},753896:(e,n,t)=>{t.d(n,{A:()=>P});var r=t(273517),a=t.n(r),l=t(920327),i=t(275705),o=t(317314),u=t(132672);function c(e){var n=e.url;return a().createElement(u.A,{column:!0,centerChildren:!0,classNames:["gn-metadata-preview","_corner-tl","_absolute","_fill"]},a().createElement("iframe",{frameBorder:"0",key:n,src:n,style:{width:"100%",height:"100%"}}))}c.defaultProps={url:""};const s=c;function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l,i,o=[],u=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=l.call(t)).done)&&(o.push(r.value),o.length!==n);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return m(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var d=function(e){var n=e.src;return a().createElement("iframe",{className:"gn-pdf-viewer",type:"application/pdf",frameBorder:"0",scrolling:"auto",height:"100%",width:"100%",src:n})},v=function(e){var n=e.src,t=e.url,l=f((0,r.useState)(null),2),u=l[0],c=l[1],m=f((0,r.useState)(!1),2),v=m[0],y=m[1],p=f((0,r.useState)(null),2),g=p[0],h=p[1];return(0,r.useEffect)(function(){y(!0),(0,o.$B)(n).then(function(e){c(e)}).catch(function(){h(!0)}).finally(function(){y(!1)})},[]),v?a().createElement("div",{className:"pdf-loader"},a().createElement(i.A,{size:70})):g?a().createElement(s,{url:t}):u?a().createElement(d,{src:u}):a().createElement("div",{className:"gn-pdf-viewer"})};var y=t(8571);function p(e,n){return E(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l,i,o=[],u=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=l.call(t)).done)&&(o.push(r.value),o.length!==n);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,n)||h(e,n)||g()}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,n){if(e){if("string"==typeof e)return b(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(e,n):void 0}}function b(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function E(e){if(Array.isArray(e))return e}var w=(0,r.lazy)(function(){return Promise.all([t.e(1206),t.e(6165)]).then(t.bind(t,176165))}),A=function(e){var n,t,l,i,o=e.data,u=E(i=null!=o?o:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||h(i)||g(),c=u[0],s=b(u).slice(1);return c=null!==(n=null===(t=c)||void 0===t?void 0:t.map(function(e,n){return{key:n,name:e,resizable:!0}}))&&void 0!==n?n:[],a().createElement("div",{className:"grid-container"},a().createElement(r.Suspense,{fallback:null},a().createElement(w,{columns:c,rowGetter:function(e){return null==s?void 0:s[e]},rowsCount:null!==(l=null==s?void 0:s.length)&&void 0!==l?l:0,emptyRowsView:function(){return a().createElement("span",{className:"empty-data"},a().createElement(y.A,{msgId:"gnviewer.noGridData"}))},minColumnWidth:100})))};var S=t(277327),x=t(425380),N=["resource"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},O.apply(null,arguments)}var _=(0,r.lazy)(function(){return Promise.all([t.e(9545),t.e(2129),t.e(6881),t.e(1924)]).then(t.bind(t,131924))}),j={image:l.Ay,video:l.Ay,pdf:function(e){var n=e.src,t=e.url;return a().createElement(v,{src:n,url:t})},gltf:_,ifc:_,audio:l.Ay,excel:function(e){var n=e.extension,l=e.src,u=e.url,c=p((0,r.useState)([]),2),f=c[0],m=c[1],d=p((0,r.useState)(!1),2),v=d[0],y=d[1],g=p((0,r.useState)(null),2),h=g[0],b=g[1];return(0,r.useEffect)(function(){l&&(y(!0),fetch(l).then(function(e){return"csv"===n?e.text():e.arrayBuffer()}).then(function(e){var r=e;"csv"!==n?Promise.all([t.e(3959),t.e(3686)]).then(t.bind(t,603959)).then(function(e){var n=e.read,t=e.utils,a=n(r,{type:"array"}),l=a.SheetNames[0],i=a.Sheets[l];r=t.sheet_to_csv(i),m((0,o.ST)(r))}).catch(function(e){console.error("Failed to load xlsx module",e)}):m((0,o.ST)(r))}).catch(function(){b(!0)}).finally(function(){y(!1)}))},[l]),v?a().createElement("div",{className:"csv-loader"},a().createElement(i.A,{size:70})):h?a().createElement(s,{url:u}):(null==f?void 0:f.length)>0?a().createElement("div",{className:"gn-csv-viewer"},a().createElement("div",{className:"csv-container"},a().createElement(A,{data:f}))):null},unsupported:function(e){var n=e.url,t=void 0===n?"":n;return a().createElement(s,{url:t})}},I={video:{mode:"view",inView:!0,fit:"contain"},image:{fit:"contain",enableFullscreen:!0,loaderComponent:function(){return a().createElement("div",{className:"pdf-loader"},a().createElement(i.A,{size:70}))}},pdf:{},unsupported:{}};const P=function(e){var n=e.resource,t=function(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,N),l=(0,x.gX)(),i=n&&(l[n.subtype]||l[n.resource_type])||{},u=i.hasPermission,c=i.metadataPreviewUrl,s=void 0===c?function(){}:c,f=(null==n?void 0:n.pk)&&u&&u(n);if(n&&f){var m=(0,o.su)(n.extension),d=j[m];return a().createElement(r.Suspense,{fallback:null},a().createElement(d,O({mediaType:m},I[m],t[m],{description:n.abstract,id:n.pk,thumbnail:function(){return(0,x.xy)(null==n?void 0:n.thumbnail_url)},src:n.href,url:n?s(n):"",isExternalSource:(0,x.ow)(n),bboxPolygon:null==n?void 0:n.ll_bbox_polygon,title:n.title,extension:n.extension})))}return a().createElement(S.A,{msgId:"gnhome.permissionsMissing"})}},736986:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var r=t(273517),a=t.n(r),l=t(393149),i=t(753896),o=t(811668),u=t(801081),c=t(930196),s=(0,o.connect)((0,u.Mz)([function(e){var n;return(null==e||null===(n=e.gnresource)||void 0===n?void 0:n.data)||null},function(e){var n;return(null==e||null===(n=e.gnresource)||void 0===n?void 0:n.loading)||!1}],function(e,n,t){return{resource:e,loading:n,editMode:t}}))(i.A),f=(0,o.connect)((0,u.Mz)([],function(){return{}}),{})(function(e){return a().createElement("div",{className:"gn-media-viewer"},a().createElement(s,e))});const m=(0,l.i1)("MediaViewer",{component:f,containers:{},epics:{},reducers:{gnresource:c.A}})}}]);