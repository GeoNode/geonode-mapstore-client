(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[11725],{446176:(e,t,r)=>{"use strict";r.d(t,{B0:()=>O,EE:()=>y,EZ:()=>f,Fk:()=>a,HD:()=>d,I:()=>c,IL:()=>p,IS:()=>E,NO:()=>h,O8:()=>S,Qn:()=>i,RG:()=>v,TA:()=>g,_G:()=>b,dC:()=>o,eO:()=>m,gl:()=>w,jT:()=>l,ol:()=>j,rC:()=>u,vM:()=>n,xn:()=>s});var n="ANNOTATIONS:EDIT",o="ANNOTATIONS:DOWNLOAD",i="ANNOTATIONS:LOAD_ANNOTATIONS",u="ANNOTATIONS:NEW",c="ANNOTATIONS:CLOSE",l="ANNOTATIONS:CONFIRM_CLOSE",a="ANNOTATIONS:CANCEL_CLOSE",s="ANNOTATIONS:REMOVE",f="ANNOTATIONS:STORE_SESSION",p="ANNOTATIONS:MERGE_FEATURES",y="ANNOTATIONS:SELECT_FEATURE",b=function(e){return{type:n,id:e}},v=function(e){return{type:o,annotations:e}},d=function(e){return{type:i,features:e,override:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},m=function(){return{type:u}},g=function(){return{type:c}},O=function(e){return{type:l,layer:e}},h=function(){return{type:a}},S=function(e){return{type:s,id:e}},j=function(e){return{type:f,session:e}},w=function(e,t){return{type:p,id:e,annotation:t}},E=function(e){return{type:y,id:e}}},516516:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(446176);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.EZ:return u(u({},e),{},{session:t.session});case n.EE:return u(u({},e),{},{featureId:t.id});case n.rC:case n.vM:return u(u({},e),{},{editing:!0,closeId:0});case n.I:return u(u({},e),{},{closeId:(e.closeId||0)+1});case n.jT:return u(u({},e),{},{editing:!1,closeId:0,session:null});case n.Fk:return u(u({},e),{},{closeId:0});default:return e}}},29489:(e,t,r)=>{"use strict";r.d(t,{Kn:()=>a,_L:()=>f,bd:()=>s,gu:()=>c,kv:()=>l,vC:()=>u});var n=r(801081),o=r(307679),i=r(535273),u=(0,n.Mz)([o.Kv],(function(e){return e.find(i.fd)})),c=(0,n.Mz)([o.Kv],(function(e){return e.filter(i.fd)})),l=function(e){var t=(0,o.ZT)(e);return t&&(0,i.fd)(t)?t:null},a=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.editing},s=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.session},f=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.featureId}},321127:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ee});var n=r(761448),o=r.n(n),i=r(679859),u=r.n(i),c=r(421585),l=r.n(c),a=r(45228),s=r.n(a),f=r(605556),p=r.n(f),y=r(273517),b=r.n(y),v=r(8117),d=r(393149),m=r(801081),g="CHANGE_CRS_INPUT_VALUE",O=r(273494),h=r(883832),S=r(8571),j=r(628017);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function T(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}var R=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return T(e=function(e,t,r){return t=N(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,r||[],N(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"handleChange",(function(t){e.props.changeInputValue(t.target.value)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.children;return b().createElement("div",{className:"dropdown-menu",style:{left:"auto",right:0}},b().createElement(v.HU,{className:"ms-prj-header",bsSize:"sm"},b().createElement("div",null,b().createElement(S.A,{msgId:"crsSelectorSelectedCRS"})),b().createElement("div",null,this.props.selected)),b().createElement(v.yq,{style:{maxHeight:150,overflowY:"auto",marginBottom:0}},t.filter((function(t){return!e.props.value.trim()||-1!==t.props.children.indexOf(e.props.value)}))),b().createElement(v.MJ,{ref:function(t){e.input=t},type:"text",placeholder:(0,j.kA)(this.context.messages,"crsSelectorFilterPlaceholder"),onChange:this.handleChange,value:this.props.value}))}}])&&E(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(b().Component);T(R,"propTypes",{selected:p().string,value:p().string,changeInputValue:p().func}),T(R,"contextTypes",{messages:p().object}),T(R,"defaultProps",{value:"",changeInputValue:function(){}});const I=R;var _=r(164045);var k=r(516516),D=r(29489),L=r(130711),B=r(401631),M=r(307679),x=r(131127),z=r(97401),U=r(747135),F=r(501719),G=r(764932),V=r(711030);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function W(e,t,r){return(t=Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}var $=(0,_.A)(V.A),Q=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return W(e=function(e,t,r){return t=Z(t),function(e,t){if(t&&("object"==H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,K()?Reflect.construct(t,r||[],Z(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{toggled:!1}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this,t=[],r={};for(var n in Object.keys(this.props.availableCRS).length&&(r=(0,G.filterCRSList)(this.props.availableCRS,this.props.filterAllowedCRS,this.props.additionalCRS,this.props.projectionDefs)),r)r.hasOwnProperty(n)&&t.push({value:n});var i=(0,G.normalizeSRS)(this.props.selected,this.props.filterAllowedCRS),c=["EPSG:4326","EPSG:3857","EPSG:900913"],a=["wms","osm","tileprovider","empty"],s=u()(this.props.allowedRoles,"ALL")||u()(this.props.allowedRoles,this.props.currentRole);return this.props.enabled&&s?b().createElement(v.ms,{dropup:!0,className:"ms-prj-selector",onToggle:function(t){return e.setState({toggled:t})}},b().createElement($,{bsRole:"toggle",bsStyle:"primary",className:"map-footer-btn btn-".concat(this.state.toggled?"success":"primary"),tooltip:b().createElement(S.A,{msgId:"showCrsSelector"}),tooltipPosition:"top"},b().createElement(v.e6,{glyph:"crs"})),b().createElement(I,{bsRole:"menu",value:this.props.value,selected:i,projectionDefs:this.props.projectionDefs,filterAllowedCRS:this.props.filterAllowedCRS,additionalCRS:this.props.additionalCRS,changeInputValue:function(t){return e.props.typeInput(t)}},t.map((function(t){return b().createElement(v.HU,{key:t.value,active:i===t.value,onClick:function(t){return function(t){l()(c,t)>-1||l()(a,e.props.currentBackground.type)>-1||e.props.currentBackground.allowedSRS&&o()(e.props.currentBackground.allowedSRS,t)?e.props.setCrs(t):e.props.onError({title:"error",message:"notification.incompatibleBackgroundAndProjection",action:{label:"close"},position:"tc",uid:"3"})}(t.target.textContent)},eventKey:t.value},t.value)})))):null}}],n&&J(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(b().Component);W(Q,"propTypes",{selected:p().string,value:p().string,projections:p().array,availableCRS:p().object,filterAllowedCRS:p().array,projectionDefs:p().array,additionalCRS:p().object,setCrs:p().func,typeInput:p().func,enabled:p().bool,currentBackground:p().object,onError:p().func,allowedRoles:p().array,currentRole:p().string}),W(Q,"defaultProps",{availableCRS:(0,G.getAvailableCRS)(),setCrs:function(){},typeInput:function(){},enabled:!0,allowedRoles:["ALL"]});var X=(0,d.Ng)((0,m.Mz)(F.N9,M.vm,x.Bg,x.$5,(function(e){return e&&e.crsselector&&e.crsselector.value}),B.XU,U.NR,z.lU,L.qt,L.sY,L.vJ,D.Kn,(function(e,t,r,n,o,i,u,c,l,a,s,f){return{currentRole:e,currentBackground:t,selected:r,projectionDefs:n,value:o,enabled:!("EDIT"===i||u||c||l||a||s||f)}})),{typeInput:function(e){return{type:g,value:e}},setCrs:O.d6,onError:h.z3})(Q);const ee={CRSSelectorPlugin:s()(X,{disablePluginIf:"{state('mapType') === 'leaflet'}",MapFooter:{name:"crsSelector",position:10,tool:!0,priority:1}}),reducers:{crsselector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{projections:[]},t=arguments.length>1?arguments[1]:void 0;return t.type===g?s()({},e,{value:t.value}):e},annotations:k.A},epics:{}}},97401:(e,t,r)=>{"use strict";r.d(t,{MA:()=>w,SU:()=>S,iS:()=>d,lU:()=>O,o:()=>v,o7:()=>m,si:()=>j,tV:()=>h,u$:()=>b,wd:()=>g});var n=r(400912),o=r.n(n),i=r(150104),u=r.n(i),c=r(131127),l=r(6683),a=r(779893);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){return e.maplayout&&e.maplayout.layout||{}},v=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},d=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},m=u()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=b(e),o=d(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){var i;return p(p({},e),{},y({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))}),{})||{}}),(function(e,t,r){return JSON.stringify(b(e))+JSON.stringify(d(e))+JSON.stringify(t)+(r?"_isDock":"")})),g=function(e){var t;return!(null===(t=b(e))||void 0===t||!t.rightPanel)},O=function(e){var t,r=a.Ay.getConfigProp("mapLayout")||l.OH;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=b(e);return!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},h=function(e){var t=(0,c.mg)(e),r=v(e);return r&&t&&t.size&&{left:(0,l.n_)(r.left,t.size.width),bottom:(0,l.n_)(r.bottom,t.size.height),right:(0,l.n_)(r.right,t.size.width),top:(0,l.n_)(r.top,t.size.height)}},S=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},j=function(e){return m(e,{height:!0,right:!0},!0)},w=function(e){return m(e,{right:!0},!0)}},421585:(e,t,r)=>{var n=r(596131),o=r(761489),i=Math.max;e.exports=function(e,t,r){var u=null==e?0:e.length;if(!u)return-1;var c=null==r?0:o(r);return c<0&&(c=i(u+c,0)),n(e,t,c)}}}]);