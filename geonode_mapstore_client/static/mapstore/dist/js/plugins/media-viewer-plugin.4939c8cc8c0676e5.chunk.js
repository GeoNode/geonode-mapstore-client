"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[86609],{277327:(e,n,t)=>{t.d(n,{A:()=>u});var r=t(273517),a=t.n(r),l=t(8571),i=t(904072);function o(e){var n=e.msgId,t=e.icon;return a().createElement("div",{className:"gn-main-event-container"},a().createElement("div",{className:"gn-main-event-content"},a().createElement("div",{className:"gn-main-event-text"},a().createElement("div",{className:"gn-main-icon"},a().createElement(i.A,{glyph:t})),n&&a().createElement(l.A,{msgId:n}))))}o.defaultProps={msgId:"",icon:"exclamation"};const u=o},158769:(e,n,t)=>{t.r(n),t.d(n,{default:()=>U});var r=t(273517),a=t.n(r),l=t(393149),i=t(920327),o=t(275705),u=t(317314),c=t(132672);function s(e){var n=e.url;return a().createElement(c.A,{column:!0,centerChildren:!0,classNames:["gn-metadata-preview","_corner-tl","_absolute","_fill"]},a().createElement("iframe",{frameBorder:"0",key:n,src:n,style:{width:"100%",height:"100%"}}))}s.defaultProps={url:""};const f=s;function m(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l,i,o=[],u=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=l.call(t)).done)&&(o.push(r.value),o.length!==n);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return d(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var v=function(e){var n=e.src;return a().createElement("iframe",{className:"gn-pdf-viewer",type:"application/pdf",frameBorder:"0",scrolling:"auto",height:"100%",width:"100%",src:n})},y=function(e){var n=e.src,t=e.url,l=m((0,r.useState)(null),2),i=l[0],c=l[1],s=m((0,r.useState)(!1),2),d=s[0],y=s[1],p=m((0,r.useState)(null),2),g=p[0],h=p[1];return(0,r.useEffect)((function(){y(!0),(0,u.$B)(n).then((function(e){c(e)})).catch((function(){h(!0)})).finally((function(){y(!1)}))}),[]),d?a().createElement("div",{className:"pdf-loader"},a().createElement(o.A,{size:70})):g?a().createElement(f,{url:t}):i?a().createElement(v,{src:i}):a().createElement("div",{className:"gn-pdf-viewer"})};var p=t(8571);function g(e,n){return w(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l,i,o=[],u=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=l.call(t)).done)&&(o.push(r.value),o.length!==n);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,n)||b(e,n)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,n){if(e){if("string"==typeof e)return E(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(e,n):void 0}}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function w(e){if(Array.isArray(e))return e}var S=(0,r.lazy)((function(){return Promise.all([t.e(81206),t.e(76165)]).then(t.bind(t,176165))})),A=function(e){var n,t,l,i,o=e.data,u=w(i=null!=o?o:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||b(i)||h(),c=u[0],s=u.slice(1);return c=null!==(n=null===(t=c)||void 0===t?void 0:t.map((function(e,n){return{key:n,name:e,resizable:!0}})))&&void 0!==n?n:[],a().createElement("div",{className:"grid-container"},a().createElement(r.Suspense,{fallback:null},a().createElement(S,{columns:c,rowGetter:function(e){return null==s?void 0:s[e]},rowsCount:null!==(l=null==s?void 0:s.length)&&void 0!==l?l:0,emptyRowsView:function(){return a().createElement("span",{className:"empty-data"},a().createElement(p.A,{msgId:"gnviewer.noGridData"}))},minColumnWidth:100})))};var x=t(277327),N=t(425380),O=["resource"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_.apply(null,arguments)}var j=(0,r.lazy)((function(){return Promise.all([t.e(39545),t.e(56367),t.e(86881),t.e(31924)]).then(t.bind(t,131924))})),I={image:i.Ay,video:i.Ay,pdf:function(e){var n=e.src,t=e.url;return a().createElement(y,{src:n,url:t})},gltf:j,ifc:j,audio:i.Ay,excel:function(e){var n=e.extension,l=e.src,i=e.url,c=g((0,r.useState)([]),2),s=c[0],m=c[1],d=g((0,r.useState)(!1),2),v=d[0],y=d[1],p=g((0,r.useState)(null),2),h=p[0],b=p[1];return(0,r.useEffect)((function(){l&&(y(!0),fetch(l).then((function(e){return"csv"===n?e.text():e.arrayBuffer()})).then((function(e){var r=e;"csv"!==n?Promise.all([t.e(3959),t.e(83686)]).then(t.bind(t,603959)).then((function(e){var n=e.read,t=e.utils,a=n(r,{type:"array"}),l=a.SheetNames[0],i=a.Sheets[l];r=t.sheet_to_csv(i),m((0,u.ST)(r))})).catch((function(e){console.error("Failed to load xlsx module",e)})):m((0,u.ST)(r))})).catch((function(){b(!0)})).finally((function(){y(!1)})))}),[l]),v?a().createElement("div",{className:"csv-loader"},a().createElement(o.A,{size:70})):h?a().createElement(f,{url:i}):(null==s?void 0:s.length)>0?a().createElement("div",{className:"gn-csv-viewer"},a().createElement("div",{className:"csv-container"},a().createElement(A,{data:s}))):null},unsupported:function(e){var n=e.url,t=void 0===n?"":n;return a().createElement(f,{url:t})}},P={video:{mode:"view",inView:!0,fit:"contain"},image:{fit:"contain",enableFullscreen:!0,loaderComponent:function(){return a().createElement("div",{className:"pdf-loader"},a().createElement(o.A,{size:70}))}},pdf:{},unsupported:{}};const k=function(e){var n=e.resource,t=function(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,O),l=(0,N.gX)(),i=n&&(l[n.subtype]||l[n.resource_type])||{},o=i.hasPermission,c=i.metadataPreviewUrl,s=void 0===c?function(){}:c,f=(null==n?void 0:n.pk)&&o&&o(n);if(n&&f){var m=(0,u.su)(n.extension),d=I[m];return a().createElement(r.Suspense,{fallback:null},a().createElement(d,_({mediaType:m},P[m],t[m],{description:n.abstract,id:n.pk,thumbnail:function(){return(0,N.xy)(null==n?void 0:n.thumbnail_url)},src:n.href,url:n?s(n):"",isExternalSource:(0,N.ow)(n),bboxPolygon:null==n?void 0:n.ll_bbox_polygon,title:n.title,extension:n.extension})))}return a().createElement(x.A,{msgId:"gnhome.permissionsMissing"})};var z=t(811668),C=t(801081),M=t(930196),T=(0,z.connect)((0,C.Mz)([function(e){var n;return(null==e||null===(n=e.gnresource)||void 0===n?void 0:n.data)||null},function(e){var n;return(null==e||null===(n=e.gnresource)||void 0===n?void 0:n.loading)||!1}],(function(e,n,t){return{resource:e,loading:n,editMode:t}})))(k),B=(0,z.connect)((0,C.Mz)([],(function(){return{}})),{})((function(e){return a().createElement("div",{className:"gn-media-viewer"},a().createElement(T,e))}));const U=(0,l.i1)("MediaViewer",{component:B,containers:{},epics:{},reducers:{gnresource:M.A}})}}]);