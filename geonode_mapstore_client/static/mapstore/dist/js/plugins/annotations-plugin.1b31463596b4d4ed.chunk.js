/*! For license information please see annotations-plugin.1b31463596b4d4ed.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[51482],{712853:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(273517),o=n.n(r),i=(n(715096),n(786292)),a=n(460056),l=n.n(a),u=n(276901),c=["wrapperClassName","toolbarOptions"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const d=function(e){var t=e.wrapperClassName,n=void 0===t?"ms-compact-text-editor":t,r=e.toolbarOptions,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return o().createElement(i.Editor,s({},a,{editorStyle:{minHeight:200},wrapperClassName:n,toolbar:{options:r||["fontFamily","blockType","inline","textAlign","list","link","colorPicker","remove","image","embedded"],image:{urlEnabled:!0,uploadEnabled:a.uploadEnabled||!1,alignmentEnabled:!1,uploadCallback:function(e){return new Promise(function(t,n){var r=new FileReader;r.addEventListener("load",function(){var e,n;(e=r.result,n={size:500,type:"image/jpeg",quality:.8},new Promise(function(t,r){var o=n||{},i=o.size,a=o.type,l=void 0===a?"image/png":a,u=o.quality,c=void 0===u?.9:u,s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=s.naturalWidth,n=s.naturalHeight,r=i,o=i/(e/n),a=document.createElement("canvas");a.setAttribute("width",r),a.setAttribute("height",o),a.getContext("2d").drawImage(s,0,0,r,o);var u=a.toDataURL(l,c);t(u)},s.onerror=function(e){r(e)},s.src=e})).then(function(e){t({data:{link:e}})})}),e?r.readAsDataURL(e):n()})},previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:a.alt||{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"100%"}},fontFamily:{options:a.fonts||u.Jp},link:{inDropdown:!1,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"]},inline:{inDropdown:!0,options:["bold","italic","underline","strikethrough","monospace"]},textAlign:{inDropdown:!0},list:{inDropdown:!0},embedded:{embedCallback:function(e){var t=/<iframe.*? src="(.*?)"/.exec(l()(e));return t&&t[1]||e},defaultSize:{height:"auto",width:"100%"}}}}))}},955201:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Nt});var r=n(393149),o=n(45388),i=n.n(o),a=n(541033),l=n.n(a),u=n(791936),c=n(415392),s=n(904059),d=n(883832),f=n(812366),p=n(446176),y=n(535273),m=n(29489),v=n(131127),b=n(307679);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t,n){return(t=function(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const j={loadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(p.Qn).switchMap(function(e){var t,r=e.features,o=e.override,a=(0,m.gu)(n());if(!o){var l,u=a.map(function(e){return e.id});return(l=i().Observable).of.apply(l,S(r.map(function(e){return u.includes(e.id)?(0,s.OK)(e.id,"layer",{title:e.title,description:e.description,style:e.style,features:e.features}):(0,s.VE)(e)})))}return(t=i().Observable).of.apply(t,S(a.map(function(e){return(0,s.e5)(e.id)})).concat(S(r.map(function(e){return(0,s.VE)(e)}))))})},newAnnotationEpic:function(e){return e.ofType(p.rC).switchMap(function(){var e={id:(0,y.Fe)(l()()),title:"New annotations",type:"vector",features:[],style:{},visibility:!0,rowViewer:y.BC};return i().Observable.of((0,f.bC)(),(0,s.VE)(e),(0,s.XL)(e.id,"layer"),(0,c.fN)(y.BC,"enabled",!0))})},editAnnotationEpic:function(e,t){var n=t.getState;return e.ofType(p.vM).switchMap(function(e){var t,r=(0,b.ZT)(n());return(t=i().Observable).of.apply(t,[(0,f.bC)()].concat(S((null==r?void 0:r.id)!==(null==e?void 0:e.id)?[(0,s.XL)(e.id,"layer")]:[]),[(0,c.fN)(y.BC,"enabled",!0)]))})},downloadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(p.dC).switchMap(function(e){var t=e.annotations;try{var r=(0,y.ju)(t),o=(0,v.Bl)(n());return(0,u.saveAs)(new Blob([JSON.stringify(r)],{type:"application/json;charset=utf-8"}),"".concat(o.length>0&&o||y.BC,".json")),i().Observable.empty()}catch(e){return i().Observable.of((0,d.z3)({title:"annotations.title",message:"annotations.downloadError",autoDismiss:5,position:"tr"}))}})},confirmCloseAnnotationsEpic:function(e){return e.ofType(p.jT).switchMap(function(e){var t,n=e.layer;return i().Observable.of((0,c.fN)(y.BC,"enabled",!1),null!=n&&null!==(t=n.features)&&void 0!==t&&t.length?(0,s.OK)(n.id,"layer",{invalidFeatures:null}):(0,s.e5)(n.id))})},removeAnnotationsEpic:function(e){return e.ofType(p.xn).switchMap(function(e){return i().Observable.of((0,f.gt)(),(0,f.Zv)(),(0,s.e5)(e.id))})},mergeAnnotationsFeaturesEpic:function(e,t){var n=t.getState;return e.ofType(p.IL).switchMap(function(e){var t,r=e.annotation,o=function(e){var t,n,o,i;return{features:[].concat(S((null==e?void 0:e.features)||[]),S((null==r?void 0:r.features)||[])),style:O(O(O({},null==r?void 0:r.style),null==e?void 0:e.style),{},{body:O(O(O({},null==r||null===(t=r.style)||void 0===t?void 0:t.body),null==e||null===(n=e.style)||void 0===n?void 0:n.body),{},{rules:[].concat(S((null==e||null===(o=e.style)||void 0===o||null===(o=o.body)||void 0===o?void 0:o.rules)||[]),S((null==r||null===(i=r.style)||void 0===i||null===(i=i.body)||void 0===i?void 0:i.rules)||[]))})})}},a=n(),u=(0,b.pO)(a,e.id),c=(0,m.bd)(a);return(t=i().Observable).of.apply(t,S(c?[(0,p.ol)(o(c))]:[]).concat([(0,s.OK)(u.id,"layer",O({_v_:l()()},o(u)))]))})}};var P=n(516516),T=n(273517),A=n.n(T),C=n(310340),I=n(811668),k=n(801081),N=n(987021),D=n.n(N),L=n(273494),x=n(130711),R=n(747135),_=n(8117),F=n(503618),M=n(382378),H=n.n(M),z=n(383488),B=n.n(z),U=n(947194),G=n(444003),q=n(711030),K=n(164045),V=n(457601),Z=n(605556),Y=n.n(Z),W=n(542541);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(null,arguments)}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oe(r.key),r)}}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ee=function(){return!!e})()}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e,t,n){return(t=oe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){var t=function(e){if("object"!=$(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=te(t),function(e,t){if(t&&("object"==$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ee()?Reflect.construct(t,n||[],te(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return A().createElement(W.A,J({},this.props.options,{items:[],isDraggable:!0,enableHeightField:this.props.enableHeightField,type:this.props.featureType,components:this.props.selected&&this.props.selected.geometry&&this.props.selected.geometry.coordinates&&this.props.selected.geometry.coordinates.length?(0,y.Py)(this.props.selected.geometry):[],properties:this.props.selected&&this.props.selected.properties||{},onComplete:function(){},onChangeRadius:this.props.onChangeRadius,aeronauticalOptions:this.props.aeronauticalOptions,onChangeFormat:this.props.onChangeFormat,format:this.props.format,mapProjection:this.props.mapProjection,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:this.props.renderer,onValidateFeature:this.props.onValidateFeature,onChange:function(t,n,r,o){var i=t.map(function(e){return[e.lon,e.lat].concat(function(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(void 0!==e.height?[e.height]:[]))});e.props.onChange(i,n,r,o),e.props.onValidateFeature()}}))}}])&&X(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(A().Component);re(ie,"propTypes",{components:Y().array,options:Y().object,onRemove:Y().func,onChange:Y().func,transitionProps:Y().object,selected:Y().object,featureType:Y().string,format:Y().string,mapProjection:Y().string,onComplete:Y().func,onHighlightPoint:Y().func,onChangeFormat:Y().func,onChangeRadius:Y().func,onSetInvalidSelected:Y().func,aeronauticalOptions:Y().object,onChangeText:Y().func,renderer:Y().string,onValidateFeature:Y().func,enableHeightField:Y().bool}),re(ie,"defaultProps",{selected:{},options:{},components:[],onRemove:null,onChange:function(){},onComplete:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onSetInvalidSelected:function(){},onChangeText:function(){},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},onValidateFeature:function(){},enableHeightField:!1});const ae=ie;var le=n(8571),ue=n(34273),ce=n(274156);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function de(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(e){if("string"==typeof e)return pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach(function(t){ve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ve(e,t,n){return(t=function(e){var t=function(e){if("object"!=se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==se(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=(0,K.A)(q.A),ge="UPDATE_ANNOTATIONS_FEATURES",he="UNDO_ANNOTATIONS_FEATURES",Oe="REDO_ANNOTATIONS_FEATURES",Ee=ve({},ge,function(e,t){return t(e)}),Se=(0,F.Ay)(function(e,t){return(Ee[t.type]||B())(e,t.callback)},{limit:20,undoType:he,redoType:Oe,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),we={};const je=(0,ce.injectIntl)(function(e){var t,n,r,o,i,a,u,c,s,d,f,p,m,v=e.selectedId,b=e.value,g=e.mapType,h=e.map,O=e.maxZoom,E=void 0===O?18:O,S=e.onSelect,w=void 0===S?function(){}:S,j=e.onChange,P=void 0===j?function(){}:j,C=e.onZoomTo,I=void 0===C?function(){}:C,k=e.onHighlight,N=void 0===k?function(){}:k,D=e.projection,L=e.intl,x=void 0===L?{}:L,R=e.mapInteractionsSupport,F=e.coordinatesFormat,M=e.onChangeCoordinatesFormat,z=void 0===M?function(){}:M,B=e.tab,q=void 0===B?"coordinates":B,K=e.onSelectTab,Z=void 0===K?function(){}:K,Y=e.svgSymbolsPath,W=e.lineDashOptions,$=e.enable3dStyleOptions,J=e.geometryEditorOptions,Q=e.defaultTextLabel,X=e.defaultSymbolizers,ee=e.geodesic,te=e.fonts,ne=void 0===te?["Arial","Verdana","Helvetica","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT"]:te,re=(p=(0,T.useReducer)(Se,{present:b,past:[],future:[]}),m=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(p,m)||fe(p,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),oe=re[0],ie=re[1],ce=(null==oe?void 0:oe.present)||oe||we,se=((null==ce?void 0:ce.features)||[]).find(function(e){return(null==e?void 0:e.id)===v}),pe=function(e,t){var n=e.symbolizerBlock,r=e.ruleBlock;return{symbolizerBlock:Object.keys(n).reduce(function(e,r){return me(me({},e),{},ve({},r,me(me({},n[r]),{},{defaultProperties:y.vU[r]||n[r].defaultProperties,params:Object.keys(n[r].params).reduce(function(e,o){var i,a=n[r].params[o];return["Circle"].includes(r)&&["geodesic","radius","msClampToGround","msGeometry"].includes(o)||["Text"].includes(r)&&["label","msGeometry"].includes(o)||["Line","Fill"].includes(r)&&["msGeometry"].includes(o)||["Point","Circle"].includes(null==t||null===(i=t.properties)||void 0===i?void 0:i.annotationType)&&["msGeometry"].includes(o)?e:me(me({},e),{},ve({},o,a))},{})})))},{}),ruleBlock:r}}((0,ue.A)({exactMatchGeometrySymbol:!0,enable3dStyleOptions:$}),se),ye=pe.symbolizerBlock,Ee=pe.ruleBlock,je=R;function Pe(e){ie({type:ge,callback:function(t){return e(t)}})}function Te(e,t){Z("coordinates",se);var n=l()();Pe(function(r){var o,i,a={type:"Feature",id:n,properties:me(me({},t),{},{id:n,name:e,annotationType:e}),geometry:null};return me(me({},r),{},{features:[].concat(de((null==r?void 0:r.features)||[]),[a]),style:me(me({},null==r?void 0:r.style),{},{format:"geostyler",body:me(me({},null==r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:[].concat(de((null==r||null===(i=r.style)||void 0===i||null===(i=i.body)||void 0===i?void 0:i.rules)||[]),[{name:"",filter:["==","id",n],mandatory:"Point"!==e,ruleId:l()(),symbolizers:[me({symbolizerId:l()()},(0,y.xB)(a,X))]}])})})})}),w(n)}function Ae(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureType?(0,V.S6)(e,{formatNumber:null!=x&&x.formatNumber?x.formatNumber:function(e){return e}}):[e]}function Ce(e,t,n){Pe(function(r){return me(me({},r),{},{features:((null==r?void 0:r.features)||[]).filter(function(t){var r;return!n||(null==t||null===(r=t.properties)||void 0===r?void 0:r.measureId)!==e}).reduce(function(r,o){return[].concat(de(r),de((null==o?void 0:o.id)!==e?[o]:n?Ae(t):[t]))},[])})})}function Ie(e){ie({type:ge,callback:function(t){return me(me({},t),{},{features:(t.features||[]).filter(function(e){var t;return(null==e||null===(t=e.properties)||void 0===t?void 0:t.measureId)!==v}).reduce(function(t,n){var r;if((null==n?void 0:n.id)!==v)return[].concat(de(t),[n]);var o=(0,y.HC)(n),i=me(me({},n),{},{geometry:me(me({},null==o?void 0:o.geometry),{},{coordinates:(0,y.QU)(null==o||null===(r=o.geometry)||void 0===r?void 0:r.type,e)})});return[].concat(de(t),de((0,y.D)(i)?Ae(i):[i]))},[])})}})}function ke(){var e=(((null==ce?void 0:ce.style)||{}).body||{}).rules;return{name:"selected feature style",rules:(void 0===e?[]:e).filter(function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==se||null===(n=se.properties)||void 0===n?void 0:n.id)})}}(0,T.useEffect)(function(){var e,t,n,r,o,i=((null==oe||null===(e=oe.present)||void 0===e?void 0:e.features)||[]).filter(y.D),a=((null==oe||null===(t=oe.present)||void 0===t?void 0:t.features)||[]).filter(function(e){return!(0,y.D)(e)}),l=i.map(function(e){return e.id});P(me(me({},null==oe?void 0:oe.present),{},{features:i,style:me(me({},null==oe||null===(n=oe.present)||void 0===n?void 0:n.style),{},{format:"geostyler",body:me(me({},null==oe||null===(r=oe.present)||void 0===r||null===(r=r.style)||void 0===r?void 0:r.body),{},{rules:((null==oe||null===(o=oe.present)||void 0===o||null===(o=o.style)||void 0===o||null===(o=o.body)||void 0===o?void 0:o.rules)||[]).filter(function(e){var t=e.filter;return l.includes(null==t?void 0:t[2])})})}),invalidFeatures:(null==a?void 0:a.length)>0?a:null}),(0,y.D)(se)?se:null,null==oe?void 0:oe.present)},[null==oe?void 0:oe.present]);var Ne=((null==ce?void 0:ce.features)||[]).filter(function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType});return A().createElement("div",{className:"ms-features-editor"},A().createElement("div",{className:"ms-features-editor-list"},A().createElement("div",{className:"ms-features-editor-list-header"},A().createElement(_.e2,null,A().createElement(be,{className:"square-button-md no-border",onClick:function(){ie({type:he})},disabled:0===((null==oe||null===(t=oe.past)||void 0===t?void 0:t.length)||0)},A().createElement(_.e6,{glyph:"undo"})),A().createElement(be,{className:"square-button-md no-border",onClick:function(){ie({type:Oe})},disabled:0===((null==oe||null===(n=oe.future)||void 0===n?void 0:n.length)||0)},A().createElement(_.e6,{glyph:"redo"}))),A().createElement(_.e2,null,A().createElement(be,{tooltipId:"annotations.titles.marker",className:"square-button-md no-border",onClick:function(){return Te("Point")}},A().createElement(_.e6,{glyph:"point-plus"})),A().createElement(be,{tooltipId:"annotations.titles.line",className:"square-button-md no-border",onClick:function(){return Te("LineString")}},A().createElement(_.e6,{glyph:"polyline-plus"})),A().createElement(be,{tooltipId:"annotations.titles.polygon",className:"square-button-md no-border",onClick:function(){return Te("Polygon")}},A().createElement(_.e6,{glyph:"polygon-plus"})),A().createElement(be,{tooltipId:"annotations.titles.text",className:"square-button-md no-border",onClick:function(){return Te("Text",{label:Q||""})}},A().createElement(_.e6,{glyph:"font-add"})),A().createElement(be,{tooltipId:"annotations.titles.circle",className:"square-button-md no-border",onClick:function(){return Te("Circle",{geodesic:!(null==ee||!ee.Circle)})}},A().createElement(_.e6,{glyph:"1-circle-add"})))),!(null!=ce&&null!==(r=ce.features)&&void 0!==r&&r.length)&&A().createElement("div",{className:"ms-features-editor-list-empty"},A().createElement(le.A,{msgId:"annotations.addGeometry"})),A().createElement("ul",{className:"ms-features-editor-list-body"},Ne.map(function(e){var t,n=null==e?void 0:e.id,r=v===n;return A().createElement("li",{key:n,onClick:function(){return r?function(){}:w(n,(0,y.D)(e)?e:null)},className:"ms-features-editor-item ".concat(r?" selected":""),onMouseEnter:function(){v!==n&&(0,y.D)(e)&&N("feature",e)},onMouseLeave:function(){N("feature",null)}},A().createElement("div",null,A().createElement(_.e6,{glyph:(0,y.YI)(e)})),A().createElement("div",{style:{flex:1}},A().createElement("input",{value:null==e||null===(t=e.properties)||void 0===t?void 0:t.name,type:"text",onChange:function(t){return Ce(n,me(me({},e),{},{properties:me(me({},null==e?void 0:e.properties),{},{name:t.target.value})}))}})),A().createElement(_.e6,{glyph:(0,y.D)(e)?"ok-sign text-success":"exclamation-mark text-danger"}),A().createElement(_.e2,null,A().createElement(be,{disabled:!(0,y.D)(e),bsStyle:r?"primary":"default",className:"square-button-md",tooltipId:"annotations.zoomToGeometry",onClick:function(t){t.stopPropagation(),I(H()(e),"EPSG:4326",E)}},A().createElement(_.e6,{glyph:"zoom-to"})),A().createElement(be,{className:"square-button-md",bsStyle:r?"primary":"default",tooltipId:"annotations.removeGeometry",onClick:function(e){e.stopPropagation(),function(e){Pe(function(t){return me(me({},t),{},{features:((null==t?void 0:t.features)||[]).filter(function(t){var n;return(null==t?void 0:t.id)!==e&&(null==t||null===(n=t.properties)||void 0===n?void 0:n.measureId)!==e})})})}(n)}},A().createElement(_.e6,{glyph:"trash"}))))}))),!se&&A().createElement("div",{className:"ms-features-editor-tools-empty"},A().createElement("div",null,A().createElement(_.e6,{glyph:"comment"}),A().createElement("div",null,A().createElement(le.A,{msgId:"annotations.selectAnnotationFeature"})))),se&&A().createElement("div",{className:"ms-features-editor-tools"},A().createElement(_.so,{bsStyle:"tabs",activeKey:q},A().createElement(_.CI,{key:"coordinates",eventKey:"coordinates",onClick:function(){return Z("coordinates",se)}},A().createElement(le.A,{msgId:"annotations.tabCoordinates"})),A().createElement(_.CI,{key:"style",eventKey:"style",onClick:function(){return Z("style",se)}},A().createElement(le.A,{msgId:"annotations.tabStyle"}))),A().createElement("div",{className:"ms-features-editor-tools-body"},"coordinates"===q&&A().createElement(A().Fragment,null,A().createElement(ae,{key:se.id,enableHeightField:g===G.Av.CESIUM&&!(null!=se&&null!==(o=se.properties)&&void 0!==o&&o.geodesic),format:F,onChangeFormat:z,mapProjection:D,options:J,onHighlightPoint:function(e){N("coordinate",e&&{type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:{}})},onChangeRadius:function(e){Ce(null==se?void 0:se.id,me(me({},se),{},{properties:me(me({},null==se?void 0:se.properties),{},{radius:e})}))},selected:me(me({},(0,y.HC)(se)),{},{properties:me(me({},null==se?void 0:se.properties),{},{valueText:null==se||null===(i=se.properties)||void 0===i?void 0:i.label})}),featureType:null==se||null===(a=se.properties)||void 0===a?void 0:a.annotationType,renderer:y.BC,onChange:Ie,onSetInvalidSelected:function(e,t){"coords"===e&&Ie(t)}}),"Text"===(null==se||null===(u=se.properties)||void 0===u?void 0:u.annotationType)&&A().createElement(_.gE,{className:"ms-annotations-label-input",key:"label",controlId:"ms-annotations-label-input",validationState:null!=se&&null!==(c=se.properties)&&void 0!==c&&c.label?void 0:"error"},A().createElement(_.mq,null,A().createElement(le.A,{msgId:"annotations.titles.text"})),A().createElement(_.MJ,{type:"text",value:(null==se||null===(s=se.properties)||void 0===s?void 0:s.label)||"",onChange:function(e){return Ce(null==se?void 0:se.id,me(me({},se),{},{properties:me(me({},null==se?void 0:se.properties),{},{label:e.target.value})}))}}))),"style"===q&&A().createElement("div",null,A().createElement(U.A,{ruleBlock:Ee,symbolizerBlock:ye,config:{geometryType:"annotation-".concat(null==se||null===(d=se.properties)||void 0===d||null===(d=d.annotationType)||void 0===d?void 0:d.toLowerCase()),simple:!0,fonts:ne,svgSymbolsPath:Y,lineDashOptions:W},rules:(null===(f=ke())||void 0===f?void 0:f.rules)&&de(ke().rules).reverse(),onChange:function(e){return t=de(e).reverse(),void Pe(function(e){var n=null==e?void 0:e.style,r=(e.features||[]).reduce(function(e,r){var o;if(r.id===se.id)return[].concat(de(e),de(t.map(function(e){return me(me({},e),{},{filter:e.filter||["==","id",se.properties.id]})})));var i=((null==n||null===(o=n.body)||void 0===o?void 0:o.rules)||[]).filter(function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==r||null===(n=r.properties)||void 0===n?void 0:n.id)});return[].concat(de(e),de(i))},[]),o=me(me({},n),{},{format:"geostyler",body:me(me({},null==n?void 0:n.body),{},{rules:r})});return me(me({},e),{},{style:o})});var t}})))),je&&A().createElement(je,{key:null==se?void 0:se.id,active:!!se&&"coordinates"===q,map:h,mapType:g,feature:se,geodesic:ee,onChange:function(e){Ce(se.id,e,!0)}}))});var Pe=n(593429),Te="ms-annotations-editor-target",Ae="ANNOTATIONS_ADDITIONAL_LAYERS_OWNER";function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach(function(t){Ne(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ne(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=Ne(Ne({},G.Av.OPENLAYERS,(0,T.lazy)(function(){return Promise.all([n.e(7434),n.e(89029),n.e(36128),n.e(66968),n.e(60284),n.e(81224),n.e(54620),n.e(18048),n.e(90974)]).then(n.bind(n,828109))})),G.Av.CESIUM,(0,T.lazy)(function(){return Promise.all([n.e(38487),n.e(56367),n.e(55394),n.e(86881),n.e(86714),n.e(67019),n.e(57378),n.e(531)]).then(n.bind(n,265365))})),Le=Ne(Ne({},G.Av.OPENLAYERS,(0,T.lazy)(function(){return Promise.all([n.e(7434),n.e(89029),n.e(36128),n.e(66968),n.e(60284),n.e(81224),n.e(54620),n.e(18048),n.e(12145),n.e(1073)]).then(n.bind(n,102496))})),G.Av.CESIUM,(0,T.lazy)(function(){return Promise.all([n.e(38487),n.e(56367),n.e(55394),n.e(86881),n.e(86714),n.e(67019),n.e(57378),n.e(51130)]).then(n.bind(n,637423))})),xe=function(e){return De[e]&&Le[e]};const Re=function(e){var t=e.map,n=e.active,r=e.mapType,o=e.feature,i=e.geodesic,a=void 0===i?{}:i,l=e.onChange,u=void 0===l?function(){}:l,c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).properties;return"Text"===(null==e?void 0:e.annotationType)?"Point":null==e?void 0:e.annotationType};if(!xe(r))return null;var s=De[r],d=Le[r],f=(0,y.D)(o,!0),p=c(o),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geometry,n=e.properties;return"Text"===(null==n?void 0:n.annotationType)||(null==n?void 0:n.radius)>0&&!t?"Point":null==n?void 0:n.annotationType}(o),v=!!a[p],b=(0,T.useRef)(o);return(0,T.useEffect)(function(){b.current=o},[o]),A().createElement(T.Suspense,{fallback:null},A().createElement(A().Fragment,null,A().createElement(s,{map:t,active:n&&null===o.geometry,depthTestAgainstTerrain:!1,geometryType:m,geodesic:v,getObjectsToExcludeOnPick:function(){return[]},onDrawEnd:function(e){var t,n,r,o=e.feature;u(ke(ke({},b.current),{},{properties:ke(ke({},null===(t=b.current)||void 0===t?void 0:t.properties),{},{geodesic:v},void 0!==(null==o||null===(n=o.properties)||void 0===n?void 0:n.radius)&&{radius:null==o||null===(r=o.properties)||void 0===r?void 0:r.radius}),geometry:o.geometry}))}}),A().createElement(d,{map:t,active:n&&f,geojson:o,getGeometryType:c,onEditEnd:function(e){return u(e)}})))};function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||Ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach(function(t){ze(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ze(e,t,n){return(t=function(e){var t=function(e){if("object"!=_e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_e(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e){return function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qe(e){var t;if(null==e||null===(t=e.geometry)||void 0===t||!t.type)return[];if("Point"===e.geometry.type&&!e.geometry.coordinates.some(y.us))return[He(He({},e),{},{properties:{geometryType:"Point"}})];var n=Fe(H()(e),4),r=n[0],o=n[1],i=n[2],a=n[3],l={type:"Feature",geometry:{type:"LineString",coordinates:[[r,o],[r,a],[i,a],[i,o],[r,o]]},properties:{geometryType:"LineString"}};return"LineString"===e.geometry.type?[l].concat(Be(e.geometry.coordinates.map(function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}}))):"Polygon"===e.geometry.type?[l].concat(Be(e.geometry.coordinates[0].map(function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}}))):[e]}var Ke=(0,I.connect)((0,k.Mz)([(0,x.xf)(y.BC,"ready"),m.kv,v.mg,R.tm,m.bd,m._L],function(e,t,n,r,o,i){var a;return{enabled:e,selected:t,maxZoom:(null==n?void 0:n.zoom)||18,projection:null==n?void 0:n.projection,enable3dStyleOptions:!!r,activeClickEventListener:null==n||null===(a=n.eventListeners)||void 0===a||null===(a=a.click)||void 0===a?void 0:a[0],session:o,selectedId:i}}),{onChange:s.OK,onZoomTo:L.jc,onUpdateALayer:Pe.E,onRemoveALayer:Pe.v9,onStoreSession:p.ol,setSelectedId:p.IS})(function(e){var t=e.enabled,n=e.targetId,r=void 0===n?Te:n,o=e.mapType,i=e.map,a=e.selected,l=e.onChange,u=e.onZoomTo,c=e.maxZoom,s=void 0===c?18:c,d=e.projection,f=e.onUpdateALayer,p=void 0===f?function(){}:f,m=e.onRemoveALayer,v=void 0===m?function(){}:m,b=e.symbolsPath,g=void 0===b?"product/assets/symbols/symbols.json":b,h=e.lineDashOptions,O=e.enable3dStyleOptions,E=e.geometryEditorOptions,S=e.format,w=void 0===S?"decimal":S,j=e.defaultTextAnnotation,P=void 0===j?"New":j,I=e.defaultPointType,k=e.defaultShape,N=e.defaultShapeStrokeColor,L=e.defaultShapeFillColor,x=e.defaultShapeSize,R=void 0===x?64:x,_=e.geodesic,F=e.activeClickEventListener,M=e.fonts,H=e.onStoreSession,z=e.session,B=e.selectedId,U=e.setSelectedId,G=void 0===U?function(){}:U,q=document.querySelector("#".concat(r)),K=Fe((0,T.useState)(w),2),V=K[0],Z=K[1],Y=Fe((0,T.useState)("coordinates"),2),W=Y[0],$=Y[1];function J(){return g.includes(".json")?g:"".concat(g,"symbols.json")}function Q(e,t){var n;xe(o)&&p(a.id,Ae,"override",He({visibility:!0},e&&!t&&!F&&{features:null==a||null===(n=a.features)||void 0===n?void 0:n.filter(function(t){var n=t.id,r=t.properties;return n!==e.id&&(null==r?void 0:r.measureId)!==e.id})})),p("ANNOTATIONS_SELECTED_LAYER",Ae,"overlay",{type:"vector",visibility:!0,features:e?qe(e):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#111111",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}})}return(0,T.useEffect)(function(){return t&&null!=a&&a.id&&p(a.id,Ae,"override",{visibility:!0}),function(){v({owner:Ae})}},[t]),(0,T.useEffect)(function(){var e=((null==a?void 0:a.features)||[]).find(function(e){return e.id===B});t&&(0,y.D)(e)&&Q(e,"style"===W)},[F,o,t]),t&&q&&a?(0,C.createPortal)(A().createElement("div",{className:"ms-annotations-editor"},A().createElement(je,{key:a._v_,selectedId:B,geodesic:{Circle:!1!==_},fonts:M,defaultSymbolizers:function(){if("symbol"!==I)return{};var e=D()(L||"#dddddd"),t=D()(N||"#777777");return{Point:{kind:"Mark",wellKnownName:J().replace(/[^\/]*.json$/,"".concat(k,".svg")),color:e.toHexString(),fillOpacity:e.getAlpha(),strokeColor:t.toHexString(),strokeOpacity:t.getAlpha(),strokeWidth:1,radius:R/2,rotate:0}}}(),svgSymbolsPath:J(),lineDashOptions:h,coordinatesFormat:V,enable3dStyleOptions:O,geometryEditorOptions:E,defaultTextLabel:P,onChangeCoordinatesFormat:Z,tab:W,onSelectTab:function(e,t){$(e),Q(t,"style"===e)},mapInteractionsSupport:!F&&Re,value:z||{features:(null==a?void 0:a.features)||[],style:(null==a?void 0:a.style)||{}},onHighlight:function(e,t){p("ANNOTATIONS_HIGHLIGHT_LAYERS",Ae,"overlay",{type:"vector",visibility:!0,features:t?qe(t):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#555555",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"Square",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:3,radius:6,rotate:0,msBringToFront:!0}]}]}}})},mapType:o,map:i,maxZoom:s,projection:d,onSelect:function(e,t){G(e),Q(t,"style"===W)},onChange:function(e,t,n){var r,o;l(a.id,"layers",e),Q(t,"style"===W),r=e.invalidFeatures,p("ANNOTATIONS_INVALID_LAYER",Ae,"overlay",{type:"vector",visibility:!0,features:r?(o=r,(o||[]).filter(function(e){var t=e.geometry;return(null==t?void 0:t.type)&&["LineString","Polygon"].includes(t.type)}).reduce(function(e,t){var n=("LineString"===t.geometry.type?t.geometry.coordinates:t.geometry.coordinates[0]).filter(function(e){return!e.some(y.us)});return[].concat(Be(e),Be(n.length>1?[{type:"Feature",geometry:{type:"LineString",coordinates:n},properties:He(He({},null==t?void 0:t.properties),{},{geometryType:"LineString"})}]:[]),Be(n.map(function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))},[])):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#ff0000",width:2,opacity:1,cap:"round",join:"round",msClampToGround:!1,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}}),H(n)},onZoomTo:u})),q):null});const Ve=Ke;var Ze=n(501882),Ye=n.n(Ze),We=n(314792),$e=n.n(We),Je=n(415120),Qe=n(97401),Xe=n(12816),et=n(553493),tt=n(712853);function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach(function(t){it(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function it(e,t,n){return(t=function(e){var t=function(e){if("object"!=nt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var lt=(0,et.A)("onEditorStateChange","editorState")(tt.A);const ut=function(e){var t,n,r=e.preview,o=e.properties,i=void 0===o?{}:o,a=e.fields,l=void 0===a?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:a,u=e.onChange,c=void 0===u?function(){}:u,s=(t=(0,T.useState)(l.filter(function(e){return"html"===e.type}).reduce(function(e,t){return ot(ot({},e),{},it({},t.name,(0,Xe.pn)(i[t.name]||"")))},{})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=s[0],f=s[1];return r?A().createElement("div",{className:"ms-annotations-fields preview"},l.map(function(e){var t=e.showLabel;return A().createElement("div",{key:e.name,className:"ms-annotations-field"},t&&A().createElement("div",{className:"ms-annotations-field-label"},A().createElement(le.A,{msgId:"annotations.field.".concat(e.name)})),A().createElement("div",{className:"ms-annotations-field-value",dangerouslySetInnerHTML:{__html:i[e.name]}}))})):A().createElement("form",{className:"ms-annotations-fields"},l.map(function(e){var t=Ye()(e.validator)?e.validator:null,n=t&&t(i[e.name]),r=e.validateError||"annotations.mandatory",o=e.showLabel,a=e.editable;return"text"===e.type?A().createElement(_.gE,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&A().createElement(_.mq,null,A().createElement(le.A,{msgId:"annotations.field.".concat(e.name)})),A().createElement(_.MJ,{disabled:!a,type:"text",value:i[e.name],onChange:function(t){return c(it({},e.name,t.target.value))}}),t&&!n&&A().createElement(_.f0,null,A().createElement(le.A,{msgId:r}))):"html"===e.type?A().createElement(_.gE,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&A().createElement(_.mq,null,A().createElement(le.A,{msgId:"annotations.field.".concat(e.name)})),a?A().createElement(lt,{editorState:d[e.name],onEditorStateChange:function(t){var n=(0,Xe.v6)(d[e.name]);(0,Xe.v6)(t)!==n&&(c(it({},e.name,(0,Xe.v6)(t))),f(function(n){return ot(ot({},n),{},it({},e.name,t))}))}}):A().createElement("div",{dangerouslySetInnerHTML:{__html:i[e.name]}}),t&&!n&&A().createElement(_.f0,null,A().createElement(le.A,{msgId:r}))):null}))};var ct=n(534332),st=n(406250),dt=n(174910),ft=n(132672),pt=n(267767);function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}var mt=["fields","onEdit","onRemove","onDownload"],vt=["title","description"];function bt(){return bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bt.apply(null,arguments)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach(function(t){Ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ot(e,t,n){return(t=function(e){var t=function(e){if("object"!=yt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var jt=(0,K.A)(q.A),Pt=(0,I.connect)(function(){return{}},{onRemove:p.O8,onDownload:p.RG,onEdit:p._G})(function(e){var t=e.fields,n=e.onEdit,r=void 0===n?function(){}:n,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onDownload,l=void 0===a?function(){}:a,u=wt(e,mt),c=Et((0,T.useState)(!1),2),s=c[0],d=c[1];return A().createElement("div",null,A().createElement("div",null,A().createElement(_.e2,null,A().createElement(jt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.edit",onClick:function(){return r(u.id)}},A().createElement(_.e6,{glyph:"pencil"})),A().createElement(jt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.remove",onClick:function(){return d(!0)}},A().createElement(_.e6,{glyph:"trash"})),A().createElement(jt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return l([u])}},A().createElement(_.e6,{glyph:"download"})))),A().createElement(ut,{preview:!0,properties:ht({title:null==u?void 0:u.title,description:null==u?void 0:u.description},null==u?void 0:u.options),fields:t}),A().createElement(st.A,null,A().createElement(ct.A,{show:s,onCancel:function(){return d(!1)},onConfirm:function(){i(u.id),d(!1)},variant:"danger",preventHide:!0,titleId:"annotations.undoDeleteFeature",confirmId:"annotations.confirm",cancelId:"annotations.cancel"})))}),Tt=(0,I.connect)((0,k.Mz)([(0,x.cU)(y.BC),function(e){return(0,Qe.o7)(e,{height:!0})},m.kv,v.mg],function(e,t,n,r){var o;return{enabled:e,style:t,selected:e?n:null,activeClickEventListener:null==r||null===(o=r.eventListeners)||void 0===o||null===(o=o.click)||void 0===o?void 0:o[0],projection:null==r?void 0:r.projection,zoom:null==r?void 0:r.zoom,resolutions:null==r?void 0:r.resolutions}}),{onClose:p.B0,onCancel:p.NO,onReady:c.fN.bind(null,y.BC,"ready"),onChange:s.OK,onDownload:p.RG})(function(e){var t=e.targetId,n=void 0===t?Te:t,r=e.selected,o=e.style,i=e.enabled,a=e.onReady,l=void 0===a?function(){}:a,u=e.onClose,c=void 0===u?function(){}:u,s=e.onChange,d=void 0===s?function(){}:s,f=e.onDownload,p=void 0===f?function(){}:f,m=e.fields,v=void 0===m?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:m,b=e.closeId,g=e.onCancel,h=void 0===g?function(){}:g,O=e.activeClickEventListener,E=e.projection,S=e.resolutions,w=e.zoom,j=ht({title:null==r?void 0:r.title,description:null==r?void 0:r.description},null==r?void 0:r.options),P=Et((0,T.useState)("properties"),2),C=P[0],I=P[1],k=Et((0,T.useState)(!1),2),N=k[0],D=k[1];function L(){return!v.find(function(e){return!!Ye()(null==e?void 0:e.validator)&&!e.validator(j[e.name])})}function x(){var e;return!(null==r||null===(e=r.features)||void 0===e||!e.length||r.invalidFeatures)}function R(e){return e.stopPropagation(),L()&&x()?c(r):D(!0)}return(0,T.useEffect)(function(){return(0,Je.mv)(y.BC,function(e){return A().createElement(Pt,bt({},e,{fields:v}))}),function(){(0,Je.mv)(y.BC,void 0)}},[]),(0,T.useEffect)(function(){return D(!1),l(i),function(){l(!i)}},[i]),(0,T.useEffect)(function(){b&&R()},[b]),r?A().createElement("div",{className:"ms-annotations-panel",style:o},A().createElement(ft.A,{centerChildrenVertically:!0,classNames:["_padding-sm"]},A().createElement("div",{className:"square-button-md"},A().createElement(_.e6,{glyph:"comment"})),A().createElement(ft.A.Fill,{component:pt.A,fontSize:"md",className:"_padding-lr-sm"},A().createElement(le.A,{msgId:"annotations.title"})),A().createElement(jt,{onClick:function(e){return R(e)},className:"square-button-md _border-transparent"},A().createElement(_.e6,{glyph:"1-close"}))),A().createElement(_.so,{bsStyle:"tabs",activeKey:C,className:"ms-annotations-panel-nav"},A().createElement(_.CI,{key:"properties",eventKey:"properties",onClick:function(){return I("properties")}},A().createElement(le.A,{msgId:"annotations.properties"})," ",A().createElement(_.e6,{glyph:L()?"ok-sign text-success":"exclamation-mark text-danger"})),A().createElement(_.CI,{key:"geometries",eventKey:"geometries",onClick:function(){return I("geometries")}},A().createElement(le.A,{msgId:"annotations.geometries"})," ",A().createElement(_.e6,{glyph:x()?"ok-sign text-success":"exclamation-mark text-danger"})),A().createElement(_.CI,{key:"settings",eventKey:"settings",onClick:function(){return I("settings")}},A().createElement(le.A,{msgId:"settings"})),A().createElement(jt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",disabled:!(L()&&x()),onClick:function(){return p([r])}},A().createElement(_.e6,{glyph:"download"}))),A().createElement("div",{className:"ms-annotations-panel-body"},A().createElement("div",{className:"ms-annotations-panel-content",style:"properties"===C?{}:{display:"none"}},A().createElement(ut,{fields:v,properties:j,onChange:function(e){var t=e.title,n=e.description,o=wt(e,vt);d(r.id,"layers",ht(ht(ht({},void 0!==t&&{title:t}),void 0!==n&&{description:n}),{},{options:ht(ht({},r.options),o)}))}})),A().createElement("div",{id:n,style:"geometries"===C?{}:{display:"none"}}),A().createElement("div",{className:"ms-annotations-panel-content",style:"settings"===C?{}:{display:"none"}},A().createElement(dt.A,{title:A().createElement(_.mq,null,A().createElement(le.A,{msgId:"layerProperties.visibilityLimits.title"})),layer:r,onChange:function(e){return d(r.id,"layers",e)},projection:E,resolutions:S,zoom:w}))),O&&A().createElement(_.Fc,{bsStyle:"warning"},A().createElement(le.A,{msgId:"annotations.deactivatedMapInteraction",msgParams:{pluginName:$e()(O)}})),A().createElement(st.A,null,A().createElement(ct.A,{show:N,onCancel:function(){return h(),void D(!1)},onConfirm:function(){return c(r),void D(!1)},variant:"danger",preventHide:!0,titleId:"annotations.undo",confirmId:"annotations.confirm",cancelId:"annotations.cancel"}))):null});const At=Tt;var Ct=["status","selectedLayers","onAdd","onDownload","onEdit","annotationLayers","statusTypes","itemComponent"];function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It.apply(null,arguments)}const kt=(0,I.connect)((0,k.Mz)([m.gu,(0,x.cU)(y.BC)],function(e,t){return{annotationLayers:e,enabled:t}}),{onAdd:p.eO,onDownload:p.RG,onEdit:p._G})(function(e){var t=e.status,n=e.selectedLayers,r=e.onAdd,o=void 0===r?function(){}:r,i=e.onDownload,a=void 0===i?function(){}:i,l=e.onEdit,u=void 0===l?function(){}:l,c=e.annotationLayers,s=void 0===c?[]:c,d=e.statusTypes,f=e.itemComponent,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ct),m=f;if(t===d.DESELECT)return A().createElement(A().Fragment,null,A().createElement(m,It({},p,{key:"annotations",tooltipId:"toc.addAnnotations",onClick:function(){return o()},glyph:"add-comment"})),s.length>0&&A().createElement(m,It({},p,{key:"annotations-download",glyph:"download-comment",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(s)}})));if(t===d.LAYER&&(0,y.fd)(n[0]))return A().createElement(A().Fragment,null,A().createElement(m,It({},p,{key:"annotations-edit",glyph:"pencil",tooltipId:"toc.editAnnotations",onClick:function(){return u(n[0].id)}})),A().createElement(m,It({},p,{key:"annotations-download",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return a([n[0]])},glyph:"download-comment"})));var v=t===d.LAYERS?n.filter(y.fd):[];return v.length?A().createElement(A().Fragment,null,A().createElement(m,It({},p,{key:"annotations-download",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(v)},glyph:"download-comment"}))):null}),Nt=(0,r.i1)("Annotations",{component:At,containers:{TOC:{doNotHide:!0,name:"Annotations",target:"toolbar",Component:kt,position:12},Map:{name:"Annotations",Tool:Ve,alwaysRender:!0}},reducers:{annotations:P.A},epics:j})},516516:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(446176);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.EZ:return a(a({},e),{},{session:t.session});case r.EE:return a(a({},e),{},{featureId:t.id});case r.rC:case r.vM:return a(a({},e),{},{editing:!0,closeId:0});case r.I:return a(a({},e),{},{closeId:(e.closeId||0)+1});case r.jT:return a(a({},e),{},{editing:!1,closeId:0,session:null});case r.Fk:return a(a({},e),{},{closeId:0});default:return e}}},97401:(e,t,n)=>{"use strict";n.d(t,{MA:()=>w,SU:()=>E,iS:()=>v,lU:()=>h,o:()=>m,o7:()=>b,si:()=>S,tV:()=>O,u$:()=>y,wd:()=>g});var r=n(400912),o=n.n(r),i=n(150104),a=n.n(i),l=n(131127),u=n(6683),c=n(779893);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t,n){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){return e.maplayout&&e.maplayout.layout||{}},m=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},b=a()(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=y(e),o=v(e);return r&&Object.keys(r).filter(function(e){return t[e]}).reduce(function(e,t){var i;return f(f({},e),{},p({},t,n&&null!==(i=o[t])&&void 0!==i?i:r[t]))},{})||{}},function(e,t,n){return JSON.stringify(y(e))+JSON.stringify(v(e))+JSON.stringify(t)+(n?"_isDock":"")}),g=function(e){var t;return!(null===(t=y(e))||void 0===t||!t.rightPanel)},h=function(e){var t,n=c.Ay.getConfigProp("mapLayout")||u.OH;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=y(e);return!!o()(t.filter(function(e){return n[e.key]}).map(function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value}))}(e,[{key:"bottom",value:null!==(t=null==n?void 0:n.bottom.sm)&&void 0!==t?t:0,type:"not"}])},O=function(e){var t=(0,l.mg)(e),n=m(e);return n&&t&&t.size&&{left:(0,u.n_)(n.left,t.size.width),bottom:(0,u.n_)(n.bottom,t.size.height),right:(0,u.n_)(n.right,t.size.width),top:(0,u.n_)(n.top,t.size.height)}},E=function(e){var t,n;return null!==(t=null==e||null===(n=e.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==t?t:{left:[],right:[]}},S=function(e){return b(e,{height:!0,right:!0},!0)},w=function(e){return b(e,{right:!0},!0)}},12816:(e,t,n)=>{"use strict";n.d(t,{pn:()=>s,v6:()=>d});var r=n(635143),o=n(329987),i=n.n(o),a=n(447340),l=n.n(a),u=function(e){var t=void 0;if(e instanceof HTMLAnchorElement){var n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=r.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;var o=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),a=e.getAttribute&&e.getAttribute("data-geostory-interaction-name"),l={};a&&i&&o&&(l["data-geostory-interaction-type"]=o,l["data-geostory-interaction-params"]=i,l["data-geostory-interaction-name"]=a),n.attributes=l,t=r.Entity.__create("LINK","MUTABLE",n)}}return t},c=function(e,t){if("MENTION"===e.type)return'< href="'.concat(e.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(e.data.value,'">').concat(t,"</a>");if("LINK"===e.type){var n=e.data.targetOption||"_self",r=e.data.attributes;return r&&r["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(r["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(r["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(r["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(r["data-geostory-interaction-params"],"')\">").concat(t,"</a>"):'<a href="'.concat(e.data.url,'" target="').concat(n,'">').concat(t,"</a>")}if("IMAGE"===e.type){var o=e.data.alignment,i=o&&"none"!==o?"float: ".concat(o,";"):"display: block; margin: 0 auto 0 auto;";return'<img title="'.concat(e.data.src,'" src="').concat(e.data.src,'" alt="').concat(e.data.alt||" ",'" style="height: ').concat(e.data.height,"; width: ").concat(e.data.width,"; ").concat(i,'"/>')}return"EMBEDDED_LINK"===e.type?'<iframe width="'.concat(e.data.width,'" height="').concat(e.data.height,'" src="').concat(e.data.src,'" frameBorder="0"></iframe>'):t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l()(e,null,u),n=r.ContentState.createFromBlockArray(t.contentBlocks);return r.EditorState.createWithContent(n)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=1!==(0,r.convertToRaw)(e.getCurrentContent()).blocks.length||(0,r.convertToRaw)(e.getCurrentContent()).blocks[0].text,o=i()((0,r.convertToRaw)(e.getCurrentContent()),null,null,c);return n?o:t}return t}},791936:function(e,t,n){var r,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u=function(e){setTimeout(function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()},4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},s=function(t,s,d){d||(t=c(t));var f,p=this,y="application/octet-stream"===t.type,m=function(){!function(e,t){for(var n=(t=[].concat(t)).length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,e)}catch(e){l(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,o)return f=n().createObjectURL(t),void setTimeout(function(){var e,t;r.href=f,r.download=s,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),m(),u(f),p.readyState=p.DONE});!function(){if((a||y&&i)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,m()},r.readAsDataURL(t),void(p.readyState=p.INIT)}f||(f=n().createObjectURL(t)),y?e.location.href=f:e.open(f,"_blank")||(e.location.href=f),p.readyState=p.DONE,m(),u(f)}()},d=s.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,n){return new s(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=o:null!==n.amdD&&null!==n.amdO&&(void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r))},503618:(e,t)=>{"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.Ay=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=t.debug;var l={initialState:t.initialState,initTypes:f(t.initTypes,["@@redux/INIT","@@INIT"]),limit:t.limit,filter:t.filter||function(){return!0},undoType:t.undoType||a.UNDO,redoType:t.redoType||a.REDO};return l.history=t.initialHistory||d(l.initialState),0===l.initTypes.length&&console.warn("redux-undo: supply at least one action type in initTypes to ensure initial state"),function(t,a){!function(e,t){if(r){var n=["action",e.type];console.group?(n.unshift("%credux-undo","font-style: italic"),console.groupCollapsed.apply(console,n),console.log("received",{state:t,action:e})):o.apply(void 0,n)}}(a,t);var f=void 0;switch(a.type){case l.undoType:return f=function(e){o("undo",{history:e});var t=e.past,n=e.present,r=e.future;return t.length<=0?e:{past:t.slice(0,t.length-1),present:t[t.length-1],future:[n].concat(r)}}(t),o("after undo",f),i(),f?s(t,f):t;case l.redoType:return f=function(e){o("redo",{history:e});var t=e.past,n=e.present,r=e.future;return r.length<=0?e:{future:r.slice(1,r.length),present:r[0],past:[].concat(t,[n])}}(t),o("after redo",f),i(),f?s(t,f):t;default:if(f=e(t&&t.present,a),l.initTypes.some(function(e){return e===a.type}))return o("reset history due to init action"),i(),c(n({},t,d(f)));if(l.filter&&"function"==typeof l.filter&&!l.filter(a,f,t&&t.present))return o("filter prevented action, not storing it"),i(),c(n({},t,{present:f}));var p=function(e,t,n){o("insert",{state:t,history:e,free:n-u(e)});var r=e.past,i=e.present,a=n&&u(e)>=n;return void 0===i?{past:[],present:t,future:[]}:{past:[].concat(r.slice(a?1:0),[i]),present:t,future:[]}}(t&&void 0!==t.present?t:l.history,f,l.limit);return o("after insert",{history:p,free:l.limit-u(p)}),i(),c(n({},t,p))}}};var r=void 0;function o(){if(r){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.group||t.unshift("%credux-undo","font-style: italic"),console.log.apply(console,t)}}function i(){if(r)return console.groupEnd&&console.groupEnd()}var a={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO"};t.Q3=a;var l={undo:function(){return{type:a.UNDO}},redo:function(){return{type:a.REDO}}};function u(e){var t=e.past,n=e.future;return t.length+1+n.length}function c(e){return n({},e,{history:e})}function s(e,t){return c(n({},e,t))}function d(e){return{past:[],present:e,future:[]}}function f(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Array.isArray(e)?e:"string"==typeof e?[e]:t}t.IE=l}}]);