"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[8915],{367342(e,t,n){n.r(t),n.d(t,{default:()=>re});var r=n(273517),o=n.n(r),i=n(811668),l=n(801081),c=n(978632),a=n.n(c),u=n(8117),d=n(393149),s=n(307679),f=n(131127),g=n(904059),y=n(68352),p=n(415392),m=n(8571),b=n(104567),v=n.n(b),O=n(271020),h=n(841533),j="dynamic-legend",S=(0,n(130711).cU)(j);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){A(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e,t,n){return(t=function(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=h.a0;const C={dynamicLegendMapLayoutEpic:function(e,t){return e.ofType(O.a).filter(function(e){var n,r,o=e.source;return!(null!=(n=t.getState())&&null!==(r=n.dynamiclegend)&&void 0!==r&&null!==(r=r.config)&&void 0!==r&&r.isFloating)&&S(t.getState())&&v()(o)}).map(function(e){var t,n,r,o,i=e.layout,l=(0,O.Ix)(E(E({},i),{},{right:I+(null!==(t=null==i||null===(n=i.boundingSidebarRect)||void 0===n?void 0:n.right)&&void 0!==t?t:0),boundingMapRect:E(E({},i.boundingMapRect||{}),{},{right:I+(null!==(r=null==i||null===(o=i.boundingSidebarRect)||void 0===o?void 0:o.right)&&void 0!==r?r:0)}),rightPanel:!0}));return E(E({},l),{},{source:j})})}};var N=n(229710),D=n(900636),k=n(112585),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return!1!==e.visibility&&!e.legendEmpty&&(0,k.sh)(e,t)},x=n(625885),M=n(787165);const T=function(e){return o().createElement(M.A,e)};var F=n(991981);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}var _=["node"];function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(null,arguments)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){B(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function B(e,t,n){return(t=function(e){var t=function(e){if("object"!=K(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const H=function(e){var t=e.node,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,_);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==e.group&&["wms","arcgis"].includes(e.type)}(t)?o().createElement(F.A,z({},n,{node:U(U({},t),{},{enableDynamicLegend:!0,enableInteractiveLegend:!1})})):null};var G=n(785072),V=n.n(G),Z=n(824835);V()(Z.A,{insert:"head",singleton:!1}),Z.A.locals;var W=n(267767);function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var X=n(97401),$="DYNAMIC_LEGEND:SET_CONFIGURATION";function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){ee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ee(e,t,n){return(t=function(e){var t=function(e){if("object"!=q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te={};var ne=(0,i.connect)((0,l.Mz)([function(e){return a()(e,"controls.dynamic-legend.enabled")},s.eK,s.Kv,f.Y5,f.HC,f.FG,function(e){return(0,X.o7)(e,{height:!0,right:!0},!0)}],function(e,t,n,r,o,i,l){return{isVisible:e,groups:t,layers:n.filter(function(e){return"background"!==e.group}),currentZoomLvl:r,mapBbox:o,resolution:i,dockStyle:l}}),{onClose:p.KP.bind(null,j,null),onUpdateNode:g.OK,setConfiguration:function(e){return{type:$,config:e}}})(function(e){var t,n=e.onUpdateNode,i=e.currentZoomLvl,l=e.onClose,c=e.isVisible,a=e.groups,u=e.mapBbox,d=e.resolution,s=e.size,f=void 0===s?h.a0:s,g=e.dockStyle,y=void 0===g?{}:g,p=e.layers,b=void 0===p?[]:p,v=e.isFloating,O=void 0!==v&&v,j=e.flatLegend,S=void 0!==j&&j,P=e.setConfiguration,w=O?N.A:x.A,E=(t=b,function(e){if(Array.isArray(e))return Y(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).reverse();return(0,r.useEffect)(function(){P({isFloating:O,flatLegend:S})},[O,S,P]),o().createElement(w,O?{onClose:l,enableFooter:!1,title:o().createElement(m.A,{msgId:"dynamiclegend.title"}),dialogClassName:"legend-dialog",show:c,draggable:!0,style:{zIndex:1993}}:{containerStyle:y,containerId:"dynamic-legend-container",containerClassName:"dock-container",className:"dynamic-legend-dock-panel",open:c,position:"right",size:f,glyph:"align-left",title:o().createElement(m.A,{msgId:"dynamiclegend.title"}),onClose:l,style:y},!function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).some(function(e){return e.visibility&&!1===e.legendEmpty})}(E)&&o().createElement(W.A,{className:"_padding-md"},o().createElement(m.A,{msgId:"dynamiclegend.emptyLegend"})),0!==E.length&&o().createElement(D.Z,{tree:S?E:a,getNodeStyle:function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0,n=(arguments.length>1?arguments[1]:void 0)===k.iv.GROUP?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=(0,k.Xl)(e.nodes).filter(function(e){return!e.nodes}),r=n.some(function(e){return L(e,t)});return!1!==e.visibility&&n.length>0&&r}(e,t):L(e,t);return n?{}:{display:"none"}}(e,t,d)},className:"legend-content",theme:"legend",onChange:n,groupNodeComponent:T,layerNodeComponent:H,config:{sortable:!1,showFullTitle:!0,hideOpacitySlider:!0,hideVisibilityButton:!0,expanded:!0,zoom:i,layerOptions:{legendOptions:{WMSLegendOptions:"countMatched:true;fontAntiAliasing:true;",legendWidth:12,legendHeight:12,mapBbox:u}}}}))});const re=(0,d.i1)("DynamicLegend",{component:ne,reducers:{controls:y.A,dynamiclegend:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;return t.type===$?Q(Q({},e),{},{config:t.config}):e}},epics:C,containers:{BurgerMenu:{name:j,position:1e3,priority:2,doNotHide:!0,text:o().createElement(m.A,{msgId:"dynamiclegend.title"}),tooltip:o().createElement(m.A,{msgId:"dynamiclegend.tooltip"}),icon:o().createElement(u.e6,{glyph:"align-left"}),action:p.KP.bind(null,j,null),toggle:!0},SidebarMenu:{name:j,position:1e3,priority:1,doNotHide:!0,text:o().createElement(m.A,{msgId:"dynamiclegend.title"}),tooltip:o().createElement(m.A,{msgId:"dynamiclegend.tooltip"}),icon:o().createElement(u.e6,{glyph:"align-left"}),action:p.KP.bind(null,j,null),toggle:!0},Toolbar:{name:j,alwaysVisible:!0,position:2,priority:0,doNotHide:!0,tooltip:o().createElement(m.A,{msgId:"dynamiclegend.title"}),icon:o().createElement(u.e6,{glyph:"align-left"}),action:p.KP.bind(null,j,null),toggle:!0}}})},824835(e,t,n){n.d(t,{A:()=>i});var r=n(576314),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".msgapi .ms-resizable-modal > .modal-content.legend-dialog {\r\n    top: 0vh;\r\n    right: -100vw;\r\n}\r\n\r\n.msgapi .legend-content * .ms-node-title {\r\n    font-weight: bold !important\r\n}\r\n",""]);const i=o}}]);