"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[25187],{290895:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var a=n(273517),r=n.n(a),o=n(393149),l=n(811668),i=n(801081),s=n(605556),c=n.n(s),u=n(66178),d=n(68352),g=n(930196),p=n(172175),f=n(891543),m=n(905301),y=n(662387),v=n(935897),b=n(592497),w=n(201384),h=n(82725),x=n(51797),D=n(467726),I=n(147628),R=["defaultOpen"];function S(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function k(e,t){var n,o,l=e.tabs,i=void 0===l?[{type:"tab",id:"info",labelId:"gnviewer.info",items:[{type:"text",labelId:"gnviewer.title",value:"{context.get(state('gnResourceData'), 'title')}"},{type:"link",labelId:"gnviewer.owner",href:"{'/people/profile/' + context.get(state('gnResourceData'), 'owner.username')}",value:"{context.getUserResourceName(context.get(state('gnResourceData'), 'owner'))}",disableIf:"{!context.get(state('gnResourceData'), 'owner.username')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"{'gnviewer.'+context.get(state('gnResourceData'), 'date_type')}",value:"{context.get(state('gnResourceData'), 'date')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"gnviewer.created",value:"{context.get(state('gnResourceData'), 'created')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"gnviewer.lastModified",value:"{context.get(state('gnResourceData'), 'last_updated')}"},{type:"query",labelId:"gnviewer.resourceType",value:"{context.get(state('gnResourceData'), 'resource_type')}",pathname:"/",query:{f:"{context.get(state('gnResourceData'), 'resource_type')}"}},{type:"{context.isDocumentExternalSource(state('gnResourceData')) ? 'link' : 'text'}",labelId:"gnviewer.sourceType",value:"{context.get(state('gnResourceData'), 'sourcetype', '').toLowerCase()}",href:"{context.get(state('gnResourceData'), 'href')}"},{type:"query",labelId:"gnviewer.category",value:"{context.get(state('gnResourceData'), 'category.gn_description')}",pathname:"/",query:{"filter{category.identifier.in}":"{context.get(state('gnResourceData'), 'category.identifier')}"}},{type:"link",labelId:"gnviewer.pointOfContact",value:"{context.getUserResourceNames(context.get(state('gnResourceData'), 'poc'))}",disableIf:"{!context.get(state('gnResourceData'), 'poc')}"},{type:"query",labelId:"gnviewer.keywords",value:"{context.get(state('gnResourceData'), 'keywords')}",valueKey:"name",pathname:"/",queryTemplate:{"filter{keywords.slug.in}":"${slug}"}},{type:"query",labelId:"gnviewer.regions",value:"{context.get(state('gnResourceData'), 'regions')}",valueKey:"name",pathname:"/",queryTemplate:{"filter{regions.code.in}":"${code}"}},{type:"text",labelId:"gnviewer.attribution",value:"{context.get(state('gnResourceData'), 'attribution')}"},{type:"text",labelId:"gnviewer.language",value:"{context.get(state('gnResourceData'), 'language')}"},{type:"html",labelId:"gnviewer.supplementalInformation",value:"{context.get(state('gnResourceData'), 'supplemental_information')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"gnviewer.temporalExtent",value:{start:"{context.get(state('gnResourceData'), 'temporal_extent_start')}",end:"{context.get(state('gnResourceData'), 'temporal_extent_end')}"}},{type:"link",style:"label",labelId:"gnviewer.viewFullMetadata",href:"{context.getMetadataDetailUrl(state('gnResourceData'))}",disableIf:"{!context.getMetadataDetailUrl(state('gnResourceData'))}"}]},{type:"locations",id:"locations",labelId:"gnviewer.locations",items:"{({extent: context.get(state('gnResourceData'), 'extent')})}"},{type:"attribute-table",id:"attributes",labelId:"gnviewer.attributes",disableIf:"{context.get(state('gnResourceData'), 'resource_type') !== 'dataset'}",items:"{context.get(state('gnResourceData'), 'attribute_set')}"},{type:"linked-resources",id:"related",labelId:"gnviewer.linkedResources.label",items:"{context.get(state('gnResourceData'), 'linkedResources')}"},{type:"assets",id:"assets",labelId:"gnviewer.assets",items:"{context.get(state('gnResourceData'), 'assets')}"},{type:"settings",id:"settings",labelId:"gnviewer.management",disableIf:"{!context.canManageResourceSettings(state('gnResourceData'))}",items:[!0]}]:l,s=e.items,c=e.editable,u=void 0===c||c,d=e.canEdit,g=e.targetSelector,p=e.headerNodeSelector,w=void 0===p?"#gn-brand-navbar":p,h=e.navbarNodeSelector,R=void 0===h?"#ms-action-navbar":h,k=e.footerNodeSelector,A=void 0===k?".gn-footer":k,E=e.width,O=e.height,_=e.show,Y=e.onShow,P=e.enableFilters,M=e.resource,N=e.resourcesGridId,j=e.loading,T=e.pendingChanges,q=e.enablePreview,H=e.editingOverlay,G=e.closeOnClickOut,F=(n=(0,a.useState)(!1),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,l,i=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw r}}return i}}(n,o)||S(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),U=F[0],$=F[1],B=d&&u,K=(0,b.A)({headerNodeSelector:w,navbarNodeSelector:R,footerNodeSelector:A,width:E,height:O,active:!0}),L=K.stickyTop,z=K.stickyBottom;function J(){Y(!1)}function Q(){T?$(!0):J()}(0,a.useEffect)((function(){return function(){Q()}}),[]);var V=(0,I.A)({disabled:!G||!_,onClickOut:function(){Q()}}),W=t.loadedPlugins,X=function(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,f.A)({items:s,loadedPlugins:W},[null==M?void 0:M.pk]).filter((function(e){return"toolbar"===e.target}))).sort((function(e,t){return e.position-t.position}));return r().createElement(v.A,{targetSelector:g},r().createElement(y.A,{className:"ms-resource-detail shadow-md",top:L,bottom:z,show:_,enabled:_,editing:H&&T},r().createElement(D.A,{panelRef:V,resource:M,loading:j,toolbarItems:X,onClose:Q,editing:B,enableFilters:P,enablePreview:q,tabs:i,tabComponents:m.A,resourcesGridId:N})),r().createElement(x.A,{show:!!U,onCancel:function(){return $(!1)},onConfirm:J,pendingState:!!T,titleId:"resourcesCatalog.detailsPendingChangesTitle",descriptionId:"resourcesCatalog.detailsPendingChangesDescription",cancelId:"resourcesCatalog.detailsPendingChangesCancel",confirmId:"resourcesCatalog.detailsPendingChangesConfirm",variant:"danger"}))}k.contextTypes={loadedPlugins:c().object,plugins:c().object};var A=(0,l.connect)((0,i.j8)({resource:p.xF,show:w.e_,loading:p.tI,canEdit:p.PA,pendingChanges:p.i9}),{onShow:h.GE})((function(e){var t,n,o=e.defaultOpen,l=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,R);return(0,a.useEffect)((function(){var e;null!=l&&null!==(e=l.resource)&&void 0!==e&&e.pk&&o&&l.onShow(!0)}),[null==l||null===(t=l.resource)||void 0===t?void 0:t.pk,o]),null!=l&&null!==(n=l.resource)&&void 0!==n&&n.pk&&l.show?r().createElement(k,l):null}));const E=(0,o.i1)("ResourceDetails",{component:A,containers:{ActionNavbar:{name:"ResourceDetailsButton",Component:(0,l.connect)((function(){return{}}),{onShow:h.GE})((function(e){var t=e.component,n=e.resourcesGridId,a=e.onShow,o=t;return o?r().createElement(o,{onClick:function(){a(!0,n)},glyph:"details",iconType:"glyphicon",square:!0,labelId:"resourcesCatalog.viewResourceProperties"}):null})),priority:1,doNotHide:!0},ResourcesGrid:{priority:2,target:"card-buttons",position:2,Component:(0,l.connect)((0,i.j8)({selectedResource:p.xF}),{onSelect:u.gu,onShow:h.GE})((function(e){var t=e.resourcesGridId,n=e.resource,a=e.onSelect,o=e.component,l=e.selectedResource,i=e.onShow,s=o;return r().createElement(s,{onClick:function(){l["@ms-detail"]&&(null==l?void 0:l.pk)===(null==n?void 0:n.pk)||a(n,t),i(!0,t)},glyph:"details",iconType:"glyphicon",square:!0,labelId:"resourcesCatalog.viewResourceProperties"})})),doNotHide:!0}},reducers:{gnresource:g.A,controls:d.A}})}}]);