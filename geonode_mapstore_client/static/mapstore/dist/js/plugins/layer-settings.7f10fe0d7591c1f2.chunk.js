(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[71283],{271020:(e,t,r)=>{"use strict";r.d(t,{Ix:()=>l,W:()=>a,a:()=>n,bq:()=>u,oR:()=>o,qg:()=>i});var n="MAP_LAYOUT:UPDATE_MAP_LAYOUT",o="MAP_LAYOUT:UPDATE_DOCK_PANELS",i="MAP_LAYOUT:FORCE_UPDATE_MAP_LAYOUT";function l(e){return{type:n,layout:e}}function a(e){return{type:o,name:e,action:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",location:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right"}}function u(){return{type:i}}},174910:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var n=r(273517),o=r.n(n),i=r(605556),l=r.n(i),a=r(8117),u=r(611741),c=r.n(u),s=r(269843),f=r.n(s),p=r(192016),y=r(551783),m=r(256951),d=r(348317),b=r(434164),v=r(8571),g=r(6683),h=["labelId"];function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return j(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return(t=function(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=(0,y.A)(["placeholder","noResultsText"])(p.Ay.Creatable),I=(0,y.A)(["placeholder","noResultsText"])(p.Ay);function L(e){var t,r=e.label,n=e.showArrow,i=e.limitsType;return o().createElement("span",null,(t=r,"scale"===i?"1 : "+Math.round(t):t),n&&o().createElement(o().Fragment,null,"Â ",o().createElement(a.e6,{glyph:"arrow-left"})))}function T(e){var t=e.id,r=e.value,n=e.placeholderId,i=e.noResultsTextId,l=e.createTextId,a=e.options,u=e.isValidNewOption,s=void 0===u?function(){return!0}:u,f=e.onChange,p=void 0===f?function(){}:f,y=e.disabled,m=e.loading;return o().createElement(C,{inputProps:{id:t},placeholder:n,noResultsText:i,value:r,isLoading:m,options:a,disabled:y,optionRenderer:L,valueRenderer:L,promptTextCreator:function(e){return o().createElement(v.A,{msgId:l,msgParams:{label:e}})},isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!c()(t)&&s(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);p(c()(t)?void 0:w(w({},e),{},{value:t}))}})}function k(e){var t=e.title,r=e.layer,i=e.zoom,l=e.projection,u=e.resolutions,c=void 0===u?(0,g._7)():u,s=e.defaultLimitsType,p=e.limitsTypesOptions,y=e.dpi,O=e.onChange,P=Math.round(i||0),A=E((0,n.useState)(s||p[0].value),2),C=A[0],L=A[1],k=r.maxResolution,x=r.minResolution,D=r.disableResolutionLimits,z=(0,g.dQ)(y,l);function R(e,t){var r,n=e.map((function(e){return e[C]}));return f()(t[C])||-1!==n.indexOf(t[C])?e:[t].concat((r=e,function(e){if(Array.isArray(e))return j(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||S(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e[C]>t[C]?-1:1}))}function N(e,t){return(0,g.oq)(e,t,{projection:l,resolutions:c})}var M=E((0,n.useState)([]),2),_=M[0],U=M[1],q=E((0,n.useState)(k&&{resolution:k,scale:k*z,zoom:(0,g.Yc)(k,c)}),2),F=q[0],V=q[1],W=E((0,n.useState)(x&&{resolution:x,scale:x*z,zoom:(0,g.Yc)(x,c)}),2),Y=W[0],H=W[1],B=E((0,n.useState)(!1),2),$=B[0],K=B[1],J=E((0,n.useState)(),2),G=J[0],Q=J[1],Z=E((0,n.useState)(),2),X=Z[0],ee=Z[1],te=(0,n.useRef)();function re(){ee(void 0),Q(void 0)}(0,n.useEffect)((function(){return te.current=!0,function(){te.current=!1}}),[]);var ne=c.join(",");return(0,n.useEffect)((function(){var e=x&&{resolution:x,scale:x*z,zoom:(0,g.Yc)(x,c)},t=k&&{resolution:k,scale:k*z,zoom:(0,g.Yc)(k,c)},r=[e,t].filter((function(e){return e})).reduce(R,c.map((function(e,t){return{resolution:e,scale:e*z,zoom:t}})));V(t),H(e),U(r),re()}),[z,ne]),o().createElement("div",{className:"ms-visibility-limits-form"},o().createElement("div",{className:"ms-visibility-limits-form-title",style:{display:"flex",alignItems:"center"}},o().createElement("div",{style:{flex:1}},t),o().createElement(m.A,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"refresh",disabled:!(!D&&!$),visible:"wms"===r.type,onClick:function(){"wms"!==r.type||$||(K(!0),re(),(0,b.aF)(r).toPromise().then((function(e){if(te.current){var t,r,n=e.MaxScaleDenominator,o=e.MinScaleDenominator,i=!f()(n)&&N(n,"scale"),l=!f()(o)&&N(o,"scale");(function(e,t){var r,n,o=(r=e,n=t,f()(r)&&f()(n)?"layerProperties.visibilityLimits.serverValuesUpdateUndefined":f()(r)&&!f()(n)?"layerProperties.visibilityLimits.serverValuesUpdateMinScale":!f()(r)&&f()(n)?"layerProperties.visibilityLimits.serverValuesUpdateMaxScale":"layerProperties.visibilityLimits.serverValuesUpdate");Q(o)})(n,o),l&&H(l),i&&V(i),O(w(w({},i&&{maxResolution:i.resolution}),l&&{minResolution:l.resolution}));var a=(null===(t=l||Y)||void 0===t?void 0:t.resolution)||-1/0;((null===(r=i||F)||void 0===r?void 0:r.resolution)||1/0)<a&&ee("layerProperties.visibilityLimits.rangeError"),K(!1)}})).catch((function(){te.current&&(K(!1),ee("layerProperties.visibilityLimits.serverValuesError"))})))},tooltipId:"layerProperties.visibilityLimits.updateWMSCapabilities"},{Element:function(){return o().createElement(d.A,{checked:!D,onClick:function(){O({disableResolutionLimits:!D}),re()}})}}]})),o().createElement("label",{htmlFor:"ms-visibility-limits-max"},o().createElement(v.A,{msgId:"layerProperties.visibilityLimits.maxValue"})),o().createElement(T,{id:"ms-visibility-limits-max",value:(null==F?void 0:F[C])&&{value:F[C],label:F[C],zoom:F.zoom,limitsType:C},placeholderId:"layerProperties.visibilityLimits.maxValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:$,isValidNewOption:function(e){return e>=((null==Y?void 0:Y[C])||0)},options:_.map((function(e){return w(w({},e),{},{value:e[C]+(e.delta||0),label:e[C],showArrow:e.zoom===P,disabled:!f()(null==Y?void 0:Y[C])&&e[C]<=Y[C],limitsType:C})})),disabled:D||$,onChange:function(e){var t=void 0===e.value?{}:f()(e.zoom)?N(e.value,C):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(O({maxResolution:t.resolution}),V(t),void 0!==e.value&&f()(e.zoom)){var r=R(_,t);U(r)}re()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-min"},o().createElement(v.A,{msgId:"layerProperties.visibilityLimits.minValue"})),o().createElement(T,{id:"ms-visibility-limits-min",value:(null==Y?void 0:Y[C])&&{value:Y[C],label:Y[C],zoom:Y.zoom,limitsType:C},placeholderId:"layerProperties.visibilityLimits.minValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:$,isValidNewOption:function(e){return e<=((null==F?void 0:F[C])||1/0)},options:_.map((function(e){return w(w({},e),{},{value:e[C],label:e[C],showArrow:e.zoom===P,disabled:!f()(null==F?void 0:F[C])&&e[C]>=F[C],limitsType:C})})),disabled:D||$,onChange:function(e){var t=void 0===e.value?{}:f()(e.zoom)?N(e.value,C):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(O({minResolution:t.resolution}),H(t),void 0!==e.value&&f()(e.zoom)){var r=R(_,t);U(r)}re()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-type"},o().createElement(v.A,{msgId:"layerProperties.visibilityLimits.type"})),o().createElement(I,{inputProps:{id:"ms-visibility-limits-type"},value:C,clearable:!1,options:p.map((function(e){var t=e.labelId;return w(w({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,h)),t&&{label:o().createElement(v.A,{msgId:t})})})),disabled:D||$,onChange:function(e){var t=e.value;L(t),O({visibilityLimitType:t}),re()}}),G&&o().createElement(a.Fc,{bsStyle:"success"},o().createElement(v.A,{msgId:G})),X&&o().createElement(a.Fc,{bsStyle:"danger"},o().createElement(v.A,{msgId:X})))}k.propTypes={layer:l().object,zoom:l().number,onChange:l().func,resolutions:l().array,limitsTypesOptions:l().array,projection:l().string,dpi:l().number,defaultLimitsType:l().string},k.defaultProps={layer:{},onChange:function(){},limitsTypesOptions:[{value:"scale",labelId:"layerProperties.visibilityLimits.scale"},{value:"resolution",labelId:"layerProperties.visibilityLimits.resolution"}],dpi:g.Zl};const x=k},551258:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(380959).A)(r(8117).hJ)},348317:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(273517),o=r.n(n),i=r(605556),l=r.n(i);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=s(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return o().createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},o().createElement("input",{type:"checkbox",disabled:this.props.disabled,checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),o().createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);p(m,"propTypes",{disabled:l().bool,className:l().string,checked:l().bool,onChange:l().func,onClick:l().func}),p(m,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}});const d=m},168995:(e,t,r)=>{"use strict";r.d(t,{A:()=>O});var n=r(273517),o=r.n(n),i=r(310340),l=r.n(i),a=r(605556),u=r.n(a),c=r(8117),s=r(551258),f=r(306840);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function v(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=d(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(n=[{key:"renderPopover",value:function(){return o().createElement(c.AM,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title,style:this.props.popoverStyle},this.props.text)}},{key:"renderContent",value:function(){var e=this;return o().createElement(c.e6,{ref:function(t){e.target=t},className:"text-".concat(this.props.bsStyle),glyph:this.props.glyph})}},{key:"render",value:function(){var e=this,t=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return o().createElement("span",{className:"mapstore-info-popover"},this.props.trigger?o().createElement(f.A,{trigger:t,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),o().createElement(s.A,{placement:this.props.placement,show:!0,target:function(){return l().findDOMNode(e.target)}},this.renderPopover())])}}])&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);v(h,"propTypes",{id:u().string,title:u().string,text:u().string,glyph:u().string,bsStyle:u().string,placement:u().string,left:u().number,top:u().number,trigger:u().oneOfType([u().array,u().bool]),popoverStyle:u().object}),v(h,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]});const O=h},434164:(e,t,r)=>{"use strict";r.d(t,{Cc:()=>g,aF:()=>v});var n=r(23412),o=r.n(n),i=(r(400912),r(155584)),l=r(45388),a=r(375482),u=r(995531),c=(r(764932),r(112585)),s=r(492312),f=r(584153),p=r(79738);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}i.default;var v=function(e){return l.Observable.defer((function(){return a.Ay.getCapabilities((0,c.wk)(e))})).let(s.m9).map((function(t){return a.Ay.parseLayerCapabilities(t,e)}))},g=function(e){return function(e){return l.Observable.defer((function(){return u.A.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,l=o().parse((0,p.t)(n.url||i),!0);return o().format(d(d({},l),{},{search:void 0,query:d(d({},l.query),{},{service:"WMS",version:a.j0,layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(s.m9)}(e).map((function(e){var t=e.data,r=void 0===t?{}:t;return r&&r.layerDescriptions[0]})).map((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return d(d({},e),{},{params:{},search:t?{type:"wfs",url:(0,f.o_)(t)}:void 0})}))}},97401:(e,t,r)=>{"use strict";r.d(t,{MA:()=>j,SU:()=>E,iS:()=>b,lU:()=>h,o:()=>d,o7:()=>v,si:()=>S,tV:()=>O,u$:()=>m,wd:()=>g});var n=r(400912),o=r.n(n),i=r(150104),l=r.n(i),a=r(131127),u=r(6683),c=r(779893);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){return e.maplayout&&e.maplayout.layout||{}},d=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},b=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},v=l()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=m(e),o=b(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){var i;return p(p({},e),{},y({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))}),{})||{}}),(function(e,t,r){return JSON.stringify(m(e))+JSON.stringify(b(e))+JSON.stringify(t)+(r?"_isDock":"")})),g=function(e){var t;return!(null===(t=m(e))||void 0===t||!t.rightPanel)},h=function(e){var t,r=c.Ay.getConfigProp("mapLayout")||u.OH;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=m(e);return!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},O=function(e){var t=(0,a.mg)(e),r=d(e);return r&&t&&t.size&&{left:(0,u.n_)(r.left,t.size.width),bottom:(0,u.n_)(r.bottom,t.size.height),right:(0,u.n_)(r.right,t.size.width),top:(0,u.n_)(r.top,t.size.height)}},E=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},S=function(e){return v(e,{height:!0,right:!0},!0)},j=function(e){return v(e,{right:!0},!0)}},575011:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(273517);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const i=function(e,t){var r,i,l=function(){if("undefined"==typeof window)return t;try{var r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.log("Error to get item key â".concat(e,"â:"),r),t}},a=(r=(0,n.useState)(l),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(r,i)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[0],c=a[1];return(0,n.useEffect)((function(){c(l())}),[]),(0,n.useEffect)((function(){var e=function(){c(l())};return window.addEventListener("localStorage",e),function(){window.removeEventListener("localStorage",e)}}),[]),[u,function(t){try{var r=t instanceof Function?t(u):t;c(r),window.localStorage.setItem(e,JSON.stringify(r)),window.dispatchEvent(new Event("localStorage"))}catch(t){console.log("Error â".concat(e,"â:"),t)}}]}},663186:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(273517),o=r.n(n),i=r(775866),l=r.n(i),a=r(393149);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const m=function(e){var t=e.items,r=e.loadedPlugins,i=e.loaderComponent,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=(0,n.useRef)({});c.current={items:t,loadedPlugins:r,loaderComponent:i};var f=l()(Object.keys(r||{}),","),y=(0,n.useMemo)((function(){return function(e){return p(e.items).sort((function(e,t){return e.position>t.position?1:-1})).map((function(t){return s(s({},t),{},{Component:t.Component||(0,a.uW)(t,e.loadedPlugins,e.loaderComponent||o().createElement("div",null))})}))||[]}(c.current)}),[f].concat(p(u)));return y}},111207:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ye});var n=r(273517),o=r.n(n),i=r(393149),l=r(811668),a=r(801081),u=r(962193),c=r.n(u),s=r(8117),f=r(320089),p=r(904059),y=r(307679),m=r(131127),d=r(286447),b=r(8571),v=r(97401),g=r(112585),h=r(605556),O=r.n(h),E=r(185015),S=r.n(E),j=r(223805),P=r.n(j),w=r(950014),A=r.n(w),C=r(192016),I=r(628017),L=r(803617);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return(t=function(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function R(e){var t,r,n,i,l=e.node,a=e.allowNew,u=void 0!==a&&a,c=e.groups,s=e.currentLocale,f=e.onChange,p=u?C.Ay.Creatable:C.Ay,y=function(e){return(0,g.LK)(e,s)},m=function(e,t){return(0,L.uG)(y(e),t)},d=c&&(0,g.B)(c),b=(t=c&&(0,g.B)(c,0,!0),r=(null==l?void 0:l.group)||"Default",n=t.find((function(e){return e.id===r}))||{},y(n.title));return o().createElement(p,{clearable:!1,key:"group-dropdown",options:A()([{value:"Default",label:"Default"}].concat((i=(d||(null==l?void 0:l.group)||[]).map((function(e){return P()(e)?x(x({},e),{},{label:m(e.label,d)}):{label:m(e,d),value:e}})),function(e){if(Array.isArray(e))return z(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),"value"),isValidNewOption:L.lI,newOptionCreator:function(e){var t=e.valueKey,r=e.label,n=e.labelKey;return D(D(D({},t,r.replace(/\./g,"${dot}").replace(/\//g,".")),n,r),"className","Select-create-option-placeholder")},value:{label:m(b,d),value:b},placeholder:m(b,d),onChange:function(e){var t=e.value;return f({group:t||"Default"})}})}function N(e,t){var r,n,i=e.node,l=void 0===i?{}:i,a=e.nodeType,u=e.showTooltipOptions,c=void 0===u||u,f=e.onChange,p=void 0===f?function(){}:f,y=e.groups,m=e.currentLocale,d=[{value:"title",label:(0,I.kA)(t.messages,"layerProperties.tooltip.title")},{value:"description",label:(0,I.kA)(t.messages,"layerProperties.tooltip.description")},{value:"both",label:(0,I.kA)(t.messages,"layerProperties.tooltip.both")},{value:"none",label:(0,I.kA)(t.messages,"layerProperties.tooltip.none")}],v=[{value:"top",label:(0,I.kA)(t.messages,"layerProperties.tooltip.top")},{value:"right",label:(0,I.kA)(t.messages,"layerProperties.tooltip.right")},{value:"bottom",label:(0,I.kA)(t.messages,"layerProperties.tooltip.bottom")}],h=l||{},O=h.title,E=h.description,j=void 0===E?"":E,w=h.tooltipOptions,A=void 0===w?"title":w,L=h.tooltipPlacement,T=void 0===L?"top":L,k=S()(O)?O:null!==(r=null!==(n=(0,g.LK)(O,m))&&void 0!==n?n:null==O?void 0:O.default)&&void 0!==r?r:"";return o().createElement(o().Fragment,null,o().createElement(s.gE,null,o().createElement(s.mq,null,o().createElement(b.A,{msgId:"layerProperties.title"})),o().createElement(s.MJ,{defaultValue:k,key:"title",type:"text",onBlur:function(e,t){var r="default"===e&&S()(l.title)?t.target.value:x(x({},P()(l.title)?l.title:{default:l.title||""}),{},D({},e,t.target.value));p({title:r})}.bind(null,"default")})),o().createElement(s.gE,null,o().createElement(s.mq,null,o().createElement(b.A,{msgId:"layerProperties.description"})),o().createElement(s.MJ,{defaultValue:j,key:"description",type:"text",onBlur:function(e){return p({description:e.target.value})}})),"layer"===a?o().createElement(s.gE,null,o().createElement(s.mq,null,o().createElement(b.A,{msgId:"layerProperties.group"})),o().createElement(R,{node:l,onChange:p,groups:y,currentLocale:m})):null,c&&o().createElement(o().Fragment,null,o().createElement(s.gE,null,o().createElement(s.mq,null,o().createElement(b.A,{msgId:"gnviewer.nodeTooltipContent"})),o().createElement(C.Ay,{clearable:!1,key:"tooltips-dropdown",options:d,value:d.find((function(e){return e.value===A})),onChange:function(e){var t=e.value;return p({tooltipOptions:t||"title"})}})),o().createElement(s.gE,null,o().createElement(s.mq,null,o().createElement(b.A,{msgId:"gnviewer.nodeTooltipPlacement"})),o().createElement(C.Ay,{clearable:!1,key:"tooltips-placement-dropdown",options:v,value:v.find((function(e){return e.value===T})),onChange:function(e){var t=e.value;return p({tooltipPlacement:t||"top"})}}))))}N.contextTypes={messages:O().object};const M=N;function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const U=function(e){var t,r,i=e.expanded,l=e.title,a=e.children,u=e.onChange,c=(t=(0,n.useState)(i),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=c[0],p=c[1];return(0,n.useEffect)((function(){u&&u(f)}),[f]),o().createElement(o().Fragment,null,o().createElement("div",{className:"gn-layer-settings-section-title",onClick:function(){return p(!f)}},o().createElement(s.e6,{glyph:"".concat(f?"bottom":"next")}),"Â ",l),f?a:null,o().createElement("hr",null))};var q=r(575011);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return(t=function(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var B=r(978659),$=r.n(B),K=r(174910),J=r(645617);const G=function(e){var t=e.node,r=void 0===t?{}:t,n=e.resolutions,i=e.projection,l=e.onChange,a=void 0===l?function(){}:l,u=e.zoom,c=r.opacity,f=void 0===c?1:c;return o().createElement(o().Fragment,null,o().createElement(s.gE,null,o().createElement(s.mq,null,o().createElement(b.A,{msgId:"opacity"})," %"),o().createElement(J.A,{type:"number",min:0,max:100,name:"opacity",value:100*f,onChange:function(e){return a({opacity:$()(Math.round(e),0,100)/100})}})),o().createElement(s.gE,null,o().createElement(K.A,{title:o().createElement(s.mq,null,o().createElement(b.A,{msgId:"layerProperties.visibilityLimits.title"})),layer:r,onChange:function(e){return a(e)},projection:i,resolutions:n,zoom:u})))};function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return(t=function(e){var t=function(e){if("object"!=Q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var re=r(198023),ne=r.n(re),oe=r(168995),ie=r(375482),le=r(779893),ae=r(87756),ue=r(142974);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return(t=function(e){var t=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var de=r(425380);function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ve.apply(null,arguments)}function ge(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){Se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t,r){return(t=function(e){var t=function(e){if("object"!=be(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==be(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e){var t=e.canEdit,r=e.label,n=e.style,i=e.value,l=e.buttons,a=void 0===l?[]:l;return o().createElement("div",{style:Ee({display:"flex",width:"100%",alignItems:"center"},n)},o().createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis"}},r),a.map((function(e){var r=e.Component,n=e.name;return o().createElement(r,{key:n,status:"LAYER",btnProps:{variant:"default",className:"",size:""},hide:!t,selectedStyle:i})})))}var Pe=r(663186),we=r(271020),Ae=r(959314);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ke={gnUpdateLayerSettingsMapLayout:function(e,t){return e.ofType(we.a,p.E9).filter((function(){var e,r,n;return null===(e=t.getState())||void 0===e||null===(r=e.layers)||void 0===r||null===(n=r.settings)||void 0===n?void 0:n.expanded})).filter((function(e){return e.source!==Ae.v.PANEL})).map((function(e){var r=e.layout,n=(0,le.Uh)("mapLayout")||{left:{sm:300,md:500,lg:600},right:{md:658},bottom:{sm:30}},o=(0,v.iS)(t.getState()),i=(0,we.Ix)(Le(Le(Le({},(0,v.u$)(t.getState())),r),{},{left:n.left.sm,boundingMapRect:Le(Le({},(null==r?void 0:r.boundingMapRect)||{}),{},{left:n.left.sm}),boundingSideBarReact:Le(Le({},o),null==r?void 0:r.boundingSidebarRect)}));return Le(Le({},i),{},{source:Ae.v.PANEL})}))}};var xe=r(164045),De=r(535273);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}var Re=["node","onChange","style","selectedNodes","onClose","items"];function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e,t,r){return(t=function(e){var t=function(e){if("object"!=ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(null,arguments)}var Ue=(0,xe.A)(f.A),qe={group:function(e){var t,r,n=e.node,i=e.onChange,l=e.groups,a=e.currentLocale,u=(t=(0,q.A)("settings-section",{general:!0}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],s=u[1];return o().createElement(U,{title:o().createElement(b.A,{msgId:"gnviewer.generalSettings"}),expanded:null==c?void 0:c.general,onChange:function(e,t){s(W(W({},c),{},Y({},e,t)))}.bind(null,"general")},o().createElement(M,{node:n,onChange:i,nodeType:"group",groups:l,currentLocale:a}))},baseLayer:function(e){var t,r,n=e.node,i=void 0===n?{}:n,l=e.resolutions,a=e.projection,u=e.onChange,c=void 0===u?function(){}:u,s=e.zoom,f=e.groups,p=void 0===f?[]:f,y=e.currentLocale,m=(t=(0,q.A)("settings-section",{general:!0,visibility:!1}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=m[0],v=m[1];function g(e,t){v(X(X({},d),{},ee({},e,t)))}return o().createElement(o().Fragment,null,o().createElement(U,{title:o().createElement(b.A,{msgId:"gnviewer.generalSettings"}),expanded:null==d?void 0:d.general,onChange:g.bind(null,"general")},o().createElement(M,{node:i,onChange:c,nodeType:"layer",groups:p,currentLocale:y})),o().createElement(U,{title:o().createElement(b.A,{msgId:"gnviewer.visibilitySettings"}),expanded:null==d?void 0:d.visibility,onChange:g.bind(null,"visibility")},o().createElement(G,{node:i,resolutions:l,projection:a,onChange:c,zoom:s})))},wms:function(e){var t,r=e.node,i=void 0===r?{}:r,l=e.resolutions,a=e.projection,u=e.onChange,c=void 0===u?function(){}:u,p=e.zoom,y=e.formats,m=e.isLocalizedLayerStylesEnabled,d=e.currentLocaleLanguage,v=e.groups,g=void 0===v?[]:v,h=e.currentLocale,O=e.styleSelectorComponent,E=i.singleTile,S=void 0!==E&&E,j=i.tiled,P=void 0===j||j,w=i.transparent,A=void 0===w||w,I=i.localizedLayerStyles,L=void 0!==I&&I,T=i.imageFormats,k=i.format,x=void 0===k?(0,le.Uh)("defaultLayerFormat")||"image/png":k,D=i.url,z=i.legendOptions,R=void 0===z?{legendWidth:12,legendHeight:12}:z,N=ye((0,n.useState)(),2),_=N[0],F=N[1],V=ye((0,q.A)("settings-section",{general:!0,visibility:!1,style:!1,tiling:!1}),2),W=V[0],Y=V[1];function H(e,t){Y(fe(fe({},W),{},pe({},e,t)))}var B=(0,n.useRef)();function K(e){return R&&R[e]&&parseInt(R[e],10)<12?"error":null}function Q(){return"error"!==K("legendWidth")&&"error"!==K("legendHeight")&&ne()(R.legendHeight)&&ne()(R.legendWidth)}function Z(e){var t=e.target.value&&Math.round(e.target.value),r=e.target.name;c({legendOptions:fe(fe({},R),{},pe({},r,t>=12?t:""))})}return(0,n.useEffect)((function(){return B.current=!0,function(){B.current=!1}}),[]),o().createElement(o().Fragment,null,o().createElement(U,{title:o().createElement(b.A,{msgId:"gnviewer.generalSettings"}),expanded:null==W?void 0:W.general,onChange:H.bind(null,"general")},o().createElement(M,{node:i,onChange:c,nodeType:"layer",groups:g,currentLocale:h})),o().createElement(U,{title:o().createElement(b.A,{msgId:"gnviewer.visibilitySettings"}),expanded:null==W?void 0:W.visibility,onChange:H.bind(null,"visibility")},o().createElement(G,{node:i,resolutions:l,projection:a,onChange:c,zoom:p})),o().createElement(U,{title:o().createElement(b.A,{msgId:"gnviewer.styleSettings"}),expanded:null==W?void 0:W.style,onChange:H.bind(null,"style")},O,o().createElement(s.gE,{validationState:K("legendWidth")},o().createElement(s.mq,null,o().createElement(b.A,{msgId:"gnviewer.legendWidth"})),o().createElement(J.A,{value:R.legendWidth,name:"legendWidth",type:"number",min:12,max:1e3,onChange:function(e){return c({legendOptions:fe(fe({},R),{},{legendWidth:e&&$()(Math.round(e),0,1e3)})})},onKeyPress:function(e){return"-"===e.key&&e.preventDefault()},onBlur:Z})),o().createElement(s.gE,{validationState:K("legendHeight")},o().createElement(s.mq,null,o().createElement(b.A,{msgId:"gnviewer.legendHeight"})),o().createElement(J.A,{value:R.legendHeight,name:"legendHeight",type:"number",min:12,max:1e3,onChange:function(e){return c({legendOptions:fe(fe({},R),{},{legendHeight:e&&$()(Math.round(e),0,1e3)})})},onKeyPress:function(e){return"-"===e.key&&e.preventDefault()},onBlur:Z})),o().createElement(s.gE,null,o().createElement(s.mq,null,o().createElement(b.A,{msgId:"gnviewer.legendPreview"})),o().createElement("div",{style:{width:"100%",overflow:"auto"}},o().createElement(ae.A,{style:{maxWidth:"none"},layer:i,legendHeight:Q()&&R.legendHeight||void 0,legendWidth:Q()&&R.legendWidth||void 0,language:m?d:void 0})))),o().createElement(U,{title:o().createElement(b.A,{msgId:"gnviewer.tilingSettings"}),expanded:null==W?void 0:W.tiling,onChange:H.bind(null,"tiling")},o().createElement(s.gE,null,o().createElement(s.mq,null,o().createElement(b.A,{msgId:"layerProperties.format.title"})),o().createElement("div",{className:"ms-format-container"},o().createElement(C.Ay,{className:"format-select",key:"format-dropdown",clearable:!1,noResultsText:o().createElement(b.A,{msgId:_?"layerProperties.format.loading":"layerProperties.format.noOption"}),isLoading:!!_,options:_?[]:(null!==(t=null!=y?y:T)&&void 0!==t?t:ue.DV).map((function(e){return null!=e&&e.value?e:{value:e,label:e}})),value:x,onChange:function(e){var t=e.value;return c({format:t})}}),o().createElement(f.A,{tooltipId:"layerProperties.format.refresh",className:"square-button-md no-border format-refresh",onClick:function(){return e=D,void(_||(F(!0),(0,ie.qM)(e).then((function(e){B.current&&(c({imageFormats:e}),F(!1))})).catch((function(){B.current&&F(!1)}))));var e},key:"format-refresh"},o().createElement(s.e6,{glyph:"refresh"})))),o().createElement(s.gE,null,o().createElement(s.mq,null,"Size"),o().createElement(C.Ay,{key:"wsm-layersize-dropdown",clearable:!1,options:[{value:256,label:256},{value:512,label:512}],value:(null==i?void 0:i.tileSize)||256,onChange:function(e){var t=e.value;return c({tileSize:t})}})),o().createElement(s.gE,null,o().createElement(s.Sc,{key:"transparent",checked:A,onChange:function(e){return c({transparent:e.target.checked})}},o().createElement(b.A,{msgId:"layerProperties.transparent"})),o().createElement(s.Sc,{value:"tiled",key:"tiled",disabled:!!S,onChange:function(e){return c({tiled:e.target.checked})},checked:P},o().createElement(b.A,{msgId:"layerProperties.cached"})),o().createElement(s.Sc,{key:"singleTile",value:"singleTile",checked:S,onChange:function(e){return c({singleTile:e.target.checked})}},o().createElement(b.A,{msgId:"layerProperties.singleTile"})),m?o().createElement(s.Sc,{key:"localizedLayerStyles",value:"localizedLayerStyles","data-qa":"display-lacalized-layer-styles-option",checked:L,onChange:function(e){return c({localizedLayerStyles:e.target.checked})}},o().createElement(b.A,{msgId:"layerProperties.enableLocalizedLayerStyles.label"}),"Â ",o().createElement(oe.A,{text:o().createElement(b.A,{msgId:"layerProperties.enableLocalizedLayerStyles.tooltip"})})):null)))}},Fe=(0,l.connect)((0,a.Mz)([],(function(){return{}})),{})((function(e){var t,r,n,i,l,a,u,c,f,p,y,m,d,v,g,h=e.node,O=e.onChange,E=e.buttons,S=(m=((null==(r=h)||null===(n=r.extendedParams)||void 0===n||null===(i=n.mapLayer)||void 0===i||null===(l=i.extra_params)||void 0===l?void 0:l.styles)||[]).map((function(e){return Ee(Ee({},e),{},{canEdit:!0})})),d=(null==r||null===(a=r.extendedParams)||void 0===a||null===(u=a.mapLayer)||void 0===u||null===(c=u.dataset)||void 0===c?void 0:c.styles)||[],v=null==r||null===(f=r.extendedParams)||void 0===f||null===(p=f.mapLayer)||void 0===p||null===(y=p.dataset)||void 0===y?void 0:y.default_style,g=(null==r?void 0:r.availableStyles)||[],(0,de.Q5)([].concat(ge(v?[v]:[]),ge(d),ge(m),ge(g))).map((function(e){return{value:e.name,label:e.title,canEdit:e.canEdit}}))),j=S.find((function(e){return e.value===h.style}))||{};return null!=h&&null!==(t=h.extendedParams)&&void 0!==t&&t.mapLayer?o().createElement(s.gE,null,o().createElement(s.mq,null,o().createElement(b.A,{msgId:"gnviewer.style"})),o().createElement(C.Ay,{key:"style-selector",clearable:!1,options:S.map((function(e){var t=e.value,r=e.label,n=e.canEdit;return{value:t,label:o().createElement(je,{value:t,label:r,canEdit:n,buttons:E})}})),value:{value:h.style,label:o().createElement(je,ve({},j,{style:{width:"calc(100% - 16px)"},buttons:E}))},onChange:function(e){var t=e.value;return O({style:t})}})):null})),Ve=(0,l.connect)((0,a.Mz)([y.Cn,m.mg,y.eK,d.Pd,d.Bv,function(e){return(0,v.o7)(e,{height:!0})},y.Cn],(function(e,t,r,n,o,i){return{node:e,zoom:null==t?void 0:t.zoom,projection:null==t?void 0:t.projection,groups:r,currentLocale:n,currentLocaleLanguage:o,style:i}})),{onChange:p.OK,onClose:p.qO})((function(e,t){var r=e.node,n=e.onChange,i=e.style,l=(e.selectedNodes,e.onClose),a=e.items,u=void 0===a?[]:a,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Re),p=t.loadedPlugins,y=(0,Pe.A)({items:u,loadedPlugins:p});if(c()(r))return null;var m=!(null==r||!r.nodes),d=m?qe.group:qe[null==r?void 0:r.type]||qe.baseLayer,b=(null==r?void 0:r.title)&&(0,g.LK)(r.title,f.currentLocale)||r.name;function v(e){n(r.id,m?"groups":"layers",e)}return o().createElement("div",{className:"gn-layer-settings",style:i},o().createElement("div",{className:"gn-layer-settings-head"},o().createElement("div",{className:"gn-layer-settings-title"},b),o().createElement(Ue,{className:"square-button",onClick:function(){return l()}},o().createElement(s.e6,{glyph:"1-close"}))),o().createElement("div",{className:"gn-layer-settings-body"},o().createElement(d,_e({},f,{node:r,onChange:v,styleSelectorComponent:o().createElement(Fe,_e({},f,{node:r,onChange:v,buttons:(y||[]).filter((function(e){return"style-button"===e.target}))}))}))))})),We=(0,l.connect)((0,a.Mz)([],(function(){return{}})),{onSettings:p.l0,onHideSettings:p.qO})((function(e){var t=e.status,r=e.statusTypes,n=e.nodeTypes,i=e.selectedNodes,l=e.onSettings,a=void 0===l?function(){}:l,u=e.onHideSettings,c=void 0===u?function(){}:u,f=((null==i?void 0:i[0])||{}).node;return t!==r.LAYER&&t!==r.GROUP||t===r.LAYER&&(0,De.fd)(f)?null:o().createElement(Ue,{variant:"primary",className:"toc-toolbar-button",onClick:function(){return t===r.LAYER?a(f.id,n.LAYER,{opacity:parseFloat(void 0!==f.opacity?f.opacity:1)}):t===r.GROUP?a(f.id,n.GROUP,{}):c()},tooltipId:o().createElement(b.A,{msgId:"toc.toolLayerSettingsTooltip"})},o().createElement(s.e6,{glyph:"wrench"}))}));const Ye=(0,i.i1)("LayerSettings",{component:Ve,containers:{TOC:{target:"toolbar",Component:We,position:5}},epics:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},ke),reducers:{}})},959314:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});var n={PANEL:"PANEL"}},978659:(e,t,r)=>{var n=r(587133),o=r(399374);e.exports=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=o(r))==r?r:0),void 0!==t&&(t=(t=o(t))==t?t:0),n(o(e),t,r)}}}]);