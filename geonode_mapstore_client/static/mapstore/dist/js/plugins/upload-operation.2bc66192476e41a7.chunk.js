"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[95083],{246242:(e,r,t)=>{t.r(r),t.d(r,{default:()=>I});var n=t(273517),o=t.n(n),l=t(393149),a=t(605556),i=t.n(a),u=t(811668),c=t(801081),s=t(168676),p=t(170172),f=t(933019),d=t(724093),m=t(120559),y=t(82106);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},v.apply(null,arguments)}function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){O(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function O(e,r,t){return(r=function(e){var r=function(e){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=b(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function w(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function j(e){var r,t,l=e.refreshTime,a=void 0===l?3e3:l,i=e.uploadConfig,u={upload:{url:(0,y.tX)(y.Fu,"/upload"),body:{file:{base_file:m.fd,store_spatial_files:!0,action:"upload"},remote:{url:(0,m.z_)("url"),title:(0,m.z_)("url"),type:(0,m.z_)("remoteType"),action:"upload"}}},executionRequest:{url:(0,y.tX)(y.pp),params:{"filter{action}":"upload","sort[]":"-created"}}},c=(r=(0,n.useState)(0),t=2,function(e){if(Array.isArray(e))return e}(r)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,l,a,i=[],u=!0,c=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=l.call(t)).done)&&(i.push(n.value),i.length!==r);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}}(r,t)||function(e,r){if(e){if("string"==typeof e)return w(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,r):void 0}}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=c[0],g=c[1],O=(0,d.A)({api:u.executionRequest,forceRequests:b,refreshTime:a,onRefresh:function(){}}),j=O.requests,S=O.uploadsToRequest,A=O.deleteRequest,T=(0,f.A)({api:u.upload,onComplete:function(e,r){S(r),g((function(e){return e+1}))}}),P=T.progress,_=T.loading,R=T.errors,x=T.completed,E=T.cancelRequest,I=T.uploadRequest;return o().createElement(s.A,{enableRemoteUploads:!0,supportedFiles:(0,m.v)("dataset",{actions:["upload"]}),maxParallelUploads:(0,m.YS)(),maxAllowedSize:(0,m.L7)("dataset"),progress:P,loading:_,errors:R,completed:x,onCancel:E,onUpload:I,getDefaultRemoteResource:function(e){return h(h({},e),{},{remoteType:"3dtiles"})},remoteTypes:[{value:"3dtiles",label:"3D Tiles"}],remoteTypeErrorMessageId:"gnviewer.unsupportedUrlServiceType"},o().createElement(p.A,v({iconName:"database",titleMsgId:"gnviewer.uploadDataset",descriptionMsgId:"gnviewer.dragAndDropFile",requests:j,onDelete:A},i)))}j.propTypes={location:i().object},j.defaultProps={};const S=(0,u.connect)((0,c.Mz)([],(function(){return{}})))(j);function A(){return A=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},A.apply(null,arguments)}function T(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,r){if(e){if("string"==typeof e)return _(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,r):void 0}}function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function R(e){var r,t,l=e.uploadConfig,a=(r=(0,n.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(r)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,l,a,i=[],u=!0,c=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=l.call(t)).done)&&(i.push(n.value),i.length!==r);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}}(r,t)||P(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],u=a[1],c={upload:{url:"/documents/upload?no__redirect=true",body:{file:{title:m.Zl,doc_file:m.fd},remote:{title:m.Zl,doc_url:(0,m.z_)("url"),extension:(0,m.z_)("remoteType")}}}},d=(0,f.A)({api:c.upload,onComplete:function(e,r){u((function(e){return[].concat(T(r.map((function(e){var r=e.data,t=e.upload;return{exec_id:t.id,name:(0,m.Zl)({upload:t}),created:Date.now(),status:"finished",output_params:{resources:[{detail_url:r.url}]}}}))),T(e))}))}}),y=d.progress,b=d.loading,v=d.errors,g=d.completed,h=d.cancelRequest,O=d.uploadRequest,w=(0,m.v)("document");return o().createElement(s.A,{enableRemoteUploads:!0,supportedFiles:w,maxParallelUploads:(0,m.YS)(),maxAllowedSize:(0,m.L7)("document"),progress:y,loading:b,errors:v,completed:g,onCancel:h,onUpload:O,remoteTypes:w.map((function(e){var r=e.required_ext;return{value:".".concat(r[0]),label:".".concat(r[0])}})),remoteTypeErrorMessageId:"gnviewer.unsupportedUrlExtension",remoteTypesPlaceholder:"ext",remoteTypeFromUrl:!0,isRemoteTypesDisabled:function(e){var r;return!(null!=e&&null!==(r=e.validation)&&void 0!==r&&r.isValidRemoteUrl)||(0,m.iY)(e)}},o().createElement(p.A,A({iconName:"file",titleMsgId:"gnviewer.uploadDocument",descriptionMsgId:"gnviewer.dragAndDropFile",requests:i,onDelete:function(e){u((function(r){return r.filter((function(r){return r.exec_id!==e}))}))}},l)))}R.propTypes={location:i().object},R.defaultProps={};const x=(0,u.connect)((0,c.Mz)([],(function(){return{}})))(R);var E=["resourceType"];const I=(0,l.i1)("UploadResource",{component:function(e){var r=e.resourceType,t=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==r.indexOf(n))continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],-1===r.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,E),n="dataset"===r?S:x;return o().createElement("div",{className:"gn-upload-container"},o().createElement(n,{uploadConfig:t}))},containers:{},epics:{},reducers:{}})}}]);