(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[86169],{862769:(e,t,r)=>{var n={"./cesium/plugins/index":[271713,9,40271,65792,92322,29379,45477,66287,50172,88696,95381],"./leaflet/plugins/index":[935701,7,45243,84766,66287,35701,45992],"./openlayers/plugins/index":[103498,9,18672,52043,15265,40271,92322,47202,69141,51554,49414,85828,54678,95773,38225,53563,62366,66287,93546,13581,3498,39450]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(2).map(r.e)).then((()=>r.t(o,16|t[1])))}o.keys=()=>Object.keys(n),o.id=862769,e.exports=o},419137:(e,t,r)=>{var n={"./cesium/index":[391726,29379,27962,65794,92227],"./leaflet/index":[497611,96259,45243,42201,51410,24226,88181,49967,98324],"./openlayers/index":[120447,96259,18672,52043,15265,47202,69141,51554,49414,85828,72445,37974,38225,52210,1577,21611,24372,55211,26580,24226,93546,6909,84590,79761]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=419137,e.exports=o},460604:(e,t,r)=>{"use strict";r.d(t,{hn:()=>n,yg:()=>o,vD:()=>i,jJ:()=>a,oy:()=>u,am:()=>c,W:()=>l,B1:()=>s,YP:()=>p,fU:()=>f,cY:()=>y});var n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",u="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",c="ADDITIONALLAYER:MERGE_OPTIONS_BY_OWNER",l=function(e,t){return{type:a,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},s=function(e,t){return{type:u,owner:e,options:t}},p=function(e,t){return{type:c,owner:e,options:t}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.owner;return{type:o,id:t,owner:r}},y=function(e){return{type:i,owner:e}}},604206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>n,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>u,uB:()=>s,Rh:()=>p,G_:()=>f,vU:()=>y,Vw:()=>d,KD:()=>m,uj:()=>b,lo:()=>g,Yf:()=>v,fo:()=>O,PY:()=>h,bp:()=>S,oJ:()=>w,k4:()=>j,sc:()=>P,Li:()=>E});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",u="DRAW:DRAW_SUPPORT_STOPPED",c="DRAW:FEATURES_SELECTED",l="DRAW:DRAWING_FEATURES",s="DRAW:SET_SNAPPING_LAYER",p="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",y="DRAW:SET_SNAPPING_CONFIG";function d(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function m(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function b(){return{type:l,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function g(){return{type:u}}function v(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function O(e,t){return{type:o,geometry:e,owner:t}}function h(e){return{type:i,currentStyle:e}}var S=function(e){return v("clean","",e,[],{})};function w(){return{type:f}}function j(e){return{type:s,snappingLayer:e}}function P(){return{type:p}}function E(e,t,r){return{type:y,value:e,prop:t,pluginCfg:r}}},73814:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){var o,i,a,u;o=e,i=t,a=r[t],u=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i),(i="symbol"==n(u)?u:u+"")in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.d(t,{xO:()=>a,HH:()=>u,yp:()=>c,i8:()=>l,hC:()=>s,UK:()=>p});var a="MAP:ADD_POPUP",u="MAP:REMOVE_POPUP",c="MAP:CLEAN_POPUPS",l=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{type:a,id:e,popup:i({id:e},t),single:r}},s=function(e){return{type:u,id:e}},p=function(){return{type:c}}},213652:(e,t,r)=>{"use strict";r.d(t,{Wz:()=>n,UA:()=>o,LI:()=>i});var n="MAP_TYPE_CHANGED",o="MAP_TYPE:VISUALIZATION_MODE_CHANGED";function i(e){return{type:o,visualizationMode:e}}},615402:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function l(e,t,r){return t=p(t),function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function y(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var m=r(868195).FormattedHTMLMessage,b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(m,{id:this.props.msgId,values:this.props.msgParams}):a().createElement("span",null,this.props.msgId||"")}}])&&c(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);y(b,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),y(b,"contextTypes",{intl:o().object});const g=b},819983:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),u=r(552259);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){return function(t){var r,i,a,c,l,p,f,y=(null==t||null===(r=t.map)||void 0===r?void 0:r.projection)||"EPSG:3857",d=(null==t||null===(i=t.map)||void 0===i||null===(a=i.mapOptions)||void 0===a||null===(c=a.view)||void 0===c?void 0:c.DPI)||null,m=null==t||null===(l=t.map)||void 0===l||null===(p=l.mapOptions)||void 0===p||null===(f=p.view)||void 0===f?void 0:f.scales,b=(0,n.useMemo)((function(){return m?(0,u.Xf)(m,y,d):null}),[m,y,d]),g=b?s(s({},t),{},{map:s(s({},t.map),{},{mapOptions:s(s({},t.map.mapOptions),{},{view:s(s({},t.map.mapOptions.view),{},{resolutions:b})})})}):t;return o().createElement(e,g)}};p.propTypes={Component:a().element};const f=p},38560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(480681),o=r(124852),i=r.n(o),a=r(294184),u=r.n(a),c=["disabled","className","onClick"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}var s=r(815135);const p=(f=n.Button,i().forwardRef((function(e,t){var r=e.disabled,n=e.className,o=e.onClick,a=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,c);return i().createElement(f,l({ref:t,className:r?u()("disabled",n):n,onClick:function(){r||a.apply(void 0,arguments)}},s),s.children)})));var f;(0,s.Z)(n.Button)},879504:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(49977),o=r.n(n),i=r(91175),a=r.n(i),u=r(53001),c=r(782904),l=r(931273),s=r(580416),p=r(675110),f=r(31935),y=r(680833),d=r(577215);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==m(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const h={accessMetadataExplorer:function(e){return e.ofType(u.xT).switchMap((function(){return o().Observable.of((0,c.Xg)("metadataexplorer","enabled",!0),(0,u.vw)(!1),(0,l.Dw)("default_map_backgrounds"))}))},addBackgroundPropertiesEpic:function(e){return e.ofType(u.oQ).switchMap((function(e){var t=e.modalParams,r=o().Observable.of((0,u.$c)(O(O({},t),{},{loading:!1})));return t.layer&&"wms"===t.layer.type?o().Observable.of((0,u.$c)(O(O({},t),{},{loading:!0}))).concat((0,y.kB)(t.layer).switchMap((function(e){return o().Observable.of((0,u.$c)(O(O({},t),{},{loading:!1,capabilities:(0,d.Br)(e)})))})).catch((function(){return r}))):r}))},setCurrentBackgroundLayerEpic:function(e,t){return e.ofType(u.Wv).switchMap((function(e){var r,n=e.layerId,i=t.getState(),a=(0,p.CA)(i,n);return(r=o().Observable).of.apply(r,b(a&&"background"===a.group?[(0,c.Xg)("backgroundSelector","tempLayer",a),(0,c.Xg)("backgroundSelector","currentLayer",a)]:[]))}))},updateTempBackgroundLayerEpic:function(e,t){return e.ofType(u.R3).take(1).switchMap((function(r){var n=r.id;return e.ofType(s.K$).switchMap((function(){var e,r=t.getState(),i=(0,p.CA)(r,n);return(0,p.DP)(r).id===i.id?(e=o().Observable).of.apply(e,b(i&&"background"===i.group?[(0,c.Xg)("backgroundSelector","tempLayer",i),(0,c.Xg)("backgroundSelector","currentLayer",i)]:[])):o().Observable.of((0,c.Xg)("backgroundSelector","tempLayer",i))}))}))},backgroundAddedEpic:function(e,t){return e.ofType(u.gC).mergeMap((function(e){var r=e.layerId,n=t.getState(),i=(0,p.CA)(n,r);return i?o().Observable.of((0,s.He)(i.id,{visibility:!0}),(0,u.ke)(i.id),(0,u.V3)()):o().Observable.empty()}))},backgroundEditedEpic:function(e,t){return e.ofType(u.dG).mergeMap((function(e){var r=e.layerId,n=t.getState();return(0,p.CA)(n,r)?o().Observable.of((0,u.V3)()):o().Observable.empty()}))},backgroundRemovedEpic:function(e,t){return e.ofType(u.H_).mergeMap((function(e){var r=e.backgroundId,n=t.getState(),i=(0,p.CA)(n,r),c=(0,f.TP)(n)||[],l=(0,p.DP)(n)||{},y=r===l.id?a()(c.filter((function(e){return e.id!==r&&!e.invalid}))):l;return i?o().Observable.of((0,s.ZF)(r,"layers"),(0,s.He)(y.id,{visibility:!0}),(0,u.ke)(y.id)):o().Observable.empty()}))},syncSelectedBackgroundEpic:function(e){return e.ofType(u.K2).take(1).switchMap((function(t){var r=t.id;return e.ofType(s.oE).filter((function(e){return e.layer.id===r})).switchMap((function(){return o().Observable.of((0,u.pW)(r))})).takeUntil(e.ofType(u.gC))}))}}},281635:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Tt});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i),u=r(322843),c=r(472986),l=r.n(c),s=r(893379),p=r.n(s),f=r(512817);p()(f.Z,{insert:"head",singleton:!1}),f.Z.locals;var y=r(805346),d=r(737275),m=r(801550),b=r(747037),g=r.n(b),v=r(800827),O=r(93152),h=r(675110),S=r(227361),w=r.n(S),j=r(22222),P=r(916651);function E(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){return w()(e,e&&e.featuregrid&&e.featuregrid.open&&e.featuregrid.showFilteredObject?"query.filterObj.spatialField":"emptyObject")},D=function(e){return A(e)&&A(e).geometry},k=(0,j.P1)([function(e){return D(e)&&D(e).coordinates||[]},function(e){return D(e)&&D(e).type||"Polygon"},function(e){return D(e)&&D(e).id||"spatial_object"},function(e){return D(e)&&D(e).projection||"EPSG:3857"}],(function(e,t,r,n){var o={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:t,coordinates:e},style:{fillColor:"#FFFFFF",fillOpacity:"0.2",color:"#ffcc33"},id:r}]};return e.length>0&&t?(0,P.reprojectGeoJson)(o,n,"EPSG:4326").features:[]})),L=(0,j.P1)([k,function(e){return w()(e,e&&e.highlight&&e.highlight.featuresPath||"highlight.emptyFeatures")||[]}],(function(e,t){return[].concat(E(t),E(e))})),I=r(274621),x=r(308316),M=r(38842),C=r(784715),_=r(618446),N=r.n(_);const R=(0,C.oz)(N())(v.pb,v.Od,O.$v,h.Hi,L,(function(e){return e.mapInitialConfig&&e.mapInitialConfig.loadingError&&e.mapInitialConfig.loadingError.data}),I.y8,v.zT,M.wk,M.c3,x.KV,(function(e,t,r,n,o,i,a,u,c,l,s){return{projectionDefs:e,map:t,mapType:r,layers:n,features:o,loadingError:i,securityToken:a,elevationEnabled:u,isLocalizedLayerStylesEnabled:c,localizedLayerStylesName:l,currentLocaleLanguage:s}}));var F=r(171703),Z=r(480681);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){var n;return n=function(e,t){if("object"!=H(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==H(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=(0,j.P1)(v.Od,O.$v,O.c0,(function(e,t,r){return{map:e,mapType:t,isCesium:r}})),B={updateConfigAction:m.aN};const Y=(0,F.connect)(W,B)((function(e){var t=e.map,r=e.mapType,n=e.isCesium,o=e.updateConfigAction,i=e.mapOptions,u=G(G({},i&&i[r]||d.ZP.getConfigProp("defaultMapOptions")&&d.ZP.getConfigProp("defaultMapOptions")[r]||{}),null==t?void 0:t.mapOptions),c=function(e,t){o(U({},t,!e[t]))};return n?a().createElement("form",null,a().createElement(Z.FormGroup,null,a().createElement(Z.ControlLabel,null,a().createElement(y.Z,{msgId:"map.settings.title"}))),a().createElement(Z.Checkbox,{checked:u.showSkyAtmosphere,onChange:function(){return c(u,"showSkyAtmosphere")}},a().createElement(y.Z,{msgId:"map.settings.skyAtmosphere"})),a().createElement(Z.Checkbox,{checked:u.showGroundAtmosphere,onChange:function(){return c(u,"showGroundAtmosphere")}},a().createElement(y.Z,{msgId:"map.settings.groundAtmosphere"})),a().createElement(Z.Checkbox,{checked:u.enableFog,onChange:function(){return c(u,"enableFog")}},a().createElement(y.Z,{msgId:"map.settings.fog"})),a().createElement(Z.Checkbox,{checked:u.depthTestAgainstTerrain,onChange:function(){return c(u,"depthTestAgainstTerrain")}},a().createElement(y.Z,{msgId:"map.settings.depthTest"}))):null}));var $=r(601321),K=r(345304),X=r(392411),V=r(727418),J=r.n(V),q=r(41156),Q={status:null};var ee=r(129386);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==te(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe={status:"disabled",layer:"featureselector",features:[],highlighted:0,featuresPath:"highlight.emptyFeatures",emptyFeatures:[]};var ie=r(556874),ae=r(460604),ue=r(91175),ce=r.n(ue),le=r(535937),se=r.n(le),pe=r(406557),fe=r.n(pe),ye=r(513218),de=r.n(ye),me=r(701469),be=r.n(me);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==ge(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Se=r(49977),we=r.n(Se),je=r(580416),Pe=r(881808),Ee=r(263516),Te=r(55105),Ae=r(782904),De=r(624262),ke=r(552259),Le=r(197395),Ie=r(921914),xe=r(66604),Me=r.n(xe);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ce(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Re={checkMapPermissions:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(Ee.XP).filter((function(){return(0,v.J9)(n())})).map((function(){var e=(0,v.J9)(n());return(0,Pe.I6)(e)}))},handleCreationLayerError:function(e,t){return e.ofType(m.TF).delay(500).switchMap((function(e){var r=(0,O.$v)(t.getState()),n=(0,h.CA)(t.getState(),e.options.id);return n&&(0,De.yJ)(n,r)?we().Observable.from([(0,je.He)(e.options.id,{invalid:!0})]):we().Observable.empty()}))},handleCreationBackgroundError:function(e,t){return e.ofType(m.TF).delay(500).filter((function(e){var r=(0,h.x)(t.getState());return r&&e.options.id===r.id&&"background"===e.options.group})).switchMap((function(e){var r=(0,O.$v)(t.getState()),n=ce()((0,h.pV)(t.getState()).filter((function(t){return(0,De.yJ)(t,r)&&t.id!==e.options.id})));return n?we().Observable.from([(0,je.He)(n.id,{visibility:!0}),(0,Ae.Xg)("backgroundSelector","currentLayer",n),(0,Ae.Xg)("backgroundSelector","tempLayer",n),(0,Le.Kp)({title:"warning",message:"notification.backgroundLayerNotSupported",action:{label:"close"},position:"tc"})]):we().Observable.of((0,Le.Kp)({title:"warning",message:"notification.noBackgroundLayerSupported",action:{label:"close"},position:"tc"}))}))},resetMapOnInit:function(e){return e.ofType(m.Ec).switchMap((function(){return we().Observable.of((0,ae.cY)(),(0,Ae.fV)(),(0,je.nN)(),(0,Ie.XP)())}))},resetLimitsOnInit:function(e,t){return e.ofType(Pe.ok,m.Li).switchMap((function(){var e=(0,v.A0)(t.getState()),r=(0,v.zj)(t.getState()),n=(0,v.S)(t.getState());return we().Observable.of((0,m.BV)({restrictedExtent:r,crs:e,minZoom:n}))}))},zoomToExtentEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(m.Qy).switchMap((function(e){var t=function(e){if(be()(e))return e.map((function(e){return"string"==typeof e||e instanceof String?Number(e):e}));if(de()(e)){var t=Me()(e,(function(e){return"string"==typeof e||e instanceof String?Number(e):e}));return[t.minx,t.miny,t.maxx,t.maxy]}return null}(e.extent);if(!t)return we().Observable.empty();var r=ke.ZP.getHook(ke.ZP.ZOOM_TO_EXTENT_HOOK),o=(0,Te.CF)(n());if(r){var i=e.crs,a=e.maxZoom,u=e.options;return r(t,Ne({crs:i,padding:o,maxZoom:a},void 0===u?{}:u)),we().Observable.empty()}return function(e,t){var r=0,n=e.extent,o=void 0===n?[]:n,i=P.default.reprojectBbox(o,e.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(i){var a=P.default.reproject(ke.ZP.getCenterForExtent(o,e.crs),e.crs,"EPSG:4326");if("EPSG:4326"===e.crs&&o&&o[0]<=-180&&o[1]<=-90&&o[2]>=180&&o[3]>=90)r=1;else{var u=P.default.reprojectBbox(o,e.crs,t.projection||"EPSG:4326");r=ke.ZP.getZoomForExtent(u,t.size,0,21,null)}e.maxZoom&&r>e.maxZoom&&(r=e.maxZoom);var c={minx:i[0],miny:i[1],maxx:i[2],maxy:i[3]},l=Ne(Ne({},t.bbox),{},{bounds:c});return we().Observable.of((0,m.o6)(a,r,l,t.size,e.mapStateSource,t.projection,t.viewerOptions))}return we().Observable.empty()}(Ne(Ne({},e),{},{extent:t}),(0,v.Od)(n()))}))}};var Fe=r(73814);function Ze(e){return{type:"CHANGE_SELECTION_STATE",geomType:e.geomType,point:e.point,line:e.line,polygon:e.polygon}}var He=r(604206),ze=r(120096);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ge(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ye=function(){return a().createElement("span",null)};var $e=r(819983),Ke=r(86686),Xe=r(615402),Ve=r(38560);const Je=function(e){var t=e.show,r=e.error,n=e.onReload;return t?a().createElement("div",{className:"ms-map-error-panel",style:{position:"absolute",width:"100%",height:"100%",color:"#ffffff",background:"rgba(0, 0, 0, 0.75)",zIndex:100,top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center"}},a().createElement("div",{style:{maxWidth:500}},a().createElement("h1",null,a().createElement(Xe.Z,{msgId:"map.renderingErrorTitle"})),a().createElement("p",null,a().createElement(Xe.Z,{msgId:"map.renderingErrorMessage"})),(null==r?void 0:r.message)&&a().createElement(Z.Alert,{bsStyle:"danger"},a().createElement("small",null,r.message)),n&&a().createElement(Ve.Z,{bsStyle:"primary",onClick:function(){return n()}},a().createElement(y.Z,{msgId:"map.reloadMap"})))):null};var qe=r(856175),Qe=r(879504),et=r(181251),tt=r(898631);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}var nt=["features"];function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(r),!0).forEach((function(t){at(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function at(e,t,r){var n;return n=function(e,t){if("object"!=rt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==rt(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ut="__geometry__type__",ct={format:"geostyler",body:{name:"highlight",rules:[{name:"Default Polygon Style",ruleId:"defaultPolygon",filter:["||",["==",ut,"Polygon"],["==",ut,"MultiPolygon"]],symbolizers:[{kind:"Fill",color:"#f2f2f2",fillOpacity:.3,outlineColor:"#3075e9",outlineOpacity:1,outlineWidth:2}]},{name:"Default Line Style",ruleId:"defaultLine",filter:["||",["==",ut,"LineString"],["==",ut,"MultiLineString"]],symbolizers:[{kind:"Line",color:"#3075e9",opacity:1,width:2}]},{name:"Default Point Style",ruleId:"defaultPoint",filter:["||",["==",ut,"Point"],["==",ut,"MultiPoint"]],symbolizers:[{kind:"Mark",color:"#f2f2f2",fillOpacity:.3,strokeColor:"#3075e9",strokeOpacity:1,strokeWidth:2,radius:10,wellKnownName:"Circle",msBringToFront:!0}]}]}},lt=["features"],st=["id"];function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ft.apply(this,arguments)}function yt(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pt(n.key),n)}}function Ot(e,t,r){return t=St(t),function(e,t){if(t&&("object"===pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ht()?Reflect.construct(t,r||[],St(e).constructor):t.apply(e,r))}function ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ht=function(){return!!e})()}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function jt(e,t,r){return(t=Pt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pt(e){var t=function(e,t){if("object"!=pt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pt(t)?t:t+""}var Et=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return jt(e=Ot(this,t,[].concat(n)),"state",{canRender:!0}),jt(e,"getHighlightLayer",(function(t,r,n){var o=e.state.plugins,i=function(e){var t=e.features;return it(it({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,nt)),{},{visibility:!0,features:null==t?void 0:t.map((function(e){var t;return it(it({},e),{},{properties:it(it({},(null==e?void 0:e.properties)||{}),{},at({},ut,null==e||null===(t=e.geometry)||void 0===t?void 0:t.type))})})),style:ct})}({features:e.props.features}),u=i.features,c=gt(i,lt);return a().createElement(o.Layer,{type:"vector",srs:t,position:r,key:"highlight",env:n,options:bt(bt({name:"highlight"},c),{},{features:u})},u.map((function(e){return a().createElement(o.Feature,{msId:e.id,properties:e.properties,key:e.id,crs:t,type:e.type,style:e.style||null,geometry:e.geometry})})))})),jt(e,"getTool",(function(t){return g()(t)?{name:t,impl:e.state.plugins.tools[t]}:t[e.props.mapType]||t})),jt(e,"getConfigMapOptions",(function(){return e.props.mapOptions&&e.props.mapOptions[e.props.mapType]||d.ZP.getConfigProp("defaultMapOptions")&&d.ZP.getConfigProp("defaultMapOptions")[e.props.mapType]||{}})),jt(e,"renderLayers",(function(){var t=e.props.map.projection||"EPSG:3857",r=[];e.props.isLocalizedLayerStylesEnabled&&r.push({name:e.props.localizedLayerStylesName,value:e.props.currentLocaleLanguage});var n=e.state.plugins;return[].concat(yt(e.props.layers),yt(e.props.additionalLayers.map((function(e,t){var r=e.id;return bt(bt({},gt(e,st)),{},{id:r||"additional-layers-".concat(t)})})))).filter(e.filterLayer).map((function(o,i){return a().createElement(n.Layer,{type:o.type,srs:t,position:i,key:o.id||o.name,options:o,securityToken:e.props.securityToken,env:r},e.renderLayerContent(o,t))})).concat(e.props.features&&e.props.features.length&&e.getHighlightLayer(t,e.props.layers.length,r)||[])})),jt(e,"renderLayerContent",(function(t,r){var n=e.state.plugins;return t.features?t.features.filter((0,Ke.createFeatureFilter)(t.filterObj)).map((function(e){return a().createElement(n.Feature,{key:e.id,msId:e.id,type:e.type,crs:r,geometry:e.geometry,features:e.features,featuresCrs:t.featuresCrs||"EPSG:4326",layerStyle:t.style,style:e.style||t.style||null,properties:e.properties})})):null})),jt(e,"renderSupportTools",(function(){var t=e.props.items.filter((function(e){return!!e.Tool})).map((function(t){var r=t.Tool,n=t.name,o=t.cfg;return a().createElement(r,ft({},o,{key:n,mapType:e.props.mapType}))}));return e.props.tools.map((function(t){var r=e.getTool(t),n=e.props.toolsOptions[r.name]&&e.props.toolsOptions[r.name][e.props.mapType]||e.props.toolsOptions[r.name]||{};return a().createElement(r.impl,ft({key:r.name},n))})).concat(t)})),jt(e,"filterLayer",(function(t){return t.useForElevation?"cesium"===e.props.mapType||e.props.elevationEnabled:"elevation"!==t.type||e.props.elevationEnabled})),jt(e,"updatePlugins",(function(t){e.currentMapType=t.mapType,t.onLoadingMapPlugins(!0),e.setState({plugins:void 0}),e.props.pluginsCreator(t.mapType,t.actions).then((function(r){e._isMounted&&r.mapType===e.currentMapType&&(e.setState({plugins:r}),t.onLoadingMapPlugins(!1,t.mapType),t.onMapTypeLoaded(!0,t.mapType))}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.updatePlugins(this.props),this._isMounted=!0}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.mapType===this.props.mapType&&e.actions===this.props.actions||this.updatePlugins(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){if(this.props.map&&this.state.canRender&&this.state.plugins){var e=this.props.map.mapOptions,t=void 0===e?{}:e;return a().createElement(this.state.plugins.Map,ft({id:"map"},this.props.options,{projectionDefs:this.props.projectionDefs},this.props.map,{mapOptions:bt(bt({},this.getConfigMapOptions()),t),zoomControl:this.props.zoomControl,onResolutionsChange:this.props.onResolutionsChange,errorPanel:Je}),this.renderLayers(),this.renderSupportTools())}return this.props.loadingError?a().createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapErrorMessage"},a().createElement(y.Z,{msgId:"map.loadingerror"}),":",this.props.loadingError):a().createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapLoadingMessage"},this.props.loadingSpinner?a().createElement(l(),{spinnerName:"circle",overrideSpinnerClassName:"spinner"}):null,a().createElement(y.Z,{msgId:this.props.mapLoadingMessage}))}}])&&vt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);jt(Et,"propTypes",{mapType:o().string,map:o().object,layers:o().array,additionalLayers:o().array,zoomControl:o().bool,mapLoadingMessage:o().string,loadingSpinner:o().bool,loadingError:o().string,tools:o().array,options:o().object,mapOptions:o().object,projectionDefs:o().array,toolsOptions:o().object,onResolutionsChange:o().func,actions:o().object,features:o().array,securityToken:o().string,elevationEnabled:o().bool,isLocalizedLayerStylesEnabled:o().bool,localizedLayerStylesName:o().string,currentLocaleLanguage:o().string,items:o().array,onLoadingMapPlugins:o().func,onMapTypeLoaded:o().func,pluginsCreator:o().func}),jt(Et,"defaultProps",{mapType:tt.Bk.OPENLAYERS,actions:{},zoomControl:!1,mapLoadingMessage:"map.loading",loadingSpinner:!0,tools:["scalebar","draw","highlight","popup","box"],options:{},mapOptions:{},toolsOptions:{measurement:{},locate:{},scalebar:jt({},tt.Bk.LEAFLET,{position:"bottomright"}),overview:{overviewOpt:{position:"bottomright",collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,toggleDisplay:!0},layers:[{type:"osm"}]}},securityToken:"",additionalLayers:[],elevationEnabled:!1,onResolutionsChange:function(){},items:[],onLoadingMapPlugins:function(){},onMapTypeLoaded:function(){},pluginsCreator:function(e,t){return Promise.all([r(419137)("./"+e+"/index"),r(862769)("./"+e+"/plugins/index")]).then((function(r){var n,o,i=(n=r,o=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(n,o)||function(e,t){if(e){if("string"==typeof e)return Be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Be(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].default,a=(0,F.connect)((function(e){return{projectionDefs:(0,v.pb)(e),mousePosition:(0,v.x9)(e)}}),J()({},{onMapViewChanges:m.o6,onClick:m.FP,onMouseMove:m.ou,onLayerLoading:je.Yz,onLayerLoad:je.kI,onLayerError:je.XG,onWarning:Le.Kp,onMouseOut:m.NE},t),(function(e,t,r){return J()({},r,e,J()({},t,{onMouseMove:e.mousePosition?t.onMouseMove:function(){}}))}))(i.LMap),u=(0,F.connect)((function(e){var t;return We(We({},null!==(t=e.draw)&&void 0!==t?t:{}),{},{snappingLayerInstance:(0,ze.lM)(e)})}),{onChangeDrawingStatus:He.Yf,onEndDrawing:He.fo,onGeometryChanged:He.Vw,onSelectFeatures:He.KD,onDrawingFeatures:He.uj,onDrawStopped:He.lo,setCurrentStyle:He.PY,toggleSnappingIsLoading:He.sc})(i.DrawSupport||Ye),c=(0,F.connect)((0,j.P1)((function(e){return function(e){return e&&e.box&&e.box.status}(e)}),(function(e){return{status:e}})),{onBoxEnd:q.zZ})(i.BoxSelectionSupport||Ye),l=(0,F.connect)((function(e){return e.highlight||{}}),{updateHighlighted:ee._E})(i.HighlightFeatureSupport||Ye),s=(0,F.connect)((function(e){return{selection:e.selection||{}}}),{changeSelectionState:Ze})(i.SelectionSupport||Ye),p=(0,F.connect)(null,{onWarning:Le.Kp})(i.Layer||Ye),f=[],y=(0,F.connect)((0,j.P1)((function(e){return e.mapPopups&&e.mapPopups.popups||f}),(function(e){return{popups:e}})),{onPopupClose:Fe.hC})(i.PopupSupport||Ye);return{Map:a,Layer:p,Feature:i.Feature||Ye,tools:{overview:i.Overview||Ye,scalebar:i.ScaleBar||Ye,draw:u,highlight:l,selection:s,popup:y,box:c},mapType:e}}))}});const Tt=(0,u.rx)("Map",{component:(0,u.$j)(R,{onResolutionsChange:m.SO,onMapTypeLoaded:m.Mk})((0,$e.Z)(Et)),reducers:{map:$.Z,layers:K.Z,draw:X.Z,box:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;return t.type===q.gd?J()({},e,{status:t.status}):e},highlight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee.NF:return J()({},e,{featuresPath:t.featuresPath||"highlight.emptyFeatures"});case ee.F2:return ne(ne({},e),{},{status:t.status});case ee.fu:return ne(ne({},e),{},{highlighted:t.features.length,features:t.features,status:t.status||e.status});default:return e}},maptype:ie.Z,additionallayers:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case ae.jJ:var n=se()({id:r.id,owner:r.owner,actionType:r.actionType,options:r.options},fe()),o=ce()(t.filter((function(e){return e.id===n.id})));return o?t.map((function(e){return e.id===n.id?he(he({},o),n):he({},e)})):[].concat(function(e){if(Array.isArray(e))return ve(e)}(e=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ve(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n]);case ae.hn:return t.concat(r.layers);case ae.am:return t.map((function(e){return e.owner===r.owner?he(he({},e),{},{options:he(he({},e.options),r.options)}):e}));case ae.oy:var i=r.options,a=r.owner;return t.map((function(e,t){return e.owner===a?he(he({},e),{},{options:de()(i)&&i[e.id]||be()(i)&&i[t]||{}}):he({},e)}));case ae.yg:var u=r.id,c=r.owner;return c?t.filter((function(e){return e.owner!==c})):t.filter((function(e){return e.id!==u}));case ae.vD:return r.owner?t.filter((function(e){return e.owner!==r.owner})):[];default:return t}}},epics:bt(bt(bt({},Re),Qe.Z),(0,qe.Z)(et.Z)),containers:{Settings:function(){return{tool:a().createElement(Y,null),position:2}}}})},392411:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(604206),o=r(727418),i=r.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){var n;return n=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==a(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={drawStatus:null,drawOwner:null,drawMethod:null,options:{},features:[],tempFeatures:[],snapping:!1,snappingIsLoading:!1,snappingLayer:!1},p={edge:!0,vertex:!0,pixelTolerance:10,strategy:"bbox"};const f=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case n.hZ:return i()({},r,{drawStatus:o.status,drawOwner:o.owner,drawMethod:o.method,options:o.options,features:o.features,style:o.style});case n.kD:return i()({},r,{currentStyle:o.currentStyle});case n.DI:return i()({},r,{tempFeatures:o.features});case n.IC:return i()({},r,{tempFeatures:[]});case n.G_:return c(c({},r),{},{snapping:!r.snapping});case n.uB:return c(c({},r),{},{snappingLayer:o.snappingLayer,snappingIsLoading:!1});case n.Rh:return c(c({},r),{},{snappingIsLoading:!r.snappingIsLoading});case n.vU:return c(c({},r),{},{snapConfig:c(c(c({},c(c({},p),(null===(e=o.pluginCfg)||void 0===e?void 0:e.snapConfig)||{})),null!==(t=null==r?void 0:r.snapConfig)&&void 0!==t?t:{}),o.prop&&void 0!==o.value?l({},o.prop,o.value):{})});default:return r}}},345304:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(580416),o=r(782904),i=r(727418),a=r.n(i),u=r(423570),c=r.n(u),l=r(513218),s=r.n(l),p=r(701469),f=r.n(p),y=r(91175),d=r.n(y),m=r(747037),b=r.n(m),g=r(264721),v=r.n(g),O=r(984596),h=r.n(O),S=r(624262);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){var n;return n=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==w(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function e(t,r){return t&&f()(t)&&t.length>0?t.filter((function(e){return e.id&&e.id!==r||b()(e)&&e!==r})).map((function(t){return s()(t)?a()({},t,t.nodes?{nodes:e(t.nodes,r)}:{}):t})):t},L=function(e,t,r,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=k(e,t),a=(0,S.Mk)(i,r);if(a)i=(0,S.oH)(i,a.id,"nodes",o?[t].concat(a.nodes.slice(0)):a.nodes.concat(t));else{a=d()((0,S.IS)([(0,S.Mk)(n,t)]));var u=r.split(".").reduce((function(e,t,n){var o=r.split(".",n+1).join("."),a=(0,S.Mk)(i,o);return a?e.concat(a):e}),[]).pop();u?(a=(0,S.Mk)([a],u.id).nodes[0],i=(0,S.oH)(i,u.id,"nodes",o?[a].concat(u.nodes):u.nodes.concat(a))):i=[a].concat(i)}return i},I=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n?t.map((function(t){return b()(t)?t:t.id===n?P(P({},t),{},{nodes:[].concat(T(t.nodes),[r])}):P(P({},t),{},{nodes:e(t.nodes,r,n,o)})})):o?[r].concat(T(t)):[].concat(T(t),[r])},x=function e(t,r,n){if(t){if(b()(t.id)){var o=t.id.lastIndexOf("."),i=-1!==o?r+t.id.slice(o+(""===r?1:0)):r+(""===r?"":".")+t.id;return a()({},t,{id:i,nodes:t.nodes.map((function(t){return e(t,i,n)}))})}if(b()(t)){var u,c=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=A(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(n);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.id===t&&(l.group=r)}}catch(e){c.e(e)}finally{c.f()}return t}}return t};const M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flat:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.kM:return"RefreshLayers"===t.control?a()({},e,{refreshError:[]}):e;case n.cX:var r=(e.flat||[]).map((function(e){return e.id===t.layerId?a()({},e,{loading:!0}):e}));return a()({},e,{flat:r});case n.x9:var i=(e.flat||[]).map((function(e){return e.id===t.layerId?a()({},e,{loading:!1,previousLoadingError:e.loadingError,loadingError:!!t.error&&"Error"}):e}));return a()({},e,{flat:i});case n.vs:var u=t.tilesCount===t.tilesErrorCount,l=(e.flat||[]).map((function(e){return e.id===t.layerId?a()({},e,{previousLoadingError:e.loadingError,loadingError:u?"Error":"Warning"}):e}));return a()({},e,{flat:l});case n.l$:return a()({},e,{refreshing:t.layers,refreshError:[]});case n.CQ:var s=(e.refreshing||[]).filter((function(e){return 0===t.layers.filter((function(t){return t.layer===e.id})).length})),p=t.layers.map((function(e){return{layer:e.fullLayer.title,error:t.error}}));return a()({},e,{refreshing:s,refreshError:[].concat(T(e.refreshError||[]),T(p))});case n.k3:var f=(e.refreshing||[]).filter((function(e){return 0===t.layers.filter((function(t){return t.layer===e.id})).length}));return a()({},e,{refreshing:f});case n.Zz:case n.yS:var y=e.flat||[],m=y.reduce((function(e,r){return e||r.id===t.layer&&"background"===r.group}),!1),b=y.map((function(e){return v()(h()(t.layer),e.id)?a()({},e,t.newProperties,t.params?{params:a()({},e.params,t.params)}:{}):"background"===e.group&&m&&t.newProperties&&t.newProperties.visibility?a()({},e,{visibility:!1}):a()({},e)}));return a()({},e,{flat:b});case n.ms:var g=e.flat.map((function(e){var r=e.group||"Default";return r===t.group||0===r.indexOf("".concat(t.group,"."))?a()({},e,t.newProperties):a()({},e)}));return a()({},e,{flat:g});case n.ih:var O="layers"===t.nodeType?"flat":"groups",w=e[O]||[],j=(0,S.oH)(w,t.node,"expanded",t.status);return a()({},e,E({},O,j));case n.OX:var A=(0,S.Mk)(e.groups||[],t.node),D=A&&A.nodes||"root"===t.node&&e.groups||null;if(D){var M=t.order.map((function(e){return D[e]})),C="root"===t.node?M:(0,S.oH)(e.groups,t.node,"nodes",M),_=t.sortLayers?t.sortLayers(C,e.flat):e.flat;return a()({},e,{groups:C,flat:_})}return e;case n.K$:var N="groups"===t.nodeType?"group":"id";if("group"===N){var R=e.groups?[].concat(e.groups):[],F=(0,S.oH)(R,t.node,t.options);return a()({},e,{groups:F})}var Z=e.flat||[],H=!t.options.hasOwnProperty("group"),z=Z.map((function(e){return e[N]===t.node||0===e[N].indexOf(t.node+".")?(e.group===(t.options.group||"Default")&&(H=!0),a()({},e,t.options)):a()({},e)})),G=d()(Z.filter((function(e){return e[N]===t.node||0===e[N].indexOf(t.node+".")})));if(!H&&G){var U=t.options.group||"Default",W=L(e.groups,t.node,U,z),B=S.lD?(0,S.lD)(W,z):z;return a()({},e,{flat:B,groups:W})}return a()({},e,{flat:z});case n.k7:var Y=(0,S.Mk)(e.groups||[],t.node),$=(0,S.Mk)(e.flat,t.node);if(Y&&t.index>=0&&"root"!==Y.id&&"Default"!==Y.id&&(!$||"root"!==t.groupId)){var K=t.groupId||"Default",X=$?$.group||"Default":function(){var e=Y.id.split(".");return e[e.length-2]||"root"}();if(K===X){var V="root"===X?{nodes:e.groups}:(0,S.Mk)(e.groups,X),J=(V&&V.nodes||[]).slice(),q=J.findIndex((function(e){return(e.id||e)===(Y.id||Y)}));if(-1!==q&&q!==t.index){for(var Q=Math.abs(t.index-q),ee=q<t.index?1:-1,te=q,re=0;re<Q;++re,te+=ee){var ne=J[te];J[te]=J[te+ee],J[te+ee]=ne}var oe="root"===X?J:(0,S.oH)(e.groups,t.groupId,"nodes",J);return a()({},e,{flat:(0,S.lD)(oe,e.flat),groups:oe})}}else{var ie=k(e.groups,Y.id||Y),ae="root"===K?{nodes:ie}:(0,S.Mk)(ie,t.groupId);if(ae){var ue=e.flat.map((function(e){return a()({},e)})),ce=x(Y,"root"===K?"":K,ue),le=ae.nodes.slice();le.splice(t.index,0,ce);var se="root"===K?le:(0,S.oH)(ie.slice(),ae.id,"nodes",le);return a()({},e,{flat:(0,S.lD)(se,ue),groups:se})}}}return e;case n.sb:if("groups"===t.nodeType){var pe=k(e.groups,t.node),fe=e.flat.filter((function(e){return!e.group||e.group!==t.node&&0!==e.group.indexOf(t.node+".")}));return{flat:fe,groups:pe}}if("layers"===t.nodeType){var ye=t.removeEmpty?(0,S.AZ)(k(e.groups,t.node)):k(e.groups,t.node),de=e.flat.filter((function(e){return e.id!==t.node}));return a()({},e,{flat:de,groups:ye})}return e;case n.oE:var me=(0,S.Cx)(t.layer),be=(e.flat||[]).concat(),ge=(e.groups||[]).concat(),ve=me.id?me:a()({},me,{id:(0,S.R8)(me)});be.push(ve);var Oe=ve.group||"Default";"background"!==Oe&&(ge=L(ge,ve.id,Oe,be,t.foreground));var he=S.lD?(0,S.lD)(ge,be):be;return a()({},e,{flat:he,groups:ge});case n.qv:var Se=k(e.groups,t.layerId),we=e.flat.filter((function(e){return e.id!==t.layerId}));return a()({},e,{flat:we,groups:Se});case n.Po:var je=c()(),Pe=I(e.groups,P({id:t.parent?t.parent+"."+je:je,title:t.group,name:je,nodes:[],expanded:!0},t.options),t.parent,t.asFirst);return a()({},e,{groups:Pe});case n.cI:var Ee=a()({},e.settings,{expanded:!0,node:t.node,nodeType:t.nodeType,options:t.options});return a()({},e,{settings:Ee,editLayerName:!1,layerNameIsBeingChecked:!1,layerNameChangeError:!1});case n.g6:var Te=a()({},e.settings,{expanded:!1,node:null,nodeType:null,options:{}});return a()({},e,{settings:Te,editLayerName:!1,layerNameIsBeingChecked:!1,layerNameChangeError:!1});case n.I4:var Ae=a()({},e.settings&&e.settings.options,t.options),De=a()({},e.settings,{options:Ae});return a()({},e,{settings:De});case n.sH:return a()({},e,{flat:[],groups:[],selected:[]});case n.c7:var ke=e.selected?[].concat(e.selected):[];if(t.id&&"group"===t.nodeType){var Le=[].concat(e.groups),Ie=(0,S.Mk)(Le,t.id),xe=(0,S.ar)(Ie);t.ctrlKey&&Ie?0===ke.filter((function(e){return e===t.id})).length?ke=ke.concat(xe,[t.id]):(ke=ke.filter((function(e){return e!==t.id})),xe.forEach((function(e){ke=ke.filter((function(t){return t!==e}))}))):!t.ctrlKey&&Ie&&(ke=0===ke.filter((function(e){return e===t.id})).length?[].concat(xe,[t.id]):[])}else t.id&&"layer"===t.nodeType?t.ctrlKey?0===ke.filter((function(e){return e===t.id})).length?ke.push(t.id):ke=ke.filter((function(e){return e!==t.id})):ke=0===ke.filter((function(e){return e===t.id})).length||ke.length>1?[t.id]:[]:ke=[];return a()({},e,{selected:ke,settings:{expanded:!1,node:null,nodeType:null,options:{}},layerMetadata:{expanded:!1,metadataRecord:{},maskLoading:!1}});case n._7:return a()({},e,{filter:t.text||""});case n.eF:var Me=a()({},e.layerMetadata,{metadataRecord:t.metadataRecord,expanded:!0,maskLoading:t.maskLoading});return a()({},e,{layerMetadata:Me});case n.O6:var Ce=a()({},e.layerMetadata,{metadataRecord:{},expanded:!1});return a()({},e,{layerMetadata:Ce});default:return e}}},601321:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(801550),o=r(727418),i=r.n(o),a=r(552259),u=r(916651);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var l=["type"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){var n;return n=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==c(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const d=function(){var e,t,r,o,c,s,d,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{eventListeners:{}},b=arguments.length>1?arguments[1]:void 0;switch(b.type){case n.pP:b.type;var g=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(b,l);return g.zoom=isNaN(g.zoom)?1:g.zoom,i()({},m,g);case n.N7:return i()({},m,{mousePointer:b.pointer});case n.mq:return i()({},m,{zoom:b.zoom,mapStateSource:b.mapStateSource});case n.JJ:return i()({},m,{limits:{restrictedExtent:b.restrictedExtent,crs:b.crs,minZoom:b.minZoom}});case n.Li:return i()({},m,{projection:b.crs});case n.OW:if(b.scales){var v=m&&m.mapOptions&&m.mapOptions.view&&m.mapOptions.view.DPI||null,O=a.ZP.getResolutionsForScales(b.scales,m&&m.projection||"EPSG:4326",v);return i()({},m,{mapOptions:i()({},m&&m.mapOptions,{view:i()({},m&&m.mapOptions&&m.mapOptions.view,{resolutions:O,scales:b.scales})})})}if(m&&m.mapOptions&&m.mapOptions.view&&m.mapOptions.view&&m.mapOptions.view.resolutions){var h=i()({},m);return h.mapOptions=i()({},h.mapOptions),h.mapOptions.view=i()({},h.mapOptions.view),delete h.mapOptions.view.resolutions,0===Object.keys(h.mapOptions.view).length&&delete h.mapOptions.view,0===Object.keys(h.mapOptions).length&&delete h.mapOptions,h}return m;case n.nZ:return i()({},m,{resolutions:b.resolutions});case n.IL:return i()({},m,{center:u.default.reproject(b.pos,b.crs,"EPSG:4326"),zoom:b.zoom,mapStateSource:null});case n.uv:var S=u.default.reproject(b.center,b.center.crs||"EPSG:4326","EPSG:4326");return i()({},m,{center:S,mapStateSource:null});case n.ZO:return i()({},m,{mapStateSource:b.mapStateSource,style:b.style,resize:m.resize?m.resize+1:1});case n.Eu:return i()({},m,{resize:m.resize?m.resize+1:1});case n.Um:var w=i()({},m.bbox,{rotation:b.rotation});return i()({},m,{bbox:w,mapStateSource:b.mapStateSource});case n.Ls:return i()({},m,{version:b.version});case n.YD:return i()({},m,{eventListeners:i()({},m.eventListeners||{},f({},b.eventName,[].concat((d=m.eventListeners&&m.eventListeners[b.eventName]||[],function(e){if(Array.isArray(e))return y(e)}(d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[b.toolName])))});case n.GI:var j=m;if(null!=m&&m.eventListeners){var P=(m.eventListeners&&m.eventListeners[b.eventName]||[]).filter((function(e){return e!==b.toolName}))||[];j=i()({},m,{eventListeners:i()({},m.eventListeners,f({},b.eventName,P))})}return j;case n.eh:if(b&&b.orientation&&(b.orientation.center||b.orientation.marker)){var E,T,A,D,k=(null==b||null===(E=b.orientation)||void 0===E||null===(T=E.center)||void 0===T?void 0:T.split(","))||(null==b||null===(A=b.orientation)||void 0===A||null===(D=A.marker)||void 0===D?void 0:D.split(",")),L=k&&k[0],I=k&&k[1],x=b.orientation.zoom,M=b.orientation.heading,C=b.orientation.pitch,_=b.orientation.roll;return i()({},m,{orientate:{x:L,y:I,z:x,heading:M,pitch:C,roll:_}})}return null;case n.$j:var N=parseFloat(null==b||null===(e=b.data)||void 0===e?void 0:e.heading),R=parseFloat(null==b||null===(t=b.data)||void 0===t?void 0:t.pitch),F=parseFloat(null==b||null===(r=b.data)||void 0===r?void 0:r.roll);return{zoom:parseFloat(null==b||null===(o=b.data)||void 0===o?void 0:o.zoom),center:{x:parseFloat(null==b||null===(c=b.data)||void 0===c?void 0:c.coordinate[0]),y:parseFloat(null==b||null===(s=b.data)||void 0===s?void 0:s.coordinate[1])},viewerOptions:{orientation:{heading:N,pitch:R,roll:F}}};case n.bJ:return p(p({},m),{},{mapOptions:p(p({},m.mapOptions),b.configUpdate)});default:return m}}},556874:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(213652),o=r(801550),i=r(881808),a=r(898631);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){var n;return n=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==u(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mapType:(0,a._1)()},u=arguments.length>1?arguments[1]:void 0;switch(u.type){case i.ok:var c=null==u||null===(e=u.config)||void 0===e||null===(t=e.map)||void 0===t?void 0:t.visualizationMode;return l(l({},r),{},{mapType:(0,a._1)(c)});case n.Wz:return l(l({},r),{},{mapType:u.mapType});case n.UA:return l(l({},r),{},{mapType:(0,a._1)(u.visualizationMode)});case o.e$:return l(l({},r),{},{loaded:l(l({},r.loaded),{},s({},u.mapType,u.loaded))});default:return r}}},443143:(e,t,r)=>{"use strict";r.d(t,{qH:()=>s,qj:()=>p,qq:()=>f,TM:()=>y});var n,o=r(717621),i=r.n(o),a=r(14841),u=r.n(a),c=r(264721),l=r.n(c),s=function(e,t,r,o){var i=e;isNaN(parseFloat(e))&&(i=n.hexToHsv(e)[0]);var a=.5/(r-1),u=t/(r-1),c=[];1===r&&(a=.5,u=t/2);for(var l=0;l<r;l++){var s=i+l*u-t/2,p=a*l+.3,f=p;o&&(s=o.h||s,p=o.s||p,f=o.v||f),c.push(n.hsvToHex(s,p,f,l))}return c},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},f=function(e,t,r){var n=i()(e);return e&&n.setAlpha(u()(void 0!==t?t:n.getAlpha())).toRgbString()||r},y=function e(t){var r=Math.round,o=Math.random,i=[r(255*o()),r(255*o()),r(255*o())],a=n.rgbToHex(i);if(t)for(;l()(t,a)||"#000000"===a||"#FFFFFF"===a;)e(t);return a};n={decToHex:function(e){var t="0123456789ABCDEF",r=parseInt(e,10);return r=isNaN(r)?0:r,t.charAt(((r=r>255||r<0?0:r)-r%16)/16)+t.charAt(r%16)},rgbToHex:function(e,t,r){return e instanceof Array?n.rgbToHex(e[0],e[1],e[2]):"#"+n.decToHex(e)+n.decToHex(t)+n.decToHex(r)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,r){if(e instanceof Array)return n.rgbToHsv(e[0],e[1],e[2]);var o,i,a,u,c,l=e/255,s=t/255,p=r/255;switch(o=Math.min(Math.min(l,s),p),a=(i=Math.max(Math.max(l,s),p))-o,i){case o:u=0;break;case l:u=60*(s-p)/a,s<p&&(u+=360);break;case s:u=60*(p-l)/a+120;break;case p:u=60*(l-s)/a+240}return c=0===i?0:1-o/i,[Math.round(u),c,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),r=[],o=function e(t,r,o){var i=e(t,r,o);return n.rgbToHex(i)},i=0;i<e;i++)r.push(o(t*i,.57,.63));return r},sameToneRangeColors:s,hsvToRgb:function(e,t,r){if(e instanceof Array)return n.hsvToRgb(e[0],e[1],e[2]);var o,i,a,u=Math.floor(e/60%6),c=e/60-u,l=r*(1-t),s=r*(1-c*t),p=r*(1-(1-c)*t);switch(u){case 0:o=r,i=p,a=l;break;case 1:o=s,i=r,a=l;break;case 2:o=l,i=r,a=p;break;case 3:o=l,i=s,a=r;break;case 4:o=p,i=l,a=r;break;case 5:o=r,i=l,a=s}return[n.realToDec(o),n.realToDec(i),n.realToDec(a)]},hsvToHex:function(e,t,r){var o=n.hsvToRgb(e,t,r);return n.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var r=n.hexToRgb(t);return n.rgbToHsv(r)}return null},hexToRgb:function(e){var t,r,n,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),r=o.charAt(2)+o.charAt(3),n=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},colorToHexStr:p,colorToRgbaStr:f,generateRandomHexColor:y}},611847:(e,t,r)=>{"use strict";r.d(t,{ij:()=>g,w0:()=>v,vl:()=>O,K2:()=>h,Nw:()=>S});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),u=r(747037),c=r.n(u),l=r(618446),s=r.n(l),p=r(189734),f=r.n(p),y=r(313311),d=r.n(y),m=r(964210);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var o,i,a=(i=6,function(e){if(Array.isArray(e))return e}(o=r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(o,i)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[1],c=a[3],l=a[4],s=a[5],p=0===s.indexOf("/")?s.split("/")[1]:"";return{protocol:u,domain:c,port:l,rootPath:s,applicationRootPath:p}},v=function(e,t){var r=a()(e)?e[0]:e,n=a()(t)?t[0]:t;if(r===n)return!0;if(!r||!n)return!1;if(!c()(r)||!c()(n))return!1;var i=o().parse(r),u=o().parse(n),l=g(r),p=g(n),y=l.protocol===p.protocol,d=l.domain===p.domain,m=l.port===p.port,b=i.pathname===u.pathname,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return s()(f()(r),f()(n))}(i.query,u.query);return y&&m&&d&&b&&v},O=function(e){return m.Qc(e)},h=function(e){return new RegExp(arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/).test(e)},S=function(e,t){var r=new RegExp(arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/).test(e);if(!r)return!1;if(r&&!t)return!0;if(r&&t){var n=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return d()(n,e)})).length}return!1}},512817:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(923645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".msgapi .mapErrorMessage {\n    font-size: 16px;\n    color: red;\n}\n",""]);const i=o}}]);