"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4730],{129519(e,t,n){n.d(t,{A:()=>i});var o=n(811668),r=n(8571);const i=(0,o.connect)(function(e){return{locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]}})(r.A)},145641(e,t,n){n.d(t,{A:()=>O});var o=n(192779),r=n.n(o),i=n(605556),a=n.n(i),l=n(273517),u=n.n(l),s=n(8117),c=n(628017);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,v(o.key),o)}}function b(e,t,n){return t=y(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return h(e=b(this,t,[].concat(o)),"onMouseOver",function(){var t=r()(e.props.helpText)?e.props.helpText:(0,c.kA)(e.context.messages,e.props.helpText.props.msgId);e.props.changeHelpText(t),e.props.changeHelpwinVisibility(!0)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return u().createElement(s.Ex,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}])&&f(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(u().Component);h(g,"propTypes",{id:a().string,helpText:a().oneOfType([a().string,a().element]),isVisible:a().bool,changeHelpText:a().func,changeHelpwinVisibility:a().func,className:a().string}),h(g,"contextTypes",{messages:a().object}),h(g,"defaultProps",{helpText:"",isVisible:!1});const O=g},683589(e,t,n){n.d(t,{A:()=>i});var o=n(576314),r=n.n(o)()(function(e){return e[1]});r.push([e.id,".msgapi .mapToolbar .mapstore-tb-helpbadge {\n    display: block;\n    background-color: #777;\n    position: absolute;\n    z-index: 1000;\n    top : -10px;\n    left: -10px;\n}\n\n\n.msgapi #helpbadge-zoomToMaxExtent {\n    display: inline;\n    position: absolute;\n    left: 34px;\n    top: 72px;\n    z-index: 100000\n}\n\n.msgapi #helpbadge-scaleBox {\n    display: inline;\n    position: absolute;\n    left: 116px;\n    bottom: 48px;\n    z-index: 100000\n}\n\n.msgapi #helpbadge-seachBar {\n    display: inline;\n    position: absolute;\n    left: 46px;\n    top: 10px;\n    z-index: 100000\n}\n\n\n.msgapi .btn .badge {\n    position: absolute;\n    top: -10px;\n    left: -10px;\n}\n\n.msgapi .themed .btn .badge {\n    top: -35px;\n    left: -50px;\n}\n\n.msgapi .badge {\n    cursor: pointer;\n}\n\n.msgapi #helpbadge-scaleBox {\n    left: 0 !important;\n}\n\n.msgapi #mapstore-navbar #helpbadge-search-help {\n    position: absolute;\n    left: -10px;\n    bottom: -8px;\n    z-index: 1;\n}\n",""]);const i=r},690465(e,t,n){n.d(t,{A:()=>i});var o=n(576314),r=n.n(o)()(function(e){return e[1]});r.push([e.id,".msgapi #mapstore-scalebox {\n    /*z-index: 10;\n    bottom: 6px;\n    left: -2px;\n    position: absolute;\n    margin: 8px;\n    width: 148px;*/\n}\n\n.msgapi #mapstore-scalebox-container {\n    /*z-index: 10;\n    bottom: -16px;\n    right: 55px;\n    left: auto;\n    position: absolute;\n    margin: 8px;\n    width: 148px;*/\n}\n",""]);const i=r},754748(e,t,n){n.r(t),n.d(t,{default:()=>U});var o=n(273517),r=n.n(o),i=n(393149),a=n(801081),l=n(131127),u=n(273494),s=n(811668),c=n(865865),p=n(605556),f=n.n(p),b=n(145641),m=n(785072),y=n.n(m),d=n(683589);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,S(o.key),o)}}function g(e,t,n){return t=w(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(O=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function S(e){var t=function(e){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}y()(d.A,{insert:"head",singleton:!1}),d.A.locals;var j,P,E,T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r().createElement("div",{id:this.props.id},r().createElement(b.A,{id:"helpbadge-"+(this.props.children.key||this.props.id),isVisible:this.props.helpEnabled,helpText:this.props.helpText,changeHelpText:this.props.changeHelpText,changeHelpwinVisibility:this.props.changeHelpwinVisibility}),this.props.children)}}])&&v(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Component);j=T,P="propTypes",E={id:f().string,helpText:f().oneOfType([f().string,f().element]),helpEnabled:f().bool,changeHelpText:f().func,changeHelpwinVisibility:f().func},(P=S(P))in j?Object.defineProperty(j,P,{value:E,enumerable:!0,configurable:!0,writable:!0}):j[P]=E;const _=T,k=(0,s.connect)(function(e){return{helpEnabled:e.controls&&e.controls.help&&e.controls.help.enabled}},{changeHelpText:c.Tn,changeHelpwinVisibility:c.cb})(_);var C=n(129519),z=n(959024),A=n(6683),L=n(690465);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},B.apply(null,arguments)}function N(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,H(o.key),o)}}function H(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}function M(e,t,n){return t=V(t),function(e,t){if(t&&("object"==R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,I()?Reflect.construct(t,n||[],V(e).constructor):t.apply(e,n))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(I=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}y()(L.A,{insert:"head",singleton:!1}),L.A.locals;var F=(0,a.Mz)([l.mg,l.NG],function(e,t){return{minZoom:t,currentZoomLvl:e&&e.zoom,scales:(0,A.kp)(e&&e.projection||"EPSG:3857",e&&e.mapOptions&&e.mapOptions.view&&e.mapOptions.view.DPI||null)}}),D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(t,e),function(e,t){return t&&N(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){return r().createElement(k,{id:"mapstore-scalebox-container",key:"scalebox-help",helpText:r().createElement(C.A,{msgId:"helptexts.scaleBox"})},r().createElement(z.A,B({key:"scaleBox",label:r().createElement(C.A,{msgId:"mapScale"})},this.props)))}}])}(r().Component),G=(0,i.Ng)(F,{onChange:u.k9})(D);const U={ScaleBoxPlugin:Object.assign(G,{disablePluginIf:"{state('mapType') === 'cesium'}"},{MapFooter:{name:"scale",position:2,target:"right-footer",priority:1}}),reducers:{}}},865865(e,t,n){n.d(t,{HN:()=>r,L4:()=>o,Nx:()=>i,Tn:()=>a,cb:()=>l});var o="CHANGE_HELP_STATE",r="CHANGE_HELP_TEXT",i="CHANGE_HELPWIN_VIZ";function a(e){return{type:r,helpText:e}}function l(e){return{type:i,helpwinViz:e}}},959024(e,t,n){n.d(t,{A:()=>E});var o=n(809136),r=n.n(o),i=n(605556),a=n.n(i),l=n(273517),u=n.n(l),s=n(8117),c=n(192016),p=n(6683),f=n(551783),b=n(8571);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,S(o.key),o)}}function v(e,t,n){return t=O(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function x(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}var j=(0,f.A)(["placeholder","noResultsText"])(c.wM),P=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(r=v(this,t,[e]),"onComboChange",function(e){var t=parseInt(e.nativeEvent.target.value,10);r.props.onChange(t,r.props.scales[t])}),x(r,"getOptions",function(){return r.state.scales.map(function(e){return u().createElement("option",{value:e.zoom,key:e.zoom},r.props.template(e.value,e.zoom))}).filter(function(e,t){return t>=r.props.minZoom})}),x(r,"handleUpdateScales",function(e){r.setState(function(t){return{scales:r.updateScales(t.scales,e)}})}),r.state={scales:null!==(n=r.props.disableScaleLockingParms)&&void 0!==n&&null!==(n=n.resolutions)&&void 0!==n&&n.length?r.getScalesFromResolutions(null===(o=r.props.disableScaleLockingParms)||void 0===o?void 0:o.resolutions):r.props.scales.map(function(e,t){return{value:e,zoom:t}})},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(o=[{key:"shouldComponentUpdate",value:function(e){return!r()(e,this.props)}},{key:"updateScales",value:function(e,t){var n=e.map(function(e){return e.value});return t&&-1===n.indexOf(t.value)?[{value:t.value,zoom:t.zoom}].concat(y(e)).sort(function(e,t){return e.value>t.value?-1:1}):e}},{key:"getResolutionByScale",value:function(e,t){var n=this.props.disableScaleLockingParms,o=this.props.scales.map(function(e){return e*n.ratio}),r=t[0],i=o[0];return(e*(null==n?void 0:n.ratio)||1)*r/i}},{key:"getZoomLevelByResolution",value:function(e){var t,n,o,r=(null===(t=this.props.disableScaleLockingParms)||void 0===t?void 0:t.resolutions)||(0,p._7)(null===(n=this.props.disableScaleLockingParms)||void 0===n?void 0:n.projection),i=null!==(o=(0,p.zg)(e,r))&&void 0!==o?o:0;return parseFloat(i.toFixed(2))}},{key:"getScalesFromResolutions",value:function(e){var t=this,n=this.props.disableScaleLockingParms,o=this.props.scales.map(function(e){return e*n.ratio}).map(function(e,t){return{value:e,zoom:t}}),r=e[0],i=o[0].value;return e.map(function(e){return e*i/r}).map(function(e){return e/n.ratio}).map(function(n,o){return{value:n,zoom:t.getZoomLevelByResolution(e[o])}})}},{key:"handleChangeEditableScaleList",value:function(e){var t,n,o=this.props.disableScaleLockingParms,r=(null==e?void 0:e.value)&&parseFloat(e.value),i=(null==e?void 0:e.scale)&&parseFloat(e.scale)||r,a=(null==e?void 0:e.label)&&parseFloat(e.label),l=(null==e?void 0:e.zoom)&&parseFloat(e.zoom),u=(null==o?void 0:o.resolutions)||(0,p._7)(null===(t=this.props.disableScaleLockingParms)||void 0===t?void 0:t.projection),s=y(u),c=this.getResolutionByScale(i,u);"number"==typeof c&&c>0&&(new Set(u).has(c)||(s.push(c),s.sort(function(e,t){return t-e})));var f=null!==(n=(0,p.zg)(c,s))&&void 0!==n?n:0,b=parseFloat(f.toFixed(2));if(i===a&&i&&!l)return this.handleUpdateScales({value:i,zoom:b}),void this.props.onChange(b,i,c,s);var m=isNaN(i)?void 0:i,d=isNaN(l)?void 0:l,h=this.state.scales.find(function(e){return e.value===m})||this.props.scales[this.props.currentZoomLvl];this.props.onChange(d,null==h?void 0:h.value,c,s)}},{key:"render",value:function(){var e=this,t=null,n=Math.round(this.props.currentZoomLvl),o=this.props.disableScaleLockingParms;if(this.props.readOnly)t=u().createElement("label",null,this.props.template(this.props.scales[n],n));else if(this.props.useRawInput)t=u().createElement("select",{label:this.props.label,onChange:this.onComboChange,bsSize:"small",value:n||""},this.getOptions());else if(null!=o&&o.editScale){var r=this.state.scales;n=null!=o&&o.resolution?this.getZoomLevelByResolution(null==o?void 0:o.resolution):Math.round(this.props.currentZoomLvl)>r.length-1?r.length-1:Math.round(this.props.currentZoomLvl),t=u().createElement(s.lV,{inline:!0},u().createElement(s.gE,{bsSize:"small"},u().createElement(j,{clearable:!1,id:"scaleBox",className:"scale-box-create-select",value:n,options:r.map(function(t){return{scale:t.value,zoom:t.zoom,value:t.zoom,label:e.props.template(t.value,t.zoom)}}),promptTextCreator:function(e){return u().createElement(b.A,{msgId:"print.createScaleOption",msgParams:{label:e}})},isValidNewOption:function(t){if(t.label){var n=parseFloat(t.label);return!isNaN(n)&&n>Math.min.apply(Math,y(e.props.scales||[]))&&n<Math.max.apply(Math,y(e.props.scales||[]))}return!1},onChange:function(t){return e.handleChangeEditableScaleList(t)}})))}else t=u().createElement(s.lV,{inline:!0},u().createElement(s.gE,{bsSize:"small"},u().createElement(s.mq,{htmlFor:"scaleBox"},this.props.label),u().createElement(s.MJ,{id:"scaleBox",componentClass:"select",onChange:this.onComboChange,value:n||""},this.getOptions())));return u().createElement("div",{id:this.props.id,style:this.props.style},t)}}])&&h(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(u().Component);x(P,"propTypes",{id:a().string,style:a().object,scales:a().array,currentZoomLvl:a().number,minZoom:a().number,onChange:a().func,readOnly:a().bool,label:a().oneOfType([a().func,a().string,a().object]),template:a().func,useRawInput:a().bool,disableScaleLockingParms:a().object}),x(P,"defaultProps",{id:"mapstore-scalebox",scales:(0,p.ev)(0,28),currentZoomLvl:0,minZoom:0,scale:0,onChange:function(){},readOnly:!1,template:function(e){return e<1?Math.round(1/e)+" : 1":"1 : "+Math.round(e)},useRawInput:!1,disableScaleLockingParms:{}});const E=P}}]);