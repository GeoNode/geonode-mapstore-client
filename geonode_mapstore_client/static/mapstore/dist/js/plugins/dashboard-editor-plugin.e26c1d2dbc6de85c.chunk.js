"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[12686,37369,84132],{812366:(e,t,r)=>{r.d(t,{$j:()=>W,A2:()=>u,A_:()=>X,BQ:()=>m,Cu:()=>A,Cx:()=>p,DK:()=>M,Df:()=>N,Ej:()=>B,GN:()=>j,Gt:()=>q,HN:()=>o,Lg:()=>ee,M4:()=>c,MX:()=>l,Ms:()=>Z,Q$:()=>g,Rr:()=>d,S$:()=>L,Tg:()=>E,Tl:()=>P,Tv:()=>k,VK:()=>oe,W5:()=>O,WE:()=>F,Wp:()=>x,Yq:()=>V,Zv:()=>Q,_z:()=>C,bC:()=>z,bV:()=>D,cc:()=>K,cn:()=>H,dk:()=>ie,fJ:()=>S,fK:()=>y,g5:()=>_,gt:()=>G,jN:()=>v,kl:()=>f,m7:()=>re,nq:()=>T,nx:()=>te,ow:()=>s,p7:()=>h,pK:()=>ae,r:()=>J,s9:()=>b,t7:()=>a,tW:()=>i,ti:()=>I,uk:()=>w,vt:()=>ne,wC:()=>U,xk:()=>R,yd:()=>$});var n=r(737369),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",u="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",l="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",f="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",p="SHOW_REVERSE_GEOCODE",y="HIDE_REVERSE_GEOCODE",b="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",m="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",h="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",O="TOGGLE_MAPINFO_STATE",E="UPDATE_CENTER_TO_MARKER",S="IDENTIFY:CHANGE_PAGE",w="IDENTIFY:CLOSE_IDENTIFY",P="IDENTIFY:CHANGE_FORMAT",j="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",T="IDENTIFY:EDIT_LAYER_FEATURES",_="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",I="IDENTIFY:SET_MAP_TRIGGER",A="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",D="IDENTIFY:SET_SHOW_IN_MAP_POPUP",N="IDENTIFY:IDENTIFY_IS_MOUNTED",M="IDENTIFY:INIT_PLUGIN";function k(e,t,r,n,i){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:i}}function R(e,t,r,n){return{type:i,error:t,reqId:e,requestParams:r,layerMetadata:n}}function F(){return{type:b}}function C(){return{type:v}}function U(e,t){return{type:c,reqId:e,request:t}}function L(e){return{type:u,enabled:e}}function G(){return{type:l}}function x(e){return{type:s,infoFormat:e}}function H(){return{type:f}}function z(){return{type:d}}function Y(e){return{type:p,reverseGeocodeData:e.data}}function W(e){return function(t){n.A.reverseGeocode(e).then((function(e){t(Y(e))})).catch((function(e){t(Y(e))}))}}function q(){return{type:y}}function K(){return{type:O}}function V(e){return{type:E,status:e}}function Z(e,t){return{type:m,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function B(e){return{type:g,point:e}}function J(e){return{type:h,enabled:e}}function $(e){return{type:S,index:e}}var Q=function(){return{type:w}},X=function(e){return{type:P,format:e}},ee=function(e){return{type:j,showCoordinateEditor:e}},te=function(e){return{type:T,layer:e}},re=function(e){return{type:_,query:e}},ne=function(e){return{type:I,trigger:e}},oe=function(e){return{type:D,value:e}},ie=function(e){return{type:N,isMounted:e}},ae=function(e){return{type:M,cfg:e}}},737369:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(995531),o=r(23412),i=r.n(o),a=r(45228),u=r.n(a),c={format:"json",bounded:0,polygon_geojson:1,priority:5};const l={geocode:function(e,t){var r=u()({q:e},c,t||{}),o=i().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return n.A.get(o)},reverseGeocode:function(e,t){var r=u()({lat:e.lat,lon:e.lng},t||{},c),o=i().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return n.A.get(o)}}},625885:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(273517),o=r.n(n),i=r(32485),a=r.n(i);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=function(e){var t,r,n,i=e.id,u=e.children,c=e.dockStyle,f=e.className,d=e.style,p=void 0===d?{}:d,y={width:"calc(100% - ".concat((null!==(t=null==c?void 0:c.right)&&void 0!==t?t:0)+(null!==(r=null==c?void 0:c.left)&&void 0!==r?r:0),"px)"),transform:"translateX(-".concat(null!==(n=null==c?void 0:c.right)&&void 0!==n?n:0,"px)"),pointerEvents:"none"};return o().createElement("div",{id:i,className:a()(l(l({},f?s({},f,!0):{}),{},{"dock-container":!0})),style:l(l({},y),p)},u)};var d=r(993456),p=r(278757),y=["children","containerClassName","containerId","containerStyle","dock","siblings","size"];function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(null,arguments)}const v=function(e){var t=e.children,r=e.containerClassName,n=e.containerId,i=e.containerStyle,a=e.dock,u=void 0===a||a,c=e.siblings,l=e.size,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,y);return o().createElement(f,{dockStyle:i,id:n,className:r},o().createElement(d.A,null,(function(e){var r=e.width;return o().createElement(o().Fragment,null,o().createElement(p.A,b({dock:u,size:l/r>1?r:l},s),t),c)})))}},635666:(e,t,r)=>{r.d(t,{Ay:()=>G});var n=r(45388),o=r.n(n),i=r(473916),a=r.n(i),u=r(223805),c=r.n(u),l=r(395950),s=r.n(l),f=r(269843),d=r.n(f),p=r(71665),y=r(985564),b=r(415392),v=r(654456),m=r(883832),g=r(223062),h=r(754364),O=r(589769),E=r(501719),S=r(737704),w=r(24812),P=r(750929),j=r(140531),T=r(233999),_=r(980971),I=r(549112),A=["data"],D=["status","statusText","data","message"];function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function M(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function k(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return F(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e){if("object"!=N(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const G={openDashboardWidgetEditor:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(p.dy,p.zx).filter((function(){return(0,O.aH)(r())})).switchMap((function(){return o().Observable.of((0,y.Df)(!0))}))},closeDashboardWidgetEditorOnFinish:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(p.i).filter((function(){return(0,O.aH)(r())})).switchMap((function(){return o().Observable.of((0,y.Df)(!1))}))},initDashboardEditorOnNew:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(p.dy).filter((function(){return(0,O.aH)(r())})).switchMap((function(e){return o().Observable.of((0,p.l6)(U(U({legend:!1,mapSync:!1,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))}))},closeDashboardEditorOnExit:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(_.LK).filter((function(){return(0,O.aH)(r())})).filter((function(){return(0,O.Hd)(r())})).switchMap((function(){return o().Observable.of((0,y.Df)(!1))}))},handleDashboardWidgetsFilterPanel:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(p.aE).filter((function(){return(0,O.aH)(r())})).switchMap((function(){return o().Observable.of(v.Mb.apply(void 0,k((t=r(),n=(0,S.oc)(t),[n.search&&n.search.url,n.name]))),(0,g.Bb)((0,S.tp)(r())),(0,b.fN)("queryPanel","enabled",!0)).concat(o().Observable.race(e.ofType(g.TK).take(1),e.ofType(b.x7).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).take(1)).switchMap((function(e){return(e.filterObj?o().Observable.of((0,p.zd)((0,S.AP)(r()),e.filterObj)):o().Observable.empty()).merge(o().Observable.of((0,b.fN)("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(_.LK,p.zx).merge(e.ofType(b.x7).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"widgetBuilder"===t&&0==!r})))).concat(o().Observable.of((0,b.fN)("queryPanel","enabled",!1)));var t,n}))},filterAnonymousUsersForDashboard:function(e,t){return e.ofType(h.YP,h.T_).filter((function(){return"/dashboard"===(0,w.o)(t.getState())})).switchMap((function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),(0,E.M3)(t.getState())?o().Observable.empty():o().Observable.of((0,y.Vh)({status:403}))}))},loadDashboardStream:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(y.OD).switchMap((function(e){var t=e.id;return(0,j.hZ)(t).map((function(e){var t=e.data,r=M(e,A);return(0,y.Ik)(r,(0,I.Mx)(t))})).let((0,T.TC)((0,y.h4)(!0,"loading"),(0,y.h4)(!1,"loading"),(function(e){var t=window.location.href.match("dashboard-embedded")?"dashboardEmbedded":"dashboard",r=t+".errors.loading.unknownError";return 403===e.status&&(r=t+".errors.loading.pleaseLogin",(0,E.M3)(n())&&(r=t+".errors.loading.dashboardNotAccessible")),404===e.status&&(r=t+".errors.loading.dashboardDoesNotExist"),o().Observable.of((0,m.z3)({title:t+".errors.loading.title",message:r}),(0,y.Vh)(U(U({},e),{},{messageId:r})))})))}))},reloadDashboardOnLoginLogout:function(e){return e.ofType(y.OD).switchMap((function(t){var r=t.id;return e.ofType(h._x,h.T_).switchMap((function(){return o().Observable.of((0,y.RR)(r)).delay(1e3)})).takeUntil(e.ofType(_.LK))}))},saveDashboard:function(e){return e.ofType(y.pl).exhaustMap((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resource,t=a()(e.attributes,(function(e){if(c()(e)){var t=null;try{t=JSON.stringify(e)}catch(e){t=null}return t}return e})),r=s()(t).filter((function(e){return"thumbnail"!==e&&"details"!==e&&!d()(t[e])}));return o().Observable.forkJoin(e.id?(0,j.Uh)(e):(0,j.Zg)(e)).switchMap((function(n){var i,a,u=(i=n,a=1,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(i,a)||R(i,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(r.length>0?o().Observable.forkJoin(r.map((function(e){return(0,j.c5)({id:u,name:e,value:t[e]})}))):o().Observable.of([])).switchMap((function(){return o().Observable.of((0,y.Sz)(u),e.id?(0,y.gM)(!1):(0,y.mB)(!1),e.id?(0,y.RR)(u):(0,_.VC)("/dashboard/".concat(u))).merge(o().Observable.of((0,m.WU)({id:"DASHBOARD_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(e.id?0:1e3))})).let((0,T.TC)((0,y.h4)(!0,"saving"),(0,y.h4)(!1,"saving")))}))})).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,r=e.statusText,n=e.data,i=e.message,a=M(e,D);return o().Observable.of((0,y.eI)(t?{status:t,statusText:r,data:n}:i||a),(0,y.h4)(!1,"saving"))}))},exportDashboard:function(e){return e.ofType(y.MK).switchMap((function(e){var t=e.data,r=e.fileName;return o().Observable.of([JSON.stringify(U({},t)),r,"application/json"]).do((function(e){return P.RG.apply(void 0,k(e))})).map((function(){return(0,b.KP)("export")}))}))},importDashboard:function(e){return e.ofType(y.vv).switchMap((function(e){var t=e.file,r=e.resource;return o().Observable.defer((function(){return(0,P.Vh)(t[0]).then((function(e){return e}))})).switchMap((function(e){return o().Observable.of((0,y.Ik)(r,e),(0,b.KP)("import"))})).catch((function(e){return o().Observable.of((0,m.z3)({title:"dashboard.errors.loading.title"}),(0,y.Vh)(U({},e)))}))}))}}},233999:(e,t,r)=>{r.d(t,{TC:()=>l});var n=r(499084),o=r.n(n),i=r(45388),a=r.n(i);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,function(e){if(Array.isArray(e))return u(e)}(t=r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},l=function(e,t,r){return function(n){return(r?c(n,o()(e)).catch(r):c(n,o()(e))).concat(a().Observable.from(o()(t)))}}},213730:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n=r(273517),o=r.n(n),i=r(916589),a=r(801081),u=r(811668),c=r(605556),l=r.n(c),s=r(393149),f=r(589769),d=r(691809),p=r(71665),y=r(985564);const b=(0,i.compose)((0,u.connect)((function(){return{}}),{backFromWizard:function(){return(0,p.zd)("layer",void 0)}}),(0,i.withProps)((function(e){var t=e.backFromWizard;return{exitButton:{id:"dashboard-exit-button",onClick:void 0===t?function(){}:t,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToLayerSelection"}}})));var v=r(972554),m=r(635666),g=r(102780);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function P(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=function(e){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var T=(0,i.compose)((0,u.connect)(d.AU,{toggleConnection:p.Z0,triggerShowConnections:y.$2}),(0,u.connect)(d.Mr),(0,i.withProps)((function(e){var t=e.availableDependencies;return{availableDependencies:(void 0===t?[]:t).filter((function(e){return"map"!==e}))}})),b)(v.A),_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=S(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,r||[],S(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.onInit({servicesPermission:this.props.servicesPermission}),this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var e=this,t=this.props.pluginCfg.selectedService||"",r=this.props.pluginCfg.services||{};return!!this.props.editing&&o().createElement("div",{className:"dashboard-editor de-builder"},o().createElement(T,{disableEmptyMap:this.props.disableEmptyMap,defaultSelectedService:t,defaultServices:r,canEditService:this.props.canEditService,enabled:this.props.editing,onClose:function(){return e.props.setEditing(!1)},catalog:this.props.catalog}))}}])&&O(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);P(_,"propTypes",{id:l().string,editing:l().bool,limitDockHeight:l().bool,fluid:l().bool,zIndex:l().number,dockSize:l().number,position:l().string,onMount:l().func,onUnmount:l().func,setEditing:l().func,dimMode:l().string,src:l().string,style:l().object,pluginCfg:l().object,catalog:l().object,disableEmptyMap:l().bool,servicesPermission:l().object}),P(_,"defaultProps",{id:"dashboard-editor",editing:!1,dockSize:500,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",onMount:function(){},onUnmount:function(){},setEditing:function(){},servicesPermission:{editingAllowedRoles:["ALL"]}});var I=(0,u.connect)((0,a.Mz)(f.Hd,f.Nq,f.B2,(function(e,t,r){return{editing:e,isDashboardOpened:t,canEditService:r}})),{setEditing:y.Df,onInit:y.Wm,onMount:function(){return(0,y.Vm)(!0)},onUnmount:function(){return(0,y.Vm)(!1)}})(_);const A=(0,s.i1)("DashboardEditor",{component:I,reducers:{dashboard:g.A},epics:m.Ay})},102780:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(985564),o=r(71665),i=r(905185),a=r(499084),u=r.n(a);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showConnections:!0,services:null,saveServiceLoading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.DK:return s(s({},e),null==t?void 0:t.options);case n.F8:return(0,i.hZ)("editor.available",t.available,e);case n.iy:case o.q6:case o.i:case o.SJ:return(0,i.hZ)("editing",t.editing,e);case n.aj:return(0,i.hZ)("showConnections",t.show,e);case n.pN:return(0,i.hZ)("showSaveModal",t.show,(0,i.hZ)("saveErrors",void 0,e));case n.uy:return(0,i.hZ)("showSaveAsModal",t.show,(0,i.hZ)("saveErrors",void 0,e));case n.LL:var r;return s(s({},e),{},{originalData:t.data,resource:t.resource,services:null===(r=t.data)||void 0===r?void 0:r.catalogs});case n.Vd:return s(s({},e),{},{originalData:void 0,resource:void 0,mode:"view",services:void 0});case n.Jq:return(0,i.hZ)("saveErrors",u()(t.error),e);case n.NT:return(0,i.hZ)("saveErrors",void 0,e);case n.G2:var a;return s(s({},e),{},{services:e.services||t.services,selectedService:(null===(a=t.service)||void 0===a?void 0:a.key)||""});case n.GT:return(0,i.hZ)("services",t.services,e);case n.Fr:return s(s({},e),{},{mode:t.mode,isNew:t.isNew,saveServiceLoading:!1});case n.SX:return s(s({},e),{},{saveServiceLoading:t.loading});case n.Uc:var c=t.services,l=t.service;l.isNew=!1,l.showAdvancedSettings=!1,delete l.old,c[l.key]=l;var f=l.key;return s(s({},e),{},{services:c,selectedService:f,mode:"view"});case n.Vt:var d,p,y=t.services,b=t.service;(y[b.key]||y[null===(d=b.old)||void 0===d?void 0:d.key])&&(delete y[b.key]||y[null===(p=b.old)||void 0===p?void 0:p.key]);var v=Object.keys(y)[0]||"";return s(s({},e),{},{services:y,mode:"view",selectedService:v});case n._M:return(0,i.hZ)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,(0,i.hZ)("loading",t.value,e));default:return e}}},97401:(e,t,r)=>{r.d(t,{MA:()=>w,SU:()=>E,iS:()=>v,lU:()=>h,o:()=>b,o7:()=>m,si:()=>S,tV:()=>O,u$:()=>y,wd:()=>g});var n=r(400912),o=r.n(n),i=r(150104),a=r.n(i),u=r(131127),c=r(6683),l=r(779893);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){return e.maplayout&&e.maplayout.layout||{}},b=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},m=a()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=y(e),o=v(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){var i;return d(d({},e),{},p({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))}),{})||{}}),(function(e,t,r){return JSON.stringify(y(e))+JSON.stringify(v(e))+JSON.stringify(t)+(r?"_isDock":"")})),g=function(e){var t;return!(null===(t=y(e))||void 0===t||!t.rightPanel)},h=function(e){var t,r=l.Ay.getConfigProp("mapLayout")||c.OH;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=y(e);return!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},O=function(e){var t=(0,u.mg)(e),r=b(e);return r&&t&&t.size&&{left:(0,c.n_)(r.left,t.size.width),bottom:(0,c.n_)(r.bottom,t.size.height),right:(0,c.n_)(r.right,t.size.width),top:(0,c.n_)(r.top,t.size.height)}},E=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},S=function(e){return m(e,{height:!0,right:!0},!0)},w=function(e){return m(e,{right:!0},!0)}}}]);