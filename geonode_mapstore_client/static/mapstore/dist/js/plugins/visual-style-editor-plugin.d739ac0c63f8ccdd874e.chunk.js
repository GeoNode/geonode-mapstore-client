(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[9010],{55105:(e,t,n)=>{"use strict";n.d(t,{Nr:()=>y,ic:()=>d,Jz:()=>v,VM:()=>m,CF:()=>p});var r=n(91175),l=n.n(r),o=n(827),a=n(52259);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){return e.maplayout&&e.maplayout.layout||{}},y=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){return c(c({},e),{},u({},t,n[t]))}),{})||{}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=s(e),r=!!l()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})));return r},v=function(e){return f(e,[{key:"right",value:658}])},m=function(e){return f(e,[{key:"bottom",value:30,type:"not"}])},p=function(e){var t=(0,o.Od)(e),n=y(e);return n&&t&&t.size&&{left:(0,a.parseLayoutValue)(n.left,t.size.width),bottom:(0,a.parseLayoutValue)(n.bottom,t.size.height),right:(0,a.parseLayoutValue)(n.right,t.size.width),top:(0,a.parseLayoutValue)(n.top,t.size.height)}}},73443:(e,t,n)=>{"use strict";n.d(t,{rs:()=>r,AY:()=>l,SW:()=>o,yB:()=>a,oG:()=>i,oz:()=>c,id:()=>u,gc:()=>s,cE:()=>y,rG:()=>d,Vj:()=>f,nY:()=>v});var r="GEONODE:SAVING_RESOURCE",l="GEONODE:SAVE_SUCCESS",o="GEONODE:SAVE_ERROR",a="GEONODE:CLEAR_SAVE",i="GEONODE:SAVE_CONTENT",c="GEONODE:SAVE_DIRECT_CONTENT";function u(){return{type:r}}function s(e){return{type:l,success:e}}function y(e){return{type:o,error:e}}function d(){return{type:a}}function f(e,t,n,r){return{type:i,id:e,metadata:t,reload:n,showNotifications:r}}function v(){return{type:c}}},28261:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294),l=n.n(r),o=n(45697),a=n.n(o),i=["id","className","style","children"];function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e){var t=e.id,n=e.className,r=e.style,o=e.children,a=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,i),u=n?" "+n:"";return l().createElement(l().Fragment,null,l().createElement("div",c({},a,{id:t,className:"gn-spinner".concat(u),style:r}),l().createElement("div",null)),o)}u.propTypes={id:a().string,className:a().string,style:a().object},u.defaultProps={};const s=u},51605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(28261)},32247:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(67294);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const o=function(e,t){var n,o,a=function(){if("undefined"==typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.log("Error to get item key “".concat(e,"”:"),n),t}},i=(n=(0,r.useState)(a),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw l}}return o}}(n,o)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],u=i[1];return(0,r.useEffect)((function(){u(a())}),[]),(0,r.useEffect)((function(){var e=function(){u(a())};return window.addEventListener("localStorage",e),function(){window.removeEventListener("localStorage",e)}}),[]),[c,function(t){try{var n=t instanceof Function?t(c):t;u(n),window.localStorage.setItem(e,JSON.stringify(n)),window.dispatchEvent(new Event("localStorage"))}catch(t){console.log("Error “".concat(e,"”:"),t)}}]}},58074:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ue});var r=n(67294),l=n.n(r),o=n(22843),a=n(33664),i=n(22222),c=n(57588),u=n(92222),s=n(32244),y=n(94943),d=n(89255),f=n(23570),v=n.n(f),m=n(80416),p=n(96909),b=n(82904),g=n(60604),S=n(99009),E=n(9082),O=n(93222),h="GEONODE:REQUEST_DATASET_AVAILABLE_STYLES",w="GEONODE:CREATE_GEONODE_STYLE",N="GEONODE:DELETE_GEONODE_STYLE",C=n(73443),j=n(17621),P=n.n(j),T=n(3828),k=n(35721);function Z(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){var t=e.type,n=e.title,r=P()("hsl(".concat(Math.floor(270*Math.random()),", 90%, 70%)")).toHexString();switch(t){case"raster":return"@mode 'Flat'; @styleTitle '"+n+"'; \n* {\n\traster-channels: auto;\n\traster-opacity: 1;\n}\n";case"point":default:return"@mode 'Flat'; @styleTitle '"+n+"'; \n* {\n\tmark: symbol('square');\n\t:mark {\n\t\tfill: "+r+";\n\t\tsize: 4;\n\t}\n}\n";case"linestring":return"@mode 'Flat'; @styleTitle '"+n+"'; \n* {\n\tstroke: "+r+";\n}\n";case"polygon":return"@mode 'Flat'; @styleTitle '"+n+"'; \n* {\n\tfill: "+r+";\n}\n"}}function x(e){var t=e.name;return"geonode:".concat(v()(),"_ms_").concat(t)}const U={gnCreateStyle:function(e,t){return e.ofType(w).switchMap((function(e){var n,r,l,o,a=t.getState(),i=(null==e||null===(n=e.options)||void 0===n?void 0:n.styleService)||(0,O.Z0)(a),c=x({name:e.title.toLowerCase().replace(/\W/g,"")}),u=e.layer||(0,O.Vf)(a),s={title:e.title,description:"",msStyleJSON:null,msEditorType:"visual",gnLayerName:u.name,gnDatasetPk:null==u||null===(r=u.extendedParams)||void 0===r||null===(l=r.mapLayer)||void 0===l||null===(o=l.dataset)||void 0===o?void 0:o.pk},y=(0,O.lC)(a);return d.Observable.defer((function(){return E.ZP.createStyle({baseUrl:null==i?void 0:i.baseUrl,code:V({type:y,title:e.title}),format:"css",styleName:c,metadata:s})})).switchMap((function(){return d.Observable.of((0,m.tV)(u.id,"layer",{availableStyles:[].concat(Z(u.availableStyles),[{format:"css",metadata:s,name:c,title:e.title}])}),(0,g.W)(u.id,S.s1,"override",{}),(0,m.Xy)({style:c},!0),(0,p.Nf)("edit"),(0,C.nY)())}))}))},gnDeleteStyle:function(e,t){return e.ofType(N).switchMap((function(e){var n,r=t.getState(),l=(null==e||null===(n=e.options)||void 0===n?void 0:n.styleService)||(0,O.Z0)(r),o=e.layer||(0,O.Vf)(r),a=function(){var t,n=(o.availableStyles||[]).filter((function(t){return t.name!==e.styleName}));return d.Observable.of((0,m.tV)(o.id,"layer",{availableStyles:n}),(0,g.W)(o.id,S.s1,"override",{}),(0,m.Xy)({style:(null==n||null===(t=n[0])||void 0===t?void 0:t.name)||""},!0),(0,p.Nf)("edit"),(0,C.nY)())};return d.Observable.defer((function(){return d.Observable.defer((function(){return E.ZP.deleteStyle({baseUrl:null==l?void 0:l.baseUrl,styleName:e.styleName})}))})).switchMap((function(){return a()})).catch((function(){return a()}))}))},gnRequestDatasetAvailableStyles:function(e,t){return e.ofType(h).switchMap((function(e){var n,r=t.getState(),l=(null==e||null===(n=e.options)||void 0===n?void 0:n.styleService)||(0,O.Z0)(r);return d.Observable.defer((function(){return function(e){var t,n,r,l,o,a,i=e.layer,c=e.styleService,u=null==i||null===(t=i.extendedParams)||void 0===t||null===(n=t.mapLayer)||void 0===n||null===(r=n.dataset)||void 0===r?void 0:r.subtype,s=(null==i?void 0:i.availableStyles)||[];return 0===s.length?function(e,t){var n,r="visual";return e?E.ZP.getStyleCodeByName({baseUrl:null==t?void 0:t.baseUrl,styleName:(0,k.UH)(e)}).then((function(e){var t=e||{},n=t.metadata,r=void 0===n?{}:n,l=t.code,o=t.format,a=t.languageVersion,i=(0,k.BB)(r);return{msEditorType:null==i?void 0:i.msEditorType,msStyleJSON:null==i?void 0:i.msStyleJSON,code:l,format:o,languageVersion:a}})).catch((function(){return{msEditorType:r,msStyleJSON:null,code:n}})):new Promise((function(e){return e({msStyleJSON:null,msEditorType:r,code:n})}))}(null==i||null===(l=i.extendedParams)||void 0===l||null===(o=l.mapLayer)||void 0===o||null===(a=o.dataset)||void 0===a?void 0:a.default_style,c).then((function(e){var t,n,r,l=e||{},o=l.msEditorType,a=l.msStyleJSON,s=l.code,y=l.format,d=l.languageVersion,f=i.name.split(":"),v=1===f.length?f[0]:f[f.length-1],m=x({name:v}),p={title:v,description:"",msStyleJSON:a,msEditorType:o,gnDatasetPk:null==i||null===(t=i.extendedParams)||void 0===t||null===(n=t.mapLayer)||void 0===n||null===(r=n.dataset)||void 0===r?void 0:r.pk};return E.ZP.createStyle(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({baseUrl:null==c?void 0:c.baseUrl,code:s||V({type:u,title:v}),format:s&&y?y:"css",styleName:m,metadata:p},s&&y&&{languageVersion:d})).then((function(){return[[{name:m,title:v,metadata:p,format:y}],!0]}))})):new Promise((function(e){return e([s])}))}({layer:e.layer,styleService:l})})).switchMap((function(t){var n,o,a,i,c=(i=2,function(e){if(Array.isArray(e))return e}(a=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw l}}return o}}(a,i)||A(a,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],s=c[1],y=(null==e||null===(n=e.options)||void 0===n?void 0:n.style)||(null==u||null===(o=u[0])||void 0===o?void 0:o.name);return d.Observable.concat(d.Observable.of((0,b.Xg)("visualStyleEditor","enabled",!0)),d.Observable.defer((function(){return E.ZP.getStylesInfo({baseUrl:null==l?void 0:l.baseUrl,styles:u})})).switchMap((function(t){return d.Observable.of.apply(d.Observable,[(0,m.tV)(e.layer.id,"layer",{availableStyles:t}),(0,m.Xy)({style:y},!0),(0,g.W)(e.layer.id,S.s1,"override",{}),(0,p.Nf)("edit")].concat(Z(s&&!(0,T.V$)(r)?[(0,C.nY)()]:[])))})))}))}))},gnUpdateStyleInfoOnSave:function(e,t){return e.ofType(p.ch).switchMap((function(){var e=t.getState(),n=(0,O.Vf)(e);return d.Observable.of((0,m.tV)(n.id,"layers",{style:n.style}))}))}};var _=n(1550),M=n(5346),G=n(83958),z=n(90702),R=n(93473),J=n(99534),F=n(94745),Y=n(51605),B=n(55105),W=n(93451),$=n(15135),X=n(75110),q=n(32247);function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=(0,W.Z)("placeholder")(c.FormControl),le=(0,S.YD)().filter((function(e){return!["Base CSS","Base SLD"].includes(e.title)})),oe=(0,$.Z)(R.Z),ae=(0,a.connect)((0,i.P1)([O.QW,O.gB,O.aN,O.p],(function(e,t,n,r){var l;return{isStyleChanged:void 0!==e&&void 0!==t&&e!==t,loading:n,error:!(null==r||null===(l=r.edit)||void 0===l||!l.status)}})),{onClick:p.Lc})((function(e){var t=e.variant,n=e.onClick,r=e.size,o=e.isStyleChanged,a=e.error,i=e.loading,c=!(!i&&!a);return l().createElement(oe,{className:o?"gn-pending-changes-icon":"",variant:t||"primary",size:r,disabled:c,onClick:c?function(){}:function(){return n()}},l().createElement(M.Z,{msgId:"save"})," ",i&&l().createElement(Y.Z,null))})),ie=(0,a.connect)((0,i.P1)([O.Vf,O.gc,O.Z0,O.Ed,O.lC,O.QW,function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.visualStyleEditor)||void 0===n?void 0:n.enabled},O.i7,function(e){return(0,B.ic)(e,{height:!0})},X.Iz],(function(e,t,n,r,l,o,a,i,c,u){var s;return{layer:e,temporaryStyleId:t,styleService:n,format:r,geometryType:l,initialCode:o,enabled:a,selectedStyle:null==e||null===(s=e.availableStyles)||void 0===s?void 0:s.find((function(e){return e.name===i})),style:c,originalStyle:null==u?void 0:u.style}})),{onUpdateStatus:p.Nf,onUpdateParams:m.Xy,onInit:p.E0,onReset:p.Wv.bind(null,void 0,!1),onSelect:p.p2,onUpdateMetadata:p.bB,onSave:p.Lc,onClose:b.Xg.bind(null,"visualStyleEditor","enabled",!1),onZoomTo:_.Px,onCreate:function(e,t){return{type:w,title:e,options:t}},onDelete:function(e,t){return{type:N,styleName:e,options:t}},onUpdateNode:m.tV},(function(e,t,n){var r,l,o,a=(null===(r=n.styleService)||void 0===r?void 0:r.baseUrl)===(null===(l=e.styleService)||void 0===l?void 0:l.baseUrl)&&(null===(o=e.styleService)||void 0===o?void 0:o.isStatic),i=n.styleService&&!a?K(K({},n.styleService),{},{isStatic:!0}):K({},e.styleService);return K(K(K(K({},n),e),t),{},{styleService:i})}))((function(e){var t=e.layer,n=e.editorConfig,o=e.styleService,a=e.onInit,i=e.onReset,s=e.temporaryStyleId,y=e.showLayerProperties,d=e.geometryType,f=e.format,v=e.onSelect,m=e.onUpdateMetadata,p=e.initialCode,b=e.enabled,g=e.onClose,S=e.onZoomTo,O=e.onCreate,h=e.onDelete,w=e.selectedStyle,N=e.style,C=te((0,r.useState)(!1),2),j=C[0],P=C[1],T=te((0,r.useState)(!1),2),k=T[0],Z=T[1],A=te((0,r.useState)(""),2),I=A[0],D=A[1],L=te((0,q.Z)("style-notifcation",!1),2),V=L[0],x=L[1],U=te((0,r.useState)(!1),2),_=U[0],R=U[1],Y=(0,r.useRef)();Y.current=function(){s&&E.ZP.deleteStyle({baseUrl:o.baseUrl,styleName:s})},(0,r.useEffect)((function(){function e(){Y.current()}return a(o),window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e),i()}}),[]);var B=le.filter((function(e){return e.types.includes(d)&&f===e.format}));if(!b||!t.id)return null;var W=!!((null==B?void 0:B.length)>0);return l().createElement("div",{className:"gn-visual-style-editor",style:N},y&&l().createElement("div",{className:"gn-visual-style-editor-layer-info"},l().createElement("div",{className:"gn-visual-style-editor-layer-title"},t.title),t.bbox&&l().createElement(oe,{onClick:function(){var e=t.bbox.bounds,n=e.minx,r=e.miny,l=e.maxx,o=e.maxy;S([n,r,l,o],t.bbox.crs)},tooltipId:"gnviewer.zoomToLayer"},l().createElement(c.Glyphicon,{glyph:"zoom-to"})),l().createElement(oe,{onClick:function(){i(),g()},className:"square-button"},l().createElement(c.Glyphicon,{glyph:"1-close"}))),(W||y)&&l().createElement("div",{className:"gn-visual-style-editor-toolbar"},y&&l().createElement(ae,{variant:"default",size:"xs"}),W&&l().createElement(z.Z,{placement:"right",content:l().createElement("ul",{className:"gn-visual-style-editor-templates"},B.map((function(e,t){var n;return l().createElement("li",{key:t,className:"gn-visual-style-editor-template",onClick:function(){return function(e){v(e),m({styleJSON:null})}((t=e.code,l=(null==w||null===(n=w.metadata)||void 0===n?void 0:n.title)||(null==w?void 0:w.label)||(null==w?void 0:w.title)||(null==w?void 0:w.name)||"",o=(null==w||null===(r=w.metadata)||void 0===r?void 0:r.description)||(null==w?void 0:w._abstract)||"",t.replace(/\$\{styleTitle\}/,l).replace(/\$\{styleAbstract\}/,o)));var t,n,r,l,o}},l().createElement("div",{className:"gn-visual-style-editor-template-preview"},null!=e&&null!==(n=e.preview)&&void 0!==n&&n.config?l().createElement(G.Z,e.preview.config):null==e?void 0:e.preview),l().createElement("div",{className:"gn-visual-style-editor-template-title"},e.title))})))},l().createElement(oe,{size:"xs"},l().createElement(M.Z,{msgId:"gnviewer.copyFrom"})))),!_&&!V&&l().createElement("div",{className:"gn-visual-style-editor-alert alert-info"},l().createElement("div",{className:"gn-visual-style-editor-alert-message"},l().createElement(M.Z,{msgId:"gnviewer.stylesFirstClone"}),l().createElement(oe,{size:"xs",variant:"transparent",onClick:function(){x(!0)}},l().createElement("p",null,l().createElement(M.Z,{msgId:"gnviewer.dismissMessage"})))),l().createElement(oe,{size:"xs",variant:"transparent",onClick:function(){R(!0)}},l().createElement(c.Glyphicon,{glyph:"remove"}))),l().createElement("div",{className:"gn-visual-style-editor-body"},l().createElement("div",null,l().createElement(u.m2,{key:p,config:n}))),l().createElement(J.Z,null,l().createElement(F.Z,{title:l().createElement(M.Z,{msgId:"gnviewer.createStyleTitle"}),fitContent:!0,clickOutEnabled:!1,show:j,onClose:function(){P(!1),D("")},buttons:[{text:l().createElement(M.Z,{msgId:"gnviewer.createStyleClose"}),onClick:function(){P(!1),D("")}},{text:l().createElement(M.Z,{msgId:"gnviewer.createStyleCreate"}),bsStyle:"primary",onClick:function(){P(!1),O(I),D("")}}]},l().createElement("div",{style:{padding:"1rem"}},l().createElement(c.ControlLabel,null,l().createElement(M.Z,{msgId:"gnviewer.createStyleTitleInput"})," "),l().createElement(re,{value:I,onChange:function(e){var t;return D(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}})))),l().createElement(J.Z,null,l().createElement(F.Z,{title:l().createElement(M.Z,{msgId:"gnviewer.deleteStyleTitle"}),show:k,fitContent:!0,clickOutEnabled:!1,onClose:function(){Z(!1)},buttons:[{text:l().createElement(M.Z,{msgId:"gnviewer.deleteStyleCancel"}),onClick:function(){Z(!1)}},{text:l().createElement(M.Z,{msgId:"gnviewer.deleteStyleConfirm"}),bsStyle:"danger",onClick:function(){h(t.style),Z(!1)}}]},l().createElement("div",{style:{padding:"1rem"}},l().createElement(M.Z,{msgId:"gnviewer.deleteStyleMessage"})))))})),ce=(0,a.connect)((0,i.P1)([O.Vf,T.HG,T.V$],(function(e,t,n){return{layer:e,enabled:!(null==t||!t.includes("change_resourcebase")),isNew:n}})),{onClick:function(e,t){return{type:h,layer:e,options:t}}})((function(e){var t,n=e.layer,r=e.status,o=e.onClick,a=void 0===o?function(){}:o,i=e.enabled,u=e.isNew,s=e.btnProps,y=void 0===s?{}:s,d=e.hide,f=e.selectedStyle;return d||"LAYER"!==r||null==n||null===(t=n.extendedParams)||void 0===t||!t.mapLayer||!i&&!u?null:l().createElement(oe,H({variant:"primary",className:"square-button-md"},y,{onClick:function(e){e.stopPropagation(),e.preventDefault(),a(n,{style:f})},onMouseDown:function(e){e.stopPropagation(),e.preventDefault()}}),l().createElement(c.Glyphicon,{glyph:"dropper"}))}));const ue=(0,o.rx)("VisualStyleEditor",{component:ie,containers:{ActionNavbar:{name:"SaveStyle",Component:ae},TOC:{target:"toolbar",Component:ce},LayerSettings:{target:"style-button",Component:ce}},reducers:{styleeditor:s.Z},epics:K(K({},y.ZP),U)})}}]);