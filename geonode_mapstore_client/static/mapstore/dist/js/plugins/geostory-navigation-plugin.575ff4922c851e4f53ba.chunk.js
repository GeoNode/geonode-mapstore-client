(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[8710,9081],{81593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(67294),o=n(45338);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const d=function(e){var t=e.direction,n=void 0===t?"horizontal":t,i=e.deltaScroll,l=e.width,f=e.height,d=e.transition,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],v=(0,r.useState)(0),m=s(v,2),y=m[0],h=m[1],g=(0,r.useState)(0),b=s(g,2),w=b[0],S=b[1],O=(0,r.useRef)({x:0,y:0}),E=(0,r.useState)(!1),P=s(E,2),C=P[0],j=P[1],T=(0,r.useState)("start"),k=s(T,2),I=k[0],x=k[1],D=(0,r.useState)(),M=s(D,2),N=M[0],A=M[1],R=(0,r.useRef)(),U=(0,r.useRef)({});function _(e,t){A("move:start");var r=R.current,o=r.parentNode,i=r.getBoundingClientRect(),a=o.getBoundingClientRect();if("horizontal"===n){var c=e+i.width;e<0&&c>a.width?(h(e),O.current.x=e,x("center")):e>=0?(h(0),O.current.x=0,x("start")):c<=a.width&&(h(a.width-i.width),O.current.x=a.width-i.width,x("end"))}if("vertical"===n){var u=t+i.height;t<0&&u>a.height?(S(t),O.current.y=t,x("center")):t>=0?(S(0),O.current.y=0,x("start")):u<=a.height&&(S(a.height-i.height),O.current.y=a.height-i.height,x("end"))}setTimeout((function(){A("move:end")}),d)}function L(e){_(y+e,w+e)}function Z(){var e=R.current,t=e.parentNode,r=e.getBoundingClientRect(),o=t.getBoundingClientRect();return!("horizontal"===n&&o.width>=r.width||"vertical"===n&&o.height>=r.height)}(0,r.useEffect)((function(){function e(e){e.preventDefault();var t=Z();return j(Z()),t?_(O.current.x-(e.deltaY>0?i:-i),O.current.y-(e.deltaY>0?i:-i)):null}var t=Z();j(t);var n=R.current.parentNode;return t&&_(O.current.x,O.current.y),t&&n&&n.addEventListener&&n.addEventListener("wheel",e),function(){t&&n&&n.removeEventListener&&n.removeEventListener("wheel",e)}}),[l,f].concat(u(p)));var z=(0,o.QS)({onSwiping:function(e){e.event.stopPropagation();var t=Z();return j(Z()),t?_(y-e.deltaX*e.velocity,w-e.deltaY*e.velocity):null},trackTouch:!0,trackMouse:!0});function B(e,t){U.current=a(a({},U.current),{},c({},e,t))}function H(e){var t=U.current[e];if(t){var r=R.current,o=(r&&r.parentNode).getBoundingClientRect(),i=t.getBoundingClientRect();if("horizontal"===n){var a=o.width,c=o.left,u=i.width,s=i.left,l=c+a,f=s+u;return c<=s&&l>=s||c<=f&&l>=f}}return!1}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.margin,o=void 0===r?0:r,i=U.current[e];if(i){var a=R.current,c=a&&a.parentNode,u=c.getBoundingClientRect(),s=i.getBoundingClientRect();if("horizontal"===n){var l=u.width,f=u.left,d=s.width,p=s.left,v=f+l,m=p+d,y=f<=p&&v>=m;if(!y){var h=a.getBoundingClientRect(),g=h.left;_(-(p-g)+o,void 0)}}}}var F=C&&("end"===I||"center"===I),q=C&&("start"===I||"center"===I);return{status:N,canSwipe:C,isStartControlActive:F,isEndControlActive:q,positionLabel:I,coordinates:{x:y,y:w},containerPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t;return a(a({},z),{},{style:a({position:"relative",overflow:"hidden",width:"100%",height:"100%"},n)})},contentPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t;return{ref:R,style:a(a(a(a({position:"absolute",display:"flex"},d&&{transition:"transform ".concat(d,"ms ease 0s")}),{},{flexDirection:"horizontal"===n?"row":"column"},C&&"horizontal"===n&&{transform:"translateX(".concat(y,"px)")}),C&&"vertical"===n&&{transform:"translateY(".concat(w,"px)")}),r)}},itemPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onClick;return a({key:t,ref:function(e){return e&&B(t,e)}},n?{onClick:n,tabindex:H(t)?0:-1,onKeyDown:function(e){"Enter"===e.key&&n()}}:{tabindex:-1})},updateCoordinates:_,moveItemInViewById:Y,moveToDeltaSize:L}}},26538:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>W});var r=n(67294),o=n.n(r),i=n(33664),a=n(22222),c=n(22843),u=n(92579),s=n(66113),l=n(24684),f=n(66190),d=n(80717),p=n(57588),v=n(23279),m=n.n(v),y=n(81593),h=n(80628),g=n(82467);function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}var w=function(e){var t=e.tabindex,n=e.text,r=e.selected,i=e.style;return o().createElement(g.Z,{tabindex:t,className:"".concat(r?"active":"btn-tray"," btn-xs btn-default"),style:i},n)};const S=(0,h.Z)((function(e){var t=e.currentPage,n=e.items,i=e.scrollTo,a=void 0===i?function(){}:i,c=e.width,u=e.height,s=e.deltaSwipeSize,l=void 0===s?200:s,f=e.transition,d=void 0===f?300:f,v=e.updateTimeDebounceTime,h=void 0===v?500:v,S=e.getItemStyle,O=void 0===S?function(){return{}}:S,E=(0,y.Z)({direction:"horizontal",width:c,height:u,transition:d,deltaScroll:l}),P=E.isStartControlActive,C=E.isEndControlActive,j=E.containerPropsHandlers,T=E.contentPropsHandlers,k=E.itemPropsHandlers,I=E.moveToDeltaSize,x=E.moveItemInViewById,D=t&&t.columns&&t.sectionId&&t.columns[t.sectionId]||t&&t.sectionId,M=(0,r.useRef)(null);return(0,r.useEffect)((function(){return M.current=m()((function(e){x(e,{margin:32})}),h),function(){M.current&&(M.current.cancel(),M.current=null)}}),[]),(0,r.useEffect)((function(){M.current&&(M.current.cancel(),M.current(D))}),[D]),o().createElement("div",b({},j(),{className:"ms-horizontal-menu"}),o().createElement("div",T(),n.map((function(e){var n=e.title,r=e.id,i=k({id:r,onClick:function(){t&&t.sectionId!==r&&a(r)}});return o().createElement("div",b({},i,{className:"ms-menu-item"}),o().createElement(w,{tabindex:"-1",id:r,text:n||"title",selected:r===D,style:O(r===D)}))}))),P&&o().createElement(g.Z,{className:"square-button-md no-border",style:{position:"absolute"},onClick:function(){return I(l)}},o().createElement(p.Glyphicon,{glyph:"chevron-left"})),C&&o().createElement(g.Z,{className:"square-button-md no-border",style:{position:"absolute",right:0},onClick:function(){return I(-l)}},o().createElement(p.Glyphicon,{glyph:"chevron-right"})))}));var O=n(45697),E=n.n(O),P=n(50966),C=n(5346),j=n(94745);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}var k=["tooltipPosition"];function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},M(e,t)}function N(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&M(e,t)}(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(i){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N(this,e)});function c(){var e;x(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return U(A(e=a.call.apply(a,[this].concat(n))),"checkUnsavedChanges",(function(){e.props.renderUnsavedMapChangesDialog?e.props.onCheckMapChanges(e.goHome):(e.props.onCloseUnsavedDialog(),e.goHome())})),U(A(e),"goHome",(function(){e.context.router.history.push("/")})),e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.tooltipPosition,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,k),r=o().createElement(p.Tooltip,{id:"toolbar-home-button"},o().createElement(C.Z,{msgId:"gohome"}));return o().createElement(o().Fragment,null,o().createElement(P.Z,{overlay:r,placement:t},o().createElement(g.Z,I({id:"home-button",className:"square-button",bsStyle:"primary",onClick:this.checkUnsavedChanges,tooltip:r},n),this.props.icon)),o().createElement(j.Z,{ref:"unsavedMapModal",show:this.props.displayUnsavedDialog||!1,onClose:this.props.onCloseUnsavedDialog,title:o().createElement(C.Z,{msgId:"resources.maps.unsavedMapConfirmTitle"}),buttons:[{bsStyle:"primary",text:o().createElement(C.Z,{msgId:"resources.maps.unsavedMapConfirmButtonText"}),onClick:this.goHome},{text:o().createElement(C.Z,{msgId:"resources.maps.unsavedMapCancelButtonText"}),onClick:this.props.onCloseUnsavedDialog}],fitContent:!0},o().createElement("div",{className:"ms-detail-body"},o().createElement(C.Z,{msgId:"resources.maps.unsavedMapConfirmMessage"}))))}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o().Component);U(_,"propTypes",{icon:E().node,onCheckMapChanges:E().func,onCloseUnsavedDialog:E().func,displayUnsavedDialog:E().bool,renderUnsavedMapChangesDialog:E().bool,tooltipPosition:E().string}),U(_,"contextTypes",{router:E().object,messages:E().object}),U(_,"defaultProps",{icon:o().createElement(p.Glyphicon,{glyph:"home"}),onCheckMapChanges:function(){},onCloseUnsavedDialog:function(){},renderUnsavedMapChangesDialog:!0,tooltipPosition:"left"});const L=_;var Z=n(11847),z=n(13218),B=n.n(z);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q=function(e){var t,n=e.settings,r=e.scrollTo,i=void 0===r?function(){}:r,a=e.navigableItems,c=void 0===a?[]:a,u=e.currentPage,s=void 0===u?{}:u,l=e.totalItems,f=void 0===l?1:l,p=e.currentPosition,v=void 0===p?0:p,m=e.router,y=e.buttons,h=void 0===y?[]:y,g=null==n||null===(t=n.theme)||void 0===t?void 0:t.general,b=B()(g)&&g||{},w=b.fontFamily,O=b.borderColor,E=b.color,P=b.backgroundColor,C=n||{},j=C.isTitleEnabled,T=C.isLogoEnabled,k=C.isNavbarEnabled,I=h.length>0,x=m&&m.pathname&&m.search&&"true"===(0,Z.vl)(m.search).showHome&&m.pathname.includes("/geostory/shared"),D=k&&(null==c?void 0:c.length)>0,M=j||T||D||I||x;return o().createElement("div",{className:"ms-geostory-navigation-bar",style:Y(Y({color:E,backgroundColor:P},O&&{borderBottom:"1px solid ".concat(O)}),{},{fontFamily:w})},o().createElement("div",{className:"progress-bar",key:"progress-bar",style:{backgroundColor:O}},o().createElement("div",{className:"progress-percent",style:{width:"".concat((v+1)/f*100,"%"),backgroundColor:E}})),M&&o().createElement("div",{className:"ms-geostory-navigation-tools"},o().createElement("div",{className:"ms-geostory-navigation-toolbar"},o().createElement(d.Z,{buttons:h}),x&&o().createElement(L,{bsStyle:"default",className:"square-button-md no-border",tooltipPosition:"right",renderUnsavedMapChangesDialog:!1})),o().createElement("div",{className:"ms-geostory-navigation-elements"},D?o().createElement("div",{className:"ms-geostory-navigation-navigable-items"},o().createElement(S,{items:c,currentPage:s,scrollTo:i,getItemStyle:function(e){return e?{color:P,backgroundColor:E}:{outlineColor:E,borderColor:E}}})):null,o().createElement("div",{className:"ms-geostory-navigation-metadata"},j&&o().createElement("div",{className:"ms-geostory-navigation-title",style:{fontSize:n.storyTitleFontSize||"14px"}},n.storyTitle),T&&o().createElement("div",{className:"ms-geostory-navigation-logo"},o().createElement("img",{src:n.thumbnail&&(n.thumbnail.data||n.thumbnail.url)||"",height:32}))))))},W=(0,c.rx)("GeoStoryNavigation",{component:(0,i.connect)((0,a.zB)({mode:s.eK,settings:s.TQ,currentPage:s.PR,currentPosition:s.u5,totalItems:s.CK,navigableItems:(0,s.w)({includeAlways:!1}),pathname:l.F,search:l.y}))((function(e){var t=e.mode,n=void 0===t?u.nl.VIEW:t,r=e.currentPage,i=e.currentPosition,a=e.totalItems,c=e.settings,s=e.navigableItems,l=void 0===s?[]:s,f=e.pathname,d=e.search,p=e.items,v=(void 0===p?[]:p).filter((function(e){return e.tool})).map((function(e){return{Element:e.tool}}));return n===u.nl.VIEW?o().createElement("div",{key:"geostory-navigation",className:"ms-geostory-navigation",style:{width:"100%",position:"relative"}},o().createElement(q,{settings:c,currentPage:r,currentPosition:i,totalItems:a,scrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};(0,u.M1)(e,t)},navigableItems:l,router:{pathname:f,search:d},buttons:v})):null})),reducers:{geostory:f.Z}})},66190:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var r=n(27361),o=n.n(r),i=n(47037),a=n.n(i),c=n(81763),u=n.n(c),s=n(30998),l=n.n(s),f=n(13311),d=n.n(f),p=n(68630),v=n.n(p),m=n(1469),y=n.n(m),h=n(84596),g=n.n(h),b=n(19155),w=n.n(b),S=n(61868),O=n(92579),E=n(34990);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=function(e,t){var n=e.length,r=0;return t||0===t||(r=n),a()(t)?r=l()(e,{id:t})+1:u()(t)&&(r=Math.min(t,e.length)),r},x=function e(t,n,r){var o=r.contents,i=r.background,a=r.id,c=r.resourceId,u=[],s=n+'{"id": "'.concat(a,'"}]');return c===t?[s]:(i&&i.resourceId===t&&u.push(s+".background"),o?o.reduce((function(n,r){return[].concat(T(n),T(e(t,s+".contents[",r)))}),u):u)},D={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1};const M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.D7:var n=t.id,r=t.path,i=t.position,c=t.element,u=(0,O.Ll)("currentStory.".concat(r),e),s=o()(e,u,[]),l=I(s,i),f=s.slice();return f.splice(l,0,C({id:n},c)),(0,S.t8)(u,f,e);case E.mN:var p=t.id,m=t.mediaType,h=t.data;return(0,S.t8)("currentStory.resources",w()([{id:p,type:m,data:h}].concat(T(e.currentStory&&e.currentStory.resources||[])),"id"),e);case E.vb:return(0,S.t8)("mode",t.mode,e);case E.QK:var b=t.id,P=t.mediaType,k=t.data,M=(0,S.cc)("currentStory.resources",{id:b,type:P,data:k},{id:b},e);return P===O.Tr.MAP&&e.currentStory.sections.filter((function(e){return e.type!==O.ID.CAROUSEL})).reduce((function(e,t){return[].concat(T(e),T(x(b,"sections[",t)))}),[]).map((function(t){var n=(0,O.Ll)("currentStory.".concat(t,".map"),e);M=(0,S.t8)(n,void 0,M)})),M;case E.Ro:var N=t.id,A=t.mediaType,R=(0,S.z6)("currentStory.resources",{id:N},e);return e.currentStory.sections.reduce((function(e,t){return[].concat(T(e),T(x(N,"sections[",t)))}),[]).map((function(t){var n=(0,O.Ll)("currentStory.".concat(t,".resourceId"),e);if(R=(0,S.zN)(n,R),A===O.Tr.MAP){var r=(0,O.Ll)("currentStory.".concat(t,".map"),e);R=(0,S.zN)(r,R)}})),R;case E.lX:return(0,S.t8)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,(0,S.t8)("loading",t.value,e));case E.Dq:var U=t.path,_=(0,O.Ll)("currentStory.".concat(U),e),L=T(_),Z=L.pop(),z=o()(e,L);return y()(z)?(a()(Z)&&(Z=parseInt(Z,10)),(0,S.t8)(L,[].concat(T(z.slice(0,Z)),T(z.slice(Z+1))),e)):(0,S.zN)(_,e);case E.ij:var B,H,Y,F,q,W=e.defaultSettings||{},X=t.story.settings||W,K=(null===(B=X)||void 0===B||null===(H=B.theme)||void 0===H?void 0:H.fontFamilies)||[],Q=null===(Y=e.currentStory)||void 0===Y||null===(F=Y.settings)||void 0===F||null===(q=F.theme)||void 0===q?void 0:q.fontFamilies;return Q&&Q.length>0&&(X=(0,S.t8)("theme.fontFamilies",w()([].concat(T(Q),T(K)),"family"),X)),(0,S.t8)("currentStory",C(C({},t.story),{},{settings:X}),e);case E.i2:return(0,S.t8)("selectedCard",e.selectedCard===t.card?"":t.card,e);case E.IY:var G=t.control,V=t.value;return(0,S.t8)("controls.".concat(G),V,e);case E.Zf:var $=t.resource,J=e.currentStory&&e.currentStory.settings||{};return(0,S.qC)((0,S.t8)("resource",$),(0,S.t8)("currentStory.settings.storyTitle",J.storyTitle||$.name))(e);case E.si:case E.KT:return(0,S.zN)("errors.save",e);case E.SW:return(0,S.t8)("errors.save",g()(t.error),e);case E.Mk:return(0,S.t8)("isCollapsed",!e.isCollapsed,e);case E.NZ:var ee=o()(e,"currentStory.settings.".concat(t.option));return(0,S.t8)("currentStory.settings.".concat(t.option),!ee,e);case E.c:var te=!e.isSettingsEnabled,ne=e.currentStory&&e.currentStory.settings||{};return(0,S.qC)((0,S.t8)("isSettingsEnabled",te),(0,S.t8)("oldSettings",te?ne:{}),(0,S.t8)("currentStory.settings",te?C({},ne):t.withSave?ne:e.oldSettings))(e);case E.wb:var re=t.path,oe=t.mode,ie=t.element,ae=(0,O.Ll)("currentStory.".concat(re),e),ce=o()(e,ae);return v()(ce)&&v()(ie)&&"merge"===oe&&(ie=C(C({},ce),ie)),y()(ce)&&y()(ie)&&"merge"===oe&&(ie=[].concat(T(ce),T(ie))),(0,S.t8)(ae,ie,e);case E.km:return(0,S.t8)("currentStory.settings.".concat(t.prop),t.value,e);case E.un:if(t.columnId){var ue=d()(e.currentStory.sections,(function(e){return d()(e.contents,{id:t.columnId})}));return ue&&d()(ue.contents,{id:t.columnId})?(0,S.t8)("currentPage",C(C({},e.currentPage),{},{columns:C(C({},e.currentPage.columns),{},j({},ue.id,t.columnId))}),e):e}return(0,S.t8)("currentPage",C(C({},e.currentPage),{},{sectionId:t.sectionId}),e);case E.Cx:var se=t.status,le=t.target,fe=t.selector,de=void 0===fe?"":fe,pe=t.hideContent,ve=void 0!==pe&&pe,me=t.path,ye=se?{target:le,selector:de,hideContent:ve,path:me}:void 0;return(0,S.t8)("focusedContent",ye,e);case E.jr:return(0,S.t8)("pendingChanges",t.value,e);case E.ZY:return(0,S.t8)("updateUrlOnScroll",t.value,e);case E.EQ:return(0,S.t8)("mediaEditorSettings",t.mediaEditorSettings,e);case E.W$:if(t.sectionId){var he=d()(e.currentStory.sections,(function(e){return d()(e.contents,{id:t.showContentId})}));return he&&d()(he.contents,{id:t.showContentId})?(0,S.t8)("currentStory",C(C({},e.currentStory),{},{sections:(0,O.eI)(e.currentStory.sections,t)}),e):e}return e;case E.mk:return(0,S.t8)("drawOptions",t.drawOptions,e);default:return e}}},23279:(e,t,n)=>{var r=n(13218),o=n(7771),i=n(14841),a=Math.max,c=Math.min;e.exports=function(e,t,n){var u,s,l,f,d,p,v=0,m=!1,y=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=u,r=s;return u=s=void 0,v=t,f=e.apply(r,n)}function b(e){return v=e,d=setTimeout(S,t),m?g(e):f}function w(e){var n=e-p;return void 0===p||n>=t||n<0||y&&e-v>=l}function S(){var e=o();if(w(e))return O(e);d=setTimeout(S,function(e){var n=t-(e-p);return y?c(n,l-(e-v)):n}(e))}function O(e){return d=void 0,h&&u?g(e):(u=s=void 0,f)}function E(){var e=o(),n=w(e);if(u=arguments,s=this,p=e,n){if(void 0===d)return b(p);if(y)return clearTimeout(d),d=setTimeout(S,t),g(p)}return void 0===d&&(d=setTimeout(S,t)),f}return t=i(t)||0,r(n)&&(m=!!n.leading,l=(y="maxWait"in n)?a(i(n.maxWait)||0,t):l,h="trailing"in n?!!n.trailing:h),E.cancel=function(){void 0!==d&&clearTimeout(d),v=0,u=p=s=d=void 0},E.flush=function(){return void 0===d?f:O(o())},E}},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}},19081:(e,t,n)=>{"use strict";e.exports=n(1174)},80628:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(67294),o=n.n(r),i=n(55553);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}const v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleWidth:!0,handleHeight:!0};return function(n){function r(){return c(this,r),l(this,f(r).apply(this,arguments))}return d(r,n),s(r,[{key:"render",value:function(){return o().createElement(i.Z,t,o().createElement(e,this.props))}}]),r}(r.Component)}},45338:(e,t,n)=>{"use strict";n.d(t,{QS:()=>m});var r=n(67294),o=n.n(r),i=n(45697),a=n.n(i);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var u={preventDefaultTouchmoveEvent:!1,delta:10,rotationAngle:0,trackMouse:!1,trackTouch:!0},s={xy:[0,0],swiping:!1,eventData:void 0,start:void 0},l="mousemove",f="mouseup";function d(e,t){if(0===t)return e;var n=Math.PI/180*t;return[e[0]*Math.cos(n)+e[1]*Math.sin(n),e[1]*Math.cos(n)-e[0]*Math.sin(n)]}function p(e,t){var n=function(t){t.touches&&t.touches.length>1||e((function(e,n){n.trackMouse&&(document.addEventListener(l,r),document.addEventListener(f,i));var o=t.touches?t.touches[0]:t,a=d([o.clientX,o.clientY],n.rotationAngle);return c({},e,s,{eventData:{initial:[].concat(a),first:!0},xy:a,start:t.timeStamp||0})}))},r=function(t){e((function(e,n){if(!e.xy[0]||!e.xy[1]||t.touches&&t.touches.length>1)return e;var r=t.touches?t.touches[0]:t,o=d([r.clientX,r.clientY],n.rotationAngle),i=o[0],a=o[1],u=e.xy[0]-i,s=e.xy[1]-a,l=Math.abs(u),f=Math.abs(s),p=(t.timeStamp||0)-e.start,v=Math.sqrt(l*l+f*f)/(p||1);if(l<n.delta&&f<n.delta&&!e.swiping)return e;var m=function(e,t,n,r){return e>t?n>0?"Left":"Right":r>0?"Up":"Down"}(l,f,u,s),y=c({},e.eventData,{event:t,absX:l,absY:f,deltaX:u,deltaY:s,velocity:v,dir:m});n.onSwiping&&n.onSwiping(y);var h=!1;return(n.onSwiping||n.onSwiped||n["onSwiped"+m])&&(h=!0),h&&n.preventDefaultTouchmoveEvent&&n.trackTouch&&t.cancelable&&t.preventDefault(),c({},e,{eventData:c({},y,{first:!1}),swiping:!0})}))},o=function(t){e((function(e,n){var r;return e.swiping&&(r=c({},e.eventData,{event:t}),n.onSwiped&&n.onSwiped(r),n["onSwiped"+r.dir]&&n["onSwiped"+r.dir](r)),c({},e,s,{eventData:r})}))},i=function(e){document.removeEventListener(l,r),document.removeEventListener(f,i),o(e)},a=function(e){if(e&&e.addEventListener){var t=[["touchstart",n],["touchmove",r],["touchend",o]];return t.forEach((function(t){var n=t[0],r=t[1];return e.addEventListener(n,r)})),function(){return t.forEach((function(t){var n=t[0],r=t[1];return e.removeEventListener(n,r)}))}}},u={ref:function(t){null!==t&&e((function(e,n){if(e.el===t)return e;var r={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),r.cleanUpTouch=null),n.trackTouch&&t&&(r.cleanUpTouch=a(t)),c({},e,{el:t},r)}))}};return t.trackMouse&&(u.onMouseDown=n),[u,a]}function v(e,t,n){var r={};return!t.trackTouch&&e.cleanUpTouch?(e.cleanUpTouch(),r.cleanUpTouch=null):t.trackTouch&&!e.cleanUpTouch&&e.el&&(r.cleanUpTouch=n(e.el)),c({},e,r)}function m(e){var t=e.trackMouse,n=o().useRef(c({},s,{type:"hook"})),r=o().useRef();r.current=c({},u,e);var i=o().useMemo((function(){return p((function(e){return n.current=e(n.current,r.current)}),{trackMouse:t})}),[t]),a=i[0],l=i[1];return n.current=v(n.current,r.current,l),a}var y=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._set=function(e){n.transientState=e(n.transientState,n.props)},n.transientState=c({},s,{type:"class"}),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.className,n=e.style,r=e.nodeName,i=void 0===r?"div":r,a=e.innerRef,u=e.children,s=e.trackMouse,l=p(this._set,{trackMouse:s}),f=l[0],d=l[1];this.transientState=v(this.transientState,this.props,d);var m=a?function(e){return a(e),f.ref(e)}:f.ref;return o().createElement(i,c({},f,{className:t,style:n,ref:m}),u)},r}(o().PureComponent);y.propTypes={onSwiped:a().func,onSwiping:a().func,onSwipedUp:a().func,onSwipedRight:a().func,onSwipedDown:a().func,onSwipedLeft:a().func,delta:a().number,preventDefaultTouchmoveEvent:a().bool,nodeName:a().string,trackMouse:a().bool,trackTouch:a().bool,innerRef:a().func,rotationAngle:a().number},y.defaultProps=u}}]);