(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1052],{10232(e,t,r){var n=r(11711),o=n.filter,i=n.fidFilter;e.exports={fidFilter:i,filter:o}},223062(e,t,r){"use strict";r.d(t,{$A:()=>G,$P:()=>we,AM:()=>te,AW:()=>Q,Ap:()=>$,Bb:()=>Ee,Bo:()=>Ae,CS:()=>Le,DB:()=>N,Dt:()=>Fe,EV:()=>u,Fc:()=>J,Gs:()=>oe,Jd:()=>ne,Js:()=>ce,Ke:()=>de,Kh:()=>pe,Lp:()=>A,MI:()=>_,Mj:()=>v,PN:()=>U,Q5:()=>C,QJ:()=>R,Ro:()=>I,Rx:()=>j,T:()=>y,TF:()=>p,TK:()=>F,TS:()=>Pe,Tk:()=>_e,Tq:()=>T,Ur:()=>q,Vq:()=>je,Wu:()=>Oe,XD:()=>De,Xb:()=>S,YX:()=>fe,Zi:()=>ye,Zs:()=>x,Zv:()=>se,bA:()=>Me,bB:()=>be,bY:()=>Ie,cH:()=>H,cL:()=>Te,ds:()=>O,eQ:()=>f,et:()=>Z,g:()=>re,g5:()=>D,g8:()=>X,gJ:()=>i,hA:()=>Se,hT:()=>ue,hX:()=>me,hr:()=>a,hz:()=>V,j3:()=>E,jR:()=>z,k8:()=>b,kR:()=>k,lS:()=>ee,m5:()=>s,mj:()=>B,pp:()=>d,pr:()=>l,qG:()=>K,qS:()=>ae,qT:()=>m,qi:()=>g,qq:()=>L,qu:()=>ge,rQ:()=>Y,ue:()=>W,vH:()=>c,vT:()=>le,wK:()=>Re,wd:()=>ie,y$:()=>P,yP:()=>ve,yq:()=>w,yz:()=>M,ze:()=>h});var n=r(995531);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i="ADD_FILTER_FIELD",a="REMOVE_FILTER_FIELD",u="UPDATE_FILTER_FIELD",c="UPDATE_EXCEPTION_FIELD",l="ADD_GROUP_FIELD",f="UPDATE_LOGIC_COMBO",s="REMOVE_GROUP_FIELD",p="CHANGE_CASCADING_VALUE",d="EXPAND_ATTRIBUTE_PANEL",y="EXPAND_SPATIAL_PANEL",g="QUERYFORM:EXPAND_CROSS_LAYER",b="QUERYFORM:SET_CROSS_LAYER_PARAMETER",v="QUERYFORM:RESET_CROSS_LAYER_FILTER",m="SELECT_SPATIAL_METHOD",O="SELECT_VIEWPORT_SPATIAL_METHOD",S="UPDATE_GEOMETRY",w="SELECT_SPATIAL_OPERATION",E="CHANGE_SPATIAL_ATTRIBUTE",T="CHANGE_SPATIAL_FILTER_VALUE",h="REMOVE_SPATIAL_SELECT",P="SHOW_SPATIAL_DETAILS",F="QUERY_FORM_SEARCH",_="QUERY_FORM_RESET",A="SHOW_GENERATED_FILTER",j="CHANGE_DWITHIN_VALUE",R="ZONE_SEARCH",I="ZONE_SEARCH_ERROR",M="ZONE_FILTER",L="ZONE_CHANGE",D="ZONES_RESET",G="SIMPLE_FILTER_FIELD_UPDATE",N="ADD_SIMPLE_FILTER_FIELD",C="REMOVE_SIMPLE_FILTER_FIELD",U="REMOVE_ALL_SIMPLE_FILTER_FIELDS",x="UPDATE_FILTER_FIELD_OPTIONS",k="LOADING_FILTER_FIELD_OPTIONS",V="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",Y="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",H="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",Q="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD_OPTIONS",X="SET_AUTOCOMPLETE_MODE",W="TOGGLE_AUTOCOMPLETE_MENU",q="QUERYFORM:LOAD_FILTER",B="QUERYFORM:UPSERT_FILTERS",z="QUERYFORM:REMOVE_FILTERS",K="QUERYFORM:CHANGE_MAP_EDITOR",$=function(e){return{type:K,mapData:e}};function Z(e){return{type:i,groupId:e}}function J(e,t){return{type:l,groupId:e,index:t}}function ee(e){return{type:a,rowId:e}}function te(e,t){return{type:W,rowId:e,status:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function re(e,t,r,n){return{type:u,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function ne(e,t){return{type:c,rowId:e,exceptionMessage:t}}function oe(e,t){return{type:f,groupId:e,logic:t}}function ie(e){return{type:X,status:e}}function ae(e){return{type:s,groupId:e}}function ue(e){return{type:p,attributes:e}}function ce(e){return{type:d,expand:e}}function le(e){return{type:y,expand:e}}function fe(e){return{type:g,expand:e}}function se(e,t){return{type:b,key:e,value:t}}function pe(e,t){return{type:m,fieldName:t,method:e}}function de(){return{type:O}}function ye(e){return{type:S,geometry:e}}function ge(e,t){return{type:w,fieldName:t,operation:e}}function be(e){return{type:E,attribute:e}}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:T,value:a,collectGeometries:n,options:i,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function me(){return{type:h}}function Oe(e){return{type:P,show:e}}function Se(e){return{type:j,distance:e}}function we(e,t){return{type:F,searchUrl:e,filterObj:t}}function Ee(e){return{type:q,filter:e}}function Te(e){return{type:_,skip:e}}function he(e,t){return{type:I,error:e,id:t}}function Pe(e,t){return{type:R,active:e,id:t}}function Fe(e,t,r){return function(i){return n.A.post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then(function(n){var a=n.data;if("object"!==o(a))try{a=JSON.parse(a)}catch(n){i(he("Search result broken ("+e+":   "+t+"): "+n.message,r))}i(function(e,t){return{type:M,data:e,id:t}}(a,r)),i(Pe(!1,r))}).catch(function(e){i(he(e,r))})}}function _e(e,t){return{type:L,id:e,value:t}}function Ae(e){return{type:V,rowId:(new Date).getTime(),groupId:e}}function je(e,t,r,n){return{type:Y,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function Re(e){return{type:H,rowId:e}}function Ie(){return{type:v}}function Me(e,t){return{type:k,status:e,filterField:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function Le(e,t,r){return{type:x,filterField:e,options:t,valuesCount:r}}function De(e,t,r){return{type:Q,filterField:e,options:t,valuesCount:r}}},256545(e){e.exports={transaction:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.wfsNS,o=void 0===n?"wfs":n,i=r.wfsVersion,a=void 0===i?"1.1.0":i;return"<".concat(o,":Transaction ")+'service="WFS" '+'version="'.concat(a,'" ')+"xmlns:".concat(o,'="http://www.opengis.net/wfs" ')+'xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs" '+"".concat(t,">")+"".concat(Array.isArray(e)?e.join(""):e)+"</".concat(o,":Transaction>")}}},256688(e,t,r){"use strict";r.d(t,{GL:()=>n,KO:()=>i,Ll:()=>u,Xb:()=>a,qv:()=>o});var n="HIGHLIGHT_STATUS",o="UPDATE_HIGHLIGHTED",i="HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH";function a(e){return{type:i,featuresPath:e}}function u(e,t){return{type:o,features:e,status:t}}},432267(e,t,r){"use strict";r.d(t,{A3:()=>v,BH:()=>T,G_:()=>y,dz:()=>P,fV:()=>O,jy:()=>g,kd:()=>m,ng:()=>F,nh:()=>E,u6:()=>b,xY:()=>w,yE:()=>h,zv:()=>S});var n=r(978632),o=r.n(n),i=r(801081),a=r(307679),u=r(508828),c=r(628017);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var f=["title"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){return o()(e,"queryform.map")},g=function(e){return o()(e,"queryform.crossLayerFilter")},b=function(e){return((0,a.Kv)(e)||[]).filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.group;return"wms"===t&&"background"!==r}).map(function(t){var r=t.title;return p(p({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,f)),{},{title:(0,c.zH)((0,u.Pd)(e),r)})})},v=function(e){return o()(e,"queryform.spatialField.geometry")},m=function(e){return o()(e,"queryform.spatialField")},O=(0,i.Mz)(function(e){return o()(e,"queryform.attributePanelExpanded")},function(e){return o()(e,"queryform.spatialPanelExpanded")},function(e){return o()(e,"queryform.crossLayerExpanded")},function(e,t,r){return{attributePanelExpanded:e,spatialPanelExpanded:t,crossLayerExpanded:r}}),S=function(e){return o()(e,"layerFilter.persisted")},w=function(e){return o()(e,"layerFilter.applied")},E=function(e){return o()(e,"queryform.spatialField.method")},T=function(e){return o()(e,"queryform.maxFeaturesWPS")},h=function(e){return v(e)&&v(e).type||"Polygon"},P=function(e){return v(e)&&v(e).projection||"EPSG =4326"},F=function(e){return v(e)&&v(e).coordinates||[]}},538359(e,t,r){"use strict";r.d(t,{BD:()=>y,IO:()=>v,X0:()=>d,Zp:()=>p,ht:()=>g,uP:()=>b});var n=r(978632),o=r.n(n),i=r(802401),a=r.n(i),u=r(307679),c=r(401631),l=r(588100),f=r(112585),s=r(508828),p=function(e){var t,r;return!(null==e||null===(t=e.draw)||void 0===t||!t.snappingLayer)&&(null!==(r=(0,u.pO)(e,e.draw.snappingLayer))&&void 0!==r?r:(0,u._x)(e,e.draw.snappingLayer))},d=function(e){return o()(e,"draw.snapping",!1)},y=function(e){return o()(e,"draw.snappingIsLoading",!1)},g=function(e){return o()(e,"draw.snapConfig",!1)},b=function(e){return o()(e,"draw.drawOwner","")},v=(0,l.UU)(function(e,t){return e===t||a()(e)&&a()(t)&&(null==e?void 0:e.id)===(null==t?void 0:t.id)&&(null==e?void 0:e.title)===(null==t?void 0:t.title)&&(null==e?void 0:e.visibility)===(null==t?void 0:t.visibility)})([u.Kv,u.d1,c.IT,p,g,s.Pd],function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=null==n?void 0:n.id,u=null==r?void 0:r.id,c=t.filter(function(e){var t;return(null!==(t=null==o?void 0:o.additionalLayers)&&void 0!==t?t:[]).includes(e.id)}).map(function(e){return e.options}).concat(e);return(u?[{value:u,label:(0,f.ez)(r,i),active:u===a}]:[]).concat(c.map(function(e){var t;return!(e.id===u||!["wms","wfs","vector"].includes(null==e?void 0:e.type)||"wms"===(null==e?void 0:e.type)&&"wfs"!==(null==e||null===(t=e.search)||void 0===t?void 0:t.type)||"background"===e.group||!e.visibility)&&{value:e.id,label:(0,f.ez)(e,i),active:e.id===a}}).filter(Boolean))})},654456(e,t,r){"use strict";r.d(t,{GW:()=>l,IY:()=>i,Ii:()=>m,Jj:()=>g,KF:()=>u,LO:()=>O,Lk:()=>_,Lm:()=>n,MN:()=>T,Mb:()=>E,P:()=>R,Rb:()=>y,UR:()=>S,V8:()=>b,VZ:()=>j,Ve:()=>p,Xi:()=>v,Z4:()=>h,ZJ:()=>a,_Z:()=>d,cv:()=>f,f4:()=>s,jF:()=>w,oR:()=>A,pF:()=>c,qD:()=>o,qu:()=>F,x5:()=>P}),r(995531);var n="LAYER_SELECTED_FOR_SEARCH",o="FEATURE_TYPE_SELECTED",i="FEATURE_TYPE_LOADED",a="FEATURE_LOADED",u="FEATURE_LOADING",c="FEATURE_TYPE_ERROR",l="FEATURE_ERROR",f="QUERY_CREATE",s="QUERY:UPDATE_QUERY",p="QUERY_RESULT",d="QUERY_ERROR",y="RESET_QUERY",g="QUERY",b="INIT_QUERY_PANEL",v="QUERY:TOGGLE_SYNC_WMS",m="QUERY:TOGGLE_LAYER_FILTER";function O(){return{type:v}}function S(){return{type:m}}function w(){return{type:b}}function E(e,t){return{type:o,url:e,typeName:t,fields:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],owner:arguments.length>3?arguments[3]:void 0}}function T(e,t,r){return{type:i,typeName:e,featureType:t,owner:r}}function h(e,t){return{type:c,typeName:e,error:t}}function P(e){return{type:u,isLoading:e}}function F(e,t,r,n,o){return{type:p,searchUrl:t,filterObj:r,result:e,queryOptions:n,reason:o}}function _(e){return{type:d,error:e}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updates,r=e.reason,n=e.useLayerFilter;return{type:s,updates:t,reason:r,useLayerFilter:n}}function j(e,t,r){return{type:f,searchUrl:e,filterObj:t,owner:r}}function R(e,t,r,n){return{type:g,searchUrl:e,filterObj:t,queryOptions:r,reason:n}}},676880(e){var t=function(e,t,r){return"<".concat(e?e+":"+t:t,">").concat(Array.isArray(r)?r.join(""):r,"</").concat(e?e+":"+t:t,">")},r=t,n=t;e.exports={insert:function(e,t){return"<".concat(e,":Insert>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Insert>")},feature:n,attribute:r}},690461(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>dr});var n={};r.r(n),r.d(n,{activateBoxSelectionTool:()=>He,activateGeometryFilter:()=>ze,activateSyncWmsFilterOnFeatureGridOpen:()=>Ft,activateTemporaryChangesEpic:()=>We,askChangesConfirmOnFeatureGridClose:()=>yt,autoCloseFeatureGridEpicOnDrowerOpen:()=>dt,autoReopenFeatureGridOnFeatureInfoClose:()=>mt,closeFeatureGridOnDrawingToolOpen:()=>it,closeIdentifyWhenOpenFeatureGrid:()=>Et,closeRightPanelOnFeatureGridOpen:()=>ot,deactivateBoxSelectionTool:()=>Qe,deactivateGeometryFilter:()=>Be,deactivateSyncWmsFilterOnFeatureGridClose:()=>Pt,deactivateViewportFilterEpic:()=>Nt,deleteGeometryFeature:()=>ut,deleteSelectedFeatureGridFeatures:()=>et,disableMultiSelect:()=>ke,enableGeometryFilterOnEditMode:()=>xe,featureGridBrowseData:()=>Me,featureGridChangePage:()=>Ke,featureGridLayerSelectionInitialization:()=>Le,featureGridReloadPageOnSaveSuccess:()=>$e,featureGridSort:()=>Ge,featureGridStartupQuery:()=>De,featureGridUpdateGeometryFilter:()=>Ne,featureGridUpdateTextFilters:()=>Ue,handleBoxSelectionDrawEnd:()=>Ye,handleClickOnMap:()=>Ve,handleDrawFeature:()=>rt,handleEditFeature:()=>tt,handleGeometryFilterActivation:()=>qe,hideDrawerOnFeatureGridOpenMobile:()=>It,hideFeatureGridOnDrawerOpenMobile:()=>Rt,launchUpdateFilterEpic:()=>Ce,onClearChangeConfirmedFeatureGrid:()=>gt,onCloseFeatureGridConfirmed:()=>bt,onFeatureGridCreateNewFeature:()=>lt,onFeatureGridGeometryEditing:()=>at,onFeatureGridZoomAll:()=>St,onOpenAdvancedSearch:()=>Ot,removeWmsFilterOnGridClose:()=>vt,replayOnTimeDimensionChange:()=>jt,resetControlsOnEnterInEditMode:()=>wt,resetEditingOnFeatureGridClose:()=>nt,resetGridOnLocationChange:()=>st,resetQueryPanel:()=>pt,resetSnappingLayerOnFeatureGridClosed:()=>Lt,resetViewportFilter:()=>Ct,savePendingFeatureGridChanges:()=>Je,selectFeaturesOnMapClickResult:()=>Xe,setDefaultSnappingLayerOnFeatureGridOpen:()=>Mt,setHighlightFeaturesPath:()=>ft,setViewportFilterEpic:()=>Gt,startSyncWmsFilter:()=>Tt,stopSyncWmsFilter:()=>ht,syncMapWmsFilter:()=>_t,toggleSnappingOffOnFeatureGridViewMode:()=>Dt,triggerDrawSupportOnSelectionChange:()=>ct,updateSelectedOnSaveOrCloseFeatureGrid:()=>Ze,virtualScrollLoadFeatures:()=>At});var o=r(273517),i=r.n(o),a=r(811668),u=r(801081),c=r(809136),l=r.n(c),f=r(393149),s=r(45388),p=r.n(s),d=r(978632),y=r.n(d),g=r(962028),b=r.n(g),v=r(227341),m=r.n(v),O=r(356513),S=r.n(O),w=r(39128),E=r.n(w),T=r(685591),h=r.n(T),P=r(642792),F=r.n(P),_=r(980971),A=r(995531),j=r(382378),R=r.n(j),I=r(525859),M=r(717140),L=r(676880),D=r(256545),G=r(738134),N=r(756520),C=r(214158),U=r(193275);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}var k=["wfsVersion","wfsNS"];function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach(function(t){H(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function H(e,t,r){return(t=function(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var X=function(e,t){return t&&t.length>0?[e].concat(function(e){if(Array.isArray(e))return Q(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e;var r},W=function(e){this.version=e},q=function(e){return y()(e,"featureTypes[0].typeName")},B=function(e){return e.targetPrefix?"".concat(e.targetPrefix,":").concat(q(e)):q(e)},z=function(e,t){return e.geometry_name||(0,C.lr)(t).name};function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wfsVersion,n=void 0===r?"1.1.0":r,o=t.wfsNS,i=void 0===o?"wfs":o,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,k);if("1.1.0"!==n)throw new W(n);var u=function(t){return(0,L.feature)(e.targetPrefix,q(e),Object.keys(t.properties||[]).filter(function(t){return(0,C.Nx)(t,e)}).map(function(r){return(0,L.attribute)(e.targetPrefix,r,(0,C._W)(t.properties[r],r,e))}).concat(t.geometry?(0,L.attribute)(e.targetPrefix,z(t,e),(0,C._W)(t.geometry,z(t,e),e)):[]))},c=function(e){return e.features?e.features.map(u):u(e)};return Y(Y({},(0,U.A)(Y(Y({},a),{},{wfsVersion:n,wfsNS:i}))),{},{insert:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return(0,L.insert)(i,Array.isArray(X(e,r))?X(e,r).map(c):c(e))},getPropertyName:function(t){return function(e,t){return"geometry"===e||e===z({},t)?z({},t):e}(t,e)},deleteByFilter:function(t){return(0,G.deleteFeaturesByFilter)(i,t,B(e))},deleteFeature:function(t){return(0,G.deleteFeature)(i,t,B(e))},update:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return(0,N.update)(i,B(e),X(t,n))},propertyChange:function(t,r){return(0,N.propertyChange)(i,t,(0,C._W)(r,t,e))},transaction:function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return(0,D.transaction)(X(t,o),(0,C.i3)(e),n,i)}})}var $=r(812366),Z=r(654456),J=r(223062),ee=r(273494),te=r(759457),re=r(131127),ne=r(904059),oe=r(762686),ie=r(415392),ae=r(130711),ue=r(256688),ce=r(401631),le=r(883832),fe=r(806653),se=r(492312),pe=r(432267),de=r(538359),ye=r(102685),ge=r(764932),be=r(6683),ve=r(97401),me=r(967858),Oe=r(747135),Se=r(444003);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Ee(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach(function(t){Fe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Fe(e,t,r){return(t=function(e){var t=function(e){if("object"!=we(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==we(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.page,n=t.size,o=(0,ce._w)(e),i=void 0!==n?n:o.size;return{startIndex:void 0!==r?r*i:o.page*i,maxFeatures:i}},Ae=function(e,t){return Pe(Pe({},e),{},{pagination:t})},je=function(e,t){return p().Observable.defer(function(){return A.A.post(e,t,{headers:{"Content-Type":"application/xml"}})}).let(se.m9)},Re=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featuregrid;return(0,ne.ju)(e.selectedLayer,{filterObj:void 0})},Ie=function(e){return function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.update,o=void 0===n?{}:n,i=r.append,a=(0,ce.IT)(e.getState()).id,u=Pe({},y()(e.getState(),'featuregrid.advancedFilters["'.concat(a,'"]')));if(u){var c=(0,ce.MX)(e.getState())||{},l=F()(c,function(e,t,r){return(0,I.ej)(Pe({attribute:r},t),e)},{}),f="AND";l.spatialField&&(u.spatialField=void 0,f=l.spatialFieldOperator);var s=(0,ye.mA)([u,l],"AND",f),p=Pe(Pe({},u),s);return(0,Z.oR)({updates:p,reason:null==o?void 0:o.type})}var d=o;return i&&null!=o&&o.attribute&&(d=(0,ce.MX)(e.getState())[null==o?void 0:o.attribute]),(0,Z.oR)({updates:(0,I.ej)(d,(0,fe.fQ)(e.getState())),reason:null===(t=d)||void 0===t?void 0:t.type})}},Me=function(e,t){return e.ofType(ne.mU).switchMap(function(r){var n,o=r.layer,i=y()(t.getState(),"query.typeName");return(n=p().Observable).of.apply(n,Ee(i!==o.name?[(0,J.cL)()]:[]).concat([(0,ie.fN)("drawer","enabled",!1),(0,oe.wT)(o.id),(0,oe.JM)()])).merge(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.url,o=r.name,i=r.id,a=r.fields,u=y()(t.getState(),'featuregrid.advancedFilters["'.concat(i,'"]'));return p().Observable.of((0,Z.Mb)(n,o,a)).merge(e.ofType(Z.IY).filter(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).typeName===o}).map(function(e){return(0,Z.VZ)(n,u||{featureTypeName:o,filterType:"OGC",ogcVersion:"1.1.0"},e.owner)}))}(e,t,o))})},Le=function(e){return e.ofType(Z.Lm).switchMap(function(e){return p().Observable.of((0,oe.wT)(e.id))})},De=function(e,t){return e.ofType(Z.cv).switchMap(function(e){var r=e.owner;return p().Observable.of((0,oe.yd)(0)).concat((0,ce.XU)(t.getState())===oe.FN.VIEW&&"widgets"!==r?p().Observable.of((0,oe.fk)()):p().Observable.empty())})},Ge=function(e,t){return e.ofType(oe.Hu).switchMap(function(r){var n=r.sortBy,o=r.sortOrder;return p().Observable.of((0,Z.P)((0,fe.yr)(t.getState()),Ae(Pe(Pe({},(0,fe.fQ)(t.getState())),{},{sortOptions:{sortBy:n,sortOrder:o}}),_e(t.getState())),(0,ce.cu)(t.getState()))).merge(e.ofType(Z.Ve).map(function(e){return(0,oe.y3)(y()(e,"result.features",[]),[y()(e,"filterObj.pagination.startIndex")])}).takeUntil(e.ofType(Z._Z)).take(1))})},Ne=function(e,t){return e.ofType(oe.Pn).switchMap(function(){var r,n=null===(r=(0,ce._w)(t.getState()))||void 0===r?void 0:r.size;return e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.value}).switchMap(function(){var r=!1;return e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.deactivated}).switchMap(function(e,n){return 0===n?(r=!0,p().Observable.from([(0,oe.Bp)(1e5),(0,oe.N7)([]),Ie(t)(e)])):p().Observable.of(Ie(t)(e))}).takeUntil(p().Observable.merge(e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}),e.ofType(oe.lP,_.LK))).merge(e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}).take(1).switchMap(function(e){return r?p().Observable.of((0,oe.Bp)(n),Ie(t)(e)):p().Observable.of(Ie(t)(e))}).takeUntil(e.ofType(oe.lP,_.LK))).merge(e.ofType(oe.lP,_.LK).take(1).switchMap(function(){var e,o=(0,oe._9)({attribute:null===(e=(0,C.lr)((0,fe.r5)(t.getState())))||void 0===e?void 0:e.name,enabled:!1,type:"geometry"});return r?p().Observable.of((0,oe.Bp)(n),o,(0,oe.v2)(o)):p().Observable.of(o,(0,oe.v2)(o))}))})})},Ce=function(e,t){return e.ofType(oe.mq).switchMap(function(e){return p().Observable.of(Ie(t)(e.updateFilterAction))})},Ue=function(e,t){return e.ofType(Z.cv).switchMap(function(){return e.ofType(oe.bS).filter(function(e){var t=e.update;return"geometry"!==(void 0===t?{}:t).type}).map(Ie(t))})},xe=function(e,t){return e.ofType(oe.Bg).filter(function(){return(0,ce.XU)(t.getState())===oe.FN.EDIT}).switchMap(function(){return(S()((0,ce.MX)(t.getState()),function(e){return"geometry"===e.type})||{}).value?p().Observable.empty():p().Observable.of((0,oe._9)({attribute:(0,C.lr)((0,fe.r5)(t.getState())).name,enabled:!0,type:"geometry"}))})},ke=function(e){return e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}).switchMap(function(){return p().Observable.of((0,oe.$w)({multiselect:!1}))})},Ve=function(e,t){return e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled}).switchMap(function(){return e.ofType(ee.a2).switchMap(function(e){var r,n=e.point,o=n.latlng,i=n.pixel,a=n.modifiers,u=a.ctrl,c=a.metaKey,l=S()((0,ce.MX)(t.getState()),function(e){return"geometry"===e.type})||{},f=(0,re.Bg)(t.getState()),s=ge.default.reproject([o.lng,o.lat],"EPSG:4326",f),d=be.Ay.getHook(be.Ay.GET_COORDINATES_FROM_PIXEL_HOOK),g=ge.default.calculateCircleRadiusFromPixel(d,i,s,4);return l.deactivated?p().Observable.empty():p().Observable.of((0,oe.$w)({multiselect:null!==(r=u||c)&&void 0!==r&&r}),(0,oe._9)(Pe(Pe({},l),{},{value:{attribute:l.attribute||y()((0,pe.kd)(t.getState()),"attribute"),geometry:{center:[s.x,s.y],coordinates:ge.default.calculateCircleCoordinates(s,g,12),extent:[s.x-g,s.y-g,s.x+g,s.y+g],projection:f,radius:g,type:"Polygon"},method:"Circle",operation:"INTERSECTS"}}),u||c))}).takeUntil(p().Observable.merge(e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}),e.ofType(_.LK)))})},Ye=function(e,t){return e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled}).switchMap(function(){return e.ofType(te.Q7).switchMap(function(e){var r,n=e.boxEndInfo,o=n.boxExtent,i=n.modifiers,a=i.ctrl,u=i.metaKey,c=ge.default.getPolygonFromExtent(o),l=(0,re.Bg)(t.getState()),f=S()((0,ce.MX)(t.getState()),function(e){return"geometry"===e.type})||{};return f.deactivated?p().Observable.empty():p().Observable.of((0,oe.$w)({multiselect:null!==(r=a||u)&&void 0!==r&&r}),(0,oe._9)(Pe(Pe({},f),{},{value:{geometry:Pe(Pe({},c.geometry),{},{projection:l}),attribute:f.attribute||y()((0,pe.kd)(t.getState()),"attribute"),method:"Rectangle",operation:"INTERSECTS"}}),a||u))}).takeUntil(p().Observable.merge(e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})))})},He=function(e){return e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled}).switchMap(function(){return p().Observable.of((0,te.Uo)("start"))})},Qe=function(e){return p().Observable.merge(e.ofType(oe.bS).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}),e.ofType(oe.lP)).switchMap(function(){return p().Observable.of((0,te.Uo)("end"))})},Xe=function(e,t){return e.ofType(Z.Ve).filter(function(e){return"geometry"===e.reason}).switchMap(function(e){var r=e.result,n=y()(r,"features"),o=(0,ce.M8)(t.getState()),i=S()((0,ce.MX)(t.getState()),function(e){return"geometry"===e.type});return p().Observable.of((0,oe.N7)(n.length>0&&i&&i.value?Ee(n):[],o))})},We=function(e){return e.ofType(oe.en).flatMap(function(e){var t=e.activated;return p().Observable.of((0,oe.MW)(t),(0,oe.RM)(t))})},qe=function(e,t){return e.ofType(oe.hD).flatMap(function(){var e=S()((0,ce.MX)(t.getState()),function(e){return"geometry"===e.type})||{},r=(0,ce.x_)(t.getState()),n=(0,ce.rV)(t.getState());return p().Observable.of((0,oe._9)(Pe(Pe({},e),{},{type:"geometry",attribute:e.attribute||y()((0,pe.kd)(t.getState()),"attribute"),deactivated:!(!r&&!n&&e.deactivated)})))})},Be=function(e,t){return p().Observable.merge(e.ofType(oe.hS,M.Q4,oe.L4,oe.IR),e.ofType(oe.V$).filter(function(e){return!!e.deactivated})).flatMap(function(){var e=S()((0,ce.MX)(t.getState()),function(e){return"geometry"===e.type})||{};return e.deactivated?p().Observable.empty():p().Observable.of((0,oe._9)(Pe(Pe({},e),{},{type:"geometry",attribute:e.attribute||y()((0,pe.kd)(t.getState()),"attribute"),deactivated:!0})))})},ze=function(e,t){return p().Observable.merge(e.ofType(oe.g$,oe.YL),e.ofType(oe.V$).filter(function(e){return!e.deactivated})).flatMap(function(){var e=S()((0,ce.MX)(t.getState()),function(e){return"geometry"===e.type})||{},r=(0,ce.x_)(t.getState()),n=(0,ce.rV)(t.getState());return!e.deactivated||r||n?p().Observable.empty():p().Observable.of((0,oe._9)(Pe(Pe({},e),{},{type:"geometry",attribute:e.attribute||y()((0,pe.kd)(t.getState()),"attribute"),deactivated:!1})))})},Ke=function(e,t){return e.ofType(oe.fJ).merge(e.ofType(Z.f4).debounceTime(500).map(function(e){return Pe(Pe({},e),{},{page:0})})).switchMap(function(r){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=t.size,o=t.reason,i=e.getState();return p().Observable.of((0,Z.P)((0,fe.yr)(i),Ae(Pe(Pe({},(0,fe.fQ)(i)),(0,ce.XH)(i)),_e(i,{page:r,size:n})),(0,ce.cu)(i),o))}}(t)(r).merge(e.ofType(Z.Ve).map(function(e){var r=y()(e,"result.features",[]),n=(0,ce.M8)(t.getState()),o=S()((0,ce.MX)(t.getState()),function(e){return"geometry"===e.type});return n&&null!=o&&o.enabled&&(r=(0,ce.e7)(t.getState())),(0,oe.y3)(r,[y()(e,"filterObj.pagination.startIndex")])}).take(1).takeUntil(e.ofType(Z._Z)))})},$e=function(e,t){return e.ofType(oe.g$).switchMap(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.page,o=r.size;return p().Observable.of((0,Z.P)((0,fe.yr)(t.getState()),Ae(Pe({},(0,fe.fQ)(t.getState())),_e(t.getState(),{page:n,size:o})),(0,ce.cu)(t.getState())),(0,ne.N3)((0,ce.Z)(t.getState()))).merge(e.ofType(Z.Ve).map(function(e){return p().Observable.of((0,oe.$m)(),(0,oe.y3)(y()(e,"result.features",[]),[y()(e,"filterObj.pagination.startIndex")]))}).mergeAll().takeUntil(e.ofType(Z._Z)).take(2))})},Ze=function(e){return e.ofType(oe.g$,oe.lP).switchMap(function(){return p().Observable.of((0,oe.N7)([]))})},Je=function(e,t){return e.ofType(oe.k_).switchMap(function(){return p().Observable.of((0,oe.dv)()).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return je(arguments.length>3?arguments[3]:void 0,(0,I.Y8)(e,t,K(r)))}((0,ce.HR)(t.getState()),(0,ce.zS)(t.getState()),(0,fe.r5)(t.getState()),(0,fe.yr)(t.getState())).map(function(){return(0,oe.Tw)()}).catch(function(e){return p().Observable.of((0,oe.Ek)(),(0,le.z3)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError",autoDismiss:5}))}))})},et=function(e,t){return e.ofType(oe.Sm).switchMap(function(){return p().Observable.of((0,oe.dv)()).concat((e=(0,ce.e7)(t.getState()),r=(0,fe.r5)(t.getState()),n=(0,fe.yr)(t.getState()),je(n,function(e,t){var r=t.transaction,n=t.deleteFeature;return r(e.map(n))}(e,K(r)))).map(function(){return(0,oe.Tw)()}).catch(function(e){return p().Observable.of((0,oe.Ek)(),(0,le.z3)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError"}))}).concat(p().Observable.of((0,oe.bU)("deleteConfirm"),(0,oe.wr)())));var e,r,n})},tt=function(e,t){return e.ofType(oe.fX).switchMap(function(){var e=t.getState(),r=(0,fe.r5)(e),n=(0,I.$Y)(),o=(0,C.lr)(r).localType,i={featureProjection:n,stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},a=Object.assign({},(0,ce.Vb)(e),{type:"Feature"}),u=(0,ce.HR)(e);return u[a.id]&&u[a.id]&&u[a.id].geometry&&(a.geometry=u[a.id].geometry),p().Observable.of((0,M.VX)("drawOrEdit",o,"featureGrid",[a],i))})},rt=function(e,t){return e.ofType(oe.hD).switchMap(function(){var e=t.getState(),r=(0,fe.r5)(e),n=(0,I.$Y)(),o=(0,C.lr)(r).localType,i=Object.assign({},(0,ce.Vb)(e),{type:"Feature"}),a=(0,ce.HR)(e);a[i.id]&&(a[i.id].geometry||null===a[i.id].geometry)&&(i.geometry=a[i.id].geometry),i._new&&(i.geometry=b()((0,ce.zS)(e)).geometry);var u={featureProjection:n,stopAfterDrawing:!0,editEnabled:!(0,ce.Ax)(e),drawEnabled:(0,ce.Ax)(e)};return p().Observable.of((0,M.VX)("drawOrEdit",o,"featureGrid",[i],u))})},nt=function(e,t){return e.ofType(oe.Pn).switchMap(function(){return e.ofType(oe.Bg).filter(function(){return(0,ce.XU)(t.getState())===oe.FN.EDIT}).take(1).switchMap(function(){return e.ofType(_.LK,oe.lP).take(1).switchMap(function(){return p().Observable.of((0,M.tq)())})})})},ot=function(e,t){return e.ofType(oe.Pn).switchMap(function(){var e=[],r=t.getState();return(0,ve.SU)(r).right.forEach(function(t){(0,ae.cU)(t)(r)&&e.push((0,ie.fN)(t,"enabled",!1))}),p().Observable.from(e)})},it=function(e,t){return(0,me.p)(e,t,"featureGrid",function(){return p().Observable.from([(0,oe.xp)()])},function(e){return(0,ce.py)(e)})},at=function(e,t){return e.ofType(M.Q4).filter(function(e){return"featureGrid"===e.owner}).delay(500).switchMap(function(e){var r=t.getState(),n={featureProjection:(0,I.$Y)(),stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},o=e.features.map(function(e,t){return Object.assign({},e,{id:(0,ce.e7)(r)[t].id,_new:(0,ce.e7)(r)[t]._new,type:"Feature"})}),i=Object.assign({},b()(e.features),{id:(0,ce.Vb)(r).id,_new:(0,ce.Vb)(r)._new,type:"Feature"}),a="enterEditMode"===e.enableEdit?p().Observable.of((0,M.VX)("drawOrEdit",i.geometry.type,"featureGrid",o,n)):p().Observable.empty();return p().Observable.of((0,oe.vK)(o)).concat(a)})},ut=function(e,t){return e.ofType(oe.L4).switchMap(function(){var e=t.getState();return p().Observable.from([(0,oe.GW)((0,ce.e7)(e)),(0,M.tq)()])})},ct=function(e,t){return e.ofType(oe.V_,oe.kH,oe.YL,oe.Bg).filter(function(){return(0,ce.XU)(t.getState())===oe.FN.EDIT&&(0,ce.jI)(t.getState())}).switchMap(function(e){return r=t.getState(),n=e.type===oe.YL,o=(0,I.$Y)(),i=(0,C.lr)((0,fe.r5)(r)).localType,a={featureProjection:o,stopAfterDrawing:be.Ay.isSimpleGeomType(i),editEnabled:!0,drawEnabled:!1},(u=(0,ce.e7)(r).map(function(e){var t=Object.assign({},e,{type:"Feature"});if(!m()(t)){var o=(0,ce.HR)(r);if(o[t.id]&&(o[t.id].geometry||null===o[t.id].geometry)&&(t.geometry=o[t.id].geometry),t._new&&!t.geometry){var i=S()((0,ce.zS)(r),{id:t.id});i&&i.geometry&&(t.geometry=i.geometry)}n&&(t.geometry=(0,fe.je)(r,t.id)?(0,fe.je)(r,t.id).geometry:null)}return t}).filter(function(e){return null!==e.geometry||"empty_row"!==e.id})).length>0?p().Observable.from([(0,M.VX)("drawOrEdit",i,"featureGrid",u,a)]):p().Observable.from([(0,M.VX)("clean","","featureGrid",[],{})]);var r,n,o,i,a,u})},lt=function(e){return e.ofType(oe.hS).switchMap(function(){return p().Observable.of((0,M.tq)())})},ft=function(e,t){return e.ofType(oe.Bg).switchMap(function(e){return e.mode===oe.FN.VIEW?p().Observable.of((0,M.tq)(),(0,ue.Xb)("featuregrid.select")):e.mode!==oe.FN.EDIT||(0,ce.jI)(t.getState())?p().Observable.of((0,ue.Xb)()):p().Observable.of((0,M.tq)(),(0,ue.Xb)("featuregrid.select"),(0,le.$e)({title:"featuregrid.notSupportedGeometryTitle",message:"featuregrid.notSupportedGeometry",uid:"notSupportedGeometryWarning",autoDismiss:5}))})},st=function(e){return e.ofType(oe.Pn).switchMap(function(){return e.ofType(_.LK).take(1).switchMap(function(){return p().Observable.of((0,oe.fk)(),(0,oe.xp)())}).takeUntil(e.ofType(oe.lP))})},pt=function(e,t){return e.ofType(_.LK).switchMap(function(){return(0,ae.sY)(t.getState())?p().Observable.of((0,ie.fN)("queryPanel","enabled",!1)):p().Observable.empty()})},dt=function(e,t){return e.ofType(oe.Pn).switchMap(function(){return e.ofType(ie.x7).filter(function(e){return e.control&&"drawer"===e.control&&(0,ce.py)(t.getState())}).switchMap(function(){return p().Observable.of((0,oe.xp)(),(0,oe.N7)([]))}).takeUntil(e.ofType(_.LK))})},yt=function(e,t){return e.ofType(oe.Y3).switchMap(function(){var e=t.getState();return(0,ce.x_)(e)||(0,ce.rV)(e)?p().Observable.of((0,oe.bU)("featureCloseConfirm",!0)):p().Observable.of((0,oe.xp)())})},gt=function(e){return e.ofType(oe.MI).switchMap(function(){return p().Observable.of((0,oe.$m)(),(0,oe.bU)("clearConfirm",!1))})},bt=function(e){return e.ofType(oe.z0).switchMap(function(){return p().Observable.of((0,ie.fN)("drawer","enabled",!1),(0,oe.bU)("featureCloseConfirm",!1))})},vt=function(e,t){return e.ofType(oe.Pn).exhaustMap(function(){return e.ofType(oe.lP).delay(50).filter(function(){return(0,fe.jR)(t.getState())}).switchMap(function(){return p().Observable.of(Re(t.getState()))}).takeUntil(e.ofType(_.LK,$.BQ,oe.bx))})},mt=function(e){return e.ofType(oe.Pn).switchMap(function(){return p().Observable.race(e.ofType($.BQ).take(1),e.ofType(oe.lP).take(1)).exhaustMap(function(t){return t.type===oe.lP?p().Observable.empty():e.ofType($.Rr).switchMap(function(){return p().Observable.of((0,oe.JM)())})}).takeUntil(e.ofType(_.LK,ie.x7).filter(function(e){return e.type===_.LK||e.control&&"drawer"===e.control}).merge(e.ofType(oe.lP).withLatestFrom(e.ofType($.BQ,$.Rr).scan(function(e,t){switch(t.type){case $.BQ:return!1;case $.Rr:return!0;default:return!1}},!0).startWith(!0),function(e,t){return t}).filter(function(e){return e})))})},Ot=function(e,t){return e.ofType(oe.bx).switchMap(function(){return p().Observable.of((0,oe.N7)([]),(0,J.Bb)(y()(t.getState(),'featuregrid.advancedFilters["'.concat((0,ce.Z)(t.getState()),'"]'))),(0,oe.xp)("queryPanel"),(0,ie.fN)("queryPanel","enabled",!0)).merge(p().Observable.race(e.ofType(J.TK).mergeMap(function(e){return p().Observable.of((0,Z.VZ)(e.searchUrl,e.filterObj),(0,oe.cU)(Object.assign({},(0,pe.fV)(t.getState()),e.filterObj)),(0,ie.fN)("queryPanel","enabled",!1),(0,oe.JM)(),(0,fe.jR)(t.getState())?(0,oe.$r)():p().Observable.empty())}),e.ofType(ie.x7).filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)}).mergeMap(function(){var e="clean"!==(t.getState().draw||{}).drawStatus?[(0,M.VX)("clean","","featureGrid",[],{})]:[];return p().Observable.from(e.concat((0,oe.JM)()))})).takeUntil(e.ofType(oe.Pn,_.LK)))})},St=function(e,t){return e.ofType(oe.et).filter(function(){return!y()(t.getState(),"featuregird.virtualScroll",!1)}).switchMap(function(){return p().Observable.of((0,ee.jc)(R()((0,fe.Hb)(t.getState())),"EPSG:4326"))})},wt=function(e){return e.ofType(oe.Bg).filter(function(e){return e.mode===oe.FN.EDIT}).map(function(){return(0,ie.YM)(["query"])})},Et=function(e){return e.ofType(oe.Pn).switchMap(function(){return p().Observable.of((0,$.Zv)())})},Tt=function(e,t){return e.ofType(Z.Xi).filter(function(){return(0,fe.jR)(t.getState())}).mapTo((0,oe.$r)())},ht=function(e,t){return e.ofType(Z.Xi).filter(function(){return!(0,fe.jR)(t.getState())}).switchMap(function(){return p().Observable.from([Re(t.getState()),{type:oe.hN}])})},Pt=function(e,t){return e.ofType(oe.lP).switchMap(function(){var e,r=t.getState(),n="queryPanel"===(null===(e=r.featuregrid)||void 0===e?void 0:e.closer);return n&&(0,fe.jR)(r)?p().Observable.of(Re(t.getState())):(0,fe.jR)(r)&&!n?p().Observable.of((0,Z.LO)()):p().Observable.empty()})},Ft=function(e,t){return e.ofType(oe.Pn).filter(function(){return(0,fe.jR)(t.getState())}).switchMap(function(){return p().Observable.of((0,oe.$r)())})},_t=function(e,t){return e.ofType(Z.cv,Z.f4).filter(function(e){var r=t.getState().featuregrid.disableQuickFilterSync;return e.type===Z.cv||!r}).switchMap(function(){var r=t.getState(),n=r.query,o=(r.featuregrid||{}).selectedLayer,i=(n||{}).filterObj;return p().Observable.merge(p().Observable.of((0,fe.jR)(t.getState())).filter(function(e){return e}),e.ofType(oe.hu)).mergeMap(function(){return p().Observable.of(function(e,t){return(0,ne.ju)(e,{filterObj:t})}(o,i))})})},At=function(e,t){var r=t.getState;return e.ofType(oe.h$).filter(function(){return!(0,fe.qd)(r())}).switchMap(function(t){var n=r(),o=t.pages,i=o.startPage,a=o.endPage,u=n.featuregrid,c=u.pages,l=u.pagination,f=y()(l,"size"),s=(0,I.uI)(i,a,c,f),d=s[1]-s[0]+1;return p().Observable.of((0,Z.P)((0,fe.yr)(n),Ae(Pe({},(0,fe.fQ)(n)),{startIndex:s[0]*f,maxFeatures:d*f}),(0,ce.cu)(n))).filter(function(){return s.length>0}).merge(e.ofType(Z.Ve).filter(function(){return s.length>0}).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result,n=void 0===t?{}:t,o=e.filterObj,u=r().featuregrid,l=u.features,s=u.maxStoredPages,p=y()(o,"pagination.startIndex"),d=(0,I.gz)(n,{endPage:a,startPage:i},{pages:c,features:l||[]},{size:f,startIndex:p,maxStoredPages:s}),g=d.pages,b=d.features;return(0,oe.y3)(b,g)}).take(1).takeUntil(e.ofType(Z._Z))).merge(e.ofType(Z.KF).filter(function(){return s.length>0}).filter(function(e){return!e.isLoading}).withLatestFrom(e.ofType(oe.h$)).map(function(e){return e[1]}).take(1).takeUntil(e.ofType(Z._Z)))})},jt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(ne.eV).filter(function(e){var t=e.layer,n=void 0===t?[]:t,o=e.params,i=void 0===o?{}:o;return h()(E()(n),(0,ce.Z)(r()))&&h()(Object.keys(i),"time")&&(0,ce.te)(r())}).merge(e.ofType(oe.Fu)).filter(function(){return(0,ce.py)(r())}).withLatestFrom(e.ofType(Z.Jj),function(e,t){return t}).switchMap(function(e){return p().Observable.of((0,Z.VZ)(e.searchUrl,e.filterObj))})},Rt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(ie.x7).filter(function(){return"drawer"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).control&&t().browser&&t().browser.mobile&&(0,ae.FD)(t())}).switchMap(function(){return p().Observable.of((0,$.bC)(),(0,oe.xp)())})},It=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType($.BQ).filter(function(){return t().browser&&t().browser.mobile&&(0,ae.FD)(t())}).mapTo((0,ie.KP)("drawer","enabled"))},Mt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(oe.l0).switchMap(function(){var e,r=null===(e=(0,ce.IT)(t()))||void 0===e?void 0:e.id;return p().Observable.of((0,M.uw)(r))})},Lt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(oe.lP).switchMap(function(){var e=[(0,M.uw)(!1)];return(0,de.X0)(t())&&e.push((0,M.jx)()),p().Observable.from(e)})},Dt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(oe.Bg).filter(function(e){return"VIEW"===e.mode}).switchMap(function(){var e=[];return(0,de.X0)(t())&&e.push((0,M.jx)()),p().Observable.from(e)})},Gt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(oe.Pn,oe.tw,ee.e6).filter(function(){return(0,ce.py)(t())&&(0,ce.N9)(t())&&(0,Oe.GS)(t())!==Se.Av.CESIUM}).switchMap(function(){return p().Observable.of((0,oe._9)())})},Nt=function(e){return e.ofType(oe.tw).filter(function(e){var t=e.type,r=e.value;return t===oe.tw&&!1===r}).switchMap(function(){return p().Observable.of((0,oe._9)())})},Ct=function(e,t){return e.ofType(_.LK).switchMap(function(){return null!==(0,ce.XH)(t.getState())?p().Observable.of((0,oe.ud)(null)):p().Observable.empty()})},Ut=r(511450),xt=r.n(Ut),kt=r(908437),Vt=r.n(kt),Yt=r(538704),Ht=r(668414),Qt=r.n(Ht);function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Wt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return qt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(r),!0).forEach(function(t){Kt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Kt(e,t,r){return(t=function(e){var t=function(e){if("object"!=Xt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $t={advancedFilters:{},filters:{},editingAllowedRoles:["ADMIN"],editingAllowedGroups:[],enableColumnFilters:!0,showFilteredObject:!1,timeSync:!1,showTimeSync:!1,open:!1,canEdit:!1,focusOnEdit:!1,showAgain:!1,mode:oe.FN.VIEW,changes:[],pagination:{page:0,size:20},select:[],drawing:!1,newFeatures:[],features:[],customEditorsOptions:{rules:[]},viewportFilter:null},Zt=function(e,t){return t===e||void 0!==e.id&&null!==e.id&&e.id===t.id},Jt=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(function(t){return Zt(e,t)}).length>0},er=function(e,t,r,n){return e.map(function(e){return Jt(e,t)?function(e,t,r){return zt(zt({},e),{},r?{properties:zt(zt({},e.properties),t),geometry:r.geometry}:{properties:zt(zt({},e.properties),t)})}(e,r,n):e})};var tr=r(275705);const rr=function(){return i().createElement("div",{className:"feature-editor-fallback-container"},i().createElement(tr.A,{size:100,style:{margin:"0 auto"}}))};var nr=r(432060),or=r(916589);function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}var ar=["onClick","selectedNodes","status","itemComponent","statusTypes"];function ur(){return ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ur.apply(null,arguments)}function cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(r),!0).forEach(function(t){fr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fr(e,t,r){return(t=function(e){var t=function(e){if("object"!=ir(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ir(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sr=(0,a.connect)((0,u.Mz)([function(e){var t;return null==e||null===(t=e.featuregrid)||void 0===t?void 0:t.open},ce.N9],function(e,t){return{open:e,viewportFilterInitialized:null!==t}}),{setViewportFilter:oe.ud,initPlugin:oe.Wm})((0,or.compose)((0,or.lifecycle)({componentDidMount:function(){var e;!this.props.viewportFilterInitialized&&this.props.filterByViewport&&this.props.setViewportFilter(!0),this.props.initPlugin({virtualScroll:null===(e=this.props.virtualScroll)||void 0===e||e,editingAllowedRoles:this.props.editingAllowedRoles,editingAllowedGroups:this.props.editingAllowedGroups,maxStoredPages:this.props.maxStoredPages})},componentDidUpdate:function(e){var t;!this.props.viewportFilterInitialized&&this.props.filterByViewport&&this.props.setViewportFilter(!0);var r=null!==(t=this.props)&&void 0!==t?t:{},n=r.virtualScroll,o=r.editingAllowedRoles,i=r.editingAllowedGroups,a=r.maxStoredPages;e.virtualScroll===n&&l()(e.editingAllowedRoles,o)&&l()(e.editingAllowedGroups,i)&&e.maxStoredPages===a||this.props.initPlugin({virtualScroll:null==n||n,editingAllowedRoles:o,editingAllowedGroups:i,maxStoredPages:a})}}),(0,nr.A)(function(e){return!!e.open},{fallback:i().createElement(rr,null)}))((0,o.lazy)(function(){return Promise.all([r.e(1206),r.e(5735),r.e(7842),r.e(8645),r.e(5091),r.e(2719),r.e(3321)]).then(r.bind(r,250100))}))),pr=(0,a.connect)(function(){return{}},{onClick:ne.Pw})(function(e){var t,r=e.onClick,n=e.selectedNodes,o=e.status,a=e.itemComponent,u=e.statusTypes,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ar),l=a,f=null==n||null===(t=n[0])||void 0===t?void 0:t.node;return![u.LAYER].includes(o)||null==f||!f.search||null!=f&&f.error?null:i().createElement(l,ur({},c,{glyph:"features-grid",tooltipId:"toc.toolFeaturesGridTooltip",onClick:function(){var e;return r(lr(lr({},f),{},{url:(null==f||null===(e=f.search)||void 0===e?void 0:e.url)||f.url}))}}))});const dr=(0,f.i1)("FeatureEditor",{component:sr,epics:n,reducers:{featuregrid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe.DK:return Object.assign({},e,{editingAllowedRoles:t.options.editingAllowedRoles||e.editingAllowedRoles||["ADMIN"],editingAllowedGroups:t.options.editingAllowedGroups||e.editingAllowedGroups||[],virtualScroll:!!t.options.virtualScroll,maxStoredPages:t.options.maxStoredPages||5});case oe.h$:case oe.fJ:return Object.assign({},e,{pagination:{page:void 0!==t.page?t.page:e.pagination.page,size:void 0!==t.size?t.size:e.pagination.size}});case oe.UT:var r;return zt(zt({},e),{},{pagination:zt(zt({},null!==(r=e.pagination)&&void 0!==r?r:{}),{},{size:t.size})});case oe.V_:var n=t.features.filter(function(e){return"empty_row"!==e.id});return e.multiselect&&t.append?Object.assign({},e,{select:t.append?xt()([].concat(Wt(e.select),Wt(n)),"id"):n}):n&&e.select&&e.select[0]&&n[0]&&1===e.select.length&&Zt(n[0],e.select[0])?e:Object.assign({},e,{select:n||[]});case oe.k7:var o=e.select.filter(function(e){return!Jt(e,t.features)}),i=t.features.filter(function(t){return!Jt(t,e.select)}),a=o.concat(i||[]);return Object.assign({},e,{select:a});case oe.kH:return Object.assign({},e,{select:e.select.filter(function(e){return!Jt(e,t.features)})});case oe.Z9:var u,c;return Object.assign({},e,{multiselect:null!==(u=t.multiselect)&&void 0!==u?u:e.multiselect,showCheckbox:null!==(c=t.showCheckbox)&&void 0!==c?c:e.showCheckbox});case oe.M3:return Object.assign({},e,{customEditorsOptions:t.payload});case oe.Fc:return Object.assign({},e,t.options||{});case oe.Lw:return Object.assign({},e,{select:[],changes:[]});case oe.PO:return Object.assign({},e,{features:t.features});case oe.l0:return Object.assign({},e,{selectedLayer:t.id});case oe.mQ:return Object.assign({},e,{tools:zt(zt({},e.tools),{},Kt({},t.tool,void 0===t.value?!(e.tools&&e.tools[t.tool]):t.value))});case oe.JV:return Object.assign({},e,{attributes:zt(zt({},e.attributes),{},Kt({},t.name,zt(zt({},e.attributes&&e.attributes[t.name]||{}),{},Kt({},t.key,t.value||e.attributes&&e.attributes[t.name]&&!e.attributes[t.name][t.key]))))});case oe.Bg:return Object.assign({},e,{tools:t.mode===oe.FN.EDIT?{}:e.tools,mode:t.mode,multiselect:t.mode===oe.FN.EDIT,drawing:!1});case oe.IR:var l=t.features.filter(function(e){return e._new})||[];return Object.assign({},e,{newFeatures:l.length>0?er(e.newFeatures,l,t.updated,null):e.newFeatures,changes:[].concat(Wt(e&&e.changes||[]),Wt(t.features.filter(function(e){return!e._new}).map(function(e){return{id:e.id,updated:t.updated}})))});case oe.HS:return Object.assign({},e,{saving:!0,loading:!0});case oe.g$:return Object.assign({},e,{deleteConfirm:!1,saved:!0,saving:!1,drawing:!1,loading:!1});case oe.YL:return Object.assign({},e,{saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case oe.hS:var f=Qt().v1();return Object.assign({},e,{newFeatures:t.features.map(function(e){return zt(zt({},e),{},{_new:!0,id:e.id?e.id:f,type:"Feature",geometry:e.geometry?e.geometry:null})}),select:t.features.map(function(e){return zt(zt({},e),{},{_new:!0,id:e.id?e.id:f,type:"Feature",geometry:e.geometry?e.geometry:null})})});case oe.Jq:return Object.assign({},e,{deleteConfirm:!1,saving:!1,loading:!1,drawing:!1});case oe.Q4:var s=t.features.filter(function(e){return e._new})||[];return Object.assign({},e,{newFeatures:s.length>0?er(e.newFeatures,s,null,{geometry:zt({},b()(s).geometry)}):e.newFeatures,changes:t.features.filter(function(e){return!e._new}).map(function(e,r){return{id:e.id,updated:{geometry:t.features[r].geometry}}}),drawing:!1});case oe.o_:var p=t.features.filter(function(e){return e._new})||[];return Object.assign({},e,{newFeatures:p.length>0?er(e.newFeatures,p,null,{geometry:null}):e.newFeatures,changes:[].concat(Wt(e&&e.changes||[]),Wt(t.features.filter(function(e){return!e._new}).map(function(e){return{id:e.id,updated:{geometry:null}}})))});case Z.IY:return Object.assign({},e,{localType:y()(t,"featureType.original.featureTypes[0].properties[1].localType")});case oe.hD:return Object.assign({},e,{drawing:!e.drawing});case oe.Pn:return Object.assign({},e,{open:!0,closer:null});case oe.lP:return Object.assign({},e,{open:!1,pagination:{page:0,size:e.pagination.size},mode:oe.FN.VIEW,tools:{},saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[],closer:t.closer});case oe.t7:return Object.assign({},e,{disableToolbar:t.disabled});case oe.ri:return Object.assign({},e,{canEdit:t.permission.canEdit});case M.V9:return"clean"===t.status?Object.assign({},e,{drawing:!1}):e;case oe.bS:var d=(t.update||{}).attribute;if(d&&t.append){var g=e.filters[d].value,v=[];null!=g&&g.attribute&&(v=[g]),Vt()(g)&&(v=g);var m=[].concat(Wt(v),[t.update.value]);return Object.assign({},e,{filters:Kt({},d,{attribute:d,enabled:!0,type:"geometry",operator:"OR",value:m})})}return d?Object.assign({},e,{filters:zt(zt({},e.filters),{},Kt({},d,t.update))}):e;case Z.cv:return Object.assign({},e,{filters:{}});case Z.f4:var O;return zt(zt({},e),{},{useLayerFilter:null!==(O=t.useLayerFilter)&&void 0!==O?O:e.useLayerFilter});case oe.J6:return Object.assign({},e,{advancedFilters:Object.assign({},e.advancedFilters,Kt({},e.selectedLayer,t.filterObj))});case oe.gi:return Object.assign({},e,{features:t.features||[],pages:t.pages||[]});case oe.j6:return Object.assign({},e,{showAgain:!e.showAgain});case oe.Fu:return Object.assign({},e,{timeSync:t.value});case oe.tw:return Object.assign({},e,{viewportFilter:t.value});case Yt.mO:return zt(zt({},e),y()(t,"config.featureGrid",{}));default:return e}}},containers:{TOC:{doNotHide:!0,name:"FeatureEditor",Component:pr,target:"toolbar",position:7}}})},717140(e,t,r){"use strict";r.d(t,{Ij:()=>g,Jb:()=>o,Kf:()=>c,Lu:()=>i,Ly:()=>s,Mm:()=>y,Mr:()=>v,Ne:()=>l,Nu:()=>T,Q4:()=>a,S$:()=>f,V9:()=>n,VX:()=>b,ZM:()=>u,d:()=>m,et:()=>d,jx:()=>S,tq:()=>O,uw:()=>w,vK:()=>p,vw:()=>E});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",u="DRAW:DRAW_SUPPORT_STOPPED",c="DRAW:SET_SNAPPING_LAYER",l="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",s="DRAW:SET_SNAPPING_CONFIG";function p(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function d(){return{type:"DRAW:FEATURES_SELECTED",features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function y(){return{type:"DRAW:DRAWING_FEATURES",features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function g(){return{type:u}}function b(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function v(e,t){return{type:o,geometry:e,owner:t}}function m(e){return{type:i,currentStyle:e}}var O=function(e){return b("clean","",e,[],{})};function S(){return{type:f}}function w(e){return{type:c,snappingLayer:e}}function E(){return{type:l}}function T(e,t,r){return{type:s,value:e,prop:t,pluginCfg:r}}},738134(e,t,r){var n=r(10232).fidFilter,o=function(e,t,r){return"<".concat(e,':Delete typeName="').concat(r,'">').concat(t,"</").concat(e,":Delete>")},i=function(e,t,r){return o(e,n("ogc",t),r)};e.exports={deleteFeaturesByFilter:o,deleteById:i,deleteFeature:function(e,t,r){return i(e,t.features&&1===t.features.length?t.features[0].id:t.id,r)}}},756520(e){e.exports={update:function(e,t,r){return"<".concat(e,':Update typeName="').concat(t,'">').concat(Array.isArray(r)?r.join(""):r,"</wfs:Update>")},propertyChange:function(e,t,r){return"<".concat(e,":Property>")+"<".concat(e,":Name>").concat(t,"</").concat(e,":Name>")+"<".concat(e,":Value>").concat(r,"</").concat(e,":Value>")+"</".concat(e,":Property>")}}},759457(e,t,r){"use strict";r.d(t,{$H:()=>o,$m:()=>i,Q7:()=>n,Uo:()=>a});var n="BOX_END",o="CHANGE_BOX_SELECTION_STATUS";function i(e){return{type:n,boxEndInfo:e}}function a(e){return{type:o,status:e}}},967858(e,t,r){"use strict";r.d(t,{d:()=>f,p:()=>s});var n=r(415392),o=r(45388),i=r.n(o),a=r(130711),u=r(717140),c=r(273494),l=r(762686),f="export-context",s=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return i().Observable.from([(0,n.fN)(t,"enabled",null)])},f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t){return(0,a.cU)(t)(e)};return e.ofType(u.V9,c.QH,l.Pn).filter(function(e){var n=e.type,o=e.status,i=e.owner,a=e.eventName,s=e.toolName,p=f(t.getState(),r);switch(n){case l.Pn:return"featureGrid"!==r;case c.QH:return p&&"click"===a&&s!==r;case u.V9:return p&&("drawOrEdit"===o||"start"===o)&&i!==r;default:return p&&"annotations"!==r}}).switchMap(function(e){return f(t.getState(),r)?o(t.getState(),r,e):i().Observable.empty()})}}}]);