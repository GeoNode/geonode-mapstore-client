(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[67440,80291,56399],{555927:(t,e,n)=>{"use strict";n.d(e,{BJ:()=>r,_y:()=>o,vk:()=>i,uI:()=>a,mg:()=>u,aR:()=>c,SW:()=>l,$l:()=>s,zX:()=>f,R4:()=>p,E9:()=>d,CP:()=>O,s6:()=>y,E5:()=>v,CF:()=>S,B_:()=>E,js:()=>m,TA:()=>g,Kv:()=>D,zV:()=>b,D_:()=>R,Nl:()=>A,G9:()=>T,gE:()=>h,pB:()=>w,GD:()=>_,sA:()=>G,o2:()=>j,PC:()=>P,rR:()=>C,vM:()=>I,AN:()=>Y,tH:()=>N,kk:()=>B,ak:()=>H,qY:()=>L});var r="DASHBOARD:SET_AVAILABLE",o="DASHBOARD:SET_EDITING",i="DASHBOARD:SHOW_CONNECTIONS",a="DASHBOARD:TRIGGER_SAVE_MODAL",u="DASHBOARD:TRIGGER_SAVE_AS_MODAL",c="DASHBOARD:SAVE_DASHBOARD",l="DASHBOARD:SAVE_ERROR",s="DASHBOARD:DASHBOARD_SAVED",f="DASHBOARD:LOAD_DASHBOARD",p="DASHBOARD:DASHBOARD_RESET",d="DASHBOARD:DASHBOARD_LOADED",O="DASHBOARD:DASHBOARD_LOADING",y="DASHBOARD:UPDATE_SERVICES",v="DASHBOARD:SET_SELECTED_SERVICE",S="DASHBOARD:ADD_NEW_SERVICE",E="DASHBOARD:CATALOG_MODE",m="DASHBOARD:DELETE_SERVICE",g="DASHBOARD:SAVE_SERVICE_LOADING",D="DASHBOARD:EXPORT",b="DASHBOARD:IMPORT",R=function(t){return{type:o,editing:t}},A=function(t){return{type:r,available:t}},T=function(t){return{type:i,show:t}},h=function(t){return{type:a,show:t}},w=function(t){return{type:u,show:t}},_=function(t){return{type:l,error:t}},G=function(t){return{type:s,id:t}},j=function(t){return{type:f,id:t}},P=function(){return{type:p}},C=function(t,e){return{type:d,resource:t,data:e}},I=function(t){return{type:O,name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading",value:t}},Y=function(t){return{type:"DASHBOARD:DASHBOARD_LOAD_ERROR",error:t}},N=function(t,e){return{type:v,service:t,services:e}},B=function(t,e,n){return{type:S,service:t,services:e,isNew:n}},H=function(t,e){return{type:E,mode:t,isNew:e}},L=function(t,e){return{type:m,service:t,services:e}}},134990:(t,e,n)=>{"use strict";n.d(e,{D7:()=>c,mN:()=>l,vb:()=>s,KT:()=>f,QK:()=>p,cc:()=>d,Gx:()=>O,XH:()=>y,lX:()=>v,tP:()=>S,Dq:()=>E,LE:()=>m,SW:()=>g,si:()=>D,i2:()=>b,IY:()=>R,Zf:()=>A,ij:()=>T,Hb:()=>h,Mk:()=>w,c:()=>_,NZ:()=>G,Cx:()=>j,wb:()=>P,km:()=>C,un:()=>I,Ro:()=>Y,jr:()=>N,ZY:()=>B,EQ:()=>H,W$:()=>L,mk:()=>M,U3:()=>U,aF:()=>V,IH:()=>x,rp:()=>k,D_:()=>W,zJ:()=>z,wJ:()=>F,OS:()=>X,YP:()=>Z,Ct:()=>$,Od:()=>K,y6:()=>Q,g5:()=>q,_e:()=>J,DF:()=>tt,GD:()=>et,K0:()=>nt,kB:()=>rt,Xn:()=>ot,G5:()=>it,Vx:()=>at,RZ:()=>ut,pB:()=>ct,$A:()=>lt,m7:()=>st,YM:()=>ft,o2:()=>pt,ql:()=>dt,c0:()=>Ot,Fu:()=>yt,WE:()=>vt,fD:()=>St,EE:()=>Et});var r=n(747037),o=n.n(r),i=n(455877),a=n.n(i),u=n(192579),c="GEOSTORY:ADD",l="GEOSTORY:ADD_RESOURCE",s="GEOSTORY:CHANGE_MODE",f="GEOSTORY:CLEAR_SAVE_ERROR",p="GEOSTORY:EDIT_RESOURCE",d="GEOSTORY:EDIT_WEBPAGE",O="GEOSTORY:SCROLLING",y="GEOSTORY:LOAD_GEOSTORY",v="GEOSTORY:LOADING_GEOSTORY",S="GEOSTORY:MOVE",E="GEOSTORY:REMOVE",m="GEOSTORY:SAVE_STORY",g="GEOSTORY:SAVE_ERROR",D="GEOSTORY:STORY_SAVED",b="GEOSTORY:SELECT_CARD",R="GEOSTORY:SET_CONTROL",A="GEOSTORY:SET_RESOURCE",T="GEOSTORY:SET_CURRENT_STORY",h="GEOSTORY:SET_WEBPAGE_URL",w="GEOSTORY:TOGGLE_CARD_PREVIEW",_="GEOSTORY:TOGGLE_SETTINGS_PANEL",G="GEOSTORY:TOGGLE_SETTING",j="GEOSTORY:TOGGLE_CONTENT_FOCUS",P="GEOSTORY:UPDATE",C="GEOSTORY:UPDATE_SETTING",I="GEOSTORY:UPDATE_CURRENT_PAGE",Y="GEOSTORY:REMOVE_RESOURCE",N="GEOSTORY:SET_PENDING_CHANGES",B="GEOSTORY:SET_UPDATE_URL_SCROLL",H="GEOSTORY:UPDATE_MEDIA_EDITOR_SETTINGS",L="GEOSTORY:HIDE_CAROUSEL_ITEMS",M="GEOSTORY:ENABLE_DRAW",U="GEOSTORY:EXPORT",V="GEOSTORY:IMPORT",x=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t};return{type:c,id:n&&n.id||a()(),path:t,position:e,element:o()(n)&&(0,u.nq)(n,r)||n}},k=function(t,e,n){return{type:l,id:t,mediaType:e,data:n}},W=function(t){return{type:s,mode:t?u.nl.EDIT:u.nl.VIEW}},z=function(t,e,n){return{type:p,id:t,mediaType:e,data:n}},F=function(t,e){return{type:y,id:t,options:e}},X=function(t){return{type:"GEOSTORY:GEOSTORY_LOADED",id:t}},Z=function(){return{type:v,value:arguments.length>0&&void 0!==arguments[0]&&arguments[0],name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading"}},$=function(t){return{type:"GEOSTORY:LOAD_GEOSTORY_ERROR",error:t}},K=function(t){return{type:E,path:t}},Q=function(t){return{type:g,error:t}},q=function(t,e){return{type:R,control:t,value:e}},J=function(t){return{type:b,card:t}},tt=function(t){return{type:A,resource:t}},et=function(t){return{type:D,id:t}},nt=function(t){return{type:T,story:t}},rt=function(){return{type:w}},ot=function(t){return{type:G,option:t}},it=function(){return{type:_,withSave:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},at=function(t,e){return{type:P,path:t,element:e,mode:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace",options:arguments.length>3?arguments[3]:void 0}},ut=function(t){var e=t.sectionId,n=t.columnId;return{type:I,sectionId:e,columnId:n}},ct=function(t,e,n){return{type:S,source:t,target:e,position:n}},lt=function(t,e,n,r,o){return{type:j,status:t,target:e,selector:n,hideContent:r,path:o}},st=function(t,e){return{type:C,prop:t,value:e}},ft=function(t){return{type:h,src:t}},pt=function(t){var e=t.path;return{type:d,path:e,owner:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GEOSTORY"}},dt=function(t,e){return{type:Y,id:t,mediaType:e}},Ot=function(t){return{type:N,value:t}},yt=function(t){return{type:H,mediaEditorSettings:t}},vt=function(t){return{type:O,status:t}},St=function(t,e){return{type:L,sectionId:t,showContentId:e}},Et=function(t){return{type:M,drawOptions:t}}},788113:(t,e,n)=>{"use strict";n.d(e,{b6:()=>f,PG:()=>p,_x:()=>d,Mm:()=>O,dP:()=>y,SX:()=>v,ZL:()=>S,_S:()=>E,iH:()=>m,R7:()=>g,Q7:()=>D,n7:()=>b,bA:()=>R,hm:()=>A,E2:()=>T,Cb:()=>h,eK:()=>w,Im:()=>_,e8:()=>G,JF:()=>j,kS:()=>P,y:()=>C,l2:()=>I,HN:()=>Y,BM:()=>N,O8:()=>B,am:()=>H,LV:()=>L,CK:()=>M,jU:()=>U,Qg:()=>V});var r=n(22222),o=n(227361),i=n.n(o),a=n(800827),u=n(577215);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){var r,o,i,a;r=t,o=e,i=n[e],a=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==c(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f=function(t){return i()(t,"catalog.services")},p=(0,r.P1)((function(t){return i()(t,"catalog.default.staticServices")}),f,(function(t,e){var n=null==t?void 0:t.default_map_backgrounds;return n?(n.readOnly=!0,s(s({},e),{},{default_map_backgrounds:n})):e})),d=function(t){return i()(t,"catalog.default.tileSizes",[256,512])},O=function(t){return i()(t,"controls.metadataexplorer.group")},y=function(t){return i()(t,"catalog.saving")},v=function(t){return i()(t,"catalog.result")},S=function(t){return i()(t,"catalog.openCatalogServiceList")},E=function(t){return i()(t,"catalog.newService")},m=function(t){return i()(t,"catalog.newService.type","csw")},g=function(t){return i()(t,'catalog.services["'.concat(i()(t,"catalog.selectedService"),'"]'))},D=function(t){return i()(t,'catalog.services["'.concat(i()(t,"catalog.selectedService"),'"].type'),function(t){return i()(t,'catalog.default.staticServices["'.concat(i()(t,"catalog.selectedService"),'"].type'),"csw")}(t))},b=function(t){return i()(t,'catalog.services["'.concat(i()(t,"catalog.selectedService"),'"].layerOptions'),{})},R=function(t){return i()(t,"catalog.searchOptions")},A=function(t){return i()(t,"catalog.loadingError")},T=function(t){return i()(t,"catalog.loading",!1)},h=function(t){return i()(t,"catalog.selectedService")},w=function(t){return i()(t,"catalog.mode","view")},_=function(t){return i()(t,"catalog.layerError")},G=function(t){return i()(t,"catalog.searchOptions.text","")},j=function(t){return"metadataexplorer"===i()(t,"controls.toolbar.active")||i()(t,"controls.metadataexplorer.enabled")},P=function(t){return(i()(t,"localConfig.authenticationRules")||[]).filter((function(t){return"authkey"===t.method})).map((function(t){return t.authkeyParamName}))||[]},C=function(t){return i()(t,"catalog.pageSize",4)},I=function(t){return i()(t,"catalog.delayAutoSearch",1e3)},Y=(0,r.zB)({projection:a.uy}),N=function(t){return i()(t,"catalog.formatsLoading",!1)},B=function(t){return i()(t,"catalog.newService.supportedFormats.imageFormats",[])},H=function(t){var e,n;return"edit"===w(t)?B(t):(null===(e=g(t))||void 0===e||null===(n=e.supportedFormats)||void 0===n?void 0:n.imageFormats)||[]},L=function(t){return i()(t,"catalog.newService.supportedFormats.infoFormats",(0,u.oL)())},M=function(t){return i()(t,"catalog.newService.formatUrlUsed","")},U=function(t){return i()(t,"catalog.isNewServiceAdded",!1)},V=function(t){return i()(t,"catalog.showFormatError",!1)}},55237:(t,e,n)=>{"use strict";n.d(e,{tr:()=>D,jb:()=>b,Xu:()=>R,un:()=>A,Qn:()=>T,_q:()=>h,og:()=>w,$4:()=>_,kN:()=>G,oD:()=>j,V$:()=>P,uH:()=>C,pC:()=>I,tz:()=>Y,p:()=>N,Q7:()=>B,t:()=>H});var r=n(747037),o=n.n(r),i=n(647960),a=n.n(i),u=n(227361),c=n.n(u),l=n(984596),s=n.n(l),f=n(730381),p=n.n(f),d=n(86638);function O(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E=/PT?[\d\.]+[YMWDHMS]/,m=function(t){return t?o()(t)?new Date(t).getTime():(a()(t)&&t.getTime(),t):null},g=function(t){var e=t.start,n=t.end,r=t.duration,o=p().duration(r).asMilliseconds();return(new Date(n).getTime()-new Date(e).getTime())/o},D=function(t){for(var e=t.start,n=t.end,r=t.duration,o=p().duration(r).asMilliseconds(),i=[],a=new Date(e),u=new Date(n);a<=u;)i.push(new Date(a).toISOString()),a.setTime(a.getTime()+o);return i},b=function(t){var e=t.start,n=t.end,r=t.duration;return D({start:e,end:n,duration:r}).map((function(t){return{start:new Date(t),end:new Date(new Date(t).getTime()+p().duration(r).asMilliseconds())}}))},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.start,n=t.end,r=t.duration,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.start,a=o.end;if(!i||!a)return{count:g({start:e,end:n,duration:r}),start:e,end:n};var u=p().duration(r).asMilliseconds(),c=new Date(e).getTime(),l=new Date(n).getTime(),s=new Date(i).getTime(),f=new Date(a).getTime(),d=Math.ceil((s-c)/u),O=Math.floor((f-c)/u),y=Math.floor((l-c)/u);if(d>=0&&O<=y){var v=O-d;return{start:new Date(c+Math.max(0,d)*u),end:new Date(c+Math.min(y,O)*u),count:v}}return{count:g({start:e,end:n,duration:r}),start:e,end:n}},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.start,n=t.end,r=arguments.length>1?arguments[1]:void 0,o=new Date(e),i=new Date(n),a=Math.floor(i.getTime()-o.getTime())/r;return{range:{start:e,end:n},resolution:p().duration(a).toISOString().match(E)[0]}},T=function(){var t,e,n=arguments.length>1?arguments[1]:void 0,r=(t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],(e=arguments.length>2?arguments[2]:void 0)?t.map((function(t){var n=y(t.split("/"),2);return{start:n[0],end:n[1]}[e]})):t);return r[function(t,e){var n=m(e),r=1/0,o=-1;return t.forEach((function(t,e){var i=m(t),a=Math.abs(i-n);a<r&&(r=a,o=e)})),o}(r,n)]},h=function(t){return t&&t.indexOf&&t.indexOf("--")>0},w=function(t,e){var n=p()(t).diff(e);return{start:n>=0?e:t,end:n>=0?t:e}},_=function(t){return 6e4*t.getTimezoneOffset()},G=function(t){var e=t;!a()(t)&o()(t)&&(e=new Date(t));var n=e.getUTCHours();n=n<10?"0"+n:n;var r=e.getUTCMinutes();r=r<10?"0"+r:r;var i=e.getUTCSeconds();return i=i<10?"0"+i:i,"".concat(n,":").concat(r,":").concat(i)},j=function(t){var e=t;!a()(t)&o()(t)&&(e=new Date(t));var n=e.getUTCMonth()+1,r=e.getUTCDate();return n=n<10?"0"+n:n,r=r<10?"0"+r:r,"".concat(e.getUTCFullYear(),"-").concat(n,"-").concat(r)},P=function(t,e){var n=(0,d.mh)(t),r="HH:mm:SS";switch(e){case"time":return r;case"date":return n;default:return n+" "+r}},C=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).Domains,e=void 0===t?{}:t,n=arguments.length>1?arguments[1]:void 0,r=s()(e.DimensionDomain||[]).concat(),o=e["@version"]||e.version,i=c()(e,"SpaceDomain.BoundingBox");return i&&r.push({Identifier:"space",Domain:i}),r.map((function(t){var e=t.Identifier,r=t.Domain;return{source:{type:"multidim-extension",version:o,url:n},name:e,domain:r}}))},I=function(t,e,n){var r=m(e),o=m(n);return t.reduce((function(t,e){var n=m(e);return m(r)<n&&m(o)>n?[].concat(O(t),[e]):O(t)}),[])},Y=function(t){var e=t.reduce((function(t,e){if(-1!==e.indexOf("/")){var n=y(e.split("/"),2),r=n[0],o=n[1];return[].concat(O(t),[r,o])}return[].concat(O(t),[e])}),[]).sort();return[e[0],e[e.length-1]]},N=function(t,e,n){var r=p()(t);return("add"===n?r.add(e,"seconds"):r.subtract(e,"seconds")).toISOString()},B=function(t){var e,n;(n=(n=o()(t)?t.indexOf("--")>0?t.split("--"):t.indexOf(",")>0?t.split(","):[t]:t).reduce((function(t,e){return t.concat(e.split("/"))}),[]).sort()).length>2&&(n=[n[0],n[n.length-1]]);var r=y((null===(e=n)||void 0===e?void 0:e.filter((function(t){return!!t})))||[],2);return[r[0],r[1]]},H=function(t){var e=t;!a()(t)&o()(t)&&(e=new Date(t));var n=e.getHours();n=n<10?"0"+n:n;var r=e.getMinutes();r=r<10?"0"+r:r;var i=e.getSeconds();return i=i<10?"0"+i:i,"".concat(n,":").concat(r,":").concat(i)}},73443:(t,e,n)=>{"use strict";n.d(e,{rs:()=>r,AY:()=>o,SW:()=>i,yB:()=>a,oG:()=>u,oz:()=>c,id:()=>l,gc:()=>s,cE:()=>f,rG:()=>p,Vj:()=>d,nY:()=>O});var r="GEONODE:SAVING_RESOURCE",o="GEONODE:SAVE_SUCCESS",i="GEONODE:SAVE_ERROR",a="GEONODE:CLEAR_SAVE",u="GEONODE:SAVE_CONTENT",c="GEONODE:SAVE_DIRECT_CONTENT";function l(){return{type:r}}function s(t){return{type:o,success:t}}function f(t){return{type:i,error:t}}function p(){return{type:a}}function d(t,e,n,r){return{type:u,id:t,metadata:e,reload:n,showNotifications:r}}function O(){return{type:c}}},535188:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ConnectedSyncButton:()=>U,default:()=>V});var r=n(124852),o=n.n(r),i=n(675263),a=n.n(i),u=n(171703),c=n(22222),l=n(322843),s=n(805346),f=n(303744),p=n(274621),d=n(49977),O=n(375875),y=n.n(O),v=n(682492),S=n.n(v),E=n(944908),m=n.n(E),g="GEONODE:SYNC_RESOURCES",D=n(73443),b=n(482100),R=n(337326),A=n(134990),T=n(197395),h=n(535721),w=n(367306),_=n(555927);function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function j(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||P(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){if(t){if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){var r,o,i,a;r=t,o=e,i=n[e],a=function(t,e){if("object"!=G(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==G(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("geostory"===t){var r=e.subtype||e.resource_type;return{type:r,data:"map"!==r?(0,h.R1)(e,e):(0,h.F0)(e)}}if("dashboard"===t){var o,i=null===(o=e.widgets)||void 0===o?void 0:o.map((function(t){if("map"===t.widgetType&&t.maps)return Y(Y({},t),{},{maps:t.maps.map((function(t){var e=n.find((function(e){var n;return!(e.data.pk!==(null==t||null===(n=t.extraParams)||void 0===n?void 0:n.pk))}));return e?Y(Y({},t),e.data.data.map):t}))});var e=n.find((function(e){var n,r;return!(e.data.pk!==(null===(n=t.map)||void 0===n||null===(r=n.extraParams)||void 0===r?void 0:r.pk))}));return e?Y(Y({},t),{},{map:Y(Y({},t.map),e.data.data.map)}):t}));return{data:S()(e,{widgets:i})}}return{}};const B={gnSyncComponentsWithResources:function(t,e){return t.ofType(g).switchMap((function(){var t=e.getState(),n=(0,b.L4)(t),r=function(t,e){switch(t){case"geostory":return(0,b.hs)(e);case"dashboard":return(0,b.sF)(e);default:return[]}}(n,t),o=m()(r.maps||[]),i=m()(r.documents||[]);return d.Observable.defer((function(){return y().all([o.length>0?(0,R.zV)(o).then((function(t){return t})).catch((function(){return[]})):Promise.resolve([]),i.length>0?(0,R.gU)(i).then((function(t){return t})).catch((function(){return[]})):Promise.resolve([])]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,n)||P(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],u=r[1];return[].concat(j(o.map((function(t){var e=a.find((function(e){return e.pk===t}));return e?{data:e,status:"success",title:e.title}:{status:"error",title:"map/".concat(t)}}))),j(i.map((function(t){var e=u.find((function(e){return e.pk===t}));return e?{data:e,status:"success",title:e.title}:{status:"error",title:"document/".concat(t)}}))))}))})).switchMap((function(e){var r,o,i=e.filter((function(t){return"error"===t.status})),a=e.filter((function(t){return"success"===t.status})),u=function(){if(0===a.length)return[];if("geostory"===n)return a.map((function(t){var e=t.data,n=N("geostory",e),r=n.type,o=n.data;return(0,A.zJ)(e.pk,r,o)}));if("dashboard"===n){var e=(0,w.hS)(t),r=N("dashboard",e,a).data;return[(0,_.rR)((0,w.NB)(t),r)]}return[]}(),c=function(t,e,n){var r="Success";return t>0&&e>0?r="Warning":0===t&&e>0?r="Success":t>0&&0===e&&(r="Error"),{level:r.toLowerCase(),title:"gnviewer.sync".concat(r).concat("Warning"!==r?n:"","Title"),message:"gnviewer.sync".concat(r,"Message")}}(i.length,a.length,n),l=c.level,s=c.title,f=c.message;return d.Observable.of.apply(d.Observable,j(u).concat([(0,D.gc)(),(0,T.$Z)({title:s,message:f,values:{successTitles:null===(r=a.map((function(t){return t.title})))||void 0===r?void 0:r.join(", "),errorTitles:null===(o=i.map((function(t){return t.title})))||void 0===o?void 0:o.join(", ")}},l)]))})).catch((function(t){var e,n;return d.Observable.of((0,D.gc)(),(0,T.vU)({title:"gnviewer.syncErrorTitle",message:(null==t||null===(e=t.data)||void 0===e?void 0:e.detail)||(null==t||null===(n=t.originalError)||void 0===n?void 0:n.message)||(null==t?void 0:t.message)||"gnviewer.syncErrorDefault"}))})).startWith((0,D.id)())}))}};function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){var e=t.synchronize,n=t.enabled,r=t.size;return n&&o().createElement(f.Z,{variant:"primary",size:r,onClick:function(){return e()}},o().createElement(s.Z,{msgId:"gnviewer.sync"}))}M.contextTypes={synchronize:a().func};var U=(0,u.connect)((0,c.P1)(p.jl,(function(t){return{enabled:t}})),{synchronize:function(){return{type:g}}})(M);const V=(0,l.rx)("Sync",{component:U,containers:{ActionNavbar:{name:"Sync",priority:1}},epics:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){var r,o,i,a;r=t,o=e,i=n[e],a=function(t,e){if("object"!=H(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==H(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},B),reducers:{}})},887157:(t,e,n)=>{var r=n(640554),o=n(588958);t.exports=function(t,e,n,i){var a=t.length;for((n=r(n))<0&&(n=-n>a?0:a+n),(i=void 0===i||i>a?a:r(i))<0&&(i+=a),i=n>i?0:o(i);n<i;)t[n++]=e;return t}},580760:(t,e,n)=>{var r=n(989881);t.exports=function(t,e){var n=[];return r(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}},441761:(t,e,n)=>{var r=n(644239),o=n(637005);t.exports=function(t){return o(t)&&"[object Date]"==r(t)}},819873:(t,e,n)=>{var r=n(887157),o=n(816612);t.exports=function(t,e,n,i){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&o(t,e,n)&&(n=0,i=a),r(t,e,n,i)):[]}},763105:(t,e,n)=>{var r=n(234963),o=n(580760),i=n(267206),a=n(701469);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},647960:(t,e,n)=>{var r=n(441761),o=n(307518),i=n(531167),a=i&&i.isDate,u=a?o(a):r;t.exports=u},313880:(t,e,n)=>{var r=n(479833);t.exports=function(){var t=arguments,e=r(t[0]);return t.length<3?e:e.replace(t[1],t[2])}},588958:(t,e,n)=>{var r=n(829750),o=n(640554);t.exports=function(t){return t?r(o(t),0,4294967295):0}}}]);