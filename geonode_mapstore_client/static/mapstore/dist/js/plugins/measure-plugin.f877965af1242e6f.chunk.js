(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[7376],{717140:(e,t,r)=>{"use strict";r.d(t,{Ij:()=>g,Jb:()=>o,Kf:()=>c,Lu:()=>a,Ly:()=>m,Mm:()=>y,Mr:()=>v,Ne:()=>p,Nu:()=>j,Q4:()=>i,S$:()=>f,V9:()=>n,VX:()=>h,ZM:()=>u,d:()=>E,et:()=>d,jx:()=>w,tq:()=>O,uw:()=>S,vK:()=>b,vw:()=>A});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",a="DRAW:SET_CURRENT_STYLE",i="DRAW:GEOMETRY_CHANGED",u="DRAW:DRAW_SUPPORT_STOPPED",l="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES",c="DRAW:SET_SNAPPING_LAYER",p="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",m="DRAW:SET_SNAPPING_CONFIG";function b(e,t,r,n,o){return{type:i,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function d(){return{type:l,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function y(){return{type:s,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function g(){return{type:u}}function h(e,t,r,o,a,i){return{type:n,status:e,method:t,owner:r,features:o,options:a,style:i}}function v(e,t){return{type:o,geometry:e,owner:t}}function E(e){return{type:a,currentStyle:e}}var O=function(e){return h("clean","",e,[],{})};function w(){return{type:f}}function S(e){return{type:c,snappingLayer:e}}function A(){return{type:p}}function j(e,t,r){return{type:m,value:e,prop:t,pluginCfg:r}}},670643:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var n=r(605556),o=r.n(n),a=r(273517),i=r.n(a),u=r(269843),l=r.n(u),s=r(274156);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(null,arguments)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=b(t),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.context.intl?i().createElement(s.FormattedNumber,p({value:this.props.value},this.props.numberParams)):i().createElement("span",null,!l()(this.props.value)&&!isNaN(this.props.value)&&this.props.value.toString&&this.props.value.toString()||"")}}])&&f(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().Component);y(h,"propTypes",{value:o().oneOfType([o().object,o().number]),numberParams:o().object}),y(h,"contextTypes",{intl:o().object});const v=h},598234:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(273517),o=r.n(n),a=r(8117);const i=function(e){var t=e.children,r=e.info,n=e.onClose;return o().createElement("div",{className:"ms-measure-toolbar"},o().createElement("div",{className:"ms-measure-icon"},o().createElement(a.e6,{glyph:"1-ruler"})),t,o().createElement("div",{className:"ms-measure-info"},r),n?o().createElement(a.$n,{className:"square-button-md no-border",onClick:function(e){e.stopPropagation(),n()}},o().createElement(a.e6,{glyph:"1-close"})):null)}},66921:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Jt});var n=r(273517),o=r.n(n),a=r(8117),i=r(811668),u=r(801081),l=r(393149),s=r(415392);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m="CHANGE_MEASUREMENT_TOOL",b="CHANGE_MEASUREMENT_STATE",d="MEASUREMENT:CHANGE_UOM",y="MEASUREMENT:CHANGED_GEOMETRY",g="MEASUREMENT:SET_TEXT_LABELS",h="MEASUREMENT:SET_CURRENT_FEATURE",v="MEASUREMENT:ADD_AS_LAYER",E="MEASUREMENT:RESET_GEOMETRY",O="MEASUREMENT:CHANGE_FORMAT",w="MEASUREMENT:CHANGE_COORDINATES",S="MEASUREMENT:ADD_MEASURE_AS_ANNOTATION",A="MEASUREMENT:UPDATE_MEASURES",j="MEASUREMENT:INIT",T="MEASUREMENT:SET_ANNOTATION_MEASUREMENT";function P(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:m},e)}function M(e){return function(t){t(P(e))}}function C(e,t,r){return{type:d,uom:e,value:t,previousUom:r}}function L(e){return{type:y,features:e}}function N(e,t,r){return{type:v,features:e,textLabels:t,uom:r}}function D(e){return{type:w,coordinates:e}}var x=r(130711),_=r(747135),R=r(905185),I=r(106629),k=r(858156),U=r.n(k);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){V(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function V(e,t,r){return(t=function(e){var t=function(e){if("object"!=B(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var q=function(e){return U()(e,"controls.measure.enabled")},W=function(e){return(0,x.U0)(e)&&!e.measurement.isDrawing&&(0,_.hd)(e)},H=function(e){return e&&e.measurement&&e.measurement.showAddAsAnnotation},z=function(e){return e&&e.measurement&&e.measurement.trueBearing&&e.measurement.trueBearing.measureTrueBearing},Z=function(e){var t=e.measurement.feature||{};return t.geometry&&(t=(0,R.hZ)("geometry.coordinates",(0,I.Gd)(t.geometry||{}),t)),t},Y=r(779893),J=r(129519),K=r(927537),$=r.n(K),Q=r(302404),X=r.n(Q),ee=r(36944),te=r.n(ee),re=r(605556),ne=r.n(re),oe=r(455268),ae=r(541033),ie=r.n(ae),ue=r(327229),le=r(628017),se=r(457601),ce=r(8571),pe=r(670643),fe=r(154150),me=r(256951),be=r(542541),de=r(598234);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach(function(t){Se(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ae(n.key),n)}}function Ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ee=function(){return!!e})()}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function Se(e,t,r){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e){var t=function(e){if("object"!=ye(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ye(t)?t:t+""}r.e(3927).then(r.bind(r,423927));var je=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Se(e=function(e,t,r){return t=Oe(t),function(e,t){if(t&&("object"==ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ee()?Reflect.construct(t,r||[],Oe(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"onGeomClick",function(t){e.props.geomType!==t&&e.props.toggleMeasure({geomType:t})}),Se(e,"onResetClick",function(){e.props.toggleMeasure({geomType:null})}),Se(e,"getToolTips",function(){return{lineToolTip:o().createElement(a.m_,{id:"tooltip-button.line"},e.props.lengthLabel),areaToolTip:o().createElement(a.m_,{id:"tooltip-button.area"},e.props.areaLabel),bearingToolTip:o().createElement(a.m_,{id:"tooltip-button.bearing"},e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel)}}),Se(e,"renderMeasurements",function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={style:"decimal",minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2};return o().createElement(o().Fragment,null,e.props.lineMeasureEnabled&&o().createElement(o().Fragment,null,e.props.lineMeasureValueEnabled&&o().createElement(o().Fragment,null,o().createElement("div",null,e.props.lengthLabel,": "," "),o().createElement("div",{id:"measure-len-res",className:"measure-value"},o().createElement(pe.A,{key:"len",numberParams:r,value:e.props.formatLength(e.props.uom.length.unit,e.props.measurement.len)})," ",e.props.uom.length.label)),o().createElement(oe.DropdownList,{disabled:t,value:e.props.uom.length.label,onChange:function(t){e.props.onChangeUom("length",t,e.props.uom)},data:e.props.uomLengthValues,textField:"label",valueField:"value"})),e.props.areaMeasureEnabled&&o().createElement(o().Fragment,null,e.props.areaMeasureValueEnabled&&o().createElement(o().Fragment,null,o().createElement("div",null,e.props.areaLabel,": "," "),o().createElement("div",{id:"measure-area-res",className:"measure-value"},o().createElement(pe.A,{key:"area",numberParams:r,value:e.props.formatArea(e.props.uom.area.unit,e.props.measurement.area)})," ",e.props.uom.area.label)),o().createElement(oe.DropdownList,{disabled:t,value:e.props.uom.area.label,onChange:function(t){e.props.onChangeUom("area",t,e.props.uom)},data:e.props.uomAreaValues,textField:"label",valueField:"value"})),e.props.bearingMeasureEnabled&&e.props.bearingMeasureValueEnabled&&o().createElement(o().Fragment,null,o().createElement("div",null,e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel,": "," "),o().createElement("div",{id:"measure-bearing-res",className:"measure-value"},e.props.formatBearing(e.props.measurement.bearing||0,e.isTrueBearing()&&e.props.measurement.trueBearing))))}),Se(e,"renderPanel",function(t){return e.props.showResults?e.renderMeasurements(t):null}),Se(e,"renderLabel",function(t){return e.props.showButtonsLabels?o().createElement("span",{className:"option-text"},(0,le.kA)(e.context.messages,t)):null}),Se(e,"renderText",function(t,r){return t?o().createElement("span",null,o().createElement("span",{className:"option-icon"},o().createElement(a.e6,{glyph:t})),e.renderLabel(r)):e.renderLabel(r)}),Se(e,"isTrueBearing",function(){return e.props.measurement&&e.props.measurement.trueBearing&&e.props.measurement.trueBearing.measureTrueBearing}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.geomType||this.props.toggleMeasure({geomType:"LineString"})}},{key:"shouldComponentUpdate",value:function(e){return!X()(e,this.props)}},{key:"render",value:function(){var e,t,r,n=this,i=!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled),u=U()(this.props.measurement,"features",[])[this.props.measurement.currentFeature||0],l=(null==u||null===(e=u.properties)||void 0===e?void 0:e.disabled)||!1,s=0===(this.props.measurement.features||[]).length||l;this.props.useSingleFeature?(t=(U()(this.props.measurement,"feature.geometry.type")||"").toLowerCase(),r=(U()(this.props.measurement,-1!==t.indexOf("polygon")?"feature.geometry.coordinates[0]":"feature.geometry.coordinates")||[]).map(function(e){return{lon:e[0],lat:e[1]}})):(t=U()(u,"geometry.type","").toLowerCase(),r=(U()(u,-1!==t.indexOf("polygon")?"geometry.coordinates[0]":"geometry.coordinates")||[]).map(function(e){return{lon:e[0],lat:e[1]}}));var c=(this.props.measurement||{}).exportToAnnotation,p=void 0!==c&&c;return o().createElement(fe.A,{id:this.props.id,style:he({overflow:"visible"},!this.props.showCoordinateEditor&&{display:"block",width:"auto",height:"auto"}),header:o().createElement(de.A,{info:this.renderPanel(l),onClose:this.props.onClose},o().createElement(a._O,null,o().createElement(me.A,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:this.props.lineGlyph,active:!!this.props.lineMeasureEnabled,bsStyle:this.props.lineMeasureEnabled?"success":"primary",tooltip:this.renderText(this.props.inlineGlyph&&this.props.lineGlyph,"measureComponent.MeasureLength"),onClick:function(){return n.onGeomClick("LineString")},disabled:!this.props.lineMeasureEnabled&&l},{active:!!this.props.areaMeasureEnabled,bsStyle:this.props.areaMeasureEnabled?"success":"primary",glyph:this.props.areaGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.areaGlyph,"measureComponent.MeasureArea"),onClick:function(){return n.onGeomClick("Polygon")},disabled:!this.props.areaMeasureEnabled&&l},{visible:!this.props.disableBearing,active:!!this.props.bearingMeasureEnabled,bsStyle:this.props.bearingMeasureEnabled?"success":"primary",glyph:this.props.bearingGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.bearingGlyph,this.isTrueBearing()?"measureComponent.MeasureTrueBearing":"measureComponent.MeasureBearing"),onClick:function(){return n.onGeomClick("Bearing")},disabled:!this.props.bearingMeasureEnabled&&l}]}),o().createElement(me.A,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"trash",visible:!!this.props.withReset,tooltip:o().createElement(ce.A,{msgId:"measureComponent.resetTooltip"}),onClick:function(){return n.onResetClick()}}]}),o().createElement(me.A,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"ext-json",disabled:!i||s,visible:this.props.showExportToGeoJSON,tooltip:o().createElement(ce.A,{msgId:"measureComponent.exportToGeoJSON"}),onClick:function(){(0,ue.RG)(JSON.stringify((0,se.Xy)(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom,ie()(),"MapStore Measurements")),"measurements.json","application/geo+json")}},{glyph:"add-layer",visible:this.props.showAddAsLayer,disabled:!i||s||p,tooltip:o().createElement(ce.A,{msgId:"measureComponent.addAsLayer"}),onClick:function(){return n.props.onAddAsLayer(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom)}},{glyph:p?"floppy-disk":"comment",tooltip:o().createElement(ce.A,{msgId:p?"measureComponent.saveMeasure":"measureComponent.addAsAnnotation"}),onClick:function(){n.props.onAddAnnotation(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom,!p,{id:n.props.measurement.id,visibility:n.props.measurement.visibility})},disabled:!i||s,visible:this.props.showAddAsAnnotation}]})))},this.props.showCoordinateEditor&&o().createElement(a.xA,{fluid:!0,style:{maxHeight:400,borderTop:"1px solid #ddd"}},this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled?o().createElement(a.fI,{style:this.props.isCoordinateEditorEnabled?{}:{pointerEvents:"none",opacity:.5}},o().createElement(be.A,{key:"measureEditor",isMouseEnterEnabled:!0,isMouseLeaveEnabled:!0,format:this.props.format,currentFeature:this.props.measurement.currentFeature,features:this.props.measurement.features,mapProjection:this.props.mapProjection,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onChange:this.props.onChangeCoordinates,onChangeCurrentFeature:this.props.onChangeCurrentFeature,showFeatureSelector:this.props.showFeatureSelector,items:[],isDraggable:!0,type:this.props.geomType,showLengthAndBearingLabel:this.props.showLengthAndBearingLabel,components:this.props.useSingleFeature||-1===t.indexOf("polygon")?r:$()(r),properties:(null==u?void 0:u.properties)||{}})):o().createElement(a.fI,null,o().createElement(a.fv,{xs:12,className:"text-center",style:{padding:15}},o().createElement("i",null,o().createElement(ce.A,{msgId:"measureComponent.selectTool"}))))))}}])&&ve(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);Se(je,"propTypes",{id:ne().string,name:ne().string,columnProperties:ne().object,propertiesChangeHandler:ne().func,lengthButtonText:ne().oneOfType([ne().string,ne().element]),areaButtonText:ne().oneOfType([ne().string,ne().element]),resetButtonText:ne().oneOfType([ne().string,ne().element]),lengthLabel:ne().oneOfType([ne().string,ne().element]),areaLabel:ne().oneOfType([ne().string,ne().element]),bearingLabel:ne().oneOfType([ne().string,ne().element]),trueBearingLabel:ne().oneOfType([ne().string,ne().element]),uom:ne().shape({length:ne().shape({unit:ne().string.isRequired,label:ne().string.isRequired}),area:ne().shape({unit:ne().string.isRequired,label:ne().string.isRequired})}),toggleMeasure:ne().func,measurement:ne().object,lineMeasureEnabled:ne().bool,lineMeasureValueEnabled:ne().bool,areaMeasureEnabled:ne().bool,areaMeasureValueEnabled:ne().bool,bearingMeasureEnabled:ne().bool,bearingMeasureValueEnabled:ne().bool,showButtons:ne().bool,showResults:ne().bool,mapProjection:ne().string,lineGlyph:ne().string,areaGlyph:ne().string,bearingGlyph:ne().string,withReset:ne().bool,showButtonsLabels:ne().bool,inlineGlyph:ne().bool,formatLength:ne().func,formatArea:ne().func,formatBearing:ne().func,onChangeUom:ne().func,uomLengthValues:ne().array,uomAreaValues:ne().array,format:ne().string,onChangeFormat:ne().func,onChangeCoordinates:ne().func,onChangeCurrentFeature:ne().func,onAddAsLayer:ne().func,onHighlightPoint:ne().func,geomType:ne().string,defaultOptions:ne().object,onAddAnnotation:ne().func,showAddAsAnnotation:ne().bool,showLengthAndBearingLabel:ne().bool,showAddAsLayer:ne().bool,showFeatureSelector:ne().bool,useSingleFeature:ne().bool,showExportToGeoJSON:ne().bool,disableBearing:ne().bool,trueBearing:ne().object,onMount:ne().func,onUpdateOptions:ne().func,showCoordinateEditor:ne().bool,isCoordinateEditorEnabled:ne().bool,onClose:ne().func}),Se(je,"contextTypes",{messages:ne().object}),Se(je,"defaultProps",{mapProjection:"EPSG:3857",columnProperties:{xs:4,sm:4,md:4},uomLengthValues:[{value:"ft",label:"ft"},{value:"m",label:"m"},{value:"km",label:"km"},{value:"mi",label:"mi"},{value:"nm",label:"nm"}],uomAreaValues:[{value:"sqft",label:"ft²"},{value:"sqm",label:"m²"},{value:"sqkm",label:"km²"},{value:"sqmi",label:"mi²"},{value:"sqnm",label:"nm²"}],id:"measure-result-panel",uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},geomType:"LineString",defaultOptions:{geomType:"LineString"},showResults:!0,showAddAsAnnotation:!1,showAddAsLayer:!0,showExportToGeoJSON:!0,showCoordinateEditor:!1,isCoordinateEditorEnabled:!0,showLengthAndBearingLabel:!1,withReset:!0,lineGlyph:"1-measure-length",areaGlyph:"1-measure-area",bearingGlyph:"1-measure-bearing",showButtonsLabels:!0,lengthLabel:o().createElement(ce.A,{msgId:"measureComponent.lengthLabel"}),areaLabel:o().createElement(ce.A,{msgId:"measureComponent.areaLabel"}),bearingLabel:o().createElement(ce.A,{msgId:"measureComponent.bearingLabel"}),trueBearingLabel:o().createElement(ce.A,{msgId:"measureComponent.trueBearingLabel"}),formatLength:function(e,t){return(0,I.Rl)(t,"m",e)},formatArea:function(e,t){return(0,I.Rl)(t,"sqm",e)},formatBearing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,I.iv)(te()(e||0,6),t)},onChangeUom:function(){},onChangeFormat:function(){},onMount:function(){},onUpdateOptions:function(){},onAddAsLayer:function(){}});const Te=je;var Pe=r(625885),Me=["showCoordinateEditor"];function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Le.apply(null,arguments)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ie(n.key),n)}}function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(De=function(){return!!e})()}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function Re(e,t,r){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e){var t=function(e){if("object"!=Ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ce(t)?t:t+""}var ke=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Re(e=function(e,t,r){return t=xe(t),function(e,t){if(t&&("object"==Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,De()?Reflect.construct(t,r||[],xe(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"onClose",function(){e.props.onClose(!1)}),Re(e,"initDefaultOptions",function(t){var r=t.showCoordinateEditor,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,Me);e.props.onMount(r||e.props.showCoordinateEditor),e.props.toggleMeasure({geomType:n.geomType||"LineString"})}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.initDefaultOptions(this.props.defaultOptions)}},{key:"componentDidUpdate",value:function(e){X()(e.defaultOptions,this.props.defaultOptions)||this.initDefaultOptions(this.props.defaultOptions)}},{key:"render",value:function(){return this.props.show?this.props.showCoordinateEditor?o().createElement(Pe.A,{dock:!0,containerId:"measure-container",containerStyle:this.props.dockStyle,bsStyle:"primary",position:"right",title:o().createElement(ce.A,{key:"title",msgId:"measureComponent.Measure"}),glyph:"1-ruler",size:this.props.size,open:this.props.show,onClose:this.onClose,style:this.props.dockStyle},o().createElement(Te,Le({id:"measure-panel"},this.props))):o().createElement(Te,Le({id:"measure-panel",style:{minWidth:"500px"}},this.props)):null}}])&&Ne(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);Re(ke,"propTypes",{show:ne().bool,closeGlyph:ne().string,onClose:ne().func,onMount:ne().func,onInit:ne().func,showCoordinateEditor:ne().bool,defaultOptions:ne().object,style:ne().object,dockStyle:ne().object,size:ne().number}),Re(ke,"contextTypes",{messages:ne().object}),Re(ke,"defaultProps",{show:!1,defaultOptions:{},onMount:function(){},toggleMeasure:function(){},showCoordinateEditor:!1,showAddAsAnnotation:!1,closeGlyph:"1-close",dockStyle:{},size:550});const Ue=ke;var Be=r(274156),Fe=r(590179),Ge=r.n(Fe),Ve=r(916589);function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach(function(t){ze(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ze(e,t,r){return(t=function(e){var t=function(e){if("object"!=qe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ze={locale:navigator&&navigator.language,formats:{},messages:{},defaultLocale:"en",defaultFormats:{},formatDate:function(e){return e},formatTime:function(e){return e},formatRelative:function(e){return e},formatNumber:function(e){return e},formatPlural:function(e){return e},formatMessage:function(e){return e},formatHTMLMessage:function(e){return e},now:function(){return new Date}},Ye=r(275705),Je=r(444003),Ke=["mapType","defaultOptions","onInit"],$e=["onInit"];function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xe.apply(null,arguments)}function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach(function(t){nt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function nt(e,t,r){return(t=function(e){var t=function(e){if("object"!=Qe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ot=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,Ve.compose)((0,Ve.getContext)({intl:ne().object}),(0,Ve.branch)(function(e){return!!e.intl},Be.injectIntl,(0,Ve.withProps)({intl:Ze})),(0,Ve.withPropsOnChange)(["intl"],function(e){var r=e.intl,n=void 0===r?{}:r;return t.reduce(function(){var e=arguments.length>1?arguments[1]:void 0;return He(He({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},ze({},e,n[e]))},{})}),(e=["intl"],(0,Ve.mapProps)(function(t){return Ge()(t,e)})))}(["formatNumber"]),at=Ue,it=nt(nt(nt({},Je.Av.LEAFLET,(0,n.lazy)(function(){return Promise.all([r.e(3481),r.e(9341),r.e(6287)]).then(r.bind(r,781249))})),Je.Av.OPENLAYERS,(0,n.lazy)(function(){return Promise.all([r.e(6128),r.e(284),r.e(1224),r.e(4620),r.e(1358),r.e(8168),r.e(6369)]).then(r.bind(r,128168))})),Je.Av.CESIUM,(0,n.lazy)(function(){return Promise.all([r.e(2129),r.e(5394),r.e(6881),r.e(6714),r.e(1144),r.e(6570),r.e(7378),r.e(531),r.e(7308)]).then(r.bind(r,743929))})),ut=ot(function(e){var t=e.mapType,r=e.defaultOptions,a=(e.onInit,rt(e,Ke)),i=it[t];return i?o().createElement(n.Suspense,{fallback:o().createElement(de.A,{onClose:a.onClose},o().createElement(Ye.A,{size:20}))},o().createElement(i,Xe({},a,r,{unitsOfMeasure:Object.keys(a.uom).reduce(function(e,t){return tt(tt({},e),{},nt({},t,tt(tt({},a.uom[t]),{},{value:a.uom[t].unit||a.uom[t].value})))},{}),defaultMeasureType:(null==r?void 0:r.geomType)||I.iQ.POLYLINE_DISTANCE_3D,hideInfoLabel:void 0!==(null==r?void 0:r.showLabel)&&!(null!=r&&r.showLabel),hideSegmentsLengthLabels:void 0!==(null==r?void 0:r.showSegmentLengths)&&!(null!=r&&r.showSegmentLengths)}))):null}),lt=(0,i.connect)((0,u.Mz)([q,function(e){var t;return(null==e||null===(t=e.controls)||void 0===t||null===(t=t.measure)||void 0===t?void 0:t.enabled)||!1},function(e){var t;return null==e||null===(t=e.measurement)||void 0===t?void 0:t.geomType},function(e){return e.measurement&&G(G({},e.measurement),{},{feature:Z(e)})||{}}],function(e,t,r,n){return{active:e,enabled:t,measureType:r,measurement:n,useTreshold:(null==n?void 0:n.useTreshold)||null,uom:(null==n?void 0:n.uom)||I.p7}}),{onChangeMeasureType:function(e){return P({geomType:e})},onUpdateFeatures:L,onInit:function(){return{type:j,defaultOptions:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}},changeMeasurementState:function(e){return{type:b,pointMeasureEnabled:e.pointMeasureEnabled,lineMeasureEnabled:e.lineMeasureEnabled,areaMeasureEnabled:e.areaMeasureEnabled,bearingMeasureEnabled:e.bearingMeasureEnabled,geomType:e.geomType,values:e.values,feature:e.feature,point:e.point,len:e.len,area:e.area,bearing:e.bearing,lenUnit:e.lenUnit,areaUnit:e.areaUnit}},updateMeasures:function(e){return{type:A,measures:e}},resetGeometry:function(){return{type:E}},changeGeometry:L,setTextLabels:function(e){return{type:g,textLabels:e}},changeMeasurement:M,onChangeUnitOfMeasure:C,onClose:s.fN.bind(null,"measure","enabled",!1),onAddAsLayer:N})(function(e){var t=e.onInit,r=rt(e,$e);return(0,n.useEffect)(function(){t(r.defaultOptions)},[r.defaultOptions]),(0,n.useEffect)(function(){r.onChangeMeasureType(null)},[r.mapType]),r.enabled?o().createElement(ut,r):null}),st=r(97401),ct=r(342338),pt=r(962193),ft=r.n(pt),mt=r(324713),bt=r.n(mt),dt=r(198023),yt=r.n(dt),gt=["id"];function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function vt(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Et(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Et(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach(function(t){St(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function St(e,t,r){return(t=function(e){var t=function(e){if("object"!=ht(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ht(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var At={lineMeasureEnabled:!0,geomType:"LineString",areaMeasureEnabled:!1,bearingMeasureEnabled:!1,customStartEndPoint:{startPointOptions:{radius:3,fillColor:"green"},endPointOptions:{radius:3,fillColor:"red"}},uom:I.p7,lengthFormula:"haversine",showLabel:!0,showSegmentLengths:!0,currentFeature:0,features:[]};var jt=r(45388),Tt=r.n(jt),Pt=r(904059),Mt=r(812366),Ct=r(273494),Lt=r(446176),Nt=r(271020),Dt=r(29489),xt=r(967858),_t=r(535273);function Rt(e){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(e)}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach(function(t){Bt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Bt(e,t,r){return(t=function(e){var t=function(e){if("object"!=Rt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Rt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ft={addAnnotationFromMeasureEpic:function(e,t){return e.ofType(S).switchMap(function(e){var r,n,o=e.features,a=e.textLabels,i=e.uom,u=e.properties||{},l=u.id,s=void 0===l?ie()():l,c=u.visibility,p=void 0===c||c,f=(0,se.he)(o,a,i,s,"Annotations created from measurements"),m=t.getState(),b=(0,Dt.kv)(m),d=[M(null),M("LineString")];return b&&(0,x.cU)(_t.BC)(m)?(n=Tt().Observable).of.apply(n,d.concat([(0,Lt.gl)(b.id,f)])):(r=Tt().Observable).of.apply(r,d.concat([(0,Pt.VE)(Ut(Ut({},f),{},{visibility:p})),(0,Lt._G)(f.id)]))})},addAsLayerEpic:function(e){return e.ofType(v).switchMap(function(e){var t=e.features,n=e.uom,o=e.textLabels;return Tt().Observable.defer(function(){return Promise.resolve().then(r.t.bind(r,382378,23)).then(function(e){return e.default})}).switchMap(function(e){var r,a,i=(0,se.Xy)(t,o,n),u=(r=e(i)||[-180,-90,180,90],a=4,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return u}}(r,a)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(e,t):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=u[0],s=u[1],c=u[2],p=u[3];return Tt().Observable.of((0,Pt.VE)({type:"vector",id:ie()(),name:"measurements",title:"Measurements",hideLoading:!0,features:(null==i?void 0:i.features)||[],visibility:!0,style:i.style,bbox:{crs:"EPSG:4326",bounds:{minx:l,miny:s,maxx:c,maxy:p}}}))})})},openMeasureEpic:function(e,t){return e.ofType(s.$4,s.x7).filter(function(e){return"measure"===e.control&&q(t.getState())}).switchMap(function(){var e,r=[(0,Mt.gt)(),(0,Mt.bC)(),(0,Ct.K6)("click","measure")];return((null===(e=t.getState())||void 0===e||null===(e=e.controls)||void 0===e?void 0:e.measure)||{}).showCoordinateEditor&&r.push((0,Nt.W)("measure","add","right")),Tt().Observable.from(r)})},closeMeasureEpics:function(e,t){return e.ofType(s.$4,s.x7).filter(function(e){return"measure"===e.control&&!(0,x.qt)(t.getState())}).switchMap(function(){var e,r=[M({lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,geomType:null,len:0,area:0,bearing:0}),(0,Ct.nt)("click","measure")];return((null===(e=t.getState())||void 0===e||null===(e=e.controls)||void 0===e?void 0:e.measure)||{}).showCoordinateEditor&&r.push((0,Nt.W)("measure","remove","right")),Tt().Observable.from(r)})},setMeasureStateFromAnnotationEpic:function(e,t){return e.ofType(T).switchMap(function(e){var r,n,o,a,i=e.features,u=(null==(o=t.getState())||null===(a=o.measurement)||void 0===a?void 0:a.geomType)===(null===(r=(0,se.gM)(i))||void 0===r?void 0:r[0]);return Tt().Observable.of(!u&&M({geomType:null===(n=(0,se.gM)(i))||void 0===n?void 0:n[0]}),(0,s.fN)("measure","enabled",!0),(0,s.fN)("annotations","enabled",!1))})},addCoordinatesEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(Ct.a2).filter(function(){var e,t=(null===(e=n())||void 0===e||null===(e=e.controls)||void 0===e?void 0:e.measure)||{},r=t.showCoordinateEditor,o=t.enabled;return r&&o}).switchMap(function(e){var t,r,o=e.point,a=(null===(t=n())||void 0===t?void 0:t.measurement)||{},i=a.currentFeature,u=a.features,l=void 0===u?[]:u,s=a.geomType,c=(null==o?void 0:o.latlng)||{},p=c.lng,f=c.lat,m=(null===(r=l[i])||void 0===r||null===(r=r.geometry)||void 0===r?void 0:r.coordinates)||[],b=void 0!==(m="Polygon"===s?m[0]:m)?m.findIndex(function(e){return!(0,I.qO)(e)}):-1;return-1!==b?((m=m.map(function(e){return{lon:e[0],lat:e[1]}}))[b]={lon:p,lat:f},Tt().Observable.of(D(m))):Tt().Observable.empty()})},tearDownMeasureOnDrawToolActive:function(e,t){return(0,xt.p)(e,t,"measure")}};var Gt=["coordsAeronauticalEnabled"];function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(r),!0).forEach(function(t){Ht(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ht(e,t,r){return(t=function(e){var t=function(e){if("object"!=Vt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zt=s.KP.bind(null,"measure",null),Zt=(0,i.connect)((0,u.Mz)([function(e){return{measurement:e.measurement||{},uom:e.measurement&&e.measurement.uom||I.p7,lineMeasureEnabled:e.measurement&&e.measurement.lineMeasureEnabled,lineMeasureValueEnabled:!(0,_.hd)(e),areaMeasureEnabled:e.measurement&&e.measurement.areaMeasureEnabled,areaMeasureValueEnabled:!(0,_.hd)(e),bearingMeasureEnabled:e.measurement&&e.measurement.bearingMeasureEnabled,showLengthAndBearingLabel:e.measurement&&e.measurement.showLengthAndBearingLabel,bearingMeasureValueEnabled:!(0,_.hd)(e),isCoordinateEditorEnabled:W(e),showCoordinateEditor:(0,x.U0)(e),showFeatureSelector:(0,_.hd)(e),useSingleFeature:!(0,_.hd)(e),withReset:(0,_.hd)(e),showExportToGeoJSON:(0,_.hd)(e),showAddAsAnnotation:H(e)&&(0,_.hd)(e),trueBearing:z(e),showAddAsLayer:(0,_.hd)(e),isCoordEditorEnabled:e.measurement&&!e.measurement.isDrawing,geomType:e.measurement&&e.measurement.geomType,format:e.measurement&&e.measurement.format,dockStyle:(0,st.o7)(e,{height:!0,right:!0},!0)}},function(e){return(0,x.qt)(e)}],function(e,t){return Wt(Wt({},e),{},{show:t,format:e.format||Y.Ay.getConfigProp("defaultCoordinateFormat")||"decimal"})}),{toggleMeasure:M,onAddAnnotation:function(e,t,r,n,o){return{type:S,features:e,textLabels:t,uom:r,save:n,properties:o}},onChangeUom:C,onChangeFormat:function(e){return{type:O,format:e}},onChangeCoordinates:D,onChangeCurrentFeature:function(e){return{type:h,featureIndex:e}},onClose:zt,onMount:function(e){return(0,s.fN)("measure","showCoordinateEditor",e)},onAddAsLayer:N},null,{pure:!1})(at),Yt=(0,i.connect)((0,u.Mz)([_.GS,function(e){var t,r;return"coordinatesSearch"===(null==e||null===(t=e.search)||void 0===t?void 0:t.activeSearchTool)&&"aeronautical"===(null==e||null===(r=e.search)||void 0===r?void 0:r.format)}],function(e,t){return{mapType:e,coordsAeronauticalEnabled:t}}))(function(e){var t,r=e.coordsAeronauticalEnabled,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Gt);return o().createElement("div",{className:n.mapType!==Je.Av.CESIUM&&null!=n&&null!==(t=n.defaultOptions)&&void 0!==t&&t.showCoordinateEditor?"measure-container measure-coords-editor":"measure-container",style:{top:r?88:48}},n.mapType===Je.Av.CESIUM?o().createElement("div",{id:"measure-cesium-wrapper"}):o().createElement(Zt,n))});const Jt=(0,l.i1)("Measure",{component:Yt,containers:{BurgerMenu:{name:"measurement",position:9,panel:!1,help:o().createElement(J.A,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:o().createElement(J.A,{msgId:"measureComponent.Measure"}),icon:o().createElement(a.e6,{glyph:"1-ruler"}),action:function(){return(0,s.fN)("measure","enabled",!0)},doNotHide:!0,priority:2},SidebarMenu:{name:"measurement",position:9,panel:!1,help:o().createElement(J.A,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:o().createElement(J.A,{msgId:"measureComponent.Measure"}),icon:o().createElement(a.e6,{glyph:"1-ruler"}),action:s.KP.bind(null,"measure",null),toggle:!0,toggleControl:"measure",toggleProperty:"enabled",doNotHide:!0,priority:1},Map:{name:"Measure",Tool:lt,doNotHide:!0,alwaysRender:!0}},reducers:{measurement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var r,n=null!==t.geomType&&bt()(e.features,function(e){var r;return("bearing"===((null===(r=e.properties)||void 0===r||null===(r=r.values)||void 0===r?void 0:r[0])||{}).type?"Bearing":e.geometry.type)===t.geomType});return Object.assign({},e,{lineMeasureEnabled:t.geomType!==e.geomType&&"LineString"===t.geomType,areaMeasureEnabled:t.geomType!==e.geomType&&"Polygon"===t.geomType,bearingMeasureEnabled:t.geomType!==e.geomType&&"Bearing"===t.geomType,geomType:t.geomType===e.geomType?null:t.geomType,features:null===t.geomType?[]:e.features,textLabels:null===t.geomType?[]:e.textLabels,feature:{properties:{disabled:!0}},currentFeature:-1!==n?n:(null===(r=e.features)||void 0===r?void 0:r.length)||0,len:0,area:0,bearing:0});case b:var o=t.feature;return(0,ct.Bi)(o)&&(o=(0,R.hZ)("geometry.coordinates[0]",$()(o.geometry.coordinates[0]),o)),Object.assign({},e,{lineMeasureEnabled:t.lineMeasureEnabled,areaMeasureEnabled:t.areaMeasureEnabled,bearingMeasureEnabled:t.bearingMeasureEnabled,geomType:t.geomType,values:t.values,feature:(0,R.hZ)("properties.disabled",e.feature.properties.disabled,o),point:t.point,len:t.len,area:t.area,bearing:t.bearing,lenUnit:t.lenUnit,areaUnit:t.areaUnit});case A:var a=t.measures,i=a.point,u=a.len,l=a.area,c=a.bearing;return wt(wt({},e),{},{point:i,len:u,area:l,bearing:c});case E:return wt(wt({},(0,R.hZ)("feature.properties.disabled",!0,e)),{},{isDrawing:!0,updatedByUI:!1});case d:var p="length"===t.uom?"lenUnit":"lenArea",f=t.value,v=f.value,S=f.label;return Object.assign({},e,wt(wt({},("length"===t.uom||"area"===t.uom)&&St({},p,v)),{},{uom:Object.assign({},t.previousUom||e.uom,St({},t.uom,{unit:v,label:S})),updatedByUI:!0}));case y:var P,M=t.features,C=void 0===M?[]:M,L=(0,se.gM)(C),N=(null===(P=e.features)||void 0===P?void 0:P.length)===C.length?e.currentFeature:C.length?C.length-1:0;return wt(wt({},e),{},{features:C,currentFeature:N,geomTypeSelected:L,updatedByUI:!1,isDrawing:!1},ft()(C)&&{exportToAnnotation:!1});case"MEASUREMENT:SET_MEASUREMENT_CONFIG":var D=t.property,x=t.value;return wt(wt({},e),{},St({},D,x));case T:var _=t.features,k=t.properties,U=(0,se.gM)(_);return wt(wt({},e),{},{features:_,geomTypeSelected:U,updatedByUI:!0,isDrawing:!1,exportToAnnotation:!0,id:k.id,visibility:k.visibility});case g:return wt(wt({},e),{},{textLabels:t.textLabels});case h:return wt(wt({},e),{},{currentFeature:yt()(t.featureIndex)?t.featureIndex:e.features.length});case s.x7:e.id;var B=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,gt);return"info"===t.control?wt(wt({},B),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""}):"measure"===t.control?wt(wt({},B),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case s.$4:return"measure"===t.control&&!1===t.value?wt(wt({},e),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case s.rY:return wt(wt({},e),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:"",features:[]});case O:return wt(wt({},e),{},{format:t.format});case j:return e.init?e:wt(wt(wt({},e),t.defaultOptions),{},{init:!0});case w:var F,G=t.coordinates.map(function(e){return[e.lon,e.lat]}),V=e.features||[],q=V[e.currentFeature]||{},W=G.filter(function(e){return(0,I.qO)(e)}).length!==G.length;return wt(wt({},e),{},{feature:{type:"Feature",properties:{disabled:G.filter(function(e){return(0,I.qO)(e)}).length!==G.length},geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[$()(G)]:G}},features:[].concat(vt(V.slice(0,e.currentFeature)),[wt(wt({},q),{},{type:"Feature",properties:wt(wt({},q.properties||{}),{},{disabled:W||e.bearingMeasureEnabled&&G.length<2}),geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[[].concat(vt(G),[G[0]])]:G,textLabels:(null==q||null===(F=q.geometry)||void 0===F?void 0:F.textLabels)||[]}})],vt(V.slice(e.currentFeature+1,V.length))),updatedByUI:!0});default:return e}}},epics:Ft})},129519:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(811668),o=r(8571);const a=(0,n.connect)(function(e){return{locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]}})(o.A)},967858:(e,t,r)=>{"use strict";r.d(t,{d:()=>c,p:()=>p});var n=r(415392),o=r(45388),a=r.n(o),i=r(130711),u=r(717140),l=r(273494),s=r(762686),c="export-context",p=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return a().Observable.from([(0,n.fN)(t,"enabled",null)])},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t){return(0,i.cU)(t)(e)};return e.ofType(u.V9,l.QH,s.Pn).filter(function(e){var n=e.type,o=e.status,a=e.owner,i=e.eventName,p=e.toolName,f=c(t.getState(),r);switch(n){case s.Pn:return"featureGrid"!==r;case l.QH:return f&&"click"===i&&p!==r;case u.V9:return f&&("drawOrEdit"===o||"start"===o)&&a!==r;default:return f&&"annotations"!==r}}).switchMap(function(e){return c(t.getState(),r)?o(t.getState(),r,e):a().Observable.empty()})}},342338:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>v,Bi:()=>E,YZ:()=>O});var n=r(964473),o=r(285917),a=r(688751),i=r(36068),u=r(984423),l=r(366856),s=r(55243),c=r(333711),p=r(154051),f=r(644294),m=r(611217),b=r(330503),d=r(496702),y=r(502871),g=r(694974),h=r(934142),v=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type,n=t.coordinates,o=t.radius,a=t.center;switch(r){case"Point":e=new f.A(n||[]);break;case"LineString":e=new m.A(n||[]);break;case"MultiPoint":e=new b.A(n||[]);break;case"MultiLineString":e=new d.A(n||[]);break;case"MultiPolygon":e=new y.A(n||[]);break;default:e=o&&a?(0,h.nD)(new g.A([a.x,a.y],o),100):new h.Ay(n||[])}return e},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.geometry&&"Polygon"===e.geometry.type},O={dragPan:{options:{kinetic:!1},Instance:n.A},keyboardPan:{options:{kinetic:!1},Instance:o.A},mouseWheelZoom:{options:{duration:0},Instance:a.A},doubleClickZoom:{options:{duration:0},Instance:i.A},shiftDragZoom:{options:{duration:0},Instance:u.A},keyboardZoom:{options:{},Instance:l.A},pinchZoom:{options:{duration:0},Instance:s.A},pinchRotate:{options:{},Instance:c.A},altShiftDragRotate:{options:{},Instance:p.A}}},927537:(e,t,r)=>{var n=r(225160),o=r(761489);e.exports=function(e,t,r){var a=null==e?0:e.length;return a?(t=r||void 0===t?1:o(t),n(e,0,(t=a-t)<0?0:t)):[]}},36068:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(806292),o=r(873445);class a extends n.Ay{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==o.A.DBLCLICK){const r=e.originalEvent,o=e.map,a=e.coordinate,i=r.shiftKey?-this.delta_:this.delta_,u=o.getView();(0,n.D2)(u,i,a,this.duration_),r.preventDefault(),t=!0}return!t}}const i=a}}]);