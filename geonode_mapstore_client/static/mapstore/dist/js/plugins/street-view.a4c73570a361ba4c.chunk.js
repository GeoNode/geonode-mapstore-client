"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3217],{717140:(e,t,r)=>{r.d(t,{Ij:()=>g,Jb:()=>o,Kf:()=>s,Lu:()=>i,Ly:()=>p,Mm:()=>v,Mr:()=>h,Ne:()=>f,Nu:()=>j,Q4:()=>l,S$:()=>d,V9:()=>n,VX:()=>b,ZM:()=>a,d:()=>w,et:()=>y,jx:()=>S,tq:()=>O,uw:()=>E,vK:()=>m,vw:()=>P});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",l="DRAW:GEOMETRY_CHANGED",a="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",c="DRAW:DRAWING_FEATURES",s="DRAW:SET_SNAPPING_LAYER",f="DRAW:SNAPPING_IS_LOADING",d="DRAW:TOGGLE_SNAPPING",p="DRAW:SET_SNAPPING_CONFIG";function m(e,t,r,n,o){return{type:l,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function y(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function v(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function g(){return{type:a}}function b(e,t,r,o,i,l){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:l}}function h(e,t){return{type:o,geometry:e,owner:t}}function w(e){return{type:i,currentStyle:e}}var O=function(e){return b("clean","",e,[],{})};function S(){return{type:d}}function E(e){return{type:s,snappingLayer:e}}function P(){return{type:f}}function j(e,t,r){return{type:p,value:e,prop:t,pluginCfg:r}}},789516:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Cr});var n={};r.r(n),r.d(n,{getAPI:()=>re,getLocation:()=>oe,loadAPI:()=>ne,loadGoogleMapsAPI:()=>te});var o={};r.r(o),r.d(o,{getAPI:()=>ae,getLocation:()=>ue,loadAPI:()=>le});var i={};r.r(i),r.d(i,{getAPI:()=>ye,getLocation:()=>ve,loadAPI:()=>me});var l={};r.r(l),r.d(l,{disableGFIForStreetViewEpic:()=>Or,streetViewMapClickHandler:()=>Er,streetViewSetupTearDown:()=>Sr,streetViewSyncLayer:()=>Pr,tearDownStreetViewOnDrawToolActive:()=>jr});var a=r(273517),u=r.n(a),c=r(8117),s=r(811668),f=r(393149),d="street-view",p=d,m="street-view-data",y="google",v="cyclomedia",g="mapillary",b="__cycloMedia_streetView_source_credential__",h=r(801081),w=r(8571),O=r(711520),S=r(666036),E=r(112585),P=r(130711),j=r(697150),A=r(912532);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){x(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function x(e,t,r){return(t=function(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=(0,P.cU)(d),L=function(e){var t;return null!==(t=null==e?void 0:e.streetView)&&void 0!==t?t:{}},C=function(e){return function(t){var r,n;return null!==(r=null===(n=L(t))||void 0===n||null===(n=n.apiLoaded)||void 0===n?void 0:n[e])&&void 0!==r&&r}},V=(0,h.Mz)(L,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).location}),M=(0,h.Mz)(L,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pov});function k(e){var t,r;return null!==(t=null===(r=L(e))||void 0===r?void 0:r.configuration)&&void 0!==t?t:{}}function R(e){var t,r;return null!==(t=null===(r=k(e))||void 0===r?void 0:r.provider)&&void 0!==t?t:"google"}var N=function(e){return{format:"geostyler",body:{name:"My Style",rules:[{name:"",symbolizers:[_(_({color:"#3165ef",fillOpacity:.6,strokeColor:"#3165ef",strokeOpacity:.8,strokeWidth:2,radius:6,wellKnownName:"Circle",msHeightReference:"none",msBringToFront:!0},e),{},{kind:"Mark",symbolizerId:"d2c4dab1-a0e7-11ee-a734-df08d0913056"})],ruleId:"d2c4dab0-a0e7-11ee-a734-df08d0913056"}]}}},z={provider:"custom",type:"tileprovider",url:"https://mts1.googleapis.com/vt?hl=en-US&lyrs=svv|cb_client:apiv3&style=40,18&x={x}&y={y}&z={z}"},F={type:"wfs",security:{type:"Basic",sourceType:"sessionStorage",sourceId:b},strategy:"tile",maximumLevel:17,minimumLevel:17,maxResolution:1,serverType:E.zy.NO_VENDOR,url:"https://atlasapi.cyclomedia.com/api/Recordings/wfs",name:"atlas:Recording",tileSize:512},U={type:"vector"},G=(0,h.Mz)(R,k,function(e,t){var r,n=null!=t&&t.clampToGround?"clamp":"none";switch(e){case y:return z;case v:return _(_({},F),{},{style:N({msHeightReference:n})});case g:return _(_({},U),{},{style:N({msHeightReference:n}),url:null==t||null===(r=t.providerSettings)||void 0===r?void 0:r.ApiURL});default:return{}}});function W(e){switch(R(e)){case y:return function(e){var t,r,n,o,i,l,a;return null!==(t=null!==(r=null!==(n=null===(o=k(e))||void 0===o?void 0:o.apiKey)&&void 0!==n?n:null===(i=(0,A.bS)(e))||void 0===i||null===(i=i.apiKeys)||void 0===i?void 0:i.googleStreetViewAPIKey)&&void 0!==r?r:null===(l=(0,A.bS)(e))||void 0===l||null===(l=l.apiKeys)||void 0===l?void 0:l.googleAPIKey)&&void 0!==t?t:null===(a=(0,A.bS)(e))||void 0===a?void 0:a.googleAPIKey}(e);case v:return function(e){var t,r,n;return null!==(t=null===(r=k(e))||void 0===r?void 0:r.apiKey)&&void 0!==t?t:null===(n=(0,A.bS)(e))||void 0===n||null===(n=n.apiKeys)||void 0===n?void 0:n.cyclomediaAPIKey}(e);case g:return function(e){var t,r,n,o=k(e);return null!=o&&null!==(t=o.providerSettings)&&void 0!==t&&t.ApiURL?{}:null!==(r=null==o?void 0:o.apiKey)&&void 0!==r?r:null===(n=(0,A.bS)(e))||void 0===n||null===(n=n.apiKeys)||void 0===n?void 0:n.mapillaryAPIKey}(e);default:return null}}function K(e){var t,r;return null===(t=null===(r=k(e))||void 0===r?void 0:r.useDataLayer)||void 0===t||t}function H(e){var t;return null===(t=k(e))||void 0===t?void 0:t.panoramaOptions}var $=r(415392),B=r(883832),q=r(135010),Z=function(e){var t,r;return{pano:null==e?void 0:e.pano,shortDescription:null==e?void 0:e.shortDescription,description:null==e?void 0:e.description,latLng:{lat:null==e||null===(t=e.latLng)||void 0===t?void 0:t.lat(),lng:null==e||null===(r=e.latLng)||void 0===r?void 0:r.lng()}}};function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}var Q,J=["apiKey","version","useStaticCache"];function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ee(e,t,r){return(t=function(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiKey,r=e.version,n=void 0===r?"weekly":r,o=e.useStaticCache,i=void 0===o||o,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,J);if(!(i?Q:void 0)){var a=new q.a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach(function(t){ee(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({apiKey:t,version:n},l));return a.load().then(function(e){return Q=e,e})}return new Promise(function(e){return e(Q)})};function re(){return Q}var ne=te;function oe(e){var t=e.latlng;return(new(re().maps.StreetViewService)).getPanorama({location:t,radius:50}).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,t=(null!=e?e:{}).location;return Z(t)})}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var le=function(){return new Promise(function(e){return e()})},ae=function(){},ue=function(e){return new Promise(function(t,r){var n,o,i,l=e.intersectedFeatures,a=null!==(n=null===(o=(void 0===l?[]:l).find(function(e){return e.id===m}))||void 0===o?void 0:o.features)&&void 0!==n?n:[];a.length||r({code:"ZERO_RESULTS"});var u,c,s=null!==(i=a[0])&&void 0!==i?i:{},f=s.properties,d=s.geometry,p=(u=(void 0===d?{}:d).coordinates,c=3,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(u,c)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(u,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=p[0],v=p[1],g=p[2];t({properties:f,latLng:{lat:v,lng:y,h:void 0===g?0:g}})})};function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach(function(t){de(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function de(e,t,r){return(t=function(e){var t=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var me=function(){return new Promise(function(e){return e()})},ye=function(){},ve=function(e){return new Promise(function(t,r){var n,o,i,l,a=e.intersectedFeatures,u=null!==(n=null===(o=(void 0===a?[]:a).find(function(e){return e.id===m}))||void 0===o?void 0:o.features)&&void 0!==n?n:[];u.length||r({code:"ZERO_RESULTS"});var c,s,f={};if(null!==(i=u[0])&&void 0!==i&&i.geometry){var d,p=(null!==(d=u[0])&&void 0!==d?d:{}).geometry,y=(c=(void 0===p?{}:p).coordinates,s=3,function(e){if(Array.isArray(e))return e}(c)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(c,s)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,t):void 0}}(c,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],g=y[1],b=y[2];f={latLng:{lat:g,lng:v,h:void 0===b?0:b}}}else f=null!=e&&e.latlng?{latLng:fe({},null==e?void 0:e.latlng)}:{};f.properties=(null===(l=u[0])||void 0===l?void 0:l.properties)||{},t(f)})};const ge={google:n,cyclomedia:o,mapillary:i};var be="STREET_VIEW:API_LOADING",he="STREET_VIEW:API_LOADED",we="STREET_VIEW:SET_LOCATION",Oe="STREET_VIEW:SET_POV",Se="STREET_VIEW:CONFIGURE",Ee="STREET_VIEW:RESET",Pe="STREET_VIEW:RESET_STREET_VIEW_DATA",je="STREET_VIEW:UPDATE_STREET_VIEW_LAYER";function Ae(e){return{type:be,loading:e}}function Ie(){return function(e,t){var r,n,o=R(t());if(C(o)(t()))e((0,$.KP)(d,"enabled"));else{Ae(!0);var i=W(t()),l=null!==(r=null===(n=k(t()))||void 0===n?void 0:n.providerSettings)&&void 0!==r?r:{};ge[o]||(console.error("No API found for provider ".concat(o)),e((0,B.z3)({title:"streetView.title",message:"No API found for provider ".concat(o)}))),ge[o].loadAPI({apiKey:i,providerSettings:l}).then(function(){Ae(!1),e(function(e){return{type:he,provider:e}}(o)),e((0,$.KP)(d,"enabled"))}).catch(function(e){Ae(!1),console.log(e)})}}}function Te(e){return{type:we,location:e}}function _e(e){return{type:Oe,pov:e}}var xe=r(302404),De=r.n(xe),Le=r(750042),Ce=r.n(Le),Ve=r(3162);const Me=function(e){var t=e.loading,r=void 0!==t&&t,n=e.title,o=void 0===n?u().createElement(w.A,{msgId:"streetView.emptyTitle"}):n,i=e.description,l=void 0===i?u().createElement(w.A,{msgId:"streetView.emptyDescription"}):i;return u().createElement("div",{className:"empty-street-view"},u().createElement(Ve.A,{iconFit:!1,glyph:"road",title:o,description:u().createElement(u().Fragment,null,r?u().createElement(u().Fragment,null,u().createElement(Ce(),{style:{display:"inline-block",verticalAlign:"bottom"},spinnerName:"circle",noFadeIn:!0})," "):null,l)}))};function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach(function(t){ze(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ze(e,t,r){return(t=function(e){var t=function(e){if("object"!=ke(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Ge=function(e){var t=e.size,r=e.google,n=e.position,o=e.location,i=e.pov,l=e.className,c=void 0===l?"google-street-view":l,s=e.style,f=void 0===s?{}:s,d=e.panoramaOptions,p=void 0===d?{}:d,m=(0,a.useRef)(),y=Fe((0,a.useState)(),2),v=y[0],g=y[1];(0,a.useEffect)(function(){if(r&&o&&!v){var e=new r.maps.StreetViewPanorama(m.current,Ne({position:n,pov:i,zoom:1},p));o.pano&&e.setPano(o.pano),g(e)}},[r,o,v,p]);var b=Fe((0,a.useState)(),2),h=b[0],w=b[1];return(0,a.useEffect)(function(){return v&&w(function(e,t){var r=t.location,n=t.setLocation,o=t.setPov,i=[];return i.push(e.addListener("position_changed",function(){var t=Z(e.getLocation());De()(null==r?void 0:r.latLng,null==t?void 0:t.latLng)||n(t)})),i.push(e.addListener("pov_changed",function(){var t=e.getPov(),r=t.heading,n=t.pitch;o({heading:r,pitch:n})})),i}(v,e)),function(e){e&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach(function(t){return e.removeListener(t)})}(v,h)},[v]),(0,a.useEffect)(function(){r&&r.maps.event.trigger(v,"resize")},[t]),(0,a.useEffect)(function(){v&&o.pano&&v.setPano(o.pano)},[null==o?void 0:o.pano]),u().createElement(u().Fragment,null,u().createElement("div",{className:c,style:Ne({display:v?"none":"block"},f)},u().createElement(Me,null)),u().createElement("div",{className:c,style:Ne({display:v?"block":"none"},f),ref:m}))};var We=["apiLoaded","enabled"];function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ke.apply(null,arguments)}const He=(0,s.connect)((0,h.j8)({apiLoaded:C("google"),location:V,panoramaOptions:H}),{setLocation:Te,setPov:_e})(function(e){var t=e.apiLoaded,r=(e.enabled,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,We));return t?u().createElement(Ge,Ke({location,google:re()},r)):u().createElement("div",{className:"street-view-api-loader"},u().createElement(w.A,{msgId:"streetView.loadingAPI"}))});var $e=r(962193),Be=r.n($e),qe=r(595535),Ze=r(294312),Ye=r(764932),Qe=r(584153),Je=r(694838),Xe=r(164045);function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rt=(0,Xe.A)(c.$n);const nt=function(e){var t=e.setCredentials,r=void 0===t?function(){}:t,n=e.credentials,o=e.showCredentialsForm,i=e.setShowCredentialsForm,l=void 0===i?function(){}:i,s=e.isCredentialsInvalid,f=void 0!==s&&s,d=et((0,a.useState)((null==n?void 0:n.username)||""),2),p=d[0],m=d[1],y=et((0,a.useState)((null==n?void 0:n.password)||""),2),v=y[0],g=y[1];return o?u().createElement("div",{className:"street-view-credentials"},u().createElement("h5",null,u().createElement(w.A,{msgId:"streetView.cyclomedia.insertCredentials"})),u().createElement(c.lV,null,u().createElement(c.mq,null,u().createElement(w.A,{msgId:"streetView.cyclomedia.username"})),u().createElement(c.MJ,{type:"text",value:p,onChange:function(e){return m(e.target.value)}}),u().createElement(c.mq,null,u().createElement(w.A,{msgId:"streetView.cyclomedia.password"})),u().createElement(c.MJ,{type:"password",value:v,onChange:function(e){return g(e.target.value)}}),f&&u().createElement(c.Fc,{bsStyle:"danger",style:{marginTop:10}},u().createElement(w.A,{msgId:"streetView.cyclomedia.errors.invalidCredentials"})),u().createElement("div",{className:"street-view-credentials-form-buttons"},u().createElement(c.$n,{disabled:!p||!v,onClick:function(){return r({username:p,password:v}),void l(!1)}},u().createElement(w.A,{msgId:"streetView.cyclomedia.submit"})),(null==n?void 0:n.username)&&(null==n?void 0:n.password)&&!f&&u().createElement(c.$n,{onClick:function(){r({username:n.username,password:n.password}),l(!1)}},u().createElement(w.A,{msgId:"cancel"}))))):u().createElement("div",{style:{textAlign:"right"}},u().createElement(rt,{style:{marginRight:10,border:"none",background:"none"},tooltipId:"streetView.cyclomedia.changeCredentials",onClick:function(){l(!0)}},u().createElement(c.e6,{glyph:"1-user-mod"})))};function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach(function(t){at(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function at(e,t,r){return(t=function(e){var t=function(e){if("object"!=ot(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ot(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var st=(0,Je.A)((0,Xe.A)(c.$n)),ft="Projection not available",dt=function(e){var t,r;return null==e||null===(t=e.message)||void 0===t||null===(r=t.indexOf)||void 0===r?void 0:r.call(t,"code 401")},pt=function(e){var t=e.initializing,r=e.initialized,n=e.StreetSmartApi,o=e.mapPointVisible,i=e.loggingOut,l=e.onClose;return r&&!o?u().createElement(Me,{description:u().createElement(w.A,{msgId:"streetView.cyclomedia.zoomIn"})}):r?u().createElement(Me,null):t?u().createElement(Me,{loading:!0,description:u().createElement(w.A,{msgId:"streetView.cyclomedia.initializing"})}):n?i?u().createElement(Me,{description:u().createElement(u().Fragment,null,u().createElement("div",null,u().createElement(w.A,{msgId:"streetView.cyclomedia.loggingOut"})),u().createElement(c.$n,{onClick:function(){l()}},"Close"))}):null:u().createElement(Me,{loading:!0,description:u().createElement(w.A,{msgId:"streetView.cyclomedia.loadingAPI"})})};const mt=function(e){var t,r,n,o,i,l,s,f,d=e.apiKey,p=e.style,m=e.location,y=void 0===m?{}:m,v=e.setPov,g=void 0===v?function(){}:v,h=e.setLocation,O=void 0===h?function(){}:h,S=e.mapPointVisible,E=e.providerSettings,P=void 0===E?{}:E,j=e.refreshLayer,A=void 0===j?function(){}:j,I=e.onClose,T=void 0===I?function(){}:I,_=null!==(t=null==P?void 0:P.StreetSmartApiURL)&&void 0!==t?t:"https://streetsmart.cyclomedia.com/api/v23.7/StreetSmartApi.js",x=null!==(r=null==P?void 0:P.scripts)&&void 0!==r?r:'\n    <script type="text/javascript" src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"><\/script>\n    <script type="text/javascript" src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"><\/script>\n    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"><\/script>\n    ',D=null!==(n=null==P?void 0:P.initOptions)&&void 0!==n?n:{},L=null!==(o=null==P?void 0:P.srs)&&void 0!==o?o:"EPSG:4326",C=y.properties,V=(null!=C?C:{}).imageId,M=ut((0,a.useState)(),2),k=M[0],R=M[1],N=ut((0,a.useState)(),2),z=N[0],F=N[1],U=(0,a.useRef)(null),G=ut((0,a.useState)(!1),2),W=G[0],K=G[1],H=ut((0,a.useState)(!1),2),$=H[0],B=H[1],q=ut((0,a.useState)(1),2),Z=q[0],Y=q[1],Q=ut((0,a.useState)(null),2),J=Q[0],X=Q[1],ee=ut((0,a.useState)(!1),2),te=ee[0],re=ee[1],ne=ut((0,a.useState)(!1),2),oe=ne[0],ie=ne[1],le=null==P?void 0:P.credentials,ae=null==D?void 0:D.loginOauth,ue=null===(i=null==P?void 0:P.showLogout)||void 0===i||i,ce=Be()((0,Qe.pr)(b))?null!==(l=null==P?void 0:P.credentials)&&void 0!==l?l:{}:(0,Qe.pr)(b),se=ut((0,a.useState)(ce),2),fe=se[0],de=se[1],pe=ut((0,a.useState)(!(null!=fe&&fe.username&&null!=fe&&fe.password)),2),me=pe[0],ye=pe[1],ve=null!=fe?fe:{},ge=ve.username,be=ve.password;(0,a.useEffect)(function(){(0,Ze.dv)(L)||(console.error("Cyclomedia API: init: error: projection ".concat(L," is not available")),X(new Error(ft)))},[L]),(0,a.useEffect)(function(){return k&&ge&&be&&d&&(0,Ze.dv)(L)?(K(!0),k.init(lt(lt({targetElement:z,apiKey:d,loginOauth:!1,srs:L,locale:"en-us"},D),ae?{}:{username:ge,password:be})).then(function(){K(!1),B(!0),X(null)}).catch(function(e){K(!1),X(e),re(!0),dt(e)>=0&&ye(!0),e&&console.error("Cyclomedia API: init: error: "+e)}),function(){try{var e;B(!1),null==k||null===(e=k.destroy)||void 0===e||e.call(k,{targetElement:z})}catch(e){console.error(e)}}):function(){}},[k,ge,be,d,Z]),(0,a.useEffect)(function(){var e=dt(J);$&&ge&&be&&!e&&$?((0,Qe.LA)(b,fe),A()):((0,Qe.pr)(b)&&(0,Qe.LA)(b,void 0),A())},[$,ge,be,ge,be,J,$]);var he=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).detail,r=null!=t?t:{},n=r.yaw,o=r.pitch;g({heading:n,pitch:o})},we=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).detail,r=(null!=t?t:{}).recording;if(null!=r&&r.xyz&&null!=r&&r.id){var n,o,i,l=(0,Ye.reproject)([null==r||null===(n=r.xyz)||void 0===n?void 0:n[0],null==r||null===(o=r.xyz)||void 0===o?void 0:o[1]],L,"EPSG:4326"),a=l.x,u=l.y;O({latLng:{lat:u,lng:a,h:(null==r||null===(i=r.xyz)||void 0===i?void 0:i[2])||0},properties:lt(lt({},r),{},{imageId:null==r?void 0:r.id})})}};(0,a.useEffect)(function(){return k&&V&&$?(function(e){var t={viewerType:k.ViewerType.PANORAMA,srs:L,panoramaViewer:{closable:!1,maximizable:!0,replace:!0,recordingsVisible:!0,navbarVisible:!0,timeTravelVisible:!0,measureTypeButtonVisible:!0,measureTypeButtonStart:!0,measureTypeButtonToggle:!0},obliqueViewer:{closable:!0,maximizable:!0,navbarVisible:!1}};return k.open(e,t)}(V).then(function(n){n&&n[0]&&(e=n[0],t=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return he.apply(void 0,[e].concat(r))},r=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return we.apply(void 0,[e].concat(r))},e.on(k.Events.panoramaViewer.VIEW_CHANGE,t),e.on(k.Events.panoramaViewer.RECORDING_CLICK,r))}).catch(function(e){X(e),console.error("Cyclomedia API: open: error: "+e)}),function(){e&&t&&(e.off(k.Events.panoramaViewer.VIEW_CHANGE,t),e.off(k.Events.panoramaViewer.RECORDING_CLICK,r))}):function(){};var e,t,r},[k,$,V]);var Oe=k&&$&&V&&!me&&!J,Se=W||!me&&!Oe&&!J,Ee=J&&!me&&!Oe&&!W,Pe="<html>\n        <head>\n            <style>\n                html, body, #ms-street-smart-viewer-container {\n                    width: 100%;\n                    height: 100%;\n                    margin: 0;\n                    padding: 0;\n                    overflow: hidden;\n                }\n            </style>\n            ".concat(x,'\n            <script type="text/javascript" src="').concat(_,'" ><\/script>\n            <script>\n                    window.StreetSmartApi = StreetSmartApi\n            <\/script>\n            </head>\n            <body>\n                <div key="main" id="ms-street-smart-viewer-container" />\n\n            </body>\n        </html>');return u().createElement(u().Fragment,null,!le&&u().createElement(nt,{key:"credentials",showCredentialsForm:me,setShowCredentialsForm:ye,credentials:fe,isCredentialsInvalid:dt(J)>=0,setCredentials:function(e){de(e),X(null),Y(function(e){return e+1})}}),ue&&$&&ae&&!J&&u().createElement("div",{style:{textAlign:"right"}},u().createElement(st,{key:"logout",confirmContent:u().createElement(w.A,{msgId:"streetView.cyclomedia.confirmLogout"}),tooltipId:"streetView.cyclomedia.logout",onClick:function(){var e;null==k||null===(e=k.destroy)||void 0===e||e.call(k,{targetElement:z,loginOauth:!0}),B(!1),ie(!0)}},u().createElement(c.e6,{glyph:"log-out"})," ")),Se?u().createElement(pt,{key:"empty-view",StreetSmartApi:k,style:p,initializing:W,initialized:$,loggingOut:oe,onClose:T,mapPointVisible:S}):null,u().createElement("iframe",{key:"iframe",ref:U,onLoad:function(){var e,t;F(null===(e=U.current)||void 0===e?void 0:e.contentDocument.querySelector("#ms-street-smart-viewer-container")),R(null===(t=U.current)||void 0===t?void 0:t.contentWindow.StreetSmartApi)},style:lt(lt({},p),{},{display:Oe?"block":"none"}),srcDoc:Pe}),u().createElement(c.Fc,{bsStyle:"danger",style:lt(lt({},p),{},{textAlign:"center",alignContent:"center",display:Ee?"block":"none",overflow:"auto"}),key:"error"},u().createElement(w.A,{msgId:"streetView.cyclomedia.errorOccurred"}),function(e){var t,r,n,o,i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?dt(e)>=0?u().createElement(w.A,{msgId:"streetView.cyclomedia.errors.invalidCredentials",msgParams:l}):(null==e||null===(t=e.message)||void 0===t||null===(r=t.indexOf)||void 0===r?void 0:r.call(t,ft))>=0?u().createElement(w.A,{msgId:"streetView.cyclomedia.errors.projectionNotAvailable",msgParams:l}):(null==e||null===(n=e.message)||void 0===n||null===(o=n.indexOf)||void 0===o?void 0:o.call(n,"not logged in"))>=0?u().createElement(qe.A,{msgId:"streetView.cyclomedia.errors.notLoggedIn"}):null!==(i=null==e?void 0:e.message)&&void 0!==i?i:"Unknown error":null}(J,{srs:L}),u().createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:10}},($||te)&&dt(J)<0?u().createElement("div",null,u().createElement(c.$n,{style:{margin:10},onClick:function(){X(null),re(!1);try{Y(Z+1)}catch(e){console.error(e)}}},u().createElement(w.A,{msgId:"streetView.cyclomedia.reloadAPI"}))):null,ae&&ue&&!me&&!$&&(null==J||null===(s=J.message)||void 0===s||null===(f=s.indexOf)||void 0===f?void 0:f.call(s,"not logged in"))>=0&&u().createElement(st,{style:{margin:10},key:"logout",confirmContent:u().createElement(w.A,{msgId:"streetView.cyclomedia.confirmLogout"}),tooltipId:"streetView.cyclomedia.tryForceLogout",onClick:function(){var e;null==k||null===(e=k.destroy)||void 0===e||e.call(k,{targetElement:z,loginOauth:!0})}},u().createElement(c.e6,{glyph:"log-out"})," ",u().createElement(w.A,{msgId:"streetView.cyclomedia.logout"})))))};var yt=r(131127),vt=["enabled","apiLoaded"];function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gt.apply(null,arguments)}var bt=(0,h.Mz)(yt.FG,function(e){return e<1}),ht=(0,s.connect)((0,h.j8)({apiLoaded:C(v),location:V,apiKey:W,mapPointVisible:bt}),{setLocation:Te,setPov:_e,refreshLayer:function(){return e={_v_:Date.now()},{type:je,updates:e};var e}})(function(e){var t=e.enabled,r=e.apiLoaded,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,vt),o=(0,a.useMemo)(function(){return ae()},[r]);return t?u().createElement(mt,gt({api:o},n)):null});const wt=ht;var Ot=r(272505),St=r.n(Ot),Et=r(361915),Pt=1024;function jt(e){return Math.pow(2,e.z-e.max)}function At(e){return Math.ceil(function(e){var t=Math.max(e.w,e.h);return Math.log(t)/Math.log(2)}(e))}function It(e,t){var r=jt(t),n=Math.ceil(r*e.h/Pt);return{columns:Math.ceil(r*e.w/Pt),rows:n}}function Tt(e,t,r){var n=1/jt(r)*Pt,o=n*e.x,i=n*e.y,l=Math.min(n,t.w-o);return{h:Math.min(n,t.h-i),x:o,y:i,w:l}}function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dt(n.key),n)}}function Dt(e){var t=function(e){if("object"!=_t(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_t(t)?t:t+""}function Lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Lt=function(){return!!e})()}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}function Vt(e,t){return Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vt(e,t)}function Mt(e,t){if(e){if("string"==typeof e)return kt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kt(e,t):void 0}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Rt={alt:0,lat:0,lng:0};var Nt=function(e){var t=e.split("/");return{imageName:t[t.length-1],group:2===t.length?t[0]:void 0}},zt=function(e){function t(){var e,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,r){return t=Ct(t),function(e,t){if(t&&("object"==_t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lt()?Reflect.construct(t,r||[],Ct(e).constructor):t.apply(e,r))}(this,t,[null!==(e=o.geometry)&&void 0!==e?e:new Et.S2GeometryProvider(null==o?void 0:o.geometryLevel)]))._features=(null==o||null===(r=o.geojson)||void 0===r?void 0:r.features)||[],n._debug=!!o.debug,n._getImageFromUrl=o.getImageFromUrl?o.getImageFromUrl:function(e){return St().get(e,{responseType:"arraybuffer"}).then(function(e){return e.data})},n._url=o.url,n._initialize(),n._populate(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vt(e,t)}(t,e),r=t,n=[{key:"getCluster",value:function(){return Promise.resolve({points:{},reference:Rt})}},{key:"getCoreImages",value:function(e){var t=this.cells.has(e)?this.cells.get(e):[];return Promise.resolve({cell_id:e,images:t})}},{key:"getImageBuffer",value:function(e){return this._getImageFromUrl(e)}},{key:"getImages",value:function(e){var t=this,r=e.map(function(e){return{node:t.images.has(e)?t.images.get(e):null,node_id:e}});return Promise.resolve(r)}},{key:"getImageTiles",value:function(e){var t=this,r=this.images.has(e.imageId)?this.images.get(e.imageId):null;if(r){var n={w:r.width,h:r.height};if(this._debug)return Promise.resolve(function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256,n=At(e),o={z:t.z,max:n},i=It(e,o),l=i.columns,a=i.rows,u=[],c=0;c<a;c++)for(var s=0;s<l;s++){var f=Tt({x:s,y:c},e,o),d=r,p=r/(f.w/f.h),m=document.createElement("canvas");m.setAttribute("width",d),m.setAttribute("height",p);var y=m.getContext("2d");y.fillStyle="#ffffff",y.fillRect(0,0,d,p),y.strokeStyle="#ff0000",y.strokeRect(0,0,d,p),y.fillStyle="#000000",y.font="10px monospace",y.textAlign="center",y.textBaseline="middle",y.fillText("x: ".concat(s,", y: ").concat(c,", z: ").concat(t.z),d/2,p/2),u.push({url:m.toDataURL(),x:s,y:c,z:null==t?void 0:t.z})}return{node:u,node_id:t.imageId}}(n,e));var o=function(e,t){for(var r=[],n={z:t,max:At(e)},o=It(e,n),i=o.columns,l=o.rows,a=0;a<l;a++)for(var u=0;u<i;u++){var c=Tt({x:u,y:a},e,n);r.push({x:u,y:a,z:t,pixel:c})}return r}(n,e.z),i=Nt(e.imageId),l=i.imageName,a=i.group;return Promise.resolve({node:o.map(function(e){var r=e.x,n=e.y,o=e.z;return{url:"".concat(t._url).concat(a?"".concat(a,"/"):"","tiles/").concat(l,"/").concat(o,"_").concat(r,"_").concat(n,".jpg"),x:r,y:n,z:o}}),node_id:e.imageId})}return Promise.reject(new Et.MapillaryError("Not image id ".concat(e.imageId," for tiling request")))}},{key:"getMesh",value:function(){return Promise.resolve({faces:[],vertices:[]})}},{key:"getSequence",value:function(e){var t=this;return new Promise(function(r,n){t.sequences.has(e)?r(t.sequences.get(e)):n(new Et.MapillaryError("Sequence ".concat(e," does not exist")))})}},{key:"getSpatialImages",value:function(e){return this.getImages(e)}},{key:"_initialize",value:function(){this.sequences=new Map,this.images=new Map,this.clusters=new Map,this.cells=new Map,this.meshes=new Map}},{key:"_populate",value:function(){var e=this,t=[],r={};this._features.forEach(function(n){var o=n.properties.MAPSequenceUUID||"1";r[o]||(r[o]={id:o,image_ids:[]});var i=n.properties.filename;r[o].image_ids.push(i),t.push(function(e,t){var r=t.imageId,n=t.meshId,o=t.clusterId,i=t.sequenceId,l=t.url,a={lat:e.properties.MAPLatitude,lng:e.properties.MAPLongitude},u=Nt(e.properties.filename),c=u.imageName,s=u.group,f=e.properties.filename,d=l+(s?s+"/":"")+"thumb/"+c+".jpg",p=e.properties.width,m=e.properties.height,y=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||Mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.properties.MAPCaptureTime.split("_"),6),v=y[0],g=y[1],b=y[2],h=y[3],w=y[4],O=y[5];return{altitude:e.properties.MAPAltitude,atomic_scale:1,camera_parameters:[],camera_type:"spherical",captured_at:new Date("".concat(v,"/").concat(g,"/").concat(b," ").concat(h,":").concat(w,":").concat(O)).getTime(),cluster:{id:o,url:o},compass_angle:e.properties.MAPCompassHeading.TrueHeading,computed_compass_angle:e.properties.MAPCompassHeading.TrueHeading,computed_altitude:e.properties.MAPAltitude,computed_geometry:a,creator:{id:null,username:null},geometry:a,height:m,id:r,merge_id:"merge_id",mesh:{id:n,url:n},exif_orientation:e.properties.MAPOrientation,private:null,quality_score:1,sequence:{id:i},thumb:{id:f,url:d},owner:{id:null},width:p}}(n,{imageId:i,clusterId:1,meshId:1,sequenceId:o,url:e._url}))}),this.images=new Map(t.map(function(e){return[e.id,e]})),this.cells=function(e,t){var r,n=new Map,o=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Mt(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(l)throw o}}}}(e);try{for(o.s();!(r=o.n()).done;){var i=r.value,l=t.lngLatToCellId(i.geometry);n.has(l)||n.set(l,[]),n.get(l).push(i)}}catch(e){o.e(e)}finally{o.f()}return n}(this.images.values(),this._geometry),this.sequences=new Map(Object.keys(r).map(function(e){return[e,r[e]]}))}}],n&&xt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Et.DataProviderBase);const Ft=zt;function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach(function(t){Kt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Kt(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ut(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ut(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $t(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r(445988);const Bt=function(e){var t=e.size,n=e.location,o=e.className,i=void 0===o?"google-street-view":o,l=e.style,c=void 0===l?{}:l,s=e.setPov,f=void 0===s?function(){}:s,d=e.setLocation,p=void 0===d?function(){}:d,m=e.providerSettings,y=e.apiKey,v=(0,a.useRef)(),g=Ht((0,a.useState)(),2),b=g[0],h=g[1],w=Ht((0,a.useState)(!1),2),O=w[0],S=w[1];return(0,a.useEffect)(function(){return function(){null!=b&&b.remove&&b.remove(),null!=e&&e.resetStViewData&&e.resetStViewData()}},[]),(0,a.useEffect)(function(){if(n&&b){var e,t,r=(null==n||null===(e=n.properties)||void 0===e?void 0:e.imageId)||(null==n||null===(t=n.properties)||void 0===t?void 0:t.filename);r&&b.isNavigable&&b.moveTo(r)}},[n]),(0,a.useEffect)(function(){if(!b&&n){var e={url:null==m?void 0:m.ApiURL,geometryLevel:(null==m?void 0:m.geometryLevel)||14};!function(e,t){S(!0),Promise.resolve().then(r.bind(r,361915)).then(function(e){return e.Viewer}).then(function(r){new Promise(function(r,n){e&&null!=t&&t.url?St().get("".concat(t.url,"index.json")).then(function(e){var t=e.data;r(t)}).catch(function(e){return n(e)}):r()}).then(function(e){var o=new Ft({url:t.url,geometryLevel:(null==t?void 0:t.geometryLevel)||14,geojson:e||{type:"FeatureCollection",features:[]}});!function(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new e({container:v.current,dataProvider:o,imageId:(null==n||null===(t=n.properties)||void 0===t?void 0:t.imageId)||(null==n||null===(r=n.properties)||void 0===r?void 0:r.filename),accessToken:y,component:{cover:!1}});h(i),i.on("bearing",function(e){f({heading:e.bearing})}),i.on("image",function(e){p({latLng:{lat:e.image.lngLat.lat,lng:e.image.lngLat.lng,h:e.image.computedAltitude||0},properties:{imageId:e.image.id,filename:e.image.id,id:e.image.id}})})}(r,o),S(!1)})}).catch(function(e){S(!1),console.error(e)})}(null==m?void 0:m.ApiURL,e)}},[b,n]),(0,a.useEffect)(function(){b&&b.resize()},[t]),u().createElement(u().Fragment,null,u().createElement("div",{className:i,style:Wt({display:b?"none":"block"},c)},u().createElement(Me,{loading:O})),u().createElement("div",{className:i,style:{position:"absolute",margin:c.margin,height:c.height,width:c.width},ref:v}))};var qt=["apiLoaded","enabled"];function Zt(){return Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zt.apply(null,arguments)}function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jt(e,t,r){return(t=function(e){var t=function(e){if("object"!=Yt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var er={google:He,cyclomedia:wt,mapillary:(0,s.connect)((0,h.j8)({apiLoaded:C("mapillary"),location:V,panoramaOptions:H}),{setLocation:Te,setPov:_e})(function(e){var t=e.apiLoaded,r=(e.enabled,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,qt));return t?u().createElement(Bt,Zt({location,mapillary:ye()},r)):u().createElement("div",{className:"street-view-api-loader"},u().createElement(w.A,{msgId:"streetView.loadingAPI"}))})};const tr=(0,s.connect)((0,h.j8)({enabled:D}),{onClose:function(){return Ie()}})(function(e){var t,r,n=e.enabled,o=e.onClose,i=void 0===o?function(){}:o,l=e.provider,s=e.panelSize,f=e.providerSettings,d=e.apiKey,p=e.resetStViewData,m=(t=(0,a.useState)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach(function(t){Jt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({width:400,height:300},s)),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Xt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xt(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=m[0],v=m[1],g=(0,a.useMemo)(function(){return er[l]},[l]);return n?u().createElement(O.A,{id:"street-view-dialog",bodyClassName:"street-view-window-body",draggable:!0,style:{zIndex:1e4,position:"absolute",left:"17%",top:"50px",margin:0,width:y.width}},u().createElement("span",{role:"header",style:{display:"flex",justifyContent:"space-between"}},u().createElement("span",{className:"modal-title"},u().createElement(w.A,{msgId:"streetView.title"})),u().createElement("button",{onClick:function(){return i()},className:"close"},u().createElement(c.e6,{glyph:"1-close"}))),u().createElement("div",{role:"body",style:{height:y.height}},u().createElement(S.Resizable,{width:y.width,height:y.height,onResize:function(e,t){var r=t.size;v(r)}},u().createElement("div",{style:{display:"flex",flexDirection:"column",width:y.width,height:y.height}},g?u().createElement(g,{resetStViewData:p,onClose:i,providerSettings:f,apiKey:d,enabled:n,size:y,style:{flex:1,margin:10,height:"calc(100% - ".concat(20,"px)"),width:"calc(100% - ".concat(20,"px)")}}):u().createElement(c.Fc,{bsStyle:"danger"},"Unknown provider ",l))))):null});function rr(e){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(e)}function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach(function(t){ir(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ir(e,t,r){return(t=function(e){var t=function(e){if("object"!=rr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=rr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lr={},ar=r(45388),ur=r.n(ar),cr=r(593429),sr=r(273494),fr=r(812366),dr=r(975699),pr=r(967858);function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}var yr=["url"];function vr(e){return function(e){if(Array.isArray(e))return gr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach(function(t){wr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wr(e,t,r){return(t=function(e){var t=function(e){if("object"!=mr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Or=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType($.x7,$.$4,$.FL).filter(function(e){return e.control===d}).filter(function(){return D(n())}).switchMap(function(){return ur().Observable.of((0,fr.bC)(),(0,fr.S$)(!1)).merge(e.ofType($.x7,$.$4,$.FL).filter(function(e){return e.control===d}).take(1).filter(function(){return!D(n())}).filter(function(){return!(0,dr.Xw)(n())}).mapTo((0,fr.S$)(!0)).takeUntil(e.ofType($.rY)))})},Sr=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType($.x7,$.$4,$.FL).filter(function(e){return e.control===d}).filter(function(){return D(n())}).switchMap(function(){return ur().Observable.defer(function(){var e,t=(e=n(),G(e));if(null===t)return Promise.resolve(null);var r={id:m,name:m,visibility:!0};if("vector"===t.type&&t.url){var o=t||{},i=o.url,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(o,yr);return St().get("".concat(i,"index.json")).then(function(e){var t=e.data;return hr(hr(hr({},r),l),{},{features:(null==t?void 0:t.features)||{}})}).catch(function(e){throw e.code="FAIL_TO_FETCH_DATA",e})}return Promise.resolve(hr(hr({},r),t))}).switchMap(function(t){return ur().Observable.from([(0,sr.K6)("click",d)].concat(vr(K(n())?vr(null!==t?[(0,cr.E)(m,p,"overlay",t)]:[]):[]))).concat(e.ofType($.x7,$.$4,$.FL).filter(function(e){return e.control===d}).filter(function(){return!D(n())}).merge(e.ofType($.rY)).take(1).switchMap(function(){return ur().Observable.from([(0,sr.nt)("click",d)].concat(vr(K(n())?[(0,cr.v9)({id:m,owner:p})]:[])))}))}).catch(function(e){return ur().Observable.of((0,B.z3)({title:"streetView.title",message:"FAIL_TO_FETCH_DATA"===e.code?"streetView.messages.errorRetriveingLayerData":"streetView.messages.unknownError"}))})})},Er=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(sr.a2).filter(function(){return D(n())}).filter(function(){return e=n(),C(R(e))(e);var e}).switchMap(function(e){var t,r=e.point,o=R(n()),i=null===(t=ge[o])||void 0===t?void 0:t.getLocation;return i?ur().Observable.defer(function(){return i(r)}).map(Te).catch(function(e){return"ZERO_RESULTS"===e.code?ur().Observable.of((0,B.pq)({title:"streetView.title",message:"streetView.messages.noDataForPosition"})):(console.error(e),ur().Observable.of((0,B.z3)({title:"streetView.title",message:"streetView.messages.unknownError"})))}):ur().Observable.of((0,B.z3)({title:"streetView.title",message:"streetView.messages.providerNotSupported"}))})},Pr=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(je).switchMap(function(e){var t,r,o,i=e.updates,l=void 0===i?{}:i,a=(t=n(),null===(o=(null!==(r=(0,j.d)(t))&&void 0!==r?r:[]).filter(function(e){return e.id===m}))||void 0===o||null===(o=o[0])||void 0===o?void 0:o.options);return ur().Observable.of((0,cr.E)(m,p,"overlay",hr(hr({},a),l)))})},jr=function(e,t){return(0,pr.p)(e,t,d)},Ar=r(785072),Ir=r.n(Ar),Tr=r(607897);Ir()(Tr.A,{insert:"head",singleton:!1}),Tr.A.locals;var _r=["mapType","enabled"],xr={openlayers:(0,a.lazy)(function(){return Promise.all([r.e(284),r.e(1224),r.e(3934)]).then(r.bind(r,417016))}),cesium:(0,a.lazy)(function(){return Promise.all([r.e(2129),r.e(5394),r.e(8630)]).then(r.bind(r,678630))})};const Dr=(0,s.connect)((0,h.Mz)([D,V,M],function(e,t,r){return{enabled:e,location:t,pov:r}}))(function(e){var t=e.mapType,r=e.enabled,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,_r);if(!r)return null;var o=xr[t];return o?u().createElement(a.Suspense,{fallback:null},u().createElement(o,n)):null});var Lr=(0,s.connect)(function(){return{}},{onMount:function(e){return{type:Se,configuration:e}},onUnmount:function(){return function(e,t){e({type:Ee}),D(t())&&e((0,$.fN)(d,"enabled",!1))}},resetStViewData:function(){return function(e){return e({type:Pe})}}})(function(e){var t=e.onMount,r=e.onUnmount,n=e.resetStViewData,o=e.apiKey,i=e.useDataLayer,l=e.clampToGround,c=e.dataLayerConfig,s=e.panoramaOptions,f=e.provider,d=void 0===f?"google":f,p=e.providerSettings,m=e.panelSize;return(0,a.useEffect)(function(){return t({apiKey:o,useDataLayer:i,dataLayerConfig:c,panoramaOptions:s,provider:d,providerSettings:p,clampToGround:l}),function(){r()}},[o,i,c,JSON.stringify(null!=s?s:{})]),u().createElement(tr,{resetStViewData:n,apiKey:o,provider:d,providerSettings:p,panelSize:m})});const Cr=(0,f.i1)("StreetView",{options:{disablePluginIf:"{state('mapType') === 'leaflet'}"},epics:l,reducers:{streetView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,t=arguments.length>1?arguments[1]:void 0;switch(null==t?void 0:t.type){case Se:return or(or({},e),{},{configuration:null==t?void 0:t.configuration});case we:var r;return or(or({},e),{},{location:null!==(r=null==t?void 0:t.location)&&void 0!==r?r:e.location});case Oe:var n;return or(or({},e),{},{pov:null!==(n=null==t?void 0:t.pov)&&void 0!==n?n:e.pov});case be:return or(or({},e),{},{apiLoading:null==t?void 0:t.loading});case he:return or(or({},e),{},{apiLoaded:ir({},t.provider,!0)});case Pe:return or(or({},e),{},{location:void 0,pov:void 0});case Ee:return lr;default:return e}}},component:Lr,containers:{BurgerMenu:{position:40,priority:2,doNotHide:!0,name:d,text:u().createElement(w.A,{msgId:"streetView.title"}),tooltip:"streetView.tooltip",icon:u().createElement(c.e6,{glyph:"road"}),action:function(){return Ie()}},SidebarMenu:{position:40,priority:1,doNotHide:!0,name:d,text:u().createElement(w.A,{msgId:"streetView.title"}),tooltip:"streetView.tooltip",icon:u().createElement(c.e6,{glyph:"road"}),action:function(){return Ie()},selector:function(e){return{bsStyle:D(e)?"primary":"tray",active:D(e)||!1}}},Map:{Tool:Dr,name:"StreetViewMapLocationSupport",alwaysRender:!0}}})},967858:(e,t,r)=>{r.d(t,{d:()=>s,p:()=>f});var n=r(415392),o=r(45388),i=r.n(o),l=r(130711),a=r(717140),u=r(273494),c=r(762686),s="export-context",f=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return i().Observable.from([(0,n.fN)(t,"enabled",null)])},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t){return(0,l.cU)(t)(e)};return e.ofType(a.V9,u.QH,c.Pn).filter(function(e){var n=e.type,o=e.status,i=e.owner,l=e.eventName,f=e.toolName,d=s(t.getState(),r);switch(n){case c.Pn:return"featureGrid"!==r;case u.QH:return d&&"click"===l&&f!==r;case a.V9:return d&&("drawOrEdit"===o||"start"===o)&&i!==r;default:return d&&"annotations"!==r}}).switchMap(function(e){return s(t.getState(),r)?o(t.getState(),r,e):i().Observable.empty()})}},607897:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,"/* css for react-resizable */\n.street-view-window-body {\n  /* override the standard justify */\n}\n.street-view-window-body .react-resizable-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  bottom: 0;\n  right: 0;\n  background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+');\n  background-position: bottom right;\n  padding: 0 3px 3px 0;\n  background-repeat: no-repeat;\n  background-origin: content-box;\n  box-sizing: border-box;\n  cursor: se-resize;\n}\n.street-view-window-body .react-resizable {\n  position: relative;\n}\n.street-view-window-body .empty-state-container .empty-state-main-view .empty-state-description {\n  text-align: center;\n}\n.street-view-window-body .street-view-api-loader {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n}\n.street-view-window-body .empty-street-view {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n.street-view-window-body .empty-street-view div {\n  max-width: 350px;\n}\n.street-view-window-body .empty-street-view .empty-state-image .glyphicon {\n  margin-left: -14% !important;\n}\n.street-view-window-body .street-view-credentials h5 {\n  text-align: center;\n  font-weight: bold;\n  margin: 25px auto;\n}\n.street-view-window-body .street-view-credentials form {\n  margin: 0 30px;\n}\n.street-view-window-body .street-view-credentials form .street-view-credentials-form-buttons {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n.street-view-window-body iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n",""]);const i=o}}]);