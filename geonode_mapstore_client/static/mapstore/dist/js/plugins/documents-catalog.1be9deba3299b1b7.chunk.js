"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2328],{277327(e,t,n){n.d(t,{A:()=>c});var r=n(273517),o=n.n(r),a=n(8571),l=n(8117);function i(e){var t=e.msgId,n=e.icon;return o().createElement("div",{className:"gn-main-event-container"},o().createElement("div",{className:"gn-main-event-content"},o().createElement("div",{className:"gn-main-event-text"},o().createElement("div",{className:"gn-main-icon"},o().createElement(l.e6,{glyph:n})),t&&o().createElement(a.A,{msgId:t}))))}i.defaultProps={msgId:"",icon:"exclamation-sign"};const c=i},601416(e,t,n){n.r(t),n.d(t,{default:()=>Ze});var r=n(273517),o=n.n(r),a=n(393149),l=n(811668),i=n(801081),c=n(8571),u=n(836970),s=n(904059),m=n(273494),f=n(415392),d=n(271020),y=n(97401),v=n(779893),p=n(959314);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t,n){return(t=function(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const S={gnUpdateDocumentsCatalogMapLayout:function(e,t){return e.ofType(d.a,f.$4).filter(function(){var e;return null===(e=t.getState())||void 0===e||null===(e=e.controls)||void 0===e||null===(e=e.documentsCatalog)||void 0===e?void 0:e.enabled}).filter(function(e){return e.source!==p.v.PANEL}).map(function(e){var n,r=e.layout,o=(0,v.Uh)("mapLayout")||{left:{sm:300,md:500,lg:600},right:{md:658},bottom:{sm:30}},a=(0,y.iS)(t.getState()),l=null!==(n=t.getState())&&void 0!==n&&null!==(n=n.controls)&&void 0!==n&&null!==(n=n.drawer)&&void 0!==n&&n.enabled?o.left.sm:null,i=(0,d.Ix)(h(h(h(h({},(0,y.u$)(t.getState())),r),{},{right:o.right.md},l&&{left:l}),{},{boundingMapRect:h(h({},(null==r?void 0:r.boundingMapRect)||{}),{},{right:o.right.md},l&&{left:l}),boundingSidebarRect:h(h({},a),null==r?void 0:r.boundingSidebarRect)}));return h(h({},i),{},{source:p.v.PANEL})})}};var A=n(8117),O=n(275705),w=n(753103),I=n(605556),j=n.n(I),P=n(872045),C=n(984861),k=n(759402),x=n(201384),T=n(501719),N=n(622795),M=n(834138);function R(e,t){var n,r=e.id,a=void 0===r?"ms-filter-form":r,l=e.onChange,i=e.onClear,c=e.query,u=e.extent,s=void 0===u?{layers:[{type:"osm",title:"Open Street Map",name:"mapnik",source:"osm",group:"background",visibility:!0}],style:{color:"#397AAB",opacity:.8,fillColor:"#397AAB",fillOpacity:.4,weight:4}}:u,m=e.fields,f=void 0===m?[{type:"select",facet:"category"},{type:"select",facet:"keyword"},{type:"select",facet:"place"},{type:"date-range",filterKey:"date",labelId:"gnviewer.dateFilter"},{labelId:"gnviewer.extent",type:"extent"}]:m,d=e.monitoredState,y=e.show,v=void 0===y||y,p=e.user,g=e.availableResourceTypes,b=void 0===g?["MAP","DASHBOARD","GEOSTORY","CONTEXT"]:g,h=e.onClose,E=(0,C.A)(d,{extent:s,fields:f},null==t||null===(n=t.plugins)||void 0===n?void 0:n.requires,{filterFunc:function(e){return(0,M.b3)(e,b,p)}}),S=(0,k.A)({query:c,fields:E.fields,request:function(){return N.SN.apply(void 0,arguments).toPromise()},monitoredState:d,visible:!!v},[p]),A=S.fields;return o().createElement(P.A,{id:a,extentProps:E.extent,fields:A,query:c,onChange:function(e){return l(e)},onClear:i,onClose:h})}R.contextTypes={plugins:j().object};const z=(0,l.connect)((0,i.j8)({user:T.dt,monitoredState:x.WT}),{})(R);var D=n(132672),_=n(267767),F=n(71338),L=n(890559),q=n(398287),B=(0,r.forwardRef)(function(e,t){var n=e.menuItems,r=e.style,a=e.totalResources,l=e.loading,i=e.orderConfig,u=e.query,s=e.titleId,m=e.theme,f=void 0===m?"main":m,d=e.menuItemsLeft,y=void 0===d?[]:d,v=e.target,p=e.resourcesFoundMsgId,g=e.onSortChange,b=i||{},h=b.defaultLabelId,E=b.options,S=void 0===E?[]:E,O=b.variant,w=b.align,I=void 0===w?"right":w,j=S.find(function(e){var t=e.value;return(null==u?void 0:u.sort)===t}),P=S.length>0&&o().createElement(A.ms,{pullRight:"right"===I,id:"sort-dropdown"},o().createElement(A.ms.Toggle,{bsStyle:O||"default",bsSize:"sm",noCaret:!0},o().createElement(c.A,{msgId:(null==j?void 0:j.labelId)||h})),o().createElement(A.ms.Menu,null,S.map(function(e){var t=e.labelId,n=e.value;return o().createElement(A.Dr,{key:n,active:n===(null==j?void 0:j.value),onClick:function(e){g&&(e.preventDefault(),g(n))}},o().createElement(c.A,{msgId:t}))})));return o().createElement(D.A,{ref:t,classNames:["ms-resources-menu","_sticky","_corner-tl","ms-".concat(f,"-colors"),"_padding-tb-sm"],column:!0,gap:"sm",style:r},s?o().createElement(_.A,{fontSize:"lg"},o().createElement(c.A,{msgId:s})):null,o().createElement(D.A,{centerChildrenVertically:!0,gap:"xs"},o().createElement(D.A.Fill,{flexBox:!0,centerChildrenVertically:!0,gap:"sm"},y.map(function(e){var t=e.Component,n=e.name;return o().createElement(t,{key:n,query:u})}),"left"===I?P:null,o().createElement(_.A,{fontSize:"sm",ellipsis:!0},l?o().createElement(L.A,null):o().createElement("span",null,o().createElement("span",null,a)," ",o().createElement(c.A,{msgId:p,msgParams:{count:a}})))),o().createElement(q.A,{items:n,containerClass:"ms-menu-list",size:"md",alignRight:!0,target:v}),"right"===I?P:null))});B.defaultProps={orderOptions:[{label:"Most recent",labelId:"resourcesCatalog.mostRecent",value:"-date"},{label:"Less recent",labelId:"resourcesCatalog.lessRecent",value:"date"},{label:"A Z",labelId:"resourcesCatalog.aZ",value:"title"},{label:"Z A",labelId:"resourcesCatalog.zA",value:"-title"},{label:"Most popular",labelId:"resourcesCatalog.mostPopular",value:"popular_count"}],defaultLabelId:"resourcesCatalog.orderBy"};const U=B;var V=n(221604),Z=n(662387),$=n(192016),G=n(551783),H=n(995531),W=n(737870),X=n(809136),K=n.n(X),Y=n(908437),Q=n.n(Y),J=n(39128),ee=n.n(J),te=n(505275),ne=n.n(te);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach(function(t){ce(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ce(e,t,n){return(t=function(e){var t=function(e){if("object"!=re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=n(794689),se=n(668414),me=n.n(se),fe=n(227341),de=n.n(fe),ye=n(764932),ve=n(839545),pe="GEONODE_DOCUMENTS_ROW_VIEWER";function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach(function(t){Ee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ee(e,t,n){return(t=function(e){var t=function(e){if("object"!=ge(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function we(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach(function(t){xe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xe(e,t,n){return(t=function(e){var t=function(e){if("object"!=Oe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=(0,G.A)("placeholder")($.Ay),Ne={position:"absolute",top:"10px",left:"10px",zIndex:10,borderRadius:"4px",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},Me=function(e){var t=e.onClick,n=e.active,r=e.hasActiveFilters;return o().createElement(u.A,{variant:n?"success":"primary",onClick:t,square:!0,className:r?"ms-notification-circle success":""},o().createElement(A.e6,{glyph:"filter"}))},Re=function(e){var t=e.entry,n=e.isChecked,r=e.onToggle;return o().createElement("li",{key:t.pk,style:{position:"relative"}},o().createElement("div",{style:Ne,onClick:function(e){return e.stopPropagation()}},o().createElement(A.Sc,{checked:n,onChange:function(e){e.stopPropagation(),r(t,e.target.checked)},style:{margin:0,padding:0}})),o().createElement(w.A,{data:ke(ke({},t),{},{"@extras":{info:{thumbnailUrl:null==t?void 0:t.thumbnail_url,icon:{glyph:"document"}}}}),readOnly:!0,onClick:function(){return r(t,!n)},layoutCardsStyle:"grid",metadata:[{path:"title",target:"header",width:100}]}))},ze=(0,l.connect)((0,i.j8)({user:T.dt,monitoredState:x.WT}),{})(function(e,t){var n,a=e.user,l=e.order,i=e.menuItems,s=void 0===i?[]:i,m=e.pageSize,f=void 0===m?10:m,d=e.monitoredState,y=e.style,v=e.requestResources,p=void 0===v?ue.HK:v,g=e.titleId,b=void 0===g?"gnviewer.documentsCatalogTitle":g,h=e.theme,E=void 0===h?"main":h,S=e.metadata,w=e.noResultId,I=void 0===w?"gnviewer.noDocumentsFound":w,j=e.openInNewTab,P=void 0!==j&&j,k=e.resourcesFoundMsgId,x=void 0===k?"gnviewer.documentsFound":k,T=e.resourceTypes,N=void 0===T?[]:T,R=e.onClose,L=e.onAdd,q=e.onZoomTo,B=e.subtypeOptions,$=void 0===B?[{labelId:"gnviewer.image",value:"image"},{labelId:"gnviewer.video",value:"video"}]:B,G=Ie((0,r.useState)([]),2),X=G[0],Y=G[1],J=Ie((0,r.useState)(!1),2),te=J[0],re=J[1],ae=Ie((0,r.useState)(0),2),le=ae[0],se=ae[1],fe=Ie((0,r.useState)(!1),2),ge=fe[0],be=fe[1],Ee=Ie((0,r.useState)([]),2),Ae=Ee[0],Oe=Ee[1],je=Ie((0,r.useState)(!1),2),Pe=je[0],Ce=je[1],xe=Ie((0,r.useState)(1),2),Ne=xe[0],ze=xe[1],De=Ie((0,r.useState)(""),2),_e=De[0],Fe=De[1],Le=Ie((0,r.useState)([]),2),qe=Le[0],Be=Le[1],Ue=Ie((0,r.useState)(""),2),Ve=Ue[0],Ze=Ue[1],$e=Ie((0,r.useState)({}),2),Ge=$e[0],He=$e[1],We=function(e,t){Fe(t?"":e),ze(1)},Xe=function(e,t){He(t?{}:function(t){return ke(ke({},t),e)}),ze(1)};!function(e){var t=e.setLoading,n=void 0===t?function(){}:t,o=e.setResources,a=void 0===o?function(){}:o,l=e.setResourcesMetadata,i=void 0===l?function(){}:l,c=e.request,u=void 0===c?function(){return Promise.resolve({})}:c,s=e.defaultQuery,m=void 0===s?{}:s,f=e.pageSize,d=void 0===f?20:f,y=e.user,v=e.monitoredState,p=e.queryParams,g=void 0===p?{}:p,b=(0,r.useRef)({}),h=(0,r.useRef)(),E=(0,r.useRef)(),S=(0,r.useRef)(),A=(0,W.A)(),O=function(){h.current&&(clearTimeout(h.current),h.current=void 0)};E.current=function(e){O(),function(){var e,t;null!=S&&null!==(e=S.current)&&void 0!==e&&e.cancel&&(null===(t=S.current)||void 0===t||t.cancel(),S.current=void 0);var n=H.A.CancelToken;S.current=n.source()}(),n(!0),h.current=setTimeout(function(){var t,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["d"];return Object.keys(e).filter(function(e){return!t.includes(e)}).reduce(function(t,n){return e[n]&&0!==e[n].length?ie(ie({},t),{},ce({},n,Q()(e[n])?e[n].map(function(e){return e+""}):"".concat(e[n]))):t},{})}(function(e,t){var n=Object.keys(t||{}).reduce(function(n,r){return t[r]&&e[r]?ie(ie({},n),{},ce({},r,ne()([].concat(oe(ee()(t[r])),oe(ee()(e[r])))))):ie(ie({},n),{},ce({},r,t[r]))},{});return ie(ie({},e),n)}(e,m));u(ie(ie({},r),{},{pageSize:d,monitoredState:v,config:{cancelToken:null==S||null===(t=S.current)||void 0===t?void 0:t.token}}),{user:y}).then(function(t){return A(function(){a(t.resources),i({isNextPageAvailable:t.isNextPageAvailable,params:e,total:t.total})})}).catch(function(t){return A(function(){H.A.isCancel(t)||(a([]),i({isNextPageAvailable:!1,params:e,total:0,error:!0}))})}).finally(function(){return A(function(){n(!1)})})},300)},(0,r.useEffect)(function(){K()(b.current,g)||(E.current(g),b.current=g)},[g,d,y]),(0,r.useEffect)(function(){return function(){var e;null!=S&&null!==(e=S.current)&&void 0!==e&&e.cancel&&S.current.cancel(),O()}},[])}({request:p,queryParams:ke({page:Ne,q:_e,sort:Ve,"filter{subtype.in}":qe.length>0?qe:void 0},Ge),pageSize:f,user:a,setLoading:re,setResources:Y,setResourcesMetadata:function(e){void 0!==e.total&&se(e.total),e.error&&be(!0)}});var Ke=P?"_blank":void 0,Ye=(0,C.A)(d,{menuItems:s,order:l,metadata:S},null==t||null===(n=t.plugins)||void 0===n?void 0:n.requires,{filterFunc:function(e){return(0,M.b3)(e,N,a)}}),Qe=(0,r.useMemo)(function(){var e=Object.keys(Ge).length>0;return[{Component:function(){return o().createElement(Me,{onClick:function(){return Ce(!Pe)},active:Pe,hasActiveFilters:e})},name:"filter"}]},[Pe]),Je=function(e,t){Oe(function(n){return t?[].concat(we(n),[e]):n.filter(function(t){return t.pk!==e.pk})})},et=function(e){var t,n;re(!0),(t=e,n=t.map(function(e){return(0,ue.gg)(e.pk)}),Promise.all(n).then(function(e){var t=e.map(function(e){var t,n=null==e||null===(t=e.extent)||void 0===t?void 0:t.coords,r=de()(n)?null:(0,ye.getPolygonFromExtent)(n),o=!de()(n)&&r?(0,ve.A)(r):null;return o?{type:"Feature",properties:e,geometry:{type:"Point",coordinates:o.geometry.coordinates},id:e.pk}:null}).filter(function(e){return null!==e}),n=function(e){if(!e||0===e.length)return null;var t=e.filter(function(e){return e&&2===e.length});if(0===t.length)return null;var n=t.map(function(e){return e[0]}),r=t.map(function(e){return e[1]});return{bounds:{minx:Math.min.apply(Math,Se(n)),miny:Math.min.apply(Math,Se(r)),maxx:Math.max.apply(Math,Se(n)),maxy:Math.max.apply(Math,Se(r))},crs:"EPSG:4326"}}(t.map(function(e){return e.geometry.coordinates}));return he(he({type:"vector",visibility:!0,id:me()(),name:"Documents",title:"Documents"},n&&{bbox:n}),{},{extendedParams:{},features:t,style:{format:"geostyler",metadata:{editorType:"visual"},body:{rules:[{name:"Videos",filter:["&&",["==","subtype","video"]],ruleId:"01",mandatory:!1,symbolizers:[{kind:"Icon",size:46,image:{args:[{color:"blue",glyph:"video-camera",shape:"circle"}],name:"msMarkerIcon"},anchor:"bottom",rotate:0,opacity:1,symbolizerId:"01",msBringToFront:!1,msHeightReference:"none"}]},{name:"Images",filter:["&&",["==","subtype","image"]],ruleId:"02",mandatory:!1,symbolizers:[{kind:"Icon",size:46,image:{args:[{color:"blue",glyph:"camera",shape:"circle"}],name:"msMarkerIcon"},anchor:"bottom",rotate:0,opacity:1,symbolizerId:"01",msBringToFront:!1,msHeightReference:"none"}]},{name:"Files",filter:["&&",["!=","subtype","image"],["!=","subtype","video"]],ruleId:"03",mandatory:!1,symbolizers:[{kind:"Icon",size:46,image:{args:[{color:"blue",glyph:"file",shape:"circle"}],name:"msMarkerIcon"},anchor:"bottom",rotate:0,opacity:1,symbolizerId:"01",msBringToFront:!1,msHeightReference:"none"}]}]}},rowViewer:pe})})).then(function(e){var t,n;L(e);var r,o=(null==e||null===(t=e.bbox)||void 0===t?void 0:t.bounds)||{},a=o.minx,l=o.miny,i=o.maxx,c=o.maxy,u=(null==e||null===(n=e.bbox)||void 0===n?void 0:n.bounds)&&[a,l,i,c];u&&q(u,null==e||null===(r=e.bbox)||void 0===r?void 0:r.crs)}).finally(function(){re(!1)})},tt=X.length>0&&X.every(function(e){return Ae.some(function(t){return t.pk===e.pk})}),nt=Ae.length>0&&!tt,rt=(0,r.useMemo)(function(){return!!(_e||Object.keys(Ge).length>0||qe.length>0)},[_e,Ge,qe]),ot=function(e){et(e?X:Ae)};return o().createElement(D.A,{column:!0,className:"gn-resources-catalog",style:y},R&&o().createElement(D.A,{gap:"sm",centerChildrenVertically:!0,classNames:["_padding-sm"]},o().createElement(D.X,null,o().createElement(_.A,null,o().createElement(c.A,{msgId:b}))),o().createElement(u.A,{square:!0,borderTransparent:!0,onClick:function(){return R()}},o().createElement(A.e6,{glyph:"1-close"}))),o().createElement("div",{className:"gn-resources-catalog-filter"},o().createElement(V.A,{placeholder:"gnviewer.documentsCatalogFilterPlaceholder",value:_e,debounceTime:300,onChange:function(e){return We(e,!1)}}),_e&&!te&&o().createElement(u.A,{onClick:function(){We("",!0)}},o().createElement(A.e6,{glyph:"remove"}))),o().createElement(D.A,{gap:"sm",centerChildrenVertically:!0,classNames:["_padding-sm"]},o().createElement(D.A.Fill,null,o().createElement(A.gE,{controlId:"subtype",style:{marginBottom:0}},o().createElement(Te,{value:(Array.isArray(qe)?qe:[qe]).map(function(e){var t=$.find(function(t){return t.value===e});return t?{label:o().createElement(c.A,{msgId:t.labelId}),value:t.value}:{value:e,label:e}}),multi:!0,placeholder:"gnviewer.filterByType",onChange:function(e){var t;t=(null==e?void 0:e.map(function(e){return e.value}))||[],Be(t),ze(1)},options:$.map(function(e){return{label:o().createElement(c.A,{msgId:e.labelId}),value:e.value}})}))),o().createElement(A.Sc,{checked:tt,indeterminate:nt,onChange:function(e){return function(e){if(e){var t=new Set(X.map(function(e){return e.pk}));Oe(function(e){var n=e.filter(function(e){return!t.has(e.pk)});return[].concat(we(n),we(X))})}else{var n=new Set(X.map(function(e){return e.pk}));Oe(function(e){return e.filter(function(e){return!n.has(e.pk)})})}}(e.target.checked)},style:{margin:0}},o().createElement(c.A,{msgId:"gnviewer.selectAll"}))),o().createElement(U,{theme:E,titleId:"",menuItemsLeft:Qe,menuItems:Ye.menuItems||[],orderConfig:Ye.order,totalResources:le,loading:te,style:{padding:"0.6rem"},query:Ve,target:Ke,resourcesFoundMsgId:x,onSortChange:function(e){!function(e){Ze(e)}(e)}}),o().createElement("div",{style:{marginLeft:8}},o().createElement(Z.A,{className:"ms-resources-filter shadow-md",top:182,show:Pe,enabled:Pe},o().createElement(z,{id:"documents-catalog-filter-form",extentProps:Ye.extent,query:Ge,onChange:function(e){Xe(e,!1)},onClear:function(){Xe({},!0)},onClose:function(){return Ce(!1)}}))),o().createElement("div",{className:"gn-resources-catalog-body"},o().createElement("ul",{className:"gn-resources-catalog-list"},X.map(function(e){var t=Ae.some(function(t){return t.pk===e.pk});return o().createElement(Re,{key:e.pk,entry:e,isChecked:t,onToggle:Je})}),0===X.length&&!te&&o().createElement("div",{className:"gn-resources-catalog-alert"},o().createElement(c.A,{msgId:I})))),te&&o().createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center"}},o().createElement(O.A,{size:70})),o().createElement(D.A,{classNames:["ms-".concat(E,"-colors"),"_padding-tb-sm"],centerChildren:!0,style:{position:"sticky",bottom:0}},ge?o().createElement(u.A,{variant:"primary",href:"#/"},o().createElement(A.e6,{glyph:"refresh"})):(!te||!!le)&&o().createElement(F.A,{items:Math.ceil(le/f),activePage:Ne,onSelect:function(e){ze(e)}})),o().createElement("div",{className:"gn-resources-catalog-add-layer"},Ae.length>0?o().createElement(u.A,{variant:"primary",onClick:function(){return ot(!1)}},o().createElement(c.A,{msgId:"gnviewer.addSelectedAsLayer"})," (".concat(Ae.length,")")):rt?o().createElement(u.A,{variant:"primary",onClick:function(){return ot(!0)},className:"gn-add-layer-search",disabled:0===le},o().createElement(c.A,{msgId:"gnviewer.addSearchAsLayer"}),le>0&&" (".concat(le,")")):o().createElement(u.A,{variant:"primary",disabled:!0},o().createElement(c.A,{msgId:"gnviewer.addSearchAsLayer"}))))});const De=ze;var _e=n(753896);const Fe=function(e){return o().createElement(D.A,{className:"gn-document-info-viewer",column:!0,gap:"sm"},o().createElement(_.A,{fontSize:"md"},null==e?void 0:e.title),o().createElement(_e.A,{resource:e}))};var Le=n(619952),qe=["enabled","items","order","metadata","resourceTypes"];function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be.apply(null,arguments)}var Ue=(0,l.connect)((0,i.Mz)([function(e){return(0,y.o7)(e,{height:!0})},function(e){var t;return null==e||null===(t=e.controls)||void 0===t||null===(t=t.documentsCatalog)||void 0===t?void 0:t.enabled}],function(e,t){return{style:e,enabled:t}}),{onAdd:s.VE,onClose:f.fN.bind(null,"documentsCatalog","enabled",!1),onZoomTo:m.jc})(function(e){var t=e.enabled,n=e.items,a=void 0===n?[]:n,l=e.order,i=void 0===l?{defaultLabelId:"resourcesCatalog.orderBy",options:[{label:"Most recent",labelId:"resourcesCatalog.mostRecent",value:"-created"},{label:"Less recent",labelId:"resourcesCatalog.lessRecent",value:"created"},{label:"A Z",labelId:"resourcesCatalog.aZ",value:"title"},{label:"Z A",labelId:"resourcesCatalog.zA",value:"-title"}]}:l,c=e.metadata,u=void 0===c?{grid:[{path:"title",labelId:"catalog.title",width:40},{path:"date",labelId:"catalog.date",width:30},{path:"owner",labelId:"catalog.owner",width:30}]}:c,s=e.resourceTypes,m=void 0===s?["MAP","DASHBOARD","GEOSTORY","CONTEXT"]:s,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,qe);return(0,r.useEffect)(function(){return(0,Le.mv)(pe,Fe),function(){(0,Le.mv)(pe,void 0)}},[]),t?o().createElement(De,Be({items:a,order:i,metadata:u,resourceTypes:m},f)):null}),Ve=(0,l.connect)((0,i.Mz)([],function(){return{}}),{onClick:f.fN.bind(null,"documentsCatalog","enabled",!0)})(function(e){var t=e.onClick,n=e.size,r=e.variant;return o().createElement(u.A,{size:n,onClick:function(){t()},variant:r},o().createElement(c.A,{msgId:"gnviewer.addDocument"}))});const Ze=(0,a.i1)("DocumentsCatalog",{component:Ue,containers:{ActionNavbar:{name:"DocumentsCatalog",Component:Ve}},epics:S,reducers:{}})},753896(e,t,n){n.d(t,{A:()=>x});var r=n(273517),o=n.n(r),a=n(920327),l=n(275705),i=n(317314),c=n(132672);function u(e){var t=e.url;return o().createElement(c.A,{column:!0,centerChildren:!0,classNames:["gn-metadata-preview","_corner-tl","_absolute","_fill"]},o().createElement("iframe",{frameBorder:"0",key:t,src:t,style:{width:"100%",height:"100%"}}))}u.defaultProps={url:""};const s=u;function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.src;return o().createElement("iframe",{className:"gn-pdf-viewer",type:"application/pdf",frameBorder:"0",scrolling:"auto",height:"100%",width:"100%",src:t})},y=function(e){var t=e.src,n=e.url,a=m((0,r.useState)(null),2),c=a[0],u=a[1],f=m((0,r.useState)(!1),2),y=f[0],v=f[1],p=m((0,r.useState)(null),2),g=p[0],b=p[1];return(0,r.useEffect)(function(){v(!0),(0,i.$B)(t).then(function(e){u(e)}).catch(function(){b(!0)}).finally(function(){v(!1)})},[]),y?o().createElement("div",{className:"pdf-loader"},o().createElement(l.A,{size:70})):g?o().createElement(s,{url:n}):c?o().createElement(d,{src:c}):o().createElement("div",{className:"gn-pdf-viewer"})};var v=n(8571);function p(e,t){return E(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||b(e,t)||g()}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function E(e){if(Array.isArray(e))return e}var S=(0,r.lazy)(function(){return Promise.all([n.e(1206),n.e(3116)]).then(n.bind(n,313116))}),A=function(e){var t,n,a,l,i=e.data,c=E(l=null!=i?i:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||b(l)||g(),u=c[0],s=h(c).slice(1);return u=null!==(t=null===(n=u)||void 0===n?void 0:n.map(function(e,t){return{key:t,name:e,resizable:!0}}))&&void 0!==t?t:[],o().createElement("div",{className:"grid-container"},o().createElement(r.Suspense,{fallback:null},o().createElement(S,{columns:u,rowGetter:function(e){return null==s?void 0:s[e]},rowsCount:null!==(a=null==s?void 0:s.length)&&void 0!==a?a:0,emptyRowsView:function(){return o().createElement("span",{className:"empty-data"},o().createElement(v.A,{msgId:"gnviewer.noGridData"}))},minColumnWidth:100})))};var O=n(277327),w=n(425380),I=["resource"];function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(null,arguments)}var P=(0,r.lazy)(function(){return Promise.all([n.e(9545),n.e(2129),n.e(6881),n.e(1924)]).then(n.bind(n,131924))}),C={image:a.Ay,video:a.Ay,pdf:function(e){var t=e.src,n=e.url;return o().createElement(y,{src:t,url:n})},gltf:P,ifc:P,audio:a.Ay,excel:function(e){var t=e.extension,a=e.src,c=e.url,u=p((0,r.useState)([]),2),m=u[0],f=u[1],d=p((0,r.useState)(!1),2),y=d[0],v=d[1],g=p((0,r.useState)(null),2),b=g[0],h=g[1];return(0,r.useEffect)(function(){a&&(v(!0),fetch(a).then(function(e){return"csv"===t?e.text():e.arrayBuffer()}).then(function(e){var r=e;"csv"!==t?Promise.all([n.e(3959),n.e(3686)]).then(n.bind(n,603959)).then(function(e){var t=e.read,n=e.utils,o=t(r,{type:"array"}),a=o.SheetNames[0],l=o.Sheets[a];r=n.sheet_to_csv(l),f((0,i.ST)(r))}).catch(function(e){console.error("Failed to load xlsx module",e)}):f((0,i.ST)(r))}).catch(function(){h(!0)}).finally(function(){v(!1)}))},[a]),y?o().createElement("div",{className:"csv-loader"},o().createElement(l.A,{size:70})):b?o().createElement(s,{url:c}):(null==m?void 0:m.length)>0?o().createElement("div",{className:"gn-csv-viewer"},o().createElement("div",{className:"csv-container"},o().createElement(A,{data:m}))):null},unsupported:function(e){var t=e.url,n=void 0===t?"":t;return o().createElement(s,{url:n})}},k={video:{mode:"view",inView:!0,fit:"contain"},image:{fit:"contain",enableFullscreen:!0,loaderComponent:function(){return o().createElement("div",{className:"pdf-loader"},o().createElement(l.A,{size:70}))}},pdf:{},unsupported:{}};const x=function(e){var t=e.resource,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,I),a=(0,w.gX)(),l=t&&(a[t.subtype]||a[t.resource_type])||{},c=l.hasPermission,u=l.metadataPreviewUrl,s=void 0===u?function(){}:u,m=(null==t?void 0:t.pk)&&c&&c(t);if(t&&m){var f=(0,i.su)(t.extension),d=C[f];return o().createElement(r.Suspense,{fallback:null},o().createElement(d,j({mediaType:f},k[f],n[f],{description:t.abstract,id:t.pk,thumbnail:function(){return(0,w.xy)(null==t?void 0:t.thumbnail_url)},src:t.href,url:t?s(t):"",isExternalSource:(0,w.ow)(t),bboxPolygon:null==t?void 0:t.ll_bbox_polygon,title:t.title,extension:t.extension})))}return o().createElement(O.A,{msgId:"gnhome.permissionsMissing"})}},959314(e,t,n){n.d(t,{v:()=>r});var r={PANEL:"PANEL"}}}]);