"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[89828],{227856:(e,t,r)=>{r.d(t,{Hn:()=>c,Ki:()=>s,Ku:()=>o,Pv:()=>i,_P:()=>l,e4:()=>n,f9:()=>a,gR:()=>u});var n="SET_SEARCH_BOOKMARK_CONFIG",o="RESET_BOOKMARK_CONFIG",i="UPDATE_BOOKMARK",a="FILTER_BOOKMARKS";function c(e,t){return{type:n,property:e,value:t}}function l(){return{type:o}}function s(e){return{type:i,bookmark:e,idx:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1}}function u(e){return{type:a,filter:e}}},736220:(e,t,r)=>{r.d(t,{A7:()=>o,T1:()=>n,bU:()=>l,cf:()=>i,kZ:()=>a,wb:()=>c});var n="SET_SEARCH_CONFIG_PROP",o="RESET_SEARCH_CONFIG",i="UPDATE_SERVICE";function a(e,t){return{type:n,property:e,value:t}}function c(){return{type:o,page:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}}function l(e){return{type:i,service:e,idx:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1}}},972093:(e,t,r)=>{r.r(t),r.d(t,{default:()=>dr});var n=r(858156),o=r.n(n),i=r(605556),a=r.n(i),c=r(273517),l=r.n(c),s=r(811668),u=r(801081),f=r(593429),p=r(538704),d=r(415392),m=r(273494),y=r(847996),v=r(73934),b=r(227856),h=r(8117),g=r(962193),S=r.n(g),O=r(302404),C=r.n(O),E=r(762216),_=r.n(E),j=r(198023),w=r.n(j),P=r(8571),I=r(164045),T=r(541033),k=r.n(T);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(null,arguments)}var R=(0,I.A)(h.gf),A={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:k()()},M={title:l().createElement(h.e6,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0};const N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuItems,r=void 0===t?[]:t,n=e.disabled,o=void 0!==n&&n;return l().createElement(R,x({disabled:o},A,M),r.length?r.map(function(e){return e}):null)},F=function(e){var t=e.className,r=e.style,n=e.children;return l().createElement("div",{id:"map-search-bar",style:r,className:"MapSearchBar"+(t?" "+t:"")},n)};var D=r(628017);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var G=function(e,t){var r=e.show,n=e.autoFocusOnSelect,o=void 0===n||n,i=e.selectedItems,a=void 0===i?[]:i,c=e.className,s=e.style,u=void 0===s?{textOverflow:"ellipsis"}:s,f=e.placeholder,p=e.placeholderMsgId,d=e.hideOnBlur,m=void 0===d||d,y=e.searchText,v=void 0===y?"":y,b=e.typeAhead,g=void 0===b||b,S=e.delay,O=void 0===S?1e3:S,C=e.blurResetDelay,E=void 0===C?300:C,_=e.onSearch,j=void 0===_?function(){}:_,w=e.onSearchTextChange,P=void 0===w?function(){}:w,I=e.onCancelSelectedItem,T=void 0===I?function(){}:I,k=e.onPurgeResults,x=void 0===k?function(){}:k,R=l().useRef(),A=l().useRef(),M=V(l().useState(),2),N=M[0],F=M[1],B=V(l().useState(),2),G=B[0],L=B[1],z=V(l().useState(!1),2),Z=z[0],q=z[1];l().useEffect(function(){var e=A.current;if(o&&a&&(e<a.length||!e&&1===a.length)){var t=R.current;t&&t.focus instanceof Function&&setTimeout(function(){return t.focus()},200)}A.current=a&&a.length}),l().useEffect(function(){Z&&(j(),q(!1))},[Z,j]);var U="search.addressSearch";if(!f&&t.messages){var K=(0,D.kA)(t.messages,p||U);K&&(U=K)}else U=f;return r&&l().createElement(h.MJ,{className:"searchInput".concat(c?" ".concat(c):""),key:"search-input",placeholder:U,type:"text",inputRef:function(e){R.current=e},style:u,value:v,onKeyDown:function(e){switch(e.keyCode){case 13:j();break;case 8:!v&&a&&a.length>0&&T(a[a.length-1])}},onBlur:function(){m&&(N&&clearTimeout(N),F(setTimeout(function(){x()},E)))},onFocus:function(){g&&v&&j()},onChange:function(e){var t=e.target.value;P(t),g&&(G&&clearTimeout(G),L(setTimeout(function(){q(!0)},O)))}})};G.contextTypes={messages:a().object};const L=G;var z=r(750042),Z=r.n(z),q=r(256951);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K.apply(null,arguments)}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){H(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function H(e,t,r){return(t=function(e){var t=function(e){if("object"!=U(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const X=function(e){var t=e.loading,r=(e.splitTools,e.toolbarProps),n=void 0===r?{}:r,o=e.toolbarButtons,i=void 0===o?[]:o,a=e.children;return l().createElement("span",{className:"search-toolbar-options"},t&&l().createElement(Z(),{style:Object.assign({},{position:"absolute"},W({},{right:"69px",zIndex:1,top:"13px"})),spinnerName:"pulse",noFadeIn:!0}),l().createElement(q.A,K({btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"}},n,{buttons:i})),a)};var $=r(192016);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(null,arguments)}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach(function(t){oe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oe(e,t,r){return(t=function(e){var t=function(e){if("object"!=Q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=(0,r(551783).A)(["placeholder","clearValueText","noResultsText"])($.Ay),ae={searchByBookmark:function(e,t,r,n,o){var i,a=e.options,c=void 0===a?{}:a,l=e.layerVisibilityReload;void 0!==l&&l?t(ne(ne({},r),{},{map:ne(ne({},r.map),{},{bookmark_search_config:n})}),null,{bounds:[c.west,c.south,c.east,c.north],crs:(null==r||null===(i=r.map)||void 0===i||null===(i=i.center)||void 0===i?void 0:i.crs)||"EPSG:4326"}):c&&!S()(c)&&o([c.west,c.south,c.east,c.north],"EPSG:4326")},searchIcon:function(e,t){var r=t.onLayerVisibilityLoad,n=t.mapInitial,o=t.bookmarkConfig,i=t.onZoomToExtent;return{tooltipId:"bookmarkSearch"===e?"search.zoomToBookmark":"",tooltipPosition:"bottom",visible:"bookmarkSearch"===e&&!(null!=o&&o.zoomOnSelect),disabled:"bookmarkSearch"===e&&!o.selected,onClick:function(){"bookmarkSearch"===e&&ae.searchByBookmark(o.selected,r,n,o.bookmarkSearchConfig||{},i)}}}},ce=function(e){var t=e.bookmarkConfig,r=e.onPropertyChange,n=e.onLayerVisibilityLoad,o=e.mapInitial,i=e.onZoomToExtent,a=ee((0,c.useState)([]),2),s=a[0],u=a[1],f=t||{},p=f.selected,d=void 0===p?{}:p,m=f.bookmarkSearchConfig,y=void 0===m?{}:m,v=f.zoomOnSelect,b=void 0===v||v,h=y.bookmarks,g=void 0===h?[]:h,O=ae.searchByBookmark;return(0,c.useEffect)(function(){S()(g)||u(g.map(function(e){return e.title}))},[g]),l().createElement("div",{className:"search-select"},l().createElement("div",{style:{flex:"1 1 0%",padding:"0px 4px"}},l().createElement(ie,J({},{clearable:!0,isSearchable:!0,isClearable:!0},{onChange:function(e){var t=e&&e.value||"",a=ee(g.filter(function(r,n){return r.title===t&&n===e.idx}),1)[0];r("selected",a),b&&O(a,n,o,y,i)},value:(null==d?void 0:d.title)||"",options:s.map(function(e,t){return{label:e,value:e,idx:t}}),placeholder:"search.b_placeholder",clearValueText:"search.b_clearvalue",noResultsText:"search.b_noresult"}))))};ce.propTypes={bookmarkConfig:a().object.isRequired,onPropertyChange:a().func.isRequired};const le=(0,s.connect)(function(e){return{bookmarkConfig:e.searchbookmarkconfig||{}}},{onPropertyChange:b.Hn,onZoomToExtent:m.jc,onLayerVisibilityLoad:p.ze})(ce);var se=r(20008),ue=r(607038),fe=r(764932),pe={clearCoordinates:function(e,t){e({owner:"search"}),["lat","lon","xCoord","yCoord","currentMapXYCRS"].forEach(function(e){return t(e,"")})},areValidCoordinates:function(e){return!!e&&w()(null==e?void 0:e.lon)&&w()(null==e?void 0:e.lat)},zoomToPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;e({x:parseFloat(t.lon),y:parseFloat(t.lat)},r,"EPSG:4326")},coordinateFormatChange:function(e,t,r,n){return{buttonConfig:{title:l().createElement(h.e6,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===e,onClick:function(){return t("decimal")},text:l().createElement(P.A,{msgId:"search.decimal"})},{active:"aeronautical"===e,onClick:function(){return t("aeronautical")},text:l().createElement(P.A,{msgId:"search.aeronautical"})}],visible:r&&"coordinatesSearch"===n,Element:ue.A}},removeIcon:function(e,t,r,n){return{visible:["coordinatesSearch","mapCRSCoordinatesSearch"].includes(e)&&(w()(t.lon)||w()(t.lat)||w()(t.xCoord)||w()(t.yCoord)),onClick:function(){return pe.clearCoordinates(r,n)}}},searchIcon:function(e,t,r,n){return{visible:["coordinatesSearch","mapCRSCoordinatesSearch"].includes(e),onClick:function(){["coordinatesSearch","mapCRSCoordinatesSearch"].includes(e)&&pe.areValidCoordinates(t)&&pe.zoomToPoint(r,t,n)}}},coordinatesMenuItem:function(e){var t=e.activeTool,r=e.searchText,n=e.clearSearch,o=e.onChangeActiveSearchTool,i=e.onClearBookmarkSearch,a=e.currentMapCRS,c=e.onChangeFormat;return"EPSG:4326"===a?l().createElement(h.Dr,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},l().createElement(h.e6,{glyph:"search-coords"})," ",l().createElement(P.A,{msgId:"search.coordinatesSearch"})):l().createElement(l().Fragment,null,l().createElement(h.Dr,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},l().createElement(h.e6,{glyph:"search-coords"})," ",l().createElement(P.A,{msgId:"search.coordinatesSearch"})),l().createElement(h.Dr,{active:"mapCRSCoordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("mapCRSCoordinatesSearch"),c("decimal"),document.dispatchEvent(new MouseEvent("click"))}},l().createElement("span",{style:{marginLeft:20}},l().createElement(h.e6,{glyph:"search-coords"})," ",l().createElement(P.A,{msgId:"search.currentMapCRS"}))))}},de=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,o=e.onClearCoordinatesSearch,i=e.onZoomToPoint,a=e.onChangeCoord,c=e.defaultZoomLevel,s=e.currentMapCRS,u=e.aeronauticalOptions,f=void 0===u?{seconds:{decimals:4,step:1e-4}}:u,p=e.constraintsCoordEditor,d=void 0===p?{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}:p,m=pe.zoomToPoint,y=pe.areValidCoordinates,v=function(e,t){if(a(e,parseFloat(t)),(null==r?void 0:r.currentMapXYCRS)!==s&&"EPSG:4326"!==s&&a("currentMapXYCRS",s),y()||o({owner:"search"}),"EPSG:4326"!==s){var n="lat"===e?parseFloat(t):r.lat,i="lon"===e?parseFloat(t):r.lon,c=w()(n)&&!isNaN(n),l=w()(i)&&!isNaN(i);if(c&&l){var u=(0,fe.reproject)([i,n],"EPSG:4326",s,!0),f=parseFloat(null==u?void 0:u.x),p=parseFloat(null==u?void 0:u.y);return a("xCoord",f),void a("yCoord",p)}r.xCoord&&a("xCoord",""),r.yCoord&&a("yCoord","")}},b=function(){m(i,r,c)};return l().createElement("div",{className:"coordinateEditor",style:{flexWrap:"decimal"===n?"nowrap":"wrap"}},l().createElement(h.fI,{className:"entryRow ".concat(n)},l().createElement(h.gE,null,l().createElement(h.MG,null,l().createElement(h.MG.Addon,{style:{minWidth:45}},l().createElement(P.A,{msgId:"search.latitude"})),l().createElement(se.A,{owner:"search",format:n,aeronauticalOptions:f,coordinate:"lat",idx:1,value:r.lat,constraints:d,onChange:function(e){return v("lat",e)},onKeyDown:function(){y(r)&&b()}})))),l().createElement(h.fI,{className:"entryRow ".concat(n)},l().createElement(h.gE,null,l().createElement(h.MG,null,l().createElement(h.MG.Addon,{style:{minWidth:45}},l().createElement(P.A,{msgId:"search.longitude"})),l().createElement(se.A,{owner:"search",format:n,aeronauticalOptions:f,coordinate:"lon",idx:2,value:r.lon,constraints:d,onChange:function(e){return v("lon",e)},onKeyDown:function(){y(r)&&b()}})))))};de.propTypes={coordinate:a().object,format:a().string,onClearCoordinatesSearch:a().func,onZoomToPoint:a().func,onChangeCoord:a().func,defaultZoomLevel:a().number,currentMapCRS:a().string};const me=(0,s.connect)(function(e){return{coordinate:e.search.coordinate||{}}},{onZoomToPoint:v.y4,onChangeCoord:v.OV})(de);var ye=r(294312);function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var be=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,o=e.onClearCoordinatesSearch,i=e.onZoomToPoint,a=e.onChangeCoord,c=e.defaultZoomLevel,s=e.currentMapCRS,u=pe.zoomToPoint,f=pe.areValidCoordinates,p=function(e){var t,r,n=(t=(0,ye.c2)(e).extent,r=4,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ve(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1],a=n[2];return{decimal:{yCoord:{min:i,max:n[3]},xCoord:{min:o,max:a}}}},d=function(e,t){var r,n,o=(null===(r=p(s).decimal[t])||void 0===r?void 0:r.min)||0,i=(null===(n=p(s).decimal[t])||void 0===n?void 0:n.max)||0,a=parseFloat(e);return!(isNaN(a)||a<o||a>i)};l().useEffect(function(){var e=null==r?void 0:r.currentMapXYCRS,t=s;if(t&&"EPSG:4326"!==t){if(e!==s&&a("currentMapXYCRS",s),t&&e&&e!==t){var n=w()(r.lat)&&!isNaN(r.lat),i=w()(r.lon)&&!isNaN(r.lon);if(n&&i){var c=(0,fe.reproject)([r.lon,r.lat],"EPSG:4326",t,!0),l=parseFloat(null==c?void 0:c.x),u=parseFloat(null==c?void 0:c.y);return a("xCoord",l),a("yCoord",u),void(d(l,"xCoord")&&d(u,"yCoord")||o({owner:"search"}))}r.xCoord&&a("xCoord",""),r.yCoord&&a("yCoord","")}d(null==r?void 0:r.xCoord,"xCoord")&&d(null==r?void 0:r.yCoord,"yCoord")||o({owner:"search"})}},[s]);var m=function(e,t){f()||o({owner:"search"});var n=parseFloat(t);a(e,n);var i="yCoord"===e?n:r.yCoord,c="xCoord"===e?n:r.xCoord,l=w()(i)&&!isNaN(i)&&d(i,"yCoord"),u=w()(c)&&!isNaN(c)&&d(c,"xCoord");if(l&&u){var p=(0,fe.reproject)([c,i],s,"EPSG:4326",!0);return a("lat",p.y),void a("lon",p.x)}a("lat",""),a("lon","")},y=function(){u(i,r,c)};return l().createElement("div",{className:"coordinateEditor",style:{flexWrap:"nowrap"}},l().createElement(h.fI,{className:"entryRow ".concat(n)},l().createElement(h.gE,null,l().createElement(h.MG,null,l().createElement(h.MG.Addon,{style:{minWidth:45}},l().createElement(P.A,{msgId:"search.xCoord"})),l().createElement(se.A,{owner:"search",format:n,coordinate:"X",idx:2,value:null==r?void 0:r.xCoord,currentMapCRS:s,constraints:p(s),onChange:function(e){return m("xCoord",e)},onKeyDown:function(){f(r)&&y()}})))),l().createElement(h.fI,{className:"entryRow ".concat(n)},l().createElement(h.gE,null,l().createElement(h.MG,null,l().createElement(h.MG.Addon,{style:{minWidth:45}},l().createElement(P.A,{msgId:"search.yCoord"})),l().createElement(se.A,{owner:"search",format:n,coordinate:"Y",idx:1,value:null==r?void 0:r.yCoord,currentMapCRS:s,constraints:p(s),onChange:function(e){return m("yCoord",e)},onKeyDown:function(){f(r)&&y()}})))))};be.propTypes={coordinate:a().object,format:a().string,onClearCoordinatesSearch:a().func,onZoomToPoint:a().func,onChangeCoord:a().func,defaultZoomLevel:a().number};const he=(0,s.connect)(function(e){return{coordinate:e.search.coordinate||{}}},{onZoomToPoint:v.y4,onChangeCoord:v.OV})(be);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}var Se=["activeSearchTool","removeIcon","searchIcon","isSearchClickable","splitTools","searchText","maxResults","searchOptions","loading","delay","blurResetDelay","typeAhead","coordinate","selectedItems","defaultZoomLevel","enabledSearchBookmarkConfig","error","format","placeholder","placeholderMsgId","showOptions","showAddressSearchOption","showCoordinatesSearchOption","showBookMarkSearchOption","onSearch","onSearchReset","onSearchTextChange","onCancelSelectedItem","onChangeCoord","onChangeActiveSearchTool","onClearCoordinatesSearch","onChangeFormat","onToggleControl","onZoomToPoint","onClearBookmarkSearch","onPurgeResults","currentMapCRS","items"];function Oe(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||we(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach(function(t){_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _e(e,t,r){return(t=function(e){var t=function(e){if("object"!=ge(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||we(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ie=(0,I.A)("div"),Te=function(e){var t=e.activeTool,r=e.searchIcon,n=e.services,i=void 0===n?[]:n,a=e.selectedService,c=void 0===a?-1:a,s=e.onServiceSelect,u=void 0===s?function(){}:s;return l().createElement(l().Fragment,null,l().createElement(h.Dr,{className:"trigger-item",active:"addressSearch"===t,onClick:function(){return u(-1)}},l().createElement(h.e6,{glyph:r}),l().createElement(P.A,{msgId:"search.addressSearch"})),l().createElement("div",{className:"search-services-submenus"},l().createElement(Ie,{tooltipPosition:"left",tooltipId:"search.searchOnAllServices",className:"search-services-item all-services-item ".concat("addressSearch"===t&&-1===c?"active":""),onClick:function(){return u(-1)}},l().createElement(h.e6,{glyph:r}),l().createElement(P.A,{msgId:"search.addressSearch"})),i.map(function(e,n){var i=e.name||e.type;return l().createElement(Ie,{key:n,tooltip:o()(e,"options.tooltip","Search on ".concat(i)),tooltipPosition:"left",onClick:function(){return u(n)},className:"search-services-item ".concat("addressSearch"===t&&c===n?"active":"")},l().createElement("span",{className:"search-services-item-icon"},l().createElement(h.e6,{glyph:r}),i))})))},ke=function(e){var t=e.activeTool,r=e.searchIcon,n=e.services,o=void 0===n?[]:n,i=e.selectedService,a=void 0===i?-1:i,c=e.onServiceSelect,s=void 0===c?function(){}:c;return 0===o.length?null:1===o.length?l().createElement(h.Dr,{active:"addressSearch"===t,onClick:function(){return s(-1)}},l().createElement(h.e6,{glyph:r}),l().createElement(P.A,{msgId:"search.addressSearch"})):l().createElement(Te,{activeTool:t,searchIcon:r,services:o,selectedService:a,onServiceSelect:s})},xe=r(907309),Re=r.n(xe),Ae=r(7157);function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ge(n.key),n)}}function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Fe=function(){return!!e})()}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}function Ve(e,t){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ve(e,t)}function Be(e,t,r){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ge(e){var t=function(e){if("object"!=Me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Me(t)?t:t+""}var Le=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Be(e=function(e,t,r){return t=De(t),function(e,t){if(t&&("object"==Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fe()?Reflect.construct(t,r||[],De(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"onClick",function(){var t=e.props.item;e.props.onItemClick(t)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ve(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return l().createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},l().createElement("div",{className:"search-result-left-container"},l().createElement("div",{className:"icon"}," ",l().createElement("img",{src:e.icon})),l().createElement("div",{className:"text-result-title"},o()(e,this.props.displayName)||(0,Ae.bD)(this.props.displayName||"")(e)),l().createElement("small",{className:"text-info"},this.props.subTitle&&o()(e,this.props.subTitle)||(0,Ae.bD)(this.props.subTitle||"")(e))),l().createElement("div",{className:"search-result-right-container"},l().createElement("div",{className:"search-result-tools"},l().createElement(q.A,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:this.props.tools}))))}}])&&Ne(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(l().Component);Be(Le,"propTypes",{subTitle:a().string,item:a().object,displayName:a().string,idField:a().string,icon:a().string,onItemClick:a().func,tools:a().array}),Be(Le,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon",tools:[]});const ze=Le;var Ze=r(712901),qe=r(611963);function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$e(n.key),n)}}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ye=function(){return!!e})()}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}function Xe(e,t,r){return(t=$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e(e){var t=function(e){if("object"!=Ue(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ue(t)?t:t+""}var Qe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Xe(e=function(e,t,r){return t=We(t),function(e,t){if(t&&("object"==Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ye()?Reflect.construct(t,r||[],We(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"onItemClick",function(t,r){e.props.onItemClick(t,e.props.mapConfig,r)}),Xe(e,"renderResults",function(){return e.props.results.map(function(t,r){var n,o=e.findService(t)||{},i=Re()(e.props.layers,{name:null===(n=o.options)||void 0===n?void 0:n.typeName}),a=(0,qe.UA)(o),c=!(0,qe.NS)(i,o);return l().createElement(ze,{subTitle:o.subTitle,idField:o.idField,displayName:o.displayName,key:t.osm_id||t.id||"res_"+r,item:t,onItemClick:function(){return e.onItemClick(t,o)},tools:[{id:"open-gfi",keyProp:"open-gfi",visible:a,disabled:c,glyph:"info-sign",tooltipId:a&&c?"search.layerMustBeVisible":"search.showGFI",onClick:function(r){r.stopPropagation(),e.props.showGFI(t)}}]})})}),Xe(e,"findService",function(t){var r=e.props.searchOptions&&e.props.searchOptions.services;if(null!==t.__SERVICE__)if(r&&"string"==typeof t.__SERVICE__){for(var n=0;n<r.length;n++)if(r[n]&&r[n].id===t.__SERVICE__)return r[n];for(var o=0;o<r.length;o++)if(r[o]&&r[o].type===t.__SERVICE__)return r[o]}else if("object"===Ue(t.__SERVICE__))return t.__SERVICE__;return null}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=l().createElement(Ze.Ay.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,r=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&r){var n=r.width-this.props.sizeAdjustment.width,o=r.height-this.props.sizeAdjustment.height;t=Object.assign({},this.props.containerStyle,{maxWidth:n,maxHeight:o})}return this.props.results?0===this.props.results.length?l().createElement("div",{className:"search-result-list",style:Object.assign({padding:"10px",textAlign:"center"},t)},e):l().createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&Ke(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(l().Component);Xe(Qe,"propTypes",{results:a().array,layers:a().array,searchOptions:a().object,mapConfig:a().object,fitToMapSize:a().bool,containerStyle:a().object,sizeAdjustment:a().object,onItemClick:a().func,addMarker:a().func,afterItemClick:a().func,showGFI:a().func,notFoundMessage:a().oneOfType([a().object,a().string])}),Xe(Qe,"defaultProps",{layers:[],sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){},showGFI:function(){}});var Je=r(45388),et=r(791710),tt=r.n(et),rt=r(413763),nt=r.n(rt),ot=r(269843),it=r.n(ot),at=r(333031),ct=r.n(at),lt=r(668414),st=r.n(lt),ut=r(382378),ft=r.n(ut),pt=r(307679),dt=r(812366),mt=r(904059),yt=r(337291),vt=r(181817),bt=r(415120),ht=r(975699),gt=r(244925),St=r(520943),Ot=r(131127);function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function Et(e){return function(e){if(Array.isArray(e))return _t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _t(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_t(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach(function(t){Pt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Pt(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ct(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ct(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var It=function(e,t){return(0,bt.x2)(e,wt({},(0,ht.wj)(t)))},Tt=r(216686);function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function xt(e){return function(e){if(Array.isArray(e))return Rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach(function(t){Nt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Nt(e,t,r){return(t=function(e){var t=function(e){if("object"!=kt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==kt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ft=r(779893),Dt=r(711030);function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qt(n.key),n)}}function Gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Gt=function(){return!!e})()}function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}function zt(e,t){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zt(e,t)}function Zt(e,t,r){return(t=qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e){var t=function(e){if("object"!=Vt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vt(t)?t:t+""}var Ut=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=Lt(t),function(e,t){if(t&&("object"==Vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gt()?Reflect.construct(t,r||[],Lt(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zt(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return l().createElement(Dt.A,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button"},l().createElement(h.e6,{glyph:"search"}))}}])&&Bt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(l().Component);Zt(Ut,"propTypes",{pressed:a().bool,onToggle:a().func}),Zt(Ut,"defaultProps",{pressed:!1,onToggle:function(){}});const Kt=(0,s.connect)(function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}},{onToggle:d.KP.bind(null,"search",null)})(Ut);var Yt,Wt=r(97401),Ht=r(965774),Xt=r(32485),$t=r.n(Xt);function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach(function(t){ar(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tr(){return tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tr.apply(null,arguments)}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cr(n.key),n)}}function nr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nr=function(){return!!e})()}function or(e){return or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},or(e)}function ir(e,t){return ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ir(e,t)}function ar(e,t,r){return(t=cr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cr(e){var t=function(e){if("object"!=Qt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qt(t)?t:t+""}var lr=(0,u.Mz)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""},Ot.Bg],function(e,t,r,n,i){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:o()(e,"activeSearchTool","addressSearch"),format:o()(e,"format")||Ft.Ay.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:n||{},currentMapCRS:i}}),sr=(0,s.connect)(lr,{onSearch:v.yZ,onChangeCoord:v.OV,onChangeActiveSearchTool:v.$v,onClearCoordinatesSearch:f.v9,onClearBookmarkSearch:b.Hn,onChangeFormat:v.A_,onToggleControl:d.KP,onZoomToPoint:v.y4,onPurgeResults:v.Og,onSearchReset:v.Se,onSearchTextChange:v.CT,onCancelSelectedItem:v.pg,onZoomToExtent:m.jc,onLayerVisibilityLoad:p.ze})(function(e){var t,r,n=e.activeSearchTool,i=void 0===n?"addressSearch":n,a=e.removeIcon,s=void 0===a?"1-close":a,u=e.searchIcon,f=void 0===u?"search":u,p=e.isSearchClickable,d=void 0===p||p,m=e.splitTools,y=e.searchText,v=void 0===y?"":y,b=e.maxResults,g=void 0===b?15:b,O=e.searchOptions,E=e.loading,j=e.delay,I=e.blurResetDelay,T=e.typeAhead,k=e.coordinate,x=void 0===k?{}:k,R=e.selectedItems,A=void 0===R?[]:R,M=e.defaultZoomLevel,D=void 0===M?12:M,V=e.enabledSearchBookmarkConfig,B=void 0!==V&&V,G=e.error,z=e.format,Z=void 0===z?"decimal":z,q=e.placeholder,U=e.placeholderMsgId,K=void 0===U?"search.addressSearch":U,Y=e.showOptions,W=void 0===Y||Y,H=e.showAddressSearchOption,$=void 0===H||H,Q=e.showCoordinatesSearchOption,J=void 0===Q||Q,ee=e.showBookMarkSearchOption,te=void 0===ee||ee,re=e.onSearch,ne=e.onSearchReset,oe=e.onSearchTextChange,ie=e.onCancelSelectedItem,ce=e.onChangeCoord,se=void 0===ce?function(){}:ce,ue=e.onChangeActiveSearchTool,fe=void 0===ue?function(){}:ue,de=e.onClearCoordinatesSearch,ye=void 0===de?function(){}:de,ve=e.onChangeFormat,be=void 0===ve?function(){}:ve,ge=e.onToggleControl,Ce=void 0===ge?function(){}:ge,_e=e.onZoomToPoint,we=void 0===_e?function(){}:_e,Pe=e.onClearBookmarkSearch,Ie=void 0===Pe?function(){}:Pe,Te=e.onPurgeResults,xe=e.currentMapCRS,Re=void 0===xe?"EPSG:4326":xe,Ae=e.items,Me=void 0===Ae?[]:Ae,Ne=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Se),Fe=je((0,c.useState)(-1),2),De=Fe[0],Ve=Fe[1];(0,c.useEffect)(function(){C()(null==O?void 0:O.services,null==O?void 0:O.services)||Ve(-1)},[null==O?void 0:O.services]),(0,c.useEffect)(function(){!["mapCRSCoordinatesSearch","coordinatesSearch"].includes(i)&&(ye({owner:"search"}),w()(null==x?void 0:x.lon)&&w()(null==x?void 0:x.lat))&&["lat","lon","xCoord","yCoord","currentMapXYCRS"].forEach(function(e){return se(e,"")})},[i]),(0,c.useEffect)(function(){"EPSG:4326"===Re&&"mapCRSCoordinatesSearch"===i&&fe("coordinatesSearch")},[Re]);var Be,Ge=null!==(t=null==O||null===(r=O.services)||void 0===r?void 0:r.filter(function(e,t){return!(De>=0)||De===t}))&&void 0!==t?t:[],Le=function(e){var t=e.searchText,r=e.selectedItems,n=e.searchOptions,o=e.maxResults,i=e.onSearch,a=void 0===i?function(){}:i,c=e.onSearchReset,l=void 0===c?function(){}:c;return function(){var e=t,i=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(t,r){var n;return t+((null==r||null===(n=r.options)||void 0===n?void 0:n.maxFeatures)||e)},0)||e}(null==n?void 0:n.services,o);void 0!==e&&""!==e||r&&0!==r.length?void 0!==e&&""!==e&&a(e,n,i):l()}}({searchText:v,selectedItems:A,searchOptions:Ee(Ee({},O),{},{services:Ge}),maxResults:g,onSearch:re,onSearchReset:ne}),ze=function(){ne()},Ze=[];if($&&Ze.push(l().createElement(ke,{searchIcon:f,activeTool:i,selectedService:De,onServiceSelect:function(e){Ve(-1===e?void 0:e),ye({owner:"search"}),Ie("selected"),fe("addressSearch")},services:null==O?void 0:O.services})),J&&Ze.push(l().createElement(pe.coordinatesMenuItem,{activeTool:i,searchText:v,clearSearch:ze,onChangeActiveSearchTool:fe,onClearBookmarkSearch:Ie,currentMapCRS:Re,onChangeFormat:be})),te&&!S()(Me)){var qe,Ue=Ne.bookmarkConfig||{},Ke=Ue.allowUser,Ye=Ue.bookmarkSearchConfig,We=Me.find(function(e){return"SearchByBookmark"===e.name})||{};if(We.menuItem){var He=We.menuItem;Ze.push(l().createElement(He,null))}We.bookmarkConfig&&(Be=Ee(Ee({},We.bookmarkConfig(Ce,B,i)),!Ke&&{visible:!1})),Ke||0!==(null==Ye||null===(qe=Ye.bookmarks)||void 0===qe?void 0:qe.length)||"bookmarkSearch"!==i||fe("addressSearch")}var Xe,$e=function(){if(W){if("coordinatesSearch"===i)return pe.coordinateFormatChange(Z,be,W,i);if("bookmarkSearch"===i)return Be}return null};return l().createElement(F,null,l().createElement(h.gE,null,l().createElement("div",{className:"input-group",style:{display:"flex"}},A&&A.map(function(e,t){return l().createElement("span",{key:"selected-item"+t,className:"input-group-addon"},l().createElement("div",{className:"selectedItem-text"},e.text))}),l().createElement(L,{show:"addressSearch"===i,delay:j,typeAhead:T,blurResetDelay:I,placeholder:function(){var e;if(!q&&1===(null==Ge?void 0:Ge.length)&&(null==O||null===(e=O.services)||void 0===e?void 0:e.length)>1){var t=je(Ge,1)[0],r=t.name||t.type;return o()(t,"options.placeholder","Search by ".concat(r))}return q}(),placeholderMsgId:K,searchText:v,selectedItems:A,onSearch:Le,onSearchTextChange:oe,onCancelSelectedItem:ie,onPurgeResults:Te}),"coordinatesSearch"===i&&J&&l().createElement(me,{currentMapCRS:Re,format:Z,defaultZoomLevel:D,onClearCoordinatesSearch:ye}),"mapCRSCoordinatesSearch"===i&&J&&Re&&l().createElement(he,{currentMapCRS:Re,format:Z,defaultZoomLevel:D,onClearCoordinatesSearch:ye}),"bookmarkSearch"===i&&te&&l().createElement(le,{mapInitial:Ne.mapInitial}),l().createElement(X,{splitTools:!1,toolbarButtons:[].concat(Oe($e()?[Ee({},$e())]:[]),Oe(Me.filter(function(e){return"button"===e.target}).map(function(e){var t=e.component;return{visible:!!W,Element:t}})),[Ee({glyph:s,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,loading:!_()(E)&&E,visible:"addressSearch"===i&&(""!==v||A&&A.length>0),onClick:function(){"addressSearch"===i&&ze()}},["coordinatesSearch","mapCRSCoordinatesSearch"].includes(i)&&pe.removeIcon(i,x,ye,se)),Ee(Ee({glyph:f,className:"square-button-md no-border "+(d||"addressSearch"!==i?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,tooltipPosition:"bottom",visible:!("addressSearch"!==i||(""!==v||A&&A.length>0)&&m),onClick:function(){return d&&Le()}},["coordinatesSearch","mapCRSCoordinatesSearch"].includes(i)&&pe.searchIcon(i,x,we,D,Re)),"bookmarkSearch"===i&&ae.searchIcon(i,Ne)),{tooltip:(Xe=G,Xe?l().createElement(P.A,{msgId:Xe.msgId||"search.generic_error",msgParams:{message:Xe.message,serviceType:Xe.serviceType}}):null),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!G,onClick:ze},{visible:W,renderButton:l().createElement(N,{disabled:W,menuItems:Ze})}])}))))}),ur=(0,u.Mz)([Ot.mg,pt.Kv,function(e){return e.search||null}],function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}}),fr=(0,s.connect)(ur,{onItemClick:v.aD,addMarker:v.Yu,showGFI:v.oL})(Qe),pr=(0,s.connect)(function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}},{onUpdateResultsStyle:v.NP})((Yt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return ar(e=function(e,t,r){return t=or(t),function(e,t){if(t&&("object"==Qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nr()?Reflect.construct(t,r||[],or(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"getServiceOverrides",function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&o()(e.props.selectedItems[e.props.selectedItems.length-1],t)}),ar(e,"getSearchOptions",function(){var t=e.props,r=t.searchOptions,n=t.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?Object.assign({},r,{services:n.services}):Object.assign({},r,{services:r.services.concat(n.services)}):r}),ar(e,"getCurrentServices",function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?Object.assign({},r,{services:t}):r}),ar(e,"searchFitToTheScreen",function(){var t=e.props,r=t.offsets,n=r.right,o=r.left,i=t.mapSize.width;return(void 0===i?window.innerWidth:i)-n-o-60>=500}),ar(e,"getSearchAndToggleButton",function(){var t,r=l().createElement(sr,tr({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId"),defaultZoomLevel:(null===(t=e.props.coordinateSearchOptions)||void 0===t?void 0:t.maxZoomLevel)||12}));return e.searchFitToTheScreen()?r:l().createElement(l().Fragment,null,l().createElement(Kt,null),e.props.enabled?r:null)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ir(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(er(er({},qe.Ez),this.props.resultsStyle))}},{key:"render",value:function(){return l().createElement("span",{id:"search-bar-container",className:$t()({toggled:!this.searchFitToTheScreen(),"no-sidebar":!this.props.sidebarIsActive}),style:this.props.sidebarIsActive?this.props.style:null},this.getSearchAndToggleButton(),l().createElement(fr,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&rr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(l().Component),ar(Yt,"propTypes",{splitTools:a().bool,showOptions:a().bool,isSearchClickable:a().bool,fitResultsToMapSize:a().bool,searchOptions:a().object,resultsStyle:a().object,selectedItems:a().array,selectedServices:a().array,userServices:a().array,withToggle:a().oneOfType([a().bool,a().array]),enabled:a().bool,textSearchConfig:a().object,style:a().object,sidebarIsActive:a().bool}),ar(Yt,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0,style:{},sidebarIsActive:!1}),Yt));const dr={SearchPlugin:Object.assign((0,s.connect)((0,u.j8)({style:function(e){return(0,Wt.o7)(e,{right:!0})},offsets:function(e){return(0,Wt.o7)(e,{right:!0,left:!0})},mapSize:function(e){return(0,Ot.$o)({width:!0})(e)},sidebarIsActive:function(e){return(0,Ht.Sm)(e)}}),{})(pr),{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:function(e){return e.ofType(v.F_).debounceTime(250).switchMap(function(t){return Je.Observable.from((t.services||[{type:"nominatim",priority:5}]).map(function(e){var r=yt.n.Utils.getService(e.type);if(!r){var n=new Error("Service Missing");return n.msgId="search.service_missing",n.serviceType=e.type,Je.Observable.of(n).do(function(e){throw e})}return Je.Observable.defer(function(){return r(t.searchText,e.options).then(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(t){return wt(wt({},t),{},{__SERVICE__:e,__PRIORITY__:e.priority||0})})})}).retryWhen(function(e){return e.delay(200).scan(function(e,t){if(e>=2)throw t;return e+1},0)})})).mergeAll().scan(function(e,t){return ct()([].concat(Et(e),Et(t)),["__PRIORITY__"])}).map(function(e){return(0,v.Bw)(e.slice(0,t.maxResults||15),!1)}).startWith((0,v.ur)(!0)).takeUntil(e.ofType(v.WX,v.ju,v.P9)).concat([(0,v.ur)(!1)]).catch(function(e){var t=wt(wt({msgId:"search.generic_error"},e),{},{message:e.message,stack:e.stack});return Je.Observable.from([(0,v._z)(t),(0,v.ur)(!1)])})})},searchOnStartEpic:function(e,t){return e.ofType(v.PY).switchMap(function(e){var r=e.layer,n=e.cql_filter,o=e.queryParamZoomOption,i=void 0===o?{}:o,a=t.getState();if(0===Et((0,pt.Kv)(a)).filter(function(e){return(0,bt.Gq)(e)}).filter(function(e){return e.name===r}).length)return Je.Observable.of((0,v.FE)());var c=(0,pt.pl)(a,r);return c&&n?Je.Observable.defer(function(){return(0,vt.Tf)(c.url,{maxFeatures:1,typeName:r,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:n}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&wt(wt({},e.features[0]),{},{typeName:r})})}).switchMap(function(e){var r=e.type,o=e.geometry,a=e.typeName,c=e.bbox,l=nt()({type:r,geometry:o}).geometry.coordinates;if(l){var s,u={lng:l[0],lat:l[1]},f=(0,Ot.Bg)(t.getState()),p=(0,fe.reproject)(l,"EPSG:4326",f),d=p.x,m=p.y;return s=(0,ht.NA)(t.getState())?Je.Observable.of((0,gt.Kj)(st()(),{component:St.IDENTIFY_POPUP,maxWidth:600,position:{coordinates:[d,m]}})):Je.Observable.of((0,dt.cn)()),Je.Observable.of((0,dt.Ms)({latlng:u},a,[a],Pt({},a,{cql_filter:n}),null,!0,c||ft()(o),i)).merge(s)}return Je.Observable.empty()}).catch(function(){return Je.Observable.of((0,v.ig)())}):Je.Observable.empty()})},searchItemSelected:function(e){return e.ofType(v.P9).switchMap(function(e){var t=Je.Observable.of(e.item).concatMap(function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var r=(0,Ae.bD)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return Je.Observable.fromPromise(yt.n.Utils.getService(t.__SERVICE__.geomService.type)("",Object.assign({},t.__SERVICE__.geomService.options,{staticFilter:r})).then(function(e){return Object.assign({},t,{geometry:fe.default.mergeToPolyGeom(e)})}))}return Je.Observable.of(e.item)}).concatMap(function(e){var t=e.bbox||e.properties.bbox||tt()(e);return[(0,m.jc)([t[0],t[1],t[2],t[3]],"EPSG:4326",e.__SERVICE__&&e.__SERVICE__.options&&e.__SERVICE__.options.maxZoomLevel||21),(0,v.Yu)(e)]}),r=e.item,n=r&&r.__SERVICE__&&r.__SERVICE__.then,o=n?Je.Observable.of((0,v.hU)(n.map(function(e){return wt(wt({},e),{},{options:wt({item:r},e.options)})}),{text:(0,Ae.bD)(r.__SERVICE__.displayName||"")(r),placeholder:r.__SERVICE__.nestedPlaceholder&&(0,Ae.bD)(r.__SERVICE__.nestedPlaceholder||"")(r),placeholderMsgId:r.__SERVICE__.nestedPlaceholderMsgId&&(0,Ae.bD)(r.__SERVICE__.nestedPlaceholderMsgId||"")(r)},(0,Ae.bD)(r.__SERVICE__.searchTextTemplate||"")(r))):Je.Observable.empty(),i=r.__SERVICE__&&r.__SERVICE__.searchTextTemplate,a=i?Je.Observable.of((0,v.CT)((0,Ae.bD)(i)(r))):Je.Observable.empty();return Je.Observable.of((0,v.Og)()).concat(t,o,a)})},zoomAndAddPointEpic:function(e,t){return e.ofType(v.VL).switchMap(function(e){var r={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},n=t.getState();return Je.Observable.from([(0,f.E)("search","search","overlay",{features:[r],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:n.search&&n.search.style||qe.Ez}),(0,m.f0)(e.pos,e.zoom,e.crs)])})},textSearchShowGFIEpic:function(e,t){return e.ofType(v.k2).filter(function(e){var t,r=e.item,n=void 0===r?{}:r;return!(null!=n&&null!==(t=n.__SERVICE__)&&void 0!==t&&t.customGFI)}).switchMap(function(r){var n,o,i,a,c=r.item,l=t.getState(),s=null==c||null===(n=c.__SERVICE__)||void 0===n||null===(n=n.options)||void 0===n?void 0:n.typeName,u=s&&(0,pt.pl)(l,s),f=c.bbox||c.properties.bbox||tt()(c),p=nt()(c).geometry.coordinates,d={lng:p[0],lat:p[1]},y=c.id;return p&&(0,qe.UA)(null==c?void 0:c.__SERVICE__)&&(0,qe.NS)(u,null==c?void 0:c.__SERVICE__)?(o=Je.Observable).of.apply(o,Et(null!=c&&null!==(i=c.__SERVICE__)&&void 0!==i&&i.forceSearchLayerVisibility&&u?[(0,mt.ju)(u.id,{visibility:!0})]:[]).concat([(0,dt.Ms)({latlng:d},s,[s],Pt({},s,wt({info_format:It(u,l)},y?{featureid:y,CQL_FILTER:void 0}:{})),y,!0),(0,dt.cn)(),(0,v.Yu)(c)])).merge(f?e.ofType(dt.HN).take(1).mapTo((0,m.jc)([f[0],f[1],f[2],f[3]],"EPSG:4326",(null==c||null===(a=c.__SERVICE__)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.maxZoomLevel)||21)).takeUntil(e.ofType(dt.t7,dt.tW)):Je.Observable.empty()).let(function(e){return f&&(0,pt.al)(t.getState())?e.startWith((0,dt.Yq)(!1)).concat(Je.Observable.of((0,dt.Yq)(!0))):e}):Je.Observable.empty()})},delayedSearchEpic:function(e){return e.ofType(v.j0).switchMap(function(t){var r=t.layer,n=t.cql_filter,o=t.queryParamZoomOption,i=void 0===o?{}:o;return e.ofType(mt.Cl).filter(function(e){return e.layer.name===r}).take(1).switchMap(function(){return Je.Observable.of((0,v.oV)({layer:r,cql_filter:n,queryParamZoomOption:i}))})})},getFeatureInfoOfSelectedItem:function(e,t){return e.ofType(v.QI).switchMap(function(e){var r=e.markerPosition;if(r.__SERVICE__&&!it()(r.__SERVICE__.launchInfoPanel)&&r.__SERVICE__.options&&r.__SERVICE__.options.typeName){var n=nt()(r).geometry.coordinates,o={lng:n[0],lat:n[1]},i=r.__SERVICE__.options.typeName;if(n){var a=t.getState(),c=i&&(0,pt.pl)(a,i),l=null,s=[],u={},f=!1;return"single_layer"===r.__SERVICE__.launchInfoPanel&&(f=r.__SERVICE__.forceSearchLayerVisibility,s=[i],l=r.id,u=Pt({},r.__SERVICE__.options.typeName,wt({info_format:It(c,a)},l?{featureid:l,CQL_FILTER:void 0}:{}))),[].concat(Et(f&&c?[(0,mt.ju)(c.id,{visibility:!0})]:[]),Et(r.__SERVICE__.openFeatureInfoButtonEnabled?[]:[(0,dt.Ms)({latlng:o},i,s,u,l,!0)]),[(0,dt.cn)()])}}return Je.Observable.empty()}).delay(50)}},reducers:{search:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case v.P9:var n,o,i=(r.service||{}).type,a="nominatim"===i?null===(n=r.item.properties)||void 0===n?void 0:n.display_name:"wfs"===i?(0,Ae.bD)((null===(o=r.service)||void 0===o?void 0:o.displayName)||"")(r.item):t.searchText;return Mt(Mt({},t),{},{searchText:a||t.searchText||""});case v.Kw:return Object.assign({},t,{loading:r.loading});case v.o:return Object.assign({},t,{error:r.error});case v.G2:return Object.assign({},t,{searchText:r.searchText,error:null});case v.AO:var c=r.results;return!0===r.append&&t&&t.results&&(c=[].concat(xt(t.results),xt(r.results))),Object.assign({},t,{results:c,error:null});case v.WX:return Object.assign({},t,{results:null,error:null});case v.QI:var l=r.markerPosition.latlng?{latlng:r.markerPosition.latlng,lat:r.markerPosition.latlng.lat,lng:r.markerPosition.latlng.lng}:r.markerPosition;return Object.assign({},t,{markerPosition:l,markerLabel:r.markerLabel});case v.vo:return Object.assign({},t,{highlightedFeature:r.highlightedFeature});case v.ju:return{style:t.style||{}};case d.rY:return null;case v.wL:return Object.assign({},t,{selectedServices:r.services,searchText:r.searchText,selectedItems:(t.selectedItems||[]).concat(r.items)});case v.m:return t?Object.assign({},{selectedItems:t.selectedItems&&t.selectedItems.filter(function(e){return e!==r.item}),searchText:""===t.searchText&&r.item&&r.item.text?r.item.text.substring(0,r.item.text.length):t.searchText}):t;case v.js:return Object.assign({},t,{style:r.style});case v.Vi:return Mt(Mt({},t),{},{activeSearchTool:r.activeSearchTool});case v.Tl:return Mt(Mt({},t),{},{format:r.format});case v.LA:return Mt(Mt({},t),{},{coordinate:Mt(Mt({},t.coordinate),{},Nt({},r.coord,r.val))});case v.yI:return Object.assign({},t,{markerPosition:null!=t&&null!==(e=t.markerPosition)&&void 0!==e&&e.latlng?{}:null==t?void 0:t.markerPosition});default:return t}},mapInfo:Tt.A,searchconfig:y.A}}},847996:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(736220),o=r(415392),i=r(538704);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}const c=function(){var e,t,r,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1?arguments[1]:void 0;switch(l.type){case n.T1:return Object.assign({},c,(e={},t=l.property,r=l.value,(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e));case i.mO:var s=l.config.map.text_search_config||l.config.map.text_serch_config;return Object.assign({},c,{textSearchConfig:s});case o.rY:case n.A7:return Object.assign({},c,{service:void 0,page:l.page,init_service_values:void 0,editIdx:void 0});case n.cf:var u=(c.textSearchConfig&&c.textSearchConfig.services||[]).slice(),f=Object.assign({},l.service,{priority:parseInt(l.service.priority,10)});return-1!==l.idx?u[l.idx]=f:u.push(f),Object.assign({},c,{service:void 0,page:0,init_service_values:void 0,editIdx:void 0,textSearchConfig:{services:u,override:c.textSearchConfig&&c.textSearchConfig.override||!1}});default:return c}}},965774:(e,t,r)=>{r.d(t,{Sm:()=>c,gL:()=>a,te:()=>l});var n=r(858156),o=r.n(n),i=r(589769),a=function(e){return o()(e,"sidebarmenu.lastActiveItem",!1)},c=function(e){return o()(e,"controls.sidebarMenu.enabled",!1)},l=function(e){return(0,i.aH)(e)}}}]);