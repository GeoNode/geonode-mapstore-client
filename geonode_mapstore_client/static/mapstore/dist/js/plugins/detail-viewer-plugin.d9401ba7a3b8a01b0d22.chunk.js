(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[95121],{217549:(e,r,n)=>{"use strict";n.d(r,{Z:()=>c});var t=n(124852),o=n.n(t),i=n(45697),a=n.n(i),s=["href","readOnly","children"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},u.apply(null,arguments)}function l(e){var r=e.href,n=e.readOnly,t=e.children,i=function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s);return n?t:o().createElement("a",u({href:r},i),t)}l.propTypes={href:a().string,readOnly:a().bool.isRequired,children:a().any},l.defaultProps={href:"",readOnly:!1};const c=l},834065:(e,r,n)=>{"use strict";n.d(r,{Z:()=>f});var t=n(124852),o=n.n(t),i=n(45697),a=n.n(i),s=n(877593),u=n(217549),l=["resource","readOnly","formatHref","pathname"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},c.apply(null,arguments)}function d(e){var r,n,t,i=e.resource,a=e.readOnly,d=e.formatHref,f=e.pathname,m=function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return m.detailsPanel?o().createElement(u.Z,{readOnly:a,href:d({pathname:f,query:{"filter{owner.username.in}":null===(t=i.owner)||void 0===t?void 0:t.username}})},i.owner&&(0,s.vW)(i.owner)):o().createElement("p",c({className:"card-text gn-card-user"},m),(null===(r=i.owner)||void 0===r?void 0:r.avatar)&&o().createElement("img",{src:i.owner.avatar,alt:(0,s.vW)(i.owner),className:"gn-card-author-image"}),o().createElement(u.Z,{readOnly:a,href:d({pathname:f,query:{"filter{owner.username.in}":null===(n=i.owner)||void 0===n?void 0:n.username}})},i.owner&&(0,s.vW)(i.owner)))}d.propTypes={resource:a().object,readOnly:a().bool,formatHref:a().func,props:a().any},d.defaultProps={resource:{},readOnly:!1,formatHref:function(){return"#"}};const f=d},71268:(e,r,n)=>{"use strict";n.d(r,{Z:()=>b});var t=n(124852),o=n.n(t),i=n(805346),a=n(45697),s=n.n(a),u=n(507412),l=n(815135),c=n(441609),d=n.n(c),f=n(535721),m=n(303744),p=(0,l.Z)(m.Z),v=function(e){var r,n,t,a=e.resource,s=void 0===a?{}:a,l=(0,f.fu)(s),c=l.isApproved,m=l.isPublished,v=l.isProcessing,b=l.isCopying,g=l.isDeleting,y=l.isDeleted;return d()(s)?null:o().createElement("p",{className:"gn-resource-status-text"},!v&&(!c||!m)&&o().createElement(p,{variant:"default",className:"gn-resource-status gn-status-button",tooltip:(r={isApproved:c,isPublished:m},n=r.isApproved,t=r.isPublished,!n&&t?o().createElement(i.Z,{msgId:"gnhome.pendingApproval"}):n||t?t||n?"":o().createElement(i.Z,{msgId:"gnhome.unpublished"}):o().createElement(i.Z,{msgId:"gnhome.unApprovedunPublished"})),style:{marginRight:(g||y||b)&&"0.4rem"},tooltipPosition:"top"},o().createElement(u.Z,{name:"info-circle",className:"gn-resource-status-pending"})),g&&o().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},o().createElement(i.Z,{msgId:"gnviewer.deleting"})),y&&o().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},o().createElement(i.Z,{msgId:"gnviewer.deleted"})),b&&o().createElement("span",{className:"gn-resource-status gn-resource-status-primary"},o().createElement(i.Z,{msgId:"gnviewer.cloning"})))};v.propTypes={isApproved:s().bool,isPublished:s().bool},v.defaultProps={isApproved:!0,isPublished:!0};const b=v},254746:(e,r,n)=>{"use strict";n.d(r,{Z:()=>d});var t=n(124852),o=n.n(t),i=n(414293),a=n.n(i),s=n(815135),u=n(17594);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},l.apply(null,arguments)}var c=(0,s.Z)((function(e){return o().createElement("div",l({},e,{className:"gn-unadvertised"}),o().createElement(u.Z,{name:"eye-slash"}))}));const d=function(e){var r=e.resource;return a()(r.advertised)||r.advertised?null:o().createElement(c,{tooltipId:"gnviewer.unadvertised",className:"gn-unadvertised"})}},94228:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>V});var t=n(124852),o=n.n(t),i=n(322843),a=n(171703),s=n(22222),u=n(737275),l=n(398288),c=n(274621),d=n(643892),f=n(452992),m=n(17594),p=n(925108),v=n(782904),b=n(572036),g=n(482100),y=n(303744);var h=n(100824),O=n(625635),w=n(877593),P=n(805346),E=n(675110),j=n(800827),S=n(770058),Z=n(807461),C=n(678833),k=n(535721),T=["hide"];function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function x(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function N(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=I(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var D=(0,a.connect)((0,s.P1)([function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data)||null},function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.loading)||!1},function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.favorite)||!1},function(e){var r;return(null==e||null===(r=e.gnsave)||void 0===r?void 0:r.savingThumbnailMap)||!1},E.l2,g.km,g.Bs,j.Od,function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.showMapThumbnail)||!1},f.WB],(function(e,r,n,t,o,i,a,s,u,l){return{layers:o,resource:e,loading:r,savingThumbnailMap:t,favorite:n,isThumbnailChanged:i,resourceThumbnailUpdating:a,initialBbox:null==s?void 0:s.bbox,enableMapViewer:u,downloading:l,resourceId:e.pk}})),{closePanel:v.Xg.bind(null,"rightOverlay","enabled",!1),onFavorite:d.gw,onMapThumbnail:d.CB,onResourceThumbnail:d.e5,onClose:d.qs,onSetExtent:d.rg})(l.Z),R=(0,a.connect)((0,s.P1)([g.V$,g.fg,g.L4],(function(e,r,n){return{hide:e||!r,resourceType:n}})),{onClick:v.Xg.bind(null,"rightOverlay","enabled","DetailViewer")})((function(e){var r=e.onClick,n=e.hide,t=e.variant,i=e.size,a=e.showMessage,s=e.resourceType,u=((0,k.NN)()[s]||{}).icon,l=void 0===u?"info-circle":u;return n?null:o().createElement(y.Z,{variant:t,size:i,onClick:function(){r()}},a?o().createElement(P.Z,{msgId:"gnviewer.viewInfo"}):o().createElement(m.Z,{name:l}))}));function A(e,r){var n=e.location,i=e.enabled,a=e.onEditResource,s=e.onEditAbstractResource,u=e.onEditThumbnail,l=e.canEdit,c=e.user,d=e.onClose,f=e.monitoredState,m=e.queryPathname,p=void 0===m?"/":m,v=e.tabs,b=void 0===v?[]:v,g=e.items,y=e.resourceId,O=(0,S._y)(f,{tabs:b}),P=function(e){var r=e.disabled,n=e.onClickOut,o=(0,t.useRef)();return(0,t.useEffect)((function(){function e(e){var t;!r&&(null==o||null===(t=o.current)||void 0===t?void 0:t.contains)&&!o.current.contains(e.target)&&n()}return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[r,o,n]),o}({disabled:!i,onClickOut:function(){d()}}),E=r.loadedPlugins,j=(0,C.Z)({items:g,loadedPlugins:E},[y]).filter((function(e){return"toolbar"===e.target}));return o().createElement(h.Z,{enabled:i,ref:P,className:"gn-overlay-wrapper"},o().createElement(D,{editTitle:function(e){a(e)},editAbstract:function(e){s(e)},editThumbnail:function(e){u(e,!0)},activeEditMode:i&&l,enableFavorite:!!c,formatHref:function(e){return(0,w.nz)(function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?x(Object(n),!0).forEach((function(r){N(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({location:n},e))},tabs:O.tabs,pathname:p,toolbarItems:j}))}var L=(0,a.connect)((0,s.P1)([function(e){var r,n;return"DetailViewer"===(null==e||null===(r=e.controls)||void 0===r||null===(n=r.rightOverlay)||void 0===n?void 0:n.enabled)},g.il,g.V$,g.fg,c.np,function(e){return(0,i.bh)(e,(0,u.u8)("monitorState"))},function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data)||null}],(function(e,r,n,t,o,i,a){return{enabled:e,canEdit:r,hide:n||!t,user:o,monitoredState:i,resourceId:null==a?void 0:a.pk}})),{onEditResource:d.Br,onEditAbstractResource:d.bI,onEditThumbnail:d.U5,onClose:v.Xg.bind(null,"rightOverlay","enabled",!1)})((0,O.EN)((function(e){var r=e.hide,n=function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,T);return r?null:o().createElement(A,n)})));const V=(0,i.rx)("DetailViewer",{component:L,containers:{ActionNavbar:{name:"DetailViewerButton",Component:R}},epics:Z.Z,reducers:{gnresource:b.Z,controls:p.Z}})},572036:(e,r,n)=>{"use strict";n.d(r,{Z:()=>w});var t=n(618446),o=n.n(t),i=n(441609),a=n.n(i),s=n(414293),u=n.n(s),l=n(643892),c=n(535721),d=["data"],f=["features"],m=["features"],p=["features"];function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function g(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?g(Object(n),!0).forEach((function(r){h(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function h(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=v(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var O={selectedLayerPermissions:[],data:{},permissions:[]};const w=function(){var e,r,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case l.$X:return O;case l.ql:return y(y({},t),{},{configError:void 0,loadingResourceConfig:i.loading});case l.nS:return y(y({},t),{},{loading:!1,configError:i.message});case l.W:return y(y({},t),{},{loading:!0});case l.Zf:var s,v,g=i.data||{},h=(g.data,y({},b(g,d))),w=null===(s=t.data)||void 0===s?void 0:s.linkedResources;return a()(w)||h.pk!==(null===(v=t.data)||void 0===v?void 0:v.pk)||(h.linkedResources=w),y(y({},t),{},{error:null,initialResource:y({},i.data),data:h,loading:!1,isNew:!1});case l.Eu:return y(y({},t),{},{initialResource:null,data:null,error:i.error,loading:!1});case l.Vy:return y(y({},t),{},{data:y(y({},t.data),i.properties)});case l.YB:return y(y({},t),{},{type:i.resourceType});case l.xm:return y(y({},O),{},{isNew:!0});case l._f:return y(y({},t),{},{id:i.id});case l.ek:return y(y({},t),{},{permissions:i.permissions});case l.cd:return y(y({},t),{},{data:y(y({},null==t?void 0:t.data),{},{title:null==i?void 0:i.title,name:null==i?void 0:i.title})});case l.pt:return y(y({},t),{},{data:y(y({},null==t?void 0:t.data),{},{abstract:null==i?void 0:i.abstract})});case l.ww:return y(y({},t),{},{data:y(y({},null==t?void 0:t.data),{},{thumbnail_url:null==i?void 0:i.thumbnailUrl,thumbnailChanged:null==i?void 0:i.thumbnailChanged})});case l._Z:return y(y({},t),{},{data:y(y({},null==t?void 0:t.data),{},{updatingThumbnail:!0})});case l.dh:return y(y({},t),{},{showMapThumbnail:i.enabled});case l.p2:return y(y({},t),{},{selectedLayerPermissions:i.permissions});case l.ih:return y(y({},t),{},{initialCompactPermissions:i.compactPermissions,compactPermissions:i.compactPermissions,isCompactPermissionsChanged:!1,geoLimits:[]});case l.J5:return y(y({},t),{},{compactPermissions:i.compactPermissions,isCompactPermissionsChanged:!o()((0,c.go)(t.initialCompactPermissions),(0,c.go)(i.compactPermissions)),geoLimits:(0,c.vB)(i.compactPermissions)});case l.uA:if(t.compactPermissions){var P=t.compactPermissions,E=P.users,j=P.organizations,S=P.groups;return y(y({},t),{},{compactPermissions:{users:E.map((function(e){return e.features,b(e,f)})),organizations:j.map((function(e){return e.features,b(e,m)})),groups:S.map((function(e){return e.features,b(e,p)}))},geoLimits:[]})}return t;case l.Y0:return y(y({},t),{},{data:y(y({},t.data),{},{extent:y(y({},null===(e=t.data)||void 0===e?void 0:e.extent),{},{coords:i.coords})})});case l.sA:return y(y({},t),{},{params:i.params});case l.ip:return y(y({},t),{},{viewerLinkedResource:i.resource});case l.F_:return y(y({},t),{},{defaultViewerPlugins:i.plugins});case l.pG:return y(y({},t),{},{selectedLayerIsDataset:!u()(null===(r=i.layer)||void 0===r||null===(n=r.extendedParams)||void 0===n?void 0:n.pk)});default:return t}}}}]);