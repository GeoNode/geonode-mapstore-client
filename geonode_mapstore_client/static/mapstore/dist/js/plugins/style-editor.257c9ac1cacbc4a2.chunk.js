(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[92919],{89437:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>H});var n=r(45388),a=r.n(n),o=r(858156),i=r.n(o),l=r(400912),s=r.n(l),u=r(956449),c=r.n(u),f=r(730872),d=r.n(f),y=r(950014),b=r.n(y),p=r(499084),v=r.n(p),m=r(883832),g=r(904059),S=r(593429),h=r(653077),O=r(434164),w=r(112585),E=r(142974),x=r(972192),A=r(403467),T=r(941250),D=r(348081),N=r(307679),j=r(714905),P=r(267919),U=r(79738),I=r(102685);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}var M=["name","workspace"];function C(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){R(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function R(e,t,r){return(t=function(e){var t=function(e){if("object"!=k(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],s=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return $(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t=e.status,r=e.styleName,n=e.baseUrl;return"edit"===t?a().Observable.defer(function(){return A.Ay.getStyleCodeByName({baseUrl:n,styleName:r}).then(function(e){return(0,j.z4)(e).then(function(t){return[e,t]}).catch(function(){return[e,!1]})})}).switchMap(function(e){var t,r,n=V(e,2),o=n[0],i=n[1];return a().Observable.of((0,x.EB)({languageVersion:o.languageVersion,code:o.code,templateId:"",format:o.format,init:!0}),(0,x.SI)(i?{editorType:"textarea",styleJSON:null}:{editorType:(null==o||null===(t=o.metadata)||void 0===t?void 0:t.msEditorType)||"textarea",styleJSON:null==o||null===(r=o.metadata)||void 0===r?void 0:r.msStyleJSON}))}).catch(function(e){return a().Observable.of((0,x.QQ)("edit",e))}):a().Observable.empty()},G=function(e){var t=e.styleName,r=e.baseUrl,n=e.onSuccess$,o=e.onError$;return a().Observable.defer(function(){return A.Ay.deleteStyle({baseUrl:r,styleName:t})}).switchMap(function(){return n||a().Observable.empty()}).catch(function(){return o||a().Observable.empty()})},F=function(e){var t=e.baseUrl,r=e.update,n=e.code,o=e.format,i=e.styleName,l=e.status,s=e.languageVersion,u=e.options,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a().Observable.defer(function(){return A.Ay[r?"updateStyle":"createStyle"]({baseUrl:t,code:n,format:o,styleName:i,languageVersion:s,options:u})}).switchMap(function(){var e;return c()(f)&&(e=a().Observable).of.apply(e,[(0,x.xe)()].concat(C(f)))||f}).catch(function(e){var t;return(t=a().Observable).of.apply(t,[(0,x.QQ)(l,e),(0,x.xe)()].concat(C(d)))}).startWith((0,x.Sk)(l))};function W(e,t){return!t&&e.availableStyles?a().Observable.of((0,g.b6)({availableStyles:e.availableStyles}),(0,x.xe)()):(0,O.aF)(e).switchMap(function(t){var r=(0,E.e9)(t);return r.availableStyles?a().Observable.of((0,g.b6)({availableStyles:r.availableStyles}),(0,g.OK)(e.id,"layer",L(L({},r),{},{capabilitiesLoading:null})),(0,x.xe)()):a().Observable.of((0,x.QQ)("availableStyles",{status:401}),(0,x.xe)())}).catch(function(e){var t=-1!==e.message.indexOf("could not be unmarshalled")?"parsingCapabilities":"global";return a().Observable.of((0,x.QQ)(t,e),(0,x.xe)())}).startWith((0,x.Sk)("global"))}function Z(e){return r.e(83503).then(r.t.bind(r,883503,23)).then(function(t){return(0,t.default)(e)})}const H={toggleStyleEditorEpic:function(e,t){return e.ofType(x.PD).filter(function(){return!(0,D.tg)(t.getState())}).switchMap(function(e){var r=t.getState(),n=(0,N.jY)(r),o=!!i()(n,"options.availableStyles");if(!e.enabled)return function(e){var t=(0,D.sD)(e),r=(0,D.gr)(e).baseUrl,n=void 0===r?"":r;return a().Observable.of((0,x.A9)(),(0,S.v9)({owner:j.gt})).merge(t?G({styleName:t,baseUrl:n}):a().Observable.empty())}(r);if((0,D.p$)(r)&&o)return a().Observable.empty();var l=e.layer||(0,N.ZT)(r);if(!l||l&&!l.url)return a().Observable.empty();var s=(0,w.jK)(l);if(!s)return W(l);var u=(0,U.t)(l.url).split(s),c="".concat(u[0]).concat(s),f=(0,D.gr)(r);return a().Observable.concat(a().Observable.of((0,x.Sk)("global"),(0,x.A9)()),a().Observable.defer(function(){return(0,P.YH)({baseUrl:c,styleService:f})}).switchMap(function(e){return a().Observable.concat(a().Observable.of((0,x.bM)(e)),a().Observable.defer(function(){return T.A.getLayer(c+"rest/",l.name)}).switchMap(function(e){var t,r,n=v()(null!==(t=null==e||null===(r=e.styles)||void 0===r?void 0:r.style)&&void 0!==t?t:[]),o=b()([e.defaultStyle].concat(C(n)),"name");return 0===o.length?a().Observable.of((0,x.QQ)("availableStyles",{status:401}),(0,x.xe)()):a().Observable.defer(function(){return Promise.all([A.Ay.getStylesInfo({baseUrl:c,styles:o}),(0,O.aF)(l).toPromise().then(function(e){return e}).catch(function(){return null})])}).switchMap(function(e){var t=V(e,2),r=t[0],n=t[1],o=n&&(0,E.e9)(n),i=((null==o?void 0:o.availableStyles)||[]).map(function(e){return L(L({},e),(0,j.ke)(e.name))}).filter(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name}),s=i.length>0?r.map(function(e){var t=(0,j.ke)(e.name),r=i.find(function(e){return e.name===t.name})||{},n=(r.name,r.workspace,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(r,M));return n?L(L({},n),e):e}):r;return a().Observable.of((0,S.E)(l.id,j.gt,"override",{}),(0,g.b6)({availableStyles:s}),(0,g.OK)(l.id,"layer",{availableStyles:s}),(0,x.xe)())})}).catch(function(){return W(l,!0)}))}))})},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(x.t5).switchMap(function(r){var n=t.getState(),o=(0,D.Nh)(n);if(!r.status)return a().Observable.of((0,g.OK)(o.id,"layers",{thematic:{}}));var i=o&&o.params||{},l=o&&!o.describeFeatureType&&(0,h.V)(o.url,o,{query:i}),s=(0,D.mA)(n)||o.availableStyles&&o.availableStyles[0]&&o.availableStyles[0].name,u=(0,D.gr)(n).baseUrl,c=void 0===u?"":u;return l&&function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=a().Observable).of.apply(r,[(0,x.Sk)("global")].concat(C(o))).merge(e.ofType(g.rN).filter(function(){var e=(0,N.ZT)(t.getState());return n(e)}).switchMap(function(){var e=(0,N.ZT)(t.getState());return i(e)}).catch(function(e){return a().Observable.of((0,x.QQ)("global",e),(0,x.xe)())}).takeUntil(e.ofType(x.i7)))}(e,t,function(e){return e&&e.describeLayer},[l],function(e){return a().Observable.concat(_({status:r.status,styleName:s,baseUrl:c}),a().Observable.of((0,x.AT)(!(e&&e.describeLayer&&401===e.describeLayer.error)),(0,x.xe)()))})||_({status:r.status,styleName:s,baseUrl:c})})},updateTemporaryStyleEpic:function(e,t){return e.ofType(x._D,x.h0).switchMap(function(e){var r=t.getState(),n=(0,D.sD)(r),a=(0,D.Nh)(r),o=(0,j.ke)(a.name).workspace,i=e.format&&e.format!==(0,D.WV)(r),l=n||"".concat(o?"".concat(o,":"):"").concat((0,j.VH)()),s=e.format||(0,D.WV)(r),u=(0,D.Pz)(r),c=(0,D.gr)(r).baseUrl,f=void 0===c?"":c,d=(0,D.$o)(r),y="sld"===s&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},b=d.version!==y.version?{params:{raw:!0}}:{},p=y,v=function(t){return F({update:!0,code:e.code,format:s,styleName:t,status:u,baseUrl:f,languageVersion:p,options:b},[(0,S.y$)(j.gt,[{style:t,_v_:Date.now(),singleTile:!0}]),(0,x.kt)({temporaryId:t,templateId:e.templateId||"",code:e.code,format:s,init:e.init,languageVersion:p})],"edit"===u?[]:[(0,m.z3)({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},g=("css"===s?"* { stroke: #888888; }":"sld"===s&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",h=function(e){return F({code:g,format:s,styleName:e,status:u,baseUrl:f},v(e),[(0,m.z3)({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),(0,x.kt)({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return i&&n&&G({styleName:n,baseUrl:f,onSuccess$:h("".concat(o?"".concat(o,":"):"").concat((0,j.VH)())),onError$:v(l)})||n&&v(l)||h(l)})},createStyleEpic:function(e,t){return e.ofType(x.LA).switchMap(function(e){var r=t.getState(),n=(0,D.Ux)(r),o=(0,D.Nh)(r),i=(0,j.ke)(o.name).workspace,l="".concat(i?"".concat(i,":"):"").concat((0,j.Ob)(e.settings)),u=(0,D.WV)(r),c=e.settings||{},f=c.title,y=void 0===f?"":f,b=c._abstract,p=void 0===b?"":b,v=(0,D.gr)(r).baseUrl,h=void 0===v?"":v,O=(0,I.sO)(o,"style",l),w=L({title:y,description:p},{msStyleJSON:null,msEditorType:"visual"}),E=d()(n)({styleTitle:y,styleAbstract:p});return a().Observable.defer(function(){return Z(E).then(function(e){return A.Ay.createStyle({baseUrl:h,code:E,format:u,styleName:l,metadata:L(L({},w),{},{msMD5Hash:e})})})}).switchMap(function(){return a().Observable.of((0,S.y$)(j.gt,[{}]),(0,g.b6)(L(L({},O&&{layerFilter:O}),{},{style:l||""}),!0),(0,x.yB)(""),(0,x.xe)()).merge(function(e){var t=e.baseUrl,r=e.layer,n=e.styleName,o=e.format,i=e.title,l=e._abstract,u=e.metadata;return a().Observable.defer(function(){return T.A.updateAvailableStyles({baseUrl:t,layerName:r.name,styles:[{name:n}]})}).switchMap(function(){var e=L({filename:"".concat(n,".").concat(o),format:o,name:n,title:i,_abstract:l},u&&{metadata:u}),t=s()(r.availableStyles),c=r.availableStyles&&[t,e].concat(C(r.availableStyles.filter(function(e,t){return t>0})))||[e];return a().Observable.of((0,g.b6)({availableStyles:c},!0),(0,x.xe)())}).catch(function(){return a().Observable.of((0,x.xe)())}).startWith((0,x.Sk)("global"))}({layer:o,styleName:l,format:u,title:y,_abstract:p,baseUrl:h,metadata:w}))}).catch(function(e){return a().Observable.of((0,x.QQ)("",e),(0,x.xe)(),(0,m.z3)({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))}).startWith((0,x.Sk)(""))})},updateStyleCodeEpic:function(e,t){return e.ofType(x.I4).switchMap(function(){var e=t.getState(),r=(0,D.WV)(e),n=(0,D.$o)(e),o=(0,D.Ux)(e),i=(0,D.mA)(e),l=(0,D.sD)(e),s=(0,D.Nh)(e),u=(0,D.gr)(e).baseUrl,c=void 0===u?"":u,f=(0,D.w5)(e)||{},d={msStyleJSON:f.styleJSON||null,msEditorType:f.editorType},y=(s.availableStyles||[]).map(function(e){return e.name===i?L(L({},e),{},{metadata:L(L({},e.metadata),d)}):e});return a().Observable.defer(function(){return Z(o).then(function(e){return A.Ay.updateStyle({baseUrl:c,code:o,format:r,styleName:i,languageVersion:n,options:{params:{raw:!0}},metadata:L(L({},d),{},{msMD5Hash:e})})})}).switchMap(function(){return a().Observable.of((0,x.xe)(),(0,g.OK)(s.id,"layer",{_v_:Date.now(),availableStyles:y,styleVersion:"".concat(i,"-").concat(Date.now())}),(0,g.b6)({availableStyles:y}),(0,x.kt)({temporaryId:l,templateId:"",code:o,format:r,init:!0,languageVersion:n}),(0,m.kX)({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))}).catch(function(e){return a().Observable.of((0,x.QQ)("global",e),(0,x.xe)(),(0,m.z3)({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))}).startWith((0,x.Sk)("global"))})},deleteStyleEpic:function(e,t){return e.ofType(x.Y1).filter(function(e){return!!e.styleName}).switchMap(function(e){var r=e.styleName,n=t.getState(),o=(0,D.Nh)(n),i=(0,D.gr)(n).baseUrl,l=void 0===i?"":i;return a().Observable.defer(function(){return T.A.removeStyles({baseUrl:l,layerName:o.name,styles:[{name:r}]})}).switchMap(function(){var e=o.availableStyles&&o.availableStyles.filter(function(e){return e.name!==r})||[];return a().Observable.concat(a().Observable.of((0,g.b6)({style:"",availableStyles:e},!0),(0,x.xe)()),G({styleName:r,baseUrl:l,onSuccess$:a().Observable.of((0,m.kX)({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:a().Observable.of((0,m.z3)({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))}).catch(function(){return a().Observable.of((0,x.xe)())}).startWith(function(){return a().Observable.of((0,x.Sk)("global"))})})},setDefaultStyleEpic:function(e,t){return e.ofType(x.zA).switchMap(function(){var e=t.getState(),r=(0,D.gr)(e).baseUrl,n=void 0===r?"":r,o=(0,D.Nh)(e),i=(0,D.mA)(e);return a().Observable.defer(function(){return T.A.updateDefaultStyle({baseUrl:n,layerName:o.name,styleName:i})}).switchMap(function(){var e=o.availableStyles.filter(function(e){var t=e.name;return i===t}),t=o.availableStyles.filter(function(e){var t=e.name;return i!==t}),r=[].concat(C(e),C(t));return a().Observable.of((0,g.b6)({availableStyles:r},!0),(0,m.kX)({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),(0,x.xe)())}).startWith((0,x.Sk)("global")).catch(function(){return a().Observable.of((0,m.z3)({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),(0,x.xe)())})})}}},750137:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var n=r(273517),a=r.n(n),o=r(605556),i=r.n(o),l=r(811668),s=r(916589),u=r(801081),c=r(904059),f=r(972192),d=r(595535),y=r(154150),b=r(563864),p=r(764997),v=r(275705),m=r(348081),g=r(234164);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){w(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t,r){return(t=function(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e){var t=e.header,r=e.isEditing,o=e.showToolbar,i=e.onInit,l=e.styleService,s=e.editingAllowedRoles,u=e.editingAllowedGroups,c=e.enableSetDefaultStyle,f=e.enableEditDefaultStyle,d=e.canEdit,b=e.editorConfig;return(0,n.useEffect)(function(){i(l,{editingAllowedRoles:s,editingAllowedGroups:u,enableEditDefaultStyle:f})},[]),a().createElement(y.A,{className:"ms-style-editor-container",header:o?a().createElement("div",{className:"ms-style-editor-container-header"},t,a().createElement("div",{className:"text-center"},a().createElement(g.PH,{enableSetDefaultStyle:c}))):null,footer:a().createElement("div",{style:{height:25}})},r?a().createElement(g.ah,{config:b}):a().createElement(g.h7,{showDefaultStyleIcon:d&&c}))};E.propTypes={header:i().node,isEditing:i().bool,showToolbar:i().bool,onInit:i().func,styleService:i().object,editingAllowedRoles:i().array,editingAllowedGroups:i().array,enableSetDefaultStyle:i().bool,enableEditDefaultStyle:i().bool,canEdit:i().bool,editorConfig:i().object,onSetPermission:i().func},E.defaultProps={layer:{},onInit:function(){},editingAllowedRoles:["ADMIN"],editingAllowedGroups:[],editorConfig:{},enableEditDefaultStyle:!0};var x=(0,s.compose)(s.toClass,(0,s.branch)(function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).active},function(){return function(){return null}}),(0,l.connect)((0,u.Mz)([m.Pz,m.tg,m.zs,m.$O,m.gr],function(e,t,r,n,a){return{isEditing:"edit"===e,loading:t,error:r,canEdit:n,styleService:a}}),{onInit:f.bM,onUpdateParams:c.b6},function(e,t,r){var n,a,o,i=(null===(n=r.styleService)||void 0===n?void 0:n.baseUrl)===(null===(a=e.styleService)||void 0===a?void 0:a.baseUrl)&&(null===(o=e.styleService)||void 0===o?void 0:o.isStatic),l=r.styleService&&!i?O(O({},r.styleService),{},{isStatic:!0}):O({},e.styleService);return O(O(O(O({},r),e),t),{},{styleService:l})}),(0,b.A)(function(e){var t=e.error;return!!(null!=t&&t.availableStyles||null!=t&&t.global||null!=t&&t.parsingCapabilities)},function(e){var t=e.error;return{glyph:"exclamation-mark",title:a().createElement(d.A,{msgId:"styleeditor.errorTitle"}),description:a().createElement(d.A,{msgId:((null==t?void 0:t.availableStyles)?"styleeditor.missingAvailableStylesMessage":(null==t?void 0:t.parsingCapabilities)&&"styleeditor.parsingCapabilitiesError")||(null==t?void 0:t.global)&&"styleeditor.globalError"}),style:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},mainViewStyle:{margin:"auto",width:300}}}),(0,p.A)(function(e){return"global"===e.loading},{size:150,style:{margin:"auto"}},function(e){return a().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},a().createElement(v.A,e))}),(0,s.compose)((0,l.connect)(function(){return{}},{toggleStyleEditor:f.hD}),(0,s.lifecycle)({componentDidMount:function(){this.props.toggleStyleEditor(null,!0)}})))(E);const A={StyleEditorPlugin:Object.assign(x,{TOC:{priority:1,container:"TOCItemSettings"},TOCItemsSettings:{name:"StyleEditor",target:"style",priority:1,ToolbarComponent:g.PH}}),reducers:{styleeditor:r(620864).A},epics:r(89437).Ay}},620864:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(972192),a=r(185015),o=r.n(a);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LH:var r,a,i;return s(s({},e),{},{service:t.service,editingAllowedRoles:(null==t||null===(r=t.config)||void 0===r?void 0:r.editingAllowedRoles)||e.editingAllowedRoles,editingAllowedGroups:(null==t||null===(a=t.config)||void 0===a?void 0:a.editingAllowedGroups)||e.editingAllowedGroups,enableEditDefaultStyle:(null==t||null===(i=t.config)||void 0===i?void 0:i.enableEditDefaultStyle)||e.enableEditDefaultStyle});case n.Gf:return s(s({},e),{},{canEdit:t.canEdit});case n.GF:return s(s({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case n.t5:return""===t.status?s(s({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):s(s({},e),{},{status:t.status});case n.u1:return{service:e.service&&s({},e.service)||{},canEdit:e.canEdit,loading:e.loading};case n.YE:return s(s({},e),{},{addStyle:t.add});case n.Z_:return s(s({},e),{},{loading:!t.status||t.status});case n.i7:return s(s({},e),{},{loading:!1,enabled:!0});case n.Lu:var l,c,f,d=(null==t||null===(l=t.error)||void 0===l?void 0:l.statusText)||(null==t||null===(c=t.error)||void 0===c?void 0:c.message)||"",y=o()(null==t||null===(f=t.error)||void 0===f?void 0:f.messageId)&&{messageId:t.error.messageId},b=d.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),p=b&&2===b.length&&b.reduce(function(e,t){var r=t.split(" "),n=r[0].replace(/Number:/g,""),a=parseFloat(r[1]);return n&&!isNaN(a)&&s(s({},e),{},u({},n,a))||s({},e)},s({message:d},y))||s({message:d},y);return s(s({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status||t.error.message&&-1!==t.error.message.indexOf("could not be unmarshalled"))),error:s(s({},e.error),{},u({},t.status||"global",s({status:t.error&&t.error.status||400},p)))});case n.Yx:return s(s({},e),{},{metadata:s(s({},e.metadata),t.metadata)});default:return e}}},401733:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},745539:(e,t,r)=>{var n=r(640882),a=r(350828),o=r(466645),i=RegExp("['’]","g");e.exports=function(e){return function(t){return n(o(a(t).replace(i,"")),e,"")}}},124647:(e,t,r)=>{var n=r(554552)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=n},645434:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},922225:e=>{var t="\\ud800-\\udfff",r="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",a="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+o+"]",l="\\d+",s="["+r+"]",u="["+n+"]",c="[^"+t+o+l+r+n+a+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",y="["+a+"]",b="(?:"+u+"|"+c+")",p="(?:"+y+"|"+c+")",v="(?:['’](?:d|ll|m|re|s|t|ve))?",m="(?:['’](?:D|LL|M|RE|S|T|VE))?",g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",S="[\\ufe0e\\ufe0f]?",h=S+g+"(?:\\u200d(?:"+["[^"+t+"]",f,d].join("|")+")"+S+g+")*",O="(?:"+[s,f,d].join("|")+")"+h,w=RegExp([y+"?"+u+"+"+v+"(?="+[i,y,"$"].join("|")+")",p+"+"+m+"(?="+[i,y+b,"$"].join("|")+")",y+"?"+b+"+"+v,y+"+"+m,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l,O].join("|"),"g");e.exports=function(e){return e.match(w)||[]}},984058:(e,t,r)=>{var n=r(314792),a=r(745539)(function(e,t,r){return t=t.toLowerCase(),e+(r?n(t):t)});e.exports=a},350828:(e,t,r)=>{var n=r(124647),a=r(213222),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=a(e))&&e.replace(o,n).replace(i,"")}},466645:(e,t,r)=>{var n=r(401733),a=r(645434),o=r(213222),i=r(922225);e.exports=function(e,t,r){return e=o(e),void 0===(t=r?void 0:t)?a(e)?i(e):n(e):e.match(t)||[]}},503618:(e,t)=>{"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.Ay=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n=t.debug;var l={initialState:t.initialState,initTypes:d(t.initTypes,["@@redux/INIT","@@INIT"]),limit:t.limit,filter:t.filter||function(){return!0},undoType:t.undoType||i.UNDO,redoType:t.redoType||i.REDO};return l.history=t.initialHistory||f(l.initialState),0===l.initTypes.length&&console.warn("redux-undo: supply at least one action type in initTypes to ensure initial state"),function(t,i){!function(e,t){if(n){var r=["action",e.type];console.group?(r.unshift("%credux-undo","font-style: italic"),console.groupCollapsed.apply(console,r),console.log("received",{state:t,action:e})):a.apply(void 0,r)}}(i,t);var d=void 0;switch(i.type){case l.undoType:return d=function(e){a("undo",{history:e});var t=e.past,r=e.present,n=e.future;return t.length<=0?e:{past:t.slice(0,t.length-1),present:t[t.length-1],future:[r].concat(n)}}(t),a("after undo",d),o(),d?c(t,d):t;case l.redoType:return d=function(e){a("redo",{history:e});var t=e.past,r=e.present,n=e.future;return n.length<=0?e:{future:n.slice(1,n.length),present:n[0],past:[].concat(t,[r])}}(t),a("after redo",d),o(),d?c(t,d):t;default:if(d=e(t&&t.present,i),l.initTypes.some(function(e){return e===i.type}))return a("reset history due to init action"),o(),u(r({},t,f(d)));if(l.filter&&"function"==typeof l.filter&&!l.filter(i,d,t&&t.present))return a("filter prevented action, not storing it"),o(),u(r({},t,{present:d}));var y=function(e,t,r){a("insert",{state:t,history:e,free:r-s(e)});var n=e.past,o=e.present,i=r&&s(e)>=r;return void 0===o?{past:[],present:t,future:[]}:{past:[].concat(n.slice(i?1:0),[o]),present:t,future:[]}}(t&&void 0!==t.present?t:l.history,d,l.limit);return a("after insert",{history:y,free:l.limit-s(y)}),o(),u(r({},t,y))}}};var n=void 0;function a(){if(n){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];console.group||t.unshift("%credux-undo","font-style: italic"),console.log.apply(console,t)}}function o(){if(n)return console.groupEnd&&console.groupEnd()}var i={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO"};t.Q3=i;var l={undo:function(){return{type:i.UNDO}},redo:function(){return{type:i.REDO}}};function s(e){var t=e.past,r=e.future;return t.length+1+r.length}function u(e){return r({},e,{history:e})}function c(e,t){return u(r({},e,t))}function f(e){return{past:[],present:e,future:[]}}function d(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Array.isArray(e)?e:"string"==typeof e?[e]:t}t.IE=l}}]);