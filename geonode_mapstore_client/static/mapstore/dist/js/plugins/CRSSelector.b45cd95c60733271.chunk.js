"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1725],{29489(e,t,n){n.d(t,{Kn:()=>a,_L:()=>f,bd:()=>s,gu:()=>l,kv:()=>u,vC:()=>c});var r=n(801081),o=n(307679),i=n(535273),c=(0,r.Mz)([o.Kv],function(e){return e.find(i.fd)}),l=(0,r.Mz)([o.Kv],function(e){return e.filter(i.fd)}),u=function(e){var t=(0,o.ZT)(e);return t&&(0,i.fd)(t)?t:null},a=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.editing},s=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.session},f=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.featureId}},50173(e,t,n){n.d(t,{A:()=>l});var r=n(273517),o=n.n(r),i=n(444003);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}const l=function(e){return function(t){var n;return o().createElement(e,c({mapType:(0,i.Jq)(null==t||null===(n=t.map)||void 0===n?void 0:n.visualizationMode)},t))}}},61714(e,t,n){n.r(t),n.d(t,{default:()=>Pe});var r=n(395292),o=n.n(r),i=n(685591),c=n.n(i),l=n(157373),u=n.n(l),a=n(605556),s=n.n(a),f=n(273517),p=n.n(f),m=n(8117),d=n(393149),y=n(801081),v="CHANGE_CRS_INPUT_VALUE",b="SET_PROJECTIONS_CONFIG";function g(e){return{type:b,config:e}}var O=n(273494),j=n(883832),h=n(8571),S=n(164045);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){A(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e,t,n){return(t=function(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=n(516516),N=n(29489),T=n(130711),I=n(131127),D=n(401631),k=n(307679),M=n(97401),L=n(747135),R=n(501719),_=n(764932),z=n(294312),x=n(711030),V=n(132672),H=n(711520),F=n(406250),G=n(916589),U=n(552749),B=n(367091),J=n(50173),W=n(437430),$=n(358132),Z=n(509327),q=n(475223),K=n(761583);const Y=(0,G.compose)(U.A,(0,B.A)(0),J.A,W.A,$.A,Z.A,K.Y)(q.A);var X=n(628017),Q=n(551783);function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ne=(0,S.A)(m.e6);const re=function(e){var t=e.filteredProjections,n=e.projectionList,r=e.selectedProjection,o=e.setConfig,i=e.setHoveredCrs,c=(0,f.useMemo)(function(){return n.map(function(e){return e.value})},[n]);return p().createElement(p().Fragment,null,p().createElement(V.A,{centerChildrenVertically:!0,gap:"sm",className:"ms-crs-projections-header"},p().createElement("div",{className:"ms-selected-projection"},p().createElement(ne,{glyph:"info-sign",tooltip:p().createElement(h.A,{msgId:"crsSelector.help"}),tooltipPosition:"top"})),p().createElement("div",null,p().createElement(h.A,{msgId:"crsSelector.label"})),p().createElement("div",null,p().createElement(h.A,{msgId:"crsSelector.authorityId"})),p().createElement("div",{className:"ms-selected-projection"})),t.map(function(e){var t=e.label,l=e.value,u=c.includes(l),a=r===l;return p().createElement(V.A,{key:l,centerChildrenVertically:!0,gap:"sm",classNames:[u?"active":"","ms-crs-projection-item"],onMouseEnter:function(){return i(l)},onMouseLeave:function(){return i(null)},onClick:function(){o({defaultCrs:l,projectionList:c.includes(l)?n:[].concat(ee(n),[{value:l,label:t}])})}},p().createElement("div",{className:"ms-selected-projection"},p().createElement(m.MJ,{type:"checkbox",checked:u,onClick:function(e){return e.stopPropagation()},onChange:function(e){o({projectionList:e.target.checked?[].concat(ee(n),[{value:l,label:t}]):n.filter(function(e){return e.value!==l})})}})),p().createElement("div",null,t),p().createElement("div",null,l),p().createElement("div",{className:"ms-selected-projection"},a&&p().createElement(ne,{glyph:"star",tooltip:p().createElement(h.A,{msgId:"crsSelector.selectedProjection"}),tooltipPosition:"top"}),u&&!a&&p().createElement(ne,{glyph:"list",tooltip:p().createElement(h.A,{msgId:"crsSelector.quickSwitch"}),tooltipPosition:"top"})))}))};function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,c,l=[],u=!0,a=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(a)throw o}}return l}}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=(0,Q.A)("placeholder")(m.MJ),ue=function(e,t){var n=e.open,r=e.onClose,o=e.projectionList,i=e.selectedProjection,c=e.setConfig,l=e.onSelect,u=e.projectionDefs,a=e.selectedProjectionList,s=oe((0,f.useState)(""),2),d=s[0],y=s[1],v=oe((0,f.useState)(null),2),b=v[0],g=v[1],O=oe((0,f.useState)(o),2),j=O[0],S=O[1],E=oe((0,f.useState)(i),2),w=E[0],P=E[1];(0,f.useEffect)(function(){n&&(S(a),P(i))},[n,a,i]),(0,f.useEffect)(function(){var e;j&&0!==j.length?w&&j.map(function(e){return e.value}).includes(w)||P((null===(e=j[0])||void 0===e?void 0:e.value)||null):null!==w&&P(null)},[j,w]);var A=(0,f.useMemo)(function(){return(0,z.I1)(o,u)},[o,u]),C=(0,f.useMemo)(function(){if(!d.trim())return A;var e=d.toLowerCase();return A.filter(function(t){var n=t.label,r=t.value;return n.toLowerCase().includes(e)||r.toLowerCase().includes(e)})},[A,d]),N=(0,f.useMemo)(function(){return{mapInfoControl:!0,zoomControl:!1,projection:"EPSG:4326",units:"degrees",center:{x:0,y:0},zoom:0,maxExtent:[-180,-90,180,90],layers:[{type:"osm",title:"Open Street Map",name:"mapnik",source:"osm",group:"background",visibility:!0}],mapOptions:{interactions:{dragPan:!1,mouseWheelZoom:!1,doubleClickZoom:!1,pinchZoom:!1}}}},[]),T=(0,f.useMemo)(function(){if(b){var e=(0,z.c2)(b),t=oe(e.worldExtent||e.extent,4),n=t[0],r=t[1],o=t[2],i=t[3],c=[{id:"projection-features-layer",title:"Projection features",group:"Layer",type:"vector",hidden:!1,expanded:!1,features:[{id:"projection-feature-1",type:"Feature",geometry:{type:"Polygon",coordinates:[[[n,r],[n,i],[o,i],[o,r],[n,r]]]}}],wrapX:!1,hideLoading:!0}];return[].concat(function(e){if(Array.isArray(e))return ce(e)}(l=N.layers)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||ie(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c)}var l;return N.layers},[b,N]),I=function(){g(null),y(""),r()};return n?p().createElement(F.A,null,p().createElement(H.A,{id:"crs-available-projections-dialog",draggable:!1,modal:!0,containerClassName:"crs-available-projections-dialog-container"},p().createElement(V.A,{role:"header",centerChildrenVertically:!0,gap:"sm",classNames:["_flex-space-between"]},p().createElement(V.A,{centerChildrenVertically:!0,gap:"sm"},p().createElement(m.e6,{glyph:"globe"}),p().createElement(h.A,{msgId:"crsSelector.availableProjections"})),p().createElement("button",{onClick:I,className:"settings-panel-close close"},p().createElement(m.e6,{glyph:"1-close"}))),p().createElement("div",{role:"body"},p().createElement("div",null,p().createElement(m.gE,null,p().createElement(le,{type:"text",value:d,placeholder:(0,X.kA)(t.messages,"crsSelector.searchProjection"),onChange:function(e){return y(e.target.value)}}))),p().createElement("div",{className:"ms-crs-projections-list"},p().createElement(re,{filteredProjections:C,projectionList:j,selectedProjection:w,setConfig:function(e){var t=e.defaultCrs,n=e.projectionList;n&&S(n),t&&P(t)},setHoveredCrs:g})),p().createElement("div",{className:"ms-crs-projections-map"},p().createElement(Y,{id:"crs-available-projections-map",options:{style:{height:"100%"}},map:N,layers:T,interactive:!1}))),p().createElement("div",{role:"footer"},p().createElement(m.$n,{onClick:I,bsStyle:"default"},p().createElement(h.A,{msgId:"crsSelector.close"})),p().createElement(m.$n,{onClick:function(){c({projectionList:j}),l(w),I()},bsStyle:"primary",disabled:!j||0===j.length},p().createElement(h.A,{msgId:"crsSelector.save"}))))):null};ue.propTypes={open:s().bool,onClose:s().func,projectionList:s().array,selectedProjection:s().string,setConfig:s().func,onSelect:s().func,projectionDefs:s().array},ue.defaultProps={projectionList:[],selectedProjection:null,setConfig:function(){},onSelect:function(){},projectionDefs:[]};const ae=ue;var se=n(914950),fe=n(45388),pe=n.n(fe),me=n(538704);const de={updateCrsSelectorConfigEpic:function(e){return e.ofType(me.mO).switchMap(function(e){var t,n=null==e||null===(t=e.config)||void 0===t?void 0:t.crsSelector;return n?pe().Observable.of(g({projectionList:n.projectionList})):pe().Observable.empty()})}};function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}var ve=["pluginCfg"];function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach(function(t){Oe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oe(e,t,n){return(t=function(e){var t=function(e){if("object"!=ye(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ye(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,c,l=[],u=!0,a=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(a)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}(0,se.yp)("crsSelector",function(e){var t;return null==e||null===(t=e.crsselector)||void 0===t?void 0:t.config});var Se=(0,S.A)(x.A),Ee=function(e){var t=e.selected,n=e.value,r=e.availableCRS,i=void 0===r?(0,_.getAvailableCRS)():r,l=e.projectionDefs,a=e.availableProjections,s=e.setCrs,d=void 0===s?function(){}:s,y=e.typeInput,v=void 0===y?function(){}:y,b=e.enabled,g=void 0===b||b,O=e.allowedRoles,j=void 0===O?["ALL"]:O,S=e.currentRole,E=e.projectionsConfig,w=void 0===E?{}:E,P=e.setConfig,A=void 0===P?function(){}:P,C=e.currentBackground,N=e.onError,T=void 0===N?function(){}:N,I=e.canEditProjection,D=void 0===I||I,k=je((0,f.useState)(!1),2),M=k[0],L=k[1],R=je((0,f.useState)(!1),2),z=R[0],x=R[1],H=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,f.useRef)(null);return(0,f.useEffect)(function(){if(!t)return function(){};var r=function(t){n.current&&!n.current.contains(t.target)&&e(t)};return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[e,t]),n}(function(){M&&(L(!1),v(""))},M),F=function(e){u()(["wms","osm","tileprovider","empty"],null==C?void 0:C.type)>-1||C.allowedSRS&&o()(C.allowedSRS,e)?d(e):T({title:"error",message:"notification.incompatibleBackgroundAndProjection",action:{label:"close"},position:"tc",uid:"3"})},G=(0,f.useMemo)(function(){return w&&w.projectionList?w.projectionList:a},[i,a,w]),U=(0,f.useMemo)(function(){return n?G.filter(function(e){return e.value.toLowerCase().includes(n.toLowerCase())||e.label.toLowerCase().includes(n.toLowerCase())}):G},[G,n]),B=(0,f.useMemo)(function(){return(0,_.normalizeSRS)(t,a.map(function(e){return e.value}))},[a,t]),J=c()(j,"ALL")||c()(j,S);return g?p().createElement(V.A,{centerChildrenVertically:!0,classNames:["ms-crs-selector-container"]},p().createElement(V.A,{centerChildrenVertically:!0,gap:"sm",classNames:["ms-crs-selector-inner-container"]},p().createElement(m.e6,{glyph:"globe",className:"ms-crs-world-icon"}),p().createElement("div",{ref:H},p().createElement(m.ms,{dropup:!0,className:"ms-crs-dropdown",open:M,onToggle:function(e){L(e),e||v("")},disabled:!J},p().createElement(Se,{bsRole:"toggle",bsStyle:"link",className:"ms-crs-select-button",tooltip:!M&&J?p().createElement(h.A,{msgId:"showCrsSelector"}):null,tooltipPosition:"top"},M?p().createElement(m.MJ,{type:"text",className:"ms-crs-filter-input",value:n||"",onChange:function(e){e.stopPropagation(),v(e.target.value)},onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},placeholder:B,autoFocus:!0}):p().createElement("span",{className:"ms-crs-display-value"},B)),p().createElement("div",{bsRole:"menu",className:"dropdown-menu"},U.map(function(e){return p().createElement("li",{key:e.value,onClick:function(){F(e.value),L(!1),v("")},className:B===e.value?"active":""},function(e){return e.label===e.value?e.value:"".concat(e.value," (").concat(e.label,")")}(e)," ",B===e.value&&p().createElement(m.e6,{glyph:"star"}))}))))),J&&D&&p().createElement(p().Fragment,null,p().createElement(Se,{bsStyle:"link",className:"ms-crs-settings-button",tooltip:p().createElement(h.A,{msgId:"settings"}),tooltipPosition:"top",onClick:function(){return x(!0)}},p().createElement(m.e6,{glyph:"cog"})),z&&p().createElement(ae,{projectionList:a,open:z,onClose:function(){return x(!1)},onSelect:F,selectedProjection:B,setConfig:A,projectionDefs:l,selectedProjectionList:G}))):null};Ee.propTypes={selected:s().string,value:s().string,availableCRS:s().object,projectionDefs:s().array,setCrs:s().func,typeInput:s().func,enabled:s().bool,currentBackground:s().object,onError:s().func,allowedRoles:s().array,currentRole:s().string,availableProjections:s().array,projectionsConfig:s().object,setConfig:s().func,canEditProjection:s().bool};var we=(0,d.Ng)((0,y.Mz)(R.N9,k.vm,I.Bg,I.$5,function(e){return e&&e.crsselector&&e.crsselector.value},D.XU,L.NR,M.lU,T.qt,T.sY,T.vJ,N.Kn,function(e){return e&&e.crsselector&&e.crsselector.config},function(e){var t=function(e){return e&&e.crsselector&&e.crsselector.canEdit}(e),n=(0,I.GM)(e);return void 0===t?n:t},function(e,t,n,r,o,i,c,l,u,a,s,f,p,m){return{currentRole:e,currentBackground:t,selected:n,projectionDefs:r,value:o,enabled:!("EDIT"===i||c||l||u||a||s||f),projectionsConfig:p,canEditProjection:m}}),{typeInput:function(e){return{type:v,value:e}},setCrs:O.d6,onError:j.z3,setConfig:g},function(e,t,n){var r=n||{},o=r.pluginCfg,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(r,ve),c=o||{},l=c.filterAllowedCRS,u=void 0===l?[]:l,a=c.additionalCRS,s=void 0===a?{}:a,f=(null==o?void 0:o.availableProjections)||(0,z.Gp)(u,s);return ge(ge(ge(ge(ge({},i),e),t),o||{}),{},{availableProjections:f})})(Ee);const Pe={CRSSelectorPlugin:Object.assign(we,{disablePluginIf:"{state('mapType') === 'leaflet'}",MapFooter:{name:"crsSelector",position:10,target:"right-footer",priority:1}}),reducers:{crsselector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{projections:[],config:{},canEdit:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object.assign({},e,{value:t.value});case b:return Object.assign({},e,{config:P(P({},e.config),t.config)});case"SET_CAN_EDIT_PROJECTION":return Object.assign({},e,{canEdit:t.canEdit});default:return e}},annotations:C.A},epics:de}},109054(e,t,n){n.d(t,{A:()=>O});var r=n(273517),o=n.n(r),i=n(593737),c=n.n(i),l=n(605556),u=n.n(l),a=n(310340),s=n.n(a);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function m(e,t,n){return t=y(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}const O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debounceTime,n=e.querySelector,r=e.closest,i=void 0!==r&&r;return function(e){var r;return r=function(r){function l(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),b(r=m(this,l,[e]),"findDomNode",function(){if(!r.isMounded)return null;var e=s().findDOMNode(r);return e&&i&&n?e.closest(n||"*"):e&&(n?e.querySelector(n):e)}),r.width=void 0,r.height=void 0,r.skipOnMount=e.skipOnMount,r.div=null,r.onResize=c()(function(){var e;return(e=r.props).onResize.apply(e,arguments)},void 0!==t?t:e.debounceTime||1e3),r.ro=new ResizeObserver(function(e){e.forEach(function(e){var t=e.contentRect,n=t.width,o=t.height,i=r.props.handleWidth&&r.width!==n,c=r.props.handleHeight&&r.height!==o;r.skipOnMount||!i&&!c||r.onResize({width:n,height:o}),r.width=n,r.height=o,r.skipOnMount=!1})}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,r),u=l,(a=[{key:"componentDidMount",value:function(){this.isMounded=!0,this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentDidUpdate",value:function(){this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentWillUnmount",value:function(){var e=this.findDomNode();e&&this.ro&&this.ro.unobserve&&this.ro.unobserve(e)}},{key:"render",value:function(){return o().createElement(e,this.props)}}])&&p(u.prototype,a),Object.defineProperty(u,"prototype",{writable:!1}),u;var u,a}(o().Component),b(r,"propTypes",{handleWidth:u().bool,handleHeight:u().bool,onResize:u().func}),b(r,"defaultProps",{onResize:function(){},handleWidth:!0,handleHeight:!0}),r}}},367091(e,t,n){n.d(t,{A:()=>a});var r=n(916589),o=n(109054);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,r.compose)((0,r.withStateHandlers)(function(){return{resize:0}},{onResize:function(e){var t=e.resize,n=void 0===t?0:t;return function(){return{resize:n+1}}}}),(0,o.A)({debounceTime:e}),(0,r.withProps)(function(e){var t=e.options,n=e.resize;return{options:l(l({},t),{},{resize:n})}}))}},437430(e,t,n){n.d(t,{A:()=>m});var r=n(273517),o=n.n(r),i=n(605556),c=n.n(i),l=n(6683);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){return function(t){var n,i,c,u=(null==t||null===(n=t.map)||void 0===n?void 0:n.projection)||"EPSG:3857",a=(null==t||null===(i=t.map)||void 0===i||null===(i=i.mapOptions)||void 0===i||null===(i=i.view)||void 0===i?void 0:i.DPI)||null,f=null==t||null===(c=t.map)||void 0===c||null===(c=c.mapOptions)||void 0===c||null===(c=c.view)||void 0===c?void 0:c.scales,p=(0,r.useMemo)(function(){return f?(0,l.C$)(f,u,a):null},[f,u,a]),m=p?s(s({},t),{},{map:s(s({},t.map),{},{mapOptions:s(s({},t.map.mapOptions),{},{view:s(s({},t.map.mapOptions.view),{},{resolutions:p})})})}):t;return o().createElement(e,m)}};p.propTypes={Component:c().element};const m=p},446176(e,t,n){n.d(t,{B0:()=>O,EE:()=>m,EZ:()=>f,Fk:()=>a,HD:()=>v,I:()=>l,IL:()=>p,IS:()=>w,NO:()=>j,O8:()=>h,Qn:()=>i,RG:()=>y,TA:()=>g,_G:()=>d,dC:()=>o,eO:()=>b,gl:()=>E,jT:()=>u,ol:()=>S,rC:()=>c,vM:()=>r,xn:()=>s});var r="ANNOTATIONS:EDIT",o="ANNOTATIONS:DOWNLOAD",i="ANNOTATIONS:LOAD_ANNOTATIONS",c="ANNOTATIONS:NEW",l="ANNOTATIONS:CLOSE",u="ANNOTATIONS:CONFIRM_CLOSE",a="ANNOTATIONS:CANCEL_CLOSE",s="ANNOTATIONS:REMOVE",f="ANNOTATIONS:STORE_SESSION",p="ANNOTATIONS:MERGE_FEATURES",m="ANNOTATIONS:SELECT_FEATURE",d=function(e){return{type:r,id:e}},y=function(e){return{type:o,annotations:e}},v=function(e){return{type:i,features:e,override:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},b=function(){return{type:c}},g=function(){return{type:l}},O=function(e){return{type:u,layer:e}},j=function(){return{type:a}},h=function(e){return{type:s,id:e}},S=function(e){return{type:f,session:e}},E=function(e,t){return{type:p,id:e,annotation:t}},w=function(e){return{type:m,id:e}}},509327(e,t,n){n.d(t,{A:()=>l});var r=n(916589),o=n(779893),i=n(908437),c=n.n(i);const l=(0,r.withProps)(function(e){var t=e.projectionDefs;return{projectionDefs:c()(t)&&t.length?t:o.Ay.getConfigProp("projectionDefs")||[]}})},516516(e,t,n){n.d(t,{A:()=>u});var r=n(446176);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.EZ:return c(c({},e),{},{session:t.session});case r.EE:return c(c({},e),{},{featureId:t.id});case r.rC:case r.vM:return c(c({},e),{},{editing:!0,closeId:0});case r.I:return c(c({},e),{},{closeId:(e.closeId||0)+1});case r.jT:return c(c({},e),{},{editing:!1,closeId:0,session:null});case r.Fk:return c(c({},e),{},{closeId:0});default:return e}}},552749(e,t,n){n.d(t,{A:()=>u});var r=n(916589);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=(0,r.compose)((0,r.withHandlers)({onMapViewChanges:function(e){var t=e.map,n=void 0===t?{}:t,r=e.onMapViewChanges,o=void 0===r?function(){}:r;return function(e,t,r,i,l,u,a,s,f,p){o(c(c({},n),{},{center:e,bbox:c(c({},n.bbox),r),zoom:t,size:i,mapStateSource:l,projection:u,resolution:s,orientate:f,zoomToExtentHandler:p}))}}}),(0,r.withPropsOnChange)(["onMapViewChanges","eventHandlers"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapViewChanges,n=void 0===t?function(){}:t,r=e.eventHandlers;return{eventHandlers:c(c({},void 0===r?{}:r),{},{onMapViewChanges:n})}}))},761583(e,t,n){n.d(t,{Y:()=>s});var r=n(916589),o=n(563864),i=n(8571),c=n(273517),l=n.n(c),u=n(779893),a=(0,r.withProps)(function(e){var t=e.map;return{projection:e.projection||(t.data&&t.data.map?t.data.map.projection:t&&t.projection)}}),s=(0,r.compose)(a,(0,o.A)(function(e){var t=e.projectionDefs,n=void 0===t?u.Ay.getConfigProp("projectionDefs")||[]:t,r=e.projection;return r&&0===n.concat([{code:"EPSG:4326"},{code:"EPSG:3857"},{code:"EPSG:900913"}]).filter(function(e){return e.code===r}).length},function(e){var t=e.projection;return{glyph:"1-map",style:{width:"100%",height:"100%",display:"flex"},title:l().createElement(i.A,{msgId:"map.errors.loading.title"}),mainViewStyle:{margin:"auto"},imageStyle:{height:120,width:120,margin:"auto"},description:l().createElement(i.A,{msgId:"map.errors.loading.projectionError",msgParams:{projection:t}})}}))}}]);