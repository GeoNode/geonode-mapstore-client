(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1157],{99534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(61365),a=r(69334);const l=(0,n.Z)(a.h_)},85428:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),a=r.n(n),l=r(45697),c=r.n(l);function o(e){var t=e.href,r=e.readOnly,n=e.children;return r?n:a().createElement("a",{href:t},n)}o.PropTypes={href:c().string,readOnly:c().bool.isRequired,children:c().any},o.defaultProps={href:"",readOnly:!1};const s=o},60330:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(85428)},34065:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),a=r.n(n),l=r(45697),c=r.n(l),o=r(77593),s=r(60330),i=["resource","readOnly","formatHref"];function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function d(e){var t,r,n=e.resource,l=e.readOnly,c=e.formatHref,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,i);return a().createElement("p",u({className:"card-text gn-card-user"},d),(null===(t=n.owner)||void 0===t?void 0:t.avatar)&&a().createElement("img",{src:n.owner.avatar,alt:(0,o.vW)(n.owner),className:"gn-card-author-image"}),a().createElement(s.Z,{readOnly:l,href:c({query:{"filter{owner.username.in}":null===(r=n.owner)||void 0===r?void 0:r.username}})},n.owner&&(0,o.vW)(n.owner)))}d.PropTypes={resource:c().object,readOnly:c().bool,formatHref:c().func,props:c().any},d.defaultProps={resource:{},readOnly:!1,formatHref:function(){return"#"}};const m=d},39399:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294),a=r.n(n),l=r(57588);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}l.Dropdown.Item=l.MenuItem,l.Dropdown.Divider=function(e){return a().createElement(l.MenuItem,c({},e,{divider:!0}))};const o=l.Dropdown},36693:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(39399)},69582:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(67294),a=r.n(n),l=r(5346),c=r(97842),o=r(36693),s=r(93473),i=r(51605),u=r(35721),d=r(89239),m=r(60330),p=r(34065),g=(0,n.forwardRef)((function(e,t){var r=e.data,n=e.active,g=e.options,f=e.formatHref,v=e.getTypesInfo,E=e.layoutCardsStyle,y=e.buildHrefByTemplate,h=e.readOnly,b=e.actions,Z=e.onAction,O=e.className,w=e.loading,N=r,k=v(),C=(k[N.subtype]||k[N.resource_type]||{}).icon,I=N&&(k[N.subtype]||k[N.resource_type])||{},P=I.formatDetailUrl,j=void 0===P?function(e){return null==e?void 0:e.detail_url}:P,_=I.canPreviewed,R=(null==N?void 0:N.pk)&&j(N),D=(null==N?void 0:N.pk)&&_&&_(N),T=(null==N?void 0:N.pk)&&(0,u.J7)(N);return a().createElement("div",{ref:t,className:"gn-resource-card".concat(n?" active":"").concat(h?" read-only":""," gn-card-type-").concat(E," ").concat("list"===E?"rounded-0":"").concat(O?" ".concat(O):"")},!h&&a().createElement("a",{className:"gn-resource-card-link",href:f({pathname:"/detail/".concat(N.resource_type,"/").concat(N.pk)})}),a().createElement("div",{className:"card-resource-".concat(E)},a().createElement("img",{className:"".concat("list"===E?"card-img-left":"card-img-top"),src:N.thumbnail_url}),a().createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},a().createElement("div",{className:"card-body"},a().createElement("div",{className:"card-title"},C&&!w&&a().createElement(a().Fragment,null,a().createElement(m.Z,{readOnly:h,href:f({query:{"filter{resource_type.in}":N.resource_type}})},a().createElement(c.Z,{name:C}))),w&&a().createElement(i.Z,null),a().createElement(m.Z,{readOnly:h,href:f({pathname:"/detail/".concat(N.resource_type,"/").concat(N.pk)})},N.title)),a().createElement(d.Z,{resource:N}),a().createElement("p",{className:"card-text gn-card-description"},N.raw_abstract?N.raw_abstract:"...")),a().createElement("div",{className:"gn-footer-wrapper"},a().createElement("div",{className:"gn-card-footer",style:{padding:g&&0===g.length?"0 0.25rem 0 0.5rem":"0 0.5rem"}},a().createElement(p.Z,{resource:N,readOnly:h,formatHref:f}),a().createElement("div",{className:"gn-card-actions"},!h&&(R||T)&&a().createElement("div",{className:"".concat(g&&0===g.length?"gn-card-view-editor-right":"gn-card-view-editor")},a().createElement(s.Z,{variant:"primary",href:D?R:T,rel:"noopener noreferrer"},a().createElement(l.Z,{msgId:"gnhome.view"}))),!h&&g&&g.length>0&&a().createElement(o.Z,{className:"gn-card-options",pullRight:!0},a().createElement(o.Z.Toggle,{id:"gn-card-options-".concat(N.pk),variant:"default",size:"sm",noCaret:!0},a().createElement(c.Z,{name:"ellipsis-h"})),a().createElement(o.Z.Menu,{className:"gn-card-dropdown"},g.map((function(e){return"button"===e.type&&b[e.action]?a().createElement(o.Z.Item,{key:e.action,onClick:function(){return Z(b[e.action],[N])}},a().createElement(c.Z,{name:e.icon})," ",a().createElement(l.Z,{msgId:e.labelId})):a().createElement(o.Z.Item,{key:e.href,href:y(N,e.href)},a().createElement(c.Z,{name:e.icon})," ",a().createElement(l.Z,{msgId:e.labelId}))}))))))))))}));g.defaultProps={links:[],theme:"light",getTypesInfo:u.NN,formatHref:function(){return"#"}};const f=g},57914:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(69582)},99469:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),a=r.n(n),l=r(5346),c=r(45697),o=r.n(c),s=r(41609),i=r.n(s),u=r(35721),d=function(e){var t=e.resource,r=void 0===t?{}:t,n=(0,u.fu)(r),c=n.isApproved,o=n.isPublished,s=n.isProcessing,d=n.isCopying,m=n.isDeleting,p=n.isDeleted;return i()(r)?null:a().createElement("p",null,!s&&!c&&a().createElement("span",{className:"gn-resource-status gn-resource-status-warning"},a().createElement(l.Z,{msgId:"gnviewer.underApproval"})),!s&&!o&&a().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},a().createElement(l.Z,{msgId:"gnviewer.unpublish"})),m&&a().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},a().createElement(l.Z,{msgId:"gnviewer.deleting"})),p&&a().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},a().createElement(l.Z,{msgId:"gnviewer.deleted"})),d&&a().createElement("span",{className:"gn-resource-status gn-resource-status-primary"},a().createElement(l.Z,{msgId:"gnviewer.cloning"})))};d.propTypes={isApproved:o().bool,isPublished:o().bool},d.defaultProps={isApproved:!0,isPublished:!0};const m=d},89239:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(99469)},28261:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),a=r.n(n),l=r(45697),c=r.n(l),o=["id","className","style","children"];function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function i(e){var t=e.id,r=e.className,n=e.style,l=e.children,c=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,o),i=r?" "+r:"";return a().createElement(a().Fragment,null,a().createElement("div",s({},c,{id:t,className:"gn-spinner".concat(i),style:n}),a().createElement("div",null)),l)}i.propTypes={id:c().string,className:c().string,style:c().object},i.defaultProps={};const u=i},51605:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(28261)},60466:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(67294),a=r.n(n),l=r(22843),c=r(33664),o=r(22222),s=r(5346),i=r(93473),u=r(94745),d=r(99534),m=r(82904),p=r(3828),g=r(43892),f=r(57914),v=r(12530),E=r(32425),y=(0,c.connect)((0,o.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t[v.zj.DELETE_RESOURCE])||void 0===r?void 0:r.value},function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t[v.zj.DELETE_RESOURCE])||void 0===r?void 0:r.loading}],(function(e,t){return{resources:e,enabled:!!e,loading:t}})),{onClose:m.Xg.bind(null,v.zj.DELETE_RESOURCE,"value",void 0),onDelete:g.EU.bind(null,v.zj.DELETE_RESOURCE)})((function(e){var t=e.enabled,r=e.resources,n=void 0===r?[]:r,l=e.onClose,c=void 0===l?function(){}:l,o=e.onDelete,i=void 0===o?function(){}:o,m=e.redirectTo,p=void 0===m?"/":m,g=e.loading;return a().createElement(d.Z,null,a().createElement(u.Z,{title:a().createElement(s.Z,{msgId:"gnviewer.deleteResourceTitle",msgParams:{count:n.length}}),show:t,fitContent:!0,clickOutEnabled:!1,modalClassName:"gn-simple-dialog",buttons:g?[]:[{text:a().createElement(s.Z,{msgId:"gnviewer.deleteResourceNo",msgParams:{count:n.length}}),onClick:function(){return c()}},{text:a().createElement(s.Z,{msgId:"gnviewer.deleteResourceYes",msgParams:{count:n.length}}),bsStyle:"danger",onClick:function(){return i(n,p)}}],onClose:g?null:function(){return c()}},a().createElement("ul",{className:"gn-card-grid",style:{listStyleType:"none",padding:"0.5rem",margin:0}},n.map((function(e,t){return a().createElement("li",{style:{padding:"0.25rem 0"},key:e.pk+"-"+t},a().createElement(f.Z,{data:e,layoutCardsStyle:"list",readOnly:!0}))}))),g&&a().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},a().createElement(E.Z,{size:70}))))})),h=(0,c.connect)((0,o.P1)([p.yK],(function(e){return{resource:e}})),{onClick:m.Xg.bind(null,v.zj.DELETE_RESOURCE,"value")})((function(e){var t=e.onClick,r=e.size,n=e.resource;return a().createElement(i.Z,{variant:"danger",size:r,onClick:function(){t([n])}},a().createElement(s.Z,{msgId:"gnhome.delete"}))}));const b=(0,l.rx)("DeleteResource",{component:y,containers:{ActionNavbar:{name:"DeleteResource",Component:h}},epics:{},reducers:{}})}}]);