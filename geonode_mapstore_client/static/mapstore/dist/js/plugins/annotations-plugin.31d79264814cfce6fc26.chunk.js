/*! For license information please see annotations-plugin.31d79264814cfce6fc26.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[76759],{801550:(e,t,n)=>{"use strict";n.d(t,{pP:()=>r,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>l,Qy:()=>u,IL:()=>c,Li:()=>s,OW:()=>p,ZO:()=>f,Um:()=>d,TF:()=>m,Ls:()=>y,Ec:()=>v,Eu:()=>b,JJ:()=>g,nZ:()=>h,YD:()=>E,GI:()=>O,Jb:()=>S,Uh:()=>w,e$:()=>T,eh:()=>P,$j:()=>j,bJ:()=>I,Mk:()=>A,xy:()=>C,o6:()=>N,NH:()=>k,FP:()=>_,Mo:()=>R,sO:()=>L,Px:()=>x,hd:()=>D,y9:()=>F,Ju:()=>M,BV:()=>G,SO:()=>B,H0:()=>Z,$X:()=>H,ou:()=>U,NE:()=>z,Lq:()=>q,aN:()=>V});var r="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",l="PAN_TO",u="ZOOM_TO_EXTENT",c="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",p="CHANGE_MAP_SCALES",f="CHANGE_MAP_STYLE",d="CHANGE_ROTATION",m="CREATION_ERROR_LAYER",y="UPDATE_VERSION",v="INIT_MAP",b="RESIZE_MAP",g="CHANGE_MAP_LIMITS",h="SET_MAP_RESOLUTIONS",E="REGISTER_EVENT_LISTENER",O="UNREGISTER_EVENT_LISTENER",S="MOUSE_MOVE",w="MOUSE_OUT",T="MAP:MAP_PLUGIN_LOAD",P="MAP:ORIENTATION",j="MAP:UPDATE_MAP_VIEW",I="MAP:UPDATE_MAP_OPTIONS";function A(e,t,n,r){return{type:T,mapType:t,loading:e,loaded:n,error:r}}function C(e,t,n){return{type:c,pos:e,zoom:t,crs:n}}function N(e,t,n,o,i,a,l,u){return{type:r,center:e,zoom:t,bbox:n,size:o,mapStateSource:i,projection:a,viewerOptions:l,resolution:u}}function k(e){return{type:s,crs:e}}function _(e,t){return{type:o,point:e,layer:t}}function R(e){return{type:i,pointer:e}}function L(e,t){return{type:a,zoom:e,mapStateSource:t}}function x(e,t,n,r){return{type:u,extent:e,crs:t,maxZoom:n,options:r}}function D(e,t){return{type:f,style:e,mapStateSource:t}}function F(e){return{type:v,disableFeedbackMask:e}}function M(){return{type:b}}function G(e){var t=e.restrictedExtent,n=e.crs,r=e.minZoom;return{type:g,restrictedExtent:t,crs:n,minZoom:r}}function B(e){return{type:h,resolutions:e}}var Z=function(e,t){return{type:E,eventName:e,toolName:t}},H=function(e,t){return{type:O,eventName:e,toolName:t}},U=function(e){return{type:S,position:e}},z=function(){return{type:w}},q=function(e){return{type:P,orientation:e}},V=function(e){return{type:I,configUpdate:e}}},921914:(e,t,n)=>{"use strict";n.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>l,Pn:()=>u,DZ:()=>c,e8:()=>s,E0:()=>p,F9:()=>f,X_:()=>d,pb:()=>m,Re:()=>y,ih:()=>v,xy:()=>b,jL:()=>g,oz:()=>h,ph:()=>E,lF:()=>O,gG:()=>S,cb:()=>w,GI:()=>T,B1:()=>P,fv:()=>j,gc:()=>I,zX:()=>A,ZF:()=>C,Zb:()=>N,DW:()=>k,Xp:()=>_,Fm:()=>R,sV:()=>L,LU:()=>x,XP:()=>D,WU:()=>F,mK:()=>M,g:()=>G,ws:()=>B,HP:()=>Z,aN:()=>H,Pg:()=>z,u0:()=>q,TM:()=>V,PM:()=>Y,lK:()=>$,sv:()=>K,MO:()=>X,oO:()=>W,Mc:()=>J,Zw:()=>Q,RA:()=>ee,am:()=>te,ZM:()=>ne,wm:()=>re,Y$:()=>oe,Qu:()=>ie,kT:()=>ae});var r=n(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",c="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",p="SHOW_MAPINFO_MARKER",f="HIDE_MAPINFO_MARKER",d="SHOW_REVERSE_GEOCODE",m="HIDE_REVERSE_GEOCODE",y="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",b="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",h="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",E="TOGGLE_MAPINFO_STATE",O="UPDATE_CENTER_TO_MARKER",S="IDENTIFY:CHANGE_PAGE",w="IDENTIFY:CLOSE_IDENTIFY",T="IDENTIFY:CHANGE_FORMAT",P="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",j="IDENTIFY:EDIT_LAYER_FEATURES",I="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",A="IDENTIFY:SET_MAP_TRIGGER",C="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",N="IDENTIFY:SET_SHOW_IN_MAP_POPUP",k="IDENTIFY:IDENTIFY_IS_MOUNTED",_="IDENTIFY:INIT_PLUGIN";function R(e,t,n,r,i){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:i}}function L(e,t,n,r){return{type:i,error:t,reqId:e,requestParams:n,layerMetadata:r}}function x(){return{type:y}}function D(){return{type:v}}function F(e,t){return{type:u,reqId:e,request:t}}function M(e){return{type:l,enabled:e}}function G(){return{type:c}}function B(e){return{type:s,infoFormat:e}}function Z(){return{type:p}}function H(){return{type:f}}function U(e){return{type:d,reverseGeocodeData:e.data}}function z(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(U(e))})).catch((function(e){t(U(e))}))}}function q(){return{type:m}}function V(){return{type:E}}function Y(e){return{type:O,status:e}}function $(e,t){return{type:b,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null}}function K(e){return{type:g,point:e}}function X(e){return{type:h,enabled:e}}function W(e){return{type:S,index:e}}var J=function(){return{type:w}},Q=function(e){return{type:T,format:e}},ee=function(e){return{type:P,showCoordinateEditor:e}},te=function(e){return{type:j,layer:e}},ne=function(e){return{type:I,query:e}},re=function(e){return{type:A,trigger:e}},oe=function(e){return{type:N,value:e}},ie=function(e){return{type:k,isMounted:e}},ae=function(e){return{type:_,cfg:e}}},710615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(124852),o=n.n(r),i=n(675263),a=n.n(i),l=n(480681),u=n(807654),c=n.n(u),s=n(414293),p=n.n(s),f=n(743129),d=n(993451),m=n(80717),y=n(145869),v=n(680833),b=n(805346),g=n(552259),h=["labelId"];function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==E(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=(0,d.Z)(["placeholder","noResultsText"])(f.ZP.Creatable),I=(0,d.Z)(["placeholder","noResultsText"])(f.ZP);function A(e){var t,n=e.label,r=e.showArrow,i=e.limitsType;return o().createElement("span",null,(t=n,"scale"===i?"1 : "+Math.round(t):t),r&&o().createElement(o().Fragment,null,"Â ",o().createElement(l.Glyphicon,{glyph:"arrow-left"})))}function C(e){var t=e.id,n=e.value,r=e.placeholderId,i=e.noResultsTextId,a=e.createTextId,l=e.options,u=e.isValidNewOption,s=void 0===u?function(){return!0}:u,p=e.onChange,f=void 0===p?function(){}:p,d=e.disabled,m=e.loading;return o().createElement(j,{inputProps:{id:t},placeholder:r,noResultsText:i,value:n,isLoading:m,options:l,disabled:d,optionRenderer:A,valueRenderer:A,promptTextCreator:function(e){return o().createElement(b.Z,{msgId:a,msgParams:{label:e}})},isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!c()(t)&&s(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);f(c()(t)?void 0:P(P({},e),{},{value:t}))}})}function N(e){var t=e.title,n=e.layer,i=e.zoom,a=e.projection,u=e.resolutions,c=void 0===u?(0,g.MR)():u,s=e.defaultLimitsType,f=e.limitsTypesOptions,d=e.dpi,E=e.onChange,T=Math.round(i||0),j=O((0,r.useState)(s||f[0].value),2),A=j[0],N=j[1],k=n.maxResolution,_=n.minResolution,R=n.disableResolutionLimits,L=(0,g.Vj)(d,a);function x(e,t){var n,r=e.map((function(e){return e[A]}));return p()(t[A])||-1!==r.indexOf(t[A])?e:[t].concat((n=e,function(e){if(Array.isArray(e))return w(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||S(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e[A]>t[A]?-1:1}))}function D(e,t){return(0,g.ed)(e,t,{projection:a,resolutions:c})}var F=O((0,r.useState)([]),2),M=F[0],G=F[1],B=O((0,r.useState)(k&&{resolution:k,scale:k*L,zoom:(0,g.Pl)(k,c)}),2),Z=B[0],H=B[1],U=O((0,r.useState)(_&&{resolution:_,scale:_*L,zoom:(0,g.Pl)(_,c)}),2),z=U[0],q=U[1],V=O((0,r.useState)(!1),2),Y=V[0],$=V[1],K=O((0,r.useState)(),2),X=K[0],W=K[1],J=O((0,r.useState)(),2),Q=J[0],ee=J[1],te=(0,r.useRef)();function ne(){ee(void 0),W(void 0)}(0,r.useEffect)((function(){return te.current=!0,function(){te.current=!1}}),[]);var re=c.join(",");return(0,r.useEffect)((function(){var e=_&&{resolution:_,scale:_*L,zoom:(0,g.Pl)(_,c)},t=k&&{resolution:k,scale:k*L,zoom:(0,g.Pl)(k,c)},n=[e,t].filter((function(e){return e})).reduce(x,c.map((function(e,t){return{resolution:e,scale:e*L,zoom:t}})));H(t),q(e),G(n),ne()}),[L,re]),o().createElement("div",{className:"ms-visibility-limits-form"},o().createElement("div",{className:"ms-visibility-limits-form-title",style:{display:"flex",alignItems:"center"}},o().createElement("div",{style:{flex:1}},t),o().createElement(m.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"refresh",disabled:!(!R&&!Y),visible:"wms"===n.type,onClick:function(){"wms"!==n.type||Y||($(!0),ne(),(0,v.kB)(n).toPromise().then((function(e){if(te.current){var t,n,r=e.MaxScaleDenominator,o=e.MinScaleDenominator,i=!p()(r)&&D(r,"scale"),a=!p()(o)&&D(o,"scale");(function(e,t){var n,r,o=(n=e,r=t,p()(n)&&p()(r)?"layerProperties.visibilityLimits.serverValuesUpdateUndefined":p()(n)&&!p()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMinScale":!p()(n)&&p()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMaxScale":"layerProperties.visibilityLimits.serverValuesUpdate");W(o)})(r,o),a&&q(a),i&&H(i),E(P(P({},i&&{maxResolution:i.resolution}),a&&{minResolution:a.resolution}));var l=(null===(t=a||z)||void 0===t?void 0:t.resolution)||-1/0;((null===(n=i||Z)||void 0===n?void 0:n.resolution)||1/0)<l&&ee("layerProperties.visibilityLimits.rangeError"),$(!1)}})).catch((function(){te.current&&($(!1),ee("layerProperties.visibilityLimits.serverValuesError"))})))},tooltipId:"layerProperties.visibilityLimits.updateWMSCapabilities"},{Element:function(){return o().createElement(y.Z,{checked:!R,onClick:function(){E({disableResolutionLimits:!R}),ne()}})}}]})),o().createElement("label",{htmlFor:"ms-visibility-limits-max"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.maxValue"})),o().createElement(C,{id:"ms-visibility-limits-max",value:(null==Z?void 0:Z[A])&&{value:Z[A],label:Z[A],zoom:Z.zoom,limitsType:A},placeholderId:"layerProperties.visibilityLimits.maxValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:Y,isValidNewOption:function(e){return e>=((null==z?void 0:z[A])||0)},options:M.map((function(e){return P(P({},e),{},{value:e[A]+(e.delta||0),label:e[A],showArrow:e.zoom===T,disabled:!p()(null==z?void 0:z[A])&&e[A]<=z[A],limitsType:A})})),disabled:R||Y,onChange:function(e){var t=void 0===e.value?{}:p()(e.zoom)?D(e.value,A):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(E({maxResolution:t.resolution}),H(t),void 0!==e.value&&p()(e.zoom)){var n=x(M,t);G(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-min"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.minValue"})),o().createElement(C,{id:"ms-visibility-limits-min",value:(null==z?void 0:z[A])&&{value:z[A],label:z[A],zoom:z.zoom,limitsType:A},placeholderId:"layerProperties.visibilityLimits.minValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:Y,isValidNewOption:function(e){return e<=((null==Z?void 0:Z[A])||1/0)},options:M.map((function(e){return P(P({},e),{},{value:e[A],label:e[A],showArrow:e.zoom===T,disabled:!p()(null==Z?void 0:Z[A])&&e[A]>=Z[A],limitsType:A})})),disabled:R||Y,onChange:function(e){var t=void 0===e.value?{}:p()(e.zoom)?D(e.value,A):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(E({minResolution:t.resolution}),q(t),void 0!==e.value&&p()(e.zoom)){var n=x(M,t);G(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-type"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.type"})),o().createElement(I,{inputProps:{id:"ms-visibility-limits-type"},value:A,clearable:!1,options:f.map((function(e){var t=e.labelId;return P(P({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,h)),t&&{label:o().createElement(b.Z,{msgId:t})})})),disabled:R||Y,onChange:function(e){var t=e.value;N(t),ne()}}),X&&o().createElement(l.Alert,{bsStyle:"success"},o().createElement(b.Z,{msgId:X})),Q&&o().createElement(l.Alert,{bsStyle:"danger"},o().createElement(b.Z,{msgId:Q})))}N.propTypes={layer:a().object,zoom:a().number,onChange:a().func,resolutions:a().array,limitsTypesOptions:a().array,projection:a().string,dpi:a().number,defaultLimitsType:a().string},N.defaultProps={layer:{},onChange:function(){},limitsTypesOptions:[{value:"scale",labelId:"layerProperties.visibilityLimits.scale"},{value:"resolution",labelId:"layerProperties.visibilityLimits.resolution"}],dpi:g.$v};const k=N},779195:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(124852),o=n.n(r),i=(n(707169),n(967134)),a=n(74998),l=n.n(a),u=n(192579),c=["wrapperClassName","toolbarOptions"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}const p=function(e){var t=e.wrapperClassName,n=void 0===t?"ms-compact-text-editor":t,r=e.toolbarOptions,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return o().createElement(i.Editor,s({},a,{editorStyle:{minHeight:200},wrapperClassName:n,toolbar:{options:r||["fontFamily","blockType","inline","textAlign","list","link","colorPicker","remove","image","embedded"],image:{urlEnabled:!0,uploadEnabled:a.uploadEnabled||!1,alignmentEnabled:!1,uploadCallback:function(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){var e,n;(e=r.result,n={size:500,type:"image/jpeg",quality:.8},new Promise((function(t,r){var o=n||{},i=o.size,a=o.type,l=void 0===a?"image/png":a,u=o.quality,c=void 0===u?.9:u,s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=s.naturalWidth,n=s.naturalHeight,r=i,o=i/(e/n),a=document.createElement("canvas");a.setAttribute("width",r),a.setAttribute("height",o),a.getContext("2d").drawImage(s,0,0,r,o);var u=a.toDataURL(l,c);t(u)},s.onerror=function(e){r(e)},s.src=e}))).then((function(e){t({data:{link:e}})}))})),e?r.readAsDataURL(e):n()}))},previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:a.alt||{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"100%"}},fontFamily:{options:a.fonts||u.Km},link:{inDropdown:!1,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"]},inline:{inDropdown:!0,options:["bold","italic","underline","strikethrough","monospace"]},textAlign:{inDropdown:!0},list:{inDropdown:!0},embedded:{embedCallback:function(e){var t=/<iframe.*? src="(.*?)"/.exec(l()(e));return t&&t[1]||e},defaultSize:{height:"auto",width:"100%"}}}}))}},501262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(727418),o=n.n(r),i=n(675263),a=n.n(i),l=n(124852),u=n.n(l),c=n(180307),s=n.n(c),p=n(480681),f=n(38560),d=n(805346),m=n(807472);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function b(e,t,n){return t=h(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(e,g()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function S(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:String(t)}var T=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return S(E(e=b(this,t,[].concat(r))),"setConfirmRef",(function(t){return e.confirm=t,e.confirm})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.focusConfirm&&s().findDOMNode(this.confirm).focus()}},{key:"render",value:function(){return u().createElement(m.Z,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:o()({},this.props.style,{display:this.props.show?"block":"none"})},u().createElement("span",{role:"header"},u().createElement("span",{className:"user-panel-title"},this.props.title),u().createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?u().createElement(p.Glyphicon,{glyph:this.props.closeGlyph}):u().createElement("span",null,"Ã"))),u().createElement("div",{role:"body"},this.props.children),u().createElement("div",{role:"footer"},u().createElement(p.ButtonGroup,null,u().createElement(f.Z,{ref:this.setConfirmRef,onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),u().createElement(f.Z,{onClick:this.props.onClose},this.props.closeText))))}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(u().Component);S(T,"propTypes",{show:a().bool,draggable:a().bool,onClose:a().func,onConfirm:a().func,onSave:a().func,modal:a().bool,closeGlyph:a().string,style:a().object,buttonSize:a().string,inputStyle:a().object,title:a().node,confirmButtonContent:a().node,confirmButtonDisabled:a().bool,closeText:a().node,confirmButtonBSStyle:a().string,focusConfirm:a().bool}),S(T,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:u().createElement(d.Z,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:u().createElement(d.Z,{msgId:"confirm"})||"Confirm",closeText:u().createElement(d.Z,{msgId:"close"}),includeCloseButton:!0,focusConfirm:!1});const P=T},943457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>jt});var r=n(322843),o=n(49977),i=n.n(o),a=n(423570),l=n.n(a),u=n(178598),c=n(782904),s=n(580416),p=n(197395),f=n(921914),d=n(14281),m=n(900012),y=n(902054),v=n(800827),b=n(675110);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==g(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const w={loadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(d.Bm).switchMap((function(e){var t,r=e.features,o=e.override,a=(0,y.Yu)(n());if(!o){var l,u=a.map((function(e){return e.id}));return(l=i().Observable).of.apply(l,O(r.map((function(e){return u.includes(e.id)?(0,s.tV)(e.id,"layer",{title:e.title,description:e.description,style:e.style,features:e.features}):(0,s.A4)(e)}))))}return(t=i().Observable).of.apply(t,O(a.map((function(e){return(0,s.$o)(e.id)}))).concat(O(r.map((function(e){return(0,s.A4)(e)})))))}))},newAnnotationEpic:function(e){return e.ofType(d.CD).switchMap((function(){var e={id:(0,m.t1)(l()()),title:"New annotations",type:"vector",features:[],style:{},visibility:!0,rowViewer:m.jB};return i().Observable.of((0,f.aN)(),(0,s.A4)(e),(0,s.UG)(e.id,"layer"),(0,c.Xg)(m.jB,"enabled",!0))}))},editAnnotationEpic:function(e,t){var n=t.getState;return e.ofType(d.A1).switchMap((function(e){var t,r=(0,b.Iz)(n());return(t=i().Observable).of.apply(t,[(0,f.aN)()].concat(O((null==r?void 0:r.id)!==(null==e?void 0:e.id)?[(0,s.UG)(e.id,"layer")]:[]),[(0,c.Xg)(m.jB,"enabled",!0)]))}))},downloadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(d.HN).switchMap((function(e){var t=e.annotations;try{var r=(0,m.rE)(t),o=(0,v.Zs)(n());return(0,u.saveAs)(new Blob([JSON.stringify(r)],{type:"application/json;charset=utf-8"}),"".concat(o.length>0&&o||m.jB,".json")),i().Observable.empty()}catch(e){return i().Observable.of((0,p.vU)({title:"annotations.title",message:"annotations.downloadError",autoDismiss:5,position:"tr"}))}}))},confirmCloseAnnotationsEpic:function(e){return e.ofType(d.bI).switchMap((function(e){var t,n=e.layer;return i().Observable.of((0,c.Xg)(m.jB,"enabled",!1),null!=n&&null!==(t=n.features)&&void 0!==t&&t.length?(0,s.tV)(n.id,"layer",{invalidFeatures:null}):(0,s.$o)(n.id))}))},removeAnnotationsEpic:function(e){return e.ofType(d.DX).switchMap((function(e){return i().Observable.of((0,f.g)(),(0,f.Mc)(),(0,s.$o)(e.id))}))},mergeAnnotationsFeaturesEpic:function(e,t){var n=t.getState;return e.ofType(d.QN).switchMap((function(e){var t,r=e.annotation,o=function(e){var t,n,o,i,a,l;return{features:[].concat(O((null==e?void 0:e.features)||[]),O((null==r?void 0:r.features)||[])),style:E(E(E({},null==r?void 0:r.style),null==e?void 0:e.style),{},{body:E(E(E({},null==r||null===(t=r.style)||void 0===t?void 0:t.body),null==e||null===(n=e.style)||void 0===n?void 0:n.body),{},{rules:[].concat(O((null==e||null===(o=e.style)||void 0===o||null===(i=o.body)||void 0===i?void 0:i.rules)||[]),O((null==r||null===(a=r.style)||void 0===a||null===(l=a.body)||void 0===l?void 0:l.rules)||[]))})})}},a=n(),u=(0,b.CA)(a,e.id),c=(0,y.Gu)(a);return(t=i().Observable).of.apply(t,O(c?[(0,d.x$)(o(c))]:[]).concat([(0,s.tV)(u.id,"layer",E({_v_:l()()},o(u)))]))}))}};var T=n(79267),P=n(124852),j=n.n(P),I=n(180307),A=n(171703),C=n(22222),N=n(717621),k=n.n(N),_=n(801550),R=n(607147),L=n(93152),x=n(480681),D=n(21090),F=n(813292),M=n.n(F),G=n(406557),B=n.n(G),Z=n(623525),H=n(898631),U=n(38560),z=n(815135),q=n(50993),V=n(675263),Y=n.n(V),$=n(260024);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oe(r.key),r)}}function Q(e,t,n){return t=te(t),function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ee()?Reflect.construct(t,n||[],te(e).constructor):t.apply(e,n))}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e,t,n){return(t=oe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:String(t)}var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return j().createElement($.Z,X({},this.props.options,{items:[],isDraggable:!0,enableHeightField:this.props.enableHeightField,type:this.props.featureType,components:this.props.selected&&this.props.selected.geometry&&this.props.selected.geometry.coordinates&&this.props.selected.geometry.coordinates.length?(0,m.OQ)(this.props.selected.geometry):[],properties:this.props.selected&&this.props.selected.properties||{},onComplete:function(){},onChangeRadius:this.props.onChangeRadius,aeronauticalOptions:this.props.aeronauticalOptions,onChangeFormat:this.props.onChangeFormat,format:this.props.format,mapProjection:this.props.mapProjection,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:this.props.renderer,onValidateFeature:this.props.onValidateFeature,onChange:function(t,n,r,o){var i=t.map((function(e){return[e.lon,e.lat].concat(function(e){if(Array.isArray(e))return W(e)}(t=void 0!==e.height?[e.height]:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var t}));e.props.onChange(i,n,r,o),e.props.onValidateFeature()}}))}}])&&J(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(j().Component);re(ie,"propTypes",{components:Y().array,options:Y().object,onRemove:Y().func,onChange:Y().func,transitionProps:Y().object,selected:Y().object,featureType:Y().string,format:Y().string,mapProjection:Y().string,onComplete:Y().func,onHighlightPoint:Y().func,onChangeFormat:Y().func,onChangeRadius:Y().func,onSetInvalidSelected:Y().func,aeronauticalOptions:Y().object,onChangeText:Y().func,renderer:Y().string,onValidateFeature:Y().func,enableHeightField:Y().bool}),re(ie,"defaultProps",{selected:{},options:{},components:[],onRemove:null,onChange:function(){},onComplete:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onSetInvalidSelected:function(){},onChangeText:function(){},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},onValidateFeature:function(){},enableHeightField:!1});const ae=ie;var le=n(805346),ue=n(73532),ce=n(868195);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function pe(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){var r;return r=function(e,t){if("object"!=se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==se(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=(0,z.Z)(U.Z),ge="UPDATE_ANNOTATIONS_FEATURES",he="UNDO_ANNOTATIONS_FEATURES",Ee="REDO_ANNOTATIONS_FEATURES",Oe=ve({},ge,(function(e,t){return t(e)})),Se=(0,D.ZP)((function(e,t){return(Oe[t.type]||B())(e,t.callback)}),{limit:20,undoType:he,redoType:Ee,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),we={};const Te=(0,ce.injectIntl)((function(e){var t,n,r,o,i,a,u,c,s,p,f,d,y,v,b=e.selectedId,g=e.value,h=e.mapType,E=e.map,O=e.maxZoom,S=void 0===O?18:O,w=e.onSelect,T=void 0===w?function(){}:w,I=e.onChange,A=void 0===I?function(){}:I,C=e.onZoomTo,N=void 0===C?function(){}:C,k=e.onHighlight,_=void 0===k?function(){}:k,R=e.projection,L=e.intl,D=void 0===L?{}:L,F=e.mapInteractionsSupport,G=e.coordinatesFormat,B=e.onChangeCoordinatesFormat,U=void 0===B?function(){}:B,z=e.tab,V=void 0===z?"coordinates":z,Y=e.onSelectTab,$=void 0===Y?function(){}:Y,K=e.svgSymbolsPath,X=e.lineDashOptions,W=e.enable3dStyleOptions,J=e.geometryEditorOptions,Q=e.defaultTextLabel,ee=e.defaultSymbolizers,te=e.geodesic,ne=e.fonts,re=void 0===ne?["Arial","Verdana","Helvetica","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT"]:ne,oe=(y=(0,P.useReducer)(Se,{present:g,past:[],future:[]}),v=2,function(e){if(Array.isArray(e))return e}(y)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(y,v)||fe(y,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),ie=oe[0],ce=oe[1],se=(null==ie?void 0:ie.present)||ie||we,de=((null==se?void 0:se.features)||[]).find((function(e){return(null==e?void 0:e.id)===b})),me=function(e,t){var n=e.symbolizerBlock,r=e.ruleBlock;return{symbolizerBlock:Object.keys(n).reduce((function(e,r){return ye(ye({},e),{},ve({},r,ye(ye({},n[r]),{},{defaultProperties:m._q[r]||n[r].defaultProperties,params:Object.keys(n[r].params).reduce((function(e,o){var i,a=n[r].params[o];return["Circle"].includes(r)&&["geodesic","radius","msClampToGround","msGeometry"].includes(o)||["Text"].includes(r)&&["label","msGeometry"].includes(o)||["Line","Fill"].includes(r)&&["msGeometry"].includes(o)||["Point","Circle"].includes(null==t||null===(i=t.properties)||void 0===i?void 0:i.annotationType)&&["msGeometry"].includes(o)?e:ye(ye({},e),{},ve({},o,a))}),{})})))}),{}),ruleBlock:r}}((0,ue.Z)({exactMatchGeometrySymbol:!0,enable3dStyleOptions:W}),de),Oe=me.symbolizerBlock,Te=me.ruleBlock,Pe=F;function je(e){ce({type:ge,callback:function(t){return e(t)}})}function Ie(e,t){$("coordinates",de);var n=l()();je((function(r){var o,i,a,u={type:"Feature",id:n,properties:ye(ye({},t),{},{id:n,name:e,annotationType:e}),geometry:null};return ye(ye({},r),{},{features:[].concat(pe((null==r?void 0:r.features)||[]),[u]),style:ye(ye({},null==r?void 0:r.style),{},{format:"geostyler",body:ye(ye({},null==r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:[].concat(pe((null==r||null===(i=r.style)||void 0===i||null===(a=i.body)||void 0===a?void 0:a.rules)||[]),[{name:"",filter:["==","id",n],mandatory:"Point"!==e,ruleId:l()(),symbolizers:[ye({symbolizerId:l()()},(0,m.ll)(u,ee))]}])})})})})),T(n)}function Ae(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureType?(0,q.cz)(e,{formatNumber:null!=D&&D.formatNumber?D.formatNumber:function(e){return e}}):[e]}function Ce(e,t,n){je((function(r){return ye(ye({},r),{},{features:((null==r?void 0:r.features)||[]).filter((function(t){var r;return!n||(null==t||null===(r=t.properties)||void 0===r?void 0:r.measureId)!==e})).reduce((function(r,o){return[].concat(pe(r),pe((null==o?void 0:o.id)!==e?[o]:n?Ae(t):[t]))}),[])})}))}function Ne(e){ce({type:ge,callback:function(t){return ye(ye({},t),{},{features:(t.features||[]).filter((function(e){var t;return(null==e||null===(t=e.properties)||void 0===t?void 0:t.measureId)!==b})).reduce((function(t,n){var r;if((null==n?void 0:n.id)!==b)return[].concat(pe(t),[n]);var o=(0,m.U0)(n),i=ye(ye({},n),{},{geometry:ye(ye({},null==o?void 0:o.geometry),{},{coordinates:(0,m._5)(null==o||null===(r=o.geometry)||void 0===r?void 0:r.type,e)})});return[].concat(pe(t),pe((0,m._n)(i)?Ae(i):[i]))}),[])})}})}function ke(){var e=(((null==se?void 0:se.style)||{}).body||{}).rules;return{name:"selected feature style",rules:(void 0===e?[]:e).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==de||null===(n=de.properties)||void 0===n?void 0:n.id)}))}}(0,P.useEffect)((function(){var e,t,n,r,o,i,a,l,u=((null==ie||null===(e=ie.present)||void 0===e?void 0:e.features)||[]).filter(m._n),c=((null==ie||null===(t=ie.present)||void 0===t?void 0:t.features)||[]).filter((function(e){return!(0,m._n)(e)})),s=u.map((function(e){return e.id}));A(ye(ye({},null==ie?void 0:ie.present),{},{features:u,style:ye(ye({},null==ie||null===(n=ie.present)||void 0===n?void 0:n.style),{},{format:"geostyler",body:ye(ye({},null==ie||null===(r=ie.present)||void 0===r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:((null==ie||null===(i=ie.present)||void 0===i||null===(a=i.style)||void 0===a||null===(l=a.body)||void 0===l?void 0:l.rules)||[]).filter((function(e){var t=e.filter;return s.includes(null==t?void 0:t[2])}))})}),invalidFeatures:(null==c?void 0:c.length)>0?c:null}),(0,m._n)(de)?de:null,null==ie?void 0:ie.present)}),[null==ie?void 0:ie.present]);var _e=((null==se?void 0:se.features)||[]).filter((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType}));return j().createElement("div",{className:"ms-features-editor"},j().createElement("div",{className:"ms-features-editor-list"},j().createElement("div",{className:"ms-features-editor-list-header"},j().createElement(x.ButtonGroup,null,j().createElement(be,{className:"square-button-md no-border",onClick:function(){ce({type:he})},disabled:0===((null==ie||null===(t=ie.past)||void 0===t?void 0:t.length)||0)},j().createElement(x.Glyphicon,{glyph:"undo"})),j().createElement(be,{className:"square-button-md no-border",onClick:function(){ce({type:Ee})},disabled:0===((null==ie||null===(n=ie.future)||void 0===n?void 0:n.length)||0)},j().createElement(x.Glyphicon,{glyph:"redo"}))),j().createElement(x.ButtonGroup,null,j().createElement(be,{tooltipId:"annotations.titles.marker",className:"square-button-md no-border",onClick:function(){return Ie("Point")}},j().createElement(x.Glyphicon,{glyph:"point-plus"})),j().createElement(be,{tooltipId:"annotations.titles.line",className:"square-button-md no-border",onClick:function(){return Ie("LineString")}},j().createElement(x.Glyphicon,{glyph:"polyline-plus"})),j().createElement(be,{tooltipId:"annotations.titles.polygon",className:"square-button-md no-border",onClick:function(){return Ie("Polygon")}},j().createElement(x.Glyphicon,{glyph:"polygon-plus"})),j().createElement(be,{tooltipId:"annotations.titles.text",className:"square-button-md no-border",onClick:function(){return Ie("Text",{label:Q||""})}},j().createElement(x.Glyphicon,{glyph:"font-add"})),j().createElement(be,{tooltipId:"annotations.titles.circle",className:"square-button-md no-border",onClick:function(){return Ie("Circle",{geodesic:!(null==te||!te.Circle)})}},j().createElement(x.Glyphicon,{glyph:"1-circle-add"})))),!(null!=se&&null!==(r=se.features)&&void 0!==r&&r.length)&&j().createElement("div",{className:"ms-features-editor-list-empty"},j().createElement(le.Z,{msgId:"annotations.addGeometry"})),j().createElement("ul",{className:"ms-features-editor-list-body"},_e.map((function(e){var t,n=null==e?void 0:e.id,r=b===n;return j().createElement("li",{key:n,onClick:function(){return r?function(){}:T(n,(0,m._n)(e)?e:null)},className:"ms-features-editor-item ".concat(r?" selected":""),onMouseEnter:function(){b!==n&&(0,m._n)(e)&&_("feature",e)},onMouseLeave:function(){_("feature",null)}},j().createElement("div",null,j().createElement(x.Glyphicon,{glyph:(0,m.JX)(e)})),j().createElement("div",{style:{flex:1}},j().createElement("input",{value:null==e||null===(t=e.properties)||void 0===t?void 0:t.name,type:"text",onChange:function(t){return Ce(n,ye(ye({},e),{},{properties:ye(ye({},null==e?void 0:e.properties),{},{name:t.target.value})}))}})),j().createElement(x.Glyphicon,{glyph:(0,m._n)(e)?"ok-sign text-success":"exclamation-mark text-danger"}),j().createElement(x.ButtonGroup,null,j().createElement(be,{disabled:!(0,m._n)(e),bsStyle:r?"primary":"default",className:"square-button-md",tooltipId:"annotations.zoomToGeometry",onClick:function(t){t.stopPropagation(),N(M()(e),"EPSG:4326",S)}},j().createElement(x.Glyphicon,{glyph:"zoom-to"})),j().createElement(be,{className:"square-button-md",bsStyle:r?"primary":"default",tooltipId:"annotations.removeGeometry",onClick:function(e){e.stopPropagation(),function(e){je((function(t){return ye(ye({},t),{},{features:((null==t?void 0:t.features)||[]).filter((function(t){var n;return(null==t?void 0:t.id)!==e&&(null==t||null===(n=t.properties)||void 0===n?void 0:n.measureId)!==e}))})}))}(n)}},j().createElement(x.Glyphicon,{glyph:"trash"}))))})))),!de&&j().createElement("div",{className:"ms-features-editor-tools-empty"},j().createElement("div",null,j().createElement(x.Glyphicon,{glyph:"comment"}),j().createElement("div",null,j().createElement(le.Z,{msgId:"annotations.selectAnnotationFeature"})))),de&&j().createElement("div",{className:"ms-features-editor-tools"},j().createElement(x.Nav,{bsStyle:"tabs",activeKey:V},j().createElement(x.NavItem,{key:"coordinates",eventKey:"coordinates",onClick:function(){return $("coordinates",de)}},j().createElement(le.Z,{msgId:"annotations.tabCoordinates"})),j().createElement(x.NavItem,{key:"style",eventKey:"style",onClick:function(){return $("style",de)}},j().createElement(le.Z,{msgId:"annotations.tabStyle"}))),j().createElement("div",{className:"ms-features-editor-tools-body"},"coordinates"===V&&j().createElement(j().Fragment,null,j().createElement(ae,{key:de.id,enableHeightField:h===H.Bk.CESIUM&&!(null!=de&&null!==(o=de.properties)&&void 0!==o&&o.geodesic),format:G,onChangeFormat:U,mapProjection:R,options:J,onHighlightPoint:function(e){_("coordinate",e&&{type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:{}})},onChangeRadius:function(e){Ce(null==de?void 0:de.id,ye(ye({},de),{},{properties:ye(ye({},null==de?void 0:de.properties),{},{radius:e})}))},selected:ye(ye({},(0,m.U0)(de)),{},{properties:ye(ye({},null==de?void 0:de.properties),{},{valueText:null==de||null===(i=de.properties)||void 0===i?void 0:i.label})}),featureType:null==de||null===(a=de.properties)||void 0===a?void 0:a.annotationType,renderer:m.jB,onChange:Ne,onSetInvalidSelected:function(e,t){"coords"===e&&Ne(t)}}),"Text"===(null==de||null===(u=de.properties)||void 0===u?void 0:u.annotationType)&&j().createElement(x.FormGroup,{className:"ms-annotations-label-input",key:"label",controlId:"ms-annotations-label-input",validationState:null!=de&&null!==(c=de.properties)&&void 0!==c&&c.label?void 0:"error"},j().createElement(x.ControlLabel,null,j().createElement(le.Z,{msgId:"annotations.titles.text"})),j().createElement(x.FormControl,{type:"text",value:(null==de||null===(s=de.properties)||void 0===s?void 0:s.label)||"",onChange:function(e){return Ce(null==de?void 0:de.id,ye(ye({},de),{},{properties:ye(ye({},null==de?void 0:de.properties),{},{label:e.target.value})}))}}))),"style"===V&&j().createElement("div",null,j().createElement(Z.Z,{ruleBlock:Te,symbolizerBlock:Oe,config:{geometryType:"annotation-".concat(null==de||null===(p=de.properties)||void 0===p||null===(f=p.annotationType)||void 0===f?void 0:f.toLowerCase()),simple:!0,fonts:re,svgSymbolsPath:K,lineDashOptions:X},rules:(null===(d=ke())||void 0===d?void 0:d.rules)&&pe(ke().rules).reverse(),onChange:function(e){return t=pe(e).reverse(),void je((function(e){var n=null==e?void 0:e.style,r=(e.features||[]).reduce((function(e,r){var o;if(r.id===de.id)return[].concat(pe(e),pe(t.map((function(e){return ye(ye({},e),{},{filter:e.filter||["==","id",de.properties.id]})}))));var i=((null==n||null===(o=n.body)||void 0===o?void 0:o.rules)||[]).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==r||null===(n=r.properties)||void 0===n?void 0:n.id)}));return[].concat(pe(e),pe(i))}),[]),o=ye(ye({},n),{},{format:"geostyler",body:ye(ye({},null==n?void 0:n.body),{},{rules:r})});return ye(ye({},e),{},{style:o})}));var t}})))),Pe&&j().createElement(Pe,{key:null==de?void 0:de.id,active:!!de&&"coordinates"===V,map:E,mapType:h,feature:de,geodesic:te,onChange:function(e){Ce(de.id,e,!0)}}))}));var Pe=n(460604),je="ms-annotations-editor-target",Ie="ANNOTATIONS_ADDITIONAL_LAYERS_OWNER";function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){var r;return r=function(e,t){if("object"!=Ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ae(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=ke(ke({},H.Bk.OPENLAYERS,(0,P.lazy)((function(){return Promise.all([n.e(18672),n.e(52043),n.e(15265),n.e(47202),n.e(69141),n.e(51554),n.e(49414),n.e(85828),n.e(72445),n.e(37974),n.e(39547)]).then(n.bind(n,65433))}))),H.Bk.CESIUM,(0,P.lazy)((function(){return Promise.all([n.e(65792),n.e(29379),n.e(45477),n.e(50172),n.e(37532),n.e(65417)]).then(n.bind(n,37532))}))),Re=ke(ke({},H.Bk.OPENLAYERS,(0,P.lazy)((function(){return Promise.all([n.e(18672),n.e(52043),n.e(15265),n.e(47202),n.e(69141),n.e(51554),n.e(49414),n.e(85828),n.e(72445),n.e(37974),n.e(1577),n.e(95892),n.e(47238)]).then(n.bind(n,487959))}))),H.Bk.CESIUM,(0,P.lazy)((function(){return Promise.all([n.e(65792),n.e(29379),n.e(45477),n.e(50172),n.e(79589)]).then(n.bind(n,43982))}))),Le=function(e){return _e[e]&&Re[e]};const xe=function(e){var t=e.map,n=e.active,r=e.mapType,o=e.feature,i=e.geodesic,a=void 0===i?{}:i,l=e.onChange,u=void 0===l?function(){}:l,c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).properties;return"Text"===(null==e?void 0:e.annotationType)?"Point":null==e?void 0:e.annotationType};if(!Le(r))return null;var s=_e[r],p=Re[r],f=(0,m._n)(o,!0),d=c(o),y=!!a[d];return j().createElement(P.Suspense,{fallback:null},j().createElement(j().Fragment,null,j().createElement(s,{map:t,active:n&&null===o.geometry,depthTestAgainstTerrain:!1,geometryType:d,geodesic:y,getObjectsToExcludeOnPick:function(){return[]},onDrawEnd:function(e){var t,n,r=e.feature;u(Ne(Ne({},o),{},{properties:Ne(Ne({},null==o?void 0:o.properties),{},{geodesic:y},void 0!==(null==r||null===(t=r.properties)||void 0===t?void 0:t.radius)&&{radius:null==r||null===(n=r.properties)||void 0===n?void 0:n.radius}),geometry:r.geometry}))}}),j().createElement(p,{map:t,active:n&&f,geojson:o,getGeometryType:c,onEditEnd:function(e){return u(e)}})))};function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||Ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=De(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==De(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){if(e){if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e){var t;if(null==e||null===(t=e.geometry)||void 0===t||!t.type)return[];if("Point"===e.geometry.type&&!e.geometry.coordinates.some(m.gS))return[Ge(Ge({},e),{},{properties:{geometryType:"Point"}})];var n=Fe(M()(e),4),r=n[0],o=n[1],i=n[2],a=n[3],l={type:"Feature",geometry:{type:"LineString",coordinates:[[r,o],[r,a],[i,a],[i,o],[r,o]]},properties:{geometryType:"LineString"}};return"LineString"===e.geometry.type?[l].concat(Be(e.geometry.coordinates.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):"Polygon"===e.geometry.type?[l].concat(Be(e.geometry.coordinates[0].map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):[e]}var ze=(0,A.connect)((0,C.P1)([(0,R.XL)(m.jB,"ready"),y.F3,v.Od,L.E$,y.Gu,y.qs],(function(e,t,n,r,o,i){var a,l;return{enabled:e,selected:t,maxZoom:(null==n?void 0:n.zoom)||18,projection:null==n?void 0:n.projection,enable3dStyleOptions:!!r,activeClickEventListener:null==n||null===(a=n.eventListeners)||void 0===a||null===(l=a.click)||void 0===l?void 0:l[0],session:o,selectedId:i}})),{onChange:s.tV,onZoomTo:_.Px,onUpdateALayer:Pe.W,onRemoveALayer:Pe.fU,onStoreSession:d.x$,setSelectedId:d.ym})((function(e){var t=e.enabled,n=e.targetId,r=void 0===n?je:n,o=e.mapType,i=e.map,a=e.selected,l=e.onChange,u=e.onZoomTo,c=e.maxZoom,s=void 0===c?18:c,p=e.projection,f=e.onUpdateALayer,d=void 0===f?function(){}:f,y=e.onRemoveALayer,v=void 0===y?function(){}:y,b=e.symbolsPath,g=void 0===b?"product/assets/symbols/symbols.json":b,h=e.lineDashOptions,E=e.enable3dStyleOptions,O=e.geometryEditorOptions,S=e.format,w=void 0===S?"decimal":S,T=e.defaultTextAnnotation,A=void 0===T?"New":T,C=e.defaultPointType,N=e.defaultShape,_=e.defaultShapeStrokeColor,R=e.defaultShapeFillColor,L=e.defaultShapeSize,x=e.geodesic,D=e.activeClickEventListener,F=e.fonts,M=e.onStoreSession,G=e.session,B=e.selectedId,Z=e.setSelectedId,H=void 0===Z?function(){}:Z,U=document.querySelector("#".concat(r)),z=Fe((0,P.useState)(w),2),q=z[0],V=z[1],Y=Fe((0,P.useState)("coordinates"),2),$=Y[0],K=Y[1];function X(){return g.includes(".json")?g:"".concat(g,"symbols.json")}function W(e,t){var n;Le(o)&&d(a.id,Ie,"override",Ge({visibility:!0},e&&!t&&!D&&{features:null==a||null===(n=a.features)||void 0===n?void 0:n.filter((function(t){var n=t.id,r=t.properties;return n!==e.id&&(null==r?void 0:r.measureId)!==e.id}))})),d("ANNOTATIONS_SELECTED_LAYER",Ie,"overlay",{type:"vector",visibility:!0,features:e?Ue(e):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#111111",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}})}return(0,P.useEffect)((function(){return t&&null!=a&&a.id&&d(a.id,Ie,"override",{visibility:!0}),function(){v({owner:Ie})}}),[t]),(0,P.useEffect)((function(){var e=((null==a?void 0:a.features)||[]).find((function(e){return e.id===B}));t&&(0,m._n)(e)&&W(e,"style"===$)}),[D,o,t]),t&&U&&a?(0,I.createPortal)(j().createElement("div",{className:"ms-annotations-editor"},j().createElement(Te,{key:a._v_,selectedId:B,geodesic:{Circle:!1!==x},fonts:F,defaultSymbolizers:function(){if("symbol"!==C)return{};var e=k()(R||"#dddddd"),t=k()(_||"#777777");return{Point:{kind:"Mark",wellKnownName:X().replace(/[^\/]*.json$/,"".concat(N,".svg")),color:e.toHexString(),fillOpacity:e.getAlpha(),strokeColor:t.toHexString(),strokeOpacity:t.getAlpha(),strokeWidth:1,radius:L/2,rotate:0}}}(),svgSymbolsPath:X(),lineDashOptions:h,coordinatesFormat:q,enable3dStyleOptions:E,geometryEditorOptions:O,defaultTextLabel:A,onChangeCoordinatesFormat:V,tab:$,onSelectTab:function(e,t){K(e),W(t,"style"===e)},mapInteractionsSupport:!D&&xe,value:G||{features:(null==a?void 0:a.features)||[],style:(null==a?void 0:a.style)||{}},onHighlight:function(e,t){d("ANNOTATIONS_HIGHLIGHT_LAYERS",Ie,"overlay",{type:"vector",visibility:!0,features:t?Ue(t):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#555555",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"Square",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:3,radius:6,rotate:0,msBringToFront:!0}]}]}}})},mapType:o,map:i,maxZoom:s,projection:p,onSelect:function(e,t){H(e),W(t,"style"===$)},onChange:function(e,t,n){var r,o;l(a.id,"layers",e),W(t,"style"===$),r=e.invalidFeatures,d("ANNOTATIONS_INVALID_LAYER",Ie,"overlay",{type:"vector",visibility:!0,features:r?(o=r,(o||[]).filter((function(e){var t=e.geometry;return(null==t?void 0:t.type)&&["LineString","Polygon"].includes(t.type)})).reduce((function(e,t){var n=("LineString"===t.geometry.type?t.geometry.coordinates:t.geometry.coordinates[0]).filter((function(e){return!e.some(m.gS)}));return[].concat(Be(e),Be(n.length>1?[{type:"Feature",geometry:{type:"LineString",coordinates:n},properties:Ge(Ge({},null==t?void 0:t.properties),{},{geometryType:"LineString"})}]:[]),Be(n.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}}))))}),[])):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#ff0000",width:2,opacity:1,cap:"round",join:"round",msClampToGround:!1,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}}),M(n)},onZoomTo:u})),U):null}));const qe=ze;var Ve=n(623560),Ye=n.n(Ve),$e=n(548403),Ke=n.n($e),Xe=n(125376),We=n(55105),Je=n(629859),Qe=n(697111),et=n(779195);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t,n){var r;return r=function(e,t){if("object"!=tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==tt(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var at=(0,Qe.Z)("onEditorStateChange","editorState")(et.Z);const lt=function(e){var t,n,r=e.preview,o=e.properties,i=void 0===o?{}:o,a=e.fields,l=void 0===a?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:a,u=e.onChange,c=void 0===u?function(){}:u,s=(t=(0,P.useState)(l.filter((function(e){return"html"===e.type})).reduce((function(e,t){return rt(rt({},e),{},ot({},t.name,(0,Je.n0)(i[t.name]||"")))}),{})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=s[0],f=s[1];return r?j().createElement("div",{className:"ms-annotations-fields preview"},l.map((function(e){var t=e.showLabel;return j().createElement("div",{key:e.name,className:"ms-annotations-field"},t&&j().createElement("div",{className:"ms-annotations-field-label"},j().createElement(le.Z,{msgId:"annotations.field.".concat(e.name)})),j().createElement("div",{className:"ms-annotations-field-value",dangerouslySetInnerHTML:{__html:i[e.name]}}))}))):j().createElement("form",{className:"ms-annotations-fields"},l.map((function(e){var t=Ye()(e.validator)?e.validator:null,n=t&&t(i[e.name]),r=e.validateError||"annotations.mandatory",o=e.showLabel,a=e.editable;return"text"===e.type?j().createElement(x.FormGroup,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&j().createElement(x.ControlLabel,null,j().createElement(le.Z,{msgId:"annotations.field.".concat(e.name)})),j().createElement(x.FormControl,{disabled:!a,type:"text",value:i[e.name],onChange:function(t){return c(ot({},e.name,t.target.value))}}),t&&!n&&j().createElement(x.HelpBlock,null,j().createElement(le.Z,{msgId:r}))):"html"===e.type?j().createElement(x.FormGroup,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&j().createElement(x.ControlLabel,null,j().createElement(le.Z,{msgId:"annotations.field.".concat(e.name)})),a?j().createElement(at,{editorState:p[e.name],onEditorStateChange:function(t){var n=(0,Je.sc)(p[e.name]);(0,Je.sc)(t)!==n&&(c(ot({},e.name,(0,Je.sc)(t))),f((function(n){return rt(rt({},n),{},ot({},e.name,t))})))}}):j().createElement("div",{dangerouslySetInnerHTML:{__html:i[e.name]}}),t&&!n&&j().createElement(x.HelpBlock,null,j().createElement(le.Z,{msgId:r}))):null})))};var ut=n(501262),ct=n(399534),st=n(710615);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}var ft=["fields","onEdit","onRemove","onDownload"],dt=["title","description"];function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==pt(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ht(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Et=(0,z.Z)(U.Z),Ot=(0,A.connect)((function(){return{}}),{onRemove:d._x,onDownload:d.LR,onEdit:d.VR})((function(e){var t=e.fields,n=e.onEdit,r=void 0===n?function(){}:n,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onDownload,l=void 0===a?function(){}:a,u=ht(e,ft),c=bt((0,P.useState)(!1),2),s=c[0],p=c[1];return j().createElement("div",null,j().createElement("div",null,j().createElement(x.ButtonGroup,null,j().createElement(Et,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.edit",onClick:function(){return r(u.id)}},j().createElement(x.Glyphicon,{glyph:"pencil"})),j().createElement(Et,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.remove",onClick:function(){return p(!0)}},j().createElement(x.Glyphicon,{glyph:"trash"})),j().createElement(Et,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return l([u])}},j().createElement(x.Glyphicon,{glyph:"download"})))),j().createElement(lt,{preview:!0,properties:vt({title:null==u?void 0:u.title,description:null==u?void 0:u.description},null==u?void 0:u.options),fields:t}),j().createElement(ct.Z,null,j().createElement(ut.Z,{show:s,modal:!0,onClose:function(){return p(!1)},onConfirm:function(){i(u.id),p(!1)},confirmButtonBSStyle:"primary",closeGlyph:"1-close",confirmButtonContent:j().createElement(le.Z,{msgId:"annotations.confirm"}),closeText:j().createElement(le.Z,{msgId:"annotations.cancel"})},j().createElement(le.Z,{msgId:"annotations.undoDeleteFeature"}))))})),St=(0,A.connect)((0,C.P1)([(0,R.Yq)(m.jB),function(e){return(0,We.ic)(e,{height:!0})},y.F3,v.Od],(function(e,t,n,r){var o,i;return{enabled:e,style:t,selected:e?n:null,activeClickEventListener:null==r||null===(o=r.eventListeners)||void 0===o||null===(i=o.click)||void 0===i?void 0:i[0],projection:null==r?void 0:r.projection,zoom:null==r?void 0:r.zoom,resolutions:null==r?void 0:r.resolutions}})),{onClose:d.L0,onCancel:d.Hl,onReady:c.Xg.bind(null,m.jB,"ready"),onChange:s.tV,onDownload:d.LR})((function(e){var t=e.targetId,n=void 0===t?je:t,r=e.selected,o=e.style,i=e.enabled,a=e.onReady,l=void 0===a?function(){}:a,u=e.onClose,c=void 0===u?function(){}:u,s=e.onChange,p=void 0===s?function(){}:s,f=e.onDownload,d=void 0===f?function(){}:f,y=e.fields,v=void 0===y?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:y,b=e.closeId,g=e.onCancel,h=void 0===g?function(){}:g,E=e.activeClickEventListener,O=e.projection,S=e.resolutions,w=e.zoom,T=vt({title:null==r?void 0:r.title,description:null==r?void 0:r.description},null==r?void 0:r.options),I=bt((0,P.useState)("properties"),2),A=I[0],C=I[1],N=bt((0,P.useState)(!1),2),k=N[0],_=N[1];function R(){return!v.find((function(e){return!!Ye()(null==e?void 0:e.validator)&&!e.validator(T[e.name])}))}function L(){var e;return!(null==r||null===(e=r.features)||void 0===e||!e.length||r.invalidFeatures)}function D(e){return e.stopPropagation(),R()&&L()?c(r):_(!0)}return(0,P.useEffect)((function(){return(0,Xe.j9)(m.jB,(function(e){return j().createElement(Ot,mt({},e,{fields:v}))})),function(){(0,Xe.j9)(m.jB,void 0)}}),[]),(0,P.useEffect)((function(){return _(!1),l(i),function(){l(!i)}}),[i]),(0,P.useEffect)((function(){b&&D()}),[b]),r?j().createElement("div",{className:"ms-annotations-panel",style:o},j().createElement("div",{className:"ms-annotations-panel-header"},j().createElement(Et,{onClick:function(e){return D(e)},className:"square-button no-border"},j().createElement(x.Glyphicon,{glyph:"1-close"})),j().createElement("div",{className:"ms-annotations-title"},j().createElement(le.Z,{msgId:"annotations.title"})),j().createElement("div",{className:"square-button text-primary"},j().createElement(x.Glyphicon,{glyph:"comment"}))),j().createElement(x.Nav,{bsStyle:"tabs",activeKey:A,className:"ms-annotations-panel-nav"},j().createElement(x.NavItem,{key:"properties",eventKey:"properties",onClick:function(){return C("properties")}},j().createElement(le.Z,{msgId:"annotations.properties"})," ",j().createElement(x.Glyphicon,{glyph:R()?"ok-sign text-success":"exclamation-mark text-danger"})),j().createElement(x.NavItem,{key:"geometries",eventKey:"geometries",onClick:function(){return C("geometries")}},j().createElement(le.Z,{msgId:"annotations.geometries"})," ",j().createElement(x.Glyphicon,{glyph:L()?"ok-sign text-success":"exclamation-mark text-danger"})),j().createElement(x.NavItem,{key:"settings",eventKey:"settings",onClick:function(){return C("settings")}},j().createElement(le.Z,{msgId:"settings"})),j().createElement(Et,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",disabled:!(R()&&L()),onClick:function(){return d([r])}},j().createElement(x.Glyphicon,{glyph:"download"}))),j().createElement("div",{className:"ms-annotations-panel-body"},j().createElement("div",{className:"ms-annotations-panel-content",style:"properties"===A?{}:{display:"none"}},j().createElement(lt,{fields:v,properties:T,onChange:function(e){var t=e.title,n=e.description,o=ht(e,dt);p(r.id,"layers",vt(vt(vt({},void 0!==t&&{title:t}),void 0!==n&&{description:n}),{},{options:vt(vt({},r.options),o)}))}})),j().createElement("div",{id:n,style:"geometries"===A?{}:{display:"none"}}),j().createElement("div",{className:"ms-annotations-panel-content",style:"settings"===A?{}:{display:"none"}},j().createElement(st.Z,{title:j().createElement(x.ControlLabel,null,j().createElement(le.Z,{msgId:"layerProperties.visibilityLimits.title"})),layer:r,onChange:function(e){return p(r.id,"layers",e)},projection:O,resolutions:S,zoom:w}))),E&&j().createElement(x.Alert,{bsStyle:"warning"},j().createElement(le.Z,{msgId:"annotations.deactivatedMapInteraction",msgParams:{pluginName:Ke()(E)}})),j().createElement(ct.Z,null,j().createElement(ut.Z,{show:k,modal:!0,onClose:function(){return h(),void _(!1)},onConfirm:function(){return c(r),void _(!1)},confirmButtonBSStyle:"primary",closeGlyph:"1-close",confirmButtonContent:j().createElement(le.Z,{msgId:"annotations.confirm"}),closeText:j().createElement(le.Z,{msgId:"annotations.cancel"})},j().createElement(le.Z,{msgId:"annotations.undo"})))):null}));const wt=St;var Tt=(0,z.Z)(U.Z);const Pt=(0,A.connect)((0,C.P1)([y.Yu,(0,R.Yq)(m.jB)],(function(e,t){return{annotationLayers:e,enabled:t}})),{onAdd:d.A9,onDownload:d.LR,onEdit:d.VR})((function(e){var t=e.status,n=e.selectedLayers,r=e.onAdd,o=void 0===r?function(){}:r,i=e.onDownload,a=void 0===i?function(){}:i,l=e.onEdit,u=void 0===l?function(){}:l,c=e.annotationLayers,s=void 0===c?[]:c;if("DESELECT"===t)return j().createElement(j().Fragment,null,j().createElement(Tt,{key:"annotations",bsStyle:"primary",className:"square-button-md",tooltipId:"toc.addAnnotations",onClick:function(){return o()}},j().createElement(x.Glyphicon,{glyph:"add-comment"})),s.length>0&&j().createElement(Tt,{key:"annotations-download",bsStyle:"primary",className:"square-button-md",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(s)}},j().createElement(x.Glyphicon,{glyph:"download-comment"})));if("LAYER"===t&&(0,m.cO)(n[0]))return j().createElement(j().Fragment,null,j().createElement(Tt,{key:"annotations-edit",bsStyle:"primary",className:"square-button-md",tooltipId:"toc.editAnnotations",onClick:function(){return u(n[0].id)}},j().createElement(x.Glyphicon,{glyph:"pencil"})),j().createElement(Tt,{key:"annotations-download",bsStyle:"primary",className:"square-button-md",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return a([n[0]])}},j().createElement(x.Glyphicon,{glyph:"download-comment"})));var p="LAYERS"===t?n.filter(m.cO):[];return p.length?j().createElement(j().Fragment,null,j().createElement(Tt,{key:"annotations-download",bsStyle:"primary",className:"square-button-md",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(p)}},j().createElement(x.Glyphicon,{glyph:"download-comment"}))):null})),jt=(0,r.rx)("Annotations",{component:wt,containers:{TOC:{doNotHide:!0,name:"Annotations",target:"toolbar",Component:Pt},Map:{name:"Annotations",Tool:qe,alwaysRender:!0}},reducers:{annotations:T.Z},epics:w})},79267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(14281);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){var r,i,a,l;r=e,i=t,a=n[t],l=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i),(i="symbol"==o(l)?l:String(l))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.e7:return a(a({},e),{},{session:t.session});case r.Nd:return a(a({},e),{},{featureId:t.id});case r.CD:case r.A1:return a(a({},e),{},{editing:!0,closeId:0});case r.eY:return a(a({},e),{},{closeId:(e.closeId||0)+1});case r.bI:return a(a({},e),{},{editing:!1,closeId:0,session:null});case r.Rr:return a(a({},e),{},{closeId:0});default:return e}}},55105:(e,t,n)=>{"use strict";n.d(t,{Ss:()=>m,Nr:()=>y,QJ:()=>v,ic:()=>b,Jz:()=>g,VM:()=>h,CF:()=>E,Ju:()=>O,Fc:()=>S,gQ:()=>w});var r=n(91175),o=n.n(r),i=n(288306),a=n.n(i),l=n(800827),u=n(552259),c=n(737275);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){var r;return r=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==s(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){return e.maplayout&&e.maplayout.layout||{}},y=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},b=a()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=m(e),o=v(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){var i;return f(f({},e),{},d({},t,n&&null!==(i=o[t])&&void 0!==i?i:r[t]))}),{})||{}}),(function(e,t,n){return JSON.stringify(m(e))+JSON.stringify(v(e))+JSON.stringify(t)+(n?"_isDock":"")})),g=function(e){var t;return!(null===(t=m(e))||void 0===t||!t.rightPanel)},h=function(e){var t,n=c.ZP.getConfigProp("mapLayout")||u.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=m(e);return!!o()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==n?void 0:n.bottom.sm)&&void 0!==t?t:0,type:"not"}])},E=function(e){var t=(0,l.Od)(e),n=y(e);return n&&t&&t.size&&{left:(0,u.pb)(n.left,t.size.width),bottom:(0,u.pb)(n.bottom,t.size.height),right:(0,u.pb)(n.right,t.size.width),top:(0,u.pb)(n.top,t.size.height)}},O=function(e){var t,n;return null!==(t=null==e||null===(n=e.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==t?t:{left:[],right:[]}},S=function(e){return b(e,{height:!0,right:!0},!0)},w=function(e){return b(e,{right:!0},!0)}},443143:(e,t,n)=>{"use strict";n.d(t,{qH:()=>s,qj:()=>p,qq:()=>f,TM:()=>d});var r,o=n(717621),i=n.n(o),a=n(14841),l=n.n(a),u=n(264721),c=n.n(u),s=function(e,t,n,o){var i=e;isNaN(parseFloat(e))&&(i=r.hexToHsv(e)[0]);var a=.5/(n-1),l=t/(n-1),u=[];1===n&&(a=.5,l=t/2);for(var c=0;c<n;c++){var s=i+c*l-t/2,p=a*c+.3,f=p;o&&(s=o.h||s,p=o.s||p,f=o.v||f),u.push(r.hsvToHex(s,p,f,c))}return u},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},f=function(e,t,n){var r=i()(e);return e&&r.setAlpha(l()(void 0!==t?t:r.getAlpha())).toRgbString()||n},d=function e(t){var n=Math.round,o=Math.random,i=[n(255*o()),n(255*o()),n(255*o())],a=r.rgbToHex(i);if(t)for(;c()(t,a)||"#000000"===a||"#FFFFFF"===a;)e(t);return a};r={decToHex:function(e){var t="0123456789ABCDEF",n=parseInt(e,10);return n=isNaN(n)?0:n,t.charAt(((n=n>255||n<0?0:n)-n%16)/16)+t.charAt(n%16)},rgbToHex:function(e,t,n){return e instanceof Array?r.rgbToHex(e[0],e[1],e[2]):"#"+r.decToHex(e)+r.decToHex(t)+r.decToHex(n)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,n){if(e instanceof Array)return r.rgbToHsv(e[0],e[1],e[2]);var o,i,a,l,u,c=e/255,s=t/255,p=n/255;switch(o=Math.min(Math.min(c,s),p),a=(i=Math.max(Math.max(c,s),p))-o,i){case o:l=0;break;case c:l=60*(s-p)/a,s<p&&(l+=360);break;case s:l=60*(p-c)/a+120;break;case p:l=60*(c-s)/a+240}return u=0===i?0:1-o/i,[Math.round(l),u,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),n=[],o=function e(t,n,o){var i=e(t,n,o);return r.rgbToHex(i)},i=0;i<e;i++)n.push(o(t*i,.57,.63));return n},sameToneRangeColors:s,hsvToRgb:function(e,t,n){if(e instanceof Array)return r.hsvToRgb(e[0],e[1],e[2]);var o,i,a,l=Math.floor(e/60%6),u=e/60-l,c=n*(1-t),s=n*(1-u*t),p=n*(1-(1-u)*t);switch(l){case 0:o=n,i=p,a=c;break;case 1:o=s,i=n,a=c;break;case 2:o=c,i=n,a=p;break;case 3:o=c,i=s,a=n;break;case 4:o=p,i=c,a=n;break;case 5:o=n,i=c,a=s}return[r.realToDec(o),r.realToDec(i),r.realToDec(a)]},hsvToHex:function(e,t,n){var o=r.hsvToRgb(e,t,n);return r.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var n=r.hexToRgb(t);return r.rgbToHsv(n)}return null},hexToRgb:function(e){var t,n,r,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),n=o.charAt(2)+o.charAt(3),r=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(n,16),parseInt(r,16)]},colorToHexStr:p,colorToRgbaStr:f,generateRandomHexColor:d}},629859:(e,t,n)=>{"use strict";n.d(t,{n0:()=>s,sc:()=>p});var r=n(909041),o=n(689265),i=n.n(o),a=n(717247),l=n.n(a),u=function(e){var t=void 0;if(e instanceof HTMLAnchorElement){var n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=r.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;var o=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),a=e.getAttribute&&e.getAttribute("data-geostory-interaction-name"),l={};a&&i&&o&&(l["data-geostory-interaction-type"]=o,l["data-geostory-interaction-params"]=i,l["data-geostory-interaction-name"]=a),n.attributes=l,t=r.Entity.__create("LINK","MUTABLE",n)}}return t},c=function(e,t){if("MENTION"===e.type)return'< href="'.concat(e.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(e.data.value,'">').concat(t,"</a>");if("LINK"===e.type){var n=e.data.targetOption||"_self",r=e.data.attributes;return r&&r["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(r["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(r["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(r["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(r["data-geostory-interaction-params"],"')\">").concat(t,"</a>"):'<a href="'.concat(e.data.url,'" target="').concat(n,'">').concat(t,"</a>")}if("IMAGE"===e.type){var o=e.data.alignment,i=o&&"none"!==o?"float: ".concat(o,";"):"display: block; margin: 0 auto 0 auto;";return'<img title="'.concat(e.data.src,'" src="').concat(e.data.src,'" alt="').concat(e.data.alt||" ",'" style="height: ').concat(e.data.height,"; width: ").concat(e.data.width,"; ").concat(i,'"/>')}return"EMBEDDED_LINK"===e.type?'<iframe width="'.concat(e.data.width,'" height="').concat(e.data.height,'" src="').concat(e.data.src,'" frameBorder="0"></iframe>'):t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l()(e,null,u),n=r.ContentState.createFromBlockArray(t.contentBlocks);return r.EditorState.createWithContent(n)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=1!==(0,r.convertToRaw)(e.getCurrentContent()).blocks.length||(0,r.convertToRaw)(e.getCurrentContent()).blocks[0].text,o=i()((0,r.convertToRaw)(e.getCurrentContent()),null,null,c);return n?o:t}return t}},577215:(e,t,n)=>{"use strict";n.d(t,{oL:()=>y,F0:()=>v,cP:()=>b,Br:()=>g,rD:()=>h});var r=n(944908),o=n.n(r),i=n(513218),a=n.n(i),l=n(984596),u=n.n(l),c=n(125376),s=n(916651);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==p(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],y=function(){return o()(Object.values((0,c.eq)()))},v=function(e){return m.includes(e)},b=function(e){return y().includes(e)},g=function(e){var t,n,r,o,i;return a()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.westBoundLongitude,miny:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.southBoundLatitude,maxx:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&u()(e.Style).map((function(e){return d(d(d({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:u()(e.LegendURL).map((function(e){var t,n,r,o,i,a;return d({width:null!=e&&null!==(t=e.$)&&void 0!==t&&t.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(n=e.$)&&void 0!==n&&n.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(r=e.OnlineResource)||void 0===r||null===(o=r.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(a=i.$)||void 0===a?void 0:a["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}},h=function(e){var t=e.tileGrids,n=void 0===t?[]:t,r=e.projection,o=e.tileSize,i=void 0===o?256:o;return n.find((function(e){var t,n,o;return(0,s.normalizeSRS)(e.crs)===(0,s.normalizeSRS)(r)&&!(((null===(t=e.tileSizes)||void 0===t||null===(n=t[0])||void 0===n?void 0:n[0])||(null===(o=e.tileSize)||void 0===o?void 0:o[0]))!==i)}))}},178598:function(e,t,n){var r,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},u=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},s=function(t,s,p){p||(t=c(t));var f,d=this,m="application/octet-stream"===t.type,y=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,e)}catch(e){l(e)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,o)return f=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=f,r.download=s,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),y(),u(f),d.readyState=d.DONE}));!function(){if((a||m&&i)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,d.readyState=d.DONE,y()},r.readAsDataURL(t),void(d.readyState=d.INIT)}f||(f=n().createObjectURL(t)),m?e.location.href=f:e.open(f,"_blank")||(e.location.href=f),d.readyState=d.DONE,y(),u(f)}()},p=s.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,function(e,t,n){return new s(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=o:null!==n.amdD&&null!==n.amdO&&(void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r))},580760:(e,t,n)=>{var r=n(989881);e.exports=function(e,t){var n=[];return r(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}},763105:(e,t,n)=>{var r=n(234963),o=n(580760),i=n(267206),a=n(701469);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}}}]);