"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[68148],{225136:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Z});var r=n(273517),o=n.n(r),i=n(605556),l=n.n(i),a=n(993456),u=n(8117),c=n(811668),s=n(801081),p=n(706702),f=n(540104),d=n(164045),b=n(32485),m=n.n(b),v=n(590179),y=n.n(v);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}var g=["children","className","bsStyle","tooltipId","tooltipPosition"];function O(){return O=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O.apply(null,arguments)}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach(function(e){P(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function P(t,e,n){return(e=function(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=(0,d.A)(u.$n);const E=function(t){var e=t.children,n=t.className,r=t.bsStyle,i=void 0===r?"link":r,l=t.tooltipId,a=t.tooltipPosition,u=void 0===a?"left":a,c=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,g);return o().createElement(w,O({className:m()(j({"square-button":!0},n?P({},n,!0):{})),bsStyle:i,tooltipId:l,tooltipPosition:u},y()(c,["pluginCfg","help","defaultOptions","items","advancedSettings"])),e)};var I=n(97401),A=n(415392),k=n(393149),D="SIDEBARMENU:SET_LAST_ACTIVE_ITEM";function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach(function(e){H(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function H(t,e,n){return(e=function(t){var e=function(t){if("object"!=T(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var M=n(785072),C=n.n(M),_=n(185566);C()(_.A,{insert:"head",singleton:!1}),_.A.locals;var z=n(965774),L=n(8571),F=n(711030);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach(function(e){G(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J(r.key),r)}}function q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(q=function(){return!!t})()}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}function $(t,e){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$(t,e)}function G(t,e,n){return(e=J(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J(t){var e=function(t){if("object"!=B(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}var K=(0,d.A)(u.gf);function Q(t){var e=t.active,n=t.onClick,r=t.menuItem,i=t.glyph,l=t.labelId,a=t.className;return r?o().createElement(u.Dr,{active:e,className:a,onClick:function(){return n(!e)}},o().createElement(u.e6,{glyph:i}),o().createElement(L.A,{msgId:l})):o().createElement(F.g,{className:"square-button".concat(a?" ".concat(a):""),bsStyle:e?"primary":"tray",active:e,onClick:function(){return n(!e)},tooltipId:l,tooltipPosition:"left"},o().createElement(u.e6,{glyph:i}))}var X=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),G(t=function(t,e,n){return e=V(e),function(t,e){if(e&&("object"==B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,q()?Reflect.construct(e,n||[],V(t).constructor):e.apply(t,n))}(this,e),"getStyle",function(t){var e,n=(null==t?void 0:t.dockSize)>0;return U(U({},t),{},{height:n?"auto":"100%",maxHeight:null!==(e=null==t?void 0:t.height)&&void 0!==e?e:null,bottom:n?"calc(".concat(t.dockSize,"vh + 30px)"):null})}),G(t,"getPanels",function(){return t.props.items.filter(function(t){return t.tools}).reduce(function(t,e){return t.concat(e.tools.map(function(t,n){var r;return{name:e.name+n,panel:t,cfg:(null==e||null===(r=e.cfg)||void 0===r||null===(r=r.toolsCfg)||void 0===r?void 0:r[n])||{}}}))},[])}),G(t,"visibleItems",function(e){return t.props.items.reduce(function(n,r){return null!=r&&r.components||!t.targetMatch(e,r.target)||!t.isNotHidden(r,t.props.state)?(null!=r&&r.components&&Array.isArray(r.components)&&r.components.forEach(function(o){return t.targetMatch(e,null==o?void 0:o.target)&&t.isNotHidden(null!=o&&o.selector?o:r,t.props.state)&&n.push(U({plugin:(null==r?void 0:r.plugin)||t.defaultTool,position:null==r?void 0:r.position,cfg:null==r?void 0:r.cfg,name:r.name,help:null==r?void 0:r.help,items:null==r?void 0:r.items},o)),n}),n):(n.push(U(U({},r),{},{target:e})),n)},[])}),G(t,"getItems",function(e,n){var r=Math.floor(n/t.props.sidebarWidth)-1,i=e||t.defaultTarget,l=t.visibleItems(i);if(r<l.length){var a=l.sort(function(t,e){var n,r;return(null!==(n=t.position)&&void 0!==n?n:0)-(null!==(r=e.position)&&void 0!==r?r:0)});t.swapLastActiveItem(a,r);var c=a.slice(0,r),s={name:"moreItems",position:9999,icon:o().createElement(u.e6,{glyph:"option-horizontal"}),tool:function(){return t.renderExtraItems(l.slice(r))},priority:1};return c.splice(r,0,s),c}return l.sort(function(t,e){var n,r;return(null!==(n=t.position)&&void 0!==n?n:0)-(null!==(r=e.position)&&void 0!==r?r:0)})}),G(t,"targetMatch",function(e,n){return n===e||!n&&e===t.defaultTarget}),G(t,"getTools",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sidebar",n=arguments.length>1?arguments[1]:void 0;return t.getItems(e,n).sort(function(t,e){return t.position-e.position})}),G(t,"renderExtraItems",function(e){var n=function(){return{}},r=e.map(function(e){var r;if(e.tool){var i=e.tool;return o().createElement(i,{key:e.name,menuItem:!0,component:Q})}var l=(0,c.connect)(null!==(r=null==e?void 0:e.selector)&&void 0!==r?r:n,function(n,r){var o={};return r.action&&(o.onClick=function(){var o;t.props.setLastActiveItem(null!==(o=null==e?void 0:e.name)&&void 0!==o?o:null==e?void 0:e.toggleProperty),(0,p.zH)(r.action,n)()}),o})(u.Dr);return o().createElement(l,{action:e.action},null==e?void 0:e.icon,null==e?void 0:e.text)});return o().createElement(K,{dropup:!0,pullRight:!0,bsStyle:"tray",id:"extra-items",tooltip:o().createElement(L.A,{msgId:"sidebarMenu.showMoreItems"}),tooltipPosition:"left",title:o().createElement(u.e6,{glyph:"option-horizontal"})},r)}),G(t,"swapLastActiveItem",function(e,n){var r=t.props.lastActiveTool;if(r){var o=e.findIndex(function(t){return(null==t?void 0:t.name)===r||(null==t?void 0:t.toggleProperty)===r});if(-1!==o&&o>n-1){var i=e[o];e[o]=e[n-1],e[n-2]=i}}}),G(t,"isNotHidden",function(t,e){var n;return null==t||!t.selector||"none"!==(null===(n=t.selector(e))||void 0===n||null===(n=n.style)||void 0===n?void 0:n.display)}),t.defaultTool=E,t.defaultTarget="sidebar",t.state={lastVisible:!1,hidden:!1},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){(0,this.props.onInit)()}},{key:"shouldComponentUpdate",value:function(t){var e,n,r,o,i=this,l=!1===t.isActive,a=(null===(e=t.state.map)||void 0===e||null===(e=e.present)||void 0===e||null===(e=e.size)||void 0===e?void 0:e.height)!==(null===(n=this.props.state.map)||void 0===n||null===(n=n.present)||void 0===n||null===(n=n.size)||void 0===n?void 0:n.height),u=t.style.bottom!==this.props.style.bottom,c=t.items!==this.props.items,s=(null===(r=t.state)||void 0===r||null===(r=r.controls)||void 0===r||null===(r=r.burgermenu)||void 0===r?void 0:r.enabled)!==(null===(o=this.props.state)||void 0===o||null===(o=o.controls)||void 0===o||null===(o=o.burgermenu)||void 0===o?void 0:o.enabled),p=!c&&t.items.reduce(function(e,n,r){return i.isNotHidden(n,t.state)!==i.isNotHidden(i.props.items[r],i.props.state)&&e.push(n),e},[]).length>0,f=!this.props.isSidebarFullHeight&&t.isSidebarFullHeight;return a||c||p||u||s||l||f}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.onInit,r=e.onDetach,o=this.state.hidden,i=this.visibleItems("sidebar").length;i&&!1===t.isActive&&n(),0!==i||o?i>0&&o&&(n(),this.setState(function(t){return U(U({},t),{},{hidden:!1})})):(r(),this.setState(function(t){return U(U({},t),{},{hidden:!0})}))}},{key:"componentWillUnmount",value:function(){(0,this.props.onDetach)()}},{key:"render",value:function(){var t=this;return!this.state.hidden&&o().createElement("div",{id:"mapstore-sidebar-menu-container",className:"shadow-soft ".concat(this.props.isSidebarFullHeight?"fullHeightSideBar":""),style:this.getStyle(this.props.style)},o().createElement(a.A,null,function(e){var n=e.height;return o().createElement(f.A,{id:t.props.id,className:t.props.className,container:function(t){return o().createElement(o().Fragment,null,t.children)},toolStyle:"tray",activeStyle:"primary",stateSelector:"sidebarMenu",tool:E,tools:t.getTools("sidebar",n),panels:t.getPanels(t.props.items),toolComponent:Q})}))}}])&&W(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);G(X,"propTypes",{className:l().string,style:l().object,items:l().array,id:l().string,onInit:l().func,onDetach:l().func,sidebarWidth:l().number,state:l().object,setLastActiveItem:l().func,isSidebarFullHeight:l().bool}),G(X,"contextTypes",{messages:l().object,router:l().object}),G(X,"defaultProps",{items:[],style:{},id:"mapstore-sidebar-menu",onInit:function(){},onDetach:function(){},eventSelector:"onClick",toolStyle:"default",activeStyle:"primary",stateSelector:"sidebarMenu",tool:E,toolCfg:{},sidebarWidth:40,isSidebarFullHeight:!1});var Y=(0,s.Mz)([function(t){return t},function(t){return(0,z.gL)(t)},function(t){return(0,I.o7)(t,{dockSize:!0,bottom:!0,height:!0})},z.Sm,z.te],function(t,e,n,r,o){return{style:n,lastActiveTool:e,state:t,isActive:r,isSidebarFullHeight:o}});const Z=(0,k.i1)("SidebarMenu",{cfg:{},component:(0,c.connect)(Y,{onInit:A.fN.bind(null,"sidebarMenu","enabled",!0),onDetach:A.fN.bind(null,"sidebarMenu","enabled",!1),setLastActiveItem:function(t){return{type:D,value:t}}})(X),reducers:{sidebarmenu:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lastActiveItem:null},e=arguments.length>1?arguments[1]:void 0;return e.type===D?N(N({},t),{},{lastActiveItem:e.value}):t}}})},965774:(t,e,n)=>{n.d(e,{Sm:()=>a,gL:()=>l,te:()=>u});var r=n(858156),o=n.n(r),i=n(589769),l=function(t){return o()(t,"sidebarmenu.lastActiveItem",!1)},a=function(t){return o()(t,"controls.sidebarMenu.enabled",!1)},u=function(t){return(0,i.aH)(t)}},185566:(t,e,n)=>{n.d(e,{A:()=>i});var r=n(576314),o=n.n(r)()(function(t){return t[1]});o.push([t.id,":root {\n  --tag-color: #005dc7;\n}\n#mapstore-sidebar-menu-container {\n  z-index: 1030;\n  position: absolute;\n  background: inherit;\n  right: 0;\n  top: 0;\n  width: 40px;\n  height: 100%;\n}\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: auto;\n  z-index: 10;\n}\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn-tray,\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn,\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn-group .btn {\n  border-bottom: 0;\n  height: 40px;\n  width: 40px;\n}\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn-tray span:not(.glyphicon),\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn span:not(.glyphicon),\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn-group .btn span:not(.glyphicon) {\n  display: none;\n}\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu .snapshot-panel {\n  position: absolute;\n  right: 40px;\n  top: 60px;\n  background: #ffffffab;\n}\n#mapstore-sidebar-menu-container.fullHeightSideBar {\n  position: relative;\n  max-height: 100% !important;\n}\n",""]);const i=o}}]);