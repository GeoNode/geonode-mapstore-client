"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[83217],{717140:(e,t,n)=>{n.d(t,{Ij:()=>g,Jb:()=>o,Kf:()=>s,Lu:()=>i,Ly:()=>d,Mm:()=>v,Mr:()=>E,Ne:()=>f,Nu:()=>I,Q4:()=>l,S$:()=>p,V9:()=>r,VX:()=>b,ZM:()=>a,d:()=>h,et:()=>m,jx:()=>O,tq:()=>w,uw:()=>S,vK:()=>y,vw:()=>A});var r="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",l="DRAW:GEOMETRY_CHANGED",a="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",c="DRAW:DRAWING_FEATURES",s="DRAW:SET_SNAPPING_LAYER",f="DRAW:SNAPPING_IS_LOADING",p="DRAW:TOGGLE_SNAPPING",d="DRAW:SET_SNAPPING_CONFIG";function y(e,t,n,r,o){return{type:l,features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}function m(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function v(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function g(){return{type:a}}function b(e,t,n,o,i,l){return{type:r,status:e,method:t,owner:n,features:o,options:i,style:l}}function E(e,t){return{type:o,geometry:e,owner:t}}function h(e){return{type:i,currentStyle:e}}var w=function(e){return b("clean","",e,[],{})};function O(){return{type:p}}function S(e){return{type:s,snappingLayer:e}}function A(){return{type:f}}function I(e,t,n){return{type:d,value:e,prop:t,pluginCfg:n}}},762686:(e,t,n)=>{n.d(t,{$m:()=>Ce,$r:()=>ze,$w:()=>be,BN:()=>He,Bg:()=>u,Bp:()=>Ye,DK:()=>z,Dv:()=>W,Ek:()=>Fe,FN:()=>q,Fc:()=>r,Fu:()=>te,GW:()=>ve,HS:()=>d,Hu:()=>S,IR:()=>s,Iv:()=>Ke,J6:()=>Q,J7:()=>de,JM:()=>xe,JV:()=>_,Jq:()=>h,K0:()=>Me,L4:()=>v,Lw:()=>l,M3:()=>K,MI:()=>F,MW:()=>Ge,N7:()=>ce,Nq:()=>De,Ol:()=>Ie,PO:()=>O,Pn:()=>L,Pp:()=>$e,Q4:()=>j,RM:()=>Be,S8:()=>We,Sm:()=>w,Tw:()=>_e,UT:()=>ne,V$:()=>M,V_:()=>o,Wm:()=>le,X_:()=>ae,Xj:()=>Ne,Y3:()=>D,YL:()=>E,Z9:()=>a,Zm:()=>Re,_9:()=>Oe,_w:()=>Ae,aA:()=>ue,bS:()=>I,bU:()=>Se,bx:()=>V,cU:()=>ie,di:()=>Ee,dv:()=>Le,en:()=>G,et:()=>k,fJ:()=>P,fX:()=>y,fk:()=>Pe,fr:()=>ke,g$:()=>b,gi:()=>ee,gm:()=>je,h$:()=>X,hD:()=>m,hN:()=>J,hS:()=>f,hu:()=>Z,iB:()=>Ze,il:()=>me,j6:()=>H,k7:()=>c,kH:()=>i,k_:()=>p,ke:()=>Te,kz:()=>re,l0:()=>A,lP:()=>C,ls:()=>ye,mQ:()=>R,mq:()=>B,o_:()=>g,pm:()=>pe,ri:()=>U,s:()=>se,s2:()=>$,t7:()=>x,tB:()=>Ve,tw:()=>Y,ud:()=>Je,v2:()=>qe,vK:()=>fe,wT:()=>we,wr:()=>ge,xp:()=>Ue,y3:()=>oe,yM:()=>T,yd:()=>he,z0:()=>N});var r="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",i="FEATUREGRID:DESELECT_FEATURES",l="FEATUREGRID:CLEAR_SELECTION",a="FEATUREGRID:SET_SELECTION_OPTIONS",u="FEATUREGRID:TOGGLE_MODE",c="FEATUREGRID:TOGGLE_FEATURES_SELECTION",s="FEATUREGRID:FEATURES_MODIFIED",f="FEATUREGRID:NEW_FEATURE",p="FEATUREGRID:SAVE_CHANGES",d="FEATUREGRID:SAVING",y="FEATUREGRID:START_EDITING_FEATURE",m="FEATUREGRID:START_DRAWING_FEATURE",v="FEATUREGRID:DELETE_GEOMETRY",g="FEATUREGRID:DELETE_GEOMETRY_FEATURE",b="FEATUREGRID:SAVE_SUCCESS",E="FEATUREGRID:CLEAR_CHANGES",h="FEATUREGRID:SAVE_ERROR",w="FEATUREGRID:DELETE_SELECTED_FEATURES",O="SET_FEATURES",S="FEATUREGRID:SORT_BY",A="FEATUREGRID:SET_LAYER",I="QUERY:UPDATE_FILTER",P="FEATUREGRID:CHANGE_PAGE",j="FEATUREGRID:GEOMETRY_CHANGED",T="DOCK_SIZE_FEATURES",R="FEATUREGRID:TOGGLE_TOOL",_="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",D="ASK_CLOSE_FEATURE_GRID_CONFIRM",L="FEATUREGRID:OPEN_GRID",C="FEATUREGRID:CLOSE_GRID",F="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",N="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",U="FEATUREGRID:SET_PERMISSION",x="FEATUREGRID:DISABLE_TOOLBAR",G="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",M="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",V="FEATUREGRID:ADVANCED_SEARCH",k="FEATUREGRID:ZOOM_ALL",z="FEATUREGRID:INIT_PLUGIN",W="FEATUREGRID:SIZE_CHANGE",H="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",K="FEATUREGRID:UPDATE_EDITORS_OPTIONS",B="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",$="FEATUREGRID:SET_SYNC_TOOL",Y="FEATUREGRID:SET_VIEWPORT_FILTER",q={EDIT:"EDIT",VIEW:"VIEW"},Z="FEATUREGRID:START_SYNC_WMS",J="FEATUREGRID:STOP_SYNC_WMS",Q="STORE_ADVANCED_SEARCH_FILTER",X="LOAD_MORE_FEATURES",ee="FEATUREGRID:QUERY_RESULT",te="FEATUREGRID:SET_TIME_SYNC",ne="FEATUREGRID:SET_PAGINATION";function re(){return{type:H}}function oe(e,t){return{type:ee,features:e,pages:t}}function ie(e){return{type:Q,filterObj:e}}function le(){return{type:z,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function ae(){return{type:F}}function ue(){return{type:N}}function ce(e,t){return{type:o,features:e,append:t}}function se(e){return{type:r,options:e}}function fe(e){return{type:j,features:e}}function pe(){return{type:y}}function de(){return{type:m}}function ye(e){return{type:i,features:e}}function me(){return{type:v}}function ve(e){return{type:g,features:e}}function ge(){return{type:l}}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,n=e.showCheckbox;return{type:a,multiselect:t,showCheckbox:n}}function Ee(e,t){return{type:S,sortBy:e,sortOrder:t}}function he(e,t){return{type:P,page:e,size:t}}function we(e){return{type:A,id:e}}function Oe(e){return{type:I,update:e,append:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}function Se(e,t){return{type:R,tool:e,value:t}}function Ae(e,t,n){return{type:_,name:e,key:t,value:n}}function Ie(){return{type:u,mode:q.EDIT}}function Pe(){return{type:u,mode:q.VIEW}}function je(e,t){return{type:s,features:e,updated:t}}function Te(e){return{type:f,features:e}}function Re(){return{type:p}}function _e(){return{type:b}}function De(){return{type:w}}function Le(){return{type:d}}function Ce(){return{type:E}}function Fe(){return{type:h}}function Ne(){return{type:D}}function Ue(e){return{type:C,closer:e}}function xe(){return{type:L}}function Ge(e){return{type:x,disabled:e}}function Me(e){return{type:U,permission:e}}function Ve(){return{type:V}}function ke(){return{type:k}}function ze(){return{type:Z}}function We(e,t){return{type:W,size:e,dockProps:t}}var He=function(e){return{type:X,pages:e}},Ke=function(e){return{type:G,activated:e}},Be=function(e){return{type:M,deactivated:e}},$e=function(e){return{type:te,value:e}},Ye=function(e){return{type:ne,size:e}},qe=function(e){return{type:B,updateFilterAction:e}},Ze=function(e){return{type:$,syncWmsFilter:e}},Je=function(e){return{type:Y,value:e}}},3162:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(273517),o=n.n(r),i=n(158208);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,r=e.mainViewStyle,l=void 0===r?{}:r,a=e.contentStyle,c=void 0===a?{}:a,s=e.imageStyle,f=void 0===s?{}:s,p=e.glyph,d=void 0===p?"info-sign":p,y=e.iconFit,m=e.title,v=e.tooltip,g=e.tooltipId,b=e.description,E=e.content;return o().createElement("div",{className:"empty-state-container",style:u({height:y?"100%":void 0},n)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:u({height:y?"100%":void 0},l)},d?o().createElement("div",{key:"glyph",className:"empty-state-image",style:u({height:y?"100%":void 0},f)},o().createElement(i.A,{iconFit:y,tooltip:v,tooltipId:g,glyph:d})):null,m?o().createElement("h1",{key:"title"},m):null,b?o().createElement("p",{key:"description",className:"empty-state-description"},b):null),o().createElement("div",{key:"content",className:"empty-state-content",style:c},E))}},158208:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(273517),o=n.n(r),i=n(8117),l=n(993456),a=(0,n(164045).A)(i.e6);const u=function(e){var t=e.glyph,n=void 0===t?"info-sign":t,r=e.tooltip,i=e.tooltipId,u=e.iconFit,c=e.padding,s=void 0===c?0:c,f=e.margin,p=void 0===f?0:f;return o().createElement(l.A,null,(function(e){var t=e.width,l=e.height;return o().createElement(a,{glyph:n,tooltip:r,tooltipId:i,style:{display:"inline-block",padding:s+"px",margin:p+"px",textAlign:"center",fontSize:u?Math.min(t,l)-2*s-2*p:t-2*s-2*p}})}))}},789516:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Fn});var r={};n.r(r),n.d(r,{getAPI:()=>ne,getLocation:()=>oe,loadAPI:()=>re,loadGoogleMapsAPI:()=>te});var o={};n.r(o),n.d(o,{getAPI:()=>ae,getLocation:()=>ue,loadAPI:()=>le});var i={};n.r(i),n.d(i,{getAPI:()=>me,getLocation:()=>ve,loadAPI:()=>ye});var l={};n.r(l),n.d(l,{disableGFIForStreetViewEpic:()=>On,streetViewMapClickHandler:()=>An,streetViewSetupTearDown:()=>Sn,streetViewSyncLayer:()=>In,tearDownStreetViewOnDrawToolActive:()=>Pn});var a=n(273517),u=n.n(a),c=n(8117),s=n(811668),f=n(393149),p="street-view",d=p,y="street-view-data",m="google",v="cyclomedia",g="mapillary",b="__cycloMedia_streetView_source_credential__",E=n(801081),h=n(8571),w=n(711520),O=n(666036),S=n(112585),A=n(130711),I=n(697150),P=n(912532);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=function(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=(0,A.cU)(p),L=function(e){var t;return null!==(t=null==e?void 0:e.streetView)&&void 0!==t?t:{}},C=function(e){return function(t){var n,r;return null!==(n=null===(r=L(t))||void 0===r||null===(r=r.apiLoaded)||void 0===r?void 0:r[e])&&void 0!==n&&n}},F=(0,E.Mz)(L,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).location})),N=(0,E.Mz)(L,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pov}));function U(e){var t,n;return null!==(t=null===(n=L(e))||void 0===n?void 0:n.configuration)&&void 0!==t?t:{}}function x(e){var t,n;return null!==(t=null===(n=U(e))||void 0===n?void 0:n.provider)&&void 0!==t?t:"google"}var G=function(e){return{format:"geostyler",body:{name:"My Style",rules:[{name:"",symbolizers:[R(R({color:"#3165ef",fillOpacity:.6,strokeColor:"#3165ef",strokeOpacity:.8,strokeWidth:2,radius:6,wellKnownName:"Circle",msHeightReference:"none",msBringToFront:!0},e),{},{kind:"Mark",symbolizerId:"d2c4dab1-a0e7-11ee-a734-df08d0913056"})],ruleId:"d2c4dab0-a0e7-11ee-a734-df08d0913056"}]}}},M={provider:"custom",type:"tileprovider",url:"https://mts1.googleapis.com/vt?hl=en-US&lyrs=svv|cb_client:apiv3&style=40,18&x={x}&y={y}&z={z}"},V={type:"wfs",security:{type:"Basic",sourceType:"sessionStorage",sourceId:b},strategy:"bbox",maxResolution:1,serverType:S.zy.NO_VENDOR,url:"https://atlasapi.cyclomedia.com/api/Recordings/wfs",name:"atlas:Recording"},k={type:"vector"},z=(0,E.Mz)(x,U,(function(e,t){var n,r=null!=t&&t.clampToGround?"clamp":"none";switch(e){case m:return M;case v:return R(R({},V),{},{style:G({msHeightReference:r})});case g:return R(R({},k),{},{style:G({msHeightReference:r}),url:null==t||null===(n=t.providerSettings)||void 0===n?void 0:n.ApiURL});default:return{}}}));function W(e){switch(x(e)){case m:return function(e){var t,n,r,o,i,l,a;return null!==(t=null!==(n=null!==(r=null===(o=U(e))||void 0===o?void 0:o.apiKey)&&void 0!==r?r:null===(i=(0,P.bS)(e))||void 0===i||null===(i=i.apiKeys)||void 0===i?void 0:i.googleStreetViewAPIKey)&&void 0!==n?n:null===(l=(0,P.bS)(e))||void 0===l||null===(l=l.apiKeys)||void 0===l?void 0:l.googleAPIKey)&&void 0!==t?t:null===(a=(0,P.bS)(e))||void 0===a?void 0:a.googleAPIKey}(e);case v:return function(e){var t,n,r;return null!==(t=null===(n=U(e))||void 0===n?void 0:n.apiKey)&&void 0!==t?t:null===(r=(0,P.bS)(e))||void 0===r||null===(r=r.apiKeys)||void 0===r?void 0:r.cyclomediaAPIKey}(e);case g:return function(e){var t,n,r,o=U(e);return null!=o&&null!==(t=o.providerSettings)&&void 0!==t&&t.ApiURL?{}:null!==(n=null==o?void 0:o.apiKey)&&void 0!==n?n:null===(r=(0,P.bS)(e))||void 0===r||null===(r=r.apiKeys)||void 0===r?void 0:r.mapillaryAPIKey}(e);default:return null}}function H(e){var t,n;return null===(t=null===(n=U(e))||void 0===n?void 0:n.useDataLayer)||void 0===t||t}function K(e){var t;return null===(t=U(e))||void 0===t?void 0:t.panoramaOptions}var B=n(415392),$=n(883832),Y=n(135010),q=function(e){var t,n;return{pano:null==e?void 0:e.pano,shortDescription:null==e?void 0:e.shortDescription,description:null==e?void 0:e.description,latLng:{lat:null==e||null===(t=e.latLng)||void 0===t?void 0:t.lat(),lng:null==e||null===(n=e.latLng)||void 0===n?void 0:n.lng()}}};function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}var J,Q=["apiKey","version","useStaticCache"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e,t,n){return(t=function(e){var t=function(e){if("object"!=Z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiKey,n=e.version,r=void 0===n?"weekly":n,o=e.useStaticCache,i=void 0===o||o,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Q);if(!(i?J:void 0)){var a=new Y.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({apiKey:t,version:r},l));return a.load().then((function(e){return J=e,e}))}return new Promise((function(e){return e(J)}))};function ne(){return J}var re=te;function oe(e){var t=e.latlng;return(new(ne().maps.StreetViewService)).getPanorama({location:t,radius:50}).then((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,t=(null!=e?e:{}).location;return q(t)}))}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(){return new Promise((function(e){return e()}))},ae=function(){},ue=function(e){return new Promise((function(t,n){var r,o,i,l=e.intersectedFeatures,a=null!==(r=null===(o=(void 0===l?[]:l).find((function(e){return e.id===y})))||void 0===o?void 0:o.features)&&void 0!==r?r:[];a.length||n({code:"ZERO_RESULTS"});var u,c,s=null!==(i=a[0])&&void 0!==i?i:{},f=s.properties,p=s.geometry,d=(u=(void 0===p?{}:p).coordinates,c=3,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(u,c)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(u,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=d[0],v=d[1],g=d[2];t({properties:f,latLng:{lat:v,lng:m,h:void 0===g?0:g}})}))};function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return(t=function(e){var t=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ye=function(){return new Promise((function(e){return e()}))},me=function(){},ve=function(e){return new Promise((function(t,n){var r,o,i,l,a=e.intersectedFeatures,u=null!==(r=null===(o=(void 0===a?[]:a).find((function(e){return e.id===y})))||void 0===o?void 0:o.features)&&void 0!==r?r:[];u.length||n({code:"ZERO_RESULTS"});var c,s,f={};if(null!==(i=u[0])&&void 0!==i&&i.geometry){var p,d=(null!==(p=u[0])&&void 0!==p?p:{}).geometry,m=(c=(void 0===d?{}:d).coordinates,s=3,function(e){if(Array.isArray(e))return e}(c)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(c,s)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(c,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=m[0],g=m[1],b=m[2];f={latLng:{lat:g,lng:v,h:void 0===b?0:b}}}else f=null!=e&&e.latlng?{latLng:fe({},null==e?void 0:e.latlng)}:{};f.properties=(null===(l=u[0])||void 0===l?void 0:l.properties)||{},t(f)}))};const ge={google:r,cyclomedia:o,mapillary:i};var be="STREET_VIEW:API_LOADING",Ee="STREET_VIEW:API_LOADED",he="STREET_VIEW:SET_LOCATION",we="STREET_VIEW:SET_POV",Oe="STREET_VIEW:CONFIGURE",Se="STREET_VIEW:RESET",Ae="STREET_VIEW:RESET_STREET_VIEW_DATA",Ie="STREET_VIEW:UPDATE_STREET_VIEW_LAYER";function Pe(e){return{type:be,loading:e}}function je(){return function(e,t){var n,r,o=x(t());if(C(o)(t()))e((0,B.KP)(p,"enabled"));else{Pe(!0);var i=W(t()),l=null!==(n=null===(r=U(t()))||void 0===r?void 0:r.providerSettings)&&void 0!==n?n:{};ge[o]||(console.error("No API found for provider ".concat(o)),e((0,$.z3)({title:"streetView.title",message:"No API found for provider ".concat(o)}))),ge[o].loadAPI({apiKey:i,providerSettings:l}).then((function(){Pe(!1),e(function(e){return{type:Ee,provider:e}}(o)),e((0,B.KP)(p,"enabled"))})).catch((function(e){Pe(!1),console.log(e)}))}}}function Te(e){return{type:he,location:e}}function Re(e){return{type:we,pov:e}}var _e=n(302404),De=n.n(_e),Le=n(750042),Ce=n.n(Le),Fe=n(3162);const Ne=function(e){var t=e.loading,n=void 0!==t&&t,r=e.title,o=void 0===r?u().createElement(h.A,{msgId:"streetView.emptyTitle"}):r,i=e.description,l=void 0===i?u().createElement(h.A,{msgId:"streetView.emptyDescription"}):i;return u().createElement("div",{className:"empty-street-view"},u().createElement(Fe.A,{iconFit:!1,glyph:"road",title:o,description:u().createElement(u().Fragment,null,n?u().createElement(u().Fragment,null,u().createElement(Ce(),{style:{display:"inline-block",verticalAlign:"bottom"},spinnerName:"circle",noFadeIn:!0})," "):null,l)}))};function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ue(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const ze=function(e){var t=e.size,n=e.google,r=e.position,o=e.location,i=e.pov,l=e.className,c=void 0===l?"google-street-view":l,s=e.style,f=void 0===s?{}:s,p=e.panoramaOptions,d=void 0===p?{}:p,y=(0,a.useRef)(),m=Ve((0,a.useState)(),2),v=m[0],g=m[1];(0,a.useEffect)((function(){if(n&&o&&!v){var e=new n.maps.StreetViewPanorama(y.current,Ge({position:r,pov:i,zoom:1},d));o.pano&&e.setPano(o.pano),g(e)}}),[n,o,v,d]);var b=Ve((0,a.useState)(),2),E=b[0],h=b[1];return(0,a.useEffect)((function(){return v&&h(function(e,t){var n=t.location,r=t.setLocation,o=t.setPov,i=[];return i.push(e.addListener("position_changed",(function(){var t=q(e.getLocation());De()(null==n?void 0:n.latLng,null==t?void 0:t.latLng)||r(t)}))),i.push(e.addListener("pov_changed",(function(){var t=e.getPov(),n=t.heading,r=t.pitch;o({heading:n,pitch:r})}))),i}(v,e)),function(e){e&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){return e.removeListener(t)}))}(v,E)}),[v]),(0,a.useEffect)((function(){n&&n.maps.event.trigger(v,"resize")}),[t]),(0,a.useEffect)((function(){v&&o.pano&&v.setPano(o.pano)}),[null==o?void 0:o.pano]),u().createElement(u().Fragment,null,u().createElement("div",{className:c,style:Ge({display:v?"none":"block"},f)},u().createElement(Ne,null)),u().createElement("div",{className:c,style:Ge({display:v?"block":"none"},f),ref:y}))};var We=["apiLoaded","enabled"];function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(null,arguments)}const Ke=(0,s.connect)((0,E.j8)({apiLoaded:C("google"),location:F,panoramaOptions:K}),{setLocation:Te,setPov:Re})((function(e){var t=e.apiLoaded,n=(e.enabled,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,We));return t?u().createElement(ze,He({location,google:ne()},n)):u().createElement("div",{className:"street-view-api-loader"},u().createElement(h.A,{msgId:"streetView.loadingAPI"}))}));var Be=n(962193),$e=n.n(Be),Ye=n(595535),qe=n(294312),Ze=n(764932),Je=n(584153),Qe=n(694838),Xe=n(164045);function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var nt=(0,Xe.A)(c.$n);const rt=function(e){var t=e.setCredentials,n=void 0===t?function(){}:t,r=e.credentials,o=e.showCredentialsForm,i=e.setShowCredentialsForm,l=void 0===i?function(){}:i,s=et((0,a.useState)((null==r?void 0:r.username)||""),2),f=s[0],p=s[1],d=et((0,a.useState)((null==r?void 0:r.password)||""),2),y=d[0],m=d[1];return o?u().createElement("div",{className:"street-view-credentials"},u().createElement("h5",null,u().createElement(h.A,{msgId:"streetView.cyclomedia.insertCredentials"})),u().createElement(c.lV,null,u().createElement(c.mq,null,u().createElement(h.A,{msgId:"streetView.cyclomedia.username"})),u().createElement(c.MJ,{type:"text",value:f,onChange:function(e){return p(e.target.value)}}),u().createElement(c.mq,null,u().createElement(h.A,{msgId:"streetView.cyclomedia.password"})),u().createElement(c.MJ,{type:"password",value:y,onChange:function(e){return m(e.target.value)}}),u().createElement("div",{className:"street-view-credentials-form-buttons"},u().createElement(c.$n,{disabled:!f||!y,onClick:function(){return n({username:f,password:y}),void l(!1)}},u().createElement(h.A,{msgId:"streetView.cyclomedia.submit"})),(null==r?void 0:r.username)&&(null==r?void 0:r.password)&&u().createElement(c.$n,{onClick:function(){n({username:r.username,password:r.password}),l(!1)}},u().createElement(h.A,{msgId:"cancel"}))))):u().createElement("div",{style:{textAlign:"right"}},u().createElement(nt,{style:{marginRight:10,border:"none",background:"none"},tooltipId:"streetView.cyclomedia.changeCredentials",onClick:function(){l(!0)}},u().createElement(c.e6,{glyph:"1-user-mod"})))};function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return(t=function(e){var t=function(e){if("object"!=ot(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ot(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var st=(0,Qe.A)((0,Xe.A)(c.$n)),ft="Projection not available",pt=function(e){var t,n;return null==e||null===(t=e.message)||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,"code 401")},dt=function(e){var t=e.initializing,n=e.initialized,r=e.StreetSmartApi,o=e.mapPointVisible,i=e.loggingOut,l=e.onClose;return n&&!o?u().createElement(Ne,{description:u().createElement(h.A,{msgId:"streetView.cyclomedia.zoomIn"})}):n?u().createElement(Ne,null):t?u().createElement(Ne,{loading:!0,description:u().createElement(h.A,{msgId:"streetView.cyclomedia.initializing"})}):r?i?u().createElement(Ne,{description:u().createElement(u().Fragment,null,u().createElement("div",null,u().createElement(h.A,{msgId:"streetView.cyclomedia.loggingOut"})),u().createElement(c.$n,{onClick:function(){l()}},"Close"))}):null:u().createElement(Ne,{loading:!0,description:u().createElement(h.A,{msgId:"streetView.cyclomedia.loadingAPI"})})};const yt=function(e){var t,n,r,o,i,l,s,f,p=e.apiKey,d=e.style,y=e.location,m=void 0===y?{}:y,v=e.setPov,g=void 0===v?function(){}:v,E=e.setLocation,w=void 0===E?function(){}:E,O=e.mapPointVisible,S=e.providerSettings,A=void 0===S?{}:S,I=e.refreshLayer,P=void 0===I?function(){}:I,j=e.onClose,T=void 0===j?function(){}:j,R=null!==(t=null==A?void 0:A.StreetSmartApiURL)&&void 0!==t?t:"https://streetsmart.cyclomedia.com/api/v23.7/StreetSmartApi.js",_=null!==(n=null==A?void 0:A.scripts)&&void 0!==n?n:'\n    <script type="text/javascript" src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"><\/script>\n    <script type="text/javascript" src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"><\/script>\n    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"><\/script>\n    ',D=null!==(r=null==A?void 0:A.initOptions)&&void 0!==r?r:{},L=null!==(o=null==A?void 0:A.srs)&&void 0!==o?o:"EPSG:4326",C=m.properties,F=(null!=C?C:{}).imageId,N=ut((0,a.useState)(),2),U=N[0],x=N[1],G=ut((0,a.useState)(),2),M=G[0],V=G[1],k=(0,a.useRef)(null),z=ut((0,a.useState)(!1),2),W=z[0],H=z[1],K=ut((0,a.useState)(!1),2),B=K[0],$=K[1],Y=ut((0,a.useState)(1),2),q=Y[0],Z=Y[1],J=ut((0,a.useState)(null),2),Q=J[0],X=J[1],ee=ut((0,a.useState)(!1),2),te=ee[0],ne=ee[1],re=ut((0,a.useState)(!1),2),oe=re[0],ie=re[1],le=null==A?void 0:A.credentials,ae=null==D?void 0:D.loginOauth,ue=null===(i=null==A?void 0:A.showLogout)||void 0===i||i,ce=$e()((0,Je.pr)(b))?null!==(l=null==A?void 0:A.credentials)&&void 0!==l?l:{}:(0,Je.pr)(b),se=ut((0,a.useState)(ce),2),fe=se[0],pe=se[1],de=ut((0,a.useState)(!(null!=fe&&fe.username&&null!=fe&&fe.password)),2),ye=de[0],me=de[1],ve=null!=fe?fe:{},ge=ve.username,be=ve.password;(0,a.useEffect)((function(){(0,qe.dv)(L)||(console.error("Cyclomedia API: init: error: projection ".concat(L," is not available")),X(new Error(ft)))}),[L]),(0,a.useEffect)((function(){return U&&ge&&be&&p&&(0,qe.dv)(L)?(H(!0),U.init(lt(lt({targetElement:M,apiKey:p,loginOauth:!1,srs:L,locale:"en-us"},D),ae?{}:{username:ge,password:be})).then((function(){H(!1),$(!0),X(null)})).catch((function(e){H(!1),X(e),ne(!0),e&&console.error("Cyclomedia API: init: error: "+e)})),function(){try{var e;$(!1),null==U||null===(e=U.destroy)||void 0===e||e.call(U,{targetElement:M})}catch(e){console.error(e)}}):function(){}}),[U,ge,be,p,q]),(0,a.useEffect)((function(){var e=pt(Q);B&&ge&&be&&!e&&B?((0,Je.LA)(b,fe),P()):((0,Je.pr)(b)&&(0,Je.LA)(b,void 0),P())}),[B,ge,be,ge,be,Q,B]);var Ee=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).detail,n=null!=t?t:{},r=n.yaw,o=n.pitch;g({heading:r,pitch:o})},he=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).detail,n=(null!=t?t:{}).recording;if(null!=n&&n.xyz&&null!=n&&n.id){var r,o,i,l=(0,Ze.reproject)([null==n||null===(r=n.xyz)||void 0===r?void 0:r[0],null==n||null===(o=n.xyz)||void 0===o?void 0:o[1]],L,"EPSG:4326"),a=l.x,u=l.y;w({latLng:{lat:u,lng:a,h:(null==n||null===(i=n.xyz)||void 0===i?void 0:i[2])||0},properties:lt(lt({},n),{},{imageId:null==n?void 0:n.id})})}};(0,a.useEffect)((function(){return U&&F&&B?(function(e){var t={viewerType:U.ViewerType.PANORAMA,srs:L,panoramaViewer:{closable:!1,maximizable:!0,replace:!0,recordingsVisible:!0,navbarVisible:!0,timeTravelVisible:!0,measureTypeButtonVisible:!0,measureTypeButtonStart:!0,measureTypeButtonToggle:!0},obliqueViewer:{closable:!0,maximizable:!0,navbarVisible:!1}};return U.open(e,t)}(F).then((function(r){r&&r[0]&&(e=r[0],t=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee.apply(void 0,[e].concat(n))},n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return he.apply(void 0,[e].concat(n))},e.on(U.Events.panoramaViewer.VIEW_CHANGE,t),e.on(U.Events.panoramaViewer.RECORDING_CLICK,n))})).catch((function(e){X(e),console.error("Cyclomedia API: open: error: "+e)})),function(){e&&t&&(e.off(U.Events.panoramaViewer.VIEW_CHANGE,t),e.off(U.Events.panoramaViewer.RECORDING_CLICK,n))}):function(){};var e,t,n}),[U,B,F]);var we=U&&B&&F&&!ye&&!Q,Oe=W||!ye&&!we&&!Q,Se=Q&&!ye&&!we&&!W,Ae="<html>\n        <head>\n            <style>\n                html, body, #ms-street-smart-viewer-container {\n                    width: 100%;\n                    height: 100%;\n                    margin: 0;\n                    padding: 0;\n                    overflow: hidden;\n                }\n            </style>\n            ".concat(_,'\n            <script type="text/javascript" src="').concat(R,'" ><\/script>\n            <script>\n                    window.StreetSmartApi = StreetSmartApi\n            <\/script>\n            </head>\n            <body>\n                <div key="main" id="ms-street-smart-viewer-container" />\n\n            </body>\n        </html>');return u().createElement(u().Fragment,null,!le&&u().createElement(rt,{key:"credentials",showCredentialsForm:ye,setShowCredentialsForm:me,credentials:fe,setCredentials:function(e){pe(e)}}),ue&&B&&ae&&!Q&&u().createElement("div",{style:{textAlign:"right"}},u().createElement(st,{key:"logout",confirmContent:u().createElement(h.A,{msgId:"streetView.cyclomedia.confirmLogout"}),tooltipId:"streetView.cyclomedia.logout",onClick:function(){var e;null==U||null===(e=U.destroy)||void 0===e||e.call(U,{targetElement:M,loginOauth:!0}),$(!1),ie(!0)}},u().createElement(c.e6,{glyph:"log-out"})," ")),Oe?u().createElement(dt,{key:"empty-view",StreetSmartApi:U,style:d,initializing:W,initialized:B,loggingOut:oe,onClose:T,mapPointVisible:O}):null,u().createElement("iframe",{key:"iframe",ref:k,onLoad:function(){var e,t;V(null===(e=k.current)||void 0===e?void 0:e.contentDocument.querySelector("#ms-street-smart-viewer-container")),x(null===(t=k.current)||void 0===t?void 0:t.contentWindow.StreetSmartApi)},style:lt(lt({},d),{},{display:we?"block":"none"}),srcDoc:Ae}),u().createElement(c.Fc,{bsStyle:"danger",style:lt(lt({},d),{},{textAlign:"center",alignContent:"center",display:Se?"block":"none",overflow:"auto"}),key:"error"},u().createElement(h.A,{msgId:"streetView.cyclomedia.errorOccurred"}),function(e){var t,n,r,o,i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?pt(e)>=0?u().createElement(h.A,{msgId:"streetView.cyclomedia.errors.invalidCredentials",msgParams:l}):(null==e||null===(t=e.message)||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,ft))>=0?u().createElement(h.A,{msgId:"streetView.cyclomedia.errors.projectionNotAvailable",msgParams:l}):(null==e||null===(r=e.message)||void 0===r||null===(o=r.indexOf)||void 0===o?void 0:o.call(r,"not logged in"))>=0?u().createElement(Ye.A,{msgId:"streetView.cyclomedia.errors.notLoggedIn"}):null!==(i=null==e?void 0:e.message)&&void 0!==i?i:"Unknown error":null}(Q,{srs:L}),u().createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:10}},B||te?u().createElement("div",null,u().createElement(c.$n,{style:{margin:10},onClick:function(){X(null),ne(!1);try{Z(q+1)}catch(e){console.error(e)}}},u().createElement(h.A,{msgId:"streetView.cyclomedia.reloadAPI"}))):null,ae&&ue&&!ye&&!B&&(null==Q||null===(s=Q.message)||void 0===s||null===(f=s.indexOf)||void 0===f?void 0:f.call(s,"not logged in"))>=0&&u().createElement(st,{style:{margin:10},key:"logout",confirmContent:u().createElement(h.A,{msgId:"streetView.cyclomedia.confirmLogout"}),tooltipId:"streetView.cyclomedia.tryForceLogout",onClick:function(){var e;null==U||null===(e=U.destroy)||void 0===e||e.call(U,{targetElement:M,loginOauth:!0})}},u().createElement(c.e6,{glyph:"log-out"})," ",u().createElement(h.A,{msgId:"streetView.cyclomedia.logout"})))))};var mt=n(131127),vt=["enabled","apiLoaded"];function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(null,arguments)}var bt=(0,E.Mz)(mt.FG,(function(e){return e<1})),Et=(0,s.connect)((0,E.j8)({apiLoaded:C(v),location:F,apiKey:W,mapPointVisible:bt}),{setLocation:Te,setPov:Re,refreshLayer:function(){return e={_v_:Date.now()},{type:Ie,updates:e};var e}})((function(e){var t=e.enabled,n=e.apiLoaded,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,vt),o=(0,a.useMemo)((function(){return ae()}),[n]);return t?u().createElement(yt,gt({api:o},r)):null}));const ht=Et;var wt=n(272505),Ot=n.n(wt),St=n(361915),At=1024;function It(e){return Math.pow(2,e.z-e.max)}function Pt(e){return Math.ceil(function(e){var t=Math.max(e.w,e.h);return Math.log(t)/Math.log(2)}(e))}function jt(e,t){var n=It(t),r=Math.ceil(n*e.h/At);return{columns:Math.ceil(n*e.w/At),rows:r}}function Tt(e,t,n){var r=1/It(n)*At,o=r*e.x,i=r*e.y,l=Math.min(r,t.w-o);return{h:Math.min(r,t.h-i),x:o,y:i,w:l}}function Rt(e){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(e)}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dt(r.key),r)}}function Dt(e){var t=function(e){if("object"!=Rt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Rt(t)?t:t+""}function Lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lt=function(){return!!e})()}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}function Ft(e,t){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ft(e,t)}function Nt(e,t){if(e){if("string"==typeof e)return Ut(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(e,t):void 0}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var xt={alt:0,lat:0,lng:0};var Gt=function(e){var t=e.split("/");return{imageName:t[t.length-1],group:2===t.length?t[0]:void 0}},Mt=function(e){function t(){var e,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,n){return t=Ct(t),function(e,t){if(t&&("object"==Rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lt()?Reflect.construct(t,n||[],Ct(e).constructor):t.apply(e,n))}(this,t,[null!==(e=o.geometry)&&void 0!==e?e:new St.S2GeometryProvider(null==o?void 0:o.geometryLevel)]))._features=(null==o||null===(n=o.geojson)||void 0===n?void 0:n.features)||[],r._debug=!!o.debug,r._getImageFromUrl=o.getImageFromUrl?o.getImageFromUrl:function(e){return Ot().get(e,{responseType:"arraybuffer"}).then((function(e){return e.data}))},r._url=o.url,r._initialize(),r._populate(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ft(e,t)}(t,e),n=t,r=[{key:"getCluster",value:function(){return Promise.resolve({points:{},reference:xt})}},{key:"getCoreImages",value:function(e){var t=this.cells.has(e)?this.cells.get(e):[];return Promise.resolve({cell_id:e,images:t})}},{key:"getImageBuffer",value:function(e){return this._getImageFromUrl(e)}},{key:"getImages",value:function(e){var t=this,n=e.map((function(e){return{node:t.images.has(e)?t.images.get(e):null,node_id:e}}));return Promise.resolve(n)}},{key:"getImageTiles",value:function(e){var t=this,n=this.images.has(e.imageId)?this.images.get(e.imageId):null;if(n){var r={w:n.width,h:n.height};if(this._debug)return Promise.resolve(function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256,r=Pt(e),o={z:t.z,max:r},i=jt(e,o),l=i.columns,a=i.rows,u=[],c=0;c<a;c++)for(var s=0;s<l;s++){var f=Tt({x:s,y:c},e,o),p=n,d=n/(f.w/f.h),y=document.createElement("canvas");y.setAttribute("width",p),y.setAttribute("height",d);var m=y.getContext("2d");m.fillStyle="#ffffff",m.fillRect(0,0,p,d),m.strokeStyle="#ff0000",m.strokeRect(0,0,p,d),m.fillStyle="#000000",m.font="10px monospace",m.textAlign="center",m.textBaseline="middle",m.fillText("x: ".concat(s,", y: ").concat(c,", z: ").concat(t.z),p/2,d/2),u.push({url:y.toDataURL(),x:s,y:c,z:null==t?void 0:t.z})}return{node:u,node_id:t.imageId}}(r,e));var o=function(e,t){for(var n=[],r={z:t,max:Pt(e)},o=jt(e,r),i=o.columns,l=o.rows,a=0;a<l;a++)for(var u=0;u<i;u++){var c=Tt({x:u,y:a},e,r);n.push({x:u,y:a,z:t,pixel:c})}return n}(r,e.z),i=Gt(e.imageId),l=i.imageName,a=i.group;return Promise.resolve({node:o.map((function(e){var n=e.x,r=e.y,o=e.z;return{url:"".concat(t._url).concat(a?"".concat(a,"/"):"","tiles/").concat(l,"/").concat(o,"_").concat(n,"_").concat(r,".jpg"),x:n,y:r,z:o}})),node_id:e.imageId})}return Promise.reject(new St.MapillaryError("Not image id ".concat(e.imageId," for tiling request")))}},{key:"getMesh",value:function(){return Promise.resolve({faces:[],vertices:[]})}},{key:"getSequence",value:function(e){var t=this;return new Promise((function(n,r){t.sequences.has(e)?n(t.sequences.get(e)):r(new St.MapillaryError("Sequence ".concat(e," does not exist")))}))}},{key:"getSpatialImages",value:function(e){return this.getImages(e)}},{key:"_initialize",value:function(){this.sequences=new Map,this.images=new Map,this.clusters=new Map,this.cells=new Map,this.meshes=new Map}},{key:"_populate",value:function(){var e=this,t=[],n={};this._features.forEach((function(r){var o=r.properties.MAPSequenceUUID||"1";n[o]||(n[o]={id:o,image_ids:[]});var i=r.properties.filename;n[o].image_ids.push(i),t.push(function(e,t){var n=t.imageId,r=t.meshId,o=t.clusterId,i=t.sequenceId,l=t.url,a={lat:e.properties.MAPLatitude,lng:e.properties.MAPLongitude},u=Gt(e.properties.filename),c=u.imageName,s=u.group,f=e.properties.filename,p=l+(s?s+"/":"")+"thumb/"+c+".jpg",d=e.properties.width,y=e.properties.height,m=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||Nt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.properties.MAPCaptureTime.split("_"),6),v=m[0],g=m[1],b=m[2],E=m[3],h=m[4],w=m[5];return{altitude:e.properties.MAPAltitude,atomic_scale:1,camera_parameters:[],camera_type:"spherical",captured_at:new Date("".concat(v,"/").concat(g,"/").concat(b," ").concat(E,":").concat(h,":").concat(w)).getTime(),cluster:{id:o,url:o},compass_angle:e.properties.MAPCompassHeading.TrueHeading,computed_compass_angle:e.properties.MAPCompassHeading.TrueHeading,computed_altitude:e.properties.MAPAltitude,computed_geometry:a,creator:{id:null,username:null},geometry:a,height:y,id:n,merge_id:"merge_id",mesh:{id:r,url:r},exif_orientation:e.properties.MAPOrientation,private:null,quality_score:1,sequence:{id:i},thumb:{id:f,url:p},owner:{id:null},width:d}}(r,{imageId:i,clusterId:1,meshId:1,sequenceId:o,url:e._url}))})),this.images=new Map(t.map((function(e){return[e.id,e]}))),this.cells=function(e,t){var n,r=new Map,o=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Nt(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(l)throw o}}}}(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,l=t.lngLatToCellId(i.geometry);r.has(l)||r.set(l,[]),r.get(l).push(i)}}catch(e){o.e(e)}finally{o.f()}return r}(this.images.values(),this._geometry),this.sequences=new Map(Object.keys(n).map((function(e){return[e,n[e]]})))}}],r&&_t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(St.DataProviderBase);const Vt=Mt;function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(e,t,n){return(t=function(e){var t=function(e){if("object"!=kt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==kt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n(445988);const $t=function(e){var t=e.size,r=e.location,o=e.className,i=void 0===o?"google-street-view":o,l=e.style,c=void 0===l?{}:l,s=e.setPov,f=void 0===s?function(){}:s,p=e.setLocation,d=void 0===p?function(){}:p,y=e.providerSettings,m=e.apiKey,v=(0,a.useRef)(),g=Kt((0,a.useState)(),2),b=g[0],E=g[1],h=Kt((0,a.useState)(!1),2),w=h[0],O=h[1];return(0,a.useEffect)((function(){return function(){null!=b&&b.remove&&b.remove(),null!=e&&e.resetStViewData&&e.resetStViewData()}}),[]),(0,a.useEffect)((function(){if(r&&b){var e,t,n=(null==r||null===(e=r.properties)||void 0===e?void 0:e.imageId)||(null==r||null===(t=r.properties)||void 0===t?void 0:t.filename);n&&b.isNavigable&&b.moveTo(n)}}),[r]),(0,a.useEffect)((function(){if(!b&&r){var e={url:null==y?void 0:y.ApiURL,geometryLevel:(null==y?void 0:y.geometryLevel)||14};!function(e,t){O(!0),Promise.resolve().then(n.bind(n,361915)).then((function(e){return e.Viewer})).then((function(n){new Promise((function(n,r){e&&null!=t&&t.url?Ot().get("".concat(t.url,"index.json")).then((function(e){var t=e.data;n(t)})).catch((function(e){return r(e)})):n()})).then((function(e){var o=new Vt({url:t.url,geometryLevel:(null==t?void 0:t.geometryLevel)||14,geojson:e||{type:"FeatureCollection",features:[]}});!function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new e({container:v.current,dataProvider:o,imageId:(null==r||null===(t=r.properties)||void 0===t?void 0:t.imageId)||(null==r||null===(n=r.properties)||void 0===n?void 0:n.filename),accessToken:m,component:{cover:!1}});E(i),i.on("bearing",(function(e){f({heading:e.bearing})})),i.on("image",(function(e){d({latLng:{lat:e.image.lngLat.lat,lng:e.image.lngLat.lng,h:e.image.computedAltitude||0},properties:{imageId:e.image.id,filename:e.image.id,id:e.image.id}})}))}(n,o),O(!1)}))})).catch((function(e){O(!1),console.error(e)}))}(null==y?void 0:y.ApiURL,e)}}),[b,r]),(0,a.useEffect)((function(){b&&b.resize()}),[t]),u().createElement(u().Fragment,null,u().createElement("div",{className:i,style:Wt({display:b?"none":"block"},c)},u().createElement(Ne,{loading:w})),u().createElement("div",{className:i,style:{position:"absolute",margin:c.margin,height:c.height,width:c.width},ref:v}))};var Yt=["apiLoaded","enabled"];function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qt.apply(null,arguments)}function Zt(e){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e,t,n){return(t=function(e){var t=function(e){if("object"!=Zt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var en={google:Ke,cyclomedia:ht,mapillary:(0,s.connect)((0,E.j8)({apiLoaded:C("mapillary"),location:F,panoramaOptions:K}),{setLocation:Te,setPov:Re})((function(e){var t=e.apiLoaded,n=(e.enabled,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Yt));return t?u().createElement($t,qt({location,mapillary:me()},n)):u().createElement("div",{className:"street-view-api-loader"},u().createElement(h.A,{msgId:"streetView.loadingAPI"}))}))};const tn=(0,s.connect)((0,E.j8)({enabled:D}),{onClose:function(){return je()}})((function(e){var t,n,r=e.enabled,o=e.onClose,i=void 0===o?function(){}:o,l=e.provider,s=e.panelSize,f=e.providerSettings,p=e.apiKey,d=e.resetStViewData,y=(t=(0,a.useState)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:400,height:300},s)),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Xt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=y[0],v=y[1],g=(0,a.useMemo)((function(){return en[l]}),[l]);return r?u().createElement(w.A,{id:"street-view-dialog",bodyClassName:"street-view-window-body",draggable:!0,style:{zIndex:1e4,position:"absolute",left:"17%",top:"50px",margin:0,width:m.width}},u().createElement("span",{role:"header",style:{display:"flex",justifyContent:"space-between"}},u().createElement("span",{className:"modal-title"},u().createElement(h.A,{msgId:"streetView.title"})),u().createElement("button",{onClick:function(){return i()},className:"close"},u().createElement(c.e6,{glyph:"1-close"}))),u().createElement("div",{role:"body",style:{height:m.height}},u().createElement(O.Resizable,{width:m.width,height:m.height,onResize:function(e,t){var n=t.size;v(n)}},u().createElement("div",{style:{display:"flex",flexDirection:"column",width:m.width,height:m.height}},g?u().createElement(g,{resetStViewData:d,onClose:i,providerSettings:f,apiKey:p,enabled:r,size:m,style:{flex:1,margin:10,height:"calc(100% - ".concat(20,"px)"),width:"calc(100% - ".concat(20,"px)")}}):u().createElement(c.Fc,{bsStyle:"danger"},"Unknown provider ",l))))):null}));function nn(e){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(e)}function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ln(e,t,n){return(t=function(e){var t=function(e){if("object"!=nn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var an={},un=n(45388),cn=n.n(un),sn=n(593429),fn=n(273494),pn=n(812366),dn=n(975699),yn=n(967858);function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}var vn=["url"];function gn(e){return function(e){if(Array.isArray(e))return bn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return bn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t,n){return(t=function(e){var t=function(e){if("object"!=mn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(B.x7,B.$4,B.FL).filter((function(e){return e.control===p})).filter((function(){return D(r())})).switchMap((function(){return cn().Observable.of((0,pn.bC)(),(0,pn.S$)(!1)).merge(e.ofType(B.x7,B.$4,B.FL).filter((function(e){return e.control===p})).take(1).filter((function(){return!D(r())})).filter((function(){return!(0,dn.Xw)(r())})).mapTo((0,pn.S$)(!0)).takeUntil(e.ofType(B.rY)))}))},Sn=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(B.x7,B.$4,B.FL).filter((function(e){return e.control===p})).filter((function(){return D(r())})).switchMap((function(){return cn().Observable.defer((function(){var e,t=(e=r(),z(e));if(null===t)return Promise.resolve(null);var n={id:y,name:y,visibility:!0};if("vector"===t.type&&t.url){var o=t||{},i=o.url,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(o,vn);return Ot().get("".concat(i,"index.json")).then((function(e){var t=e.data;return hn(hn(hn({},n),l),{},{features:(null==t?void 0:t.features)||{}})})).catch((function(e){throw e.code="FAIL_TO_FETCH_DATA",e}))}return Promise.resolve(hn(hn({},n),t))})).switchMap((function(t){return cn().Observable.from([(0,fn.K6)("click",p)].concat(gn(H(r())?gn(null!==t?[(0,sn.E)(y,d,"overlay",t)]:[]):[]))).concat(e.ofType(B.x7,B.$4,B.FL).filter((function(e){return e.control===p})).filter((function(){return!D(r())})).merge(e.ofType(B.rY)).take(1).switchMap((function(){return cn().Observable.from([(0,fn.nt)("click",p)].concat(gn(H(r())?[(0,sn.v9)({id:y,owner:d})]:[])))})))})).catch((function(e){return cn().Observable.of((0,$.z3)({title:"streetView.title",message:"FAIL_TO_FETCH_DATA"===e.code?"streetView.messages.errorRetriveingLayerData":"streetView.messages.unknownError"}))}))}))},An=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(fn.a2).filter((function(){return D(r())})).filter((function(){return e=r(),C(x(e))(e);var e})).switchMap((function(e){var t,n=e.point,o=x(r()),i=null===(t=ge[o])||void 0===t?void 0:t.getLocation;return i?cn().Observable.defer((function(){return i(n)})).map(Te).catch((function(e){return"ZERO_RESULTS"===e.code?cn().Observable.of((0,$.pq)({title:"streetView.title",message:"streetView.messages.noDataForPosition"})):(console.error(e),cn().Observable.of((0,$.z3)({title:"streetView.title",message:"streetView.messages.unknownError"})))})):cn().Observable.of((0,$.z3)({title:"streetView.title",message:"streetView.messages.providerNotSupported"}))}))},In=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(Ie).switchMap((function(e){var t,n,o,i=e.updates,l=void 0===i?{}:i,a=(t=r(),null===(o=(null!==(n=(0,I.d)(t))&&void 0!==n?n:[]).filter((function(e){return e.id===y})))||void 0===o||null===(o=o[0])||void 0===o?void 0:o.options);return cn().Observable.of((0,sn.E)(y,d,"overlay",hn(hn({},a),l)))}))},Pn=function(e,t){return(0,yn.p)(e,t,p)},jn=n(785072),Tn=n.n(jn),Rn=n(607897);Tn()(Rn.A,{insert:"head",singleton:!1}),Rn.A.locals;var _n=["mapType","enabled"],Dn={openlayers:(0,a.lazy)((function(){return Promise.all([n.e(7434),n.e(38487),n.e(89029),n.e(36128),n.e(66968),n.e(60284),n.e(81224),n.e(59550)]).then(n.bind(n,417016))})),cesium:(0,a.lazy)((function(){return Promise.all([n.e(38487),n.e(56367),n.e(55394),n.e(78630)]).then(n.bind(n,678630))}))};const Ln=(0,s.connect)((0,E.Mz)([D,F,N],(function(e,t,n){return{enabled:e,location:t,pov:n}})))((function(e){var t=e.mapType,n=e.enabled,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,_n);if(!n)return null;var o=Dn[t];return o?u().createElement(a.Suspense,{fallback:null},u().createElement(o,r)):null}));var Cn=(0,s.connect)((function(){return{}}),{onMount:function(e){return{type:Oe,configuration:e}},onUnmount:function(){return function(e,t){e({type:Se}),D(t())&&e((0,B.fN)(p,"enabled",!1))}},resetStViewData:function(){return function(e){return e({type:Ae})}}})((function(e){var t=e.onMount,n=e.onUnmount,r=e.resetStViewData,o=e.apiKey,i=e.useDataLayer,l=e.clampToGround,c=e.dataLayerConfig,s=e.panoramaOptions,f=e.provider,p=void 0===f?"google":f,d=e.providerSettings,y=e.panelSize;return(0,a.useEffect)((function(){return t({apiKey:o,useDataLayer:i,dataLayerConfig:c,panoramaOptions:s,provider:p,providerSettings:d,clampToGround:l}),function(){n()}}),[o,i,c,JSON.stringify(null!=s?s:{})]),u().createElement(tn,{resetStViewData:r,apiKey:o,provider:p,providerSettings:d,panelSize:y})}));const Fn=(0,f.i1)("StreetView",{options:{disablePluginIf:"{state('mapType') === 'leaflet'}"},epics:l,reducers:{streetView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=arguments.length>1?arguments[1]:void 0;switch(null==t?void 0:t.type){case Oe:return on(on({},e),{},{configuration:null==t?void 0:t.configuration});case he:var n;return on(on({},e),{},{location:null!==(n=null==t?void 0:t.location)&&void 0!==n?n:e.location});case we:var r;return on(on({},e),{},{pov:null!==(r=null==t?void 0:t.pov)&&void 0!==r?r:e.pov});case be:return on(on({},e),{},{apiLoading:null==t?void 0:t.loading});case Ee:return on(on({},e),{},{apiLoaded:ln({},t.provider,!0)});case Ae:return on(on({},e),{},{location:void 0,pov:void 0});case Se:return an;default:return e}}},component:Cn,containers:{BurgerMenu:{position:40,priority:2,doNotHide:!0,name:p,text:u().createElement(h.A,{msgId:"streetView.title"}),tooltip:"streetView.tooltip",icon:u().createElement(c.e6,{glyph:"road"}),action:function(){return je()}},SidebarMenu:{position:40,priority:1,doNotHide:!0,name:p,text:u().createElement(h.A,{msgId:"streetView.title"}),tooltip:"streetView.tooltip",icon:u().createElement(c.e6,{glyph:"road"}),action:function(){return je()},selector:function(e){return{bsStyle:D(e)?"primary":"tray",active:D(e)||!1}}},Map:{Tool:Ln,name:"StreetViewMapLocationSupport",alwaysRender:!0}}})},697150:(e,t,n)=>{n.d(t,{d:()=>i});var r=n(858156),o=n.n(r),i=function(e){return o()(e,"additionallayers")||[]}},967858:(e,t,n)=>{n.d(t,{d:()=>s,p:()=>f});var r=n(415392),o=n(45388),i=n.n(o),l=n(130711),a=n(717140),u=n(273494),c=n(762686),s="export-context",f=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return i().Observable.from([(0,r.fN)(t,"enabled",null)])},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t){return(0,l.cU)(t)(e)};return e.ofType(a.V9,u.QH,c.Pn).filter((function(e){var r=e.type,o=e.status,i=e.owner,l=e.eventName,f=e.toolName,p=s(t.getState(),n);switch(r){case c.Pn:return"featureGrid"!==n;case u.QH:return p&&"click"===l&&f!==n;case a.V9:return p&&("drawOrEdit"===o||"start"===o)&&i!==n;default:return p&&"annotations"!==n}})).switchMap((function(e){return s(t.getState(),n)?o(t.getState(),n,e):i().Observable.empty()}))}},607897:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(576314),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,"/* css for react-resizable */\n.street-view-window-body {\n  /* override the standard justify */\n}\n.street-view-window-body .react-resizable-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  bottom: 0;\n  right: 0;\n  background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+');\n  background-position: bottom right;\n  padding: 0 3px 3px 0;\n  background-repeat: no-repeat;\n  background-origin: content-box;\n  box-sizing: border-box;\n  cursor: se-resize;\n}\n.street-view-window-body .react-resizable {\n  position: relative;\n}\n.street-view-window-body .empty-state-container .empty-state-main-view .empty-state-description {\n  text-align: center;\n}\n.street-view-window-body .street-view-api-loader {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n}\n.street-view-window-body .empty-street-view {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n.street-view-window-body .empty-street-view div {\n  max-width: 350px;\n}\n.street-view-window-body .empty-street-view .empty-state-image .glyphicon {\n  margin-left: -14% !important;\n}\n.street-view-window-body .street-view-credentials h5 {\n  text-align: center;\n  font-weight: bold;\n  margin: 25px auto;\n}\n.street-view-window-body .street-view-credentials form {\n  margin: 0 30px;\n}\n.street-view-window-body .street-view-credentials form .street-view-credentials-form-buttons {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n.street-view-window-body iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n",""]);const i=o}}]);