/*! For license information please see annotations-plugin.27493964da430bd5.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[51482],{812366:(e,t,n)=>{"use strict";n.d(t,{$j:()=>B,A2:()=>l,A_:()=>X,BQ:()=>b,Cu:()=>C,Cx:()=>p,DK:()=>D,Df:()=>k,Ej:()=>Z,GN:()=>I,Gt:()=>q,HN:()=>o,Lg:()=>ee,M4:()=>u,MX:()=>c,Ms:()=>W,Q$:()=>g,Rr:()=>f,S$:()=>M,Tg:()=>O,Tl:()=>T,Tv:()=>L,VK:()=>oe,W5:()=>E,WE:()=>R,Wp:()=>U,Yq:()=>K,Zv:()=>J,_z:()=>x,bC:()=>H,bV:()=>N,cc:()=>V,cn:()=>Y,dk:()=>ie,fJ:()=>S,fK:()=>m,g5:()=>P,gt:()=>z,jN:()=>v,kl:()=>d,m7:()=>ne,nq:()=>j,nx:()=>te,ow:()=>s,p7:()=>h,pK:()=>ae,r:()=>$,s9:()=>y,t7:()=>a,tW:()=>i,ti:()=>A,uk:()=>w,vt:()=>re,wC:()=>F,xk:()=>_,yd:()=>Q});var r=n(737369),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",c="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",d="SHOW_MAPINFO_MARKER",f="HIDE_MAPINFO_MARKER",p="SHOW_REVERSE_GEOCODE",m="HIDE_REVERSE_GEOCODE",y="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",b="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",h="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",E="TOGGLE_MAPINFO_STATE",O="UPDATE_CENTER_TO_MARKER",S="IDENTIFY:CHANGE_PAGE",w="IDENTIFY:CLOSE_IDENTIFY",T="IDENTIFY:CHANGE_FORMAT",I="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",j="IDENTIFY:EDIT_LAYER_FEATURES",P="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",A="IDENTIFY:SET_MAP_TRIGGER",C="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",N="IDENTIFY:SET_SHOW_IN_MAP_POPUP",k="IDENTIFY:IDENTIFY_IS_MOUNTED",D="IDENTIFY:INIT_PLUGIN";function L(e,t,n,r,i){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:i}}function _(e,t,n,r){return{type:i,error:t,reqId:e,requestParams:n,layerMetadata:r}}function R(){return{type:y}}function x(){return{type:v}}function F(e,t){return{type:u,reqId:e,request:t}}function M(e){return{type:l,enabled:e}}function z(){return{type:c}}function U(e){return{type:s,infoFormat:e}}function Y(){return{type:d}}function H(){return{type:f}}function G(e){return{type:p,reverseGeocodeData:e.data}}function B(e){return function(t){r.A.reverseGeocode(e).then((function(e){t(G(e))})).catch((function(e){t(G(e))}))}}function q(){return{type:m}}function V(){return{type:E}}function K(e){return{type:O,status:e}}function W(e,t){return{type:b,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function Z(e){return{type:g,point:e}}function $(e){return{type:h,enabled:e}}function Q(e){return{type:S,index:e}}var J=function(){return{type:w}},X=function(e){return{type:T,format:e}},ee=function(e){return{type:I,showCoordinateEditor:e}},te=function(e){return{type:j,layer:e}},ne=function(e){return{type:P,query:e}},re=function(e){return{type:A,trigger:e}},oe=function(e){return{type:N,value:e}},ie=function(e){return{type:k,isMounted:e}},ae=function(e){return{type:D,cfg:e}}},174910:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var r=n(273517),o=n.n(r),i=n(605556),a=n.n(i),l=n(8117),u=n(611741),c=n.n(u),s=n(269843),d=n.n(s),f=n(192016),p=n(551783),m=n(256951),y=n(348317),v=n(434164),b=n(8571),g=n(6683),h=["labelId"];function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=function(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=(0,p.A)(["placeholder","noResultsText"])(f.Ay.Creatable),A=(0,p.A)(["placeholder","noResultsText"])(f.Ay);function C(e){var t,n=e.label,r=e.showArrow,i=e.limitsType;return o().createElement("span",null,(t=n,"scale"===i?"1 : "+Math.round(t):t),r&&o().createElement(o().Fragment,null,"Â ",o().createElement(l.e6,{glyph:"arrow-left"})))}function N(e){var t=e.id,n=e.value,r=e.placeholderId,i=e.noResultsTextId,a=e.createTextId,l=e.options,u=e.isValidNewOption,s=void 0===u?function(){return!0}:u,d=e.onChange,f=void 0===d?function(){}:d,p=e.disabled,m=e.loading;return o().createElement(P,{inputProps:{id:t},placeholder:r,noResultsText:i,value:n,isLoading:m,options:l,disabled:p,optionRenderer:C,valueRenderer:C,promptTextCreator:function(e){return o().createElement(b.A,{msgId:a,msgParams:{label:e}})},isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!c()(t)&&s(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);f(c()(t)?void 0:I(I({},e),{},{value:t}))}})}function k(e){var t=e.title,n=e.layer,i=e.zoom,a=e.projection,u=e.resolutions,c=void 0===u?(0,g._7)():u,s=e.defaultLimitsType,f=e.limitsTypesOptions,p=e.dpi,E=e.onChange,T=Math.round(i||0),j=O((0,r.useState)(s||f[0].value),2),P=j[0],C=j[1],k=n.maxResolution,D=n.minResolution,L=n.disableResolutionLimits,_=(0,g.dQ)(p,a);function R(e,t){var n,r=e.map((function(e){return e[P]}));return d()(t[P])||-1!==r.indexOf(t[P])?e:[t].concat((n=e,function(e){if(Array.isArray(e))return w(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||S(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e[P]>t[P]?-1:1}))}function x(e,t){return(0,g.oq)(e,t,{projection:a,resolutions:c})}var F=O((0,r.useState)([]),2),M=F[0],z=F[1],U=O((0,r.useState)(k&&{resolution:k,scale:k*_,zoom:(0,g.Yc)(k,c)}),2),Y=U[0],H=U[1],G=O((0,r.useState)(D&&{resolution:D,scale:D*_,zoom:(0,g.Yc)(D,c)}),2),B=G[0],q=G[1],V=O((0,r.useState)(!1),2),K=V[0],W=V[1],Z=O((0,r.useState)(),2),$=Z[0],Q=Z[1],J=O((0,r.useState)(),2),X=J[0],ee=J[1],te=(0,r.useRef)();function ne(){ee(void 0),Q(void 0)}(0,r.useEffect)((function(){return te.current=!0,function(){te.current=!1}}),[]);var re=c.join(",");return(0,r.useEffect)((function(){var e=D&&{resolution:D,scale:D*_,zoom:(0,g.Yc)(D,c)},t=k&&{resolution:k,scale:k*_,zoom:(0,g.Yc)(k,c)},n=[e,t].filter((function(e){return e})).reduce(R,c.map((function(e,t){return{resolution:e,scale:e*_,zoom:t}})));H(t),q(e),z(n),ne()}),[_,re]),o().createElement("div",{className:"ms-visibility-limits-form"},o().createElement("div",{className:"ms-visibility-limits-form-title",style:{display:"flex",alignItems:"center"}},o().createElement("div",{style:{flex:1}},t),o().createElement(m.A,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"refresh",disabled:!(!L&&!K),visible:"wms"===n.type,onClick:function(){"wms"!==n.type||K||(W(!0),ne(),(0,v.aF)(n).toPromise().then((function(e){if(te.current){var t,n,r=e.MaxScaleDenominator,o=e.MinScaleDenominator,i=!d()(r)&&x(r,"scale"),a=!d()(o)&&x(o,"scale");(function(e,t){var n,r,o=(n=e,r=t,d()(n)&&d()(r)?"layerProperties.visibilityLimits.serverValuesUpdateUndefined":d()(n)&&!d()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMinScale":!d()(n)&&d()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMaxScale":"layerProperties.visibilityLimits.serverValuesUpdate");Q(o)})(r,o),a&&q(a),i&&H(i),E(I(I({},i&&{maxResolution:i.resolution}),a&&{minResolution:a.resolution}));var l=(null===(t=a||B)||void 0===t?void 0:t.resolution)||-1/0;((null===(n=i||Y)||void 0===n?void 0:n.resolution)||1/0)<l&&ee("layerProperties.visibilityLimits.rangeError"),W(!1)}})).catch((function(){te.current&&(W(!1),ee("layerProperties.visibilityLimits.serverValuesError"))})))},tooltipId:"layerProperties.visibilityLimits.updateWMSCapabilities"},{Element:function(){return o().createElement(y.A,{checked:!L,onClick:function(){E({disableResolutionLimits:!L}),ne()}})}}]})),o().createElement("label",{htmlFor:"ms-visibility-limits-max"},o().createElement(b.A,{msgId:"layerProperties.visibilityLimits.maxValue"})),o().createElement(N,{id:"ms-visibility-limits-max",value:(null==Y?void 0:Y[P])&&{value:Y[P],label:Y[P],zoom:Y.zoom,limitsType:P},placeholderId:"layerProperties.visibilityLimits.maxValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:K,isValidNewOption:function(e){return e>=((null==B?void 0:B[P])||0)},options:M.map((function(e){return I(I({},e),{},{value:e[P]+(e.delta||0),label:e[P],showArrow:e.zoom===T,disabled:!d()(null==B?void 0:B[P])&&e[P]<=B[P],limitsType:P})})),disabled:L||K,onChange:function(e){var t=void 0===e.value?{}:d()(e.zoom)?x(e.value,P):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(E({maxResolution:t.resolution}),H(t),void 0!==e.value&&d()(e.zoom)){var n=R(M,t);z(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-min"},o().createElement(b.A,{msgId:"layerProperties.visibilityLimits.minValue"})),o().createElement(N,{id:"ms-visibility-limits-min",value:(null==B?void 0:B[P])&&{value:B[P],label:B[P],zoom:B.zoom,limitsType:P},placeholderId:"layerProperties.visibilityLimits.minValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:K,isValidNewOption:function(e){return e<=((null==Y?void 0:Y[P])||1/0)},options:M.map((function(e){return I(I({},e),{},{value:e[P],label:e[P],showArrow:e.zoom===T,disabled:!d()(null==Y?void 0:Y[P])&&e[P]>=Y[P],limitsType:P})})),disabled:L||K,onChange:function(e){var t=void 0===e.value?{}:d()(e.zoom)?x(e.value,P):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(E({minResolution:t.resolution}),q(t),void 0!==e.value&&d()(e.zoom)){var n=R(M,t);z(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-type"},o().createElement(b.A,{msgId:"layerProperties.visibilityLimits.type"})),o().createElement(A,{inputProps:{id:"ms-visibility-limits-type"},value:P,clearable:!1,options:f.map((function(e){var t=e.labelId;return I(I({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,h)),t&&{label:o().createElement(b.A,{msgId:t})})})),disabled:L||K,onChange:function(e){var t=e.value;C(t),E({visibilityLimitType:t}),ne()}}),$&&o().createElement(l.Fc,{bsStyle:"success"},o().createElement(b.A,{msgId:$})),X&&o().createElement(l.Fc,{bsStyle:"danger"},o().createElement(b.A,{msgId:X})))}k.propTypes={layer:a().object,zoom:a().number,onChange:a().func,resolutions:a().array,limitsTypesOptions:a().array,projection:a().string,dpi:a().number,defaultLimitsType:a().string},k.defaultProps={layer:{},onChange:function(){},limitsTypesOptions:[{value:"scale",labelId:"layerProperties.visibilityLimits.scale"},{value:"resolution",labelId:"layerProperties.visibilityLimits.resolution"}],dpi:g.Zl};const D=k},712853:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(273517),o=n.n(r),i=(n(715096),n(786292)),a=n(460056),l=n.n(a),u=n(276901),c=["wrapperClassName","toolbarOptions"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const d=function(e){var t=e.wrapperClassName,n=void 0===t?"ms-compact-text-editor":t,r=e.toolbarOptions,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return o().createElement(i.Editor,s({},a,{editorStyle:{minHeight:200},wrapperClassName:n,toolbar:{options:r||["fontFamily","blockType","inline","textAlign","list","link","colorPicker","remove","image","embedded"],image:{urlEnabled:!0,uploadEnabled:a.uploadEnabled||!1,alignmentEnabled:!1,uploadCallback:function(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){var e,n;(e=r.result,n={size:500,type:"image/jpeg",quality:.8},new Promise((function(t,r){var o=n||{},i=o.size,a=o.type,l=void 0===a?"image/png":a,u=o.quality,c=void 0===u?.9:u,s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=s.naturalWidth,n=s.naturalHeight,r=i,o=i/(e/n),a=document.createElement("canvas");a.setAttribute("width",r),a.setAttribute("height",o),a.getContext("2d").drawImage(s,0,0,r,o);var u=a.toDataURL(l,c);t(u)},s.onerror=function(e){r(e)},s.src=e}))).then((function(e){t({data:{link:e}})}))})),e?r.readAsDataURL(e):n()}))},previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:a.alt||{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"100%"}},fontFamily:{options:a.fonts||u.Jp},link:{inDropdown:!1,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"]},inline:{inDropdown:!0,options:["bold","italic","underline","strikethrough","monospace"]},textAlign:{inDropdown:!0},list:{inDropdown:!0},embedded:{embedCallback:function(e){var t=/<iframe.*? src="(.*?)"/.exec(l()(e));return t&&t[1]||e},defaultSize:{height:"auto",width:"100%"}}}}))}},955201:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ct});var r=n(393149),o=n(45388),i=n.n(o),a=n(541033),l=n.n(a),u=n(791936),c=n(415392),s=n(904059),d=n(883832),f=n(812366),p=n(446176),m=n(535273),y=n(29489),v=n(131127),b=n(307679);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const T={loadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(p.Qn).switchMap((function(e){var t,r=e.features,o=e.override,a=(0,y.gu)(n());if(!o){var l,u=a.map((function(e){return e.id}));return(l=i().Observable).of.apply(l,S(r.map((function(e){return u.includes(e.id)?(0,s.OK)(e.id,"layer",{title:e.title,description:e.description,style:e.style,features:e.features}):(0,s.VE)(e)}))))}return(t=i().Observable).of.apply(t,S(a.map((function(e){return(0,s.e5)(e.id)}))).concat(S(r.map((function(e){return(0,s.VE)(e)})))))}))},newAnnotationEpic:function(e){return e.ofType(p.rC).switchMap((function(){var e={id:(0,m.Fe)(l()()),title:"New annotations",type:"vector",features:[],style:{},visibility:!0,rowViewer:m.BC};return i().Observable.of((0,f.bC)(),(0,s.VE)(e),(0,s.XL)(e.id,"layer"),(0,c.fN)(m.BC,"enabled",!0))}))},editAnnotationEpic:function(e,t){var n=t.getState;return e.ofType(p.vM).switchMap((function(e){var t,r=(0,b.ZT)(n());return(t=i().Observable).of.apply(t,[(0,f.bC)()].concat(S((null==r?void 0:r.id)!==(null==e?void 0:e.id)?[(0,s.XL)(e.id,"layer")]:[]),[(0,c.fN)(m.BC,"enabled",!0)]))}))},downloadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(p.dC).switchMap((function(e){var t=e.annotations;try{var r=(0,m.ju)(t),o=(0,v.Bl)(n());return(0,u.saveAs)(new Blob([JSON.stringify(r)],{type:"application/json;charset=utf-8"}),"".concat(o.length>0&&o||m.BC,".json")),i().Observable.empty()}catch(e){return i().Observable.of((0,d.z3)({title:"annotations.title",message:"annotations.downloadError",autoDismiss:5,position:"tr"}))}}))},confirmCloseAnnotationsEpic:function(e){return e.ofType(p.jT).switchMap((function(e){var t,n=e.layer;return i().Observable.of((0,c.fN)(m.BC,"enabled",!1),null!=n&&null!==(t=n.features)&&void 0!==t&&t.length?(0,s.OK)(n.id,"layer",{invalidFeatures:null}):(0,s.e5)(n.id))}))},removeAnnotationsEpic:function(e){return e.ofType(p.xn).switchMap((function(e){return i().Observable.of((0,f.gt)(),(0,f.Zv)(),(0,s.e5)(e.id))}))},mergeAnnotationsFeaturesEpic:function(e,t){var n=t.getState;return e.ofType(p.IL).switchMap((function(e){var t,r=e.annotation,o=function(e){var t,n,o,i;return{features:[].concat(S((null==e?void 0:e.features)||[]),S((null==r?void 0:r.features)||[])),style:E(E(E({},null==r?void 0:r.style),null==e?void 0:e.style),{},{body:E(E(E({},null==r||null===(t=r.style)||void 0===t?void 0:t.body),null==e||null===(n=e.style)||void 0===n?void 0:n.body),{},{rules:[].concat(S((null==e||null===(o=e.style)||void 0===o||null===(o=o.body)||void 0===o?void 0:o.rules)||[]),S((null==r||null===(i=r.style)||void 0===i||null===(i=i.body)||void 0===i?void 0:i.rules)||[]))})})}},a=n(),u=(0,b.pO)(a,e.id),c=(0,y.bd)(a);return(t=i().Observable).of.apply(t,S(c?[(0,p.ol)(o(c))]:[]).concat([(0,s.OK)(u.id,"layer",E({_v_:l()()},o(u)))]))}))}};var I=n(516516),j=n(273517),P=n.n(j),A=n(310340),C=n(811668),N=n(801081),k=n(987021),D=n.n(k),L=n(273494),_=n(130711),R=n(747135),x=n(8117),F=n(503618),M=n(382378),z=n.n(M),U=n(383488),Y=n.n(U),H=n(947194),G=n(444003),B=n(711030),q=n(739875),V=n(457601),K=n(605556),W=n.n(K),Z=n(542541);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(null,arguments)}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oe(r.key),r)}}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e,t,n){return(t=oe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){var t=function(e){if("object"!=$(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=te(t),function(e,t){if(t&&("object"==$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ee()?Reflect.construct(t,n||[],te(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return P().createElement(Z.A,Q({},this.props.options,{items:[],isDraggable:!0,enableHeightField:this.props.enableHeightField,type:this.props.featureType,components:this.props.selected&&this.props.selected.geometry&&this.props.selected.geometry.coordinates&&this.props.selected.geometry.coordinates.length?(0,m.Py)(this.props.selected.geometry):[],properties:this.props.selected&&this.props.selected.properties||{},onComplete:function(){},onChangeRadius:this.props.onChangeRadius,aeronauticalOptions:this.props.aeronauticalOptions,onChangeFormat:this.props.onChangeFormat,format:this.props.format,mapProjection:this.props.mapProjection,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:this.props.renderer,onValidateFeature:this.props.onValidateFeature,onChange:function(t,n,r,o){var i=t.map((function(e){return[e.lon,e.lat].concat(function(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(void 0!==e.height?[e.height]:[]))}));e.props.onChange(i,n,r,o),e.props.onValidateFeature()}}))}}])&&X(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(P().Component);re(ie,"propTypes",{components:W().array,options:W().object,onRemove:W().func,onChange:W().func,transitionProps:W().object,selected:W().object,featureType:W().string,format:W().string,mapProjection:W().string,onComplete:W().func,onHighlightPoint:W().func,onChangeFormat:W().func,onChangeRadius:W().func,onSetInvalidSelected:W().func,aeronauticalOptions:W().object,onChangeText:W().func,renderer:W().string,onValidateFeature:W().func,enableHeightField:W().bool}),re(ie,"defaultProps",{selected:{},options:{},components:[],onRemove:null,onChange:function(){},onComplete:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onSetInvalidSelected:function(){},onChangeText:function(){},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},onValidateFeature:function(){},enableHeightField:!1});const ae=ie;var le=n(8571),ue=n(34273),ce=n(274156);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function de(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(e){if("string"==typeof e)return pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){return(t=function(e){var t=function(e){if("object"!=se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==se(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=(0,q.A)(B.A),ge="UPDATE_ANNOTATIONS_FEATURES",he="UNDO_ANNOTATIONS_FEATURES",Ee="REDO_ANNOTATIONS_FEATURES",Oe=ve({},ge,(function(e,t){return t(e)})),Se=(0,F.Ay)((function(e,t){return(Oe[t.type]||Y())(e,t.callback)}),{limit:20,undoType:he,redoType:Ee,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),we={};const Te=(0,ce.injectIntl)((function(e){var t,n,r,o,i,a,u,c,s,d,f,p,y,v=e.selectedId,b=e.value,g=e.mapType,h=e.map,E=e.maxZoom,O=void 0===E?18:E,S=e.onSelect,w=void 0===S?function(){}:S,T=e.onChange,I=void 0===T?function(){}:T,A=e.onZoomTo,C=void 0===A?function(){}:A,N=e.onHighlight,k=void 0===N?function(){}:N,D=e.projection,L=e.intl,_=void 0===L?{}:L,R=e.mapInteractionsSupport,F=e.coordinatesFormat,M=e.onChangeCoordinatesFormat,U=void 0===M?function(){}:M,Y=e.tab,B=void 0===Y?"coordinates":Y,q=e.onSelectTab,K=void 0===q?function(){}:q,W=e.svgSymbolsPath,Z=e.lineDashOptions,$=e.enable3dStyleOptions,Q=e.geometryEditorOptions,J=e.defaultTextLabel,X=e.defaultSymbolizers,ee=e.geodesic,te=e.fonts,ne=void 0===te?["Arial","Verdana","Helvetica","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT"]:te,re=(p=(0,j.useReducer)(Se,{present:b,past:[],future:[]}),y=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(p,y)||fe(p,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),oe=re[0],ie=re[1],ce=(null==oe?void 0:oe.present)||oe||we,se=((null==ce?void 0:ce.features)||[]).find((function(e){return(null==e?void 0:e.id)===v})),pe=function(e,t){var n=e.symbolizerBlock,r=e.ruleBlock;return{symbolizerBlock:Object.keys(n).reduce((function(e,r){return ye(ye({},e),{},ve({},r,ye(ye({},n[r]),{},{defaultProperties:m.vU[r]||n[r].defaultProperties,params:Object.keys(n[r].params).reduce((function(e,o){var i,a=n[r].params[o];return["Circle"].includes(r)&&["geodesic","radius","msClampToGround","msGeometry"].includes(o)||["Text"].includes(r)&&["label","msGeometry"].includes(o)||["Line","Fill"].includes(r)&&["msGeometry"].includes(o)||["Point","Circle"].includes(null==t||null===(i=t.properties)||void 0===i?void 0:i.annotationType)&&["msGeometry"].includes(o)?e:ye(ye({},e),{},ve({},o,a))}),{})})))}),{}),ruleBlock:r}}((0,ue.A)({exactMatchGeometrySymbol:!0,enable3dStyleOptions:$}),se),me=pe.symbolizerBlock,Oe=pe.ruleBlock,Te=R;function Ie(e){ie({type:ge,callback:function(t){return e(t)}})}function je(e,t){K("coordinates",se);var n=l()();Ie((function(r){var o,i,a={type:"Feature",id:n,properties:ye(ye({},t),{},{id:n,name:e,annotationType:e}),geometry:null};return ye(ye({},r),{},{features:[].concat(de((null==r?void 0:r.features)||[]),[a]),style:ye(ye({},null==r?void 0:r.style),{},{format:"geostyler",body:ye(ye({},null==r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:[].concat(de((null==r||null===(i=r.style)||void 0===i||null===(i=i.body)||void 0===i?void 0:i.rules)||[]),[{name:"",filter:["==","id",n],mandatory:"Point"!==e,ruleId:l()(),symbolizers:[ye({symbolizerId:l()()},(0,m.xB)(a,X))]}])})})})})),w(n)}function Pe(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureType?(0,V.S6)(e,{formatNumber:null!=_&&_.formatNumber?_.formatNumber:function(e){return e}}):[e]}function Ae(e,t,n){Ie((function(r){return ye(ye({},r),{},{features:((null==r?void 0:r.features)||[]).filter((function(t){var r;return!n||(null==t||null===(r=t.properties)||void 0===r?void 0:r.measureId)!==e})).reduce((function(r,o){return[].concat(de(r),de((null==o?void 0:o.id)!==e?[o]:n?Pe(t):[t]))}),[])})}))}function Ce(e){ie({type:ge,callback:function(t){return ye(ye({},t),{},{features:(t.features||[]).filter((function(e){var t;return(null==e||null===(t=e.properties)||void 0===t?void 0:t.measureId)!==v})).reduce((function(t,n){var r;if((null==n?void 0:n.id)!==v)return[].concat(de(t),[n]);var o=(0,m.HC)(n),i=ye(ye({},n),{},{geometry:ye(ye({},null==o?void 0:o.geometry),{},{coordinates:(0,m.QU)(null==o||null===(r=o.geometry)||void 0===r?void 0:r.type,e)})});return[].concat(de(t),de((0,m.D)(i)?Pe(i):[i]))}),[])})}})}function Ne(){var e=(((null==ce?void 0:ce.style)||{}).body||{}).rules;return{name:"selected feature style",rules:(void 0===e?[]:e).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==se||null===(n=se.properties)||void 0===n?void 0:n.id)}))}}(0,j.useEffect)((function(){var e,t,n,r,o,i=((null==oe||null===(e=oe.present)||void 0===e?void 0:e.features)||[]).filter(m.D),a=((null==oe||null===(t=oe.present)||void 0===t?void 0:t.features)||[]).filter((function(e){return!(0,m.D)(e)})),l=i.map((function(e){return e.id}));I(ye(ye({},null==oe?void 0:oe.present),{},{features:i,style:ye(ye({},null==oe||null===(n=oe.present)||void 0===n?void 0:n.style),{},{format:"geostyler",body:ye(ye({},null==oe||null===(r=oe.present)||void 0===r||null===(r=r.style)||void 0===r?void 0:r.body),{},{rules:((null==oe||null===(o=oe.present)||void 0===o||null===(o=o.style)||void 0===o||null===(o=o.body)||void 0===o?void 0:o.rules)||[]).filter((function(e){var t=e.filter;return l.includes(null==t?void 0:t[2])}))})}),invalidFeatures:(null==a?void 0:a.length)>0?a:null}),(0,m.D)(se)?se:null,null==oe?void 0:oe.present)}),[null==oe?void 0:oe.present]);var ke=((null==ce?void 0:ce.features)||[]).filter((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType}));return P().createElement("div",{className:"ms-features-editor"},P().createElement("div",{className:"ms-features-editor-list"},P().createElement("div",{className:"ms-features-editor-list-header"},P().createElement(x.e2,null,P().createElement(be,{className:"square-button-md no-border",onClick:function(){ie({type:he})},disabled:0===((null==oe||null===(t=oe.past)||void 0===t?void 0:t.length)||0)},P().createElement(x.e6,{glyph:"undo"})),P().createElement(be,{className:"square-button-md no-border",onClick:function(){ie({type:Ee})},disabled:0===((null==oe||null===(n=oe.future)||void 0===n?void 0:n.length)||0)},P().createElement(x.e6,{glyph:"redo"}))),P().createElement(x.e2,null,P().createElement(be,{tooltipId:"annotations.titles.marker",className:"square-button-md no-border",onClick:function(){return je("Point")}},P().createElement(x.e6,{glyph:"point-plus"})),P().createElement(be,{tooltipId:"annotations.titles.line",className:"square-button-md no-border",onClick:function(){return je("LineString")}},P().createElement(x.e6,{glyph:"polyline-plus"})),P().createElement(be,{tooltipId:"annotations.titles.polygon",className:"square-button-md no-border",onClick:function(){return je("Polygon")}},P().createElement(x.e6,{glyph:"polygon-plus"})),P().createElement(be,{tooltipId:"annotations.titles.text",className:"square-button-md no-border",onClick:function(){return je("Text",{label:J||""})}},P().createElement(x.e6,{glyph:"font-add"})),P().createElement(be,{tooltipId:"annotations.titles.circle",className:"square-button-md no-border",onClick:function(){return je("Circle",{geodesic:!(null==ee||!ee.Circle)})}},P().createElement(x.e6,{glyph:"1-circle-add"})))),!(null!=ce&&null!==(r=ce.features)&&void 0!==r&&r.length)&&P().createElement("div",{className:"ms-features-editor-list-empty"},P().createElement(le.A,{msgId:"annotations.addGeometry"})),P().createElement("ul",{className:"ms-features-editor-list-body"},ke.map((function(e){var t,n=null==e?void 0:e.id,r=v===n;return P().createElement("li",{key:n,onClick:function(){return r?function(){}:w(n,(0,m.D)(e)?e:null)},className:"ms-features-editor-item ".concat(r?" selected":""),onMouseEnter:function(){v!==n&&(0,m.D)(e)&&k("feature",e)},onMouseLeave:function(){k("feature",null)}},P().createElement("div",null,P().createElement(x.e6,{glyph:(0,m.YI)(e)})),P().createElement("div",{style:{flex:1}},P().createElement("input",{value:null==e||null===(t=e.properties)||void 0===t?void 0:t.name,type:"text",onChange:function(t){return Ae(n,ye(ye({},e),{},{properties:ye(ye({},null==e?void 0:e.properties),{},{name:t.target.value})}))}})),P().createElement(x.e6,{glyph:(0,m.D)(e)?"ok-sign text-success":"exclamation-mark text-danger"}),P().createElement(x.e2,null,P().createElement(be,{disabled:!(0,m.D)(e),bsStyle:r?"primary":"default",className:"square-button-md",tooltipId:"annotations.zoomToGeometry",onClick:function(t){t.stopPropagation(),C(z()(e),"EPSG:4326",O)}},P().createElement(x.e6,{glyph:"zoom-to"})),P().createElement(be,{className:"square-button-md",bsStyle:r?"primary":"default",tooltipId:"annotations.removeGeometry",onClick:function(e){e.stopPropagation(),function(e){Ie((function(t){return ye(ye({},t),{},{features:((null==t?void 0:t.features)||[]).filter((function(t){var n;return(null==t?void 0:t.id)!==e&&(null==t||null===(n=t.properties)||void 0===n?void 0:n.measureId)!==e}))})}))}(n)}},P().createElement(x.e6,{glyph:"trash"}))))})))),!se&&P().createElement("div",{className:"ms-features-editor-tools-empty"},P().createElement("div",null,P().createElement(x.e6,{glyph:"comment"}),P().createElement("div",null,P().createElement(le.A,{msgId:"annotations.selectAnnotationFeature"})))),se&&P().createElement("div",{className:"ms-features-editor-tools"},P().createElement(x.so,{bsStyle:"tabs",activeKey:B},P().createElement(x.CI,{key:"coordinates",eventKey:"coordinates",onClick:function(){return K("coordinates",se)}},P().createElement(le.A,{msgId:"annotations.tabCoordinates"})),P().createElement(x.CI,{key:"style",eventKey:"style",onClick:function(){return K("style",se)}},P().createElement(le.A,{msgId:"annotations.tabStyle"}))),P().createElement("div",{className:"ms-features-editor-tools-body"},"coordinates"===B&&P().createElement(P().Fragment,null,P().createElement(ae,{key:se.id,enableHeightField:g===G.Av.CESIUM&&!(null!=se&&null!==(o=se.properties)&&void 0!==o&&o.geodesic),format:F,onChangeFormat:U,mapProjection:D,options:Q,onHighlightPoint:function(e){k("coordinate",e&&{type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:{}})},onChangeRadius:function(e){Ae(null==se?void 0:se.id,ye(ye({},se),{},{properties:ye(ye({},null==se?void 0:se.properties),{},{radius:e})}))},selected:ye(ye({},(0,m.HC)(se)),{},{properties:ye(ye({},null==se?void 0:se.properties),{},{valueText:null==se||null===(i=se.properties)||void 0===i?void 0:i.label})}),featureType:null==se||null===(a=se.properties)||void 0===a?void 0:a.annotationType,renderer:m.BC,onChange:Ce,onSetInvalidSelected:function(e,t){"coords"===e&&Ce(t)}}),"Text"===(null==se||null===(u=se.properties)||void 0===u?void 0:u.annotationType)&&P().createElement(x.gE,{className:"ms-annotations-label-input",key:"label",controlId:"ms-annotations-label-input",validationState:null!=se&&null!==(c=se.properties)&&void 0!==c&&c.label?void 0:"error"},P().createElement(x.mq,null,P().createElement(le.A,{msgId:"annotations.titles.text"})),P().createElement(x.MJ,{type:"text",value:(null==se||null===(s=se.properties)||void 0===s?void 0:s.label)||"",onChange:function(e){return Ae(null==se?void 0:se.id,ye(ye({},se),{},{properties:ye(ye({},null==se?void 0:se.properties),{},{label:e.target.value})}))}}))),"style"===B&&P().createElement("div",null,P().createElement(H.A,{ruleBlock:Oe,symbolizerBlock:me,config:{geometryType:"annotation-".concat(null==se||null===(d=se.properties)||void 0===d||null===(d=d.annotationType)||void 0===d?void 0:d.toLowerCase()),simple:!0,fonts:ne,svgSymbolsPath:W,lineDashOptions:Z},rules:(null===(f=Ne())||void 0===f?void 0:f.rules)&&de(Ne().rules).reverse(),onChange:function(e){return t=de(e).reverse(),void Ie((function(e){var n=null==e?void 0:e.style,r=(e.features||[]).reduce((function(e,r){var o;if(r.id===se.id)return[].concat(de(e),de(t.map((function(e){return ye(ye({},e),{},{filter:e.filter||["==","id",se.properties.id]})}))));var i=((null==n||null===(o=n.body)||void 0===o?void 0:o.rules)||[]).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==r||null===(n=r.properties)||void 0===n?void 0:n.id)}));return[].concat(de(e),de(i))}),[]),o=ye(ye({},n),{},{format:"geostyler",body:ye(ye({},null==n?void 0:n.body),{},{rules:r})});return ye(ye({},e),{},{style:o})}));var t}})))),Te&&P().createElement(Te,{key:null==se?void 0:se.id,active:!!se&&"coordinates"===B,map:h,mapType:g,feature:se,geodesic:ee,onChange:function(e){Ae(se.id,e,!0)}}))}));var Ie=n(593429),je="ms-annotations-editor-target",Pe="ANNOTATIONS_ADDITIONAL_LAYERS_OWNER";function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=ke(ke({},G.Av.OPENLAYERS,(0,j.lazy)((function(){return Promise.all([n.e(7434),n.e(89029),n.e(66968),n.e(36128),n.e(60284),n.e(81224),n.e(54620),n.e(18048),n.e(90974)]).then(n.bind(n,828109))}))),G.Av.CESIUM,(0,j.lazy)((function(){return Promise.all([n.e(38487),n.e(56367),n.e(55394),n.e(86881),n.e(86714),n.e(92054),n.e(57378),n.e(65365),n.e(531)]).then(n.bind(n,265365))}))),Le=ke(ke({},G.Av.OPENLAYERS,(0,j.lazy)((function(){return Promise.all([n.e(7434),n.e(89029),n.e(66968),n.e(36128),n.e(60284),n.e(81224),n.e(54620),n.e(18048),n.e(29132),n.e(35910),n.e(1073)]).then(n.bind(n,102496))}))),G.Av.CESIUM,(0,j.lazy)((function(){return Promise.all([n.e(38487),n.e(56367),n.e(55394),n.e(86881),n.e(86714),n.e(92054),n.e(57378),n.e(51130)]).then(n.bind(n,637423))}))),_e=function(e){return De[e]&&Le[e]};const Re=function(e){var t=e.map,n=e.active,r=e.mapType,o=e.feature,i=e.geodesic,a=void 0===i?{}:i,l=e.onChange,u=void 0===l?function(){}:l,c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).properties;return"Text"===(null==e?void 0:e.annotationType)?"Point":null==e?void 0:e.annotationType};if(!_e(r))return null;var s=De[r],d=Le[r],f=(0,m.D)(o,!0),p=c(o),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geometry,n=e.properties;return"Text"===(null==n?void 0:n.annotationType)||(null==n?void 0:n.radius)>0&&!t?"Point":null==n?void 0:n.annotationType}(o),v=!!a[p],b=(0,j.useRef)(o);return(0,j.useEffect)((function(){b.current=o}),[o]),P().createElement(j.Suspense,{fallback:null},P().createElement(P().Fragment,null,P().createElement(s,{map:t,active:n&&null===o.geometry,depthTestAgainstTerrain:!1,geometryType:y,geodesic:v,getObjectsToExcludeOnPick:function(){return[]},onDrawEnd:function(e){var t,n,r,o=e.feature;u(Ne(Ne({},b.current),{},{properties:Ne(Ne({},null===(t=b.current)||void 0===t?void 0:t.properties),{},{geodesic:v},void 0!==(null==o||null===(n=o.properties)||void 0===n?void 0:n.radius)&&{radius:null==o||null===(r=o.properties)||void 0===r?void 0:r.radius}),geometry:o.geometry}))}}),P().createElement(d,{map:t,active:n&&f,geojson:o,getGeometryType:c,onEditEnd:function(e){return u(e)}})))};function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||He(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return(t=function(e){var t=function(e){if("object"!=xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(e){return function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||He(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Be(e){var t;if(null==e||null===(t=e.geometry)||void 0===t||!t.type)return[];if("Point"===e.geometry.type&&!e.geometry.coordinates.some(m.us))return[ze(ze({},e),{},{properties:{geometryType:"Point"}})];var n=Fe(z()(e),4),r=n[0],o=n[1],i=n[2],a=n[3],l={type:"Feature",geometry:{type:"LineString",coordinates:[[r,o],[r,a],[i,a],[i,o],[r,o]]},properties:{geometryType:"LineString"}};return"LineString"===e.geometry.type?[l].concat(Ye(e.geometry.coordinates.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):"Polygon"===e.geometry.type?[l].concat(Ye(e.geometry.coordinates[0].map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):[e]}var qe=(0,C.connect)((0,N.Mz)([(0,_.xf)(m.BC,"ready"),y.kv,v.mg,R.tm,y.bd,y._L],(function(e,t,n,r,o,i){var a;return{enabled:e,selected:t,maxZoom:(null==n?void 0:n.zoom)||18,projection:null==n?void 0:n.projection,enable3dStyleOptions:!!r,activeClickEventListener:null==n||null===(a=n.eventListeners)||void 0===a||null===(a=a.click)||void 0===a?void 0:a[0],session:o,selectedId:i}})),{onChange:s.OK,onZoomTo:L.jc,onUpdateALayer:Ie.E,onRemoveALayer:Ie.v9,onStoreSession:p.ol,setSelectedId:p.IS})((function(e){var t=e.enabled,n=e.targetId,r=void 0===n?je:n,o=e.mapType,i=e.map,a=e.selected,l=e.onChange,u=e.onZoomTo,c=e.maxZoom,s=void 0===c?18:c,d=e.projection,f=e.onUpdateALayer,p=void 0===f?function(){}:f,y=e.onRemoveALayer,v=void 0===y?function(){}:y,b=e.symbolsPath,g=void 0===b?"product/assets/symbols/symbols.json":b,h=e.lineDashOptions,E=e.enable3dStyleOptions,O=e.geometryEditorOptions,S=e.format,w=void 0===S?"decimal":S,T=e.defaultTextAnnotation,I=void 0===T?"New":T,C=e.defaultPointType,N=e.defaultShape,k=e.defaultShapeStrokeColor,L=e.defaultShapeFillColor,_=e.defaultShapeSize,R=void 0===_?64:_,x=e.geodesic,F=e.activeClickEventListener,M=e.fonts,z=e.onStoreSession,U=e.session,Y=e.selectedId,H=e.setSelectedId,G=void 0===H?function(){}:H,B=document.querySelector("#".concat(r)),q=Fe((0,j.useState)(w),2),V=q[0],K=q[1],W=Fe((0,j.useState)("coordinates"),2),Z=W[0],$=W[1];function Q(){return g.includes(".json")?g:"".concat(g,"symbols.json")}function J(e,t){var n;_e(o)&&p(a.id,Pe,"override",ze({visibility:!0},e&&!t&&!F&&{features:null==a||null===(n=a.features)||void 0===n?void 0:n.filter((function(t){var n=t.id,r=t.properties;return n!==e.id&&(null==r?void 0:r.measureId)!==e.id}))})),p("ANNOTATIONS_SELECTED_LAYER",Pe,"overlay",{type:"vector",visibility:!0,features:e?Be(e):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#111111",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}})}return(0,j.useEffect)((function(){return t&&null!=a&&a.id&&p(a.id,Pe,"override",{visibility:!0}),function(){v({owner:Pe})}}),[t]),(0,j.useEffect)((function(){var e=((null==a?void 0:a.features)||[]).find((function(e){return e.id===Y}));t&&(0,m.D)(e)&&J(e,"style"===Z)}),[F,o,t]),t&&B&&a?(0,A.createPortal)(P().createElement("div",{className:"ms-annotations-editor"},P().createElement(Te,{key:a._v_,selectedId:Y,geodesic:{Circle:!1!==x},fonts:M,defaultSymbolizers:function(){if("symbol"!==C)return{};var e=D()(L||"#dddddd"),t=D()(k||"#777777");return{Point:{kind:"Mark",wellKnownName:Q().replace(/[^\/]*.json$/,"".concat(N,".svg")),color:e.toHexString(),fillOpacity:e.getAlpha(),strokeColor:t.toHexString(),strokeOpacity:t.getAlpha(),strokeWidth:1,radius:R/2,rotate:0}}}(),svgSymbolsPath:Q(),lineDashOptions:h,coordinatesFormat:V,enable3dStyleOptions:E,geometryEditorOptions:O,defaultTextLabel:I,onChangeCoordinatesFormat:K,tab:Z,onSelectTab:function(e,t){$(e),J(t,"style"===e)},mapInteractionsSupport:!F&&Re,value:U||{features:(null==a?void 0:a.features)||[],style:(null==a?void 0:a.style)||{}},onHighlight:function(e,t){p("ANNOTATIONS_HIGHLIGHT_LAYERS",Pe,"overlay",{type:"vector",visibility:!0,features:t?Be(t):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#555555",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"Square",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:3,radius:6,rotate:0,msBringToFront:!0}]}]}}})},mapType:o,map:i,maxZoom:s,projection:d,onSelect:function(e,t){G(e),J(t,"style"===Z)},onChange:function(e,t,n){var r,o;l(a.id,"layers",e),J(t,"style"===Z),r=e.invalidFeatures,p("ANNOTATIONS_INVALID_LAYER",Pe,"overlay",{type:"vector",visibility:!0,features:r?(o=r,(o||[]).filter((function(e){var t=e.geometry;return(null==t?void 0:t.type)&&["LineString","Polygon"].includes(t.type)})).reduce((function(e,t){var n=("LineString"===t.geometry.type?t.geometry.coordinates:t.geometry.coordinates[0]).filter((function(e){return!e.some(m.us)}));return[].concat(Ye(e),Ye(n.length>1?[{type:"Feature",geometry:{type:"LineString",coordinates:n},properties:ze(ze({},null==t?void 0:t.properties),{},{geometryType:"LineString"})}]:[]),Ye(n.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}}))))}),[])):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#ff0000",width:2,opacity:1,cap:"round",join:"round",msClampToGround:!1,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}}),z(n)},onZoomTo:u})),B):null}));const Ve=qe;var Ke=n(501882),We=n.n(Ke),Ze=n(314792),$e=n.n(Ze),Qe=n(415120),Je=n(97401),Xe=n(12816),et=n(553493),tt=n(712853);function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){it(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e,t,n){return(t=function(e){var t=function(e){if("object"!=nt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var lt=(0,et.A)("onEditorStateChange","editorState")(tt.A);const ut=function(e){var t,n,r=e.preview,o=e.properties,i=void 0===o?{}:o,a=e.fields,l=void 0===a?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:a,u=e.onChange,c=void 0===u?function(){}:u,s=(t=(0,j.useState)(l.filter((function(e){return"html"===e.type})).reduce((function(e,t){return ot(ot({},e),{},it({},t.name,(0,Xe.pn)(i[t.name]||"")))}),{})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=s[0],f=s[1];return r?P().createElement("div",{className:"ms-annotations-fields preview"},l.map((function(e){var t=e.showLabel;return P().createElement("div",{key:e.name,className:"ms-annotations-field"},t&&P().createElement("div",{className:"ms-annotations-field-label"},P().createElement(le.A,{msgId:"annotations.field.".concat(e.name)})),P().createElement("div",{className:"ms-annotations-field-value",dangerouslySetInnerHTML:{__html:i[e.name]}}))}))):P().createElement("form",{className:"ms-annotations-fields"},l.map((function(e){var t=We()(e.validator)?e.validator:null,n=t&&t(i[e.name]),r=e.validateError||"annotations.mandatory",o=e.showLabel,a=e.editable;return"text"===e.type?P().createElement(x.gE,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&P().createElement(x.mq,null,P().createElement(le.A,{msgId:"annotations.field.".concat(e.name)})),P().createElement(x.MJ,{disabled:!a,type:"text",value:i[e.name],onChange:function(t){return c(it({},e.name,t.target.value))}}),t&&!n&&P().createElement(x.f0,null,P().createElement(le.A,{msgId:r}))):"html"===e.type?P().createElement(x.gE,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&P().createElement(x.mq,null,P().createElement(le.A,{msgId:"annotations.field.".concat(e.name)})),a?P().createElement(lt,{editorState:d[e.name],onEditorStateChange:function(t){var n=(0,Xe.v6)(d[e.name]);(0,Xe.v6)(t)!==n&&(c(it({},e.name,(0,Xe.v6)(t))),f((function(n){return ot(ot({},n),{},it({},e.name,t))})))}}):P().createElement("div",{dangerouslySetInnerHTML:{__html:i[e.name]}}),t&&!n&&P().createElement(x.f0,null,P().createElement(le.A,{msgId:r}))):null})))};var ct=n(91629),st=n(406250),dt=n(174910);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}var pt=["fields","onEdit","onRemove","onDownload"],mt=["title","description"];function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yt.apply(null,arguments)}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return(t=function(e){var t=function(e){if("object"!=ft(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ft(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ot(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var St=(0,q.A)(B.A),wt=(0,C.connect)((function(){return{}}),{onRemove:p.O8,onDownload:p.RG,onEdit:p._G})((function(e){var t=e.fields,n=e.onEdit,r=void 0===n?function(){}:n,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onDownload,l=void 0===a?function(){}:a,u=Ot(e,pt),c=ht((0,j.useState)(!1),2),s=c[0],d=c[1];return P().createElement("div",null,P().createElement("div",null,P().createElement(x.e2,null,P().createElement(St,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.edit",onClick:function(){return r(u.id)}},P().createElement(x.e6,{glyph:"pencil"})),P().createElement(St,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.remove",onClick:function(){return d(!0)}},P().createElement(x.e6,{glyph:"trash"})),P().createElement(St,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return l([u])}},P().createElement(x.e6,{glyph:"download"})))),P().createElement(ut,{preview:!0,properties:bt({title:null==u?void 0:u.title,description:null==u?void 0:u.description},null==u?void 0:u.options),fields:t}),P().createElement(st.A,null,P().createElement(ct.A,{show:s,onCancel:function(){return d(!1)},onConfirm:function(){i(u.id),d(!1)},variant:"danger",preventHide:!0,titleId:"annotations.undoDeleteFeature",confirmId:"annotations.confirm",cancelId:"annotations.cancel"})))})),Tt=(0,C.connect)((0,N.Mz)([(0,_.cU)(m.BC),function(e){return(0,Je.o7)(e,{height:!0})},y.kv,v.mg],(function(e,t,n,r){var o;return{enabled:e,style:t,selected:e?n:null,activeClickEventListener:null==r||null===(o=r.eventListeners)||void 0===o||null===(o=o.click)||void 0===o?void 0:o[0],projection:null==r?void 0:r.projection,zoom:null==r?void 0:r.zoom,resolutions:null==r?void 0:r.resolutions}})),{onClose:p.B0,onCancel:p.NO,onReady:c.fN.bind(null,m.BC,"ready"),onChange:s.OK,onDownload:p.RG})((function(e){var t=e.targetId,n=void 0===t?je:t,r=e.selected,o=e.style,i=e.enabled,a=e.onReady,l=void 0===a?function(){}:a,u=e.onClose,c=void 0===u?function(){}:u,s=e.onChange,d=void 0===s?function(){}:s,f=e.onDownload,p=void 0===f?function(){}:f,y=e.fields,v=void 0===y?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:y,b=e.closeId,g=e.onCancel,h=void 0===g?function(){}:g,E=e.activeClickEventListener,O=e.projection,S=e.resolutions,w=e.zoom,T=bt({title:null==r?void 0:r.title,description:null==r?void 0:r.description},null==r?void 0:r.options),I=ht((0,j.useState)("properties"),2),A=I[0],C=I[1],N=ht((0,j.useState)(!1),2),k=N[0],D=N[1];function L(){return!v.find((function(e){return!!We()(null==e?void 0:e.validator)&&!e.validator(T[e.name])}))}function _(){var e;return!(null==r||null===(e=r.features)||void 0===e||!e.length||r.invalidFeatures)}function R(e){return e.stopPropagation(),L()&&_()?c(r):D(!0)}return(0,j.useEffect)((function(){return(0,Qe.mv)(m.BC,(function(e){return P().createElement(wt,yt({},e,{fields:v}))})),function(){(0,Qe.mv)(m.BC,void 0)}}),[]),(0,j.useEffect)((function(){return D(!1),l(i),function(){l(!i)}}),[i]),(0,j.useEffect)((function(){b&&R()}),[b]),r?P().createElement("div",{className:"ms-annotations-panel",style:o},P().createElement("div",{className:"ms-annotations-panel-header"},P().createElement(St,{onClick:function(e){return R(e)},className:"square-button no-border"},P().createElement(x.e6,{glyph:"1-close"})),P().createElement("div",{className:"ms-annotations-title"},P().createElement(le.A,{msgId:"annotations.title"})),P().createElement("div",{className:"square-button text-primary"},P().createElement(x.e6,{glyph:"comment"}))),P().createElement(x.so,{bsStyle:"tabs",activeKey:A,className:"ms-annotations-panel-nav"},P().createElement(x.CI,{key:"properties",eventKey:"properties",onClick:function(){return C("properties")}},P().createElement(le.A,{msgId:"annotations.properties"})," ",P().createElement(x.e6,{glyph:L()?"ok-sign text-success":"exclamation-mark text-danger"})),P().createElement(x.CI,{key:"geometries",eventKey:"geometries",onClick:function(){return C("geometries")}},P().createElement(le.A,{msgId:"annotations.geometries"})," ",P().createElement(x.e6,{glyph:_()?"ok-sign text-success":"exclamation-mark text-danger"})),P().createElement(x.CI,{key:"settings",eventKey:"settings",onClick:function(){return C("settings")}},P().createElement(le.A,{msgId:"settings"})),P().createElement(St,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",disabled:!(L()&&_()),onClick:function(){return p([r])}},P().createElement(x.e6,{glyph:"download"}))),P().createElement("div",{className:"ms-annotations-panel-body"},P().createElement("div",{className:"ms-annotations-panel-content",style:"properties"===A?{}:{display:"none"}},P().createElement(ut,{fields:v,properties:T,onChange:function(e){var t=e.title,n=e.description,o=Ot(e,mt);d(r.id,"layers",bt(bt(bt({},void 0!==t&&{title:t}),void 0!==n&&{description:n}),{},{options:bt(bt({},r.options),o)}))}})),P().createElement("div",{id:n,style:"geometries"===A?{}:{display:"none"}}),P().createElement("div",{className:"ms-annotations-panel-content",style:"settings"===A?{}:{display:"none"}},P().createElement(dt.A,{title:P().createElement(x.mq,null,P().createElement(le.A,{msgId:"layerProperties.visibilityLimits.title"})),layer:r,onChange:function(e){return d(r.id,"layers",e)},projection:O,resolutions:S,zoom:w}))),E&&P().createElement(x.Fc,{bsStyle:"warning"},P().createElement(le.A,{msgId:"annotations.deactivatedMapInteraction",msgParams:{pluginName:$e()(E)}})),P().createElement(st.A,null,P().createElement(ct.A,{show:k,onCancel:function(){return h(),void D(!1)},onConfirm:function(){return c(r),void D(!1)},variant:"danger",preventHide:!0,titleId:"annotations.undo",confirmId:"annotations.confirm",cancelId:"annotations.cancel"}))):null}));const It=Tt;var jt=["status","selectedLayers","onAdd","onDownload","onEdit","annotationLayers","statusTypes","itemComponent"];function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pt.apply(null,arguments)}const At=(0,C.connect)((0,N.Mz)([y.gu,(0,_.cU)(m.BC)],(function(e,t){return{annotationLayers:e,enabled:t}})),{onAdd:p.eO,onDownload:p.RG,onEdit:p._G})((function(e){var t=e.status,n=e.selectedLayers,r=e.onAdd,o=void 0===r?function(){}:r,i=e.onDownload,a=void 0===i?function(){}:i,l=e.onEdit,u=void 0===l?function(){}:l,c=e.annotationLayers,s=void 0===c?[]:c,d=e.statusTypes,f=e.itemComponent,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,jt),y=f;if(t===d.DESELECT)return P().createElement(P().Fragment,null,P().createElement(y,Pt({},p,{key:"annotations",tooltipId:"toc.addAnnotations",onClick:function(){return o()},glyph:"add-comment"})),s.length>0&&P().createElement(y,Pt({},p,{key:"annotations-download",glyph:"download-comment",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(s)}})));if(t===d.LAYER&&(0,m.fd)(n[0]))return P().createElement(P().Fragment,null,P().createElement(y,Pt({},p,{key:"annotations-edit",glyph:"pencil",tooltipId:"toc.editAnnotations",onClick:function(){return u(n[0].id)}})),P().createElement(y,Pt({},p,{key:"annotations-download",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return a([n[0]])},glyph:"download-comment"})));var v=t===d.LAYERS?n.filter(m.fd):[];return v.length?P().createElement(P().Fragment,null,P().createElement(y,Pt({},p,{key:"annotations-download",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(v)},glyph:"download-comment"}))):null})),Ct=(0,r.i1)("Annotations",{component:It,containers:{TOC:{doNotHide:!0,name:"Annotations",target:"toolbar",Component:At,position:12},Map:{name:"Annotations",Tool:Ve,alwaysRender:!0}},reducers:{annotations:I.A},epics:T})},516516:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(446176);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.EZ:return a(a({},e),{},{session:t.session});case r.EE:return a(a({},e),{},{featureId:t.id});case r.rC:case r.vM:return a(a({},e),{},{editing:!0,closeId:0});case r.I:return a(a({},e),{},{closeId:(e.closeId||0)+1});case r.jT:return a(a({},e),{},{editing:!1,closeId:0,session:null});case r.Fk:return a(a({},e),{},{closeId:0});default:return e}}},97401:(e,t,n)=>{"use strict";n.d(t,{MA:()=>w,SU:()=>O,iS:()=>v,lU:()=>h,o:()=>y,o7:()=>b,si:()=>S,tV:()=>E,u$:()=>m,wd:()=>g});var r=n(400912),o=n.n(r),i=n(150104),a=n.n(i),l=n(131127),u=n(6683),c=n(779893);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){return e.maplayout&&e.maplayout.layout||{}},y=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},b=a()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=m(e),o=v(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){var i;return f(f({},e),{},p({},t,n&&null!==(i=o[t])&&void 0!==i?i:r[t]))}),{})||{}}),(function(e,t,n){return JSON.stringify(m(e))+JSON.stringify(v(e))+JSON.stringify(t)+(n?"_isDock":"")})),g=function(e){var t;return!(null===(t=m(e))||void 0===t||!t.rightPanel)},h=function(e){var t,n=c.Ay.getConfigProp("mapLayout")||u.OH;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=m(e);return!!o()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==n?void 0:n.bottom.sm)&&void 0!==t?t:0,type:"not"}])},E=function(e){var t=(0,l.mg)(e),n=y(e);return n&&t&&t.size&&{left:(0,u.n_)(n.left,t.size.width),bottom:(0,u.n_)(n.bottom,t.size.height),right:(0,u.n_)(n.right,t.size.width),top:(0,u.n_)(n.top,t.size.height)}},O=function(e){var t,n;return null!==(t=null==e||null===(n=e.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==t?t:{left:[],right:[]}},S=function(e){return b(e,{height:!0,right:!0},!0)},w=function(e){return b(e,{right:!0},!0)}},12816:(e,t,n)=>{"use strict";n.d(t,{pn:()=>s,v6:()=>d});var r=n(635143),o=n(329987),i=n.n(o),a=n(447340),l=n.n(a),u=function(e){var t=void 0;if(e instanceof HTMLAnchorElement){var n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=r.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;var o=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),a=e.getAttribute&&e.getAttribute("data-geostory-interaction-name"),l={};a&&i&&o&&(l["data-geostory-interaction-type"]=o,l["data-geostory-interaction-params"]=i,l["data-geostory-interaction-name"]=a),n.attributes=l,t=r.Entity.__create("LINK","MUTABLE",n)}}return t},c=function(e,t){if("MENTION"===e.type)return'< href="'.concat(e.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(e.data.value,'">').concat(t,"</a>");if("LINK"===e.type){var n=e.data.targetOption||"_self",r=e.data.attributes;return r&&r["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(r["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(r["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(r["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(r["data-geostory-interaction-params"],"')\">").concat(t,"</a>"):'<a href="'.concat(e.data.url,'" target="').concat(n,'">').concat(t,"</a>")}if("IMAGE"===e.type){var o=e.data.alignment,i=o&&"none"!==o?"float: ".concat(o,";"):"display: block; margin: 0 auto 0 auto;";return'<img title="'.concat(e.data.src,'" src="').concat(e.data.src,'" alt="').concat(e.data.alt||" ",'" style="height: ').concat(e.data.height,"; width: ").concat(e.data.width,"; ").concat(i,'"/>')}return"EMBEDDED_LINK"===e.type?'<iframe width="'.concat(e.data.width,'" height="').concat(e.data.height,'" src="').concat(e.data.src,'" frameBorder="0"></iframe>'):t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l()(e,null,u),n=r.ContentState.createFromBlockArray(t.contentBlocks);return r.EditorState.createWithContent(n)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=1!==(0,r.convertToRaw)(e.getCurrentContent()).blocks.length||(0,r.convertToRaw)(e.getCurrentContent()).blocks[0].text,o=i()((0,r.convertToRaw)(e.getCurrentContent()),null,null,c);return n?o:t}return t}},791936:function(e,t,n){var r,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},u=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},s=function(t,s,d){d||(t=c(t));var f,p=this,m="application/octet-stream"===t.type,y=function(){!function(e,t){for(var n=(t=[].concat(t)).length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,e)}catch(e){l(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,o)return f=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=f,r.download=s,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),y(),u(f),p.readyState=p.DONE}));!function(){if((a||m&&i)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,y()},r.readAsDataURL(t),void(p.readyState=p.INIT)}f||(f=n().createObjectURL(t)),m?e.location.href=f:e.open(f,"_blank")||(e.location.href=f),p.readyState=p.DONE,y(),u(f)}()},d=s.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,n){return new s(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=o:null!==n.amdD&&null!==n.amdO&&(void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r))},534973:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=function(e){if("function"!=typeof e)throw new TypeError("You must provide a valid moment object");var t="function"==typeof e().locale?"locale":"lang";if(!e.localeData)throw new TypeError("The Moment localizer depends on the `localeData` api, please provide a moment object v2.2.0 or higher");function n(n,r,o){return n?e(r,o)[t](n):e(r,o)}var r={formats:{date:"L",time:"LT",default:"lll",header:"MMMM YYYY",footer:"LL",weekday:"dd",dayOfMonth:"DD",month:"MMM",year:"YYYY",decade:function(t,n,r){return r.format(t,"YYYY",n)+" - "+r.format(function(t){return e(t).add(10,"year").add(-1,"millisecond").toDate()}(t),"YYYY",n)},century:function(t,n,r){return r.format(t,"YYYY",n)+" - "+r.format(function(t){return e(t).add(100,"year").add(-1,"millisecond").toDate()}(t),"YYYY",n)}},firstOfWeek:function(t){return e.localeData(t).firstDayOfWeek()},parse:function(e,t,r){if(!e)return null;var o=n(r,e,t);return o.isValid()?o.toDate():null},format:function(e,t,r){return n(r,e).format(t)}};return o.default.setDateLocalizer(r),r};var r,o=(r=n(780228))&&r.__esModule?r:{default:r};e.exports=t.default},503618:(e,t)=>{"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.Ay=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=t.debug;var l={initialState:t.initialState,initTypes:f(t.initTypes,["@@redux/INIT","@@INIT"]),limit:t.limit,filter:t.filter||function(){return!0},undoType:t.undoType||a.UNDO,redoType:t.redoType||a.REDO};return l.history=t.initialHistory||d(l.initialState),0===l.initTypes.length&&console.warn("redux-undo: supply at least one action type in initTypes to ensure initial state"),function(t,a){!function(e,t){if(r){var n=["action",e.type];console.group?(n.unshift("%credux-undo","font-style: italic"),console.groupCollapsed.apply(console,n),console.log("received",{state:t,action:e})):o.apply(void 0,n)}}(a,t);var f=void 0;switch(a.type){case l.undoType:return f=function(e){o("undo",{history:e});var t=e.past,n=e.present,r=e.future;return t.length<=0?e:{past:t.slice(0,t.length-1),present:t[t.length-1],future:[n].concat(r)}}(t),o("after undo",f),i(),f?s(t,f):t;case l.redoType:return f=function(e){o("redo",{history:e});var t=e.past,n=e.present,r=e.future;return r.length<=0?e:{future:r.slice(1,r.length),present:r[0],past:[].concat(t,[n])}}(t),o("after redo",f),i(),f?s(t,f):t;default:if(f=e(t&&t.present,a),l.initTypes.some((function(e){return e===a.type})))return o("reset history due to init action"),i(),c(n({},t,d(f)));if(l.filter&&"function"==typeof l.filter&&!l.filter(a,f,t&&t.present))return o("filter prevented action, not storing it"),i(),c(n({},t,{present:f}));var p=function(e,t,n){o("insert",{state:t,history:e,free:n-u(e)});var r=e.past,i=e.present,a=n&&u(e)>=n;return void 0===i?{past:[],present:t,future:[]}:{past:[].concat(r.slice(a?1:0),[i]),present:t,future:[]}}(t&&void 0!==t.present?t:l.history,f,l.limit);return o("after insert",{history:p,free:l.limit-u(p)}),i(),c(n({},t,p))}}};var r=void 0;function o(){if(r){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.group||t.unshift("%credux-undo","font-style: italic"),console.log.apply(console,t)}}function i(){if(r)return console.groupEnd&&console.groupEnd()}var a={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO"};t.Q3=a;var l={undo:function(){return{type:a.UNDO}},redo:function(){return{type:a.REDO}}};function u(e){var t=e.past,n=e.future;return t.length+1+n.length}function c(e){return n({},e,{history:e})}function s(e,t){return c(n({},e,t))}function d(e){return{past:[],present:e,future:[]}}function f(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Array.isArray(e)?e:"string"==typeof e?[e]:t}t.IE=l}}]);