(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6895],{801550:(e,t,n)=>{"use strict";n.d(t,{pP:()=>r,TR:()=>o,N7:()=>i,mq:()=>l,uv:()=>u,Qy:()=>a,IL:()=>c,Li:()=>s,OW:()=>f,ZO:()=>d,Um:()=>p,TF:()=>y,Ls:()=>m,Ec:()=>v,Eu:()=>b,JJ:()=>O,nZ:()=>g,YD:()=>h,GI:()=>E,Jb:()=>w,Uh:()=>S,e$:()=>P,eh:()=>j,$j:()=>T,bJ:()=>C,Mk:()=>I,xy:()=>A,o6:()=>x,NH:()=>R,FP:()=>N,Mo:()=>L,sO:()=>G,Px:()=>M,hd:()=>_,y9:()=>k,Ju:()=>D,BV:()=>Z,SO:()=>U,H0:()=>F,$X:()=>z,ou:()=>Y,NE:()=>B,Lq:()=>H,aN:()=>$});var r="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",l="CHANGE_ZOOM_LVL",u="PAN_TO",a="ZOOM_TO_EXTENT",c="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",f="CHANGE_MAP_SCALES",d="CHANGE_MAP_STYLE",p="CHANGE_ROTATION",y="CREATION_ERROR_LAYER",m="UPDATE_VERSION",v="INIT_MAP",b="RESIZE_MAP",O="CHANGE_MAP_LIMITS",g="SET_MAP_RESOLUTIONS",h="REGISTER_EVENT_LISTENER",E="UNREGISTER_EVENT_LISTENER",w="MOUSE_MOVE",S="MOUSE_OUT",P="MAP:MAP_PLUGIN_LOAD",j="MAP:ORIENTATION",T="MAP:UPDATE_MAP_VIEW",C="MAP:UPDATE_MAP_OPTIONS";function I(e,t,n,r){return{type:P,mapType:t,loading:e,loaded:n,error:r}}function A(e,t,n){return{type:c,pos:e,zoom:t,crs:n}}function x(e,t,n,o,i,l,u,a){return{type:r,center:e,zoom:t,bbox:n,size:o,mapStateSource:i,projection:l,viewerOptions:u,resolution:a}}function R(e){return{type:s,crs:e}}function N(e,t){return{type:o,point:e,layer:t}}function L(e){return{type:i,pointer:e}}function G(e,t){return{type:l,zoom:e,mapStateSource:t}}function M(e,t,n,r){return{type:a,extent:e,crs:t,maxZoom:n,options:r}}function _(e,t){return{type:d,style:e,mapStateSource:t}}function k(e){return{type:v,disableFeedbackMask:e}}function D(){return{type:b}}function Z(e){var t=e.restrictedExtent,n=e.crs,r=e.minZoom;return{type:O,restrictedExtent:t,crs:n,minZoom:r}}function U(e){return{type:g,resolutions:e}}var F=function(e,t){return{type:h,eventName:e,toolName:t}},z=function(e,t){return{type:E,eventName:e,toolName:t}},Y=function(e){return{type:w,position:e}},B=function(){return{type:S}},H=function(e){return{type:j,orientation:e}},$=function(e){return{type:C,configUpdate:e}}},38560:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(480681),o=n(124852),i=n.n(o),l=n(294184),u=n.n(l),a=["disabled","className","onClick"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}var s=n(815135);const f=(d=r.zx,i().forwardRef((function(e,t){var n=e.disabled,r=e.className,o=e.onClick,l=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,a);return i().createElement(d,c({ref:t,className:n?u()("disabled",r):r,onClick:function(){n||l.apply(void 0,arguments)}},s),s.children)})));var d;(0,s.Z)(r.zx)},532425:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(45697),o=n.n(r),i=n(124852),l=n.n(i);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){return e>100?"full":e>40?"medium":"small"},d=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,o=e.className,i=e.hidden;return l().createElement("div",{className:o,style:c({width:t,height:t,overflow:"hidden"},r)},!i&&l().createElement("div",{className:"mapstore-".concat(f(t),"-size-loader")}))};d.propTypes={size:o().number,className:o().string,style:o().object};const p=d},843614:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(727418),o=n.n(r),i=n(480681),l=n(461365);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function s(e,t,n){return t=d(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,r=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}],r&&a(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.u_);const m=o()((0,l.Z)(y),{Body:i.u_.Body,Dialog:i.u_.Dialog,Footer:i.u_.Footer,Header:i.u_.Header,Title:i.u_.Title})},399534:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(461365),o=n(356936);const i=(0,r.Z)(o.h_)},247691:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>bt});var r=n(124852),o=n.n(r),i=n(480681),l=n(171703),u=n(580416),a=n(675110),c=n(274621),s=n(308316),f=n(800827),d=n(38842),p=n(322843),y=n(784715),m=n(624262),v=n(815430),b=n(618446),O=n.n(b),g=n(598611),h=n.n(g);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(null,arguments)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var I=n(490173),A=n(944908),x=n.n(A),R=n(801550),N=n(805346),L=n(813292),G=n.n(L),M=["onZoomTo","status","itemComponent","selectedNodes","statusTypes"];function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(null,arguments)}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function e(t){return null!=t&&t.nodes?function(e){if(Array.isArray(e))return D(e)}(n=((null==t?void 0:t.nodes)||[]).map(e).flat())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():t;var n};const Y=(0,l.connect)((function(){return{}}),{onZoomTo:R.Px})((function(e){var t,n=e.onZoomTo,r=e.status,i=e.itemComponent,l=e.selectedNodes,u=e.statusTypes,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,M),c=i;if([u.LAYER,u.GROUP,u.LAYERS,u.GROUPS,u.BOTH].includes(r)){var s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){var t;if("vector"===e.type&&!e.bbox&&null!=e&&null!==(t=e.features)&&void 0!==t&&t.length){var n=G()({type:"FeatureCollection",features:e.features});return U(U({},e),{},{bbox:{bounds:{minx:n[0],miny:n[1],maxx:n[2],maxy:n[3]},crs:"EPSG:4326"}})}return e}))}(z({nodes:l.map((function(e){return null==e?void 0:e.node}))})).filter((function(e){return null==e?void 0:e.bbox})),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=x()(e.map((function(e){var t;return null==e||null===(t=e.bbox)||void 0===t?void 0:t.crs})).filter((function(e){return!!e})));return 1===t.length?t[0]:""}(s);if(!f)return null;var d=f&&I.default.defs(f),p=(t=s.filter((function(e){return e.bbox})).map((function(e){return U(U({},e.bbox),{},{bounds:{minx:parseFloat(e.bbox.bounds.minx),miny:parseFloat(e.bbox.bounds.miny),maxx:parseFloat(e.bbox.bounds.maxx),maxy:parseFloat(e.bbox.bounds.maxy)}})}))).length>1?t.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),t[0]):t[0];return p?o().createElement(c,k({},a,{glyph:"zoom-to",style:d?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"default"},labelId:s.length>1?"toc.toolZoomToLayersTooltip":"toc.toolZoomToLayerTooltip",tooltip:d?o().createElement(N.Z,{msgId:s.length>1?"toc.toolZoomToLayersTooltip":"toc.toolZoomToLayerTooltip"}):o().createElement(N.Z,{msgId:"toc.epsgNotSupported",msgParams:{epsg:f||" "}}),onClick:d?function(){return n(p.bounds,p.crs)}:function(){}})):null}return null}));var B=["onShow","onReload","status","itemComponent","selectedNodes","statusTypes"];function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(null,arguments)}const $=(0,l.connect)((function(){return{}}),{onShow:u.He,onReload:u.ct})((function(e){var t=e.onShow,n=e.onReload,r=e.status,i=e.itemComponent,l=e.selectedNodes,u=e.statusTypes,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,B),c=i;if([u.LAYER,u.LAYERS].includes(r)){var s=l.filter((function(e){var t;return"Error"===(null==e||null===(t=e.node)||void 0===t?void 0:t.loadingError)}));if(null==s||!s.length)return null;var f=s.some((function(e){var t;return!(null==e||null===(t=e.node)||void 0===t||!t.loading)}));return o().createElement(c,H({},a,{glyph:"refresh",disabled:f,labelId:s.length>1?"toc.toolReloadLayersTooltip":"toc.toolReloadLayerTooltip",tooltipId:s.length>1?"toc.toolReloadLayersTooltip":"toc.toolReloadLayerTooltip",onClick:function(){s.map((function(e){return e.node})).forEach((function(e){t(e.id,{visibility:!0}),n(e.id)}))}}))}return null}));var V=n(572688),W=n(399534),q=["onRemove","status","itemComponent","selectedNodes","statusTypes","nodeTypes","config","rootGroupId"];function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(null,arguments)}function X(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ee=function e(t){return[].concat(X(null!=t&&t.id?[t]:[]),X(((null==t?void 0:t.nodes)||[]).map(e).flat()))},te=(0,l.connect)((function(){return{}}),{onRemove:u.ZF})((function(e){var t,n,i,l=e.onRemove,u=e.status,a=e.itemComponent,c=e.selectedNodes,s=e.statusTypes,f=e.nodeTypes,d=e.config,p=e.rootGroupId,y=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,q),m=a,v=(n=(0,r.useState)(null),i=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,u=[],a=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return u}}(n,i)||K(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=v[0],O=v[1];if((null==c||null===(t=c[0])||void 0===t?void 0:t.id)===p)return null;if(!1===d.activateRemoveLayer&&[s.LAYER,s.LAYERS].includes(u))return null;if(!1===d.activateRemoveGroup&&[s.GROUP,s.GROUPS].includes(u))return null;var g=[s.GROUP,s.GROUPS,s.BOTH].includes(u),h=s.LAYER===u;return o().createElement(o().Fragment,null,[s.LAYER,s.LAYERS,s.GROUP,s.GROUPS,s.BOTH].includes(u)?o().createElement(m,J({},y,{glyph:"trash",active:b,labelId:g?"toc.toolTrashGroupTooltip":h?"toc.toolTrashLayerTooltip":"toc.toolTrashLayersTooltip",tooltipId:g?"toc.toolTrashGroupTooltip":h?"toc.toolTrashLayerTooltip":"toc.toolTrashLayersTooltip",onClick:function(){return O({nodes:c.map((function(e){return e.node}))})}})):null,o().createElement(W.Z,null,o().createElement(V.Z,{options:{animation:!1,className:"modal-fixed"},show:!!b,onHide:function(){return O(null)},onClose:function(){return O(null)},onConfirm:function(){var e=(b||{}).nodes;ee({id:null,nodes:e}).forEach((function(e){l(e.id,null!=e&&e.nodes?f.GROUP:f.LAYER)})),O(null)},titleText:g?o().createElement(N.Z,{msgId:"layerProperties.deleteLayerGroup"}):o().createElement(N.Z,{msgId:"layerProperties.deleteLayer"}),confirmText:o().createElement(N.Z,{msgId:"layerProperties.delete"}),cancelText:o().createElement(N.Z,{msgId:"cancel"}),body:g?o().createElement(N.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}):o().createElement(N.Z,{msgId:"layerProperties.deleteLayerMessage"})})))}));const ne=te;function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}var oe=["status","onChange","itemComponent","selectedNodes","statusTypes","nodeTypes","rootGroupId"];function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(null,arguments)}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var fe=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return[].concat(ce(null!=t&&t.id?[t]:[]),ce((n(t)&&(null==t?void 0:t.nodes)||[]).map((function(t){return e(t,n)})).flat()))};const de=(0,l.connect)((function(){return{}}),{onChange:u.tV})((function(e){var t=e.status,n=e.onChange,r=e.itemComponent,i=e.selectedNodes,l=e.statusTypes,u=e.nodeTypes,a=e.rootGroupId,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,oe),s=r;if([l.GROUP].includes(t)){var f,d,p,y,m=null==i?void 0:i[0];return o().createElement(o().Fragment,null,!(null!=m&&null!==(f=m.node)&&void 0!==f&&f.nodesMutuallyExclusive)&&o().createElement(s,ie({},c,{labelId:"toc.toolGroupShowAllChildren",glyph:"checkbox-on",onClick:function(){fe(ue(ue({},null==m?void 0:m.node),{},{id:null}),(function(e){return!(null!=e&&e.nodesMutuallyExclusive)})).forEach((function(e){n(null==e?void 0:e.id,null!=e&&e.nodes?u.GROUP:u.LAYER,{visibility:!0})}))}})),!(null!=m&&null!==(d=m.node)&&void 0!==d&&d.nodesMutuallyExclusive)&&o().createElement(s,ie({},c,{labelId:"toc.toolGroupHideAllChildren",glyph:"checkbox-off",onClick:function(){fe(ue(ue({},null==m?void 0:m.node),{},{id:null}),(function(e){return!(null!=e&&e.nodesMutuallyExclusive)})).forEach((function(e){n(null==e?void 0:e.id,null!=e&&e.nodes?u.GROUP:u.LAYER,{visibility:!1})}))}})),m.id!==a&&o().createElement(s,ie({},c,{labelId:null!=m&&null!==(p=m.node)&&void 0!==p&&p.nodesMutuallyExclusive?"toc.deactivateToolGroupMutuallyExclusive":"toc.activateToolGroupMutuallyExclusive",glyph:null!=m&&null!==(y=m.node)&&void 0!==y&&y.nodesMutuallyExclusive?"radio-on":"radio-off",onClick:function(){var e,t,r=!(null!=m&&null!==(e=m.node)&&void 0!==e&&e.nodesMutuallyExclusive);r&&null!=m&&null!==(t=m.node)&&void 0!==t&&t.nodes&&m.node.nodes.forEach((function(e){n(null==e?void 0:e.id,null!=e&&e.nodes?u.GROUP:u.LAYER,{visibility:!1})})),n(null==m?void 0:m.id,null==m?void 0:m.type,{nodesMutuallyExclusive:r})}})),o().createElement(s,ie({},c,{labelId:"toc.toolGroupCollapseAllChildren",glyph:"next",onClick:function(){fe(ue(ue({},null==m?void 0:m.node),{},{id:null})).forEach((function(e){n(null==e?void 0:e.id,null!=e&&e.nodes?u.GROUP:u.LAYER,{expanded:!1})}))}})),o().createElement(s,ie({},c,{labelId:"toc.toolGroupExpandAllChildren",glyph:"bottom",onClick:function(){fe(ue(ue({},null==m?void 0:m.node),{},{id:null})).forEach((function(e){n(null==e?void 0:e.id,null!=e&&e.nodes?u.GROUP:u.LAYER,{expanded:!0})}))}})),o().createElement("hr",null))}return null}));var pe="TOC:UPDATE_CONFIG",ye=["itemComponent","selectedNodes","rootGroupId","onUpdateTOCConfig","config"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},me.apply(null,arguments)}var ve=(0,l.connect)((function(){return{}}),{onUpdateTOCConfig:function(e){return{type:pe,payload:e}}})((function(e){var t=e.itemComponent,n=e.selectedNodes,r=e.rootGroupId,i=e.onUpdateTOCConfig,l=e.config,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ye),a=t,c=null==n?void 0:n[0];return(null==c?void 0:c.id)===r||null!=u&&u.menuItem?o().createElement(o().Fragment,null,o().createElement(a,me({},u,{labelId:l.defaultOpen?"toc.closeOnMapInitialization":"toc.openOnMapInitialization",glyph:l.defaultOpen?"arrow-left":"arrow-right",onClick:function(){i({defaultOpen:!l.defaultOpen})}})),o().createElement(a,me({},u,{labelId:null!=l&&l.theme?"toc.defaultTheme":"toc.legendTheme",glyph:"list",onClick:function(){i({theme:null!=l&&l.theme?void 0:"legend"})}})),o().createElement(a,me({},u,{labelId:null!=l&&l.showFullTitle?"toc.hideFullTitle":"toc.showFullTitle",glyph:"font",onClick:function(){i({showFullTitle:!(null!=l&&l.showFullTitle)})}})),o().createElement(a,me({},u,{labelId:null!=l&&l.hideOpacitySlider?"toc.showOpacitySlider":"toc.hideOpacitySlider",glyph:"adjust",onClick:function(){i({hideOpacitySlider:!(null!=l&&l.hideOpacitySlider)})}})),!(null!=l&&l.hideOpacitySlider)&&o().createElement(a,me({},u,{labelId:null!=l&&l.showOpacityTooltip?"toc.hideOpacityTooltip":"toc.showOpacityTooltip",glyph:"tag",onClick:function(){i({showOpacityTooltip:!(null!=l&&l.showOpacityTooltip)})}})),o().createElement("hr",null)):null}));const be=ve;var Oe=n(815135),ge=n(38560);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(null,arguments)}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=he(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=(0,Oe.Z)(ge.Z);const Te=function(e){var t=e.contextMenu,n=e.onClick,r=e.label,l=e.labelId,u=e.glyph,a=e.buttonProps,c=e.tooltipId,s=e.tooltip,f=e.active,d=e.style,p=e.className,y=e.disabled;return e.menuItem?o().createElement(i.sN,{active:f,disabled:y,onClick:n},u?o().createElement(o().Fragment,null,o().createElement(i.gG,{glyph:u})):null,l||c?o().createElement(N.Z,{msgId:l||c}):r||Oe.Z):t?o().createElement("button",{className:f?"active":"",disabled:y,onClick:n},u?o().createElement(o().Fragment,null,o().createElement(i.gG,{glyph:u})):null,l?o().createElement(N.Z,{msgId:l}):r):o().createElement(je,Ee({},a,{style:Se(Se({},null==a?void 0:a.style),d),className:[null==a?void 0:a.className,p].join(" "),disabled:y,active:f,tooltipId:c,tooltip:s,onClick:n}),o().createElement(i.gG,{glyph:u}))};function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(null,arguments)}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,u=[],a=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return u}}(e,t)||Le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Me=function(e){var t=e.items,n=void 0===t?[]:t,l=e.settingsItems,u=void 0===l?[]:l,a=e.selectedNodes,c=void 0===a?[]:a,s=e.buttonProps,f=void 0===s?{className:"toc-toolbar-button",bsStyle:"primary"}:s,d=e.nodeTypes,p=void 0===d?m.$P:d,y=e.rootGroupId,b=void 0===y?m.oR:y,O=e.defaultGroupId,g=void 0===O?m.tE:O,h=e.statusTypes,E=void 0===h?v.Sk:h,w=e.config,S=void 0===w?{}:w,P=(0,r.useRef)(),j=Ne((0,r.useState)(),2),T=j[0],C=j[1],I=c.filter((function(e){return e.type===p.GROUP})).map((function(e){return e.node})),A=c.filter((function(e){return e.type===p.LAYER})).map((function(e){return e.node})),x={buttonProps:f,selectedLayers:A,selectedGroups:I,selectedNodes:c,status:null!=c&&c.length?1===(null==c?void 0:c.length)?1===(null==I?void 0:I.length)?E.GROUP:E.LAYER:null!=I&&I.length&&null!=A&&A.length?E.BOTH:null!=I&&I.length?E.GROUPS:E.LAYERS:E.DESELECT,statusTypes:E,nodeTypes:p,rootGroupId:b,defaultGroupId:g,itemComponent:Te,config:S};(0,r.useEffect)((function(){var e=new MutationObserver((function(){var e,t=P.current.clientWidth,n=P.current.scrollWidth;if(t<n){var r=function(e,t){return e.filter((function(e,n){return n<=t})).reduce((function(e,t){return e+t}),0)},o=(e=P.current.children,function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){return e.clientWidth})).map((function(e,t,n){return[r(n,t-1),t,e]})).find((function(e){var n=Ne(e,3);return n[0]+n[2]>t}));return C(o)}return C()}));return e.observe(P.current,{childList:!0,subtree:!0}),function(){e.disconnect()}}),[]);var R=n.filter((function(e){var t=e.selector;return(void 0===t?function(){return!0}:t)(x)})),N=Ne(T||[],2),L=N[0],G=N[1];return o().createElement("div",{className:"ms-toc-toolbar-container",style:{display:"flex",position:"relative"}},o().createElement("div",{className:"ms-toc-toolbar",style:{overflow:"hidden",display:"flex",flex:1}},o().createElement("div",{className:"ms-toc-toolbar-content",ref:P,style:{overflow:"hidden",textWrap:"nowrap"}},R.map((function(e,t){var n=e.Component,r=e.name;return o().createElement("div",{key:null!=r?r:"item-".concat(t),style:xe({display:"inline-block"},G&&t>=G&&{visibility:"hidden"})},o().createElement(n,x))}))),o().createElement("div",{className:"ms-toc-toolbar-dropdown"},o().createElement(i.Lt,{id:"ms-toc-toolbar-dropdown",pullRight:!0,style:xe({position:"absolute",left:L},void 0===G&&{visibility:"hidden"})},o().createElement(i.Lt.Toggle,{noCaret:!0},o().createElement(i.gG,{glyph:"option-vertical"})),o().createElement(i.Lt.Menu,null,void 0!==G&&R.filter((function(e,t){return t>=G})).map((function(e,t){var n=e.Component,r=e.name;return o().createElement(n,Ie({key:null!=r?r:"item-".concat(t)},x,{menuItem:!0}))})))))),null!=u&&u.length?o().createElement(i.Lt,{id:"ms-toc-toolbar-settings",pullRight:!0},o().createElement(i.Lt.Toggle,{noCaret:!0},o().createElement(i.gG,{glyph:"cog"})),o().createElement(i.Lt.Menu,null,u.map((function(e,t){var n=e.Component,r=e.name;return o().createElement(n,Ie({key:null!=r?r:"item-".concat(t)},x,{menuItem:!0}))})))):null)};var _e=n(442367),ke=n(180307),De=n(737275),Ze=n(623560),Ue=n.n(Ze);function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ze.apply(null,arguments)}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,u=[],a=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const We=function(e){var t=e.items,n=void 0===t?[]:t,i=e.value,l=e.onClick,u=void 0===l?function(){}:l,a=e.onClose,c=void 0===a?function(){}:a,s=e.show,f=e.position,d=e.containerNode,p=void 0===d?function(){return document.querySelector("."+((0,De.u8)("themePrefix")||"ms2")+" > div")||document.body}:d,y=e.statusTypes,b=void 0===y?v.Sk:y,O=e.nodeTypes,g=void 0===O?m.$P:O,h=e.rootGroupId,E=void 0===h?m.oR:h,w=e.defaultGroupId,S=void 0===w?m.tE:w,P=e.config,j=Ue()(p)?p():p,T=(0,r.useRef)(),C=$e((0,r.useState)({}),2),I=C[0],A=C[1];(0,r.useEffect)((function(){function e(e){var t;(null==T||null===(t=T.current)||void 0===t?void 0:t.contains)&&!T.current.contains(e.target)&&c()}return window.addEventListener("pointerdown",e),function(){window.removeEventListener("pointerdown",e)}}),[T]),(0,r.useLayoutEffect)((function(){if(f){var e,t=$e(f,2),n=t[0],r=t[1],o=window.innerWidth,i=window.innerHeight,l=null==T||null===(e=T.current)||void 0===e?void 0:e.getBoundingClientRect(),u=l.height,a=l.width,c=r+u>i?"-100%":"0";A({transform:"translate(".concat(n+a>o?"-100%":"0",", ").concat(c,")"),top:r,left:n})}}),[f]);var x,R={selectedNodes:[i],status:(x=null==i?void 0:i.type)===g.LAYER?b.LAYER:x===g.GROUP?b.GROUP:null,statusTypes:b,nodeTypes:g,rootGroupId:E,defaultGroupId:S,config:P,itemComponent:Te};return(0,ke.createPortal)(o().createElement("div",{ref:T,className:"ms-context-menu",style:Be(Be({},I),{},{position:"fixed",display:s?"flex":"none",flexDirection:"column",zIndex:5e3}),onClick:u},n.filter((function(e){var t=e.selector;return(void 0===t?function(){return!0}:t)(R)})).map((function(e){var t=e.name,n=e.Component;return o().createElement(n,ze({key:t},R,{contextMenu:!0}))}))),j)};var qe=n(552259),Je=n(93152),Xe=n(993451),Ke=n(658422),Qe=n(881808);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ot=n(782904);function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=it(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==it(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,u=[],a=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return u}}(e,t)||ft(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){if(e){if("string"==typeof e)return dt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var pt=(0,Oe.Z)(i.zx),yt=(0,Xe.Z)("placeholder")(i.NI);(0,Ke.Fd)("toc",(function(e){var t;return null==e||null===(t=e.toc)||void 0===t?void 0:t.config}));var mt=(0,y.oz)(O())((function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active}),a.Bt,a.l2,a.NP,c.np,f.Od,f.Zs,s.Pz,s.KV,d.wk,(function(e){var t=(0,f.Od)(e),n=(null==t?void 0:t.resolutions)||(0,qe.MR)()||[];return{resolutions:n,resolution:n[Math.round(null==t?void 0:t.zoom)]}}),Je.Ai,(function(e,t){var n,r,o,i,l,u,c,s,f,d,p,y=(null==e||null===(n=e.toc)||void 0===n?void 0:n.config)||{},m=(0,a.l2)(e).filter((function(e){return"background"!==e.group})),v=null==e||null===(r=e.toc)||void 0===r?void 0:r.mapLoadedCount,b=null!==(o=y.defaultOpen)&&void 0!==o?o:null==t?void 0:t.defaultOpen;return{init:!!v&&"".concat(v,":").concat(!!b),defaultOpen:null!==(i=y.defaultOpen)&&void 0!==i?i:null==t?void 0:t.defaultOpen,theme:null!==(l=y.theme)&&void 0!==l?l:null==t?void 0:t.theme,hideOpacitySlider:null!==(u=null!==(c=y.hideOpacitySlider)&&void 0!==c?c:null==t?void 0:t.hideOpacitySlider)&&void 0!==u?u:null==t?void 0:t.activateOpacityTool,showFullTitle:null!==(s=y.showFullTitle)&&void 0!==s?s:null==t?void 0:t.showFullTitle,showOpacityTooltip:null!==(f=null!==(d=y.showOpacityTooltip)&&void 0!==d?d:null==t?void 0:t.showOpacityTooltip)&&void 0!==f?f:!(null!=t&&t.hideOpacityTooltip),activateFilterLayer:!!m.length&&(null===(p=null==t?void 0:t.activateFilterLayer)||void 0===p||p)}}),(function(e,t,n,r,o,i,l,u,a,c,s,f,d){var p=s.resolutions,y=s.resolution;return{enabled:e,tree:t,selectedNodes:(0,v.HC)(r,n,t),user:o,title:l,currentLocale:u,language:c?a:null,scales:(0,qe.yu)(i&&i.projection||"EPSG:3857",i&&i.mapOptions&&i.mapOptions.view&&i.mapOptions.view.DPI||null),zoom:null==i?void 0:i.zoom,resolutions:p,resolution:y,visualizationMode:f,defaultOpen:d.defaultOpen,theme:d.theme,hideOpacitySlider:d.hideOpacitySlider,init:d.init,showFullTitle:d.showFullTitle,showOpacityTooltip:d.showOpacityTooltip,activateFilterLayer:d.activateFilterLayer}})),vt=(0,l.connect)(mt,{onSort:u.Dv,onChange:u.tV,onSelectNode:u.UG,onOpen:ot.Xg.bind(null,"drawer","enabled",!0)})((function(e,t){var n,l=e.tree,u=e.onSort,a=void 0===u?function(){}:u,c=e.onChange,s=void 0===c?function(){}:c,f=e.onSelectNode,d=void 0===f?function(){}:f,y=e.groupNodeComponent,b=e.layerNodeComponent,O=e.items,g=void 0===O?[]:O,E=e.selectedNodes,S=e.addLayersPermissions,j=void 0===S||S,C=e.removeLayersPermissions,I=void 0===C||C,A=e.sortingPermissions,x=void 0===A||A,R=e.addGroupsPermissions,L=void 0===R||R,G=e.removeGroupsPermissions,M=void 0===G||G,_=e.layerInfoToolPermissions,k=void 0!==_&&_,D=e.activateRemoveLayer,Z=void 0===D||D,U=e.activateSortLayer,F=void 0===U||U,z=e.activateRemoveGroup,B=void 0===z||z,H=e.activateAddLayerButton,V=void 0===H||H,W=e.activateAddGroupButton,q=void 0===W||W,J=e.activateLayerInfoTool,X=void 0===J||J,K=e.user,Q=e.title,ee=e.activateFilterLayer,te=void 0===ee||ee,re=e.activateMapTitle,oe=void 0===re||re,ie=e.activateToolsContainer,le=void 0===ie||ie,ue=e.activateZoomTool,ae=void 0===ue||ue,ce=e.hideOpacitySlider,se=void 0!==ce&&ce,fe=e.hideSettings,pe=e.activateTitleTooltip,ye=void 0===pe||pe,me=e.activateLegendTool,ve=void 0===me||me,Oe=e.showOpacityTooltip,ge=void 0===Oe||Oe,he=e.defaultOpen,Ee=e.theme,we=e.showFullTitle,Se=e.groupOptions,Pe=void 0===Se?{}:Se,je=e.layerOptions,Te=void 0===je?{}:je,Ce=e.currentLocale,Ie=e.language,Ae=e.scales,xe=e.zoom,Re=e.resolution,Ne=e.resolutions,Le=e.visualizationMode,Ge=e.toolbarButtonProps,ke=e.init,De=e.onOpen,Ze=function(e,t){var n=K&&"ADMIN"===K.role||!1;return!(!e&&!n)&&t},Ue=(0,v.js)(l),Fe={activateAddLayerButton:Ze(j,V),activateRemoveLayer:Ze(I,Z),sortable:Ze(x,F),activateAddGroupButton:Ze(L,q),activateRemoveGroup:Ze(M,B),activateLayerInfoTool:Ze(k,X),singleDefaultGroup:Ue,hideOpacitySlider:se,defaultOpen:he,theme:Ee,showFullTitle:we,showOpacityTooltip:ge},ze=t.loadedPlugins,Ye=function(e){var t=e.items,n=e.loadedPlugins,i=e.loaderComponent,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=(0,r.useRef)({});u.current={items:t,loadedPlugins:n,loaderComponent:i};var a=t.map((function(e){return e.name})).join(","),c=h()(Object.keys(n||{}),","),s=(0,r.useMemo)((function(){return function(e){return T(e.items).sort((function(e,t){return e.position>t.position?1:-1})).map((function(t){return P(P({},t),{},{Component:t.Component?function(e){var n=t.Component;return o().createElement(n,w({key:t.id},e,t.cfg,{pluginCfg:t.cfg,items:t.items||[]}))}:(0,p.KB)(t,e.loadedPlugins,e.loaderComponent||o().createElement("div",null))})}))||[]}(u.current)}),[c,a].concat(T(l)));return s}({items:[].concat(st(ae?[{name:"TOCZoomToMenuItem",target:"context-menu",Component:Y,position:4},{name:"TOCZoomToMenuItem",target:"toolbar",Component:Y,position:4}]:[]),[{name:"TOCReloadLayersMenuItem",target:"context-menu",Component:$,position:9},{name:"TOCRemoveNodesButton",target:"toolbar",Component:ne,position:8},{name:"TOCRemoveNodesMenuItem",target:"context-menu",Component:ne,position:8},{name:"TOCGroupOptionsMenuItem",target:"context-menu",Component:de,position:1}],st(fe?[]:[{name:"TOCSettings",target:"context-menu",Component:be,position:0}]),st(g)),loadedPlugins:ze}),Be=st(Ye).sort((function(e,t){return e.position>t.position?1:-1})),He=Be.filter((function(e){return"context-menu"===e.target})),$e=Be.filter((function(e){return"toolbar"===e.target})),Ve=Be.filter((function(e){return"node-tool"===e.target})),qe=Be.filter((function(e){return"node"===e.target})),Je=ct((0,r.useState)(""),2),Xe=Je[0],Ke=Je[1],Qe=ct((0,r.useState)(null),2),et=Qe[0],tt=Qe[1];(0,r.useEffect)((function(){ke&&he&&De()}),[ke]);var nt=Ue?null==l||null===(n=l[0])||void 0===n?void 0:n.nodes:l,rt=0===(null==nt?void 0:nt.length);return o().createElement("div",{className:"ms-toc-container".concat(rt?" empty":""),onContextMenu:function(e){e.preventDefault(),tt({id:m.oR,type:m.$P.GROUP,node:Ue?l[0]:{id:null,nodes:l},position:[e.clientX,e.clientY]})}},o().createElement("div",{className:"ms-toc-header"},oe&&Q?o().createElement("div",{className:"ms-toc-title"},o().createElement(i.gG,{glyph:"1-map"})," ",Q," "):null,te?o().createElement("div",{className:"ms-toc-filter"},o().createElement(i.cw,null,o().createElement(i.BZ,null,o().createElement(yt,{placeholder:"toc.filterPlaceholder",value:Xe,onChange:function(e){var t;return Ke(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}}),Xe?o().createElement(i.BZ.Button,null,o().createElement(pt,{tooltipId:"toc.clearFilter",onClick:function(){return Ke("")}},o().createElement(i.gG,{glyph:"1-close"}))):o().createElement(i.BZ.Addon,null,o().createElement(i.gG,{glyph:"filter"}))))):null,le?o().createElement(Me,{items:$e,selectedNodes:E,statusTypes:v.Sk,nodeTypes:m.$P,rootGroupId:m.oR,defaultGroupId:m.tE,config:Fe,buttonProps:Ge,settingsItems:[{name:"TOCSettings",Component:be}]}):null),o().createElement(_e.d,{tree:l,filterText:Xe,onSort:a,onChange:s,groupNodeComponent:y,layerNodeComponent:b,contextMenu:et,theme:Ee,className:(null==et?void 0:et.id)===m.oR?"focused":"",config:{resolution:Re,resolutions:Ne,showFullTitle:we,visualizationMode:Le,sortable:Fe.sortable,hideOpacitySlider:se,language:Ie,currentLocale:Ce,scales:Ae,zoom:xe,showTitleTooltip:ye,showOpacityTooltip:ge,groupOptions:Pe,layerOptions:ut(ut({},Te),{},{hideLegend:!ve})},onContextMenu:function(e){var t=e.event,n=e.node,r=e.nodeType,o=e.parentId;d(),tt({id:null==n?void 0:n.id,node:n,type:r,parentId:o,position:[t.clientX,t.clientY]})},selectedNodes:E,onSelectNode:d,nodeTypes:m.$P,rootGroupId:m.oR,nodeToolItems:Ve,nodeItems:qe,singleDefaultGroup:Ue}),le?o().createElement(We,{value:et,show:!!et,position:null==et?void 0:et.position,onClick:function(){return tt(null)},onClose:function(){return tt(null)},items:He,statusTypes:v.Sk,nodeTypes:m.$P,defaultGroupId:m.tE,rootGroupId:m.oR,config:Fe}):null,rt&&o().createElement("div",{className:"toc-empty-message"},o().createElement("div",null,o().createElement(i.gG,{glyph:"1-layer"}),o().createElement("div",null,o().createElement(N.Z,{msgId:"toc.emptyLayerTree"})))))}));const bt=(0,p.rx)("TOC",{component:vt,containers:{DrawerMenu:{name:"toc",position:1,glyph:"1-layer",buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}},reducers:{toc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe.ok:var n;return nt(nt({},e),{},{mapLoadedCount:(e.mapLoadedCount||0)+1,config:nt({},null==t||null===(n=t.config)||void 0===n?void 0:n.toc)});case pe:return nt(nt({},e),{},{config:nt(nt({},null==e?void 0:e.config),t.payload)});default:return e}}}})},38842:(e,t,n)=>{"use strict";n.d(t,{wk:()=>f,Yf:()=>d,c3:()=>p,fY:()=>y});var r=n(218721),o=n.n(r),i=n(227361),l=n.n(i),u=n(313311),a=n.n(u),c=n(22222),s=n(308316),f=function(e){return o()(e,"localConfig.localizedLayerStyles")},d=function(e){var t=l()(e,"localConfig.plugins.dashboard",[]),n=a()(t,(function(e){return"DashboardEditor"===e.name}))||{};return l()(n,"cfg.catalog.localizedLayerStyles",!1)},p=function(e){return l()(e,"localConfig.localizedLayerStyles.name","mapstore_language")},y=(0,c.P1)(f,p,s.KV,(function(e,t,n){var r=[];return e&&r.push({name:t,value:n}),r}))},945177:(e,t,n)=>{"use strict";var r=n(595318);t.__esModule=!0,t.default=void 0;var o,i=r(n(250139)),l="clearTimeout",u=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),r=setTimeout(e,n);return c=t,r},a=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some((function(e){var t=a(e,"request");if(t in window)return l=a(e,"cancel"),u=function(e){return window[t](e)}}));var c=(new Date).getTime();(o=function(e){return u(e)}).cancel=function(e){window[l]&&"function"==typeof window[l]&&window[l](e)};var s=o;t.default=s,e.exports=t.default},753325:e=>{e.exports=function(e,t){return e>t}},606162:(e,t,n)=>{var r=n(456029),o=n(753325),i=n(406557);e.exports=function(e){return e&&e.length?r(e,i,o):void 0}}}]);