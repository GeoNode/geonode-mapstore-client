"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[62865],{209250:(e,t,n)=>{n.d(t,{A:()=>R});var r=n(273517),o=n.n(r),a=n(605556),i=n.n(a),c=n(8117),l=n(348317),u=n(256951),s=n(8571);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function b(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=y(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o().createElement(u.A,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:5}},buttons:[{glyph:this.props.checked?"chevron-down":"chevron-left",visible:!0,disabled:this.props.disabled,tooltip:this.props.checked?o().createElement(s.A,{msgId:"collapse"}):o().createElement(s.A,{msgId:"expand"}),onClick:function(){return e.props.onClick(!e.props.checked)}}]})}}])&&p(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);b(g,"propTypes",{checked:i().bool,disabled:i().bool,onClick:i().func}),b(g,"defaultProps",{checked:!1,disabled:!1,onClick:function(){}});const h=g;var P=n(711030),S=n(774177);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function A(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var I=function(){return o().createElement(P.A,{className:"square-button-sm no-border switch-error"},o().createElement(c.e6,{glyph:"exclamation-mark",className:"text-danger"}))},C=function(){return o().createElement("div",{className:"switch-loading"},o().createElement(S.A,{size:"small"}))},x=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return A(e=function(e,t,n){return t=E(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),"state",{}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),n=t,(r=[{key:"renderHeader",value:function(){var e=this,t=this.props.useToolbar?h:l.A;return o().createElement("div",null,o().createElement("div",{className:"pull-left"},this.props.title||this.props.header),o().createElement("div",{className:"pull-right"},this.props.locked?null:o().createElement(t,{disabled:this.props.disabled,checked:this.props.expanded,onClick:function(t){e.props.disabled||e.props.onSwitch(t)}}),this.props.error?o().createElement(I,null):null,this.props.loading?o().createElement(C,null):null,this.props.buttons.length>0&&this.props.expanded&&o().createElement(u.A,{btnDefaultProps:{className:"square-button-sm no-border"},buttons:this.props.buttons})))}},{key:"render",value:function(){return o().createElement(c.Zk,{className:"mapstore-switch-panel",collapsible:!0,expanded:this.props.expanded,defaultExpanded:this.props.defaultExpanded,header:this.renderHeader()},this.props.children)}}])&&w(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);A(x,"propTypes",{header:i().node,title:i().oneOfType([i().string,i().node]),defaultExpanded:i().string,expanded:i().bool,onSwitch:i().func,locked:i().bool,buttons:i().array,loading:i().bool,disabled:i().bool,error:i().any,useToolbar:i().bool}),A(x,"defaultProps",{title:"",disabled:!1,expanded:!1,onSwitch:function(){},locked:!1,buttons:[],useToolbar:!1});const R=x},595679:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ie});var r=n(273517),o=n.n(r),a=n(811668),i=n(916589),c=n(801081),l=n(954463),u=n(795093),s=n.n(u),f=n(858156),p=n.n(f),m=n(962193),y=n.n(m),d=n(941860),b=n(837997),v=n(904059),g=n(883832),h=n(141857),P=n(980971),S=n(990872),O=n(653046),w=n(574548);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var T=n(233999),A=n(579440),j=n(364602),I=n(45388),C=n.n(I),x=n(538704);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e,t,n){return(t=function(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,O.IT)(e()),a=(0,O.SR)(e()),i=(0,O.ES)(e()),c=(0,S.KI)(e())||{},u=c.startPlaybackTime,s=c.endPlaybackTime,f=(0,S.sO)(e())===l.XQ.PLAY||(0,S.sO)(e())===l.XQ.PAUSE,p=(0,O.J6)(o)(e()),m="end"===(0,O.Yt)(e());return[i,a,"time",_({limit:20,time:u&&s&&f?(t=u,n=s,"".concat(t,"/").concat(n)):void 0,fromEnd:m},r),p]},Z=function(e,t){if((0,O.SR)(e())){var n=(0,h.xw)((0,O.bl)(e()))(e()),r=(0,O._P)(e());return"multidim-extension"!==p()(r,"source.type")&&n&&n.length>0?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fromValue,o=n.limit,a=void 0===o?20:o,i=(0,S.KI)(t())||{},c=i.startPlaybackTime,l=i.endPlaybackTime;return C().Observable.of(e.filter(function(e){return!c||!l||s()(e).isSameOrAfter(c)&&s()(e).isSameOrBefore(l)}).filter(function(e){return!r||s()(e).isAfter(r)}).slice(0,a))}(n,e,t):j.f1.apply(void 0,(o=N(e,t),function(e){if(Array.isArray(e))return M(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||L(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map(function(t){var n=t.DomainValues.Domain.split(","),r=(0,O.IT)(e())?function(e,t){var n,r=(0,S.KI)(e())||{},o=(0,O.Yt)(e()),a=null==r?void 0:r.endPlaybackTime,i=null==r?void 0:r.startPlaybackTime;return n=o&&"end"===o?t.map(function(e){return e.split("/")[1]}):t.map(function(e){return e.split("/")[0]}),i&&a?(0,w.ac)(n,i,a):n}(e,n):n;return r})}var o;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fromValue,r=t.limit,o=void 0===r?20:r,a=t.sort,i=void 0===a?"asc":a,c=(0,S.OS)(e()),l=c.timeStep,u=c.stepUnit,f=s().duration(l,u),p=(0,S.KI)(e())||{},m=p.startPlaybackTime,y=p.endPlaybackTime,d=void 0!==n?n:m||(0,h.gC)(e())||(new Date).toString(),b=[];d!==n&&b.push(s()(d).toISOString());for(var v=0;v<o&&(d=s()(d).add("asc"===i?f:-1*f),!y||d.isBefore(y));v++)b.push(d.toISOString());return C().Observable.of(b)}(e,t)};const K={retrieveFramesForPlayback:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(l.tr).exhaustMap(function(){return Z(n,_({fromValue:(0,S.KI)(n())&&(0,S.KI)(n()).startPlaybackTime&&(0,S.KI)(n()).endPlaybackTime?void 0:(0,h.gC)(n())},"end"===(0,O.Yt)(n())?{fromEnd:!0}:{})).map(function(e){return(0,l.HJ)(e)}).let((0,T.TC)((0,l.Rm)(!0),(0,l.Rm)(!1)),function(){return C().Observable.of((0,g.z3)({title:"There was an error retrieving animation",message:"Please contact the administrator"}),(0,l.ds)())}).let((0,T.TC)((0,b.o$)(!1,!0),(0,b.o$)(!1,!1))).concat(e.ofType(l.by).filter(function(e){return e.frame%20==10}).switchMap(function(){return Z(n,_({fromValue:(0,S.bc)(n())},"end"===(0,O.Yt)(n())?{fromEnd:!0}:{})).map(l.Jr).let((0,T.TC)((0,l.Rm)(!0),(0,l.Rm)(!1)))})).takeUntil(e.ofType(l.VW,P.LK)).concat(C().Observable.of((0,b.o$)(!1,!1))).let(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}};return function(t){var n=(0,h.TI)(e());return C().Observable.from(n.map(function(e){return(0,v.ju)(e.id,{singleTile:!0})})).concat(t).concat(C().Observable.from(n.map(function(e){return(0,v.ju)(e.id,{singleTile:e.singleTile})})))}}(n))})},updateCurrentTimeFromAnimation:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(l.by).map(function(){return(0,S.xq)(n())}).map(function(e){return e?(0,d.Lx)(e):(0,l.ds)()})},timeDimensionPlayback:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(l.U_).exhaustMap(function(){return C().Observable.interval(1e3*(0,S.tN)(n())).startWith(0).let(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(r){return r.withLatestFrom(e.startWith(t)).filter(function(e){var t=k(e,2)[1];return n(t)}).map(function(e){return k(e,1)[0]})}}(e.ofType(l.tr,l.Hz).map(function(e){return e.type===l.tr}))).map(function(){return(0,l.Zm)((0,S.Kx)(n())+1)}).merge(e.ofType(l._I).map(function(e){var t=e.direction;return(0,l.Zm)(Math.max(0,(0,S.Kx)(n())+t))})).concat(C().Observable.of((0,l.ds)())).takeUntil(e.ofType(l.VW,P.LK))})},playbackToggleGuideLayerToFixedStep:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(l.a7).exhaustMap(function(){return(0,O.SR)(n())?C().Observable.of((0,b.YC)(void 0)):C().Observable.of((0,b.YC)(p()((0,h.Xc)(n()),"[0].id")))})},playbackMoveStep:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(l._I).filter(function(){return(0,S.sO)(n())!==l.XQ.PLAY}).switchMap(function(e){var t=e.direction,r=void 0===t?1:t,o=(0,S.UF)(n())||{},a=(0,h.gC)(n());return a&&o.forTime===a?C().Observable.of(r>0?o.next:o.previous):Z(n,_({limit:1,sort:r>0?"asc":"desc",fromValue:(0,h.gC)(n())},"end"===(0,O.Yt)(n())?{fromEnd:!0}:{})).map(function(){return D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],1)[0]})}).filter(function(e){return!!e}).map(function(e){var t,r=null!==(t="end"===(0,O.Yt)(n())?e.split("/")[1]:e.split("/")[0])&&void 0!==t?t:e;return(0,d.Lx)(r)})},playbackCacheNextPreviousTimes:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(d.Nh,d.i,b.rG,l.VW,b.Qf,b.Tt,b.Ch).filter(function(){return(0,S.sO)(n())!==l.XQ.PLAY&&(0,S.sO)(n())!==l.XQ.PAUSE}).filter(function(){return(0,O.IT)(n())}).filter(function(e){return!!e}).switchMap(function(e){var t=e.time||(0,h.gC)(n()),r=(0,O.Yt)(n());return(0,A.M)(N,!1,n,r,t).map(function(e){var n=D(e,2),r=n[0],o=n[1];return(0,l.D5)({forTime:t,next:r,previous:o})})})},playbackFollowCursor:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(d.i).filter(function(e){return(e.type===d.i||(0,S.sO)(n())===l.XQ.PLAY)&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.start,r=t.end;return n&&r&&(s()(e).isBefore(n)||s()(e).isAfter(r))}((0,h.gC)(n()),(0,O.nK)(n()))}).filter(function(){return p()((0,S.OS)(n()),"following")}).switchMap(function(){return C().Observable.of((0,b.df)((e=(0,h.gC)(n()),r=(t=(0,O.nK)(n())).start,o=t.end,a=s()(o).diff(s()(r)),{start:e,end:s()(e).add(a).toISOString()})));var e,t,r,o,a})},playbackStopWhenDeleteLayer:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(v.o0).filter(function(){return!(0,O.IT)(n())&&"PLAY"===(0,S.sO)(n())}).switchMap(function(){return C().Observable.of((0,l.ds)())})},setIsIntervalData:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(b.rG,d.Nh).filter(function(e){return e.layerId||(0,O.IT)(n())}).switchMap(function(e){var t=e.time||(0,h.gC)(n()),r=(0,O.Yt)(n());return(0,A.M)(N,!0,n,r,t).map(function(e){var t=D(e,2),n=t[0],r=t[1],o=-1!==n.indexOf("/")||-1!==r.indexOf("/");return(0,l.EG)(o)})})},switchOffSnapToLayer:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(v.nX).filter(function(e){var t=e.newProperties,r=e.layer,o=(0,O.IT)(n());return void 0!==(null==t?void 0:t.visibility)&&o===r&&(0,O.zN)(n())}).switchMap(function(){return C().Observable.of((0,l.Qw)())})},updatePlaybackDataOnMapLoad:function(e){return e.ofType(x.mO).filter(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).config;return!y()(null==e?void 0:e.playback)}).switchMap(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).config;return C().Observable.of((0,l.zY)(null==e?void 0:e.playback))})}};var V=n(648644),F=n(723775),z=n(8571),B=n(256951),Q=n(605556),X=n.n(Q),q=n(611741),G=n.n(q),H=n(8117),W=n(32485),$=n.n(W),J=n(168995),ee=n(800462),te=n(348317),ne=n(209250),re=n(645617),oe=n(628017);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach(function(t){le(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function le(e,t,n){return(t=function(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};try{if(!G()(parseInt(e,10))){var r=parseInt(e,10);return t(r<1?1:r)}return n()}catch(e){return n(e)}},se=function(e){var t=e.startPlaybackTime,n=e.endPlaybackTime,r=s()(t).diff(n);return{startPlaybackTime:r>=0?n:t,endPlaybackTime:r>=0?t:n}},fe=function(e,t){var n=e.following,r=e.frameDuration,a=e.timeStep,i=e.stepUnit,c=e.onSettingChange,l=void 0===c?function(){}:c,u=e.toggleAnimationMode,s=void 0===u?function(){}:u,f=e.toggleAnimationRange,p=void 0===f?function(){}:f,m=e.fixedStep,y=void 0!==m&&m,d=e.playbackRange,b=void 0===d?{}:d,v=e.snapTypes,g=void 0===v?[]:v,h=e.currentSnapType,P=void 0===h?"start":h,S=e.snapRadioButtonEnabled,O=void 0!==S&&S,w=e.endValuesSupport,k=e.onChangeSnapType,E=void 0===k?function(){}:k,T=e.setPlaybackRange,A=void 0===T?function(){}:T,j=e.playbackButtons,I=e.dateSelectorStyle,C=void 0===I?{padding:0,margin:0,border:"none"}:I,x=e.style,R=void 0===x?{}:x,D=e.layers,L=void 0===D?[]:D,M=e.changeLayerSetting,Y=void 0===M?function(){}:M,_=e.selectedLayer;return o().createElement("div",{className:"ms-playback-settings",style:R},o().createElement("h4",null,o().createElement(z.A,{msgId:"timeline.settings.title"})),o().createElement(H.gE,{controlId:"timelineSettings"},o().createElement(H.lV,{componentClass:"fieldset",inline:!0,className:"snap-guide-form"},o().createElement(H.mq,null,o().createElement(z.A,{msgId:"timeline.settings.snapToGuideLayer"})," ",o().createElement(J.A,{text:o().createElement(z.A,{msgId:"timeline.settings.snapToGuideLayerTooltip"})})),o().createElement("span",null,o().createElement(te.A,{checked:!y,onChange:function(){return s()}}))),!y&&w&&o().createElement(H.lV,{componentClass:"fieldset",inline:!0,className:"snap-type-form",disabled:!O},o().createElement("div",{className:"snap-type-form-title"},o().createElement(H.mq,null,o().createElement(z.A,{msgId:"timeline.settings.snapType"})," ",o().createElement(J.A,{text:o().createElement(z.A,{msgId:"timeline.settings.snapTypeTooltip"})}))),o().createElement("div",{className:"snap-type-container"},g.map(function(e){return o().createElement("div",{className:"snap-type-item"},o().createElement("input",{type:"radio",className:$()("snap-type-radio-btn",{disabled:!O}),value:e.value,name:"snapType",checked:P===e.value,onChange:function(e){var t=e.target.value;E(t)}}),o().createElement("div",{className:"snap-type-radio-btn-label"},o().createElement(z.A,{msgId:e.label})))})))),o().createElement(H.tU,{defaultActiveKey:1,id:"playback-settings-tabs"},o().createElement(H.oz,{eventKey:1,title:o().createElement(z.A,{msgId:"playback.settings.tab.playback"}),style:{paddingTop:8}},o().createElement(o().Fragment,null,o().createElement(H.gE,{controlId:"frameDuration"},o().createElement(H.mq,null,o().createElement(z.A,{msgId:"playback.settings.frameDuration"})),o().createElement(H.MG,null,o().createElement(re.A,{componentClass:"input",type:"number",value:r,onChange:function(){return ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",function(e){l("frameDuration",e)})}}),o().createElement(H.MG.Addon,null,"s"))),o().createElement(H.mq,null,o().createElement(z.A,{msgId:"playback.settings.step.label"})," ",o().createElement(J.A,{text:o().createElement(z.A,{msgId:"playback.settings.step.tooltip"})})),o().createElement(H.gE,{controlId:"formPlaybackStep"},o().createElement(H.lV,{componentClass:"fieldset",inline:!0},o().createElement(re.A,{disabled:!y,componentClass:"input",type:"number",style:{input:{maxWidth:120}},value:a,onChange:function(){return ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",function(e){l("timeStep",e)})}}),o().createElement(H.MJ,{disabled:!y,componentClass:"select",value:i,onChange:function(e){var t=e.target;return l("stepUnit",(void 0===t?{}:t).value)}},o().createElement(z.A,{msgId:"playback.settings.step.year",msgParams:{number:a||1}},function(e){return o().createElement("option",{value:"years"},e)}),o().createElement(z.A,{msgId:"playback.settings.step.week",msgParams:{number:a||1}},function(e){return o().createElement("option",{value:"weeks"},e)}),o().createElement(z.A,{msgId:"playback.settings.step.day",msgParams:{number:a||1}},function(e){return o().createElement("option",{value:"days"},e)}),o().createElement(z.A,{msgId:"playback.settings.step.hour",msgParams:{number:a||1}},function(e){return o().createElement("option",{value:"hour"},e)}),o().createElement(z.A,{msgId:"playback.settings.step.minute",msgParams:{number:a||1}},function(e){return o().createElement("option",{value:"minutes"},e)}),o().createElement(z.A,{msgId:"playback.settings.step.second",msgParams:{number:a||1}},function(e){return o().createElement("option",{value:"seconds"},e)})))),o().createElement(ne.A,{onSwitch:function(e){return p(e)},expanded:b.startPlaybackTime&&b.endPlaybackTime,title:o().createElement(z.A,{msgId:"playback.settings.range.title"}),buttons:j},o().createElement(H.gE,{controlId:"formPlaybackMode",style:{margin:10}},o().createElement(ee.A,{tooltipId:"playback.settings.range.animationStart",glyph:"play",date:b.startPlaybackTime,onUpdate:function(e){return A(se(ce(ce({},b),{},{startPlaybackTime:e})))},style:C,showButtons:!0}),o().createElement(ee.A,{glyph:"stop",tooltipId:"playback.settings.range.animationEnd",date:b.endPlaybackTime,onUpdate:function(e){return A(se(ce(ce({},b),{},{endPlaybackTime:e})))},style:C,showButtons:!0}))),o().createElement(H.gE,{controlId:"formPlaybackFollowingMode"},o().createElement(H.lV,{componentClass:"fieldset",inline:!0},o().createElement(H.mq,null,o().createElement(z.A,{msgId:"playback.settings.mode.following"})," ",o().createElement(J.A,{text:o().createElement(z.A,{msgId:"playback.settings.mode.followingDescription"})})),o().createElement("span",null,o().createElement(te.A,{checked:n,onChange:function(e){return l("following",e)}})))))),o().createElement(H.oz,{eventKey:2,title:o().createElement(z.A,{msgId:"playback.settings.tab.layers"}),style:{height:250,width:280,overflowY:"auto",paddingTop:8}},L.map(function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.title,a=n.id,i=n.hideInTimeline,c=null==L?void 0:L.filter(function(e){return!e.hideInTimeline}),l=1===c.length&&(null==c||null===(e=c[0])||void 0===e?void 0:e.id)===a||_===a&&!i;return o().createElement("div",{className:"layer-setting"},o().createElement("label",{key:a},r),o().createElement("input",{title:(0,oe.kA)(t.messages,"playback.settings.layer.".concat(l?"disabled":"enabled")),disabled:l,type:"checkbox",onChange:function(e){return Y(a,e.target.checked)},checked:!i}))}))))};fe.contextTypes={messages:X().object};const pe=fe;function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function de(e,t,n){return(t=function(e){var t=function(e){if("object"!=me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==me(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const be=(0,i.compose)((0,a.connect)((0,c.Mz)(S.OS,O.IT,S.KI,O.Yt,O.gB,O.eP,O.o9,function(e,t,n,r,o,a,i){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach(function(t){de(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({fixedStep:!t,playbackRange:n,currentSnapType:r,snapRadioButtonEnabled:o,endValuesSupport:a,selectedLayer:t,layers:i},e)}),{setPlaybackRange:l.P7,onSettingChange:l.L_,onChangeSnapType:b.GI,toggleAnimationMode:l.Qw,changeLayerSetting:b.Hf}),(0,i.withProps)(function(){return{snapTypes:[{id:"start",value:"start",label:"timeline.settings.snapToStart"},{id:"end",value:"end",label:"timeline.settings.snapToEnd"}]}}),(0,i.compose)((0,a.connect)((0,c.Mz)(O.nK,O.df,function(e,t){return{layerRange:t,viewRange:e}}),{moveTo:b.df}),(0,i.withHandlers)({toggleAnimationRange:function(e){var t=e.fixedStep,n=e.layerRange,r=e.viewRange,o=void 0===r?{}:r,a=e.setPlaybackRange,i=void 0===a?function(){}:a;return function(e){var r=t?o:n;r={startPlaybackTime:s()(r&&r.start||new Date).subtract(1,"days").toISOString(),endPlaybackTime:s()(r&&r.end||new Date).add(1,"days").toISOString()},i(e?r:void 0)}},setPlaybackToCurrentViewRange:function(e){var t=e.viewRange,n=void 0===t?{}:t,r=e.setPlaybackRange,o=void 0===r?function(){}:r;return function(){n.start&&n.end&&o({startPlaybackTime:s()(n.start).toISOString(),endPlaybackTime:s()(n.end).toISOString()})}},setPlaybackToCurrentLayerDataRange:function(e){var t=e.setPlaybackRange,n=void 0===t?function(){}:t,r=e.layerRange;return function(){return r&&n({startPlaybackTime:r.start,endPlaybackTime:r.end})}}}),(0,i.withProps)(function(e){var t=e.playbackRange,n=e.fixedStep,r=e.moveTo,o=void 0===r?function(){}:r,a=e.setPlaybackToCurrentViewRange,i=void 0===a?function(){}:a,c=e.setPlaybackToCurrentLayerDataRange,l=void 0===c?function(){}:c;return{playbackButtons:[{glyph:"search",tooltipId:"playback.settings.range.zoomToCurrentPlayackRange",onClick:function(){return o({start:t.startPlaybackTime,end:t.endPlaybackTime})}},{glyph:"resize-horizontal",tooltipId:"playback.settings.range.setToCurrentViewRange",onClick:function(){return i()}},{glyph:"1-layer",visible:!n,tooltipId:"playback.settings.range.fitToSelectedLayerRange",onClick:function(){return l()}}]}})))(pe);var ve=(0,i.compose)((0,i.withState)("showSettings","onShowSettings",!1),(0,i.withState)("collapsed","setCollapsed",!0),(0,i.withProps)(function(e){var t=e.setCollapsed;return{buttons:[{glyph:"minus",onClick:function(){return t(!0)}}]}})),ge=(0,c.Mz)(S.sO,O.IT,S.UF,S.Uk,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return t?e===l.XQ.PLAY||e===l.XQ.PAUSE?r:{hasNext:!!n.next,hasPrevious:!!n.previous}:{hasNext:!0,hasPrevious:!0}}),he=(0,i.compose)((0,a.connect)(ge,{stepMove:l.MM}),(0,i.withHandlers)({forward:function(e){var t=e.stepMove,n=void 0===t?function(){}:t;return function(){return n(1)}},backward:function(e){var t=e.stepMove,n=void 0===t?function(){}:t;return function(){return n(-1)}}}));const Pe=(0,i.compose)(ve,he)(function(e){var t=e.status,n=e.statusMap,r=e.play,a=void 0===r?function(){}:r,i=e.forward,c=void 0===i?function(){}:i,l=e.backward,u=void 0===l?function(){}:l,s=e.pause,f=void 0===s?function(){}:s,p=e.stop,m=void 0===p?function(){}:p,y=e.hasPrevious,d=e.hasNext,b=e.showSettings,v=e.onShowSettings,g=void 0===v?function(){}:v,h=e.settingsStyle,P=void 0===h?{}:h;return o().createElement("div",{style:{display:"flex"}},t!==n.PLAY&&t!==n.PAUSE&&b&&o().createElement(be,{style:P}),o().createElement(B.A,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"step-backward",key:"back",onClick:u,disabled:!y,tooltip:o().createElement(z.A,{msgId:"playback.backwardStep"})},{glyph:t===n.PLAY?"pause":"play",key:"play",active:t===n.PLAY||t===n.PAUSE,disabled:!d,bsStyle:t===n.PLAY||t===n.PAUSE?"success":"primary",onClick:function(){return t===n.PLAY?f():a()},tooltipId:d&&(t===n.PLAY?"playback.pause":t===n.PAUSE?"playback.paused":"playback.play")},{glyph:"stop",key:"stop",disabled:t!==n.PLAY&&t!==n.PAUSE,onClick:m,tooltip:!(t!==n.PLAY&&t!==n.PAUSE)&&o().createElement(z.A,{msgId:"playback.stop"})},{glyph:"step-forward",key:"forward",onClick:c,disabled:!d,tooltip:d&&o().createElement(z.A,{msgId:"playback.forwardStep"})},{glyph:"cog",key:"settings",bsStyle:t!==n.PLAY&&t!==n.PAUSE&&b?"success":"primary",active:(t!==n.PLAY||t!==n.PAUSE)&&!!b,disabled:t===n.PLAY||t===n.PAUSE,onClick:function(){return t!==n.PLAY&&g(!b)},tooltip:!(t===n.PLAY||t===n.PAUSE)&&o().createElement(z.A,{msgId:"playback.settings.tooltip"})}]}))});function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function we(e){var t=function(e){if("object"!=Se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Se(t)?t:t+""}function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ke=function(){return!!e})()}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}function Te(e,t){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Te(e,t)}(0,n(914950).yp)("playback",function(e){return{settings:(0,S.OS)(e),playbackRange:(0,S.KI)(e),metadata:(0,S.UF)(e)}});var Ae=(0,i.compose)((0,i.defaultProps)({statusMap:l.XQ}),(0,a.connect)((0,c.Mz)(S.sO,h.gC,S.Uc,function(e,t,n){return{loading:n,currentTime:t,status:e}}),{play:l.ZH,pause:l.v7,stop:l.ds}))(Pe),je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=Ee(t),function(e,t){if(t&&("object"==Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ke()?Reflect.construct(t,n||[],Ee(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o().createElement("div",{className:"playback-plugin"},o().createElement(Ae,this.props))}}])&&Oe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);const Ie={PlaybackPlugin:Object.assign(je,{noRoot:!0,disablePluginIf:"{state('featuregridmode') === 'EDIT'}",Timeline:{name:"playback",position:1,priority:1}}),epics:K,reducers:{playback:F.A,dimension:V.A}}},723775:(e,t,n)=>{n.d(t,{A:()=>y});var r=n(954463),o=n(415392),a=n(905185),i=n(538704);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t,n){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={timeStep:1,stepUnit:"days",frameDuration:2,following:!0};const y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:r.XQ.STOP,currentFrame:-1,settings:m},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.Zz:return f(f({},e),t.payload);case i.mO:var n;return f({},(null===(n=t.config)||void 0===n?void 0:n.playback)||{});case r.tr:return(0,a.hZ)("status",r.XQ.PLAY,e);case r.Hz:return(0,a.hZ)("status",r.XQ.PAUSE,e);case r.VW:return(0,a.hZ)("status",r.XQ.STOP,(0,a.hZ)("currentFrame",-1,e));case r.U_:return(0,a.hZ)("frames",t.frames,(0,a.hZ)("currentFrame",-1,e));case r.wT:return(0,a.hZ)("framesLoading",t.loading,e);case r.Ep:return(0,a.hZ)("frames",[].concat(l(e.frames||[]),l(t.frames)),e);case r.by:return(0,a.hZ)("currentFrame",t.frame,e);case r.FA:return(0,a.hZ)("playbackRange",t.range,e);case r.YU:return(0,a.hZ)("settings[".concat(t.name,"]"),t.value,e);case r.O_:return(0,a.hZ)("metadata",{next:t.next,previous:t.previous,forTime:t.forTime},e);case r.k:return(0,a.hZ)("metadata",f(f({},e.metadata),{},{timeIntervalData:t.timeIntervalData}),e);case o.rY:return(0,a.hZ)("metadata",void 0,(0,a.hZ)("framesLoading",void 0,(0,a.hZ)("playbackRange",void 0,(0,a.hZ)("frames",void 0,(0,a.hZ)("currentFrame",-1,(0,a.hZ)("status","STOP",(0,a.hZ)("settings",m,e)))))));default:return e}}}}]);