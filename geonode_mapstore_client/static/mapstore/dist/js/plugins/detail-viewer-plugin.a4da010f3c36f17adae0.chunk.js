(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[95121,4133],{217549:(e,r,n)=>{"use strict";n.d(r,{Z:()=>c});var t=n(124852),o=n.n(t),a=n(675263),i=n.n(a),s=["href","readOnly","children"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},u.apply(this,arguments)}function l(e){var r=e.href,n=e.readOnly,t=e.children,a=function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s);return n?t:o().createElement("a",u({href:r},a),t)}l.propTypes={href:i().string,readOnly:i().bool.isRequired,children:i().any},l.defaultProps={href:"",readOnly:!1};const c=l},834065:(e,r,n)=>{"use strict";n.d(r,{Z:()=>p});var t=n(124852),o=n.n(t),a=n(675263),i=n.n(a),s=n(877593),u=n(217549),l=["resource","readOnly","formatHref"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},c.apply(this,arguments)}function d(e){var r,n,t,a=e.resource,i=e.readOnly,d=e.formatHref,p=function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return p.detailsPanel?o().createElement(u.Z,{readOnly:i,href:d({query:{"filter{owner.username.in}":null===(t=a.owner)||void 0===t?void 0:t.username}})},a.owner&&(0,s.vW)(a.owner)):o().createElement("p",c({className:"card-text gn-card-user"},p),(null===(r=a.owner)||void 0===r?void 0:r.avatar)&&o().createElement("img",{src:a.owner.avatar,alt:(0,s.vW)(a.owner),className:"gn-card-author-image"}),o().createElement(u.Z,{readOnly:i,href:d({query:{"filter{owner.username.in}":null===(n=a.owner)||void 0===n?void 0:n.username}})},a.owner&&(0,s.vW)(a.owner)))}d.propTypes={resource:i().object,readOnly:i().bool,formatHref:i().func,props:i().any},d.defaultProps={resource:{},readOnly:!1,formatHref:function(){return"#"}};const p=d},71268:(e,r,n)=>{"use strict";n.d(r,{Z:()=>g});var t=n(124852),o=n.n(t),a=n(805346),i=n(675263),s=n.n(i),u=n(507412),l=n(815135),c=n(441609),d=n.n(c),p=n(535721),f=n(303744),m=(0,l.Z)(f.Z),v=function(e){var r,n,t,i=e.resource,s=void 0===i?{}:i,l=(0,p.fu)(s),c=l.isApproved,f=l.isPublished,v=l.isProcessing,g=l.isCopying,b=l.isDeleting,h=l.isDeleted;return d()(s)?null:o().createElement("p",{className:"gn-resource-status-text"},!v&&(!c||!f)&&o().createElement(m,{variant:"default",className:"gn-resource-status gn-status-button",tooltip:(r={isApproved:c,isPublished:f},n=r.isApproved,t=r.isPublished,!n&&t?o().createElement(a.Z,{msgId:"gnhome.pendingApproval"}):n||t?t||n?"":o().createElement(a.Z,{msgId:"gnhome.unpublished"}):o().createElement(a.Z,{msgId:"gnhome.unApprovedunPublished"})),style:{marginRight:(b||h||g)&&"0.4rem"},tooltipPosition:"top"},o().createElement(u.Z,{name:"info-circle",className:"gn-resource-status-pending"})),b&&o().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},o().createElement(a.Z,{msgId:"gnviewer.deleting"})),h&&o().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},o().createElement(a.Z,{msgId:"gnviewer.deleted"})),g&&o().createElement("span",{className:"gn-resource-status gn-resource-status-primary"},o().createElement(a.Z,{msgId:"gnviewer.cloning"})))};v.propTypes={isApproved:s().bool,isPublished:s().bool},v.defaultProps={isApproved:!0,isPublished:!0};const g=v},94228:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>D});var t=n(124852),o=n.n(t),a=n(322843),i=n(171703),s=n(22222),u=n(810412),l=n(274621),c=n(643892),d=n(452992),p=n(17594),f=n(925108),m=n(782904),v=n(572036),g=n(76907),b=n(303744);var h=n(100824),O=n(625635),y=n(877593),w=n(805346),P=n(675110),E=n(800827),j=n(535721);function Z(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function C(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var k=(0,i.connect)((0,s.P1)([function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data)||null},function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.loading)||!1},function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.favorite)||!1},function(e){var r;return(null==e||null===(r=e.gnsave)||void 0===r?void 0:r.savingThumbnailMap)||!1},P.l2,g.km,g.Bs,E.Od,function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.showMapThumbnail)||!1},d.WB],(function(e,r,n,t,o,a,i,s,u,l){return{layers:o,resource:e,loading:r,savingThumbnailMap:t,favorite:n,isThumbnailChanged:a,resourceThumbnailUpdating:i,initialBbox:null==s?void 0:s.bbox,enableMapViewer:u,downloading:l,canDownload:(0,j.sH)(e,"download_resourcebase"),resourceId:e.pk}})),{closePanel:m.Xg.bind(null,"rightOverlay","enabled",!1),onFavorite:c.gw,onMapThumbnail:c.CB,onResourceThumbnail:c.e5,onClose:c.qs,onAction:c.Rk})(u.Z),x=(0,i.connect)((0,s.P1)([g.V$,g.fg],(function(e,r){return{hide:e||!r}})),{onClick:m.Xg.bind(null,"rightOverlay","enabled","DetailViewer")})((function(e){var r=e.onClick,n=e.hide,t=e.variant,a=e.size,i=e.showMessage;return n?null:o().createElement(b.Z,{variant:t,size:a,onClick:function(){r()}},i?o().createElement(w.Z,{msgId:"gnviewer.editInfo"}):o().createElement(p.Z,{name:"info-circle"}))})),T=(0,i.connect)((0,s.P1)([function(e){var r,n;return"DetailViewer"===(null==e||null===(r=e.controls)||void 0===r||null===(n=r.rightOverlay)||void 0===n?void 0:n.enabled)},g.il,g.V$,g.fg,l.np],(function(e,r,n,t,o){return{enabled:e,canEdit:r,hide:n||!t,user:o}})),{onEditResource:c.Br,onEditAbstractResource:c.bI,onEditThumbnail:c.U5,onClose:m.Xg.bind(null,"rightOverlay","enabled",!1)})((0,O.EN)((function(e){var r=e.location,n=e.enabled,a=e.onEditResource,i=e.onEditAbstractResource,s=e.onEditThumbnail,u=e.canEdit,l=e.hide,c=e.user,d=e.onClose,p=function(e){var r=e.disabled,n=e.onClickOut,o=(0,t.useRef)();return(0,t.useEffect)((function(){function e(e){var t;!r&&(null==o||null===(t=o.current)||void 0===t?void 0:t.contains)&&!o.current.contains(e.target)&&n()}return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[r,o,n]),o}({disabled:!n,onClickOut:function(){d()}});return l?null:o().createElement(h.Z,{enabled:n,ref:p,className:"gn-overlay-wrapper"},o().createElement(k,{editTitle:function(e){a(e)},editAbstract:function(e){i(e)},editThumbnail:function(e){s(e,!0)},activeEditMode:n&&u,enableFavorite:!!c,formatHref:function(e){return(0,y.nz)(function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(n),!0).forEach((function(r){C(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({location:r},e))}}))})));const D=(0,a.rx)("DetailViewer",{component:T,containers:{ActionNavbar:{name:"DetailViewerButton",Component:x}},epics:{},reducers:{gnresource:v.Z,controls:f.Z}})},572036:(e,r,n)=>{"use strict";n.d(r,{Z:()=>g});var t=n(618446),o=n.n(t),a=n(643892),i=n(535721),s=["data"],u=["features"],l=["features"],c=["features"];function d(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function p(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?p(Object(n),!0).forEach((function(r){m(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function m(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var v={selectedLayerPermissions:[],data:{},permissions:[]};const g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case a.$X:return v;case a.ql:return f(f({},e),{},{configError:void 0,loadingResourceConfig:r.loading});case a.nS:return f(f({},e),{},{loading:!1,configError:r.message});case a.W:return f(f({},e),{},{loading:!0});case a.Zf:var n=r.data||{},t=(n.data,d(n,s));return f(f({},e),{},{error:null,initialResource:f({},r.data),data:t,loading:!1,isNew:!1});case a.Eu:return f(f({},e),{},{initialResource:null,data:null,error:r.error,loading:!1});case a.Vy:return f(f({},e),{},{data:f(f({},e.data),r.properties)});case a.YB:return f(f({},e),{},{type:r.resourceType});case a.xm:return f(f({},v),{},{isNew:!0});case a._f:return f(f({},e),{},{id:r.id});case a.ek:return f(f({},e),{},{permissions:r.permissions});case a.cd:return f(f({},e),{},{data:f(f({},null==e?void 0:e.data),{},{title:null==r?void 0:r.title,name:null==r?void 0:r.title})});case a.pt:return f(f({},e),{},{data:f(f({},null==e?void 0:e.data),{},{abstract:null==r?void 0:r.abstract})});case a.ww:return f(f({},e),{},{data:f(f({},null==e?void 0:e.data),{},{thumbnail_url:null==r?void 0:r.thumbnailUrl,thumbnailChanged:null==r?void 0:r.thumbnailChanged})});case a._Z:return f(f({},e),{},{data:f(f({},null==e?void 0:e.data),{},{updatingThumbnail:!0})});case a.dh:return f(f({},e),{},{showMapThumbnail:r.enabled});case a.p2:return f(f({},e),{},{selectedLayerPermissions:r.permissions});case a.ih:return f(f({},e),{},{initialCompactPermissions:r.compactPermissions,compactPermissions:r.compactPermissions,isCompactPermissionsChanged:!1,geoLimits:[]});case a.J5:return f(f({},e),{},{compactPermissions:r.compactPermissions,isCompactPermissionsChanged:!o()((0,i.go)(e.initialCompactPermissions),(0,i.go)(r.compactPermissions)),geoLimits:(0,i.vB)(r.compactPermissions)});case a.uA:if(e.compactPermissions){var p=e.compactPermissions,m=p.users,g=p.organizations,b=p.groups;return f(f({},e),{},{compactPermissions:{users:m.map((function(e){return e.features,d(e,u)})),organizations:g.map((function(e){return e.features,d(e,l)})),groups:b.map((function(e){return e.features,d(e,c)}))},geoLimits:[]})}return e;default:return e}}},580760:(e,r,n)=>{var t=n(989881);e.exports=function(e,r){var n=[];return t(e,(function(e,t,o){r(e,t,o)&&n.push(e)})),n}},389179:(e,r,n)=>{var t=n(555639),o=n(640554),a=n(14841),i=n(479833),s=t.isFinite,u=Math.min;e.exports=function(e){var r=Math[e];return function(e,n){if(e=a(e),(n=null==n?0:u(o(n),292))&&s(e)){var t=(i(e)+"e").split("e"),l=r(t[0]+"e"+(+t[1]+n));return+((t=(i(l)+"e").split("e"))[0]+"e"+(+t[1]-n))}return r(e)}}},763105:(e,r,n)=>{var t=n(234963),o=n(580760),a=n(267206),i=n(701469);e.exports=function(e,r){return(i(e)?t:o)(e,a(r,3))}},313880:(e,r,n)=>{var t=n(479833);e.exports=function(){var e=arguments,r=t(e[0]);return e.length<3?r:r.replace(e[1],e[2])}},59854:(e,r,n)=>{var t=n(389179)("round");e.exports=t}}]);