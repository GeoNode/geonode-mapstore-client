"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2970],{777693:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(273517),o=n.n(r),l=n(605556),a=n.n(l),i=n(8117),u=n(8571),c=n(836970);var s=n(890559),f=n(275705),d=n(753103),m=n(221604);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function b(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return(t=function(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l,a,i=[],u=!0,c=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function E(e){var t=e.request,n=e.responseToEntries,l=e.pageSize,a=e.style,p=e.placeholderId,y=e.onSelect,v=e.onClose,S=e.titleId,O=e.noResultId,E=e.loading,w=e.params,j=(0,r.useRef)(),A=h((0,r.useState)([]),2),C=A[0],P=A[1],I=h((0,r.useState)(!1),2),T=I[0],k=I[1],x=h((0,r.useState)(1),2),N=x[0],R=x[1],z=h((0,r.useState)(!1),2),D=z[0],L=z[1],M=h((0,r.useState)(""),2),q=M[0],H=M[1],U=(0,r.useRef)(),Z=T||!!E;!function(e){var t=e.scrollContainer,n=e.shouldScroll,o=void 0===n?function(){return!0}:n,l=e.onLoad,a=e.offset,i=void 0===a?200:a,u=(0,r.useRef)({});u.current=function(){(t?t.scrollTop:document.body.scrollTop||document.documentElement.scrollTop)+(t?t.clientHeight:window.innerHeight)>=(t?t.scrollHeight:document.body.scrollHeight||document.documentElement.scrollHeight)-i&&o()&&l()},(0,r.useEffect)(function(){var e=t||window;function n(){u.current()}return e.addEventListener("scroll",n),function(){e.removeEventListener("scroll",n)}},[t])}({scrollContainer:j.current,shouldScroll:function(){return!T&&D},onLoad:function(){R(N+1)}});var $=(0,r.useRef)();return $.current=function(e){!T&&t&&(j.current&&e.reset&&(j.current.scrollTop=0),k(!0),t(g(g({},w),{},{q,page:e.page,pageSize:l})).then(function(t){if(U.current){var r=n(t);L(t.isNextPageAvailable),P(1===e.page?r:[].concat(b(C),b(r))),k(!1)}}).catch(function(){U.current&&k(!1)}))},(0,r.useEffect)(function(){return U.current=!0,function(){U.current=!1}},[]),(0,r.useEffect)(function(){N>1&&$.current({page:N})},[N]),(0,r.useEffect)(function(){R(1),$.current({page:1,reset:!0})},[q]),o().createElement("div",{className:"gn-resources-catalog",style:a},v&&o().createElement("div",{className:"gn-resources-catalog-head"},o().createElement("div",{className:"gn-resources-catalog-title"},o().createElement(u.A,{msgId:S})),o().createElement(c.A,{className:"square-button",onClick:function(){return v()}},o().createElement(i.e6,{glyph:"1-close"}))),o().createElement("div",{className:"gn-resources-catalog-filter"},o().createElement(m.A,{placeholder:p,value:q,debounceTime:300,onChange:function(e){return H(e)}}),q&&!T&&o().createElement(c.A,{onClick:function(){return H("")}},o().createElement(i.e6,{glyph:"remove"})),T&&o().createElement(s.A,null)),o().createElement("div",{ref:j,className:"gn-resources-catalog-body"},o().createElement("ul",{className:"gn-resources-catalog-list"},C.map(function(e){return o().createElement("li",{key:e.pk},o().createElement(d.A,{data:g(g({},e),{},{"@extras":{info:{thumbnailUrl:null==e?void 0:e.thumbnail_url}}}),readOnly:!0,layoutCardsStyle:"grid",metadata:[{path:"title",target:"header",width:100}],onClick:function(){return function(e){y(e)}(e)}}))}),0===C.length&&!T&&o().createElement("div",{className:"gn-resources-catalog-alert"},o().createElement(u.A,{msgId:O})))),Z&&o().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},o().createElement(f.A,{size:70})))}E.propTypes={request:a().func,responseToEntries:a().func,pageSize:a().number,placeholderId:a().string,onClose:a().func,onSelect:a().func,titleId:a().string,noResultId:a().string},E.defaultProps={responseToEntries:function(e){return e.resources},pageSize:10,placeholderId:"gnviewer.resourcesCatalogFilterPlaceholder",titleId:"gnviewer.resourcesCatalogTitle",noResultId:"gnviewer.resourcesCatalogEntriesNoResults",onSelect:function(){}};const w=E},270368:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(415392),o=n(271020),l=n(97401),a=n(779893),i="PANEL";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={gnUpdateDatasetsCatalogMapLayout:function(e,t){return e.ofType(o.a,r.$4).filter(function(){var e;return null===(e=t.getState())||void 0===e||null===(e=e.controls)||void 0===e||null===(e=e.datasetsCatalog)||void 0===e?void 0:e.enabled}).filter(function(e){return e.source!==i}).map(function(e){var n,r=e.layout,u=(0,a.Uh)("mapLayout")||{left:{sm:300,md:500,lg:600},right:{md:658},bottom:{sm:30}},c=(0,l.iS)(t.getState()),f=null!==(n=t.getState())&&void 0!==n&&null!==(n=n.controls)&&void 0!==n&&null!==(n=n.drawer)&&void 0!==n&&n.enabled?u.left.sm:null,d=(0,o.Ix)(s(s(s(s({},(0,l.u$)(t.getState())),r),{},{right:u.right.md},f&&{left:f}),{},{boundingMapRect:s(s({},(null==r?void 0:r.boundingMapRect)||{}),{},{right:u.right.md},f&&{left:f}),boundingSidebarRect:s(s({},c),null==r?void 0:r.boundingSidebarRect)}));return s(s({},d),{},{source:i})})}}},539495:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r=n(273517),o=n.n(r),l=n(605556),a=n.n(l),i=n(393149),u=n(811668),c=n(801081),s=n(8571),f=n(836970),d=n(794689),m=n(425380),p=n(904059),b=n(273494),y=n(415392),g=n(270368),v=n(97401),h=n(777693);var S=["onAdd","onZoomTo"],O=["enabled"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(null,arguments)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function A(e){var t,n,l=e.onAdd,a=e.onZoomTo,i=j(e,S),u=function(){var e=(0,r.useRef)();return(0,r.useEffect)(function(){return e.current=!0,function(){e.current=!1}},[]),function(t){return t&&e.current&&t(),!!e.current}}(),c=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l,a,i=[],u=!0,c=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],f=c[1];return o().createElement(h.A,E({},i,{loading:s,onSelect:function(e){f(!0),((0,m.Qh)(e.subtype)?(0,d.VW)(e.pk):(0,d.V$)(e.pk)).then(function(e){var t,n,r=(0,m.zy)(e);l(r);var o,i=(null==r||null===(t=r.bbox)||void 0===t?void 0:t.bounds)||{},u=i.minx,c=i.miny,s=i.maxx,f=i.maxy,d=(null==r||null===(n=r.bbox)||void 0===n?void 0:n.bounds)&&[u,c,s,f];d&&a(d,null==r||null===(o=r.bbox)||void 0===o?void 0:o.crs)}).finally(function(){u(function(){return f(!1)})})}}))}A.propTypes={request:a().func,responseToEntries:a().func,pageSize:a().number,onAdd:a().func,placeholderId:a().string,onClose:a().func,onZoomTo:a().func},A.defaultProps={request:d.yT,responseToEntries:function(e){return e.resources},pageSize:10,onAdd:function(){},placeholderId:"gnviewer.datasetsCatalogFilterPlaceholder",titleId:"gnviewer.datasetsCatalogTitle",noResultId:"gnviewer.datasetsCatalogEntriesNoResults",onZoomTo:function(){},onClose:function(){}};var C=(0,u.connect)((0,c.Mz)([function(e){return(0,v.o7)(e,{height:!0})},function(e){var t;return null==e||null===(t=e.controls)||void 0===t||null===(t=t.datasetsCatalog)||void 0===t?void 0:t.enabled}],function(e,t){return{style:e,enabled:t}}),{onAdd:p.VE,onClose:y.fN.bind(null,"datasetsCatalog","enabled",!1),onZoomTo:b.jc})(function(e){var t=e.enabled,n=j(e,O);return t?o().createElement(A,n):null}),P=(0,u.connect)((0,c.Mz)([],function(){return{}}),{onClick:y.fN.bind(null,"datasetsCatalog","enabled",!0)})(function(e){var t=e.onClick,n=e.size,r=e.variant;return o().createElement(f.A,{size:n,onClick:function(){t()},variant:r},o().createElement(s.A,{msgId:"gnviewer.addLayer"}))});const I=(0,i.i1)("DatasetsCatalog",{component:C,containers:{ActionNavbar:{name:"DatasetsCatalog",Component:P}},epics:g.A,reducers:{}})}}]);