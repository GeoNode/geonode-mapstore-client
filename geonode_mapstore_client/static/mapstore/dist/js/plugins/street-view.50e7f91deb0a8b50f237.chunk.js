(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[60297,47310],{460604:(e,t,r)=>{"use strict";r.d(t,{hn:()=>n,yg:()=>o,vD:()=>i,jJ:()=>a,oy:()=>l,am:()=>c,W:()=>s,B1:()=>u,YP:()=>d,fU:()=>f,cY:()=>p});var n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",l="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",c="ADDITIONALLAYER:MERGE_OPTIONS_BY_OWNER",s=function(e,t){return{type:a,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},u=function(e,t){return{type:l,owner:e,options:t}},d=function(e,t){return{type:c,owner:e,options:t}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.owner;return{type:o,id:t,owner:r}},p=function(e){return{type:i,owner:e}}},921914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>l,Pn:()=>c,DZ:()=>s,e8:()=>u,E0:()=>d,F9:()=>f,X_:()=>p,pb:()=>y,Re:()=>m,ih:()=>v,xy:()=>g,jL:()=>b,oz:()=>h,ph:()=>w,lF:()=>O,gG:()=>E,cb:()=>S,GI:()=>I,B1:()=>j,fv:()=>P,gc:()=>A,zX:()=>T,ZF:()=>_,Zb:()=>C,DW:()=>N,Xp:()=>D,Fm:()=>k,sV:()=>L,LU:()=>R,XP:()=>M,WU:()=>x,mK:()=>F,g:()=>V,ws:()=>G,HP:()=>U,aN:()=>Z,Pg:()=>z,u0:()=>K,TM:()=>B,PM:()=>W,lK:()=>H,sv:()=>$,MO:()=>q,oO:()=>X,Mc:()=>Q,Zw:()=>J,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>ne,Y$:()=>oe,Qu:()=>ie,kT:()=>ae});var n=r(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",s="PURGE_MAPINFO_RESULTS",u="CHANGE_MAPINFO_FORMAT",d="SHOW_MAPINFO_MARKER",f="HIDE_MAPINFO_MARKER",p="SHOW_REVERSE_GEOCODE",y="HIDE_REVERSE_GEOCODE",m="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",g="FEATURE_INFO_CLICK",b="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",h="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",w="TOGGLE_MAPINFO_STATE",O="UPDATE_CENTER_TO_MARKER",E="IDENTIFY:CHANGE_PAGE",S="IDENTIFY:CLOSE_IDENTIFY",I="IDENTIFY:CHANGE_FORMAT",j="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",P="IDENTIFY:EDIT_LAYER_FEATURES",A="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",T="IDENTIFY:SET_MAP_TRIGGER",_="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",C="IDENTIFY:SET_SHOW_IN_MAP_POPUP",N="IDENTIFY:IDENTIFY_IS_MOUNTED",D="IDENTIFY:INIT_PLUGIN";function k(e,t,r,n,i){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:i}}function L(e,t,r,n){return{type:i,error:t,reqId:e,requestParams:r,layerMetadata:n}}function R(){return{type:m}}function M(){return{type:v}}function x(e,t){return{type:c,reqId:e,request:t}}function F(e){return{type:l,enabled:e}}function V(){return{type:s}}function G(e){return{type:u,infoFormat:e}}function U(){return{type:d}}function Z(){return{type:f}}function Y(e){return{type:p,reverseGeocodeData:e.data}}function z(e){return function(t){n.Z.reverseGeocode(e).then((function(e){t(Y(e))})).catch((function(e){t(Y(e))}))}}function K(){return{type:y}}function B(){return{type:w}}function W(e){return{type:O,status:e}}function H(e,t){return{type:g,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null}}function $(e){return{type:b,point:e}}function q(e){return{type:h,enabled:e}}function X(e){return{type:E,index:e}}var Q=function(){return{type:S}},J=function(e){return{type:I,format:e}},ee=function(e){return{type:j,showCoordinateEditor:e}},te=function(e){return{type:P,layer:e}},re=function(e){return{type:A,query:e}},ne=function(e){return{type:T,trigger:e}},oe=function(e){return{type:C,value:e}},ie=function(e){return{type:N,isMounted:e}},ae=function(e){return{type:D,cfg:e}}},647310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(375875),o=r.n(n),i=r(472500),a=r.n(i),l=r(727418),c=r.n(l),s={format:"json",bounded:0,polygon_geojson:1,priority:5};const u={geocode:function(e,t){var r=c()({q:e},s,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=c()({lat:e.lat,lon:e.lng},t||{},s),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},807472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(727418),o=r.n(n),i=r(675263),a=r.n(i),l=r(124852),c=r.n(l),s=r(485294),u=r.n(s),d=r(472986),f=r.n(d),p=r(805346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function b(e,t,r){return t=w(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function E(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var I=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return E(e=b(this,t,[].concat(n)),"renderLoading",(function(){return e.props.maskLoading?c().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},c().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},c().createElement(p.Z,{msgId:"loading"}),c().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),E(e,"renderRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),E(e,"hasRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),E(e,"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=c().createElement("div",{id:this.props.id,style:v({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},c().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),c().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?c().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):c().createElement("span",null)),r=this.props.draggable?c().createElement(u(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?c().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&g(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(c().Component);E(I,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),E(I,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const j=I},135400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(124852),o=r.n(n),i=r(379313);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,o,i,l;n=e,o=t,i=r[t],l=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==a(l)?l:l+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.mainViewStyle,a=void 0===n?{}:n,l=e.contentStyle,s=void 0===l?{}:l,u=e.imageStyle,d=void 0===u?{}:u,f=e.glyph,p=void 0===f?"info-sign":f,y=e.iconFit,m=e.title,v=e.tooltip,g=e.tooltipId,b=e.description,h=e.content;return o().createElement("div",{className:"empty-state-container",style:c({height:y?"100%":void 0},r)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:c({height:y?"100%":void 0},a)},p?o().createElement("div",{key:"glyph",className:"empty-state-image",style:c({height:y?"100%":void 0},d)},o().createElement(i.Z,{iconFit:y,tooltip:v,tooltipId:g,glyph:p})):null,m?o().createElement("h1",{key:"title"},m):null,b?o().createElement("p",{key:"description",className:"empty-state-description"},b):null),o().createElement("div",{key:"content",className:"empty-state-content",style:s},h))}},379313:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(124852),o=r.n(n),i=r(480681),a=r(496259),l=(0,r(815135).Z)(i.Glyphicon);const c=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.tooltip,i=e.tooltipId,c=e.iconFit,s=e.padding,u=void 0===s?0:s,d=e.margin,f=void 0===d?0:d;return o().createElement(a.Z,null,(function(e){var t=e.width,a=e.height;return o().createElement(l,{glyph:r,tooltip:n,tooltipId:i,style:{display:"inline-block",padding:u+"px",margin:f+"px",textAlign:"center",fontSize:c?Math.min(t,a)-2*u-2*f:t-2*u-2*f}})}))}},895160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Pt});var n={};r.r(n),r.d(n,{getAPI:()=>H,getLocation:()=>q,loadAPI:()=>$,loadGoogleMapsAPI:()=>W});var o={};r.r(o),r.d(o,{getAPI:()=>J,getLocation:()=>ee,loadAPI:()=>Q});var i={};r.r(i),r.d(i,{disableGFIForStreetViewEpic:()=>gt,streetViewMapClickHandler:()=>ht,streetViewSetupTearDown:()=>bt,streetViewSyncLayer:()=>wt,tearDownStreetViewOnDrawToolActive:()=>Ot});var a=r(124852),l=r.n(a),c=r(480681),s=r(171703),u=r(322843),d="street-view",f=d,p="street-view-marker",y="street-view-data",m={GOOGLE:"google",CYCLOMEDIA:"cyclomedia"},v="__cycloMedia_streetView_source_credential__",g=r(22222),b=r(805346),h=r(807472),w=r(101706),O=r(624262),E=r(607147),S=r(569893),I=r(2510),j=(0,E.Yq)(d),P=function(e){var t;return null!==(t=null==e?void 0:e.streetView)&&void 0!==t?t:{}},A=function(e){return function(t){var r,n,o;return null!==(r=null===(n=P(t))||void 0===n||null===(o=n.apiLoaded)||void 0===o?void 0:o[e])&&void 0!==r&&r}},T=(0,g.P1)(P,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).location})),_=(0,g.P1)(P,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pov}));function C(e){var t,r;return null!==(t=null===(r=P(e))||void 0===r?void 0:r.configuration)&&void 0!==t?t:{}}function N(e){var t,r;return null!==(t=null===(r=C(e))||void 0===r?void 0:r.provider)&&void 0!==t?t:"google"}var D={provider:"custom",type:"tileprovider",url:"https://mts1.googleapis.com/vt?hl=en-US&lyrs=svv|cb_client:apiv3&style=40,18&x={x}&y={y}&z={z}"},k={type:"wfs",security:{type:"Basic",sourceType:"sessionStorage",sourceId:v},strategy:"bbox",maxResolution:1,serverType:O.z$.NO_VENDOR,url:"https://atlasapi.cyclomedia.com/api/Recordings/wfs",name:"atlas:Recording",style:{format:"geostyler",body:{name:"My Style",rules:[{name:"",symbolizers:[{kind:"Mark",color:"#0000ff",fillOpacity:1,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,radius:5,wellKnownName:"Circle",msHeightReference:"none",msBringToFront:!0,symbolizerId:"d2c4dab1-a0e7-11ee-a734-df08d0913056"}],ruleId:"d2c4dab0-a0e7-11ee-a734-df08d0913056"}]}}},L=(0,g.P1)(N,(function(e){switch(e){case m.GOOGLE:return D;case m.CYCLOMEDIA:return k;default:return{}}}));function R(e){switch(N(e)){case m.GOOGLE:return function(e){var t,r,n,o,i,a,l,c,s;return null!==(t=null!==(r=null!==(n=null===(o=C(e))||void 0===o?void 0:o.apiKey)&&void 0!==n?n:null===(i=(0,I.kQ)(e))||void 0===i||null===(a=i.apiKeys)||void 0===a?void 0:a.googleStreetViewAPIKey)&&void 0!==r?r:null===(l=(0,I.kQ)(e))||void 0===l||null===(c=l.apiKeys)||void 0===c?void 0:c.googleAPIKey)&&void 0!==t?t:null===(s=(0,I.kQ)(e))||void 0===s?void 0:s.googleAPIKey}(e);case m.CYCLOMEDIA:return function(e){var t,r,n,o;return null!==(t=null===(r=C(e))||void 0===r?void 0:r.apiKey)&&void 0!==t?t:null===(n=(0,I.kQ)(e))||void 0===n||null===(o=n.apiKeys)||void 0===o?void 0:o.cyclomediaAPIKey}(e);default:return null}}function M(e){var t,r;return null===(t=null===(r=C(e))||void 0===r?void 0:r.useDataLayer)||void 0===t||t}var x=r(782904),F=r(197395),V=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r};const G="__googleMapsScriptId";class U{constructor({apiKey:e,channel:t,client:r,id:n=G,libraries:o=[],language:i,region:a,version:l,mapIds:c,nonce:s,retries:u=3,url:d="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.version=l,this.apiKey=e,this.channel=t,this.client=r,this.id=n||G,this.libraries=o,this.language=i,this.region=a,this.mapIds=c,this.nonce=s,this.retries=u,this.url=d,U.instance){if(!V(this.options,U.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(U.instance.options)}`);return U.instance}U.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((r=>{r?t(r.error):e(window.google)}))}))}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var Z=function(e){var t,r;return{pano:null==e?void 0:e.pano,shortDescription:null==e?void 0:e.shortDescription,description:null==e?void 0:e.description,latLng:{lat:null==e||null===(t=e.latLng)||void 0===t?void 0:t.lat(),lng:null==e||null===(r=e.latLng)||void 0===r?void 0:r.lng()}}};function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}var z,K=["apiKey","version","useStaticCache"];function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiKey,r=e.version,n=void 0===r?"weekly":r,o=e.useStaticCache,i=void 0===o||o,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,K);if(!(i?z:void 0)){var l=new U(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Y(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({apiKey:t,version:n},a));return l.load().then((function(e){return z=e,e}))}return new Promise((function(e){return e(z)}))};function H(){return z}var $=W;function q(e){var t=e.latlng;return(new(H().maps.StreetViewService)).getPanorama({location:t,radius:50}).then((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,t=(null!=e?e:{}).location;return Z(t)}))}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(){return new Promise((function(e){return e()}))},J=function(){},ee=function(e){return new Promise((function(t,r){var n,o,i,a=e.intersectedFeatures,l=null!==(n=null===(o=(void 0===a?[]:a).find((function(e){return e.id===y})))||void 0===o?void 0:o.features)&&void 0!==n?n:[];l.length||r({code:"ZERO_RESULTS"});var c,s,u=null!==(i=l[0])&&void 0!==i?i:{},d=u.properties,f=u.geometry,p=(c=(void 0===f?{}:f).coordinates,s=3,function(e){if(Array.isArray(e))return e}(c)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(c,s)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}(c,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],v=p[1],g=p[2];t({properties:d,latLng:{lat:v,lng:m,h:void 0===g?0:g}})}))};const te={google:n,cyclomedia:o};var re="STREET_VIEW:API_LOADING",ne="STREET_VIEW:API_LOADED",oe="STREET_VIEW:SET_LOCATION",ie="STREET_VIEW:SET_POV",ae="STREET_VIEW:CONFIGURE",le="STREET_VIEW:RESET",ce="STREET_VIEW:UPDATE_STREET_VIEW_LAYER";function se(e){return{type:re,loading:e}}function ue(){return function(e,t){var r,n,o=N(t());if(A(o)(t()))e((0,x.Xi)(d,"enabled"));else{se(!0);var i=R(t()),a=null!==(r=null===(n=C(t()))||void 0===n?void 0:n.providerSettings)&&void 0!==r?r:{};te[o]||(console.error("No API found for provider ".concat(o)),e((0,F.vU)({title:"streetView.title",message:"No API found for provider ".concat(o)}))),te[o].loadAPI({apiKey:i,providerSettings:a}).then((function(){se(!1),e(function(e){return{type:ne,provider:e}}(o)),e((0,x.Xi)(d,"enabled"))})).catch((function(e){se(!1),console.log(e)}))}}}function de(e){return{type:oe,location:e}}function fe(e){return{type:ie,pov:e}}var pe=r(618446),ye=r.n(pe),me=r(472986),ve=r.n(me),ge=r(135400);const be=function(e){var t=e.loading,r=void 0!==t&&t,n=e.title,o=void 0===n?l().createElement(b.Z,{msgId:"streetView.emptyTitle"}):n,i=e.description,a=void 0===i?l().createElement(b.Z,{msgId:"streetView.emptyDescription"}):i;return l().createElement("div",{className:"empty-street-view"},l().createElement(ge.Z,{iconFit:!1,glyph:"road",title:o,description:l().createElement(l().Fragment,null,r?l().createElement(l().Fragment,null,l().createElement(ve(),{style:{display:"inline-block",verticalAlign:"bottom"},spinnerName:"circle",noFadeIn:!0})," "):null,a)}))};function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=he(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==he(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Ie=function(e){var t=e.size,r=e.google,n=e.position,o=e.location,i=e.pov,c=e.className,s=void 0===c?"google-street-view":c,u=e.style,d=void 0===u?{}:u,f=e.panoramaOptions,p=void 0===f?{}:f,y=(0,a.useRef)(),m=Ee((0,a.useState)(),2),v=m[0],g=m[1];(0,a.useEffect)((function(){if(r&&o&&!v){var e=new r.maps.StreetViewPanorama(y.current,Oe({position:n,pov:i,zoom:1},p));o.pano&&e.setPano(o.pano),g(e)}}),[r,o,v,p]);var b=Ee((0,a.useState)(),2),h=b[0],w=b[1];return(0,a.useEffect)((function(){return v&&w(function(e,t){var r=t.location,n=t.setLocation,o=t.setPov,i=[];return i.push(e.addListener("position_changed",(function(){var t=Z(e.getLocation());ye()(null==r?void 0:r.latLng,null==t?void 0:t.latLng)||n(t)}))),i.push(e.addListener("pov_changed",(function(){var t=e.getPov(),r=t.heading,n=t.pitch;o({heading:r,pitch:n})}))),i}(v,e)),function(e){e&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){return e.removeListener(t)}))}(v,h)}),[v]),(0,a.useEffect)((function(){r&&r.maps.event.trigger(v,"resize")}),[t]),(0,a.useEffect)((function(){v&&o.pano&&v.setPano(o.pano)}),[null==o?void 0:o.pano]),l().createElement(l().Fragment,null,l().createElement("div",{className:s,style:Oe({display:v?"none":"block"},d)},l().createElement(be,null)),l().createElement("div",{className:s,style:Oe({display:v?"block":"none"},d),ref:y}))};var je=["apiLoaded","enabled"];function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pe.apply(this,arguments)}const Ae=(0,s.connect)((0,g.zB)({apiLoaded:A("google"),location:T,panoramaOptions:function(e){var t;return null===(t=C(e))||void 0===t?void 0:t.panoramaOptions}}),{setLocation:de,setPov:fe})((function(e){var t=e.apiLoaded,r=(e.enabled,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,je));return t?l().createElement(Ie,Pe({location,google:H()},r)):l().createElement("div",{className:"street-view-api-loader"},l().createElement(b.Z,{msgId:"streetView.loadingAPI"}))}));var Te=r(774565),_e=r(916651),Ce=r(233044);function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return De(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?De(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ke=(0,r(815135).Z)(c.Button);const Le=function(e){var t=e.setCredentials,r=void 0===t?function(){}:t,n=e.credentials,o=e.showCredentialsForm,i=e.setShowCredentialsForm,s=void 0===i?function(){}:i,u=Ne((0,a.useState)((null==n?void 0:n.username)||""),2),d=u[0],f=u[1],p=Ne((0,a.useState)((null==n?void 0:n.password)||""),2),y=p[0],m=p[1];return o?l().createElement("div",{className:"street-view-credentials"},l().createElement("h5",null,l().createElement(b.Z,{msgId:"streetView.cyclomedia.insertCredentials"})),l().createElement(c.Form,null,l().createElement(c.ControlLabel,null,l().createElement(b.Z,{msgId:"streetView.cyclomedia.username"})),l().createElement(c.FormControl,{type:"text",value:d,onChange:function(e){return f(e.target.value)}}),l().createElement(c.ControlLabel,null,l().createElement(b.Z,{msgId:"streetView.cyclomedia.password"})),l().createElement(c.FormControl,{type:"password",value:y,onChange:function(e){return m(e.target.value)}}),l().createElement("div",{className:"street-view-credentials-form-buttons"},l().createElement(c.Button,{disabled:!d||!y,onClick:function(){return r({username:d,password:y}),void s(!1)}},l().createElement(b.Z,{msgId:"streetView.cyclomedia.submit"})),(null==n?void 0:n.username)&&(null==n?void 0:n.password)&&l().createElement(c.Button,{onClick:function(){r({username:n.username,password:n.password}),s(!1)}},l().createElement(b.Z,{msgId:"cancel"}))))):l().createElement("div",{style:{textAlign:"right"}},l().createElement(ke,{style:{marginRight:10,border:"none",background:"none"},tooltipId:"streetView.cyclomedia.changeCredentials",onClick:function(){s(!0)}},l().createElement(c.Glyphicon,{glyph:"1-user-mod"})))};function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Re(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ge="Projection not available",Ue=function(e){var t,r;return null==e||null===(t=e.message)||void 0===t||null===(r=t.indexOf)||void 0===r?void 0:r.call(t,"code 401")},Ze=function(e){var t=e.initializing,r=e.initialized,n=e.StreetSmartApi,o=e.mapPointVisible;return r&&!o?l().createElement(be,{description:l().createElement(b.Z,{msgId:"streetView.cyclomedia.zoomIn"})}):r?l().createElement(be,null):t?l().createElement(be,{loading:!0,description:l().createElement(b.Z,{msgId:"streetView.cyclomedia.initializing"})}):n?null:l().createElement(be,{loading:!0,description:l().createElement(b.Z,{msgId:"streetView.cyclomedia.loadingAPI"})})};const Ye=function(e){var t,r,n,o,i=e.apiKey,s=e.style,u=e.location,d=void 0===u?{}:u,f=e.setPov,p=void 0===f?function(){}:f,y=e.setLocation,m=void 0===y?function(){}:y,g=e.mapPointVisible,h=e.providerSettings,w=void 0===h?{}:h,O=e.refreshLayer,E=void 0===O?function(){}:O,S=null!==(t=null==w?void 0:w.StreetSmartApiURL)&&void 0!==t?t:"https://streetsmart.cyclomedia.com/api/v23.7/StreetSmartApi.js",I=null!==(r=null==w?void 0:w.scripts)&&void 0!==r?r:'\n    <script type="text/javascript" src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"><\/script>\n    <script type="text/javascript" src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"><\/script>\n    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"><\/script>\n    ',j=null!==(n=null==w?void 0:w.initOptions)&&void 0!==n?n:{},P=null!==(o=null==w?void 0:w.srs)&&void 0!==o?o:"EPSG:4326",A=d.properties,T=(null!=A?A:{}).imageId,_=Fe((0,a.useState)(),2),C=_[0],N=_[1],D=Fe((0,a.useState)(),2),k=D[0],L=D[1],R=(0,a.useRef)(null),M=Fe((0,a.useState)(!1),2),x=M[0],F=M[1],V=Fe((0,a.useState)(!1),2),G=V[0],U=V[1],Z=Fe((0,a.useState)(1),2),Y=Z[0],z=Z[1],K=Fe((0,a.useState)(null),2),B=K[0],W=K[1],H=(0,Ce.getCredentials)(v),$=Fe((0,a.useState)(H),2),q=$[0],X=$[1],Q=Fe((0,a.useState)(!(null!=q&&q.username&&null!=q&&q.password)),2),J=Q[0],ee=Q[1],te=null!=q?q:{},re=te.username,ne=te.password;(0,a.useEffect)((function(){(0,Te.LZ)(P)||(console.error("Cyclomedia API: init: error: projection ".concat(P," is not available")),W(new Error(Ge)))}),[P]),(0,a.useEffect)((function(){return C&&re&&ne&&i&&(0,Te.LZ)(P)?(F(!0),C.init(xe({targetElement:k,username:re,password:ne,apiKey:i,loginOauth:!1,srs:P,locale:"en-us"},j)).then((function(){F(!1),U(!0),W(null)})).catch((function(e){F(!1),W(e),e&&console.error("Cyclomedia API: init: error: "+e)})),function(){try{var e;U(!1),null==C||null===(e=C.destroy)||void 0===e||e.call(C,{targetElement:k})}catch(e){console.error(e)}}):function(){}}),[C,re,ne,i,Y]),(0,a.useEffect)((function(){var e=Ue(B);G&&re&&ne&&!e&&G?((0,Ce.setCredentials)(v,q),E()):((0,Ce.getCredentials)(v)&&(0,Ce.setCredentials)(v,void 0),E())}),[G,re,ne,re,ne,B,G]);var oe=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).detail,r=null!=t?t:{},n=r.yaw,o=r.pitch;p({heading:n,pitch:o})},ie=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).detail,r=(null!=t?t:{}).recording;if(null!=r&&r.xyz&&null!=r&&r.id){var n,o,i=(0,_e.reproject)([null==r||null===(n=r.xyz)||void 0===n?void 0:n[0],null==r||null===(o=r.xyz)||void 0===o?void 0:o[1]],P,"EPSG:4326"),a=i.x,l=i.y;m({latLng:{lat:l,lng:a},properties:xe(xe({},r),{},{imageId:null==r?void 0:r.id})})}};(0,a.useEffect)((function(){return C&&T&&G?(function(e){var t={viewerType:C.ViewerType.PANORAMA,srs:P,panoramaViewer:{closable:!1,maximizable:!0,replace:!0,recordingsVisible:!0,navbarVisible:!0,timeTravelVisible:!0,measureTypeButtonVisible:!0,measureTypeButtonStart:!0,measureTypeButtonToggle:!0},obliqueViewer:{closable:!0,maximizable:!0,navbarVisible:!1}};return C.open(e,t)}(T).then((function(n){n&&n[0]&&(e=n[0],t=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return oe.apply(void 0,[e].concat(r))},r=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ie.apply(void 0,[e].concat(r))},e.on(C.Events.panoramaViewer.VIEW_CHANGE,t),e.on(C.Events.panoramaViewer.RECORDING_CLICK,r))})).catch((function(e){W(e),console.error("Cyclomedia API: open: error: "+e)})),function(){e&&t&&(e.off(C.Events.panoramaViewer.VIEW_CHANGE,t),e.off(C.Events.panoramaViewer.RECORDING_CLICK,r))}):function(){};var e,t,r}),[C,G,T]);var ae=C&&G&&T&&!J&&!B,le=x||!J&&!ae&&!B,ce=B&&!J&&!ae&&!x,se="<html>\n        <head>\n            <style>\n                html, body, #ms-street-smart-viewer-container {\n                    width: 100%;\n                    height: 100%;\n                    margin: 0;\n                    padding: 0;\n                    overflow: hidden;\n                }\n            </style>\n            ".concat(I,'\n            <script type="text/javascript" src="').concat(S,'" ><\/script>\n            <script>\n                    window.StreetSmartApi = StreetSmartApi\n            <\/script>\n            </head>\n            <body>\n                <div key="main" id="ms-street-smart-viewer-container" />\n\n            </body>\n        </html>');return l().createElement(l().Fragment,null,l().createElement(Le,{key:"credentials",showCredentialsForm:J,setShowCredentialsForm:ee,credentials:q,setCredentials:function(e){X(e)}}),le?l().createElement(Ze,{key:"empty-view",StreetSmartApi:C,style:s,initializing:x,initialized:G,mapPointVisible:g}):null,l().createElement("iframe",{key:"iframe",ref:R,onLoad:function(){var e,t;L(null===(e=R.current)||void 0===e?void 0:e.contentDocument.querySelector("#ms-street-smart-viewer-container")),N(null===(t=R.current)||void 0===t?void 0:t.contentWindow.StreetSmartApi)},style:xe(xe({},s),{},{display:ae?"block":"none"}),srcDoc:se}),l().createElement(c.Alert,{bsStyle:"danger",style:xe(xe({},s),{},{textAlign:"center",alignContent:"center",display:ce?"block":"none"}),key:"error"},l().createElement(b.Z,{msgId:"streetView.cyclomedia.errorOccurred"}),function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ue(e)>=0?l().createElement(b.Z,{msgId:"streetView.cyclomedia.errors.invalidCredentials",msgParams:o}):(null==e||null===(t=e.message)||void 0===t||null===(r=t.indexOf)||void 0===r?void 0:r.call(t,Ge))>=0?l().createElement(b.Z,{msgId:"streetView.cyclomedia.errors.projectionNotAvailable",msgParams:o}):null!==(n=null==e?void 0:e.message)&&void 0!==n?n:"Unknown error"}(B,{srs:P}),G?l().createElement("div",null,l().createElement(c.Button,{onClick:function(){W(null);try{z(Y+1)}catch(e){console.error(e)}}},l().createElement(b.Z,{msgId:"streetView.cyclomedia.reloadAPI"}))):null))};var ze=r(800827),Ke=["enabled","apiLoaded"];function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Be.apply(this,arguments)}var We=(0,g.P1)(ze.G3,(function(e){return e<1})),He=(0,s.connect)((0,g.zB)({apiLoaded:A(m.CYCLOMEDIA),location:T,apiKey:R,mapPointVisible:We}),{setLocation:de,setPov:fe,refreshLayer:function(){return e={_v_:Date.now()},{type:ce,updates:e};var e}})((function(e){var t=e.enabled,r=e.apiLoaded,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ke),o=(0,a.useMemo)((function(){return J()}),[r]);return t?l().createElement(Ye,Be({api:o},n)):null}));function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qe={google:Ae,cyclomedia:He};const Je=(0,s.connect)((0,g.zB)({enabled:j}),{onClose:function(){return ue()}})((function(e){var t,r,n=e.enabled,o=e.onClose,i=void 0===o?function(){}:o,s=e.provider,u=e.panelSize,d=e.providerSettings,f=(t=(0,a.useState)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=$e(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=$e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==$e(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({width:400,height:300},u)),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xe(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],y=f[1],m=(0,a.useMemo)((function(){return Qe[s]}),[s]);return n?l().createElement(h.Z,{id:"street-view-dialog",bodyClassName:"street-view-window-body",draggable:!0,style:{zIndex:1e4,position:"absolute",left:"17%",top:"50px",margin:0,width:p.width}},l().createElement("span",{role:"header",style:{display:"flex",justifyContent:"space-between"}},l().createElement("span",null,l().createElement(b.Z,{msgId:"streetView.title"})),l().createElement("button",{onClick:function(){return i()},className:"close"},l().createElement(c.Glyphicon,{glyph:"1-close"}))),l().createElement("div",{role:"body",style:{height:p.height}},l().createElement(w.Resizable,{width:p.width,height:p.height,onResize:function(e,t){var r=t.size;y(r)}},l().createElement("div",{style:{display:"flex",flexDirection:"column",width:p.width,height:p.height}},m?l().createElement(m,{providerSettings:d,enabled:n,size:p,style:{flex:1,margin:10,height:"calc(100% - ".concat(20,"px)"),width:"calc(100% - ".concat(20,"px)")}}):l().createElement(c.Alert,{bsStyle:"danger"},"Unknown provider ",s))))):null}));function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t,r){var n;return n=function(e,t){if("object"!=et(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==et(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ot={},it=r(49977),at=r.n(it),lt=r(460604),ct=r(801550),st=r(921914),ut=r(307877),dt=r(998869);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==ft(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(e){return function(e){if(Array.isArray(e))return vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gt=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(x.kM,x.At,x.dc).filter((function(e){return e.control===d})).filter((function(){return j(n())})).filter((function(){return(0,ut.yg)(n())})).switchMap((function(){return at().Observable.of((0,st.aN)(),(0,st.TM)()).merge(e.ofType(x.kM,x.At,x.dc).filter((function(e){return e.control===d})).take(1).filter((function(){return!j(n())})).filter((function(){return!(0,ut.yg)(n())})).mapTo((0,st.TM)()).takeUntil(e.ofType(x.l)))}))},bt=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(x.kM,x.At,x.dc).filter((function(e){return e.control===d})).filter((function(){return j(n())})).switchMap((function(){return at().Observable.from([(0,ct.H0)("click",d)].concat(mt(M(n())?[(0,lt.W)(y,f,"overlay",yt({id:y,name:y,visibility:!0},(t=n(),L(t))))]:[]),[(0,lt.W)(p,f,"overlay",{id:p,type:"vector",name:p,visibility:!0})])).concat(e.ofType(x.kM,x.At,x.dc).filter((function(e){return e.control===d})).filter((function(){return!j(n())})).merge(e.ofType(x.l)).take(1).switchMap((function(){return at().Observable.from([(0,ct.$X)("click",d)].concat(mt(M(n())?[(0,lt.fU)({id:y,owner:f})]:[]),[(0,lt.fU)({id:p,owner:f})]))})));var t}))},ht=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(ct.TR).filter((function(){return j(n())})).filter((function(){return e=n(),A(N(e))(e);var e})).switchMap((function(e){var t,r=e.point,o=N(n()),i=null===(t=te[o])||void 0===t?void 0:t.getLocation;return i?at().Observable.defer((function(){return i(r)})).map(de).catch((function(e){return"ZERO_RESULTS"===e.code?at().Observable.of((0,F.um)({title:"streetView.title",message:"streetView.messages.noDataForPosition"})):(console.error(e),at().Observable.of((0,F.vU)({title:"streetView.title",message:"streetView.messages.unknownError"})))})):at().Observable.of((0,F.vU)({title:"streetView.title",message:"streetView.messages.providerNotSupported"}))}))},wt=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(oe,ie).switchMap((function(){var e=n(),t=T(e),r=_(e);return t?at().Observable.of(function(e,t){var r,n,o=null==e?void 0:e.latLng,i=o.lat;return{type:"Feature",geometry:{type:"Point",coordinates:[o.lng,i],crs:"EPSG:4326"},style:[{iconAnchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:1,size:100,symbolUrl:"data:image/svg+xml;charset=utf-8,"+encodeURIComponent((r={rotation:null==t?void 0:t.heading},n=r.rotation,'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" xml:space="preserve">\n\t\t<g transform="translate(50,50) scale(2)">\n            <circle style="stroke: #a5ff91; stroke-width: 2; fill: #5bA640; fill-opacity:0.6; opacity: 1;" vector-effect="non-scaling-stroke" cx="0" cy="0" r="13"/>\n        </g>\n        <g transform="translate(50,50) scale(2) rotate('.concat(void 0===n?0:n,')">\n            <polygon style="stroke: #a5ff91; stroke-width: 2; fill: #228D4F; fill-opacity:1; opacity: 1;" vector-effect="non-scaling-stroke" points="0,-12 5,-5 0,-8 -5,-5 "/>\n        </g>\n        <g transform="translate(50,50) translate(0,-5) scale(1.5)">\n            <circle style="stroke: #3100aa; stroke-width: 2; fill: #037dff; fill-opacity:1; opacity: 1;" vector-effect="non-scaling-stroke" cx="0" cy="0" r="3"/>\n        </g>\n        <g transform="translate(50,50) scale(2) translate(5,5) rotate(180)">\n            <path d="M0,0 a1,1 0 0,0 10,0" style="stroke: #3100aa; stroke-width: 2; fill: #037dff; fill-opacity:1; opacity: 1;" vector-effect="non-scaling-stroke"/>\n        </g>\n</svg>'))),shape:"triangle",id:"c65cadc0-9b46-11ea-a138-dd5f1faf9a0d",highlight:!1,weight:4}]}}(t,r)).map((function(e){var t=function(e){var t,r,n;return null===(r=(null!==(t=(0,S.K)(e))&&void 0!==t?t:[]).filter((function(e){return e.id===p})))||void 0===r||null===(n=r[0])||void 0===n?void 0:n.options}(n());return(0,lt.W)(p,f,"overlay",yt(yt({},t),{},{features:[e]}))})):at().Observable.empty()})).merge(e.ofType(ce).switchMap((function(e){var t,r,o,i,a=e.updates,l=void 0===a?{}:a,c=(t=n(),null===(o=(null!==(r=(0,S.K)(t))&&void 0!==r?r:[]).filter((function(e){return e.id===y})))||void 0===o||null===(i=o[0])||void 0===i?void 0:i.options);return at().Observable.of((0,lt.W)(y,f,"overlay",yt(yt({},c),l)))})))},Ot=function(e,t){return(0,dt.U)(e,t,d)},Et=r(893379),St=r.n(Et),It=r(68778);St()(It.Z,{insert:"head",singleton:!1}),It.Z.locals;var jt=(0,s.connect)((function(){return{}}),{onMount:function(e){return{type:ae,configuration:e}},onUnmount:function(){return function(e,t){e({type:le}),j(t())&&e((0,x.Xg)(d,"enabled",!1))}}})((function(e){var t=e.onMount,r=e.onUnmount,n=e.apiKey,o=e.useDataLayer,i=e.dataLayerConfig,c=e.panoramaOptions,s=e.provider,u=void 0===s?"google":s,d=e.providerSettings,f=e.panelSize;return(0,a.useEffect)((function(){return t({apiKey:n,useDataLayer:o,dataLayerConfig:i,panoramaOptions:c,provider:u,providerSettings:d}),function(){r()}}),[n,o,i,JSON.stringify(null!=c?c:{})]),l().createElement(Je,{provider:u,providerSettings:d,panelSize:f})}));const Pt=(0,u.rx)("StreetView",{options:{disablePluginIf:"{state('mapType') === 'leaflet' || state('mapType') === 'cesium'}"},epics:i,reducers:{streetView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(null==t?void 0:t.type){case ae:return rt(rt({},e),{},{configuration:null==t?void 0:t.configuration});case oe:var r;return rt(rt({},e),{},{location:null!==(r=null==t?void 0:t.location)&&void 0!==r?r:e.location});case ie:var n;return rt(rt({},e),{},{pov:null!==(n=null==t?void 0:t.pov)&&void 0!==n?n:e.pov});case re:return rt(rt({},e),{},{apiLoading:null==t?void 0:t.loading});case ne:return rt(rt({},e),{},{apiLoaded:nt({},t.provider,!0)});case le:return ot;default:return e}}},component:jt,containers:{BurgerMenu:{position:40,priority:2,doNotHide:!0,name:d,text:l().createElement(b.Z,{msgId:"streetView.title"}),tooltip:"streetView.tooltip",icon:l().createElement(c.Glyphicon,{glyph:"road"}),action:function(){return ue()}},SidebarMenu:{position:40,priority:1,doNotHide:!0,name:d,text:l().createElement(b.Z,{msgId:"streetView.title"}),tooltip:"streetView.tooltip",icon:l().createElement(c.Glyphicon,{glyph:"road"}),action:function(){return ue()},selector:function(e){return{bsStyle:j(e)?"primary":"tray",active:j(e)||!1}}}}})},569893:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(227361),o=r.n(n),i=function(e){return o()(e,"additionallayers")||[]}},68778:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(923645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,"/* css for react-resizable */\n.street-view-window-body {\n  /* override the standard justify */\n}\n.street-view-window-body .react-resizable-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  bottom: 0;\n  right: 0;\n  background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+');\n  background-position: bottom right;\n  padding: 0 3px 3px 0;\n  background-repeat: no-repeat;\n  background-origin: content-box;\n  box-sizing: border-box;\n  cursor: se-resize;\n}\n.street-view-window-body .react-resizable {\n  position: relative;\n}\n.street-view-window-body .empty-state-container .empty-state-main-view .empty-state-description {\n  text-align: center;\n}\n.street-view-window-body .street-view-api-loader {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n}\n.street-view-window-body .empty-street-view {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n.street-view-window-body .empty-street-view div {\n  max-width: 350px;\n}\n.street-view-window-body .empty-street-view .empty-state-image .glyphicon {\n  margin-left: -14% !important;\n}\n.street-view-window-body .street-view-credentials h5 {\n  text-align: center;\n  font-weight: bold;\n  margin: 25px auto;\n}\n.street-view-window-body .street-view-credentials form {\n  margin: 0 30px;\n}\n.street-view-window-body .street-view-credentials form .street-view-credentials-form-buttons {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n.street-view-window-body iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n",""]);const i=o}}]);