"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[9412],{447430:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(605556),o=r.n(n),i=r(273517),l=r.n(i),a=r(750042),c=r.n(a);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function y(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}r.e(4434).then(r.bind(r,664434));var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=d(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.props.loading?l().createElement("div",{className:this.props.className,id:this.props.id},l().createElement(c(),{noFadeIn:!0,overrideSpinnerClassName:"spinner",spinnerName:this.props.spinner})):null}}])&&s(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(l().Component);y(b,"propTypes",{id:o().string,loading:o().bool,className:o().string,spinner:o().string}),y(b,"defaultProps",{id:"mapstore-globalspinner",loading:!1,className:"ms2-loading",spinner:"circle"});const v=b},188433:(e,t,r)=>{r.r(t),r.d(t,{default:()=>xe});var n=r(605556),o=r.n(n),i=r(273517),l=r.n(i),a=r(292935),c=r(811668),u=r(916589),s=r(801081),f=r(962193),d=r.n(f),p=r(71665),y=r(8571),m=r(697950),b=r(563864);const v=(0,u.branch)(function(e){return e.selectionActive},(0,u.compose)((0,u.withProps)(function(e){var t=e.className;return{className:"".concat(t," selection-active")}}),(0,u.withHandlers)({getWidgetClass:function(e){var t=e.getWidgetClass,r=void 0===t?function(){}:t,n=e.isWidgetSelectable,o=void 0===n?function(){return!0}:n;return function(e){return r(e)?r(e)+(o(e)?void 0:" disabled"):o(e)?void 0:" disabled"}},onWidgetClick:function(e){var t=e.onWidgetSelected,r=void 0===t?function(){}:t,n=e.isWidgetSelectable,o=void 0===n?function(){return!0}:n;return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o(e)?r.apply(void 0,[e].concat(n)):null}}})));var g=r(639996),h=r(8117),w=r(694838),O=r(132672);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){C(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C(e,t,r){return(t=function(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T=(0,w.A)(h.Dr),D=function(e){var t=e.handleSelect,r=e.isSelected,n=e.id,o=e.color,a=e.name,c=e.onRemove,u=e.onMove,s=e.canDelete,f=e.onConfigure,d=e.canMoveLeft,p=e.canMoveRight,m=e.canEdit,b=x((0,i.useState)({left:0,bottom:0,right:0}),2),v=b[0],g=b[1],w=(0,i.useRef)(null);return l().createElement(h.ms,{dropup:!0,bsStyle:"default",id:n,className:"".concat(r?"is-selected ":"","ms-layout-view"),style:{borderBottom:"2px solid ".concat(o)}},l().createElement(h.$n,{onClick:function(){return t(n)},bsStyle:"default"},a),m&&l().createElement(h.ms.Toggle,{onClick:function(){if(t(n),w.current){var e=w.current.getBoundingClientRect();window.innerWidth-e.right<200?g({right:window.innerWidth-e.right-4,bottom:window.innerHeight-e.top+10,left:"auto"}):g({left:e.left-4,bottom:window.innerHeight-e.top+10,right:"auto"})}},noCaret:!0},l().createElement("div",{ref:w},l().createElement(h.e6,{glyph:"option-vertical"}))),l().createElement(h.ms.Menu,{className:"_fixed",style:A({},v)},l().createElement(T,{confirmTitle:l().createElement(y.A,{msgId:"dashboard.view.removeConfirmTitle"}),confirmContent:l().createElement(y.A,{msgId:"dashboard.view.removeConfirmContent"}),onClick:function(){return c(n)},disabled:!s},l().createElement(h.e6,{glyph:"trash"}),l().createElement(y.A,{msgId:"dashboard.view.delete"})),l().createElement(h.Dr,{onClick:function(){f()}},l().createElement(h.e6,{glyph:"cog"}),l().createElement(y.A,{msgId:"dashboard.view.configure"})),l().createElement(h.Dr,{onClick:function(){u(n,"right")},disabled:!p},l().createElement(h.e6,{glyph:"arrow-right"}),l().createElement(y.A,{msgId:"dashboard.view.moveRight"})),l().createElement(h.Dr,{onClick:function(){u(n,"left")},disabled:!d},l().createElement(h.e6,{glyph:"arrow-left"}),l().createElement(y.A,{msgId:"dashboard.view.moveLeft"}))))};const W=function(e){var t=e.layouts,r=void 0===t?[]:t,n=e.selectedLayoutId,o=e.onSelect,a=e.onAdd,c=e.onRemove,u=e.onMove,s=e.onConfigure,f=e.canEdit,d=function(e){null==o||o(e)},p=function(e){var t=e.data,r=(0,i.useRef)(null),n=j((0,i.useState)(!0),2),o=n[0],l=n[1],a=j((0,i.useState)(!0),2),c=a[0],u=a[1],s=j((0,i.useState)(!1),2),f=s[0],d=s[1];return(0,i.useEffect)(function(){var e=function(){var e=r.current;if(e){var t=e.scrollLeft,n=e.scrollWidth,o=e.clientWidth;d(n>o+1),l(t<=0),u(t+o>=n-1)}},t=r.current;return t&&(e(),t.addEventListener("scroll",e),window.addEventListener("resize",e)),function(){null==t||t.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[t]),[r,f,o,c,function(e){var t=r.current;if(t){var n=.8*t.clientWidth;t.scrollBy({left:"left"===e?-n:n,behavior:"smooth"})}}]}({data:r}),y=x(p,5),m=y[0],b=y[1],v=y[2],g=y[3],w=y[4];return l().createElement(O.A,{gap:"xs",centerChildrenVertically:!0,className:"view-switcher-container"},f&&l().createElement(h.$n,{onClick:a,className:"square-button-md _margin-l-xs _margin-tb-xs",title:"Add a layout view to the dashboard"},l().createElement(h.e6,{glyph:"plus"})),l().createElement(O.A,{centerChildrenVertically:!0,ref:m,className:"_overflow-auto _fill view-switcher-tabs"},r.map(function(e,t){var o=e.id||t+1;return l().createElement(D,{key:o,id:o,name:e.name,color:e.color,handleSelect:d,isSelected:n===o,onRemove:c,onMove:u,onConfigure:s,canDelete:r.length>1,canMoveRight:t!==r.length-1,canMoveLeft:0!==t,canEdit:f})})),b&&l().createElement(O.A,{gap:"xs",centerChildrenVertically:!0,className:"view-scroll-buttons"},l().createElement(h.$n,{className:"square-button-md",bsStyle:"primary",onClick:function(){return w("left")},disabled:v,title:"Scroll left"},l().createElement(h.e6,{glyph:"chevron-left"})),l().createElement(h.$n,{className:"square-button-md",bsStyle:"primary",onClick:function(){return w("right")},disabled:g,title:"Scroll right"},l().createElement(h.e6,{glyph:"chevron-right"}))))};var k=r(541033),_=r.n(k),L=r(549112),N=r(711520),R=r(7235),M=r(406250);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach(function(t){$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $(e,t,r){return(t=function(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const q=function(e){var t,r,n=e.active,o=e.onToggle,a=e.name,c=e.color,u=e.onSave,s=(t=(0,i.useState)({name:null,color:null}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],d=s[1];return(0,i.useEffect)(function(){d({name:a,color:c})},[a,c]),n&&l().createElement(M.A,null,l().createElement(N.A,{id:"mapstore-export-data-results",draggable:!1,containerClassName:"configure-view-dialog-container",modal:!0},l().createElement("span",{role:"header"},l().createElement("span",{className:"modal-title about-panel-title"},l().createElement(y.A,{msgId:"dashboard.view.configure"})),l().createElement("button",{onClick:function(){return o()},className:"settings-panel-close close"},l().createElement(h.e6,{glyph:"1-close"}))),l().createElement("div",{role:"body",className:"_padding-lg"},l().createElement(h.gE,{className:"_padding-b-sm"},l().createElement(h.mq,null,l().createElement(y.A,{msgId:"dashboard.view.name"})),l().createElement(h.MJ,{type:"text",value:f.name,onChange:function(e){var t=(e.target||{}).value;d(function(e){return z(z({},e),{},{name:t})})}})),l().createElement(h.gE,{className:"ms-flex-box _flex _flex-gap-sm _flex-center-v"},l().createElement(h.mq,null,l().createElement(y.A,{msgId:"dashboard.view.color"})),l().createElement("div",{className:"dashboard-color-picker"},l().createElement(R.A,{format:"rgb",color:f.color,onChangeColor:function(e){return e&&d(function(t){return z(z({},t),{},{color:e})})}})))),l().createElement("div",{role:"footer"},l().createElement(h.$n,{bsStyle:"default",onClick:function(){return o()}},"Cancel"),l().createElement(h.$n,{bsStyle:"primary",onClick:function(){return u(f)}},"Save"))))};function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}var Z=["id","name","color","order"];function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(null,arguments)}function X(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach(function(t){K(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function K(e,t,r){return(t=function(e){var t=function(e){if("object"!=U(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach(function(t){re(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function re(e,t,r){return(t=function(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ne=(0,u.compose)(u.pure,(0,u.defaultProps)({breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1},minLayoutWidth:480}),(0,m.Qy)({overrideWidthProvider:!0}),(0,u.withProps)(function(e){var t=e.width;return{width:t<=e.minLayoutWidth?t-18:t,toolsOptions:{showMaximize:!0}}}),(0,u.withProps)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height,n=e.maximized,o=e.minLayoutWidth,i=e.cols,l=null!=n&&n.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:99}:{},a=null!=n&&n.widget?{width:t,useDefaultWidthProvider:!1,rowHeight:r-50,breakpoints:{xxs:0},cols:{xxs:1}}:{};return te({className:"on-map",breakpoints:{md:o,xxs:0},cols:i||{md:6,xxs:1},style:te({position:"absolute",zIndex:50},l)},a)}),(0,u.withStateHandlers)(function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),{viewConfigurationActive:!1}},{setViewConfigurationActive:function(){return function(e){return{viewConfigurationActive:e}}}}),(0,b.A)(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layouts,t=void 0===e?[]:e;return!t||0===t.length},function(e){var t=e.loading,r=e.layouts,n=void 0===r?[]:r,o=e.onLayoutViewReplace,i=[{id:_()(),name:"Main view",color:null}];return n&&0!==n.length||o(i),{glyph:"dashboard",title:t?l().createElement(y.A,{msgId:"loading"}):l().createElement(y.A,{msgId:"dashboard.emptyTitle"})}}),(0,u.defaultProps)({isWidgetSelectable:function(){return!0}}),(0,u.withHandlers)({onLayoutChange:function(e){return function(t,r){var n=(Array.isArray(e.layouts)?e.layouts:[e.layouts]).map(function(t){return null!=t&&t.id&&(null==t?void 0:t.id)===e.selectedLayoutId?te(te(te({},t),r),{},{id:t.id,name:t.name,color:t.color}):t});return e.onLayoutChange&&e.onLayoutChange(t,n),{layout:t,allLayouts:n}}}}),v)(function(e){var t=e.layouts,r=void 0===t?[]:t,n=e.onLayoutViewReplace,o=e.selectedLayoutId,i=e.onLayoutViewSelected,a=e.viewConfigurationActive,c=e.setViewConfigurationActive,u=e.widgets,s=void 0===u?[]:u,f=e.onWidgetsReplace,d=e.canEdit,p=Array.isArray(r)?r.find(function(e){return(null==e?void 0:e.id)===o})||{}:r,y=p.id,m=p.name,b=p.color,v=(p.order,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(p,Z)),h=Q({},e);e.widgets&&(h.widgets=e.widgets.filter(function(e){return e.layoutId===o}));var w=Array.isArray(r)?r:[r];return l().createElement(O.A,{column:!0,classNames:["_relative","_fill"]},l().createElement(O.A.Fill,{classNames:["_relative","_overflow-auto"]},l().createElement(g.A,J({},h,{layouts:v}))),(d||w.length>1)&&l().createElement(W,{layouts:w,selectedLayoutId:o,onSelect:function(e){i(e)},onAdd:function(){var e={id:_()(),name:(0,L.iB)(r),color:null,md:[],xxs:[]},t=[].concat(X(r),[e]);null==n||n(t),i(e.id),c(!0)},onRemove:function(e){var t,o=r.filter(function(t){return t.id!==e});n(o),i(null==o||null===(t=o[o.length-1])||void 0===t?void 0:t.id);var l=s.filter(function(t){return t.layoutId!==e});f(l)},onMove:function(e,t){var o=r.findIndex(function(t){return t.id===e});if(-1!==o){var i=X(r);if("left"===t&&o>0){var l=[i[o],i[o-1]];i[o-1]=l[0],i[o]=l[1]}else if("right"===t&&o<i.length-1){var a=[i[o+1],i[o]];i[o]=a[0],i[o+1]=a[1]}n(i)}},onConfigure:function(){return c(!0)},canEdit:d}),l().createElement(q,{active:a,onToggle:function(){return c(!1)},onSave:function(e){var t=r.map(function(t){return t.id===y?Q(Q({},t),{},{name:e.name,color:e.color}):t});n(t),c(!1)},name:m,color:b}))});var oe=r(795153),ie=r(589769),le=r(286447),ae=r(344297),ce=r(737704),ue=r(102780),se=r(635666),fe=r(779956),de=r(447430),pe=r(393149),ye=r(891543);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach(function(t){Se(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ge.apply(null,arguments)}function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ee(n.key),n)}}function we(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(we=function(){return!!e})()}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Se(e,t,r){return(t=Ee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e){var t=function(e){if("object"!=me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==me(t)?t:t+""}var Pe=(0,u.compose)((0,c.connect)((0,s.Mz)(ie.N9,ce.mT,ce.Cs,ce.lo,ce.Zh,function(e){return(0,ce.bz)(e)},ce.Re,ie.m4,ie.Nq,ie.Xt,le.Bv,ae.f8,ae.RU,ce.Og,le.Pd,ie.aH,ce.jT,ie.DJ,function(e,t,r,n,o,i,l,a,c,u,s,f,p,y,m,b,v,g){return{resource:e,loading:c,canEdit:g,layouts:r,dependencies:n,selectionActive:o,editingWidget:i,widgets:!d()(y)&&Array.isArray(y.widget)&&y.widget.some(function(e){return e.layoutId===v})?t.filter(function(e){return y.widget.some(function(t){return t.id===e.id})}):t,groups:l,showGroupColor:a,language:f?s:null,env:p,maximized:!d()(y)&&(Array.isArray(y.widget)?y.widget.every(function(e){return e.layoutId!==v}):y.widget.layoutId!==v)?{}:y,currentLocale:m,isDashboardOpened:b,selectedLayoutId:v}}),{editWidget:p.Pd,updateWidgetProperty:p.Dr,exportCSV:p.HX,deleteWidget:p.uv,onWidgetSelected:p.Xj,onLayoutChange:p.ZJ,toggleMaximize:p.th,onLayoutViewReplace:p.WA,onWidgetsReplace:p.ID,onLayoutViewSelected:p.q4}),(0,u.withProps)(function(){return{style:{height:"100%",overflow:"auto"}}}),(0,u.withHandlers)({isWidgetSelectable:function(e){var t=e.editingWidget;return function(e){return("map"===e.widgetType||"table"===e.widgetType&&(0,L.Ls)(t,e)&&!e.mapSync)&&e.id!==t.id}}}))(ne),Ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=Oe(t),function(e,t){if(t&&("object"==me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,we()?Reflect.construct(t,r||[],Oe(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e;(null===(e=this.props)||void 0===e?void 0:e.did)&&(this.oldDocumentTitle=document.title)}},{key:"componentDidUpdate",value:function(){var e,t=null===(e=this.props)||void 0===e?void 0:e.did;this.props.dashboardTitle&&t&&(document.title=this.props.dashboardTitle)}},{key:"componentWillUnmount",value:function(){var e;(null===(e=this.props)||void 0===e?void 0:e.did)&&(document.title=this.oldDocumentTitle)}},{key:"render",value:function(){return this.props.enabled?l().createElement(Pe,{items:this.props.items,width:this.props.width,height:this.props.height,rowHeight:this.props.rowHeight,cols:this.props.cols,minLayoutWidth:this.props.minLayoutWidth,enableZoomInTblWidget:this.props.enableZoomInTblWidget,widgetOpts:this.props.widgetOpts,isDashboardWidget:!0}):null}}])&&he(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(l().Component);Se(Ae,"propTypes",{items:o().array,enabled:o().bool,rowHeight:o().number,cols:o().object,minLayoutWidth:o().number,widgetOpts:o().object,enableZoomInTblWidget:o().bool,dashboardTitle:o().string}),Se(Ae,"defaultProps",{enabled:!0,minLayoutWidth:480,enableZoomInTblWidget:!0});var Ce=function(e,t){var r=t.loadedPlugins,n=(0,ye.A)({items:e.items,loadedPlugins:r}).filter(function(e){return"menu"===e.target});return l().createElement(Ae,ge({},e,{items:n}))};Ce.contextTypes={loadedPlugins:o().object};const xe=(0,pe.i1)("Dashboard",{component:(0,c.connect)(function(e){return{dashboardTitle:(0,ie.gm)(e)}})((0,a.A)(Ce)),reducers:{dashboard:ue.A,widgets:oe.A},containers:{SidebarMenu:{name:"Dashboard-spinner",alwaysVisible:!0,position:2e3,tool:(0,c.connect)(function(e){return{loading:(0,ie.Nq)(e)}})(de.A)}},epics:ve(ve({},se.Ay),fe.Ay)})}}]);