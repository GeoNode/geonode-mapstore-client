(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1604],{32425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(45697),o=r.n(n),a=r(67294),c=r.n(a);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return e>100?"full":e>40?"medium":"small"},f=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,a=e.hidden;return c().createElement("div",{className:o,style:i({width:t,height:t,overflow:"hidden"},n)},!a&&c().createElement("div",{className:"mapstore-".concat(s(t),"-size-loader")}))};f.propTypes={size:o().number,className:o().string,style:o().object};const d=f},93451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(86638),o=r(45697),a=r.n(o),c=r(84596),l=r.n(c),i=r(1469),u=r.n(i),s=r(14293),f=r.n(s),d=r(47037),p=r.n(d),m=r(2479),y=["messages"];function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(u()(t))return t.map((function(o){var a=(0,n.S$)(e,o[r]||p()(o)&&o||"");return b(b({},o),{},h({},r,f()(a)?t:a))}));var o=(0,n.S$)(e,t);return f()(o)?t:o},E=function(e,t,r){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return b(b({},n),{},h({},o,e[o]&&O(t,e[o],r)))}};const w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,m.compose)((0,m.getContext)({messages:a().object}),(0,m.mapProps)((function(r){var n=r.messages,o=g(r,y);return b(b({},o),l()(e).reduce(E(o,n,t),{}))})))}},97111:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),o=r.n(n),a=r(45697),c=r.n(a),l=r(23279),i=r.n(l);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const p=function(e,t){return function(r){function a(a){var c,l,u,p=(0,n.useRef)(),m=(l=(0,n.useState)(a[t]),u=2,function(e){if(Array.isArray(e))return e}(l)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(l)throw o}}return a}}(l,u)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(l,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=m[0],g=m[1],v=(0,n.useRef)();v.current=y,(0,n.useEffect)((function(){v.current!==a[t]&&g(a[t])}),[a[t]]),(0,n.useEffect)((function(){return p.current=i()((function(t){var r=t.newProps,n=t.newValue;r[e](n)}),a.debounceTime),function(){p.current.cancel()}}),[a.debounceTime]);var b=s(s({},a),{},(f(c={},t,y),f(c,e,(function(e){g(e),p.current&&(p.current.cancel(),p.current({newProps:a,newValue:e}))})),c));return o().createElement(r,b)}return a.propTypes={debounceTime:c().number},a.defaultProps={debounceTime:300},a.displayName=r.displayName+"WithDebounceOnCallback",a}}},55105:(e,t,r)=>{"use strict";r.d(t,{Nr:()=>f,ic:()=>d,Jz:()=>m,VM:()=>y,CF:()=>g});var n=r(91175),o=r.n(n),a=r(827),c=r(52259);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return e.maplayout&&e.maplayout.layout||{}},f=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){return i(i({},e),{},u({},t,r[t]))}),{})||{}},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=s(e),n=!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})));return n},m=function(e){return p(e,[{key:"right",value:658}])},y=function(e){return p(e,[{key:"bottom",value:30,type:"not"}])},g=function(e){var t=(0,a.Od)(e),r=f(e);return r&&t&&t.size&&{left:(0,c.parseLayoutValue)(r.left,t.size.width),bottom:(0,c.parseLayoutValue)(r.bottom,t.size.height),right:(0,c.parseLayoutValue)(r.right,t.size.width),top:(0,c.parseLayoutValue)(r.top,t.size.height)}}},85428:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),o=r.n(n),a=r(45697),c=r.n(a),l=["href","readOnly","children"];function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function u(e){var t=e.href,r=e.readOnly,n=e.children,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return r?n:o().createElement("a",i({href:t},a),n)}u.propTypes={href:c().string,readOnly:c().bool.isRequired,children:c().any},u.defaultProps={href:"",readOnly:!1};const s=u},60330:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(85428)},34065:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),o=r.n(n),a=r(45697),c=r.n(a),l=r(77593),i=r(60330),u=["resource","readOnly","formatHref"];function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function f(e){var t,r,n=e.resource,a=e.readOnly,c=e.formatHref,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,u);return o().createElement("p",s({className:"card-text gn-card-user"},f),(null===(t=n.owner)||void 0===t?void 0:t.avatar)&&o().createElement("img",{src:n.owner.avatar,alt:(0,l.vW)(n.owner),className:"gn-card-author-image"}),o().createElement(i.Z,{readOnly:a,href:c({query:{"filter{owner.username.in}":null===(r=n.owner)||void 0===r?void 0:r.username}})},n.owner&&(0,l.vW)(n.owner)))}f.propTypes={resource:c().object,readOnly:c().bool,formatHref:c().func,props:c().any},f.defaultProps={resource:{},readOnly:!1,formatHref:function(){return"#"}};const d=f},39399:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67294),o=r.n(n),a=r(57588);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}a.Dropdown.Item=a.MenuItem,a.Dropdown.Divider=function(e){return o().createElement(a.MenuItem,c({},e,{divider:!0}))};const l=a.Dropdown},36693:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(39399)},69582:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(67294),o=r.n(n),a=r(5346),c=r(97842),l=r(36693),i=r(93473),u=r(51605),s=r(35721),f=r(89239),d=r(60330),p=r(34065);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=(0,n.forwardRef)((function(e,t){var r,y,g=e.data,v=e.active,b=e.options,h=e.formatHref,O=e.getTypesInfo,E=e.layoutCardsStyle,w=e.buildHrefByTemplate,j=e.readOnly,P=e.actions,Z=e.onAction,S=e.className,N=e.loading,C=e.featured,k=e.onClick,I=g,T=O(),x=(T[I.subtype]||T[I.resource_type]||{}).icon,A=I&&(T[I.subtype]||T[I.resource_type])||{},D=A.formatDetailUrl,z=void 0===D?function(e){return null==e?void 0:e.detail_url}:D,_=A.canPreviewed,H=(null==I?void 0:I.pk)&&z(I),R=(null==I?void 0:I.pk)&&_&&_(I),M=(null==I?void 0:I.pk)&&(0,s.J7)(I),L=(r=(0,n.useState)(!1),y=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(l)throw o}}return a}}(r,y)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(r,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),q=L[0],V=L[1],F="list"===E?"card-img-left":"card-img-top";return o().createElement("div",{ref:t,onClick:function(){k(g)},className:"gn-resource-card".concat(v?" active":"").concat(j?" read-only":""," gn-card-type-").concat(E," ").concat("list"===E?"rounded-0":"").concat(S?" ".concat(S):"")},!j&&o().createElement("a",{className:"gn-resource-card-link",href:h({pathname:"/detail/".concat(I.resource_type,"/").concat(I.pk)})}),o().createElement("div",{className:"card-resource-".concat(E)},q?o().createElement("div",{className:"".concat(F," card-img-placeholder")}):o().createElement("img",{className:F,src:I.thumbnail_url,onError:function(){return V(!0)}}),o().createElement("div",{className:"gn-resource-card-body-wrapper"},o().createElement("div",{className:"card-body"},o().createElement("div",{className:"card-title"},x&&!N&&o().createElement(o().Fragment,null,o().createElement(d.Z,{readOnly:j,href:h({query:{"filter{resource_type.in}":I.resource_type}})},o().createElement(c.Z,{name:x}))),N&&o().createElement(u.Z,null),o().createElement(d.Z,{className:C?"gn-featured-card-title":"gn-card-title",readOnly:j,href:h({pathname:"/detail/".concat(I.resource_type,"/").concat(I.pk)})},I.title)),o().createElement(f.Z,{resource:I}),o().createElement("p",{className:"card-text gn-card-description"},I.raw_abstract?I.raw_abstract:"...")),o().createElement("div",{className:"gn-footer-wrapper"},o().createElement("div",{className:"gn-card-footer",style:{padding:b&&0===b.length?"0 0.25rem 0 0.5rem":"0 0.5rem"}},o().createElement(p.Z,{resource:I,readOnly:j,formatHref:h}),o().createElement("div",{className:"gn-card-actions"},!j&&(H||M)&&o().createElement("div",{className:"".concat(b&&0===b.length?"gn-card-view-editor-right":"gn-card-view-editor")},o().createElement(i.Z,{variant:"primary",href:R?H:M,rel:"noopener noreferrer"},o().createElement(a.Z,{msgId:"gnhome.view"}))),!j&&b&&b.length>0&&o().createElement(l.Z,{className:"gn-card-options",pullRight:!0},o().createElement(l.Z.Toggle,{id:"gn-card-options-".concat(I.pk),variant:"default",size:"sm",noCaret:!0},o().createElement(c.Z,{name:"ellipsis-h"})),o().createElement(l.Z.Menu,{className:"gn-card-dropdown"},b.map((function(e){return"button"===e.type&&P[e.action]?o().createElement(l.Z.Item,{key:e.action,onClick:function(){return Z(P[e.action],[I])}},o().createElement(c.Z,{name:e.icon})," ",o().createElement(a.Z,{msgId:e.labelId})):o().createElement(l.Z.Item,{key:e.href,href:w(I,e.href)},o().createElement(c.Z,{name:e.icon})," ",o().createElement(a.Z,{msgId:e.labelId}))}))))))))))}));y.defaultProps={links:[],theme:"light",getTypesInfo:s.NN,formatHref:function(){return"#"},featured:!1,onClick:function(){}};const g=y},57914:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(69582)},99469:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67294),o=r.n(n),a=r(5346),c=r(45697),l=r.n(c),i=r(41609),u=r.n(i),s=r(35721),f=function(e){var t=e.resource,r=void 0===t?{}:t,n=(0,s.fu)(r),c=n.isApproved,l=n.isPublished,i=n.isProcessing,f=n.isCopying,d=n.isDeleting,p=n.isDeleted;return u()(r)?null:o().createElement("p",null,!i&&!c&&o().createElement("span",{className:"gn-resource-status gn-resource-status-warning"},o().createElement(a.Z,{msgId:"gnviewer.underApproval"})),!i&&!l&&o().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},o().createElement(a.Z,{msgId:"gnviewer.unpublish"})),d&&o().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},o().createElement(a.Z,{msgId:"gnviewer.deleting"})),p&&o().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},o().createElement(a.Z,{msgId:"gnviewer.deleted"})),f&&o().createElement("span",{className:"gn-resource-status gn-resource-status-primary"},o().createElement(a.Z,{msgId:"gnviewer.cloning"})))};f.propTypes={isApproved:l().bool,isPublished:l().bool},f.defaultProps={isApproved:!0,isPublished:!0};const d=f},89239:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(99469)},28261:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),o=r.n(n),a=r(45697),c=r.n(a),l=["id","className","style","children"];function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function u(e){var t=e.id,r=e.className,n=e.style,a=e.children,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l),u=r?" "+r:"";return o().createElement(o().Fragment,null,o().createElement("div",i({},c,{id:t,className:"gn-spinner".concat(u),style:n}),o().createElement("div",null)),a)}u.propTypes={id:c().string,className:c().string,style:c().object},u.defaultProps={};const s=u},51605:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n.Z});var n=r(28261)},97610:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(67294);const o=function(e){var t=e.scrollContainer,r=e.shouldScroll,o=void 0===r?function(){return!0}:r,a=e.onLoad,c=e.offset,l=void 0===c?200:c,i=(0,n.useRef)({});i.current=function(){(t?t.scrollTop:document.body.scrollTop||document.documentElement.scrollTop)+(t?t.clientHeight:window.innerHeight)>=(t?t.scrollHeight:document.body.scrollHeight||document.documentElement.scrollHeight)-l&&o()&&a()},(0,n.useEffect)((function(){var e=t||window;function r(){i.current()}return e.addEventListener("scroll",r),function(){e.removeEventListener("scroll",r)}}),[t])}},50950:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var n=r(67294),o=r.n(n),a=r(45697),c=r.n(a),l=r(22843),i=r(33664),u=r(57588),s=r(22222),f=r(5346),d=r(93473),p=r(57914),m=r(97610),y=r(99380),g=r(17594),v=r(51605),b=r(35721),h=r(80416),O=r(1550),E=r(82904),w=r(32425),j=r(97111),P=r(55105),Z=r(93451),S=["onChange","value"],N=["enabled"];function C(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}function A(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var D=(0,Z.Z)("placeholder")(u.FormControl),z=(0,j.Z)("onChange","value")((function(e){var t=e.onChange,r=e.value,n=A(e,S);return o().createElement(D,x({},n,{value:r,onChange:function(e){return t(e.target.value)}}))}));function _(e){var t=e.request,r=e.responseToEntries,a=e.pageSize,c=e.style,l=e.placeholderId,i=e.onAdd,s=e.onClose,y=e.onZoomTo,h=(0,n.useRef)(),O=k((0,n.useState)([]),2),E=O[0],j=O[1],P=k((0,n.useState)(!1),2),Z=P[0],S=P[1],N=k((0,n.useState)(1),2),I=N[0],T=N[1],x=k((0,n.useState)(!1),2),A=x[0],D=x[1],_=k((0,n.useState)(""),2),H=_[0],R=_[1],M=(0,n.useRef)();(0,m.Z)({scrollContainer:h.current,shouldScroll:function(){return!Z&&A},onLoad:function(){T(I+1)}});var L=(0,n.useRef)();return L.current=function(e){!Z&&t&&(h.current&&(h.current.scrollTop=0),S(!0),t({q:H,page:e.page,pageSize:a}).then((function(t){if(M.current){var n=r(t);D(t.isNextPageAvailable),j(1===e.page?n:[].concat(C(E),C(n))),S(!1)}})).catch((function(){M.current&&S(!1)})))},(0,n.useEffect)((function(){return M.current=!0,function(){M.current=!1}}),[]),(0,n.useEffect)((function(){I>1&&L.current({page:I})}),[I]),(0,n.useEffect)((function(){T(1),L.current({page:1})}),[H]),o().createElement("div",{className:"gn-datasets-catalog",style:c},o().createElement("div",{className:"gn-datasets-catalog-head"},o().createElement("div",{className:"gn-datasets-catalog-title"},o().createElement(f.Z,{msgId:"gnviewer.datasetsCatalogTitle"})),o().createElement(d.Z,{className:"square-button",onClick:function(){return s()}},o().createElement(u.Glyphicon,{glyph:"1-close"}))),o().createElement("div",{className:"gn-datasets-catalog-filter"},o().createElement(z,{placeholder:l,value:H,debounceTime:300,onChange:function(e){return R(e)}}),H&&!Z&&o().createElement(d.Z,{onClick:function(){return R("")}},o().createElement(g.Z,{name:"times"})),Z&&o().createElement(v.Z,null)),o().createElement("div",{ref:h,className:"gn-datasets-catalog-body"},o().createElement("ul",{className:"gn-datasets-catalog-list"},E.map((function(e){return o().createElement("li",{key:e.pk},o().createElement(p.Z,{data:e,readOnly:!0,layoutCardsStyle:"list",onClick:function(){return function(e){var t,r,n=(0,b.tA)(e);i(n);var o,a=(null==n||null===(t=n.bbox)||void 0===t?void 0:t.bounds)||{},c=a.minx,l=a.miny,u=a.maxx,s=a.maxy,f=(null==n||null===(r=n.bbox)||void 0===r?void 0:r.bounds)&&[c,l,u,s];f&&y(f,null==n||null===(o=n.bbox)||void 0===o?void 0:o.crs)}(e)}}))})),0===E.length&&!Z&&o().createElement("div",{className:"gn-datasets-catalog-alert"},o().createElement(f.Z,{msgId:"gnviewer.datasetsCatalogEntriesNoResults"}))),Z&&o().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},o().createElement(w.Z,{size:70}))))}_.propTypes={request:c().func,responseToEntries:c().func,pageSize:c().number,onAdd:c().func,placeholderId:c().string,onClose:c().func,onZoomTo:c().func},_.defaultProps={request:y.EX,responseToEntries:function(e){return e.resources},pageSize:10,onAdd:function(){},placeholderId:"gnviewer.datasetsCatalogFilterPlaceholder",onZoomTo:function(){},onClose:function(){}};var H=(0,i.connect)((0,s.P1)([function(e){return(0,P.ic)(e,{height:!0})},function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.datasetsCatalog)||void 0===r?void 0:r.enabled}],(function(e,t){return{style:e,enabled:t}})),{onAdd:h.A4,onClose:E.Xg.bind(null,"datasetsCatalog","enabled",!1),onZoomTo:O.Px})((function(e){var t=e.enabled,r=A(e,N);return t?o().createElement(_,r):null})),R=(0,i.connect)((0,s.P1)([],(function(){return{}})),{onClick:E.Xg.bind(null,"datasetsCatalog","enabled",!0)})((function(e){var t=e.onClick,r=e.size;return o().createElement(d.Z,{size:r,onClick:function(){t()}},o().createElement(f.Z,{msgId:"gnviewer.addLayer"}))}));const M=(0,l.rx)("DatasetsCatalog",{component:H,containers:{ActionNavbar:{name:"DatasetsCatalog",Component:R}},epics:{},reducers:{}})},23279:(e,t,r)=>{var n=r(13218),o=r(7771),a=r(14841),c=Math.max,l=Math.min;e.exports=function(e,t,r){var i,u,s,f,d,p,m=0,y=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var r=i,n=u;return i=u=void 0,m=t,f=e.apply(n,r)}function h(e){return m=e,d=setTimeout(E,t),y?b(e):f}function O(e){var r=e-p;return void 0===p||r>=t||r<0||g&&e-m>=s}function E(){var e=o();if(O(e))return w(e);d=setTimeout(E,function(e){var r=t-(e-p);return g?l(r,s-(e-m)):r}(e))}function w(e){return d=void 0,v&&i?b(e):(i=u=void 0,f)}function j(){var e=o(),r=O(e);if(i=arguments,u=this,p=e,r){if(void 0===d)return h(p);if(g)return clearTimeout(d),d=setTimeout(E,t),b(p)}return void 0===d&&(d=setTimeout(E,t)),f}return t=a(t)||0,n(r)&&(y=!!r.leading,s=(g="maxWait"in r)?c(a(r.maxWait)||0,t):s,v="trailing"in r?!!r.trailing:v),j.cancel=function(){void 0!==d&&clearTimeout(d),m=0,i=p=u=d=void 0},j.flush=function(){return void 0===d?f:w(o())},j}},7771:(e,t,r)=>{var n=r(55639);e.exports=function(){return n.Date.now()}}}]);