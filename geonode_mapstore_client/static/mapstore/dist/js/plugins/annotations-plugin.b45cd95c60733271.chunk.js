"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1482],{12816(e,t,n){n.d(t,{pn:()=>s,v6:()=>d});var r=n(635143),o=n(329987),i=n.n(o),a=n(447340),l=n.n(a),u=function(e){var t=void 0;if(e instanceof HTMLAnchorElement){var n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=r.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;var o=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),a=e.getAttribute&&e.getAttribute("data-geostory-interaction-name"),l={};a&&i&&o&&(l["data-geostory-interaction-type"]=o,l["data-geostory-interaction-params"]=i,l["data-geostory-interaction-name"]=a),n.attributes=l,t=r.Entity.__create("LINK","MUTABLE",n)}}return t},c=function(e,t){if("MENTION"===e.type)return'< href="'.concat(e.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(e.data.value,'">').concat(t,"</a>");if("LINK"===e.type){var n=e.data.targetOption||"_self",r=e.data.attributes;return r&&r["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(r["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(r["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(r["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(r["data-geostory-interaction-params"],"')\">").concat(t,"</a>"):'<a href="'.concat(e.data.url,'" target="').concat(n,'">').concat(t,"</a>")}if("IMAGE"===e.type){var o=e.data.alignment,i=o&&"none"!==o?"float: ".concat(o,";"):"display: block; margin: 0 auto 0 auto;";return'<img title="'.concat(e.data.src,'" src="').concat(e.data.src,'" alt="').concat(e.data.alt||" ",'" style="height: ').concat(e.data.height,"; width: ").concat(e.data.width,"; ").concat(i,'"/>')}return"EMBEDDED_LINK"===e.type?'<iframe width="'.concat(e.data.width,'" height="').concat(e.data.height,'" src="').concat(e.data.src,'" frameBorder="0"></iframe>'):t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l()(e,null,u),n=r.ContentState.createFromBlockArray(t.contentBlocks);return r.EditorState.createWithContent(n)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=1!==(0,r.convertToRaw)(e.getCurrentContent()).blocks.length||(0,r.convertToRaw)(e.getCurrentContent()).blocks[0].text,o=i()((0,r.convertToRaw)(e.getCurrentContent()),null,null,c);return n?o:t}return t}},503618(e,t){var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.Ay=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=t.debug;var l={initialState:t.initialState,initTypes:f(t.initTypes,["@@redux/INIT","@@INIT"]),limit:t.limit,filter:t.filter||function(){return!0},undoType:t.undoType||a.UNDO,redoType:t.redoType||a.REDO};return l.history=t.initialHistory||d(l.initialState),0===l.initTypes.length&&console.warn("redux-undo: supply at least one action type in initTypes to ensure initial state"),function(t,a){!function(e,t){if(r){var n=["action",e.type];console.group?(n.unshift("%credux-undo","font-style: italic"),console.groupCollapsed.apply(console,n),console.log("received",{state:t,action:e})):o.apply(void 0,n)}}(a,t);var f=void 0;switch(a.type){case l.undoType:return f=function(e){o("undo",{history:e});var t=e.past,n=e.present,r=e.future;return t.length<=0?e:{past:t.slice(0,t.length-1),present:t[t.length-1],future:[n].concat(r)}}(t),o("after undo",f),i(),f?s(t,f):t;case l.redoType:return f=function(e){o("redo",{history:e});var t=e.past,n=e.present,r=e.future;return r.length<=0?e:{future:r.slice(1,r.length),present:r[0],past:[].concat(t,[n])}}(t),o("after redo",f),i(),f?s(t,f):t;default:if(f=e(t&&t.present,a),l.initTypes.some(function(e){return e===a.type}))return o("reset history due to init action"),i(),c(n({},t,d(f)));if(l.filter&&"function"==typeof l.filter&&!l.filter(a,f,t&&t.present))return o("filter prevented action, not storing it"),i(),c(n({},t,{present:f}));var p=function(e,t,n){o("insert",{state:t,history:e,free:n-u(e)});var r=e.past,i=e.present,a=n&&u(e)>=n;return void 0===i?{past:[],present:t,future:[]}:{past:[].concat(r.slice(a?1:0),[i]),present:t,future:[]}}(t&&void 0!==t.present?t:l.history,f,l.limit);return o("after insert",{history:p,free:l.limit-u(p)}),i(),c(n({},t,p))}}};var r=void 0;function o(){if(r){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.group||t.unshift("%credux-undo","font-style: italic"),console.log.apply(console,t)}}function i(){if(r)return console.groupEnd&&console.groupEnd()}var a={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO"};t.Q3=a;var l={undo:function(){return{type:a.UNDO}},redo:function(){return{type:a.REDO}}};function u(e){var t=e.past,n=e.future;return t.length+1+n.length}function c(e){return n({},e,{history:e})}function s(e,t){return c(n({},e,t))}function d(e){return{past:[],present:e,future:[]}}function f(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Array.isArray(e)?e:"string"==typeof e?[e]:t}t.IE=l},516516(e,t,n){n.d(t,{A:()=>u});var r=n(446176);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.EZ:return a(a({},e),{},{session:t.session});case r.EE:return a(a({},e),{},{featureId:t.id});case r.rC:case r.vM:return a(a({},e),{},{editing:!0,closeId:0});case r.I:return a(a({},e),{},{closeId:(e.closeId||0)+1});case r.jT:return a(a({},e),{},{editing:!1,closeId:0,session:null});case r.Fk:return a(a({},e),{},{closeId:0});default:return e}}},712853(e,t,n){n.d(t,{A:()=>d});var r=n(273517),o=n.n(r),i=(n(715096),n(786292)),a=n(460056),l=n.n(a),u=n(276901),c=["wrapperClassName","toolbarOptions"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const d=function(e){var t=e.wrapperClassName,n=void 0===t?"ms-compact-text-editor":t,r=e.toolbarOptions,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return o().createElement(i.Editor,s({},a,{editorStyle:{minHeight:200},wrapperClassName:n,toolbar:{options:r||["fontFamily","blockType","inline","textAlign","list","link","colorPicker","remove","image","embedded"],image:{urlEnabled:!0,uploadEnabled:a.uploadEnabled||!1,alignmentEnabled:!1,uploadCallback:function(e){return new Promise(function(t,n){var r=new FileReader;r.addEventListener("load",function(){var e,n;(e=r.result,n={size:500,type:"image/jpeg",quality:.8},new Promise(function(t,r){var o=n||{},i=o.size,a=o.type,l=void 0===a?"image/png":a,u=o.quality,c=void 0===u?.9:u,s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=s.naturalWidth,n=s.naturalHeight,r=i,o=i/(e/n),a=document.createElement("canvas");a.setAttribute("width",r),a.setAttribute("height",o),a.getContext("2d").drawImage(s,0,0,r,o);var u=a.toDataURL(l,c);t(u)},s.onerror=function(e){r(e)},s.src=e})).then(function(e){t({data:{link:e}})})}),e?r.readAsDataURL(e):n()})},previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:a.alt||{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"100%"}},fontFamily:{options:a.fonts||u.Jp},link:{inDropdown:!1,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"]},inline:{inDropdown:!0,options:["bold","italic","underline","strikethrough","monospace"]},textAlign:{inDropdown:!0},list:{inDropdown:!0},embedded:{embedCallback:function(e){var t=/<iframe.*? src="(.*?)"/.exec(l()(e));return t&&t[1]||e},defaultSize:{height:"auto",width:"100%"}}}}))}},955201(e,t,n){n.r(t),n.d(t,{default:()=>Lt});var r=n(393149),o=n(45388),i=n.n(o),a=n(541033),l=n.n(a),u=n(791936),c=n(415392),s=n(904059),d=n(883832),f=n(812366),p=n(538704),y=n(446176),m=n(535273),v=n(29489),b=n(131127),g=n(307679);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(e,t,n){return(t=function(e){var t=function(e){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const A={loadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(y.Qn).switchMap(function(e){var t,r=e.features,o=e.override,a=(0,v.gu)(n());if(!o){var l,u=a.map(function(e){return e.id});return(l=i().Observable).of.apply(l,w(r.map(function(e){return u.includes(e.id)?(0,s.OK)(e.id,"layer",{title:e.title,description:e.description,style:e.style,features:e.features}):(0,s.VE)(e)})))}return(t=i().Observable).of.apply(t,w(a.map(function(e){return(0,s.e5)(e.id)})).concat(w(r.map(function(e){return(0,s.VE)(e)}))))})},newAnnotationEpic:function(e){return e.ofType(y.rC).switchMap(function(){var e={id:(0,m.Fe)(l()()),title:"New annotations",type:"vector",features:[],style:{},visibility:!0,rowViewer:m.BC};return i().Observable.of((0,f.bC)(),(0,s.VE)(e),(0,s.XL)(e.id,"layer"),(0,c.fN)(m.BC,"enabled",!0))})},editAnnotationEpic:function(e,t){var n=t.getState;return e.ofType(y.vM).switchMap(function(e){var t,r=(0,g.ZT)(n());return(t=i().Observable).of.apply(t,[(0,f.bC)()].concat(w((null==r?void 0:r.id)!==(null==e?void 0:e.id)?[(0,s.XL)(e.id,"layer")]:[]),[(0,c.fN)(m.BC,"enabled",!0)]))})},downloadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(y.dC).switchMap(function(e){var t=e.annotations;try{var r=(0,m.ju)(t),o=(0,b.Bl)(n());return(0,u.saveAs)(new Blob([JSON.stringify(r)],{type:"application/json;charset=utf-8"}),"".concat(o.length>0&&o||m.BC,".json")),i().Observable.empty()}catch(e){return i().Observable.of((0,d.z3)({title:"annotations.title",message:"annotations.downloadError",autoDismiss:5,position:"tr"}))}})},confirmCloseAnnotationsEpic:function(e){return e.ofType(y.jT).switchMap(function(e){var t,n=e.layer;return i().Observable.of((0,c.fN)(m.BC,"enabled",!1),null!=n&&null!==(t=n.features)&&void 0!==t&&t.length?(0,s.OK)(n.id,"layer",{invalidFeatures:null}):(0,s.e5)(n.id))})},removeAnnotationsEpic:function(e){return e.ofType(y.xn).switchMap(function(e){return i().Observable.of((0,f.gt)(),(0,f.Zv)(),(0,s.e5)(e.id))})},mergeAnnotationsFeaturesEpic:function(e,t){var n=t.getState;return e.ofType(y.IL).switchMap(function(e){var t,r=e.annotation,o=function(e){var t,n,o,i;return{features:[].concat(w((null==e?void 0:e.features)||[]),w((null==r?void 0:r.features)||[])),style:E(E(E({},null==r?void 0:r.style),null==e?void 0:e.style),{},{body:E(E(E({},null==r||null===(t=r.style)||void 0===t?void 0:t.body),null==e||null===(n=e.style)||void 0===n?void 0:n.body),{},{rules:[].concat(w((null==e||null===(o=e.style)||void 0===o||null===(o=o.body)||void 0===o?void 0:o.rules)||[]),w((null==r||null===(i=r.style)||void 0===i||null===(i=i.body)||void 0===i?void 0:i.rules)||[]))})})}},a=n(),u=(0,g.pO)(a,e.id),c=(0,v.bd)(a);return(t=i().Observable).of.apply(t,w(c?[(0,y.ol)(o(c))]:[]).concat([(0,s.OK)(u.id,"layer",E({_v_:l()()},o(u)))]))})},closeAnnotationsOnMapInfoLoadedEpic:function(e,t){var n=t.getState;return e.ofType(p.xg).switchMap(function(){var e=(0,v.bd)(n());return e?i().Observable.of((0,y.B0)(e)):i().Observable.empty()})}};var T=n(516516),P=n(273517),C=n.n(P),I=n(310340),k=n(811668),N=n(801081),D=n(987021),L=n.n(D),x=n(273494),F=n(130711),_=n(747135),M=n(8117),R=n(503618),H=n(382378),B=n.n(H),z=n(845204),U=n.n(z),q=n(947194),G=n(444003),K=n(711030),V=n(164045),Z=n(457601),Y=n(605556),W=n.n(Y),$=n(542541);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(null,arguments)}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ae(r.key),r)}}function te(e,t,n){return t=re(t),function(e,t){if(t&&("object"==J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ne()?Reflect.construct(t,n||[],re(e).constructor):t.apply(e,n))}function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ne=function(){return!!e})()}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function ie(e,t,n){return(t=ae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),te(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return C().createElement($.A,Q({},this.props.options,{items:[],isDraggable:!0,enableHeightField:this.props.enableHeightField,type:this.props.featureType,components:this.props.selected&&this.props.selected.geometry&&this.props.selected.geometry.coordinates&&this.props.selected.geometry.coordinates.length?(0,m.Py)(this.props.selected.geometry):[],properties:this.props.selected&&this.props.selected.properties||{},onComplete:function(){},onChangeRadius:this.props.onChangeRadius,aeronauticalOptions:this.props.aeronauticalOptions,onChangeFormat:this.props.onChangeFormat,format:this.props.format,mapProjection:this.props.mapProjection,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:this.props.renderer,onValidateFeature:this.props.onValidateFeature,onChange:function(t,n,r,o){var i=t.map(function(e){return[e.lon,e.lat].concat(function(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(void 0!==e.height?[e.height]:[]))});e.props.onChange(i,n,r,o),e.props.onValidateFeature()}}))}}])&&ee(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(C().Component);ie(le,"propTypes",{components:W().array,options:W().object,onRemove:W().func,onChange:W().func,selected:W().object,featureType:W().string,format:W().string,mapProjection:W().string,onComplete:W().func,onHighlightPoint:W().func,onChangeFormat:W().func,onChangeRadius:W().func,onSetInvalidSelected:W().func,aeronauticalOptions:W().object,onChangeText:W().func,renderer:W().string,onValidateFeature:W().func,enableHeightField:W().bool}),ie(le,"defaultProps",{selected:{},options:{},components:[],onRemove:null,onChange:function(){},onComplete:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onSetInvalidSelected:function(){},onChangeText:function(){},onValidateFeature:function(){},enableHeightField:!1});const ue=le;var ce=n(8571),se=n(34273),de=n(274156);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){if(e){if("string"==typeof e)return me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach(function(t){ge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ge(e,t,n){return(t=function(e){var t=function(e){if("object"!=fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=(0,V.A)(K.A),Oe="UPDATE_ANNOTATIONS_FEATURES",Ee="UNDO_ANNOTATIONS_FEATURES",Se="REDO_ANNOTATIONS_FEATURES",we=ge({},Oe,function(e,t){return t(e)}),je=(0,R.Ay)(function(e,t){return(we[t.type]||U())(e,t.callback)},{limit:20,undoType:Ee,redoType:Se,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),Ae={};const Te=(0,de.injectIntl)(function(e){var t,n,r,o,i,a,u,c,s,d,f,p,y,v=e.selectedId,b=e.value,g=e.mapType,h=e.map,O=e.maxZoom,E=void 0===O?18:O,S=e.onSelect,w=void 0===S?function(){}:S,j=e.onChange,A=void 0===j?function(){}:j,T=e.onZoomTo,I=void 0===T?function(){}:T,k=e.onHighlight,N=void 0===k?function(){}:k,D=e.projection,L=e.intl,x=void 0===L?{}:L,F=e.mapInteractionsSupport,_=e.coordinatesFormat,R=e.onChangeCoordinatesFormat,H=void 0===R?function(){}:R,z=e.tab,U=void 0===z?"coordinates":z,K=e.onSelectTab,V=void 0===K?function(){}:K,Y=e.svgSymbolsPath,W=e.lineDashOptions,$=e.enable3dStyleOptions,J=e.geometryEditorOptions,Q=e.defaultTextLabel,X=e.defaultSymbolizers,ee=e.geodesic,te=e.fonts,ne=void 0===te?["Arial","Verdana","Helvetica","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT"]:te,re=(p=(0,P.useReducer)(je,{present:b,past:[],future:[]}),y=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(p,y)||ye(p,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),oe=re[0],ie=re[1],ae=(null==oe?void 0:oe.present)||oe||Ae,le=((null==ae?void 0:ae.features)||[]).find(function(e){return(null==e?void 0:e.id)===v}),de=function(e,t){var n=e.symbolizerBlock,r=e.ruleBlock;return{symbolizerBlock:Object.keys(n).reduce(function(e,r){return be(be({},e),{},ge({},r,be(be({},n[r]),{},{defaultProperties:m.vU[r]||n[r].defaultProperties,params:Object.keys(n[r].params).reduce(function(e,o){var i,a=n[r].params[o];return["Circle"].includes(r)&&["geodesic","radius","msClampToGround","msGeometry"].includes(o)||["Text"].includes(r)&&["label","msGeometry"].includes(o)||["Line","Fill"].includes(r)&&["msGeometry"].includes(o)||["Point","Circle"].includes(null==t||null===(i=t.properties)||void 0===i?void 0:i.annotationType)&&["msGeometry"].includes(o)?e:be(be({},e),{},ge({},o,a))},{})})))},{}),ruleBlock:r}}((0,se.A)({exactMatchGeometrySymbol:!0,enable3dStyleOptions:$}),le),fe=de.symbolizerBlock,me=de.ruleBlock,ve=F;function we(e){ie({type:Oe,callback:function(t){return e(t)}})}function Te(e,t){V("coordinates",le);var n=l()();we(function(r){var o,i,a={type:"Feature",id:n,properties:be(be({},t),{},{id:n,name:e,annotationType:e}),geometry:null};return be(be({},r),{},{features:[].concat(pe((null==r?void 0:r.features)||[]),[a]),style:be(be({},null==r?void 0:r.style),{},{format:"geostyler",body:be(be({},null==r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:[].concat(pe((null==r||null===(i=r.style)||void 0===i||null===(i=i.body)||void 0===i?void 0:i.rules)||[]),[{name:"",filter:["==","id",n],mandatory:"Point"!==e,ruleId:l()(),symbolizers:[be({symbolizerId:l()()},(0,m.xB)(a,X))]}])})})})}),w(n)}function Pe(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureType?(0,Z.S6)(e,{formatNumber:null!=x&&x.formatNumber?x.formatNumber:function(e){return e}}):[e]}function Ce(e,t,n){we(function(r){return be(be({},r),{},{features:((null==r?void 0:r.features)||[]).filter(function(t){var r;return!n||(null==t||null===(r=t.properties)||void 0===r?void 0:r.measureId)!==e}).reduce(function(r,o){return[].concat(pe(r),pe((null==o?void 0:o.id)!==e?[o]:n?Pe(t):[t]))},[])})})}function Ie(e){ie({type:Oe,callback:function(t){return be(be({},t),{},{features:(t.features||[]).filter(function(e){var t;return(null==e||null===(t=e.properties)||void 0===t?void 0:t.measureId)!==v}).reduce(function(t,n){var r;if((null==n?void 0:n.id)!==v)return[].concat(pe(t),[n]);var o=(0,m.HC)(n),i=be(be({},n),{},{geometry:be(be({},null==o?void 0:o.geometry),{},{coordinates:(0,m.QU)(null==o||null===(r=o.geometry)||void 0===r?void 0:r.type,e)})});return[].concat(pe(t),pe((0,m.D)(i)?Pe(i):[i]))},[])})}})}function ke(){var e=(((null==ae?void 0:ae.style)||{}).body||{}).rules;return{name:"selected feature style",rules:(void 0===e?[]:e).filter(function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==le||null===(n=le.properties)||void 0===n?void 0:n.id)})}}(0,P.useEffect)(function(){var e,t,n,r,o,i=((null==oe||null===(e=oe.present)||void 0===e?void 0:e.features)||[]).filter(m.D),a=((null==oe||null===(t=oe.present)||void 0===t?void 0:t.features)||[]).filter(function(e){return!(0,m.D)(e)}),l=i.map(function(e){return e.id});A(be(be({},null==oe?void 0:oe.present),{},{features:i,style:be(be({},null==oe||null===(n=oe.present)||void 0===n?void 0:n.style),{},{format:"geostyler",body:be(be({},null==oe||null===(r=oe.present)||void 0===r||null===(r=r.style)||void 0===r?void 0:r.body),{},{rules:((null==oe||null===(o=oe.present)||void 0===o||null===(o=o.style)||void 0===o||null===(o=o.body)||void 0===o?void 0:o.rules)||[]).filter(function(e){var t=e.filter;return l.includes(null==t?void 0:t[2])})})}),invalidFeatures:(null==a?void 0:a.length)>0?a:null}),(0,m.D)(le)?le:null,null==oe?void 0:oe.present)},[null==oe?void 0:oe.present]);var Ne=((null==ae?void 0:ae.features)||[]).filter(function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType});return C().createElement("div",{className:"ms-features-editor"},C().createElement("div",{className:"ms-features-editor-list"},C().createElement("div",{className:"ms-features-editor-list-header"},C().createElement(M.e2,null,C().createElement(he,{className:"square-button no-border",onClick:function(){ie({type:Ee})},disabled:0===((null==oe||null===(t=oe.past)||void 0===t?void 0:t.length)||0)},C().createElement(M.e6,{glyph:"undo"})),C().createElement(he,{className:"square-button no-border",onClick:function(){ie({type:Se})},disabled:0===((null==oe||null===(n=oe.future)||void 0===n?void 0:n.length)||0)},C().createElement(M.e6,{glyph:"redo"}))),C().createElement(M.e2,null,C().createElement(he,{tooltipId:"annotations.titles.marker",className:"square-button no-border",onClick:function(){return Te("Point")}},C().createElement(M.e6,{glyph:"point-plus"})),C().createElement(he,{tooltipId:"annotations.titles.line",className:"square-button no-border",onClick:function(){return Te("LineString")}},C().createElement(M.e6,{glyph:"polyline-plus"})),C().createElement(he,{tooltipId:"annotations.titles.polygon",className:"square-button no-border",onClick:function(){return Te("Polygon")}},C().createElement(M.e6,{glyph:"polygon-plus"})),C().createElement(he,{tooltipId:"annotations.titles.text",className:"square-button no-border",onClick:function(){return Te("Text",{label:Q||""})}},C().createElement(M.e6,{glyph:"font-add"})),C().createElement(he,{tooltipId:"annotations.titles.circle",className:"square-button no-border",onClick:function(){return Te("Circle",{geodesic:!(null==ee||!ee.Circle)})}},C().createElement(M.e6,{glyph:"1-circle-add"})))),!(null!=ae&&null!==(r=ae.features)&&void 0!==r&&r.length)&&C().createElement("div",{className:"ms-features-editor-list-empty"},C().createElement(ce.A,{msgId:"annotations.addGeometry"})),C().createElement("ul",{className:"ms-features-editor-list-body"},Ne.map(function(e){var t,n=null==e?void 0:e.id,r=v===n;return C().createElement("li",{key:n,onClick:function(){return r?function(){}:w(n,(0,m.D)(e)?e:null)},className:"ms-features-editor-item ".concat(r?" selected":""),onMouseEnter:function(){v!==n&&(0,m.D)(e)&&N("feature",e)},onMouseLeave:function(){N("feature",null)}},C().createElement("div",null,C().createElement(M.e6,{glyph:(0,m.YI)(e)})),C().createElement("div",{style:{flex:1}},C().createElement("input",{value:null==e||null===(t=e.properties)||void 0===t?void 0:t.name,type:"text",onChange:function(t){return Ce(n,be(be({},e),{},{properties:be(be({},null==e?void 0:e.properties),{},{name:t.target.value})}))}})),C().createElement(M.e6,{glyph:(0,m.D)(e)?"ok-sign text-success":"exclamation-mark text-danger"}),C().createElement(M.e2,null,C().createElement(he,{disabled:!(0,m.D)(e),bsStyle:r?"primary":"default",className:"square-button",tooltipId:"annotations.zoomToGeometry",onClick:function(t){t.stopPropagation(),I(B()(e),"EPSG:4326",E)}},C().createElement(M.e6,{glyph:"zoom-to"})),C().createElement(he,{className:"square-button",bsStyle:r?"primary":"default",tooltipId:"annotations.removeGeometry",onClick:function(e){e.stopPropagation(),function(e){we(function(t){return be(be({},t),{},{features:((null==t?void 0:t.features)||[]).filter(function(t){var n;return(null==t?void 0:t.id)!==e&&(null==t||null===(n=t.properties)||void 0===n?void 0:n.measureId)!==e})})})}(n)}},C().createElement(M.e6,{glyph:"trash"}))))}))),!le&&C().createElement("div",{className:"ms-features-editor-tools-empty"},C().createElement("div",null,C().createElement(M.e6,{glyph:"comment"}),C().createElement("div",null,C().createElement(ce.A,{msgId:"annotations.selectAnnotationFeature"})))),le&&C().createElement("div",{className:"ms-features-editor-tools"},C().createElement(M.so,{bsStyle:"tabs",activeKey:U},C().createElement(M.CI,{key:"coordinates",eventKey:"coordinates",onClick:function(){return V("coordinates",le)}},C().createElement(ce.A,{msgId:"annotations.tabCoordinates"})),C().createElement(M.CI,{key:"style",eventKey:"style",onClick:function(){return V("style",le)}},C().createElement(ce.A,{msgId:"annotations.tabStyle"}))),C().createElement("div",{className:"ms-features-editor-tools-body"},"coordinates"===U&&C().createElement(C().Fragment,null,C().createElement(ue,{key:le.id,enableHeightField:g===G.Av.CESIUM&&!(null!=le&&null!==(o=le.properties)&&void 0!==o&&o.geodesic),format:_,onChangeFormat:H,mapProjection:D,options:J,onHighlightPoint:function(e){N("coordinate",e&&{type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:{}})},onChangeRadius:function(e){Ce(null==le?void 0:le.id,be(be({},le),{},{properties:be(be({},null==le?void 0:le.properties),{},{radius:e})}))},selected:be(be({},(0,m.HC)(le)),{},{properties:be(be({},null==le?void 0:le.properties),{},{valueText:null==le||null===(i=le.properties)||void 0===i?void 0:i.label})}),featureType:null==le||null===(a=le.properties)||void 0===a?void 0:a.annotationType,renderer:m.BC,onChange:Ie,onSetInvalidSelected:function(e,t){"coords"===e&&Ie(t)}}),"Text"===(null==le||null===(u=le.properties)||void 0===u?void 0:u.annotationType)&&C().createElement(M.gE,{className:"ms-annotations-label-input",key:"label",controlId:"ms-annotations-label-input",validationState:null!=le&&null!==(c=le.properties)&&void 0!==c&&c.label?void 0:"error"},C().createElement(M.mq,null,C().createElement(ce.A,{msgId:"annotations.titles.text"})),C().createElement(M.MJ,{type:"text",value:(null==le||null===(s=le.properties)||void 0===s?void 0:s.label)||"",onChange:function(e){return Ce(null==le?void 0:le.id,be(be({},le),{},{properties:be(be({},null==le?void 0:le.properties),{},{label:e.target.value})}))}}))),"style"===U&&C().createElement("div",null,C().createElement(q.A,{ruleBlock:me,symbolizerBlock:fe,config:{geometryType:"annotation-".concat(null==le||null===(d=le.properties)||void 0===d||null===(d=d.annotationType)||void 0===d?void 0:d.toLowerCase()),simple:!0,fonts:ne,svgSymbolsPath:Y,lineDashOptions:W},rules:(null===(f=ke())||void 0===f?void 0:f.rules)&&pe(ke().rules).reverse(),onChange:function(e){return t=pe(e).reverse(),void we(function(e){var n=null==e?void 0:e.style,r=(e.features||[]).reduce(function(e,r){var o;if(r.id===le.id)return[].concat(pe(e),pe(t.map(function(e){return be(be({},e),{},{filter:e.filter||["==","id",le.properties.id]})})));var i=((null==n||null===(o=n.body)||void 0===o?void 0:o.rules)||[]).filter(function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==r||null===(n=r.properties)||void 0===n?void 0:n.id)});return[].concat(pe(e),pe(i))},[]),o=be(be({},n),{},{format:"geostyler",body:be(be({},null==n?void 0:n.body),{},{rules:r})});return be(be({},e),{},{style:o})});var t}})))),ve&&C().createElement(ve,{key:null==le?void 0:le.id,active:!!le&&"coordinates"===U,map:h,mapType:g,feature:le,geodesic:ee,onChange:function(e){Ce(le.id,e,!0)}}))});var Pe=n(593429),Ce="ms-annotations-editor-target",Ie="ANNOTATIONS_ADDITIONAL_LAYERS_OWNER";function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach(function(t){Le(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Le(e,t,n){return(t=function(e){var t=function(e){if("object"!=ke(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=Le(Le({},G.Av.OPENLAYERS,(0,P.lazy)(function(){return Promise.all([n.e(284),n.e(1224),n.e(4620),n.e(8048),n.e(974)]).then(n.bind(n,828109))})),G.Av.CESIUM,(0,P.lazy)(function(){return Promise.all([n.e(2129),n.e(5394),n.e(6881),n.e(6714),n.e(1144),n.e(6570),n.e(7378),n.e(531)]).then(n.bind(n,265365))})),Fe=Le(Le({},G.Av.OPENLAYERS,(0,P.lazy)(function(){return Promise.all([n.e(284),n.e(1224),n.e(4620),n.e(8048),n.e(2145),n.e(1073)]).then(n.bind(n,102496))})),G.Av.CESIUM,(0,P.lazy)(function(){return Promise.all([n.e(2129),n.e(5394),n.e(6881),n.e(6714),n.e(1144),n.e(6570),n.e(7378),n.e(1130)]).then(n.bind(n,637423))})),_e=function(e){return xe[e]&&Fe[e]};const Me=function(e){var t=e.map,n=e.active,r=e.mapType,o=e.feature,i=e.geodesic,a=void 0===i?{}:i,l=e.onChange,u=void 0===l?function(){}:l,c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).properties;return"Text"===(null==e?void 0:e.annotationType)?"Point":null==e?void 0:e.annotationType};if(!_e(r))return null;var s=xe[r],d=Fe[r],f=(0,m.D)(o,!0),p=c(o),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geometry,n=e.properties;return"Text"===(null==n?void 0:n.annotationType)||(null==n?void 0:n.radius)>0&&!t?"Point":null==n?void 0:n.annotationType}(o),v=!!a[p],b=(0,P.useRef)(o);return(0,P.useEffect)(function(){b.current=o},[o]),C().createElement(P.Suspense,{fallback:null},C().createElement(C().Fragment,null,C().createElement(s,{map:t,active:n&&null===o.geometry,depthTestAgainstTerrain:!1,geometryType:y,geodesic:v,getObjectsToExcludeOnPick:function(){return[]},onDrawEnd:function(e){var t,n,r,o=e.feature;u(De(De({},b.current),{},{properties:De(De({},null===(t=b.current)||void 0===t?void 0:t.properties),{},{geodesic:v},void 0!==(null==o||null===(n=o.properties)||void 0===n?void 0:n.radius)&&{radius:null==o||null===(r=o.properties)||void 0===r?void 0:r.radius}),geometry:o.geometry}))}}),C().createElement(d,{map:t,active:n&&f,geojson:o,getGeometryType:c,onEditEnd:function(e){return u(e)}})))};function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||Ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach(function(t){Ue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ue(e,t,n){return(t=function(e){var t=function(e){if("object"!=Re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qe(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e){var t;if(null==e||null===(t=e.geometry)||void 0===t||!t.type)return[];if("Point"===e.geometry.type&&!e.geometry.coordinates.some(m.us))return[ze(ze({},e),{},{properties:{geometryType:"Point"}})];var n=He(B()(e),4),r=n[0],o=n[1],i=n[2],a=n[3],l={type:"Feature",geometry:{type:"LineString",coordinates:[[r,o],[r,a],[i,a],[i,o],[r,o]]},properties:{geometryType:"LineString"}};return"LineString"===e.geometry.type?[l].concat(qe(e.geometry.coordinates.map(function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}}))):"Polygon"===e.geometry.type?[l].concat(qe(e.geometry.coordinates[0].map(function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}}))):[e]}var Ze=(0,k.connect)((0,N.Mz)([(0,F.xf)(m.BC,"ready"),v.kv,b.mg,_.tm,v.bd,v._L],function(e,t,n,r,o,i){var a;return{enabled:e,selected:t,maxZoom:(null==n?void 0:n.zoom)||18,projection:null==n?void 0:n.projection,enable3dStyleOptions:!!r,activeClickEventListener:null==n||null===(a=n.eventListeners)||void 0===a||null===(a=a.click)||void 0===a?void 0:a[0],session:o,selectedId:i}}),{onChange:s.OK,onZoomTo:x.jc,onUpdateALayer:Pe.E,onRemoveALayer:Pe.v9,onStoreSession:y.ol,setSelectedId:y.IS})(function(e){var t=e.enabled,n=e.targetId,r=void 0===n?Ce:n,o=e.mapType,i=e.map,a=e.selected,l=e.onChange,u=e.onZoomTo,c=e.maxZoom,s=void 0===c?18:c,d=e.projection,f=e.onUpdateALayer,p=void 0===f?function(){}:f,y=e.onRemoveALayer,v=void 0===y?function(){}:y,b=e.symbolsPath,g=void 0===b?"product/assets/symbols/symbols.json":b,h=e.lineDashOptions,O=e.enable3dStyleOptions,E=e.geometryEditorOptions,S=e.format,w=void 0===S?"decimal":S,j=e.defaultTextAnnotation,A=void 0===j?"New":j,T=e.defaultPointType,k=e.defaultShape,N=e.defaultShapeStrokeColor,D=e.defaultShapeFillColor,x=e.defaultShapeSize,F=void 0===x?64:x,_=e.geodesic,M=e.activeClickEventListener,R=e.fonts,H=e.onStoreSession,B=e.session,z=e.selectedId,U=e.setSelectedId,q=void 0===U?function(){}:U,G=document.querySelector("#".concat(r)),K=He((0,P.useState)(w),2),V=K[0],Z=K[1],Y=He((0,P.useState)("coordinates"),2),W=Y[0],$=Y[1];function J(){return g.includes(".json")?g:"".concat(g,"symbols.json")}function Q(e,t){var n;_e(o)&&p(a.id,Ie,"override",ze({visibility:!0},e&&!t&&!M&&{features:null==a||null===(n=a.features)||void 0===n?void 0:n.filter(function(t){var n=t.id,r=t.properties;return n!==e.id&&(null==r?void 0:r.measureId)!==e.id})})),p("ANNOTATIONS_SELECTED_LAYER",Ie,"overlay",{type:"vector",visibility:!0,features:e?Ve(e):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#111111",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}})}return(0,P.useEffect)(function(){return t&&null!=a&&a.id&&p(a.id,Ie,"override",{visibility:!0}),function(){v({owner:Ie})}},[t]),(0,P.useEffect)(function(){var e=((null==a?void 0:a.features)||[]).find(function(e){return e.id===z});t&&(0,m.D)(e)&&Q(e,"style"===W)},[M,o,t]),t&&G&&a?(0,I.createPortal)(C().createElement("div",{className:"ms-annotations-editor"},C().createElement(Te,{key:a._v_,selectedId:z,geodesic:{Circle:!1!==_},fonts:R,defaultSymbolizers:function(){if("symbol"!==T)return{};var e=L()(D||"#dddddd"),t=L()(N||"#777777");return{Point:{kind:"Mark",wellKnownName:J().replace(/[^\/]*.json$/,"".concat(k,".svg")),color:e.toHexString(),fillOpacity:e.getAlpha(),strokeColor:t.toHexString(),strokeOpacity:t.getAlpha(),strokeWidth:1,radius:F/2,rotate:0}}}(),svgSymbolsPath:J(),lineDashOptions:h,coordinatesFormat:V,enable3dStyleOptions:O,geometryEditorOptions:E,defaultTextLabel:A,onChangeCoordinatesFormat:Z,tab:W,onSelectTab:function(e,t){$(e),Q(t,"style"===e)},mapInteractionsSupport:!M&&Me,value:B||{features:(null==a?void 0:a.features)||[],style:(null==a?void 0:a.style)||{}},onHighlight:function(e,t){p("ANNOTATIONS_HIGHLIGHT_LAYERS",Ie,"overlay",{type:"vector",visibility:!0,features:t?Ve(t):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#555555",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"Square",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:3,radius:6,rotate:0,msBringToFront:!0}]}]}}})},mapType:o,map:i,maxZoom:s,projection:d,onSelect:function(e,t){q(e),Q(t,"style"===W)},onChange:function(e,t,n){var r,o;l(a.id,"layers",e),Q(t,"style"===W),r=e.invalidFeatures,p("ANNOTATIONS_INVALID_LAYER",Ie,"overlay",{type:"vector",visibility:!0,features:r?(o=r,(o||[]).filter(function(e){var t=e.geometry;return(null==t?void 0:t.type)&&["LineString","Polygon"].includes(t.type)}).reduce(function(e,t){var n=("LineString"===t.geometry.type?t.geometry.coordinates:t.geometry.coordinates[0]).filter(function(e){return!e.some(m.us)});return[].concat(qe(e),qe(n.length>1?[{type:"Feature",geometry:{type:"LineString",coordinates:n},properties:ze(ze({},null==t?void 0:t.properties),{},{geometryType:"LineString"})}]:[]),qe(n.map(function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))},[])):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#ff0000",width:2,opacity:1,cap:"round",join:"round",msClampToGround:!1,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}}),H(n)},onZoomTo:u})),G):null});const Ye=Ze;var We=n(50438),$e=n.n(We),Je=n(403484),Qe=n.n(Je),Xe=n(619952),et=n(97401),tt=n(12816),nt=n(553493),rt=n(712853);function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach(function(t){lt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lt(e,t,n){return(t=function(e){var t=function(e){if("object"!=ot(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ot(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ct=(0,nt.A)("onEditorStateChange","editorState")(rt.A);const st=function(e){var t,n,r=e.preview,o=e.properties,i=void 0===o?{}:o,a=e.fields,l=void 0===a?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:a,u=e.onChange,c=void 0===u?function(){}:u,s=(t=(0,P.useState)(l.filter(function(e){return"html"===e.type}).reduce(function(e,t){return at(at({},e),{},lt({},t.name,(0,tt.pn)(i[t.name]||"")))},{})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ut(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=s[0],f=s[1];return r?C().createElement("div",{className:"ms-annotations-fields preview"},l.map(function(e){var t=e.showLabel;return C().createElement("div",{key:e.name,className:"ms-annotations-field"},t&&C().createElement("div",{className:"ms-annotations-field-label"},C().createElement(ce.A,{msgId:"annotations.field.".concat(e.name)})),C().createElement("div",{className:"ms-annotations-field-value",dangerouslySetInnerHTML:{__html:i[e.name]}}))})):C().createElement("form",{className:"ms-annotations-fields"},l.map(function(e){var t=$e()(e.validator)?e.validator:null,n=t&&t(i[e.name]),r=e.validateError||"annotations.mandatory",o=e.showLabel,a=e.editable;return"text"===e.type?C().createElement(M.gE,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&C().createElement(M.mq,null,C().createElement(ce.A,{msgId:"annotations.field.".concat(e.name)})),C().createElement(M.MJ,{disabled:!a,type:"text",value:i[e.name],onChange:function(t){return c(lt({},e.name,t.target.value))}}),t&&!n&&C().createElement(M.f0,null,C().createElement(ce.A,{msgId:r}))):"html"===e.type?C().createElement(M.gE,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&C().createElement(M.mq,null,C().createElement(ce.A,{msgId:"annotations.field.".concat(e.name)})),a?C().createElement(ct,{editorState:d[e.name],onEditorStateChange:function(t){var n=(0,tt.v6)(d[e.name]);(0,tt.v6)(t)!==n&&(c(lt({},e.name,(0,tt.v6)(t))),f(function(n){return at(at({},n),{},lt({},e.name,t))}))}}):C().createElement("div",{dangerouslySetInnerHTML:{__html:i[e.name]}}),t&&!n&&C().createElement(M.f0,null,C().createElement(ce.A,{msgId:r}))):null}))};var dt=n(534332),ft=n(406250),pt=n(174910),yt=n(132672),mt=n(267767);function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}var bt=["fields","onEdit","onRemove","onDownload"],gt=["title","description"];function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ht.apply(null,arguments)}function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach(function(t){St(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function St(e,t,n){return(t=function(e){var t=function(e){if("object"!=vt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function At(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Tt=(0,V.A)(K.A),Pt=(0,k.connect)(function(){return{}},{onRemove:y.O8,onDownload:y.RG,onEdit:y._G})(function(e){var t=e.fields,n=e.onEdit,r=void 0===n?function(){}:n,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onDownload,l=void 0===a?function(){}:a,u=At(e,bt),c=wt((0,P.useState)(!1),2),s=c[0],d=c[1];return C().createElement("div",null,C().createElement("div",null,C().createElement(M.e2,null,C().createElement(Tt,{className:"square-button",bsStyle:"primary",tooltipId:"annotations.edit",onClick:function(){return r(u.id)}},C().createElement(M.e6,{glyph:"pencil"})),C().createElement(Tt,{className:"square-button",bsStyle:"primary",tooltipId:"annotations.remove",onClick:function(){return d(!0)}},C().createElement(M.e6,{glyph:"trash"})),C().createElement(Tt,{className:"square-button",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return l([u])}},C().createElement(M.e6,{glyph:"download"})))),C().createElement(st,{preview:!0,properties:Et({title:null==u?void 0:u.title,description:null==u?void 0:u.description},null==u?void 0:u.options),fields:t}),C().createElement(ft.A,null,C().createElement(dt.A,{show:s,onCancel:function(){return d(!1)},onConfirm:function(){i(u.id),d(!1)},variant:"danger",preventHide:!0,titleId:"annotations.undoDeleteFeature",confirmId:"annotations.confirm",cancelId:"annotations.cancel"})))}),Ct=(0,k.connect)((0,N.Mz)([(0,F.cU)(m.BC),function(e){return(0,et.o7)(e,{height:!0})},v.kv,b.mg],function(e,t,n,r){var o;return{enabled:e,style:t,selected:e?n:null,activeClickEventListener:null==r||null===(o=r.eventListeners)||void 0===o||null===(o=o.click)||void 0===o?void 0:o[0],projection:null==r?void 0:r.projection,zoom:null==r?void 0:r.zoom,resolutions:null==r?void 0:r.resolutions}}),{onClose:y.B0,onCancel:y.NO,onReady:c.fN.bind(null,m.BC,"ready"),onChange:s.OK,onDownload:y.RG})(function(e){var t=e.targetId,n=void 0===t?Ce:t,r=e.selected,o=e.style,i=e.enabled,a=e.onReady,l=void 0===a?function(){}:a,u=e.onClose,c=void 0===u?function(){}:u,s=e.onChange,d=void 0===s?function(){}:s,f=e.onDownload,p=void 0===f?function(){}:f,y=e.fields,v=void 0===y?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:y,b=e.closeId,g=e.onCancel,h=void 0===g?function(){}:g,O=e.activeClickEventListener,E=e.projection,S=e.resolutions,w=e.zoom,j=Et({title:null==r?void 0:r.title,description:null==r?void 0:r.description},null==r?void 0:r.options),A=wt((0,P.useState)("properties"),2),T=A[0],I=A[1],k=wt((0,P.useState)(!1),2),N=k[0],D=k[1];function L(){return!v.find(function(e){return!!$e()(null==e?void 0:e.validator)&&!e.validator(j[e.name])})}function x(){var e;return!(null==r||null===(e=r.features)||void 0===e||!e.length||r.invalidFeatures)}function F(e){return e.stopPropagation(),L()&&x()?c(r):D(!0)}return(0,P.useEffect)(function(){return(0,Xe.mv)(m.BC,function(e){return C().createElement(Pt,ht({},e,{fields:v}))}),function(){(0,Xe.mv)(m.BC,void 0)}},[]),(0,P.useEffect)(function(){return D(!1),l(i),function(){l(!i)}},[i]),(0,P.useEffect)(function(){b&&F()},[b]),r?C().createElement("div",{className:"ms-annotations-panel",style:o},C().createElement(yt.A,{centerChildrenVertically:!0,classNames:["_padding-sm"]},C().createElement("div",{className:"square-button"},C().createElement(M.e6,{glyph:"comment"})),C().createElement(yt.A.Fill,{component:mt.A,fontSize:"md",className:"_padding-lr-sm"},C().createElement(ce.A,{msgId:"annotations.title"})),C().createElement(Tt,{onClick:function(e){return F(e)},className:"square-button _border-transparent"},C().createElement(M.e6,{glyph:"1-close"}))),C().createElement(M.so,{bsStyle:"tabs",activeKey:T,className:"ms-annotations-panel-nav"},C().createElement(M.CI,{key:"properties",eventKey:"properties",onClick:function(){return I("properties")}},C().createElement(ce.A,{msgId:"annotations.properties"})," ",C().createElement(M.e6,{glyph:L()?"ok-sign text-success":"exclamation-mark text-danger"})),C().createElement(M.CI,{key:"geometries",eventKey:"geometries",onClick:function(){return I("geometries")}},C().createElement(ce.A,{msgId:"annotations.geometries"})," ",C().createElement(M.e6,{glyph:x()?"ok-sign text-success":"exclamation-mark text-danger"})),C().createElement(M.CI,{key:"settings",eventKey:"settings",onClick:function(){return I("settings")}},C().createElement(ce.A,{msgId:"settings"})),C().createElement(Tt,{className:"square-button",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",disabled:!(L()&&x()),onClick:function(){return p([r])}},C().createElement(M.e6,{glyph:"download"}))),C().createElement("div",{className:"ms-annotations-panel-body"},C().createElement("div",{className:"ms-annotations-panel-content",style:"properties"===T?{}:{display:"none"}},C().createElement(st,{fields:v,properties:j,onChange:function(e){var t=e.title,n=e.description,o=At(e,gt);d(r.id,"layers",Et(Et(Et({},void 0!==t&&{title:t}),void 0!==n&&{description:n}),{},{options:Et(Et({},r.options),o)}))}})),C().createElement("div",{id:n,style:"geometries"===T?{}:{display:"none"}}),C().createElement("div",{className:"ms-annotations-panel-content",style:"settings"===T?{}:{display:"none"}},C().createElement(pt.A,{title:C().createElement(M.mq,null,C().createElement(ce.A,{msgId:"layerProperties.visibilityLimits.title"})),layer:r,onChange:function(e){return d(r.id,"layers",e)},projection:E,resolutions:S,zoom:w}))),O&&C().createElement(M.Fc,{bsStyle:"warning"},C().createElement(ce.A,{msgId:"annotations.deactivatedMapInteraction",msgParams:{pluginName:Qe()(O)}})),C().createElement(ft.A,null,C().createElement(dt.A,{show:N,onCancel:function(){return h(),void D(!1)},onConfirm:function(){return c(r),void D(!1)},variant:"danger",preventHide:!0,titleId:"annotations.undo",confirmId:"annotations.confirm",cancelId:"annotations.cancel"}))):null});const It=Ct;var kt=["status","selectedLayers","onAdd","onDownload","onEdit","annotationLayers","statusTypes","itemComponent"];function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nt.apply(null,arguments)}const Dt=(0,k.connect)((0,N.Mz)([v.gu,(0,F.cU)(m.BC)],function(e,t){return{annotationLayers:e,enabled:t}}),{onAdd:y.eO,onDownload:y.RG,onEdit:y._G})(function(e){var t=e.status,n=e.selectedLayers,r=e.onAdd,o=void 0===r?function(){}:r,i=e.onDownload,a=void 0===i?function(){}:i,l=e.onEdit,u=void 0===l?function(){}:l,c=e.annotationLayers,s=void 0===c?[]:c,d=e.statusTypes,f=e.itemComponent,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,kt),y=f;if(t===d.DESELECT)return C().createElement(C().Fragment,null,C().createElement(y,Nt({},p,{key:"annotations",tooltipId:"toc.addAnnotations",onClick:function(){return o()},glyph:"add-comment"})),s.length>0&&C().createElement(y,Nt({},p,{key:"annotations-download",glyph:"download-comment",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(s)}})));if(t===d.LAYER&&(0,m.fd)(n[0]))return C().createElement(C().Fragment,null,C().createElement(y,Nt({},p,{key:"annotations-edit",glyph:"pencil",tooltipId:"toc.editAnnotations",onClick:function(){return u(n[0].id)}})),C().createElement(y,Nt({},p,{key:"annotations-download",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return a([n[0]])},glyph:"download-comment"})));var v=t===d.LAYERS?n.filter(m.fd):[];return v.length?C().createElement(C().Fragment,null,C().createElement(y,Nt({},p,{key:"annotations-download",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(v)},glyph:"download-comment"}))):null}),Lt=(0,r.i1)("Annotations",{component:It,containers:{TOC:{doNotHide:!0,name:"Annotations",target:"toolbar",Component:Dt,position:12},Map:{name:"Annotations",Tool:Ye,alwaysRender:!0}},reducers:{annotations:T.A},epics:A})}}]);