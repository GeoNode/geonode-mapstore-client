(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6895,47310],{580416:(e,t,o)=>{"use strict";o.d(t,{yS:()=>r,Zz:()=>n,ms:()=>a,ih:()=>i,OX:()=>c,sb:()=>s,K$:()=>p,k7:()=>u,cX:()=>d,x9:()=>f,vs:()=>y,oE:()=>m,Po:()=>v,qv:()=>h,cI:()=>b,g6:()=>g,I4:()=>T,l$:()=>E,Xv:()=>O,k3:()=>w,CQ:()=>_,R8:()=>L,HN:()=>S,sH:()=>R,c7:()=>A,_7:()=>P,eF:()=>x,O6:()=>j,ED:()=>C,RP:()=>D,sF:()=>G,VP:()=>I,He:()=>N,vO:()=>M,WO:()=>k,bh:()=>F,pV:()=>Z,MK:()=>Y,ZF:()=>B,tV:()=>H,Dv:()=>U,Yz:()=>W,kI:()=>q,XG:()=>z,A4:()=>Q,Rp:()=>V,$o:()=>K,ct:()=>X,oh:()=>$,$h:()=>J,ud:()=>ee,Qr:()=>te,LR:()=>oe,nN:()=>re,UG:()=>ne,F5:()=>ae,c9:()=>ie,Jh:()=>le,Xy:()=>ce});var r="CHANGE_LAYER_PROPERTIES",n="LAYERS:CHANGE_LAYER_PARAMS",a="CHANGE_GROUP_PROPERTIES",i="TOGGLE_NODE",l="CONTEXT_NODE",c="SORT_NODE",s="REMOVE_NODE",p="UPDATE_NODE",u="MOVE_NODE",d="LAYER_LOADING",f="LAYER_LOAD",y="LAYER_ERROR",m="ADD_LAYER",v="ADD_GROUP",h="REMOVE_LAYER",b="SHOW_SETTINGS",g="HIDE_SETTINGS",T="UPDATE_SETTINGS",E="REFRESH_LAYERS",O="LAYERS:UPDATE_LAYERS_DIMENSION",w="LAYERS_REFRESHED",_="LAYERS_REFRESH_ERROR",L="LAYERS:BROWSE_DATA",S="LAYERS:DOWNLOAD",R="LAYERS:CLEAR_LAYERS",A="LAYERS:SELECT_NODE",P="LAYERS:FILTER_LAYERS",x="LAYERS:SHOW_LAYER_METADATA",j="LAYERS:HIDE_LAYER_METADATA",C="LAYERS:UPDATE_SETTINGS_PARAMS";function D(e,t,o){return{type:b,node:e,nodeType:t,options:o}}function G(){return{type:g}}function I(e){return{type:T,options:e}}function N(e,t){return{type:r,newProperties:t,layer:e}}function M(e,t){return{type:n,layer:e,params:t}}function k(e,t){return{type:a,newProperties:t,group:e}}function F(e,t,o){return{type:i,node:e,nodeType:t,status:!o}}function Z(e){return{type:l,node:e}}function Y(e,t){return{type:c,node:e,order:t,sortLayers:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}function B(e,t){return{type:s,node:e,nodeType:t,removeEmpty:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function H(e,t,o){return{type:p,node:e,nodeType:t,options:o}}function U(e,t,o){return{type:u,node:e,groupId:t,index:o}}function W(e){return{type:d,layerId:e}}function q(e,t){return{type:f,layerId:e,error:t}}function z(e,t,o){return{type:y,layerId:e,tilesCount:t,tilesErrorCount:o}}function Q(e){return{type:m,layer:e,foreground:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function V(e,t,o){return{type:v,group:e,parent:t,options:o,asFirst:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}}function K(e){return{type:h,layerId:e}}function X(e,t){return{type:r,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function $(e){return{type:w,layers:e}}function J(e,t){return{type:_,layers:e,error:t}}function ee(e,t,o,r){return{type:O,dimension:e,value:t,options:o,layers:r}}function te(e){return{type:L,layer:e}}function oe(e){return{type:S,layer:e}}function re(){return{type:R}}function ne(e,t,o){return{type:A,id:e,nodeType:t,ctrlKey:o}}function ae(e){return{type:P,text:e}}function ie(e,t){return{type:x,metadataRecord:e,maskLoading:t}}function le(){return{type:j}}function ce(e,t){return{type:C,newParams:e,update:t}}},921914:(e,t,o)=>{"use strict";o.d(t,{XL:()=>n,km:()=>a,Ih:()=>i,Xw:()=>l,Pn:()=>c,DZ:()=>s,e8:()=>p,E0:()=>u,F9:()=>d,X_:()=>f,pb:()=>y,Re:()=>m,ih:()=>v,xy:()=>h,jL:()=>b,oz:()=>g,ph:()=>T,lF:()=>E,gG:()=>O,cb:()=>w,GI:()=>_,B1:()=>L,fv:()=>S,gc:()=>R,zX:()=>A,ZF:()=>P,Zb:()=>x,DW:()=>j,Xp:()=>C,Fm:()=>D,sV:()=>G,LU:()=>I,XP:()=>N,WU:()=>M,mK:()=>k,g:()=>F,ws:()=>Z,HP:()=>Y,aN:()=>B,Pg:()=>U,u0:()=>W,TM:()=>q,PM:()=>z,lK:()=>Q,sv:()=>V,MO:()=>K,oO:()=>X,Mc:()=>$,Zw:()=>J,RA:()=>ee,am:()=>te,ZM:()=>oe,wm:()=>re,Y$:()=>ne,Qu:()=>ae,kT:()=>ie});var r=o(647310),n="LOAD_FEATURE_INFO",a="ERROR_FEATURE_INFO",i="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",s="PURGE_MAPINFO_RESULTS",p="CHANGE_MAPINFO_FORMAT",u="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",f="SHOW_REVERSE_GEOCODE",y="HIDE_REVERSE_GEOCODE",m="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",h="FEATURE_INFO_CLICK",b="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",g="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",T="TOGGLE_MAPINFO_STATE",E="UPDATE_CENTER_TO_MARKER",O="IDENTIFY:CHANGE_PAGE",w="IDENTIFY:CLOSE_IDENTIFY",_="IDENTIFY:CHANGE_FORMAT",L="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",S="IDENTIFY:EDIT_LAYER_FEATURES",R="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",A="IDENTIFY:SET_MAP_TRIGGER",P="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",x="IDENTIFY:SET_SHOW_IN_MAP_POPUP",j="IDENTIFY:IDENTIFY_IS_MOUNTED",C="IDENTIFY:INIT_PLUGIN";function D(e,t,o,r,a){return{type:n,data:t,reqId:e,requestParams:o,layerMetadata:r,layer:a}}function G(e,t,o,r){return{type:a,error:t,reqId:e,requestParams:o,layerMetadata:r}}function I(){return{type:m}}function N(){return{type:v}}function M(e,t){return{type:c,reqId:e,request:t}}function k(e){return{type:l,enabled:e}}function F(){return{type:s}}function Z(e){return{type:p,infoFormat:e}}function Y(){return{type:u}}function B(){return{type:d}}function H(e){return{type:f,reverseGeocodeData:e.data}}function U(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(H(e))})).catch((function(e){t(H(e))}))}}function W(){return{type:y}}function q(){return{type:T}}function z(e){return{type:E,status:e}}function Q(e,t){return{type:h,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null}}function V(e){return{type:b,point:e}}function K(e){return{type:g,enabled:e}}function X(e){return{type:O,index:e}}var $=function(){return{type:w}},J=function(e){return{type:_,format:e}},ee=function(e){return{type:L,showCoordinateEditor:e}},te=function(e){return{type:S,layer:e}},oe=function(e){return{type:R,query:e}},re=function(e){return{type:A,trigger:e}},ne=function(e){return{type:x,value:e}},ae=function(e){return{type:j,isMounted:e}},ie=function(e){return{type:C,cfg:e}}},647310:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var r=o(375875),n=o.n(r),a=o(472500),i=o.n(a),l=o(727418),c=o.n(l),s={format:"json",bounded:0,polygon_geojson:1,priority:5};const p={geocode:function(e,t){var o=c()({q:e},s,t||{}),r=i().format({protocol:"https",host:"nominatim.openstreetmap.org",query:o});return n().get(r)},reverseGeocode:function(e,t){var o=c()({lat:e.lat,lon:e.lng},t||{},s),r=i().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:o});return n().get(r)}}},359294:(e,t,o)=>{"use strict";o.d(t,{Z:()=>_});var r=o(675263),n=o.n(r),a=o(124852),i=o.n(a),l=o(480681),c=o(950966),s=o(359112),p=o(893379),u=o.n(p),d=o(161253);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function m(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function v(e,t,o){return t=b(t),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(e,h()?Reflect.construct(t,o||[],b(e).constructor):t.apply(e,o))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function E(e,t,o){return(t=O(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function O(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:String(t)}u()(d.Z,{insert:"head",singleton:!1}),d.Z.locals;var w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return E(g(e=v(this,t,[].concat(r))),"getFilteredTitle",(function(t){var o=new RegExp(e.props.filterText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi"),r=t.match(o);return e.props.filterText&&r?t.split(o).map((function(e,t){return t<r.length?[].concat(function(e){if(Array.isArray(e))return y(e)}(o=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?y(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[i().createElement("strong",{key:t},r[t])]):e;var o})):t})),E(g(e),"renderTitle",(function(){var t=(0,s.BC)(e.props).title;return i().createElement("div",{className:"toc-title",onClick:e.props.onClick?function(t){return e.props.onClick(e.props.node.id,"layer",t.ctrlKey)}:function(){},onContextMenu:function(t){t.preventDefault(),e.props.onContextMenu(e.props.node)}},e.getFilteredTitle(t))})),e}var o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){var e=(0,s.BC)(this.props).tooltipText;return this.props.tooltip&&e?i().createElement(c.Z,{placement:this.props.node.tooltipPlacement||"top",overlay:i().createElement(l.Tooltip,{id:"tooltip-layer-title"},e)},this.renderTitle()):this.renderTitle()}}])&&m(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),t}(i().Component);E(w,"propTypes",{node:n().object,onClick:n().func,onContextMenu:n().func,currentLocale:n().string,filterText:n().string,tooltip:n().bool,tooltipOptions:n().object}),E(w,"defaultProps",{onClick:function(){},onContextMenu:function(){},currentLocale:"en-US",filterText:"",tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}});const _=w},262770:(e,t,o)=>{"use strict";o.d(t,{Z:()=>w});var r=o(124852),n=o.n(r),a=o(675263),i=o.n(a),l=o(441609),c=o.n(l),s=o(281763),p=o.n(s),u=o(490079);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function y(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function m(e,t,o){return t=h(t),function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(e,v()?Reflect.construct(t,o||[],h(e).constructor):t.apply(e,o))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function T(e,t,o){return(t=E(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function E(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:String(t)}var O=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(b(o=m(this,t,[e])),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),T(b(o),"canShow",(function(e){return e.visibility||!o.props.showOnlyIfVisible})),T(b(o),"useLegendOptions",(function(){return!c()(o.props.node.legendOptions)&&p()(o.props.node.legendOptions.legendHeight)&&p()(o.props.node.legendOptions.legendWidth)})),T(b(o),"setOverflow",(function(){return o.useLegendOptions()&&o.props.node.legendOptions.legendWidth>o.state.containerWidth})),o.containerRef=n().createRef(),o}var o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),o=t,r=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){T(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,o=t&&this.useLegendOptions();return t?n().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},n().createElement(u.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:o&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:o&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}],r&&y(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),t}(n().Component);T(O,"propTypes",{node:i().object,legendContainerStyle:i().object,legendStyle:i().object,showOnlyIfVisible:i().bool,currentZoomLvl:i().number,scales:i().array,WMSLegendOptions:i().string,scaleDependent:i().bool,language:i().string,legendWidth:i().number,legendHeight:i().number}),T(O,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const w=O},380876:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var Bootstrap=__webpack_require__(480681),Message=__webpack_require__(805346).Z,React=__webpack_require__(124852),RenderTemplate=function RenderTemplate(comp,props){var model=props.model;return eval(comp)};const __WEBPACK_DEFAULT_EXPORT__=RenderTemplate},382571:(module,__unused_webpack_exports,__webpack_require__)=>{function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper(e,t,o){return t=_getPrototypeOf(t),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,o||[],_getPrototypeOf(e).constructor):t.apply(e,o))}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var React=__webpack_require__(124852),PropTypes=__webpack_require__(675263),isEqual=__webpack_require__(618446),_require=__webpack_require__(59286),parseTemplate=_require.parseTemplate,Template=function(_React$Component){function Template(){var _this;_classCallCheck(this,Template);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_callSuper(this,Template,[].concat(args)),_defineProperty(_assertThisInitialized(_this),"renderContent",(function(){var model=_this.props.model,props=_this.props;return eval(_this.comp)})),_defineProperty(_assertThisInitialized(_this),"parseTemplate",(function(e){parseTemplate(e,(function(e,t){t?_this.props.onError(t.message):(_this.comp=e,_this.forceUpdate())}))})),_this}return _inherits(Template,_React$Component),_createClass(Template,[{key:"UNSAFE_componentWillMount",value:function(){this.parseTemplate(this.props.template)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.template!==this.props.template&&(this.comp=null,this.parseTemplate(e.template))}},{key:"shouldComponentUpdate",value:function(e){return!isEqual(e,this.props)}},{key:"render",value:function(){if(this.comp){var e=this.props.renderContent?this.props.renderContent(this.comp,this.props):this.renderContent();return React.isValidElement(e)?e:null}return null}}]),Template}(React.Component);_defineProperty(Template,"propTypes",{template:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),model:PropTypes.object,renderContent:PropTypes.func,onError:PropTypes.func}),_defineProperty(Template,"defaultProps",{template:"",model:{},onError:function(){}}),module.exports=Template},38560:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var r=o(480681),n=o(124852),a=o.n(n),i=o(294184),l=o.n(i),c=["disabled","className","onClick"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s.apply(this,arguments)}var p=o(815135);const u=(d=r.Button,a().forwardRef((function(e,t){var o=e.disabled,r=e.className,n=e.onClick,i=void 0===n?function(){}:n,p=function(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}(e,c);return a().createElement(d,s({ref:t,className:o?l()("disabled",r):r,onClick:function(){o||i.apply(void 0,arguments)}},p),p.children)})));var d;(0,p.Z)(r.Button)},698772:(e,t,o)=>{"use strict";o.d(t,{Z:()=>E});var r=o(893379),n=o.n(r),a=o(172704);n()(a.Z,{insert:"head",singleton:!1}),a.Z.locals;var i=o(675263),l=o.n(i),c=o(124852),s=o.n(c),p=o(480681);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function f(e,t,o){return t=m(t),function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(e,y()?Reflect.construct(t,o||[],m(e).constructor):t.apply(e,o))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function b(e,t,o){return(t=g(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function g(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:String(t)}var T=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return b(v(e=f(this,t,[].concat(r))),"onFilter",(function(t){e.props.onFilter(t.target.value)})),b(v(e),"onClear",(function(){e.props.onFilter("")})),e}var o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){var e=this.props.filterText?s().createElement(p.OverlayTrigger,{placement:"bottom",overlay:s().createElement(p.Tooltip,{id:"mapstore-toc-filter"},this.props.tooltipClear)},s().createElement(p.Glyphicon,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):s().createElement(p.Glyphicon,{className:"text-primary",glyph:"filter"});return s().createElement(p.FormGroup,{className:"mapstore-filter"},s().createElement(p.InputGroup,null,s().createElement(p.FormControl,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),s().createElement(p.InputGroup.Addon,{className:"square-button-md"},this.props.loading?s().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&d(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),t}(s().Component);b(T,"propTypes",{loading:l().bool,filterText:l().string,filterPlaceholder:l().oneOfType([l().object,l().string]),onFilter:l().func,onFocus:l().func,tooltipClear:l().oneOfType([l().object,l().string])}),b(T,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const E=T},399534:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var r=o(461365),n=o(356936);const a=(0,r.Z)(n.h_)},808224:(e,t,o)=>{"use strict";o.d(t,{Z:()=>f});var r=o(124852),n=o.n(r),a=o(480681),i=o(830049);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){var r,n,a,i;r=e,n=t,a=o[t],i=function(e,t){if("object"!=l(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n),(n="symbol"==l(i)?i:String(i))in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,a,i,l=[],c=!0,s=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(r=a.call(o)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var d={Line:function(e){var t=e.symbolizer,o=0===t.width?1:t.width>7?7:t.width;return n().createElement("svg",{viewBox:"0 0 50 50"},n().createElement("path",{d:"M ".concat(o," ").concat(o," L ").concat(50-o," ").concat(50-o),stroke:t.color,strokeWidth:o,strokeDasharray:t.dasharray?"18 18":null,strokeLinecap:t.cap,strokeLinejoin:t.join,strokeOpacity:t.opacity}))},Fill:function(e){var t=e.symbolizer;return n().createElement("svg",{viewBox:"0 0 50 50"},n().createElement("path",{d:"M 1 1 L 1 49 L 49 49 L 49 1 L 1 1",fill:t.color,opacity:t.fillOpacity,stroke:t.outlineColor,strokeWidth:t.outlineWidth,strokeOpacity:t.outlineOpacity}))},Circle:function(e){var t=e.symbolizer;return n().createElement("svg",{viewBox:"0 0 50 50"},n().createElement("circle",{cx:"25",cy:"25",r:"25",fill:t.color,opacity:t.opacity,stroke:t.outlineColor,strokeWidth:t.outlineWidth,strokeOpacity:t.outlineOpacity}))},Mark:function(e){var t=e.symbolizer,o=p((0,r.useState)(null),2),a=o[0],l=o[1],c=(0,r.useRef)();(0,r.useEffect)((function(){return c.current=!0,function(){c.current=!1}}),[]),(0,r.useEffect)((function(){(0,i.$O)(t).then((function(e){c.current&&l(e)}))}),[t]);var s=t.rotate,u=t.opacity,d={transform:"rotate(".concat(s,"deg)"),opacity:u};return n().createElement("svg",{viewBox:"0 0 50 50",style:d},a&&n().createElement("image",{href:a.src,height:"50",width:"50"}))},Icon:function(e){var t=e.symbolizer,o=p((0,r.useState)(null),2),i=o[0],l=o[1],c=(0,r.useRef)();return(0,r.useEffect)((function(){return c.current=!0,function(){c.current=!1}}),[]),(0,r.useEffect)((function(){if(null!=t&&t.image){var e=new Image;e.onload=function(){c.current&&l(e)},e.onerror=function(){c.current&&l(null)},e.src=t.image}}),[null==t?void 0:t.image]),i?n().createElement("svg",{viewBox:"0 0 50 50",style:{transform:"rotate(".concat(t.rotate,"deg)"),opacity:t.opacity}},n().createElement("image",{href:i.src,height:"50",width:"50"})):n().createElement(a.Glyphicon,{glyph:"point"})},Model:function(){return n().createElement(a.Glyphicon,{glyph:"model"})},Text:function(e){var t,o=e.symbolizer;return n().createElement("svg",{viewBox:"0 0 16 16"},n().createElement("text",{x:"8",y:"8","text-anchor":"middle","alignment-baseline":"middle",style:s({fontSize:o.size<14?o.size:14,fill:o.color,fontFamily:null==o||null===(t=o.font)||void 0===t?void 0:t.join(", "),fontStyle:o.fontStyle,fontWeight:o.fontWeight},o.haloWidth&&o.haloColor&&{paintOrder:"stroke",stroke:o.haloColor,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"})},"T"))}};const f=function(e){var t,o=e.rule,r=(0,i.mL)((null==o||null===(t=o.symbolizers)||void 0===t?void 0:t[0])||{},{properties:{}}),a=d[r.kind];return a?n().createElement("div",{className:"ms-rule-legend-icon"},n().createElement(a,{symbolizer:r})):null}},902054:(e,t,o)=>{"use strict";o.d(t,{Yu:()=>i,F3:()=>l,Gu:()=>c,qs:()=>s});var r=o(22222),n=o(675110),a=o(900012),i=((0,r.P1)([n.l2],(function(e){return e.find(a.cO)})),(0,r.P1)([n.l2],(function(e){return e.filter(a.cO)}))),l=function(e){var t=(0,n.Iz)(e);return t&&(0,a.cO)(t)?t:null},c=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.session},s=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.featureId}},142523:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>Ct});var r=o(675263),n=o.n(r),a=o(124852),i=o.n(a),l=o(171703),c=o(867076),s=o(480681),p=o(580416),u=o(640512),d=o(690825),f=o(801550),y=o(197395),m=o(902054),v=o(675110),h=o(671314),b=o(800827),g=o(308316),T=o(607147),E=o(307877),O=o(274621),w=o(38842),_=o(624262),L=o(552259),S=o(86638),R=o(805346),A=o(727418),P=o.n(A),x=o(624273),j=o.n(x),C=o(513218),D=o.n(C),G=o(91175),I=o.n(G),N=o(313311),M=o.n(N),k=o(59854),F=o.n(k),Z=o(782904),Y=o(557579),B=o(931273),H=o(788113),U=o(93152),W=o(784715),q=o(618446),z=o.n(q),Q=o(221338),V=o(698772);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function X(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}function $(e,t,o){return t=ee(t),function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return te(e)}(e,J()?Reflect.construct(t,o||[],ee(e).constructor):t.apply(e,o))}function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function re(e,t,o){return(t=ne(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function ne(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:String(t)}var ae=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return re(te(e=$(this,t,[].concat(r))),"renderTitle",(function(){return i().createElement(s.Row,null,i().createElement(s.Col,{xs:12,className:"mapstore-toc-head-title-container text-center no-border"},i().createElement("div",{className:"mapstore-toc-head-title",title:e.props.title},i().createElement(s.Glyphicon,{glyph:"1-map"}),"  ",e.props.title)))})),re(te(e),"renderFilter",(function(){return i().createElement(s.Row,null,i().createElement(s.Col,{xs:12,className:"text-center"},i().createElement(V.Z,{onFocus:e.props.onClear,filterPlaceholder:e.props.filterPlaceholder,tooltipClear:e.props.filterTooltipClear,filterText:e.props.filterText,onFilter:e.props.onFilter})))})),re(te(e),"renderTools",(function(){return i().createElement(s.Row,null,i().createElement(s.Col,{xs:12,className:"text-center"},e.props.toolbar))})),e}var o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){var e=[this.props.showTools,this.props.showFilter,this.props.showTitle].filter((function(e){return e})),t=e.length>0?" toc-head-sections-"+e.length:" toc-head-sections";return i().createElement("div",{className:"mapstore-toc-head"+t},i().createElement(s.Grid,{fluid:!0},this.props.showTitle?this.renderTitle():null,this.props.showFilter?this.renderFilter():null,this.props.showTools?this.renderTools():null))}}])&&X(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),t}(i().Component);re(ae,"propTypes",{title:n().string,filterText:n().string,filterPlaceholder:n().oneOfType([n().object,n().string]),showTitle:n().bool,showFilter:n().oneOfType([n().bool,n().number]),showTools:n().bool,toolbar:n().object,onFilter:n().func,onClear:n().func,filterTooltipClear:n().oneOfType([n().object,n().string])}),re(ae,"defaultProps",{title:"",filterText:"",filterPlaceholder:"Filter",showTitle:!0,showFilter:!0,showTools:!0,toolbar:null,onFilter:function(){},onClear:function(){},filterTooltipClear:"Clear"});const ie=ae;var le=o(490173),ce=o(950966),se=o(572688),pe=o(893379),ue=o.n(pe),de=o(393483);ue()(de.Z,{insert:"head",singleton:!1}),de.Z.locals;var fe=o(701469),ye=o.n(fe),me=o(747037),ve=o.n(me),he=o(382571),be=o.n(he),ge=o(807472),Te=o(399534),Ee=o(380876),Oe=o(3674),we=o.n(Oe),_e=o(761239),Le=o(611847),Se=o(38560);function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ae(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Pe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(o),!0).forEach((function(t){Ne(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Ae(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function xe(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Me(r.key),r)}}function je(e,t,o){return t=De(t),function(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ge(e)}(e,Ce()?Reflect.construct(t,o||[],De(e).constructor):t.apply(e,o))}function Ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ce=function(){return!!e})()}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function Ne(e,t,o){return(t=Me(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Me(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:String(t)}var ke=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ne(Ge(o=je(this,t,[e])),"renderMetadata",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=function(e,t){return i().createElement("div",{style:{display:"flex",flexDirection:"row"}},e,i().createElement(Se.Z,{style:{margin:"4px 0 0 4px"},className:"square-button-md no-border",onClick:function(){return function(e,t){o.setState({collapsed:Pe(Pe({},o.state.collapsed),{},Ne({},e,t))})}(t,!o.state.collapsed[t])}},i().createElement(s.Glyphicon,{glyph:o.state.collapsed[t]?"plus":"minus"})))},a=we()(e).filter((function(e){return"references"!==e})).map((function(t){var a,l,c=e[t],s="".concat(r,".").concat(t),p="toc.layerMetadata.".concat(t),u=(0,S.S$)(o.context.messages,p)===p?i().createElement(R.Z,{msgId:"toc.layerMetadata.defaultPropName",msgParams:{propName:t}}):i().createElement(R.Z,{msgId:p}),d=function(e){return i().createElement("tr",null,i().createElement("td",null,u),i().createElement("td",null,e))};if(ye()(c))if(c.length){var f="toc.layerMetadata.itemTitles.".concat(t),y=(0,S.S$)(o.context.messages,f),m=y===f?(0,S.S$)(o.context.messages,"toc.layerMetadata.itemTitles.default"):y,v=c.map((function(e,t){var r,a=(r=t,"".concat(s,"@item_").concat(r));return D()(e)?o.renderMetadata(e,c.length>1?n(i().createElement("h4",null,"".concat(m," #").concat(t+1)),a):null,a):i().createElement("li",{key:t},e)}));a=D()(c[0])?(l=i().createElement("div",null,n(i().createElement("h4",null,u),s),o.state.collapsed[s]?null:i().createElement("div",null,v)),i().createElement("tr",null,i().createElement("td",{colSpan:"2"},l))):d(i().createElement("ul",null,v))}else a=null;else if(ve()(c)){var h=(0,_e.v)(c),b=(0,Le.K2)(c);a=d(h||b?i().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:b?c:"mailto:".concat(c)},c):c)}return a})).filter((function(e){return!!e}));return i().createElement("div",{style:r?{padding:"8px"}:{}},t,o.state.collapsed[r]?null:i().createElement(s.Table,null,i().createElement("tbody",null,a)))})),o.state={collapsed:{}},o}var o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(t,e),o=t,(r=[{key:"renderEmpty",value:function(){return i().createElement("div",null,i().createElement(R.Z,{msgId:"toc.layerMetadata.emptyMetadata"}))}},{key:"render",value:function(){var e=this.props.model;return we()(e).length?i().createElement("div",{style:{maxHeight:"400px",overflow:"auto"},id:e.identifier},this.renderMetadata(e)):this.renderEmpty()}}])&&xe(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),t}(i().Component);Ne(ke,"propTypes",{model:n().object}),Ne(ke,"contextTypes",{messages:n().object}),Ne(ke,"defaultProps",{model:{}});const Fe=ke;function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function Ye(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qe(r.key),r)}}function Be(e,t,o){return t=Ue(t),function(e,t){if(t&&("object"===Ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return We(e)}(e,He()?Reflect.construct(t,o||[],Ue(e).constructor):t.apply(e,o))}function He(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(He=function(){return!!e})()}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,t){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qe(e,t)}function ze(e,t,o){return(t=Qe(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Qe(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ze(t)?t:String(t)}var Ve=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return ze(We(e=Be(this,t,[].concat(r))),"onDelete",(function(){e.props.hideLayerMetadata()})),ze(We(e),"onClose",(function(){e.props.hideLayerMetadata()})),ze(We(e),"getTemplate",(function(){var t=e.props.metadataTemplate||Fe;if(ye()(t)||ve()(t)){var o=ye()(t)?t.join("\n"):t;return i().createElement(be(),{model:e.props.layerMetadata.metadataRecord,template:o,renderContent:Ee.Z})}var r=t;return i().createElement(r,{model:e.props.layerMetadata.metadataRecord})})),ze(We(e),"renderBodyTemplate",(function(){return e.props.layerMetadata.maskLoading?null:e.getTemplate()})),e}var o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){var e=i().createElement("span",{role:"footer"});return this.props.layerMetadata.expanded?i().createElement(Te.Z,null,i().createElement(ge.Z,{maskLoading:this.props.layerMetadata.maskLoading,id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},i().createElement("span",{role:"header"},i().createElement("span",{className:"layer-settings-metadata-panel-title"},this.props.layerMetadataPanelTitle),i().createElement("button",{onClick:this.onClose,className:"layer-settings-metadata-panel-close close"},this.props.closeGlyph?i().createElement(s.Glyphicon,{glyph:this.props.closeGlyph}):i().createElement("span",null,"×"))),i().createElement("div",{role:"body",style:{minWidth:"500px"}},this.renderBodyTemplate()),e)):null}}])&&Ye(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),t}(i().Component);ze(Ve,"propTypes",{id:n().string,layerMetadata:n().object,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func]),hideLayerMetadata:n().func,closeGlyph:n().string,panelStyle:n().object,panelClassName:n().string,maskLoading:n().bool,layerMetadataPanelTitle:n().oneOfType([n().string,n().object])}),ze(Ve,"defaultProps",{id:"mapstore-layer-settings-metadata",layerMetadata:{expanded:!1},metadataTemplate:null,closeGlyph:"1-close",panelStyle:{},panelClassName:"toolbar-panel portal-dialog",maskLoading:!0,layerMetadataPanelTitle:""});const Ke=Ve;function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},$e.apply(this,arguments)}function Je(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function et(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(o),!0).forEach((function(t){lt(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Je(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function tt(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ct(r.key),r)}}function ot(e,t,o){return t=nt(t),function(e,t){if(t&&("object"===Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return at(e)}(e,rt()?Reflect.construct(t,o||[],nt(e).constructor):t.apply(e,o))}function rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rt=function(){return!!e})()}function nt(e){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nt(e)}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function lt(e,t,o){return(t=ct(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function ct(e){var t=function(e,t){if("object"!=Xe(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xe(t)?t:String(t)}var st=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return lt(at(e=ot(this,t,[].concat(r))),"state",{showDeleteDialog:!1}),lt(at(e),"isNestedGroup",(function(){var t=e.props.selectedGroups.map((function(e){return e.id.split(".")}));return I()(t.reduce((function(e,t){return e[0]===t[0]?t:[!1]}),t[0]))})),lt(at(e),"isLoading",(function(){return I()(e.props.selectedLayers.filter((function(e){return e.loading})))})),lt(at(e),"getStatus",(function(){var t=e.props,o=t.selectedLayers,r=t.selectedGroups,n=e.isNestedGroup(),a=0===o.length&0===r.length?"DESELECT":"";return a=1===o.length&0===r.length?"LAYER":a,a=n?"GROUP":a,a=o.length>1&0===r.length?"LAYERS":a,a=r.length>1&&!n?"GROUPS":a,e.props.selectedLayers.length>0&&e.props.selectedLayers.filter((function(e){return"Error"===e.loadingError})).length===e.props.selectedLayers.length?"".concat(a,"_LOAD_ERROR"):a})),lt(at(e),"getSelectedGroup",(function(){return e.props.selectedGroups.length>0&&e.props.selectedGroups[e.props.selectedGroups.length-1]})),lt(at(e),"getSelectedNodeDepth",(function(){return"DESELECT"===e.getStatus()?0:e.getSelectedGroup().id.split(".").length+1})),lt(at(e),"addLayer",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddLayer(t&&t.id)})),lt(at(e),"addGroup",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddGroup(t&&t.id)})),lt(at(e),"browseData",(function(){var t,o=e.props.selectedLayers[0]||{};e.props.onToolsActions.onBrowseData(et(et({},o),{},{url:(null==o||null===(t=o.search)||void 0===t?void 0:t.url)||o.url}))})),lt(at(e),"download",(function(){var t;e.props.onToolsActions.onDownload({url:(null===(t=e.props.selectedLayers[0].search)||void 0===t?void 0:t.url)||e.props.selectedLayers[0].url,name:e.props.selectedLayers[0].name,id:e.props.selectedLayers[0].id})})),lt(at(e),"checkBbox",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),o=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"};return!!I()(t)&&"differentCRS"!==o.crs&&o.crs})),lt(at(e),"zoomTo",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),o=t.length>1?t.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),t[0]):t[0];e.props.onToolsActions.onZoom(o.bounds,o.crs)})),lt(at(e),"showSettings",(function(t){e.props.settings.expanded?e.props.onToolsActions.onHideSettings():"LAYER"===t||"LAYER_LOAD_ERROR"===t?e.props.onToolsActions.onSettings(e.props.selectedLayers[0].id,"layers",{opacity:parseFloat(void 0!==e.props.selectedLayers[0].opacity?e.props.selectedLayers[0].opacity:1)}):"GROUP"===t&&e.props.onToolsActions.onSettings(e.props.selectedGroups[e.props.selectedGroups.length-1].id,"groups",{})})),lt(at(e),"showMetadata",(function(){e.props.layerMetadata.expanded?e.props.onToolsActions.onHideLayerMetadata():e.props.onToolsActions.onGetMetadataRecord(e.props.options.metadataOptions)})),lt(at(e),"removeNodes",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"layers")})),e.props.selectedGroups.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"groups")})),e.props.onToolsActions.onClear(),e.closeDeleteDialog()})),lt(at(e),"reload",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onShow(t.id,{visibility:!0}),e.props.onToolsActions.onReload(t.id)}))})),lt(at(e),"closeDeleteDialog",(function(){e.setState({showDeleteDialog:!1})})),lt(at(e),"displayDeleteDialog",(function(){e.setState({showDeleteDialog:!0})})),e}var o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){var e=this,t=this.getStatus(),o=this.checkBbox(),r=o&&le.default.defs(o),n=i().createElement(Ke,{key:"toollayermetadatamodal",layerMetadata:this.props.layerMetadata,metadataTemplate:this.props.metadataTemplate,hideLayerMetadata:this.props.onToolsActions.onHideLayerMetadata,layerMetadataPanelTitle:this.props.text.layerMetadataPanelTitle});return this.props.activateTool.activateToolsContainer?i().createElement(s.ButtonGroup,null,this.props.activateTool.activateLayerInfoTool&&"DESELECT"===t?i().createElement(ce.Z,{key:"layerInfo",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-layerInfo"},this.props.text.layerInfoTooltip)},i().createElement(Se.Z,{key:"layerInfo",bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onLayerInfo},i().createElement(s.Glyphicon,{glyph:"layer-info"}))):null,!this.props.activateTool.activateAddLayer||"DESELECT"!==t&&"GROUP"!==t?null:i().createElement(ce.Z,{key:"addLayer",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-addLayer"},"GROUP"===t?this.props.text.addLayerToGroupTooltip:this.props.text.addLayerTooltip)},i().createElement(Se.Z,{key:"addLayer",bsStyle:"primary",className:"square-button-md",onClick:this.addLayer},i().createElement(s.Glyphicon,{glyph:"add-layer"}))),this.props.activateTool.activateAddGroup&&("DESELECT"===t||"GROUP"===t)&&this.getSelectedNodeDepth()<=this.props.maxDepth?i().createElement(ce.Z,{key:"addGroup",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-addGroup"},"GROUP"===t?this.props.text.addSubGroupTooltip:this.props.text.addGroupTooltip)},i().createElement(Se.Z,{key:"addGroup",bsStyle:"primary",className:"square-button-md",onClick:this.addGroup},i().createElement(s.Glyphicon,{glyph:"add-folder"}))):null,this.props.activateTool.activateZoomTool&&("LAYER"===t||"GROUP"===t||"LAYERS"===t||"GROUPS"===t)&&o?i().createElement(ce.Z,{key:"zoomTo",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-zoomTo"},r?this.props.text.zoomToTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"]:i().createElement(R.Z,{msgId:"toc.epsgNotSupported",msgParams:{epsg:o||" "}}))},i().createElement(Se.Z,{bsStyle:"primary",className:"square-button-md",style:r?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"default"},onClick:r?this.zoomTo:function(){}},i().createElement(s.Glyphicon,{glyph:"zoom-to"}))):null,!this.props.activateTool.activateSettingsTool||"LAYER"!==t&&"GROUP"!==t&&"LAYER_LOAD_ERROR"!==t||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(ce.Z,{key:"settings",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-settings"},this.props.text.settingsTooltip["LAYER_LOAD_ERROR"===t?"LAYER":t])},i().createElement(Se.Z,{active:this.props.settings.expanded,bsStyle:this.props.settings.expanded?"success":"primary",className:"square-button-md",onClick:function(){e.showSettings(t)}},i().createElement(s.Glyphicon,{glyph:"wrench"}))),!this.props.activateTool.activateLayerFilterTool||"LAYER"!==t&&"LAYER_LOAD_ERROR"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(ce.Z,{key:"queryPanel",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-layerFilter"},this.props.text.layerFilterTooltip)},i().createElement(Se.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onQueryBuilder},i().createElement(s.Glyphicon,{glyph:"filter-layer"}))),!this.props.activateTool.activateQueryTool||"LAYER"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(ce.Z,{key:"featuresGrid",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-featuresGrid"},this.props.text.featuresGridTooltip)},i().createElement(Se.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.browseData},i().createElement(s.Glyphicon,{glyph:"features-grid"}))),(!this.props.activateTool.activateRemoveLayer||"LAYER"!==t&&"LAYERS"!==t&&"LAYER_LOAD_ERROR"!==t&&"LAYERS_LOAD_ERROR"!==t)&&(!this.props.activateTool.activateRemoveGroup||"GROUP"!==t&&"GROUPS"!==t&&"GROUP_LOAD_ERROR"!==t&&"GROUPS_LOAD_ERROR"!==t)||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(ce.Z,{key:"removeNode",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-trash"},this.props.selectedGroups.length?this.props.text.trashTooltip.GROUP:this.props.text.trashTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},i().createElement(Se.Z,{active:this.state.showDeleteDialog,bsStyle:this.props.settings.showDeleteDialog?"success":"primary",className:"square-button-md",onClick:this.displayDeleteDialog},i().createElement(s.Glyphicon,{glyph:"trash"}))),!this.isLoading()&&"LAYER_LOAD_ERROR"===t||"LAYERS_LOAD_ERROR"===t?i().createElement(ce.Z,{key:"reload",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-reload"},this.props.text.reloadTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},i().createElement(Se.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.reload},i().createElement(s.Glyphicon,{glyph:"refresh"}))):null,!this.props.activateTool.activateWidgetTool||"LAYER"!==t||1!==this.props.selectedLayers.length||!this.props.selectedLayers[0].search||"vector"===this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(ce.Z,{key:"widgets",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-widgets"},this.props.text.createWidgetTooltip)},i().createElement(Se.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onNewWidget},i().createElement(s.Glyphicon,{glyph:"stats"}))),!this.props.activateTool.activateDownloadTool||"LAYER"!==t||"wms"!==this.props.selectedLayers[0].type&&!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded?null:i().createElement(ce.Z,{key:"downloadTool",placement:"top",overlay:i().createElement(s.Tooltip,{id:"toc-tooltip-downloadTool"},this.props.text.downloadToolTooltip)},i().createElement(Se.Z,{bsStyle:this.props.layerdownload.expanded?"success":"primary",className:"square-button-md",onClick:this.download},i().createElement(s.Glyphicon,{glyph:"download"}))),!this.props.activateTool.activateMetedataTool||"LAYER"!==t||this.props.settings.expanded||this.props.layerdownload.expanded?null:i().createElement(ce.Z,{key:"layerMetadata",placement:"top",overlay:i().createElement(s.Tooltip,{id:"legend-tooltip-metadata"},this.props.text.layerMetadataTooltip)},i().createElement(Se.Z,{key:"layer-metadata",bsStyle:this.props.layerMetadata.expanded?"success":"primary",className:"square-button-md",onClick:function(){return e.showMetadata()}},i().createElement(s.Glyphicon,{glyph:"info-sign"}))),this.props.items.filter((function(o){var r=o.selector;return(void 0===r?function(){return!0}:r)(et(et({},e.props),{},{status:t}))})).map((function(o,r){var n=o.Component,a=o.name;return i().createElement(n,$e({key:null!=a?a:"item-".concat(r)},e.props,{status:t}))})),i().createElement(se.Z,{ref:"removelayer",options:{animation:!1,className:"modal-fixed"},show:this.state.showDeleteDialog,onHide:this.closeDeleteDialog,onClose:this.closeDeleteDialog,onConfirm:this.removeNodes,titleText:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupText:this.props.text.confirmDeleteText,confirmText:this.props.text.confirmDeleteConfirmText,cancelText:this.props.text.confirmDeleteCancelText,body:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupMessage:this.props.text.confirmDeleteMessage}),n):null}}])&&tt(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),t}(i().Component);lt(st,"propTypes",{groups:n().array,items:n().array,layers:n().array,selectedLayers:n().array,generalInfoFormat:n().string,selectedGroups:n().array,onToolsActions:n().object,text:n().object,activateTool:n().object,options:n().object,style:n().object,settings:n().object,layerMetadata:n().object,layerdownload:n().object,maxDepth:n().number,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func])}),lt(st,"defaultProps",{groups:[],items:[],layers:[],selectedLayers:[],selectedGroups:[],onToolsActions:{onZoom:function(){},onNewWidget:function(){},onBrowseData:function(){},onQueryBuilder:function(){},onUpdate:function(){},onRemove:function(){},onClear:function(){},onSettings:function(){},onUpdateSettings:function(){},onRetrieveLayerData:function(){},onHideSettings:function(){},onReload:function(){},onAddLayer:function(){},onAddGroup:function(){},onDownload:function(){},onGetMetadataRecord:function(){},onHideLayerMetadata:function(){},onShow:function(){},onLayerInfo:function(){}},maxDepth:3,text:{settingsText:"",opacityText:"",elevationText:"",saveText:"",closeText:"",confirmDeleteText:"",confirmDeleteMessage:"",confirmDeleteConfirmText:"",confirmDeleteCancelText:"",createWidgetTooltip:"",addLayerTooltip:"",addLayerToGroupTooltip:"",addGroupTooltip:"",addSubGroupTooltip:"",zoomToTooltip:{LAYER:"",LAYERS:""},settingsTooltip:{LAYER:"",GROUP:""},featuresGridTooltip:"",downloadToolTooltip:"",trashTooltip:{LAYER:"",LAYERS:"",GROUP:""},reloadTooltip:{LAYER:"",LAYERS:""},layerMetadataTooltip:"",layerMetadataPanelTitle:"",layerFilter:"",layerInfoTooltip:""},activateTool:{activateToolsContainer:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateZoomTool:!0,activateQueryTool:!0,activateDownloadTool:!0,activateSettingsTool:!0,activateAddLayer:!0,activateAddGroup:!0,includeDeleteButtonInSettings:!1,activateMetedataTool:!0,activateLayerFilterTool:!0,activateLayerInfoTool:!0},options:{modalOptions:{},metadataOptions:{},settingsOptions:{}},style:{chartStyle:{}},settings:{},layerMetadata:{},layerdownload:{},metadataTemplate:null});const pt=st;var ut=o(581859),dt=o(422863),ft=o(229423),yt=o(181251);function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},vt.apply(this,arguments)}function ht(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_t(r.key),r)}}function bt(e,t,o){return t=Tt(t),function(e,t){if(t&&("object"===mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Et(e)}(e,gt()?Reflect.construct(t,o||[],Tt(e).constructor):t.apply(e,o))}function gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gt=function(){return!!e})()}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e,t){return Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ot(e,t)}function wt(e,t,o){return(t=_t(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _t(e){var t=function(e,t){if("object"!=mt(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mt(t)?t:String(t)}var Lt=function e(t,o){return t.reduce((function(t,r){var n=P()({},r);return n.nodes&&(n=P()({},n,{nodes:e(n.nodes,o)})),o.forEach((function(e){n=e.func(n)?P()({},n,e.options):P()({},n)})),t.push(n),t}),[])},St=function(e,t,o){return-1!==((D()(e.title)?e.title[o]||e.title.default:e.title)||e.name||"").toLowerCase().indexOf(t.toLowerCase())},Rt=(0,W.oz)(z())((function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active}),v.Bt,v.jN,h.yn,v.yj,v.lI,b.Od,g.Pz,g.KV,v.NP,v.wA,v.l2,b.Zs,H.JF,T.PJ,E.us,U.c0,O.np,w.wk,m.F3,(function(e,t,o,r,n,a,i,l,c,s,p,u,d,f,y,m,v,h,b,g){return{enabled:e,groups:t,settings:o,swipeSettings:r,layerMetadata:n,layerdownload:a,currentZoomLvl:i&&i.zoom,scales:(0,L.yu)(i&&i.projection||"EPSG:3857",i&&i.mapOptions&&i.mapOptions.view&&i.mapOptions.view.DPI||null),currentLocale:l,currentLocaleLanguage:c,selectedNodes:s,filterText:p,generalInfoFormat:m,layers:u,selectedLayers:u.filter((function(e){return I()(s.filter((function(t){return t===e.id})))})),noFilterResults:0===u.filter((function(e){return St(e,p,l)})).length,updatableLayersCount:u.filter((function(e){return"background"!==e.group&&("wms"===e.type||"wmts"===e.type)})).length,selectedGroups:s.map((function(e){return(0,_.Mk)(t,e)})).filter((function(e){return e&&e.nodes})),mapName:d,filteredGroups:Lt(t,[{options:{showComponent:!0},func:function(){return!p}},{options:{loadingError:!0},func:function(e){return I()((e.nodes||[]).filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return p&&I()((e.nodes||[]).filter((function(t){return St(t,p,l)||t.nodes&&I()(e.nodes.filter((function(e){return e.showComponent})))})))}},{options:{showComponent:!1},func:function(e){return I()((e.nodes||[]).filter((function(e){return e.hidden})))&&1===e.nodes.length}},{options:{exclusiveMapType:!0},func:function(e){return"3dtiles"===e.type&&!v||"cog"===e.type&&v}}]),catalogActive:f,activateWidgetTool:y,user:h,isLocalizedLayerStylesEnabled:b,selectedAnnotationLayer:g}})),At=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return wt(Et(e=bt(this,t,[].concat(r))),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),wt(Et(e),"getDefaultGroup",(function(){var t=e.props.groupNodeComponent||ut.Z;return i().createElement(t,vt({onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null},e.props.groupOptions,{titleTooltip:e.props.activateTitleTooltip,propertiesChangeHandler:e.props.groupPropertiesChangeHandler,onToggle:e.props.onToggleGroup,style:e.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:e.props.visibilityCheckType,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null}))})),wt(Et(e),"getDefaultLayer",(function(){var t=e.props.layerNodeComponent||dt.Z,o=(e.props.resolutions||(0,L.MR)())[F()(e.props.currentZoomLvl)];return i().createElement(t,vt({},e.props.layerOptions,{titleTooltip:e.props.activateTitleTooltip,showFullTitleOnExpand:e.props.showFullTitleOnExpand,onToggle:e.props.onToggleLayer,activateOpacityTool:e.props.activateOpacityTool,onContextMenu:e.props.onContextMenu,propertiesChangeHandler:e.props.layerPropertiesChangeHandler,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null,visibilityCheckType:e.props.visibilityCheckType,activateLegendTool:e.props.activateLegendTool,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,filterText:e.props.filterText,onUpdateNode:e.props.updateNode,hideOpacityTooltip:e.props.hideOpacityTooltip,language:e.props.isLocalizedLayerStylesEnabled?e.props.currentLocaleLanguage:null,resolution:o}))})),wt(Et(e),"renderTOC",(function(){var t=e.getDefaultGroup(),o=e.getDefaultLayer(),r=[e.props.activateToolsContainer,e.props.activateFilterLayer,e.props.activateMapTitle].filter((function(e){return e})),n=r.length>0?" toc-body-sections-"+r.length:" toc-body-sections";return i().createElement("div",null,i().createElement(ie,{title:e.props.mapName,showTitle:e.props.activateMapTitle,showFilter:e.props.activateFilterLayer&&(e.props.groups.filter((function(e){return(e.nodes||[]).length}))||[]).length,showTools:e.props.activateToolsContainer,onClear:function(){e.props.onSelectNode()},onFilter:e.props.onFilter,filterTooltipClear:i().createElement(R.Z,{msgId:"toc.clearFilter"}),filterPlaceholder:(0,S.S$)(e.context.messages,"toc.filterPlaceholder"),filterText:e.props.filterText,toolbar:i().createElement(pt,{items:e.props.items.filter((function(e){return"toolbar"===e.target})),groups:e.props.groups,layers:e.props.layers,selectedLayers:e.props.selectedLayers,selectedGroups:e.props.selectedGroups,generalInfoFormat:e.props.generalInfoFormat,settings:e.props.settings,swipeSettings:e.props.swipeSettings,layerMetadata:e.props.layerMetadata,layerdownload:e.props.layerdownload,metadataTemplate:e.props.metadataTemplate,maxDepth:e.props.maxDepth,activateTool:{activateToolsContainer:e.props.activateToolsContainer,activateRemoveLayer:e.props.activateRemoveLayer,activateRemoveGroup:e.props.activateRemoveGroup,activateZoomTool:e.props.activateZoomTool,activateQueryTool:e.props.activateQueryTool,activateDownloadTool:e.props.activateDownloadTool,activateSettingsTool:e.props.activateSettingsTool,activateAddLayer:e.props.activateAddLayerButton&&!e.props.catalogActive,activateAddGroup:e.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:e.props.activateMetedataTool,activateWidgetTool:e.props.activateWidgetTool,activateLayerFilterTool:e.props.activateLayerFilterTool,activateLayerInfoTool:e.props.updatableLayersCount>0&&e.props.activateLayerInfoTool},options:{modalOptions:{},metadataOptions:e.props.metadataOptions,settingsOptions:e.props.settingsOptions},style:{chartStyle:e.props.chartStyle},text:{settingsText:i().createElement(R.Z,{msgId:"layerProperties.windowTitle"}),opacityText:i().createElement(R.Z,{msgId:"opacity"}),elevationText:i().createElement(R.Z,{msgId:"elevation"}),saveText:i().createElement(R.Z,{msgId:"save"}),closeText:i().createElement(R.Z,{msgId:"close"}),confirmDeleteText:i().createElement(R.Z,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:i().createElement(R.Z,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:i().createElement(R.Z,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:i().createElement(R.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:i().createElement(R.Z,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:i().createElement(R.Z,{msgId:"cancel"}),addLayer:i().createElement(R.Z,{msgId:"toc.addLayer"}),addLayerTooltip:i().createElement(R.Z,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:i().createElement(R.Z,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:i().createElement(R.Z,{msgId:"toc.addGroup"}),addSubGroupTooltip:i().createElement(R.Z,{msgId:"toc.addSubGroup"}),createWidgetTooltip:i().createElement(R.Z,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:i().createElement(R.Z,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:i().createElement(R.Z,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:i().createElement(R.Z,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:i().createElement(R.Z,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:i().createElement(R.Z,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:i().createElement(R.Z,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:i().createElement(R.Z,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:i().createElement(R.Z,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:i().createElement(R.Z,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:i().createElement(R.Z,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:i().createElement(R.Z,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:i().createElement(R.Z,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:i().createElement(R.Z,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:i().createElement(R.Z,{msgId:"toc.layerFilterTooltip"}),layerInfoTooltip:i().createElement(R.Z,{msgId:"toc.layerInfoTooltip"})},onToolsActions:{onZoom:e.props.onZoomToExtent,onNewWidget:e.props.onNewWidget,onBrowseData:e.props.onBrowseData,onQueryBuilder:e.props.onQueryBuilder,onDownload:e.props.onDownload,onUpdate:e.props.updateNode,onRemove:e.props.removeNode,onClear:e.props.onSelectNode,onSettings:e.props.onSettings,onUpdateSettings:e.props.updateSettings,onRetrieveLayerData:e.props.retrieveLayerData,onHideSettings:e.props.hideSettings,onReload:e.props.refreshLayerVersion,onAddLayer:e.props.onAddLayer,onAddGroup:e.props.onAddGroup,onGetMetadataRecord:e.props.onGetMetadataRecord,onHideLayerMetadata:e.props.hideLayerMetadata,onShow:e.props.layerPropertiesChangeHandler,onLayerInfo:e.props.onLayerInfo}})}),i().createElement("div",{className:"mapstore-toc"+n},e.props.noFilterResults&&e.props.filterText?i().createElement("div",null,i().createElement("div",{className:"toc-filter-no-results"},i().createElement(R.Z,{msgId:"toc.noFilteredResults"}))):i().createElement(Q.Z,{onError:e.props.onError,onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null,filter:e.getNoBackgroundLayers,nodes:e.props.filteredGroups},i().createElement(ft.Z,{groupElement:t,layerElement:o}))))})),e}var o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ot(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){return this.props.groups?this.renderTOC():i().createElement("div",null)}}])&&ht(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),t}(i().Component);wt(At,"propTypes",{id:n().number,items:n().array,layers:n().array,buttonContent:n().node,groups:n().array,settings:n().object,swipeSettings:n().object,layerMetadata:n().object,layerdownload:n().object,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func]),refreshMapEnabled:n().bool,groupStyle:n().object,groupPropertiesChangeHandler:n().func,layerPropertiesChangeHandler:n().func,onToggleGroup:n().func,onToggleLayer:n().func,onContextMenu:n().func,onBrowseData:n().func,onQueryBuilder:n().func,onDownload:n().func,onSelectNode:n().func,selectedNodes:n().array,onZoomToExtent:n().func,retrieveLayerData:n().func,onSort:n().func,onSettings:n().func,onRefreshLayer:n().func,onNewWidget:n().func,hideSettings:n().func,updateSettings:n().func,updateNode:n().func,removeNode:n().func,activateTitleTooltip:n().bool,showFullTitleOnExpand:n().bool,activateOpacityTool:n().bool,activateSortLayer:n().bool,activateFilterLayer:n().bool,activateMapTitle:n().bool,activateToolsContainer:n().bool,activateRemoveLayer:n().bool,activateRemoveGroup:n().bool,activateLegendTool:n().bool,activateZoomTool:n().bool,activateQueryTool:n().bool,activateDownloadTool:n().bool,activateSettingsTool:n().bool,activateMetedataTool:n().bool,activateWidgetTool:n().bool,activateLayerInfoTool:n().bool,maxDepth:n().number,visibilityCheckType:n().string,settingsOptions:n().object,chartStyle:n().object,currentZoomLvl:n().number,scales:n().array,layerOptions:n().object,metadataOptions:n().object,spatialOperations:n().array,spatialMethodOptions:n().array,groupOptions:n().object,currentLocale:n().string,currentLocaleLanguage:n().string,onFilter:n().func,filterText:n().string,generalInfoFormat:n().string,selectedLayers:n().array,selectedGroups:n().array,mapName:n().string,filteredGroups:n().array,noFilterResults:n().bool,onAddLayer:n().func,onAddGroup:n().func,onError:n().func,onGetMetadataRecord:n().func,hideLayerMetadata:n().func,activateAddLayerButton:n().bool,activateAddGroupButton:n().bool,activateLayerFilterTool:n().bool,catalogActive:n().bool,refreshLayerVersion:n().func,hideOpacityTooltip:n().bool,layerNodeComponent:n().func,groupNodeComponent:n().func,isLocalizedLayerStylesEnabled:n().bool,onLayerInfo:n().func,onSetSwipeActive:n().func,updatableLayersCount:n().number,onSetSwipeMode:n().func,resolutions:n().func}),wt(At,"contextTypes",{messages:n().object}),wt(At,"defaultProps",{items:[],layers:[],groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onContextMenu:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onRefreshLayer:function(){},onNewWidget:function(){},updateNode:function(){},removeNode:function(){},onSelectNode:function(){},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!0,activateWidgetTool:!1,activateLayerFilterTool:!1,activateLayerInfoTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:function(){},onAddGroup:function(){},onError:function(){},onGetMetadataRecord:function(){},hideLayerMetadata:function(){},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:function(){},metadataTemplate:null,onLayerInfo:function(){},onSetSwipeMode:function(){}});var Pt=(0,c.withPropsOnChange)(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup","layerInfoToolPermissions","activateLayerInfoTool"],(function(e){var t=e.addLayersPermissions,o=void 0===t||t,r=e.removeLayersPermissions,n=void 0===r||r,a=e.sortingPermissions,i=void 0===a||a,l=e.addGroupsPermissions,c=void 0===l||l,s=e.removeGroupsPermissions,p=void 0===s||s,u=e.layerInfoToolPermissions,d=void 0!==u&&u,f=e.activateAddLayerButton,y=e.activateRemoveLayer,m=e.activateSortLayer,v=e.activateAddGroupButton,h=e.activateRemoveGroup,b=e.activateLayerInfoTool,g=e.user,T=function(e,t){var o=g&&"ADMIN"===g.role||!1;return!(!e&&!o)&&t};return{activateAddLayerButton:T(o,f),activateRemoveLayer:T(n,y),activateSortLayer:T(i,m),activateAddGroupButton:T(c,v),activateRemoveGroup:T(p,h),activateLayerInfoTool:T(d,b)}})),xt=(0,c.branch)((function(e){var t=e.checkPlugins;return void 0===t||t}),(0,c.withPropsOnChange)(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor","activateLayerInfoTool","selectedAnnotationLayer"],(function(e){var t=e.items,o=void 0===t?[]:t,r=e.activateAddLayerButton,n=void 0===r||r,a=e.activateAddGroupButton,i=void 0===a||a,l=e.activateQueryTool,c=void 0===l||l,s=e.activateSettingsTool,p=void 0===s||s,u=e.activateLayerFilterTool,d=void 0===u||u,f=e.activateWidgetTool,y=void 0===f||f,m=e.activateLayerInfoTool,v=void 0===m||m,h=e.activateDownloadTool,b=void 0===h||h,g=e.selectedAnnotationLayer;return{activateAddLayerButton:n&&!!M()(o,{name:"MetadataExplorer"})||!1,activateAddGroupButton:i&&!!M()(o,{name:"AddGroup"})||!1,activateSettingsTool:p&&!g&&!!M()(o,{name:"TOCItemsSettings"})||!1,activateQueryTool:c&&!!M()(o,{name:"FeatureEditor"})||!1,activateLayerFilterTool:d&&!!M()(o,{name:"FilterLayer"})||!1,activateWidgetTool:y&&!!M()(o,{name:"WidgetBuilder"})&&!!M()(o,{name:"Widgets"}),activateLayerInfoTool:v&&!!M()(o,{name:"LayerInfo"})||!1,activateDownloadTool:b&&!!M()(o,{name:"LayerDownload"})||!1}}))),jt=(0,l.connect)(Rt,{groupPropertiesChangeHandler:p.WO,layerPropertiesChangeHandler:p.He,retrieveLayerData:d.k,onToggleGroup:(0,_.$0)("groups",p.bh),onToggleLayer:(0,_.$0)("layers",p.bh),onContextMenu:p.pV,onBrowseData:p.Qr,onQueryBuilder:u.Zq,onDownload:p.LR,onSort:p.Dv,onSettings:p.RP,onZoomToExtent:f.Px,hideSettings:p.sF,updateSettings:p.VP,updateNode:p.tV,removeNode:p.ZF,onSelectNode:p.UG,onFilter:p.F5,onAddLayer:Z.pu.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:Z.pu.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:B.ky,onError:y.vU,hideLayerMetadata:p.Jh,onNewWidget:function(){return(0,Y.A4)()},refreshLayerVersion:p.ct,onLayerInfo:Z.Xg.bind(null,"layerinfo","enabled",!0,!1)})((0,c.compose)(Pt,xt)(At));const Ct={TOCPlugin:P()(jt,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:i().createElement(R.Z,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:i().createElement(s.Glyphicon,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:i().createElement("img",{src:j()}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:o(146905).Z,query:o(797301).Z},epics:o(856175).Z(yt.Z)}},671314:(e,t,o)=>{"use strict";o.d(t,{yn:()=>r,IY:()=>n,wQ:()=>a});var r=function(e){return e.swipe&&e.swipe||{active:!1}},n=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.spy)||{radius:80}},a=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.swipe)||{direction:"cut-vertical"}}},443143:(e,t,o)=>{"use strict";o.d(t,{qH:()=>p,qj:()=>u,qq:()=>d,TM:()=>f});var r,n=o(717621),a=o.n(n),i=o(14841),l=o.n(i),c=o(264721),s=o.n(c),p=function(e,t,o,n){var a=e;isNaN(parseFloat(e))&&(a=r.hexToHsv(e)[0]);var i=.5/(o-1),l=t/(o-1),c=[];1===o&&(i=.5,l=t/2);for(var s=0;s<o;s++){var p=a+s*l-t/2,u=i*s+.3,d=u;n&&(p=n.h||p,u=n.s||u,d=n.v||d),c.push(r.hsvToHex(p,u,d,s))}return c},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return a()(e).toHexString()},d=function(e,t,o){var r=a()(e);return e&&r.setAlpha(l()(void 0!==t?t:r.getAlpha())).toRgbString()||o},f=function e(t){var o=Math.round,n=Math.random,a=[o(255*n()),o(255*n()),o(255*n())],i=r.rgbToHex(a);if(t)for(;s()(t,i)||"#000000"===i||"#FFFFFF"===i;)e(t);return i};r={decToHex:function(e){var t="0123456789ABCDEF",o=parseInt(e,10);return o=isNaN(o)?0:o,t.charAt(((o=o>255||o<0?0:o)-o%16)/16)+t.charAt(o%16)},rgbToHex:function(e,t,o){return e instanceof Array?r.rgbToHex(e[0],e[1],e[2]):"#"+r.decToHex(e)+r.decToHex(t)+r.decToHex(o)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,o){if(e instanceof Array)return r.rgbToHsv(e[0],e[1],e[2]);var n,a,i,l,c,s=e/255,p=t/255,u=o/255;switch(n=Math.min(Math.min(s,p),u),i=(a=Math.max(Math.max(s,p),u))-n,a){case n:l=0;break;case s:l=60*(p-u)/i,p<u&&(l+=360);break;case p:l=60*(u-s)/i+120;break;case u:l=60*(s-p)/i+240}return c=0===a?0:1-n/a,[Math.round(l),c,a]},distributedColorsHEX:function(e){for(var t=360/(e-1),o=[],n=function e(t,o,n){var a=e(t,o,n);return r.rgbToHex(a)},a=0;a<e;a++)o.push(n(t*a,.57,.63));return o},sameToneRangeColors:p,hsvToRgb:function(e,t,o){if(e instanceof Array)return r.hsvToRgb(e[0],e[1],e[2]);var n,a,i,l=Math.floor(e/60%6),c=e/60-l,s=o*(1-t),p=o*(1-c*t),u=o*(1-(1-c)*t);switch(l){case 0:n=o,a=u,i=s;break;case 1:n=p,a=o,i=s;break;case 2:n=s,a=o,i=u;break;case 3:n=s,a=p,i=o;break;case 4:n=u,a=s,i=o;break;case 5:n=o,a=s,i=p}return[r.realToDec(n),r.realToDec(a),r.realToDec(i)]},hsvToHex:function(e,t,o){var n=r.hsvToRgb(e,t,o);return r.rgbToHex(n)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var o=r.hexToRgb(t);return r.rgbToHsv(o)}return null},hexToRgb:function(e){var t,o,r,n=e;return"#"===n.charAt(0)&&(n=e.substring(1)),t=n.charAt(0)+n.charAt(1),o=n.charAt(2)+n.charAt(3),r=n.charAt(4)+n.charAt(5),[parseInt(t,16),parseInt(o,16),parseInt(r,16)]},colorToHexStr:u,colorToRgbaStr:d,generateRandomHexColor:f}},611847:(e,t,o)=>{"use strict";o.d(t,{ij:()=>h,w0:()=>b,vl:()=>g,K2:()=>T,Nw:()=>E});var r=o(472500),n=o.n(r),a=o(701469),i=o.n(a),l=o(747037),c=o.n(l),s=o(618446),p=o.n(s),u=o(189734),d=o.n(u),f=o(313311),y=o.n(f),m=o(964210);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var h=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),o=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var r=window.location;o[1]=r.protocol,o[3]=r.hostname,o[4]=r.port,o[5]=e}o[4]=""!==o[4]&&o[4]?o[4]:"https:"===o[1]?"443":"80",o[5]=o[5]?o[5]:e.slice(o[0].length);var n,a,i=(a=6,function(e){if(Array.isArray(e))return e}(n=o)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,a,i,l=[],c=!0,s=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(r=a.call(o)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(n,a)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?v(e,t):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[1],c=i[3],s=i[4],p=i[5],u=0===p.indexOf("/")?p.split("/")[1]:"";return{protocol:l,domain:c,port:s,rootPath:p,applicationRootPath:u}},b=function(e,t){var o=i()(e)?e[0]:e,r=i()(t)?t[0]:t;if(o===r)return!0;if(!o||!r)return!1;if(!c()(o)||!c()(r))return!1;var a=n().parse(o),l=n().parse(r),s=h(o),u=h(r),f=s.protocol===u.protocol,y=s.domain===u.domain,m=s.port===u.port,v=a.pathname===l.pathname,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var o=e?e.split("&").filter((function(e){return!!e})):[],r=t?t.split("&").filter((function(e){return!!e})):[];return p()(d()(o),d()(r))}(a.query,l.query);return f&&m&&y&&v&&b},g=function(e){return m.Qc(e)},T=function(e){return new RegExp(arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/).test(e)},E=function(e,t){var o=new RegExp(arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/).test(e);if(!o)return!1;if(o&&!t)return!0;if(o&&t){var r=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return y()(r,e)})).length}return!1}},393483:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var r=o(923645),n=o.n(r)()((function(e){return e[1]}));n.push([e.id,"\n.msgapi #mapstore-layer-settings {\n    min-width: 400px;\n}\n\n.msgapi .portal-dialog {\n    position: absolute;\n}\n\n@media all and (min-width: 635px) {\n    .msgapi .portal-dialog {\n        left: calc(50% - 315px);\n        top: 100px;\n        max-width: 630px;\n        background-color: #fff;\n    }\n}\n\n@media all and (max-width: 634px) {\n    .msgapi .portal-dialog {\n        width: 100%;\n    }\n}\n",""]);const a=n},161253:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var r=o(923645),n=o.n(r)()((function(e){return e[1]}));n.push([e.id,".msgapi .toc-title {\n    display: inline-block;\n    max-width: 150px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n",""]);const a=n},172704:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var r=o(923645),n=o.n(r)()((function(e){return e[1]}));n.push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""]);const a=n},264317:(e,t,o)=>{"use strict";var r=a(o(1174)),n=a(o(692381));function a(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:n.default,CSSTransitionGroup:r.default}},624273:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woCDCsUqrUEAAAAAQxJREFUOMvN0iFLw1EUBfCf02Q0LGhQQVZekiU/gTAYImpasMi6VVBhwSCsi0kQbIJFsBoMBjHdpKDJMjBaxM3yhCn7z4HF29695xzuue/wxxofNkwp1crl8kKn03kswowVEEvYx25utdCKiO6vAimlKZxh+cfoCo2IeC0USClVcY7Zgo2fsR4Rd1+NUh95CzdDyDCHm4z9LoAueiMcvpexAy0sZgvzBeQnrEXE/SALM3hHFZcDyJd59pFSmh5koY1b1FDHXl61m7+zjpWMaX+RJvoEGjjAKZawncFwjSM0cYidYTlYxQkCGzmt56hgMyIuRkliJZPKWeAlH+9hpChnkUkc52czIt78y/oEtThIARE8NNwAAAAASUVORK5CYII="}}]);