"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[55394],{853331:(t,i,e)=>{e.d(i,{A:()=>r});var n=e(491446),o=e(605971);function s(t,i){t=t??0,this._near=t,i=i??Number.MAX_VALUE,this._far=i}Object.defineProperties(s.prototype,{near:{get:function(){return this._near},set:function(t){this._near=t}},far:{get:function(){return this._far},set:function(t){this._far=t}}}),s.packedLength=2,s.pack=function(t,i,e){if(!(0,n.A)(t))throw new o.A("value is required");if(!(0,n.A)(i))throw new o.A("array is required");return e=e??0,i[e++]=t.near,i[e]=t.far,i},s.unpack=function(t,i,e){if(!(0,n.A)(t))throw new o.A("array is required");return i=i??0,(0,n.A)(e)||(e=new s),e.near=t[i++],e.far=t[i],e},s.equals=function(t,i){return t===i||(0,n.A)(t)&&(0,n.A)(i)&&t.near===i.near&&t.far===i.far},s.clone=function(t,i){if((0,n.A)(t))return(0,n.A)(i)||(i=new s),i.near=t.near,i.far=t.far,i},s.prototype.clone=function(t){return s.clone(this,t)},s.prototype.equals=function(t){return s.equals(this,t)};const r=s},32655:(t,i,e)=>{e.d(i,{A:()=>a});var n=e(591978),o=e(93467);const s=Object.freeze(n.A.fromIso8601("0000-01-01T00:00:00Z")),r=Object.freeze(n.A.fromIso8601("9999-12-31T24:00:00Z")),a={MINIMUM_VALUE:s,MAXIMUM_VALUE:r,MAXIMUM_INTERVAL:Object.freeze(new o.A({start:s,stop:r}))}},290176:(t,i,e)=>{e.d(i,{A:()=>r});var n=e(491446),o=e(605971);function s(t,i,e,n){this.near=t??0,this.nearValue=i??0,this.far=e??1,this.farValue=n??0}s.clone=function(t,i){if((0,n.A)(t))return(0,n.A)(i)?(i.near=t.near,i.nearValue=t.nearValue,i.far=t.far,i.farValue=t.farValue,i):new s(t.near,t.nearValue,t.far,t.farValue)},s.packedLength=4,s.pack=function(t,i,e){if(!(0,n.A)(t))throw new o.A("value is required");if(!(0,n.A)(i))throw new o.A("array is required");return e=e??0,i[e++]=t.near,i[e++]=t.nearValue,i[e++]=t.far,i[e]=t.farValue,i},s.unpack=function(t,i,e){if(!(0,n.A)(t))throw new o.A("array is required");return i=i??0,(0,n.A)(e)||(e=new s),e.near=t[i++],e.nearValue=t[i++],e.far=t[i++],e.farValue=t[i],e},s.equals=function(t,i){return t===i||(0,n.A)(t)&&(0,n.A)(i)&&t.near===i.near&&t.nearValue===i.nearValue&&t.far===i.far&&t.farValue===i.farValue},s.prototype.clone=function(t){return s.clone(this,t)},s.prototype.equals=function(t){return s.equals(this,t)};const r=s},105330:(t,i,e)=>{e.d(i,{A:()=>o});var n=e(491446);const o=function(t,i){this.positions=(0,n.A)(t)?t:[],this.holes=(0,n.A)(i)?i:[]}},886033:(t,i,e)=>{e.d(i,{A:()=>n});const n=Object.freeze({FIXED:0,INERTIAL:1})},878626:(t,i,e)=>{e.d(i,{A:()=>l});var n=e(647934),o=e(369031),s=e(491446);function r({x:t,y:i,width:e,height:o}){this.rectangle=new n.A(t,i,e,o),this.childNode1=void 0,this.childNode2=void 0,this.index=void 0}function a({width:t,height:i,borderPadding:e}){this._width=t,this._height=i,this._borderPadding=e,this._root=new r({x:e,y:e,width:t-2*e,height:i-2*e})}a.prototype.pack=function(t,{width:i,height:e}){o.A.typeOf.number.greaterThanOrEquals("index",t,0),o.A.typeOf.number.greaterThanOrEquals("image.width",i,1),o.A.typeOf.number.greaterThanOrEquals("image.height",e,1);const n=this._findNode(this._root,{width:i,height:e});if((0,s.A)(n))return n.index=t,n},a.prototype._findNode=function(t,{width:i,height:e}){if((0,s.A)(t)){if(!(0,s.A)(t.childNode1)&&!(0,s.A)(t.childNode2)){if((0,s.A)(t.index))return;const{rectangle:n}=t,o=n.width,a=n.height,l=o-i,h=a-e;if(l<0||h<0)return;return 0===l&&0===h?t:l>h?(t.childNode1=new r({x:n.x,y:n.y,width:i,height:a}),t.childNode2=new r({x:n.x+i,y:n.y,width:l,height:a}),this._findNode(t.childNode1,{width:i,height:e})):(t.childNode1=new r({x:n.x,y:n.y,width:o,height:e}),t.childNode2=new r({x:n.x,y:n.y+e,width:o,height:h}),this._findNode(t.childNode1,{width:i,height:e}))}return this._findNode(t.childNode1,{width:i,height:e})||this._findNode(t.childNode2,{width:i,height:e})}};const l=a},93467:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(369031),o=e(915325),s=e(491446),r=e(605971),a=e(591978);function l(t){t=t??o.A.EMPTY_OBJECT,this.start=(0,s.A)(t.start)?a.A.clone(t.start):new a.A,this.stop=(0,s.A)(t.stop)?a.A.clone(t.stop):new a.A,this.data=t.data,this.isStartIncluded=t.isStartIncluded??!0,this.isStopIncluded=t.isStopIncluded??!0}Object.defineProperties(l.prototype,{isEmpty:{get:function(){const t=a.A.compare(this.stop,this.start);return t<0||0===t&&(!this.isStartIncluded||!this.isStopIncluded)}}});const h={start:void 0,stop:void 0,isStartIncluded:void 0,isStopIncluded:void 0,data:void 0};l.fromIso8601=function(t,i){n.A.typeOf.object("options",t),n.A.typeOf.string("options.iso8601",t.iso8601);const e=t.iso8601.split("/");if(2!==e.length)throw new r.A("options.iso8601 is an invalid ISO 8601 interval.");const o=a.A.fromIso8601(e[0]),c=a.A.fromIso8601(e[1]),d=t.isStartIncluded??!0,u=t.isStopIncluded??!0,p=t.data;return(0,s.A)(i)?(i.start=o,i.stop=c,i.isStartIncluded=d,i.isStopIncluded=u,i.data=p,i):(h.start=o,h.stop=c,h.isStartIncluded=d,h.isStopIncluded=u,h.data=p,new l(h))},l.toIso8601=function(t,i){return n.A.typeOf.object("timeInterval",t),`${a.A.toIso8601(t.start,i)}/${a.A.toIso8601(t.stop,i)}`},l.clone=function(t,i){if((0,s.A)(t))return(0,s.A)(i)?(i.start=t.start,i.stop=t.stop,i.isStartIncluded=t.isStartIncluded,i.isStopIncluded=t.isStopIncluded,i.data=t.data,i):new l(t)},l.equals=function(t,i,e){return t===i||(0,s.A)(t)&&(0,s.A)(i)&&(t.isEmpty&&i.isEmpty||t.isStartIncluded===i.isStartIncluded&&t.isStopIncluded===i.isStopIncluded&&a.A.equals(t.start,i.start)&&a.A.equals(t.stop,i.stop)&&(t.data===i.data||(0,s.A)(e)&&e(t.data,i.data)))},l.equalsEpsilon=function(t,i,e,n){return e=e??0,t===i||(0,s.A)(t)&&(0,s.A)(i)&&(t.isEmpty&&i.isEmpty||t.isStartIncluded===i.isStartIncluded&&t.isStopIncluded===i.isStopIncluded&&a.A.equalsEpsilon(t.start,i.start,e)&&a.A.equalsEpsilon(t.stop,i.stop,e)&&(t.data===i.data||(0,s.A)(n)&&n(t.data,i.data)))},l.intersect=function(t,i,e,o){if(n.A.typeOf.object("left",t),!(0,s.A)(i))return l.clone(l.EMPTY,e);const r=t.start,h=t.stop,c=i.start,d=i.stop,u=a.A.greaterThanOrEquals(c,r)&&a.A.greaterThanOrEquals(h,c),p=!u&&a.A.lessThanOrEquals(c,r)&&a.A.lessThanOrEquals(r,d);if(!u&&!p)return l.clone(l.EMPTY,e);const _=t.isStartIncluded,f=t.isStopIncluded,A=i.isStartIncluded,g=i.isStopIncluded,m=a.A.lessThan(h,d);return(0,s.A)(e)||(e=new l),e.start=u?c:r,e.isStartIncluded=_&&A||!a.A.equals(c,r)&&(u&&A||p&&_),e.stop=m?h:d,e.isStopIncluded=m?f:f&&g||!a.A.equals(d,h)&&g,e.data=(0,s.A)(o)?o(t.data,i.data):t.data,e},l.contains=function(t,i){if(n.A.typeOf.object("timeInterval",t),n.A.typeOf.object("julianDate",i),t.isEmpty)return!1;const e=a.A.compare(t.start,i);if(0===e)return t.isStartIncluded;const o=a.A.compare(i,t.stop);return 0===o?t.isStopIncluded:e<0&&o<0},l.prototype.clone=function(t){return l.clone(this,t)},l.prototype.equals=function(t,i){return l.equals(this,t,i)},l.prototype.equalsEpsilon=function(t,i,e){return l.equalsEpsilon(this,t,i,e)},l.prototype.toString=function(){return l.toIso8601(this)},l.EMPTY=Object.freeze(new l({start:new a.A,stop:new a.A,isStartIncluded:!1,isStopIncluded:!1}));const c=l},73772:(t,i,e)=>{e.d(i,{A:()=>n});const n=Object.freeze({AUTODETECT:0,ENU:1,INERTIAL:2,VELOCITY:3})},884842:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(267980),o=e(491446),s=e(99479);const r=new n.A(1,1,1),a=n.A.ZERO,l=s.A.IDENTITY;function h(t,i,e){this.translation=n.A.clone(t??a),this.rotation=s.A.clone(i??l),this.scale=n.A.clone(e??r)}h.prototype.equals=function(t){return this===t||(0,o.A)(t)&&n.A.equals(this.translation,t.translation)&&s.A.equals(this.rotation,t.rotation)&&n.A.equals(this.scale,t.scale)};const c=h},517638:(t,i,e)=>{e.d(i,{A:()=>l});var n=e(41476),o=e(915325),s=e(491446),r=e(605971);let a;const l=function(t,i){if(!(0,s.A)(t))throw new r.A("text is required.");if(""===t)return;const e=(i=i??o.A.EMPTY_OBJECT).font??"10px sans-serif",l=i.stroke??!1,h=i.fill??!0,c=i.strokeWidth??1,d=i.backgroundColor??n.A.TRANSPARENT,u=i.padding??0,p=2*u,_=document.createElement("canvas");_.width=1,_.height=1,_.style.font=e;const f=_.getContext("2d",{willReadFrequently:!0});(0,s.A)(a)||((0,s.A)(f.imageSmoothingEnabled)?a="imageSmoothingEnabled":(0,s.A)(f.mozImageSmoothingEnabled)?a="mozImageSmoothingEnabled":(0,s.A)(f.webkitImageSmoothingEnabled)?a="webkitImageSmoothingEnabled":(0,s.A)(f.msImageSmoothingEnabled)&&(a="msImageSmoothingEnabled")),f.font=e,f.lineJoin="round",f.lineWidth=c,f[a]=!1,_.style.visibility="hidden",document.body.appendChild(_);const A=function(t,i,e,n,o){const s=t.measureText(i);if(/\S/.test(i)){const r=document.defaultView.getComputedStyle(t.canvas).getPropertyValue("font-size").replace("px",""),a=document.createElement("canvas"),l=100,h=s.width+l|0,c=3*r,d=c/2;a.width=h,a.height=c;const u=a.getContext("2d");u.font=e,u.fillStyle="white",u.fillRect(0,0,a.width+1,a.height+1),n&&(u.strokeStyle="black",u.lineWidth=t.lineWidth,u.strokeText(i,l/2,d)),o&&(u.fillStyle="black",u.fillText(i,l/2,d));const p=u.getImageData(0,0,h,c).data,_=p.length,f=4*h;let A,g,m,y;for(A=0;A<_;++A)if(255!==p[A]){m=A/f|0;break}for(A=_-1;A>=0;--A)if(255!==p[A]){y=A/f|0;break}let b=-1;for(A=0;A<h&&-1===b;++A)for(g=0;g<c;++g){const t=4*A+g*f;if(255!==p[t]||255!==p[t+1]||255!==p[t+2]||255!==p[t+3]){b=A;break}}return{width:s.width,height:y-m,ascent:d-m,descent:y-d,minx:b-l/2}}return{width:s.width,height:0,ascent:0,descent:0,minx:0}}(f,t,e,l,h);_.dimensions=A,document.body.removeChild(_),_.style.visibility="";const g=-A.minx,m=Math.ceil(A.width)+g+p,y=A.height+p,b=y-(y-A.ascent+u)+p;if(_.width=m,_.height=y,f.font=e,f.lineJoin="round",f.lineWidth=c,f[a]=!1,d!==n.A.TRANSPARENT&&(f.fillStyle=d.toCssColorString(),f.fillRect(0,0,_.width,_.height)),l){const e=i.strokeColor??n.A.BLACK;f.strokeStyle=e.toCssColorString(),f.strokeText(t,g+u,b)}if(h){const e=i.fillColor??n.A.WHITE;f.fillStyle=e.toCssColorString(),f.fillText(t,g+u,b)}return _}},470540:(t,i,e)=>{e.d(i,{A:()=>h});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(819488);function l(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._image=void 0,this._imageSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._alignedAxis=void 0,this._alignedAxisSubscription=void 0,this._sizeInMeters=void 0,this._sizeInMetersSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._imageSubRegion=void 0,this._imageSubRegionSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this._splitDirection=void 0,this._splitDirectionSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(l.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,a.A)("show"),image:(0,a.A)("image"),scale:(0,a.A)("scale"),pixelOffset:(0,a.A)("pixelOffset"),eyeOffset:(0,a.A)("eyeOffset"),horizontalOrigin:(0,a.A)("horizontalOrigin"),verticalOrigin:(0,a.A)("verticalOrigin"),heightReference:(0,a.A)("heightReference"),color:(0,a.A)("color"),rotation:(0,a.A)("rotation"),alignedAxis:(0,a.A)("alignedAxis"),sizeInMeters:(0,a.A)("sizeInMeters"),width:(0,a.A)("width"),height:(0,a.A)("height"),scaleByDistance:(0,a.A)("scaleByDistance"),translucencyByDistance:(0,a.A)("translucencyByDistance"),pixelOffsetScaleByDistance:(0,a.A)("pixelOffsetScaleByDistance"),imageSubRegion:(0,a.A)("imageSubRegion"),distanceDisplayCondition:(0,a.A)("distanceDisplayCondition"),disableDepthTestDistance:(0,a.A)("disableDepthTestDistance"),splitDirection:(0,a.A)("splitDirection")}),l.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this._show,t.image=this._image,t.scale=this._scale,t.pixelOffset=this._pixelOffset,t.eyeOffset=this._eyeOffset,t.horizontalOrigin=this._horizontalOrigin,t.verticalOrigin=this._verticalOrigin,t.heightReference=this._heightReference,t.color=this._color,t.rotation=this._rotation,t.alignedAxis=this._alignedAxis,t.sizeInMeters=this._sizeInMeters,t.width=this._width,t.height=this._height,t.scaleByDistance=this._scaleByDistance,t.translucencyByDistance=this._translucencyByDistance,t.pixelOffsetScaleByDistance=this._pixelOffsetScaleByDistance,t.imageSubRegion=this._imageSubRegion,t.distanceDisplayCondition=this._distanceDisplayCondition,t.disableDepthTestDistance=this._disableDepthTestDistance,t.splitDirection=this._splitDirection,t):new l(this)},l.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this._show??t.show,this.image=this._image??t.image,this.scale=this._scale??t.scale,this.pixelOffset=this._pixelOffset??t.pixelOffset,this.eyeOffset=this._eyeOffset??t.eyeOffset,this.horizontalOrigin=this._horizontalOrigin??t.horizontalOrigin,this.verticalOrigin=this._verticalOrigin??t.verticalOrigin,this.heightReference=this._heightReference??t.heightReference,this.color=this._color??t.color,this.rotation=this._rotation??t.rotation,this.alignedAxis=this._alignedAxis??t.alignedAxis,this.sizeInMeters=this._sizeInMeters??t.sizeInMeters,this.width=this._width??t.width,this.height=this._height??t.height,this.scaleByDistance=this._scaleByDistance??t.scaleByDistance,this.translucencyByDistance=this._translucencyByDistance??t.translucencyByDistance,this.pixelOffsetScaleByDistance=this._pixelOffsetScaleByDistance??t.pixelOffsetScaleByDistance,this.imageSubRegion=this._imageSubRegion??t.imageSubRegion,this.distanceDisplayCondition=this._distanceDisplayCondition??t.distanceDisplayCondition,this.disableDepthTestDistance=this._disableDepthTestDistance??t.disableDepthTestDistance,this.splitDirection=this.splitDirection??t.splitDirection};const h=l},326230:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._dimensions=void 0,this._dimensionsSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),dimensions:(0,l.A)("dimensions"),heightReference:(0,l.A)("heightReference"),fill:(0,l.A)("fill"),material:(0,a.A)("material"),outline:(0,l.A)("outline"),outlineColor:(0,l.A)("outlineColor"),outlineWidth:(0,l.A)("outlineWidth"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.dimensions=this.dimensions,t.heightReference=this.heightReference,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.dimensions=this.dimensions??t.dimensions,this.heightReference=this.heightReference??t.heightReference,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition};const c=h},692632:(t,i,e)=>{e.d(i,{A:()=>h});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(819488);function l(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._maximumScreenSpaceError=void 0,this._maximumScreenSpaceErrorSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(l.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,a.A)("show"),uri:(0,a.A)("uri"),maximumScreenSpaceError:(0,a.A)("maximumScreenSpaceError")}),l.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.uri=this.uri,t.maximumScreenSpaceError=this.maximumScreenSpaceError,t):new l(this)},l.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.uri=this.uri??t.uri,this.maximumScreenSpaceError=this.maximumScreenSpaceError??t.maximumScreenSpaceError};const h=l},312421:(t,i,e)=>{e.d(i,{A:()=>d});var n=e(41476),o=e(491446),s=e(955943),r=e(591978),a=e(819488),l=e(46257);function h(t){this._definitionChanged=new s.A,this._color=void 0,this._colorSubscription=void 0,this.color=t}Object.defineProperties(h.prototype,{isConstant:{get:function(){return l.A.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,a.A)("color")}),h.prototype.getType=function(t){return"Color"};const c=new r.A;h.prototype.getValue=function(t,i){return(0,o.A)(t)||(t=r.A.now(c)),(0,o.A)(i)||(i={}),i.color=l.A.getValueOrClonedDefault(this._color,t,n.A.WHITE,i.color),i},h.prototype.equals=function(t){return this===t||t instanceof h&&l.A.equals(this._color,t._color)};const d=h},808938:(t,i,e)=>{e.d(i,{A:()=>u});var n=e(267980),o=e(491446),s=e(605971),r=e(955943),a=e(591978),l=e(886033),h=e(759078);function c(t,i){this._definitionChanged=new r.A,this._value=n.A.clone(t),this._referenceFrame=i??l.A.FIXED}Object.defineProperties(c.prototype,{isConstant:{get:function(){return!(0,o.A)(this._value)||this._referenceFrame===l.A.FIXED}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}});const d=new a.A;c.prototype.getValue=function(t,i){return(0,o.A)(t)||(t=a.A.now(d)),this.getValueInReferenceFrame(t,l.A.FIXED,i)},c.prototype.setValue=function(t,i){let e=!1;n.A.equals(this._value,t)||(e=!0,this._value=n.A.clone(t)),(0,o.A)(i)&&this._referenceFrame!==i&&(e=!0,this._referenceFrame=i),e&&this._definitionChanged.raiseEvent(this)},c.prototype.getValueInReferenceFrame=function(t,i,e){if(!(0,o.A)(t))throw new s.A("time is required.");if(!(0,o.A)(i))throw new s.A("referenceFrame is required.");return h.A.convertToReferenceFrame(t,this._value,this._referenceFrame,i,e)},c.prototype.equals=function(t){return this===t||t instanceof c&&n.A.equals(this._value,t._value)&&this._referenceFrame===t._referenceFrame};const u=c},969077:(t,i,e)=>{e.d(i,{A:()=>r});var n=e(491446),o=e(955943);function s(t){this._value=void 0,this._hasClone=!1,this._hasEquals=!1,this._definitionChanged=new o.A,this.setValue(t)}Object.defineProperties(s.prototype,{isConstant:{value:!0},definitionChanged:{get:function(){return this._definitionChanged}}}),s.prototype.getValue=function(t,i){return this._hasClone?this._value.clone(i):this._value},s.prototype.setValue=function(t){const i=this._value;if(i!==t){const e=(0,n.A)(t),o=e&&"function"==typeof t.clone,s=e&&"function"==typeof t.equals;(!s||!t.equals(i))&&(this._hasClone=o,this._hasEquals=s,this._value=o?t.clone(this._value):t,this._definitionChanged.raiseEvent(this))}},s.prototype.equals=function(t){return this===t||t instanceof s&&(!this._hasEquals&&this._value===t._value||this._hasEquals&&this._value.equals(t._value))},s.prototype.valueOf=function(){return this._value},s.prototype.toString=function(){return String(this._value)};const r=s},779675:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._cornerType=void 0,this._cornerTypeSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),positions:(0,l.A)("positions"),width:(0,l.A)("width"),height:(0,l.A)("height"),heightReference:(0,l.A)("heightReference"),extrudedHeight:(0,l.A)("extrudedHeight"),extrudedHeightReference:(0,l.A)("extrudedHeightReference"),cornerType:(0,l.A)("cornerType"),granularity:(0,l.A)("granularity"),fill:(0,l.A)("fill"),material:(0,a.A)("material"),outline:(0,l.A)("outline"),outlineColor:(0,l.A)("outlineColor"),outlineWidth:(0,l.A)("outlineWidth"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition"),classificationType:(0,l.A)("classificationType"),zIndex:(0,l.A)("zIndex")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.positions=this.positions,t.width=this.width,t.height=this.height,t.heightReference=this.heightReference,t.extrudedHeight=this.extrudedHeight,t.extrudedHeightReference=this.extrudedHeightReference,t.cornerType=this.cornerType,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.positions=this.positions??t.positions,this.width=this.width??t.width,this.height=this.height??t.height,this.heightReference=this.heightReference??t.heightReference,this.extrudedHeight=this.extrudedHeight??t.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??t.extrudedHeightReference,this.cornerType=this.cornerType??t.cornerType,this.granularity=this.granularity??t.granularity,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition,this.classificationType=this.classificationType??t.classificationType,this.zIndex=this.zIndex??t.zIndex};const c=h},755394:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(491446),o=e(605971),s=e(955943),r=e(367725),a=e(707221),l=e(151075);function h(t){this._name=t,this._clock=void 0,this._changed=new s.A,this._error=new s.A,this._isLoading=!1,this._loading=new s.A,this._entityCollection=new l.A(this),this._entityCluster=new a.A}Object.defineProperties(h.prototype,{name:{get:function(){return this._name},set:function(t){this._name!==t&&(this._name=t,this._changed.raiseEvent(this))}},clock:{get:function(){return this._clock},set:function(t){this._clock!==t&&(this._clock=t,this._changed.raiseEvent(this))}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading},set:function(t){r.A.setLoading(this,t)}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(t){this._entityCollection.show=t}},clustering:{get:function(){return this._entityCluster},set:function(t){if(!(0,n.A)(t))throw new o.A("value must be defined.");this._entityCluster=t}}}),h.prototype.update=function(t){return!0};const c=h},881679:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._length=void 0,this._lengthSubscription=void 0,this._topRadius=void 0,this._topRadiusSubscription=void 0,this._bottomRadius=void 0,this._bottomRadiusSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._slices=void 0,this._slicesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),length:(0,l.A)("length"),topRadius:(0,l.A)("topRadius"),bottomRadius:(0,l.A)("bottomRadius"),heightReference:(0,l.A)("heightReference"),fill:(0,l.A)("fill"),material:(0,a.A)("material"),outline:(0,l.A)("outline"),outlineColor:(0,l.A)("outlineColor"),outlineWidth:(0,l.A)("outlineWidth"),numberOfVerticalLines:(0,l.A)("numberOfVerticalLines"),slices:(0,l.A)("slices"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.length=this.length,t.topRadius=this.topRadius,t.bottomRadius=this.bottomRadius,t.heightReference=this.heightReference,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.numberOfVerticalLines=this.numberOfVerticalLines,t.slices=this.slices,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.length=this.length??t.length,this.topRadius=this.topRadius??t.topRadius,this.bottomRadius=this.bottomRadius??t.bottomRadius,this.heightReference=this.heightReference??t.heightReference,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.numberOfVerticalLines=this.numberOfVerticalLines??t.numberOfVerticalLines,this.slices=this.slices??t.slices,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition};const c=h},367725:(t,i,e)=>{e.d(i,{A:()=>s});var n=e(605971);function o(){n.A.throwInstantiationError()}Object.defineProperties(o.prototype,{name:{get:n.A.throwInstantiationError},clock:{get:n.A.throwInstantiationError},entities:{get:n.A.throwInstantiationError},isLoading:{get:n.A.throwInstantiationError},changedEvent:{get:n.A.throwInstantiationError},errorEvent:{get:n.A.throwInstantiationError},loadingEvent:{get:n.A.throwInstantiationError},show:{get:n.A.throwInstantiationError},clustering:{get:n.A.throwInstantiationError}}),o.prototype.update=function(t){n.A.throwInstantiationError()},o.setLoading=function(t,i){t._isLoading!==i&&(i?t._entityCollection.suspendEvents():t._entityCollection.resumeEvents(),t._isLoading=i,t._loading.raiseEvent(t,i))};const s=o},132753:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._semiMajorAxis=void 0,this._semiMajorAxisSubscription=void 0,this._semiMinorAxis=void 0,this._semiMinorAxisSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),semiMajorAxis:(0,l.A)("semiMajorAxis"),semiMinorAxis:(0,l.A)("semiMinorAxis"),height:(0,l.A)("height"),heightReference:(0,l.A)("heightReference"),extrudedHeight:(0,l.A)("extrudedHeight"),extrudedHeightReference:(0,l.A)("extrudedHeightReference"),rotation:(0,l.A)("rotation"),stRotation:(0,l.A)("stRotation"),granularity:(0,l.A)("granularity"),fill:(0,l.A)("fill"),material:(0,a.A)("material"),outline:(0,l.A)("outline"),outlineColor:(0,l.A)("outlineColor"),outlineWidth:(0,l.A)("outlineWidth"),numberOfVerticalLines:(0,l.A)("numberOfVerticalLines"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition"),classificationType:(0,l.A)("classificationType"),zIndex:(0,l.A)("zIndex")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.semiMajorAxis=this.semiMajorAxis,t.semiMinorAxis=this.semiMinorAxis,t.height=this.height,t.heightReference=this.heightReference,t.extrudedHeight=this.extrudedHeight,t.extrudedHeightReference=this.extrudedHeightReference,t.rotation=this.rotation,t.stRotation=this.stRotation,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.numberOfVerticalLines=this.numberOfVerticalLines,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.semiMajorAxis=this.semiMajorAxis??t.semiMajorAxis,this.semiMinorAxis=this.semiMinorAxis??t.semiMinorAxis,this.height=this.height??t.height,this.heightReference=this.heightReference??t.heightReference,this.extrudedHeight=this.extrudedHeight??t.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??t.extrudedHeightReference,this.rotation=this.rotation??t.rotation,this.stRotation=this.stRotation??t.stRotation,this.granularity=this.granularity??t.granularity,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.numberOfVerticalLines=this.numberOfVerticalLines??t.numberOfVerticalLines,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition,this.classificationType=this.classificationType??t.classificationType,this.zIndex=this.zIndex??t.zIndex};const c=h},654986:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._radii=void 0,this._radiiSubscription=void 0,this._innerRadii=void 0,this._innerRadiiSubscription=void 0,this._minimumClock=void 0,this._minimumClockSubscription=void 0,this._maximumClock=void 0,this._maximumClockSubscription=void 0,this._minimumCone=void 0,this._minimumConeSubscription=void 0,this._maximumCone=void 0,this._maximumConeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._stackPartitions=void 0,this._stackPartitionsSubscription=void 0,this._slicePartitions=void 0,this._slicePartitionsSubscription=void 0,this._subdivisions=void 0,this._subdivisionsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),radii:(0,l.A)("radii"),innerRadii:(0,l.A)("innerRadii"),minimumClock:(0,l.A)("minimumClock"),maximumClock:(0,l.A)("maximumClock"),minimumCone:(0,l.A)("minimumCone"),maximumCone:(0,l.A)("maximumCone"),heightReference:(0,l.A)("heightReference"),fill:(0,l.A)("fill"),material:(0,a.A)("material"),outline:(0,l.A)("outline"),outlineColor:(0,l.A)("outlineColor"),outlineWidth:(0,l.A)("outlineWidth"),stackPartitions:(0,l.A)("stackPartitions"),slicePartitions:(0,l.A)("slicePartitions"),subdivisions:(0,l.A)("subdivisions"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.radii=this.radii,t.innerRadii=this.innerRadii,t.minimumClock=this.minimumClock,t.maximumClock=this.maximumClock,t.minimumCone=this.minimumCone,t.maximumCone=this.maximumCone,t.heightReference=this.heightReference,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.stackPartitions=this.stackPartitions,t.slicePartitions=this.slicePartitions,t.subdivisions=this.subdivisions,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.radii=this.radii??t.radii,this.innerRadii=this.innerRadii??t.innerRadii,this.minimumClock=this.minimumClock??t.minimumClock,this.maximumClock=this.maximumClock??t.maximumClock,this.minimumCone=this.minimumCone??t.minimumCone,this.maximumCone=this.maximumCone??t.maximumCone,this.heightReference=this.heightReference??t.heightReference,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.stackPartitions=this.stackPartitions??t.stackPartitions,this.slicePartitions=this.slicePartitions??t.slicePartitions,this.subdivisions=this.subdivisions??t.subdivisions,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition};const c=h},426807:(t,i,e)=>{e.d(i,{A:()=>Q});var n=e(267980),o=e(336946),s=e(369031),r=e(673874),a=e(915325),l=e(491446),h=e(605971),c=e(955943),d=e(367817),u=e(331185),p=e(584164),_=e(99479),f=e(73772),A=e(543622),g=e(433052),m=e(623e3),y=e(63316),b=e(470540),v=e(326230),C=e(808938),D=e(779675),T=e(819488),S=e(91440),x=e(881679),w=e(132753),E=e(654986),I=e(280749),O=e(327458),B=e(692632),R=e(423798),P=e(810186),N=e(71005),z=e(193189),L=e(998261),F=e(278659),H=e(46257),M=e(470959),W=e(777370),k=e(685625);const V=new o.A,q=[];function U(t,i){return(0,T.A)(t,void 0,function(t){return t instanceof i?t:new i(t)})}function G(t){let i=(t=t??a.A.EMPTY_OBJECT).id;(0,l.A)(i)||(i=(0,r.A)()),this._availability=void 0,this._id=i,this._definitionChanged=new c.A,this._name=t.name,this._show=t.show??!0,this._trackingReferenceFrame=t.trackingReferenceFrame??f.A.AUTODETECT,this._parent=void 0,this._propertyNames=["billboard","box","corridor","cylinder","description","ellipse","ellipsoid","label","model","tileset","orientation","path","plane","point","polygon","polyline","polylineVolume","position","properties","rectangle","viewFrom","wall",...q],this._billboard=void 0,this._billboardSubscription=void 0,this._box=void 0,this._boxSubscription=void 0,this._corridor=void 0,this._corridorSubscription=void 0,this._cylinder=void 0,this._cylinderSubscription=void 0,this._description=void 0,this._descriptionSubscription=void 0,this._ellipse=void 0,this._ellipseSubscription=void 0,this._ellipsoid=void 0,this._ellipsoidSubscription=void 0,this._label=void 0,this._labelSubscription=void 0,this._model=void 0,this._modelSubscription=void 0,this._tileset=void 0,this._tilesetSubscription=void 0,this._orientation=void 0,this._orientationSubscription=void 0,this._path=void 0,this._pathSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._point=void 0,this._pointSubscription=void 0,this._polygon=void 0,this._polygonSubscription=void 0,this._polyline=void 0,this._polylineSubscription=void 0,this._polylineVolume=void 0,this._polylineVolumeSubscription=void 0,this._position=void 0,this._positionSubscription=void 0,this._properties=void 0,this._propertiesSubscription=void 0,this._rectangle=void 0,this._rectangleSubscription=void 0,this._viewFrom=void 0,this._viewFromSubscription=void 0,this._wall=void 0,this._wallSubscription=void 0,this._children=[],this.entityCollection=void 0,this.parent=t.parent,this.merge(t)}function j(t,i,e){const n=i.length;for(let t=0;t<n;t++){const n=i[t],o=n._show;(!e&&o)!==(e&&o)&&j(n,n._children,e)}t._definitionChanged.raiseEvent(t,"isShowing",e,!e)}Object.defineProperties(G.prototype,{availability:(0,S.A)("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:(0,S.A)("name"),show:{get:function(){return this._show},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");if(t===this._show)return;const i=this.isShowing;this._show=t;const e=this.isShowing;i!==e&&j(this,this._children,e),this._definitionChanged.raiseEvent(this,"show",t,!t)}},trackingReferenceFrame:(0,S.A)("trackingReferenceFrame"),isShowing:{get:function(){return this._show&&(!(0,l.A)(this.entityCollection)||this.entityCollection.show)&&(!(0,l.A)(this._parent)||this._parent.isShowing)}},parent:{get:function(){return this._parent},set:function(t){const i=this._parent;if(i===t)return;const e=this.isShowing;if((0,l.A)(i)){const t=i._children.indexOf(this);i._children.splice(t,1)}this._parent=t,(0,l.A)(t)&&t._children.push(this);const n=this.isShowing;e!==n&&j(this,this._children,n),this._definitionChanged.raiseEvent(this,"parent",t,i)}},propertyNames:{get:function(){return this._propertyNames}},billboard:U("billboard",b.A),box:U("box",v.A),corridor:U("corridor",D.A),cylinder:U("cylinder",x.A),description:(0,T.A)("description"),ellipse:U("ellipse",w.A),ellipsoid:U("ellipsoid",E.A),label:U("label",I.A),model:U("model",O.A),tileset:U("tileset",B.A),orientation:(0,T.A)("orientation"),path:U("path",R.A),plane:U("plane",P.A),point:U("point",N.A),polygon:U("polygon",z.A),polyline:U("polyline",L.A),polylineVolume:U("polylineVolume",F.A),properties:U("properties",M.A),position:(0,T.A)("position",void 0,function(t){return new C.A(t)}),rectangle:U("rectangle",W.A),viewFrom:(0,T.A)("viewFrom"),wall:U("wall",k.A)}),G.registerEntityType=function(t,i){Object.defineProperties(G.prototype,{[t]:U(t,i)}),q.includes(t)||q.push(t)},G.prototype.isAvailable=function(t){if(!(0,l.A)(t))throw new h.A("time is required.");const i=this._availability;return!(0,l.A)(i)||i.contains(t)},G.prototype.addProperty=function(t){const i=this._propertyNames;if(!(0,l.A)(t))throw new h.A("propertyName is required.");if(-1!==i.indexOf(t))throw new h.A(`${t} is already a registered property.`);if(t in this)throw new h.A(`${t} is a reserved property name.`);i.push(t),Object.defineProperty(this,t,(0,S.A)(t,!0))},G.prototype.removeProperty=function(t){const i=this._propertyNames.indexOf(t);if(!(0,l.A)(t))throw new h.A("propertyName is required.");if(-1===i)throw new h.A(`${t} is not a registered property.`);this._propertyNames.splice(i,1),delete this[t]},G.prototype.merge=function(t){if(!(0,l.A)(t))throw new h.A("source is required.");this.name=this.name??t.name,this.availability=this.availability??t.availability;const i=this._propertyNames,e=(0,l.A)(t._propertyNames)?t._propertyNames:Object.keys(t),n=e.length;for(let o=0;o<n;o++){const n=e[o];if("parent"===n||"name"===n||"availability"===n||"children"===n)continue;const s=this[n],r=t[n];(0,l.A)(s)||-1!==i.indexOf(n)||this.addProperty(n),(0,l.A)(r)&&((0,l.A)(s)?(0,l.A)(s.merge)&&s.merge(r):(0,l.A)(r.merge)&&(0,l.A)(r.clone)?this[n]=r.clone():this[n]=r)}};const Y=new u.A,X=new n.A,K=new _.A;G.prototype.computeModelMatrix=function(t,i){s.A.typeOf.object("time",t);const e=H.A.getValueOrUndefined(this._position,t,X);if(!(0,l.A)(e))return;const n=H.A.getValueOrUndefined(this._orientation,t,K);return(0,l.A)(n)?p.A.fromRotationTranslation(u.A.fromQuaternion(n,Y),e,i):A.A.eastNorthUpToFixedFrame(e,void 0,i)},G.prototype.computeModelMatrixForHeightReference=function(t,i,e,o,r){s.A.typeOf.object("time",t);const a=H.A.getValueOrDefault(i,t,y.Ay.NONE);let h=H.A.getValueOrUndefined(this._position,t,X);if(a===y.Ay.NONE||!(0,l.A)(h)||n.A.equalsEpsilon(h,n.A.ZERO,d.A.EPSILON8))return this.computeModelMatrix(t,r);const c=o.cartesianToCartographic(h,V);(0,y.w_)(a)?c.height=e:c.height+=e,h=o.cartographicToCartesian(c,h);const _=H.A.getValueOrUndefined(this._orientation,t,K);return(0,l.A)(_)?p.A.fromRotationTranslation(u.A.fromQuaternion(_,Y),h,r):A.A.eastNorthUpToFixedFrame(h,void 0,r)},G.supportsMaterialsforEntitiesOnTerrain=function(t){return m.A.supportsMaterials(t)},G.supportsPolylinesOnTerrain=function(t){return g.A.isSupported(t)};const Q=G},707221:(t,i,e)=>{e.d(i,{A:()=>P});var n=e(647934),o=e(434067),s=e(267980),r=e(915325),a=e(491446),l=e(199528),h=e(955943),c=e(584164),d=e(124547),u=e(770103),p=e(566798),_=e(465674),f=e(520853),A=e(24013),g=e(62467),m=e(328141);function y(t){t=t??r.A.EMPTY_OBJECT,this._enabled=t.enabled??!1,this._pixelRange=t.pixelRange??80,this._minimumClusterSize=t.minimumClusterSize??2,this._clusterBillboards=t.clusterBillboards??!0,this._clusterLabels=t.clusterLabels??!0,this._clusterPoints=t.clusterPoints??!0,this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new h.A,this.show=t.show??!0}function b(t,i){t.x-=i,t.y-=i,t.width+=2*i,t.height+=2*i}const v=new n.A;function C(t,i,e,o,s){if((0,a.A)(t._labelCollection)&&o._clusterLabels?s=p.A.getScreenSpaceBoundingBox(t,i,s):(0,a.A)(t._billboardCollection)&&o._clusterBillboards?s=d.A.getScreenSpaceBoundingBox(t,i,s):(0,a.A)(t._pointPrimitiveCollection)&&o._clusterPoints&&(s=f.A.getScreenSpaceBoundingBox(t,i,s)),b(s,e),o._clusterLabels&&!(0,a.A)(t._labelCollection)&&(0,a.A)(t.id)&&S(o,t.id.id)&&(0,a.A)(t.id._label)){const r=o._collectionIndicesByEntity[t.id.id].labelIndex,a=o._labelCollection.get(r),l=p.A.getScreenSpaceBoundingBox(a,i,v);b(l,e),s=n.A.union(s,l,s)}return s}function D(t,i){if(t.clusterShow=!0,!(0,a.A)(t._labelCollection)&&(0,a.A)(t.id)&&S(i,t.id.id)&&(0,a.A)(t.id._label)){const e=i._collectionIndicesByEntity[t.id.id].labelIndex;i._labelCollection.get(e).clusterShow=!0}}function T(t,i,e,n){const o={billboard:n._clusterBillboardCollection.add(),label:n._clusterLabelCollection.add(),point:n._clusterPointCollection.add()};o.billboard.show=!1,o.point.show=!1,o.label.show=!0,o.label.text=i.toLocaleString(),o.label.id=e,o.billboard.position=o.label.position=o.point.position=t,n._clusterEvent.raiseEvent(e,o)}function S(t,i){return(0,a.A)(t)&&(0,a.A)(t._collectionIndicesByEntity[i])&&(0,a.A)(t._collectionIndicesByEntity[i].labelIndex)}function x(t,i,e,n,o){if(!(0,a.A)(t))return;const s=t.length;for(let r=0;r<s;++r){const s=t.get(r);if(s.clusterShow=!1,!s.show||o._scene.mode===g.A.SCENE3D&&!n.isPointVisible(s.position))continue;const l=o._clusterLabels&&(0,a.A)(s._labelCollection),h=o._clusterBillboards&&(0,a.A)(s.id._billboard),c=o._clusterPoints&&(0,a.A)(s.id._point);if(l&&(c||h))continue;const d=s.computeScreenSpacePosition(e);(0,a.A)(d)&&i.push({index:r,collection:t,clustered:!1,coord:d})}}const w=new n.A,E=new n.A,I=new n.A;function O(t,i,e,n){return function(o){let s=this[t];(0,a.A)(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});let r,l,h=this._collectionIndicesByEntity[o.id];if((0,a.A)(h)||(h=this._collectionIndicesByEntity[o.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),(0,a.A)(s)&&(0,a.A)(h[n]))return s.get(h[n]);(0,a.A)(s)||(s=this[t]=new i({scene:this._scene}));const c=this[e];c.length>0?(r=c.shift(),l=s.get(r)):(l=s.add(),r=s.length-1),h[n]=r;const d=this;return Promise.resolve().then(function(){d._clusterDirty=!0}),l}}function B(t,i){const e=t._collectionIndicesByEntity[i];(0,a.A)(e.billboardIndex)||(0,a.A)(e.labelIndex)||(0,a.A)(e.pointIndex)||delete t._collectionIndicesByEntity[i]}function R(t){if(!(0,a.A)(t))return;const i=t.length;for(let e=0;e<i;++e)t.get(e).clusterShow=!0}y.prototype._initialize=function(t){this._scene=t;const i=(e=this,function(t){if((0,a.A)(t)&&t<.05||!e.enabled)return;const i=e._scene,r=e._labelCollection,h=e._billboardCollection,p=e._pointCollection;if(!(0,a.A)(r)&&!(0,a.A)(h)&&!(0,a.A)(p)||!e._clusterBillboards&&!e._clusterLabels&&!e._clusterPoints)return;let f=e._clusterLabelCollection,g=e._clusterBillboardCollection,y=e._clusterPointCollection;(0,a.A)(f)?f.removeAll():f=e._clusterLabelCollection=new _.A({scene:i}),(0,a.A)(g)?g.removeAll():g=e._clusterBillboardCollection=new u.A({scene:i}),(0,a.A)(y)?y.removeAll():y=e._clusterPointCollection=new A.A;const b=e._pixelRange,v=e._minimumClusterSize,S=e._previousClusters,O=[],B=e._previousHeight,R=i.camera.positionCartographic.height,P=i.ellipsoid,N=i.camera.positionWC,z=new l.A(P,N),L=[];let F,H,M,W,k,V,q,U,G,j,Y,X;if(e._clusterLabels&&x(r,L,i,z,e),e._clusterBillboards&&x(h,L,i,z,e),e._clusterPoints&&x(p,L,i,z,e),L.length>0){const t=new m.A(L.length,64,Uint32Array);for(let i=0;i<L.length;++i)t.add(L[i].coord.x,L[i].coord.y);if(t.finish(),R<B)for(M=S.length,F=0;F<M;++F){const n=S[F];if(!z.isPointVisible(n.position))continue;const r=d.A._computeScreenSpacePosition(c.A.IDENTITY,n.position,s.A.ZERO,o.A.ZERO,i);if(!(0,a.A)(r))continue;const l=1-R/B;let h=n.width=n.width*l,u=n.height=n.height*l;h=Math.max(h,n.minimumWidth),u=Math.max(u,n.minimumHeight);const p=r.x-.5*h,_=r.y-.5*u,f=r.x+h,A=r.y+u;for(k=t.range(p,_,f,A),V=k.length,j=0,G=[],H=0;H<V;++H)q=k[H],U=L[q],U.clustered||(++j,Y=U.collection,X=U.index,G.push(Y.get(X).id));if(j>=v)for(T(n.position,j,G,e),O.push(n),H=0;H<V;++H)L[k[H]].clustered=!0}for(M=L.length,F=0;F<M;++F){const i=L[F];if(i.clustered)continue;i.clustered=!0,Y=i.collection,X=i.index;const o=Y.get(X);W=C(o,i.coord,b,e,w);const r=n.A.clone(W,E);k=t.range(W.x,W.y,W.x+W.width,W.y+W.height),V=k.length;const a=s.A.clone(o.position);for(j=1,G=[o.id],H=0;H<V;++H)if(q=k[H],U=L[q],!U.clustered){const t=U.collection.get(U.index),i=C(t,U.coord,b,e,I);s.A.add(t.position,a,a),n.A.union(r,i,r),++j,G.push(t.id)}if(j>=v){const t=s.A.multiplyByScalar(a,1/j,a);for(T(t,j,G,e),O.push({position:t,width:r.width,height:r.height,minimumWidth:W.width,minimumHeight:W.height}),H=0;H<V;++H)L[k[H]].clustered=!0}else D(o,e)}}0===f.length&&(f.destroy(),e._clusterLabelCollection=void 0),0===g.length&&(g.destroy(),e._clusterBillboardCollection=void 0),0===y.length&&(y.destroy(),e._clusterPointCollection=void 0),e._previousClusters=O,e._previousHeight=R});var e;this._cluster=i,this._removeEventListener=t.camera.changed.addEventListener(i)},Object.defineProperties(y.prototype,{enabled:{get:function(){return this._enabled},set:function(t){this._enabledDirty=t!==this._enabled,this._enabled=t}},pixelRange:{get:function(){return this._pixelRange},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._pixelRange,this._pixelRange=t}},minimumClusterSize:{get:function(){return this._minimumClusterSize},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._minimumClusterSize,this._minimumClusterSize=t}},clusterEvent:{get:function(){return this._clusterEvent}},clusterBillboards:{get:function(){return this._clusterBillboards},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterBillboards,this._clusterBillboards=t}},clusterLabels:{get:function(){return this._clusterLabels},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterLabels,this._clusterLabels=t}},clusterPoints:{get:function(){return this._clusterPoints},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterPoints,this._clusterPoints=t}},ready:{get:function(){return!this._enabledDirty&&!this._clusterDirty&&(!(0,a.A)(this._billboardCollection)||this._billboardCollection.ready)&&(!(0,a.A)(this._labelCollection)||this._labelCollection.ready)}}}),y.prototype.getLabel=O("_labelCollection",_.A,"_unusedLabelIndices","labelIndex"),y.prototype.removeLabel=function(t){const i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!(0,a.A)(this._labelCollection)||!(0,a.A)(i)||!(0,a.A)(i.labelIndex))return;const e=i.labelIndex;i.labelIndex=void 0,B(this,t.id);const n=this._labelCollection.get(e);n.show=!1,n.text="",n.id=void 0,this._unusedLabelIndices.push(e),this._clusterDirty=!0},y.prototype.getBillboard=O("_billboardCollection",u.A,"_unusedBillboardIndices","billboardIndex"),y.prototype.removeBillboard=function(t){const i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!(0,a.A)(this._billboardCollection)||!(0,a.A)(i)||!(0,a.A)(i.billboardIndex))return;const e=i.billboardIndex;i.billboardIndex=void 0,B(this,t.id);const n=this._billboardCollection.get(e);n.id=void 0,n.show=!1,n.image=void 0,this._unusedBillboardIndices.push(e),this._clusterDirty=!0},y.prototype.getPoint=O("_pointCollection",A.A,"_unusedPointIndices","pointIndex"),y.prototype.removePoint=function(t){const i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!(0,a.A)(this._pointCollection)||!(0,a.A)(i)||!(0,a.A)(i.pointIndex))return;const e=i.pointIndex;i.pointIndex=void 0,B(this,t.id);const n=this._pointCollection.get(e);n.show=!1,n.id=void 0,this._unusedPointIndices.push(e),this._clusterDirty=!0},y.prototype.update=function(t){if(!this.show)return;let i;const e=this._labelCollection;(0,a.A)(e)&&e.length>0&&!e.ready&&(i=t.commandList,t.commandList=[],e.update(t),t.commandList=i);const n=this._billboardCollection;var o;(0,a.A)(n)&&n.length>0&&!n.ready&&(i=t.commandList,t.commandList=[],n.update(t),t.commandList=i),this._enabledDirty&&(this._enabledDirty=!1,(o=this).enabled||((0,a.A)(o._clusterLabelCollection)&&o._clusterLabelCollection.destroy(),(0,a.A)(o._clusterBillboardCollection)&&o._clusterBillboardCollection.destroy(),(0,a.A)(o._clusterPointCollection)&&o._clusterPointCollection.destroy(),o._clusterLabelCollection=void 0,o._clusterBillboardCollection=void 0,o._clusterPointCollection=void 0,R(o._labelCollection),R(o._billboardCollection),R(o._pointCollection)),this._clusterDirty=!0),this._clusterDirty&&(this._cluster(),this._clusterDirty=(0,a.A)(e)&&!e.ready||(0,a.A)(n)&&!n.ready),(0,a.A)(this._clusterLabelCollection)&&this._clusterLabelCollection.update(t),(0,a.A)(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(t),(0,a.A)(this._clusterPointCollection)&&this._clusterPointCollection.update(t),(0,a.A)(e)&&e.update(t),(0,a.A)(n)&&n.update(t),(0,a.A)(this._pointCollection)&&this._pointCollection.update(t)},y.prototype.destroy=function(){(0,a.A)(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1};const P=y},151075:(t,i,e)=>{e.d(i,{A:()=>f});var n=e(288787),o=e(673874),s=e(491446),r=e(605971),a=e(955943),l=e(32655),h=e(591978),c=e(93467),d=e(426807);const u={id:void 0};function p(t){if(t._firing)t._refire=!0;else if(0===t._suspendCount){const i=t._addedEntities,e=t._removedEntities,n=t._changedEntities;if(0!==n.length||0!==i.length||0!==e.length){t._firing=!0;do{t._refire=!1;const o=i.values.slice(0),s=e.values.slice(0),r=n.values.slice(0);i.removeAll(),e.removeAll(),n.removeAll(),t._collectionChanged.raiseEvent(t,o,s,r)}while(t._refire);t._firing=!1}}}function _(t){this._owner=t,this._entities=new n.A,this._addedEntities=new n.A,this._removedEntities=new n.A,this._changedEntities=new n.A,this._suspendCount=0,this._collectionChanged=new a.A,this._id=(0,o.A)(),this._show=!0,this._firing=!1,this._refire=!1}_.prototype.suspendEvents=function(){this._suspendCount++},_.prototype.resumeEvents=function(){if(0===this._suspendCount)throw new r.A("resumeEvents can not be called before suspendEvents.");this._suspendCount--,p(this)},Object.defineProperties(_.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._entities.values}},show:{get:function(){return this._show},set:function(t){if(!(0,s.A)(t))throw new r.A("value is required.");if(t===this._show)return;let i;this.suspendEvents();const e=[],n=this._entities.values,o=n.length;for(i=0;i<o;i++)e.push(n[i].isShowing);for(this._show=t,i=0;i<o;i++){const t=e[i],o=n[i];t!==o.isShowing&&o.definitionChanged.raiseEvent(o,"isShowing",o.isShowing,t)}this.resumeEvents()}},owner:{get:function(){return this._owner}}}),_.prototype.computeAvailability=function(){let t=l.A.MAXIMUM_VALUE,i=l.A.MINIMUM_VALUE;const e=this._entities.values;for(let n=0,o=e.length;n<o;n++){const o=e[n].availability;if((0,s.A)(o)){const e=o.start,n=o.stop;h.A.lessThan(e,t)&&!e.equals(l.A.MINIMUM_VALUE)&&(t=e),h.A.greaterThan(n,i)&&!n.equals(l.A.MAXIMUM_VALUE)&&(i=n)}}return l.A.MAXIMUM_VALUE.equals(t)&&(t=l.A.MINIMUM_VALUE),l.A.MINIMUM_VALUE.equals(i)&&(i=l.A.MAXIMUM_VALUE),new c.A({start:t,stop:i})},_.prototype.add=function(t){if(!(0,s.A)(t))throw new r.A("entity is required.");t instanceof d.A||(t=new d.A(t));const i=t.id,e=this._entities;if(e.contains(i))throw new r.A(`An entity with id ${i} already exists in this collection.`);return t.entityCollection=this,e.set(i,t),this._removedEntities.remove(i)||this._addedEntities.set(i,t),t.definitionChanged.addEventListener(_.prototype._onEntityDefinitionChanged,this),p(this),t},_.prototype.remove=function(t){return!!(0,s.A)(t)&&this.removeById(t.id)},_.prototype.contains=function(t){if(!(0,s.A)(t))throw new r.A("entity is required");return this._entities.get(t.id)===t},_.prototype.removeById=function(t){if(!(0,s.A)(t))return!1;const i=this._entities.get(t);return!!this._entities.remove(t)&&(this._addedEntities.remove(t)||(this._removedEntities.set(t,i),this._changedEntities.remove(t)),this._entities.remove(t),i.definitionChanged.removeEventListener(_.prototype._onEntityDefinitionChanged,this),p(this),!0)},_.prototype.removeAll=function(){const t=this._entities,i=t.length,e=t.values,n=this._addedEntities,o=this._removedEntities;for(let t=0;t<i;t++){const i=e[t],r=i.id,a=n.get(r);(0,s.A)(a)||(i.definitionChanged.removeEventListener(_.prototype._onEntityDefinitionChanged,this),o.set(r,i))}t.removeAll(),n.removeAll(),this._changedEntities.removeAll(),p(this)},_.prototype.getById=function(t){if(!(0,s.A)(t))throw new r.A("id is required.");return this._entities.get(t)},_.prototype.getOrCreateEntity=function(t){if(!(0,s.A)(t))throw new r.A("id is required.");let i=this._entities.get(t);return(0,s.A)(i)||(u.id=t,i=new d.A(u),this.add(i)),i},_.prototype._onEntityDefinitionChanged=function(t){const i=t.id;this._addedEntities.contains(i)||this._changedEntities.set(i,t),p(this)};const f=_},612967:(t,i,e)=>{e.d(i,{A:()=>f});var n=e(434067),o=e(41476),s=e(915325),r=e(491446),a=e(955943),l=e(591978),h=e(819488),c=e(46257);const d=new n.A(1,1),u=o.A.WHITE;function p(t){t=t??s.A.EMPTY_OBJECT,this._definitionChanged=new a.A,this._image=void 0,this._imageSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._transparent=void 0,this._transparentSubscription=void 0,this.image=t.image,this.repeat=t.repeat,this.color=t.color,this.transparent=t.transparent}Object.defineProperties(p.prototype,{isConstant:{get:function(){return c.A.isConstant(this._image)&&c.A.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},image:(0,h.A)("image"),repeat:(0,h.A)("repeat"),color:(0,h.A)("color"),transparent:(0,h.A)("transparent")}),p.prototype.getType=function(t){return"Image"};const _=new l.A;p.prototype.getValue=function(t,i){return(0,r.A)(t)||(t=l.A.now(_)),(0,r.A)(i)||(i={}),i.image=c.A.getValueOrUndefined(this._image,t),i.repeat=c.A.getValueOrClonedDefault(this._repeat,t,d,i.repeat),i.color=c.A.getValueOrClonedDefault(this._color,t,u,i.color),c.A.getValueOrDefault(this._transparent,t,!1)&&(i.color.alpha=Math.min(.99,i.color.alpha)),i},p.prototype.equals=function(t){return this===t||t instanceof p&&c.A.equals(this._image,t._image)&&c.A.equals(this._repeat,t._repeat)&&c.A.equals(this._color,t._color)&&c.A.equals(this._transparent,t._transparent)};const f=p},280749:(t,i,e)=>{e.d(i,{A:()=>h});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(819488);function l(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._text=void 0,this._textSubscription=void 0,this._font=void 0,this._fontSubscription=void 0,this._style=void 0,this._styleSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._showBackground=void 0,this._showBackgroundSubscription=void 0,this._backgroundColor=void 0,this._backgroundColorSubscription=void 0,this._backgroundPadding=void 0,this._backgroundPaddingSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fillColor=void 0,this._fillColorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(l.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,a.A)("show"),text:(0,a.A)("text"),font:(0,a.A)("font"),style:(0,a.A)("style"),scale:(0,a.A)("scale"),showBackground:(0,a.A)("showBackground"),backgroundColor:(0,a.A)("backgroundColor"),backgroundPadding:(0,a.A)("backgroundPadding"),pixelOffset:(0,a.A)("pixelOffset"),eyeOffset:(0,a.A)("eyeOffset"),horizontalOrigin:(0,a.A)("horizontalOrigin"),verticalOrigin:(0,a.A)("verticalOrigin"),heightReference:(0,a.A)("heightReference"),fillColor:(0,a.A)("fillColor"),outlineColor:(0,a.A)("outlineColor"),outlineWidth:(0,a.A)("outlineWidth"),translucencyByDistance:(0,a.A)("translucencyByDistance"),pixelOffsetScaleByDistance:(0,a.A)("pixelOffsetScaleByDistance"),scaleByDistance:(0,a.A)("scaleByDistance"),distanceDisplayCondition:(0,a.A)("distanceDisplayCondition"),disableDepthTestDistance:(0,a.A)("disableDepthTestDistance")}),l.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.text=this.text,t.font=this.font,t.style=this.style,t.scale=this.scale,t.showBackground=this.showBackground,t.backgroundColor=this.backgroundColor,t.backgroundPadding=this.backgroundPadding,t.pixelOffset=this.pixelOffset,t.eyeOffset=this.eyeOffset,t.horizontalOrigin=this.horizontalOrigin,t.verticalOrigin=this.verticalOrigin,t.heightReference=this.heightReference,t.fillColor=this.fillColor,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.translucencyByDistance=this.translucencyByDistance,t.pixelOffsetScaleByDistance=this.pixelOffsetScaleByDistance,t.scaleByDistance=this.scaleByDistance,t.distanceDisplayCondition=this.distanceDisplayCondition,t.disableDepthTestDistance=this.disableDepthTestDistance,t):new l(this)},l.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.text=this.text??t.text,this.font=this.font??t.font,this.style=this.style??t.style,this.scale=this.scale??t.scale,this.showBackground=this.showBackground??t.showBackground,this.backgroundColor=this.backgroundColor??t.backgroundColor,this.backgroundPadding=this.backgroundPadding??t.backgroundPadding,this.pixelOffset=this.pixelOffset??t.pixelOffset,this.eyeOffset=this.eyeOffset??t.eyeOffset,this.horizontalOrigin=this.horizontalOrigin??t.horizontalOrigin,this.verticalOrigin=this.verticalOrigin??t.verticalOrigin,this.heightReference=this.heightReference??t.heightReference,this.fillColor=this.fillColor??t.fillColor,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.translucencyByDistance=this.translucencyByDistance??t.translucencyByDistance,this.pixelOffsetScaleByDistance=this.pixelOffsetScaleByDistance??t.pixelOffsetScaleByDistance,this.scaleByDistance=this.scaleByDistance??t.scaleByDistance,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition,this.disableDepthTestDistance=this.disableDepthTestDistance??t.disableDepthTestDistance};const h=l},327458:(t,i,e)=>{e.d(i,{A:()=>u});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(819488),l=e(874804),h=e(470959);function c(t){return new l.A(t)}function d(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._hasVerticalExaggeration=void 0,this._hasVerticalExaggerationSubscription=void 0,this._enableVerticalExaggeration=void 0,this._enableVerticalExaggerationSubscription=void 0,this._minimumPixelSize=void 0,this._minimumPixelSizeSubscription=void 0,this._maximumScale=void 0,this._maximumScaleSubscription=void 0,this._incrementallyLoadTextures=void 0,this._incrementallyLoadTexturesSubscription=void 0,this._runAnimations=void 0,this._runAnimationsSubscription=void 0,this._clampAnimations=void 0,this._clampAnimationsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._silhouetteColor=void 0,this._silhouetteColorSubscription=void 0,this._silhouetteSize=void 0,this._silhouetteSizeSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._colorBlendMode=void 0,this._colorBlendModeSubscription=void 0,this._colorBlendAmount=void 0,this._colorBlendAmountSubscription=void 0,this._imageBasedLightingFactor=void 0,this._imageBasedLightingFactorSubscription=void 0,this._environmentMapOptions=void 0,this._environmentMapOptionsSubscription=void 0,this._lightColor=void 0,this._lightColorSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._nodeTransformations=void 0,this._nodeTransformationsSubscription=void 0,this._articulations=void 0,this._articulationsSubscription=void 0,this._clippingPlanes=void 0,this._clippingPlanesSubscription=void 0,this._customShader=void 0,this._customShaderSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(d.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,a.A)("show"),uri:(0,a.A)("uri"),scale:(0,a.A)("scale"),enableVerticalExaggeration:(0,a.A)("enableVerticalExaggeration"),minimumPixelSize:(0,a.A)("minimumPixelSize"),maximumScale:(0,a.A)("maximumScale"),incrementallyLoadTextures:(0,a.A)("incrementallyLoadTextures"),runAnimations:(0,a.A)("runAnimations"),clampAnimations:(0,a.A)("clampAnimations"),shadows:(0,a.A)("shadows"),heightReference:(0,a.A)("heightReference"),silhouetteColor:(0,a.A)("silhouetteColor"),silhouetteSize:(0,a.A)("silhouetteSize"),color:(0,a.A)("color"),colorBlendMode:(0,a.A)("colorBlendMode"),colorBlendAmount:(0,a.A)("colorBlendAmount"),imageBasedLightingFactor:(0,a.A)("imageBasedLightingFactor"),environmentMapOptions:(0,a.A)("environmentMapOptions",void 0,function(t){return new h.A(t)}),lightColor:(0,a.A)("lightColor"),distanceDisplayCondition:(0,a.A)("distanceDisplayCondition"),nodeTransformations:(0,a.A)("nodeTransformations",void 0,function(t){return new h.A(t,c)}),articulations:(0,a.A)("articulations",void 0,function(t){return new h.A(t)}),clippingPlanes:(0,a.A)("clippingPlanes"),customShader:(0,a.A)("customShader")}),d.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.uri=this.uri,t.scale=this.scale,t.enableVerticalExaggeration=this.enableVerticalExaggeration,t.minimumPixelSize=this.minimumPixelSize,t.maximumScale=this.maximumScale,t.incrementallyLoadTextures=this.incrementallyLoadTextures,t.runAnimations=this.runAnimations,t.clampAnimations=this.clampAnimations,t.heightReference=this._heightReference,t.silhouetteColor=this.silhouetteColor,t.silhouetteSize=this.silhouetteSize,t.color=this.color,t.colorBlendMode=this.colorBlendMode,t.colorBlendAmount=this.colorBlendAmount,t.imageBasedLightingFactor=this.imageBasedLightingFactor,t.environmentMapOptions=this.environmentMapOptions,t.lightColor=this.lightColor,t.distanceDisplayCondition=this.distanceDisplayCondition,t.nodeTransformations=this.nodeTransformations,t.articulations=this.articulations,t.clippingPlanes=this.clippingPlanes,t.customShader=this.customShader,t):new d(this)},d.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.uri=this.uri??t.uri,this.scale=this.scale??t.scale,this.enableVerticalExaggeration=this.enableVerticalExaggeration??t.enableVerticalExaggeration,this.minimumPixelSize=this.minimumPixelSize??t.minimumPixelSize,this.maximumScale=this.maximumScale??t.maximumScale,this.incrementallyLoadTextures=this.incrementallyLoadTextures??t.incrementallyLoadTextures,this.runAnimations=this.runAnimations??t.runAnimations,this.clampAnimations=this.clampAnimations??t.clampAnimations,this.shadows=this.shadows??t.shadows,this.heightReference=this.heightReference??t.heightReference,this.silhouetteColor=this.silhouetteColor??t.silhouetteColor,this.silhouetteSize=this.silhouetteSize??t.silhouetteSize,this.color=this.color??t.color,this.colorBlendMode=this.colorBlendMode??t.colorBlendMode,this.colorBlendAmount=this.colorBlendAmount??t.colorBlendAmount,this.imageBasedLightingFactor=this.imageBasedLightingFactor??t.imageBasedLightingFactor,this.environmentMapOptions=this.environmentMapOptions??t.environmentMapOptions,this.lightColor=this.lightColor??t.lightColor,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition,this.clippingPlanes=this.clippingPlanes??t.clippingPlanes,this.customShader=this.customShader??t.customShader;const i=t.nodeTransformations;if((0,o.A)(i)){const t=this.nodeTransformations;(0,o.A)(t)?t.merge(i):this.nodeTransformations=new h.A(i,c)}const e=t.articulations;if((0,o.A)(e)){const t=this.articulations;(0,o.A)(t)?t.merge(e):this.articulations=new h.A(e)}};const u=d},874804:(t,i,e)=>{e.d(i,{A:()=>p});var n=e(915325),o=e(491446),s=e(955943),r=e(591978),a=e(884842),l=e(819488),h=e(46257);const c=new a.A;function d(t){t=t??n.A.EMPTY_OBJECT,this._definitionChanged=new s.A,this._translation=void 0,this._translationSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this.translation=t.translation,this.rotation=t.rotation,this.scale=t.scale}Object.defineProperties(d.prototype,{isConstant:{get:function(){return h.A.isConstant(this._translation)&&h.A.isConstant(this._rotation)&&h.A.isConstant(this._scale)}},definitionChanged:{get:function(){return this._definitionChanged}},translation:(0,l.A)("translation"),rotation:(0,l.A)("rotation"),scale:(0,l.A)("scale")});const u=new r.A;d.prototype.getValue=function(t,i){return(0,o.A)(t)||(t=r.A.now(u)),(0,o.A)(i)||(i=new a.A),i.translation=h.A.getValueOrClonedDefault(this._translation,t,c.translation,i.translation),i.rotation=h.A.getValueOrClonedDefault(this._rotation,t,c.rotation,i.rotation),i.scale=h.A.getValueOrClonedDefault(this._scale,t,c.scale,i.scale),i},d.prototype.equals=function(t){return this===t||t instanceof d&&h.A.equals(this._translation,t._translation)&&h.A.equals(this._rotation,t._rotation)&&h.A.equals(this._scale,t._scale)};const p=d},423798:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._leadTime=void 0,this._leadTimeSubscription=void 0,this._trailTime=void 0,this._trailTimeSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._resolution=void 0,this._resolutionSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),leadTime:(0,l.A)("leadTime"),trailTime:(0,l.A)("trailTime"),width:(0,l.A)("width"),resolution:(0,l.A)("resolution"),material:(0,a.A)("material"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.leadTime=this.leadTime,t.trailTime=this.trailTime,t.width=this.width,t.resolution=this.resolution,t.material=this.material,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.leadTime=this.leadTime??t.leadTime,this.trailTime=this.trailTime??t.trailTime,this.width=this.width??t.width,this.resolution=this.resolution??t.resolution,this.material=this.material??t.material,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition};const c=h},810186:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._dimensions=void 0,this._dimensionsSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),plane:(0,l.A)("plane"),dimensions:(0,l.A)("dimensions"),fill:(0,l.A)("fill"),material:(0,a.A)("material"),outline:(0,l.A)("outline"),outlineColor:(0,l.A)("outlineColor"),outlineWidth:(0,l.A)("outlineWidth"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.plane=this.plane,t.dimensions=this.dimensions,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.plane=this.plane??t.plane,this.dimensions=this.dimensions??t.dimensions,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition};const c=h},71005:(t,i,e)=>{e.d(i,{A:()=>h});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(819488);function l(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._pixelSize=void 0,this._pixelSizeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this._splitDirection=void 0,this._splitDirectionSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(l.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,a.A)("show"),pixelSize:(0,a.A)("pixelSize"),heightReference:(0,a.A)("heightReference"),color:(0,a.A)("color"),outlineColor:(0,a.A)("outlineColor"),outlineWidth:(0,a.A)("outlineWidth"),scaleByDistance:(0,a.A)("scaleByDistance"),translucencyByDistance:(0,a.A)("translucencyByDistance"),distanceDisplayCondition:(0,a.A)("distanceDisplayCondition"),disableDepthTestDistance:(0,a.A)("disableDepthTestDistance"),splitDirection:(0,a.A)("splitDirection")}),l.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.pixelSize=this.pixelSize,t.heightReference=this.heightReference,t.color=this.color,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.scaleByDistance=this.scaleByDistance,t.translucencyByDistance=this._translucencyByDistance,t.distanceDisplayCondition=this.distanceDisplayCondition,t.disableDepthTestDistance=this.disableDepthTestDistance,t.splitDirection=this.splitDirection,t):new l(this)},l.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.pixelSize=this.pixelSize??t.pixelSize,this.heightReference=this.heightReference??t.heightReference,this.color=this.color??t.color,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.scaleByDistance=this.scaleByDistance??t.scaleByDistance,this.translucencyByDistance=this._translucencyByDistance??t.translucencyByDistance,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition,this.disableDepthTestDistance=this.disableDepthTestDistance??t.disableDepthTestDistance,this.splitDirection=this.splitDirection??t.splitDirection};const h=l},193189:(t,i,e)=>{e.d(i,{A:()=>u});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(105330),l=e(969077),h=e(802733),c=e(819488);function d(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._hierarchy=void 0,this._hierarchySubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._perPositionHeight=void 0,this._perPositionHeightSubscription=void 0,this._closeTop=void 0,this._closeTopSubscription=void 0,this._closeBottom=void 0,this._closeBottomSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this._textureCoordinates=void 0,this._textureCoordinatesSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(d.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,c.A)("show"),hierarchy:(0,c.A)("hierarchy",void 0,function(t){return Array.isArray(t)&&(t=new a.A(t)),new l.A(t)}),height:(0,c.A)("height"),heightReference:(0,c.A)("heightReference"),extrudedHeight:(0,c.A)("extrudedHeight"),extrudedHeightReference:(0,c.A)("extrudedHeightReference"),stRotation:(0,c.A)("stRotation"),granularity:(0,c.A)("granularity"),fill:(0,c.A)("fill"),material:(0,h.A)("material"),outline:(0,c.A)("outline"),outlineColor:(0,c.A)("outlineColor"),outlineWidth:(0,c.A)("outlineWidth"),perPositionHeight:(0,c.A)("perPositionHeight"),closeTop:(0,c.A)("closeTop"),closeBottom:(0,c.A)("closeBottom"),arcType:(0,c.A)("arcType"),shadows:(0,c.A)("shadows"),distanceDisplayCondition:(0,c.A)("distanceDisplayCondition"),classificationType:(0,c.A)("classificationType"),zIndex:(0,c.A)("zIndex"),textureCoordinates:(0,c.A)("textureCoordinates")}),d.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.hierarchy=this.hierarchy,t.height=this.height,t.heightReference=this.heightReference,t.extrudedHeight=this.extrudedHeight,t.extrudedHeightReference=this.extrudedHeightReference,t.stRotation=this.stRotation,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.perPositionHeight=this.perPositionHeight,t.closeTop=this.closeTop,t.closeBottom=this.closeBottom,t.arcType=this.arcType,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t.textureCoordinates=this.textureCoordinates,t):new d(this)},d.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.hierarchy=this.hierarchy??t.hierarchy,this.height=this.height??t.height,this.heightReference=this.heightReference??t.heightReference,this.extrudedHeight=this.extrudedHeight??t.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??t.extrudedHeightReference,this.stRotation=this.stRotation??t.stRotation,this.granularity=this.granularity??t.granularity,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.perPositionHeight=this.perPositionHeight??t.perPositionHeight,this.closeTop=this.closeTop??t.closeTop,this.closeBottom=this.closeBottom??t.closeBottom,this.arcType=this.arcType??t.arcType,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition,this.classificationType=this.classificationType??t.classificationType,this.zIndex=this.zIndex??t.zIndex,this.textureCoordinates=this.textureCoordinates??t.textureCoordinates};const u=d},998261:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._depthFailMaterial=void 0,this._depthFailMaterialSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._clampToGround=void 0,this._clampToGroundSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),positions:(0,l.A)("positions"),width:(0,l.A)("width"),granularity:(0,l.A)("granularity"),material:(0,a.A)("material"),depthFailMaterial:(0,a.A)("depthFailMaterial"),arcType:(0,l.A)("arcType"),clampToGround:(0,l.A)("clampToGround"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition"),classificationType:(0,l.A)("classificationType"),zIndex:(0,l.A)("zIndex")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.positions=this.positions,t.width=this.width,t.granularity=this.granularity,t.material=this.material,t.depthFailMaterial=this.depthFailMaterial,t.arcType=this.arcType,t.clampToGround=this.clampToGround,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.positions=this.positions??t.positions,this.width=this.width??t.width,this.granularity=this.granularity??t.granularity,this.material=this.material??t.material,this.depthFailMaterial=this.depthFailMaterial??t.depthFailMaterial,this.arcType=this.arcType??t.arcType,this.clampToGround=this.clampToGround??t.clampToGround,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition,this.classificationType=this.classificationType??t.classificationType,this.zIndex=this.zIndex??t.zIndex};const c=h},278659:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._shape=void 0,this._shapeSubscription=void 0,this._cornerType=void 0,this._cornerTypeSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubsription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),positions:(0,l.A)("positions"),shape:(0,l.A)("shape"),cornerType:(0,l.A)("cornerType"),granularity:(0,l.A)("granularity"),fill:(0,l.A)("fill"),material:(0,a.A)("material"),outline:(0,l.A)("outline"),outlineColor:(0,l.A)("outlineColor"),outlineWidth:(0,l.A)("outlineWidth"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.positions=this.positions,t.shape=this.shape,t.cornerType=this.cornerType,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.positions=this.positions??t.positions,this.shape=this.shape??t.shape,this.cornerType=this.cornerType??t.cornerType,this.granularity=this.granularity??t.granularity,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition};const c=h},759078:(t,i,e)=>{e.d(i,{A:()=>d});var n=e(267980),o=e(491446),s=e(605971),r=e(331185),a=e(886033),l=e(543622);function h(){s.A.throwInstantiationError()}Object.defineProperties(h.prototype,{isConstant:{get:s.A.throwInstantiationError},definitionChanged:{get:s.A.throwInstantiationError},referenceFrame:{get:s.A.throwInstantiationError}}),h.prototype.getValue=s.A.throwInstantiationError,h.prototype.getValueInReferenceFrame=s.A.throwInstantiationError,h.prototype.equals=s.A.throwInstantiationError;const c=new r.A;h.convertToReferenceFrame=function(t,i,e,s,h){if(!(0,o.A)(i))return i;if((0,o.A)(h)||(h=new n.A),e===s)return n.A.clone(i,h);const d=l.A.computeIcrfToCentralBodyFixedMatrix(t,c);return e===a.A.INERTIAL?r.A.multiplyByVector(d,i,h):e===a.A.FIXED?r.A.multiplyByVector(r.A.transpose(d,c),i,h):void 0};const d=h},46257:(t,i,e)=>{e.d(i,{A:()=>r});var n=e(491446),o=e(605971);function s(){o.A.throwInstantiationError()}Object.defineProperties(s.prototype,{isConstant:{get:o.A.throwInstantiationError},definitionChanged:{get:o.A.throwInstantiationError}}),s.prototype.getValue=o.A.throwInstantiationError,s.prototype.equals=o.A.throwInstantiationError,s.equals=function(t,i){return t===i||(0,n.A)(t)&&t.equals(i)},s.arrayEquals=function(t,i){if(t===i)return!0;if(!(0,n.A)(t)||!(0,n.A)(i)||t.length!==i.length)return!1;const e=t.length;for(let n=0;n<e;n++)if(!s.equals(t[n],i[n]))return!1;return!0},s.isConstant=function(t){return!(0,n.A)(t)||t.isConstant},s.getValueOrUndefined=function(t,i,e){return(0,n.A)(t)?t.getValue(i,e):void 0},s.getValueOrDefault=function(t,i,e,o){return(0,n.A)(t)?t.getValue(i,o)??e:e},s.getValueOrClonedDefault=function(t,i,e,o){let s;return(0,n.A)(t)&&(s=t.getValue(i,o)),(0,n.A)(s)||(s=e.clone(s)),s};const r=s},470959:(t,i,e)=>{e.d(i,{A:()=>p});var n=e(491446),o=e(605971),s=e(955943),r=e(591978),a=e(969077),l=e(819488),h=e(46257);function c(t,i){this._propertyNames=[],this._definitionChanged=new s.A,(0,n.A)(t)&&this.merge(t,i)}function d(t){return new a.A(t)}Object.defineProperties(c.prototype,{propertyNames:{get:function(){return this._propertyNames}},isConstant:{get:function(){const t=this._propertyNames;for(let i=0,e=t.length;i<e;i++)if(!h.A.isConstant(this[t[i]]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),c.prototype.hasProperty=function(t){return-1!==this._propertyNames.indexOf(t)},c.prototype.addProperty=function(t,i,e){const s=this._propertyNames;if(!(0,n.A)(t))throw new o.A("propertyName is required.");if(-1!==s.indexOf(t))throw new o.A(`${t} is already a registered property.`);s.push(t),Object.defineProperty(this,t,(0,l.A)(t,!0,e??d)),(0,n.A)(i)&&(this[t]=i),this._definitionChanged.raiseEvent(this)},c.prototype.removeProperty=function(t){const i=this._propertyNames.indexOf(t);if(!(0,n.A)(t))throw new o.A("propertyName is required.");if(-1===i)throw new o.A(`${t} is not a registered property.`);this._propertyNames.splice(i,1),delete this[t],this._definitionChanged.raiseEvent(this)};const u=new r.A;c.prototype.getValue=function(t,i){(0,n.A)(t)||(t=r.A.now(u)),(0,n.A)(i)||(i={});const e=this._propertyNames;for(let n=0,o=e.length;n<o;n++){const o=e[n];i[o]=h.A.getValueOrUndefined(this[o],t,i[o])}return i},c.prototype.merge=function(t,i){if(!(0,n.A)(t))throw new o.A("source is required.");const e=this._propertyNames,s=(0,n.A)(t._propertyNames)?t._propertyNames:Object.keys(t);for(let o=0,r=s.length;o<r;o++){const r=s[o],a=this[r],l=t[r];void 0===a&&-1===e.indexOf(r)&&this.addProperty(r,void 0,i),void 0!==l&&(void 0!==a?(0,n.A)(a)&&(0,n.A)(a.merge)&&a.merge(l):(0,n.A)(l)&&(0,n.A)(l.merge)&&(0,n.A)(l.clone)?this[r]=l.clone():this[r]=l)}},c.prototype.equals=function(t){return this===t||t instanceof c&&function(t,i){const e=t._propertyNames,n=i._propertyNames,o=e.length;if(o!==n.length)return!1;for(let s=0;s<o;++s){const o=e[s];if(-1===n.indexOf(o))return!1;if(!h.A.equals(t[o],i[o]))return!1}return!0}(this,t)};const p=c},777370:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._coordinates=void 0,this._coordinatesSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distancedisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),coordinates:(0,l.A)("coordinates"),height:(0,l.A)("height"),heightReference:(0,l.A)("heightReference"),extrudedHeight:(0,l.A)("extrudedHeight"),extrudedHeightReference:(0,l.A)("extrudedHeightReference"),rotation:(0,l.A)("rotation"),stRotation:(0,l.A)("stRotation"),granularity:(0,l.A)("granularity"),fill:(0,l.A)("fill"),material:(0,a.A)("material"),outline:(0,l.A)("outline"),outlineColor:(0,l.A)("outlineColor"),outlineWidth:(0,l.A)("outlineWidth"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition"),classificationType:(0,l.A)("classificationType"),zIndex:(0,l.A)("zIndex")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.coordinates=this.coordinates,t.height=this.height,t.heightReference=this.heightReference,t.extrudedHeight=this.extrudedHeight,t.extrudedHeightReference=this.extrudedHeightReference,t.rotation=this.rotation,t.stRotation=this.stRotation,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.coordinates=this.coordinates??t.coordinates,this.height=this.height??t.height,this.heightReference=this.heightReference??t.heightReference,this.extrudedHeight=this.extrudedHeight??t.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??t.extrudedHeightReference,this.rotation=this.rotation??t.rotation,this.stRotation=this.stRotation??t.stRotation,this.granularity=this.granularity??t.granularity,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition,this.classificationType=this.classificationType??t.classificationType,this.zIndex=this.zIndex??t.zIndex};const c=h},685625:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(915325),o=e(491446),s=e(605971),r=e(955943),a=e(802733),l=e(819488);function h(t){this._definitionChanged=new r.A,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._minimumHeights=void 0,this._minimumHeightsSubscription=void 0,this._maximumHeights=void 0,this._maximumHeightsSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(t??n.A.EMPTY_OBJECT)}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.A)("show"),positions:(0,l.A)("positions"),minimumHeights:(0,l.A)("minimumHeights"),maximumHeights:(0,l.A)("maximumHeights"),granularity:(0,l.A)("granularity"),fill:(0,l.A)("fill"),material:(0,a.A)("material"),outline:(0,l.A)("outline"),outlineColor:(0,l.A)("outlineColor"),outlineWidth:(0,l.A)("outlineWidth"),shadows:(0,l.A)("shadows"),distanceDisplayCondition:(0,l.A)("distanceDisplayCondition")}),h.prototype.clone=function(t){return(0,o.A)(t)?(t.show=this.show,t.positions=this.positions,t.minimumHeights=this.minimumHeights,t.maximumHeights=this.maximumHeights,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new h(this)},h.prototype.merge=function(t){if(!(0,o.A)(t))throw new s.A("source is required.");this.show=this.show??t.show,this.positions=this.positions??t.positions,this.minimumHeights=this.minimumHeights??t.minimumHeights,this.maximumHeights=this.maximumHeights??t.maximumHeights,this.granularity=this.granularity??t.granularity,this.fill=this.fill??t.fill,this.material=this.material??t.material,this.outline=this.outline??t.outline,this.outlineColor=this.outlineColor??t.outlineColor,this.outlineWidth=this.outlineWidth??t.outlineWidth,this.shadows=this.shadows??t.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??t.distanceDisplayCondition};const c=h},802733:(t,i,e)=>{e.d(i,{A:()=>c});var n=e(41476),o=e(605971),s=e(744603),r=e(312421),a=e(819488),l=e(612967);function h(t){if(t instanceof n.A)return new r.A(t);if("string"==typeof t||t instanceof s.A||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){const i=new l.A;return i.image=t,i}throw new o.A(`Unable to infer material type: ${t}`)}const c=function(t,i){return(0,a.A)(t,i,h)}},819488:(t,i,e)=>{e.d(i,{A:()=>r});var n=e(491446),o=e(969077);function s(t){return new o.A(t)}const r=function(t,i,e){return function(t,i,e,o,s){return{configurable:o,get:function(){return this[i]},set:function(o){const r=this[i],a=this[e];(0,n.A)(a)&&(a(),this[e]=void 0),!(void 0!==o)||(0,n.A)(o)&&(0,n.A)(o.getValue)||!(0,n.A)(s)||(o=s(o)),r!==o&&(this[i]=o,this._definitionChanged.raiseEvent(this,t,o,r)),(0,n.A)(o)&&(0,n.A)(o.definitionChanged)&&(this[e]=o.definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this,t,o,o)},this))}}}(t,`_${t.toString()}`,`_${t.toString()}Subscription`,i??!1,e??s)}},91440:(t,i,e)=>{e.d(i,{A:()=>s});var n=e(819488);function o(t){return t}const s=function(t,i){return(0,n.A)(t,i,o)}},66589:(t,i,e)=>{e.d(i,{A:()=>y});var n=e(647934),o=e(434067),s=e(369031),r=e(673874),a=e(915325),l=e(491446),h=e(677354),c=e(367817),d=e(276904),u=e(744603),p=e(123245),_=e(878626),f=e(483128),A=e(616e3);function g(t){const i=(t=t??a.A.EMPTY_OBJECT).borderWidthInPixels??1,e=t.initialSize??new o.A(16,16);s.A.typeOf.number.greaterThanOrEquals("options.borderWidthInPixels",i,0),s.A.typeOf.number.greaterThan("options.initialSize.x",e.x,0),s.A.typeOf.number.greaterThan("options.initialSize.y",e.y,0),this._pixelFormat=t.pixelFormat??d.A.RGBA,this._sampler=t.sampler,this._borderWidthInPixels=i,this._initialSize=e,this._texturePacker=void 0,this._rectangles=[],this._subRegions=new Map,this._guid=(0,r.A)(),this._imagesToAddQueue=[],this._indexById=new Map,this._indexPromiseById=new Map,this._nextIndex=0}function m({index:t,image:i,resolve:e,reject:n}){this.index=t,this.image=i,this.resolve=e,this.reject=n,this.rectangle=void 0}Object.defineProperties(g.prototype,{borderWidthInPixels:{get:function(){return this._borderWidthInPixels}},rectangles:{get:function(){return this._rectangles}},texture:{get:function(){return this._texture}},pixelFormat:{get:function(){return this._pixelFormat}},sampler:{get:function(){return this._sampler}},numberOfImages:{get:function(){return this._nextIndex}},guid:{get:function(){return this._guid}},sizeInBytes:{get:function(){return(0,l.A)(this._texture)?this._texture.sizeInBytes:0}}}),g.prototype.computeTextureCoordinates=function(t,i){s.A.typeOf.number.greaterThanOrEquals("index",t,0);const e=this._texture,o=this._rectangles[t];if((0,l.A)(i)||(i=new n.A),!(0,l.A)(o))return i.x=0,i.y=0,i.width=0,i.height=0,i;const r=e.width,a=e.height,h=o.width,c=o.height;let d=o.x,u=o.y;const p=this._subRegions.get(t);if((0,l.A)(p)){const t=this._rectangles[p];d+=t.x,u+=t.y}return i.x=d/r,i.y=u/a,i.width=h/r,i.height=c/a,i},g.prototype._copyFromTexture=function(t,i,e,n){const o=this._pixelFormat,s=this._sampler,r=new A.A({context:t,height:e,width:i,pixelFormat:o,sampler:s}),a=t._gl,h=r._textureTarget,c=this._texture,d=new f.A({context:t,colorTextures:[c],destroyAttachments:!1});a.activeTexture(a.TEXTURE0),a.bindTexture(h,r._texture),d._bind();const u=this.rectangles,p=this._subRegions;for(let t=0;t<u.length;++t){const i=n[t],e=u[t];if(!(0,l.A)(i)||!(0,l.A)(e)||(0,l.A)(p.get(t)))continue;const{x:o,y:s,width:r,height:c}=i;a.copyTexSubImage2D(h,0,o,s,e.x,e.y,r,c)}return a.bindTexture(h,null),r._initialized=!0,d._unBind(),d.destroy(),r},g.prototype._resize=function(t,i=0){const e=this._borderWidthInPixels,n=this._rectangles,o=this._imagesToAddQueue,s=this._texture;let a=s.width,h=s.height;const d=this._subRegions,u=n.map((t,i)=>new m({index:i,image:t})).filter((t,i)=>(0,l.A)(t.image)&&!(0,l.A)(d.get(i)));let p=0,f=0,A=0;for(let t=i;t<o.length;++t){const{width:i,height:e}=o[t].image;p=Math.max(p,i),f=Math.max(f,e),A+=i*e,u.push(o[t])}a=Math.max(p,a),h=Math.max(f,h),t.webgl2||(a=c.A.nextPowerOfTwo(a),h=c.A.nextPowerOfTwo(h));const g=A;let y=1;for(;g/a/h>=1;)y*=2,a>h?h*=y:a*=y;u.sort(({image:t},{image:i})=>i.height*i.width-t.height*t.width);const b=new Array(this._nextIndex);for(const t of this._subRegions.keys())(0,l.A)(d.get(t))&&(b[t]=n[t]);let v,C=!1;for(;!C;){let t;for(v=new _.A({height:h,width:a,borderPadding:e}),t=0;t<u.length;++t){const{index:i,image:e}=u[t];if(!(0,l.A)(e))continue;const n=v.pack(i,e);if(!(0,l.A)(n)){a>h?h*=2:a*=2;break}b[i]=n.rectangle}C=t===u.length}this._texturePacker=v,this._texture=this._copyFromTexture(t,a,h,b),s.destroy(),this._rectangles=b,this._guid=(0,r.A)()},g.prototype.getImageIndex=function(t){return s.A.typeOf.string("id",t),this._indexById.get(t)},g.prototype._copyImageToTexture=function({index:t,image:i,resolve:e,reject:n}){const o=this._texture,s=this._rectangles[t];try{o.copyFrom({source:i,xOffset:s.x,yOffset:s.y}),(0,l.A)(e)&&e(t)}catch(t){if((0,l.A)(n))return void n(t)}},g.prototype._addImage=function(t,i){return s.A.typeOf.number.greaterThanOrEquals("index",t,0),s.A.defined("image",i),new Promise((e,n)=>{this._imagesToAddQueue.push(new m({index:t,image:i,resolve:e,reject:n})),this._imagesToAddQueue.sort(({image:t},{image:i})=>i.height*i.width-t.height*t.width)})},g.prototype._processImageQueue=function(t){const i=this._imagesToAddQueue;if(0===i.length)return!1;let e,n;for(this._rectangles.length=this._nextIndex,e=0;e<i.length;++e){const o=i[e],{image:s,index:r}=o,a=this._texturePacker.pack(r,s);if(!(0,l.A)(a)){try{this._resize(t,e)}catch(t){n=t,(0,l.A)(o.reject)&&o.reject(n)}break}this._rectangles[r]=a.rectangle}if((0,l.A)(n)){for(e+=1;e<i.length;++e){const{resolve:t}=i[e];(0,l.A)(t)&&t(-1)}return i.length=0,!1}for(let t=0;t<i.length;++t)this._copyImageToTexture(i[t]);return i.length=0,!0},g.prototype.update=function(t){if(!(0,l.A)(this._texture)){const i=this._initialSize.x,e=this._initialSize.y,n=this._pixelFormat,o=this._sampler,s=this._borderWidthInPixels;this._texture=new A.A({context:t,width:i,height:e,pixelFormat:n,sampler:o}),this._texturePacker=new _.A({height:e,width:i,borderPadding:s})}return this._processImageQueue(t)},g.prototype.addImage=function(t,i){s.A.typeOf.string("id",t),s.A.defined("image",i);let e=this._indexPromiseById.get(t);if((0,l.A)(e))return e;const n=this._nextIndex++;return this._indexById.set(t,n),e=(async()=>(i=await async function(t,i){return"function"==typeof t&&(t=t(i)),("string"==typeof t||t instanceof u.A)&&(t=u.A.createIfNeeded(t).fetchImage()),t}(i,t),s.A.defined("image",i),this.isDestroyed()||!(0,l.A)(i)?-1:this._addImage(n,i)))(),this._indexPromiseById.set(t,e),e},g.prototype.addImageSubRegion=function(t,i){s.A.typeOf.string("id",t),s.A.defined("subRegion",i);const e=this._indexById.get(t);if(!(0,l.A)(e))throw new p.A(`image with id "${t}" not found in the atlas.`);const n=this._indexPromiseById.get(t);for(const[t,o]of this._subRegions.entries())if(e===o&&this._rectangles[t].equals(i))return n.then(i=>-1===i?-1:t);const o=this._nextIndex++;return this._subRegions.set(o,e),this._rectangles[o]=i.clone(),n.then(t=>{if(-1===t)return-1;const e=this._rectangles[t];return s.A.typeOf.number.lessThanOrEquals("subRegion.x",i.x,e.width),s.A.typeOf.number.lessThanOrEquals("subRegion.x + subRegion.width",i.x+i.width,e.width),s.A.typeOf.number.lessThanOrEquals("subRegion.y",i.y,e.height),s.A.typeOf.number.lessThanOrEquals("subRegion.y + subRegion.height",i.y+i.height,e.height),o})},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),this._imagesToAddQueue.forEach(({resolve:t})=>{(0,l.A)(t)&&t(-1)}),(0,h.A)(this)};const y=g},193470:(t,i,e)=>{e.d(i,{A:()=>g});var n=e(369031),o=e(571804),s=e(491446),r=e(677354),a=e(605971),l=e(367817),h=e(641613),c=e(442790),d=e(508380);function u(t,i,e,r){if(n.A.defined("context",t),!i||0===i.length)throw new a.A("At least one attribute is required.");const l=u._verifyAttributes(i);e=e??0;const h=[],c={};let d,p;const _=l.length;for(let t=0;t<_;++t){const i=l[t];i.vertexBuffer?h.push(i):(p=i.usage,d=c[p],(0,s.A)(d)||(d=c[p]=[]),d.push(i))}function f(t,i){return o.A.getSizeInBytes(i.componentDatatype)-o.A.getSizeInBytes(t.componentDatatype)}for(p in this._allBuffers=[],c)if(c.hasOwnProperty(p)){d=c[p],d.sort(f);const t=u._vertexSizeInBytes(d),i={vertexSizeInBytes:t,vertexBuffer:void 0,usage:d[0].usage,needsCommit:!1,arrayBuffer:void 0,arrayViews:u._createArrayViews(d,t)};this._allBuffers.push(i)}this._size=0,this._instanced=r??!1,this._precreated=h,this._context=t,this.writers=void 0,this.va=void 0,this.resize(e)}u._verifyAttributes=function(t){const i=[];for(let e=0;e<t.length;++e){const n=t[e],s={index:n.index??e,enabled:n.enabled??!0,componentsPerAttribute:n.componentsPerAttribute,componentDatatype:n.componentDatatype??o.A.FLOAT,normalize:n.normalize??!1,vertexBuffer:n.vertexBuffer,usage:n.usage??c.A.STATIC_DRAW};if(i.push(s),1!==s.componentsPerAttribute&&2!==s.componentsPerAttribute&&3!==s.componentsPerAttribute&&4!==s.componentsPerAttribute)throw new a.A("attribute.componentsPerAttribute must be in the range [1, 4].");const r=s.componentDatatype;if(!o.A.validate(r))throw new a.A("Attribute must have a valid componentDatatype or not specify it.");if(!c.A.validate(s.usage))throw new a.A("Attribute must have a valid usage or not specify it.")}const e=new Array(i.length);for(let t=0;t<i.length;++t){const n=i[t].index;if(e[n])throw new a.A(`Index ${n} is used by more than one attribute.`);e[n]=!0}return i},u._vertexSizeInBytes=function(t){let i=0;const e=t.length;for(let n=0;n<e;++n){const e=t[n];i+=e.componentsPerAttribute*o.A.getSizeInBytes(e.componentDatatype)}const n=e>0?o.A.getSizeInBytes(t[0].componentDatatype):0,s=n>0?i%n:0;return i+=0===s?0:n-s,i},u._createArrayViews=function(t,i){const e=[];let n=0;const s=t.length;for(let r=0;r<s;++r){const s=t[r],a=s.componentDatatype;e.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:a,normalize:s.normalize,offsetInBytes:n,vertexSizeInComponentType:i/o.A.getSizeInBytes(a),view:void 0}),n+=s.componentsPerAttribute*o.A.getSizeInBytes(a)}return e},u.prototype.resize=function(t){this._size=t;const i=this._allBuffers;this.writers=[];for(let t=0,e=i.length;t<e;++t){const e=i[t];u._resize(e,this._size),u._appendWriters(this.writers,e)}A(this)},u._resize=function(t,i){if(t.vertexSizeInBytes>0){const e=new ArrayBuffer(i*t.vertexSizeInBytes);if((0,s.A)(t.arrayBuffer)){const i=new Uint8Array(e),n=new Uint8Array(t.arrayBuffer),o=n.length;for(let t=0;t<o;++t)i[t]=n[t]}const n=t.arrayViews,r=n.length;for(let t=0;t<r;++t){const i=n[t];i.view=o.A.createArrayBufferView(i.componentDatatype,e,i.offsetInBytes)}t.arrayBuffer=e}};const p=[function(t,i,e){return function(n,o){i[n*e]=o,t.needsCommit=!0}},function(t,i,e){return function(n,o,s){const r=n*e;i[r]=o,i[r+1]=s,t.needsCommit=!0}},function(t,i,e){return function(n,o,s,r){const a=n*e;i[a]=o,i[a+1]=s,i[a+2]=r,t.needsCommit=!0}},function(t,i,e){return function(n,o,s,r,a){const l=n*e;i[l]=o,i[l+1]=s,i[l+2]=r,i[l+3]=a,t.needsCommit=!0}}];function _(t,i){if(i.needsCommit&&i.vertexSizeInBytes>0){i.needsCommit=!1;const e=i.vertexBuffer,n=t._size*i.vertexSizeInBytes,o=(0,s.A)(e);if(!o||e.sizeInBytes<n)return o&&e.destroy(),i.vertexBuffer=h.A.createVertexBuffer({context:t._context,typedArray:i.arrayBuffer,usage:i.usage}),i.vertexBuffer.vertexArrayDestroyable=!1,!0;i.vertexBuffer.copyFromArrayView(i.arrayBuffer)}return!1}function f(t,i,e){if(t.needsCommit&&t.vertexSizeInBytes>0){const n=t.vertexSizeInBytes*i,o=t.vertexSizeInBytes*e;t.vertexBuffer.copyFromArrayView(new Uint8Array(t.arrayBuffer,n,o),n)}}function A(t){const i=t.va;if(!(0,s.A)(i))return;const e=i.length;for(let t=0;t<e;++t)i[t].va.destroy();t.va=void 0}u._appendWriters=function(t,i){const e=i.arrayViews,n=e.length;for(let o=0;o<n;++o){const n=e[o];t[n.index]=p[n.componentsPerAttribute-1](i,n.view,n.vertexSizeInComponentType)}},u.prototype.commit=function(t){let i=!1;const e=this._allBuffers;let n,o,r;for(o=0,r=e.length;o<r;++o)n=e[o],i=_(this,n)||i;if(i||!(0,s.A)(this.va)){A(this);const i=this.va=[],a=l.A.SIXTY_FOUR_KILOBYTES-4,h=(0,s.A)(t)&&!this._instanced?Math.ceil(this._size/a):1;for(let s=0;s<h;++s){let l=[];for(o=0,r=e.length;o<r;++o){n=e[o];const t=s*(n.vertexSizeInBytes*a);u._appendAttributes(l,n,t,this._instanced)}l=l.concat(this._precreated),i.push({va:new d.A({context:this._context,attributes:l,indexBuffer:t}),indicesCount:1.5*(s!==h-1?a:this._size%a)})}}},u._appendAttributes=function(t,i,e,n){const o=i.arrayViews,s=o.length;for(let r=0;r<s;++r){const s=o[r];t.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:s.componentDatatype,normalize:s.normalize,vertexBuffer:i.vertexBuffer,offsetInBytes:e+s.offsetInBytes,strideInBytes:i.vertexSizeInBytes,instanceDivisor:n?1:0})}},u.prototype.subCommit=function(t,i){if(t<0||t>=this._size)throw new a.A("offsetInVertices must be greater than or equal to zero and less than the vertex array size.");if(t+i>this._size)throw new a.A("offsetInVertices + lengthInVertices cannot exceed the vertex array size.");const e=this._allBuffers;for(let n=0,o=e.length;n<o;++n)f(e[n],t,i)},u.prototype.endSubCommits=function(){const t=this._allBuffers;for(let i=0,e=t.length;i<e;++i)t[i].needsCommit=!1},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){const t=this._allBuffers;for(let i=0,e=t.length;i<e;++i){const e=t[i];e.vertexBuffer=e.vertexBuffer&&e.vertexBuffer.destroy()}return A(this),(0,r.A)(this)};const g=u},124547:(t,i,e)=>{e.d(i,{A:()=>Q});var n=e(647934),o=e(434067),s=e(267980),r=e(626809),a=e(336946),l=e(369031),h=e(41476),c=e(673874),d=e(915325),u=e(491446),p=e(605971),_=e(853331),f=e(610750),A=e(584164),g=e(290176),m=e(744603),y=e(208836),b=e(63316),v=e(337632),C=e(62467),D=e(78173),T=e(742558),S=e(913419);function x(t,i){if(t=t??d.A.EMPTY_OBJECT,(0,u.A)(t.disableDepthTestDistance)&&t.disableDepthTestDistance<0)throw new p.A("disableDepthTestDistance must be greater than or equal to 0.0.");let e=t.translucencyByDistance,n=t.pixelOffsetScaleByDistance,r=t.scaleByDistance,a=t.distanceDisplayCondition;if((0,u.A)(e)){if(e.far<=e.near)throw new p.A("translucencyByDistance.far must be greater than translucencyByDistance.near.");e=g.A.clone(e)}if((0,u.A)(n)){if(n.far<=n.near)throw new p.A("pixelOffsetScaleByDistance.far must be greater than pixelOffsetScaleByDistance.near.");n=g.A.clone(n)}if((0,u.A)(r)){if(r.far<=r.near)throw new p.A("scaleByDistance.far must be greater than scaleByDistance.near.");r=g.A.clone(r)}if((0,u.A)(a)){if(a.far<=a.near)throw new p.A("distanceDisplayCondition.far must be greater than distanceDisplayCondition.near.");a=_.A.clone(a)}this._show=t.show??!0,this._position=s.A.clone(t.position??s.A.ZERO),this._actualPosition=s.A.clone(this._position),this._pixelOffset=o.A.clone(t.pixelOffset??o.A.ZERO),this._translate=new o.A(0,0),this._eyeOffset=s.A.clone(t.eyeOffset??s.A.ZERO),this._heightReference=t.heightReference??b.Ay.NONE,this._verticalOrigin=t.verticalOrigin??T.A.CENTER,this._horizontalOrigin=t.horizontalOrigin??v.A.CENTER,this._scale=t.scale??1,this._color=h.A.clone(t.color??h.A.WHITE),this._rotation=t.rotation??0,this._alignedAxis=s.A.clone(t.alignedAxis??s.A.ZERO),this._width=t.width,this._height=t.height,this._scaleByDistance=r,this._translucencyByDistance=e,this._pixelOffsetScaleByDistance=n,this._sizeInMeters=t.sizeInMeters??!1,this._distanceDisplayCondition=a,this._disableDepthTestDistance=t.disableDepthTestDistance,this._id=t.id,this._collection=t.collection??i,this._pickId=void 0,this._pickPrimitive=t._pickPrimitive??this,this._billboardCollection=i,this._dirty=!1,this._index=-1,this._batchIndex=void 0,this._imageTexture=new y.A(i),this._imageWidth=void 0,this._imageHeight=void 0,this._labelDimensions=void 0,this._labelHorizontalOrigin=void 0,this._labelTranslate=void 0;const l=t.image;let f=t.imageId;(0,u.A)(l)&&((0,u.A)(f)||(f="string"==typeof l?l:(0,u.A)(l.src)?l.src:(0,c.A)()),this._imageTexture.loadImage(f,l)),(0,u.A)(t.imageSubRegion)&&this._imageTexture.addImageSubRegion(f,t.imageSubRegion),this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=C.A.SCENE3D,this._clusterShow=!0,this._outlineColor=h.A.clone(t.outlineColor??h.A.BLACK),this._outlineWidth=t.outlineWidth??0,this._updateClamping(),this._splitDirection=t.splitDirection??S.A.NONE}const w=x.SHOW_INDEX=0,E=x.POSITION_INDEX=1,I=x.PIXEL_OFFSET_INDEX=2,O=x.EYE_OFFSET_INDEX=3,B=x.HORIZONTAL_ORIGIN_INDEX=4,R=x.VERTICAL_ORIGIN_INDEX=5,P=x.SCALE_INDEX=6,N=x.IMAGE_INDEX_INDEX=7,z=x.COLOR_INDEX=8,L=x.ROTATION_INDEX=9,F=x.ALIGNED_AXIS_INDEX=10,H=x.SCALE_BY_DISTANCE_INDEX=11,M=x.TRANSLUCENCY_BY_DISTANCE_INDEX=12,W=x.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX=13,k=x.DISTANCE_DISPLAY_CONDITION=14,V=x.DISABLE_DEPTH_DISTANCE=15;x.TEXTURE_COORDINATE_BOUNDS=16;const q=x.SDF_INDEX=17,U=x.SPLIT_DIRECTION_INDEX=18;function G(t,i){const e=t._billboardCollection;(0,u.A)(e)&&(e._updateBillboard(t,i),t._dirty=!0)}x.NUMBER_OF_PROPERTIES=19,Object.defineProperties(x.prototype,{show:{get:function(){return this._show},set:function(t){l.A.typeOf.bool("value",t),this._show!==t&&(this._show=t,G(this,w))}},position:{get:function(){return this._position},set:function(t){l.A.typeOf.object("value",t);const i=this._position;s.A.equals(i,t)||(s.A.clone(t,i),s.A.clone(t,this._actualPosition),this._updateClamping(),G(this,E))}},heightReference:{get:function(){return this._heightReference},set:function(t){l.A.typeOf.number("value",t),t!==this._heightReference&&(this._heightReference=t,this._updateClamping(),G(this,E))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(t){l.A.typeOf.object("value",t);const i=this._pixelOffset;o.A.equals(i,t)||(o.A.clone(t,i),G(this,I))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(t){if((0,u.A)(t)&&(l.A.typeOf.object("value",t),t.far<=t.near))throw new p.A("far distance must be greater than near distance.");const i=this._scaleByDistance;g.A.equals(i,t)||(this._scaleByDistance=g.A.clone(t,i),G(this,H))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(t){if((0,u.A)(t)&&(l.A.typeOf.object("value",t),t.far<=t.near))throw new p.A("far distance must be greater than near distance.");const i=this._translucencyByDistance;g.A.equals(i,t)||(this._translucencyByDistance=g.A.clone(t,i),G(this,M))}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(t){if((0,u.A)(t)&&(l.A.typeOf.object("value",t),t.far<=t.near))throw new p.A("far distance must be greater than near distance.");const i=this._pixelOffsetScaleByDistance;g.A.equals(i,t)||(this._pixelOffsetScaleByDistance=g.A.clone(t,i),G(this,W))}},eyeOffset:{get:function(){return this._eyeOffset},set:function(t){l.A.typeOf.object("value",t);const i=this._eyeOffset;s.A.equals(i,t)||(s.A.clone(t,i),G(this,O))}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(t){l.A.typeOf.number("value",t),this._horizontalOrigin!==t&&(this._horizontalOrigin=t,G(this,B))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(t){l.A.typeOf.number("value",t),this._verticalOrigin!==t&&(this._verticalOrigin=t,G(this,R))}},scale:{get:function(){return this._scale},set:function(t){l.A.typeOf.number("value",t),this._scale!==t&&(this._scale=t,G(this,P))}},color:{get:function(){return this._color},set:function(t){l.A.typeOf.object("value",t);const i=this._color;h.A.equals(i,t)||(h.A.clone(t,i),G(this,z))}},rotation:{get:function(){return this._rotation},set:function(t){l.A.typeOf.number("value",t),this._rotation!==t&&(this._rotation=t,G(this,L))}},alignedAxis:{get:function(){return this._alignedAxis},set:function(t){l.A.typeOf.object("value",t);const i=this._alignedAxis;s.A.equals(i,t)||(s.A.clone(t,i),G(this,F))}},width:{get:function(){return this._width??this._imageTexture.width},set:function(t){(0,u.A)(t)&&l.A.typeOf.number("width",t),this._width!==t&&(this._width=t,G(this,N))}},height:{get:function(){return this._height??this._imageTexture.height},set:function(t){(0,u.A)(t)&&l.A.typeOf.number("height",t),this._height!==t&&(this._height=t,G(this,N))}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(t){l.A.typeOf.bool("value",t),this._sizeInMeters!==t&&(this._sizeInMeters=t,G(this,z))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){if(!_.A.equals(t,this._distanceDisplayCondition)){if((0,u.A)(t)&&(l.A.typeOf.object("value",t),t.far<=t.near))throw new p.A("far distance must be greater than near distance.");this._distanceDisplayCondition=_.A.clone(t,this._distanceDisplayCondition),G(this,k)}}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(t){if((0,u.A)(t)&&(l.A.typeOf.number("value",t),t<0))throw new p.A("disableDepthTestDistance must be greater than or equal to 0.0.");this._disableDepthTestDistance!==t&&(this._disableDepthTestDistance=t,G(this,V))}},id:{get:function(){return this._id},set:function(t){this._id=t,(0,u.A)(this._pickId)&&(this._pickId.object.id=t)}},pickPrimitive:{get:function(){return this._pickPrimitive},set:function(t){this._pickPrimitive=t,(0,u.A)(this._pickId)&&(this._pickId.object.primitive=t)}},pickId:{get:function(){return this._pickId}},image:{get:function(){return this._imageTexture.id},set:function(t){if(!(0,u.A)(t))return void this._imageTexture.unload();let i;i="string"==typeof t?t:t instanceof m.A?t._url:(0,u.A)(t.src)?t.src:(0,c.A)(),this._imageTexture.loadImage(i,t)}},ready:{get:function(){return this._imageTexture.ready}},loadError:{get:function(){return this._imageTexture.loadError}},textureDirty:{get:function(){return this._imageTexture.dirty},set:function(t){this._imageTexture.dirty=t}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(t){this._actualClampedPosition=s.A.clone(t,this._actualClampedPosition),G(this,E)}},clusterShow:{get:function(){return this._clusterShow},set:function(t){this._clusterShow!==t&&(this._clusterShow=t,G(this,w))}},outlineColor:{get:function(){return this._outlineColor},set:function(t){if(!(0,u.A)(t))throw new p.A("value is required.");const i=this._outlineColor;h.A.equals(i,t)||(h.A.clone(t,i),G(this,q))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth!==t&&(this._outlineWidth=t,G(this,q))}},splitDirection:{get:function(){return this._splitDirection},set:function(t){this._splitDirection!==t&&(this._splitDirection=t,G(this,U))}}}),x.prototype.getPickId=function(t){return(0,u.A)(this._pickId)||(this._pickId=t.createPickId({primitive:this._pickPrimitive,collection:this._collection,id:this._id})),this._pickId},x.prototype._updateClamping=function(){x._updateClamping(this._billboardCollection,this)};const j=new a.A;x._updateClamping=function(t,i){if(!(0,u.A)(t)||!(0,u.A)(t._scene)){if(i._heightReference!==b.Ay.NONE)throw new p.A("Height reference is not supported without a scene.");return}const e=t._scene,n=e.ellipsoid??f.A.default,o=e.frameState.mode,s=o!==i._mode;if(i._mode=o,(i._heightReference===b.Ay.NONE||s)&&(0,u.A)(i._removeCallbackFunc)&&(i._removeCallbackFunc(),i._removeCallbackFunc=void 0,i._clampedPosition=void 0),i._heightReference===b.Ay.NONE||!(0,u.A)(i._position))return;(0,u.A)(i._removeCallbackFunc)&&i._removeCallbackFunc();const r=n.cartesianToCartographic(i._position);if(!(0,u.A)(r))return void(i._actualClampedPosition=void 0);function l(t){const e=n.cartographicToCartesian(t,i._clampedPosition);(0,b.Lq)(i._heightReference)&&(i._mode===C.A.SCENE3D?(t.height+=r.height,n.cartographicToCartesian(t,e)):e.x+=r.height),i._clampedPosition=e}i._removeCallbackFunc=e.updateHeight(r,l,i._heightReference),a.A.clone(r,j);const h=e.getHeight(r,i._heightReference);(0,u.A)(h)&&(j.height=h),l(j)},x.prototype.computeTextureCoordinates=function(t){return this._imageTexture.computeTextureCoordinates(t)},x.prototype.setImage=function(t,i){l.A.typeOf.string("id",t),l.A.defined("image",i),this._imageTexture.loadImage(t,i)},x.prototype.setImageTexture=function(t){l.A.defined("billboardTexture",t),y.A.clone(t,this._imageTexture)},x.prototype.setImageSubRegion=function(t,i){l.A.typeOf.string("id",t),l.A.defined("subRegion",i),this._imageTexture.addImageSubRegion(t,i)},x.prototype._setTranslate=function(t){if(!(0,u.A)(t))throw new p.A("value is required.");const i=this._translate;o.A.equals(i,t)||(o.A.clone(t,i),G(this,I))},x.prototype._getActualPosition=function(){return(0,u.A)(this._clampedPosition)?this._clampedPosition:this._actualPosition},x.prototype._setActualPosition=function(t){(0,u.A)(this._clampedPosition)||s.A.clone(t,this._actualPosition),G(this,E)};const Y=new r.A;x._computeActualPosition=function(t,i,e,n){return(0,u.A)(t._clampedPosition)?(e.mode!==t._mode&&t._updateClamping(),t._clampedPosition):e.mode===C.A.SCENE3D?i:(A.A.multiplyByPoint(n,i,Y),D.A.computeActualEllipsoidPosition(e,Y))};const X=new s.A;x._computeScreenSpacePosition=function(t,i,e,n,s,r){const a=A.A.multiplyByPoint(t,i,X),l=D.A.worldWithEyeOffsetToWindowCoordinates(s,a,e,r);if((0,u.A)(l))return o.A.add(l,n,l),l};const K=new o.A(0,0);x.prototype.computeScreenSpacePosition=function(t,i){const e=this._billboardCollection;if((0,u.A)(i)||(i=new o.A),!(0,u.A)(e))throw new p.A("Billboard must be in a collection.  Was it removed?");if(!(0,u.A)(t))throw new p.A("scene is required.");o.A.clone(this._pixelOffset,K),o.A.add(K,this._translate,K);let n=e.modelMatrix,s=this._position;if((0,u.A)(this._clampedPosition)&&(s=this._clampedPosition,t.mode!==C.A.SCENE3D)){const i=t.mapProjection,e=i.ellipsoid,o=i.unproject(s,j);s=e.cartographicToCartesian(o,X),n=A.A.IDENTITY}return x._computeScreenSpacePosition(n,s,this._eyeOffset,K,t,i)},x.getScreenSpaceBoundingBox=function(t,i,e){let o=t.width,s=t.height;const r=t.scale;o*=r,s*=r;let a=i.x;t.horizontalOrigin===v.A.RIGHT?a-=o:t.horizontalOrigin===v.A.CENTER&&(a-=.5*o);let l=i.y;return t.verticalOrigin===T.A.BOTTOM||t.verticalOrigin===T.A.BASELINE?l-=s:t.verticalOrigin===T.A.CENTER&&(l-=.5*s),(0,u.A)(e)||(e=new n.A),e.x=a,e.y=l,e.width=o,e.height=s,e},x.prototype.equals=function(t){return this===t||(0,u.A)(t)&&this._id===t._id&&s.A.equals(this._position,t._position)&&this.image===t.image&&this._show===t._show&&this._scale===t._scale&&this._verticalOrigin===t._verticalOrigin&&this._horizontalOrigin===t._horizontalOrigin&&this._heightReference===t._heightReference&&h.A.equals(this._color,t._color)&&o.A.equals(this._pixelOffset,t._pixelOffset)&&o.A.equals(this._translate,t._translate)&&s.A.equals(this._eyeOffset,t._eyeOffset)&&g.A.equals(this._scaleByDistance,t._scaleByDistance)&&g.A.equals(this._translucencyByDistance,t._translucencyByDistance)&&g.A.equals(this._pixelOffsetScaleByDistance,t._pixelOffsetScaleByDistance)&&_.A.equals(this._distanceDisplayCondition,t._distanceDisplayCondition)&&this._disableDepthTestDistance===t._disableDepthTestDistance&&this._splitDirection===t._splitDirection},x.prototype._destroy=function(){(0,u.A)(this._customData)&&(this._billboardCollection._scene.globe._surface.removeTileCustomData(this._customData),this._customData=void 0),(0,u.A)(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this.image=void 0,this._pickId=this._pickId&&this._pickId.destroy(),this._billboardCollection=void 0};const Q=x},770103:(t,i,e)=>{e.d(i,{A:()=>Ft});var n=e(961645),o=e(647934),s=e(660662),r=e(434067),a=e(267980),l=e(369031),h=e(41476),c=e(571804),d=e(915325),u=e(491446),p=e(677354),_=e(816422),f=e(874915),A=e(367817),g=e(584164),m=e(352581),y=e(641613),b=e(442790),v=e(430332),C=e(377496),D=e(760866),T=e(40118),S=e(302836),x=e(342875),w=e(193470),E=e(952738),I=e(412562),O=e(124547),B=e(200646),R=e(416882),P=e(63316),N=e(337632),z=e(62467),L=e(589834),F=e(66589),H=e(742558);const M=O.A.SHOW_INDEX,W=O.A.POSITION_INDEX,k=O.A.PIXEL_OFFSET_INDEX,V=O.A.EYE_OFFSET_INDEX,q=O.A.HORIZONTAL_ORIGIN_INDEX,U=O.A.VERTICAL_ORIGIN_INDEX,G=O.A.SCALE_INDEX,j=O.A.IMAGE_INDEX_INDEX,Y=O.A.COLOR_INDEX,X=O.A.ROTATION_INDEX,K=O.A.ALIGNED_AXIS_INDEX,Q=O.A.SCALE_BY_DISTANCE_INDEX,J=O.A.TRANSLUCENCY_BY_DISTANCE_INDEX,Z=O.A.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX,$=O.A.DISTANCE_DISPLAY_CONDITION,tt=O.A.DISABLE_DEPTH_DISTANCE,it=O.A.TEXTURE_COORDINATE_BOUNDS,et=O.A.SDF_INDEX,nt=O.A.SPLIT_DIRECTION_INDEX,ot=O.A.NUMBER_OF_PROPERTIES;let st;const rt={positionHighAndScale:0,positionLowAndRotation:1,compressedAttribute0:2,compressedAttribute1:3,compressedAttribute2:4,eyeOffset:5,scaleByDistance:6,pixelOffsetScaleByDistance:7,compressedAttribute3:8,textureCoordinateBoundsOrLabelTranslate:9,a_batchId:10,sdf:11,splitDirection:12},at={direction:0,positionHighAndScale:1,positionLowAndRotation:2,compressedAttribute0:3,compressedAttribute1:4,compressedAttribute2:5,eyeOffset:6,scaleByDistance:7,pixelOffsetScaleByDistance:8,compressedAttribute3:9,textureCoordinateBoundsOrLabelTranslate:10,a_batchId:11,sdf:12,splitDirection:13};function lt(t){t=t??d.A.EMPTY_OBJECT,this._scene=t.scene,this._batchTable=t.batchTable;let i=t.textureAtlas;(0,u.A)(i)||(i=new F.A),this._textureAtlas=i,this._textureAtlasGUID=i.guid,this._destroyTextureAtlas=!0,this._billboardTextureCache=new Map,this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!1,this._shaderRotation=!1,this._compiledShaderRotation=!1,this._shaderAlignedAxis=!1,this._compiledShaderAlignedAxis=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderPixelOffsetScaleByDistance=!1,this._compiledShaderPixelOffsetScaleByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._shaderClampToGround=!1,this._compiledShaderClampToGround=!1,this._propertiesChanged=new Uint32Array(ot),this._maxSize=0,this._maxEyeOffset=0,this._maxScale=1,this._maxPixelOffset=0,this._allHorizontalCenter=!0,this._allVerticalCenter=!0,this._allSizedInMeters=!0,this._baseVolume=new s.A,this._baseVolumeWC=new s.A,this._baseVolume2D=new s.A,this._boundingVolume=new s.A,this._boundingVolumeDirty=!1,this._colorCommands=[],this._allBillboardsReady=!1,this.show=t.show??!0,this.modelMatrix=g.A.clone(t.modelMatrix??g.A.IDENTITY),this._modelMatrix=g.A.clone(g.A.IDENTITY),this.debugShowBoundingVolume=t.debugShowBoundingVolume??!1,this.debugShowTextureAtlas=t.debugShowTextureAtlas??!1,this.blendOption=t.blendOption??R.A.OPAQUE_AND_TRANSLUCENT,this._blendOption=void 0,this._mode=z.A.SCENE3D,this._buffersUsage=[b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW,b.A.STATIC_DRAW],this._highlightColor=h.A.clone(h.A.WHITE),this._uniforms={u_atlas:()=>this.textureAtlas.texture,u_highlightColor:()=>this._highlightColor};const e=this._scene;(0,u.A)(e)&&(0,u.A)(e.terrainProviderChanged)&&(this._removeCallbackFunc=e.terrainProviderChanged.addEventListener(function(){const t=this._billboards,i=t.length;for(let e=0;e<i;++e)(0,u.A)(t[e])&&t[e]._updateClamping()},this))}function ht(t){const i=t.length;for(let e=0;e<i;++e)t[e]&&t[e]._destroy()}function ct(t){if(t._billboardsRemoved){t._billboardsRemoved=!1;const i=[],e=t._billboards,n=e.length;for(let t=0,o=0;t<n;++t){const n=e[t];(0,u.A)(n)&&(n._index=o++,i.push(n))}t._billboards=i}}let dt;function ut(t){let i=t.cache.billboardCollection_indexBufferBatched;if((0,u.A)(i))return i;const e=new Uint16Array(98298);for(let t=0,i=0;t<98298;t+=6,i+=4)e[t]=i,e[t+1]=i+1,e[t+2]=i+2,e[t+3]=i+0,e[t+4]=i+2,e[t+5]=i+3;return i=y.A.createIndexBuffer({context:t,typedArray:e,usage:b.A.STATIC_DRAW,indexDatatype:f.A.UNSIGNED_SHORT}),i.vertexArrayDestroyable=!1,t.cache.billboardCollection_indexBufferBatched=i,i}function pt(t){let i=t.cache.billboardCollection_indexBufferInstanced;return(0,u.A)(i)||(i=y.A.createIndexBuffer({context:t,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:b.A.STATIC_DRAW,indexDatatype:f.A.UNSIGNED_SHORT}),i.vertexArrayDestroyable=!1,t.cache.billboardCollection_indexBufferInstanced=i),i}function _t(t){let i=t.cache.billboardCollection_vertexBufferInstanced;return(0,u.A)(i)||(i=y.A.createVertexBuffer({context:t,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:b.A.STATIC_DRAW}),i.vertexArrayDestroyable=!1,t.cache.billboardCollection_vertexBufferInstanced=i),i}Object.defineProperties(lt.prototype,{length:{get:function(){return ct(this),this._billboards.length}},textureAtlas:{get:function(){return this._textureAtlas},set:function(t){l.A.defined("textureAtlas",t),this._textureAtlas!==t&&(this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._textureAtlas=t)}},destroyTextureAtlas:{get:function(){return this._destroyTextureAtlas},set:function(t){this._destroyTextureAtlas=t}},sizeInBytes:{get:function(){return this._textureAtlas.sizeInBytes}},ready:{get:function(){return this._allBillboardsReady}},billboardTextureCache:{get:function(){return this._billboardTextureCache}}}),lt.prototype.add=function(t){const i=new O.A(t,this);return i._index=this._billboards.length,this._billboards.push(i),this._createVertexArray=!0,i},lt.prototype.remove=function(t){return!!this.contains(t)&&(this._billboards[t._index]=void 0,this._billboardsRemoved=!0,this._createVertexArray=!0,t._destroy(),!0)},lt.prototype.removeAll=function(){ht(this._billboards),this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!0},lt.prototype._updateBillboard=function(t,i){t._dirty||(this._billboardsToUpdate[this._billboardsToUpdateIndex++]=t),++this._propertiesChanged[i]},lt.prototype.contains=function(t){return(0,u.A)(t)&&t._billboardCollection===this},lt.prototype.get=function(t){return l.A.typeOf.number("index",t),ct(this),this._billboards[t]},lt.prototype.computeNewBuffersUsage=function(){const t=this._buffersUsage;let i=!1;const e=this._propertiesChanged;for(let n=0;n<ot;++n){const o=0===e[n]?b.A.STATIC_DRAW:b.A.STREAM_DRAW;i=i||t[n]!==o,t[n]=o}return i};const ft=new _.A;function At(t,i,e,n){let o;const r=e[st.positionHighAndScale],a=e[st.positionLowAndRotation],l=n._getActualPosition();t._mode===z.A.SCENE3D&&(s.A.expand(t._baseVolume,l,t._baseVolume),t._boundingVolumeDirty=!0),_.A.fromCartesian(l,ft);const h=n.scale,c=n.rotation;0!==c&&(t._shaderRotation=!0),t._maxScale=Math.max(t._maxScale,h);const d=ft.high,u=ft.low;t._instanced?(o=n._index,r(o,d.x,d.y,d.z,h),a(o,u.x,u.y,u.z,c)):(o=4*n._index,r(o+0,d.x,d.y,d.z,h),r(o+1,d.x,d.y,d.z,h),r(o+2,d.x,d.y,d.z,h),r(o+3,d.x,d.y,d.z,h),a(o+0,u.x,u.y,u.z,c),a(o+1,u.x,u.y,u.z,c),a(o+2,u.x,u.y,u.z,c),a(o+3,u.x,u.y,u.z,c))}const gt=new r.A,mt=32768,yt=65536,bt=4096,vt=256,Ct=1/256,Dt=new o.A;function Tt(t,i,e,o){let s;const r=e[st.compressedAttribute0],a=o.pixelOffset,l=a.x,h=a.y,c=o._translate,d=c.x,u=c.y;t._maxPixelOffset=Math.max(t._maxPixelOffset,Math.abs(l+d),Math.abs(-h+u));const p=o.horizontalOrigin;let _=o._verticalOrigin,f=o.show&&o.clusterShow;0===o.color.alpha&&(f=!1),_===H.A.BASELINE&&(_=H.A.BOTTOM),t._allHorizontalCenter=t._allHorizontalCenter&&p===N.A.CENTER,t._allVerticalCenter=t._allVerticalCenter&&_===H.A.CENTER;let g=0,m=0,y=0,b=0;if(o.ready){const t=o.computeTextureCoordinates(Dt);g=t.x,m=t.y,y=t.width,b=t.height}const v=g+y,C=m+b;let D=128*Math.floor(A.A.clamp(l,-32768,mt)+mt);D+=32*(p+1),D+=8*(_+1),D+=4*(f?1:0);let T=Math.floor(A.A.clamp(h,-32768,mt)+mt)*vt,S=Math.floor(A.A.clamp(d,-32768,mt)+mt)*vt;const x=(A.A.clamp(u,-32768,mt)+mt)*Ct,w=Math.floor(x);T+=w,S+=Math.floor((x-w)*vt),gt.x=g,gt.y=m;const E=n.A.compressTextureCoordinates(gt);gt.x=v;const I=n.A.compressTextureCoordinates(gt);gt.y=C;const O=n.A.compressTextureCoordinates(gt);gt.x=g;const B=n.A.compressTextureCoordinates(gt);t._instanced?(s=o._index,r(s,D,T,S,E)):(s=4*o._index,r(s+0,D+0,T,S,E),r(s+1,D+2,T,S,I),r(s+2,D+3,T,S,O),r(s+3,D+1,T,S,B))}function St(t,i,e,o){let s;const r=e[st.compressedAttribute1],l=o.alignedAxis;a.A.equals(l,a.A.ZERO)||(t._shaderAlignedAxis=!0);let h=0,c=1,d=1,p=1;const _=o.translucencyByDistance;(0,u.A)(_)&&(h=_.near,c=_.nearValue,d=_.far,p=_.farValue,1===c&&1===p||(t._shaderTranslucencyByDistance=!0));const f=Math.round(o.width??0);t._maxSize=Math.max(t._maxSize,f);let g=A.A.clamp(f,0,yt),m=0;Math.abs(a.A.magnitudeSquared(l)-1)<A.A.EPSILON6&&(m=n.A.octEncodeFloat(l)),c=A.A.clamp(c,0,1),c=1===c?255:255*c|0,g=g*vt+c,p=A.A.clamp(p,0,1),p=1===p?255:255*p|0,m=m*vt+p,t._instanced?(s=o._index,r(s,g,m,h,d)):(s=4*o._index,r(s+0,g,m,h,d),r(s+1,g,m,h,d),r(s+2,g,m,h,d),r(s+3,g,m,h,d))}function xt(t,i,e,n){let o;const s=e[st.compressedAttribute2],r=n.color,l=(0,u.A)(t._batchTable)?h.A.WHITE:n.getPickId(i.context).color,c=n.sizeInMeters?1:0,d=Math.abs(a.A.magnitudeSquared(n.alignedAxis)-1)<A.A.EPSILON6?1:0;t._allSizedInMeters=t._allSizedInMeters&&1===c;const p=n.height??0;t._maxSize=Math.max(t._maxSize,p);let _=n._labelHorizontalOrigin??-2;_+=2;const f=4*p+_;let g=h.A.floatToByte(r.red),m=h.A.floatToByte(r.green),y=h.A.floatToByte(r.blue);const b=g*yt+m*vt+y;g=h.A.floatToByte(l.red),m=h.A.floatToByte(l.green),y=h.A.floatToByte(l.blue);const v=g*yt+m*vt+y;let C=h.A.floatToByte(r.alpha)*yt+h.A.floatToByte(l.alpha)*vt;C+=2*c+d,t._instanced?(o=n._index,s(o,b,v,C,f)):(o=4*n._index,s(o+0,b,v,C,f),s(o+1,b,v,C,f),s(o+2,b,v,C,f),s(o+3,b,v,C,f))}function wt(t,i,e,o){let s;const r=e[st.eyeOffset],a=o.eyeOffset;let l=a.z;if(o._heightReference!==P.Ay.NONE&&(l*=1.005),t._maxEyeOffset=Math.max(t._maxEyeOffset,Math.abs(a.x),Math.abs(a.y),Math.abs(l)),t._instanced){if(gt.x=0,gt.y=0,o.ready){const t=o.computeTextureCoordinates(Dt);gt.x=t.width,gt.y=t.height}const t=n.A.compressTextureCoordinates(gt);s=o._index,r(s,a.x,a.y,l,t)}else s=4*o._index,r(s+0,a.x,a.y,l,0),r(s+1,a.x,a.y,l,0),r(s+2,a.x,a.y,l,0),r(s+3,a.x,a.y,l,0)}function Et(t,i,e,n){let o;const s=e[st.scaleByDistance];let r=0,a=1,l=1,h=1;const c=n.scaleByDistance;(0,u.A)(c)&&(r=c.near,a=c.nearValue,l=c.far,h=c.farValue,1===a&&1===h||(t._shaderScaleByDistance=!0)),t._instanced?(o=n._index,s(o,r,a,l,h)):(o=4*n._index,s(o+0,r,a,l,h),s(o+1,r,a,l,h),s(o+2,r,a,l,h),s(o+3,r,a,l,h))}function It(t,i,e,n){let o;const s=e[st.pixelOffsetScaleByDistance];let r=0,a=1,l=1,h=1;const c=n.pixelOffsetScaleByDistance;(0,u.A)(c)&&(r=c.near,a=c.nearValue,l=c.far,h=c.farValue,1===a&&1===h||(t._shaderPixelOffsetScaleByDistance=!0)),t._instanced?(o=n._index,s(o,r,a,l,h)):(o=4*n._index,s(o+0,r,a,l,h),s(o+1,r,a,l,h),s(o+2,r,a,l,h),s(o+3,r,a,l,h))}function Ot(t,i,e,n){let o;const s=e[st.compressedAttribute3];let r=0,a=Number.MAX_VALUE;const l=n.distanceDisplayCondition;(0,u.A)(l)&&(r=l.near,a=l.far,r*=r,a*=a,t._shaderDistanceDisplayCondition=!0);let h=n.disableDepthTestDistance;const c=(0,P.w_)(n.heightReference)&&i.context.depthTexture;let d,p;(0,u.A)(h)||(h=c?5e3:0),h*=h,(c||h>0)&&(t._shaderDisableDepthDistance=!0,h===Number.POSITIVE_INFINITY&&(h=-1)),(0,u.A)(n._labelDimensions)?(p=n._labelDimensions.x,d=n._labelDimensions.y):(p=n.width??0,d=n.height??0);const _=Math.floor(A.A.clamp(p,0,bt)),f=Math.floor(A.A.clamp(d,0,bt)),g=_*bt+f;t._instanced?(o=n._index,s(o,r,a,h,g)):(o=4*n._index,s(o+0,r,a,h,g),s(o+1,r,a,h,g),s(o+2,r,a,h,g),s(o+3,r,a,h,g))}function Bt(t,i,e,n){if((0,P.w_)(n.heightReference)){const e=t._scene,n=i.context,o=i.globeTranslucencyState.translucent,s=(0,u.A)(e.globe)&&e.globe.depthTestAgainstTerrain;t._shaderClampToGround=n.depthTexture&&!o&&s}let o;const s=e[st.textureCoordinateBoundsOrLabelTranslate];if(v.A.maximumVertexTextureImageUnits>0){let i=0,e=0;return(0,u.A)(n._labelTranslate)&&(i=n._labelTranslate.x,e=n._labelTranslate.y),void(t._instanced?(o=n._index,s(o,i,e,0,0)):(o=4*n._index,s(o+0,i,e,0,0),s(o+1,i,e,0,0),s(o+2,i,e,0,0),s(o+3,i,e,0,0)))}let r=0,a=0,l=0,h=0;if(n.ready){const t=n.computeTextureCoordinates(Dt);r=t.x,a=t.y,l=t.width,h=t.height}const c=r+l,d=a+h;t._instanced?(o=n._index,s(o,r,a,c,d)):(o=4*n._index,s(o+0,r,a,c,d),s(o+1,r,a,c,d),s(o+2,r,a,c,d),s(o+3,r,a,c,d))}function Rt(t,i,e,n){if(!t._sdf)return;let o;const s=e[st.sdf],r=n.outlineColor,a=n.outlineWidth,l=h.A.floatToByte(r.red),c=h.A.floatToByte(r.green),d=h.A.floatToByte(r.blue),u=l*yt+c*vt+d,p=a/L.A.RADIUS,_=h.A.floatToByte(r.alpha)*yt+h.A.floatToByte(p)*vt;t._instanced?(o=n._index,s(o,u,_)):(o=4*n._index,s(o+0,u+0,_),s(o+1,u+2,_),s(o+2,u+3,_),s(o+3,u+1,_))}function Pt(t,i,e,n){const o=e[st.splitDirection];let s=0;const r=n.splitDirection;let a;(0,u.A)(r)&&(s=r),t._instanced?(a=n._index,o(a,s)):(a=4*n._index,o(a+0,s),o(a+1,s),o(a+2,s),o(a+3,s))}function Nt(t,i,e,n){At(t,0,e,n),Tt(t,0,e,n),St(t,0,e,n),xt(t,i,e,n),wt(t,0,e,n),Et(t,0,e,n),It(t,0,e,n),Ot(t,i,e,n),Bt(t,i,e,n),function(t,i,e,n){if(!(0,u.A)(t._batchTable))return;const o=e[st.a_batchId],s=n._batchIndex;let r;t._instanced?(r=n._index,o(r,s)):(r=4*n._index,o(r+0,s),o(r+1,s),o(r+2,s),o(r+3,s))}(t,0,e,n),Rt(t,0,e,n),Pt(t,0,e,n)}function zt(t,i,e,n,o,r){let a;n.mode===z.A.SCENE3D?(a=t._baseVolume,t._boundingVolumeDirty=!0):a=t._baseVolume2D;const l=[];for(let t=0;t<e;++t){const e=i[t],h=e.position,c=O.A._computeActualPosition(e,h,n,o);(0,u.A)(c)&&(e._setActualPosition(c),r?l.push(c):s.A.expand(a,c,a))}r&&s.A.fromPoints(l,a)}const Lt=[];lt.prototype.update=function(t){if(ct(this),!this.show)return;const i=t.context;this._instanced=i.instancedArrays,st=this._instanced?at:rt,dt=this._instanced?pt:ut;let e=this._billboards,n=e.length,o=!0;for(let t=0;t<n;++t){const i=e[t];(0,u.A)(i.loadError)&&(console.error(`Error loading image for billboard: ${i.loadError}`),i.image=void 0),i.textureDirty&&this._updateBillboard(i,j),i.show&&(o=o&&i.ready)}const r=this._textureAtlas;if(t.afterRender.push(()=>{if(!this.isDestroyed())return r.update(t.context)}),!(0,u.A)(r.texture))return;!function(t,i){const e=i.mode,n=t._billboards,o=t._billboardsToUpdate,s=t._modelMatrix;t._createVertexArray||t._mode!==e||e!==z.A.SCENE3D&&!g.A.equals(s,t.modelMatrix)?(t._mode=e,g.A.clone(t.modelMatrix,s),t._createVertexArray=!0,e!==z.A.SCENE3D&&e!==z.A.SCENE2D&&e!==z.A.COLUMBUS_VIEW||zt(t,n,n.length,i,s,!0)):e===z.A.MORPHING?zt(t,n,n.length,i,s,!0):e!==z.A.SCENE2D&&e!==z.A.COLUMBUS_VIEW||zt(t,o,t._billboardsToUpdateIndex,i,s,!1)}(this,t),e=this._billboards,n=e.length;const a=this._billboardsToUpdate,l=this._billboardsToUpdateIndex,h=this._propertiesChanged,d=r.guid,p=this._createVertexArray||this._textureAtlasGUID!==d;let _;this._textureAtlasGUID=d;const f=t.passes,A=f.pick;if(p||!A&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let t=0;t<ot;++t)h[t]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),n>0){this._vaf=function(t,i,e,n,o,s){const r=[{index:st.positionHighAndScale,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[W]},{index:st.positionLowAndRotation,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[W]},{index:st.compressedAttribute0,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[k]},{index:st.compressedAttribute1,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[J]},{index:st.compressedAttribute2,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[Y]},{index:st.eyeOffset,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[V]},{index:st.scaleByDistance,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[Q]},{index:st.pixelOffsetScaleByDistance,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[Z]},{index:st.compressedAttribute3,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[$]},{index:st.textureCoordinateBoundsOrLabelTranslate,componentsPerAttribute:4,componentDatatype:c.A.FLOAT,usage:e[it]},{index:st.splitDirection,componentsPerAttribute:1,componentDatatype:c.A.FLOAT,usage:e[nt]}];n&&r.push({index:st.direction,componentsPerAttribute:2,componentDatatype:c.A.FLOAT,vertexBuffer:_t(t)}),(0,u.A)(o)&&r.push({index:st.a_batchId,componentsPerAttribute:1,componentDatatype:c.A.FLOAT,bufferUsage:b.A.STATIC_DRAW}),s&&r.push({index:st.sdf,componentsPerAttribute:2,componentDatatype:c.A.FLOAT,usage:e[et]});const a=n?i:4*i;return new w.A(t,r,a,n)}(i,n,this._buffersUsage,this._instanced,this._batchTable,this._sdf),_=this._vaf.writers;for(let i=0;i<n;++i){const e=this._billboards[i];e._dirty=!1,e.textureDirty=!1,Nt(this,t,_,e)}this._vaf.commit(dt(i))}this._billboardsToUpdateIndex=0}else if(l>0){const e=Lt;e.length=0,(h[W]||h[X]||h[G])&&e.push(At),(h[j]||h[k]||h[q]||h[U]||h[M])&&(e.push(Tt),this._instanced&&e.push(wt)),(h[j]||h[K]||h[J])&&(e.push(St),e.push(xt)),(h[j]||h[Y])&&e.push(xt),(h[j]||h[V])&&e.push(wt),h[Q]&&e.push(Et),h[Z]&&e.push(It),(h[$]||h[tt]||h[j]||h[W])&&e.push(Ot),(h[j]||h[W])&&e.push(Bt),h[et]&&e.push(Rt),h[nt]&&e.push(Pt);const o=e.length;if(_=this._vaf.writers,l/n>.1){for(let i=0;i<l;++i){const n=a[i];n._dirty=!1,n.textureDirty=!1;for(let i=0;i<o;++i)e[i](this,t,_,n)}this._vaf.commit(dt(i))}else{for(let i=0;i<l;++i){const n=a[i];n._dirty=!1,n.textureDirty=!1;for(let i=0;i<o;++i)e[i](this,t,_,n);this._instanced?this._vaf.subCommit(n._index,1):this._vaf.subCommit(4*n._index,4)}this._vaf.endSubCommits()}this._billboardsToUpdateIndex=0}if(l>1.5*n&&(a.length=n),!(0,u.A)(this._vaf)||!(0,u.A)(this._vaf.va))return;let y;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,s.A.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let O=g.A.IDENTITY;t.mode===z.A.SCENE3D?(O=this.modelMatrix,y=s.A.clone(this._baseVolumeWC,this._boundingVolume)):y=s.A.clone(this._baseVolume2D,this._boundingVolume),function(t,i,e){let n=1;t._allSizedInMeters&&0===t._maxPixelOffset||(n=i.camera.getPixelSize(e,i.context.drawingBufferWidth,i.context.drawingBufferHeight));let o=n*t._maxScale*t._maxSize*2;t._allHorizontalCenter&&t._allVerticalCenter&&(o*=.5);const s=n*t._maxPixelOffset+t._maxEyeOffset;e.radius+=o+s}(this,t,y);const P=this._blendOption!==this.blendOption;if(this._blendOption=this.blendOption,P){this._blendOption===R.A.OPAQUE||this._blendOption===R.A.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=T.A.fromCache({depthTest:{enabled:!0,func:m.A.LESS},depthMask:!0}):this._rsOpaque=void 0;const t=this._blendOption===R.A.TRANSLUCENT;this._blendOption===R.A.TRANSLUCENT||this._blendOption===R.A.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=T.A.fromCache({depthTest:{enabled:!0,func:t?m.A.LEQUAL:m.A.LESS},depthMask:t,blending:B.A.ALPHA_BLEND}):this._rsTranslucent=void 0}let N,F,H,lt,ht;this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||0!==t.minimumDisableDepthTestDistance;const ft=v.A.maximumVertexTextureImageUnits>0;if(P||this._shaderRotation!==this._compiledShaderRotation||this._shaderAlignedAxis!==this._compiledShaderAlignedAxis||this._shaderScaleByDistance!==this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance!==this._compiledShaderTranslucencyByDistance||this._shaderPixelOffsetScaleByDistance!==this._compiledShaderPixelOffsetScaleByDistance||this._shaderDistanceDisplayCondition!==this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance||this._shaderClampToGround!==this._compiledShaderClampToGround||this._sdf!==this._compiledSDF){N=I.A,F=E.A,ht=[],(0,u.A)(this._batchTable)&&(ht.push("VECTOR_TILE"),N=this._batchTable.getVertexShaderCallback(!1,"a_batchId",void 0)(N),F=this._batchTable.getFragmentShaderCallback(!1,void 0)(F)),H=new x.A({defines:ht,sources:[N]}),this._instanced&&H.defines.push("INSTANCED"),this._shaderRotation&&H.defines.push("ROTATION"),this._shaderAlignedAxis&&H.defines.push("ALIGNED_AXIS"),this._shaderScaleByDistance&&H.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&H.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderPixelOffsetScaleByDistance&&H.defines.push("EYE_DISTANCE_PIXEL_OFFSET"),this._shaderDistanceDisplayCondition&&H.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&H.defines.push("DISABLE_DEPTH_DISTANCE"),this._shaderClampToGround&&(ft?H.defines.push("VERTEX_DEPTH_CHECK"):H.defines.push("FRAGMENT_DEPTH_CHECK"));const t=1-L.A.CUTOFF;this._sdf&&H.defines.push("SDF");const e=(0,u.A)(this._batchTable)?"VECTOR_TILE":"";this._blendOption===R.A.OPAQUE_AND_TRANSLUCENT&&(lt=new x.A({defines:["OPAQUE",e],sources:[F]}),this._shaderClampToGround&&(ft?lt.defines.push("VERTEX_DEPTH_CHECK"):lt.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(lt.defines.push("SDF"),lt.defines.push(`SDF_EDGE ${t}`)),this._sp=S.A.replaceCache({context:i,shaderProgram:this._sp,vertexShaderSource:H,fragmentShaderSource:lt,attributeLocations:st}),lt=new x.A({defines:["TRANSLUCENT",e],sources:[F]}),this._shaderClampToGround&&(ft?lt.defines.push("VERTEX_DEPTH_CHECK"):lt.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(lt.defines.push("SDF"),lt.defines.push(`SDF_EDGE ${t}`)),this._spTranslucent=S.A.replaceCache({context:i,shaderProgram:this._spTranslucent,vertexShaderSource:H,fragmentShaderSource:lt,attributeLocations:st})),this._blendOption===R.A.OPAQUE&&(lt=new x.A({defines:[e],sources:[F]}),this._shaderClampToGround&&(ft?lt.defines.push("VERTEX_DEPTH_CHECK"):lt.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(lt.defines.push("SDF"),lt.defines.push(`SDF_EDGE ${t}`)),this._sp=S.A.replaceCache({context:i,shaderProgram:this._sp,vertexShaderSource:H,fragmentShaderSource:lt,attributeLocations:st})),this._blendOption===R.A.TRANSLUCENT&&(lt=new x.A({defines:[e],sources:[F]}),this._shaderClampToGround&&(ft?lt.defines.push("VERTEX_DEPTH_CHECK"):lt.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(lt.defines.push("SDF"),lt.defines.push(`SDF_EDGE ${t}`)),this._spTranslucent=S.A.replaceCache({context:i,shaderProgram:this._spTranslucent,vertexShaderSource:H,fragmentShaderSource:lt,attributeLocations:st})),this._compiledShaderRotation=this._shaderRotation,this._compiledShaderAlignedAxis=this._shaderAlignedAxis,this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderPixelOffsetScaleByDistance=this._shaderPixelOffsetScaleByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance,this._compiledShaderClampToGround=this._shaderClampToGround,this._compiledSDF=this._sdf}const gt=t.commandList;if(f.render||f.pick){const i=this._colorCommands,e=this._blendOption===R.A.OPAQUE,o=this._blendOption===R.A.OPAQUE_AND_TRANSLUCENT,s=this._vaf.va,r=s.length;let a,l=this._uniforms;(0,u.A)(this._batchTable)?(l=this._batchTable.getUniformMapCallback()(l),a=this._batchTable.getPickId()):a="v_pickColor",i.length=r;const h=o?2*r:r;for(let t=0;t<h;++t){let r=i[t];(0,u.A)(r)||(r=i[t]=new C.A);const h=e||o&&t%2==0;r.pass=h||!o?D.A.OPAQUE:D.A.TRANSLUCENT,r.owner=this;const c=o?Math.floor(t/2):t;r.boundingVolume=y,r.modelMatrix=O,r.count=s[c].indicesCount,r.shaderProgram=h?this._sp:this._spTranslucent,r.uniformMap=l,r.vertexArray=s[c].va,r.renderState=h?this._rsOpaque:this._rsTranslucent,r.debugShowBoundingVolume=this.debugShowBoundingVolume,r.pickId=a,this._instanced&&(r.count=6,r.instanceCount=n),gt.push(r)}this.debugShowTextureAtlas&&((0,u.A)(this.debugCommand)||(this.debugCommand=function(t,i){const e=i.createViewportQuadCommand("uniform sampler2D billboard_texture; \nin vec2 v_textureCoordinates; \nvoid main() \n{ \n    out_FragColor = texture(billboard_texture, v_textureCoordinates); \n} \n",{uniformMap:{billboard_texture:function(){return t.textureAtlas.texture}}});return e.pass=D.A.OVERLAY,e}(this,t.context)),gt.push(this.debugCommand))}this._allBillboardsReady=o},lt.prototype.isDestroyed=function(){return!1},lt.prototype.destroy=function(){return(0,u.A)(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),ht(this._billboards),(0,p.A)(this)};const Ft=lt},734814:(t,i,e)=>{e.d(i,{A:()=>n});const n=Object.freeze({NONE:0,LOADING:2,LOADED:3,ERROR:4,FAILED:5})},208836:(t,i,e)=>{e.d(i,{A:()=>a});var n=e(369031),o=e(491446),s=e(734814);function r(t){n.A.defined("billboardCollection",t),this._billboardCollection=t,this._id=void 0,this._loadState=s.A.NONE,this._loadError=void 0,this._index=-1,this._width=void 0,this._height=void 0,this._hasSubregion=!1,this.dirty=!1}Object.defineProperties(r.prototype,{loadError:{get:function(){return this._loadError}},loadState:{get:function(){return this._loadState}},ready:{get:function(){return this._loadState===s.A.LOADED}},hasImage:{get:function(){return this._loadState!==s.A.NONE}},id:{get:function(){return this._id}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),r.prototype.unload=async function(){this._loadState!==s.A.NONE&&(this._id=void 0,this._loadError=void 0,this._loadState=s.A.NONE,this._index=-1,this._width=void 0,this._height=void 0,this.dirty=!0)},r.prototype.loadImage=async function(t,i){if(this._id===t)return;const e=this._billboardCollection,n=e.billboardTextureCache;let a,l=n.get(t);if((0,o.A)(l)&&i.loadState===s.A.LOADING||i.loadState===s.A.LOADED)return void r.clone(l,this);(0,o.A)(l)||(l=new r(e),n.set(t,l)),l._id=this._id=t,l._loadState=this._loadState=s.A.LOADING,l._loadError=this._loadError=void 0;const h=this._billboardCollection.textureAtlas;try{a=await h.addImage(t,i)}catch(i){if(l._loadState=s.A.ERROR,l._loadError=i,this._id!==t)return;return this._loadState=s.A.ERROR,void(this._loadError=i)}if(!(0,o.A)(a)||-1===a){if(l._loadState=s.A.FAILED,l._index=-1,this._id!==t)return;return this._loadState=s.A.FAILED,void(this._index=-1)}l._index=a,l._loadState=s.A.LOADED;const c=h.rectangles[a];l._width=c.width,l._height=c.height,this._id===t&&(this._index=a,this._loadState=s.A.LOADED,this._width=c.width,this._height=c.height,this.dirty=!0)},r.prototype.addImageSubRegion=async function(t,i){let e;this._id=t,this._loadState=s.A.LOADING,this._loadError=void 0,this._hasSubregion=!0;const n=this._billboardCollection.textureAtlas;try{e=await n.addImageSubRegion(t,i)}catch(t){return this._loadState=s.A.ERROR,void(this._loadError=t)}if(!(0,o.A)(e)||-1===e)return this._loadState=s.A.FAILED,this._index=-1,this._width=void 0,void(this._height=void 0);this._width=i.width,this._height=i.height,this._index=e,this._loadState=s.A.LOADED,this.dirty=!0},r.prototype.computeTextureCoordinates=function(t){return this._billboardCollection.textureAtlas.computeTextureCoordinates(this._index,t)},r.clone=function(t,i){if(i._id=t._id,i._loadState=t._loadState,i._loadError=void 0,i._index=t._index,i._width=t._width,i._height=t._height,i._hasSubregion=t._hasSubregion,!t.ready)return(async()=>{const e=t._id,n=t._billboardCollection.textureAtlas;await n._indexPromiseById.get(e),i._id===e&&(t._hasSubregion&&await Promise.resolve(),i._id=e,i._loadState=t._loadState,i._loadError=t._loadError,i._index=t._index,i._width=t._width,i._height=t._height,i.dirty=!0)})(),i;i.dirty=!0};const a=r},416882:(t,i,e)=>{e.d(i,{A:()=>n});const n=Object.freeze({OPAQUE:0,TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2})},63316:(t,i,e)=>{e.d(i,{Ay:()=>o,Lq:()=>r,w_:()=>s});const n={NONE:0,CLAMP_TO_GROUND:1,RELATIVE_TO_GROUND:2,CLAMP_TO_TERRAIN:3,RELATIVE_TO_TERRAIN:4,CLAMP_TO_3D_TILE:5,RELATIVE_TO_3D_TILE:6},o=Object.freeze(n);function s(t){return t===n.CLAMP_TO_GROUND||t===n.CLAMP_TO_3D_TILE||t===n.CLAMP_TO_TERRAIN}function r(t){return t===n.RELATIVE_TO_GROUND||t===n.RELATIVE_TO_3D_TILE||t===n.RELATIVE_TO_TERRAIN}},337632:(t,i,e)=>{e.d(i,{A:()=>n});const n=Object.freeze({CENTER:0,LEFT:1,RIGHT:-1})},566798:(t,i,e)=>{e.d(i,{A:()=>P});var n=e(647934),o=e(434067),s=e(267980),r=e(41476),a=e(915325),l=e(491446),h=e(605971),c=e(853331),d=e(290176),u=e(124547),p=e(63316),_=e(337632),f=e(15817),A=e(589834),g=e(742558);const m={};let y=0;const b=new r.A(.165,.165,.165,.8),v=new o.A(7,5),C=Object.freeze({LTR:0,RTL:1,WEAK:2,BRACKETS:3});function D(t){t._rebindAllGlyphs||t._repositionAllGlyphs||t._labelCollection._labelsToUpdate.push(t),t._rebindAllGlyphs=!0}function T(t){t._rebindAllGlyphs||t._repositionAllGlyphs||t._labelCollection._labelsToUpdate.push(t),t._repositionAllGlyphs=!0}function S(t,i){return document.defaultView.getComputedStyle(t,null).getPropertyValue(i)}function x(t){let i=m[t._font];if(!(0,l.A)(i)){const e=document.createElement("div");e.style.position="absolute",e.style.opacity=0,e.style.font=t._font,document.body.appendChild(e);let n=parseFloat(S(e,"line-height"));isNaN(n)&&(n=void 0),i={family:S(e,"font-family"),size:S(e,"font-size").replace("px",""),style:S(e,"font-style"),weight:S(e,"font-weight"),lineHeight:n},document.body.removeChild(e),y<256&&(m[t._font]=i,y++)}t._fontFamily=i.family,t._fontSize=i.size,t._fontStyle=i.style,t._fontWeight=i.weight,t._lineHeight=i.lineHeight}function w(t,i){if(t=t??a.A.EMPTY_OBJECT,(0,l.A)(t.disableDepthTestDistance)&&t.disableDepthTestDistance<0)throw new h.A("disableDepthTestDistance must be greater than 0.0.");let e=t.translucencyByDistance,n=t.pixelOffsetScaleByDistance,u=t.scaleByDistance,A=t.distanceDisplayCondition;if((0,l.A)(e)){if(e.far<=e.near)throw new h.A("translucencyByDistance.far must be greater than translucencyByDistance.near.");e=d.A.clone(e)}if((0,l.A)(n)){if(n.far<=n.near)throw new h.A("pixelOffsetScaleByDistance.far must be greater than pixelOffsetScaleByDistance.near.");n=d.A.clone(n)}if((0,l.A)(u)){if(u.far<=u.near)throw new h.A("scaleByDistance.far must be greater than scaleByDistance.near.");u=d.A.clone(u)}if((0,l.A)(A)){if(A.far<=A.near)throw new h.A("distanceDisplayCondition.far must be greater than distanceDisplayCondition.near.");A=c.A.clone(A)}this._renderedText=void 0,this._text=void 0,this._show=t.show??!0,this._font=t.font??"30px sans-serif",this._fillColor=r.A.clone(t.fillColor??r.A.WHITE),this._outlineColor=r.A.clone(t.outlineColor??r.A.BLACK),this._outlineWidth=t.outlineWidth??1,this._showBackground=t.showBackground??!1,this._backgroundColor=r.A.clone(t.backgroundColor??b),this._backgroundPadding=o.A.clone(t.backgroundPadding??v),this._style=t.style??f.A.FILL,this._verticalOrigin=t.verticalOrigin??g.A.BASELINE,this._horizontalOrigin=t.horizontalOrigin??_.A.LEFT,this._pixelOffset=o.A.clone(t.pixelOffset??o.A.ZERO),this._eyeOffset=s.A.clone(t.eyeOffset??s.A.ZERO),this._position=s.A.clone(t.position??s.A.ZERO),this._scale=t.scale??1,this._id=t.id,this._translucencyByDistance=e,this._pixelOffsetScaleByDistance=n,this._scaleByDistance=u,this._heightReference=t.heightReference??p.Ay.NONE,this._distanceDisplayCondition=A,this._disableDepthTestDistance=t.disableDepthTestDistance,this._labelCollection=i,this._glyphs=[],this._backgroundBillboard=void 0,this._batchIndex=void 0,this._rebindAllGlyphs=!0,this._repositionAllGlyphs=!0,this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=void 0,this._clusterShow=!0,this.text=t.text??"",this._relativeSize=1,x(this),this._updateClamping()}function E(t,i){const e=/[a-zA-Z0-9]/,n=/[()[\]{}<>]/,o=[];let s="",r=C.LTR,a="";const l=t.length;for(let h=0;h<l;++h){const l=t.charAt(h);a=i.test(l)?C.RTL:e.test(l)?C.LTR:n.test(l)?C.BRACKETS:C.WEAK,0===h&&(r=a),r===a&&a!==C.BRACKETS?s+=l:(""!==s&&o.push({Type:r,Word:s}),r=a,s=l)}return o.push({Type:a,Word:s}),o}function I(t){return t.split("").reverse().join("")}function O(t,i,e){return t.slice(0,i)+e+t.slice(i)}function B(t){switch(t){case"(":return")";case")":return"(";case"[":return"]";case"]":return"[";case"{":return"}";case"}":return"{";case"<":return">";case">":return"<"}}Object.defineProperties(w.prototype,{show:{get:function(){return this._show},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");if(this._show!==t){this._show=t;const i=this._glyphs;for(let e=0,n=i.length;e<n;e++){const n=i[e].billboard;(0,l.A)(n)&&(n.show=t)}const e=this._backgroundBillboard;(0,l.A)(e)&&(e.show=t)}}},position:{get:function(){return this._position},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");const i=this._position;if(!s.A.equals(i,t)){s.A.clone(t,i);const e=this._glyphs;for(let i=0,n=e.length;i<n;i++){const n=e[i].billboard;(0,l.A)(n)&&(n.position=t)}const n=this._backgroundBillboard;(0,l.A)(n)&&(n.position=t),this._updateClamping()}}},heightReference:{get:function(){return this._heightReference},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");if(t!==this._heightReference){this._heightReference=t;const i=this._glyphs;for(let e=0,n=i.length;e<n;e++){const n=i[e].billboard;(0,l.A)(n)&&(n.heightReference=t)}const e=this._backgroundBillboard;(0,l.A)(e)&&(e.heightReference=t),T(this),this._updateClamping()}}},text:{get:function(){return this._text},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");if(this._text!==t){this._text=t;const i=w.filterUnsupportedCharacters(t);this._renderedText=w.enableRightToLeftDetection?function(t){const i=t.split("\n");let e="";for(let t=0;t<i.length;t++){const n=i[t],o=R.test(n.charAt(0)),s=E(n,R);let r=0,a="";for(let t=0;t<s.length;++t){const i=s[t],e=i.Type===C.BRACKETS?B(i.Word):I(i.Word);o?i.Type===C.RTL?(a=e+a,r=0):i.Type===C.LTR?(a=O(a,r,i.Word),r+=i.Word.length):i.Type!==C.WEAK&&i.Type!==C.BRACKETS||(i.Type===C.WEAK&&s[t-1].Type===C.BRACKETS?a=e+a:s[t-1].Type===C.RTL?(a=e+a,r=0):s.length>t+1?s[t+1].Type===C.RTL?(a=e+a,r=0):(a=O(a,r,i.Word),r+=i.Word.length):a=O(a,0,e)):i.Type===C.RTL?a=O(a,r,e):i.Type===C.LTR?(a+=i.Word,r=a.length):i.Type!==C.WEAK&&i.Type!==C.BRACKETS||(t>0&&s[t-1].Type===C.RTL?s.length>t+1?s[t+1].Type===C.RTL?a=O(a,r,e):(a+=i.Word,r=a.length):a+=i.Word:(a+=i.Word,r=a.length))}e+=a,t<i.length-1&&(e+="\n")}return e}(i):i,D(this)}}},font:{get:function(){return this._font},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");this._font!==t&&(this._font=t,D(this),x(this))}},fillColor:{get:function(){return this._fillColor},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");const i=this._fillColor;r.A.equals(i,t)||(r.A.clone(t,i),D(this))}},outlineColor:{get:function(){return this._outlineColor},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");const i=this._outlineColor;r.A.equals(i,t)||(r.A.clone(t,i),D(this))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");this._outlineWidth!==t&&(this._outlineWidth=t,D(this))}},showBackground:{get:function(){return this._showBackground},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");this._showBackground!==t&&(this._showBackground=t,D(this))}},backgroundColor:{get:function(){return this._backgroundColor},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");const i=this._backgroundColor;if(!r.A.equals(i,t)){r.A.clone(t,i);const e=this._backgroundBillboard;(0,l.A)(e)&&(e.color=i)}}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");const i=this._backgroundPadding;o.A.equals(i,t)||(o.A.clone(t,i),T(this))}},style:{get:function(){return this._style},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");this._style!==t&&(this._style=t,D(this))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");const i=this._pixelOffset;if(!o.A.equals(i,t)){o.A.clone(t,i);const e=this._glyphs;for(let i=0,n=e.length;i<n;i++){const n=e[i];(0,l.A)(n.billboard)&&(n.billboard.pixelOffset=t)}const n=this._backgroundBillboard;(0,l.A)(n)&&(n.pixelOffset=t)}}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(t){if((0,l.A)(t)&&t.far<=t.near)throw new h.A("far distance must be greater than near distance.");const i=this._translucencyByDistance;if(!d.A.equals(i,t)){this._translucencyByDistance=d.A.clone(t,i);const e=this._glyphs;for(let i=0,n=e.length;i<n;i++){const n=e[i];(0,l.A)(n.billboard)&&(n.billboard.translucencyByDistance=t)}const n=this._backgroundBillboard;(0,l.A)(n)&&(n.translucencyByDistance=t)}}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(t){if((0,l.A)(t)&&t.far<=t.near)throw new h.A("far distance must be greater than near distance.");const i=this._pixelOffsetScaleByDistance;if(!d.A.equals(i,t)){this._pixelOffsetScaleByDistance=d.A.clone(t,i);const e=this._glyphs;for(let i=0,n=e.length;i<n;i++){const n=e[i];(0,l.A)(n.billboard)&&(n.billboard.pixelOffsetScaleByDistance=t)}const n=this._backgroundBillboard;(0,l.A)(n)&&(n.pixelOffsetScaleByDistance=t)}}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(t){if((0,l.A)(t)&&t.far<=t.near)throw new h.A("far distance must be greater than near distance.");const i=this._scaleByDistance;if(!d.A.equals(i,t)){this._scaleByDistance=d.A.clone(t,i);const e=this._glyphs;for(let i=0,n=e.length;i<n;i++){const n=e[i];(0,l.A)(n.billboard)&&(n.billboard.scaleByDistance=t)}const n=this._backgroundBillboard;(0,l.A)(n)&&(n.scaleByDistance=t)}}},eyeOffset:{get:function(){return this._eyeOffset},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");const i=this._eyeOffset;if(!s.A.equals(i,t)){s.A.clone(t,i);const e=this._glyphs;for(let i=0,n=e.length;i<n;i++){const n=e[i];(0,l.A)(n.billboard)&&(n.billboard.eyeOffset=t)}const n=this._backgroundBillboard;(0,l.A)(n)&&(n.eyeOffset=t)}}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");this._horizontalOrigin!==t&&(this._horizontalOrigin=t,T(this))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");if(this._verticalOrigin!==t){this._verticalOrigin=t;const i=this._glyphs;for(let e=0,n=i.length;e<n;e++){const n=i[e];(0,l.A)(n.billboard)&&(n.billboard.verticalOrigin=t)}const e=this._backgroundBillboard;(0,l.A)(e)&&(e.verticalOrigin=t),T(this)}}},scale:{get:function(){return this._scale},set:function(t){if(!(0,l.A)(t))throw new h.A("value is required.");if(this._scale!==t){this._scale=t;const i=this._glyphs;for(let e=0,n=i.length;e<n;e++){const n=i[e];(0,l.A)(n.billboard)&&(n.billboard.scale=t*this._relativeSize)}const e=this._backgroundBillboard;(0,l.A)(e)&&(e.scale=t*this._relativeSize),T(this)}}},totalScale:{get:function(){return this._scale*this._relativeSize}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){if((0,l.A)(t)&&t.far<=t.near)throw new h.A("far must be greater than near");if(!c.A.equals(t,this._distanceDisplayCondition)){this._distanceDisplayCondition=c.A.clone(t,this._distanceDisplayCondition);const i=this._glyphs;for(let e=0,n=i.length;e<n;e++){const n=i[e];(0,l.A)(n.billboard)&&(n.billboard.distanceDisplayCondition=t)}const e=this._backgroundBillboard;(0,l.A)(e)&&(e.distanceDisplayCondition=t)}}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(t){if(this._disableDepthTestDistance!==t){if((0,l.A)(t)&&t<0)throw new h.A("disableDepthTestDistance must be greater than 0.0.");this._disableDepthTestDistance=t;const i=this._glyphs;for(let e=0,n=i.length;e<n;e++){const n=i[e];(0,l.A)(n.billboard)&&(n.billboard.disableDepthTestDistance=t)}const e=this._backgroundBillboard;(0,l.A)(e)&&(e.disableDepthTestDistance=t)}}},id:{get:function(){return this._id},set:function(t){if(this._id!==t){this._id=t;const i=this._glyphs;for(let e=0,n=i.length;e<n;e++){const n=i[e];(0,l.A)(n.billboard)&&(n.billboard.id=t)}const e=this._backgroundBillboard;(0,l.A)(e)&&(e.id=t)}}},pickId:{get:function(){if(0!==this._glyphs.length&&(0,l.A)(this._glyphs[0].billboard))return this._glyphs[0].billboard.pickId}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(t){this._actualClampedPosition=s.A.clone(t,this._actualClampedPosition);const i=this._glyphs;for(let e=0,n=i.length;e<n;e++){const n=i[e];(0,l.A)(n.billboard)&&(n.billboard._clampedPosition=t)}const e=this._backgroundBillboard;(0,l.A)(e)&&(e._clampedPosition=t)}},clusterShow:{get:function(){return this._clusterShow},set:function(t){if(this._clusterShow!==t){this._clusterShow=t;const i=this._glyphs;for(let e=0,n=i.length;e<n;e++){const n=i[e];(0,l.A)(n.billboard)&&(n.billboard.clusterShow=t)}const e=this._backgroundBillboard;(0,l.A)(e)&&(e.clusterShow=t)}}}}),w.prototype._updateClamping=function(){u.A._updateClamping(this._labelCollection,this)},w.prototype.computeScreenSpacePosition=function(t,i){if(!(0,l.A)(t))throw new h.A("scene is required.");(0,l.A)(i)||(i=new o.A);const e=this._labelCollection.modelMatrix,n=(0,l.A)(this._actualClampedPosition)?this._actualClampedPosition:this._position;return u.A._computeScreenSpacePosition(e,n,this._eyeOffset,this._pixelOffset,t,i)},w.getScreenSpaceBoundingBox=function(t,i,e){let o=0,s=0,r=0,a=0;const h=t.totalScale,c=t._backgroundBillboard;if((0,l.A)(c))o=i.x+c._translate.x,s=i.y-c._translate.y,r=c.width*h,a=c.height*h,t.verticalOrigin===g.A.BOTTOM||t.verticalOrigin===g.A.BASELINE?s-=a:t.verticalOrigin===g.A.CENTER&&(s-=.5*a);else{o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;let e=0,n=0;const c=t._glyphs,d=c.length;for(let r=0;r<d;++r){const a=c[r],d=a.billboard;if(!(0,l.A)(d))continue;const u=i.x+d._translate.x;let p=i.y-d._translate.y;const _=a.dimensions.width*h,f=a.dimensions.height*h;t.verticalOrigin===g.A.BOTTOM||t.verticalOrigin===g.A.BASELINE?p-=f:t.verticalOrigin===g.A.CENTER&&(p-=.5*f),t._verticalOrigin===g.A.TOP?p+=A.A.PADDING*h:t._verticalOrigin!==g.A.BOTTOM&&t._verticalOrigin!==g.A.BASELINE||(p-=A.A.PADDING*h),o=Math.min(o,u),s=Math.min(s,p),e=Math.max(e,u+_),n=Math.max(n,p+f)}r=e-o,a=n-s}return(0,l.A)(e)||(e=new n.A),e.x=o,e.y=s,e.width=r,e.height=a,e},w.filterUnsupportedCharacters=function(t){const i=new RegExp(/[\u0000-\u0008\u000E-\u001F\u00ad\u202a-\u206f\u200b-\u200f]/,"g");return t.replace(i,"")},w.prototype.equals=function(t){return this===t||(0,l.A)(t)&&this._show===t._show&&this._scale===t._scale&&this._outlineWidth===t._outlineWidth&&this._showBackground===t._showBackground&&this._style===t._style&&this._verticalOrigin===t._verticalOrigin&&this._horizontalOrigin===t._horizontalOrigin&&this._heightReference===t._heightReference&&this._renderedText===t._renderedText&&this._font===t._font&&s.A.equals(this._position,t._position)&&r.A.equals(this._fillColor,t._fillColor)&&r.A.equals(this._outlineColor,t._outlineColor)&&r.A.equals(this._backgroundColor,t._backgroundColor)&&o.A.equals(this._backgroundPadding,t._backgroundPadding)&&o.A.equals(this._pixelOffset,t._pixelOffset)&&s.A.equals(this._eyeOffset,t._eyeOffset)&&d.A.equals(this._translucencyByDistance,t._translucencyByDistance)&&d.A.equals(this._pixelOffsetScaleByDistance,t._pixelOffsetScaleByDistance)&&d.A.equals(this._scaleByDistance,t._scaleByDistance)&&c.A.equals(this._distanceDisplayCondition,t._distanceDisplayCondition)&&this._disableDepthTestDistance===t._disableDepthTestDistance&&this._id===t._id},w.prototype.isDestroyed=function(){return!1},w.enableRightToLeftDetection=!1;const R=new RegExp("[א-ת؀-ۿݐ-ݿࢠ-ࣿ]"),P=w},465674:(t,i,e)=>{e.d(i,{A:()=>W});var n=e(647934),o=e(434067),s=e(41476),r=e(915325),a=e(491446),l=e(677354),h=e(605971),c=e(584164),d=e(517638),u=e(527288),p=e(770103),_=e(208836),f=e(416882),A=e(63316),g=e(337632),m=e(566798),y=e(15817),b=e(589834),v=e(66589),C=e(742558),D=e(62052);function T(){this.dimensions=void 0,this.billboardTexture=void 0,this.billboard=void 0}const S="ID_WHITE_PIXEL",x=new o.A(4,4),w=new n.A(1,1,1,1),E={};function I(t,i,e,n,o,r){return E.font=i,E.fillColor=e,E.strokeColor=n,E.strokeWidth=o,E.padding=b.A.PADDING,E.fill=r===y.A.FILL||r===y.A.FILL_AND_OUTLINE,E.stroke=r===y.A.OUTLINE||r===y.A.FILL_AND_OUTLINE,E.backgroundColor=s.A.BLACK,(0,d.A)(t,E)}function O(t,i){const e=i.billboard;(0,a.A)(e)&&(e.show=!1,(0,a.A)(e._removeCallbackFunc)&&(e._removeCallbackFunc(),e._removeCallbackFunc=void 0),t._spareBillboards.push(e),i.billboard=void 0)}const B=new D,R=/\s/;function P(t,i){const e=i._renderedText,n=B.splitGraphemes(e),r=n.length,l=i._glyphs,h=l.length;if(i._relativeSize=i._fontSize/b.A.FONT_SIZE,r<h)for(let i=r;i<h;++i)O(t,l[i]);l.length=r;const c=i.show&&i._showBackground&&e.split("\n").join("").length>0;let d=i._backgroundBillboard;const p=t._backgroundBillboardCollection;c?((0,a.A)(d)||(d=function(t,i){const e=i._backgroundBillboardTexture;if(!e.hasImage){const t=document.createElement("canvas");t.width=x.x,t.height=x.y;const i=t.getContext("2d");i.fillStyle="#fff",i.fillRect(0,0,t.width,t.height),e.loadImage(S,t),e.addImageSubRegion(S,w)}const n=t.add({collection:i});return n.setImageTexture(e),n}(p,t),i._backgroundBillboard=d),d.color=i._backgroundColor,d.show=i._show,d.position=i._position,d.eyeOffset=i._eyeOffset,d.pixelOffset=i._pixelOffset,d.horizontalOrigin=g.A.LEFT,d.verticalOrigin=i._verticalOrigin,d.heightReference=i._heightReference,d.scale=i.totalScale,d.pickPrimitive=i,d.id=i._id,d.translucencyByDistance=i._translucencyByDistance,d.pixelOffsetScaleByDistance=i._pixelOffsetScaleByDistance,d.scaleByDistance=i._scaleByDistance,d.distanceDisplayCondition=i._distanceDisplayCondition,d.disableDepthTestDistance=i._disableDepthTestDistance,d.clusterShow=i.clusterShow):(0,a.A)(d)&&(p.remove(d),i._backgroundBillboard=d=void 0);const f=t._glyphBillboardCollection,A=f.billboardTextureCache,m=t._textDimensionsCache;for(let e=0;e<r;++e){const r=n[e],h=i._verticalOrigin,c=JSON.stringify([r,i._fontFamily,i._fontStyle,i._fontWeight,+h]);let d=m[c],p=A.get(c);if(!(0,a.A)(p)||!(0,a.A)(d)){p=new _.A(f),A.set(c,p);const t=I(r,`${i._fontStyle} ${i._fontWeight} ${b.A.FONT_SIZE}px ${i._fontFamily}`,s.A.WHITE,s.A.WHITE,0,y.A.FILL);if(d=t.dimensions,m[c]=d,t.width>0&&t.height>0&&!R.test(r)){const i=u(t,{cutoff:b.A.CUTOFF,radius:b.A.RADIUS}),e=t.getContext("2d"),n=t.width,o=t.height,s=e.getImageData(0,0,n,o);for(let t=0;t<n;t++)for(let e=0;e<o;e++){const o=e*n+t,r=255*i[o],a=4*o;s.data[a+0]=r,s.data[a+1]=r,s.data[a+2]=r,s.data[a+3]=r}e.putImageData(s,0,0),p.loadImage(c,t)}}let v=l[e];if((0,a.A)(v)||(v=new T,v.dimensions=d,v.billboardTexture=p,l[e]=v),v.billboardTexture.id!==c&&(v.billboardTexture=p,v.dimensions=d),!p.hasImage){O(t,v);continue}let C=v.billboard;const D=t._spareBillboards;(0,a.A)(C)||(D.length>0?C=D.pop():(C=f.add({collection:t}),C._labelDimensions=new o.A,C._labelTranslate=new o.A),v.billboard=C),C.setImageTexture(p),C.show=i._show,C.position=i._position,C.eyeOffset=i._eyeOffset,C.pixelOffset=i._pixelOffset,C.horizontalOrigin=g.A.LEFT,C.verticalOrigin=i._verticalOrigin,C.heightReference=i._heightReference,C.scale=i.totalScale,C.pickPrimitive=i,C.id=i._id,C.translucencyByDistance=i._translucencyByDistance,C.pixelOffsetScaleByDistance=i._pixelOffsetScaleByDistance,C.scaleByDistance=i._scaleByDistance,C.distanceDisplayCondition=i._distanceDisplayCondition,C.disableDepthTestDistance=i._disableDepthTestDistance,C._batchIndex=i._batchIndex,C.outlineColor=i.outlineColor,i.style===y.A.FILL_AND_OUTLINE?(C.color=i._fillColor,C.outlineWidth=i.outlineWidth):i.style===y.A.FILL?(C.color=i._fillColor,C.outlineWidth=0):i.style===y.A.OUTLINE&&(C.color=s.A.TRANSPARENT,C.outlineWidth=i.outlineWidth)}i._repositionAllGlyphs=!0}function N(t,i,e){return i===g.A.CENTER?-t/2:i===g.A.RIGHT?-(t+e.x):e.x}const z=new o.A,L=new o.A;function F(t){const i=t._glyphs,e=t._renderedText;let n=0,s=0;const r=[];let l=Number.NEGATIVE_INFINITY,h=0,c=1;const d=i.length,u=t._backgroundBillboard,p=o.A.clone((0,a.A)(u)?t._backgroundPadding:o.A.ZERO,L);p.x/=t._relativeSize,p.y/=t._relativeSize;for(let t=0;t<d;++t){if("\n"===e.charAt(t)){r.push(n),++c,n=0;continue}const o=i[t].dimensions;(0,a.A)(o)&&(h=Math.max(h,o.height-o.descent),l=Math.max(l,o.descent),n+=o.width-o.minx,t<d-1&&(n+=i[t+1].dimensions.minx),s=Math.max(s,n))}r.push(n);const _=h+l,f=t.totalScale,m=t._horizontalOrigin,y=t._verticalOrigin;let v=0,D=r[v],T=N(D,m,p);const S=((0,a.A)(t._lineHeight)?t._lineHeight:1.2*t._fontSize)/t._relativeSize,x=S*(c-1);let w=s,E=_+x;(0,a.A)(u)&&(w+=2*p.x,E+=2*p.y,u._labelHorizontalOrigin=m),z.x=T*f,z.y=0;let I=!0,O=0;for(let t=0;t<d;++t){if("\n"===e.charAt(t)){++v,O+=S,D=r[v],T=N(D,m,p),z.x=T*f,I=!0;continue}const n=i[t],o=n.dimensions;if((0,a.A)(o)&&(y===C.A.TOP?(z.y=o.height-h-p.y,z.y+=b.A.PADDING):y===C.A.CENTER?z.y=(x+o.height-h)/2:y===C.A.BASELINE?(z.y=x,z.y-=b.A.PADDING):(z.y=x+l+p.y,z.y-=b.A.PADDING),z.y=(z.y-o.descent-O)*f,I&&(z.x-=b.A.PADDING*f,I=!1),(0,a.A)(n.billboard)&&(n.billboard._setTranslate(z),n.billboard._labelDimensions.x=w,n.billboard._labelDimensions.y=E,n.billboard._labelHorizontalOrigin=m),t<d-1)){const e=i[t+1];z.x+=(o.width-o.minx+e.dimensions.minx)*f}}if((0,a.A)(u)&&e.split("\n").join("").length>0&&(T=m===g.A.CENTER?-s/2-p.x:m===g.A.RIGHT?-(s+2*p.x):0,z.x=T*f,y===C.A.TOP?z.y=_-h-l:y===C.A.CENTER?z.y=(_-h)/2-l:y===C.A.BASELINE?z.y=-p.y-l:z.y=0,z.y=z.y*f,u.width=w,u.height=E,u._setTranslate(z),u._labelTranslate=o.A.clone(z,u._labelTranslate)),(0,A.w_)(t.heightReference))for(let t=0;t<d;++t){const e=i[t].billboard;(0,a.A)(e)&&(e._labelTranslate=o.A.clone(z,e._labelTranslate))}}function H(t,i){const e=i._glyphs;for(let i=0,n=e.length;i<n;++i)O(t,e[i]);(0,a.A)(i._backgroundBillboard)&&(t._backgroundBillboardCollection.remove(i._backgroundBillboard),i._backgroundBillboard=void 0),i._labelCollection=void 0,(0,a.A)(i._removeCallbackFunc)&&i._removeCallbackFunc(),(0,l.A)(i)}function M(t){t=t??r.A.EMPTY_OBJECT,this._scene=t.scene,this._batchTable=t.batchTable;const i=new p.A({scene:this._scene,textureAtlas:new v.A({initialSize:x})});this._backgroundBillboardCollection=i,this._backgroundBillboardTexture=new _.A(i),this._glyphBillboardCollection=new p.A({scene:this._scene,batchTable:this._batchTable}),this._glyphBillboardCollection._sdf=!0,this._spareBillboards=[],this._textDimensionsCache={},this._labels=[],this._labelsToUpdate=[],this._totalGlyphCount=0,this._highlightColor=s.A.clone(s.A.WHITE),this.show=t.show??!0,this.modelMatrix=c.A.clone(t.modelMatrix??c.A.IDENTITY),this.debugShowBoundingVolume=t.debugShowBoundingVolume??!1,this.blendOption=t.blendOption??f.A.OPAQUE_AND_TRANSLUCENT}Object.defineProperties(M.prototype,{length:{get:function(){return this._labels.length}},sizeInBytes:{get:function(){return this._glyphBillboardCollection.sizeInBytes+this._backgroundBillboardCollection.sizeInBytes}},ready:{get:function(){const t=this._backgroundBillboardCollection.get(0);return!((0,a.A)(t)&&!t.ready)&&this._glyphBillboardCollection.ready}}}),M.prototype.add=function(t){const i=new m.A(t,this);return this._labels.push(i),this._labelsToUpdate.push(i),i},M.prototype.remove=function(t){if((0,a.A)(t)&&t._labelCollection===this){const i=this._labels.indexOf(t);if(-1!==i)return this._labels.splice(i,1),H(this,t),!0}return!1},M.prototype.removeAll=function(){const t=this._labels;for(let i=0,e=t.length;i<e;++i)H(this,t[i]);t.length=0},M.prototype.contains=function(t){return(0,a.A)(t)&&t._labelCollection===this},M.prototype.get=function(t){if(!(0,a.A)(t))throw new h.A("index is required.");return this._labels[t]},M.prototype.update=function(t){if(!this.show)return;const i=this._glyphBillboardCollection,e=this._backgroundBillboardCollection;i.modelMatrix=this.modelMatrix,i.debugShowBoundingVolume=this.debugShowBoundingVolume,e.modelMatrix=this.modelMatrix,e.debugShowBoundingVolume=this.debugShowBoundingVolume;const n=this._labelsToUpdate.length;for(let t=0;t<n;++t){const i=this._labelsToUpdate[t];if(i.isDestroyed())continue;const e=i._glyphs.length;i._rebindAllGlyphs&&(P(this,i),i._rebindAllGlyphs=!1),i._repositionAllGlyphs&&(F(i),i._repositionAllGlyphs=!1);const n=i._glyphs.length-e;this._totalGlyphCount+=n}const o=e.length>0?f.A.TRANSLUCENT:this.blendOption;i.blendOption=o,e.blendOption=o,i._highlightColor=this._highlightColor,e._highlightColor=this._highlightColor,this._labelsToUpdate.length=0,e.update(t),i.update(t)},M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){return this.removeAll(),this._glyphBillboardCollection=this._glyphBillboardCollection.destroy(),this._backgroundBillboardCollection=this._backgroundBillboardCollection.destroy(),(0,l.A)(this)};const W=M},15817:(t,i,e)=>{e.d(i,{A:()=>n});const n=Object.freeze({FILL:0,OUTLINE:1,FILL_AND_OUTLINE:2})},520853:(t,i,e)=>{e.d(i,{A:()=>R});var n=e(647934),o=e(434067),s=e(267980),r=e(626809),a=e(41476),l=e(915325),h=e(491446),c=e(605971),d=e(853331),u=e(584164),p=e(290176),_=e(62467),f=e(78173),A=e(913419);function g(t,i){if(t=t??l.A.EMPTY_OBJECT,(0,h.A)(t.disableDepthTestDistance)&&t.disableDepthTestDistance<0)throw new c.A("disableDepthTestDistance must be greater than or equal to 0.0.");let e=t.translucencyByDistance,n=t.scaleByDistance,o=t.distanceDisplayCondition;if((0,h.A)(e)){if(e.far<=e.near)throw new c.A("translucencyByDistance.far must be greater than translucencyByDistance.near.");e=p.A.clone(e)}if((0,h.A)(n)){if(n.far<=n.near)throw new c.A("scaleByDistance.far must be greater than scaleByDistance.near.");n=p.A.clone(n)}if((0,h.A)(o)){if(o.far<=o.near)throw new c.A("distanceDisplayCondition.far must be greater than distanceDisplayCondition.near.");o=d.A.clone(o)}this._show=t.show??!0,this._position=s.A.clone(t.position??s.A.ZERO),this._actualPosition=s.A.clone(this._position),this._color=a.A.clone(t.color??a.A.WHITE),this._outlineColor=a.A.clone(t.outlineColor??a.A.TRANSPARENT),this._outlineWidth=t.outlineWidth??0,this._pixelSize=t.pixelSize??10,this._scaleByDistance=n,this._translucencyByDistance=e,this._distanceDisplayCondition=o,this._disableDepthTestDistance=t.disableDepthTestDistance??0,this._id=t.id,this._collection=t.collection??i,this._clusterShow=!0,this._pickId=void 0,this._pointPrimitiveCollection=i,this._dirty=!1,this._index=-1,this._splitDirection=t.splitDirection??A.A.NONE}const m=g.SHOW_INDEX=0,y=g.POSITION_INDEX=1,b=g.COLOR_INDEX=2,v=g.OUTLINE_COLOR_INDEX=3,C=g.OUTLINE_WIDTH_INDEX=4,D=g.PIXEL_SIZE_INDEX=5,T=g.SCALE_BY_DISTANCE_INDEX=6,S=g.TRANSLUCENCY_BY_DISTANCE_INDEX=7,x=g.DISTANCE_DISPLAY_CONDITION_INDEX=8,w=g.DISABLE_DEPTH_DISTANCE_INDEX=9,E=g.SPLIT_DIRECTION_INDEX=10;function I(t,i){const e=t._pointPrimitiveCollection;(0,h.A)(e)&&(e._updatePointPrimitive(t,i),t._dirty=!0)}g.NUMBER_OF_PROPERTIES=11,Object.defineProperties(g.prototype,{show:{get:function(){return this._show},set:function(t){if(!(0,h.A)(t))throw new c.A("value is required.");this._show!==t&&(this._show=t,I(this,m))}},position:{get:function(){return this._position},set:function(t){if(!(0,h.A)(t))throw new c.A("value is required.");const i=this._position;s.A.equals(i,t)||(s.A.clone(t,i),s.A.clone(t,this._actualPosition),I(this,y))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(t){if((0,h.A)(t)&&t.far<=t.near)throw new c.A("far distance must be greater than near distance.");const i=this._scaleByDistance;p.A.equals(i,t)||(this._scaleByDistance=p.A.clone(t,i),I(this,T))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(t){if((0,h.A)(t)&&t.far<=t.near)throw new c.A("far distance must be greater than near distance.");const i=this._translucencyByDistance;p.A.equals(i,t)||(this._translucencyByDistance=p.A.clone(t,i),I(this,S))}},pixelSize:{get:function(){return this._pixelSize},set:function(t){if(!(0,h.A)(t))throw new c.A("value is required.");this._pixelSize!==t&&(this._pixelSize=t,I(this,D))}},color:{get:function(){return this._color},set:function(t){if(!(0,h.A)(t))throw new c.A("value is required.");const i=this._color;a.A.equals(i,t)||(a.A.clone(t,i),I(this,b))}},outlineColor:{get:function(){return this._outlineColor},set:function(t){if(!(0,h.A)(t))throw new c.A("value is required.");const i=this._outlineColor;a.A.equals(i,t)||(a.A.clone(t,i),I(this,v))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){if(!(0,h.A)(t))throw new c.A("value is required.");this._outlineWidth!==t&&(this._outlineWidth=t,I(this,C))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){if((0,h.A)(t)&&t.far<=t.near)throw new c.A("far must be greater than near");d.A.equals(this._distanceDisplayCondition,t)||(this._distanceDisplayCondition=d.A.clone(t,this._distanceDisplayCondition),I(this,x))}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(t){if(this._disableDepthTestDistance!==t){if(!(0,h.A)(t)||t<0)throw new c.A("disableDepthTestDistance must be greater than or equal to 0.0.");this._disableDepthTestDistance=t,I(this,w)}}},id:{get:function(){return this._id},set:function(t){this._id=t,(0,h.A)(this._pickId)&&(this._pickId.object.id=t)}},pickId:{get:function(){return this._pickId}},clusterShow:{get:function(){return this._clusterShow},set:function(t){this._clusterShow!==t&&(this._clusterShow=t,I(this,m))}},splitDirection:{get:function(){return this._splitDirection},set:function(t){this._splitDirection!==t&&(this._splitDirection=t,I(this,E))}}}),g.prototype.getPickId=function(t){return(0,h.A)(this._pickId)||(this._pickId=t.createPickId({primitive:this,collection:this._collection,id:this._id})),this._pickId},g.prototype._getActualPosition=function(){return this._actualPosition},g.prototype._setActualPosition=function(t){s.A.clone(t,this._actualPosition),I(this,y)};const O=new r.A;g._computeActualPosition=function(t,i,e){return i.mode===_.A.SCENE3D?t:(u.A.multiplyByPoint(e,t,O),f.A.computeActualEllipsoidPosition(i,O))};const B=new r.A;g._computeScreenSpacePosition=function(t,i,e,n){const o=u.A.multiplyByVector(t,r.A.fromElements(i.x,i.y,i.z,1,B),B);return f.A.worldToWindowCoordinates(e,o,n)},g.prototype.computeScreenSpacePosition=function(t,i){const e=this._pointPrimitiveCollection;if((0,h.A)(i)||(i=new o.A),!(0,h.A)(e))throw new c.A("PointPrimitive must be in a collection.");if(!(0,h.A)(t))throw new c.A("scene is required.");const n=e.modelMatrix,s=g._computeScreenSpacePosition(n,this._actualPosition,t,i);if((0,h.A)(s))return s.y=t.canvas.clientHeight-s.y,s},g.getScreenSpaceBoundingBox=function(t,i,e){const o=t.pixelSize,s=.5*o,r=i.x-s,a=i.y-s,l=o,c=o;return(0,h.A)(e)||(e=new n.A),e.x=r,e.y=a,e.width=l,e.height=c,e},g.prototype.equals=function(t){return this===t||(0,h.A)(t)&&this._id===t._id&&s.A.equals(this._position,t._position)&&a.A.equals(this._color,t._color)&&this._pixelSize===t._pixelSize&&this._outlineWidth===t._outlineWidth&&this._show===t._show&&a.A.equals(this._outlineColor,t._outlineColor)&&p.A.equals(this._scaleByDistance,t._scaleByDistance)&&p.A.equals(this._translucencyByDistance,t._translucencyByDistance)&&d.A.equals(this._distanceDisplayCondition,t._distanceDisplayCondition)&&this._disableDepthTestDistance===t._disableDepthTestDistance&&this._splitDirection===t._splitDirection},g.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._pointPrimitiveCollection=void 0};const R=g},24013:(t,i,e)=>{e.d(i,{A:()=>et});var n=e(660662),o=e(41476),s=e(571804),r=e(915325),a=e(491446),l=e(677354),h=e(605971),c=e(816422),d=e(367817),u=e(584164),p=e(402330),_=e(352581),f=e(442790),A=e(430332),g=e(377496),m=e(760866),y=e(40118),b=e(302836),v=e(342875),C=e(193470),D=e(208276),T=e(510148),S=e(200646),x=e(416882),w=e(520853),E=e(62467);const I=w.A.SHOW_INDEX,O=w.A.POSITION_INDEX,B=w.A.COLOR_INDEX,R=w.A.OUTLINE_COLOR_INDEX,P=w.A.OUTLINE_WIDTH_INDEX,N=w.A.PIXEL_SIZE_INDEX,z=w.A.SCALE_BY_DISTANCE_INDEX,L=w.A.TRANSLUCENCY_BY_DISTANCE_INDEX,F=w.A.DISTANCE_DISPLAY_CONDITION_INDEX,H=w.A.DISABLE_DEPTH_DISTANCE_INDEX,M=w.A.SPLIT_DIRECTION_INDEX,W=w.A.NUMBER_OF_PROPERTIES,k={positionHighAndSize:0,positionLowAndOutline:1,compressedAttribute0:2,compressedAttribute1:3,scaleByDistance:4,distanceDisplayConditionAndDisableDepthAndSplitDirection:5};function V(t){t=t??r.A.EMPTY_OBJECT,this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._propertiesChanged=new Uint32Array(W),this._maxPixelSize=1,this._baseVolume=new n.A,this._baseVolumeWC=new n.A,this._baseVolume2D=new n.A,this._boundingVolume=new n.A,this._boundingVolumeDirty=!1,this._colorCommands=[],this.show=t.show??!0,this.modelMatrix=u.A.clone(t.modelMatrix??u.A.IDENTITY),this._modelMatrix=u.A.clone(u.A.IDENTITY),this.debugShowBoundingVolume=t.debugShowBoundingVolume??!1,this.blendOption=t.blendOption??x.A.OPAQUE_AND_TRANSLUCENT,this._blendOption=void 0,this._mode=E.A.SCENE3D,this._maxTotalPointSize=1,this._buffersUsage=[f.A.STATIC_DRAW,f.A.STATIC_DRAW,f.A.STATIC_DRAW,f.A.STATIC_DRAW,f.A.STATIC_DRAW,f.A.STATIC_DRAW,f.A.STATIC_DRAW,f.A.STATIC_DRAW,f.A.STATIC_DRAW];const i=this;this._uniforms={u_maxTotalPointSize:function(){return i._maxTotalPointSize}}}function q(t){const i=t.length;for(let e=0;e<i;++e)t[e]&&t[e]._destroy()}function U(t){if(t._pointPrimitivesRemoved){t._pointPrimitivesRemoved=!1;const i=[],e=t._pointPrimitives,n=e.length;for(let t=0,o=0;t<n;++t){const n=e[t];n&&(n._index=o++,i.push(n))}t._pointPrimitives=i}}Object.defineProperties(V.prototype,{length:{get:function(){return U(this),this._pointPrimitives.length}}}),V.prototype.add=function(t){const i=new w.A(t,this);return i._index=this._pointPrimitives.length,this._pointPrimitives.push(i),this._createVertexArray=!0,i},V.prototype.remove=function(t){return!!this.contains(t)&&(this._pointPrimitives[t._index]=null,this._pointPrimitivesRemoved=!0,this._createVertexArray=!0,t._destroy(),!0)},V.prototype.removeAll=function(){q(this._pointPrimitives),this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!0},V.prototype._updatePointPrimitive=function(t,i){t._dirty||(this._pointPrimitivesToUpdate[this._pointPrimitivesToUpdateIndex++]=t),++this._propertiesChanged[i]},V.prototype.contains=function(t){return(0,a.A)(t)&&t._pointPrimitiveCollection===this},V.prototype.get=function(t){if(!(0,a.A)(t))throw new h.A("index is required.");return U(this),this._pointPrimitives[t]},V.prototype.computeNewBuffersUsage=function(){const t=this._buffersUsage;let i=!1;const e=this._propertiesChanged;for(let n=0;n<W;++n){const o=0===e[n]?f.A.STATIC_DRAW:f.A.STREAM_DRAW;i=i||t[n]!==o,t[n]=o}return i};const G=new c.A;function j(t,i,e,o){const s=o._index,r=o._getActualPosition();t._mode===E.A.SCENE3D&&(n.A.expand(t._baseVolume,r,t._baseVolume),t._boundingVolumeDirty=!0),c.A.fromCartesian(r,G);const a=o.pixelSize,l=o.outlineWidth;t._maxPixelSize=Math.max(t._maxPixelSize,a+l);const h=e[k.positionHighAndSize],d=G.high;h(s,d.x,d.y,d.z,a);const u=e[k.positionLowAndOutline],p=G.low;u(s,p.x,p.y,p.z,l)}const Y=65536,X=256;function K(t,i,e,n){const s=n._index,r=n.color,a=n.getPickId(i).color,l=n.outlineColor;let h=o.A.floatToByte(r.red),c=o.A.floatToByte(r.green),d=o.A.floatToByte(r.blue);const u=h*Y+c*X+d;h=o.A.floatToByte(l.red),c=o.A.floatToByte(l.green),d=o.A.floatToByte(l.blue);const p=h*Y+c*X+d;h=o.A.floatToByte(a.red),c=o.A.floatToByte(a.green),d=o.A.floatToByte(a.blue);const _=h*Y+c*X+d,f=o.A.floatToByte(r.alpha)*Y+o.A.floatToByte(l.alpha)*X+o.A.floatToByte(a.alpha);(0,e[k.compressedAttribute0])(s,u,p,_,f)}function Q(t,i,e,n){const o=n._index;let s=0,r=1,l=1,h=1;const c=n.translucencyByDistance;(0,a.A)(c)&&(s=c.near,r=c.nearValue,l=c.far,h=c.farValue,1===r&&1===h||(t._shaderTranslucencyByDistance=!0));let u=n.show&&n.clusterShow;0===n.color.alpha&&0===n.outlineColor.alpha&&(u=!1),r=d.A.clamp(r,0,1),r=1===r?255:255*r|0;const p=(u?1:0)*X+r;h=d.A.clamp(h,0,1),h=1===h?255:255*h|0;const _=h;(0,e[k.compressedAttribute1])(o,p,_,s,l)}function J(t,i,e,n){const o=n._index,s=e[k.scaleByDistance];let r=0,l=1,h=1,c=1;const d=n.scaleByDistance;(0,a.A)(d)&&(r=d.near,l=d.nearValue,h=d.far,c=d.farValue,1===l&&1===c||(t._shaderScaleByDistance=!0)),s(o,r,l,h,c)}function Z(t,i,e,n){const o=n._index,s=e[k.distanceDisplayConditionAndDisableDepthAndSplitDirection];let r=0,l=Number.MAX_VALUE;const h=n.distanceDisplayCondition;(0,a.A)(h)&&(r=h.near,l=h.far,r*=r,l*=l,t._shaderDistanceDisplayCondition=!0);let c=n.disableDepthTestDistance;c*=c,c>0&&(t._shaderDisableDepthDistance=!0,c===Number.POSITIVE_INFINITY&&(c=-1));let d=0;const u=n.splitDirection;(0,a.A)(u)&&(d=u),s(o,r,l,c,d)}function $(t,i,e,n){j(t,0,e,n),K(0,i,e,n),Q(t,0,e,n),J(t,0,e,n),Z(t,0,e,n)}function tt(t,i,e,o,s,r){let l;o.mode===E.A.SCENE3D?(l=t._baseVolume,t._boundingVolumeDirty=!0):l=t._baseVolume2D;const h=[];for(let t=0;t<e;++t){const e=i[t],c=e.position,d=w.A._computeActualPosition(c,o,s);(0,a.A)(d)&&(e._setActualPosition(d),r?h.push(d):n.A.expand(l,d,l))}r&&n.A.fromPoints(h,l)}const it=[];V.prototype.update=function(t){if(U(this),!this.show)return;this._maxTotalPointSize=A.A.maximumAliasedPointSize,function(t,i){const e=i.mode,n=t._pointPrimitives,o=t._pointPrimitivesToUpdate,s=t._modelMatrix;t._createVertexArray||t._mode!==e||e!==E.A.SCENE3D&&!u.A.equals(s,t.modelMatrix)?(t._mode=e,u.A.clone(t.modelMatrix,s),t._createVertexArray=!0,e!==E.A.SCENE3D&&e!==E.A.SCENE2D&&e!==E.A.COLUMBUS_VIEW||tt(t,n,n.length,i,s,!0)):e===E.A.MORPHING?tt(t,n,n.length,i,s,!0):e!==E.A.SCENE2D&&e!==E.A.COLUMBUS_VIEW||tt(t,o,t._pointPrimitivesToUpdateIndex,i,s,!1)}(this,t);const i=this._pointPrimitives.length,e=this._pointPrimitivesToUpdate,o=this._pointPrimitivesToUpdateIndex,r=this._propertiesChanged,l=this._createVertexArray;let h;const c=t.context,d=t.passes,f=d.pick;if(l||!f&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let t=0;t<W;++t)r[t]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),i>0){this._vaf=function(t,i,e){return new C.A(t,[{index:k.positionHighAndSize,componentsPerAttribute:4,componentDatatype:s.A.FLOAT,usage:e[O]},{index:k.positionLowAndShow,componentsPerAttribute:4,componentDatatype:s.A.FLOAT,usage:e[O]},{index:k.compressedAttribute0,componentsPerAttribute:4,componentDatatype:s.A.FLOAT,usage:e[B]},{index:k.compressedAttribute1,componentsPerAttribute:4,componentDatatype:s.A.FLOAT,usage:e[L]},{index:k.scaleByDistance,componentsPerAttribute:4,componentDatatype:s.A.FLOAT,usage:e[z]},{index:k.distanceDisplayConditionAndDisableDepthAndSplitDirection,componentsPerAttribute:4,componentDatatype:s.A.FLOAT,usage:e[F]}],i)}(c,i,this._buffersUsage),h=this._vaf.writers;for(let t=0;t<i;++t){const i=this._pointPrimitives[t];i._dirty=!1,$(this,c,h,i)}this._vaf.commit()}this._pointPrimitivesToUpdateIndex=0}else if(o>0){const t=it;t.length=0,(r[O]||r[P]||r[N])&&t.push(j),(r[B]||r[R])&&t.push(K),(r[I]||r[L])&&t.push(Q),r[z]&&t.push(J),(r[F]||r[H]||r[M])&&t.push(Z);const n=t.length;if(h=this._vaf.writers,o/i>.1){for(let i=0;i<o;++i){const o=e[i];o._dirty=!1;for(let i=0;i<n;++i)t[i](this,c,h,o)}this._vaf.commit()}else{for(let i=0;i<o;++i){const o=e[i];o._dirty=!1;for(let i=0;i<n;++i)t[i](this,c,h,o);this._vaf.subCommit(o._index,1)}this._vaf.endSubCommits()}this._pointPrimitivesToUpdateIndex=0}if(o>1.5*i&&(e.length=i),!(0,a.A)(this._vaf)||!(0,a.A)(this._vaf.va))return;let w;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,n.A.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let V=u.A.IDENTITY;t.mode===E.A.SCENE3D?(V=this.modelMatrix,w=n.A.clone(this._baseVolumeWC,this._boundingVolume)):w=n.A.clone(this._baseVolume2D,this._boundingVolume),function(t,i,e){const n=i.camera.getPixelSize(e,i.context.drawingBufferWidth,i.context.drawingBufferHeight)*t._maxPixelSize;e.radius+=n}(this,t,w);const q=this._blendOption!==this.blendOption;let G,Y,X,et,nt,ot;this._blendOption=this.blendOption,q&&(this._blendOption===x.A.OPAQUE||this._blendOption===x.A.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=y.A.fromCache({depthTest:{enabled:!0,func:_.A.LEQUAL},depthMask:!0}):this._rsOpaque=void 0,this._blendOption===x.A.TRANSLUCENT||this._blendOption===x.A.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=y.A.fromCache({depthTest:{enabled:!0,func:_.A.LEQUAL},depthMask:!1,blending:S.A.ALPHA_BLEND}):this._rsTranslucent=void 0),this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||0!==t.minimumDisableDepthTestDistance,(q||this._shaderScaleByDistance&&!this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance&&!this._compiledShaderTranslucencyByDistance||this._shaderDistanceDisplayCondition&&!this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance)&&(G=new v.A({sources:[T.A]}),this._shaderScaleByDistance&&G.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&G.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderDistanceDisplayCondition&&G.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&G.defines.push("DISABLE_DEPTH_DISTANCE"),this._blendOption===x.A.OPAQUE_AND_TRANSLUCENT&&(Y=new v.A({defines:["OPAQUE"],sources:[D.A]}),this._sp=b.A.replaceCache({context:c,shaderProgram:this._sp,vertexShaderSource:G,fragmentShaderSource:Y,attributeLocations:k}),Y=new v.A({defines:["TRANSLUCENT"],sources:[D.A]}),this._spTranslucent=b.A.replaceCache({context:c,shaderProgram:this._spTranslucent,vertexShaderSource:G,fragmentShaderSource:Y,attributeLocations:k})),this._blendOption===x.A.OPAQUE&&(Y=new v.A({sources:[D.A]}),this._sp=b.A.replaceCache({context:c,shaderProgram:this._sp,vertexShaderSource:G,fragmentShaderSource:Y,attributeLocations:k})),this._blendOption===x.A.TRANSLUCENT&&(Y=new v.A({sources:[D.A]}),this._spTranslucent=b.A.replaceCache({context:c,shaderProgram:this._spTranslucent,vertexShaderSource:G,fragmentShaderSource:Y,attributeLocations:k})),this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance);const st=t.commandList;if(d.render||f){const t=this._colorCommands,i=this._blendOption===x.A.OPAQUE,e=this._blendOption===x.A.OPAQUE_AND_TRANSLUCENT;X=this._vaf.va,et=X.length,t.length=et;const n=e?2*et:et;for(ot=0;ot<n;++ot){const n=i||e&&ot%2==0;nt=t[ot],(0,a.A)(nt)||(nt=t[ot]=new g.A),nt.primitiveType=p.A.POINTS,nt.pass=n||!e?m.A.OPAQUE:m.A.TRANSLUCENT,nt.owner=this;const o=e?Math.floor(ot/2):ot;nt.boundingVolume=w,nt.modelMatrix=V,nt.shaderProgram=n?this._sp:this._spTranslucent,nt.uniformMap=this._uniforms,nt.vertexArray=X[o].va,nt.renderState=n?this._rsOpaque:this._rsTranslucent,nt.debugShowBoundingVolume=this.debugShowBoundingVolume,nt.pickId="v_pickColor",st.push(nt)}}},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),q(this._pointPrimitives),(0,l.A)(this)};const et=V},589834:(t,i,e)=>{e.d(i,{A:()=>n});const n=Object.freeze({FONT_SIZE:48,PADDING:10,RADIUS:8,CUTOFF:.25})},78173:(t,i,e)=>{e.d(i,{A:()=>z});var n=e(647934),o=e(434067),s=e(267980),r=e(626809),a=e(336946),l=e(491446),h=e(605971),c=e(367817),d=e(584164),u=e(811203),p=e(65891),_=e(543622),f=e(62467);const A={},g=new r.A(0,0,0,1);let m=new r.A;const y=new n.A,b=new o.A,v=new o.A;A.worldToWindowCoordinates=function(t,i,e){return A.worldWithEyeOffsetToWindowCoordinates(t,i,s.A.ZERO,e)};const C=new r.A,D=new s.A;function T(t,i,e,n){const o=e.viewMatrix,a=d.A.multiplyByVector(o,r.A.fromElements(t.x,t.y,t.z,1,C),C),l=s.A.multiplyComponents(i,s.A.normalize(a,D),D);return a.x+=i.x+l.x,a.y+=i.y+l.y,a.z+=l.z,d.A.multiplyByVector(e.frustum.projectionMatrix,a,n)}const S=new a.A(Math.PI,c.A.PI_OVER_TWO),x=new s.A,w=new s.A;A.worldWithEyeOffsetToWindowCoordinates=function(t,i,e,n){if(!(0,l.A)(t))throw new h.A("scene is required.");if(!(0,l.A)(i))throw new h.A("position is required.");const r=t.frameState,a=A.computeActualEllipsoidPosition(r,i,g);if(!(0,l.A)(a))return;const C=t.canvas,D=y;D.x=0,D.y=0,D.width=C.clientWidth,D.height=C.clientHeight;const E=t.camera;let I=!1;if(r.mode===f.A.SCENE2D){const i=t.mapProjection,r=S,l=i.project(r,x),h=s.A.clone(E.position,w),u=E.frustum.clone(),p=d.A.computeViewportTransformation(D,0,1,new d.A),f=E.frustum.projectionMatrix,g=E.positionWC.y,y=s.A.fromElements(c.A.sign(g)*l.x-g,0,-E.positionWC.x),O=_.A.pointToGLWindowCoordinates(f,p,y);if(0===g||O.x<=0||O.x>=C.clientWidth)I=!0;else{if(O.x>.5*C.clientWidth){D.width=O.x,E.frustum.right=l.x-g,m=T(a,e,E,m),A.clipToGLWindowCoordinates(D,m,b),D.x+=O.x,E.position.x=-E.position.x;const t=E.frustum.right;E.frustum.right=-E.frustum.left,E.frustum.left=-t,m=T(a,e,E,m),A.clipToGLWindowCoordinates(D,m,v)}else{D.x+=O.x,D.width-=O.x,E.frustum.left=-l.x-g,m=T(a,e,E,m),A.clipToGLWindowCoordinates(D,m,b),D.x=D.x-D.width,E.position.x=-E.position.x;const t=E.frustum.left;E.frustum.left=-E.frustum.right,E.frustum.right=-t,m=T(a,e,E,m),A.clipToGLWindowCoordinates(D,m,v)}s.A.clone(h,E.position),E.frustum=u.clone(),((n=o.A.clone(b,n)).x<0||n.x>C.clientWidth)&&(n.x=v.x)}}if(r.mode!==f.A.SCENE2D||I){if(m=T(a,e,E,m),m.z<0&&!(E.frustum instanceof u.A)&&!(E.frustum instanceof p.A))return;n=A.clipToGLWindowCoordinates(D,m,n)}return n.y=C.clientHeight-n.y,n},A.worldToDrawingBufferCoordinates=function(t,i,e){if(e=A.worldToWindowCoordinates(t,i,e),(0,l.A)(e))return A.transformWindowToDrawingBuffer(t,e,e)};const E=new s.A,I=new a.A;A.computeActualEllipsoidPosition=function(t,i,e){const n=t.mode;if(n===f.A.SCENE3D)return s.A.clone(i,e);const o=t.mapProjection,r=o.ellipsoid.cartesianToCartographic(i,I);if(!(0,l.A)(r))return;if(o.project(r,E),n===f.A.COLUMBUS_VIEW)return s.A.fromElements(E.z,E.x,E.y,e);if(n===f.A.SCENE2D)return s.A.fromElements(0,E.x,E.y,e);const a=t.morphTime;return s.A.fromElements(c.A.lerp(E.z,i.x,a),c.A.lerp(E.x,i.y,a),c.A.lerp(E.y,i.z,a),e)};const O=new s.A,B=new s.A,R=new d.A;A.clipToGLWindowCoordinates=function(t,i,e){return s.A.divideByScalar(i,i.w,O),d.A.computeViewportTransformation(t,0,1,R),d.A.multiplyByPoint(R,O,B),o.A.fromCartesian3(B,e)},A.transformWindowToDrawingBuffer=function(t,i,e){const n=t.canvas,s=t.drawingBufferWidth/n.clientWidth,r=t.drawingBufferHeight/n.clientHeight;return o.A.fromElements(i.x*s,i.y*r,e)};const P=new r.A,N=new r.A;A.drawingBufferToWorldCoordinates=function(t,i,e,n){const o=t.context.uniformState,a=o.currentFrustum,h=a.x,c=a.y;if(t.frameState.useLogDepth){const t=e*o.log2FarDepthFromNearPlusOne;e=c*(1-h/(Math.pow(2,t)-1+h))/(c-h)}const u=t.view.passState.viewport,p=r.A.clone(r.A.UNIT_W,P);let _;p.x=(i.x-u.x)/u.width*2-1,p.y=(i.y-u.y)/u.height*2-1,p.z=2*e-1,p.w=1;let f=t.camera.frustum;if((0,l.A)(f.fovy)){_=d.A.multiplyByVector(o.inverseViewProjection,p,N);const t=1/_.w;s.A.multiplyByScalar(_,t,_)}else{const t=f.offCenterFrustum;(0,l.A)(t)&&(f=t),_=N,_.x=.5*(p.x*(f.right-f.left)+f.left+f.right),_.y=.5*(p.y*(f.top-f.bottom)+f.bottom+f.top),_.z=.5*(p.z*(h-c)-h-c),_.w=1,_=d.A.multiplyByVector(o.inverseView,_,_)}return s.A.fromCartesian4(_,n)};const z=A},913419:(t,i,e)=>{e.d(i,{A:()=>n});const n=Object.freeze({LEFT:-1,NONE:0,RIGHT:1})},742558:(t,i,e)=>{e.d(i,{A:()=>n});const n=Object.freeze({CENTER:0,BOTTOM:1,BASELINE:2,TOP:-1})},952738:(t,i,e)=>{e.d(i,{A:()=>n});const n='uniform sampler2D u_atlas;\n\n#ifdef VECTOR_TILE\nuniform vec4 u_highlightColor;\n#endif\n\nin vec2 v_textureCoordinates;\nin vec4 v_pickColor;\nin vec4 v_color;\nin float v_splitDirection;\n\n#ifdef SDF\nin vec4 v_outlineColor;\nin float v_outlineWidth;\n#endif\n\n#ifdef FRAGMENT_DEPTH_CHECK\nin vec4 v_textureCoordinateBounds;                  // the min and max x and y values for the texture coordinates\nin vec4 v_originTextureCoordinateAndTranslate;      // texture coordinate at the origin, billboard translate (used for label glyphs)\nin vec4 v_compressed;                               // x: eyeDepth, y: applyTranslate & enableDepthCheck, z: dimensions, w: imageSize\nin mat2 v_rotationMatrix;\n\nconst float SHIFT_LEFT12 = 4096.0;\nconst float SHIFT_LEFT1 = 2.0;\n\nconst float SHIFT_RIGHT12 = 1.0 / 4096.0;\nconst float SHIFT_RIGHT1 = 1.0 / 2.0;\n\nfloat getGlobeDepth(vec2 adjustedST, vec2 depthLookupST, bool applyTranslate, vec2 dimensions, vec2 imageSize)\n{\n    vec2 lookupVector = imageSize * (depthLookupST - adjustedST);\n    lookupVector = v_rotationMatrix * lookupVector;\n    vec2 labelOffset = (dimensions - imageSize) * (depthLookupST - vec2(0.0, v_originTextureCoordinateAndTranslate.y)); // aligns label glyph with bounding rectangle.  Will be zero for billboards because dimensions and imageSize will be equal\n\n    vec2 translation = v_originTextureCoordinateAndTranslate.zw;\n\n    if (applyTranslate)\n    {\n        // this is only needed for labels where the horizontal origin is not LEFT\n        // it moves the label back to where the "origin" should be since all label glyphs are set to HorizontalOrigin.LEFT\n        translation += (dimensions * v_originTextureCoordinateAndTranslate.xy * vec2(1.0, 0.0));\n    }\n\n    vec2 st = ((lookupVector - translation + labelOffset) + gl_FragCoord.xy) / czm_viewport.zw;\n    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, st));\n\n    if (logDepthOrDepth == 0.0)\n    {\n        return 0.0; // not on the globe\n    }\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);\n    return eyeCoordinate.z / eyeCoordinate.w;\n}\n#endif\n\n\n#ifdef SDF\n\n// Get the distance from the edge of a glyph at a given position sampling an SDF texture.\nfloat getDistance(vec2 position)\n{\n    return texture(u_atlas, position).r;\n}\n\n// Samples the sdf texture at the given position and produces a color based on the fill color and the outline.\nvec4 getSDFColor(vec2 position, float outlineWidth, vec4 outlineColor, float smoothing)\n{\n    float distance = getDistance(position);\n\n    if (outlineWidth > 0.0)\n    {\n        // Don\'t get the outline edge exceed the SDF_EDGE\n        float outlineEdge = clamp(SDF_EDGE - outlineWidth, 0.0, SDF_EDGE);\n        float outlineFactor = smoothstep(SDF_EDGE - smoothing, SDF_EDGE + smoothing, distance);\n        vec4 sdfColor = mix(outlineColor, v_color, outlineFactor);\n        float alpha = smoothstep(outlineEdge - smoothing, outlineEdge + smoothing, distance);\n        return vec4(sdfColor.rgb, sdfColor.a * alpha);\n    }\n    else\n    {\n        float alpha = smoothstep(SDF_EDGE - smoothing, SDF_EDGE + smoothing, distance);\n        return vec4(v_color.rgb, v_color.a * alpha);\n    }\n}\n#endif\n\nvoid main()\n{\n    if (v_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;\n    if (v_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;\n    \n    vec4 color = texture(u_atlas, v_textureCoordinates);\n\n#ifdef SDF\n    float outlineWidth = v_outlineWidth;\n    vec4 outlineColor = v_outlineColor;\n\n    // Get the current distance\n    float distance = getDistance(v_textureCoordinates);\n\n#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))\n    float smoothing = fwidth(distance);\n    // Get an offset that is approximately half the distance to the neighbor pixels\n    // 0.354 is approximately half of 1/sqrt(2)\n    vec2 sampleOffset = 0.354 * vec2(dFdx(v_textureCoordinates) + dFdy(v_textureCoordinates));\n\n    // Sample the center point\n    vec4 center = getSDFColor(v_textureCoordinates, outlineWidth, outlineColor, smoothing);\n\n    // Sample the 4 neighbors\n    vec4 color1 = getSDFColor(v_textureCoordinates + vec2(sampleOffset.x, sampleOffset.y), outlineWidth, outlineColor, smoothing);\n    vec4 color2 = getSDFColor(v_textureCoordinates + vec2(-sampleOffset.x, sampleOffset.y), outlineWidth, outlineColor, smoothing);\n    vec4 color3 = getSDFColor(v_textureCoordinates + vec2(-sampleOffset.x, -sampleOffset.y), outlineWidth, outlineColor, smoothing);\n    vec4 color4 = getSDFColor(v_textureCoordinates + vec2(sampleOffset.x, -sampleOffset.y), outlineWidth, outlineColor, smoothing);\n\n    // Equally weight the center sample and the 4 neighboring samples\n    color = (center + color1 + color2 + color3 + color4)/5.0;\n#else\n    // If no derivatives available (IE 10?), just do a single sample\n    float smoothing = 1.0/32.0;\n    color = getSDFColor(v_textureCoordinates, outlineWidth, outlineColor, smoothing);\n#endif\n\n    color = czm_gammaCorrect(color);\n#else\n    color = czm_gammaCorrect(color);\n    color *= czm_gammaCorrect(v_color);\n#endif\n\n// Fully transparent parts of the billboard are not pickable.\n#if !defined(OPAQUE) && !defined(TRANSLUCENT)\n    if (color.a < 0.005)   // matches 0/255 and 1/255\n    {\n        discard;\n    }\n#else\n// The billboard is rendered twice. The opaque pass discards translucent fragments\n// and the translucent pass discards opaque fragments.\n#ifdef OPAQUE\n    if (color.a < 0.995)   // matches < 254/255\n    {\n        discard;\n    }\n#else\n    if (color.a >= 0.995)  // matches 254/255 and 255/255\n    {\n        discard;\n    }\n#endif\n#endif\n\n#ifdef VECTOR_TILE\n    color *= u_highlightColor;\n#endif\n    out_FragColor = color;\n\n#ifdef LOG_DEPTH\n    czm_writeLogDepth();\n#endif\n\n#ifdef FRAGMENT_DEPTH_CHECK\n    float temp = v_compressed.y;\n\n    temp = temp * SHIFT_RIGHT1;\n\n    float temp2 = (temp - floor(temp)) * SHIFT_LEFT1;\n    bool enableDepthTest = temp2 != 0.0;\n    bool applyTranslate = floor(temp) != 0.0;\n\n    if (enableDepthTest) {\n        temp = v_compressed.z;\n        temp = temp * SHIFT_RIGHT12;\n\n        vec2 dimensions;\n        dimensions.y = (temp - floor(temp)) * SHIFT_LEFT12;\n        dimensions.x = floor(temp);\n\n        temp = v_compressed.w;\n        temp = temp * SHIFT_RIGHT12;\n\n        vec2 imageSize;\n        imageSize.y = (temp - floor(temp)) * SHIFT_LEFT12;\n        imageSize.x = floor(temp);\n\n        vec2 adjustedST = v_textureCoordinates - v_textureCoordinateBounds.xy;\n        adjustedST = adjustedST / vec2(v_textureCoordinateBounds.z - v_textureCoordinateBounds.x, v_textureCoordinateBounds.w - v_textureCoordinateBounds.y);\n\n        float epsilonEyeDepth = v_compressed.x + czm_epsilon1;\n        float globeDepth1 = getGlobeDepth(adjustedST, v_originTextureCoordinateAndTranslate.xy, applyTranslate, dimensions, imageSize);\n\n        // negative values go into the screen\n        if (globeDepth1 != 0.0 && globeDepth1 > epsilonEyeDepth)\n        {\n            float globeDepth2 = getGlobeDepth(adjustedST, vec2(0.0, 1.0), applyTranslate, dimensions, imageSize); // top left corner\n            if (globeDepth2 != 0.0 && globeDepth2 > epsilonEyeDepth)\n            {\n                float globeDepth3 = getGlobeDepth(adjustedST, vec2(1.0, 1.0), applyTranslate, dimensions, imageSize); // top right corner\n                if (globeDepth3 != 0.0 && globeDepth3 > epsilonEyeDepth)\n                {\n                    discard;\n                }\n            }\n        }\n    }\n#endif\n\n}\n'},412562:(t,i,e)=>{e.d(i,{A:()=>n});const n="#ifdef INSTANCED\nin vec2 direction;\n#endif\nin vec4 positionHighAndScale;\nin vec4 positionLowAndRotation;\nin vec4 compressedAttribute0;                       // pixel offset, translate, horizontal origin, vertical origin, show, direction, texture coordinates (texture offset)\nin vec4 compressedAttribute1;                       // aligned axis, translucency by distance, image width\nin vec4 compressedAttribute2;                       // label horizontal origin, image height, color, pick color, size in meters, valid aligned axis, 13 bits free\nin vec4 eyeOffset;                                  // eye offset in meters, 4 bytes free (texture range)\nin vec4 scaleByDistance;                            // near, nearScale, far, farScale\nin vec4 pixelOffsetScaleByDistance;                 // near, nearScale, far, farScale\nin vec4 compressedAttribute3;                       // distance display condition near, far, disableDepthTestDistance, dimensions\nin vec2 sdf;                                        // sdf outline color (rgb) and width (w)\nin float splitDirection;                            // splitDirection\n#if defined(VERTEX_DEPTH_CHECK) || defined(FRAGMENT_DEPTH_CHECK)\nin vec4 textureCoordinateBoundsOrLabelTranslate;    // the min and max x and y values for the texture coordinates\n#endif\n#ifdef VECTOR_TILE\nin float a_batchId;\n#endif\n\nout vec2 v_textureCoordinates;\n#ifdef FRAGMENT_DEPTH_CHECK\nout vec4 v_textureCoordinateBounds;\nout vec4 v_originTextureCoordinateAndTranslate;\nout vec4 v_compressed;                                 // x: eyeDepth, y: applyTranslate & enableDepthCheck, z: dimensions, w: imageSize\nout mat2 v_rotationMatrix;\n#endif\n\nout vec4 v_pickColor;\nout vec4 v_color;\nout float v_splitDirection;\n#ifdef SDF\nout vec4 v_outlineColor;\nout float v_outlineWidth;\n#endif\n\nconst float UPPER_BOUND = 32768.0;\n\nconst float SHIFT_LEFT16 = 65536.0;\nconst float SHIFT_LEFT12 = 4096.0;\nconst float SHIFT_LEFT8 = 256.0;\nconst float SHIFT_LEFT7 = 128.0;\nconst float SHIFT_LEFT5 = 32.0;\nconst float SHIFT_LEFT3 = 8.0;\nconst float SHIFT_LEFT2 = 4.0;\nconst float SHIFT_LEFT1 = 2.0;\n\nconst float SHIFT_RIGHT12 = 1.0 / 4096.0;\nconst float SHIFT_RIGHT8 = 1.0 / 256.0;\nconst float SHIFT_RIGHT7 = 1.0 / 128.0;\nconst float SHIFT_RIGHT5 = 1.0 / 32.0;\nconst float SHIFT_RIGHT3 = 1.0 / 8.0;\nconst float SHIFT_RIGHT2 = 1.0 / 4.0;\nconst float SHIFT_RIGHT1 = 1.0 / 2.0;\n\nvec4 addScreenSpaceOffset(vec4 positionEC, vec2 imageSize, float scale, vec2 direction, vec2 origin, vec2 translate, vec2 pixelOffset, vec3 alignedAxis, bool validAlignedAxis, float rotation, bool sizeInMeters, out mat2 rotationMatrix, out float mpp)\n{\n    // Note the halfSize cannot be computed in JavaScript because it is sent via\n    // compressed vertex attributes that coerce it to an integer.\n    vec2 halfSize = imageSize * scale * 0.5;\n    halfSize *= ((direction * 2.0) - 1.0);\n\n    vec2 originTranslate = origin * abs(halfSize);\n\n#if defined(ROTATION) || defined(ALIGNED_AXIS)\n    if (validAlignedAxis || rotation != 0.0)\n    {\n        float angle = rotation;\n        if (validAlignedAxis)\n        {\n            vec4 projectedAlignedAxis = czm_modelView3D * vec4(alignedAxis, 0.0);\n            angle += sign(-projectedAlignedAxis.x) * acos(sign(projectedAlignedAxis.y) * (projectedAlignedAxis.y * projectedAlignedAxis.y) /\n                    (projectedAlignedAxis.x * projectedAlignedAxis.x + projectedAlignedAxis.y * projectedAlignedAxis.y));\n        }\n\n        float cosTheta = cos(angle);\n        float sinTheta = sin(angle);\n        rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);\n        halfSize = rotationMatrix * halfSize;\n    }\n    else\n    {\n        rotationMatrix = mat2(1.0, 0.0, 0.0, 1.0);\n    }\n#endif\n\n    mpp = czm_metersPerPixel(positionEC);\n    positionEC.xy += (originTranslate + halfSize) * czm_branchFreeTernary(sizeInMeters, 1.0, mpp);\n    positionEC.xy += (translate + pixelOffset) * mpp;\n\n    return positionEC;\n}\n\n#ifdef VERTEX_DEPTH_CHECK\nfloat getGlobeDepth(vec4 positionEC)\n{\n    vec4 posWC = czm_eyeToWindowCoordinates(positionEC);\n\n    float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, posWC.xy / czm_viewport.zw));\n\n    if (globeDepth == 0.0)\n    {\n        return 0.0; // not on the globe\n    }\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(posWC.xy, globeDepth);\n    return eyeCoordinate.z / eyeCoordinate.w;\n}\n#endif\nvoid main()\n{\n    // Modifying this shader may also require modifications to Billboard._computeScreenSpacePosition\n\n    // unpack attributes\n    vec3 positionHigh = positionHighAndScale.xyz;\n    vec3 positionLow = positionLowAndRotation.xyz;\n    float scale = positionHighAndScale.w;\n\n#if defined(ROTATION) || defined(ALIGNED_AXIS)\n    float rotation = positionLowAndRotation.w;\n#else\n    float rotation = 0.0;\n#endif\n\n    float compressed = compressedAttribute0.x;\n\n    vec2 pixelOffset;\n    pixelOffset.x = floor(compressed * SHIFT_RIGHT7);\n    compressed -= pixelOffset.x * SHIFT_LEFT7;\n    pixelOffset.x -= UPPER_BOUND;\n\n    vec2 origin;\n    origin.x = floor(compressed * SHIFT_RIGHT5);\n    compressed -= origin.x * SHIFT_LEFT5;\n\n    origin.y = floor(compressed * SHIFT_RIGHT3);\n    compressed -= origin.y * SHIFT_LEFT3;\n\n#ifdef FRAGMENT_DEPTH_CHECK\n    vec2 depthOrigin = origin.xy;\n#endif\n    origin -= vec2(1.0);\n\n    float show = floor(compressed * SHIFT_RIGHT2);\n    compressed -= show * SHIFT_LEFT2;\n\n#ifdef INSTANCED\n    vec2 textureCoordinatesBottomLeft = czm_decompressTextureCoordinates(compressedAttribute0.w);\n    vec2 textureCoordinatesRange = czm_decompressTextureCoordinates(eyeOffset.w);\n    vec2 textureCoordinates = textureCoordinatesBottomLeft + direction * textureCoordinatesRange;\n#else\n    vec2 direction;\n    direction.x = floor(compressed * SHIFT_RIGHT1);\n    direction.y = compressed - direction.x * SHIFT_LEFT1;\n\n    vec2 textureCoordinates = czm_decompressTextureCoordinates(compressedAttribute0.w);\n#endif\n\n    float temp = compressedAttribute0.y  * SHIFT_RIGHT8;\n    pixelOffset.y = -(floor(temp) - UPPER_BOUND);\n\n    vec2 translate;\n    translate.y = (temp - floor(temp)) * SHIFT_LEFT16;\n\n    temp = compressedAttribute0.z * SHIFT_RIGHT8;\n    translate.x = floor(temp) - UPPER_BOUND;\n\n    translate.y += (temp - floor(temp)) * SHIFT_LEFT8;\n    translate.y -= UPPER_BOUND;\n\n    temp = compressedAttribute1.x * SHIFT_RIGHT8;\n    float temp2 = floor(compressedAttribute2.w * SHIFT_RIGHT2);\n\n    vec2 imageSize = vec2(floor(temp), temp2);\n\n#ifdef FRAGMENT_DEPTH_CHECK\n    float labelHorizontalOrigin = floor(compressedAttribute2.w - (temp2 * SHIFT_LEFT2));\n    float applyTranslate = 0.0;\n    if (labelHorizontalOrigin != 0.0) // is a billboard, so set apply translate to false\n    {\n        applyTranslate = 1.0;\n        labelHorizontalOrigin -= 2.0;\n        depthOrigin.x = labelHorizontalOrigin + 1.0;\n    }\n\n    depthOrigin = vec2(1.0) - (depthOrigin * 0.5);\n#endif\n\n#ifdef EYE_DISTANCE_TRANSLUCENCY\n    vec4 translucencyByDistance;\n    translucencyByDistance.x = compressedAttribute1.z;\n    translucencyByDistance.z = compressedAttribute1.w;\n\n    translucencyByDistance.y = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\n\n    temp = compressedAttribute1.y * SHIFT_RIGHT8;\n    translucencyByDistance.w = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\n#endif\n\n#if defined(VERTEX_DEPTH_CHECK) || defined(FRAGMENT_DEPTH_CHECK)\n    temp = compressedAttribute3.w;\n    temp = temp * SHIFT_RIGHT12;\n\n    vec2 dimensions;\n    dimensions.y = (temp - floor(temp)) * SHIFT_LEFT12;\n    dimensions.x = floor(temp);\n#endif\n\n#ifdef ALIGNED_AXIS\n    vec3 alignedAxis = czm_octDecode(floor(compressedAttribute1.y * SHIFT_RIGHT8));\n    temp = compressedAttribute2.z * SHIFT_RIGHT5;\n    bool validAlignedAxis = (temp - floor(temp)) * SHIFT_LEFT1 > 0.0;\n#else\n    vec3 alignedAxis = vec3(0.0);\n    bool validAlignedAxis = false;\n#endif\n\n    vec4 pickColor;\n    vec4 color;\n\n    temp = compressedAttribute2.y;\n    temp = temp * SHIFT_RIGHT8;\n    pickColor.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    pickColor.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    pickColor.r = floor(temp);\n\n    temp = compressedAttribute2.x;\n    temp = temp * SHIFT_RIGHT8;\n    color.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    color.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    color.r = floor(temp);\n\n    temp = compressedAttribute2.z * SHIFT_RIGHT8;\n    bool sizeInMeters = floor((temp - floor(temp)) * SHIFT_LEFT7) > 0.0;\n    temp = floor(temp) * SHIFT_RIGHT8;\n\n    pickColor.a = (temp - floor(temp)) * SHIFT_LEFT8;\n    pickColor /= 255.0;\n\n    color.a = floor(temp);\n    color /= 255.0;\n\n    ///////////////////////////////////////////////////////////////////////////\n\n    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);\n    vec4 positionEC = czm_modelViewRelativeToEye * p;\n\n#if defined(FRAGMENT_DEPTH_CHECK) || defined(VERTEX_DEPTH_CHECK)\n    float eyeDepth = positionEC.z;\n#endif\n\n    positionEC = czm_eyeOffset(positionEC, eyeOffset.xyz);\n    positionEC.xyz *= show;\n\n    ///////////////////////////////////////////////////////////////////////////\n\n#if defined(EYE_DISTANCE_SCALING) || defined(EYE_DISTANCE_TRANSLUCENCY) || defined(EYE_DISTANCE_PIXEL_OFFSET) || defined(DISTANCE_DISPLAY_CONDITION) || defined(DISABLE_DEPTH_DISTANCE)\n    float lengthSq;\n    if (czm_sceneMode == czm_sceneMode2D)\n    {\n        // 2D camera distance is a special case\n        // treat all billboards as flattened to the z=0.0 plane\n        lengthSq = czm_eyeHeight2D.y;\n    }\n    else\n    {\n        lengthSq = dot(positionEC.xyz, positionEC.xyz);\n    }\n#endif\n\n#ifdef EYE_DISTANCE_SCALING\n    float distanceScale = czm_nearFarScalar(scaleByDistance, lengthSq);\n    scale *= distanceScale;\n    translate *= distanceScale;\n    // push vertex behind near plane for clipping\n    if (scale == 0.0)\n    {\n        positionEC.xyz = vec3(0.0);\n    }\n#endif\n\n    float translucency = 1.0;\n#ifdef EYE_DISTANCE_TRANSLUCENCY\n    translucency = czm_nearFarScalar(translucencyByDistance, lengthSq);\n    // push vertex behind near plane for clipping\n    if (translucency == 0.0)\n    {\n        positionEC.xyz = vec3(0.0);\n    }\n#endif\n\n#ifdef EYE_DISTANCE_PIXEL_OFFSET\n    float pixelOffsetScale = czm_nearFarScalar(pixelOffsetScaleByDistance, lengthSq);\n    pixelOffset *= pixelOffsetScale;\n#endif\n\n#ifdef DISTANCE_DISPLAY_CONDITION\n    float nearSq = compressedAttribute3.x;\n    float farSq = compressedAttribute3.y;\n    if (lengthSq < nearSq || lengthSq > farSq)\n    {\n        positionEC.xyz = vec3(0.0);\n    }\n#endif\n\n    mat2 rotationMatrix;\n    float mpp;\n\n#ifdef DISABLE_DEPTH_DISTANCE\n    float disableDepthTestDistance = compressedAttribute3.z;\n#endif\n\n#ifdef VERTEX_DEPTH_CHECK\nif (lengthSq < disableDepthTestDistance) {\n    float depthsilon = 10.0;\n\n    vec2 labelTranslate = textureCoordinateBoundsOrLabelTranslate.xy;\n    vec4 pEC1 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(0.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);\n    float globeDepth1 = getGlobeDepth(pEC1);\n\n    if (globeDepth1 != 0.0 && pEC1.z + depthsilon < globeDepth1)\n    {\n        vec4 pEC2 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(0.0, 1.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);\n        float globeDepth2 = getGlobeDepth(pEC2);\n\n        if (globeDepth2 != 0.0 && pEC2.z + depthsilon < globeDepth2)\n        {\n            vec4 pEC3 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(1.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);\n            float globeDepth3 = getGlobeDepth(pEC3);\n            if (globeDepth3 != 0.0 && pEC3.z + depthsilon < globeDepth3)\n            {\n                positionEC.xyz = vec3(0.0);\n            }\n        }\n    }\n}\n#endif\n\n    positionEC = addScreenSpaceOffset(positionEC, imageSize, scale, direction, origin, translate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);\n    gl_Position = czm_projection * positionEC;\n    v_textureCoordinates = textureCoordinates;\n\n#ifdef LOG_DEPTH\n    czm_vertexLogDepth();\n#endif\n\n#ifdef DISABLE_DEPTH_DISTANCE\n    if (disableDepthTestDistance == 0.0 && czm_minimumDisableDepthTestDistance != 0.0)\n    {\n        disableDepthTestDistance = czm_minimumDisableDepthTestDistance;\n    }\n\n    if (disableDepthTestDistance != 0.0)\n    {\n        // Don't try to \"multiply both sides\" by w.  Greater/less-than comparisons won't work for negative values of w.\n        float zclip = gl_Position.z / gl_Position.w;\n        bool clipped = (zclip < -1.0 || zclip > 1.0);\n        if (!clipped && (disableDepthTestDistance < 0.0 || (lengthSq > 0.0 && lengthSq < disableDepthTestDistance)))\n        {\n            // Position z on the near plane.\n            gl_Position.z = -gl_Position.w;\n#ifdef LOG_DEPTH\n            v_depthFromNearPlusOne = 1.0;\n#endif\n        }\n    }\n#endif\n\n#ifdef FRAGMENT_DEPTH_CHECK\n    if (sizeInMeters) {\n        translate /= mpp;\n        dimensions /= mpp;\n        imageSize /= mpp;\n    }\n\n#if defined(ROTATION) || defined(ALIGNED_AXIS)\n    v_rotationMatrix = rotationMatrix;\n#else\n    v_rotationMatrix = mat2(1.0, 0.0, 0.0, 1.0);\n#endif\n\n    float enableDepthCheck = 0.0;\n    if (lengthSq < disableDepthTestDistance)\n    {\n        enableDepthCheck = 1.0;\n    }\n\n    float dw = floor(clamp(dimensions.x, 0.0, SHIFT_LEFT12));\n    float dh = floor(clamp(dimensions.y, 0.0, SHIFT_LEFT12));\n\n    float iw = floor(clamp(imageSize.x, 0.0, SHIFT_LEFT12));\n    float ih = floor(clamp(imageSize.y, 0.0, SHIFT_LEFT12));\n\n    v_compressed.x = eyeDepth;\n    v_compressed.y = applyTranslate * SHIFT_LEFT1 + enableDepthCheck;\n    v_compressed.z = dw * SHIFT_LEFT12 + dh;\n    v_compressed.w = iw * SHIFT_LEFT12 + ih;\n    v_originTextureCoordinateAndTranslate.xy = depthOrigin;\n    v_originTextureCoordinateAndTranslate.zw = translate;\n    v_textureCoordinateBounds = textureCoordinateBoundsOrLabelTranslate;\n\n#endif\n\n#ifdef SDF\n    vec4 outlineColor;\n    float outlineWidth;\n\n    temp = sdf.x;\n    temp = temp * SHIFT_RIGHT8;\n    outlineColor.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    outlineColor.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    outlineColor.r = floor(temp);\n\n    temp = sdf.y;\n    temp = temp * SHIFT_RIGHT8;\n    float temp3 = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    outlineWidth = (temp - floor(temp)) * SHIFT_LEFT8;\n    outlineColor.a = floor(temp);\n    outlineColor /= 255.0;\n\n    v_outlineWidth = outlineWidth / 255.0;\n    v_outlineColor = outlineColor;\n    v_outlineColor.a *= translucency;\n#endif\n\n    v_pickColor = pickColor;\n\n    v_color = color;\n    v_color.a *= translucency;\n    v_splitDirection = splitDirection;\n}\n"},208276:(t,i,e)=>{e.d(i,{A:()=>n});const n="in vec4 v_color;\nin vec4 v_outlineColor;\nin float v_innerPercent;\nin float v_pixelDistance;\nin vec4 v_pickColor;\nin float v_splitDirection;\n\nvoid main()\n{\n    if (v_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;\n    if (v_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;\n\n    // The distance in UV space from this fragment to the center of the point, at most 0.5.\n    float distanceToCenter = length(gl_PointCoord - vec2(0.5));\n    // The max distance stops one pixel shy of the edge to leave space for anti-aliasing.\n    float maxDistance = max(0.0, 0.5 - v_pixelDistance);\n    float wholeAlpha = 1.0 - smoothstep(maxDistance, 0.5, distanceToCenter);\n    float innerAlpha = 1.0 - smoothstep(maxDistance * v_innerPercent, 0.5 * v_innerPercent, distanceToCenter);\n\n    vec4 color = mix(v_outlineColor, v_color, innerAlpha);\n    color.a *= wholeAlpha;\n\n// Fully transparent parts of the billboard are not pickable.\n#if !defined(OPAQUE) && !defined(TRANSLUCENT)\n    if (color.a < 0.005)   // matches 0/255 and 1/255\n    {\n        discard;\n    }\n#else\n// The billboard is rendered twice. The opaque pass discards translucent fragments\n// and the translucent pass discards opaque fragments.\n#ifdef OPAQUE\n    if (color.a < 0.995)   // matches < 254/255\n    {\n        discard;\n    }\n#else\n    if (color.a >= 0.995)  // matches 254/255 and 255/255\n    {\n        discard;\n    }\n#endif\n#endif\n\n    out_FragColor = czm_gammaCorrect(color);\n    czm_writeLogDepth();\n}\n"},510148:(t,i,e)=>{e.d(i,{A:()=>n});const n='uniform float u_maxTotalPointSize;\n\nin vec4 positionHighAndSize;\nin vec4 positionLowAndOutline;\nin vec4 compressedAttribute0;                                        // color, outlineColor, pick color\nin vec4 compressedAttribute1;                                        // show, translucency by distance, some free space\nin vec4 scaleByDistance;                                             // near, nearScale, far, farScale\nin vec4 distanceDisplayConditionAndDisableDepthAndSplitDirection;    // near, far, disableDepthTestDistance, splitDirection\n\nout vec4 v_color;\nout vec4 v_outlineColor;\nout float v_innerPercent;\nout float v_pixelDistance;\nout vec4 v_pickColor;\nout float v_splitDirection;\n\nconst float SHIFT_LEFT8 = 256.0;\nconst float SHIFT_RIGHT8 = 1.0 / 256.0;\n\nvoid main()\n{\n    // Modifying this shader may also require modifications to PointPrimitive._computeScreenSpacePosition\n\n    // unpack attributes\n    vec3 positionHigh = positionHighAndSize.xyz;\n    vec3 positionLow = positionLowAndOutline.xyz;\n    float outlineWidthBothSides = 2.0 * positionLowAndOutline.w;\n    float totalSize = positionHighAndSize.w + outlineWidthBothSides;\n    float outlinePercent = outlineWidthBothSides / totalSize;\n    // Scale in response to browser-zoom.\n    totalSize *= czm_pixelRatio;\n\n    float temp = compressedAttribute1.x * SHIFT_RIGHT8;\n    float show = floor(temp);\n\n#ifdef EYE_DISTANCE_TRANSLUCENCY\n    vec4 translucencyByDistance;\n    translucencyByDistance.x = compressedAttribute1.z;\n    translucencyByDistance.z = compressedAttribute1.w;\n\n    translucencyByDistance.y = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\n\n    temp = compressedAttribute1.y * SHIFT_RIGHT8;\n    translucencyByDistance.w = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\n#endif\n\n    ///////////////////////////////////////////////////////////////////////////\n\n    vec4 color;\n    vec4 outlineColor;\n    vec4 pickColor;\n\n    // compressedAttribute0.z => pickColor.rgb\n\n    temp = compressedAttribute0.z * SHIFT_RIGHT8;\n    pickColor.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    pickColor.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    pickColor.r = floor(temp);\n\n    // compressedAttribute0.x => color.rgb\n\n    temp = compressedAttribute0.x * SHIFT_RIGHT8;\n    color.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    color.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    color.r = floor(temp);\n\n    // compressedAttribute0.y => outlineColor.rgb\n\n    temp = compressedAttribute0.y * SHIFT_RIGHT8;\n    outlineColor.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    outlineColor.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    outlineColor.r = floor(temp);\n\n    // compressedAttribute0.w => color.a, outlineColor.a, pickColor.a\n\n    temp = compressedAttribute0.w * SHIFT_RIGHT8;\n    pickColor.a = (temp - floor(temp)) * SHIFT_LEFT8;\n    pickColor = pickColor / 255.0;\n\n    temp = floor(temp) * SHIFT_RIGHT8;\n    outlineColor.a = (temp - floor(temp)) * SHIFT_LEFT8;\n    outlineColor /= 255.0;\n    color.a = floor(temp);\n    color /= 255.0;\n\n    ///////////////////////////////////////////////////////////////////////////\n\n    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);\n    vec4 positionEC = czm_modelViewRelativeToEye * p;\n\n    ///////////////////////////////////////////////////////////////////////////\n\n#if defined(EYE_DISTANCE_SCALING) || defined(EYE_DISTANCE_TRANSLUCENCY) || defined(DISTANCE_DISPLAY_CONDITION) || defined(DISABLE_DEPTH_DISTANCE)\n    float lengthSq;\n    if (czm_sceneMode == czm_sceneMode2D)\n    {\n        // 2D camera distance is a special case\n        // treat all billboards as flattened to the z=0.0 plane\n        lengthSq = czm_eyeHeight2D.y;\n    }\n    else\n    {\n        lengthSq = dot(positionEC.xyz, positionEC.xyz);\n    }\n#endif\n\n#ifdef EYE_DISTANCE_SCALING\n    totalSize *= czm_nearFarScalar(scaleByDistance, lengthSq);\n#endif\n    if (totalSize > 0.0) {\n        // Add padding for anti-aliasing on both sides.\n        totalSize += 3.0;\n    }\n\n    // Clamp to max point size.\n    totalSize = min(totalSize, u_maxTotalPointSize);\n    // If size is too small, push vertex behind near plane for clipping.\n    // Note that context.minimumAliasedPointSize "will be at most 1.0".\n    if (totalSize < 1.0)\n    {\n        positionEC.xyz = vec3(0.0);\n        totalSize = 1.0;\n    }\n\n    float translucency = 1.0;\n#ifdef EYE_DISTANCE_TRANSLUCENCY\n    translucency = czm_nearFarScalar(translucencyByDistance, lengthSq);\n    // push vertex behind near plane for clipping\n    if (translucency < 0.004)\n    {\n        positionEC.xyz = vec3(0.0);\n    }\n#endif\n\n#ifdef DISTANCE_DISPLAY_CONDITION\n    float nearSq = distanceDisplayConditionAndDisableDepthAndSplitDirection.x;\n    float farSq = distanceDisplayConditionAndDisableDepthAndSplitDirection.y;\n    if (lengthSq < nearSq || lengthSq > farSq) {\n        // push vertex behind camera to force it to be clipped\n        positionEC.xyz = vec3(0.0, 0.0, 1.0);\n    }\n#endif\n\n    gl_Position = czm_projection * positionEC;\n    czm_vertexLogDepth();\n\n#ifdef DISABLE_DEPTH_DISTANCE\n    float disableDepthTestDistance = distanceDisplayConditionAndDisableDepthAndSplitDirection.z;\n    if (disableDepthTestDistance == 0.0 && czm_minimumDisableDepthTestDistance != 0.0)\n    {\n        disableDepthTestDistance = czm_minimumDisableDepthTestDistance;\n    }\n\n    if (disableDepthTestDistance != 0.0)\n    {\n        // Don\'t try to "multiply both sides" by w.  Greater/less-than comparisons won\'t work for negative values of w.\n        float zclip = gl_Position.z / gl_Position.w;\n        bool clipped = (zclip < -1.0 || zclip > 1.0);\n        if (!clipped && (disableDepthTestDistance < 0.0 || (lengthSq > 0.0 && lengthSq < disableDepthTestDistance)))\n        {\n            // Position z on the near plane.\n            gl_Position.z = -gl_Position.w;\n#ifdef LOG_DEPTH\n            czm_vertexLogDepth(vec4(czm_currentFrustum.x));\n#endif\n        }\n    }\n#endif\n\n    v_color = color;\n    v_color.a *= translucency * show;\n    v_outlineColor = outlineColor;\n    v_outlineColor.a *= translucency * show;\n\n    v_innerPercent = 1.0 - outlinePercent;\n    v_pixelDistance = 2.0 / totalSize;\n    gl_PointSize = totalSize * show;\n    gl_Position *= show;\n\n    v_pickColor = pickColor;\n    v_splitDirection = distanceDisplayConditionAndDisableDepthAndSplitDirection.w;\n}\n'}}]);