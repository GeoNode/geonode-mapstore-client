(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6929],{226789(e,t,r){var n=r(689769);e.exports=function(e,t){var r=!0;return n(e,function(e,n,o){return r=!!t(e,n,o)}),r}},239277(e,t,r){e.exports=r.p+"MapStore2/web/client/components/style/vector/iconNotFound.png"},361487(e,t,r){var n=r(524241),o=r(226789),i=r(589321),a=r(908437),l=r(449300);e.exports=function(e,t,r){var c=a(e)?n:o;return r&&l(e,t,r)&&(t=void 0),c(e,i(t,3))}},377026(e,t,r){"use strict";r.d(t,{A:()=>m});var n=r(273517),o=r.n(n),i=r(618093),a=r.n(i),l=r(8117),c=r(711030);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,r(164045).A)(c.A);const m=function(e){var t=e.accept,r=e.children,n=e.style,i=e.onRef,c=void 0===i?function(){}:i,s=e.onClose,u=void 0===s?function(){}:s,f=e.onDrop,m=void 0===f?function(){}:f,b=e.onDragEnter,d=void 0===b?function(){}:b,h=e.onDragLeave,v=void 0===h?function(){}:h;return o().createElement(a(),{disableClick:!0,ref:c,id:"DRAGDROP_IMPORT_ZONE",style:p({position:"absolute",top:0,left:0,height:"100%"},n),accept:t,onDrop:m,onDragEnter:d,onDragLeave:v},o().createElement("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,0.75)",color:"#fff",zIndex:4e3,display:"flex",textAlign:"center"}},o().createElement(y,{style:{border:"none",background:"transparent",color:"white",fontSize:35,top:0,right:0,position:"absolute"},onClick:function(){return u()}},o().createElement(l.e6,{glyph:"1-close"})),o().createElement("div",{style:{margin:"auto",maxWidth:550}},r)))}},524241(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},715275(e,t,r){"use strict";r.d(t,{A:()=>y});var n=r(273517),o=r.n(n),i=r(711520),a=r(8117);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var c=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=function(e){var t=e.show,r=e.style,n=void 0===r?{}:r,l=e.modal,u=e.draggable,f=void 0!==u&&u,y=e.closeGlyph,m=void 0===y?"1-close":y,b=e.closable,d=void 0===b||b,h=e.onClose,v=void 0===h?function(){}:h,g=e.title,S=e.header,E=e.footer,O=e.children,w=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,c);return t?o().createElement(i.A,s({modal:l,onClickOut:d&&l?function(){return v()}:null,style:p(p({},n),{},{display:t?"block":"none"}),draggable:f},w),o().createElement("span",{role:"header"},g||S||o().createElement("span",null,"Â "),d?o().createElement("button",{onClick:function(){return v()},className:"settings-panel-close close"},o().createElement(a.e6,{glyph:m})):null),o().createElement("span",{role:"body"},O),E?o().createElement("span",{role:"footer"},E):null):null}},761086(e,t,r){"use strict";r.d(t,{A:()=>o});var n=r(916589);const o=(0,n.compose)((0,n.withHandlers)(function(){var e=null;return{onRef:function(){return function(t){return e=t}},openFileDialog:function(){return function(){return e.open()}}}}))},919161(e,t,r){"use strict";r.d(t,{A:()=>l});var n=r(273517),o=r.n(n),i=r(275705),a=r(8571);const l=function(){return o().createElement("div",{style:{margin:"auto",maxWidth:550}},o().createElement(i.A,{size:80,color:"#ffffff",style:{margin:"auto"}}),o().createElement("h4",null,o().createElement(a.A,{msgId:"loading"})))}},946929(e,t,r){"use strict";r.d(t,{default:()=>cr});var n=r(916589),o=r(801081),i=r(273517),a=r.n(i),l=r(377026),c=r(919161),s=r(8117),u=r(711030),p=r(8571),f=r(595535);const y=function(e){var t=e.openFileDialog;return a().createElement("div",null,a().createElement(f.A,{msgId:"mapImport.dropZone.heading"}),t?a().createElement(u.A,{bsStyle:"primary",onClick:t},a().createElement(p.A,{msgId:"mapImport.dropZone.selectFiles"})):null,a().createElement("br",null),a().createElement("br",null),a().createElement(f.A,{msgId:"mapImport.dropZone.infoSupported"}),a().createElement("hr",null),a().createElement(f.A,{msgId:"mapImport.dropZone.note"}))};var m=["error"],b={FILE_NOT_SUPPORTED:a().createElement(p.A,{msgId:"mapImport.errors.fileNotSupported"}),PROJECTION_NOT_SUPPORTED:a().createElement(p.A,{msgId:"mapImport.errors.projectionNotSupported"})};const d=(0,n.compose)((0,n.branch)(function(e){return e.loading},(0,n.renderComponent)(c.A)),(0,n.branch)(function(e){return e.error},(0,n.renderComponent)(function(e){var t=e.error,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,m);return a().createElement("div",{style:{margin:"auto",maxWidth:550}},a().createElement("div",null,a().createElement(s.e6,{glyph:"exclamation-mark",style:{fontSize:80}})),a().createElement("h5",null,function(e){return e?b[e.message]||b[e]||a().createElement("span",null,a().createElement(p.A,{msgId:"mapImport.errors.unknownError"}),":",a().createElement(s.Fc,{bsStyle:"warning"},e.message)):a().createElement(p.A,{msgId:"mapImport.errors.unknownError"})}(t)),a().createElement(y,r))})))(function(e){return a().createElement("div",null,a().createElement("div",null,a().createElement(s.e6,{glyph:"upload",style:{fontSize:80}})),a().createElement(y,e))});var h=r(771710),v=r.n(h),g=r(361487),S=r.n(g),E=r(978632),O=r.n(E),w=r(823534),P=r.n(w),j=r(45388),x=r.n(j),k=r(535273),T=r(779893),C=r(327229),A=r(112585);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){L(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function L(e,t,r){return(t=function(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=function(e){return new Promise(function(t,r){var n=(0,C.o2)(e.name),o=e.type||C.Db[n];"application/x-zip-compressed"===o||"application/zip"===o||"application/vnd.google-earth.kml+xml"===o||"application/vnd.google-earth.kmz"===o||"application/gpx+xml"===o||"application/json"===o||"application/vnd.wmc"===o||"application/geo+json"===o?t(e):function(e){return(0,C.ue)(e).then(function(e){return(new(v())).loadAsync(e)})}(e).then(function(){return t(e)}).catch(function(){return r(new Error("FILE_NOT_SUPPORTED"))})})};const N=(0,n.compose)((0,n.mapPropsStream)(function(e){var t=(0,n.createEventHandler)(),r=t.handler,o=t.stream,i=(0,n.createEventHandler)(),a=i.handler,l=i.stream;return e.combineLatest(o.switchMap(function(e){var t=e.files,r=e.options;return x().Observable.from(t).flatMap(z).flatMap(function(e){var t=e.onWarnings,r=e.options;return function(e){var n=(0,C.o2)(e.name),o=e.type||C.Db[n],i=r.importedVectorFileMaxSizeInMB;if(i&&"application/json"!==o&&(0,C.ve)(e,i))return[[{type:"FeatureCollection",features:[{}],fileName:e.name,name:e.name,exceedFileMaxSize:!0,fileSizeLimitInMB:i}]];var a=T.Ay.getConfigProp("projectionDefs")||[],l=(a.length&&a.map(function(e){return e.code})||[]).concat(["EPSG:4326","EPSG:3857","EPSG:900913"]);return"application/vnd.google-earth.kml+xml"===o?(0,C.hN)(e).then(function(e){return(0,C.f$)(e)}):"application/gpx+xml"===o?(0,C.hN)(e).then(function(t){return(0,C._r)(t,e.name)}):"application/vnd.google-earth.kmz"===o?(0,C.h)(e).then(function(e){return(0,C.f$)(e)}):"application/x-zip-compressed"===o||"application/zip"===o?(0,C.ue)(e).then(function(r){return(0,C.kZ)(r).then(function(n){n.length>0&&t({type:"warning",filename:e.name,message:"shapefile.error.missingPrj"});var o=(0,C.e3)(r).map(function(t){return D(D({},t),{},{filename:e.name})});if(P()(o,function(e){return!!O()(e,"map.projection")})){var i=o.filter(function(e){return!!O()(e,"map.projection")});if(S()(i,function(e){return l.includes(e.map.projection)}))return o;throw new Error("PROJECTION_NOT_SUPPORTED")}return o})}):"application/json"===o?(0,C.Vh)(e).then(function(t){var r=O()(t,"map.projection");if(r){if(l.includes(r))return[D(D({},t),{},{fileName:e.name})];throw new Error("PROJECTION_NOT_SUPPORTED")}return[D(D({},t),{},{fileName:e.name})]}):"application/geo+json"===o?(0,C.Se)(e).then(function(t){var r=O()(t,"geoJSON.map.projection");if(r){if(l.includes(r))return[D(D({},t.geoJSON),{},{fileName:e.name})];throw new Error("PROJECTION_NOT_SUPPORTED")}return[D(D({},t.geoJSON),{},{fileName:e.name})]}):"application/vnd.wmc"===o?(0,C._1)(e).then(function(t){return[D(D({},t),{},{fileName:e.name})]}):null}}({onWarnings:a,options:r})).reduce(function(e,t){return{layers:(e.layers||[]).concat(t.filter(function(e){return function(e){return e&&e.features&&0!==e.features.length}(e)}).map(function(e){var t=(null==e?void 0:e.exceedFileMaxSize)||!1;return(0,k.Ir)(e)?{name:"Annotations",features:(0,k.no)(e),filename:e.filename}:D(D({},t?e:(0,A.mb)(e)),{},{filename:e.filename})})),maps:(e.maps||[]).concat(t.filter(function(e){return function(e){return e&&e.version&&e.map}(e)}))}},{}).map(function(e){return{loading:!1,files:e}}).catch(function(e){return x().Observable.of({error:e,loading:!1})}).startWith({loading:!0})}).startWith({}),function(e,t){return D(D(D({},e),t),{},{onDrop:r})}).combineLatest(l.scan(function(){var e,t=arguments.length>1?arguments[1]:void 0;return[].concat(function(e){if(Array.isArray(e))return M(e)}(e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t])},[]).startWith(void 0),function(e,t){return D(D({},e),{},{warnings:t})})}));var R=r(764932);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){U(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U(e,t,r){return(t=function(e){var t=function(e){if("object"!=B(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const W=(0,n.compose)((0,n.withHandlers)({useFiles:function(e){var t=e.currentMap,r=e.loadMap,n=void 0===r?function(){}:r,o=e.loadMapInfo,i=void 0===o?function(){}:o,a=e.onClose,l=void 0===a?function(){}:a,c=e.setLayers,s=void 0===c?function(){}:c,u=e.annotationsLayer,p=e.loadAnnotations,f=void 0===p?function(){}:p,y=e.warning,m=void 0===y?function(){}:y;return function(e,r){var o=e.layers,a=void 0===o?[]:o,c=e.maps,p=(void 0===c?[]:c)[0];if(p){var y=t.zoom,b=t.center,d=t.mapId,h=p.fileName;n(G(G({},p),{},{map:G(G({},p.map),{},{zoom:p.map.zoom||y,center:p.map.center||b})}),d||null,!p.map.zoom&&(p.map.bbox||{bounds:p.map.maxExtent})),d&&h&&i(d),l()}if(a.length>0){var v=a&&"Annotations"===a[0].name;if(!u&&v)f(a[0].features,!1),l();else{var g=[];a.forEach(function(e){var t=!(null==e||!e.exceedFileMaxSize);if("vector"===e.type&&(!(0,R.checkIfLayerFitsExtentForProjection)(e)||t)||t)if(t){var r,n;m({title:"notification.warning",message:"mapImport.errors.exceedFileSizeLimit",autoDismiss:6,position:"tc",values:{filename:null!==(r=e.name)&&void 0!==r?r:" ",maxfilesize:null!==(n=null==e?void 0:e.fileSizeLimitInMB)&&void 0!==n?n:C.Q}})}else{var o;m({title:"notification.warning",message:"mapImport.errors.fileBeyondBoundaries",autoDismiss:6,position:"tc",values:{filename:null!==(o=e.name)&&void 0!==o?o:" "}})}else g.push(e)}),s(g,r)}}}}}),(0,n.mapPropsStream)(function(e){return e.merge(e.distinctUntilKeyChanged("files").filter(function(e){return e.files}).do(function(e){var t=e.files,r=e.useFiles,n=void 0===r?function(){}:r,o=e.warnings;return n(t,void 0===o?[]:o)}).ignoreElements())}));var Z=r(761086),J=r(406250),$=["onClose","onDrop","onRef"];const q=(0,n.compose)(N,W,Z.A)(function(e){var t=e.onClose,r=void 0===t?function(){}:t,n=e.onDrop,o=void 0===n?function(){}:n,i=e.onRef,c=void 0===i?function(){}:i,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,$);return a().createElement(J.A,null,a().createElement(l.A,{onClose:r,onDrop:function(e){return o({files:e,options:{importedVectorFileMaxSizeInMB:s.importedVectorFileMaxSizeInMB}})},onRef:c},a().createElement(d,s)))});var H=r(811668),V=r(605556),X=r.n(V),K=r(129519),Q=r(167491),Y=r(957421),ee=r(192779),te=r.n(ee),re=r(455268),ne=r(628017),oe=r(618093),ie=r.n(oe),ae=r(750042),le=r.n(ae);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,be(n.key),n)}}function ue(e,t,r){return t=fe(t),function(e,t){if(t&&("object"==ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pe()?Reflect.construct(t,r||[],fe(e).constructor):t.apply(e,r))}function pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pe=function(){return!!e})()}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}function ye(e,t){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ye(e,t)}function me(e,t,r){return(t=be(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){var t=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}var de=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return me(e=ue(this,t,[].concat(n)),"tryUnzip",function(e){return(0,C.ue)(e).then(function(e){return(new(v())).loadAsync(e)})}),me(e,"checkFileType",function(t){return new Promise(function(r,n){var o=(0,C.o2)(t.name),i=t.type||C.Db[o];"application/x-zip-compressed"===i||"application/zip"===i||"application/vnd.google-earth.kml+xml"===i||"application/vnd.google-earth.kmz"===i||"application/gpx+xml"===i?r():e.tryUnzip(t).then(r).catch(n)})}),me(e,"checkfile",function(t){Promise.all(t.map(function(t){return e.checkFileType(t)})).then(function(){e.props.error&&e.props.onShapeError(null),e.props.onShapeChoosen(t)}).catch(function(){var t=(0,ne.kA)(e.context.messages,e.props.errorMessage);e.props.onShapeError(t)})}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.props.loading?a().createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",a().createElement(le(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"})):a().createElement(ie(),{rejectClassName:"alert-danger",className:"alert alert-info",onDrop:this.checkfile},a().createElement("div",{className:"dropzone-content",style:{textAlign:"center"}},this.props.text))}}])&&se(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);me(de,"propTypes",{text:X().oneOfType([X().string,X().element]),loading:X().bool,onShapeChoosen:X().func,onShapeError:X().func,error:X().oneOfType([X().string,X().element]),errorMessage:X().string}),me(de,"contextTypes",{messages:X().object}),me(de,"defaultProps",{text:"Drop or click to import a local Shape",onShapeChoosen:function(){},onShapeError:function(){},errorMessage:"shapefile.error.select"});const he=de;function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ge.apply(null,arguments)}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xe(n.key),n)}}function Ee(e,t,r){return t=we(t),function(e,t){if(t&&("object"==ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Oe()?Reflect.construct(t,r||[],we(e).constructor):t.apply(e,r))}function Oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Oe=function(){return!!e})()}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function je(e,t,r){return(t=xe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e){var t=function(e){if("object"!=ve(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ve(t)?t:t+""}var ke=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return je(e=Ee(this,t,[].concat(n)),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0}),je(e,"getGeometryType",function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce(function(e,t){return t&&t.type===e?e:t.type},null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null}),je(e,"getGeomType",function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce(function(t,r){var n=e.getGeometryType(r.geometry);return t?n===t?t:"GeometryCollection":n},null):null}),je(e,"renderError",function(){return a().createElement(s.fI,null,a().createElement("div",{style:{textAlign:"center"},className:"alert alert-danger"},a().createElement(p.A,{msgId:e.props.error})))}),je(e,"renderSuccess",function(){return a().createElement(s.fI,null,a().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))}),je(e,"renderStyle",function(){return e.props.stylers[e.getGeomType(e.props.selected)]}),je(e,"renderDefaultStyle",function(){return e.props.selected?a().createElement(s.fI,null,a().createElement(s.fv,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.defaultStyle"}))),a().createElement(s.fv,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.zoom"})))):null}),je(e,"addShape",function(t){e.props.shapeLoading(!0);var r=e.props.readFiles(t,e.props.onShapeError);Promise.all(r).then(function(t){var r=t.filter(function(e){return e[0]&&e[0].features&&0!==e[0].features.length||"Feature"===e[0].type});r=r.reduce(function(t,r){return r?t.concat(r.map(function(t){return(0,A.mb)(t,e.props.createId(t,r))})):t},[]),e.props.onShapeChoosen(r),e.props.shapeLoading(!1)}).catch(function(t){e.props.shapeLoading(!1);var r=t&&t.name||t||"";te()(r)&&"SyntaxError"===r?e.props.onShapeError("shapefile.error.shapeFileParsingError"):e.props.onShapeError("shapefile.error.genericLoadError")})}),je(e,"addToMap",function(){e.props.shapeLoading(!0);var t=e.props.selected;Promise.resolve(e.props.addShapeLayer(t)).then(function(){e.props.shapeLoading(!1);var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateShapeBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326")),e.props.onShapeSuccess(e.props.layers[0].name+(0,ne.kA)(e.context.messages,"shapefile.success")),e.props.onLayerAdded(e.props.selected)}).catch(function(){e.props.shapeLoading(!1),e.props.onShapeError("shapefile.error.genericLoadError")})}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return a().createElement(s.xA,{role:"body",style:{width:"300px"},fluid:!0},this.props.error?this.renderError():null,this.props.success?this.renderSuccess():null,a().createElement(s.fI,{style:{textAlign:"center"}},this.props.selected?a().createElement(re.DropdownList,{data:this.props.layers,value:this.props.selected,onSelect:function(t){return e.props.onSelectLayer(t)},valueField:"id",textField:"name"}):a().createElement(he,ge({},this.props.uploadOptions,{errorMessage:"shapefile.error.select",text:this.props.uploadMessage,onShapeChoosen:this.addShape,onShapeError:this.props.onShapeError}))),a().createElement(s.fI,{style:{marginBottom:10}},this.state.useDefaultStyle?null:this.renderStyle()),this.renderDefaultStyle(),this.props.selected?a().createElement(s.fI,null,a().createElement(s.fv,{xsOffset:6,xs:3}," ",a().createElement(u.A,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.onShapeChoosen(null)}},this.props.cancelMessage)),a().createElement(s.fv,{xs:3}," ",a().createElement(u.A,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},this.props.addMessage))):null)}}])&&Se(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);je(ke,"propTypes",{bbox:X().array,layers:X().array,selected:X().object,style:X().object,shapeStyle:X().object,readFiles:X().func,onShapeError:X().func,onShapeSuccess:X().func,onShapeChoosen:X().func,addShapeLayer:X().func,shapeLoading:X().func,onSelectLayer:X().func,onLayerAdded:X().func,onZoomSelected:X().func,updateShapeBBox:X().func,error:X().string,success:X().string,buttonSize:X().string,uploadMessage:X().object,cancelMessage:X().object,addMessage:X().object,stylers:X().object,uploadOptions:X().object,createId:X().func}),je(ke,"contextTypes",{messages:X().object}),je(ke,"defaultProps",{shapeLoading:function(){},readFiles:function(e,t){return e.map(function(e){var r=(0,C.o2)(e.name),n=e.type||C.Db[r];return"application/vnd.google-earth.kml+xml"===n?(0,C.hN)(e).then(function(e){return(0,C.f$)(e)}):"application/gpx+xml"===n?(0,C.hN)(e).then(function(e){return(0,C._r)(e)}):"application/vnd.google-earth.kmz"===n?(0,C.h)(e).then(function(e){return(0,C.f$)(e)}):"application/x-zip-compressed"===n||"application/zip"===n?(0,C.ue)(e).then(function(e){return(0,C.kZ)(e).then(function(r){return r.length>0&&t("shapefile.error.missingPrj"),(0,C.e3)(e)})}):null})},stylers:{},buttonSize:"small",uploadOptions:{},createId:function(){},bbox:null});const Te=ke;var Ce=r(888338),Ae=r(910219),Ie=r.n(Ae),Me=r(491281);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fe(n.key),n)}}function Le(e,t,r){return t=Ne(t),function(e,t){if(t&&("object"==_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ze()?Reflect.construct(t,r||[],Ne(e).constructor):t.apply(e,r))}function ze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ze=function(){return!!e})()}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Re(e,t){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Re(e,t)}function Be(e,t,r){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e){var t=function(e){if("object"!=_e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_e(t)?t:t+""}var Ge=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Be(e=Le(this,t,[].concat(o)),"paint",function(t){t.save(),t.beginPath();var r=e.props.shapeStyle,n=r.color,o=r.fill;switch(t.fillStyle=o?te()(o)?o:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(o.a,")"):null,t.strokeStyle=n?te()(n)?n:"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(n.a,")"):null,t.lineWidth=e.props.shapeStyle.width||e.props.shapeStyle.weight,e.props.shapeStyle.dashArray&&e.props.shapeStyle.dashArray.length&&t.setLineDash(e.props.shapeStyle.dashArray),e.props.geomType){case"Polygon":e.paintPolygon(t);break;case"Polyline":e.paintPolyline(t);break;case"Point":e.paintPoint(t,e.props.shapeStyle.markName);break;case"Circle":e.paintPoint(t,"circle");break;case"Marker":e.paintMarker(t);break;case"Text":e.paintText(t);break;case"Symbol":e.paintSymbol(t);break;default:return}t.restore()}),Be(e,"drawSymbol",function(t,n){n.clearRect(0,0,600,600);var o=new Image,i=new Image;i.src=r(239277),o.src=t||e.props.shapeStyle.symbolUrl,o.onload=function(){try{n.drawImage(o,e.props.width/2-o.width/2,e.props.height/2-o.height/2)}catch(e){return}},o.onerror=function(){i.onload=function(){try{n.drawImage(i,e.props.width/2-i.width/2,e.props.height/2-i.height/2)}catch(e){return}}}}),Be(e,"paintSymbol",function(t){(0,Me.isSymbolStyle)(e.props.originalStyle)?e.props.originalStyle.symbolUrlCustomized&&e.props.originalStyle.symbolUrl?e.drawSymbol(e.props.originalStyle.symbolUrlCustomized,t):(0,Me.createSvgUrl)(e.props.originalStyle,e.props.originalStyle.symbolUrlCustomized||e.props.originalStyle.symbolUrl).then(function(r){return e.drawSymbol(r,t)}):e.drawSymbol(null,t)}),Be(e,"paintText",function(t){var r=e.props,n=r.width,o=r.height,i=e.props.shapeStyle,a=i.textAlign,l=void 0===a?"center":a,c=i.label,s=i.font,u=void 0===s?"14px Arial":s;return t.textAlign=l,t.font=u,"start"===l?(t.strokeText(c||"New",n/2.5,o/2),void t.fillText(c||"New",n/2.5,o/2)):"end"===l?(t.strokeText(c||"New",n/1.5,o/2),void t.fillText(c||"New",n/1.5,o/2)):(t.strokeText(c||"New",n/2,o/2),void t.fillText(c||"New",n/2,o/2))}),Be(e,"paintPolygon",function(e){e.transform(1,0,0,1,-27.5,0),e.moveTo(55,8),e.lineTo(100,8),e.lineTo(117.5,40),e.lineTo(100,72),e.lineTo(55,72),e.lineTo(37.5,40),e.closePath(),e.fill(),e.stroke()}),Be(e,"paintPolyline",function(e){e.transform(1,0,0,1,0,0),e.moveTo(10,20),e.bezierCurveTo(40,40,70,0,90,20),e.stroke()}),Be(e,"paintPoint",function(t,r){var n=e.props.shapeStyle.radius,o=n/2;switch(r){case"square":t.rect(50-o,48.5-o,n,n);break;case"circle":t.arc(50,48.5,o,0,2*Math.PI);break;case"triangle":var i=Math.sqrt(3)*n/2/3;t.moveTo(50,48.5-2*i),t.lineTo(50+o,48.5+i),t.lineTo(50-o,48.5+i),t.closePath();break;case"star":e.paintStar(t,50,48.5,5,o,o/2);break;case"cross":e.paintCross(t,50,48.5,n,.23);break;case"x":t.translate(50,48.5),t.rotate(45*Math.PI/180),t.translate(-50,-48.5),e.paintCross(t,50,48.5,n,.23);break;default:t.arc(50,48.5,n,0,2*Math.PI)}t.fill(),t.stroke()}),Be(e,"paintMarker",function(e){var t=new Image;t.src=Ie();try{e.drawImage(t,42.5,24)}catch(e){return}}),Be(e,"paintStar",function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,l=t,c=r,s=Math.PI/n;e.moveTo(t,r-o);for(var u=0;u<n;u++)l=t+Math.cos(a)*o,c=r+Math.sin(a)*o,e.lineTo(l,c),a+=s,l=t+Math.cos(a)*i,c=r+Math.sin(a)*i,e.lineTo(l,c),a+=s;e.lineTo(t,r-o),e.closePath()}),Be(e,"paintCross",function(e,t,r,n,o){var i=n*o/2,a=n/2;e.moveTo(t-i,r-a),e.lineTo(t+i,r-a),e.lineTo(t+i,r-i),e.lineTo(t+a,r-i),e.lineTo(t+a,r+i),e.lineTo(t+i,r+i),e.lineTo(t+i,r+a),e.lineTo(t-i,r+a),e.lineTo(t-i,r+i),e.lineTo(t-a,r+i),e.lineTo(t-a,r-i),e.lineTo(t-i,r-i),e.closePath()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"render",value:function(){return a().createElement("canvas",{ref:"styleCanvas",style:this.props.style,width:this.props.width,height:this.props.height})}}])&&De(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(a().Component);Be(Ge,"propTypes",{originalStyle:X().object,style:X().object,shapeStyle:X().object,geomType:X().oneOf(["Polygon","Polyline","Point","Marker","Text","Symbol","Circle",void 0]),width:X().number,height:X().number}),Be(Ge,"defaultProps",{originalStyle:{},style:{},shapeStyle:{},geomType:"Polygon",width:100,height:80});const Ue=Ge;function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xe(n.key),n)}}function Je(e,t,r){return t=qe(t),function(e,t){if(t&&("object"==We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$e()?Reflect.construct(t,r||[],qe(e).constructor):t.apply(e,r))}function $e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return($e=function(){return!!e})()}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}function Ve(e,t,r){return(t=Xe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xe(e){var t=function(e){if("object"!=We(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==We(t)?t:t+""}var Ke=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Je(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return a().createElement(re.DropdownList,{data:[{value:"circle",name:(0,ne.kA)(this.context.messages,"markNameSelector.circle")||"Circle"},{value:"square",name:(0,ne.kA)(this.context.messages,"markNameSelector.square")||"Square"},{value:"triangle",name:(0,ne.kA)(this.context.messages,"markNameSelector.triangle")||"Triangle"},{value:"star",name:(0,ne.kA)(this.context.messages,"markNameSelector.star")||"Star"},{value:"cross",name:(0,ne.kA)(this.context.messages,"markNameSelector.cross")||"Cross"},{value:"x",name:(0,ne.kA)(this.context.messages,"markNameSelector.x")||"X"}],valueField:"value",textField:"name",value:this.props.markName,onChange:function(t){return e.props.onChange("markName",t.value)}})}}])&&Ze(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);Ve(Ke,"propTypes",{markName:X().string,onChange:X().func}),Ve(Ke,"contextTypes",{messages:X().object}),Ve(Ke,"defaultProps",{markName:"circle",onChange:function(){}});const Qe=Ke;var Ye=r(883085),et=r.n(Ye);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ct(n.key),n)}}function nt(e,t,r){return t=it(t),function(e,t){if(t&&("object"==tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ot()?Reflect.construct(t,r||[],it(e).constructor):t.apply(e,r))}function ot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ot=function(){return!!e})()}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},at(e,t)}function lt(e,t,r){return(t=ct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ct(e){var t=function(e){if("object"!=tt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tt(t)?t:t+""}et()();var st=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this;return a().createElement(s.xA,{fluid:!0},a().createElement(s.fI,null,a().createElement(s.fv,{xs:4,style:{padding:0}},a().createElement(Ue,{style:{padding:0,margin:"auto",display:"block"},height:97,shapeStyle:this.props.shapeStyle,geomType:this.props.shapeStyle.marker?"Marker":"Point"})),a().createElement(s.fv,{xs:7},this.props.showMarker?a().createElement(s.fI,null,a().createElement(s.fv,{xs:1},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.props.shapeStyle.marker,onChange:function(t){e.props.setStyleParameter("marker",t.target.checked)}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:4},a().createElement("label",null,"Marker"))):null,this.props.showMarkSelector?a().createElement(s.fI,{style:{marginBottom:4}},a().createElement(s.fv,{style:{paddingTop:7},xs:4},a().createElement("label",null,"Mark")),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(Qe,{onChange:this.props.setStyleParameter,markName:this.props.shapeStyle.markName}))):null,a().createElement(s.fI,null,a().createElement(s.fv,{xs:4},a().createElement(Ce.A,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(re.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){e.props.shapeStyle.width!==t&&e.props.setStyleParameter("width",t)}}))),a().createElement(s.fI,{style:{marginTop:4}},a().createElement(s.fv,{xs:4},a().createElement(Ce.A,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}})),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(re.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:50,step:1,value:this.props.shapeStyle.radius,onChange:function(t){e.props.shapeStyle.radius!==t&&e.props.setStyleParameter("radius",t)}}))))))}}],n&&rt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);lt(st,"propTypes",{shapeStyle:X().object,setStyleParameter:X().func,showMarker:X().bool,showMarkSelector:X().bool}),lt(st,"defaultProps",{shapeStyle:{},showMarker:!0,showMarkSelector:!1,setStyleParameter:function(){}});const ut=st;function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vt(n.key),n)}}function yt(e,t,r){return t=bt(t),function(e,t){if(t&&("object"==pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mt()?Reflect.construct(t,r||[],bt(e).constructor):t.apply(e,r))}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mt=function(){return!!e})()}function bt(e){return bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bt(e)}function dt(e,t){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dt(e,t)}function ht(e,t,r){return(t=vt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vt(e){var t=function(e){if("object"!=pt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pt(t)?t:t+""}et()();var gt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dt(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return a().createElement(s.xA,{fluid:!0},a().createElement(s.fI,null,a().createElement(s.fv,{xs:4,style:{padding:0}},a().createElement(Ue,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polygon"})),a().createElement(s.fv,{xs:7},a().createElement(s.fI,{style:{marginTop:7}},a().createElement(s.fv,{xs:4},a().createElement(Ce.A,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(re.NumberPicker,{min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){t!==e.props.shapeStyle.width&&e.props.setStyleParameter("width",t)}}))),a().createElement(s.fI,{style:{marginTop:4}},a().createElement(s.fv,{xs:6},a().createElement(Ce.A,{value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}}))))))}}])&&ft(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);ht(gt,"propTypes",{shapeStyle:X().object,setStyleParameter:X().func}),ht(gt,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const St=gt;function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tt(n.key),n)}}function wt(e,t,r){return t=jt(t),function(e,t){if(t&&("object"==Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pt()?Reflect.construct(t,r||[],jt(e).constructor):t.apply(e,r))}function Pt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Pt=function(){return!!e})()}function jt(e){return jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jt(e)}function xt(e,t){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xt(e,t)}function kt(e,t,r){return(t=Tt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e){var t=function(e){if("object"!=Et(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Et(t)?t:t+""}et()();var Ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xt(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return a().createElement(s.xA,{fluid:!0},a().createElement(s.fI,null,a().createElement(s.fv,{xs:4,style:{padding:0}},a().createElement(Ue,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polyline",height:40})),a().createElement(s.fv,{xs:7},a().createElement(s.fI,{style:{marginTop:7}},a().createElement(s.fv,{xs:4},a().createElement(Ce.A,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(re.NumberPicker,{onChange:function(t){e.props.setStyleParameter("width",t)},min:1,max:15,step:1,value:this.props.shapeStyle.width}))))))}}])&&Ot(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);kt(Ct,"propTypes",{shapeStyle:X().object,setStyleParameter:X().func}),kt(Ct,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const At=Ct;(0,H.connect)(function(e){return{uploadOptions:{error:e.mapimport&&e.mapimport.error||null,loading:e.mapimport&&e.mapimport.loading||!1}}},{onShapeError:Q.DX})(Te);var It=(0,H.connect)(function(e){return{shapeStyle:e.style||{}}},{setStyleParameter:Y.J})(St),Mt=(0,H.connect)(function(e){return{shapeStyle:e.style||{}}},{setStyleParameter:Y.J})(ut),_t=(0,H.connect)(function(e){return{shapeStyle:e.style||{}}},{setStyleParameter:Y.J})(At),Dt=r(181634),Lt=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!["geostyler"].includes(null==r||null===(e=r.style)||void 0===e?void 0:e.format)||null==r||null===(t=r.style)||void 0===t||!t.body)||!(!r||!r.features.length)&&r.features.reduce(function(e,t){var r=t.style&&Array.isArray(t.style)&&t.style.length||Object.keys(t.style||{}).length;return e||!!r},!1)};function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Nt(e){return function(e){if(Array.isArray(e))return Rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jt(n.key),n)}}function Ft(e,t,r){return t=Ut(t),function(e,t){if(t&&("object"==zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gt()?Reflect.construct(t,r||[],Ut(e).constructor):t.apply(e,r))}function Gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Gt=function(){return!!e})()}function Ut(e){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ut(e)}function Wt(e,t){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wt(e,t)}function Zt(e,t,r){return(t=Jt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jt(e){var t=function(e){if("object"!=zt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zt(t)?t:t+""}var $t=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Zt(e=Ft(this,t,[].concat(n)),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0,overrideAnnotation:!1,initialLayers:[]}),Zt(e,"getGeometryType",function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce(function(e,t){return t&&t.type===e?e:t.type},null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null}),Zt(e,"getGeomType",function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce(function(t,r){var n=e.getGeometryType(r.geometry);return t?n===t?t:"GeometryCollection":n},null):null}),Zt(e,"renderError",function(){return e.props.errors&&e.props.errors.filter(function(t){return(t.filename||t.name)&&e.props.layers&&e.props.layers[0]&&(e.props.layers[0].filename===t.filename||e.props.layers[0].name===t.name)}).map(function(e){return a().createElement(s.fI,{key:e&&e.name+e.message},a().createElement(s.Fc,{bsStyle:e.type,style:{textAlign:"center"}},a().createElement(p.A,{msgId:e.message})))})}),Zt(e,"renderSuccess",function(){return a().createElement(s.fI,null,a().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))}),Zt(e,"renderDisableStyleCustomization",function(e){return e?a().createElement("div",{className:"alert alert-info mb-2 style-customisation-disabled-container"},a().createElement(p.A,{msgId:"shapefile.styleCustomizationDisabled"})):null}),Zt(e,"findLayerSerialNumber",function(t){var r=t.name;return e.state.initialLayers.findIndex(function(e){return e.name===r})+1}),Zt(e,"addToMap",function(){var t=Lt(e.props.selected),r=(0,k.Ir)(e.props.selected),n=r||e.state.useDefaultStyle||t?e.props.selected:(0,Dt.sn)(e.props.selected,e.props.shapeStyle);Promise.resolve(r?e.props.loadAnnotations(n.features,e.state.overrideAnnotation):e.props.addLayer(n)).then(function(){if(!r){var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326"))}e.props.onSuccess(e.props.layers.length>1?r?"Annotation":e.props.layers[0].name+(0,ne.kA)(e.context.messages,"shapefile.success"):void 0),e.props.onLayerAdded(e.props.selected)}).catch(function(t){e.props.onError({type:"error",name:r?"Annotation":e.props.layers[0].name,error:t,message:"shapefile.error.genericLoadError"})})}),Zt(e,"annotationOptions",function(){return a().createElement(a().Fragment,null,a().createElement(s.fv,{xs:2},a().createElement("input",{type:"radio",checked:!e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!1})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.merge"}))),a().createElement(s.fv,{xs:2},a().createElement("input",{type:"radio",checked:e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!0})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.replace"}))))}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wt(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){this.setState({initialLayers:Nt(this.props.layers)})}},{key:"render",value:function(){var e=this,t=Lt(this.props.selected);return a().createElement(s.xA,{role:"body",style:{width:"400px"},fluid:!0},this.props.errors?this.renderError():null,this.props.success?this.renderSuccess():null,a().createElement(s.fI,null,a().createElement("h4",null,a().createElement("span",{style:{fontWeight:"bold"}},a().createElement(p.A,{msgId:"shapefile.layerOf",msgParams:{count:this.findLayerSerialNumber(this.props.selected),total:this.state.initialLayers.length}}))," ",this.props.selected.name)),a().createElement(s.fI,{key:"styler",style:{marginBottom:10}},this.state.useDefaultStyle||t?null:this.props.stylers[this.getGeomType(this.props.selected)]),this.renderDisableStyleCustomization(t),a().createElement(s.fI,{key:"options"},(0,k.Ir)(this.props.selected)?this.annotationOptions():a().createElement(a().Fragment,null,a().createElement(s.fv,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",disabled:t,checked:t||this.state.useDefaultStyle,defaultChecked:t||this.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.defaultStyle"}))),a().createElement(s.fv,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.zoom"}))))),a().createElement(s.fI,null,a().createElement(s._O,{style:{display:"flex",justifyContent:"flex-end"}},a().createElement(u.A,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.setLayers(null)}},this.props.cancelMessage),a().createElement(u.A,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){return e.props.onLayerSkipped(e.props.selected)}},this.props.skipMessage),a().createElement(u.A,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},1===this.props.layers.length?this.props.finishMessage:this.props.nextMessage))))}}],n&&Bt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);Zt($t,"propTypes",{bbox:X().array,layers:X().array,selected:X().object,style:X().object,shapeStyle:X().object,onError:X().func,onSuccess:X().func,setLayers:X().func,addLayer:X().func,loadAnnotations:X().func,onSelectLayer:X().func,onLayerAdded:X().func,onLayerSkipped:X().func,onZoomSelected:X().func,updateBBox:X().func,errors:X().array,success:X().string,buttonSize:X().string,cancelMessage:X().object,addMessage:X().object,stylers:X().object,nextMessage:X().object,finishMessage:X().object,skipMessage:X().object}),Zt($t,"contextTypes",{messages:X().object}),Zt($t,"defaultProps",{buttonSize:"small",setLayers:function(){},addLayer:function(){},loadAnnotations:function(){},updateBBox:function(){},onZoomSelected:function(){},stylers:{},bbox:null});const qt=$t;var Ht=r(715275);function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xt.apply(null,arguments)}function Kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nr(n.key),n)}}function Qt(e,t,r){return t=er(t),function(e,t){if(t&&("object"==Vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yt()?Reflect.construct(t,r||[],er(e).constructor):t.apply(e,r))}function Yt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Yt=function(){return!!e})()}function er(e){return er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},er(e)}function tr(e,t){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tr(e,t)}function rr(e,t,r){return(t=nr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nr(e){var t=function(e){if("object"!=Vt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vt(t)?t:t+""}var or=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tr(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e={Polygon:a().createElement(It,null),MultiPolygon:a().createElement(It,null),GeometryCollection:a().createElement(It,null),LineString:a().createElement(_t,null),MultiLineString:a().createElement(_t,null),MultiPoint:a().createElement(Mt,null),Point:a().createElement(Mt,null)},t=a().createElement(qt,Xt({},this.props,{setLayers:this.props.setLayers,stylers:e,uploadMessage:a().createElement(K.A,{msgId:this.props.uploadMessage}),cancelMessage:a().createElement(K.A,{msgId:"shapefile.cancel"}),nextMessage:a().createElement(K.A,{msgId:"shapefile.next"}),finishMessage:a().createElement(K.A,{msgId:"shapefile.finish"}),skipMessage:a().createElement(K.A,{msgId:"shapefile.skip"})}));return this.props.layers?a().createElement(Ht.A,{id:"import-style-dialog",onClose:this.props.onClose,modal:this.props.modal,show:!0,header:a().createElement(K.A,{msgId:"shapefile.title"})},t):t}}])&&Kt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);rr(or,"propTypes",{id:X().string,layers:X().array,selected:X().object,style:X().object,shapeStyle:X().object,onError:X().func,setLayers:X().func,addShapeLayer:X().func,onSelectLayer:X().func,onLayerAdded:X().func,error:X().string,mapType:X().string,wrap:X().bool,wrapWithPanel:X().bool,panelStyle:X().object,panelClassName:X().string,visible:X().bool,modal:X().bool,onClose:X().func,closeGlyph:X().string,uploadMessage:X().string,buttonSize:X().string}),rr(or,"defaultProps",{id:"mapstore-shapefile-upload",uploadMessage:"shapefile.placeholder",wrap:!0,modal:!0,wrapWithPanel:!1,panelStyle:{minWidth:"360px",zIndex:1995,position:"absolute",overflow:"visible",top:"30px",left:"calc(50% - 150px)"},panelClassName:"toolbar-panel",visible:!1,onClose:function(){},closeGlyph:"1-close",buttonSize:"small"});const ir=or;var ar=r(538704),lr=r(131127);const cr=(0,n.compose)((0,n.mapPropsStream)(function(e){return e.merge(e.filter(function(e){var t=e.layers;return t&&t.length>0}).exhaustMap(function(){return e.filter(function(e){var t=e.layers;return!t||0===t.length}).take(1).do(function(e){var t=e.onClose,r=void 0===t?function(){}:t;return r&&r()}).ignoreElements()}))}),(0,n.branch)(function(e){return!e.enabled},n.renderNothing),(0,n.branch)(function(e){var t=e.layers;return!t||0===t.length},(0,n.compose)((0,H.connect)((0,o.j8)({currentMap:lr.mg}),{loadMap:ar.ze,loadMapInfo:ar.D7}),(0,n.renderComponent)(q))))(ir)}}]);