"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2523],{828089:(t,r,n)=>{n.d(r,{K:()=>s});var e=n(764932),o=n(6683),i=6371008.8;function a(t,r,n){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,o=t[1]*Math.PI/180,a=t[0]*Math.PI/180,l=r/e,u=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(n));return[180*(a+Math.atan2(Math.sin(n)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(u)))/Math.PI,180*u/Math.PI]}function l(t,r){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=n.sides,o=void 0===e?128:e,i=n.sphereRadius,l=[],u=0;u<o;++u)l.push(a(t,r,2*Math.PI*u/o,i));return l.push(l[0]),l}function u(t,r){var n=t%r;return n*r<0?n+r:n}function c(t,r){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.sides,a=void 0===i?128:i,l=n.projection,c=void 0===l?"EPSG:3857":l,s=(0,e.reproject)(t,"EPSG:4326",c),f=[s.x,s.y],d=(0,e.getUnits)(c),y=r/o.Ig[d],h=2*(a+1),v=new Array(h),p=0;p<h;p+=2){v[p]=0,v[p+1]=0;for(var m=2;m<2;m++)v[p+m]=f[m]}for(var g=0;g<=a;++g){var b=2*g,M=0+2*u(g,a)*Math.PI/a;v[b]=f[0]+y*Math.cos(M),v[b+1]=f[1]+y*Math.sin(M)}for(var k=[],w=0;w<v.length-1;w++)if(w%2==0){var S=(0,e.reproject)([v[w],v[w+1]],c,"EPSG:4326");k.push([S.x,S.y])}return k}function s(t,r,n,e){return{type:"Polygon",coordinates:[(n?l:c)(t,r,e)]}}},197302:(t,r,n)=>{n.r(r),n.d(r,{default:()=>P});var e=n(353481),o=n.n(e),i=n(499084),a=n.n(i),l=n(835970),u=n.n(l),c=n(399392),s=n(237303),f=n(290505),d=n(828089);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function h(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,g(e.key),e)}}function v(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,e)}return n}function p(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach(function(r){m(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m(t,r,n){return(r=g(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function g(t){var r=function(t){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(r)?r:r+""}function b(t,r){if(t){if("string"==typeof t)return M(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,r):void 0}}function M(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=Array(r);n<r;n++)e[n]=t[n];return e}var k={Point:["Mark","Icon","Text","Circle"],MultiPoint:["Mark","Icon","Text"],LineString:["Line"],MultiLineString:["Line"],Polygon:["Fill"],MultiPolygon:["Fill"]},w=f.R.geojson(),S=function(t,r,n){switch(t){case"top-left":return[0,0];case"top":return[r/2,0];case"top-right":return[r,0];case"left":return[0,n/2];case"center":default:return[r/2,n/2];case"right":return[r,n/2];case"bottom-left":return[0,n];case"bottom":return[r/2,n];case"bottom-right":return[r,n]}};const P=function(){return t=function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"readStyle",value:function(){return new Promise(function(t,r){try{t(null)}catch(t){r(t)}})}},{key:"writeStyle",value:function(t){return new Promise(function(r,n){try{var e=(i=t.rules,f=function(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l=void 0===i?[]:i).reverse(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.opacity,n=void 0===r?1:r,e=t.layer,i=void 0===e?{}:e,y=t.features;return(0,s.J)({rules:l},{features:y}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i._msAdditionalLayers&&i._msAdditionalLayers.forEach(function(t){t.remove()}),i._msAdditionalLayers=[];var r=function(r){var e=r.symbolizer,i=r.latlng,l=r.feature,u=(0,c.$k)(e,l);if("Mark"===u.kind){var s=t.find(function(t){return t.id===(0,c.RU)(u,e)})||{},f=s.image,y=s.src,h=s.width,v=s.height;if(f){var m=h/v,g=2*u.radius,M=g,k=M/m;return v>h&&(M=(k=g)*m),o().marker(i,{icon:o().icon({iconUrl:y,iconSize:[M,k],iconAnchor:[M/2,k/2]}),opacity:1*n})}}if("Icon"===u.kind){var w=t.find(function(t){return t.id===(0,c.RU)(u,e)})||{},P=w.image,O=w.src,j=w.width,A=w.height;if(P){var x=j/A,L=u.size,z=L/x;return A>j&&(L=(z=u.size)*x),o().marker(i,{icon:o().icon({iconUrl:O,iconSize:[L,z],iconAnchor:S(u.anchor,L,z)}),opacity:u.opacity*n})}}if("Text"===u.kind){var I,C,R,E,_,G=(0,c.vK)(l,u.label,""),T="\n                    -webkit-text-stroke-width:".concat(u.haloWidth,"px;\n                    -webkit-text-stroke-color:").concat(u.haloColor||"",";\n                "),D=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(e=i.call(n)).done)&&(l.push(e.value),l.length!==r);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,r)||b(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(t){switch(t){case"top-left":return["0px","0px"];case"top":return["-50%","0px"];case"top-right":return["-100%","0px"];case"left":return["0px","-50%"];case"center":default:return["-50%","-50%"];case"right":return["-100%","-50%"];case"bottom-left":return["0px","-100%"];case"bottom":return["-50%","-100%"];case"bottom-right":return["-100%","-100%"]}}(u.anchor),2),J=D[0],U=D[1],W=o().divIcon({html:'<div style="\n                        color:'.concat(u.color,";\n                        font-family: ").concat(a()(u.font||[]).join(", "),";\n                        font-style: ").concat(u.fontStyle||"normal",";\n                        font-weight: ").concat(u.fontWeight||"normal",";\n                        font-size: ").concat(u.size,"px;\n\n                        position: absolute;\n                        transform: translate(calc(").concat(J," + ").concat(null!==(I=null==u||null===(C=u.offset)||void 0===C?void 0:C[0])&&void 0!==I?I:0,"px), calc(").concat(U," + ").concat(null!==(R=null==u||null===(E=u.offset)||void 0===E?void 0:E[1])&&void 0!==R?R:0,"px)) rotateZ(").concat(null!==(_=null==u?void 0:u.rotate)&&void 0!==_?_:0,"deg);\n\n                        ").concat(u.haloWidth>0?T:"",'\n                    ">\n                        ').concat(G,"\n                        </div>"),className:""});return o().marker(i,{icon:W,opacity:1*n})}if("Circle"===u.kind){var F,N,$=u.radius,K=u.geodesic,q=o().geoJSON(p(p({},l),{},{geometry:(0,d.K)(l.geometry.coordinates,$,K)}));return q.setStyle(p({fill:!0,stroke:!0,fillColor:u.color,fillOpacity:u.opacity*n,color:u.outlineColor,opacity:(null!==(F=u.outlineOpacity)&&void 0!==F?F:0)*n,weight:null!==(N=u.outlineWidth)&&void 0!==N?N:0},u.outlineDasharray&&{dashArray:u.outlineDasharray.join(" ")})),q}return null};return{filter:function(t){var r,n=null==t||null===(r=t.geometry)||void 0===r?void 0:r.type;if(0===f.length)return!1;var e=k[n]||[];return!!f.find(function(r){var n;return(null==r||null===(n=r.symbolizers)||void 0===n?void 0:n.find(function(t){return["Fill","Line"].includes(t.kind)||e.includes(t.kind)}))&&(!r.filter||(0,c.Cx)(t,r.filter))})},pointToLayer:function(t,n){var e,o=null==t||null===(e=t.geometry)||void 0===e?void 0:e.type,a=k[o]||[],l=f.filter(function(r){var n;return(null==r||null===(n=r.symbolizers)||void 0===n?void 0:n.find(function(t){return a.includes(t.kind)}))&&(!r.filter||(0,c.Cx)(t,r.filter))})||{},s=u()(l.map(function(t){return t.symbolizers.filter(function(t){var r=t.kind;return a.includes(r)})}));s.forEach(function(e,o){if(o>0){var a=r({symbolizer:e,latlng:n,feature:t});i._msAdditionalLayers.push(a),i.addLayer(a)}});var d=s[0];return r({symbolizer:d,latlng:n,feature:t})},style:function(t){var e,a,l;if("Point"===(null==t||null===(e=t.geometry)||void 0===e?void 0:e.type))return null;var s=null==t||null===(a=t.geometry)||void 0===a?void 0:a.type,d=k[s]||[],y=f.filter(function(r){return!r.filter||(0,c.Cx)(t,r.filter)})||{};(["LineString","MultiLineString","Polygon","MultiPolygon"].includes(s)?u()(y.map(function(t){return t.symbolizers.filter(function(t){var r=t.kind;return["Mark","Icon","Text"].includes(r)})})):[]).forEach(function(n){var e=(0,c.$k)(n,t),a=w(p({msGeometry:{name:"centerPoint"}},e));if(a){var l=a(t);if(l){var u=o().latLng(l[1],l[0]),s=r({symbolizer:e,latlng:u,feature:t});i._msAdditionalLayers.push(s),i.addLayer(s)}}});var h=y.find(function(t){var r;return null==t||null===(r=t.symbolizers)||void 0===r?void 0:r.find(function(t){return d.includes(t.kind)})})||{},v=(0,c.$k)((null==h||null===(l=h.symbolizers)||void 0===l?void 0:l.find(function(t){return d.includes(t.kind)}))||{},t);if("Line"===v.kind){var m=w(v),g=p(p(p({stroke:!0,fill:!1,color:v.color,opacity:v.opacity*n,weight:v.width},v.dasharray&&{dashArray:v.dasharray.join(" ")}),v.cap&&{lineCap:v.cap}),v.join&&{lineJoin:v.join});if(m&&"LineString"===t.geometry.type){var b=m(t),M=o().geoJSON(p(p({},t),{},{geometry:{type:"LineString",coordinates:b}}));return M.setStyle(g),i._msAdditionalLayers.push(M),i.addLayer(M),{stroke:!1,fill:!1}}return g}if("Fill"===v.kind){var S,P,O=w(v),j=p({fill:!0,stroke:!0,fillColor:v.color,fillOpacity:v.fillOpacity*n,color:v.outlineColor,opacity:(null!==(S=v.outlineOpacity)&&void 0!==S?S:0)*n,weight:null!==(P=v.outlineWidth)&&void 0!==P?P:0},v.outlineDasharray&&{dashArray:v.outlineDasharray.join(" ")});if(O&&"Polygon"===t.geometry.type){var A=O(t),x=o().geoJSON(p(p({},t),{},{geometry:{type:"Polygon",coordinates:A}}));return x.setStyle(j),i._msAdditionalLayers.push(x),i.addLayer(x),{stroke:!1,fill:!1}}}return{stroke:!1,fill:!1}}}})});r(e)}catch(t){n(t)}var i,l,f})}}],r&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}()},323111:(t,r,n)=>{n.d(r,{A:()=>u});var e=n(893279),o=n(145046);function i(t,r,n){if(void 0===n&&(n={}),!0===n.final)return function(t,r){var n=i(r,t);return(n+180)%360}(t,r);var a=(0,o.uG)(t),l=(0,o.uG)(r),u=(0,e.tR)(a[0]),c=(0,e.tR)(l[0]),s=(0,e.tR)(a[1]),f=(0,e.tR)(l[1]),d=Math.sin(c-u)*Math.cos(f),y=Math.cos(s)*Math.sin(f)-Math.sin(s)*Math.cos(f)*Math.cos(c-u);return(0,e.nv)(Math.atan2(d,y))}function a(t,r,n,i){void 0===i&&(i={});var a=(0,o.uG)(t),l=(0,e.tR)(a[0]),u=(0,e.tR)(a[1]),c=(0,e.tR)(n),s=(0,e.Gf)(r,i.units),f=Math.asin(Math.sin(u)*Math.cos(s)+Math.cos(u)*Math.sin(s)*Math.cos(c)),d=l+Math.atan2(Math.sin(c)*Math.sin(s)*Math.cos(u),Math.cos(s)-Math.sin(u)*Math.sin(f)),y=(0,e.nv)(d),h=(0,e.nv)(f);return(0,e.zx)([y,h],i.properties)}var l=n(230669);function u(t,r,n){void 0===n&&(n={});for(var u=(0,o.bg)(t).coordinates,c=0,s=0;s<u.length&&!(r>=c&&s===u.length-1);s++){if(c>=r){var f=r-c;if(f){var d=i(u[s],u[s-1])-180;return a(u[s],f,d,n)}return(0,e.zx)(u[s])}c+=(0,l.A)(u[s],u[s+1],n)}return(0,e.zx)(u[u.length-1])}},230669:(t,r,n)=>{n.d(r,{A:()=>i});var e=n(145046),o=n(893279);const i=function(t,r,n){void 0===n&&(n={});var i=(0,e.uG)(t),a=(0,e.uG)(r),l=(0,o.tR)(a[1]-i[1]),u=(0,o.tR)(a[0]-i[0]),c=(0,o.tR)(i[1]),s=(0,o.tR)(a[1]),f=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(s);return(0,o.cJ)(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}},150802:(t,r,n)=>{n.d(r,{A:()=>i});var e=n(230669),o=n(629987);function i(t,r){return void 0===r&&(r={}),(0,o.OQ)(t,function(t,n){var o=n.geometry.coordinates;return t+(0,e.A)(o[0],o[1],r)},0)}}}]);