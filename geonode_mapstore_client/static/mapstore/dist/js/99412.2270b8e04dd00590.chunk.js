/*! For license information please see 99412.2270b8e04dd00590.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[99412],{717140:(e,t,n)=>{n.d(t,{Ij:()=>g,Jb:()=>o,Kf:()=>s,Lu:()=>i,Ly:()=>p,Mm:()=>m,Mr:()=>h,Ne:()=>d,Nu:()=>j,Q4:()=>a,S$:()=>f,V9:()=>r,VX:()=>b,ZM:()=>c,d:()=>O,et:()=>y,jx:()=>E,tq:()=>w,uw:()=>S,vK:()=>v,vw:()=>P});var r="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",c="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",l="DRAW:DRAWING_FEATURES",s="DRAW:SET_SNAPPING_LAYER",d="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",p="DRAW:SET_SNAPPING_CONFIG";function v(e,t,n,r,o){return{type:a,features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}function y(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function m(){return{type:l,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function g(){return{type:c}}function b(e,t,n,o,i,a){return{type:r,status:e,method:t,owner:n,features:o,options:i,style:a}}function h(e,t){return{type:o,geometry:e,owner:t}}function O(e){return{type:i,currentStyle:e}}var w=function(e){return b("clean","",e,[],{})};function E(){return{type:f}}function S(e){return{type:s,snappingLayer:e}}function P(){return{type:d}}function j(e,t,n){return{type:p,value:e,prop:t,pluginCfg:n}}},762686:(e,t,n)=>{n.d(t,{$m:()=>Ge,$r:()=>ze,$w:()=>be,BN:()=>Ve,Bg:()=>u,Bp:()=>$e,DK:()=>z,Dv:()=>H,Ek:()=>xe,FN:()=>B,Fc:()=>r,Fu:()=>te,GW:()=>me,HS:()=>p,Hu:()=>S,IR:()=>s,Iv:()=>qe,J6:()=>Q,J7:()=>pe,JM:()=>ke,JV:()=>I,Jq:()=>O,K0:()=>Me,L4:()=>m,Lw:()=>a,M3:()=>q,MI:()=>x,MW:()=>Le,N7:()=>le,Nq:()=>Ce,Ol:()=>je,PO:()=>E,Pn:()=>F,Pp:()=>Ze,Q4:()=>T,RM:()=>Ye,S8:()=>He,Sm:()=>w,Tw:()=>Ie,UT:()=>ne,V$:()=>M,V_:()=>o,Wm:()=>ae,X_:()=>ce,Xj:()=>_e,Y3:()=>C,YL:()=>h,Z9:()=>c,Zm:()=>Re,_9:()=>Ee,_w:()=>Pe,aA:()=>ue,bS:()=>j,bU:()=>Se,bx:()=>U,cU:()=>ie,di:()=>he,dv:()=>Fe,en:()=>L,et:()=>W,fJ:()=>A,fX:()=>v,fk:()=>Ae,fr:()=>We,g$:()=>b,gi:()=>ee,gm:()=>Te,h$:()=>X,hD:()=>y,hN:()=>J,hS:()=>d,hu:()=>K,iB:()=>Ke,il:()=>ye,j6:()=>V,k7:()=>l,kH:()=>i,k_:()=>f,ke:()=>De,kz:()=>re,l0:()=>P,lP:()=>G,ls:()=>ve,mQ:()=>R,mq:()=>Y,o_:()=>g,pm:()=>fe,ri:()=>N,s:()=>se,s2:()=>Z,t7:()=>k,tB:()=>Ue,tw:()=>$,ud:()=>Je,v2:()=>Be,vK:()=>de,wT:()=>we,wr:()=>ge,xp:()=>Ne,y3:()=>oe,yM:()=>D,yd:()=>Oe,z0:()=>_});var r="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",i="FEATUREGRID:DESELECT_FEATURES",a="FEATUREGRID:CLEAR_SELECTION",c="FEATUREGRID:SET_SELECTION_OPTIONS",u="FEATUREGRID:TOGGLE_MODE",l="FEATUREGRID:TOGGLE_FEATURES_SELECTION",s="FEATUREGRID:FEATURES_MODIFIED",d="FEATUREGRID:NEW_FEATURE",f="FEATUREGRID:SAVE_CHANGES",p="FEATUREGRID:SAVING",v="FEATUREGRID:START_EDITING_FEATURE",y="FEATUREGRID:START_DRAWING_FEATURE",m="FEATUREGRID:DELETE_GEOMETRY",g="FEATUREGRID:DELETE_GEOMETRY_FEATURE",b="FEATUREGRID:SAVE_SUCCESS",h="FEATUREGRID:CLEAR_CHANGES",O="FEATUREGRID:SAVE_ERROR",w="FEATUREGRID:DELETE_SELECTED_FEATURES",E="SET_FEATURES",S="FEATUREGRID:SORT_BY",P="FEATUREGRID:SET_LAYER",j="QUERY:UPDATE_FILTER",A="FEATUREGRID:CHANGE_PAGE",T="FEATUREGRID:GEOMETRY_CHANGED",D="DOCK_SIZE_FEATURES",R="FEATUREGRID:TOGGLE_TOOL",I="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",C="ASK_CLOSE_FEATURE_GRID_CONFIRM",F="FEATUREGRID:OPEN_GRID",G="FEATUREGRID:CLOSE_GRID",x="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",_="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",N="FEATUREGRID:SET_PERMISSION",k="FEATUREGRID:DISABLE_TOOLBAR",L="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",M="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",U="FEATUREGRID:ADVANCED_SEARCH",W="FEATUREGRID:ZOOM_ALL",z="FEATUREGRID:INIT_PLUGIN",H="FEATUREGRID:SIZE_CHANGE",V="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",q="FEATUREGRID:UPDATE_EDITORS_OPTIONS",Y="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",Z="FEATUREGRID:SET_SYNC_TOOL",$="FEATUREGRID:SET_VIEWPORT_FILTER",B={EDIT:"EDIT",VIEW:"VIEW"},K="FEATUREGRID:START_SYNC_WMS",J="FEATUREGRID:STOP_SYNC_WMS",Q="STORE_ADVANCED_SEARCH_FILTER",X="LOAD_MORE_FEATURES",ee="FEATUREGRID:QUERY_RESULT",te="FEATUREGRID:SET_TIME_SYNC",ne="FEATUREGRID:SET_PAGINATION";function re(){return{type:V}}function oe(e,t){return{type:ee,features:e,pages:t}}function ie(e){return{type:Q,filterObj:e}}function ae(){return{type:z,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function ce(){return{type:x}}function ue(){return{type:_}}function le(e,t){return{type:o,features:e,append:t}}function se(e){return{type:r,options:e}}function de(e){return{type:T,features:e}}function fe(){return{type:v}}function pe(){return{type:y}}function ve(e){return{type:i,features:e}}function ye(){return{type:m}}function me(e){return{type:g,features:e}}function ge(){return{type:a}}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,n=e.showCheckbox;return{type:c,multiselect:t,showCheckbox:n}}function he(e,t){return{type:S,sortBy:e,sortOrder:t}}function Oe(e,t){return{type:A,page:e,size:t}}function we(e){return{type:P,id:e}}function Ee(e){return{type:j,update:e,append:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}function Se(e,t){return{type:R,tool:e,value:t}}function Pe(e,t,n){return{type:I,name:e,key:t,value:n}}function je(){return{type:u,mode:B.EDIT}}function Ae(){return{type:u,mode:B.VIEW}}function Te(e,t){return{type:s,features:e,updated:t}}function De(e){return{type:d,features:e}}function Re(){return{type:f}}function Ie(){return{type:b}}function Ce(){return{type:w}}function Fe(){return{type:p}}function Ge(){return{type:h}}function xe(){return{type:O}}function _e(){return{type:C}}function Ne(e){return{type:G,closer:e}}function ke(){return{type:F}}function Le(e){return{type:k,disabled:e}}function Me(e){return{type:N,permission:e}}function Ue(){return{type:U}}function We(){return{type:W}}function ze(){return{type:K}}function He(e,t){return{type:H,size:e,dockProps:t}}var Ve=function(e){return{type:X,pages:e}},qe=function(e){return{type:L,activated:e}},Ye=function(e){return{type:M,deactivated:e}},Ze=function(e){return{type:te,value:e}},$e=function(e){return{type:ne,size:e}},Be=function(e){return{type:Y,updateFilterAction:e}},Ke=function(e){return{type:Z,syncWmsFilter:e}},Je=function(e){return{type:$,value:e}}},697950:(e,t,n)=>{n.d(t,{Qy:()=>l,Ty:()=>s});var r=n(273517),o=n.n(r),i=n(368180),a=n(916589),c=n(109054);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}var l=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).overrideWidthProvider;return(0,a.compose)((0,a.defaultProps)({useDefaultWidthProvider:!e}),function(e){return function(t){return o().createElement(i.A,{handleWidth:!0},function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).width;return o().createElement(e,u({width:n},t))})}})},s=function(e){return(0,a.compose)((0,a.withStateHandlers)(function(){return{}},{onResize:function(){return function(e){return{height:e.height}}}}),(0,c.A)(e))}},639996:(e,t,n)=>{n.d(t,{A:()=>I});var r=n(273517),o=n.n(r),i=n(916589),a=n(907309),c=n.n(a),u=n(473916),l=n.n(u),s=n(566816),d=n(858156),f=n.n(d),p=n(400912),v=n.n(p);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,t,n){return(t=function(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){return f()(v()(e,function(e){return e.color}),"color")};const O=(0,i.withProps)(function(e){var t=e.groups,n=e.showGroupColor,r=e.headerStyle,o=void 0===r?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:r;return{headerStyle:n&&t&&h(t)?g(g({},o),{},{borderTop:"3px solid ".concat(h(t))}):o}});function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}n(850890);var E=["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgetOpts","widgets","layouts","dependencies","compactType","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","currentLocale","env"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(null,arguments)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){A(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e,t,n){return(t=function(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=(0,i.branch)(function(e){var t=e.useDefaultWidthProvider;return void 0===t||t},s.WidthProvider)(s.Responsive),D=O(n(745523).A),R=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(t){return c()(t.widgets,function(t){return t===e.id})})};const I=(0,i.pure)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.style,r=e.className,i=void 0===r?"":r,a=e.toolsOptions,u=void 0===a?{}:a,s=e.rowHeight,d=void 0===s?150:s,f=e.breakpoints,p=void 0===f?{lg:1200,md:996,sm:768,xs:480,xxs:0}:f,v=e.cols,y=void 0===v?{lg:6,md:6,sm:4,xs:2,xxs:1}:v,m=e.widgetOpts,g=void 0===m?{}:m,b=e.widgets,h=void 0===b?[]:b,O=e.layouts,w=e.dependencies,P=e.compactType,A=void 0===P?null:P,I=e.compactMode,C=e.useDefaultWidthProvider,F=void 0===C||C,G=e.measureBeforeMount,x=e.width,_=e.showGroupColor,N=e.groups,k=void 0===N?[]:N,L=e.canEdit,M=void 0===L||L,U=e.getWidgetClass,W=void 0===U?function(){}:U,z=e.onWidgetClick,H=void 0===z?function(){}:z,V=e.updateWidgetProperty,q=void 0===V?function(){}:V,Y=e.deleteWidget,Z=void 0===Y?function(){}:Y,$=e.toggleCollapse,B=void 0===$?function(){}:$,K=e.toggleMaximize,J=void 0===K?function(){}:K,Q=e.editWidget,X=void 0===Q?function(){}:Q,ee=e.onLayoutChange,te=void 0===ee?function(){}:ee,ne=e.language,re=e.currentLocale,oe=e.env,ie=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,E),ae=h.filter(function(e){var t=e.mapSync,n=e.dependenciesMap;return t&&n}).map(function(e){return e.dependenciesMap}),ce=function(e){return"table"===e.widgetType&&ae.filter(function(t){return Object.keys(t).filter(function(n){return t[n]&&-1!==t[n].indexOf(e.id)}).length>0}).length>0};return o().createElement(T,{key:t||"widgets-view",useDefaultWidthProvider:F,measureBeforeMount:G,width:F?void 0:x,isResizable:M,isDraggable:M,draggableHandle:".draggableHandle",onLayoutChange:te,preventCollision:!0,style:n,className:"widget-container ".concat(i," ").concat(M?"":"no-drag"),rowHeight:d,autoSize:!0,compactType:A,compactMode:I,breakpoints:p,cols:y,layouts:O?JSON.parse(JSON.stringify(l()(O,function(e){return e.map(function(e){var t=c()(h,{id:e.i});return t?j(j({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e})}))):void 0},h.map(function(e){return o().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return H(e)},className:W(e)},o().createElement(D,S({"data-grid":e.dataGrid},ie,e,{widgets:h,widgetOpts:g,quickFilters:ce(e)?e.quickFilters:void 0,toolsOptions:u,groups:R(k,e),showGroupColor:_,dependencies:w,enableColumnFilters:ce(e),canEdit:M,updateProperty:function(){return q.apply(void 0,arguments)},toggleCollapse:function(){return B(e)},toggleMaximize:function(){return J(e)},onDelete:function(){return Z(e)},onEdit:function(){return X(e)},language:ne,currentLocale:re,env:oe})))}))})},745523:(e,t,n)=>{n.d(t,{A:()=>Dn});var r=n(273517),o=n.n(r),i=n(916589),a=n(540285),c=n(332222),u=n(397619);const l=(0,i.compose)(c.A,(0,u.jZ)(),(0,u.o$)(),(0,u.rk)());var s=n(858156),d=n.n(s),f=n(811668),p=n(738221),v=n.n(p),y=n(382378),m=n.n(y),g=n(672975),b=n(273494),h=n(883832),O=n(115263),w=n(181817);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function S(){var e=R(),t=e.m(S),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function r(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}var o={throw:1,return:2,break:3,continue:3};function i(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,o[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,P(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(S=function(){return{wrap:function(t,n,r,o){return e.w(i(t),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new C(e,t)},AsyncIterator:D,async:function(e,t,n,o,a){return(r(t)?T:A)(i(e),t,n,o,a)},keys:j,values:P}})()}function P(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(E(e)+" is not iterable")}function j(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function A(e,t,n,r,o){var i=T(e,t,n,r,o);return i.next().then(function(e){return e.done?e.value:i.next()})}function T(e,t,n,r,o){return new D(R().w(e,t,n,r),o||Promise)}function D(e,t){function n(r,o,i,a){try{var c=e[r](o),u=c.value;return u instanceof C?t.resolve(u.v).then(function(e){n("next",e,i,a)},function(e){n("throw",e,i,a)}):t.resolve(u).then(function(e){c.value=e,i(c)},function(e){return n("throw",e,i,a)})}catch(e){a(e)}}var r;this.next||(I(D.prototype),I(D.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),I(this,"_invoke",function(e,o,i){function a(){return new t(function(t,r){n(e,i,t,r)})}return r=r?r.then(a,a):a()},!0)}function R(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return I(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,c=0,u=e,f.n=n,a}};function p(n,r){for(c=n,u=r,t=0;!d&&l&&!o&&t<s.length;t++){var o,i=s[t],p=f.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,f.v=r,f.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,f.n=v,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,v),c=s,u=v;(t=c<2?e:u)||!d;){i||(c?c<3?(c>1&&(f.n=-1),p(c,u)):f.n=u:f.v=u);try{if(l=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==a)break}catch(t){i=e,c=1,u=t}finally{l=1}}return{value:t,done:d}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(I(t={},r,function(){return this}),t),d=l.prototype=c.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,I(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return u.prototype=l,I(d,"constructor",l),I(l,"constructor",u),u.displayName="GeneratorFunction",I(l,o,"GeneratorFunction"),I(d),I(d,o,"Generator"),I(d,r,function(){return this}),I(d,"toString",function(){return"[object Generator]"}),(R=function(){return{w:i,m:f}})()}function I(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}I=function(e,t,n,r){function i(t,n){I(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},I(e,t,n,r)}function C(e,t){this.v=e,this.k=t}function F(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e,t,n){return(t=function(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N=(0,i.compose)((0,i.compose)((0,f.connect)(null,function(e,t){var n,r=(null==t?void 0:t.enableZoomInTblWidget)&&"table"===(null==t?void 0:t.widgetType)&&(null==t?void 0:t.isDashboardOpened),i=(null==t||null===(n=t.widgets)||void 0===n?void 0:n.filter(function(e){var n;return"map"===e.widgetType&&(null==e?void 0:e.dependenciesMap)&&(null==e||null===(n=e.dependenciesMap)||void 0===n||null===(n=n.mapSync)||void 0===n?void 0:n.includes(t.id))&&e.mapSync}))||[],a=(null==t?void 0:t.mapSync)||i.length,c="table"===(null==t?void 0:t.widgetType)&&!r&&(null==t?void 0:t.enableZoomInTblWidget);return{gridTools:a&&r||c?O.qq.map(function(n){return x(x({},n),{},{events:{onClick:(i=S().mark(function n(o,i,a){var c,u,l,s,d,f,p,v=arguments;return S().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u=(c=v.length>3&&void 0!==v[3]?v[3]:{}).crs,l=c.maxZoom,null==t||!t.recordZoomLoading){n.next=3;break}return n.abrupt("return");case 3:if(n.prev=3,null!=o&&o.bbox){n.next=16;break}return null==t||t.updateProperty(t.id,"dependencies.zoomLoader",!0),n.next=8,(0,w.x$)(null==t||null===(s=t.layer)||void 0===s||null===(s=s.search)||void 0===s?void 0:s.url,null==t||null===(d=t.layer)||void 0===d?void 0:d.name,{outputFormat:"application/json",srsname:"EPSG:4326",featureId:o.id,propertyName:(null==t?void 0:t.geomProp)||"the_geom"});case 8:f=n.sent,p=f.data,o.geometry=null==p?void 0:p.features[0].geometry,o.bbox=m()(null==p?void 0:p.features[0]),r?null==t||t.updateProperty(t.id,"dependencies.extentObj",{extent:o.bbox,crs:u||"EPSG:4326",maxZoom:l}):e((0,b.jc)(o.bbox,u||"EPSG:4326",l)),null==t||t.updateProperty(t.id,"dependencies.zoomLoader",!1),n.next=17;break;case 16:r?null==t||t.updateProperty(t.id,"dependencies.extentObj",{extent:o.bbox,crs:u||"EPSG:4326",maxZoom:l}):e((0,b.jc)(o.bbox,u||"EPSG:4326",l));case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(3),e((0,h.z3)({title:"notification.warning",message:"notification.errorLoadingGF",action:{label:"notification.warning"},autoDismiss:3,position:"tc"})),null==t||t.updateProperty(t.id,"dependencies.zoomLoader",!1);case 23:case"end":return n.stop()}},n,null,[[3,19]])}),a=function(){var e=this,t=arguments;return new Promise(function(n,r){var o=i.apply(e,t);function a(e){F(o,n,r,a,c,"next",e)}function c(e){F(o,n,r,a,c,"throw",e)}a(void 0)})},function(e,t,n){return a.apply(this,arguments)})},formatter:null!=t&&t.recordZoomLoading?o().createElement(o().Fragment,null,o().createElement("span",null,o().createElement(g.A,null))):n.tableWidgetFormatter});var i,a}):[]}})),(0,i.withPropsOnChange)(["gridEvents"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,n=void 0===t?{}:t,r=e.updateProperty,o=void 0===r?function(){}:r,i=e.id,a=v()(function(){return o.apply(void 0,arguments)},500);return{gridEvents:x(x({},n),{},{onAddFilter:function(e){return a(i,"quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,n,r,a,c){return o(i,'options.columnSettings["'.concat(d()(c.filter(function(e){return!e.hide})[e],"name"),'"].width'),t)}})}}),c.A,(0,u.jZ)(),(0,u.o$)(),(0,u.rk)(),(0,i.withPropsOnChange)(["gridEvents"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,n=void 0===t?{}:t,r=e.updateProperty,o=void 0===r?function(){}:r,i=e.id;return{gridEvents:x(x({},n),{},{onGridSort:function(e,t){return o(i,"sortOptions",{sortBy:e,sortOrder:t})}})}}));var k=n(510448);const L=(0,i.compose)(c.A,(0,u.jZ)(),(0,u.qP)(),(0,u.o$)(),(0,u.rk)()),M=(0,i.compose)(c.A,(0,u.jZ)(),(0,u.o$)(),(0,u.rk)());var U=n(738885),W=n(452005),z=n(679859),H=n.n(z),V=n(355364),q=n.n(V),Y=n(214158),Z=n(159686),$=n(45388),B=n.n($),K=n(545567),J=n(112585),Q=n(525859);const X=function(e){return e.switchMap(function(e){var t=e.layer,n=void 0===t?{}:t,r=e.options,o=void 0===r?{}:r,i=e.filter,a=e.onLoad,c=void 0===a?function(){}:a,u=e.onLoadError,l=void 0===u?function(){}:u;return(0,K.Gw)(n,i,{timeout:15e3,params:{propertyName:(0,Q.MI)(o.propertyName),viewParams:o.viewParams}}).map(function(){return{loading:!1,error:void 0}}).do(function(e){return c({features:e.features,pagination:{totalFeatures:e.totalFeatures}})}).catch(function(e){return B().Observable.of({loading:!1,error:e,data:[]}).do(l)})})};var ee=n(549112);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach(function(t){oe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oe(e,t,n){return(t=function(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach(function(t){ue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ue(e,t,n){return(t=function(e){var t=function(e){if("object"!=ie(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(45388);function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach(function(t){fe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fe(e,t,n){return(t=function(e){var t=function(e){if("object"!=le(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n=e,n.filter(function(e){var t=e.layer,n=void 0===t?{}:t,r=e.mapSync,o=e.dependencies,i=e.dependenciesMap,a=e.widgets;return!(r&&(0,ee.zR)(a,i)&&(null==o||!o.viewport))&&n.name}).distinctUntilChanged(function(e,t){var n=e.layer,r=void 0===n?{}:n,o=e.options,i=void 0===o?{}:o,a=e.filter,c=e.sortOptions;return t.layer&&r.name===t.layer.name&&r.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(c,t.sortOptions)}).map(function(e){return re(re({},e),{},{features:[],pages:[],pagination:{}})})).let(r?function(e){return function(t){return t.switchMap(function(t){var n=t.layer,r=void 0===n?{}:n,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,c=void 0===a?5:a,u=t.filter,l=t.options,s=void 0===l?{}:l,d=t.sortOptions,f=t.pages,p=t.features,v=void 0===p?[]:p,y=t.onLoad,m=void 0===y?function(){}:y,g=t.onLoadError,b=void 0===g?function(){}:g;return e.switchMap(function(e,t){var n=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),(0,K.Gw)(r,u,ce(ce({},(0,Q.yJ)(n,f,i)),{},{sortOptions:d,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:(0,Q.MI)(s.propertyName),viewParams:s.viewParams})).do(function(e){return m(ce(ce({},(0,Q.gz)(e,n,{pages:f,features:v},ce(ce({},(0,Q.yJ)(n,f,i)),{},{size:i,maxStoredPages:c}))),{},{pagination:{totalFeatures:e.totalFeatures}}))}).map(function(){return{loading:!1}}).catch(function(e){return B().Observable.of({loading:!1,error:e}).do(b)}).startWith({loading:!0})})})}}(t.withLatestFrom(e.map(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}}),function(e,t){return de({pagesRange:e},t)})):X).startWith({})},ve=function(e){var t,n=(0,i.createEventHandler)(),r=n.handler,o=n.stream;return(t=e,t.distinctUntilChanged(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layer;return(0,J.U7)(e)===(0,J.U7)(t)&&e.loadingError===t.loadingError}).switchMap(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer;return(0,K.sq)({layer:e}).map(function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}}).catch(function(e){return B().Observable.of({loading:!1,error:e})})})).combineLatest(pe(e,o.startWith({startPage:0,endPage:1})),function(e,t){return de(de(de({},e),t),{},{pageEvents:{moreFeatures:r,onPageChange:function(){}}})}).startWith({loading:!0})};const ye=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{pages:e.pages,features:e.features,pagination:e.pagination,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,n=void 0===t?function(){}:t,r=e.onLoad,o=void 0===r?function(){}:r;return function(){n.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)(function(){return{dataStreamFactory:ve}}),Z.A,(0,i.withProps)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:q()(r?(0,Y.Mm)(r).filter(function(e){return!H()((0,Q.MI)(n.propertyName)||[],e.name)}).reduce(function(e,t){return de(de({},e),{},fe({},t.name,{hide:!0}))},{}):{},n.columnSettings||{},i)}}));var me=n(817603),ge=n(367867),be=n(859009),he=n(738805),Oe=n.n(he),we=n(962193),Ee=n.n(we),Se=n(302404),Pe=n.n(Se),je=n(58884),Ae=n(325177),Te=n(264053);var De=n(102685),Re=n(905185),Ie=n(6683);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach(function(t){xe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xe(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Ne=(0,i.compose)((0,i.withPropsOnChange)(["id"],function(e){var t=e.hookRegister,n=void 0===t?null:t,r=e.id;return{hookRegister:(null==n?void 0:n.id)!==r?(0,Ie.sl)(r):n}}),(0,i.compose)((0,i.withPropsOnChange)(function(){var e,t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null===(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).widgets)||void 0===e?void 0:e.find(function(e){var t;return null==e||null===(t=e.dependencies)||void 0===t?void 0:t.extentObj}),o=null===(t=n.widgets)||void 0===t?void 0:t.find(function(e){var t;return null==e||null===(t=e.dependencies)||void 0===t?void 0:t.extentObj});return!Pe()(r,o)&&o},function(e){var t,n,r,o=e.id,i=e.widgets,a=e.updateProperty,c=e.hookRegister,u=null==i?void 0:i.find(function(e){var t;return null==e||null===(t=e.dependencies)||void 0===t?void 0:t.extentObj}),l=null==u||null===(t=u.dependencies)||void 0===t?void 0:t.extentObj,s=o;if(!u)return{};if(null!=u&&u.mapSync){var d,f=null==i?void 0:i.find(function(e){var t;return(null==u||null===(t=u.dependenciesMap)||void 0===t?void 0:t.mapSync.includes(e.id))&&e.id===s});n=null==f||null===(d=f.maps)||void 0===d?void 0:d.find(function(e){return e.mapStateSource===f.id})}if(!n||null==u||!u.mapSync){var p=i.filter(function(e){var t;return"map"===e.widgetType&&(null==e?void 0:e.dependenciesMap)&&(null==e||null===(t=e.dependenciesMap)||void 0===t||null===(t=t.mapSync)||void 0===t?void 0:t.includes(null==u?void 0:u.id))&&e.id===s});n=null!=p&&p.length?function(e){if(Array.isArray(e))return _e(e)}(r=p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():void 0}var v=null==c?void 0:c.getHook("ZOOM_TO_EXTENT_HOOK");return v&&(null==c?void 0:c.id)===o&&n&&(v(l.extent,{crs:l.crs,maxZoom:l.maxZoom}),a(u.id,"dependencies.extentObj",void 0)),{}})),(0,i.branch)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies;return t&&(!Ee()(n.quickFilters)||!Ee()(n.filter))},(0,i.compose)((0,i.withPropsOnChange)(["id"],function(e){var t=e.hookRegister,n=void 0===t?null:t,r=e.id;return{hookRegister:(null==n?void 0:n.id)!==r?(0,Ie.sl)(r):n}}),(0,i.mapPropsStream)(function(e){return e.distinctUntilChanged(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Pe()(e.dependencies.quickFilters,t.dependencies.quickFilters)&&Pe()(e.dependencies.filter,t.dependencies.filter)&&Pe()(e.dependencies.layer,t.dependencies.layer)}).debounceTime(500).switchMap(function(e){var t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.filter,i=e.hookRegister;if(!t||Ee()(r.layer))return $.Observable.of({loading:!1});var a={};r.quickFilters&&(a=Ge(Ge({},a),(0,je.gq)(o,r.quickFilters,r.options))),r.filter&&(a=Ge(Ge({},a),(0,De.mA)([a,r.filter])));var c=r&&r.layer&&r.layer.name;if(!Ee()(a)){a=Ge(Ge({},a),{},{options:Ge(Ge({},a.options||{}),{},{noSchemaLocation:!0})});var u=(0,De.T$)(c,a,"1.1.0");return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,Te.p4)(e,(n=t.wfsGetFeature,(0,Te.Yy)("gs:Bounds",[(0,Ae.XH)("features",(0,Ae.Nj)("text/xml","http://geoserver/wfs","POST",n))],(0,Ae.mk)((0,Ae.Cs)("bounds","application/json")))),{},r)}((0,J.cs)(r.layer),{wfsGetFeature:u}).switchMap(function(e){var t,n,r;if(Oe().parseString(e,{explicitArray:!1},function(e,o){t=o["ows:BoundingBox"],n=t["ows:LowerCorner"].split(" "),r=t["ows:UpperCorner"].split(" ")}),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return $.Observable.of({loading:!1});var o={minx:parseFloat(n[0]),miny:parseFloat(n[1]),maxx:parseFloat(r[0]),maxy:parseFloat(r[1])},a=i.getHook(Ie.jY);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),$.Observable.of({loading:!1})}).startWith({loading:!0}).catch(function(e){return $.Observable.of({error:"error getting bounds from filter",details:e})})}return $.Observable.of({loading:!1})}).combineLatest(e,function(e){var t=e.loading,n=void 0!==t&&t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Re.hZ)("loading",n,r)})}))));var ke=n(907309),Le=n.n(ke),Me=n(504631);function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach(function(t){He(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function He(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ue(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ve=(0,i.compose)((0,i.withPropsOnChange)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.maps,i=void 0===o?[]:o,a=e.selectedMapId,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0;return t!==c.mapSync||!Pe()(r,c.dependencies)||!Pe()(i,c.maps)||u!==c.filter||a!==c.selectedMapId},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.filter,i=void 0===o?{}:o,a=e.maps,c=void 0===a?[]:a,u=e.selectedMapId,l=r&&r.layer&&r.layer.name,s=Le()(c,function(e){return e.mapId===u});if(s){var d=Le()(null==s?void 0:s.layers,{name:l})||{},f={},p={},v=void 0;return t&&!Ee()(d)&&(r.quickFilters&&(f=ze(ze({},f),(0,je.gq)(i,r.quickFilters,r.options))),r.filter&&(f=ze(ze({},f),(0,De.mA)([f,r.filter]))),!Ee()(f)&&(0,De.Io)(f))?(v=(0,De.Io)(f),p=(0,Re.Rd)(!1,ze(ze({},d),{},{params:(0,Me.w)({params:{CQL_FILTER:v}},d&&d.params&&d.params.CQL_FILTER)}),{name:l},s.layers),{maps:(0,Re.Rd)(!1,ze(ze({},s),{},{layers:p}),{mapId:u},c)}):(p=s.layers.map(function(e){return ze(ze({},e),{},{params:ze(ze({},e.params),{},{CQL_FILTER:void 0})})}),{maps:(0,Re.Rd)(!1,ze(ze({},s),{},{layers:p}),{mapId:u},c)})}return{maps:c}})),qe=function(e){return(0,i.withPropsOnChange)(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mapSync,r=t.dependencies,o=void 0===r?{}:r,a=t.selectedMapId,c=arguments.length>1?arguments[1]:void 0,u=c.mapSync,l=c.dependencies,s=c.selectedMapId;return l&&(0,i.shallowEqual)(o[e],l[e])||n===u||a===s},function(t){var n=t.maps,r=void 0===n?[]:n,o=t.mapSync,i=t.dependencies,a=void 0===i?{}:i,c=t.selectedMapId,u=Le()(r,{mapId:c})||{},l=a[e]&&o?(0,Re.hZ)(e,a[e],u):u;return{mapStateSource:"__dependency_system__",maps:r.map(function(e){return e.mapId===l.mapId?l:e}),map:l}})};var Ye=n(8117);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}var $e=["data"];function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach(function(t){Je(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Je(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qe=n(993456),Xe=n(764997),et=n(721930),tt=n(992717),nt=n(962787),rt=(0,Xe.A)()((0,et.A)((0,tt.A)(nt.A)));const ot=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(Qe.A,null,o().createElement(rt,e)))};var it=n(154150),at=n(534332),ct=n(192016),ut=n(32485),lt=n.n(ut),st=n(711030);const dt=function(e){var t,n,i=e.options,a=i.dropdownWidgets.length>1,c=i.dropdownWidgets.length-1,u=i.dropdownWidgets.findIndex(function(e){return e.id===i.activeWidget.id}),l=u===c?0:u+1,s=0===u?c:u-1;return o().createElement("div",{className:"widget-selector"},a?o().createElement(st.A,{className:"previous-widget btn-sm no-border",onPointerDown:function(){return i.setActiveWidget(i.dropdownWidgets[s])}},o().createElement(Ye.e6,{glyph:"arrow-left"})):null,o().createElement(ct.Ay,{openOnFocus:!0,clearable:!1,searchable:!1,value:{id:i.activeWidget.id,label:null!==(t=i.activeWidget.title)&&void 0!==t?t:null===(n=i.activeWidget)||void 0===n||null===(n=n.layer)||void 0===n?void 0:n.title},onChange:function(e){return i.setActiveWidget(i.dropdownWidgets.find(function(t){return t.id===e.value}))},options:(0,r.useMemo)(function(){return i.dropdownWidgets.map(function(e){var t,n;return{value:e.id,label:null!==(t=e.title)&&void 0!==t?t:null==e||null===(n=e.layer)||void 0===n?void 0:n.title,active:e.id===i.activeWidget.id}})},[i.dropdownWidgets]),optionComponent:function(e){var t=e.option,n=e.onSelect;return o().createElement("div",{className:lt()({"Select-option":!0,"is-focused":t.active}),onPointerDown:function(e){return n(t,e)}},t.label)}}),a?o().createElement(st.A,{className:"next-widget btn-sm no-border",onPointerDown:function(){return i.setActiveWidget(i.dropdownWidgets[l])}},o().createElement(Ye.e6,{glyph:"arrow-right"})):null)},ft=function(e){var t=e.id,n=e.title,r=e.confirmDelete,i=void 0!==r&&r,a=e.className,c=e.isDraggable,u=void 0===c||c,l=e.toggleDeleteConfirm,s=void 0===l?function(){}:l,d=e.onDelete,f=void 0===d?function(){}:d,p=e.icons,v=e.topLeftItems,y=e.topRightItems,m=e.headerStyle,g=void 0===m?{}:m,b=e.options,h=void 0===b?{}:b,O=e.children;return o().createElement("div",{className:"mapstore-widget-card ".concat(h.singleWidget?"single-widget":""),id:t},o().createElement(it.A,{className:a,header:o().createElement("div",{style:g,className:"mapstore-widget-info ".concat(u?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},p),v,h.singleWidget?o().createElement(dt,{options:h}):o().createElement("span",{className:"widget-title"},n),o().createElement("span",{className:"mapstore-widget-options"},y)))},O),i?o().createElement(at.A,{confirmId:"widgets.widget.menu.delete",titleId:"widgets.widget.menu.confirmDelete",show:i,preventHide:!0,variant:"danger",onCancel:function(){return s(!1)},onConfirm:function(){return f(t)}}):null)};var pt=n(164045),vt=n(551783),yt=n(8571);function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}var gt=["charts","onChange","value","disabled","className","editorData","setSelectedChart","selectedChart","withContainer","featureTypeProperties","width"];function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach(function(t){Ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ot(e,t,n){return(t=function(e){var t=function(e){if("object"!=mt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var St=(0,vt.A)(["noResultsText"])(ct.Ay),Pt=(0,vt.A)("placeholder")(Ye.MJ),jt=(0,pt.A)(st.A);const At=function(e){var t,n=e.charts,i=void 0===n?[]:n,a=e.onChange,c=void 0===a?function(){}:a,u=e.value,l=void 0===u?"":u,s=e.disabled,f=void 0!==s&&s,p=e.className,v=void 0===p?"":p,y=e.editorData,m=void 0===y?{}:y,g=e.setSelectedChart,b=void 0===g?function(){}:g,h=e.selectedChart,O=e.withContainer,w=void 0!==O&&O,E=(e.featureTypeProperties,e.width),S=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,gt),P=wt((0,r.useState)(!1),2),j=P[0],A=P[1],T=wt((0,r.useState)(null==h?void 0:h.name),2),D=T[0],R=T[1],I=function(e){var t,n;if(1===e.length)return null;if(!w&&E<=410)return o().createElement(jt,{tooltipId:"widgets.chartSwitcher.infoOnHide",className:"square-button-md no-border",key:"info-sign"},o().createElement(Ye.e6,{glyph:"info-sign"}));var r=null!=D?D:null==e||null===(t=e.find(function(e){return e.chartId===l}))||void 0===t?void 0:t.name;return o().createElement("div",{className:"chart-fields"},j?o().createElement(Pt,{type:"text",placeholder:"widgets.chartSwitcher.placeholder",style:{textOverflow:"ellipsis"},value:r,onChange:function(e){return R(e.target.value)}}):o().createElement(St,{className:v,disabled:f,noResultsText:"widgets.chartSwitcher.noResults",options:Ee()(e)?[]:e.map(function(e,t){return{label:(null==e?void 0:e.name)||"[Chart ".concat(t+1,"]"),value:e.chartId}}),onChange:function(e){e.value&&(c("selectedChartId",e.value),R(null))},value:l||(null==e||null===(n=e[0])||void 0===n?void 0:n.chartId),clearable:!1}),w&&o().createElement(jt,{bsStyle:"primary",disabled:j&&Ee()(r),onClick:function(){j?(D&&c("charts[".concat(null==h?void 0:h.chartId,"].name"),D),A(!1)):A(!0)}},o().createElement(Ye.e6,{glyph:j?"ok":"pencil"})))};return w?((0,r.useEffect)(function(){if(!Ee()(null==m?void 0:m.charts)&&w){var e,t=d()(m,"charts[0]",{});Ee()(m.selectedChartId)?c("selectedChartId",t.chartId):t=null===(e=m.charts)||void 0===e?void 0:e.find(function(e){return e.chartId===m.selectedChartId}),b(ht(ht({},h),t))}},[m.charts,m.selectedChartId,w,b,c]),o().createElement(o().Fragment,null,(null==m||null===(t=m.charts)||void 0===t?void 0:t.length)>1?o().createElement("div",{className:"chart-switcher"},o().createElement("strong",null,o().createElement(yt.A,{msgId:"widgets.chartSwitcher.selectLabel"})),I(m.charts)):null,w&&S.children?o().Children.map(S.children,function(e,t){return o().cloneElement(e,ht({key:"chart-component-".concat(t)},S))}):null)):I(i)};var Tt=["id","title","description","headerStyle","data","charts","selectedChartId","traces","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm","updateProperty","selectionActive"];function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dt.apply(null,arguments)}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var It=(0,Xe.A)()((0,tt.A)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?[]:t,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,$e),i=n[0],a=Object.keys(i.reduce(function(e,t){return Ke(Ke({},e),t)},{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(Ye.XI,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,a.map(function(e,t){return o().createElement("th",null,t+1===a.length&&r.yAxisLabel?r.yAxisLabel:t>0?"".concat(e):e)}))),o().createElement("tbody",null,i.map(function(e){return o().createElement("tr",null,a.map(function(t){return o().createElement("td",null,e[t])}))}))))})),Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?o().createElement(Ye.e6,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null};var Ft=n(563864),Gt=n(230454),xt=(0,Ft.A)(function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text},function(){return{glyph:"sheet",messageId:"widgets.errors.notext"}},Gt.A)(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:e}})}),_t=n(590179),Nt=n.n(_t),kt=n(138629),Lt=n(743445);function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}var Ut=["layers"];function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach(function(t){Ht(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ht(e,t,n){return(t=function(e){var t=function(e){if("object"!=Mt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var qt=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,n=void 0===t?function(){}:t,r=e.id;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ut);return n(r,"maps",t,"merge")}}})(kt.A),Yt=n(742466);function Zt(e){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach(function(t){Kt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kt(e,t,n){return(t=function(e){var t=function(e){if("object"!=Zt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jt=(0,i.compose)((0,i.mapPropsStream)(function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap(function(e){return e}).startWith(void 0),function(e,t){var n,r=t&&e.options&&Le()((0,Q.MI)(null===(n=e.options)||void 0===n?void 0:n.propertyName),function(t){return t===e.attributeName})&&t[e.attributeName]||{},o=r&&(r.rawValue||r.value);return Bt(Bt({},e),{},{value:o})})})),Qt=(0,i.compose)((0,i.mapPropsStream)(function(e){return e.map(function(t){return Bt(Bt({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})})})),Xt=(0,i.compose)(Qt,(0,i.withPropsOnChange)(["layer","describeFeatureType","options"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=void 0===t?{}:t,r=e.describeFeatureType,o=e.options,a=e.quickFilterStream$,c=(null==n?void 0:n.fields)||[];return r?{filterRenderers:(0,Q.CG)(r).reduce(function(e,t){var n=t.localType,r=t.name,u=function(e){var t,n,r=e.field,o=void 0===r?{}:r,a=e.options,c=e.localType,u=e.attributeName,l=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:l,attributeName:u,options:a}),Jt)((0,Yt.q5)({name:null===(t=o.filterRenderer)||void 0===t?void 0:t.name,type:c,options:null===(n=o.filterRenderer)||void 0===n?void 0:n.options}))}({field:Le()(c,{name:r}),options:o,localType:n,attributeName:r,quickFilterStream$:a});return Bt(Bt({},e),{},Kt({},r,u))},{})}:{}})),en=n(347018);function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach(function(t){on(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function on(e,t,n){return(t=function(e){var t=function(e){if("object"!=tn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var an=(0,n(432060).A)()((0,r.lazy)(function(){return Promise.all([n.e(81206),n.e(68645),n.e(63809)]).then(n.bind(n,263809))})),cn=(0,et.A)((0,Xe.A)(function(e){return!e.describeFeatureType})(an)),un=["rowHeight","headerRowHeight","headerFiltersHeight"].reduce(function(e,t){return rn(rn({},e),{},on({},t,28))},"");const ln=Xt(function(e){var t=e.id,n=e.title,r=e.loading,i=e.confirmDelete,a=void 0!==i&&i,c=e.enableColumnFilters,u=void 0!==c&&c,l=e.headerStyle,s=e.icons,d=e.topRightItems,f=e.toggleDeleteConfirm,p=void 0===f?function(){}:f,v=e.onDelete,y=void 0===v?function(){}:v,m=e.gridEvents,b=void 0===m?function(){}:m,h=e.pageEvents,O=void 0===h?{moreFeatures:function(){}}:h,w=e.describeFeatureType,E=e.filterRenderers,S=e.columnSettings,P=e.features,j=e.layer,A=e.size,T=e.pages,D=e.error,R=e.pagination,I=void 0===R?{}:R,C=e.dataGrid,F=void 0===C?{}:C,G=e.virtualScroll,x=void 0===G||G,_=e.gridOpts,N=void 0===_?un:_,k=e.options,L=void 0===k?{}:k,M=e.dateFormats,U=e.gridTools;return o().createElement(ft,{id:"widget-chart-".concat(t),title:n,headerStyle:l,icons:s,isDraggable:F.isDraggable,confirmDelete:a,onDelete:y,toggleDeleteConfirm:p,topRightItems:d,options:L},o().createElement(it.A,{footer:I.totalFeatures?o().createElement("div",{className:"widget-footer"},r?o().createElement("span",{style:{float:"right"}},o().createElement(g.A,null)):null,void 0===D&&o().createElement("span",{className:"result-info"},o().createElement(yt.A,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:I.totalFeatures}}))):null},o().createElement(cn,{emptyRowsView:function(){return o().createElement(en.A,{loading:r},o().createElement(Gt.A,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"}))},gridEvents:b,sortable:!0,defaultSize:!1,columnSettings:S,pageEvents:O,virtualScroll:x,enableColumnFilters:u,filterRenderers:E,fields:null==j?void 0:j.fields,features:P,pages:T,error:D,size:A,rowKey:"id",describeFeatureType:w,pagination:I,gridOpts:N,options:L,tools:U,dateFormats:M})))});var sn=n(577103),dn=["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"];function fn(){return fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fn.apply(null,arguments)}var pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?o().createElement(Ye.e6,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null},vn=n(537336),yn=n(193670),mn=["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"],gn=(0,vn.A)()(yn.A),bn=n(102179),hn=(0,i.compose)(a.p,be.A,me.A,ge.A,U.Ay,a.A,bn.A)(function(e){var t,n,r=e.id,i=e.title,a=e.description,c=e.headerStyle,u=e.data,l=void 0===u?[]:u,s=e.charts,d=void 0===s?[]:s,f=e.selectedChartId,p=e.traces,v=void 0===p?[]:p,y=e.loading,m=e.icons,g=e.showTable,b=e.topRightItems,h=e.confirmDelete,O=void 0!==h&&h,w=e.dataGrid,E=void 0===w?{}:w,S=e.onDelete,P=void 0===S?function(){}:S,j=e.toggleTableView,A=void 0===j?function(){}:j,T=e.toggleDeleteConfirm,D=void 0===T?function(){}:T,R=e.updateProperty,I=void 0===R?function(){}:R,C=e.selectionActive,F=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Tt),G="widget-chart-".concat(r),x=null===(t=document.getElementById(G))||void 0===t?void 0:t.clientWidth;return o().createElement(ft,{className:"chart-widget-view",id:G,headerStyle:c,isDraggable:E.isDraggable,title:i,icons:m,topLeftItems:Ct({loading:y,title:i,description:a,showTable:g,toggleTableView:A}),confirmDelete:O,onDelete:P,toggleDeleteConfirm:D,topRightItems:[o().createElement(At,{className:"chart-switcher",charts:d,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return I.apply(void 0,[r].concat(t))},value:f,disabled:C,width:x})].concat((n=b||[],function(e){if(Array.isArray(e))return Rt(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),options:null==F?void 0:F.options},g?o().createElement(It,Dt({data:l},F)):o().createElement(ot,Dt({id:r,isAnimationActive:!y,loading:y,data:l,traces:v,iconFit:!0},F)))}),On=(0,i.compose)(L)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,r=e.icons,i=e.topLeftItems,a=e.id,c=e.title,u=e.text,l=e.headerStyle,s=e.topRightItems,d=e.options,f=void 0===d?{}:d,p=e.dataGrid,v=void 0===p?{}:p,y=e.confirmDelete,m=void 0!==y&&y,g=e.onDelete,b=void 0===g?function(){}:g;return o().createElement(ft,{id:"widget-text-".concat(a),title:c,confirmDelete:m,onDelete:b,toggleDeleteConfirm:n,headerStyle:l,isDraggable:v.isDraggable,icons:r,topLeftItems:i,topRightItems:s,options:f},o().createElement(xt,{text:u}))}),wn=(0,i.compose)(be.A,Ve,qe("center"),qe("zoom"),Ne,M)(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.updateProperty,r=void 0===n?function(){}:n,i=t.toggleDeleteConfirm,a=void 0===i?function(){}:i,c=t.id,u=t.title,l=t.map,s=void 0===l?{}:l,d=t.maps,f=void 0===d?[]:d,p=t.selectedMapId,v=t.icons,y=t.hookRegister,m=t.mapStateSource,b=t.topRightItems,h=t.options,O=void 0===h?{}:h,w=t.confirmDelete,E=void 0!==w&&w,S=t.loading,P=void 0!==S&&S,j=t.dataGrid,A=void 0===j?{}:j,T=t.onDelete,D=void 0===T?function(){}:T,R=t.headerStyle,I=t.env,C=t.selectionActive,F=s.size,G=void 0===F?{}:F,x=G.height,_=G.width,N=s.mapInfoControl,k=x>400&&_>400&&N;return o().createElement(ft,{className:"map-widget-view",id:"widget-text-".concat(c),title:u,confirmDelete:E,onDelete:D,toggleDeleteConfirm:a,headerStyle:R,icons:v,topRightItems:[o().createElement(Lt.A,{className:"map-switcher",maps:f,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(void 0,[c].concat(t))},value:p,disabled:C})].concat((e=b,function(e){if(Array.isArray(e))return Vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Vt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),isDraggable:A.isDraggable,options:O},o().createElement(it.A,{footer:P?o().createElement("div",{className:"widget-footer"},o().createElement("span",{style:{float:"right"}},o().createElement(g.A,null))):null},o().createElement(qt,{tools:k?["popup"]:[],updateProperty:r,id:c,map:zt({},Nt()(s,"mapStateSource")),mapStateSource:m,hookRegister:y,layers:(0,J.UA)(s.layers,s.groups),options:{style:{margin:"0 10px 10px 10px",height:"calc(100% - 10px)"}},env:I})))}),En=(0,i.compose)(be.A,ge.A,me.A,ye,N)(ln),Sn=(0,i.compose)(be.A,me.A,ge.A,W.A,l)(function(e){var t=e.id,n=e.title,r=e.description,i=e.data,a=void 0===i?[]:i,c=e.series,u=void 0===c?[]:c,l=e.loading,s=e.showTable,d=e.confirmDelete,f=void 0!==d&&d,p=e.headerStyle,v=e.icons,y=e.topRightItems,m=e.dataGrid,g=void 0===m?{}:m,b=e.toggleTableView,h=void 0===b?function(){}:b,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,E=e.onDelete,S=void 0===E?function(){}:E,P=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,dn);return o().createElement(ft,{className:"counter-widget",id:"widget-chart-".concat(t),title:n,isDraggable:g.isDraggable,icons:v,topLeftItems:pn({loading:l,title:n,description:r,showTable:s,toggleTableView:h}),confirmDelete:f,onDelete:S,toggleDeleteConfirm:w,headerStyle:p,topRightItems:y,options:null==P?void 0:P.options},o().createElement(sn.A,fn({id:t,isAnimationActive:!l,loading:l,data:a,series:u,iconFit:!0},P)))}),Pn=(0,i.compose)(be.A,k.A)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,r=e.id,i=e.title,a=e.icons,c=e.headerStyle,u=e.confirmDelete,l=void 0!==u&&u,s=e.topRightItems,d=e.dataGrid,f=void 0===d?{}:d,p=e.onDelete,v=void 0===p?function(){}:p,y=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,mn);return o().createElement(ft,{id:"widget-text-".concat(r),title:i,confirmDelete:l,onDelete:v,toggleDeleteConfirm:n,headerStyle:c,icons:a,topRightItems:s,isDraggable:f.isDraggable,options:null==y?void 0:y.options},o().createElement(gn,y))}),jn=["items","dependencies","toggleCollapse","exportCSV","onDelete","onEdit"];function An(){return An=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},An.apply(null,arguments)}var Tn=function(e){var t;return null==e||null===(t=e.widgetOpts)||void 0===t?void 0:t[e.widgetType]};const Dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,n=e.dependencies,r=e.toggleCollapse,i=void 0===r?function(){}:r,a=e.exportCSV,c=void 0===a?function(){}:a,u=e.onDelete,l=void 0===u?function(){}:u,s=e.onEdit,d=void 0===s?function(){}:s,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,jn);return"text"===f.widgetType?o().createElement(On,An({},f,{toggleCollapse:i,onDelete:l,onEdit:d})):"table"===f.widgetType?o().createElement(En,An({},f,Tn(f),{toggleCollapse:i,exportCSV:c,dependencies:n,onDelete:l,onEdit:d,items:t})):"counter"===f.widgetType?o().createElement(Sn,An({},f,Tn(f),{toggleCollapse:i,dependencies:n,onDelete:l,onEdit:d})):"map"===f.widgetType?o().createElement(wn,An({},f,Tn(f),{toggleCollapse:i,dependencies:n,onDelete:l,onEdit:d,items:t})):"legend"===f.widgetType?o().createElement(Pn,An({},f,Tn(f),{toggleCollapse:i,dependencies:n,onDelete:l,onEdit:d})):o().createElement(hn,An({},f,Tn(f),{toggleCollapse:i,exportCSV:c,dependencies:n,onDelete:l,onEdit:d}))}},779956:(e,t,n)=>{n.d(t,{Ay:()=>H});var r=n(45388),o=n.n(r),i=n(2296),a=n.n(i),c=n(761448),u=n.n(c),l=n(858156),s=n.n(l),d=n(679859),f=n.n(d),p=n(302404),v=n.n(p),y=n(590179),m=n.n(y),g=n(142194),b=n.n(g),h=n(71665),O=n(223062),w=n(538704),E=n(415392),S=n(130711),P=n(737704),j=n(904059),A=n(307679),T=n(24812),D=n(589769),R=n(985564),I=n(980971),C=n(791936),F=n(764932),G=n(77645),x=n(6683),_=n(549112);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function k(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){W(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(e,t,n){return(t=function(e){var t=function(e){if("object"!=N(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e,t,n){return o().Observable.of((0,h.zd)("mapSync",e),(0,h.zd)("dependenciesMap",function(e,t,n){var r=n.dependenciesMap,o=n.mappings,i=["layer","filter","quickFilters","options"],c=["layers","groups","viewport","zoom","center"],u=["dimension.currentTime","dimension.offsetTime"],l=(h.Yi.exec(t)||[])[1],s=b()(r,function(e){return-1===e.indexOf(l)}),d=t.split(".maps")[0],p=Object.keys(o).filter(function(e){return void 0!==o[e]}).reduce(function(e,n){return f()(u,n)?U(U({},e),{},W({},n,"dimension.".concat(o[n]))):!a()(t,"map")&&f()(i,n)?U(U({},e),{},W({},n,"".concat(t,".").concat(o[n]))):a()(t,"map")?f()(c,n)?U(U({},e),{},W({},n,"map"===t?o[n]:"".concat(t.replace(/.map$/,""),".").concat(o[n]))):U(U({},e),{},W({},n,"".concat(d,".").concat(o[n]))):e},{});return e?U(U(U({},s),p),{},W(W({},"dependenciesMap","".concat(d,".dependenciesMap")),"mapSync","".concat(d,".mapSync"))):m()(s,[Object.keys(o)])}(e,t,n)))};const H={exportWidgetData:function(e){return e.ofType(h.Ok).do(function(e){var t=e.data,n=void 0===t?[]:t,r=e.title,o=void 0===r?"data":r;return(0,C.saveAs)(new Blob([(0,G.Vu)(n)],{type:"text/csv"}),o+".csv")}).filter(function(){return!1})},alignDependenciesToWidgets:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(w.mO,R.LL,h.i).map(function(){return(0,P.Gw)(n())}).pluck("availableDependencies").distinctUntilChanged(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return v()(k(e),k(t))}).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h.cV)(e.reduce(function(e,t){var n=t.split(".maps")[0],r=t.replace(/.map$/,"");return a()(t,"map")?U(U({},e),{},W(W(W(W(W(W(W(W(W({},"".concat(n,".dependenciesMap"),"".concat(n,".dependenciesMap")),"".concat(n,".mapSync"),"".concat(n,".mapSync")),"map"===t?"viewport":"".concat(r,".viewport"),"".concat(r,".bbox")),"map"===t?"center":"".concat(r,".center"),"".concat(r,".center")),"map"===t?"zoom":"".concat(r,".zoom"),"".concat(r,".zoom")),"map"===t?"layers":"".concat(r,".layers"),"map"===t?"layers.flat":"".concat(r,".layers")),"map"===t?"groups":"".concat(r,".groups"),"map"===t?"layers.groups":"".concat(r,".groups")),"dimension.currentTime","dimension.currentTime"),"dimension.offsetTime","dimension.offsetTime")):U(U({},e),{},W(W(W(W(W(W(W(W({},"".concat(t,".filter"),"".concat(t,".filter")),"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),"".concat(n,".dependenciesMap"),"".concat(n,".dependenciesMap")),"".concat(n,".mapSync"),"".concat(n,".mapSync")),"".concat(t,".layer"),"".concat(t,".layer")),"".concat(t,".options"),"".concat(t,".options")),"dimension.currentTime","dimension.currentTime"),"dimension.offsetTime","dimension.offsetTime"))},{}))})},toggleWidgetConnectFlow:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(h.af).switchMap(function(t){var r=t.active,i=t.availableDependencies,a=void 0===i?[]:i,c=t.options;return r&&a.length>0?1===a.length?z(r,a[0],c):o().Observable.of((0,h.hY)(r,{availableDependencies:a})).merge(e.ofType(h.Zl).filter(function(){return(0,P.Zh)(n())}).switchMap(function(e){var t=e.widget,i=s()((0,P.f$)(n()),"availableDependencies").filter(function(e){return(h.Yi.exec(e)||[])[1]===t.id});return"map"===t.widgetType&&(i=i.filter(function(e){return(h.M9.exec(e)||[])[2]===t.selectedMapId})),z(r,i[0],c).concat(o().Observable.of((0,h.hY)(!1,{})))}).takeUntil(e.ofType(I.LK).merge(e.filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.key;return t===h._&&n===h.Ws})))):z(r,a[0],c)})},clearWidgetsOnLocationChange:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(w.mO).switchMap(function(){var t=(0,T.o)(n()).split("/"),r=t[t.length-1];return e.ofType(I.LK).filter(function(e){var t=e.payload,o=(0,T.o)(n()).split("/"),i=o[o.length-1];return"REPLACE"!==t.action&&i!==r}).switchMap(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).payload,t=void 0===e?{}:e;return t&&t.location&&t.location.pathname?o().Observable.of((0,h.LO)()):o().Observable.empty()})})},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(j.nX,j.rN).filter(function(e){var t=e.layer,n=e.newProperties,r=e.nodeType,o=e.options;return t&&n||"layers"===r&&u()(o,"layerFilter")}).switchMap(function(e){var n=e.layer,r=e.newProperties,i=e.node,a=e.options,c=t.getState(),l=(0,A.pO)(c,null!=n?n:i);return l&&(u()(null!=r?r:a,"layerFilter")||u()(r,"fields"))?o().Observable.of((0,h.Dh)(l)):o().Observable.empty()})},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(j.ZL,j.dX).groupBy(function(e){return e.layerId}).map(function(e){return e.switchMap(function(e){var n,r=e.layerId,i=t.getState(),a=(0,A.pO)(i,r);return(n=o().Observable).of.apply(n,k(a&&a.previousLoadingError!==a.loadingError?[(0,h.Dh)(a)]:[]))})}).mergeAll()},updateDependenciesMapOnMapSwitch:function(e,t){return e.ofType(h.ao).filter(function(e){var t=e.key;return f()(["maps","selectedMapId"],t)}).switchMap(function(e){var n=e.id,r=e.value,i=o().Observable.empty(),a="string"==typeof r?r:null==r?void 0:r.mapId;if(a){var c=(0,P.Qs)(t.getState()),u=(0,_.y1)(c,n,a);v()(c,u)||(i=o().Observable.of((0,h.ID)(u)))}return i})},onWidgetCreationFromMap:function(e,t){return e.ofType(h.Pv).filter(function(e){var n=e.key,r=e.value;return"widgetType"===n&&"chart"===r&&!(0,D.Hd)(t.getState())}).switchMap(function(){var e=o().Observable.empty(),n=t.getState(),r=(0,P.oR)(n);return r&&(e=o().Observable.of((0,h.zd)("chart-layers",[r]))),e})},onOpenFilterEditorEpic:function(e,t){return e.ofType(h.aE).switchMap(function(){var e=t.getState(),n=(0,P.oR)(e),r=(0,x.Yd)((0,F.reprojectBbox)(n.bbox.bounds,"EPSG:4326","EPSG:3857"),_.tu.size,0,21,96,_.tu.resolutions),i=U(U({},_.tu),{},{zoom:r,center:{crs:n.bbox.crs,x:(n.bbox.bounds.maxx+n.bbox.bounds.minx)/2,y:(n.bbox.bounds.maxy+n.bbox.bounds.miny)/2}}),a=null!=n&&n.bbox?i:null;return o().Observable.of((0,O.Ap)(a))})},onResetMapEpic:function(e,t){return e.ofType(E.x7).filter(function(e,n){return!(0,S.sY)(t.getState())&&"queryPanel"===n&&(0,D.Hd)(t.getState())}).switchMap(function(){return o().Observable.of((0,O.Ap)(null))})}}},795153:(e,t,n)=>{n.d(t,{A:()=>G});var r=n(541033),o=n.n(r),i=n(71665),a=n(754364),c=n(538704),u=n(985564),l=n(877731),s=n.n(l),d=n(858156),f=n.n(d),p=n(907309),v=n.n(p),y=n(590179),m=n.n(y),g=n(473916),b=n.n(g),h=n(499084),O=n.n(h),w=n(962193),E=n.n(w),S=n(905185),P=n(549112);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function A(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return(t=function(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{map:null,settings:{step:0}}};const G=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case i.Zz:return s()("defaults",n.cfg,t);case i._:return s()("builder.settings.".concat(n.key),n.value,t);case i.E1:return s()("builder.editor",n.widget,s()("builder.settings",n.settings||F.settings,t));case i.zx:return s()("builder.editor",I(I({},n.widget),{},{widgetType:n.widget&&n.widget.widgetType||"chart"}),s()("builder.settings.step",0,t));case i.Pv:return(0,P.YL)(n,t);case i.i:var r,l,d,p,y=I({},n.widget);"chart"===y.widgetType&&(y=m()(y,["layer","url"]));var g=null!==(r=null==t||null===(l=t.defaults)||void 0===l||null===(l=l.initialSize)||void 0===l?void 0:l.w)&&void 0!==r?r:1,h=null!==(d=null==t||null===(p=t.defaults)||void 0===p||null===(p=p.initialSize)||void 0===p?void 0:p.h)&&void 0!==d?d:1;return(0,S.Vo)("containers[".concat(n.target,"].widgets"),I(I({id:n.id},y),{},{dataGrid:n.id&&{w:g,h,x:0,y:0}}),{id:n.widget.id||n.id},t);case i.dj:var w="containers[".concat(n.target,"].widgets");return f()(t,w)?s()(w,n.widgets,t):t;case i.ao:var j=v()(f()(t,"containers[".concat(n.target,"].widgets")),{id:n.id}),D=n.value;return"merge"===n.mode&&(D="maps"===n.key?j.maps.map(function(e){var t;return e.mapId===(null===(t=n.value)||void 0===t?void 0:t.mapId)?I(I({},e),null==n?void 0:n.value):e}):Object.assign({},j[n.key],n.value)),(0,S.Vo)("containers[".concat(n.target,"].widgets"),s()(n.key,D,j),{id:n.id},t);case i._3:if(n.layer){var R=f()(t,"containers[".concat(i.Kv,"].widgets"));if(R)return s()("containers[".concat(i.Kv,"].widgets"),R.map(function(e){if("chart"===e.widgetType&&null!=e&&e.charts){var t,r=null!=e&&null!==(t=e.charts)&&void 0!==t&&t.length?A(e.charts):[];return r=r.map(function(e){var t,r=I({},e);return r.traces=null==r||null===(t=r.traces)||void 0===t?void 0:t.map(function(e){return f()(e,"layer.id")===n.layer.id?s()("layer",n.layer,e):e}),r}),s()("charts",r,e)}return f()(e,"layer.id")===n.layer.id?s()("layer",n.layer,e):e}),t)}return t;case i.SJ:var C="containers[".concat(i.Kv,"].widgets"),G=(0,S.XB)("containers[".concat(n.target,"].widgets"),{id:n.widget.id},t),x=f()(G,C,[]);return s()(C,x.map(function(e){if(e.dependenciesMap){var t=(r=i.Yi.exec((Object.values(e.dependenciesMap)||[])[0])||[],o=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(r,o)||T(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];if(t&&n.widget.id===t)return I(I({},m()(e,"dependenciesMap")),{},{mapSync:!1})}var r,o;return e}),t);case u.LL:var _=n.data;return s()("containers[".concat(i.Kv,"]"),I({},_),t);case a.if:var N,k,L,M=(null==t||null===(N=t.containers)||void 0===N?void 0:N[i.Kv].widgets)||[];M=null===(k=M)||void 0===k?void 0:k.map(function(e){var t,n=null===(t=e.maps)||void 0===t?void 0:t.map(function(e){var t;return I(I({},e),{},{layers:null===(t=e.layers)||void 0===t?void 0:t.map(function(e){return e.security?I(I({},e),{},{security:I(I({},e.security),{},{rand:o()()})}):e})})});return I(I({},e),{},{maps:n})});var U=null===(L=t.builder)||void 0===L||null===(L=L.editor)||void 0===L||null===(L=L.maps)||void 0===L?void 0:L.map(function(e){return I(I({},e),{},{layers:e.layers.map(function(e){return e.security?I(I({},e),{},{security:I(I({},e.security),{},{rand:o()()})}):e})})});return s()("containers[".concat(i.Kv,"].widgets"),M,s()("builder.editor.maps",U,t));case a.Lv:var W,z,H,V=(null==t||null===(W=t.containers)||void 0===W?void 0:W[i.Kv].widgets)||[];V=null===(z=V)||void 0===z?void 0:z.map(function(e){var t,r=null===(t=e.maps)||void 0===t?void 0:t.map(function(e){return I(I({},e),{},{layers:e.layers.map(function(e){var t;return(null==e||null===(t=e.security)||void 0===t?void 0:t.sourceId)===n.protectedId?I(I({},e),{},{security:void 0}):e})})});return I(I({},e),{},{maps:r})});var q=null===(H=t.builder)||void 0===H||null===(H=H.editor)||void 0===H||null===(H=H.maps)||void 0===H?void 0:H.map(function(e){return I(I({},e),{},{layers:e.layers.map(function(e){var t;return(null==e||null===(t=e.security)||void 0===t?void 0:t.sourceId)===n.protectedId?I(I({},e),{},{security:void 0}):e})})});return s()("containers[".concat(i.Kv,"].widgets"),V,s()("builder.editor.maps",q,t));case c.mO:var Y=(n.config||{}).widgetsConfig;return E()(Y)||(Y=(0,P.Mx)(Y)),s()("containers[".concat(i.Kv,"]"),I({},Y),t);case i.cv:return s()("containers[".concat(n.target,"].layout"),n.layout)(s()("containers[".concat(n.target,"].layouts"),n.allLayouts,t));case i.Y3:case u.Vd:return s()("containers[".concat(i.Kv,"]"),F.containers[i.Kv],t);case i.OO:var Z=n.key,$=n.value;return s()("dependencies[".concat(Z,"]"),$,t);case i.V$:var B=n.key;return s()("dependencies[".concat(B,"]"),null,t);case i.j2:var K=n.dependencies;return s()("dependencies",K,t);case i.Up:return s()("dependencies",F.dependencies,t);case i.D5:var J=n.widget,Q=void 0===J?{}:J;if(Q.dataGrid&&Q.dataGrid.static)return t;var X=f()(t,"containers[".concat(n.target,"].collapsed[").concat(Q.id));if(X){var ee=[].concat(A(f()(t,"containers[".concat(n.target,"].layout"),[])),A(O()(f()(X,"layout",[])))),te=b()(f()(t,"containers[".concat(n.target,"].layouts"),{}),function(){var e=arguments.length>1?arguments[1]:void 0;return[].concat(A(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),A(O()(f()(X,"layouts[".concat(e,"]"),[]))))});return m()((0,S.Zz)(s()("containers[".concat(n.target,"].layout"),ee),s()("containers[".concat(n.target,"].layouts"),te))(t),"containers[".concat(n.target,"].collapsed[").concat(Q.id,"]"))}return s()("containers[".concat(n.target,"].collapsed[").concat(Q.id,"]"),{layout:v()(f()(t,"containers[".concat(n.target,"].layout"),[]),{i:Q.id}),layouts:b()(f()(t,"containers[".concat(n.target,"].layouts"),{}),function(e){return v()(e,{i:Q.id})})},t);case i.wf:var ne,re,oe,ie,ae,ce,ue,le,se=n.widget,de=null==t||null===(ne=t.containers)||void 0===ne||null===(ne=ne[n.target])||void 0===ne?void 0:ne.maximized;if(!se||null!==(re=se.dataGrid)&&void 0!==re&&re.static)return t;if(null!=de&&de.widget)return(0,S.Zz)(s()("containers[".concat(n.target,"].layout"),de.layout),s()("containers[".concat(n.target,"].layouts"),de.layouts),s()("containers[".concat(n.target,"].maximized"),{}),s()("containers[".concat(n.target,"].widgets"),null==t||null===(le=t.containers)||void 0===le||null===(le=le[n.target])||void 0===le||null===(le=le.widgets)||void 0===le?void 0:le.map(function(e){return e.id===de.widget.id?I(I({},e),{},{dataGrid:I(I({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e})))(t);if(null!=t&&null!==(oe=t.containers)&&void 0!==oe&&null!==(oe=oe[n.target])&&void 0!==oe&&null!==(oe=oe.collapsed)&&void 0!==oe&&oe[se.id])return t;var fe=I(I({},v()(null==t||null===(ie=t.containers)||void 0===ie||null===(ie=ie[n.target])||void 0===ie?void 0:ie.layout,{i:se.id})),{x:0,y:0,w:1,h:1});return(0,S.Zz)(s()("containers[".concat(n.target,"].maximized"),{widget:se,layout:null==t||null===(ae=t.containers)||void 0===ae||null===(ae=ae[n.target])||void 0===ae?void 0:ae.layout,layouts:null==t||null===(ce=t.containers)||void 0===ce||null===(ce=ce[n.target])||void 0===ce?void 0:ce.layouts}),s()("containers[".concat(n.target,"].layout"),[fe]),s()("containers[".concat(n.target,"].layouts"),{xxs:[fe]}),s()("containers[".concat(n.target,"].widgets"),null==t||null===(ue=t.containers)||void 0===ue||null===(ue=ue[n.target])||void 0===ue||null===(ue=ue.widgets)||void 0===ue?void 0:ue.map(function(e){return e.id===se.id?I(I({},e),{},{dataGrid:I(I({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e})))(t);case i.FM:var pe=f()(t,"containers[".concat(n.target,"].widgets"),[]).filter(function(e){return!e.dataGrid||!e.dataGrid.static}),ve=pe.filter(function(e){return f()(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))}),ye=pe.filter(function(e){return!f()(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))});return 0===ye.length?ve.reduce(function(t,n){return e(t,(0,i.Ye)(n))},t):ye.length>0?ye.reduce(function(t,n){return e(t,(0,i.Ye)(n))},t):t;case i.Mi:return s()("tray",n.value,t);default:return t}}}}]);