"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4956],{277327:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(273517),o=r.n(n),i=r(8571),l=r(8117);function a(e){var t=e.msgId,r=e.icon;return o().createElement("div",{className:"gn-main-event-container"},o().createElement("div",{className:"gn-main-event-content"},o().createElement("div",{className:"gn-main-event-text"},o().createElement("div",{className:"gn-main-icon"},o().createElement(l.e6,{glyph:r})),t&&o().createElement(i.A,{msgId:t}))))}a.defaultProps={msgId:"",icon:"exclamation-sign"};const u=a},104956:(e,t,r)=>{r.r(t),r.d(t,{default:()=>We});var n=r(273517),o=r.n(n),i=r(605556),l=r.n(i),a=r(548975),u=r(466732),c=r(8117),s=r(227341),m=r.n(s),f=r(192202),d=r(899703);var p=r(487581),y=(0,n.lazy)(function(){return Promise.all([r.e(953),r.e(5096),r.e(3651)]).then(r.bind(r,653651))});var v=r(192779),b=r.n(v);const g=(0,r(164045).A)(function(e){return o().createElement("span",e,o().createElement(c.e6,{glyph:"info-sign"}))});var h=r(628017);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){j(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function j(e,t,r){return(t=function(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const P=function(e){var t,r,i,l,a=e.formData,u=e.onChange,c=e.schema,s=e.required,f=e.formContext,d=null===(t=e.idSchema)||void 0===t?void 0:t.$id,y=c.title,v=c.description,O=Object.keys(null==c?void 0:c.properties),E=O.reduce(function(e,t){var r,n=null==c||null===(r=c.properties)||void 0===r||null===(r=r[t])||void 0===r?void 0:r["geonode:multilang-lang-label"];return e[t]=n,e},{}),P=function(e){var t,r=(0,h.Qk)(),n=E[e]||(null===(t=r[e])||void 0===t?void 0:t.description);return"".concat(n," (").concat(e,")")},A="textarea"===(null==c||null===(r=c["ui:options"])||void 0===r?void 0:r.widget),T=(i=(0,n.useState)(O[0]),l=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(i,l)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(i,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),k=T[0],x=T[1],C=a||{},N=function(e){var t,r=b()(e)?e:null==e||null===(t=e.target)||void 0===t?void 0:t.value,n=S(S({},C),{},j({},k,r));u(n)},I=(0,h.kA)(f.messages,"gnviewer.typeText").replace("{lang}",P(k));return o().createElement("div",{className:"form-group field field-string multilang-widget"},o().createElement("label",{className:"control-label".concat(null!=f&&f.capitalizeTitle?" capitalize":"")},y,s&&o().createElement("span",{className:"required"}," ","*"),m()(v)?null:o().createElement(o().Fragment,null," ",o().createElement(g,{tooltip:v,tooltipPosition:"right"}))),A?o().createElement(p.A,{id:d,value:C[k]||"",onChange:N,onFocus:function(){},onBlur:function(){},options:{rows:5},placeholder:I}):o().createElement("input",{id:d,type:"text",className:"form-control",value:C[k]||"",onChange:N,onBlur:function(){},placeholder:I}),o().createElement("div",{className:"multilang-widget-buttons"},O.map(function(e){return o().createElement("button",{key:e,type:"button",className:"btn btn-xs ".concat(k===e?"btn-primary":"btn-outline-secondary"),onClick:function(){return x(e)}},P(e))})))},A={SelectWidget:function(e){return o().createElement(d.A,e)},TextareaWidget:function(e){var t=e.id,r=e.options,i=void 0===r?{}:r,l=e.value,a=e.onChange;return null!=i&&i["geonode-ui:richTextEditor"]?o().createElement(n.Suspense,{fallback:null},o().createElement(y,{id:t,value:l,onChange:a})):o().createElement(p.A,e)},TextWidgetMultiLang:P};var T=r(836970);var k=r(770491),x=["key"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C.apply(null,arguments)}var N=r(8571),I=r(221604);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach(function(t){M(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function M(e,t,r){return(t=function(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return K(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var L=function(e){var t=document.querySelector("[for=".concat(e,"]"))||document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})};function _(e){var t=e.idSchema,r=e.title,i=e.group,l=e.expanded,a=e.capitalizeTitle,u=z((0,n.useState)(!1),2),s=u[0],m=u[1],f=i.some(function(e){return e.error}),d=void 0===l?s:l;return o().createElement("li",null,o().createElement(T.A,{className:"".concat(f?"gn-metadata-error":"").concat(a?" capitalize":""),size:"xs",onClick:function(){return m(function(e){return!e})}},o().createElement(c.e6,{glyph:d?"bottom":"next"})," ",r,f?o().createElement(o().Fragment,null," ",o().createElement(c.e6,{glyph:"exclamation-sign"})):null),d?o().createElement("ul",null,i.map(function(e){return o().createElement("li",{key:e.name},o().createElement(T.A,{size:"xs",className:"".concat(e.error?"gn-metadata-error":"").concat(a?" capitalize":""),onClick:function(){var r;return L(null===(r=t[e.name])||void 0===r?void 0:r.$id)}},e.title,e.error?o().createElement(o().Fragment,null," ",o().createElement(c.e6,{glyph:"exclamation-sign"})):null))})):null)}function B(e,t){var r=e.idSchema,i=e.schema,l=e.uiSchema,a=e.properties,u=e.errorSchema,c=e.formContext,s=c.title,m=c.capitalizeTitle,f=z((0,n.useState)(""),2),d=f[0],p=f[1],y=a.reduce(function(e,r){var n,o,a=(null==i||null===(n=i.properties)||void 0===n||null===(n=n[r.name])||void 0===n?void 0:n.title)||r.name,c=(null==l?void 0:l[null==r?void 0:r.name])||{},s=(null==c?void 0:c["ui:options"])||{};if("hidden"===((null==c?void 0:c["ui:widget"])||s.widget)||!a.toLowerCase().includes((d||"").toLowerCase()))return e;var m,f=(null==s?void 0:s["geonode-ui:group"])||(0,h.kA)(t.messages,"gnviewer.metadataGroupTitle"),p=e[f]||[];return D(D({},e),{},M({},f,[].concat(function(e){if(Array.isArray(e))return K(e)}(m=p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(m)||$(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[D(D({},r),{},{uiSchema:c,schema:null==i||null===(o=i.properties)||void 0===o?void 0:o[r.name],error:u[r.name],title:a})])))},{}),v="gn-metadata-title",b=!Object.keys(y).some(function(e){return y[e].length>0});return o().createElement("div",{className:"gn-metadata-layout"},o().createElement("ul",{className:"gn-metadata-list"},o().createElement(I.A,{placeholder:"gnviewer.filterMetadata",value:d,onChange:function(e){return p(e)}}),s?o().createElement("li",null,o().createElement(T.A,{size:"xs",onClick:function(){return L(v)}},o().createElement(N.A,{msgId:"gnviewer.metadataFor"})," ",s)):null,Object.keys(y).filter(function(e){return y[e].length>0}).map(function(e){var t=y[e];return o().createElement(_,{key:e,idSchema:r,title:e,group:t,expanded:!!d||void 0,capitalizeTitle:m})})),o().createElement("div",{className:"gn-metadata-groups"},s?o().createElement("div",{id:v,className:"gn-metadata-title"},o().createElement(N.A,{msgId:"gnviewer.metadataFor"})," ",s):null,b?o().createElement("div",{className:"field"},o().createElement(N.A,{msgId:"gnviewer.noMetadataFound"})):null,Object.keys(y).filter(function(e){return y[e].length>0}).map(function(e,t){var r=y[e];return o().createElement("div",{className:"gn-metadata-group",key:t},o().createElement("div",{className:"gn-metadata-group-title"},e),r.map(function(e,r){return o().createElement(o().Fragment,{key:"".concat(t,"_").concat(r)},e.content)}))})))}B.contextTypes={messages:l().object};const R={ArrayFieldItemTemplate:function(e){var t=e.children,r=e.className,n=e.disabled,i=e.hasToolbar,l=e.hasMoveDown,a=e.hasMoveUp,u=e.hasRemove,c=e.hasCopy,s=e.index,m=e.onCopyIndexClick,f=e.onDropIndexClick,d=e.onReorderClick,p=e.readonly,y=e.registry,v=e.uiSchema,b=y.templates.ButtonTemplates,g=b.CopyButton,h=b.MoveDownButton,O=b.MoveUpButton,E=b.RemoveButton;return o().createElement("div",{className:r},t,i&&o().createElement("div",{className:"field-item-toolbar"},(a||l)&&o().createElement(O,{disabled:n||p||!a,onClick:d(s,s-1),uiSchema:v,registry:y}),(a||l)&&o().createElement(h,{disabled:n||p||!l,onClick:d(s,s+1),uiSchema:v,registry:y}),c&&o().createElement(g,{disabled:n||p,onClick:m(s),uiSchema:v,registry:y}),u&&o().createElement(E,{disabled:n||p,onClick:f(s),uiSchema:v,registry:y})))},ArrayFieldTemplate:function(e){var t=e.canAdd,r=e.disabled,n=e.idSchema,i=e.uiSchema,l=e.items,a=e.onAddClick,u=e.readonly,c=e.registry,s=e.required,m=e.schema,f=e.title,d=(0,k.$R)(i),p=(0,k.$F)("ArrayFieldDescriptionTemplate",c,d),y=(0,k.$F)("ArrayFieldItemTemplate",c,d),v=(0,k.$F)("ArrayFieldTitleTemplate",c,d),b=c.templates.ButtonTemplates.AddButton;return o().createElement("div",{id:n.$id},o().createElement("div",{className:"field-array-header"},o().createElement(v,{idSchema:n,title:d.title||f,required:s,schema:m,uiSchema:i,registry:c,description:o().createElement(p,{idSchema:n,description:d.description||m.description,schema:m,uiSchema:i,registry:c})}),t&&o().createElement(b,{className:"array-item-add",onClick:a,disabled:r||u,uiSchema:i,registry:c})),o().createElement("div",{className:"array-item-list"},l&&l.map(function(e){var t=e.key,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,x);return o().createElement(y,C({key:t},r))})))},ArrayFieldTitleTemplate:function(e){var t=e.idSchema,r=e.title,n=e.schema,i=e.uiSchema,l=e.required,a=e.registry,u=e.description,c=(0,k.$R)(i,a.globalUiOptions),s=c.label;if(!r||void 0!==s&&!s)return null;var m=(0,k.$F)("TitleFieldTemplate",a,c);return o().createElement(m,{id:(0,k.EH)(t),title:r,required:l,schema:n,uiSchema:i,registry:a,description:u})},ObjectFieldTemplate:function(e){var t;if("root"===(null==e||null===(t=e.idSchema)||void 0===t?void 0:t.$id))return o().createElement(B,e);var r=e.description,n=e.disabled,i=e.formData,l=e.idSchema,a=e.onAddClick,u=e.properties,c=e.readonly,s=e.registry,m=e.required,f=e.schema,d=e.title,p=e.uiSchema,y=e.formContext,v=(0,k.$R)(p),b=(0,k.$F)("TitleFieldTemplate",s,v),g=(0,k.$F)("DescriptionFieldTemplate",s,v),h=s.templates.ButtonTemplates.AddButton;return o().createElement("div",{id:l.$id},d&&o().createElement(b,{id:(0,k.EH)(l),title:d,required:m,schema:f,uiSchema:p,registry:s,formContext:y,description:o().createElement(g,{id:(0,k.IR)(l),description:r,schema:f,uiSchema:p,registry:s})}),null!=u&&u.length?o().createElement("div",{className:"field-object-properties"},u.map(function(e){return e.content})):null,(0,k.Xl)(f,p,i)&&o().createElement(h,{onClick:a(f),disabled:n||c,uiSchema:p,registry:s}))},TitleFieldTemplate:function(e){var t=e.id,r=e.required,n=e.title,i=e.description,l=e.formContext;return o().createElement("div",{id:t},o().createElement("label",{className:null!=l&&l.capitalizeTitle?"capitalize":""},n,r&&o().createElement("span",{className:"required"}," ","*"),i?o().createElement(o().Fragment,null," ",i):null))},DescriptionFieldTemplate:function(e){var t=e.description,r=e.id;return m()(t)?null:o().createElement(g,{id:r,tooltip:t,tooltipPosition:"right"})},ErrorListTemplate:function(){return null},FieldTemplate:function(e){var t=e.id,r=e.label,n=e.children,i=e.errors,l=e.help,a=e.description,u=e.hidden,c=e.required,s=e.displayLabel,m=e.registry,f=e.uiSchema,d=e.formContext,p=(0,k.$R)(f),y=(0,k.$F)("WrapIfAdditionalTemplate",m,p);return u?o().createElement("div",{className:"hidden"},n):o().createElement(y,e,s&&o().createElement("label",{className:"control-label".concat(null!=d&&d.capitalizeTitle?" capitalize":""),htmlFor:t},r,c&&o().createElement("span",{className:"required"}," ","*"),a?o().createElement(o().Fragment,null," ",a):null),n,i,l)},ButtonTemplates:{AddButton:function(e){var t=e.onClick,r=e.disabled;return o().createElement(T.A,{disabled:r,className:"square-button-md",onClick:t,variant:"primary"},o().createElement(c.e6,{glyph:"plus"}))},MoveUpButton:function(e){var t=e.onClick,r=e.disabled;return o().createElement(T.A,{disabled:r,className:"square-button-md",onClick:t},o().createElement(c.e6,{glyph:"arrow-up"}))},MoveDownButton:function(e){var t=e.onClick,r=e.disabled;return o().createElement(T.A,{disabled:r,className:"square-button-md",onClick:t},o().createElement(c.e6,{glyph:"arrow-down"}))},RemoveButton:function(e){var t=e.onClick,r=e.disabled;return o().createElement(T.A,{disabled:r,className:"square-button-md",onClick:t},o().createElement(c.e6,{glyph:"trash"}))}}};var U=r(995531),W=r(39128),V=r.n(W),H=r(750436),G=r.n(H),Q=r(908437),X=r.n(Q),J=r(593737),Y=r.n(J),Z=r(192016),ee=r(551783);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}var re=["loadOptions","pageSize","debounceTime","labelKey","valueKey","newOptionPromptText"];function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ne.apply(null,arguments)}function oe(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t,r){return(t=function(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){if(e){if("string"==typeof e)return ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ce=(0,ee.A)("placeholder")(Z.Ay);const se=function(e){var t=e.loadOptions,r=e.pageSize,i=void 0===r?20:r,l=e.debounceTime,a=void 0===l?500:l,u=e.labelKey,c=void 0===u?"label":u,s=e.valueKey,f=void 0===s?"value":s,d=e.newOptionPromptText,p=void 0===d?"Create option":d,y=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,re),v=le((0,n.useState)(""),2),b=v[0],g=v[1],h=le((0,n.useState)(!1),2),O=h[0],E=h[1],S=le((0,n.useState)(!1),2),j=S[0],w=S[1],P=le((0,n.useState)(!1),2),A=P[0],T=P[1],k=le((0,n.useState)(1),2),x=k[0],C=k[1],N=le((0,n.useState)([]),2),I=N[0],F=N[1],q=(0,n.useRef)(),D=(0,n.useRef)(),M=(0,n.useRef)();return M.current=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(){var e;q.current&&(null===(e=q.current)||void 0===e||e.cancel(),q.current=void 0);var t=U.A.CancelToken;q.current=t.source()}();var r=e.q,n=null!=r?r:b;E(!0);var o=e.page||x;t({q:n,page:o,pageSize:i,config:{cancelToken:q.current.token}}).then(function(e){var t=e.results.map(function(e){return e.selectOption});t=function(e,t){if(y.creatable&&!m()(t)){var r,n=function(e){var r;return(null==e||null===(r=e[c])||void 0===r?void 0:r.toLowerCase())===t.toLowerCase()},o=null===(r=y.value)||void 0===r?void 0:r.some(n),i=e.some(n);return o||i?e:[ie(ie(ie({},c,"".concat(p,' "').concat(t,'"')),f,t),"result",ie(ie({},f,t),c,t))].concat(e)}return e}(t=1===o?t:[].concat(oe(I),oe(t)),n),F(t),w(e.isNextPageAvailable),E(!1),q.current=void 0}).catch(function(){F([]),w(!1),E(!1),q.current=void 0})},(0,n.useEffect)(function(){D.current=Y()(function(e){e!==b&&(g(e),C(1),F([]),M.current({q:e,page:1}))},a)},[b]),(0,n.useEffect)(function(){A&&(g(""),C(1),F([]),M.current({q:"",page:1}))},[A]),(0,n.useEffect)(function(){x>1&&M.current()},[x]),o().createElement(ce,ne({},y,{isLoading:O,options:I,labelKey:c,valueKey:f,onOpen:function(){return T(!0)},onClose:function(){return T(!1)},filterOptions:function(e){return e.map(function(e){var t=/\"(.*?)\"/.exec(b);return t?t[1]:e})},onInputChange:function(e){return t=e,q.current&&(null===(r=q.current)||void 0===r||r.cancel(),q.current=void 0),D.current.cancel(),void D.current(t);var t,r},onMenuScrollToBottom:function(){!O&&j&&C(x+1)}}))};function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}var fe=["className","description","error","helpTitleIcon","id","labelKey","name","title","value","valueKey","showLabel","required"];function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},de.apply(null,arguments)}function pe(e,t,r){return(t=function(e){var t=function(e){if("object"!=me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==me(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=function(e){var t=e.className,r=e.description,n=e.error,i=e.helpTitleIcon,l=e.id,a=e.labelKey,u=void 0===a?"label":a,c=e.name,s=e.title,f=e.value,d=e.valueKey,p=void 0===d?"value":d,y=e.showLabel,v=void 0===y||y,h=e.required,O=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,fe);return o().createElement("div",{className:"form-group".concat(t?" "+t:"").concat(n?" has-error":"")},v?o().createElement("label",{className:"control-label",htmlFor:l},s||c,h?o().createElement("span",{className:"required"}," ","*"):null,i&&!m()(r)?o().createElement(o().Fragment,null," ",o().createElement(g,{tooltip:r,tooltipPosition:"right"})):null):null,o().createElement(se,de({},O,{id:l,value:f&&X()(f)?f.map(function(e){return pe(pe({result:e},p,b()(e)?e:e[p]),u,b()(e)?e:e[u])}):f,valueKey:p,labelKey:u})),n)};ye.propTypes={className:l().string,description:l().string,error:l().element,helpTitleIcon:l().bool,id:l().string.isRequired,labelKey:l().string,name:l().string,title:l().string,value:l().any.isRequired,valueKey:l().string,showLabel:l().bool};const ve=ye;var be=r(283306),ge=r(978632),he=r.n(ge);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach(function(t){je(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function je(e,t,r){return(t=function(e){var t=function(e){if("object"!=Oe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}var Pe=["name"],Ae=["result"],Te=["q","config"];function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ke.apply(null,arguments)}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach(function(t){Ne(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ne(e,t,r){return(t=function(e){var t=function(e){if("object"!=we(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==we(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Fe(e,t){return Object.keys(t||{}).some(function(r){var n;return r===e||!(null===(n=t[r])||void 0===n||!n.properties)&&Fe(e,t[r].properties)})}function qe(e){var t,r=e.name,n=Ie(e,Pe),o=(r||"").split("-"),i=parseFloat(o[o.length-1]);return!isNaN(i)&&!Fe(r,null==n||null===(t=n.registry)||void 0===t||null===(t=t.rootSchema)||void 0===t?void 0:t.properties)}const De={SchemaField:function(e){var t,r,i,l,a,u=e.onChange,c=e.schema,s=e.formData,f=e.idSchema,d=e.name,p=e.errorSchema,y=e.uiSchema,v=e.required,g=e.formContext,h=null==y||null===(t=y["ui:widget"])||void 0===t?void 0:t.toLowerCase(),O=null==y?void 0:y["ui:options"],E=null==O?void 0:O["geonode-ui:autocomplete"],S="string"===(null==c||null===(r=c.items)||void 0===r?void 0:r.type),j="object"===(null==c||null===(i=c.items)||void 0===i?void 0:i.type),w="array"===(null==c?void 0:c.type)&&(S||j&&!m()(null==c||null===(l=c.items)||void 0===l?void 0:l.properties)),A="object"===(null==c?void 0:c.type)&&!m()(null==c?void 0:c.properties),T=function(e){var t=e.uiSchema,r=e.idSchema,o=e.onChange,i=e.isMultiSelect,l=e.formContext,a=e.name,u=null==t?void 0:t["ui:options"],c=null==u?void 0:u["geonode-ui:referencevalue"],s=null==u?void 0:u["geonode-ui:referencekey"],m=r.$id.match(/_(\d+)(_|$)/),f=m?parseInt(m[1],10):null,d=c?he()(l,"metadata.".concat(G()(c)({index:f}))):null,p=(0,n.useRef)(null),y=function(e){p.current=Se(Se({},p.current),{},je({},a,e))};return(0,n.useEffect)(function(){null===p.current&&c&&y(d)},[]),(0,n.useEffect)(function(){var e;c&&d!==(null===(e=p.current)||void 0===e?void 0:e[a])&&(y(d),o(i?[]:{}))},[c,d]),{referenceValue:d,referenceKey:s}}(Ce(Ce({},e),{},{isMultiSelect:w})),k=T.referenceValue,x=T.referenceKey;if(E&&(w||A)){var C,N=O.classNames,I=O.style,F=O.description,q=O.disabled,D=O.help,M=O.hideError,z=O.label,$=O.placeholder,K=O.title,L=(M?[]:V()(p)).reduce(function(e,t){return null!=t&&t.__errors?e.push({messages:t.__errors}):Object.keys(t||{}).forEach(function(r){var n;null!==(n=t[r])&&void 0!==n&&n.__errors&&e.push({key:r,messages:t[r].__errors})}),e},[]),_=b()(E)?{url:E}:E,B=null==_?void 0:_.url;k&&(B=G()(B)(Ne({},null!=x?x:"id",k)));var R=(null==_?void 0:_.queryKey)||"q",W=(null==_?void 0:_.resultsKey)||"results",H=(null==_?void 0:_.valueKey)||"id",Q=(null==_?void 0:_.labelKey)||"label",X=!(null==_||!_.creatable),J=null!=$?$:" ",Y={className:"field".concat(N?" "+N:""," ").concat(null!=g&&g.capitalizeTitle?"capitalize":""),clearable:!v,creatable:X,id:f.$id,labelKey:Q,multi:w,name:d,placeholder:J,showLabel:null==z||z,title:null!=K?K:c.title,value:s,valueKey:H,helpTitleIcon:!0,description:null!==(C=null!=D?D:F)&&void 0!==C?C:c.description,disabled:q||(null==e?void 0:e.readonly)||(null==c?void 0:c.readOnly),style:I,required:v,onChange:function(e){var t,r=null!==(t=null==e?void 0:e.result)&&void 0!==t?t:void 0;return u(w?e.map(function(e){var t,r=e.result,n=Ie(e,Ae);return void 0===r?n:b()(r)?r:S?r[H]:Object.fromEntries(Object.keys(null===(t=c.items)||void 0===t?void 0:t.properties).map(function(e){return[e,r[e]]}))}):r)},loadOptions:function(e){var t=e.q,r=e.config,n=Ie(e,Te);return U.A.get(B,Ce(Ce({},r),{},{params:Ce(Ce(Ce({},n),t&&Ne({},R,t)),{},{page:n.page})})).then(function(e){var t,r=e.data;return{isNextPageAvailable:!(null===(t=r.pagination)||void 0===t||!t.more),results:null==r?void 0:r[W].map(function(e){return{selectOption:Ne(Ne({result:e},H,b()(e)?e:e[H]),Q,b()(e)?e:e[Q])}})}})},error:m()(L)?null:o().createElement(o().Fragment,null,L.map(function(e,t){return o().createElement("ul",{key:t,className:"text-danger"},V()(e.messages).map(function(t,r){return o().createElement("li",{key:r},e.key?"".concat(e.key,": "):"",t)}))}))};return o().createElement(ve,Y)}if("textwidgetmultilang"===h)return o().createElement(P,e);var Z=qe(e);return o().createElement(be.A,ke({},e,{uiSchema:Z?Ce(Ce({},e.uiSchema),{},{"ui:label":!1,"ui:options":Ce(Ce({},null===(a=e.uiSchema)||void 0===a?void 0:a["ui:options"]),{},{label:!1})}):y}))}};var Me=r(277327),ze=r(866875);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}var Ke=["__errors"];function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach(function(t){Re(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Re(e,t,r){return(t=function(e){var t=function(e){if("object"!=$e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$e(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ue(e,t){var r=e.pk,i=e.loading,l=e.error,s=e.extraErrors,d=e.metadata,p=e.schema,y=e.uiSchema,v=e.updateError,b=e.capitalizeFieldTitle,g=e.setLoading,O=e.setError,E=e.setUISchema,S=e.setSchema,j=e.setMetadata,w=e.setInitialMetadata,P=e.setUpdateError,T=e.setResource,k=e.updating,x=e.setExtraErrors,C=e.readOnly,N=t.messages,I=(0,n.useRef)(!1),F=(0,n.useRef)(),q=null!=s?s:{},D=q.__errors,M=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(q,Ke);function z(e){var t=function(e,t){var r=Be({},e);return Object.keys((null==t?void 0:t.properties)||{}).forEach(function(n){var o=t.properties[n];null!=o&&o["geonode:multilang"]&&e[n]&&(Object.entries(e[n]||{}).forEach(function(e){var o,i,l=(i=2,function(e){if(Array.isArray(e))return e}(o=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(o,i)||function(e,t){if(e){if("string"==typeof e)return Le(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Le(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=l[0],u=l[1],c=Object.keys(t.properties).find(function(e){var r=t.properties[e];return(null==r?void 0:r["geonode:multilang-group"])===n&&(null==r?void 0:r["geonode:multilang-lang"])===a});c&&(r[c]=u)}),r[n]="")}),r}(e,p);P(null),j(t)}if(F.current=function(e){null!=e&&e.validateForm&&!I.current&&(I.current=!0,m()(M)&&e.validateForm())},(0,n.useEffect)(function(){r&&(g(!0),O(!1),(0,f._T)(r).then(function(e){E(e.uiSchema),S(e.schema),j(e.metadata),w(e.metadata),T(e.resource),x(e.extraErrors)}).catch(function(){O(!0)}).finally(function(){g(!1)}))},[r]),(0,n.useEffect)(function(){return function(){P(null),x({})}},[]),i)return o().createElement(ze.A,null);if(l)return o().createElement(Me.A,{msgId:"gnviewer.metadataNotFound"});if(!d&&!p)return null;var $,K,L=function(e,t){var r=Be({},t);return{schemaMultiLang:Be(Be({},e),{},{properties:Object.keys((null==e?void 0:e.properties)||{}).reduce(function(t,n){var o=Be({},e.properties[n]);if(null!=o&&o["geonode:multilang"]){var i=Be(Be({},o),{},{type:"object",properties:{},"ui:widget":"TextWidgetMultiLang","ui:options":{}});delete i.maxLength,t[n]=i,r[n]={"ui:widget":"TextWidgetMultiLang"}}else if(null!=o&&o["geonode:multilang-group"]){var l,a=o["geonode:multilang-group"],u=o["geonode:multilang-lang"];t[a].properties[u]=o,t[a]["ui:options"]=Be(Be({},t[a]["ui:options"]),{},{widget:null===(l=o["ui:options"])||void 0===l?void 0:l.widget})}else t[n]=o;return t},{})}),uiSchemaMultiLang:r}}(p,y),_=L.schemaMultiLang,B=L.uiSchemaMultiLang,U=(K=p,Be(Be({},$=d),Object.keys((null==K?void 0:K.properties)||{}).reduce(function(e,t){var r=K.properties[t];return null!=r&&r["geonode:multilang"]&&(e[t]=Object.keys($||{}).reduce(function(e,r){var n=K.properties[r];return(null==n?void 0:n["geonode:multilang-group"])===t&&(e[n["geonode:multilang-lang"]]=$[r]),e},{})),e},{})));return o().createElement("div",{className:"gn-metadata"},o().createElement("div",{className:"gn-metadata-header"},!m()(v)&&o().createElement(c.Fc,{bsStyle:v.type,style:{margin:"0.25rem 0"}},v.message,!m()(D)&&o().createElement("ul",null,D.map(function(e,t){return o().createElement("li",{key:t},e)})))),o().createElement("div",{className:"gn-metadata-container"},o().createElement(u.Ay,{liveValidate:!0,readonly:C,ref:F.current,formContext:{title:d.title||U.title.en||(0,h.kA)(N,"gnviewer.metadataEditorTitle"),metadata:U,capitalizeTitle:b,messages:N},schema:_,uiSchema:B,formData:U,widgets:A,validator:a.Ay,templates:R,fields:De,extraErrors:M,transformErrors:function(e){return e.filter(function(e){return"must be equal to constant"!==e.message}).map(function(e){var t=(e.message||"").startsWith("must have required property")?"must have required property":e.message,r="metadata.error.".concat(t),n=(0,h.kA)(N,r);return Be(Be({},e),{},{message:r===n?t:n})})},experimental_defaultFormStateBehavior:{arrayMinItems:{populate:"never",mergeExtraDefaults:!1}},onChange:function(e){z(e.formData)}},o().createElement(o().Fragment,null))),k?o().createElement(ze.A,{style:{opacity:.5}}):null)}Ue.contextTypes={messages:l().object},Ue.defaultProps={capitalizeFieldTitle:!0};const We=Ue}}]);