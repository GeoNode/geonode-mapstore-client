(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2361],{94943:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>Q});var n=r(89255),a=r(27361),o=r.n(a),l=r(91175),s=r.n(l),i=r(1469),c=r.n(i),u=r(41106),f=r.n(u),y=r(19155),b=r.n(y),p=r(97395),d=r(80416),m=r(60604),v=r(90825),g=r(80833),S=r(82904),O=r(24262),h=r(96909),w=r(9082),E=r(75875),N=r.n(E),j=r(84596),T=r.n(j),P=r(99009);function U(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const I=function(e,t,r){var n=e+"layers/"+t+".json";return N().get(n,r).then((function(e){return e.data&&e.data.layer}))},W=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,a=void 0===n?[]:n,o=e.options,l=void 0===o?{}:o,s=(0,P.$N)(r),i=s.name,c=s.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(i,".json");return N().get(u,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[],n=a.map((function(e){return e.name})),o=r.filter((function(e){var t=e.name;return-1===n.indexOf(t)}));return{layer:M(M({},t),{},{styles:{"@class":"linked-hash-set",style:o}})}})).then((function(e){return N().put(u,e).then((function(){return e}))}))},A=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,a=void 0===n?[]:n,o=e.options,l=void 0===o?{}:o,s=(0,P.$N)(r),i=s.name,c=s.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(i,".json");return N().get(u,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[];return{layer:M(M({},t),{},{styles:{"@class":"linked-hash-set",style:[].concat(U(r),U(a))}})}})).then((function(e){return N().put(u,e).then((function(){return e}))}))},V=function(e){var t=e.baseUrl,r=e.layerName,n=e.styleName,a=e.options,o=void 0===a?{}:a,l=(0,P.$N)(r),s=l.name,i=l.workspace,c="".concat(t,"rest/").concat(i&&"workspaces/".concat(i,"/")||"","layers/").concat(s,".json");return N().get(c,o).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[],a=t.defaultStyle||{},o=b()([a].concat(U(r)),"name");return{layer:M(M({},t),{},{defaultStyle:{name:n},styles:{"@class":"linked-hash-set",style:o}})}})).then((function(e){return N().put(c,e).then((function(){return e}))}))};var F=r(93222),C=r(75110),$=r(7147),_=r(8954),B=["name","workspace"];function R(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G=function(e){var t=e.status,r=e.styleName,a=e.baseUrl;return"edit"===t?n.Observable.defer((function(){return w.ZP.getStyleCodeByName({baseUrl:a,styleName:r})})).switchMap((function(e){return n.Observable.of((0,h.FU)({languageVersion:e.languageVersion,code:e.code,templateId:"",format:e.format,init:!0}))})).catch((function(e){return n.Observable.of((0,h.Fe)("edit",e))})):n.Observable.empty()},K=function(e){var t=e.styleName,r=e.baseUrl,a=e.onSuccess$,o=e.onError$;return n.Observable.defer((function(){return w.ZP.deleteStyle({baseUrl:r,styleName:t})})).switchMap((function(){return a||n.Observable.empty()})).catch((function(){return o||n.Observable.empty()}))},q=function(e){var t=e.baseUrl,r=e.update,a=e.code,o=e.format,l=e.styleName,s=e.status,i=e.languageVersion,u=e.options,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.Observable.defer((function(){return w.ZP[r?"updateStyle":"createStyle"]({baseUrl:t,code:a,format:o,styleName:l,languageVersion:i,options:u})})).switchMap((function(){var e;return c()(f)&&(e=n.Observable).of.apply(e,[(0,h.Wm)()].concat(R(f)))||f})).catch((function(e){var t;return(t=n.Observable).of.apply(t,[(0,h.Fe)(s,e),(0,h.Wm)()].concat(R(y)))})).startWith((0,h.pt)(s))};function H(e,t){return!t&&e.availableStyles?n.Observable.of((0,d.Xy)({availableStyles:e.availableStyles}),(0,h.Wm)()):(0,g.kB)(e).switchMap((function(t){var r=(0,O.IA)(t);return r.availableStyles?n.Observable.of((0,d.Xy)({availableStyles:r.availableStyles}),(0,d.tV)(e.id,"layer",z({},r)),(0,h.Wm)()):n.Observable.of((0,h.Fe)("availableStyles",{status:401}),(0,h.Wm)())})).catch((function(e){var t=-1!==e.message.indexOf("could not be unmarshalled")?"parsingCapabilities":"global";return n.Observable.of((0,h.Fe)(t,e),(0,h.Wm)())})).startWith((0,h.pt)("global"))}const Q={toggleStyleEditorEpic:function(e,t){return e.ofType(h.vZ).filter((function(){return!(0,F.aN)(t.getState())})).switchMap((function(e){var r=t.getState(),a=(0,C.jN)(r),l=!!o()(a,"options.availableStyles");if(!e.enabled)return function(e){var t=(0,F.gc)(e),r=(0,F.Z0)(e).baseUrl,a=void 0===r?"":r;return n.Observable.of((0,h.l1)(),(0,m.fU)({owner:P.s1})).merge(t?K({styleName:t,baseUrl:a}):n.Observable.empty())}(r);if((0,F.ji)(r)&&l)return n.Observable.empty();var s=e.layer||(0,C.Iz)(r);if(!s||s&&!s.url)return n.Observable.empty();var i=(0,O.Nd)(s);if(!i)return H(s);var c=s.url.split(i),u="".concat(c[0]).concat(i),f=(0,F.Z0)(r);return n.Observable.concat(n.Observable.of((0,h.pt)("global"),(0,h.l1)()),n.Observable.defer((function(){return(0,_.eb)({baseUrl:u,styleService:f})})).switchMap((function(e){return n.Observable.concat(n.Observable.of((0,h.E0)(e)),n.Observable.defer((function(){return I(u+"rest/",s.name)})).switchMap((function(e){var t,r=(null==e||null===(t=e.styles)||void 0===t?void 0:t.style)||[],a=b()([e.defaultStyle].concat(R(r)),"name");return 0===a.length?n.Observable.of((0,h.Fe)("availableStyles",{status:401}),(0,h.Wm)()):n.Observable.defer((function(){return Promise.all([w.ZP.getStylesInfo({baseUrl:u,styles:a}),(0,g.kB)(s).toPromise().then((function(e){return e})).catch((function(){return null}))])})).switchMap((function(e){var t,r,a=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,s=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(s)throw a}}return o}}(t,r)||Z(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],l=a[1],i=l&&(0,O.IA)(l),c=((null==i?void 0:i.availableStyles)||[]).map((function(e){return z(z({},e),(0,P.$N)(e.name))})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return t})),u=c.length>0?o.map((function(e){var t=(0,P.$N)(e.name),r=c.find((function(e){return e.name===t.name}))||{},n=(r.name,r.workspace,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(r,B));return n?z(z({},n),e):e})):o;return n.Observable.of((0,m.W)(s.id,P.s1,"override",{}),(0,d.Xy)({availableStyles:u}),(0,d.tV)(s.id,"layer",{availableStyles:u}),(0,h.Wm)())}))})).catch((function(){return H(s,!0)})))})))}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(h.g$).filter((function(e){return!!e.status})).switchMap((function(r){var a=t.getState(),o=(0,F.Vf)(a),l=o&&o.params||{},s=o&&!o.describeFeatureType&&(0,v.H)(o.url,o,{query:l}),i=(0,F.i7)(a)||o.availableStyles&&o.availableStyles[0]&&o.availableStyles[0].name,c=(0,F.Ri)(a),u=(0,F.Z0)(a).baseUrl,f=void 0===u?"":u;return s&&function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=n.Observable).of.apply(r,[(0,h.pt)("global")].concat(R(o))).merge(e.ofType(d.K$).filter((function(){var e=(0,C.Iz)(t.getState());return a(e)})).switchMap((function(){var e=(0,C.Iz)(t.getState());return l(e)})).catch((function(e){return n.Observable.of((0,h.Fe)("global",e),(0,h.Wm)())})).takeUntil(e.ofType(h.E2)))}(e,t,(function(e){return e&&e.describeLayer}),[s],(function(e){return n.Observable.concat(G({status:r.status,styleName:i,baseUrl:f}),n.Observable.of((0,h.xR)(!(e&&e.describeLayer&&401===e.describeLayer.error)),(0,h.bB)({editorType:c.msEditorType||"textarea",styleJSON:c.msStyleJSON}),(0,h.Wm)()))}))||n.Observable.concat(G({status:r.status,styleName:i,baseUrl:f}),n.Observable.of((0,h.bB)({editorType:c.msEditorType||"textarea",styleJSON:c.msStyleJSON})))}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(h.TB,h.DX).switchMap((function(e){var r=t.getState(),n=(0,F.gc)(r),a=(0,F.Vf)(r),o=(0,P.$N)(a.name).workspace,l=e.format&&e.format!==(0,F.iB)(r),s=n||"".concat(o?"".concat(o,":"):"").concat((0,P.Vi)()),i=e.format||(0,F.iB)(r),c=(0,F.ex)(r),u=(0,F.Z0)(r).baseUrl,f=void 0===u?"":u,y=(0,F.j5)(r),b="sld"===i&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},d=y.version!==b.version?{params:{raw:!0}}:{},v=b,g=function(t){return q({update:!0,code:e.code,format:i,styleName:t,status:c,baseUrl:f,languageVersion:v,options:d},[(0,m.B1)(P.s1,[{style:t,_v_:Date.now(),singleTile:!0}]),(0,h.k5)({temporaryId:t,templateId:e.templateId||"",code:e.code,format:i,init:e.init,languageVersion:v})],"edit"===c?[]:[(0,p.vU)({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},S=("css"===i?"* { stroke: #888888; }":"sld"===i&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",O=function(e){return q({code:S,format:i,styleName:e,status:c,baseUrl:f},g(e),[(0,p.vU)({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),(0,h.k5)({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return l&&n&&K({styleName:n,baseUrl:f,onSuccess$:O("".concat(o?"".concat(o,":"):"").concat((0,P.Vi)())),onError$:g(s)})||n&&g(s)||O(s)}))},createStyleEpic:function(e,t){return e.ofType(h.vA).switchMap((function(e){var r=t.getState(),a=(0,F.gB)(r),o=(0,F.Vf)(r),l=(0,P.$N)(o.name).workspace,i="".concat(l?"".concat(l,":"):"").concat((0,P.nK)(e.settings)),c=(0,F.iB)(r),u=e.settings||{},y=u.title,b=void 0===y?"":y,v=u._abstract,g=void 0===v?"":v,S=(0,F.Z0)(r).baseUrl,O=void 0===S?"":S,E=z({title:b,description:g},{msStyleJSON:null,msEditorType:"visual"});return n.Observable.defer((function(){return w.ZP.createStyle({baseUrl:O,code:f()(a)({styleTitle:b,styleAbstract:g}),format:c,styleName:i,metadata:E})})).switchMap((function(){return n.Observable.of((0,m.B1)(P.s1,[{}]),(0,d.Xy)({style:i||""},!0),(0,h.Nf)(""),(0,h.Wm)()).merge(function(e){var t=e.baseUrl,r=e.layer,a=e.styleName,o=e.format,l=e.title,i=e._abstract,c=e.metadata;return n.Observable.defer((function(){return A({baseUrl:t,layerName:r.name,styles:[{name:a}]})})).switchMap((function(){var e=z({filename:"".concat(a,".").concat(o),format:o,name:a,title:l,_abstract:i},c&&{metadata:c}),t=s()(r.availableStyles),u=r.availableStyles&&[t,e].concat(R(r.availableStyles.filter((function(e,t){return t>0}))))||[e];return n.Observable.of((0,d.Xy)({availableStyles:u},!0),(0,h.Wm)())})).catch((function(){return n.Observable.of((0,h.Wm)())})).startWith((0,h.pt)("global"))}({layer:o,styleName:i,format:c,title:b,_abstract:g,baseUrl:O,metadata:E}))})).catch((function(e){return n.Observable.of((0,h.Fe)("",e),(0,h.Wm)(),(0,p.vU)({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))})).startWith((0,h.pt)(""))}))},updateStyleCodeEpic:function(e,t){return e.ofType(h.ch).switchMap((function(){var e=t.getState(),r=(0,F.iB)(e),a=(0,F.j5)(e),o=(0,F.gB)(e),l=(0,F.i7)(e),s=(0,F.gc)(e),i=(0,F.Vf)(e),c=(0,F.Z0)(e).baseUrl,u=void 0===c?"":c,f=(0,F.WW)(e)||{},y={msStyleJSON:f.styleJSON||null,msEditorType:f.editorType},b=(i.availableStyles||[]).map((function(e){return e.name===l?z(z({},e),{},{metadata:z(z({},e.metadata),y)}):e}));return n.Observable.defer((function(){return w.ZP.updateStyle({baseUrl:u,code:o,format:r,styleName:l,languageVersion:a,options:{params:{raw:!0}},metadata:y})})).switchMap((function(){return n.Observable.of((0,h.Wm)(),(0,d.tV)(i.id,"layer",{_v_:Date.now(),availableStyles:b}),(0,d.Xy)({availableStyles:b}),(0,h.k5)({temporaryId:s,templateId:"",code:o,format:r,init:!0,languageVersion:a}),(0,p.Vp)({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))})).catch((function(e){return n.Observable.of((0,h.Fe)("global",e),(0,h.Wm)(),(0,p.vU)({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))})).startWith((0,h.pt)("global"))}))},deleteStyleEpic:function(e,t){return e.ofType(h.j1).filter((function(e){return!!e.styleName})).switchMap((function(e){var r=e.styleName,a=t.getState(),o=(0,F.Vf)(a),l=(0,F.Z0)(a).baseUrl,s=void 0===l?"":l,i=(0,$.tL)(a),c=(0,$.Gd)(a);return n.Observable.defer((function(){return W({baseUrl:s,layerName:o.name,styles:[{name:r}]})})).switchMap((function(){var e=o.availableStyles&&o.availableStyles.filter((function(e){return e.name!==r}))||[];return n.Observable.concat(n.Observable.of((0,d.Xy)({style:"",availableStyles:e},!0),(0,h.Wm)(),(0,S.Xg)("layersettings","originalSettings",z(z({},i),{},{style:""})),(0,S.Xg)("layersettings","initialSettings",z(z({},c),{},{style:""}))),K({styleName:r,baseUrl:s,onSuccess$:n.Observable.of((0,p.Vp)({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:n.Observable.of((0,p.vU)({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return n.Observable.of((0,h.Wm)())})).startWith((function(){return n.Observable.of((0,h.pt)("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(h.rb).switchMap((function(){var e=t.getState(),r=(0,F.Z0)(e).baseUrl,a=void 0===r?"":r,o=(0,F.Vf)(e),l=(0,F.i7)(e);return n.Observable.defer((function(){return V({baseUrl:a,layerName:o.name,styleName:l})})).switchMap((function(){var e=o.availableStyles.filter((function(e){var t=e.name;return l===t})),t=o.availableStyles.filter((function(e){var t=e.name;return l!==t})),r=[].concat(R(e),R(t));return n.Observable.of((0,d.Xy)({availableStyles:r},!0),(0,p.Vp)({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),(0,h.Wm)())})).startWith((0,h.pt)("global")).catch((function(){return n.Observable.of((0,p.vU)({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),(0,h.Wm)())}))}))}}},32244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(96909),a=r(47037),o=r.n(a);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.wL:return s(s({},e),{},{service:t.service,canEdit:t.canEdit});case n.Nm:return s(s({},e),{},{canEdit:t.canEdit});case n.gF:return s(s({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case n.g$:return""===t.status?s(s({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):s(s({},e),{},{status:t.status});case n.dJ:return{service:e.service&&s({},e.service)||{},canEdit:e.canEdit,loading:e.loading};case n.uz:return s(s({},e),{},{addStyle:t.add});case n.lX:return s(s({},e),{},{loading:!t.status||t.status});case n.E2:return s(s({},e),{},{loading:!1,enabled:!0});case n.mF:var r,a,l,c=(null==t||null===(r=t.error)||void 0===r?void 0:r.statusText)||(null==t||null===(a=t.error)||void 0===a?void 0:a.message)||"",u=o()(null==t||null===(l=t.error)||void 0===l?void 0:l.messageId)&&{messageId:t.error.messageId},f=c.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),y=f&&2===f.length&&f.reduce((function(e,t){var r=t.split(" "),n=r[0].replace(/Number:/g,""),a=parseFloat(r[1]);return n&&!isNaN(a)&&s(s({},e),{},i({},n,a))||s({},e)}),s({message:c},u))||s({message:c},u);return s(s({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status||t.error.message&&-1!==t.error.message.indexOf("could not be unmarshalled"))),error:s(s({},e.error),{},i({},t.status||"global",s({status:t.error&&t.error.status||404},y)))});case n.dk:return s(s({},e),{},{metadata:s(s({},e.metadata),t.metadata)});default:return e}}},10284:(e,t,r)=>{"use strict";r.d(t,{sw:()=>m,oB:()=>v});var n=r(89255),a=r(27361),o=r.n(a),l=r(5055),s=r(7526);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){var t="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return f(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,e)},u(e)}function f(e,t,r){return f=y()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&b(a,r.prototype),a},f.apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}r(24384);var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,e);var t,r,n=(t=a,r=y(),function(){var e,n=p(t);if(r){var a=p(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return c(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=n.call(this,e)).name="OGCError",r.code=t,r}return a}(u(Error)),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tagNameProcessors:[s.stripPrefix],explicitArray:!1,mergeAttrs:!0};return n.Observable.bindNodeCallback((function(e,r){return(0,l.parseString)(e,t,r)}))(e)},v=function(e){return e.switchMap((function(e){return"string"==typeof e.data&&e.data.indexOf("ExceptionReport")>0?n.Observable.bindNodeCallback((function(e,t){return(0,l.parseString)(e,{tagNameProcessors:[s.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data).map((function(e){var t=o()(e,"ExceptionReport.Exception.ExceptionText");throw new d(t||"Undefined OGC Service Error",o()(e,"ExceptionReport.Exception.exceptionCode"))})):n.Observable.of(e)}))}}}]);