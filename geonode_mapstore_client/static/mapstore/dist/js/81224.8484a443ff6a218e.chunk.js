"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[81224],{650071:(t,e,i)=>{i.d(e,{A:()=>c});var s=i(870017),n=i(234120),o=i(332135),r=i(301685);const a="length";class h extends r.Ay{constructor(t,e,i){super(t),this.element=e,this.index=i}}class l extends n.A{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,s=e.length;i<s;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(a)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new h(o.A.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,s=e.length;i<s;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new h(o.A.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new h(o.A.REMOVE,i,t)),this.dispatchEvent(new h(o.A.ADD,e,t))}updateLength_(){this.set(a,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new s.A(58)}}const c=l},332135:(t,e,i)=>{i.d(e,{A:()=>s});const s={ADD:"add",REMOVE:"remove"}},517933:(t,e,i)=>{i.d(e,{Ay:()=>C});var s=i(234120),n=i(162703),o=i(309015),r=i(657115),a=i(207434),h=i(374238),l=i(206933),c=i(190588),u=i(61597);function d(t,e,i){return function(s,n,o,r,a){if(!s)return;if(!n&&!e)return s;const h=e?0:o[0]*n,l=e?0:o[1]*n,c=a?a[0]:0,d=a?a[1]:0;let g=t[0]+h/2+c,_=t[2]-h/2+c,p=t[1]+l/2+d,f=t[3]-l/2+d;g>_&&(g=(_+g)/2,_=g),p>f&&(p=(f+p)/2,f=p);let m=(0,u.qE)(s[0],g,_),x=(0,u.qE)(s[1],p,f);if(r&&i&&n){const t=30*n;m+=-t*Math.log(1+Math.max(0,g-s[0])/t)+t*Math.log(1+Math.max(0,s[0]-_)/t),x+=-t*Math.log(1+Math.max(0,p-s[1])/t)+t*Math.log(1+Math.max(0,s[1]-f)/t)}return[m,x]}}function g(t){return t}var _=i(570915),p=i(166514);function f(t,e,i,s){const n=(0,_.RG)(e)/i[0],o=(0,_.Oq)(e)/i[1];return s?Math.min(t,Math.max(n,o)):Math.min(t,Math.min(n,o))}function m(t,e,i){let s=Math.min(t,e);return s*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(s=Math.max(s,i),s/=Math.log(1+50*Math.max(0,i/t-1))/50+1),(0,u.qE)(s,i/2,2*e)}function x(t,e,i,s,n){return i=void 0===i||i,function(o,r,a,h){if(void 0!==o){const r=s?f(t,s,a,n):t;return i&&h?m(o,r,e):(0,u.qE)(o,e,r)}}}var y=i(624498),R=i(293474),A=i(934142);class S extends s.A{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.Av)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.RJ)(),t.center&&(t.center=(0,a.Ad)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.SD)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in o.A)delete e[t];this.setProperties(e,!0);const i=function(t){let e,i,s;let n=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28;const h=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,d=void 0!==t.showFullExtent&&t.showFullExtent,g=(0,a.Av)(t.projection,"EPSG:3857"),y=g.getExtent();let R=t.constrainOnlyCenter,A=t.extent;if(l||A||!g.isGlobal()||(R=!1,A=y),void 0!==t.resolutions){const r=t.resolutions;i=r[n],s=void 0!==r[o]?r[o]:r[r.length-1],e=t.constrainResolution?function(t,e,i,s){return e=void 0===e||e,function(n,o,r,a){if(void 0!==n){const h=t[0],l=t[t.length-1],c=i?f(h,i,r,s):h;if(a)return e?m(n,c,l):(0,u.qE)(n,l,c);const d=Math.min(c,n),g=Math.floor((0,p.FT)(t,d,o));return t[g]>c&&g<t.length-1?t[g+1]:t[g]}}}(r,c,!R&&A,d):x(i,s,c,!R&&A,d)}else{const l=(y?Math.max((0,_.RG)(y),(0,_.Oq)(y)):360*a.Ig.degrees/g.getMetersPerUnit())/r.R/Math.pow(2,0),p=l/Math.pow(2,28);i=t.maxResolution,void 0!==i?n=0:i=l/Math.pow(h,n),s=t.minResolution,void 0===s&&(s=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(h,o):l/Math.pow(h,o):p),o=n+Math.floor(Math.log(i/s)/Math.log(h)),s=i/Math.pow(h,o-n),e=t.constrainResolution?function(t,e,i,s,n,o){return s=void 0===s||s,i=void 0!==i?i:0,function(r,a,h,l){if(void 0!==r){const c=n?f(e,n,h,o):e;if(l)return s?m(r,c,i):(0,u.qE)(r,i,c);const d=1e-9,g=Math.ceil(Math.log(e/c)/Math.log(t)-d),_=-a*(.5-d)+.5,p=Math.min(c,r),x=Math.floor(Math.log(e/p)/Math.log(t)+_),y=Math.max(g,x),R=e/Math.pow(t,y);return(0,u.qE)(R,i,c)}}}(h,i,s,c,!R&&A,d):x(i,s,c,!R&&A,d)}return{constraint:e,maxResolution:i,minResolution:s,minZoom:n,zoomFactor:h}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const s=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return d(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.Av)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,d(t,!1,!1)}return g}(t),n=i.constraint,h=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?(0,y.cq)():!1===e?y.dv:"number"==typeof e?(0,y.a$)(e):y.dv}return y.b8}(t);this.constraints_={center:s,resolution:n,rotation:h},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const s=t||[0,0,0,0];e=e||[0,0,0,0];const n=this.getResolution(),o=n/2*(s[3]-e[3]+e[1]-s[1]),r=n/2*(s[0]-e[0]+e[2]-s[2]);this.setCenterInternal([i[0]+o,i[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let i=arguments[t];i.center&&(i=Object.assign({},i),i.center=(0,a.Ad)(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=(0,a.Ad)(i.anchor,this.getProjection())),e[t]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i);let s=0;for(;s<i&&!this.isDef();++s){const t=arguments[s];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(s===i)return void(e&&v(e,!0));let o=Date.now(),r=this.targetCenter_.slice(),a=this.targetResolution_,h=this.targetRotation_;const l=[];for(;s<i;++s){const t=arguments[s],i={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||R.T9,callback:e};if(t.center&&(i.sourceCenter=r,i.targetCenter=t.center.slice(),r=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=a,i.targetResolution=this.getResolutionForZoom(t.zoom),a=i.targetResolution):t.resolution&&(i.sourceResolution=a,i.targetResolution=t.resolution,a=i.targetResolution),void 0!==t.rotation){i.sourceRotation=h;const e=(0,u.xP)(t.rotation-h+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=h+e,h=i.targetRotation}E(i)?i.complete=!0:o+=i.duration,l.push(i)}this.animations_.push(l),this.setHint(n.A.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[n.A.ANIMATING]>0}getInteracting(){return this.hints_[n.A.INTERACTING]>0}cancelAnimations(){let t;this.setHint(n.A.ANIMATING,-this.hints_[n.A.ANIMATING]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&v(i[0].callback,!1),!t)for(let e=0,s=i.length;e<s;++e){const s=i[e];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let o=!0;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(n.complete)continue;const r=t-n.start;let a=n.duration>0?r/n.duration:1;a>=1?(n.complete=!0,a=1):o=!1;const h=n.easing(a);if(n.sourceCenter){const t=n.sourceCenter[0],e=n.sourceCenter[1],i=n.targetCenter[0],s=n.targetCenter[1];this.nextCenter_=n.targetCenter;const o=t+h*(i-t),r=e+h*(s-e);this.targetCenter_=[o,r]}if(n.sourceResolution&&n.targetResolution){const t=1===h?n.targetResolution:n.sourceResolution+h*(n.targetResolution-n.sourceResolution);if(n.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,n.anchor)}this.nextResolution_=n.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==n.sourceRotation&&void 0!==n.targetRotation){const t=1===h?(0,u.xP)(n.targetRotation+Math.PI,2*Math.PI)-Math.PI:n.sourceRotation+h*(n.targetRotation-n.sourceRotation);if(n.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,n.anchor)}this.nextRotation_=n.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!n.complete)break}if(o){this.animations_[i]=null,this.setHint(n.A.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=s[0].callback;t&&v(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const s=this.getCenterInternal();return void 0!==s&&(i=[s[0]-e[0],s[1]-e[1]],(0,l.e$)(i,t-this.getRotation()),(0,l.WQ)(i,e)),i}calculateCenterZoom(t,e){let i;const s=this.getCenterInternal(),n=this.getResolution();return void 0!==s&&void 0!==n&&(i=[e[0]-t*(e[0]-s[0])/n,e[1]-t*(e[1]-s[1])/n]),i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],s=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(s*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,a.te)(t,this.getProjection()):t}getCenterInternal(){return this.get(o.A.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,a.JR)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();(0,c.v)(e,1);const i=this.getResolution();(0,c.v)(void 0!==i,2);const s=this.getRotation();return(0,c.v)(void 0!==s,3),(0,_.Bg)(e,i,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(o.A.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.SD)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=(0,_.RG)(t)/e[0],s=(0,_.Oq)(t)/e[1];return Math.max(i,s)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(e/i)/Math.log(t);return function(i){return e/Math.pow(t,i*s)}}getRotation(){return this.get(o.A.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,n=Math.log(i/s)/e;return function(t){return Math.log(i/t)/e/n}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const n=this.padding_;if(n){const t=this.getViewportSizeMinusPadding_();s=I(s,this.getViewportSize_(),[t[0]/2+n[3],t[1]/2+n[0]],e,i)}return{center:s.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,s=this.minZoom_||0;if(this.resolutions_){const n=(0,p.FT)(this.resolutions_,t,1);s=n,e=this.resolutions_[n],i=n==this.resolutions_.length-1?2:e/this.resolutions_[n+1]}else e=this.maxResolution_,i=this.zoomFactor_;return s+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=(0,u.qE)(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,(0,u.qE)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if((0,c.v)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,c.v)(!(0,_.Im)(t),25);const e=(0,a.SD)(t,this.getProjection());i=(0,A.VY)(e)}else if("Circle"===t.getType()){const e=(0,a.SD)(t.getExtent(),this.getProjection());i=(0,A.VY)(e),i.rotate(this.getRotation(),(0,_.q1)(e))}else{const e=(0,a.Tf)();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),s=Math.sin(-e),n=t.getFlatCoordinates(),o=t.getStride();let r=1/0,a=1/0,h=-1/0,l=-1/0;for(let t=0,e=n.length;t<e;t+=o){const e=n[t]*i-n[t+1]*s,o=n[t]*s+n[t+1]*i;r=Math.min(r,e),a=Math.min(a,o),h=Math.max(h,e),l=Math.max(l,o)}return[r,a,h,l]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const s=void 0!==e.padding?e.padding:[0,0,0,0],n=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(r,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,n?0:1);const l=this.getRotation(),c=Math.sin(l),u=Math.cos(l),d=(0,_.q1)(r);d[0]+=(s[1]-s[3])/2*a,d[1]+=(s[0]-s[2])/2*a;const g=d[0]*u-d[1]*c,p=d[1]*u+d[0]*c,f=this.getConstrainedCenter([g,p],a),m=e.callback?e.callback:h.tV;void 0!==e.duration?this.animateInternal({resolution:a,center:f,duration:e.duration,easing:e.easing},m):(this.targetResolution_=a,this.targetCenter_=f,this.applyTargetState_(!1,!0),v(m,!0))}centerOn(t,e,i){this.centerOnInternal((0,a.Ad)(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(I(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,s){let n;const o=this.padding_;if(o&&t){const r=this.getViewportSizeMinusPadding_(-i),a=I(t,s,[r[0]/2+o[3],r[1]/2+o[0]],e,i);n=[t[0]-a[0],t[1]-a[1]]}return n}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.te)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.Ad)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(this.targetResolution_*t,0,s,i);e&&(this.targetCenter_=this.calculateCenterZoom(n,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.Ad)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(s,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.Ad)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,s=this.constraints_.rotation(this.targetRotation_,i),n=this.getViewportSize_(s),r=this.constraints_.resolution(this.targetResolution_,0,n,i),a=this.constraints_.center(this.targetCenter_,r,n,i,this.calculateCenterShift(this.targetCenter_,r,s,n));this.get(o.A.ROTATION)!==s&&this.set(o.A.ROTATION,s),this.get(o.A.RESOLUTION)!==r&&(this.set(o.A.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),a&&this.get(o.A.CENTER)&&(0,l.aI)(this.get(o.A.CENTER),a)||this.set(o.A.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const s=e||0,n=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,s,o),a=this.constraints_.center(this.targetCenter_,r,o,!1,this.calculateCenterShift(this.targetCenter_,r,n,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=n,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===n&&this.getCenterInternal()&&(0,l.aI)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:n,center:a,resolution:r,duration:t,easing:R.vT,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(n.A.INTERACTING,1)}endInteraction(t,e,i){i=i&&(0,a.Ad)(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(n.A.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function v(t,e){setTimeout((function(){t(e)}),0)}function E(t){return!(t.sourceCenter&&t.targetCenter&&!(0,l.aI)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function I(t,e,i,s,n){const o=Math.cos(-n);let r=Math.sin(-n),a=t[0]*o-t[1]*r,h=t[1]*o+t[0]*r;return a+=(e[0]/2-i[0])*s,h+=(i[1]-e[1]/2)*s,r=-r,[a*o-h*r,h*o+a*r]}const C=S},162703:(t,e,i)=>{i.d(e,{A:()=>s});const s={ANIMATING:0,INTERACTING:1}},309015:(t,e,i)=>{i.d(e,{A:()=>s});const s={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},21142:(t,e,i)=>{i.d(e,{m8:()=>o,nF:()=>r});var s=i(374238);let n=!1;function o(t,e,i,s,o,r,a){const h=new XMLHttpRequest;h.open("GET","function"==typeof t?t(i,s,o):t,!0),"arraybuffer"==e.getType()&&(h.responseType="arraybuffer"),h.withCredentials=n,h.onload=function(t){if(!h.status||h.status>=200&&h.status<300){const t=e.getType();let s;"json"==t||"text"==t?s=h.responseText:"xml"==t?(s=h.responseXML,s||(s=(new DOMParser).parseFromString(h.responseText,"application/xml"))):"arraybuffer"==t&&(s=h.response),s?r(e.readFeatures(s,{extent:i,featureProjection:o}),e.readProjection(s)):a()}else a()},h.onerror=a,h.send()}function r(t,e){return function(i,n,r,a,h){const l=this;o(t,e,i,n,r,(function(t,e){l.addFeatures(t),void 0!==a&&a(t)}),h||s.tV)}}},458620:(t,e,i)=>{i.d(e,{A:()=>l});var s=i(234120),n=i(75332),o=i(104087),r=i(190588),a=i(61597);class h extends s.A{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[n.A.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,r.v)("number"==typeof e[n.A.OPACITY],64),e[n.A.VISIBLE]=void 0===t.visible||t.visible,e[n.A.Z_INDEX]=t.zIndex,e[n.A.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[n.A.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[n.A.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[n.A.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=(0,a.qE)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,o.b0)()}getLayerStatesArray(t){return(0,o.b0)()}getExtent(){return this.get(n.A.EXTENT)}getMaxResolution(){return this.get(n.A.MAX_RESOLUTION)}getMinResolution(){return this.get(n.A.MIN_RESOLUTION)}getMinZoom(){return this.get(n.A.MIN_ZOOM)}getMaxZoom(){return this.get(n.A.MAX_ZOOM)}getOpacity(){return this.get(n.A.OPACITY)}getSourceState(){return(0,o.b0)()}getVisible(){return this.get(n.A.VISIBLE)}getZIndex(){return this.get(n.A.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(n.A.EXTENT,t)}setMaxResolution(t){this.set(n.A.MAX_RESOLUTION,t)}setMinResolution(t){this.set(n.A.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(n.A.MAX_ZOOM,t)}setMinZoom(t){this.set(n.A.MIN_ZOOM,t)}setOpacity(t){(0,r.v)("number"==typeof t,64),this.set(n.A.OPACITY,t)}setVisible(t){this.set(n.A.VISIBLE,t)}setZIndex(t){this.set(n.A.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const l=h},532465:(t,e,i)=>{i.d(e,{A:()=>y});var s=i(160764),n=i(935341),o=i(429276),r=i(927733),a=i(113628),h=i(55394),l=i(986936),c=i(200953),u=i(981426);function d(t){return new o.Ay({fill:g(t,""),stroke:_(t,""),text:p(t),image:f(t)})}function g(t,e){const i=t[e+"fill-color"];if(i)return new a.A({color:i})}function _(t,e){const i=t[e+"stroke-width"],s=t[e+"stroke-color"];if(i||s)return new c.A({width:i,color:s,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function p(t){const e=t["text-value"];if(e)return new u.A({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],repeat:t["text-repeat"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:g(t,"text-"),backgroundFill:g(t,"text-background-"),stroke:_(t,"text-"),backgroundStroke:_(t,"text-background-")})}function f(t){const e=t["icon-src"],i=t["icon-img"];if(e||i)return new h.A({src:e,img:i,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],width:t["icon-width"],height:t["icon-height"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]});const s=t["shape-points"];if(s){const e="shape-";return new l.A({points:s,fill:g(t,e),stroke:_(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}const n=t["circle-radius"];if(n){const e="circle-";return new r.A({radius:n,fill:g(t,e),stroke:_(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}const m="renderOrder";class x extends s.A{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(m)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new n(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(m,t)}setStyle(t){let e;if(void 0===t)e=o.d1;else if(null===t)e=null;else if("function"==typeof t)e=t;else if(t instanceof o.Ay)e=t;else if(Array.isArray(t)){const i=t.length,s=new Array(i);for(let e=0;e<i;++e){const i=t[e];i instanceof o.Ay?s[e]=i:s[e]=d(i)}e=s}else e=d(t);this.style_=e,this.styleFunction_=null===t?void 0:(0,o.mC)(this.style_),this.changed()}}const y=x},160764:(t,e,i)=>{i.d(e,{A:()=>g,l:()=>d});var s=i(458620),n=i(506837),o=i(75332),r=i(883984),a=i(517933),h=i(190588),l=i(570915),c=i(209438);class u extends s.A{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(o.A.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(o.A.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,c.JH)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=(0,c.KT)(t,n.A.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const i=this.getMapInternal();let s;!t&&i&&(t=i.getView()),e=t instanceof a.Ay?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),s=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const n=this.getExtent();return d(s,e.viewState)&&(!n||(0,l.HY)(n,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];let s=e(t instanceof a.Ay?t.getViewStateAndExtent():t);return Array.isArray(s)||(s=[s]),s}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(o.A.MAP,t)}getMapInternal(){return this.get(o.A.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,c.JH)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,c.JH)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,c.KT)(t,r.A.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);(0,h.v)(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=(0,c.KT)(this,n.A.CHANGE,t.render,t),this.changed())}setSource(t){this.set(o.A.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function d(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const s=e.zoom;return s>t.minZoom&&s<=t.maxZoom}const g=u},75332:(t,e,i)=>{i.d(e,{A:()=>s});const s={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},712651:(t,e,i)=>{i.d(e,{A:()=>R});var s=i(532465),n=i(570587),o=i(996769),r=i(335146),a=i(162703),h=i(613663),l=i(609703),c=i(570915),u=i(568711),d=i(573608),g=i(166514),_=i(207434),p=i(104087),f=i(206933);class m extends o.A{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,c.S5)(),this.wrappedRenderedExtent_=(0,c.S5)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const s=e.extent,n=e.viewState,o=n.center,r=n.resolution,h=n.projection,l=n.rotation,u=h.getExtent(),d=this.getLayer().getSource(),g=e.pixelRatio,_=e.viewHints,p=!(_[a.A.ANIMATING]||_[a.A.INTERACTING]),f=this.compositionContext_,m=Math.round(e.size[0]*g),x=Math.round(e.size[1]*g),y=d.getWrapX()&&h.canWrapX(),R=y?(0,c.RG)(u):null,A=y?Math.ceil((s[2]-u[2])/R)+1:1;let S=y?Math.floor((s[0]-u[0])/R):0;do{const e=this.getRenderTransform(o,r,l,g,m,x,S*R);t.execute(f,1,e,l,p,void 0,i)}while(++S<A)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,u.Y)(this.context.canvas.width,this.context.canvas.height,o.B);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,u.Yg)(this.compositionContext_),o.B.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];(0,l.rQ)(this.pixelTransform,1/i,1/i),(0,l.T9)(this.inversePixelTransform,this.pixelTransform);const n=(0,l.dI)(this.pixelTransform);this.useContainer(e,n,this.getBackground(t));const o=this.context,r=o.canvas,a=this.replayGroup_,h=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!h||h.isEmpty()))return null;const u=Math.round(t.size[0]*i),d=Math.round(t.size[1]*i);r.width!=u||r.height!=d?(r.width=u,r.height=d,r.style.transform!==n&&(r.style.transform=n)):this.containerReused||o.clearRect(0,0,u,d),this.preRender(o,t);const g=t.viewState,p=g.projection;this.opacity_=s.opacity,this.setupCompositionContext_();let f=!1,m=!0;if(s.extent&&this.clipping){const e=(0,_.SD)(s.extent,p);m=(0,c.HY)(e,t.extent),f=m&&!(0,c.ms)(e,t.extent),f&&this.clipUnrotated(this.compositionContext_,t,e)}return m&&this.renderWorlds(a,t),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==g.rotation&&(this.renderedRotation_=g.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise((e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];(0,l.Bb)(this.pixelTransform,t);const e=this.renderedCenter_,i=this.renderedResolution_,s=this.renderedRotation_,n=this.renderedProjection_,o=this.wrappedRenderedExtent_,r=this.getLayer(),a=[],u=t[0]*h.tF,d=t[1]*h.tF;a.push(this.getRenderTransform(e,i,s,h.tF,u,d,0).slice());const g=r.getSource(),_=n.getExtent();if(g.getWrapX()&&n.canWrapX()&&!(0,c.ms)(_,o)){let t=o[0];const n=(0,c.RG)(_);let r,l=0;for(;t<_[0];)--l,r=n*l,a.push(this.getRenderTransform(e,i,s,h.tF,u,d,r).slice()),t+=n;for(l=0,t=o[2];t>_[2];)++l,r=n*l,a.push(this.getRenderTransform(e,i,s,h.tF,u,d,r).slice()),t-=n}this.hitDetectionImageData_=(0,h._7)(t,a,this.renderedFeatures_,r.getStyleFunction(),o,i,s)}e((0,h.F8)(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,i,s,n){if(!this.replayGroup_)return;const o=e.viewState.resolution,r=e.viewState.rotation,a=this.getLayer(),h={},l=function(t,e,i){const o=(0,p.v6)(t),r=h[o];if(r){if(!0!==r&&i<r.distanceSq){if(0===i)return h[o]=!0,n.splice(n.lastIndexOf(r),1),s(t,a,e);r.geometry=e,r.distanceSq=i}}else{if(0===i)return h[o]=!0,s(t,a,e);n.push(h[o]={feature:t,layer:a,geometry:e,distanceSq:i,callback:s})}};let c;const u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some((s=>c=s.forEachFeatureAtCoordinate(t,o,r,i,l,s===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((t=>t.value)):null))),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const s=t.viewHints[a.A.ANIMATING],o=t.viewHints[a.A.INTERACTING],h=e.getUpdateWhileAnimating(),l=e.getUpdateWhileInteracting();if(this.ready&&!h&&s||!l&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const u=t.extent,p=t.viewState,m=p.projection,x=p.resolution,y=t.pixelRatio,R=e.getRevision(),A=e.getRenderBuffer();let S=e.getRenderOrder();void 0===S&&(S=d.Eo);const v=p.center.slice(),E=(0,c.r)(u,A*x),I=E.slice(),C=[E.slice()],M=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!(0,c.ms)(M,t.extent)){const t=(0,c.RG)(M),e=Math.max((0,c.RG)(E)/2,t);E[0]=M[0]-e,E[2]=M[2]+e,(0,f.Li)(v,m);const i=(0,c.Li)(C[0],m);i[0]<M[0]&&i[2]<M[2]?C.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>M[0]&&i[2]>M[2]&&C.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==x&&this.renderedRevision_==R&&this.renderedRenderOrder_==S&&(0,c.ms)(this.wrappedRenderedExtent_,E))return(0,g.aI)(this.renderedExtent_,I)||(this.hitDetectionImageData_=null,this.renderedExtent_=I),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const T=new n.A((0,d.gY)(x,y),E,x,y);let b;this.getLayer().getDeclutter()&&(b=new n.A((0,d.gY)(x,y),E,x,y));const F=(0,_.Tf)();let w;if(F){for(let t=0,e=C.length;t<e;++t){const e=C[t],s=(0,_.JR)(e,m);i.loadFeatures(s,(0,_.vN)(x,m),F)}w=(0,_.FO)(F,m)}else for(let t=0,e=C.length;t<e;++t)i.loadFeatures(C[t],x,m);const O=(0,d.j)(x,y);let D=!0;const L=t=>{let i;const s=t.getStyleFunction()||e.getStyleFunction();if(s&&(i=s(t,x)),i){const e=this.renderFeature(t,O,i,T,w,b);D=D&&!e}},k=(0,_.JR)(E,m),P=i.getFeaturesInExtent(k);S&&P.sort(S);for(let t=0,e=P.length;t<e;++t)L(P[t]);this.renderedFeatures_=P,this.ready=D;const N=T.finish(),G=new r.A(E,x,y,i.getOverlaps(),N,e.getRenderBuffer());return b&&(this.declutterExecutorGroup=new r.A(E,x,y,i.getOverlaps(),b.finish(),e.getRenderBuffer())),this.renderedResolution_=x,this.renderedRevision_=R,this.renderedRenderOrder_=S,this.renderedExtent_=I,this.wrappedRenderedExtent_=E,this.renderedCenter_=v,this.renderedProjection_=m,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,s,n,o){if(!i)return!1;let r=!1;if(Array.isArray(i))for(let a=0,h=i.length;a<h;++a)r=(0,d.nl)(s,t,i[a],e,this.boundHandleStyleImageChange_,n,o)||r;else r=(0,d.nl)(s,t,i,e,this.boundHandleStyleImageChange_,n,o);return r}}const x=m;class y extends s.A{constructor(t){super(t)}createRenderer(){return new x(this)}}const R=y},260942:(t,e,i)=>{i.d(e,{Q7:()=>n,Qk:()=>o,Vs:()=>r});var s=i(207434);function n(t,e){return[[-1/0,-1/0,1/0,1/0]]}function o(t,e){return[t]}function r(t){return function(e,i,n){const o=t.getZForResolution((0,s.U$)(i,n)),r=t.getTileRangeForExtentAndZ((0,s.SD)(e,n),o),a=[],h=[o,0,0];for(h[1]=r.minX;h[1]<=r.maxX;++h[1])for(h[2]=r.minY;h[2]<=r.maxY;++h[2])a.push((0,s.JR)(t.getTileCoordExtent(h),n));return a}}},809960:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(301685);class n extends s.Ay{constructor(t,e,i,s){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=s}}const o=n},883984:(t,e,i)=>{i.d(e,{A:()=>s});const s={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},808130:(t,e,i)=>{i.d(e,{A:()=>d});var s=i(166429),n=i(611580),o=i(432826),r=i(977295),a=i(570915),h=i(838774),l=i(166514),c=i(956361);class u extends o.A{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,n=this.coordinates;let o=n.length;for(let r=0,h=t.length;r<h;r+=e)s[0]=t[r],s[1]=t[r+1],(0,a.Ym)(i,s)&&(n[o++]=s[0],n[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,i,s,o,r){const h=this.coordinates;let l=h.length;const c=this.getBufferedMaxExtent();r&&(e+=s);let u=t[e],d=t[e+1];const g=this.tmpCoordinate_;let _,p,f,m=!0;for(_=e+s;_<i;_+=s)g[0]=t[_],g[1]=t[_+1],f=(0,a.vz)(c,g),f!==p?(m&&(h[l++]=u,h[l++]=d,m=!1),h[l++]=g[0],h[l++]=g[1]):f===n.A.INTERSECTING?(h[l++]=g[0],h[l++]=g[1],m=!1):m=!0,u=g[0],d=g[1],p=f;return(o&&m||_===e+s)&&(h[l++]=u,h[l++]=d),l}drawCustomCoordinates_(t,e,i,s,n){for(let o=0,r=i.length;o<r;++o){const r=i[o],a=this.appendFlatLineCoordinates(t,e,r,s,!1,!1);n.push(a),e=r}return e}drawCustom(t,e,i,n){this.beginGeometry(t,e);const o=t.getType(),r=t.getStride(),a=this.coordinates.length;let h,l,u,d,g;switch(o){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),d=[];const e=t.getEndss();g=0;for(let t=0,i=e.length;t<i;++t){const i=[];g=this.drawCustomCoordinates_(h,g,e[t],r,i),d.push(i)}this.instructions.push([s.Ay.CUSTOM,a,d,t,i,c.Dz]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,d,t,n||i,c.Dz]);break;case"Polygon":case"MultiLineString":u=[],h="Polygon"==o?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),g=this.drawCustomCoordinates_(h,0,t.getEnds(),r,u),this.instructions.push([s.Ay.CUSTOM,a,u,t,i,c.cD]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,u,t,n||i,c.cD]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),l=this.appendFlatLineCoordinates(h,0,h.length,r,!1,!1),this.instructions.push([s.Ay.CUSTOM,a,l,t,i,c.n2]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,l,t,n||i,c.n2]);break;case"MultiPoint":h=t.getFlatCoordinates(),l=this.appendFlatPointCoordinates(h,r),l>a&&(this.instructions.push([s.Ay.CUSTOM,a,l,t,i,c.n2]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,l,t,n||i,c.n2]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),l=this.coordinates.length,this.instructions.push([s.Ay.CUSTOM,a,l,t,i]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,a,l,t,n||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[s.Ay.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[s.Ay.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let n,o,r=-1;for(e=0;e<i;++e)n=t[e],o=n[0],o==s.Ay.END_GEOMETRY?r=e:o==s.Ay.BEGIN_GEOMETRY&&(n[2]=e,(0,l.gI)(this.hitDetectionInstructions,r,e),r=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=(0,r.F)(e||h.qY)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=(0,r.F)(t||h.NT);const s=e.getLineCap();i.lineCap=void 0!==s?s:h._m;const n=e.getLineDash();i.lineDash=n?n.slice():h.Oq;const o=e.getLineDashOffset();i.lineDashOffset=o||h.vk;const a=e.getLineJoin();i.lineJoin=void 0!==a?a:h._K;const l=e.getWidth();i.lineWidth=void 0!==l?l:h.aq;const c=e.getMiterLimit();i.miterLimit=void 0!==c?c:h.eL,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[s.Ay.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[s.Ay.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,n=t.lineDash,o=t.lineDashOffset,r=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||n!=t.currentLineDash&&!(0,l.aI)(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=r||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=r,t.currentLineWidth=a,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[s.Ay.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,a.o8)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,a.r)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const d=u},570587:(t,e,i)=>{i.d(e,{A:()=>p});var s=i(808130),n=i(166429);class o extends s.A{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),o=this.coordinates.length,r=this.appendFlatPointCoordinates(i,s);this.instructions.push([n.Ay.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([n.Ay.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),o=this.coordinates.length,r=this.appendFlatPointCoordinates(i,s);this.instructions.push([n.Ay.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([n.Ay.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),n=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const r=o;var a=i(838774);class h extends s.A{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const o=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),a=[n.Ay.MOVE_TO_LINE_TO,o,r];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(void 0===s||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,a.Oq,a.vk],n.th);const r=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(r,0,r.length,h),this.hitDetectionInstructions.push(n.VD),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(void 0===s||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],n.th);const r=t.getEnds(),a=t.getFlatCoordinates(),h=t.getStride();let l=0;for(let t=0,e=r.length;t<e;++t)l=this.drawFlatCoordinates_(a,l,r[t],h);this.hitDetectionInstructions.push(n.VD),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(n.VD),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(n.VD),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(n.th)}}const l=h;var c=i(383671);class u extends s.A{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const o=this.state,r=void 0!==o.fillStyle,a=void 0!==o.strokeStyle,h=i.length;this.instructions.push(n.th),this.hitDetectionInstructions.push(n.th);for(let o=0;o<h;++o){const r=i[o],h=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,r,s,!0,!a),c=[n.Ay.MOVE_TO_LINE_TO,h,l];this.instructions.push(c),this.hitDetectionInstructions.push(c),a&&(this.instructions.push(n.kx),this.hitDetectionInstructions.push(n.kx)),e=r}return r&&(this.instructions.push(n.I5),this.hitDetectionInstructions.push(n.I5)),a&&(this.instructions.push(n.VD),this.hitDetectionInstructions.push(n.VD)),e}drawCircle(t,e){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(void 0===s&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([n.Ay.SET_FILL_STYLE,a.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const r=t.getFlatCoordinates(),h=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(r,0,r.length,h,!1,!1);const c=[n.Ay.CIRCLE,l];this.instructions.push(n.th,c),this.hitDetectionInstructions.push(n.th,c),void 0!==i.fillStyle&&(this.instructions.push(n.I5),this.hitDetectionInstructions.push(n.I5)),void 0!==i.strokeStyle&&(this.instructions.push(n.VD),this.hitDetectionInstructions.push(n.VD)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(void 0===s&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([n.Ay.SET_FILL_STYLE,a.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const r=t.getEnds(),h=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(h,0,r,l),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(void 0===s&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([n.Ay.SET_FILL_STYLE,a.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const r=t.getEndss(),h=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let t=0,e=r.length;t<e;++t)c=this.drawFlatCoordinatess_(h,c,r[t],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=(0,c.n$)(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}const d=u;var g=i(466982);const _={Circle:d,Default:s.A,Image:r,LineString:l,Polygon:d,Text:g.A},p=class{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const n=i[s].finish();t[e][s]=n}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let s=this.buildersByZIndex_[i];void 0===s&&(s={},this.buildersByZIndex_[i]=s);let n=s[e];return void 0===n&&(n=new(0,_[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=n),n}}},335146:(t,e,i)=>{i.d(e,{A:()=>M});var s=i(166429),n=i(466982),o=i(609703),r=i(570915),a=i(838774),h=i(61597),l=i(787622);function c(t,e,i,s,n,o,r,a,c,u,d,g){let _=t[e],p=t[e+1],f=0,m=0,x=0,y=0;function R(){f=_,m=p,_=t[e+=s],p=t[e+1],y+=x,x=Math.sqrt((_-f)*(_-f)+(p-m)*(p-m))}do{R()}while(e<i-s&&y+x<o);let A=0===x?0:(o-y)/x;const S=(0,h.Cc)(f,_,A),v=(0,h.Cc)(m,p,A),E=e-s,I=y,C=o+a*c(u,n,d);for(;e<i-s&&y+x<C;)R();A=0===x?0:(C-y)/x;const M=(0,h.Cc)(f,_,A),T=(0,h.Cc)(m,p,A);let b;if(g){const t=[S,v,M,T];(0,l.e$)(t,0,4,2,g,t,t),b=t[0]>t[2]}else b=S>M;const F=Math.PI,w=[],O=E+s===e;let D;if(x=0,y=I,_=t[e=E],p=t[e+1],O){R(),D=Math.atan2(p-m,_-f),b&&(D+=D>0?-F:F);const t=(M+S)/2,e=(T+v)/2;return w[0]=[t,e,(C-o)/2,D,n],w}for(let t=0,l=(n=n.replace(/\n/g," ")).length;t<l;){R();let g=Math.atan2(p-m,_-f);if(b&&(g+=g>0?-F:F),void 0!==D){let t=g-D;if(t+=t>F?-2*F:t<-F?2*F:0,Math.abs(t)>r)return null}D=g;const S=t;let v=0;for(;t<l;++t){const r=a*c(u,n[b?l-t-1:t],d);if(e+s<i&&y+x<o+v+r/2)break;v+=r}if(t===S)continue;const E=b?n.substring(l-S,l-t):n.substring(S,t);A=0===x?0:(o+v/2-y)/x;const I=(0,h.Cc)(f,_,A),C=(0,h.Cc)(m,p,A);w.push([I,C,v/2,g,E]),o+=v}return w}var u=i(166514),d=i(650904);const g=(0,r.S5)(),_=[],p=[],f=[],m=[];function x(t){return t[3].declutterBox}const y=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function R(t,e){return"start"!==e&&"end"!==e||y.test(t)||(e="start"===e?"left":"right"),n.E[e]}function A(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}const S=class{constructor(t,e,i,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,o.vt)(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,s){const o=t+e+i+s;if(this.labels_[o])return this.labels_[o];const r=s?this.strokeStates[s]:null,h=i?this.fillStates[i]:null,l=this.textStates[e],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(t),g=l.justify?n.E[l.justify]:R(Array.isArray(t)?t[0]:t,l.textAlign||a.MY),_=s&&r.lineWidth?r.lineWidth:0,p=d?t:t.split("\n").reduce(A,[]),{width:f,height:m,widths:x,heights:y,lineWidths:S}=(0,a.jT)(l,p),v=f+_,E=[],I=(v+2)*u[0],C=(m+_)*u[1],M={width:I<0?Math.floor(I):Math.ceil(I),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:E};1==u[0]&&1==u[1]||E.push("scale",u),s&&(E.push("strokeStyle",r.strokeStyle),E.push("lineWidth",_),E.push("lineCap",r.lineCap),E.push("lineJoin",r.lineJoin),E.push("miterLimit",r.miterLimit),E.push("setLineDash",[r.lineDash]),E.push("lineDashOffset",r.lineDashOffset)),i&&E.push("fillStyle",h.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const T=.5-g;let b=g*v+T*_;const F=[],w=[];let O,D=0,L=0,k=0,P=0;for(let t=0,e=p.length;t<e;t+=2){const e=p[t];if("\n"===e){L+=D,D=0,b=g*v+T*_,++P;continue}const n=p[t+1]||l.font;n!==O&&(s&&F.push("font",n),i&&w.push("font",n),O=n),D=Math.max(D,y[k]);const o=[e,b+T*x[k]+g*(x[k]-S[P]),.5*(_+D)+L];b+=x[k],s&&F.push("strokeText",o),i&&w.push("fillText",o),++k}return Array.prototype.push.apply(E,F),Array.prototype.push.apply(E,w),this.labels_[o]=M,M}replayTextBackground_(t,e,i,s,n,o,r){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),r&&(this.setStrokeStyle_(t,r),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,n,a,h,l,c,u,d,x,y,R,A,S){let v=i-(h*=x[0]),E=s-(l*=x[1]);const I=n+c>t?t-c:n,C=a+u>e?e-u:a,M=R[3]+I*x[0]+R[1],T=R[0]+C*x[1]+R[2],b=v-R[3],F=E-R[0];let w;return(A||0!==d)&&(_[0]=b,m[0]=b,_[1]=F,p[1]=F,p[0]=b+M,f[0]=p[0],f[1]=F+T,m[1]=f[1]),0!==d?(w=(0,o.Zz)((0,o.vt)(),i,s,1,1,d,-i,-s),(0,o.Bb)(w,_),(0,o.Bb)(w,p),(0,o.Bb)(w,f),(0,o.Bb)(w,m),(0,r.N)(Math.min(_[0],p[0],f[0],m[0]),Math.min(_[1],p[1],f[1],m[1]),Math.max(_[0],p[0],f[0],m[0]),Math.max(_[1],p[1],f[1],m[1]),g)):(0,r.N)(Math.min(b,b+M),Math.min(F,F+T),Math.max(b,b+M),Math.max(F,F+T),g),y&&(v=Math.round(v),E=Math.round(E)),{drawImageX:v,drawImageY:E,drawImageW:I,drawImageH:C,originX:c,originY:u,declutterBox:{minX:g[0],minY:g[1],maxX:g[2],maxY:g[3],value:S},canvasTransform:w,scale:x}}replayImageOrLabel_(t,e,i,s,n,o,r){const h=!(!o&&!r),l=s.declutterBox,c=t.canvas,u=r?r[2]*s.scale[0]/2:0;return l.minX-u<=c.width/e&&l.maxX+u>=0&&l.minY-u<=c.height/e&&l.maxY+u>=0&&(h&&this.replayTextBackground_(t,_,p,f,m,o,r),(0,a.Jw)(t,s.canvasTransform,n,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){const e=(0,o.Bb)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const o=this.textStates[e],r=this.createLabel(t,e,s,i),h=this.strokeStates[i],l=this.pixelRatio,c=R(Array.isArray(t)?t[0]:t,o.textAlign||a.MY),u=n.E[o.textBaseline||a.M8],d=h&&h.lineWidth?h.lineWidth:0;return{label:r,anchorX:c*(r.width/l-2*o.scale[0])+2*(.5-c)*d,anchorY:u*r.height/l+2*(.5-u)*d}}execute_(t,e,i,h,g,_,p,f){let m;this.pixelCoordinates_&&(0,u.aI)(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=(0,l.Rc)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,o.k3)(this.renderedTransform_,i));let y=0;const R=h.length;let A,S,v,E,I,C,M,T,b,F,w,O,D=0,L=0,k=0,P=null,N=null;const G=this.coordinateCache_,W=this.viewRotation_,Y=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,Z={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:W},B=this.instructions!=h||this.overlaps?0:200;let V,j,X,U;for(;y<R;){const i=h[y];switch(i[0]){case s.Ay.BEGIN_GEOMETRY:V=i[1],U=i[3],V.getGeometry()?void 0===p||(0,r.HY)(p,U.getExtent())?++y:y=i[2]+1:y=i[2];break;case s.Ay.BEGIN_PATH:L>B&&(this.fill_(t),L=0),k>B&&(t.stroke(),k=0),L||k||(t.beginPath(),E=NaN,I=NaN),++y;break;case s.Ay.CIRCLE:D=i[1];const o=m[D],h=m[D+1],l=m[D+2]-o,u=m[D+3]-h,R=Math.sqrt(l*l+u*u);t.moveTo(o+R,h),t.arc(o,h,R,0,2*Math.PI,!0),++y;break;case s.Ay.CLOSE_PATH:t.closePath(),++y;break;case s.Ay.CUSTOM:D=i[1],A=i[2];const K=i[3],z=i[4],q=6==i.length?i[5]:void 0;Z.geometry=K,Z.feature=V,y in G||(G[y]=[]);const H=G[y];q?q(m,D,A,2,H):(H[0]=m[D],H[1]=m[D+1],H.length=2),z(H,Z),++y;break;case s.Ay.DRAW_IMAGE:D=i[1],A=i[2],T=i[3],S=i[4],v=i[5];let J=i[6];const $=i[7],Q=i[8],tt=i[9],et=i[10];let it=i[11];const st=i[12];let nt=i[13];const ot=i[14],rt=i[15];if(!T&&i.length>=20){b=i[19],F=i[20],w=i[21],O=i[22];const t=this.drawLabelWithPointPlacement_(b,F,w,O);T=t.label,i[3]=T;const e=i[23];S=(t.anchorX-e)*this.pixelRatio,i[4]=S;const s=i[24];v=(t.anchorY-s)*this.pixelRatio,i[5]=v,J=T.height,i[6]=J,nt=T.width,i[13]=nt}let at,ht,lt,ct;i.length>25&&(at=i[25]),i.length>17?(ht=i[16],lt=i[17],ct=i[18]):(ht=a.Tq,lt=!1,ct=!1),et&&Y?it+=W:et||Y||(it-=W);let ut=0;for(;D<A;D+=2){if(at&&at[ut++]<nt/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(T.width,T.height,m[D],m[D+1],nt,J,S,v,Q,tt,it,st,g,ht,lt||ct,V),s=[t,e,T,i,$,lt?P:null,ct?N:null];if(f){if("none"===ot)continue;if("obstacle"===ot){f.insert(i.declutterBox);continue}{let t,e;if(rt){const i=A-D;if(!rt[i]){rt[i]=s;continue}if(t=rt[i],delete rt[i],e=x(t),f.collides(e))continue}if(f.collides(i.declutterBox))continue;t&&(f.insert(e),this.replayImageOrLabel_.apply(this,t)),f.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,s)}++y;break;case s.Ay.DRAW_CHARS:const dt=i[1],gt=i[2],_t=i[3],pt=i[4];O=i[5];const ft=i[6],mt=i[7],xt=i[8];w=i[9];const yt=i[10];b=i[11],F=i[12];const Rt=[i[13],i[13]],At=this.textStates[F],St=At.font,vt=[At.scale[0]*mt,At.scale[1]*mt];let Et;St in this.widths_?Et=this.widths_[St]:(Et={},this.widths_[St]=Et);const It=(0,d.k)(m,dt,gt,2),Ct=Math.abs(vt[0])*(0,a.TA)(St,b,Et);if(pt||Ct<=It){const i=this.textStates[F].textAlign,s=c(m,dt,gt,2,b,(It-Ct)*n.E[i],ft,Math.abs(vt[0]),a.TA,St,Et,Y?0:this.viewRotation_);t:if(s){const i=[];let n,o,r,h,l;if(w)for(n=0,o=s.length;n<o;++n){l=s[n],r=l[4],h=this.createLabel(r,F,"",w),S=l[2]+(vt[0]<0?-yt:yt),v=_t*h.height+2*(.5-_t)*yt*vt[1]/vt[0]-xt;const o=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,S,v,0,0,l[3],Rt,!1,a.Tq,!1,V);if(f&&f.collides(o.declutterBox))break t;i.push([t,e,h,o,1,null,null])}if(O)for(n=0,o=s.length;n<o;++n){l=s[n],r=l[4],h=this.createLabel(r,F,O,""),S=l[2],v=_t*h.height-xt;const o=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,S,v,0,0,l[3],Rt,!1,a.Tq,!1,V);if(f&&f.collides(o.declutterBox))break t;i.push([t,e,h,o,1,null,null])}f&&f.load(i.map(x));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++y;break;case s.Ay.END_GEOMETRY:if(void 0!==_){V=i[1];const t=_(V,U);if(t)return t}++y;break;case s.Ay.FILL:B?L++:this.fill_(t),++y;break;case s.Ay.MOVE_TO_LINE_TO:for(D=i[1],A=i[2],j=m[D],X=m[D+1],C=j+.5|0,M=X+.5|0,C===E&&M===I||(t.moveTo(j,X),E=C,I=M),D+=2;D<A;D+=2)j=m[D],X=m[D+1],C=j+.5|0,M=X+.5|0,D!=A-2&&C===E&&M===I||(t.lineTo(j,X),E=C,I=M);++y;break;case s.Ay.SET_FILL_STYLE:P=i,this.alignFill_=i[2],L&&(this.fill_(t),L=0,k&&(t.stroke(),k=0)),t.fillStyle=i[1],++y;break;case s.Ay.SET_STROKE_STYLE:N=i,k&&(t.stroke(),k=0),this.setStrokeStyle_(t,i),++y;break;case s.Ay.STROKE:B?k++:t.stroke(),++y;break;default:++y}}L&&this.fill_(t),k&&t.stroke()}execute(t,e,i,s,n,o){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,n,void 0,void 0,o)}executeHitDetection(t,e,i,s,n){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,s,n)}};var v=i(568711),E=i(643530);const I=["Polygon","Circle","LineString","Image","Text","Default"],C={},M=class{constructor(t,e,i,s,n,r){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,o.vt)(),this.createExecutors_(n)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);const s=t[e];for(const t in s){const e=s[t];i[t]=new S(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,s=t.length;e<s;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,n,a){const h=2*(s=Math.round(s))+1,l=(0,o.Zz)(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=(0,v.Y)(h,h,void 0,{willReadFrequently:!0}));const d=this.hitDetectionContext_;let g;d.canvas.width!==h||d.canvas.height!==h?(d.canvas.width=h,d.canvas.height=h):c||d.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(g=(0,r.S5)(),(0,r.$C)(g,t),(0,r.r)(g,e*(this.renderBuffer_+s),g));const _=function(t){if(void 0!==C[t])return C[t];const e=2*t+1,i=t*t,s=new Array(i+1);for(let n=0;n<=t;++n)for(let o=0;o<=t;++o){const r=n*n+o*o;if(r>i)break;let a=s[r];a||(a=[],s[r]=a),a.push(4*((t+n)*e+(t+o))+3),n>0&&a.push(4*((t-n)*e+(t+o))+3),o>0&&(a.push(4*((t+n)*e+(t-o))+3),n>0&&a.push(4*((t-n)*e+(t-o))+3))}const n=[];for(let t=0,e=s.length;t<e;++t)s[t]&&n.push(...s[t]);return C[t]=n,n}(s);let p;function f(t,e){const i=d.getImageData(0,0,h,h).data;for(let o=0,r=_.length;o<r;o++)if(i[_[o]]>0){if(!a||"Image"!==p&&"Text"!==p||a.includes(t)){const i=(_[o]-3)/4,r=s-i%h,a=s-(i/h|0),l=n(t,e,r*r+a*a);if(l)return l}d.clearRect(0,0,h,h);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);let x,y,R,A,S;for(m.sort(u.V_),x=m.length-1;x>=0;--x){const t=m[x].toString();for(R=this.executorsByZIndex_[t],y=I.length-1;y>=0;--y)if(p=I[y],A=R[p],void 0!==A&&(S=A.executeHitDetection(d,l,i,f,g),S))return S}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],n=e[2],o=e[3],r=[i,s,i,o,n,o,n,s];return(0,l.Rc)(r,0,8,2,t,r),r}isEmpty(){return(0,E.p)(this.executorsByZIndex_)}execute(t,e,i,s,n,o,r){const a=Object.keys(this.executorsByZIndex_).map(Number);let h,l,c,d,g,_;for(a.sort(u.V_),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||I,r&&a.reverse(),h=0,l=a.length;h<l;++h){const l=a[h].toString();for(g=this.executorsByZIndex_[l],c=0,d=o.length;c<d;++c)_=g[o[c]],void 0!==_&&_.execute(t,e,i,s,n,r)}this.maxExtent_&&t.restore()}}},166429:(t,e,i)=>{i.d(e,{Ay:()=>h,I5:()=>n,VD:()=>o,kx:()=>a,th:()=>r});const s={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},n=[s.FILL],o=[s.STROKE],r=[s.BEGIN_PATH],a=[s.CLOSE_PATH],h=s},466982:(t,e,i)=>{i.d(e,{E:()=>d,A:()=>_});var s=i(808130),n=i(166429),o=i(977295),r=i(838774),a=i(104087),h=i(570915),l=i(61597);function c(t,e,i,s,n){const o=[];let r=i,a=0,h=e.slice(i,2);for(;a<t&&r+n<s;){const[i,s]=h.slice(-2),c=e[r+n],u=e[r+n+1],d=Math.sqrt((c-i)*(c-i)+(u-s)*(u-s));if(a+=d,a>=t){const e=(t-a+d)/d,g=(0,l.Cc)(i,c,e),_=(0,l.Cc)(s,u,e);h.push(g,_),o.push(h),h=[g,_],a==t&&(r+=n),a=0}else if(a<t)h.push(e[r+n],e[r+n+1]),r+=n;else{const t=d-a,e=(0,l.Cc)(i,c,t/d),g=(0,l.Cc)(s,u,t/d);h.push(e,g),o.push(h),h=[e,g],a=0,r+=n}}return a>0&&o.push(h),o}function u(t,e,i,s,n){let o,r,a,h,l,c,u,d,g,_,p=i,f=i,m=0,x=0,y=i;for(r=i;r<s;r+=n){const i=e[r],s=e[r+1];void 0!==l&&(g=i-l,_=s-c,h=Math.sqrt(g*g+_*_),void 0!==u&&(x+=a,o=Math.acos((u*g+d*_)/(a*h)),o>t&&(x>m&&(m=x,p=y,f=r),x=0,y=r-n)),a=h,u=g,d=_),l=i,c=s}return x+=h,x>m?[y,r]:[p,f]}const d={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class g extends s.A{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(""===this.text_||!o||!i&&!s)return;const a=this.coordinates;let l=a.length;const d=t.getType();let g=null,_=t.getStride();if("line"!==o.placement||"LineString"!=d&&"MultiLineString"!=d&&"Polygon"!=d&&"MultiPolygon"!=d){let i=o.overflow?null:[];switch(d){case"Point":case"MultiPoint":g=t.getFlatCoordinates();break;case"LineString":g=t.getFlatMidpoint();break;case"Circle":g=t.getCenter();break;case"MultiLineString":g=t.getFlatMidpoints(),_=2;break;case"Polygon":g=t.getFlatInteriorPoint(),o.overflow||i.push(g[2]/this.resolution),_=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();g=[];for(let t=0,s=e.length;t<s;t+=3)o.overflow||i.push(e[t+2]/this.resolution),g.push(e[t],e[t+1]);if(0===g.length)return;_=2}const s=this.appendFlatPointCoordinates(g,_);if(s===l)return;if(i&&(s-l)/2!=g.length/_){let t=l/2;i=i.filter(((e,i)=>{const s=a[2*(t+i)]===g[i*_]&&a[2*(t+i)+1]===g[i*_+1];return s||--t,s}))}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let h=o.padding;if(h!=r.Tq&&(o.scale[0]<0||o.scale[1]<0)){let t=o.padding[0],e=o.padding[1],i=o.padding[2],s=o.padding[3];o.scale[0]<0&&(e=-e,s=-s),o.scale[1]<0&&(t=-t,i=-i),h=[t,e,i,s]}const c=this.pixelRatio;this.instructions.push([n.Ay.DRAW_IMAGE,l,s,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,h==r.Tq?r.Tq:h.map((function(t){return t*c})),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const u=1/c;this.hitDetectionInstructions.push([n.Ay.DRAW_IMAGE,l,s,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[u,u],NaN,void 0,this.declutterImageWithText_,h,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}else{if(!(0,h.HY)(this.getBufferedMaxExtent(),t.getExtent()))return;let i;if(g=t.getFlatCoordinates(),"LineString"==d)i=[g.length];else if("MultiLineString"==d)i=t.getEnds();else if("Polygon"==d)i=t.getEnds().slice(0,1);else if("MultiPolygon"==d){const e=t.getEndss();i=[];for(let t=0,s=e.length;t<s;++t)i.push(e[t][0])}this.beginGeometry(t,e);const s=o.repeat,n=s?void 0:o.textAlign;let r=0;for(let t=0,e=i.length;t<e;++t){let e;e=s?c(s*this.resolution,g,r,i[t],_):[g.slice(r,i[t])];for(let s=0,h=e.length;s<h;++s){const h=e[s];let c=0,d=h.length;if(null==n){const t=u(o.maxAngle,h,0,h.length,2);c=t[0],d=t[1]}for(let t=c;t<d;t+=_)a.push(h[t],h[t+1]);const g=a.length;r=i[t],this.drawChars_(l,g),l=g}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||r.MY,justify:e.justify,textBaseline:e.textBaseline||r.M8,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,r=this.textKey_,a=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,l=d[s.textBaseline],c=this.textOffsetY_*h,u=this.text_,g=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([n.Ay.DRAW_CHARS,t,e,l,s.overflow,a,s.maxAngle,h,c,o,g*h,u,r,1]),this.hitDetectionInstructions.push([n.Ay.DRAW_CHARS,t,e,l,s.overflow,a,s.maxAngle,1,c,o,g,u,r,1/h])}setTextStyle(t,e){let i,s,n;if(t){const e=t.getFill();e?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=(0,o.F)(e.getColor()||r.qY)):(s=null,this.textFillState_=s);const h=t.getStroke();if(h){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);const t=h.getLineDash(),e=h.getLineDashOffset(),i=h.getWidth(),s=h.getMiterLimit();n.lineCap=h.getLineCap()||r._m,n.lineDash=t?t.slice():r.Oq,n.lineDashOffset=void 0===e?r.vk:e,n.lineJoin=h.getLineJoin()||r._K,n.lineWidth=void 0===i?r.aq:i,n.miterLimit=void 0===s?r.eL:s,n.strokeStyle=(0,o.F)(h.getColor()||r.NT)}else n=null,this.textStrokeState_=n;i=this.textState_;const l=t.getFont()||r.ZV;(0,r.fZ)(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||r.M8,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||r.Tq,i.scale=void 0===c?[1,1]:c;const u=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===_?0:_,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,a.v6)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+(0,a.v6)(s.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}const _=g},613663:(t,e,i)=>{i.d(e,{F8:()=>u,_7:()=>c,tF:()=>l});var s=i(702236),n=i(55394),o=i(166514),r=i(61597),a=i(568711),h=i(570915);const l=.5;function c(t,e,i,r,c,u,d){const g=t[0]*l,_=t[1]*l,p=(0,a.Y)(g,_);p.imageSmoothingEnabled=!1;const f=p.canvas,m=new s.A(p,l,c,null,d),x=i.length,y=Math.floor(16777215/x),R={};for(let t=1;t<=x;++t){const e=i[t-1],s=e.getStyleFunction()||r;if(!r)continue;let o=s(e,u);if(!o)continue;Array.isArray(o)||(o=[o]);const l=(t*y).toString(16).padStart(7,"#00000");for(let t=0,i=o.length;t<i;++t){const i=o[t],s=i.getGeometryFunction()(e);if(!s||!(0,h.HY)(c,s.getExtent()))continue;const r=i.clone(),u=r.getFill();u&&u.setColor(l);const d=r.getStroke();d&&(d.setColor(l),d.setLineDash(null)),r.setText(void 0);const g=i.getImage();if(g&&0!==g.getOpacity()){const t=g.getImageSize();if(!t)continue;const e=(0,a.Y)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=l,e.fillRect(0,0,i.width,i.height),r.setImage(new n.A({img:i,imgSize:t,anchor:g.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:g.getOrigin(),opacity:1,size:g.getSize(),scale:g.getScale(),rotation:g.getRotation(),rotateWithView:g.getRotateWithView()}))}const _=r.getZIndex()||0;let p=R[_];p||(p={},R[_]=p,p.Polygon=[],p.Circle=[],p.LineString=[],p.Point=[]);const f=s.getType();if("GeometryCollection"===f){const t=s.getGeometriesArrayRecursive();for(let e=0,i=t.length;e<i;++e){const i=t[e];p[i.getType().replace("Multi","")].push(i,r)}}else p[f.replace("Multi","")].push(s,r)}}const A=Object.keys(R).map(Number).sort(o.V_);for(let t=0,i=A.length;t<i;++t){const i=R[A[t]];for(const t in i){const s=i[t];for(let t=0,i=s.length;t<i;t+=2){m.setStyle(s[t+1]);for(let i=0,n=e.length;i<n;++i)m.setTransform(e[i]),m.drawGeometry(s[t])}}}return p.getImageData(0,0,f.width,f.height)}function u(t,e,i){const s=[];if(i){const n=Math.floor(Math.round(t[0])*l),o=Math.floor(Math.round(t[1])*l),a=4*((0,r.qE)(n,0,i.width-1)+(0,r.qE)(o,0,i.height-1)*i.width),h=i.data[a],c=i.data[a+1],u=i.data[a+2]+256*(c+256*h),d=Math.floor(16777215/e.length);u&&u%d==0&&s.push(e[u/d-1])}return s}},5986:(t,e,i)=>{i.d(e,{A:()=>h});var s=i(506837),n=i(706141),o=i(111854),r=i(104087);class a extends o.A{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,r.b0)()}getData(t){return null}prepareFrame(t){return(0,r.b0)()}renderFrame(t,e){return(0,r.b0)()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(s,n)=>{const o=this.loadedTileCallback.bind(this,i,s);return t.forEachLoadedTile(e,s,n,o)}}forEachFeatureAtCoordinate(t,e,i,s,n){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===n.A.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=n.A.LOADED&&e!=n.A.ERROR&&t.addEventListener(s.A.CHANGE,this.boundHandleImageChange_),e==n.A.IDLE&&(t.load(),e=t.getState()),e==n.A.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const h=a},996769:(t,e,i)=>{i.d(e,{A:()=>_,B:()=>u});var s=i(5986),n=i(809960),o=i(883984),r=i(609703),a=i(789352),h=i(568711),l=i(166514),c=i(570915);const u=[];let d=null;class g extends s.A{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,r.vt)(),this.pixelTransform=(0,r.vt)(),this.inversePixelTransform=(0,r.vt)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let s;d||(d=(0,h.Y)(1,1,void 0,{willReadFrequently:!0})),d.clearRect(0,0,1,1);try{d.drawImage(t,e,i,1,1,0,0,1,1),s=d.getImageData(0,0,1,1).data}catch(t){return d=null,null}return s}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const s=this.getLayer().getClassName();let n,o;if(t&&t.className===s&&(!i||t&&t.style.backgroundColor&&(0,l.aI)((0,a._j)(t.style.backgroundColor),(0,a._j)(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){n=document.createElement("div"),n.className=s;let t=n.style;t.position="absolute",t.width="100%",t.height="100%",o=(0,h.Y)();const e=o.canvas;n.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=n,this.context=o}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const s=(0,c.Py)(i),n=(0,c.WU)(i),o=(0,c.k_)(i),a=(0,c.R)(i);(0,r.Bb)(e.coordinateToPixelTransform,s),(0,r.Bb)(e.coordinateToPixelTransform,n),(0,r.Bb)(e.coordinateToPixelTransform,o),(0,r.Bb)(e.coordinateToPixelTransform,a);const h=this.inversePixelTransform;(0,r.Bb)(h,s),(0,r.Bb)(h,n),(0,r.Bb)(h,o),(0,r.Bb)(h,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){const s=this.getLayer();if(s.hasListener(t)){const o=new n.A(t,this.inversePixelTransform,i,e);s.dispatchEvent(o)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(o.A.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(o.A.POSTRENDER,t,e)}getRenderTransform(t,e,i,s,n,o,a){const h=n/2,l=o/2,c=s/e,u=-c,d=-t[0]+a,g=-t[1];return(0,r.Zz)(this.tempTransform,h,l,c,u,-i,d,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const _=g},16444:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(234120),n=i(207434);class o extends s.A{constructor(t){super(),this.projection=(0,n.Jt)(t.projection),this.attributions_=r(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=r(t),this.changed()}setState(t){this.state_=t,this.changed()}}function r(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const a=o},754602:(t,e,i)=>{i.d(e,{A:()=>S});var s=i(650071),n=i(332135),o=i(301685),r=i(506837),a=i(228450),h=i(495902),l=i(16444),c=i(88280),u=i(374238),d=i(260942),g=i(190588),_=i(570915),p=i(166514),f=i(104087),m=i(643530),x=i(209438),y=i(21142);class R extends o.Ay{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class A extends l.A{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=u.tV,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,g.v)(this.format_,7),this.loader_=(0,y.nF)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:d.Q7;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,n;this.featuresRtree_=e?new h.A:null,this.loadedExtentsRtree_=new h.A,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?n=t.features:t.features&&(i=t.features,n=i.getArray()),e||void 0!==i||(i=new s.A(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,f.v6)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new R(c.A.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[(0,x.KT)(e,r.A.CHANGE,this.handleFeatureChange_,this),(0,x.KT)(e,a.A.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const s=e.getId();return void 0!==s&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=e),i&&((0,g.v)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],s=[];for(let e=0,s=t.length;e<s;e++){const s=t[e],n=(0,f.v6)(s);this.addToIndex_(n,s)&&i.push(s)}for(let t=0,n=i.length;t<n;t++){const n=i[t],o=(0,f.v6)(n);this.setupChangeEvents_(o,n);const r=n.getGeometry();if(r){const t=r.getExtent();e.push(t),s.push(n)}else this.nullGeometryFeatures_[o]=n}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(c.A.ADDFEATURE))for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new R(c.A.ADDFEATURE,i[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(c.A.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(c.A.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(n.A.ADD,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(n.A.REMOVE,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(x.JH);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new R(c.A.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){if(i.getGeometry().intersectsCoordinate(t))return e(i)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){const t=e(i);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,m.p)(this.nullGeometryFeatures_)||(0,p.X$)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=(0,_.QJ)(t,e);return[].concat(...i.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],s=t[1];let n=null;const o=[NaN,NaN];let r=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||u.rT,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),h=r;if(r=e.closestPointXY(i,s,o,r),r<h){n=t;const e=Math.sqrt(r);a[0]=i-e,a[1]=s-e,a[2]=i+e,a[3]=s+e}}})),n}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=(0,f.v6)(e),s=e.getGeometry();if(s){const t=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const n=e.getId();if(void 0!==n){const t=n.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new R(c.A.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:(0,f.v6)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,m.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const s=this.loadedExtentsRtree_,n=this.strategy_(t,e,i);for(let t=0,o=n.length;t<o;++t){const o=n[t];s.forEachInExtent(o,(function(t){return(0,_.ms)(t.extent,o)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new R(c.A.FEATURESLOADSTART)),this.loader_.call(this,o,e,i,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new R(c.A.FEATURESLOADEND,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new R(c.A.FEATURESLOADERROR))})),s.insert(o,{extent:o.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,(function(e){if((0,_.aI)(e.extent,t))return i=e,!0})),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=(0,f.v6)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=(0,f.v6)(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(x.JH),delete this.featureChangeKeys_[e];const s=t.getId();return void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[e],this.dispatchEvent(new R(c.A.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){(0,g.v)(this.format_,7),this.url_=t,this.setLoader((0,y.nF)(t,this.format_))}}const S=A},88280:(t,e,i)=>{i.d(e,{A:()=>s});const s={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},495902:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(935341),n=i(570915),o=i(104087),r=i(643530);const a=class{constructor(t){this.rbush_=new s(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,o.v6)(e)]=i}load(t,e){const i=new Array(e.length);for(let s=0,n=e.length;s<n;s++){const n=t[s],r=e[s],a={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:r};i[s]=a,this.items_[(0,o.v6)(r)]=a}this.rbush_.load(i)}remove(t){const e=(0,o.v6)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[(0,o.v6)(e)],s=[i.minX,i.minY,i.maxX,i.maxY];(0,n.aI)(s,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let s=0,n=t.length;s<n;s++)if(i=e(t[s]),i)return i;return i}isEmpty(){return(0,r.p)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,n.N)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}},657115:(t,e,i)=>{i.d(e,{L:()=>s,R:()=>n});const s=42,n=256}}]);