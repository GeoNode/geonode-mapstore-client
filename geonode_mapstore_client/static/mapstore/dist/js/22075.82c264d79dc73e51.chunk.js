"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[22075],{277327:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(273517),a=r.n(n),o=r(904113),l=r(8571);function i(e){var t=e.msgId,r=e.icon;return a().createElement("div",{className:"gn-main-event-container"},a().createElement("div",{className:"gn-main-event-content"},a().createElement("div",{className:"gn-main-event-text"},a().createElement("div",{className:"gn-main-icon"},a().createElement(o.A,{name:r})),t&&a().createElement(l.A,{msgId:t}))))}i.defaultProps={msgId:"",icon:"exclamation"};const u=i},338877:(e,t,r)=>{r.d(t,{A:()=>O});var n=r(273517),a=r.n(n),o=r(995531),l=r(738221),i=r.n(l),u=r(962193),c=r.n(u),s=r(192016),m=r(551783);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var f=["loadOptions","pageSize","debounceTime","labelKey","valueKey","newOptionPromptText"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(null,arguments)}function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t,r){return(t=function(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,i=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var E=(0,m.A)("placeholder")(s.Ay);const O=function(e){var t=e.loadOptions,r=e.pageSize,l=void 0===r?20:r,u=e.debounceTime,s=void 0===u?500:u,m=e.labelKey,d=void 0===m?"label":m,g=e.valueKey,h=void 0===g?"value":g,O=e.newOptionPromptText,S=void 0===O?"Create option":O,w=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,f),j=b((0,n.useState)(""),2),P=j[0],A=j[1],k=b((0,n.useState)(!1),2),T=k[0],C=k[1],x=b((0,n.useState)(!1),2),N=x[0],F=x[1],I=b((0,n.useState)(!1),2),q=I[0],D=I[1],K=b((0,n.useState)(1),2),_=K[0],$=K[1],B=b((0,n.useState)([]),2),R=B[0],M=B[1],L=(0,n.useRef)(),U=(0,n.useRef)(),z=(0,n.useRef)();return z.current=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(){var e;L.current&&(null===(e=L.current)||void 0===e||e.cancel(),L.current=void 0);var t=o.A.CancelToken;L.current=t.source()}();var r=e.q,n=null!=r?r:P;C(!0);var a=e.page||_;t({q:n,page:a,pageSize:l,config:{cancelToken:L.current.token}}).then((function(e){var t=e.results.map((function(e){return e.selectOption}));t=function(e,t){if(w.creatable&&!c()(t)){var r,n=function(e){var r;return(null==e||null===(r=e[d])||void 0===r?void 0:r.toLowerCase())===t.toLowerCase()},a=null===(r=w.value)||void 0===r?void 0:r.some(n),o=e.some(n);return a||o?e:[y(y(y({},d,"".concat(S,' "').concat(t,'"')),h,t),"result",y(y({},h,t),d,t))].concat(e)}return e}(t=1===a?t:[].concat(v(R),v(t)),n),M(t),F(e.isNextPageAvailable),C(!1),L.current=void 0})).catch((function(){M([]),F(!1),C(!1),L.current=void 0}))},(0,n.useEffect)((function(){U.current=i()((function(e){e!==P&&(A(e),$(1),M([]),z.current({q:e,page:1}))}),s)}),[P]),(0,n.useEffect)((function(){q&&(A(""),$(1),M([]),z.current({q:"",page:1}))}),[q]),(0,n.useEffect)((function(){_>1&&z.current()}),[_]),a().createElement(E,p({},w,{isLoading:T,options:R,labelKey:d,valueKey:h,onOpen:function(){return D(!0)},onClose:function(){return D(!1)},filterOptions:function(e){return e.map((function(e){var t=/\"(.*?)\"/.exec(P);return t?t[1]:e}))},onInputChange:function(e){return t=e,L.current&&(null===(r=L.current)||void 0===r||r.cancel(),L.current=void 0),U.current.cancel(),void U.current(t);var t,r},onMenuScrollToBottom:function(){!T&&N&&$(_+1)}}))}},722075:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Pe});var n=r(273517),a=r.n(n),o=r(605556),l=r.n(o),i=r(548975),u=r(466732),c=r(8117),s=r(962193),m=r.n(s),d=r(192202),f=r(8571),p=r(899703);var v=r(487581),y=(0,n.lazy)((function(){return Promise.all([r.e(72208),r.e(53651)]).then(r.bind(r,653651))}));const b={SelectWidget:function(e){return a().createElement(p.A,e)},TextareaWidget:function(e){var t=e.id,r=e.options,o=void 0===r?{}:r,l=e.value,i=e.onChange;return null!=o&&o["geonode-ui:richTextEditor"]?a().createElement(n.Suspense,{fallback:null},a().createElement(y,{id:t,value:l,onChange:i})):a().createElement(v.A,e)}};var g=r(320089);var h=r(770491),E=["key"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(null,arguments)}var S=r(904113),w=r(628017),j=r(553493),P=r(551783),A=["onChange","value","debounceTime"];function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(null,arguments)}var T=(0,P.A)("placeholder")(c.MJ);const C=(0,j.A)("onChange","value")((function(e){var t=e.onChange,r=e.value,n=(e.debounceTime,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,A));return a().createElement(T,k({},n,{value:r,onChange:function(e){return t(e.target.value)}}))}));function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=function(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,i=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return K(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t=document.querySelector("[for=".concat(e,"]"))||document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})};function $(e){var t=e.idSchema,r=e.title,o=e.group,l=e.expanded,i=q((0,n.useState)(!1),2),u=i[0],s=i[1],m=o.some((function(e){return e.error})),d=void 0===l?u:l;return a().createElement("li",null,a().createElement(g.A,{className:m?"gn-metadata-error":"",size:"xs",onClick:function(){return s((function(e){return!e}))}},a().createElement(c.e6,{glyph:d?"bottom":"next"})," ",r,m?a().createElement(a().Fragment,null," ",a().createElement(S.A,{name:"exclamation"})):null),d?a().createElement("ul",null,o.map((function(e){return a().createElement("li",{key:e.name},a().createElement(g.A,{size:"xs",className:e.error?"gn-metadata-error":"",onClick:function(){var r;return _(null===(r=t[e.name])||void 0===r?void 0:r.$id)}},e.title,e.error?a().createElement(a().Fragment,null," ",a().createElement(S.A,{name:"exclamation"})):null))}))):null)}function B(e,t){var r=e.idSchema,o=e.schema,l=e.uiSchema,i=e.properties,u=e.errorSchema,c=e.formContext.title,s=q((0,n.useState)(""),2),m=s[0],d=s[1],p=i.reduce((function(e,r){var n,a,i=(null==o||null===(n=o.properties)||void 0===n||null===(n=n[r.name])||void 0===n?void 0:n.title)||r.name,c=(null==l?void 0:l[null==r?void 0:r.name])||{},s=(null==c?void 0:c["ui:options"])||{};if("hidden"===((null==c?void 0:c["ui:widget"])||s.widget)||!i.toLowerCase().includes((m||"").toLowerCase()))return e;var d,f=(null==s?void 0:s["geonode-ui:group"])||(0,w.kA)(t.messages,"gnviewer.metadataGroupTitle"),p=e[f]||[];return F(F({},e),{},I({},f,[].concat(function(e){if(Array.isArray(e))return K(e)}(d=p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||D(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[F(F({},r),{},{uiSchema:c,schema:null==o||null===(a=o.properties)||void 0===a?void 0:a[r.name],error:u[r.name],title:i})])))}),{}),v="gn-metadata-title",y=!Object.keys(p).some((function(e){return p[e].length>0}));return a().createElement("div",{className:"gn-metadata-layout"},a().createElement("ul",{className:"gn-metadata-list"},a().createElement(C,{placeholder:"gnviewer.filterMetadata",value:m,onChange:function(e){return d(e)}}),c?a().createElement("li",null,a().createElement(g.A,{size:"xs",onClick:function(){return _(v)}},a().createElement(f.A,{msgId:"gnviewer.metadataFor"})," ",c)):null,Object.keys(p).filter((function(e){return p[e].length>0})).map((function(e){var t=p[e];return a().createElement($,{key:e,idSchema:r,title:e,group:t,expanded:!!m||void 0})}))),a().createElement("div",{className:"gn-metadata-groups"},c?a().createElement("div",{id:v,className:"gn-metadata-title"},a().createElement(f.A,{msgId:"gnviewer.metadataFor"})," ",c):null,y?a().createElement("div",{className:"field"},a().createElement(f.A,{msgId:"gnviewer.noMetadataFound"})):null,Object.keys(p).filter((function(e){return p[e].length>0})).map((function(e,t){var r=p[e];return a().createElement("div",{className:"gn-metadata-group",key:t},a().createElement("div",{className:"gn-metadata-group-title"},e),r.map((function(e,r){return a().createElement(a().Fragment,{key:"".concat(t,"_").concat(r)},e.content)})))}))))}B.contextTypes={messages:l().object};var R=r(739875),M=r(36963);const L=(0,R.A)((function(e){return a().createElement("span",e,a().createElement(M.A,{name:"info-circle"}))})),U={ArrayFieldItemTemplate:function(e){var t=e.children,r=e.className,n=e.disabled,o=e.hasToolbar,l=e.hasMoveDown,i=e.hasMoveUp,u=e.hasRemove,c=e.hasCopy,s=e.index,m=e.onCopyIndexClick,d=e.onDropIndexClick,f=e.onReorderClick,p=e.readonly,v=e.registry,y=e.uiSchema,b=v.templates.ButtonTemplates,g=b.CopyButton,h=b.MoveDownButton,E=b.MoveUpButton,O=b.RemoveButton;return a().createElement("div",{className:r},t,o&&a().createElement(a().Fragment,null,(i||l)&&a().createElement(E,{disabled:n||p||!i,onClick:f(s,s-1),uiSchema:y,registry:v}),(i||l)&&a().createElement(h,{disabled:n||p||!l,onClick:f(s,s+1),uiSchema:y,registry:v}),c&&a().createElement(g,{disabled:n||p,onClick:m(s),uiSchema:y,registry:v}),u&&a().createElement(O,{disabled:n||p,onClick:d(s),uiSchema:y,registry:v})))},ArrayFieldTemplate:function(e){var t=e.canAdd,r=e.disabled,n=e.idSchema,o=e.uiSchema,l=e.items,i=e.onAddClick,u=e.readonly,c=e.registry,s=e.required,m=e.schema,d=e.title,f=(0,h.$R)(o),p=(0,h.$F)("ArrayFieldDescriptionTemplate",c,f),v=(0,h.$F)("ArrayFieldItemTemplate",c,f),y=(0,h.$F)("ArrayFieldTitleTemplate",c,f),b=c.templates.ButtonTemplates.AddButton;return a().createElement("div",{id:n.$id},a().createElement("div",{className:"field-array-header"},a().createElement(y,{idSchema:n,title:f.title||d,required:s,schema:m,uiSchema:o,registry:c,description:a().createElement(p,{idSchema:n,description:f.description||m.description,schema:m,uiSchema:o,registry:c})}),t&&a().createElement(b,{className:"array-item-add",onClick:i,disabled:r||u,uiSchema:o,registry:c})),a().createElement("div",{className:"array-item-list"},l&&l.map((function(e){var t=e.key,r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,E);return a().createElement(v,O({key:t},r))}))))},ArrayFieldTitleTemplate:function(e){var t=e.idSchema,r=e.title,n=e.schema,o=e.uiSchema,l=e.required,i=e.registry,u=e.description,c=(0,h.$R)(o,i.globalUiOptions),s=c.label;if(!r||void 0!==s&&!s)return null;var m=(0,h.$F)("TitleFieldTemplate",i,c);return a().createElement(m,{id:(0,h.EH)(t),title:r,required:l,schema:n,uiSchema:o,registry:i,description:u})},ObjectFieldTemplate:function(e){var t;if("root"===(null==e||null===(t=e.idSchema)||void 0===t?void 0:t.$id))return a().createElement(B,e);var r=e.description,n=e.disabled,o=e.formData,l=e.idSchema,i=e.onAddClick,u=e.properties,c=e.readonly,s=e.registry,m=e.required,d=e.schema,f=e.title,p=e.uiSchema,v=(0,h.$R)(p),y=(0,h.$F)("TitleFieldTemplate",s,v),b=(0,h.$F)("DescriptionFieldTemplate",s,v),g=s.templates.ButtonTemplates.AddButton;return a().createElement("div",{id:l.$id},f&&a().createElement(y,{id:(0,h.EH)(l),title:f,required:m,schema:d,uiSchema:p,registry:s,description:a().createElement(b,{id:(0,h.IR)(l),description:r,schema:d,uiSchema:p,registry:s})}),null!=u&&u.length?a().createElement("div",{className:"field-object-properties"},u.map((function(e){return e.content}))):null,(0,h.Xl)(d,p,o)&&a().createElement(g,{onClick:i(d),disabled:n||c,uiSchema:p,registry:s}))},TitleFieldTemplate:function(e){var t=e.id,r=e.required,n=e.title,o=e.description;return a().createElement("div",{id:t},a().createElement("label",null,n,r&&a().createElement("span",{className:"required"}," ","*"),o?a().createElement(a().Fragment,null," ",o):null))},DescriptionFieldTemplate:function(e){var t=e.description,r=e.id;return m()(t)?null:a().createElement(L,{id:r,tooltip:t,tooltipPosition:"right"})},ErrorListTemplate:function(){return null},FieldTemplate:function(e){var t=e.id,r=e.label,n=e.children,o=e.errors,l=e.help,i=e.description,u=e.hidden,c=e.required,s=e.displayLabel,m=e.registry,d=e.uiSchema,f=(0,h.$R)(d),p=(0,h.$F)("WrapIfAdditionalTemplate",m,f);return u?a().createElement("div",{className:"hidden"},n):a().createElement(p,e,s&&a().createElement("label",{className:"control-label",htmlFor:t},r,c&&a().createElement("span",{className:"required"}," ","*"),i?a().createElement(a().Fragment,null," ",i):null),n,o,l)},ButtonTemplates:{AddButton:function(e){var t=e.onClick,r=e.disabled;return a().createElement(g.A,{disabled:r,className:"square-button-md",onClick:t,variant:"primary"},a().createElement(c.e6,{glyph:"plus"}))},MoveUpButton:function(e){var t=e.onClick,r=e.disabled;return a().createElement(g.A,{disabled:r,className:"square-button-md",onClick:t,style:r?{visibility:"hidden"}:{}},a().createElement(c.e6,{glyph:"arrow-up"}))},MoveDownButton:function(e){var t=e.onClick,r=e.disabled;return a().createElement(g.A,{disabled:r,className:"square-button-md",onClick:t,style:r?{visibility:"hidden"}:{}},a().createElement(c.e6,{glyph:"arrow-down"}))},RemoveButton:function(e){var t=e.onClick,r=e.disabled;return a().createElement(g.A,{disabled:r,className:"square-button-md",onClick:t},a().createElement(c.e6,{glyph:"trash"}))}}};var z=r(995531),W=r(499084),H=r.n(W),V=r(185015),G=r.n(V),J=r(956449),X=r.n(J),Q=r(338877);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}var Z=["className","description","error","helpTitleIcon","id","labelKey","name","title","value","valueKey","showLabel","required"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ee.apply(null,arguments)}function te(e,t,r){return(t=function(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var re=function(e){var t=e.className,r=e.description,n=e.error,o=e.helpTitleIcon,l=e.id,i=e.labelKey,u=void 0===i?"label":i,c=e.name,s=e.title,d=e.value,f=e.valueKey,p=void 0===f?"value":f,v=e.showLabel,y=void 0===v||v,b=e.required,g=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Z);return a().createElement("div",{className:"form-group".concat(t?" "+t:"").concat(n?" has-error":"")},y?a().createElement("label",{className:"control-label",htmlFor:l},s||c,b?a().createElement("span",{className:"required"}," ","*"):null,o&&!m()(r)?a().createElement(a().Fragment,null," ",a().createElement(L,{tooltip:r,tooltipPosition:"right"})):null):null,a().createElement(Q.A,ee({},g,{id:l,value:d&&X()(d)?d.map((function(e){return te(te({result:e},p,G()(e)?e:e[p]),u,G()(e)?e:e[u])})):d,valueKey:p,labelKey:u})),n)};re.propTypes={className:l().string,description:l().string,error:l().element,helpTitleIcon:l().bool,id:l().string.isRequired,labelKey:l().string,name:l().string,title:l().string,value:l().any.isRequired,valueKey:l().string,showLabel:l().bool};const ne=re;var ae=r(283306);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}var le=["name"],ie=["result"],ue=["q","config"];function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ce.apply(null,arguments)}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return(t=function(e){var t=function(e){if("object"!=oe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pe(e,t){return Object.keys(t||{}).some((function(r){var n;return r===e||!(null===(n=t[r])||void 0===n||!n.properties)&&pe(e,t[r].properties)}))}function ve(e){var t,r=e.name,n=fe(e,le),a=(r||"").split("-"),o=parseFloat(a[a.length-1]);return!isNaN(o)&&!pe(r,null==n||null===(t=n.registry)||void 0===t||null===(t=t.rootSchema)||void 0===t?void 0:t.properties)}const ye={SchemaField:function(e){var t,r,n,o,l=e.onChange,i=e.schema,u=e.formData,c=e.idSchema,s=e.name,d=e.errorSchema,f=e.uiSchema,p=e.required,v=null==f?void 0:f["ui:options"],y=null==v?void 0:v["geonode-ui:autocomplete"],b="string"===(null==i||null===(t=i.items)||void 0===t?void 0:t.type),g="object"===(null==i||null===(r=i.items)||void 0===r?void 0:r.type),h="array"===(null==i?void 0:i.type)&&(b||g&&!m()(null==i||null===(n=i.items)||void 0===n?void 0:n.properties)),E="object"===(null==i?void 0:i.type)&&!m()(null==i?void 0:i.properties);if(y&&(h||E)){var O,S=v.classNames,w=v.style,j=v.description,P=v.disabled,A=v.help,k=v.hideError,T=v.label,C=v.placeholder,x=v.title,N=(k?[]:H()(d)).reduce((function(e,t){return null!=t&&t.__errors?e.push({messages:t.__errors}):Object.keys(t||{}).forEach((function(r){var n;null!==(n=t[r])&&void 0!==n&&n.__errors&&e.push({key:r,messages:t[r].__errors})})),e}),[]),F=G()(y)?{url:y}:y,I=null==F?void 0:F.url,q=(null==F?void 0:F.queryKey)||"q",D=(null==F?void 0:F.resultsKey)||"results",K=(null==F?void 0:F.valueKey)||"id",_=(null==F?void 0:F.labelKey)||"label",$=!(null==F||!F.creatable),B=null!=C?C:" ",R={className:"field".concat(S?" "+S:""),clearable:!p,creatable:$,id:c.$id,labelKey:_,multi:h,name:s,placeholder:B,showLabel:null==T||T,title:null!=x?x:i.title,value:u,valueKey:K,helpTitleIcon:!0,description:null!==(O=null!=A?A:j)&&void 0!==O?O:i.description,disabled:P||(null==e?void 0:e.readonly),style:w,required:p,onChange:function(e){var t,r=null!==(t=null==e?void 0:e.result)&&void 0!==t?t:void 0;return l(h?e.map((function(e){var t,r=e.result,n=fe(e,ie);return void 0===r?n:G()(r)?r:b?r[K]:Object.fromEntries(Object.keys(null===(t=i.items)||void 0===t?void 0:t.properties).map((function(e){return[e,r[e]]})))})):r)},loadOptions:function(e){var t=e.q,r=e.config,n=fe(e,ue);return z.A.get(I,me(me({},r),{},{params:me(me(me({},n),t&&de({},q,t)),{},{page:n.page})})).then((function(e){var t,r=e.data;return{isNextPageAvailable:!(null===(t=r.pagination)||void 0===t||!t.more),results:null==r?void 0:r[D].map((function(e){return{selectOption:de(de({result:e},K,G()(e)?e:e[K]),_,G()(e)?e:e[_])}}))}}))},error:m()(N)?null:a().createElement(a().Fragment,null,N.map((function(e,t){return a().createElement("ul",{key:t,className:"text-danger"},H()(e.messages).map((function(t,r){return a().createElement("li",{key:r},e.key?"".concat(e.key,": "):"",t)})))})))};return a().createElement(ne,R)}var M=ve(e);return a().createElement(ae.A,ce({},e,{uiSchema:M?me(me({},e.uiSchema),{},{"ui:label":!1,"ui:options":me(me({},null===(o=e.uiSchema)||void 0===o?void 0:o["ui:options"]),{},{label:!1})}):f}))}};var be=r(277327),ge=r(866875);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}var Ee=["__errors"];function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e,t,r){return(t=function(e){var t=function(e){if("object"!=he(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){var r=e.pk,o=e.loading,l=e.error,s=e.extraErrors,p=e.metadata,v=e.schema,y=e.uiSchema,g=e.updateError,h=e.setLoading,E=e.setError,O=e.setUISchema,S=e.setSchema,j=e.setMetadata,P=e.setInitialMetadata,A=e.setUpdateError,k=e.setResource,T=e.updating,C=e.setExtraErrors,x=e.readOnly,N=t.messages,F=(0,n.useRef)(!1),I=(0,n.useRef)(),q=null!=s?s:{},D=q.__errors,K=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(q,Ee);return I.current=function(e){null!=e&&e.validateForm&&!F.current&&(F.current=!0,m()(K)&&e.validateForm())},(0,n.useEffect)((function(){r&&(h(!0),E(!1),(0,d._T)(r).then((function(e){O(e.uiSchema),S(e.schema),j(e.metadata),P(e.metadata),k(e.resource),C(e.extraErrors)})).catch((function(){E(!0)})).finally((function(){h(!1)})))}),[r]),o?a().createElement(ge.A,null):l?a().createElement(be.A,{msgId:"gnviewer.metadataNotFound"}):p||v?a().createElement("div",{className:"gn-metadata"},a().createElement("div",{className:"gn-metadata-header"},g&&a().createElement(c.Fc,{bsStyle:"danger",style:{margin:"0.25rem 0"}},a().createElement(f.A,{msgId:"gnviewer.metadataUpdateError"}),!m()(D)&&a().createElement("ul",null,D.map((function(e,t){return a().createElement("li",{key:t},e)}))))),a().createElement("div",{className:"gn-metadata-container"},a().createElement(u.Ay,{liveValidate:!0,readonly:x,ref:I.current,formContext:{title:null==p?void 0:p.title},schema:v,widgets:b,uiSchema:y,formData:p,validator:i.Ay,templates:U,fields:ye,extraErrors:K,transformErrors:function(e){return e.filter((function(e){return"must be equal to constant"!==e.message})).map((function(e){var t=(e.message||"").startsWith("must have required property")?"must have required property":e.message,r="metadata.error.".concat(t),n=(0,w.kA)(N,r);return Se(Se({},e),{},{message:r===n?t:n})}))},experimental_defaultFormStateBehavior:{arrayMinItems:{populate:"never",mergeExtraDefaults:!1}},onChange:function(e){var t;t=e.formData,A(!1),j(t)}},a().createElement(a().Fragment,null))),T?a().createElement(ge.A,{style:{opacity:.5}}):null):null}je.contextTypes={messages:l().object};const Pe=je}}]);