"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[51506],{952228:(r,e,t)=>{t.d(e,{A:()=>k});var n=t(45388),o=t.n(n),i=t(400912),u=t.n(i),a=t(509095),c=t(415392),l=t(621939),f=t(904059),y=t(307679),b=t(148936),p=t(434164),s=t(142974),v=t(636422),d=t(724188),m=t(486174);function g(r){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},g(r)}function O(r){return function(r){if(Array.isArray(r))return S(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||h(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(r,e){if(r){if("string"==typeof r)return S(r,e);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(r,e):void 0}}function S(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function j(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)}return t}function w(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?j(Object(t),!0).forEach(function(e){P(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function P(r,e,t){return(e=function(r){var e=function(r){if("object"!=g(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!=g(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==g(e)?e:e+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}const k={accessMetadataExplorer:function(r,e){return r.ofType(a.lm).switchMap(function(){return o().Observable.of((0,c.fN)("metadataexplorer","enabled",!0),(0,a.bj)(!1),(0,a.XP)((0,m.Kz)(e.getState())),(0,l.Rt)("default_map_backgrounds"))})},addBackgroundPropertiesEpic:function(r){return r.ofType(a.Nn).switchMap(function(r){var e,t=r.modalParams,n=o().Observable.of((0,a.Gh)(w(w({},t),{},{loading:!1}))),i=!t.editing&&(null==t||null===(e=t.layer)||void 0===e?void 0:e.remoteTileGrids);return t.layer&&"wms"===t.layer.type?o().Observable.of((0,a.Gh)(w(w({},t),{},{loading:!0}))).concat(o().Observable.forkJoin((0,p.aF)(t.layer),i?o().Observable.defer(function(){return(0,v.Q3)((0,d.ez)(t.layer),t.layer.name,t.layer)}).catch(function(){return o().Observable.of(null)}):o().Observable.of(null)).switchMap(function(r){var e,n,i=(n=2,function(r){if(Array.isArray(r))return r}(e=r)||function(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(r){l=!0,o=r}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||h(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=i[0],c=i[1],l=c?(0,s.Pj)(c):{};return o().Observable.of((0,a.Gh)(w(w({},t),{},{layer:w(w({},t.layer),l),loading:!1,capabilities:(0,s.e9)(u)})))}).catch(function(){return n})):n})},setCurrentBackgroundLayerEpic:function(r,e){return r.ofType(a.kz).switchMap(function(r){var t,n=r.layerId,i=e.getState(),u=(0,y.pO)(i,n);return(t=o().Observable).of.apply(t,O(u&&"background"===u.group?[(0,c.fN)("backgroundSelector","tempLayer",u),(0,c.fN)("backgroundSelector","currentLayer",u)]:[]))})},updateTempBackgroundLayerEpic:function(r,e){return r.ofType(a.kk).take(1).switchMap(function(t){var n=t.id;return r.ofType(f.rN).switchMap(function(){var r,t=e.getState(),i=(0,y.pO)(t,n);return(0,y.vm)(t).id===i.id?(r=o().Observable).of.apply(r,O(i&&"background"===i.group?[(0,c.fN)("backgroundSelector","tempLayer",i),(0,c.fN)("backgroundSelector","currentLayer",i)]:[])):o().Observable.of((0,c.fN)("backgroundSelector","tempLayer",i))})})},backgroundAddedEpic:function(r,e){return r.ofType(a.ct).mergeMap(function(r){var t=r.layerId,n=e.getState(),i=(0,y.pO)(n,t);return i?o().Observable.of((0,f.ju)(i.id,{visibility:!0}),(0,a.F8)(i.id),(0,a.Zb)()):o().Observable.empty()})},backgroundEditedEpic:function(r,e){return r.ofType(a.HW).mergeMap(function(r){var t=r.layerId,n=e.getState();return(0,y.pO)(n,t)?o().Observable.of((0,a.Zb)()):o().Observable.empty()})},backgroundRemovedEpic:function(r,e){return r.ofType(a.M_).mergeMap(function(r){var t=r.backgroundId,n=e.getState(),i=(0,y.pO)(n,t),c=(0,b.CD)(n)||[],l=(0,y.vm)(n)||{},p=t===l.id?u()(c.filter(function(r){return r.id!==t&&!r.invalid})):l;return i?o().Observable.of((0,f.bf)(t,"layers"),(0,f.ju)(p.id,{visibility:!0}),(0,a.F8)(p.id)):o().Observable.empty()})},syncSelectedBackgroundEpic:function(r){return r.ofType(a.bS).take(1).switchMap(function(e){var t=e.id;return r.ofType(f.Cl).filter(function(r){return r.layer.id===t}).switchMap(function(){return o().Observable.of((0,a.vB)(t))}).takeUntil(r.ofType(a.ct))})}}},434164:(r,e,t)=>{t.d(e,{Cc:()=>g,aF:()=>m});var n=t(23412),o=t.n(n),i=(t(400912),t(155584)),u=t(45388),a=t(375482),c=t(995531),l=(t(764932),t(112585)),f=t(492312),y=t(584153),b=t(79738);function p(r){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},p(r)}function s(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)}return t}function v(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach(function(e){d(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function d(r,e,t){return(e=function(r){var e=function(r){if("object"!=p(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!=p(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==p(e)?e:e+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}i.default;var m=function(r){return u.Observable.defer(function(){return a.Ay.getCapabilities((0,l.wk)(r))}).let(f.m9).map(function(e){return a.Ay.parseLayerCapabilities(e,r)})},g=function(r){return function(r){return u.Observable.defer(function(){return c.A.get(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.name,t=r.search,n=void 0===t?{}:t,i=r.url,u=o().parse((0,b.t)(n.url||i),!0);return o().format(v(v({},u),{},{search:void 0,query:v(v({},u.query),{},{service:"WMS",version:a.j0,layers:e,outputFormat:"application/json",request:"DescribeLayer"})}))}(r))}).let(f.m9)}(r).map(function(r){var e=r.data,t=void 0===e?{}:e;return t&&t.layerDescriptions[0]}).map(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return v(v({},r),{},{params:{},search:e?{type:"wfs",url:(0,y.o_)(e)}:void 0})})}},97401:(r,e,t)=>{t.d(e,{MA:()=>w,SU:()=>S,iS:()=>d,lU:()=>O,o:()=>v,o7:()=>m,si:()=>j,tV:()=>h,u$:()=>s,wd:()=>g});var n=t(400912),o=t.n(n),i=t(150104),u=t.n(i),a=t(131127),c=t(841533),l=t(779893);function f(r){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},f(r)}function y(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)}return t}function b(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?y(Object(t),!0).forEach(function(e){p(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function p(r,e,t){return(e=function(r){var e=function(r){if("object"!=f(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!=f(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==f(e)?e:e+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var s=function(r){return r.maplayout&&r.maplayout.layout||{}},v=function(r){return r.maplayout&&r.maplayout.boundingMapRect||{}},d=function(r){return r.maplayout&&r.maplayout.boundingSidebarRect||{}},m=u()(function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=s(r),o=d(r);return n&&Object.keys(n).filter(function(r){return e[r]}).reduce(function(r,e){var i;return b(b({},r),{},p({},e,t&&null!==(i=o[e])&&void 0!==i?i:n[e]))},{})||{}},function(r,e,t){return JSON.stringify(s(r))+JSON.stringify(d(r))+JSON.stringify(e)+(t?"_isDock":"")}),g=function(r){var e;return!(null===(e=s(r))||void 0===e||!e.rightPanel)},O=function(r){var e,t=l.Ay.getConfigProp("mapLayout")||c.OH;return function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=s(r);return!!o()(e.filter(function(r){return t[r.key]}).map(function(r){return"not"===r.type?t[r.key]!==r.value&&t[r.key]:t[r.key]===r.value}))}(r,[{key:"bottom",value:null!==(e=null==t?void 0:t.bottom.sm)&&void 0!==e?e:0,type:"not"}])},h=function(r){var e=(0,a.mg)(r),t=v(r);return t&&e&&e.size&&{left:(0,c.n_)(t.left,e.size.width),bottom:(0,c.n_)(t.bottom,e.size.height),right:(0,c.n_)(t.right,e.size.width),top:(0,c.n_)(t.top,e.size.height)}},S=function(r){var e,t;return null!==(e=null==r||null===(t=r.maplayout)||void 0===t?void 0:t.dockPanels)&&void 0!==e?e:{left:[],right:[]}},j=function(r){return m(r,{height:!0,right:!0},!0)},w=function(r){return m(r,{right:!0},!0)}},841533:(r,e,t)=>{t.d(e,{OH:()=>f,a0:()=>l,n_:()=>y});var n=t(185015),o=t.n(n),i=t(344826),u=t.n(i),a=t(198023),c=t.n(a),l=420,f={left:{sm:300,md:500,lg:600},right:{md:l},bottom:{sm:30}},y=function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o()(r)&&-1!==r.indexOf("%")?parseFloat(u()(r))*e/100:c()(r)?r:0}}}]);