(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[7291],{85148:(t,n,e)=>{"use strict";e.d(n,{Qw:()=>l,jo:()=>d,m$:()=>p,AF:()=>g,WT:()=>y,ns:()=>b,RP:()=>v,aK:()=>h,oP:()=>O});var r=e(75110),o=e(22222),i=e(86494);function a(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return u(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function s(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){f(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function f(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var l=function(t,n){return function(e){return(0,i.get)(e,"dimension.data[".concat(n,"][").concat(t,"]"))}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return(0,i.find)(t.dimensions||[],{name:n})},d=function(t,n){return function(e){return l(t.id,n)(e)||m(t,n)}},p=function(t){return(0,r.l2)(t).reduce((function(n,e){var r=d(e,"time")(t);return r?s(s({},n),{},f({},e.id,r)):n}),{})},g=function(t){return(0,r.l2)(t).filter((function(n){var e=(0,i.get)(t,"timeline.settings.showHiddenLayers"),r=m(n,"time");return(e||n.visibility)&&r}))},y=function(t){var n=(0,i.get)(t,"dimension.currentTime");return n&&n.split("/")[0]},b=function(t){return(0,i.get)(t,"dimension.offsetTime")},v=function(t){return!!b(t)},h=((0,o.P1)(p,(function(t){return Object.keys(t).reduce((function(n,e){return[].concat(a(n),a(t[e]&&t[e].values||[]))}),[]).sort()||[]})),function(t){return function(n){return a((0,i.get)(d(t,"time")(n),"values",[])).sort()}}),O=function(t,n){var e=l(n,"time")(t),r=e&&e.domain&&e.domain.split("--");if(r&&2===r.length)return r&&{start:r[0],end:r[1]};var o=e&&e.domain&&e.domain.split(",");return o&&o.length>0?{start:o[0],end:o[o.length-1]}:null}},97291:(t,n,e)=>{"use strict";e.d(n,{YK:()=>v,zb:()=>h,en:()=>O,cX:()=>j,__:()=>A,E2:()=>D,Li:()=>x,fP:()=>k,uy:()=>E,gB:()=>T,Ry:()=>I,m_:()=>_,dJ:()=>C,rV:()=>F,qJ:()=>M,pn:()=>$,F3:()=>L});var r=e(86494),o=e(22222),i=e(84715),a=e(86267),u=e(55237),c=e(85148),s=e(827),f=e(75110);function l(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function m(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?l(Object(e),!0).forEach((function(n){d(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function d(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function p(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return e}}(t,n)||y(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,n){if(t){if("string"==typeof t)return b(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?b(t,n):void 0}}function b(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var v=function(t){return(0,r.get)(t,"timeline.range")},h=function(t){return(0,r.get)(t,"timeline.settings.collapsed")},O=function(t){return(0,r.get)(t,"timeline.settings.autoSelect")},j=function(t){return(0,r.get)(t,"timeline.settings.mapSync")},w=function(t,n){return(t||[]).reduce((function(t,e){return[].concat(p(t),p(function(t,n){var e=g(t.split("/"),3),r=e[0],o=e[1],i=e[2];if(i&&"0"!==i){var a=(0,u.Xu)({start:r,end:o,duration:i},n),c=a.count,s=a.start,f=a.end;return c>50?[{start:r,end:o,duration:i,type:"range",content:"".concat(c," items")}]:(0,u.tr)({start:s,end:f,duration:i}).map((function(t){return{start:new Date(t),end:new Date(t),type:"point"}}))}return isNaN(new Date(r).getTime())?null:[{start:new Date(r),end:new Date(o||r),type:o?"range":"point"}]}(e,n)))}),[]).filter((function(t){return t&&t.start}))},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(t.domain&&t.domain.values)return w(t.domain.values,n);if(t.histogram&&t.histogram.domain&&t.histogram.values){var e=t.histogram.domain.split("/"),r=g(e,3),o=r[0],i=r[1],a=r[2],c=Math.max.apply(Math,p(t.histogram.values)),s=(0,u.jb)({start:o,end:i,duration:a});return t.histogram.values.map((function(t,n){return m(m({},s[n]),{},{type:"range",itemType:"histogram",count:t,className:"histogram-item",content:'<div><div class="histogram-box" style="height: '.concat(100*t/c,'%"></div> <span class="histogram-count">').concat(t,"</span></div>")})}))}return[]},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0;return t&&t.values||t&&t.domain&&!(0,u._q)(t.domain)?w(t.values||t.domain.split(","),n):e&&e.histogram?P(e,n):[]},A=(0,i.y)(c.m$,v,(function(t){return(0,r.get)(t,"timeline.rangeData")}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return p(Object.keys(t).map((function(r){return S(t[r],n,e[r]).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(m({content:" "},t),{},{group:r})}))})).reduce((function(t,n){return[].concat(p(t),p(n))}),[]))})),D=function(t){return(0,r.get)(t,"timeline.loading")},x=function(t){return(0,r.get)(t,"timeline.selectedLayer")},k=function(t){return(0,f.CA)(t,x(t))},E=function(t){return k(t)&&k(t).name},T=function(t){return k(t)&&k(t).dimensions&&(0,r.head)(k(t).dimensions.filter((function(t){return"time"===t.name})))},I=function(t){return(0,r.get)(T(t),"source.url")},_=(0,o.P1)(c.WT,c.ns,(function(t,n){return{start:t,end:n}})),C=function(t){return(0,c.oP)(t,x(t))},F=c.AF,M=(0,o.P1)(F,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.length>0})),$=function(t){return!h(t)&&M(t)},L=function(t){return function(n){var e=((0,s.Od)(n)||{}).bbox;if(!e)return{};var o=(0,c.Qw)(t,"time")(n),i=(0,r.get)(o,"source.version"),u=Object.keys(e.bounds).reduce((function(t,n){return m(m({},t),{},d({},n,parseFloat(e.bounds[n])))}),{});if(!u||!j(n))return{};if("1.1"!==i){var f=(0,c.Qw)(t,"space")(n),l=(0,r.get)(f,"domain.CRS");if(!l||!u||!j(n))return{};var p=g((0,a.reprojectBbox)(u,(0,s.uy)(n),l),4),y=p[0],b=p[1],v=p[2],h=p[3];return v<y&&"EPSG:4326"===l&&(v+=360),{bbox:"".concat(y,",").concat(b,",").concat(v,",").concat(h),crs:l}}var O=u.minx,w=u.miny,P=u.maxx,S=u.maxy,A=e.crs;return{bbox:"".concat(O,",").concat(w,",").concat(P,",").concat(S,",").concat(A)}}}}}]);