(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1411],{28315:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(24852),o=r.n(n),i=r(43143),a=r(12226),c=r(82110);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var f=o().lazy((function(){return Promise.all([r.e(7042),r.e(6111)]).then(r.bind(r,36111))})),d={base:190,range:0,s:.95,v:.63},y=function(e,t){var r=t.base,n=t.range,o=p(t,["base","range"]);return((0,i.qH)(r,n,e+1,o)||[0]).slice(1)};function m(e){var t=e.type,r=e.isModeBarVisible;switch(t){case"pie":return{t:r?20:5,b:5,l:2,r:2,pad:4};default:return{l:5,r:5,b:30,t:r?20:5,pad:4}}}function g(e){var t=e.series,r=void 0===t?[]:t,n=e.cartesian,o=e.type,i=e.yAxis,a=e.xAxisAngle,c=e.xAxisOpts,u=void 0===c?{}:c,s=e.yAxisOpts,l=void 0===s?{}:s,p=e.data,f=void 0===p?[]:p,m=e.autoColorOptions,g=void 0===m?d:m;switch(o){case"pie":return{colorway:y(f.length,g)};default:return{colorway:y(r.length,g),yaxis:{type:null==l?void 0:l.type,automargin:!0,tickformat:null==l?void 0:l.format,tickprefix:null==l?void 0:l.tickPrefix,ticksuffix:null==l?void 0:l.tickSuffix,showticklabels:!0===i,showgrid:n},xaxis:{showgrid:n,type:null==u?void 0:u.type,showticklabels:!(null!=u&&u.hide),nticks:u.nTicks,automargin:!0,tickangle:null!=a?a:"auto"}}}}const v=function(e){var t=e.onInitialized,r=function(e){var t=e.xAxis,r=e.series,n=void 0===r?[]:r,o=e.yAxisLabel,i=e.type,c=void 0===i?"line":i,u=e.height,l=e.width,p=e.legend,f=null==t?void 0:t.dataKey,d=l>350;return{layout:s(s({showlegend:p},g(s({},e))),{},{margin:m(s(s({},e),{},{isModeBarVisible:d})),autosize:!1,automargin:!1,height:u,width:l}),data:n.map((function(t){var r=t.dataKey;return s({type:c,name:o||r},function(e){var t=e.type,r=e.xDataKey,n=e.yDataKey,o=e.data,i=e.formula,c=o.map((function(e){return e[r]})),u=o.map((function(e){return e[n]}));switch(t){case"pie":return{textposition:"inside",values:u,labels:c};default:return i&&(u=u.map((function(e){var t=e;try{return(0,a.B)(i,{value:t})}catch(t){return e}}))),{x:c,y:u}}}(s(s({},e),{},{xDataKey:f,yDataKey:r})))})),config:{displayModeBar:d,modeBarButtonsToRemove:["lasso2d","select2d","hoverCompareCartesian","hoverClosestCartesian","hoverClosestPie"],displaylogo:!1}}}(p(e,["onInitialized"])),i=r.data,u=r.layout,l=r.config;return o().createElement(n.Suspense,{fallback:o().createElement(c.Z,null)},o().createElement(f,{onInitialized:t,data:i,layout:u,config:l}))}},75480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(24852),o=r.n(n);const i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{display:"inline-block"}:t;return o().createElement("div",{style:r,className:"mapstore-inline-loader"})}},76424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(24852),o=r.n(n),i=r(86494),a=r(32425);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,r=e.caption,n=e.infoExtra,c=e.className,s=void 0===c?"":c,p=e.description,f=e.fullText,d=e.onClick,y=void 0===d?function(){}:d,m=e.onMouseEnter,g=void 0===m?function(){}:m,v=e.onMouseLeave,b=void 0===v?function(){}:v,w=e.preview,h=e.selected,O=e.size,j=e.style,P=void 0===j?{}:j,A=e.stylePreview,S=void 0===A?{}:A,E=e.styleTools,x=void 0===E?{}:E,I=e.title,D=e.loading,C=e.dragSymbol,F=void 0===C?"+":C,k=e.tools,T=l(e,["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"]);return o().createElement("div",{className:"mapstore-side-card".concat(h?" selected":"").concat(O?" ms-"+O:"").concat(s?" ".concat(s):"").concat(f?" full-text":""),onClick:function(e){return y(u({title:I,preview:w,description:p,caption:r,tools:k},T),e)},onMouseEnter:g,onMouseLeave:b,style:P},o().createElement("div",{className:"ms-head"},T.isDraggable&&T.connectDragSource&&T.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},F))),w&&o().createElement("div",{className:"mapstore-side-preview",style:S},w),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},I&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,I)),p&&o().createElement("div",{className:"mapstore-side-card-desc"},(0,i.isObject)(p)?p:o().createElement("span",null,p)),r&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,r))),n),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:x},k),"sm"!==O&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(a.Z,{className:"mapstore-side-card-loader",size:12,hidden:!D})))))),t&&o().createElement("div",{className:"ms-body"},t))}},38064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(45697),o=r.n(n),i=r(24852),a=r.n(i),c=r(30294),u=r(76424);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function s(){return p(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,r=e.items,n=e.colProps,o=e.onItemClick,i=e.size,s=t||u.Z;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(c.Row,{className:"items-list"},r.map((function(e,t){return a().createElement(c.Col,l({key:e.id||t},n),a().createElement(s,l({onClick:function(){return o(e)},size:i},e)))}))))}}])&&f(t.prototype,r),s}(a().Component);g(v,"propTypes",{size:o().string,onItemClick:o().func,colProps:o().object,items:o().array,cardComponent:o().oneOfType([o().string,o().func]),className:o().string}),g(v,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]});const b=v},12425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(67076).withState)("confirmDelete","toggleDeleteConfirm",!1)},30881:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(86494),o=r(67076),i=r(86267),a=r(47805),c=r(89291),u=r(2245),s=r.n(u),l=r(89737),p=r.n(l),f=r(70956);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e,t){var r=(0,f.Z5)(e,t),o=(0,n.find)(Object.keys(r||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()}));return r&&o&&r[o]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerFilter;return t};const h=(0,o.compose)((0,o.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,n=e.dependencies,o=void 0===n?{}:n,i=e.layer,a=e.quickFilters,c=e.options,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return t!==u.mapSync||o.viewport!==(u.dependencies&&u.dependencies.viewport)||o.quickFilters!==(u.dependencies&&u.dependencies.quickFilters)||o.options!==(u.dependencies&&u.dependencies.options)||r!==u.geomProp||s!==u.filter||c!==u.options||a!==u.quickFilters||b(i,o)!==b(u.layer,u.dependencies)||w(i)!==w(u.layer)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,o=void 0===r?"the_geom":r,u=e.dependencies,l=void 0===u?{}:u,d=e.filter,v=e.layer,w=e.quickFilters,h=e.options,O=l.viewport,j=s()({gmlVersion:"3.1.1"}),P=p()(j),A=j.filter,S=j.property,E=j.and,x=v||{},I=x.layerFilter,D={},C={},F=(0,f.r$)(d,w,h);if(!t)return{filter:!(0,n.isEmpty)(F)||I?A(E.apply(void 0,g(I&&!I.disabled?(0,a.toOGCFilterParts)(I,"1.1.0","ogc"):[]).concat(g(F?(0,a.toOGCFilterParts)(F,"1.1.0","ogc"):[])))):void 0};if(v&&l&&l.quickFilters&&l.layer&&v.name===l.layer.name&&(F=y(y({},F),(0,f.r$)(F,l.quickFilters,l.options))),v&&l&&l.filter&&l.layer&&v.name===l.layer.name&&(F=y(y({},F),(0,a.composeAttributeFilters)([F,l.filter]))),l.viewport){var k=Object.keys(O.bounds).reduce((function(e,t){return y(y({},e),{},m({},t,parseFloat(O.bounds[t])))}),{});D=(0,i.getViewportGeometry)(k,O.crs);var T=b(v,l);return C=T?[P((0,c.read)(T))]:[],{filter:A(E.apply(void 0,g(C).concat(g(I&&!I.disabled?(0,a.toOGCFilterParts)(I,"1.1.0","ogc"):[]),g(F?(0,a.toOGCFilterParts)(F,"1.1.0","ogc"):[]),[S(o).intersects(D)])))}}return{filter:A(E.apply(void 0,g(I?(0,a.toOGCFilterParts)(I,"1.1.0","ogc"):[]).concat(g(F?(0,a.toOGCFilterParts)(F,"1.1.0","ogc"):[]))))}})))},8488:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67076),o=r(70956),i=r(86494);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=(0,n.compose)((0,n.withPropsOnChange)(["dependencies","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=void 0===t?{}:t,n=e.options,a=e.layer,u=void 0===a?{}:a,s=(0,o.Z5)(u,r),l=(0,i.find)(Object.keys(s||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"viewparams"===e.toLowerCase()})),p=s&&l&&s[l];return{options:p?c(c({},n),{},{viewParams:p}):n}})))},73339:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67076),o=r(86494);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function e(t,r,n){return t?Object.keys(t).reduce((function(i,u){return"dependenciesMap"===u&&r[t[u]]&&r[t.mapSync]&&r[t[u]][u]&&-1===r[t[u]][u].indexOf(n)?a(a({},i),(0,o.pick)(e(r[t[u]],r,n),["options","layer","quickFilters","filter","dependenciesMap"])):a(a({},i),{},c({},u,r[t[u]]))}),{}):r};const s=(0,n.withProps)((function(e){var t=e.dependenciesMap,r=e.dependencies,n=e.id;return{dependencies:t?u(t,r,n):r,dependenciesMap:t}}))},39837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(82030),o=r(99707);const i=(0,n.Z)((function(e){var t=e.data,r=void 0===t?[]:t;return!r||0===r.length}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.iconFit;return{iconFit:r,messageId:t?"widgets.errors.nodatainviewport":"widgets.errors.nodata",glyph:"stats"}}),o.Z)},46173:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(24852),o=r.n(n),i=r(82030),a=r(5346);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.Z)((function(e){var t=e.layers;return 0===(void 0===t?[]:t).length}),(c(e={},t?"tooltip":"title",o().createElement(a.Z,{msgId:"widgets.errors.noLegend"})),c(e,"description",!t&&o().createElement(a.Z,{msgId:"widgets.errors.noLegendDescription"})),e))}},42415:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(24852),o=r.n(n),i=r(5346),a=r(82030),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"ECONNABORTED"===e.code?o().createElement(i.Z,{msgId:"widgets.errors.timeoutExpired"}):e.message?o().createElement(i.Z,{msgId:"widgets.errors.genericErrorWithMessage",msgParams:{message:e.message}}):o().createElement(i.Z,{msgId:"widgets.errors.genericError"})};const u=(0,a.Z)((function(e){return e.error}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,r=e.iconFit;return{glyph:"warning-sign",iconFit:r,tooltip:c(t)}}))},13314:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67076),o=r(86494),i=r(12425),a=r(39860),c=r(52259);const u=(0,n.compose)((0,n.withProps)((function(e){var t=e.dependencies,r=void 0===t?{}:t,n=e.dependenciesMap;return{layers:r[(void 0===n?{}:n).layers]||r.layers||[],scales:(0,c.getScales)(r.projection||r.viewport&&r.viewport.crs||"EPSG:3857",(0,o.get)(r,"mapOptions.view.DPI")),currentZoomLvl:r.zoom}})),(0,n.withProps)((function(e){var t=e.layers;return{layers:(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==e.group&&!1!==e.visibility&&"vector"!==e.type}))}})),i.Z,(0,a.tR)(),(0,a.E6)(),(0,a.um)())},87017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(86494),o=r(67076),i=r(49977),a=r.n(i),c=r(65633),u=r(24262),s=r(73849);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,o=e.GroupByAttributes,i=void 0===o?[]:o,a=e.AggregationAttribute,c=e.AggregationFunctions;return r.map((function(e){return p(p({},i.reduce((function(t,r,o){var i=e[o];if((0,n.isObject)(i)){if((0,n.isNil)(i.time))throw new Error("Unknown response format from server");i=new Date(i.time).toISOString()}return p(p({},t),{},f({},r,i))}),{})),{},f({},"".concat(c[0],"(").concat(a,")"),e[e.length-1]))})).sort((function(e,t){var r=parseFloat(e[i]),n=parseFloat(t[i]);return isNaN(r)||isNaN(n)?e<t?-1:e>t?1:0:r-n}))},y=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,u.getWpsUrl)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute&&n.groupByAttributes})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=e.filter,i=e.onLoad,s=void 0===i?function(){}:i,l=e.onLoadError,f=void 0===l?function(){}:l;return(0,c.Z)((0,u.getWpsUrl)(r),p(p({featureType:r.name},n),{},{filter:o}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:d(e),series:[{dataKey:"".concat(e.AggregationFunctions[0],"(").concat(e.AggregationAttribute,")")}],xAxis:{dataKey:e.GroupByAttributes[0]}}})).do(s).catch((function(e){return a().Observable.of({loading:!1,error:e,data:[]}).do(f)})).startWith({loading:!0})}))};const m=(0,o.compose)((0,o.withProps)((function(){return{dataStreamFactory:y}})),s.Z);var g=r(86850);function v(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.features,r=arguments.length>1?arguments[1]:void 0,o=r.groupByAttributes;return(0,n.sortBy)(t.map((function(e){return e.properties})),o)},h=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,u.getSearchUrl)(r)&&n&&n.aggregationAttribute&&n.groupByAttributes})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,o=e.options,i=e.filter,c=e.onLoad,u=void 0===c?function(){}:c,s=e.onLoadError,l=void 0===s?function(){}:s;return(0,g.Mc)(r,i,{propertyName:[].concat(v((0,n.castArray)(o.aggregationAttribute)),v((0,n.castArray)(o.groupByAttributes)))}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:w(e,o),series:[{dataKey:o.aggregationAttribute}],xAxis:{dataKey:o.groupByAttributes}}})).do(u).catch((function(e){return a().Observable.of({loading:!1,error:e,data:[]}).do(l)})).startWith({loading:!0})}))};const O=(0,o.compose)((0,o.withProps)((function(){return{dataStreamFactory:h}})),s.Z),j=(0,o.branch)((function(e){var t=e.options,r=void 0===t?{}:t;return!r.aggregateFunction||"None"===r.aggregateFunction}),O,m)},39860:(e,t,r)=>{"use strict";r.d(t,{E6:()=>F,tR:()=>D,AV:()=>C,G5:()=>I,um:()=>k});var n=r(67076);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,a=void 0===o?[]:o,c=e.toggleMaximize,u=void 0===c?function(){}:c,s=e.dataGrid,l=void 0===s?{}:s,p=e.toolsOptions;return{widgetTools:(void 0===p?{}:p).showMaximize?[].concat((t=a,function(e){if(Array.isArray(e))return i(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:n.widget?"resize-small":"resize-full",target:"icons",tooltipId:"widgets.widget.menu.".concat(n.widget?"minimize":"maximize"),tooltipPosition:"right",visible:!l.static,onClick:function(){return u()}}]):a}})));function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=r(24852),f=r.n(p),d=r(80717),y=function(e){return"icons"===e.target},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(y).length>0};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=r(30294),b=r(5346),w=r(15135);function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e){var t=e.target,r=e.visible;return(void 0===r||r)&&"menu"===t},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(j).length>0},A=(0,w.Z)(v.MenuItem);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){return"tools"===e.target},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(E).length>0},I=function(){return(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,c=void 0===a?{}:a,u=e.canEdit,l=e.updateProperty,p=void 0===l?function(){}:l,f=e.hide,d=void 0!==f&&f;return{widgetTools:c.showHide?[].concat((t=i,function(e){if(Array.isArray(e))return s(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"lock",target:"menu",active:d,textId:d?"widgets.widget.menu.unhide":"widgets.widget.menu.hide",tooltipId:d?"widgets.widget.menu.unhideDescription":"widgets.widget.menu.hideDescription",visible:!n.widget&&u,onClick:function(){return p("hide",!d)}}]):i}})))},D=function(){return(0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.dataGrid,i=void 0===o?{}:o,a=e.canEdit,u=e.onEdit,s=void 0===u?function(){}:u,l=e.toggleDeleteConfirm,p=void 0===l?function(){}:l;return{widgetTools:a?[].concat((t=n,function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pencil",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.edit",onClick:function(){return s()}},{glyph:"trash",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.delete",onClick:function(){return p(!0)}}]):n}}))},C=function(){return(0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.data,i=e.title,a=e.exportCSV,c=void 0===a?function(){}:a;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return u(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"download",glyphClassName:"exportCSV",target:"menu",textId:"widgets.widget.menu.downloadData",disabled:!o||!o.length,onClick:function(){return c({data:o,title:i})}}])}}))},F=function(){return(0,n.compose)((0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,c=void 0===a?{}:a,u=e.updateProperty,s=void 0===u?function(){}:u,p=e.dataGrid,f=void 0===p?{}:p;return{widgetTools:c.showPin?[].concat((t=i,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pushpin",bsStyle:f.static&&"primary",glyphClassName:f.static?"active":void 0,tooltipId:f.static?"widgets.widget.menu.unpin":"widgets.widget.menu.pin",target:"icons",visible:!n.widget,onClick:function(){return s("dataGrid.static",!f.static)}}]):i}}))),(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,i=e.widgetTools,a=void 0===i?[]:i,c=e.dataGrid,u=void 0===c?{}:c,s=e.toggleCollapse,l=void 0===s?function(){}:s,p=e.toolsOptions;return{widgetTools:(void 0===p?{}:p).showCollapse?[].concat((t=a,function(e){if(Array.isArray(e))return o(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"minus",target:"icons",tooltipId:"widgets.widget.menu.collapse",visible:!n.widget&&!u.static,onClick:function(){return l()}}]):a}}))),a,(0,n.compose)((0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.title,i=e.description,a=e.widgetType;return{widgetTools:i&&"text"!==a?[].concat((t=n,function(e){if(Array.isArray(e))return g(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"question-sign",popover:{title:o,trigger:!0,text:i},target:"icons"}]):n}}))))},k=function(){return(0,n.compose)((0,n.compose)((0,n.withPropsOnChange)(["topLeftItems","widgetTools"],(function(e){var t,r=e.topLeftItems,n=void 0===r?[]:r,o=e.widgetTools;return{topLeftItems:x(o)?[].concat((t=n,function(e){if(Array.isArray(e))return S(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[f().createElement(d.Z,{btnGroupProps:{style:{position:"absolute",left:14}},btnDefaultProps:{className:"no-border",bsSize:"small",bsStyle:"link",style:{paddingLeft:4,paddingRight:4}},buttons:o.filter(E)})]):n}}))),(0,n.compose)((0,n.withPropsOnChange)(["icons","widgetTools"],(function(e){var t=e.icons,r=void 0===t?[]:t,n=e.widgetTools;return{icons:m(n)?f().createElement(d.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs",bsStyle:"link"},buttons:n.filter(y)}):r}}))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,r=void 0===t?"widget-menu":t,o=e.menuIcon,i=void 0===o?"option-vertical":o;return(0,n.withProps)((function(e){var t=e.widgetTools,n=e.topRightItems,o=void 0===n?[]:n;return{topRightItems:P(t)?[].concat(h(o),[f().createElement(v.ButtonToolbar,null,f().createElement(v.DropdownButton,{pullRight:!0,bsStyle:"default",className:r,title:f().createElement(v.Glyphicon,{glyph:i}),noCaret:!0,id:"dropdown-no-caret"},t.filter(j).map((function(e,t){var r=e.onClick,n=void 0===r?function(){}:r,o=e.disabled,i=void 0!==o&&o,a=e.glyph,c=e.glyphClassName,u=e.text,s=e.textId,l=e.tooltipId,p=e.active;return f().createElement(A,{active:p,tooltipId:l,onSelect:n,disabled:i,eventKey:t},f().createElement(v.Glyphicon,{className:c,glyph:a}),s?f().createElement(b.Z,{msgId:s}):u)}))))]):o}}))}())}},70956:(e,t,r)=>{"use strict";r.d(t,{Z5:()=>s,r$:()=>l});var n=r(86494),o=r(96958),i=r(47805);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e,t){return e&&e.id&&(0,n.get)((0,n.find)(t.layers||[],{id:e.id}),"params",{})},l=function(e,t,r){var a=t&&r&&Object.keys(t).filter((function(e){return(0,n.find)(r.propertyName,(function(t){return t===e}))})).reduce((function(e,r){return c(c({},e),{},u({},r,t[r]))}),{}),s=(0,n.reduce)(a,(function(e,t,r){return(0,o.dJ)(c({attribute:r},t),e)}),{});if(!(0,n.isEmpty)(e)||!(0,n.isEmpty)(s)){var l=(0,i.composeAttributeFilters)([e,s],void 0,null==e?void 0:e.spatialFieldOperator);return c(c({},e),l)}return{}}},39589:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(67076),o=r(65633),i=r(73849),a=r(49977),c=r.n(a),u=r(24262);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,n=e.GroupByAttributes,o=void 0===n?[]:n,i=e.AggregationAttribute,a=e.AggregationFunctions;return r.map((function(e){return l(l({},o.reduce((function(t,r,n){return l(l({},t),{},p({},r,e[n]))}),{})),{},p({},"".concat(a[0],"(").concat(i,")"),e[e.length-1]))}))},d=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,u.getWpsUrl)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,i=e.filter,a=e.onLoad,s=void 0===a?function(){}:a,p=e.onLoadError,d=void 0===p?function(){}:p;return(0,o.Z)((0,u.getWpsUrl)(r),l(l({featureType:r.name},n),{},{filter:i}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:f(e),series:[{dataKey:"".concat(e.AggregationFunctions[0],"(").concat(e.AggregationAttribute,")")}]}})).do(s).catch((function(e){return c().Observable.of({loading:!1,error:e,data:[]}).do(d)})).startWith({loading:!0})}))};const y=(0,n.compose)((0,n.withProps)((function(){return{dataStreamFactory:d}})),i.Z)},80844:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(73014),o=r(42415),i=r(39837),a=r(47361),c=r(67076),u=r(86494),s=r(90253),l=r(24852),p=r.n(l);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var v=(0,n.Z)(),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,r=void 0===t?"":t,n=e.uom,o=void 0===n?"":n,i=g(e,["value","uom"]);return p().createElement(s.iF,m({mode:"single",forceSingleModeWidth:!1,max:500,throttle:20},i),p().createElement(a.Z,{value:r}),p().createElement("span",{style:{fontSize:"75%"}},o))};const w=(0,c.compose)(v,o.Z,i.Z)((function(e){var t=e.series,r=void 0===t?[]:t,n=e.data,o=void 0===n?[]:n,i=e.options,a=void 0===i?{}:i,c=e.style,s=void 0===c?{width:"100%",height:"100%",transform:"translate(-50%, -50%)",position:"absolute",display:"inline",padding:"1%",top:"50%",left:"50%"}:c;return p().createElement("div",{className:"counter-widget-view"},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataKey,r=arguments.length>1?arguments[1]:void 0;return p().createElement(b,{key:t,uom:(0,u.get)(a,"seriesOptions[".concat(r,"].uom")),value:o[0][t],style:d({textAlign:"center"},s)})})))}))},70919:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(24852),o=r.n(n),i=r(86494),a=r(38064),c=r(30294),u=r(1036),s=r(62770);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=function(e){var t=e.layers,r=void 0===t?[]:t,n=e.onChange,p=void 0===n?function(){}:n,d=e.legendProps,y=void 0===d?{}:d,m=e.currentZoomLvl,g=e.disableOpacitySlider,v=void 0===g||g,b=e.disableVisibility,w=void 0===b||b,h=e.scales,O=e.language,j=e.currentLocale;return o().createElement(a.Z,{className:"compact-legend-grid",size:"sm",items:r.map((function(e){return{title:e.title&&(0,i.isObject)(e.title)&&(e.title[j]||e.title.default)||e.title,preview:w?null:o().createElement(c.Glyphicon,{className:"text-primary",glyph:e.visibility?"eye-open":"eye-close"}),style:{opacity:e.visibility?1:.4},body:e.visibility?o().createElement("div",null,o().createElement(c.Grid,{fluid:!0},o().createElement(c.Row,null,o().createElement(c.Col,{xs:12,className:"ms-legend-container"},o().createElement(s.Z,l({node:f({},e),currentZoomLvl:m,scales:h,language:O},y))))),!v&&o().createElement("div",{className:"mapstore-slider",onClick:function(e){e.stopPropagation()}},o().createElement(u.Z,{disabled:!e.visibility,start:[(0,i.isNil)(e.opacity)?100:Math.round(100*e.opacity)],range:{min:0,max:100},onChange:function(t){return p(e.id,"layers",{opacity:parseFloat((t[0]/100).toFixed(2))})}}))):null}}))})}},92936:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(67076),o=r(7848),i=r(91812),a=r(37981),c=r(57068),u=r(19180),s=r(69705),l=r(63721),p=r(61928),f=r(19983);const d=(0,n.compose)(s.Z,(0,i.Z)(0),o.Z,f.Z,u.Z,l.dY,l.yM,a.Z,c.e)(p.Z)},99707:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(24852),o=r.n(n),i=r(30294),a=r(45697),c=r(5346);function u(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.messageId;return o().createElement("div",{className:"ms-widget-empty-message"},o().createElement(i.Glyphicon,{glyph:r}),"  ",o().createElement(c.Z,{msgId:n}))}u.propTypes={messageId:a.PropTypes.string,glyph:a.PropTypes.string};const s=u},86850:(e,t,r)=>{"use strict";r.d(t,{Mc:()=>F,v$:()=>k,ED:()=>T});var n=r(72500),o=r.n(n),i=r(86494),a=r(49977),c=r.n(a),u=r(5055),s=r(7526),l=r(75875),p=r.n(l),f=r(47805),d=r(24262),y=r(10284),m=r(39156);function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=r.n(m)()({wfsVersion:"1.1.0"}),A=P.getFeature,S=P.query,E=P.sortBy,x=P.propertyName,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=w(e,["totalFeatures","features"]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.startIndex,a=arguments.length>2?arguments[2]:void 0;return a>t&&a===i+r.length&&t===r.length?O(O({},n),{},{features:r,totalFeatures:a}):O(O({},n),{},{features:r,totalFeatures:t})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.pagination||!(0,i.isNil)(t.startIndex)&&!(0,i.isNil)(t.maxFeatures)&&{startIndex:t.startIndex,maxFeatures:t.maxFeatures}},C=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,f.getWFSFilterData)(t,r),a=o().parse(e,!0),u=(0,i.isObject)(a.query)?a.query:{};u.service="WFS",u.outputFormat="json";var s=o().format({protocol:a.protocol,host:a.host,pathname:a.pathname,query:u});return c().Observable.defer((function(){return p().post(s,n,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/json"}})})).let(y.oB).map((function(e){return I(e.data,D(t,r),r.totalFeatures)}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,o=e.name,a=arguments.length>1?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=c.sortOptions,s=c.propertyName,l=w(c,["sortOptions","propertyName"]);return C(r.url||n,a&&"object"===b(a)?O(O({},a),{},{typeName:o||a.typeName}):A(S(o,[].concat(g(u?[E(u.sortBy,u.sortOrder)]:[]),g(s?[x(s)]:[]),g(a?(0,i.castArray)(a):[]))),l),l).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!u&&s&&s[0])return C(r.url||n,a&&"object"===b(a)?O(O({},a),{},{typeName:o||a.typeName}):A(S(o,[E(s[0])].concat(g(s?[x(s)]:[]),g(a?(0,i.castArray)(a):[]))),l),l);throw e}))},k=function(e){var t=e.layer;return c().Observable.defer((function(){return p().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,c=o().parse(a||n.url||i,!0);return o().format(O(O({},c),{},{search:void 0,query:O(O({},c.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(y.oB)},T=function(e){var t=e.layer;return c().Observable.defer((function(){return p().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=(0,d.getCapabilitiesUrl)({name:t,url:n&&n.url||i}),c=o().parse(a,!0);return o().format(O(O({},c),{},{search:void 0,query:O(O({},c.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(y.oB).switchMap((function(e){return c().Observable.bindNodeCallback((function(e,t){return(0,u.parseString)(e,{tagNameProcessors:[s.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}},65633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(86494),o=r(99767),i=r(27835);function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){var t=e.featureType,r=e.aggregationAttribute,c=e.groupByAttributes,u=void 0===c?[]:c,s=e.aggregateFunction,l=e.viewParams,p=e.filter,f=void 0===p?"":p,d="<wfs:GetFeature ".concat(l?'viewParams="'.concat(l,'"'):"",' outputFormat="GML2" service="WFS" version="1.0.0">')+'<wfs:Query typeName="'.concat(t,'">').concat(f,"</wfs:Query></wfs:GetFeature>");return(0,i.Uh)("gs:Aggregate",[(0,o.qP)("features",(0,o.fA)("text/xml","http://geoserver/wfs","POST",d)),(0,o.qP)("aggregationAttribute",(0,o.XA)((0,o.gN)(r)))].concat(a((0,n.castArray)(s).map((function(e){return(0,o.qP)("function",(0,o.XA)((0,o.gN)(e)))}))),[(0,o.qP)("singlePass",(0,o.XA)((0,o.gN)("false")))],a((0,n.castArray)(u).map((function(e){return(0,o.qP)("groupByAttributes",(0,o.XA)((0,o.gN)(e)))})))),(0,o.DK)((0,o.En)("result","application/json")))};const s=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.mG)(e,u(t),{},r)}},99767:(e,t,r)=>{"use strict";r.d(t,{qP:()=>s,XA:()=>l,fA:()=>p,gN:()=>f,p5:()=>d,Rr:()=>y,DK:()=>m,En:()=>g,Tr:()=>v,t$:()=>b,XJ:()=>w,Dx:()=>h,Jy:()=>O});var n=r(72500),o=r.n(n),i=r(86494);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e,t){return"<wps:Input>"+"<ows:Identifier>".concat(e,"</ows:Identifier>")+t+"</wps:Input>"},l=function(e){return"<wps:Data>".concat(e,"</wps:Data>")},p=function(e,t,r,n){return'<wps:Reference mimeType="'.concat(e,'" xlink:href="').concat(t,'" method="').concat(r,'"').concat("POST"===r?"":"/",">")+("POST"===r?"<wps:Body>".concat(n,"</wps:Body></wps:Reference>"):"")},f=function(e){return"<wps:LiteralData>".concat(e,"</wps:LiteralData>")},d=function(e,t,r){return"<wps:ComplexData".concat(t?' mimeType="'.concat(t,'"'):"").concat(r?' encoding="'.concat(r,'"'):"",">").concat(e,"</wps:ComplexData>")},y=function(e){return"<![CDATA[".concat(e,"]]>")},m=function(e){return"<wps:ResponseForm>".concat(e,"</wps:ResponseForm>")},g=function(e,t){return"<wps:RawDataOutput".concat(t?' mimeType="'.concat(t,'"'):"",">")+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"</wps:RawDataOutput>"},v=function(e,t,r){return"<wps:ResponseDocument".concat(e?' storeExecuteResponse="true"':"").concat(t?' status="true"':"",">")+r+"</wps:ResponseDocument>"},b=function(e,t,r,n,o){return"<wps:Output".concat(e?' mimeType="'.concat(e,'"'):"").concat(t?' asReference="true"':"",">")+"<ows:Identifier>".concat(r,"</ows:Identifier>")+(n?"<ows:Title>".concat(n,"</ows:Title>"):"")+(o?"<ows:Abstract>".concat(o,"</ows:Abstract>"):"")+"</wps:Output>"},w=function(e){return s("writeParameters",l(d("<dwn:Parameters>".concat(e,"</dwn:Parameters>"))))},h=function(e,t){return'<dwn:Parameter key="'.concat(e,'">').concat(t,"</dwn:Parameter>")},O=function(e,t){if(e){var r=o().parse(e,!0),n=r.pathname;return((0,i.endsWith)(r.pathname,"wfs")||(0,i.endsWith)(r.pathname,"wms"))&&(n=r.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),o().format(c(c({},r),{},{search:null,pathname:n,query:c(c({service:"WPS"},t),r.query)}))}return e}},27835:(e,t,r)=>{"use strict";r.d(t,{Uh:()=>P,W5:()=>A,ai:()=>x,RW:()=>I,dr:()=>D,mG:()=>F});var n=r(86494),o=r(49977),i=r(5055),a=r(7526),c=r(75875),u=r.n(c),s=r(99767);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){var t="function"==typeof Map?new Map:void 0;return(v=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return b(e,arguments,O(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)})(e)}function b(e,t,r){return(b=w()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&h(o,r.prototype),o}).apply(null,arguments)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,r,n=(t=o,r=w(),function(){var e,n=O(t);if(r){var o=O(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return g(this,e)});function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(r=n.call(this,e)).name="WPSExecuteError",r.code=t||e,r}return o}(v(Error)),P=function(e,t,r){return'<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:dwn="http://geoserver.org/wps/download" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"<wps:DataInputs>"+(t||[]).join("")+"</wps:DataInputs>"+(r||"")+"</wps:Execute>"},A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.Observable.defer((function(){return u().get((0,s.Jy)(e,{version:"1.0.0",REQUEST:"GetExecutionStatus",executionId:t}),y({headers:{Accept:"application/xml"}},r))}))},S=function(e,t){var r,o,i=function(e){var t,r,o,i,a,c,u,s,l,p,f,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.identity,y=null==e||null===(t=e.ExecuteResponse)||void 0===t||null===(r=t.Status)||void 0===r?void 0:r[0];return null!=y&&y.ProcessAccepted?{status:"ProcessAccepted"}:null!=y&&y.ProcessStarted?{status:"ProcessStarted"}:null!=y&&y.ProcessSucceeded?{status:"ProcessSucceeded",data:d(null===(o=e.ExecuteResponse.ProcessOutputs)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.Output)}:null!=y&&y.ProcessFailed?{status:"ProcessFailed",exceptionReport:null==y||null===(a=y.ProcessFailed)||void 0===a||null===(c=a[0])||void 0===c||null===(u=c.ExceptionReport)||void 0===u||null===(s=u[0])||void 0===s||null===(l=s.Exception)||void 0===l||null===(p=l[0])||void 0===p||null===(f=p.ExceptionText)||void 0===f?void 0:f[0]}:null!=y&&y.ProcessPaused?{status:"ProcessPaused"}:{status:"UnexpectedStatus"}}(e,t);if("ProcessFailed"===i.status)throw new j(i.exceptionReport,"ProcessFailed");if("UnexpectedStatus"===i.status)throw new j("UnexpectedProcessStatus");if("ProcessSucceeded"===i.status)return{succeeded:!0,data:i.data};var a=null==e||null===(r=e.ExecuteResponse)||void 0===r||null===(o=r.$)||void 0===o?void 0:o.statusLocation;if(!a)throw new j("NoStatusLocation");var c=a.indexOf("executionId=");if(-1===c)throw new j("NoExecutionId");var u=a.slice(c+12),s=u.indexOf("&");return{succeeded:!1,executionId:-1===s?u:u.slice(0,s)}},E=function(e){var t,r;return null!=e&&null!==(t=e.Identifier)&&void 0!==t&&t[0]?{identifier:null==e||null===(r=e.Identifier)||void 0===r?void 0:r[0]}:null},x=function(e){var t,r,n,o,i;return null!=e&&null!==(t=e.Data)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.LiteralData?{data:null==e||null===(n=e.Data)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.LiteralData)||void 0===i?void 0:i[0]}:null},I=function(e){var t,r,n,o,i,a;return null!=e&&e.Reference?{href:null==e||null===(t=e.Reference)||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.$)||void 0===n?void 0:n.href,mimeType:null==e||null===(o=e.Reference)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.$)||void 0===a?void 0:a.mimeType}:null},D=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return[E].concat(p(t||[])).map((function(t){return t(e)})).reduce((function(e,t){return t?y(y({},e),t):e}),{})}))}},C=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.Observable.defer((function(){return u().post((0,s.Jy)(e,{version:"1.0.0",REQUEST:"Execute"}),t,y({headers:{"Content-Type":"application/xml"}},r))}))},F=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=r.executeStatusUpdateInterval,u=void 0===c?2e3:c,s=r.outputsExtractor,l=function(e){return o.Observable.defer((function(){return new Promise((function(t,r){return(0,i.parseString)(e,{tagNameProcessors:[a.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))};return C(e,t,n).catch((function(){throw new j("ExecuteProcessXHRFailed")})).switchMap((function(e){return"application/xml"===e.headers["content-type"]||"text/xml"===e.headers["content-type"]?l(e.data).map((function(t){return{data:t,type:"application/xml",originalData:e.data}})):o.Observable.of({data:e.data,type:e.headers["content-type"]})})).flatMap((function(t){var r=t.data,n=t.type,i=t.originalData;if("application/xml"!==n)return o.Observable.of(r);if(null==r||!r.ExecuteResponse)return o.Observable.of(i);var a=S(r,s),c=a.succeeded,p=a.data,f=a.executionId;if(c)return o.Observable.of(p);var d=o.Observable.interval(u).take(1).flatMap((function(){return A(e,f).catch((function(){throw new j("GetExecutionStatusXHRFailed")})).flatMap((function(e){return l(e.data).flatMap((function(e){var t=S(e,s);return t.succeeded?o.Observable.of(t.data):d}))}))}));return d}))}},24684:(e,t,r)=>{"use strict";r.d(t,{F:()=>o,y:()=>i});var n=r(86494),o=function(e){return(0,n.get)(e,"router.location.pathname")||"/"},i=function(e){return(0,n.get)(e,"router.location.search")||""}},12226:(e,t,r)=>{"use strict";r.d(t,{B:()=>o});var n=r(62651);function o(e,t){return(0,n.U)(e)(t)}}}]);